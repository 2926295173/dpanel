"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9170],{37767:function(ee,K,e){e.d(K,{Z:function(){return Ee}});var S=e(15009),i=e.n(S),y=e(99289),f=e.n(y),O=e(5574),j=e.n(O),p=e(45605),h=e(38345),R=e(97269),P=e(26412),$=e(42075),C=e(96074),B=e(25593),V=e(2487),u=e(67294),M=e(76428),d=e(78498),k=e(44771),n=e(13822),H=e(24963),J=e(37413),q=e(5251),ae=e(82346),r=e(87662),o=e(36146),t=e(85893);function Ee(m){var ie,se,Y,le,de,ue,oe,ce,ne,a,G=new o.Uo("components.appDetail.appDetailContainer"),je=(0,u.useState)(""),me=j()(je,2),_e=me[0],fe=me[1],pe=(0,ae.useAccess)(),Pe=(0,u.useContext)(H.Z),ve=Pe.message,he=(0,u.useRef)(),ge=[],v=[],X=[],w=(0,u.useState)(""),z=j()(w,2),b=z[0],L=z[1];return(0,u.useEffect)(function(){if(m.data){var _;(_=he.current)===null||_===void 0||_.setFieldValue("restart",m.data.info.HostConfig.RestartPolicy.Name),(0,r.K3)().then(function(x){var I;L((I=x.data.serverUrl)!==null&&I!==void 0?I:"")}),fe(m.data.info.Name)}},[m.data]),m.data&&m.data.domain&&m.data.domain.map(function(_){X.push(_.setting.enableSSL?"https://"+_.serverName:"http://"+_.serverName)}),m.data&&m.data.info.NetworkSettings&&m.data.info.NetworkSettings.Ports&&Object.keys(m.data.info.NetworkSettings.Ports).map(function(_){var x,I,U=(x=(I=m.data.info)===null||I===void 0?void 0:I.NetworkSettings.Ports[_])!==null&&x!==void 0?x:[{HostPort:null,HostIp:""}],F=_.split("/"),te=j()(F,2),A=te[0],W=te[1];U.map(function(D){D.HostPort?ge.push({PrivatePort:A,Type:W,IP:D.HostIp,PublicPort:D.HostPort}):v.push({PrivatePort:A,Type:W,IP:"",PublicPort:""})})}),(0,t.jsxs)(t.Fragment,{children:[m.data&&m.data.info.State.Running&&(0,t.jsx)(J.Z,{publicPort:ge,privatePort:v,domain:X,serverIp:b,showInDetail:!0,ghost:m.ghost,layout:"inline"}),(0,t.jsx)(h.Z,{title:(0,t.jsx)(p.Z,{}),subTitle:G.format("cardTitle"),ghost:m.ghost,children:(0,t.jsxs)(P.Z,{column:1,bordered:!0,children:[(0,t.jsx)(P.Z.Item,{label:"Hostname",children:(0,t.jsx)($.Z,{split:(0,t.jsx)(C.Z,{type:"vertical"}),children:(0,t.jsx)(M.Z,{title:(ie=m.data.info)===null||ie===void 0?void 0:ie.Config.Hostname})})}),(0,t.jsx)(P.Z.Item,{label:G.format("containerName"),children:(0,t.jsxs)($.Z,{split:(0,t.jsx)(C.Z,{type:"vertical"}),children:[(0,t.jsx)(M.Z,{title:(se=m.data.info)===null||se===void 0?void 0:se.Id.substring(0,12)}),(0,t.jsx)(B.Z.Text,{copyable:!0,editable:{tooltip:G.format("containerNameEditTip"),onChange:function(){var _=f()(i()().mark(function I(U){var F,te;return i()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if((F=m.data.info)!==null&&F!==void 0&&F.Id){W.next=2;break}return W.abrupt("return");case 2:return W.next=4,(0,n.eE)({md5:m.data.info.Id,name:U});case 4:te=W.sent,fe(U),ve.success(o.FD.format("finish"));case 7:case"end":return W.stop()}},I)}));function x(I){return _.apply(this,arguments)}return x}()},children:(0,q.fi)(_e,"/")})]})}),(0,t.jsx)(P.Z.Item,{label:(0,t.jsx)(d.Z,{title:G.format("network"),help:G.format("networkHelp")}),children:((Y=m.data.info)===null||Y===void 0?void 0:Y.State.Running)&&(0,t.jsxs)(P.Z,{column:1,bordered:!0,children:[m.data.info.NetworkSettings.Networks&&Object.keys(m.data.info.NetworkSettings.Networks).map(function(_,x){var I,U,F;return(0,t.jsx)(P.Z.Item,{label:_,children:_=="host"?G.format("networkUseHost"):(0,t.jsxs)($.Z,{direction:"vertical",children:[(0,t.jsx)(M.Z,{title:(I=m.data.info)===null||I===void 0?void 0:I.NetworkSettings.Networks[_].IPAddress}),(U=m.data.info)===null||U===void 0?void 0:U.NetworkSettings.Networks[_].Gateway,(F=m.data.info)===null||F===void 0?void 0:F.NetworkSettings.Networks[_].MacAddress]})},x)}),m.data.info.HostConfig.ExtraHosts&&(0,t.jsx)(P.Z.Item,{label:G.format("networkExtra"),children:(0,t.jsx)($.Z,{direction:"vertical",children:m.data.info.HostConfig.ExtraHosts.map(function(_,x){if(_.indexOf(":")>-1){var I=_.split(":");return"".concat(I[0]," - ").concat(I.slice(1).join(":"))}})})},"host")]})}),(0,t.jsx)(P.Z.Item,{label:G.format("runTime"),children:G.format("runTimeValue",{create:new Date((le=(de=m.data.info)===null||de===void 0?void 0:de.Created)!==null&&le!==void 0?le:"").toLocaleString(),upgrade:new Date((ue=(oe=m.data.info)===null||oe===void 0?void 0:oe.State.StartedAt)!==null&&ue!==void 0?ue:"").toLocaleString()})}),pe.canSeeContainerListManage&&(0,t.jsx)(P.Z.Item,{label:G.format("restartPolicy"),children:(0,t.jsx)(R.A,{name:"container-restart",submitter:!1,onValuesChange:function(){var _=f()(i()().mark(function x(I){var U,F;return i()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if((U=m.data.info)!==null&&U!==void 0&&U.Id){A.next=2;break}return A.abrupt("return");case 2:return A.next=4,(0,n.eE)({md5:m.data.info.Id,restart:I.restart});case 4:return F=A.sent,ve.success(o.FD.format("finish")),A.abrupt("return");case 7:case"end":return A.stop()}},x)}));return function(x){return _.apply(this,arguments)}}(),layout:"inline",formRef:he,children:(0,t.jsx)(k.Z,{defaultValue:(ce=m.data.info)===null||ce===void 0?void 0:ce.HostConfig.RestartPolicy.Name})})}),(0,t.jsx)(P.Z.Item,{label:G.format("env"),children:(0,t.jsx)(V.Z,{dataSource:(ne=(a=m.data.info)===null||a===void 0?void 0:a.Config.Env)!==null&&ne!==void 0?ne:[],renderItem:function(x){var I=x.split("=");return(0,t.jsxs)(V.Z.Item,{children:[(0,t.jsx)(B.Z.Text,{code:!0,children:I[0]})," = ",(0,t.jsx)(B.Z.Text,{copyable:!0,children:I.slice(1).join("=")})]})}})})]})})]})}},14245:function(ee,K,e){e.d(K,{Z:function(){return p}});var S=e(36146),i=e(60433),y=e(38345),f=e(26412),O=e(25593),j=e(85893);function p(h){var R=new S.Uo("components.appDetail.appDetailQuickImage");return(0,j.jsx)(y.Z,{ghost:h.ghost,title:(0,j.jsx)(i.Z,{}),subTitle:R.format("cardTitle"),children:(0,j.jsxs)(f.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,j.jsx)(f.Z.Item,{label:"Image Tag",children:(0,j.jsx)(O.Z.Text,{copyable:!0,children:h.data.Config.Image})}),(0,j.jsx)(f.Z.Item,{label:"Image",children:h.data.Image}),(0,j.jsx)(f.Z.Item,{label:"CMD",children:h.data.Config.Cmd&&h.data.Config.Cmd.join(" ")}),(0,j.jsx)(f.Z.Item,{label:"ENTRYPOINT",children:h.data.Config.Entrypoint}),(0,j.jsx)(f.Z.Item,{label:"Labels",children:(0,j.jsx)(f.Z,{column:1,bordered:!0,children:h.data&&Object.keys(h.data.Config.Labels).map(function(P){return(0,j.jsx)(f.Z.Item,{label:P,children:h.data.Config.Labels[P]},P)})})})]})})}},72409:function(ee,K,e){e.d(K,{Z:function(){return ge}});var S=e(15009),i=e.n(S),y=e(99289),f=e.n(y),O=e(5574),j=e.n(O),p=e(67294),h=e(80821),R=e(62597),P=e(13822),$=e(43425),C=e(58638),B=e(60219),V=e(86548),u=e(57132),M=e(87784),d=e(25035),k=e(38345),n=e(97269),H=e(62370),J=e(5966),q=e(52688),ae=e(82346),r=e(42075),o=e(65233),t=e(96074),Ee=e(28036),m=e(25593),ie=e(85418),se=e(40411),Y=e(84567),le=e(83062),de=e(93162),ue=e(24739),oe=e(97462),ce=e(70146),ne=e(36146),a=e(85893);function G(v){var X=(0,p.useRef)(),w=new ne.Uo("components.appDetail");return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(h.Z,{icon:(0,a.jsx)(B.Z,{}),action:f()(i()().mark(function z(){var b,L,_,x;return i()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,ce.yB)({id:v.container.Name,enableImage:(b=X.current)===null||b===void 0?void 0:b.getFieldValue("enableImage"),volume:Object.keys((L=(_=X.current)===null||_===void 0?void 0:_.getFieldValue("volume"))!==null&&L!==void 0?L:{}).filter(function(F){return F}),enableCommitImage:(x=X.current)===null||x===void 0?void 0:x.getFieldValue("enableCommitImage")});case 2:case"end":return U.stop()}},z)})),confirmOnOpenChange:function(b){var L,_;!((L=X.current)===null||L===void 0)&&L.resetFields&&((_=X.current)===null||_===void 0||_.resetFields())},confirm:(0,a.jsxs)(r.Z,{style:{width:650,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,a.jsx)(m.Z.Text,{children:(0,a.jsx)("ul",{children:w.prefix("backupVolumeTip",4).map(function(z,b){return(0,a.jsxs)("li",{children:[z," ",b==3&&(0,a.jsx)(ae.Link,{to:"/app/backup",children:ne.Ob.format("container.backup")})]},b)})})}),(0,a.jsxs)(n.A,{layout:"horizontal",formRef:X,submitter:!1,children:[(0,a.jsxs)(ue.UW,{children:[(0,a.jsx)(H.Z,{valuePropName:"checked",name:"enableSelectVolume",children:(0,a.jsx)(Y.Z,{disabled:!v.container.Mounts||v.container.Mounts.length==0,children:w.format("backupVolumeEnableSelectVolume")})}),(0,a.jsx)(H.Z,{valuePropName:"checked",name:"enableImage",children:(0,a.jsx)(Y.Z,{children:w.format("backupVolumeEnableImage")})}),(0,a.jsx)(oe.Z,{name:["enableImage"],children:function(b){var L=b.enableImage;if(L)return(0,a.jsx)(H.Z,{valuePropName:"checked",name:"enableCommitImage",children:(0,a.jsx)(Y.Z,{children:w.format("backupVolumeEnableCommitImage")})})}})]}),(0,a.jsx)(oe.Z,{name:["enableSelectVolume"],children:function(b){var L=b.enableSelectVolume;return L&&(0,a.jsx)(r.Z,{wrap:!0,children:v.container.Mounts.map(function(_,x){return(0,a.jsx)(H.Z,{valuePropName:"checked",name:["volume",_.Destination],children:(0,a.jsx)(Y.Z,{children:_.Destination})},"volume-".concat(x))})})}})]})]}),children:w.format("backupVolumeButton")})})}var je=e(24963),me=e(99861),_e=e(3393),fe=e(50888),pe=e(16596),Pe=e(1699),ve=e(5251),he=(0,p.forwardRef)(function(v,X){var w;(0,p.useImperativeHandle)(X,function(){return{}});var z=(0,p.useRef)(),b=(0,p.useRef)(),L=(0,p.useRef)(),_=(0,p.useContext)(je.Z),x=_.loading,I=(0,p.useRef)(),U=(0,p.useRef)(),F=(0,p.useState)({status:0,error:""}),te=j()(F,2),A=te[0],W=te[1],D=new ne.Uo("components.appDetail.appDetailQuickManage");function De(Z){return Ie.apply(this,arguments)}function Ie(){return Ie=f()(i()().mark(function Z(s){var l,E,c;return i()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(E=-2,!s.ignore){g.next=6;break}if(!(s.ignore.indexOf("".concat(s.info.Name,"@*"))>-1)){g.next=4;break}return g.abrupt("return",{status:-2,error:""});case 4:if(!(s.ignore.indexOf("".concat(s.info.Name,"@").concat(s.info.Image))>-1)){g.next=6;break}return g.abrupt("return",{status:-2,error:""});case 6:return g.next=8,(0,_e.ZQ)({tag:(l=s.info.Config.Image)!==null&&l!==void 0?l:"",md5:s.info.Image,cacheTime:3600}).catch(function(N){E=-1});case 8:if(c=g.sent,!(c&&c.data.error&&c.data.error!="")){g.next=11;break}return g.abrupt("return",{status:-1,error:c.data.error});case 11:return c&&(c.data.digestLocal&&c.data.digestLocal.length>0?E=c.data.upgrade?1:2:c.data.error!=""?E=-1:E=-2),g.abrupt("return",{status:E,error:""});case 13:case"end":return g.stop()}},Z)})),Ie.apply(this,arguments)}return(0,p.useEffect)(function(){v.checkContainerUpgrade&&(W({status:0}),De(v.data).then(function(Z){W(Z)}))},[v.data]),(0,a.jsx)(k.Z,{ghost:v.ghost,title:(0,a.jsx)($.Z,{}),subTitle:D.format("cardTitle"),children:(0,a.jsxs)(r.Z,{wrap:!0,children:[(0,a.jsx)(h.Z,{icon:(0,a.jsx)(C.Z,{}),action:function(){var s,l;return(0,P.LJ)({md5:(s=(l=v.data)===null||l===void 0?void 0:l.info.Id)!==null&&s!==void 0?s:""})},confirm:D.format("exportConfirm"),onSuccess:function(s){var l,E=new Blob([s],{type:"application/tar"});(0,de.saveAs)(E,(0,ve.fi)((l=v.data)===null||l===void 0?void 0:l.info.Name,"/")+".tar")},children:D.format("exportButton")}),(0,a.jsx)(h.Z,{icon:(0,a.jsx)(B.Z,{}),action:f()(i()().mark(function Z(){var s,l,E,c,T;return i()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,(0,P.Re)({md5:(s=(l=v.data)===null||l===void 0?void 0:l.info.Id)!==null&&s!==void 0?s:"",name:(E=(c=b.current)===null||c===void 0?void 0:c.getFieldValue("saveImageName"))!==null&&E!==void 0?E:(T=v.data)===null||T===void 0?void 0:T.info.Name});case 2:case"end":return N.stop()}},Z)})),confirmTitle:D.format("commitConfirmTitle"),confirm:(0,a.jsx)(r.Z,{style:{width:400,marginTop:"10px",paddingRight:"10px"},direction:"vertical",children:(0,a.jsx)(n.A,{formRef:b,submitter:!1,children:(0,a.jsx)(H.Z,{name:"saveImageName",children:(0,a.jsx)(o.Z,{addonBefore:D.format("commitConfirmSaveImageName")})})})}),children:D.format("commitButton")}),v.data&&(0,a.jsx)(Pe.u,{access:"canSeeContainerBackup",children:(0,a.jsx)(G,{container:v.data.info})}),(0,a.jsx)(t.Z,{type:"vertical"}),(0,a.jsx)(ae.Link,{to:"/app/create/image?id=".concat((w=v.data)===null||w===void 0?void 0:w.info.Id,"&op=update"),children:(0,a.jsx)(Ee.ZP,{type:"primary",icon:(0,a.jsx)(V.Z,{}),children:D.format("editButton")})}),(0,a.jsx)(h.Z,{icon:(0,a.jsx)(u.Z,{}),action:f()(i()().mark(function Z(){var s,l,E,c,T,g;return i()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,(0,P.aF)({md5:(s=(l=v.data)===null||l===void 0?void 0:l.info.Id)!==null&&s!==void 0?s:"",copyName:(E=(c=L.current)===null||c===void 0?void 0:c.getFieldValue("copyName"))!==null&&E!==void 0?E:"",enableRandomPort:(T=(g=L.current)===null||g===void 0?void 0:g.getFieldValue("enableRandomPort"))!==null&&T!==void 0?T:!1});case 2:return Q.abrupt("return",Q.sent);case 3:case"end":return Q.stop()}},Z)})),confirm:(0,a.jsxs)(r.Z,{style:{width:400,paddingRight:"10px"},direction:"vertical",children:[(0,a.jsx)(m.Z.Text,{children:D.format("copyConfirmTip")}),(0,a.jsxs)(n.A,{formRef:L,submitter:!1,layout:"horizontal",children:[(0,a.jsx)("br",{}),(0,a.jsx)(J.Z,{label:D.format("copyCopyName"),name:"copyName"}),(0,a.jsx)(q.Z,{label:D.format("copyEnableRandomPort"),name:"enableRandomPort"})]})]}),onSuccess:function(s){var l;(l=L.current)===null||l===void 0||l.resetFields()},children:D.format("copyButton")}),v.data&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(me.Z,{image:[v.data.info.Config.Image],ref:I}),(0,a.jsx)(ie.Z,{placement:"bottomLeft",menu:{items:[{key:"1",label:(0,a.jsx)(h.Z,{action:f()(i()().mark(function Z(){var s,l,E,c,T,g;return i()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,(0,R.ze)({md5:(s=(l=v.data.info)===null||l===void 0?void 0:l.Name)!==null&&s!==void 0?s:"",imageId:""});case 2:return W({status:0}),Q.next=5,(0,_e.ZQ)({tag:(E=(c=v.data.info)===null||c===void 0?void 0:c.Config.Image)!==null&&E!==void 0?E:"",md5:(T=(g=v.data.info)===null||g===void 0?void 0:g.Image)!==null&&T!==void 0?T:"",cacheTime:0}).then(function(re){re.data.error&&re.data.error!=""?W({status:-1,error:re.data.error}):re.data.digestLocal&&re.data.digestLocal.length>0?W({status:re.data.upgrade?1:2}):W({status:-2})}).catch(function(re){W({status:-1})});case 5:return Q.abrupt("return",Q.sent);case 6:case"end":return Q.stop()}},Z)})),type:"link",children:D.format("upgradeCheckUpgrade")})},{key:"2",label:(0,a.jsx)(h.Z,{action:f()(i()().mark(function Z(){var s,l,E,c;return i()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,R.ze)({md5:(s=(l=v.data.info)===null||l===void 0?void 0:l.Name)!==null&&s!==void 0?s:"",imageId:(E=(c=v.data.info)===null||c===void 0?void 0:c.Image)!==null&&E!==void 0?E:""});case 2:return g.abrupt("return",g.sent);case 3:case"end":return g.stop()}},Z)})),type:"link",children:D.format("upgradeCheckUpgradeIgnoreOnce")})},{key:"3",label:(0,a.jsx)(h.Z,{action:f()(i()().mark(function Z(){var s,l;return i()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,R.ze)({md5:(s=(l=v.data.info)===null||l===void 0?void 0:l.Name)!==null&&s!==void 0?s:"",imageId:"*"});case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},Z)})),type:"link",children:D.format("upgradeCheckUpgradeIgnore")})}]},children:(0,a.jsx)(se.Z,{title:A.error,count:D.format("checkImageUpgrade."+A.status),color:D.format("checkImageUpgradeColor."+A.status),children:(0,a.jsx)(h.Z,{disabled:A.status===0,icon:A.status===0?(0,a.jsx)(fe.Z,{}):(0,a.jsx)(pe.Z,{}),action:f()(i()().mark(function Z(){var s,l,E,c,T;return i()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,(s=I.current)===null||s===void 0?void 0:s.start();case 2:return x.show(),(l=I.current)===null||l===void 0||l.finish(),N.next=6,(0,P.RF)({md5:(E=v.data.info.Id)!==null&&E!==void 0?E:"",imageTag:"",enableBak:(c=(T=U.current)===null||T===void 0?void 0:T.getFieldValue("enableBak"))!==null&&c!==void 0?c:!1});case 6:return N.abrupt("return",N.sent);case 7:case"end":return N.stop()}},Z)})),confirm:(0,a.jsxs)(r.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,a.jsx)(m.Z.Text,{children:D.format("upgradeConfirm")}),(0,a.jsx)(n.A,{formRef:U,submitter:!1,layout:"inline",children:(0,a.jsx)(H.Z,{name:"enableBak",valuePropName:"checked",children:(0,a.jsx)(Y.Z,{children:D.format("upgradeConfirmEnableBak")})})})]}),onSuccess:function(s){x.destroy(),v.checkContainerUpgrade&&v.checkContainerUpgrade()},children:D.format("upgradeButton")})})})]}),(0,a.jsx)(t.Z,{type:"vertical"}),v.data&&(0,a.jsx)(h.Z,{action:function(){var s,l,E,c,T,g;return(0,R.Ct)({md5:(s=(l=v.data)===null||l===void 0?void 0:l.info.Id)!==null&&s!==void 0?s:"",deleteImage:(E=(c=z.current)===null||c===void 0?void 0:c.getFieldValue("deleteImage"))!==null&&E!==void 0?E:!1,deleteVolume:(T=(g=z.current)===null||g===void 0?void 0:g.getFieldValue("deleteVolume"))!==null&&T!==void 0?T:!1})},danger:!0,type:"primary",icon:(0,a.jsx)(M.Z,{}),onSuccess:function(){x.destroy(),v.checkContainerUpgrade&&v.checkContainerUpgrade()},confirm:(0,a.jsxs)(r.Z,{style:{width:200},direction:"vertical",children:[(0,a.jsx)(m.Z.Text,{children:ne.FD.format("confirm.title")}),(0,a.jsxs)(n.A,{formRef:z,layout:"inline",submitter:!1,children:[(0,a.jsx)(H.Z,{addonAfter:(0,a.jsx)(le.Z,{title:D.format("deleteConfirmTip"),children:(0,a.jsx)(d.Z,{})}),name:"deleteVolume",valuePropName:"checked",children:(0,a.jsx)(Y.Z,{children:D.format("deleteConfirmDeleteVolume")})}),(0,a.jsx)(H.Z,{name:"deleteImage",valuePropName:"checked",children:(0,a.jsx)(Y.Z,{children:D.format("deleteConfirmDeleteImage")})})]})]}),children:D.format("deleteButton")})]})})}),ge=he},14189:function(ee,K,e){var S=e(43425),i=e(74842),y=e(87784),f=e(33160),O=e(30159),j=e(89035),p=e(38345),h=e(42075),R=e(96074),P=e(28036),$=e(67294),C=e(94359),B=e(80821),V=e(13822),u=e(99922),M=e(36146),d=e(85893),k=(0,$.forwardRef)(function(n,H){(0,$.useImperativeHandle)(H,function(){return{showConsole:ae}});var J=new M.Uo("components.appDetail.appDetailQuickOperation"),q=(0,$.useRef)();function ae(r){var o;(o=q.current)===null||o===void 0||o.show({url:"/console/container/".concat(n.data.Id),title:n.data.Name,workDir:r})}return(0,d.jsx)(p.Z,{title:(0,d.jsx)(S.Z,{}),ghost:n.ghost,subTitle:(0,d.jsxs)(h.Z,{children:[J.format("cardTitle")," - ",n.data&&(0,d.jsx)(C.Z,{status:"container.".concat(n.data.State.Status),tip:n.data.State.Status})]}),children:(0,d.jsxs)(h.Z,{wrap:!0,children:[(0,d.jsx)(B.Z,{icon:(0,d.jsx)(i.Z,{}),action:function(){var o,t;return(0,V.IW)({md5:(o=(t=n.data)===null||t===void 0?void 0:t.Id)!==null&&o!==void 0?o:"",operate:"start"})},onSuccess:function(){return n.onFinish&&n.onFinish()},disabled:n.data&&n.data.State.Running||n.data&&n.data.State.Paused,children:J.format("start")}),(0,d.jsx)(B.Z,{action:function(){var o,t;return(0,V.IW)({md5:(o=(t=n.data)===null||t===void 0?void 0:t.Id)!==null&&o!==void 0?o:"",operate:"stop"})},icon:(0,d.jsx)(y.Z,{}),onSuccess:function(){return n.onFinish&&n.onFinish()},disabled:n.data&&n.data.State.Dead,children:J.format("stop")}),(0,d.jsx)(B.Z,{action:function(){var o,t;return(0,V.IW)({md5:(o=(t=n.data)===null||t===void 0?void 0:t.Id)!==null&&o!==void 0?o:"",operate:"restart"})},onSuccess:function(){return n.onFinish&&n.onFinish()},icon:(0,d.jsx)(f.Z,{}),children:J.format("restart")}),(0,d.jsx)(B.Z,{action:function(){var o,t;return(0,V.IW)({md5:(o=(t=n.data)===null||t===void 0?void 0:t.Id)!==null&&o!==void 0?o:"",operate:"pause"})},onSuccess:function(){return n.onFinish&&n.onFinish()},icon:(0,d.jsx)(O.Z,{}),disabled:n.data&&n.data&&!n.data.State.Running,children:J.format("pause")}),(0,d.jsx)(B.Z,{action:function(){var o,t;return(0,V.IW)({md5:(o=(t=n.data)===null||t===void 0?void 0:t.Id)!==null&&o!==void 0?o:"",operate:"unpause"})},onSuccess:function(){return n.onFinish&&n.onFinish()},icon:(0,d.jsx)(i.Z,{}),disabled:n.data&&!n.data.State.Paused,children:J.format("unpause")}),(0,d.jsx)(R.Z,{type:"vertical"}),n.data&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.Z,{showFileExplorer:!0,ref:q}),(0,d.jsx)(P.ZP,{type:"dashed",onClick:function(){n.data&&ae(n.data.Config.WorkingDir)},icon:(0,d.jsx)(j.Z,{}),children:"Console"})]}),(0,d.jsx)(R.Z,{type:"vertical"}),n.extra&&n.extra.map(function(r,o){return(0,d.jsx)("span",{children:r},o)})]})})});K.Z=k},52031:function(ee,K,e){e.d(K,{Z:function(){return p}});var S=e(31574),i=e(38345),y=e(26412),f=e(78451),O=e(36146),j=e(85893);function p(h){var R,P=new O.Uo("components.appDetail.appDetailVolume");return h.data&&h.data.Mounts&&h.data.Mounts.length>0&&(0,j.jsx)(i.Z,{ghost:h.ghost,title:(0,j.jsx)(S.Z,{}),subTitle:P.format("cardTitle"),children:(0,j.jsx)(y.Z,{column:1,bordered:!0,children:(R=h.data)===null||R===void 0?void 0:R.Mounts.map(function($,C){return(0,j.jsx)(y.Z.Item,{labelStyle:{width:"30%"},label:$.Type=="volume"?(0,j.jsx)(f.Z,{content:$.Name}):$.Source,children:$.Destination},C)})})})}},94359:function(ee,K,e){e.d(K,{Z:function(){return M}});var S=e(5574),i=e.n(S),y=e(3089),f=e(98165),O=e(18429),j=e(8751),p=e(66212),h=e(14313),R=e(30159),P=e(87740),$=e(50888),C=e(66309),B=e(83062),V=e(36146),u=e(85893);function M(d){var k,n,H=new V.Uo("components.containerStatus"),J=d.status.split("."),q=i()(J,2),ae=q[0],r=q[1],o="";o=H.format(d.status,(k=d.statusValue)!==null&&k!==void 0?k:{});var t=(0,u.jsx)(u.Fragment,{});return r=="0"&&(t=(0,u.jsx)(C.Z,{icon:(0,u.jsx)(y.Z,{}),color:"default",children:o})),r=="10"&&(t=(0,u.jsx)(C.Z,{icon:(0,u.jsx)(f.Z,{spin:!0}),color:"processing",children:o})),r=="20"&&(t=(0,u.jsx)(C.Z,{icon:(0,u.jsx)(O.Z,{}),color:"error",children:o})),r=="30"&&(t=(0,u.jsx)(C.Z,{icon:(0,u.jsx)(j.Z,{}),color:"success",children:o})),r=="new"&&(t=(0,u.jsx)(C.Z,{icon:(0,u.jsx)(p.Z,{}),children:o})),(r=="running"||r=="healthy"||r=="active"||r=="ready")&&(t=(0,u.jsx)(C.Z,{icon:(0,u.jsx)(h.Z,{}),color:"success",children:o})),(r=="paused"||r=="pause"||r=="rollback_paused")&&(t=(0,u.jsx)(C.Z,{icon:(0,u.jsx)(R.Z,{}),children:o})),(r=="waiting"||r=="starting"||r=="accepted")&&(t=(0,u.jsx)(C.Z,{icon:(0,u.jsx)(P.Z,{}),children:o})),["deploying","pending","allocated","accepted","assigned","preparing","updating","rollback_started"].includes(r)&&(t=(0,u.jsx)(C.Z,{icon:(0,u.jsx)($.Z,{}),color:"processing",children:o})),(r=="error"||r=="down"||r=="failed")&&(t=(0,u.jsx)(C.Z,{icon:(0,u.jsx)(O.Z,{}),color:"error",children:o})),["complete","completed","rollback_completed"].includes(r)&&(t=(0,u.jsx)(C.Z,{icon:(0,u.jsx)(j.Z,{}),color:"success",children:o})),["exited","dead","removing","restarting","unhealthy","created","drain","unreachable","shutdown","rejected","remove","orphaned"].includes(r)&&(t=(0,u.jsx)(C.Z,{icon:(0,u.jsx)(O.Z,{}),color:"warning",children:o})),(0,u.jsx)(B.Z,{placement:"top",title:(n=d.tip)!==null&&n!==void 0?n:"",children:t})}},76428:function(ee,K,e){e.d(K,{Z:function(){return f}});var S=e(25593),i=e(67294),y=e(85893);function f(O){return(0,y.jsx)(S.Z.Text,{copyable:!0,children:O.title})}},78498:function(ee,K,e){e.d(K,{Z:function(){return j}});var S=e(25035),i=e(42075),y=e(83062),f=e(67294),O=e(85893);function j(p){return(0,O.jsxs)(i.Z,{children:[p.title,(0,O.jsx)(y.Z,{title:p.help,children:(0,O.jsx)(S.Z,{})})]})}},70146:function(ee,K,e){e.d(K,{SR:function(){return C},VE:function(){return P},Zy:function(){return h},iD:function(){return V},yB:function(){return j}});var S=e(15009),i=e.n(S),y=e(99289),f=e.n(y),O=e(82346);function j(M){return p.apply(this,arguments)}function p(){return p=f()(i()().mark(function M(d){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,O.request)("/api/app/container-backup/create",{data:d,method:"POST"});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},M)})),p.apply(this,arguments)}function h(M){return R.apply(this,arguments)}function R(){return R=f()(i()().mark(function M(d){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,O.request)("/api/app/container-backup/get-list",{method:"POST",data:d}));case 1:case"end":return n.stop()}},M)})),R.apply(this,arguments)}function P(M){return $.apply(this,arguments)}function $(){return $=f()(i()().mark(function M(d){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,O.request)("/api/app/container-backup/delete",{method:"POST",data:d}));case 1:case"end":return n.stop()}},M)})),$.apply(this,arguments)}function C(M){return B.apply(this,arguments)}function B(){return B=f()(i()().mark(function M(d){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,O.request)("/api/app/container-backup/restore",{method:"POST",data:d}));case 1:case"end":return n.stop()}},M)})),B.apply(this,arguments)}function V(M){return u.apply(this,arguments)}function u(){return u=f()(i()().mark(function M(d){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,O.request)("/api/app/container-backup/get-detail",{method:"POST",data:d}));case 1:case"end":return n.stop()}},M)})),u.apply(this,arguments)}}}]);
