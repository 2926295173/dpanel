"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5897],{80821:function(A,f,n){n.d(f,{Z:function(){return R}});var m=n(5574),u=n.n(m),l=n(93246),E=n(54006),S=n(31418),_=n(86738),P=n(14726),g=n(83062),D=n(67294),c=n(85893);function R(t){var M=(0,D.useState)(!1),y=u()(M,2),o=y[0],h=y[1],r=S.Z.useApp(),i=(0,E.useIntl)(),a=function(){h(!0),t.action().then(function(d){if(h(!1),typeof t.onSuccess=="function"&&t.onSuccess(d),t.messageSuccess){var s="";typeof t.messageSuccess=="function"?s=t.messageSuccess(d):s=t.messageSuccess,s.indexOf(".")>-1&&(s=i.formatMessage({id:s})),t.asynced?(0,l.Rk)(r,s):(0,l.$h)(r,s)}}).catch(function(d){h(!1),typeof t.onError=="function"&&t.onError(d)})};return t.confirm?(0,c.jsx)(_.Z,{style:{width:500},title:"\u63D0\u793A",description:t.confirm,onConfirm:a,okText:"Yes",cancelText:"No",children:(0,c.jsx)(P.ZP,{disabled:t.disabled,icon:t.icon,loading:o,danger:t.danger,type:t.type,children:t.children})}):(0,c.jsx)(g.Z,{title:t.tips,children:(0,c.jsx)(P.ZP,{disabled:t.disabled,icon:t.icon,loading:o,onClick:a,danger:t.danger,type:t.type,children:t.children})})}},53889:function(A,f,n){n.r(f),n.d(f,{default:function(){return h}});var m=n(15009),u=n.n(m),l=n(99289),E=n.n(l),S=n(80821),_=n(54006);function P(r){return g.apply(this,arguments)}function g(){return g=E()(u()().mark(function r(i){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.request)("/api/common/event/get-list",{method:"POST",data:i}));case 1:case"end":return e.stop()}},r)})),g.apply(this,arguments)}function D(r){return c.apply(this,arguments)}function c(){return c=E()(u()().mark(function r(i){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.request)("/api/common/event/prune",{method:"POST",data:i}));case 1:case"end":return e.stop()}},r)})),c.apply(this,arguments)}var R=n(6409),t=n(6110),M=n(88717),y=n(67294),o=n(85893);function h(){var r=(0,y.useRef)();return(0,o.jsx)(t._z,{header:{extra:[(0,o.jsx)(S.Z,{action:function(){return D()},onSuccess:function(){var a,e;return!((a=r.current)===null||a===void 0)&&a.reloadAndRest&&((e=r.current)===null||e===void 0||e.reloadAndRest()),!0},onError:function(){var a,e;return!((a=r.current)===null||a===void 0)&&a.reset&&((e=r.current)===null||e===void 0||e.reset()),!0},messageSuccess:"\u6E05\u9664\u6210\u529F",confirm:"\u662F\u5426\u8981\u6E05\u9664\u6389\u6240\u6709\u4E8B\u4EF6\u4FE1\u606F",danger:!0,type:"primary",children:"\u6E05\u9664\u4E8B\u4EF6\u901A\u77E5"})]},children:(0,o.jsx)(M.Z,{scroll:{x:"max-content"},columns:[{title:"\u7C7B\u578B",ellipsis:!0,dataIndex:"type",width:200},{title:"\u8BE6\u60C5",search:!1,render:function(a,e,d,s){return(0,o.jsxs)(o.Fragment,{children:[e.action," ",e.message]})}},{title:"\u65F6\u95F4",ellipsis:!0,search:!1,dataIndex:"createdAt",width:200,render:function(a,e,d,s,O){return new Date(e.createdAt).toLocaleString()}}],rowKey:"id",request:function(){var i=E()(u()().mark(function a(e,d,s){var O,T,x;return u()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,P({page:(O=e.current)!==null&&O!==void 0?O:1,pageSize:(T=e.pageSize)!==null&&T!==void 0?T:10,type:e.type});case 2:return x=v.sent,v.abrupt("return",{data:x.data.list,success:!0,total:x.data.total});case 4:case"end":return v.stop()}},a)}));return function(a,e,d){return i.apply(this,arguments)}}(),pagination:(0,R.O)(),actionRef:r})})}},6409:function(A,f,n){n.d(f,{O:function(){return m}});function m(){var u,l=parseInt((u=localStorage.getItem("dpanel-pagesize"))!==null&&u!==void 0?u:"0");return{showSizeChanger:!0,defaultPageSize:l!=null?l:20}}}}]);
