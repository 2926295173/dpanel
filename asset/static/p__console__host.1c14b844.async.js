"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6856],{49610:function(W,c,e){var l=e(5574),u=e.n(l),r=e(67294),P=e(52626),d=e(78267),O=e.n(d),D=e(12323),M=e(87662),m=e(82346),E=e(4244),g=e.n(E),T=e(24078),R=e(85893),n,t=new E.Terminal(D.X),o=new d.FitAddon,A,B=(0,r.forwardRef)(function(I,L){var y,j=(0,r.useState)(),U=u()(j,2),K=U[0],S=U[1],x=(0,r.useState)(""),b=u()(x,2),h=b[0],p=b[1],N=(0,m.useAccess)();(0,r.useImperativeHandle)(L,function(){return{start:function(i,_){v(),_.width=t.cols,_.height=t.rows;var C=_?Object.keys(_).filter(function(a){return _&&_[a]}).map(function(a){if(_&&_[a])return"".concat(a,"=").concat(_[a])}):[];n=new WebSocket((0,P.R)(i+"?"+C.join("&"))),n.addEventListener("message",function(a){var f=JSON.parse(a.data),w=f.type;if(w==i&&(t.write(f.data),f.data.indexOf("exec failed")!=-1)){v();return}}),A=t.onData(function(a){var f={content:{command:a},type:i};n&&n.send(JSON.stringify(f))}),p(i),S(_)},close:function(){v()},fit:function(){return o.fit(),{width:t.cols,height:t.rows}},run:function(i){K&&i&&i.forEach(function(_){var C={content:{command:_+`
`},type:h};n&&n.send(JSON.stringify(C))})}}}),(0,r.useEffect)(function(){return t.loadAddon(o),t.open(document.getElementById("terminal-container-console")),o.fit(),(0,M.pe)({groupName:"setting",name:"themeConsoleConfig"}).then(function(s){s.data&&s.data.fontSize&&Object.assign(t.options,s.data)}),function(){v()}},[]),(0,r.useEffect)(function(){window.addEventListener("resize",function(){o.fit();var s={size:{width:t.cols,height:t.rows},type:h};h&&n&&n.send(JSON.stringify(s))})},[h]);function v(){t.reset(),o.fit(),t.focus(),A&&A.dispose(),n&&(n.close(),n=null)}return(0,R.jsx)("div",{style:{height:(y=I.height)!==null&&y!==void 0?y:"100vh"},id:"terminal-container-console"})});c.Z=B},12323:function(W,c,e){e.d(c,{X:function(){return l},n:function(){return u}});var l={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},u=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},67359:function(W,c,e){e.r(c),e.d(c,{default:function(){return M}});var l=e(5574),u=e.n(l),r=e(49610),P=e(87662),d=e(82346),O=e(67294),D=e(85893);function M(){var m=(0,d.useParams)(),E=(0,d.useSearchParams)(),g=u()(E,2),T=g[0],R=g[1],n=(0,O.useRef)();return(0,O.useEffect)(function(){m.id&&(0,P.K3)({name:m.id}).then(function(t){var o;window.document.title="console - ".concat(t.data.name),(o=n.current)===null||o===void 0||o.start("/console/host/".concat(t.data.name),{cmd:T.get("cmd"),workDir:T.get("workDir")})}),document.body.style.overflow="hidden"},[]),(0,D.jsx)(r.Z,{ref:n})}}}]);
