"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9969],{49610:function(L,v,n){var A=n(5574),a=n.n(A),m=n(67294),u=n(54964),o=n(52626),M=n(12320),p=n.n(M),O=n(78267),W=n.n(O),g=n(85893),i,l=new M.Terminal(u.a),_=new O.FitAddon,h,d=(0,m.forwardRef)(function(T,s){var E,f=(0,m.useState)(),R=a()(f,2),y=R[0],I=R[1],C=(0,m.useState)(""),t=a()(C,2),r=t[0],c=t[1];(0,m.useImperativeHandle)(s,function(){return{start:function(U,P){var K=P?Object.keys(P).filter(function(D){return P&&P[D]}).map(function(D){if(P&&P[D])return"".concat(D,"=").concat(P[D])}):[];e(),i=new WebSocket((0,o.R)(U+"?"+K.join("&"))),i.addEventListener("message",function(D){var j=JSON.parse(D.data),b=j.type;if(b==U&&(l.write(j.data),j.data.indexOf("exec failed")!=-1)){e();return}}),h=l.onData(function(D){var j={content:{command:D},type:U};i&&i.send(JSON.stringify(j))}),c(U),I(P)},close:function(){e()},fit:function(){_.fit()},run:function(U){y&&U&&U.forEach(function(P){var K={content:{command:P+`
`},type:r};i&&i.send(JSON.stringify(K))})}}}),(0,m.useEffect)(function(){return window.addEventListener("resize",function(){_.fit()}),l.loadAddon(_),l.open(document.getElementById("terminal-container-console")),_.fit(),function(){e()}},[]);function e(){l.reset(),_.fit(),l.focus(),h&&h.dispose(),i&&(i.close(),i=null)}return(0,g.jsx)("div",{style:{height:(E=T.height)!==null&&E!==void 0?E:"100vh"},id:"terminal-container-console"})});v.Z=d},54964:function(L,v,n){n.d(v,{a:function(){return l}});var A=n(5574),a=n.n(A),m=n(78267),u=n.n(m),o=n(75458),M=n.n(o),p=n(67294),O=n(12320),W=n.n(O),g=n(89629),i=n(85893),l={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,cursorStyle:"block",cursorBlink:!0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},_=new O.Terminal(l),h=new o.SearchAddon,d=new m.FitAddon,T=(0,p.forwardRef)(function(s,E){var f,R=(0,p.useState)(!0),y=a()(R,2),I=y[0],C=y[1];return(0,p.useEffect)(function(){return window.addEventListener("resize",function(){s.showInModal||d.fit()}),s.style&&s.style.fontSize&&(_.options.fontSize=s.style.fontSize),_.loadAddon(d),_.loadAddon(h),_.open(document.getElementById(s.id?s.id:"terminal-container")),s.showInModal||d.fit(),function(){_.reset(),C(!0)}},[]),(0,p.useImperativeHandle)(E,function(){return{write:function(r){I&&(d.fit(),C(!1)),_.write(r)},clear:function(){_.clear()},getTerminal:function(){return _},findNext:function(r){h.findNext(r)},findPrev:function(r){h.findPrevious(r)},fit:function(){d.fit()},onData:function(r){return _.onData(r)}}}),(0,i.jsx)("div",{id:s.id?s.id:"terminal-container",style:{width:s.width?s.width:"100%",height:s.height?s.height:"500px",marginTop:(f=s.style)===null||f===void 0?void 0:f.marginTop}})});v.Z=T},15563:function(L,v,n){n.r(v),n.d(v,{default:function(){return W}});var A=n(5574),a=n.n(A),m=n(49610),u=n(60335),o=n(5251),M=n(82346),p=n(67294),O=n(85893);function W(){var g=(0,M.useParams)(),i=(0,M.useSearchParams)(),l=a()(i,2),_=l[0],h=l[1],d=(0,p.useRef)();return console.log("dddd"),(0,p.useEffect)(function(){g.id&&(0,u.jV)({md5:g.id}).then(function(T){var s,E,f;window.document.title="console - ".concat((0,o.fi)(T.data.info.Name,"/")),g.id&&((s=d.current)===null||s===void 0||s.start("/console/container/".concat(T.data.info.Id),{width:(E=_.get("width"))!==null&&E!==void 0?E:Math.ceil(window.innerWidth/8),height:(f=_.get("height"))!==null&&f!==void 0?f:Math.ceil(window.innerHeight/16),cmd:_.get("cmd"),workDir:_.get("workDir")}))}),document.body.style.overflow="hidden"},[]),(0,O.jsx)(m.Z,{ref:d})}},60335:function(L,v,n){n.d(v,{IE:function(){return O},IW:function(){return M},KK:function(){return h},LJ:function(){return T},RF:function(){return R},Re:function(){return E},aF:function(){return I},eE:function(){return l},jV:function(){return g}});var A=n(15009),a=n.n(A),m=n(99289),u=n.n(m),o=n(82346);function M(t){return p.apply(this,arguments)}function p(){return p=u()(a()().mark(function t(r){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/api/app/container/status",{method:"POST",data:r}));case 1:case"end":return e.stop()}},t)})),p.apply(this,arguments)}function O(t){return W.apply(this,arguments)}function W(){return W=u()(a()().mark(function t(r){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/api/app/container/get-list",{data:r,method:"POST"}));case 1:case"end":return e.stop()}},t)})),W.apply(this,arguments)}function g(t){return i.apply(this,arguments)}function i(){return i=u()(a()().mark(function t(r){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/api/app/container/get-detail",{data:r,method:"POST"}));case 1:case"end":return e.stop()}},t)})),i.apply(this,arguments)}function l(t){return _.apply(this,arguments)}function _(){return _=u()(a()().mark(function t(r){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/api/app/container/update",{data:r,method:"POST"}));case 1:case"end":return e.stop()}},t)})),_.apply(this,arguments)}function h(){return d.apply(this,arguments)}function d(){return d=u()(a()().mark(function t(){return a()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,o.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return c.stop()}},t)})),d.apply(this,arguments)}function T(t){return s.apply(this,arguments)}function s(){return s=u()(a()().mark(function t(r){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/api/app/container/export",{method:"POST",data:r,responseType:"blob"}));case 1:case"end":return e.stop()}},t)})),s.apply(this,arguments)}function E(t){return f.apply(this,arguments)}function f(){return f=u()(a()().mark(function t(r){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/api/app/container/commit",{method:"POST",data:r}));case 1:case"end":return e.stop()}},t)})),f.apply(this,arguments)}function R(t){return y.apply(this,arguments)}function y(){return y=u()(a()().mark(function t(r){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/api/app/container/upgrade",{method:"POST",data:r}));case 1:case"end":return e.stop()}},t)})),y.apply(this,arguments)}function I(t){return C.apply(this,arguments)}function C(){return C=u()(a()().mark(function t(r){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/api/app/container/copy",{method:"POST",data:r}));case 1:case"end":return e.stop()}},t)})),C.apply(this,arguments)}}}]);
