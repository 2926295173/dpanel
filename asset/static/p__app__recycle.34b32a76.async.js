"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1610],{80821:function(A,f,n){n.d(f,{Z:function(){return y}});var h=n(5574),u=n.n(h),c=n(24963),_=n(86738),l=n(28036),g=n(83062),E=n(67294),p=n(85893);function y(t){var R=(0,E.useState)(!1),O=u()(R,2),D=O[0],P=O[1],v=(0,E.useContext)(c.Z),M=v.lang,j=v.notice,C=v.message,s=function(){P(!0);var T=t.action();T instanceof Promise?T.then(function(d){if(P(!1),d){typeof t.onSuccess=="function"&&t.onSuccess(d);var i="";t.messageSuccess?typeof t.messageSuccess=="function"?i=t.messageSuccess(d):i=t.messageSuccess.indexOf("notification.")==0?M(t.messageSuccess):t.messageSuccess:i=M("notification.finish"),t.asynced?C.info(i):C.success(i)}}).catch(function(d){P(!1),typeof t.onError=="function"&&t.onError(d)}):P(!1)};return t.confirm?(0,p.jsx)(_.Z,{style:{width:500},title:t.confirmTitle?t.confirmTitle:M("notification.title.tip"),description:typeof t.confirm=="string"&&t.confirm.indexOf("notification.")==0?M(t.confirm):t.confirm,onConfirm:s,okText:"Yes",cancelText:"No",children:(0,p.jsx)(l.ZP,{disabled:t.disabled,icon:t.icon,loading:D,danger:t.danger,type:t.type,children:t.children})}):(0,p.jsx)(g.Z,{title:t.tips,children:(0,p.jsx)(l.ZP,{style:t.ghost?{padding:0,height:"auto"}:{},disabled:t.disabled,icon:t.icon,loading:D,onClick:s,danger:t.danger,type:t.type,children:t.children})})}},78451:function(A,f,n){n.d(f,{Z:function(){return c}});var h=n(67294),u=n(85893);function c(_){return(0,u.jsx)("span",{style:{width:_.width?_.width:"auto",wordBreak:"break-word"},children:_.content})}},24963:function(A,f,n){var h=n(67294),u=(0,h.createContext)({});f.Z=u},67108:function(A,f,n){n.r(f),n.d(f,{default:function(){return U}});var h=n(15009),u=n.n(h),c=n(99289),_=n.n(c),l=n(90078),g=n(10641),E=n(62597),p=n(28036),y=n(83062),t=n(42075),R=n(50136),O=n(82346),D=n(43425),P=n(67294),v=n(96974),M=n(80821),j=n(67255),C=n(78451),s=n(85893);function U(){var T=(0,v.UO)(),d=(0,P.useRef)();return(0,P.useEffect)(function(){var i;(i=d.current)===null||i===void 0||i.reload()},[T]),(0,s.jsx)(l._z,{header:{extra:[(0,s.jsx)(p.ZP,{type:"primary",children:(0,s.jsx)(O.Link,{to:"/app/create/image",children:"\u521B\u5EFA\u5BB9\u5668"})},"create")]},children:(0,s.jsx)(g.Z,{scroll:{x:"max-content"},actionRef:d,columns:[{title:"\u540D\u79F0",dataIndex:"siteTitle",width:200},{title:"\u6807\u8BC6",dataIndex:"siteName",width:200},{title:"\u6700\u540E\u9519\u8BEF",dataIndex:"message",search:!1,width:250,render:function(r,a,o,e,m){return(0,s.jsx)(C.Z,{content:a.message})}},{title:"\u5220\u9664\u65E5\u671F",ellipsis:!0,dataIndex:"deletedAt",search:!1,width:180,render:function(r,a,o,e,m){return new Date(a.deletedAt).toLocaleString()}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:100,fixed:"right",render:function(r,a,o,e){return[(0,s.jsx)(O.Link,{to:"/app/create/image?op=update&id="+a.id,type:"link",children:(0,s.jsx)(y.Z,{title:"\u518D\u6B21\u6784\u5EFA",children:(0,s.jsx)(D.Z,{})})},"rebuild")]}}],rowKey:"id",request:function(){var i=_()(u()().mark(function r(a,o,e){var m,L,B;return u()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,E.cl)({pageSize:(m=a.pageSize)!==null&&m!==void 0?m:10,page:(L=a.current)!==null&&L!==void 0?L:1,isDelete:!0,siteTitle:a.siteTitle,siteName:a.siteName});case 2:return B=b.sent,b.abrupt("return",{data:B.data.list,success:!0,total:B.data.total});case 4:case"end":return b.stop()}},r)}));return function(r,a,o){return i.apply(this,arguments)}}(),rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(r){var a=r.selectedRowKeys;return(0,s.jsx)(t.Z,{size:16,children:(0,s.jsx)(M.Z,{danger:!0,type:"primary",action:function(){return(0,E.xb)({id:a})},onSuccess:function(){var e,m;return!((e=d.current)===null||e===void 0)&&e.reloadAndRest&&((m=d.current)===null||m===void 0||m.reloadAndRest()),!0},onError:function(){var e,m;return!((e=d.current)===null||e===void 0)&&e.reset&&((m=d.current)===null||m===void 0||m.reset()),!0},confirm:"notification.confirm.title",children:"\u6279\u91CF\u5220\u9664"})})},pagination:(0,j.O)(),search:{collapsed:!1},tableExtraRender:function(){return(0,s.jsx)(R.Z,{mode:"horizontal",selectedKeys:["recycle"],items:[{label:(0,s.jsx)(O.Link,{to:"/app/list",replace:!0,children:"\u5BB9\u5668\u5217\u8868"}),key:"all"},{label:(0,s.jsx)(O.Link,{to:"/app/recycle",replace:!0,children:"\u56DE\u6536\u7AD9"}),key:"recycle"}]})}})})}},62597:function(A,f,n){n.d(f,{$G:function(){return g},Ct:function(){return M},Tb:function(){return t},XH:function(){return O},cl:function(){return p},iE:function(){return P},xb:function(){return C},ze:function(){return d}});var h=n(15009),u=n.n(h),c=n(99289),_=n.n(c),l=n(82346);function g(r){return E.apply(this,arguments)}function E(){return E=_()(u()().mark(function r(a){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/app/site/create-by-image",{method:"POST",data:a}));case 1:case"end":return e.stop()}},r)})),E.apply(this,arguments)}function p(r){return y.apply(this,arguments)}function y(){return y=_()(u()().mark(function r(a){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/app/site/get-list",{method:"POST",data:a}));case 1:case"end":return e.stop()}},r)})),y.apply(this,arguments)}function t(r){return R.apply(this,arguments)}function R(){return R=_()(u()().mark(function r(a){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.download=!1,e.next=3,(0,l.request)("/api/app/log/run",{method:"POST",data:a});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},r)})),R.apply(this,arguments)}function O(r){return D.apply(this,arguments)}function D(){return D=_()(u()().mark(function r(a){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.download=!0,e.next=3,(0,l.request)("/api/app/log/run",{method:"POST",data:a,responseType:"blob"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},r)})),D.apply(this,arguments)}function P(r){return v.apply(this,arguments)}function v(){return v=_()(u()().mark(function r(a){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.request)("/api/app/site/get-detail",{data:a,method:"POST"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},r)})),v.apply(this,arguments)}function M(r){return j.apply(this,arguments)}function j(){return j=_()(u()().mark(function r(a){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/app/container/delete",{method:"POST",data:a}));case 1:case"end":return e.stop()}},r)})),j.apply(this,arguments)}function C(r){return s.apply(this,arguments)}function s(){return s=_()(u()().mark(function r(a){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/app/site/delete",{method:"POST",data:a}));case 1:case"end":return e.stop()}},r)})),s.apply(this,arguments)}function U(r){return T.apply(this,arguments)}function T(){return T=_asyncToGenerator(_regeneratorRuntime().mark(function r(a){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request("/api/app/site/update-title",{method:"POST",data:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},r)})),T.apply(this,arguments)}function d(r){return i.apply(this,arguments)}function i(){return i=_()(u()().mark(function r(a){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/app/container/ignore",{method:"POST",data:a}));case 1:case"end":return e.stop()}},r)})),i.apply(this,arguments)}},67255:function(A,f,n){n.d(f,{O:function(){return h},j:function(){return u}});function h(){var c=localStorage.getItem("dpanel-pagesize");return c=="all"?!1:{showSizeChanger:!0,defaultPageSize:parseInt(c!=null?c:"20")}}function u(c){var _="dpanel-table-column-".concat(c),l={};if(localStorage.getItem(_)){var g;l=JSON.parse((g=localStorage.getItem(_))!==null&&g!==void 0?g:"{}")}return{defaultValue:l,onChange:function(p){localStorage.setItem("dpanel-table-column-".concat(c),JSON.stringify(p))}}}}}]);
