"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3355],{28307:function(y,O,t){var M=t(5574),u=t.n(M),h=t(38345),s=t(97269),n=t(5966),g=t(62370),p=t(14726),P=t(85265),f=t(42075),D=t(34041),c=t(67294),T=t(80821),E=t(3393),b=t(97961),v=t(92754),m=t(54006),r=t(85893),d=(0,c.forwardRef)(function(a,l){var B=(0,c.useState)(!1),R=u()(B,2),I=R[0],C=R[1],j=(0,c.useRef)(),i=(0,c.useRef)();return(0,c.useImperativeHandle)(l,function(){return{upgradeImage:function(_){var e;return C(!0),(e=j.current)===null||e===void 0||e.setFieldValue("imageUrl",_),(0,E.Gb)({tag:_,type:"pull"})},setImageName:function(_){var e;C(!0),(e=j.current)===null||e===void 0||e.setFieldValue("imageUrl",_)}}}),[(0,r.jsx)(p.ZP,{type:a.buttonType?a.buttonType:"default",onClick:function(){var _,e;a.onClick&&a.onClick(),C(!0),(_=j.current)===null||_===void 0||_.resetFields(),(e=i.current)===null||e===void 0||e.setStart("")},children:"\u62C9\u53D6\u65B0\u955C\u50CF"},"remoteBtn"),(0,r.jsxs)(P.Z,{forceRender:!0,open:I,title:"\u4E0B\u8F7D\u8FDC\u7A0B\u955C\u50CF",width:800,onClose:function(){return C(!1)},footer:!1,children:[(0,r.jsx)(h.Z,{children:(0,r.jsxs)(f.Z,{direction:"vertical",size:"middle",children:[(0,r.jsxs)("div",{children:["1\u3001\u955C\u50CF\u540D\u79F0\u4E2D\u4E0D\u5305\u542B\u4ED3\u5E93\u5730\u5740\u65F6\uFF0C \u9ED8\u8BA4\u4ECE ",(0,r.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:"docker hub"})," \u4E2D\u4E0B\u8F7D\uFF0C \u4F60\u53EF\u4EE5\u5728\u4E0A\u9762",(0,r.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:"\u3010\u67E5\u627E\u3011"}),"\u9700\u8981\u7684\u955C\u50CF"]}),(0,r.jsxs)("div",{children:["2\u3001\u955C\u50CF\u4E2D\u5305\u542B\u4ED3\u5E93\u5730\u5740\u65F6\uFF0C\u8BF7\u786E",(0,r.jsx)(m.Link,{to:"/image/registry",children:"\u3010\u6DFB\u52A0\u3011"}),"\u8FC7\u8BE5\u4ED3\u5E93\uFF0C\u5E76\u6709 Pull \u6743\u9650"]}),(0,r.jsxs)("div",{children:["3\u3001\u53EF\u5728",(0,r.jsx)(m.Link,{to:"/image/registry",children:"\u3010\u4ED3\u5E93\u7BA1\u7406\u3011"}),"\u4E2D\u914D\u7F6E\u955C\u50CF\u7684\u52A0\u901F\u5730\u5740"]})]})}),(0,r.jsx)(h.Z,{title:"\u4E0B\u8F7D\u955C\u50CF",headerBordered:!0,children:(0,r.jsxs)(s.A,{submitter:!1,formRef:j,children:[(0,r.jsxs)(f.Z.Compact,{children:[(0,r.jsx)(n.Z,{width:400,name:"imageUrl",placeholder:"\u8BF7\u8F93\u5165\u955C\u50CF\u5730\u5740"}),(0,r.jsx)(g.Z,{name:"platform",children:(0,r.jsx)(D.Z,{style:{width:150},placeholder:"\u9ED8\u8BA4\u5F53\u524D\u67B6\u6784",options:b.ii.map(function(o){return{label:o.name,value:o.name}})})}),(0,r.jsx)(T.Z,{action:function(){var _,e,F,U,w,A=(_=(e=j.current)===null||e===void 0?void 0:e.getFieldValue("imageUrl"))!==null&&_!==void 0?_:"";return(F=i.current)===null||F===void 0||F.setStart(A),(0,E.Gb)({tag:A,type:"pull",platform:(U=(w=j.current)===null||w===void 0?void 0:w.getFieldValue("platform"))!==null&&U!==void 0?U:"amd64"})},onSuccess:function(_){var e;(e=i.current)===null||e===void 0||e.setFinish(),a.onFinish},messageSuccess:function(_){var e="\u62C9\u53D6\u6210\u529F";return _.data.proxyUrl&&(e+="\uFF0C\u4F7F\u7528\u4EE3\u7406 "+_.data.proxyUrl),e},children:"\u62C9\u53D6\u955C\u50CF"})]}),(0,r.jsx)(g.Z,{label:"\u4E0B\u8F7D\u8FDB\u5EA6",children:(0,r.jsx)(v.Z,{ref:i})})]})})]},"remoteDrawer")]});O.Z=d},92754:function(y,O,t){var M=t(5574),u=t.n(M),h=t(67294),s=t(54006),n=t(38703),g=t(85893),p=(0,h.forwardRef)(function(P,f){var D=(0,h.useState)(""),c=u()(D,2),T=c[0],E=c[1];(0,h.useImperativeHandle)(f,function(){return{setFinish:function(){d({finish:{downloading:100,extracting:100}})},setStart:function(l){l&&E(l),d({start:{downloading:0,extracting:0}})}}});var b=(0,s.useModel)("subscriber");b.addDataHandler("image:pull:"+T,function(a){d(a.data)});var v=(0,h.useState)(),m=u()(v,2),r=m[0],d=m[1];return(0,h.useEffect)(function(){d({start:{downloading:0,extracting:0}})},[]),(0,g.jsx)(g.Fragment,{children:r&&Object.keys(r).map(function(a){return(0,g.jsx)(n.Z,{percent:r[a].downloading,success:{percent:r[a].extracting}},a)})})});O.Z=p},97961:function(y,O,t){t.d(O,{MF:function(){return v},_2:function(){return E},fN:function(){return p},hG:function(){return c},ii:function(){return g},vC:function(){return f}});var M=t(15009),u=t.n(M),h=t(99289),s=t.n(h),n=t(54006),g=[{name:"amd64",arch:"amd64"},{name:"arm64",arch:"arm64"},{name:"i386",arch:"386"},{name:"arm/v6",arch:"arm"},{name:"arm/v7",arch:"arm"},{name:"arm/v8",arch:"arm64"},{name:"ppc64le",arch:"ppc64le"},{name:"riscv64",arch:"riscv64"}];function p(r){return P.apply(this,arguments)}function P(){return P=s()(u()().mark(function r(d){return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,n.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:d}));case 1:case"end":return l.stop()}},r)})),P.apply(this,arguments)}function f(r){return D.apply(this,arguments)}function D(){return D=s()(u()().mark(function r(d){return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,n.request)("/api/app/image/import-by-container-tar",{method:"POST",data:d}));case 1:case"end":return l.stop()}},r)})),D.apply(this,arguments)}function c(r){return T.apply(this,arguments)}function T(){return T=s()(u()().mark(function r(d){return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,n.request)("/api/app/image/import-by-image-tar",{method:"POST",data:d}));case 1:case"end":return l.stop()}},r)})),T.apply(this,arguments)}function E(r){return b.apply(this,arguments)}function b(){return b=s()(u()().mark(function r(d){return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,n.request)("/api/common/attach/delete",{method:"POST",data:d});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},r)})),b.apply(this,arguments)}function v(){return m.apply(this,arguments)}function m(){return m=s()(u()().mark(function r(){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return a.stop()}},r)})),m.apply(this,arguments)}},3393:function(y,O,t){t.d(O,{Gb:function(){return P},Pn:function(){return T},Rb:function(){return b},YU:function(){return g},_U:function(){return D}});var M=t(15009),u=t.n(M),h=t(99289),s=t.n(h),n=t(54006);function g(m){return p.apply(this,arguments)}function p(){return p=s()(u()().mark(function m(r){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/app/image/get-detail",{method:"POST",data:r}));case 1:case"end":return a.stop()}},m)})),p.apply(this,arguments)}function P(m){return f.apply(this,arguments)}function f(){return f=s()(u()().mark(function m(r){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/app/image/tag-remote",{method:"POST",data:r}));case 1:case"end":return a.stop()}},m)})),f.apply(this,arguments)}function D(m){return c.apply(this,arguments)}function c(){return c=s()(u()().mark(function m(r){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/app/image/tag-add",{method:"POST",data:r}));case 1:case"end":return a.stop()}},m)})),c.apply(this,arguments)}function T(m){return E.apply(this,arguments)}function E(){return E=s()(u()().mark(function m(r){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/app/image/tag-delete",{method:"POST",data:r}));case 1:case"end":return a.stop()}},m)})),E.apply(this,arguments)}function b(m){return v.apply(this,arguments)}function v(){return v=s()(u()().mark(function m(r){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/app/image/export",{method:"POST",data:r,responseType:"blob"}));case 1:case"end":return a.stop()}},m)})),v.apply(this,arguments)}},18148:function(y,O,t){t.d(O,{$q:function(){return b},Fj:function(){return R},KG:function(){return g},KX:function(){return C},T8:function(){return T},Xn:function(){return D},ao:function(){return m},c5:function(){return l},c7:function(){return d}});var M=t(15009),u=t.n(M),h=t(99289),s=t.n(h),n=t(54006);function g(i){return p.apply(this,arguments)}function p(){return p=s()(u()().mark(function i(o){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,n.request)("/api/app/image/get-list",{method:"POST",data:o}));case 1:case"end":return e.stop()}},i)})),p.apply(this,arguments)}function P(i){return f.apply(this,arguments)}function f(){return f=_asyncToGenerator(_regeneratorRuntime().mark(function i(o){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request("/api/app/log/image-build",{method:"POST",data:o});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},i)})),f.apply(this,arguments)}function D(i){return c.apply(this,arguments)}function c(){return c=s()(u()().mark(function i(o){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,n.request)("/api/app/image/get-list-build",{method:"POST",data:o}));case 1:case"end":return e.stop()}},i)})),c.apply(this,arguments)}function T(i){return E.apply(this,arguments)}function E(){return E=s()(u()().mark(function i(o){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,n.request)("/api/app/image/get-build-task",{method:"POST",data:o});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},i)})),E.apply(this,arguments)}function b(i){return v.apply(this,arguments)}function v(){return v=s()(u()().mark(function i(o){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,n.request)("/api/app/image/delete-build-task",{method:"POST",data:o});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},i)})),v.apply(this,arguments)}function m(i){return r.apply(this,arguments)}function r(){return r=s()(u()().mark(function i(o){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,n.request)("/api/app/image/image-delete",{method:"POST",data:o});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},i)})),r.apply(this,arguments)}function d(){return a.apply(this,arguments)}function a(){return a=s()(u()().mark(function i(){return u()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,n.request)("/api/app/image/image-prune",{method:"POST"});case 2:return _.abrupt("return",_.sent);case 3:case"end":return _.stop()}},i)})),a.apply(this,arguments)}function l(){return B.apply(this,arguments)}function B(){return B=s()(u()().mark(function i(){return u()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,n.request)("/api/app/image/build-prune",{method:"POST"});case 2:return _.abrupt("return",_.sent);case 3:case"end":return _.stop()}},i)})),B.apply(this,arguments)}function R(i){return I.apply(this,arguments)}function I(){return I=s()(u()().mark(function i(o){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,n.request)("/api/app/image/update-title",{method:"POST",data:o});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},i)})),I.apply(this,arguments)}function C(i){return j.apply(this,arguments)}function j(){return j=s()(u()().mark(function i(o){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,n.request)("/api/app/image/tag-sync",{method:"POST",data:o}));case 1:case"end":return e.stop()}},i)})),j.apply(this,arguments)}},5251:function(y,O,t){t.d(O,{FI:function(){return u},ZM:function(){return h}});function M(s){return s.trim()}function u(s){var n="";s<.1*1024?n=s.toFixed(2)+"B":s<.1*1024*1024?n=(s/1024).toFixed(2)+"KB":s<1*1024*1024*1024?n=(s/(1024*1024)).toFixed(2)+"MB":n=(s/(1024*1024*1024)).toFixed(2)+"GB";var g=n+"",p=g.indexOf("."),P=g.substring(p+1,p+3);return P=="00"?g.substring(0,p)+g.substr(p+3,2):n}function h(s){if(s){var n=new Date(s),g=n.getFullYear()+"-",p=(n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1)+"-",P=(n.getDate()<10?"0"+n.getDate():n.getDate())+" ",f=(n.getHours()<10?"0"+n.getHours():n.getHours())+":",D=(n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes())+":",c=n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds();return g+p+P+f+D+c}}}}]);
