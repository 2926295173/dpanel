"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[236],{16970:function(H,T,e){var L=e(15009),d=e.n(L),Z=e(99289),P=e.n(Z),M=e(5574),y=e.n(M),K=e(3616),V=e(24963),W=e(14946),b=e(36146),D=e(184),v=e(5966),g=e(62370),B=e(97462),A=e(52688),U=e(24739),i=e(17186),R=e(83622),s=e(34041),p=e(71230),x=e(15746),a=e(67294),r=e(85893),h=(0,a.forwardRef)(function(t,C){var f,_=(0,a.useState)(!1),n=y()(_,2),c=n[0],u=n[1],F=(0,a.useRef)(),O=(0,a.useContext)(V.Z),G=O.message,l=new b.Uo("components.network");return(0,a.useImperativeHandle)(C,function(){return{}}),(0,r.jsxs)(D.a,{drawerProps:{width:K.R_},name:"createNetwork",title:l.format("createTitle"),open:c,onOpenChange:function(E){u(E)},formRef:F,trigger:(f=t.trigger)!==null&&f!==void 0?f:(0,r.jsx)(R.ZP,{type:"primary",children:l.format("createTitle")}),onFinish:function(){var m=P()(d()().mark(function E(o){var I,S,w,j,N,z,X,J,Q,q,ee,k,Y,re;return d()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return k={name:o.name,driver:(I=o.driver)!==null&&I!==void 0?I:"bridge",ipSubnet:(S=o.ipSubnet)!==null&&S!==void 0?S:"",ipGateway:(w=o.ipGateway)!==null&&w!==void 0?w:"",ipRange:(j=o.ipRange)!==null&&j!==void 0?j:"",ipAux:o.ipAux,enableIpV6:(N=o.enableIpV6)!==null&&N!==void 0?N:!1,ipV6Subnet:(z=o.ipV6Subnet)!==null&&z!==void 0?z:"",ipV6Gateway:(X=o.ipV6Gateway)!==null&&X!==void 0?X:"",ipV6Range:(J=o.ipV6Range)!==null&&J!==void 0?J:"",ipV6Aux:(Q=o.ipV6Aux)!==null&&Q!==void 0?Q:[],driverOption:o.driverOption,internal:(q=o.internal)!==null&&q!==void 0?q:!1,attachable:(ee=o.attachable)!==null&&ee!==void 0?ee:!1},(o.driver=="macvlan"||o.driver=="ipvlan")&&(k.driverOption||(k.driverOption=[]),k.driverOption.push({name:"parent",value:o.macvlanParentCard})),$.next=4,(0,W.XY)(k);case 4:if(Y=$.sent,!(Y&&Y.data&&Y.data.id!="")){$.next=10;break}return G.success(b.FD.format("finish")),t.onFinish&&t.onFinish(),(re=F.current)===null||re===void 0||re.resetFields(),$.abrupt("return",!0);case 10:case"end":return $.stop()}},E)}));return function(E){return m.apply(this,arguments)}}(),children:[(0,r.jsx)(v.Z,{label:l.format("createFormName"),name:"name",required:!0,rules:[{required:!0}],placeholder:l.format("createFormNameEmpty")}),(0,r.jsx)(g.Z,{label:l.format("createFormDriver"),name:"driver",children:(0,r.jsxs)(s.Z,{defaultValue:"bridge",children:[(0,r.jsx)(s.Z.Option,{value:"bridge",children:"bridge"}),(0,r.jsx)(s.Z.Option,{value:"macvlan",children:"macvlan"}),(0,r.jsx)(s.Z.Option,{value:"ipvlan",children:"ipvlan"}),(0,r.jsx)(s.Z.Option,{value:"overlay",children:"overlay"})]})}),(0,r.jsx)(B.Z,{name:["driver"],children:function(E){var o=E.driver;if(o=="macvlan"||o=="ipvlan")return(0,r.jsx)(v.Z,{required:!0,rules:[{required:!0}],label:l.format("createFormDriverMacvlanParentCard"),name:"macvlanParentCard",tooltip:l.format("createFormDriverMacvlanParentCardTip")})}}),(0,r.jsxs)(p.Z,{children:[(0,r.jsx)(x.Z,{span:8,children:(0,r.jsx)(A.Z,{label:l.format("createFormUserIpV4Subnet"),name:"userIpV4Subnet"})}),(0,r.jsx)(x.Z,{span:8,children:(0,r.jsx)(A.Z,{name:"internal",label:l.format("createFormInternal"),initialValue:!1})}),(0,r.jsx)(x.Z,{span:8,children:(0,r.jsx)(A.Z,{name:"attachable",label:l.format("createFormAttachable"),initialValue:!1})})]}),(0,r.jsx)(B.Z,{name:["userIpV4Subnet"],children:function(E){var o=E.userIpV4Subnet;if(o)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(U.UW,{title:l.format("createFormIpTitle"),children:[(0,r.jsx)(v.Z,{label:l.format("createFormIpSubnet"),name:"ipSubnet",width:"md",tooltip:l.format("createFormIpSubnetTip"),placeholder:"192.168.0.0/16"}),(0,r.jsx)(v.Z,{label:l.format("createFormIpGateway"),name:"ipGateway",width:"md",placeholder:"192.168.0.1"}),(0,r.jsx)(v.Z,{label:l.format("createFormIpRange"),name:"ipRange",width:"md",placeholder:"192.168.1.0/24"})]}),(0,r.jsx)(i.u,{name:"ipAux",label:l.format("createFormIpAux"),children:(0,r.jsxs)(U.UW,{children:[(0,r.jsx)(v.Z,{label:l.format("createFormIpAuxDevice"),name:"device",width:"md"}),(0,r.jsx)(v.Z,{label:l.format("createFormIpAuxAddress"),name:"address",width:"md"})]})})]})}}),(0,r.jsxs)(p.Z,{children:[(0,r.jsx)(x.Z,{span:8,children:(0,r.jsx)(A.Z,{label:l.format("createFormEnableIpV6"),name:"enableIpV6"})}),(0,r.jsx)(x.Z,{children:(0,r.jsx)(A.Z,{label:l.format("createFormUserIpV6Subnet"),name:"userIpV6Subnet",fieldProps:{onChange:function(E,o){if(E){var I;(I=F.current)===null||I===void 0||I.setFieldValue("enableIpV6",!0)}}}})})]}),(0,r.jsx)(B.Z,{name:["userIpV6Subnet"],children:function(E){var o=E.userIpV6Subnet;if(o)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(U.UW,{title:l.format("createFormIpV6"),children:[(0,r.jsx)(v.Z,{label:l.format("createFormIpSubnet"),name:"ipV6Subnet",width:"md",placeholder:"2001:db8::/48"}),(0,r.jsx)(v.Z,{label:l.format("createFormIpGateway"),name:"ipV6Gateway",width:"md",placeholder:"2001:db8::1"}),(0,r.jsx)(v.Z,{label:l.format("createFormIpRange"),name:"ipV6Range",width:"md",placeholder:"2001:db8::/64"})]}),(0,r.jsx)(i.u,{name:"ipV6Aux",label:l.format("createFormIpAux"),children:(0,r.jsxs)(U.UW,{children:[(0,r.jsx)(v.Z,{label:l.format("createFormIpAuxDevice"),name:"device",width:"md"}),(0,r.jsx)(v.Z,{label:l.format("createFormIpAuxAddress"),name:"address",width:"md"})]})})]})}}),(0,r.jsx)(i.u,{name:"driverOption",label:l.format("createFormDriverOption"),children:(0,r.jsxs)(U.UW,{children:[(0,r.jsx)(v.Z,{label:l.format("createFormDriverOptionName"),name:"name",width:"md"}),(0,r.jsx)(v.Z,{label:l.format("createFormDriverOptionValue"),name:"value",width:"md"})]})})]})});T.Z=h},55943:function(H,T,e){var L=e(5574),d=e.n(L),Z=e(15009),P=e.n(Z),M=e(99289),y=e.n(M),K=e(80821),V=e(3616),W=e(14946),b=e(36146),D=e(82061),v=e(184),g=e(38345),B=e(60940),A=e(42075),U=e(96074),i=e(26412),R=e(67294),s=e(85893),p=(0,R.forwardRef)(function(x,a){(0,R.useImperativeHandle)(a,function(){return{show:function(E){return y()(P()().mark(function o(){var I,S;return P()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,W.IS)({name:E});case 2:I=j.sent,I.data.info.Containers?(S=[],Object.keys(I.data.info.Containers).map(function(N){I.data.info.Containers[N].Id=N,S.push(I.data.info.Containers[N])}),G(S)):G([]),c(I.data.info),C(!0);case 6:case"end":return j.stop()}},o)}))()}}});var r=(0,R.useState)(!1),h=d()(r,2),t=h[0],C=h[1],f=(0,R.useState)(),_=d()(f,2),n=_[0],c=_[1],u=(0,R.useState)(),F=d()(u,2),O=F[0],G=F[1],l=new b.Uo("components.network");return(0,s.jsx)(v.a,{drawerProps:{width:V.R_},title:l.format("detailTitle"),open:t,onOpenChange:function(E){C(E)},submitter:!1,children:(0,s.jsxs)(g.Z,{ghost:!0,direction:"column",gutter:[10,0],children:[(0,s.jsx)(g.Z,{title:l.format("detailContainer"),ghost:!0,children:(0,s.jsx)(B.Z,{rowKey:"Name",columns:[{title:b.FD.format("listContainerName"),dataIndex:"Name"},{title:"IPV4",dataIndex:"IPv4Address"},{title:"IPV6",dataIndex:"IPv6Address"},{title:"MacAddress",dataIndex:"MacAddress"},{title:b.FD.format("listManage"),render:function(E,o,I){return(0,s.jsx)(A.Z,{split:(0,s.jsx)(U.Z,{type:"vertical"}),children:(0,s.jsx)(K.Z,{buttonProps:{type:"text",icon:(0,s.jsx)(D.Z,{}),danger:!0},confirmProps:{showCommonConfirm:!0},action:function(){var w,j;return(0,W.t9)({name:(w=n==null?void 0:n.Id)!==null&&w!==void 0?w:"",containerName:(j=o.Id)!==null&&j!==void 0?j:""})},tips:b.FD.format("listManageExit"),onSuccess:function(){var w=O==null?void 0:O.filter(function(j){return j.Id!=o.Id});G(w)}},"delete")})}}],dataSource:O,pagination:!1})}),(0,s.jsx)(g.Z,{ghost:!0,title:l.format("detailBasic"),children:(0,s.jsxs)(i.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:[(0,s.jsx)(i.Z.Item,{label:l.format("detailName"),children:n==null?void 0:n.Name}),(0,s.jsx)(i.Z.Item,{label:"Id",children:n==null?void 0:n.Id}),(0,s.jsx)(i.Z.Item,{label:"Driver",children:n==null?void 0:n.Driver}),(0,s.jsx)(i.Z.Item,{label:"Scope",children:n==null?void 0:n.Scope}),(0,s.jsx)(i.Z.Item,{label:"Attachable",children:l.yesNo(n==null?void 0:n.Attachable)}),(0,s.jsx)(i.Z.Item,{label:"Internal",children:l.yesNo(n==null?void 0:n.Internal)}),(n==null?void 0:n.IPAM.Config)&&(n==null?void 0:n.IPAM.Config.map(function(m,E){return(0,s.jsx)(i.Z.Item,{label:m.Gateway&&m.Gateway.includes(":")?"IPV6":"IPV4",children:(0,s.jsxs)(i.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:[(0,s.jsx)(i.Z.Item,{label:"Subnet",children:m.Subnet}),(0,s.jsx)(i.Z.Item,{label:"Gateway",children:m.Gateway}),(0,s.jsx)(i.Z.Item,{label:"IP Range ",children:m.IPRange}),(0,s.jsx)(i.Z.Item,{label:"Excluded IPs",children:m.AuxiliaryAddresses&&Object.keys(m.AuxiliaryAddresses).map(function(o){return m.AuxiliaryAddresses[o]+" ,"})})]})},E)})),(n==null?void 0:n.Options)&&Object.keys(n==null?void 0:n.Options).length>0&&(0,s.jsx)(i.Z.Item,{label:"Options",children:(0,s.jsx)(i.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:Object.keys(n==null?void 0:n.Options).map(function(m){return(0,s.jsx)(i.Z.Item,{label:m,children:n.Options[m]},m)})})}),(n==null?void 0:n.Labels)&&Object.keys(n==null?void 0:n.Labels).length>0&&(0,s.jsx)(i.Z.Item,{label:"Lables",children:(0,s.jsx)(i.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:Object.keys(n==null?void 0:n.Labels).map(function(m){return(0,s.jsx)(i.Z.Item,{label:m,children:n.Labels[m]},m)})})})]})})]})})});T.Z=p},3616:function(H,T,e){e.d(T,{Ed:function(){return P},FK:function(){return d},R_:function(){return L},ob:function(){return Z}});var L=window.innerWidth<=1024?"90vw":"65vw",d="90vw",Z="60vw",P="50vh"},6005:function(H,T,e){e.r(T),e.d(T,{default:function(){return x}});var L=e(15009),d=e.n(L),Z=e(99289),P=e.n(Z),M=e(1699),y=e(80821),K=e(16970),V=e(55943),W=e(98510),b=e(14946),D=e(36146),v=e(52645),g=e(82061),B=e(74453),A=e(82346),U=e(25593),i=e(66309),R=e(42075),s=e(67294),p=e(85893);function x(){var a=(0,s.useRef)(),r=(0,s.useRef)(),h=(0,A.useAccess)(),t=new D.Uo("docker");return(0,p.jsxs)(B._z,{header:{extra:[(0,p.jsx)(M.u,{access:"canSeeDockerNetworkManage",children:(0,p.jsx)(K.Z,{onFinish:function(){var f,_;!((f=a.current)===null||f===void 0)&&f.reloadAndRest&&((_=a.current)===null||_===void 0||_.reloadAndRest())}},"create")},"create")]},children:[(0,p.jsx)(V.Z,{ref:r}),(0,p.jsx)(W.C,{rowKey:"Name",columns:[{title:D.FD.format("listTitle"),ellipsis:!0,dataIndex:"Name",render:function(f,_,n,c,u){return(0,p.jsx)(U.Z.Link,{onClick:function(){var O;(O=r.current)===null||O===void 0||O.show(_.Name)},children:_.Name})}},{title:D.FD.format("listType"),width:100,render:function(f,_,n,c,u){return(_.Name=="none"||_.Name=="bridge"||_.Name=="host")&&(0,p.jsx)(i.Z,{color:"blue",children:"System"})}},{title:D.FD.format("listDriver"),ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"IPAM Driver",ellipsis:!0,width:120,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4",ellipsis:!0,width:150,search:!1,render:function(f,_,n,c,u){return _.IPAM.Config&&_.IPAM.Config[0]?(0,p.jsxs)(R.Z,{direction:"vertical",children:[(0,p.jsx)("div",{children:_.IPAM.Config&&_.IPAM.Config[0].Subnet}),(0,p.jsx)("div",{children:_.IPAM.Config&&_.IPAM.Config[0].Gateway})]}):"-"}},{title:"IPV6",ellipsis:!0,width:150,search:!1,render:function(f,_,n,c,u){return _.IPAM.Config&&_.IPAM.Config[1]?(0,p.jsxs)(R.Z,{direction:"vertical",children:[(0,p.jsx)("div",{children:_.IPAM.Config&&_.IPAM.Config[1].Subnet}),(0,p.jsx)("div",{children:_.IPAM.Config&&_.IPAM.Config[1].Gateway})]}):"-"}},{title:D.FD.format("listCreatedAt"),ellipsis:!0,width:180,search:!1,dataIndex:"Created",render:function(f,_,n,c,u){return new Date(_.Created).toLocaleString()}}],request:function(){var C=P()(d()().mark(function f(_,n,c){var u;return d()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,b.jR)({name:_.Name});case 2:return u=O.sent,O.abrupt("return",{data:u.data.list,success:!0,total:u.data.list.length});case 4:case"end":return O.stop()}},f)}));return function(f,_,n){return C.apply(this,arguments)}}(),rowSelection:h.canSeeDockerNetworkManage?{defaultSelectedRowKeys:[],alwaysShowAlert:!0}:void 0,actionRef:a,quickToolbarRender:function(f){var _=f.selectedRows;return(0,p.jsxs)(R.Z,{size:16,children:[(0,p.jsx)(y.Z,{action:function(){return(0,b.CI)()},buttonProps:{icon:(0,p.jsx)(v.Z,{})},onSuccess:function(){var c,u;return!((c=a.current)===null||c===void 0)&&c.reloadAndRest&&((u=a.current)===null||u===void 0||u.reloadAndRest()),!0},onError:function(){var c,u;return!((c=a.current)===null||c===void 0)&&c.reset&&((u=a.current)===null||u===void 0||u.reset()),!0},confirmProps:{description:t.format("networkListManagePruneTip")},children:D.FD.format("listManagePrune")},"clearNotUse"),(0,p.jsx)(y.Z,{buttonProps:{danger:!0,type:"primary",icon:(0,p.jsx)(g.Z,{})},confirmProps:{showCommonConfirm:!0},action:function(){return(0,b._x)({name:_.map(function(c){return c.Id})})},onSuccess:function(){var c,u;return!((c=a.current)===null||c===void 0)&&c.reloadAndRest&&((u=a.current)===null||u===void 0||u.reloadAndRest()),!0},onError:function(){var c,u;return!((c=a.current)===null||c===void 0)&&c.reset&&((u=a.current)===null||u===void 0||u.reset()),!0},children:D.FD.format("listManageDeleteBatch")},"delete")]})}})]})}},14946:function(H,T,e){e.d(T,{CI:function(){return b},HY:function(){return R},IS:function(){return y},XY:function(){return B},_3:function(){return p},_x:function(){return v},jR:function(){return V},t9:function(){return U}});var L=e(15009),d=e.n(L),Z=e(99289),P=e.n(Z),M=e(82346);function y(a){return K.apply(this,arguments)}function K(){return K=P()(d()().mark(function a(r){return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,M.request)("/api/app/network/get-detail",{method:"POST",data:r}));case 1:case"end":return t.stop()}},a)})),K.apply(this,arguments)}function V(a){return W.apply(this,arguments)}function W(){return W=P()(d()().mark(function a(r){return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,M.request)("/api/app/network/get-list",{method:"POST",data:r}));case 1:case"end":return t.stop()}},a)})),W.apply(this,arguments)}function b(){return D.apply(this,arguments)}function D(){return D=P()(d()().mark(function a(){return d()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,M.request)("/api/app/network/prune",{method:"POST"});case 2:return h.abrupt("return",h.sent);case 3:case"end":return h.stop()}},a)})),D.apply(this,arguments)}function v(a){return g.apply(this,arguments)}function g(){return g=P()(d()().mark(function a(r){return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,M.request)("/api/app/network/delete",{method:"POST",data:r});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},a)})),g.apply(this,arguments)}function B(a){return A.apply(this,arguments)}function A(){return A=P()(d()().mark(function a(r){return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,M.request)("/api/app/network/create",{method:"POST",data:r});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},a)})),A.apply(this,arguments)}function U(a){return i.apply(this,arguments)}function i(){return i=P()(d()().mark(function a(r){return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,M.request)("/api/app/network/disconnect",{method:"POST",data:r});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},a)})),i.apply(this,arguments)}function R(a){return s.apply(this,arguments)}function s(){return s=P()(d()().mark(function a(r){return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,M.request)("/api/app/network/connect",{method:"POST",data:r});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},a)})),s.apply(this,arguments)}function p(a){return x.apply(this,arguments)}function x(){return x=P()(d()().mark(function a(r){return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,M.request)("/api/app/network/get-container-list",{method:"POST",data:r}));case 1:case"end":return t.stop()}},a)})),x.apply(this,arguments)}}}]);
