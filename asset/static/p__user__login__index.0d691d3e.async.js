"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4037],{24963:function(S,g,e){var m=e(67294),l=(0,m.createContext)({});g.Z=l},52756:function(S,g,e){e.r(g),e.d(g,{default:function(){return x},getLang:function(){return T}});var m=e(82346),l=e(31418),y=e(26058),f=e(85137),P=e(24963),B=e(65913),h=e(67294),p=e(85893);function T(d,c){return(0,m.getIntl)((0,m.getLocale)()).formatMessage({id:d},c)}function x(){var d=(0,h.useRef)(),c=(0,m.useIntl)(),v=function(t){for(var a=arguments.length,n=new Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];M.notification[t]({message:c.formatMessage({id:"notification.title."+t}),description:n.join(" "),placement:"topRight"})},o=function(t){for(var a=arguments.length,n=new Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];M.message[t](n.join(" "))},M=l.Z.useApp(),D=(0,m.useModel)("@@initialState"),A=D.initialState,W=D.loading,K=D.error,b=D.refresh,I=D.setInitialState,N=(0,m.useModel)("subscriber");return A!=null&&A.user.username&&N.addDataHandler("user:permission:".concat(A==null?void 0:A.user.username),function(u){b()}),(0,p.jsx)(y.Z,{children:(0,p.jsx)(P.Z.Provider,{value:{notice:{success:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];v.apply(void 0,["success"].concat(a))},error:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];v.apply(void 0,["error"].concat(a))},warning:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];v.apply(void 0,["warning"].concat(a))},info:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];v.apply(void 0,["info"].concat(a))},destroy:function(){M.notification.destroy()}},message:{success:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];o.apply(void 0,["success"].concat(a))},error:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];o.apply(void 0,["error"].concat(a))},warning:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];o.apply(void 0,["warning"].concat(a))},info:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];o.apply(void 0,["info"].concat(a))},loading:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];o.apply(void 0,["loading"].concat(a))},destroy:function(){M.message.destroy()}},loading:{show:function(){d.current&&d.current.show()},destroy:function(){d.current&&d.current.destroy()}},lang:function(t,a){return c.formatMessage({id:t},a)}},children:(0,p.jsxs)(B.Z,{ref:d,children:[(0,p.jsx)(m.Outlet,{}),(0,p.jsx)(f.Z.BackTop,{duration:10,style:{bottom:100}})]})},W?"1":"2")})}},65913:function(S,g,e){var m=e(5574),l=e.n(m),y=e(74330),f=e(67294),P=e(85893),B=(0,f.forwardRef)(function(h,p){(0,f.useImperativeHandle)(p,function(){return{show:function(){c(!0)},destroy:function(){c(!1)}}});var T=(0,f.useState)(!1),x=l()(T,2),d=x[0],c=x[1];return(0,P.jsx)(y.Z,{spinning:d,size:"default",children:h.children})});g.Z=B},66139:function(S,g,e){e.r(g),e.d(g,{default:function(){return k}});var m=e(15009),l=e.n(m),y=e(99289),f=e.n(y),P=e(5574),B=e.n(P),h=e(68602),p=e(89075),T=e(68262),x=e(82346),d=e(9361),c=e(38925),v=e(86250),o=e(25593),M=e(67294),D=e(52756),A=e(29177),W=e(88360),K=e(94149),b=e(12119),I=e(5966),N=e(97462),u=e(63434),t=e(92398),a=e(55241),n=e(42075),r=e(85893);function X(w){var U;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.Z,{centered:!0,activeKey:w.loginType,items:[{icon:(0,r.jsx)(A.Z,{}),key:"account",label:"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55"},{icon:(0,r.jsx)(W.Z,{}),key:"register",label:"\u914D\u7F6E\u7BA1\u7406\u5458\u7528\u6237\u540D\u53CA\u5BC6\u7801"}].filter(function(O){return O.key==w.loginType})}),(0,r.jsx)(I.Z,{name:"username",fieldProps:{size:"large",prefix:(0,r.jsx)(A.Z,{className:"prefixIcon"})},placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"}]},"username"),(0,r.jsx)(I.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,r.jsx)(K.Z,{className:"prefixIcon"})},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"}]},"password"),w.showTwoFa&&(0,r.jsx)(I.Z,{name:"code",placeholder:"\u8BF7\u8F93\u5165\u53CC\u56E0\u7D20\u9A8C\u8BC1\u7801",rules:[{required:!0}],fieldProps:{maxLength:6,size:"large",prefix:(0,r.jsx)(b.Z,{className:"prefixIcon"})}}),w.loginType=="register"&&(0,r.jsx)(N.Z,{name:["password"],children:function(V){var q=V.password;return(0,r.jsx)(I.Z.Password,{fieldProps:{size:"large",prefix:(0,r.jsx)(K.Z,{className:"prefixIcon"})},placeholder:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801",name:"confirmPassword",dependencies:["password"],rules:[{required:!0,message:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801\uFF01"},function(H){var _=H.getFieldValue;return{validator:function(Q,L){return!L||_("password")===L?Promise.resolve():Promise.reject(new Error("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4"))}}}]},"confirmPassword")}}),(0,r.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,r.jsx)(u.Z,{noStyle:!0,name:"autoLogin",initialValue:!0,children:"\u4FDD\u6301\u767B\u5F55\u72B6\u6001"}),(0,r.jsx)(a.Z,{content:(0,r.jsxs)(n.Z,{direction:"vertical",size:[0,30],children:[(0,r.jsxs)("span",{children:["\u5BBF\u4E3B\u673A\u4E2D\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\uFF0C",(0,r.jsx)("a",{href:"https://dpanel.cc/#/zh-cn/install/ctrl",target:"_blank",children:(0,D.getLang)("notification.help")})]}),(0,r.jsxs)(o.Z.Text,{copyable:!0,style:{padding:10,background:"#24292f",color:"#ffffff"},children:["docker exec ",(U=w.appName)!==null&&U!==void 0?U:"dpanel"," ./dpanel user:reset -f config.yaml"]}),(0,r.jsx)("span",{})]}),children:(0,r.jsx)(o.Z.Link,{style:{float:"right"},children:"\u5FD8\u8BB0\u5BC6\u7801?"})})]})]})}var k=function(){var w=d.Z.useToken(),U=w.token,O=(0,x.useModel)("@@initialState"),V=O.initialState,q=O.loading,H=O.error,_=O.refresh,ee=O.setInitialState,Q=(0,M.useState)({loginType:"account",appName:"dpanel"}),L=B()(Q,2),C=L[0],ne=L[1],re=(0,M.useState)(),Y=B()(re,2),E=Y[0],ae=Y[1],te=(0,x.useAntdConfigSetter)(),J=(0,M.useRef)();return(0,M.useEffect)(function(){window.document.title="DPanel - Docker \u7BA1\u7406\u9762\u677F",(0,h.Nr)().then(function(){var $=f()(l()().mark(function F(i){var j;return l()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:j={loginType:"account"},i.data.showBuildName&&i.data.family!="lite"&&(j.showBuildName=!0),i.data.showRegister&&(j.loginType="register"),i.data.family=="demo"&&(j.showDemo=!0),j.appName=i.data.appName,i.data.theme&&i.data.theme.algorithm&&(localStorage.setItem("dpanel-theme",i.data.theme.algorithm),te(function(s){var z;(z=s.theme)!==null&&z!==void 0||(s.theme={});var G=[];return i.data.theme&&(i.data.theme.algorithm=="dark"?G.push(d.Z.darkAlgorithm):G.push(d.Z.defaultAlgorithm),s.theme.algorithm=G),s})),i.data.feature.indexOf("pe")!=-1&&(0,p.ax)().then(function(s){s.data&&s.data.themeUserConfig&&s.data.themeUserConfig.siteTitle&&(window.document.title=s.data.themeUserConfig.siteTitle),ae(s.data)}),ne(j);case 8:case"end":return Z.stop()}},F)}));return function(F){return $.apply(this,arguments)}}())},[]),(0,r.jsxs)(r.Fragment,{children:[C&&C.showBuildName&&(0,r.jsx)(c.Z,{type:"error",message:"\u60A8\u521B\u5EFA\u7684\u9762\u677F\u5BB9\u5668\u540D\u79F0\u975E\u9ED8\u8BA4\u7684 dpanel\uFF0C\u8BF7\u91CD\u5EFA\u5E76\u901A\u8FC7\u73AF\u5883\u53D8\u91CF -e APP_NAME= \u6307\u5B9A\u65B0\u7684\u5BB9\u5668\u540D\u79F0\u3002",banner:!0}),C&&C.showDemo&&(0,r.jsx)(c.Z,{type:"error",message:"\u5F53\u524D\u4E3A\u6F14\u793A\u7AD9\uFF0C\u7981\u7528 docker \u76F8\u5173\u529F\u80FD\u3002\u5E10\u53F7\u5BC6\u7801\u4E3A admin 123456",banner:!0}),(0,r.jsx)(v.Z,{justify:"center",align:"center",style:{height:"100vh",background:E&&E.themeUserConfig&&E.themeUserConfig.bgImage&&E.themeUserConfig.bgImage.src?"url(".concat(E.themeUserConfig.bgImage.src,")"):"".concat(U.colorBgElevated,"dd")},children:(0,r.jsxs)(T.U,{onFinish:function(){var $=f()(l()().mark(function F(i){var j,R;return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(C.loginType!="register"){s.next=3;break}return s.next=3,(0,h.AT)({username:i.username,password:i.password,confirmPassword:i.confirmPassword});case 3:return s.prev=3,s.next=6,(0,h.n$)({username:i.username,password:i.password,autoLogin:i.autoLogin,code:i.code});case 6:if(j=s.sent,!j.data.accessToken){s.next=14;break}return localStorage.setItem("token",j.data.accessToken),_(),window.location.href="/dpanel/ui",s.abrupt("return");case 14:return s.abrupt("return",!1);case 15:s.next=20;break;case 17:s.prev=17,s.t0=s.catch(3),(R=J.current)===null||R===void 0||R.resetFields(["code"]);case 20:case"end":return s.stop()}},F,null,[[3,17]])}));return function(F){return $.apply(this,arguments)}}(),containerStyle:{background:"transparent",height:"auto"},logo:"",title:(0,r.jsx)("a",{href:"https://dpanel.cc",target:"_blank",children:(0,r.jsx)("img",{src:E&&E.themeUserConfig&&E.themeUserConfig.loginLogo?E.themeUserConfig.loginLogo:"/dpanel/static/asset/logo.png",width:"350"})}),subTitle:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsx)("br",{})]}),formRef:J,children:[(0,r.jsx)(X,{showTwoFa:!!(E&&E.canSeeEnableTwoFa),loginType:C.loginType,appName:C.appName}),(0,r.jsxs)(o.Z.Paragraph,{style:{marginBottom:10,color:"#999999"},children:["\u767B\u5F55\u5373\u8868\u793A\u540C\u610F ",(0,r.jsx)("a",{href:"https://dpanel.cc/#/zh-cn/manual/license?id=%e8%ae%b8%e5%8f%af%e5%8d%8f%e8%ae%ae",target:"_blank",children:"\u300ADPanel \u8BB8\u53EF\u534F\u8BAE\u300B"})," \u5426\u5219\u8BF7\u52FF\u4F7F\u7528"]})]})})]})}},89075:function(S,g,e){e.d(g,{$w:function(){return B},YQ:function(){return p},ax:function(){return x}});var m=e(15009),l=e.n(m),y=e(99289),f=e.n(y),P=e(82346);function B(){return h.apply(this,arguments)}function h(){return h=f()(l()().mark(function c(){return l()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,P.request)("/api/pro/home/get-machine-id",{method:"POST"}));case 1:case"end":return o.stop()}},c)})),h.apply(this,arguments)}function p(){return T.apply(this,arguments)}function T(){return T=f()(l()().mark(function c(){return l()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,P.request)("/api/pro/home/get-license-info",{method:"POST"}));case 1:case"end":return o.stop()}},c)})),T.apply(this,arguments)}function x(){return d.apply(this,arguments)}function d(){return d=f()(l()().mark(function c(){return l()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,P.request)("/api/pro/home/login-info",{method:"POST"}));case 1:case"end":return o.stop()}},c)})),d.apply(this,arguments)}}}]);
