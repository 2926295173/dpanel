"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3985],{85060:function(pe,K,t){t.d(K,{Z:function(){return A}});var S=t(87462),P=t(67294),G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},M=G,W=t(84089),V=function(X,f){return P.createElement(W.Z,(0,S.Z)({},X,{ref:f,icon:M}))},H=P.forwardRef(V),A=H},63434:function(pe,K,t){var S=t(1413),P=t(45987),G=t(22270),M=t(84567),W=t(67294),V=t(90789),H=t(35510),A=t(85893),z=["options","fieldProps","proFieldProps","valueEnum"],X=W.forwardRef(function(Z,ae){var _=Z.options,c=Z.fieldProps,T=Z.proFieldProps,B=Z.valueEnum,ie=(0,P.Z)(Z,z);return(0,A.jsx)(H.Z,(0,S.Z)({ref:ae,valueType:"checkbox",valueEnum:(0,G.h)(B,void 0),fieldProps:(0,S.Z)({options:_},c),lightProps:(0,S.Z)({labelFormatter:function(){return(0,A.jsx)(H.Z,(0,S.Z)({ref:ae,valueType:"checkbox",mode:"read",valueEnum:(0,G.h)(B,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,S.Z)({options:_},c),proFieldProps:T},ie))}},ie.lightProps),proFieldProps:T},ie))}),f=W.forwardRef(function(Z,ae){var _=Z.fieldProps,c=Z.children;return(0,A.jsx)(M.Z,(0,S.Z)((0,S.Z)({ref:ae},_),{},{children:c}))}),U=(0,V.G)(f,{valuePropName:"checked"}),w=U;w.Group=X,K.Z=w},52688:function(pe,K,t){var S=t(1413),P=t(45987),G=t(67294),M=t(35510),W=t(85893),V=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],H=G.forwardRef(function(A,z){var X=A.fieldProps,f=A.unCheckedChildren,U=A.checkedChildren,w=A.proFieldProps,Z=(0,P.Z)(A,V);return(0,W.jsx)(M.Z,(0,S.Z)({valueType:"switch",fieldProps:(0,S.Z)({unCheckedChildren:f,checkedChildren:U},X),ref:z,valuePropName:"checked",proFieldProps:w,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},Z))});K.Z=H},90672:function(pe,K,t){var S=t(1413),P=t(45987),G=t(67294),M=t(35510),W=t(85893),V=["fieldProps","proFieldProps"],H=function(z,X){var f=z.fieldProps,U=z.proFieldProps,w=(0,P.Z)(z,V);return(0,W.jsx)(M.Z,(0,S.Z)({ref:X,valueType:"textarea",fieldProps:f,proFieldProps:U},w))};K.Z=G.forwardRef(H)},92067:function(pe,K,t){t.d(K,{Z:function(){return ae}});var S=t(15009),P=t.n(S),G=t(99289),M=t.n(G),W=t(13822),V=t(64789),H=t(78099),A=t(42075),z=t(83062),X=t(28036),f=t(37413),U=t(5251),w=t(36146),Z=t(85893);function ae(_){return(0,Z.jsx)(H.Z,{columns:[{title:w.FD.format("listContainerName"),dataIndex:"name",render:function(T,B,ie,J){return(0,Z.jsx)(A.Z,{direction:"vertical",style:{textAlign:"left"},children:B==null?void 0:B.Names.map(function(re){return(0,U.fi)(re,"/")})},B.Id)}},{title:w.FD.format("listPort"),dataIndex:"ports",search:!1,render:function(T,B,ie,J){var re=[],Q=[];return B!=null&&B.Ports&&B.Ports.map(function(q,$){q.PublicPort?re.push(q):Q.push(q)}),(0,Z.jsx)(f.Z,{publicPort:re,privatePort:Q,domain:[]})}},{title:w.FD.format("listManage"),valueType:"option",key:"option",ellipsis:!0,width:100,render:function(T,B,ie,J){return[(0,Z.jsx)(z.Z,{title:w.FD.format("listManageUse"),children:(0,Z.jsx)(X.ZP,{type:"link",onClick:M()(P()().mark(function re(){var Q;return P()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,W.jV)({md5:B.Id});case 2:Q=$.sent,_.onSelect&&_.onSelect(Q.data.info);case 4:case"end":return $.stop()}},re)})),children:(0,Z.jsx)(V.Z,{})},B.Id)},B.Id)]}}],rowKey:"Id",request:function(){var c=M()(P()().mark(function T(B,ie,J){var re;return P()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(0,W.IE)({siteTitle:B.name});case 2:return re=q.sent,q.abrupt("return",{data:re.data.list,success:!0,total:re.data.list.length});case 4:case"end":return q.stop()}},T)}));return function(T,B,ie){return c.apply(this,arguments)}}(),pagination:{pageSize:9}})}},52255:function(pe,K,t){t.d(K,{Z:function(){return G}});var S=t(67294),P=t(85893);function G(M){return(0,P.jsx)("div",{style:{display:M.show?"block":"none"},children:M.children})}},20743:function(pe,K,t){var S=t(15009),P=t.n(S),G=t(99289),M=t.n(G),W=t(5574),V=t.n(W),H=t(67294),A=t(14946),z=t(64789),X=t(78099),f=t(28036),U=t(85265),w=t(42075),Z=t(66309),ae=t(16970),_=t(3616),c=t(36146),T=t(85893),B=(0,H.forwardRef)(function(ie,J){(0,H.useImperativeHandle)(J,function(){return{show:function(){$(!0)}}});var re=(0,H.useState)(!1),Q=V()(re,2),q=Q[0],$=Q[1],je=(0,H.useRef)(),j=new c.Uo("components.network");return(0,T.jsxs)(T.Fragment,{children:[ie.showTriggerButton&&(0,T.jsx)(f.ZP,{onClick:function(){$(!0)},children:j.format("selectTriggerButton")}),(0,T.jsx)(U.Z,{title:j.format("selectDrawerTitle"),width:_.R_,footer:!1,open:q,onClose:function(){return $(!1)},extra:(0,T.jsx)(w.Z,{children:(0,T.jsx)(ae.Z,{onFinish:function(){var I,n;!((I=je.current)===null||I===void 0)&&I.reloadAndRest&&((n=je.current)===null||n===void 0||n.reloadAndRest())}},"create")}),children:(0,T.jsx)(X.Z,{rowKey:"Name",actionRef:je,columns:[{title:c.FD.format("listTitle"),dataIndex:"Name",render:function(I,n,e,Ce,de){return n.Name=="none"||n.Name=="bridge"||n.Name=="host"?(0,T.jsxs)(T.Fragment,{children:[n.Name," ",(0,T.jsx)(Z.Z,{color:"blue",children:"System"})]}):(0,T.jsx)(T.Fragment,{children:I})}},{title:c.FD.format("listType"),ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"Driver",ellipsis:!0,width:100,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4",search:!1,width:120,render:function(I,n,e,Ce,de){return n.IPAM.Config&&n.IPAM.Config[0]&&(0,T.jsxs)(w.Z,{direction:"vertical",children:[n.IPAM.Config[0].Subnet,n.IPAM.Config[0].Gateway]})}},{title:"IPV6",search:!1,render:function(I,n,e,Ce,de){return n.IPAM.Config&&n.IPAM.Config[1]&&(0,T.jsxs)(w.Z,{direction:"vertical",children:[n.IPAM.Config[1].Subnet,n.IPAM.Config[1].Gateway]})}},{title:c.FD.format("listManage"),width:100,search:!1,render:function(I,n,e,Ce,de){return[n.Name!="none"&&n.Name!="bridge"&&n.Name!="host"&&(0,T.jsx)(f.ZP,{type:"link",onClick:function(){ie.onSelect(n),$(!1)},children:(0,T.jsx)(z.Z,{})},n.Id)]}}],request:function(){var E=M()(P()().mark(function I(n,e,Ce){var de;return P()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,(0,A.jR)({name:n.Name});case 2:return de=ue.sent,ue.abrupt("return",{data:de.data.list,success:!0,total:de.data.list.length});case 4:case"end":return ue.stop()}},I)}));return function(I,n,e){return E.apply(this,arguments)}}(),pagination:{pageSize:10}})})]})});K.Z=B},35880:function(pe,K,t){var S=t(67294),P=(0,S.createContext)({});K.Z=P},57841:function(pe,K,t){t.r(K),t.d(K,{default:function(){return Pt}});var S=t(15009),P=t.n(S),G=t(99289),M=t.n(G),W=t(5574),V=t.n(W),H=t(90078),A=t(38345),z=t(97269),X=t(2236),f=t(5966),U=t(24739),w=t(97462),Z=t(30291),ae=t(92398),_=t(40056),c=t(67294),T=t(35880),B=t(13822),ie=t(51042),J=t(62370),re=t(63434),Q=t(17186),q=t(25593),$=t(42075),je=t(85265),j=t(92067),E=t(5251),I=t(3616),n=t(36146),e=t(85893),Ce=(0,c.forwardRef)(function(i,O){var l=(0,c.useState)(!1),F=V()(l,2),g=F[0],d=F[1],s=(0,c.useRef)(),r=new n.Uo("components.appForm"),u=function(p){var m=(0,c.useState)([]),x=V()(m,2),R=x[0],h=x[1];return(0,c.useEffect)(function(){(0,B.jV)({md5:p.name}).then(function(D){var b;return h((b=D.data.info.Config.Env)!==null&&b!==void 0?b:[]),!0})},[]),(0,e.jsxs)(A.Z,{bordered:!0,extra:p.action,style:{marginBottom:10},children:[(0,e.jsx)(A.Z,{title:r.format("createLinkItemTitle"),children:(0,e.jsxs)(U.UW,{children:[(0,e.jsx)(f.Z,{label:r.format("createLinkItemName"),name:"name",width:"md",readonly:!0}),(0,e.jsx)(f.Z,{label:r.format("createLinkItemAlise"),name:"alise",width:"md",readonly:!0,tooltip:r.format("createLinkItemAliseTip"),hidden:!0}),(0,e.jsx)(J.Z,{label:r.format("createLinkItemAlise"),tooltip:r.format("createLinkItemAliseTip"),children:(0,e.jsx)(q.Z.Text,{copyable:!0,children:p.record.alise})}),(0,e.jsx)(re.Z,{label:r.format("createLinkItemVolume"),name:"volume"})]})}),(0,e.jsx)(A.Z,{title:r.format("createLinkItemEnv"),children:(0,e.jsx)($.Z,{direction:"vertical",children:R&&R.map(function(D,b){return(0,e.jsx)(q.Z.Text,{copyable:{icon:(0,e.jsx)(ie.Z,{}),onCopy:function(){var ee=D.split("=");i.onAddEnv(ee[0],ee[1])},tooltips:["add env","success"]},code:!0,ellipsis:{tooltip:D},style:{width:300},children:D},b)})},"linkEnv")})]})},C=function(p){var m,x,R=!1,h=(m=(x=s.current)===null||x===void 0?void 0:x.getList())!==null&&m!==void 0?m:[];if(h.map(function(b){b.name==p.name&&(R=!0)}),!R){var D;(D=s.current)===null||D===void 0||D.add(p)}};return(0,c.useImperativeHandle)(O,function(){return{setDefaultLink:function(p){p&&p.map(function(m){m.name!=""&&C(m)})}}}),(0,e.jsxs)(A.Z,{title:r.format("createLinkTitle"),headerBordered:!0,children:[(0,e.jsx)(Q.u,{name:"links",actionRef:s,creatorButtonProps:{creatorButtonText:r.format("createLinkAddButton")},actionGuard:{beforeAddRow:function(p,m){return d(!0),!1}},copyIconProps:!1,min:0,itemRender:function(p,m){return(0,e.jsx)(u,{action:p.action,name:m.record.name,record:m.record})}}),(0,e.jsx)(je.Z,{title:r.format("createLinkSelectContainer"),width:I.R_,footer:!1,open:g,onClose:function(){return d(!1)},children:(0,e.jsx)(j.Z,{onSelect:function(p){C({name:(0,E.fi)(p.Name,"/"),alise:"".concat(p.Config.Hostname,".").concat(p.Config.Domainname),volume:!1}),d(!1)}})})]})}),de=Ce,ge=t(91058),ue=t(3393),xe=t(64317),Ze=(0,c.forwardRef)(function(i,O){var l=(0,c.useRef)(),F=(0,c.useState)(),g=V()(F,2),d=g[0],s=g[1],r=new n.Uo("components.appForm");(0,c.useImperativeHandle)(O,function(){return{setDefaultDestPath:function(v){var p,m,x=(p=(m=l.current)===null||m===void 0?void 0:m.getList())!==null&&p!==void 0?p:[];v.length!=0&&v.filter(function(R){return R!=""}).map(function(R){var h=!1;if(x.map(function(b){if(b.dest==R){h=!0;return}}),!h){var D;(D=l.current)===null||D===void 0||D.add({dest:R,permission:"write",inImage:!0})}})},addUserVolumeItem:function(v,p){var m,x=(m=l.current)===null||m===void 0?void 0:m.getList(),R=!1;if(x==null||x.map(function(D){if(D.dest==p){R=!0;return}}),!R){var h;(h=l.current)===null||h===void 0||h.add({host:v,dest:p})}}}});var u=function(){var C=M()(P()().mark(function v(p){var m,x;return P()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!d){h.next=2;break}return h.abrupt("return");case 2:if(p){h.next=4;break}return h.abrupt("return");case 4:return h.next=6,(0,ue.cD)({md5:p});case 6:m=h.sent,x={title:"/",value:"/",children:[]},m.data.list.map(function(D){var b=x;D.split("/").map(function(N,ee,ce){var te;if(N){var y=(te=b.children)===null||te===void 0?void 0:te.find(function(k){return k.title===N});y||(y={title:N,value:ce.join("/"),children:[]},b.children?b.children.push(y):b.children=[y]),b=y}})}),x.children&&s(x.children);case 10:case"end":return h.stop()}},v)}));return function(p){return C.apply(this,arguments)}}();return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(A.Z,{title:r.format("createVolumeTitle"),tooltip:r.format("createVolumeTitleTip"),headerBordered:!0,direction:"column",children:(0,e.jsx)(Q.u,{actionRef:l,name:"volumes",creatorButtonProps:{creatorButtonText:r.format("createVolumeAddButton")},copyIconProps:!1,min:0,children:function(v,p,m){var x=m.getCurrentRowData();return(0,e.jsxs)(U.UW,{children:[(0,e.jsxs)($.Z.Compact,{children:[(0,e.jsx)(f.Z,{label:r.format("createVolumeHost"),name:"host",width:i.showInDrawer?"sm":"md"}),(0,e.jsx)(xe.Z,{label:" ",options:r.option("createVolumePermission",["write","readonly"]),initialValue:"write",name:"permission"})]}),(0,e.jsx)($.Z.Compact,{children:(0,e.jsx)(f.Z,{label:r.format("createVolumeDest"),name:"dest",width:i.showInDrawer?"sm":"md",required:!0,rules:[{required:!0}],disabled:i.disabledUserVolumeDest||x.inImage})})]})}})})})}),De=Ze,me=t(2831),se=t(52688),we=t(86125),Pe=t(71230),be=t(15746),ye=t(44349);function Oe(i){var O,l=(0,c.useState)(),F=V()(l,2),g=F[0],d=F[1],s=new n.Uo("components.appForm");return(0,c.useEffect)(function(){(0,me.aF)().then(function(r){return d(r.data.info)})},[]),(0,e.jsxs)(A.Z,{children:[(0,e.jsx)(f.Z,{label:s.format("createAdvRuntimeShmsize"),name:"shmsize",initialValue:"64M",tooltip:s.format("createAdvRuntimeShmsizeTip")}),(0,e.jsx)(J.Z,{label:s.format("createAdvRuntimeCpus"),name:"cpus",children:(0,e.jsx)(we.Z,{step:.1,max:g==null?void 0:g.NCPU,marks:Object.fromEntries(s.option("createAdvRuntimeCpusOption",["0","1","1.5","2","4","6","8"]).map(function(r){return[r.value,r.label]}))})}),(0,e.jsx)(J.Z,{label:s.format("createAdvRuntimeMemory"),name:"memory",children:(0,e.jsx)(we.Z,{step:256,max:Math.round(((O=g==null?void 0:g.MemTotal)!==null&&O!==void 0?O:0)/1024/1024),marks:Object.fromEntries(s.option("createAdvRuntimeMemoryOption",["0","1024","2048","3072","4096"]).map(function(r){return[r.value,r.label]}))})}),(0,e.jsx)(xe.Z,{label:s.format("createAdvRuntimeLogDriver"),name:["log","driver"],tooltip:s.format("createAdvRuntimeLogDriverTip"),initialValue:"json-file",options:s.option("createAdvRuntimeLogDriverOption",["json-file","journald"])}),(0,e.jsx)(w.Z,{name:["log"],children:function(u){var C=u.log;if(C.driver=="json-file")return(0,e.jsxs)(U.UW,{children:[(0,e.jsx)(f.Z,{label:s.format("createAdvRuntimeLogMaxSize"),name:["log","maxSize"],placeholder:"5M",tooltip:s.format("createAdvRuntimeLogMaxSizeTip")}),(0,e.jsx)(f.Z,{tooltip:s.format("createAdvRuntimeLogMaxFileTip"),label:s.format("createAdvRuntimeLogMaxFile"),name:["log","maxFile"],placeholder:"10"})]})}}),(0,e.jsx)(ye.Z,{name:"device",label:s.format("createAdvRuntimeDevice"),hideCopyButton:!0,showAddButton:!0,items:[{label:s.format("createAdvRuntimeDeviceHost"),name:"host",width:"md",placeholder:"/dev/tty0"},{label:s.format("createAdvRuntimeDeviceDest"),name:"dest",width:"md",placeholder:"/dev/tty0"}]}),(0,e.jsxs)(Pe.Z,{children:[(0,e.jsx)(be.Z,{span:4,children:(0,e.jsx)(se.Z,{label:s.format("createAdvRuntimeGpus"),name:["gpus","enable"]})}),(0,e.jsx)(be.Z,{span:20,children:(0,e.jsx)(w.Z,{name:["gpus"],children:function(u){var C=u.gpus;if(C&&C.enable)return(0,e.jsx)(xe.Z,{mode:"tags",label:s.format("createAdvRuntimeGpusDevice"),name:["gpus","device"],placeholder:s.format("createAdvRuntimeGpusDeviceEmpty")})}})})]}),(0,e.jsx)(w.Z,{name:["gpus"],children:function(u){var C=u.gpus;if(C&&C.enable)return(0,e.jsx)(xe.Z,{label:s.format("createAdvRuntimeGpusCap"),name:["gpus","capabilities"],mode:"multiple",fieldProps:{allowClear:!0},options:s.option("createAdvRuntimeGpusCapOption",["compute","compat32","graphics","utility","video","display"])})}})]})}function Se(){var i=new n.Uo("components.appForm");return(0,e.jsx)(A.Z,{title:i.format("createAdvLabel"),children:(0,e.jsx)(Q.u,{name:"label",label:"",creatorButtonProps:{creatorButtonText:i.format("createAdvLabelAddButton")},copyIconProps:!1,min:0,children:(0,e.jsxs)(U.UW,{children:[(0,e.jsx)(f.Z,{width:"md",name:"name",label:i.format("createAdvLabelName")}),(0,e.jsx)(f.Z,{width:"md",name:"value",label:i.format("createAdvLabelValue")})]})})})}var Ne=t(44771),Re=t(86615),Et="default",It="user";function $e(i){return(0,e.jsx)(J.Z,{label:i.label,tooltip:i.tooltip,children:(0,e.jsxs)($.Z.Compact,{block:!0,children:[(0,e.jsx)(Re.Z.Group,{radioType:"button",name:[i.name,"useDefault"],options:[{label:n.FD.format("listDefault"),value:!0},{label:n.FD.format("listUseUser"),value:!1}]}),(0,e.jsx)(w.Z,{name:[i.name],children:function(l){return l[i.name]&&l[i.name].useDefault?(0,e.jsx)(f.Z,{name:[i.name,"default"],disabled:!0}):(0,e.jsx)(f.Z,{name:[i.name,"value"]})}})]})})}var Te=$e,Fe=t(24963);function Ge(){var i=(0,c.useContext)(Fe.Z),O=i.message,l=new n.Uo("components.appForm");return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(A.Z,{children:[(0,e.jsx)(Ne.Z,{label:l.format("createAdvRunCommandRestart")}),(0,e.jsxs)(U.UW,{children:[(0,e.jsx)(se.Z,{fieldProps:{onChange:function(g){g&&O.warning(l.format("createAdvRunCommandPrivilegedNotice"))}},name:"privileged",tooltip:"--privileged",label:l.format("createAdvRunCommandPrivileged"),initialValue:!1}),(0,e.jsx)(se.Z,{name:"autoRemove",tooltip:"--rm",label:l.format("createAdvRunCommandAutoRemove"),initialValue:!1}),(0,e.jsx)(se.Z,{fieldProps:{onChange:function(g){g&&O.warning(l.format("createAdvRunCommandHostPidNotice"))}},tooltip:"--pid host",name:"hostPid",label:l.format("createAdvRunCommandHostPid"),initialValue:!1})]}),(0,e.jsx)(Te,{label:"WorkDir",tooltip:l.format("createAdvRunCommandWorkDirTip"),name:"workDir"}),(0,e.jsx)(Te,{label:"User",tooltip:l.format("createAdvRunCommandUserTip"),name:"user"}),(0,e.jsx)(Te,{label:"Command",tooltip:l.format("createAdvRunCommandCommandTip"),name:"command"}),(0,e.jsx)(Te,{label:"Entrypoint",tooltip:l.format("createAdvRunCommandEntrypointTip"),name:"entrypoint"})]})})}var ze=t(91845),Ve=t(62597),We=t(82346),Ye=t(20743),Xe=(0,c.forwardRef)(function(i,O){var l=(0,c.useRef)(),F=(0,c.useRef)(),g=new n.Uo("components.appForm");(0,c.useImperativeHandle)(O,function(){return{}});var d=function(r){var u,C,v=!1,p=(u=(C=l.current)===null||C===void 0?void 0:C.getList())!==null&&u!==void 0?u:[];if(p.map(function(x){x.name==r.name&&(v=!0)}),!v){var m;(m=l.current)===null||m===void 0||m.add(r)}};return(0,e.jsxs)(A.Z,{title:g.format("createNetworkTitle"),headerBordered:!0,extra:(0,e.jsx)($.Z,{children:i.showUseBridgeNetwork&&(0,e.jsx)(se.Z,{name:"useBridgeNetwork",fieldProps:{checkedChildren:g.format("createNetworkUseBridgeNetwork"),unCheckedChildren:g.format("createNetworkUseBridgeNetwork")}},"useBridgeNetwork")}),children:[(0,e.jsx)(Q.u,{name:"network",actionRef:l,creatorButtonProps:{creatorButtonText:g.format("createNetworkAddButton")},actionGuard:{beforeAddRow:function(r,u){var C;return(C=F.current)===null||C===void 0||C.show(),!1}},copyIconProps:!1,min:0,itemRender:function(r,u){if(u.record.name!="bridge")return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(U.UW,{children:[(0,e.jsx)(f.Z,{label:g.format("createNetworkName"),name:"name",width:"md",disabled:!0,fieldProps:{value:u.record.name}}),(0,e.jsx)(f.Z,{label:g.format("createNetworkAlise"),name:"alise",tooltip:g.format("createNetworkAliseTip"),placeholder:g.format("createNetworkAliseEmpty")}),(0,e.jsx)(f.Z,{label:"IpV4",name:"ipV4",width:"md",disabled:u.record.name=="bridge",fieldProps:{addonAfter:u.record.subnet}}),u.record.subnetV6&&(0,e.jsx)(f.Z,{label:"IpV6",name:"ipV6",width:"md",disabled:u.record.name=="bridge",fieldProps:{addonAfter:u.record.subnetV6}}),(0,e.jsx)(J.Z,{label:" ",children:r.action})]})})}}),(0,e.jsx)(Ye.Z,{ref:F,onSelect:function(r){d({name:r.Name,alise:[""],subnet:r.IPAM.Config[0].Subnet,subnetV6:r.IPAM.Config[1]&&r.IPAM.Config[1].Subnet})}})]})}),Je=Xe,Qe=(0,c.forwardRef)(function(i,O){var l=(0,c.useRef)(),F=(0,c.useContext)(T.Z),g=F.createFormRef,d=new n.Uo("components.appForm");return(0,c.useImperativeHandle)(O,function(){return{setExposePort:function(r){if(r){var u,C,v=(u=(C=l.current)===null||C===void 0?void 0:C.getList())!==null&&u!==void 0?u:[];Object.keys(r).map(function(p){var m=!1;if(v.map(function(R){R.dest==p&&(m=!0)}),!m){var x;(x=l.current)===null||x===void 0||x.add({host:"",dest:p})}})}},addPortItem:function(r,u){var C,v=(C=l.current)===null||C===void 0?void 0:C.getList(),p=!1;if(v==null||v.map(function(x){if(x.host==r){p=!0;return}}),!p){var m;(m=l.current)===null||m===void 0||m.add({host:String(r),dest:String(u)})}}}}),(0,e.jsx)(A.Z,{title:d.format("createPortTitle"),tooltip:d.format("createPortTitleTip"),headerBordered:!0,extra:(0,e.jsxs)($.Z,{children:[i.showBindHost&&(0,e.jsx)(se.Z,{name:"useHostNetwork",fieldProps:{checkedChildren:d.format("createPortBindHost"),unCheckedChildren:d.format("createPortBindHost"),onChange:function(r){if(r){var u;(u=g.current)===null||u===void 0||u.setFieldsValue({bindIpV6:!1,publishAllPorts:!1})}}}}),i.showBindIpV6&&(0,e.jsx)(w.Z,{name:["siteName","useHostNetwork"],children:function(r){var u=r.useHostNetwork;return(0,e.jsx)(se.Z,{name:"publishAllPorts",fieldProps:{checkedChildren:d.format("createPortPublishAllPorts"),unCheckedChildren:d.format("createPortPublishAllPorts")},disabled:u},"publishAllPorts")}}),i.showBindIpV6&&(0,e.jsx)(w.Z,{name:["siteName","useHostNetwork"],children:function(r){var u=r.useHostNetwork;return(0,e.jsx)(se.Z,{name:"bindIpV6",fieldProps:{checkedChildren:"IpV6",unCheckedChildren:"IpV6"},disabled:u},"bindIpV6")}})]}),children:(0,e.jsx)(w.Z,{name:["useHostNetwork","bindIpV6","publishAllPorts"],children:function(r){var u=r.useHostNetwork,C=r.bindIpV6,v=r.publishAllPorts;if(!u&&!v)return(0,e.jsx)(Q.u,{name:"ports",actionRef:l,creatorButtonProps:{creatorButtonText:d.format("createPortAddButton")},min:0,copyIconProps:!1,children:(0,e.jsxs)(U.UW,{children:[(0,e.jsx)(f.Z,{width:i.showInDrawer?"sm":"md",name:"host",label:d.format("createPortHost"),tooltip:d.format("createPortHostTip"),placeholder:d.format("createPortHostEmpty"),required:C,rules:[{required:C}]}),(0,e.jsx)(f.Z,{label:d.format("createPortDest"),width:i.showInDrawer?"sm":"md",name:"dest",placeholder:d.format("createPortDestEmpty"),required:!0,rules:[{required:!0}]})]})})}})})}),qe=Qe,Ee=t(52255);function et(){var i=(0,c.useRef)(),O=new n.Uo("components.appForm"),l=function(d){var s,r,u=!1,C=(s=(r=i.current)===null||r===void 0?void 0:r.getList())!==null&&s!==void 0?s:[];if(C.map(function(p){p.name==d.name&&(u=!0)}),!u){var v;(v=i.current)===null||v===void 0||v.add(d)}},F=function(d){var s,r,u=!1,C=(s=(r=i.current)===null||r===void 0?void 0:r.getList())!==null&&s!==void 0?s:[];C.map(function(v,p){if(v.name==d){var m;(m=i.current)===null||m===void 0||m.remove(p)}})};return(0,e.jsx)(A.Z,{title:O.format("createAddHost"),tooltip:O.format("createAddHostTip"),extra:(0,e.jsx)($.Z,{children:(0,e.jsx)(se.Z,{name:"enableBindHost",fieldProps:{checkedChildren:O.format("createAddHostBindHost"),unCheckedChildren:O.format("createAddHostBindHost"),onChange:function(d){d?l({name:"host.dpanel.local",value:"host-gateway"}):F("host.dpanel.local")}}})}),children:(0,e.jsx)(Q.u,{name:"extraHosts",creatorButtonProps:{creatorButtonText:O.format("createAddHostAddButton")},actionRef:i,copyIconProps:!1,min:0,children:(0,e.jsxs)(U.UW,{children:[(0,e.jsx)(f.Z,{width:"md",name:"name",label:"Hostname",placeholder:""}),(0,e.jsx)(f.Z,{width:"md",name:"value",label:"ip",placeholder:""})]})})})}var Me=t(90672),tt=(0,c.forwardRef)(function(i,O){(0,c.useImperativeHandle)(O,function(){return{}});var l=new n.Uo("components.appForm");return(0,e.jsxs)(A.Z,{title:l.format("createSelfNetworkTitle"),children:[(0,e.jsxs)(U.UW,{children:[(0,e.jsx)(f.Z,{label:l.format("createSelfNetworkIp",{ip:"ipv4"}),name:["ipV4","address"],width:"md",tooltip:l.format("createSelfNetworkIpTip",{ip:"ipv4",example:"192.168.1.5"}),placeholder:"192.168.1.5"}),(0,e.jsx)(w.Z,{name:["ipV4"],children:function(g){var d=g.ipV4;return(0,e.jsx)(f.Z,{label:l.format("createSelfNetworkIpSubnet",{ip:"ipv4"}),name:["ipV4","subnet"],width:"md",required:d&&d.address,tooltip:l.format("createSelfNetworkIpSubnetTip",{ip:"ipv4",example:"192.168.1.0/24"}),placeholder:"192.168.1.0/24",rules:[{required:d&&d.address}]})}}),(0,e.jsx)(f.Z,{label:l.format("createSelfNetworkIpGateway",{ip:"ipv4"}),name:["ipV4","gateway"],width:"md",tooltip:l.format("createSelfNetworkIpGatewayTip",{ip:"ipv4",example:"192.168.1.1"}),placeholder:"192.168.1.1"}),(0,e.jsx)(se.Z,{label:l.format("createSelfNetworkIpV6Enable"),name:"enableIpV6Address"})]}),(0,e.jsx)(w.Z,{name:["enableIpV6Address"],children:function(g){var d=g.enableIpV6Address;if(d)return(0,e.jsxs)(U.UW,{children:[(0,e.jsx)(f.Z,{label:l.format("createSelfNetworkIp",{ip:"ipv6"}),name:["ipV6","address"],width:"md",tooltip:l.format("createSelfNetworkIpTip",{ip:"ipv6",example:"2001:db8::5"}),placeholder:"2001:db8::5"}),(0,e.jsx)(w.Z,{name:["ipV6"],children:function(r){var u=r.ipV6;return(0,e.jsx)(f.Z,{label:l.format("createSelfNetworkIpSubnet",{ip:"ipv6"}),name:["ipV6","subnet"],width:"md",required:u&&u.address,tooltip:l.format("createSelfNetworkIpSubnetTip",{ip:"ipv6",example:"2001:db8::/48"}),placeholder:"2001:db8::/48",rules:[{required:u&&u.address}]})}}),(0,e.jsx)(f.Z,{label:l.format("createSelfNetworkIpGateway",{ip:"ipv6"}),name:["ipV6","gateway"],width:"md",tooltip:l.format("createSelfNetworkIpGatewayTip",{ip:"ipv6",example:"2001:db8::1"}),placeholder:"2001:db8::1"})]})}}),(0,e.jsx)(Me.Z,{label:l.format("createSelfNetworkDns"),name:"dns",placeholder:l.format("createSelfNetworkDnsTip")})]})}),nt=tt,ke=t(31199),at=t(86250);function rt(){var i=new n.Uo("components.appForm");return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(A.Z,{title:i.format("createHookTitle"),headerBordered:!0,subTitle:"",children:(0,e.jsx)(Me.Z,{label:i.format("createHookContainerCreate"),name:["hook","containerCreate"],tooltip:i.format("createHookContainerCreateTip")})}),(0,e.jsxs)(A.Z,{title:i.format("createHookHealthyTitle"),headerBordered:!0,children:[(0,e.jsxs)(at.Z,{gap:20,justify:"start",children:[(0,e.jsx)(ke.Z,{label:i.format("createHookHealthyInterval"),name:["healthcheck","interval"],initialValue:30,fieldProps:{addonAfter:n.FD.format("unitSecond")}}),(0,e.jsx)(ke.Z,{label:i.format("createHookHealthyTimeout"),name:["healthcheck","timeout"],initialValue:10,fieldProps:{addonAfter:n.FD.format("unitSecond")}}),(0,e.jsx)(ke.Z,{label:i.format("createHookHealthyRetries"),name:["healthcheck","retries"],initialValue:3}),(0,e.jsx)(xe.Z,{width:"sm",label:i.format("createHookHealthyShellType"),initialValue:"CMD",name:["healthcheck","shellType"],options:i.option("createHookHealthyShellTypeOption",["CMD","CMD-SHELL"])})]}),(0,e.jsx)(Me.Z,{label:i.format("createHookHealthyCmd"),name:["healthcheck","cmd"],tooltip:i.format("createHookHealthyCmdTip")})]})]})}var ot=t(74763),He=t(2487),it=[{name:"ALL"},{name:"AUDIT_CONTROL"},{name:"AUDIT_WRITE",default:!0},{name:"BLOCK_SUSPEND"},{name:"CHOWN",default:!0},{name:"DAC_OVERRIDE",default:!0},{name:"DAC_READ_SEARCH"},{name:"FOWNER",default:!0},{name:"FSETID",default:!0},{name:"IPC_LOCK"},{name:"IPC_OWNER"},{name:"KILL",default:!0},{name:"LEASE"},{name:"LINUX_IMMUTABLE"},{name:"MAC_ADMIN"},{name:"MAC_OVERRIDE"},{name:"MKNOD",default:!0},{name:"NET_ADMIN"},{name:"NET_BIND_SERVICE",default:!0},{name:"NET_BROADCAST"},{name:"NET_RAW",default:!0},{name:"SETFCAP",default:!0},{name:"SETGID",default:!0},{name:"SETPCAP",default:!0},{name:"SETUID",default:!0},{name:"SYSLOG"},{name:"SYS_ADMIN"},{name:"SYS_BOOT"},{name:"SYS_CHROOT",default:!0},{name:"SYS_MODULE"},{name:"SYS_NICE"},{name:"SYS_PACCT"},{name:"SYS_PTRACE"},{name:"SYS_RAWIO"},{name:"SYS_RESOURCE"},{name:"SYS_TIME"},{name:"SYS_TTY_CONFIG"}],lt=(0,c.forwardRef)(function(i,O){var l=(0,c.useState)(null),F=V()(l,2),g=F[0],d=F[1],s=(0,c.useContext)(T.Z),r=s.createFormRef,u=new n.Uo("components.appForm");return(0,c.useImperativeHandle)(O,function(){return{}}),(0,e.jsx)(A.Z,{children:(0,e.jsx)(He.Z,{grid:{gutter:10,xs:3,sm:3,md:4,lg:4,xl:4,xxl:6},dataSource:it,renderItem:function(v,p){var m;return(0,e.jsx)(He.Z.Item,{children:(0,e.jsx)(se.Z,{fieldProps:{onChange:function(R){v.name=="ALL"&&d(R)}},disabled:v.name!="ALL"&&((0,ot.k)(g)?(m=r.current)===null||m===void 0?void 0:m.getFieldValue(["capAdd","ALL"]):g),initialValue:v.default,name:["capAdd",v.name],tooltip:u.format("createCap."+v.name.toLocaleLowerCase()),label:v.name})},p)}})})}),st=lt,dt=t(78099),ut=t(96074),Le=t(28036),ct=t(83062),mt=t(18148),ft=t(64789),vt=t(85060),Ke=t(78451),pt=t(99861),ht=t(80821),gt=t(1699),xt=t(80271),jt=t(47248);function Ct(i){var O=(0,c.useState)(!1),l=V()(O,2),F=l[0],g=l[1],d=(0,c.useContext)(T.Z),s=d.createFormRef,r=d.volumeListRef,u=d.createEnvRef,C=d.domainRef,v=new n.Uo("components.appForm");function p(x){return m.apply(this,arguments)}function m(){return m=M()(P()().mark(function x(R){var h,D,b,N,ee,ce,te,y,k,o,ne,a;return P()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.next=2,(0,ue.YU)({md5:R});case 2:return N=oe.sent,i.redeploy||(y=(ee=s.current)===null||ee===void 0?void 0:ee.getFieldsValue(),(ce=s.current)===null||ce===void 0||ce.resetFields(),(te=s.current)===null||te===void 0||te.setFieldsValue({siteName:y.siteName,siteTitle:y.siteTitle,useBridgeNetwork:y.useBridgeNetwork})),N.data.info.Config.Env&&N.data.info.Config.Env.map(function(L){var le,Ie=L.split("=");(le=u.current)===null||le===void 0||le.addEnvItem(Ie[0],Ie.slice(1).join("="))}),(h=s.current)===null||h===void 0||h.setFieldValue("imageName",R),(D=s.current)===null||D===void 0||D.setFieldValue("workDir",N.data.info.Config.WorkingDir),(b=C.current)===null||b===void 0||b.setExposePort(N.data.info.Config.ExposedPorts),i.redeploy||(N.data.info.Config.Volumes?(ne=[],Object.keys(N.data.info.Config.Volumes).map(function(L,le){ne.push(L)}),(o=r.current)===null||o===void 0||o.setDefaultDestPath(ne)):(a=r.current)===null||a===void 0||a.setDefaultDestPath([]),(k=s.current)===null||k===void 0||k.setFieldsValue({workDir:{value:"",useDefault:!0,default:N.data.info.Config.WorkingDir},user:{value:"",useDefault:!0,default:N.data.info.Config.User},command:{value:"",useDefault:!0,default:N.data.info.Config.Cmd&&N.data.info.Config.Cmd.join(" ")},entrypoint:{value:"",useDefault:!0,default:N.data.info.Config.Entrypoint&&N.data.info.Config.Entrypoint.join(" ")}})),oe.abrupt("return",!0);case 10:case"end":return oe.stop()}},x)})),m.apply(this,arguments)}return(0,c.useEffect)(function(){i.fromImageId&&p(i.fromImageId)},[i.fromImageId]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(je.Z,{destroyOnClose:!0,open:F,width:I.R_,title:v.format("dockerImageTitle"),footer:!1,onClose:function(){g(!1)},children:(0,e.jsx)(dt.Z,{scroll:{x:"max-content"},columns:[{title:"Id",dataIndex:"Id",search:!1,width:80,render:function(R,h,D,b,N){return(0,e.jsx)(Ke.Z,{content:h.Id.slice(7,19)})}},{title:n.FD.format("listImageName"),dataIndex:"tag",width:200,render:function(R,h,D,b){return(0,e.jsx)(Ke.Z,{content:h.RepoTags[0]})}},{title:n.FD.format("listCreatedAt"),dataIndex:"Created",search:!1,width:100,render:function(R,h,D,b){return(0,e.jsx)("div",{children:(0,E.ZM)(h.Created*1e3)},h.Id)},sorter:function(R,h){return R.Created-h.Created}},{title:n.FD.format("listManage"),valueType:"option",key:"option",width:50,render:function(R,h,D,b){return(0,e.jsx)($.Z,{split:(0,e.jsx)(ut.Z,{type:"vertical"}),children:(0,e.jsx)(ht.Z,{icon:(0,e.jsx)(ft.Z,{}),tips:n.FD.format("listManageUse"),action:function(){return p(h.RepoTags[0])},type:"link",onSuccess:function(){g(!1)}},"addImage")})}}],request:function(){var x=M()(P()().mark(function R(h,D,b){var N,ee,ce;return P()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return i.redeploy,y.next=3,(0,mt.KG)({tag:h.tag});case 3:return N=y.sent,ee=0,ce=[],N.data.list&&(ce=N.data.list.flatMap(function(k){return k.RepoTags.map(function(o){return{Key:ee++,Id:k.Id,Created:k.Created,RepoTags:[o]}})})),y.abrupt("return",{data:ce,success:!0,total:ce.length});case 8:case"end":return y.stop()}},R)}));return function(R,h,D){return x.apply(this,arguments)}}(),rowKey:"Key",pagination:{pageSize:8}})},"imageTableList"),(0,e.jsxs)($.Z.Compact,{children:[(0,e.jsx)(f.Z,{width:"lg",label:v.format("dockerImageImageName"),name:"imageName",disabled:!0,placeholder:v.format("dockerImageImageNameEmpty"),rules:[{required:!0}],required:!0}),(0,e.jsx)(J.Z,{label:" ",children:(0,e.jsx)(Le.ZP,{type:"primary",onClick:function(){return g(!0)},children:v.format("dockerImageTitle")},"showBtn")}),(0,e.jsx)(w.Z,{name:["imageName"],children:function(R){var h=R.imageName;if(h)return(0,e.jsx)(J.Z,{label:" ",children:(0,e.jsx)(pt.Z,{finishAutoHide:!0,image:h?[h]:[],trigger:(0,e.jsx)(ct.Z,{title:v.format("dockerImageUpgradeImageTip"),children:(0,e.jsx)(Le.ZP,{icon:(0,e.jsx)(vt.Z,{}),children:v.format("dockerImageUpgradeImageButton")})})})})}}),(0,e.jsx)(J.Z,{label:" ",children:(0,e.jsx)(jt.Z,{onFinish:function(R){p(R)}},"remote")}),(0,e.jsx)(J.Z,{label:" ",children:(0,e.jsx)(w.Z,{name:["imageName"],children:function(R){var h=R.imageName;if(h)return(0,e.jsx)(gt.u,{access:"canSeeEnableCe",showProTips:!0,children:function(b){var N=b.canSeeEnableCe;return(0,e.jsx)(xt.Z,{imageId:h,trigger:(0,e.jsx)(Le.ZP,{disabled:N,children:v.format("dockerImageFileExplorer")})})}})}})})]})]})}function Pt(){var i,O=(0,c.useContext)(Fe.Z),l=O.loading,F=O.notice,g=(0,c.useContext)(T.Z),d=g.createFormRef,s=g.volumeListRef,r=g.domainRef,u=g.createEnvRef,C=g.createLinkRef,v=(0,We.useSearchParams)(),p=V()(v,2),m=p[0],x=p[1],R=(0,We.useNavigate)(),h=(0,c.useState)("basic"),D=V()(h,2),b=D[0],N=D[1],ee=m.get("id"),ce=(i=m.get("imageId"))!==null&&i!==void 0?i:"",te=new n.Uo("app");return(0,c.useEffect)(function(){if(ee)l.show(),(0,Ve.iE)({id:ee}).then(function(){var o=M()(P()().mark(function ne(a){var he,oe,L,le,Ie,fe,_e,Ue;return P()().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(L={info:{}},!a.data.env.imageName){ve.next=11;break}return ve.prev=2,ve.next=5,(0,ue.YU)({md5:a.data.env.imageName});case 5:le=ve.sent,L=le.data,ve.next=11;break;case 9:ve.prev=9,ve.t0=ve.catch(2);case 11:a.data.env.ports&&a.data.env.ports.map(function(Y){return Y.host=="0"&&(Y.host=""),Y}),Ie=a.data.env.bindIpV6,a.data.containerInfo&&a.data.containerInfo.Info.NetworkSettings&&a.data.containerInfo.Info.NetworkSettings.Networks&&Object.keys(a.data.containerInfo.Info.NetworkSettings.Networks).map(function(Y){if(a.data.env.network&&(a.data.env.network=a.data.env.network.map(function(Be){return Y==Be.name&&a.data.containerInfo&&(Be.subnet=a.data.containerInfo.Info.NetworkSettings.Networks[Y].IPAddress+"/"+a.data.containerInfo.Info.NetworkSettings.Networks[Y].IPPrefixLen),Be})),a.data.containerInfo&&a.data.containerInfo.Info.NetworkSettings.Networks[Y].IPv6Gateway!=""&&Y==a.data.siteName&&(Ie=!0),Y=="bridge"){var Ae;(Ae=d.current)===null||Ae===void 0||Ae.setFieldValue("useBridgeNetwork",!0)}}),a.data.env.extraHosts&&a.data.env.extraHosts.map(function(Y){if(Y.value=="host-gateway"){var Ae;(Ae=d.current)===null||Ae===void 0||Ae.setFieldValue("enableBindHost",!0)}}),fe=a.data.env.ports,a.data.env.ports&&(fe=a.data.env.ports.map(function(Y){return Y.host=Y.host!=""?(Y.hostIp?Y.hostIp+":":"")+Y.host:"",Y})),(he=d.current)===null||he===void 0||he.setFieldsValue({siteTitle:a.data.siteTitle,siteName:a.data.siteName,imageName:a.data.env.imageName,privileged:a.data.env.privileged,bindIpV6:a.data.env.useHostNetwork?!1:Ie,useHostNetwork:a.data.env.useHostNetwork,publishAllPorts:a.data.env.useHostNetwork?!1:a.data.env.publishAllPorts,workDir:{value:a.data.env.workDir,useDefault:!a.data.env.workDir,default:L&&L.info.Config&&L.info.Config.WorkingDir},user:{value:a.data.env.user,useDefault:!a.data.env.user,default:L&&L.info.Config&&L.info.Config.User},command:{value:a.data.env.command,useDefault:!a.data.env.command,default:L&&L.info.Config&&L.info.Config.Cmd&&L.info.Config.Cmd.join(" ")},entrypoint:{value:a.data.env.entrypoint,useDefault:!a.data.env.entrypoint,default:L&&L.info.Config&&L.info.Config.Entrypoint&&L.info.Config.Entrypoint.join(" ")},shmsize:(oe=a.data.env.shmsize)!==null&&oe!==void 0?oe:"64M",cpus:a.data.env.cpus,memory:a.data.env.memory,environment:a.data.env.environment,label:a.data.env.label,volumes:a.data.env.volumes,ports:fe,links:a.data.env.links,network:a.data.env.network,restart:a.data.env.restart,extraHosts:a.data.env.extraHosts,autoRemove:a.data.env.autoRemove,log:a.data.env.log,dns:a.data.env.dns&&a.data.env.dns.join(`
`),ipV4:a.data.env.ipV4,ipV6:a.data.env.ipV6,gpus:a.data.env.gpus,device:a.data.env.device,hook:a.data.env.hook,hostPid:a.data.env.hostPid,capAdd:a.data.env.capAdd&&Object.fromEntries(a.data.env.capAdd.map(function(Y){return[Y,!0]}))}),a.data.env.ipV6&&((_e=d.current)===null||_e===void 0||_e.setFieldValue("enableIpV6Address",!0)),a.data.env.healthcheck&&a.data.env.healthcheck.cmd&&a.data.env.healthcheck.cmd!=""&&((Ue=d.current)===null||Ue===void 0||Ue.setFieldsValue({healthcheck:a.data.env.healthcheck}));case 20:case"end":return ve.stop()}},ne,null,[[2,9]])}));return function(ne){return o.apply(this,arguments)}}()).finally(function(){l.destroy()});else{var y,k;(y=d.current)===null||y===void 0||y.resetFields(),(k=d.current)===null||k===void 0||k.setFieldValue("useBridgeNetwork",!0)}},[m]),(0,e.jsx)(H._z,{children:(0,e.jsx)(A.Z,{direction:"column",gutter:[0,10],children:(0,e.jsxs)(z.A,{submitter:{render:function(k,o){return(0,e.jsx)(X.S,{children:o})}},formRef:d,onFinish:function(){var y=M()(P()().mark(function k(o){var ne,a,he,oe,L,le;return P()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(le={siteTitle:o.siteTitle,siteName:o.siteName,hostname:o.hostname,imageName:o.imageName,environment:o.environment,links:o.links,ports:o.ports,volumes:o.volumes,network:(ne=o.network)!==null&&ne!==void 0?ne:[],privileged:(a=o.privileged)!==null&&a!==void 0?a:!1,autoRemove:(he=o.autoRemove)!==null&&he!==void 0?he:!1,restart:o.restart,cpus:o.cpus,memory:o.memory,shmsize:(oe=o.shmsize)!==null&&oe!==void 0?oe:0,workDir:o.workDir&&!o.workDir.useDefault?o.workDir.value:"",user:o.user&&!o.user.useDefault?o.user.value:"",command:o.command&&!o.command.useDefault?o.command.value:"",entrypoint:o.entrypoint&&!o.entrypoint.useDefault?o.entrypoint.value:"",useHostNetwork:o.useHostNetwork,bindIpV6:o.bindIpV6,log:o.log,dns:o.dns&&o.dns!=""?o.dns.split(`
`):[],label:o.label,publishAllPorts:o.publishAllPorts,extraHosts:o.extraHosts,ipV4:o.ipV4,ipV6:o.ipV6,device:o.device,gpus:o.gpus,hook:o.hook,hostPid:o.hostPid,capAdd:o.capAdd?Object.keys(o.capAdd).map(function(_e){return _e}):[],useBridgeNetwork:(L=o.useBridgeNetwork)!==null&&L!==void 0?L:!0},!(!o.useBridgeNetwork&&!o.useHostNetwork&&(!o.network||o.network.length==0))){fe.next=4;break}return F.error(te.format("createMessageNoBridgeNetworkMustHasUseNetwork")),fe.abrupt("return",!1);case 4:return o.useBridgeNetwork&&!le.network.find(function(_e){return _e.name=="bridge"})&&le.network.push({name:"bridge",alise:[],ipV4:""}),o.healthcheck&&o.healthcheck.cmd&&o.healthcheck.cmd!=""&&(le.healthcheck=o.healthcheck),ee&&(le.containerId=ee),fe.next=9,(0,Ve.$G)(le);case 9:return R("/app/list",{state:{page:localStorage.getItem("dpanel-page-app-list")}}),fe.abrupt("return",!0);case 11:case"end":return fe.stop()}},k)}));return function(k){return y.apply(this,arguments)}}(),children:[(0,e.jsxs)(A.Z,{title:te.format("createTitle"),headerBordered:!0,children:[(0,e.jsx)(f.Z,{name:"siteTitle",label:te.format("createSiteTitle"),fieldProps:{onChange:function(k){var o="";if(k.target.value&&!ee){var ne,a=(0,ze.N9)(k.target.value.trim(),{toneType:"none",type:"array"});o=a.join(""),(ne=d.current)===null||ne===void 0||ne.setFieldValue("siteName",o)}}},placeholder:te.format("createSiteTitleEmpty")}),(0,e.jsxs)(U.UW,{children:[(0,e.jsx)(f.Z,{width:"lg",name:"siteName",label:te.format("createSiteName"),required:!0,rules:[{required:!0}],placeholder:te.format("createSiteNameEmpty"),disabled:!!ee}),(0,e.jsx)(f.Z,{label:"Hostname",name:"hostname",width:"md"})]}),(0,e.jsx)(Ct,{redeploy:!!ee,fromImageId:ce})]}),(0,e.jsx)(Z.Z,{offsetTop:50,children:(0,e.jsx)(A.Z,{style:{marginBottom:-20},children:(0,e.jsx)(ae.Z,{activeKey:b,onChange:function(k){N(k),window.scrollTo(0,450)},items:te.option("createTabOption",["basic","link","run-command","resource","hook","cap","other"]).map(function(y){return{label:y.label,key:y.value}})})})}),(0,e.jsxs)(Ee.Z,{show:b=="basic",children:[(0,e.jsx)(qe,{ref:r,showBindHost:!0,showBindIpV6:!0}),(0,e.jsx)(ge.Z,{showAddButton:!0,showImportButton:!0,showCodeMode:!0,label:te.format("createEnvTitle"),ref:u}),(0,e.jsx)(De,{showDefault:!0,ref:s}),(0,e.jsx)(w.Z,{name:["siteName","useHostNetwork"],children:function(k){var o=k.siteName,ne=k.useHostNetwork;if(!ne)return(0,e.jsx)(nt,{})}})]}),(0,e.jsx)(Ee.Z,{show:b=="link",children:(0,e.jsx)(w.Z,{name:["siteName","useHostNetwork"],children:function(k){var o=k.siteName,ne=k.useHostNetwork;return ne?(0,e.jsx)(_.Z,{showIcon:!0,description:te.format("createNetworkDesc")}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(de,{onAddEnv:function(he,oe){var L;(L=u.current)===null||L===void 0||L.addEnvItem(he,oe)},ref:C}),(0,e.jsx)(Je,{showUseBridgeNetwork:!0,siteName:o}),(0,e.jsx)(et,{})]})}})}),(0,e.jsx)(Ee.Z,{show:b=="run-command",children:(0,e.jsx)(Ge,{})}),(0,e.jsx)(Ee.Z,{show:b=="resource",children:(0,e.jsx)(Oe,{})}),(0,e.jsx)(Ee.Z,{show:b=="hook",children:(0,e.jsx)(rt,{})}),(0,e.jsx)(Ee.Z,{show:b=="other",children:(0,e.jsx)(Se,{})}),(0,e.jsx)(Ee.Z,{show:b=="cap",children:(0,e.jsx)(st,{})})]},"form")})})}},2831:function(pe,K,t){t.d(K,{Ll:function(){return X},aF:function(){return V},d6:function(){return U},u5:function(){return A}});var S=t(15009),P=t.n(S),G=t(99289),M=t.n(G),W=t(82346);function V(){return H.apply(this,arguments)}function H(){return H=M()(P()().mark(function Z(){return P()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,W.request)("/api/common/home/info",{method:"POST"});case 2:return _.abrupt("return",_.sent);case 3:case"end":return _.stop()}},Z)})),H.apply(this,arguments)}function A(){return z.apply(this,arguments)}function z(){return z=M()(P()().mark(function Z(){return P()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,W.request)("/api/common/home/check-new-version",{method:"POST"});case 2:return _.abrupt("return",_.sent);case 3:case"end":return _.stop()}},Z)})),z.apply(this,arguments)}function X(){return f.apply(this,arguments)}function f(){return f=M()(P()().mark(function Z(){return P()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,W.request)("/api/common/home/usage",{method:"POST"});case 2:return _.abrupt("return",_.sent);case 3:case"end":return _.stop()}},Z)})),f.apply(this,arguments)}function U(){return w.apply(this,arguments)}function w(){return w=M()(P()().mark(function Z(){return P()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,W.request)("/api/common/home/upgrade-script",{method:"POST"});case 2:return _.abrupt("return",_.sent);case 3:case"end":return _.stop()}},Z)})),w.apply(this,arguments)}},86250:function(pe,K,t){t.d(K,{Z:function(){return je}});var S=t(67294),P=t(93967),G=t.n(P),M=t(98423),W=t(98065),V=t(53124),H=t(83559),A=t(83262);const z=["wrap","nowrap","wrap-reverse"],X=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],f=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],U=(j,E)=>{const I=E.wrap===!0?"wrap":E.wrap;return{[`${j}-wrap-${I}`]:I&&z.includes(I)}},w=(j,E)=>{const I={};return f.forEach(n=>{I[`${j}-align-${n}`]=E.align===n}),I[`${j}-align-stretch`]=!E.align&&!!E.vertical,I},Z=(j,E)=>{const I={};return X.forEach(n=>{I[`${j}-justify-${n}`]=E.justify===n}),I};function ae(j,E){return G()(Object.assign(Object.assign(Object.assign({},U(j,E)),w(j,E)),Z(j,E)))}var _=ae;const c=j=>{const{componentCls:E}=j;return{[E]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},T=j=>{const{componentCls:E}=j;return{[E]:{"&-gap-small":{gap:j.flexGapSM},"&-gap-middle":{gap:j.flexGap},"&-gap-large":{gap:j.flexGapLG}}}},B=j=>{const{componentCls:E}=j,I={};return z.forEach(n=>{I[`${E}-wrap-${n}`]={flexWrap:n}}),I},ie=j=>{const{componentCls:E}=j,I={};return f.forEach(n=>{I[`${E}-align-${n}`]={alignItems:n}}),I},J=j=>{const{componentCls:E}=j,I={};return X.forEach(n=>{I[`${E}-justify-${n}`]={justifyContent:n}}),I},re=()=>({});var Q=(0,H.I$)("Flex",j=>{const{paddingXS:E,padding:I,paddingLG:n}=j,e=(0,A.IX)(j,{flexGapSM:E,flexGap:I,flexGapLG:n});return[c(e),T(e),B(e),ie(e),J(e)]},re,{resetStyle:!1}),q=function(j,E){var I={};for(var n in j)Object.prototype.hasOwnProperty.call(j,n)&&E.indexOf(n)<0&&(I[n]=j[n]);if(j!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(j);e<n.length;e++)E.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(j,n[e])&&(I[n[e]]=j[n[e]]);return I},je=S.forwardRef((j,E)=>{const{prefixCls:I,rootClassName:n,className:e,style:Ce,flex:de,gap:ge,children:ue,vertical:xe=!1,component:Ze="div"}=j,De=q(j,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:me,direction:se,getPrefixCls:we}=S.useContext(V.E_),Pe=we("flex",I),[be,ye,Oe]=Q(Pe),Se=xe!=null?xe:me==null?void 0:me.vertical,Ne=G()(e,n,me==null?void 0:me.className,Pe,ye,Oe,_(Pe,j),{[`${Pe}-rtl`]:se==="rtl",[`${Pe}-gap-${ge}`]:(0,W.n)(ge),[`${Pe}-vertical`]:Se}),Re=Object.assign(Object.assign({},me==null?void 0:me.style),Ce);return de&&(Re.flex=de),ge&&!(0,W.n)(ge)&&(Re.gap=ge),be(S.createElement(Ze,Object.assign({ref:E,className:Ne,style:Re},(0,M.Z)(De,["justify","wrap","align"])),ue))})}}]);
