(self.webpackChunk=self.webpackChunk||[]).push([[8022],{23430:function(W,y,e){"use strict";e.d(y,{Z:function(){return f}});var C=e(87462),r=e(67294),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},d=_,m=e(84089),O=function(i,o){return r.createElement(m.Z,(0,C.Z)({},i,{ref:o,icon:d}))},j=r.forwardRef(O),f=j},80821:function(W,y,e){"use strict";e.d(y,{Z:function(){return E}});var C=e(5574),r=e.n(C),_=e(24963),d=e(86738),m=e(14726),O=e(83062),j=e(67294),f=e(85893);function E(i){var o=(0,j.useState)(!1),a=r()(o,2),v=a[0],t=a[1],u=(0,j.useContext)(_.Z),D=u.lang,w=u.notice,T=u.message,M=function(){t(!0),i.action().then(function(g){if(t(!1),typeof i.onSuccess=="function"&&i.onSuccess(g),i.messageSuccess){var R="";typeof i.messageSuccess=="function"?R=i.messageSuccess(g):R=i.messageSuccess,R.indexOf(".")>-1&&(R=D(R)),i.asynced?T.info(R):T.success(R)}}).catch(function(g){t(!1),typeof i.onError=="function"&&i.onError(g)})};return i.confirm?(0,f.jsx)(d.Z,{style:{width:500},title:i.confirmTitle?i.confirmTitle:D("notification.title.tip"),description:i.confirm,onConfirm:M,okText:"Yes",cancelText:"No",children:(0,f.jsx)(m.ZP,{disabled:i.disabled,icon:i.icon,loading:v,danger:i.danger,type:i.type,children:i.children})}):(0,f.jsx)(O.Z,{title:i.tips,children:(0,f.jsx)(m.ZP,{disabled:i.disabled,icon:i.icon,loading:v,onClick:M,danger:i.danger,type:i.type,children:i.children})})}},94359:function(W,y,e){"use strict";e.d(y,{Z:function(){return v}});var C=e(67294),r=e(3089),_=e(98165),d=e(18429),m=e(8751),O=e(14313),j=e(30159),f=e(87740),E=e(66309),i=e(83062),o=e(54006),a=e(85893);function v(t){var u=(0,a.jsx)(a.Fragment,{});if(t.status=="0"&&(u=(0,a.jsx)(E.Z,{icon:(0,a.jsx)(r.Z,{}),color:"default",children:"waiting"})),t.status=="10"&&(u=(0,a.jsx)(E.Z,{icon:(0,a.jsx)(_.Z,{spin:!0}),color:"processing",children:"processing"})),t.status=="20"&&(u=(0,a.jsx)(E.Z,{icon:(0,a.jsx)(d.Z,{}),color:"error",children:"error"})),t.status=="30"&&(u=(0,a.jsx)(E.Z,{icon:(0,a.jsx)(m.Z,{}),color:"success",children:"success"})),t.status=="running"||t.status=="healthy"){var D,w;u=(0,a.jsx)(E.Z,{icon:(0,a.jsx)(O.Z,{}),color:"success",children:(D=t.message)!==null&&D!==void 0&&D.showInTag?(w=t.message)===null||w===void 0?void 0:w.content:t.status})}if(t.status=="paused"){var T,M;u=(0,a.jsx)(E.Z,{icon:(0,a.jsx)(j.Z,{}),children:(T=t.message)!==null&&T!==void 0&&T.showInTag?(M=t.message)===null||M===void 0?void 0:M.content:t.status})}if(t.status=="waiting"||t.status=="starting"){var S,g;u=(0,a.jsx)(E.Z,{icon:(0,a.jsx)(f.Z,{}),children:(S=t.message)!==null&&S!==void 0&&S.showInTag?(g=t.message)===null||g===void 0?void 0:g.content:t.status})}if(t.status=="exited"||t.status=="dead"||t.status=="removing"||t.status=="restarting"||t.status=="unhealthy"||t.status=="created"){var R,b;u=(0,a.jsx)(E.Z,{icon:(0,a.jsx)(d.Z,{}),color:"warning",children:(R=t.message)!==null&&R!==void 0&&R.showInTag?(b=t.message)===null||b===void 0?void 0:b.content:t.status})}if(t.link&&(u=(0,a.jsx)(o.Link,{to:t.link,children:u})),t.message){var Z;u=(0,a.jsx)(i.Z,{placement:(Z=t.message.placement)!==null&&Z!==void 0?Z:"top",title:t.message.content,children:u})}return(0,a.jsx)(a.Fragment,{children:u})}},24963:function(W,y,e){"use strict";var C=e(67294),r=(0,C.createContext)({});y.Z=r},96781:function(W,y,e){"use strict";var C=e(67294),r=(0,C.createContext)({});y.Z=r},83536:function(W,y,e){"use strict";e.r(y),e.d(y,{default:function(){return z}});var C=e(15009),r=e.n(C),_=e(99289),d=e.n(_),m=e(80821),O=e(90098),j=e(43425),f=e(86548),E=e(23430),i=e(90078),o=e(10641),a=e(54006),v=e(14726),t=e(42075),u=e(96074),D=e(83062),w=e(25593),T=e(67294),M=e(96781),S=e(94359),g=e(67255),R=e(93162),b=e(24963),Z=e(66309),l=e(85893);function G(L){var K=(0,a.useIntl)(),s=(0,T.useContext)(b.Z),c=s.lang,p;if(!L.type)p=(0,l.jsx)(Z.Z,{children:c("compose.default")});else switch(L.type){case"remoteUrl":p=(0,l.jsx)(Z.Z,{color:"cyan",children:c("compose.".concat(L.type))});break;case"serverPath":p=(0,l.jsx)(Z.Z,{color:"blue",children:c("compose.".concat(L.type))});break;case"storagePath":p=(0,l.jsx)(Z.Z,{color:"geekblue",children:c("compose.".concat(L.type))});break;case"outPath":p=(0,l.jsx)(Z.Z,{color:"yellow",children:c("compose.".concat(L.type))});break;case"store":p=(0,l.jsx)(Z.Z,{color:"green",children:c("compose.".concat(L.type))});break;default:p=(0,l.jsx)(Z.Z,{children:c("compose.".concat(L.type))})}return(0,l.jsx)(D.Z,{title:L.tootip,children:p})}function z(){var L=(0,T.useContext)(M.Z),K=L.listTableRef,s=(0,T.useContext)(b.Z),c=s.lang,p=s.notice;return(0,l.jsx)(i._z,{header:{extra:[(0,l.jsx)(a.Link,{to:"/compose/create",reloadDocument:location.search.length>0,children:(0,l.jsx)(v.ZP,{type:"primary",children:"\u521B\u5EFA\u4EFB\u52A1"},"createCompose")},"create")]},children:(0,l.jsx)(o.Z,{scroll:{x:"max-content"},request:function(){var n=d()(r()().mark(function U(h){var I,x,A;return r()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,O.pm)({title:h.title,name:h.name,pageSize:(I=h.pageSize)!==null&&I!==void 0?I:10,page:(x=h.current)!==null&&x!==void 0?x:1});case 2:return A=P.sent,P.abrupt("return",{data:A.data.list,success:!0,total:A.data.list.length});case 4:case"end":return P.stop()}},U)}));return function(U){return n.apply(this,arguments)}}(),rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name",width:200,render:function(U,h,I,x,A){return(0,l.jsx)(a.Link,{to:"/compose/deploy/"+h.id,children:h.name},I)}},{title:"\u9879\u76EE\u540D\u79F0",dataIndex:"title",width:200},{title:"\u7C7B\u578B",width:150,search:!1,render:function(U,h,I,x,A){var B;return(0,l.jsx)(G,{tootip:(B=h.setting.uri)!==null&&B!==void 0?B:"",type:h.setting&&h.setting.type?h.setting.type:""})}},{title:"\u5BB9\u5668\u72B6\u6001",dataIndex:"status",search:!1,width:300,render:function(U,h,I,x,A){return(0,l.jsx)(t.Z,{children:h.setting.status.split(", ").map(function(B){var P="running",F=B.indexOf("(");return F>-1?P=B.slice(0,F):P=B,(0,l.jsx)(S.Z,{status:P,message:{content:c("compose.".concat(P),{count:B.slice(F+1,B.length-1)}),placement:"top",showInTag:!0}},h.id)})})}},{title:"\u64CD\u4F5C",width:80,valueType:"option",key:"option",render:function(U,h,I,x,A){return(0,l.jsxs)(t.Z,{split:(0,l.jsx)(u.Z,{type:"vertical"}),children:[(0,l.jsx)(a.Link,{to:"/compose/deploy/"+h.id,children:(0,l.jsx)(D.Z,{title:"\u7BA1\u7406",children:(0,l.jsx)(j.Z,{})})},"3"),h.setting.type!="outPath"&&(0,l.jsx)(a.Link,{to:"/compose/create?id="+h.id,children:(0,l.jsx)(D.Z,{title:"\u7F16\u8F91",children:(0,l.jsx)(f.Z,{})})},"4"),(0,l.jsx)(w.Z.Link,{onClick:d()(r()().mark(function B(){var P,F;return r()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,O.Pn)({id:h.id});case 2:P=k.sent,P&&P.data&&P.data.detail&&(F=new Blob([P.data.detail.yaml],{type:"text/plain"}),(0,R.saveAs)(F,h.name+"-compose.yaml"));case 4:case"end":return k.stop()}},B)})),children:(0,l.jsx)(D.Z,{title:"\u4E0B\u8F7D",children:(0,l.jsx)(E.Z,{})})},"2")]})}}],rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0,getCheckboxProps:function(U){return{disabled:U.setting.type=="storagePath"||U.setting.type=="outPath"}}},tableAlertOptionRender:function(U){var h=U.selectedRows;return(0,l.jsx)(t.Z,{size:16,children:(0,l.jsx)(m.Z,{danger:!0,type:"primary",action:function(){return(0,O.ik)({id:h.map(function(x){return x.id})})},onSuccess:function(){var x,A;return!((x=K.current)===null||x===void 0)&&x.reloadAndRest&&((A=K.current)===null||A===void 0||A.reloadAndRest()),!0},onError:function(){var x,A;return!((x=K.current)===null||x===void 0)&&x.reset&&((A=K.current)===null||A===void 0||A.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",confirm:(0,l.jsx)(t.Z,{style:{width:280},direction:"vertical",children:(0,l.jsx)(w.Z.Text,{children:"\u5220\u9664\u524D\u8BF7\u5148\u9500\u6BC1\u76F8\u5173\u5BB9\u5668\uFF0C\u786E\u8BA4\u5417\uFF1F"})}),children:"\u6279\u91CF\u5220\u9664"})})},pagination:(0,g.O)(),search:{collapsed:!1},actionRef:K,columnsState:(0,g.j)("compose-list")})})}},90098:function(W,y,e){"use strict";e.d(y,{CT:function(){return a},GG:function(){return S},MG:function(){return G},Oh:function(){return D},Pn:function(){return i},U_:function(){return Z},VN:function(){return R},ik:function(){return t},im:function(){return O},mg:function(){return T},pm:function(){return f},xC:function(){return L}});var C=e(15009),r=e.n(C),_=e(99289),d=e.n(_),m=e(54006);function O(s){return j.apply(this,arguments)}function j(){return j=d()(r()().mark(function s(c){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/app/compose/create",{method:"POST",data:c}));case 1:case"end":return n.stop()}},s)})),j.apply(this,arguments)}function f(s){return E.apply(this,arguments)}function E(){return E=d()(r()().mark(function s(c){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/app/compose/get-list",{method:"POST",data:c}));case 1:case"end":return n.stop()}},s)})),E.apply(this,arguments)}function i(s){return o.apply(this,arguments)}function o(){return o=d()(r()().mark(function s(c){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/app/compose/get-task",{method:"POST",data:c}));case 1:case"end":return n.stop()}},s)})),o.apply(this,arguments)}function a(s){return v.apply(this,arguments)}function v(){return v=d()(r()().mark(function s(c){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/app/compose/get-detail",{method:"POST",data:c}));case 1:case"end":return n.stop()}},s)})),v.apply(this,arguments)}function t(s){return u.apply(this,arguments)}function u(){return u=d()(r()().mark(function s(c){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/app/compose/delete",{method:"POST",data:c}));case 1:case"end":return n.stop()}},s)})),u.apply(this,arguments)}function D(s){return w.apply(this,arguments)}function w(){return w=d()(r()().mark(function s(c){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/app/compose/container-deploy",{method:"POST",data:c}));case 1:case"end":return n.stop()}},s)})),w.apply(this,arguments)}function T(s){return M.apply(this,arguments)}function M(){return M=d()(r()().mark(function s(c){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/app/compose/container-destroy",{method:"POST",data:c}));case 1:case"end":return n.stop()}},s)})),M.apply(this,arguments)}function S(s){return g.apply(this,arguments)}function g(){return g=d()(r()().mark(function s(c){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/app/compose/container-ctrl",{method:"POST",data:c}));case 1:case"end":return n.stop()}},s)})),g.apply(this,arguments)}function R(s){return b.apply(this,arguments)}function b(){return b=d()(r()().mark(function s(c){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/app/compose/container-log",{method:"POST",data:c}));case 1:case"end":return n.stop()}},s)})),b.apply(this,arguments)}function Z(s){return l.apply(this,arguments)}function l(){return l=d()(r()().mark(function s(c){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/app/compose/container-process-kill",{method:"POST",data:c}));case 1:case"end":return n.stop()}},s)})),l.apply(this,arguments)}function G(s){return z.apply(this,arguments)}function z(){return z=d()(r()().mark(function s(c){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/app/compose/get-from-uri",{method:"POST",data:c}));case 1:case"end":return n.stop()}},s)})),z.apply(this,arguments)}function L(s){return K.apply(this,arguments)}function K(){return K=d()(r()().mark(function s(c){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/app/compose/parse",{method:"POST",data:c}));case 1:case"end":return n.stop()}},s)})),K.apply(this,arguments)}},67255:function(W,y,e){"use strict";e.d(y,{O:function(){return C},j:function(){return r}});function C(){var _,d=parseInt((_=localStorage.getItem("dpanel-pagesize"))!==null&&_!==void 0?_:"0");return{showSizeChanger:!0,defaultPageSize:d!=null?d:20}}function r(_){var d="dpanel-table-column-".concat(_),m={};if(localStorage.getItem(d)){var O;m=JSON.parse((O=localStorage.getItem(d))!==null&&O!==void 0?O:"{}")}return{defaultValue:m,onChange:function(f){localStorage.setItem("dpanel-table-column-".concat(_),JSON.stringify(f))}}}},93162:function(W,y,e){var C,r,_;(function(d,m){r=[],C=m,_=typeof C=="function"?C.apply(y,r):C,_!==void 0&&(W.exports=_)})(this,function(){"use strict";function d(o,a){return typeof a=="undefined"?a={autoBom:!1}:typeof a!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}function m(o,a,v){var t=new XMLHttpRequest;t.open("GET",o),t.responseType="blob",t.onload=function(){i(t.response,a,v)},t.onerror=function(){console.error("could not download file")},t.send()}function O(o){var a=new XMLHttpRequest;a.open("HEAD",o,!1);try{a.send()}catch(v){}return 200<=a.status&&299>=a.status}function j(o){try{o.dispatchEvent(new MouseEvent("click"))}catch(v){var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),o.dispatchEvent(a)}}var f=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof e.g=="object"&&e.g.global===e.g?e.g:void 0,E=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),i=f.saveAs||(typeof window!="object"||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!E?function(o,a,v){var t=f.URL||f.webkitURL,u=document.createElement("a");a=a||o.name||"download",u.download=a,u.rel="noopener",typeof o=="string"?(u.href=o,u.origin===location.origin?j(u):O(u.href)?m(o,a,v):j(u,u.target="_blank")):(u.href=t.createObjectURL(o),setTimeout(function(){t.revokeObjectURL(u.href)},4e4),setTimeout(function(){j(u)},0))}:"msSaveOrOpenBlob"in navigator?function(o,a,v){if(a=a||o.name||"download",typeof o!="string")navigator.msSaveOrOpenBlob(d(o,v),a);else if(O(o))m(o,a,v);else{var t=document.createElement("a");t.href=o,t.target="_blank",setTimeout(function(){j(t)})}}:function(o,a,v,t){if(t=t||open("","_blank"),t&&(t.document.title=t.document.body.innerText="downloading..."),typeof o=="string")return m(o,a,v);var u=o.type==="application/octet-stream",D=/constructor/i.test(f.HTMLElement)||f.safari,w=/CriOS\/[\d]+/.test(navigator.userAgent);if((w||u&&D||E)&&typeof FileReader!="undefined"){var T=new FileReader;T.onloadend=function(){var g=T.result;g=w?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),t?t.location.href=g:location=g,t=null},T.readAsDataURL(o)}else{var M=f.URL||f.webkitURL,S=M.createObjectURL(o);t?t.location=S:location.href=S,t=null,setTimeout(function(){M.revokeObjectURL(S)},4e4)}});f.saveAs=i.saveAs=i,W.exports=i})}}]);
