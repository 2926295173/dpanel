"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3985],{91058:function(Be,q,n){var te=n(5574),s=n.n(te),ae=n(89035),A=n(38345),L=n(17186),N=n(24739),O=n(5966),I=n(42075),B=n(28036),M=n(85576),c=n(67294),x=n(95089),$=n(12491),o=n(85893),U="docker-image",t=(0,c.forwardRef)(function(r,J){var T=(0,c.useState)(U),y=s()(T,2),u=y[0],f=y[1],m=(0,c.useRef)(),W=(0,c.useState)(""),i=s()(W,2),ue=i[0],Z=i[1],_e=function(){u!="code"?f("code"):f(U)};(0,c.useImperativeHandle)(J,function(){return{addEnvItem:function(D,k){var g,G=(g=m.current)===null||g===void 0?void 0:g.getList(),me=!1;if(G==null||G.map(function(ge){if(ge.name==D){me=!0;return}}),!me){var e;(e=m.current)===null||e===void 0||e.add({name:D,value:k})}},clear:function(){var D;(D=m.current)===null||D===void 0||(D=D.getList())===null||D===void 0||D.map(function(k,g){var G;(G=m.current)===null||G===void 0||G.remove(g)})}}});function ce(ee){try{var D,k;ee==""&&(ee=de());for(var g=(D=(k=m.current)===null||k===void 0||(k=k.getList())===null||k===void 0?void 0:k.length)!==null&&D!==void 0?D:0,G=g;G>=0;G--){var me;(me=m.current)===null||me===void 0||me.remove(G)}var e=ee.split(`
`),ge=0;e.map(function(Pe){var Ae,re=Pe.split("=");re.length<2||((Ae=m.current)===null||Ae===void 0||Ae.add({name:re[0],value:re.slice(1).join("=")},ge),ge++)})}catch(Pe){console.log(Pe)}}function de(){if(m&&m.current&&m.current.getList){var ee,D=(ee=m.current)===null||ee===void 0?void 0:ee.getList();if(D){var k=[];return D.map(function(g){k.push("".concat(g.name,"=").concat(g.value))}),k.join(`
`)}else return""}else return""}return(0,o.jsxs)(A.Z,{ghost:r.showCardGhost,title:r.label?r.label:null,headerBordered:!0,extra:(r.showCodeMode||r.showImportButton)&&(0,o.jsxs)(I.Z,{children:[r.showImportButton&&(0,o.jsx)("div",{style:{marginBottom:"-25px"},children:(0,o.jsx)($.Z,{title:"\u5BFC\u5165 env \u6587\u4EF6",onImport:function(D){return ce(D),!0},onLoad:function(D){if(D.indexOf("=")<0)throw new Error("\u5BFC\u5165env\u6587\u4EF6\u9519\u8BEF");return!0}})}),r.showCodeMode?(0,o.jsx)(B.ZP,{icon:(0,o.jsx)(ae.Z,{}),type:u=="code"?"primary":"default",onClick:_e,children:"\u4EE3\u7801\u6A21\u5F0F"},"code"):""]}),children:[(0,o.jsx)(L.u,{name:r.name?r.name:"environment",actionRef:m,creatorButtonProps:r.showAddButton?{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u73AF\u5883\u53D8\u91CF"}:!1,copyIconProps:!1,deleteIconProps:r.showDeleteButton,min:100,label:r.listLabel,children:function(D,k,g){var G=g.getCurrentRowData();return(0,o.jsxs)(N.UW,{children:[(0,o.jsx)(O.Z,{width:r.showInDrawer?"sm":"md",name:"name",label:"\u53D8\u91CF\u540D",required:!0,rules:[{required:!0}],disabled:r.showDisableName,placeholder:"\u8F93\u5165\u53D8\u91CF\u540D\u79F0"}),(0,o.jsx)(O.Z,{width:r.showInDrawer?"sm":"md",name:"value",label:"\u53D8\u91CF\u503C",rules:[{required:!!r.requireValue}],disabled:r.showDisableValue,placeholder:G&&G.label?G.label:"\u8F93\u5165\u53D8\u91CF\u503C"})]})}}),r.showCodeMode&&(0,o.jsx)(M.Z,{width:"800px",open:u=="code",onCancel:function(){return f("docker-image")},onOk:function(){ce(ue),f("docker-image")},children:(0,o.jsx)(x.ZP,{onChange:function(D){return Z(D)},value:de(),height:"680px",theme:"light"})})]})});q.Z=t},92067:function(Be,q,n){n.d(q,{Z:function(){return $}});var te=n(15009),s=n.n(te),ae=n(99289),A=n.n(ae),L=n(60335),N=n(64789),O=n(10641),I=n(42075),B=n(28036),M=n(37413),c=n(5251),x=n(85893);function $(o){return(0,x.jsx)(O.Z,{columns:[{title:"\u5BB9\u5668\u540D\u79F0",dataIndex:"name",render:function(t,r,J,T){return(0,x.jsx)(I.Z,{direction:"vertical",style:{textAlign:"left"},children:r==null?void 0:r.Names.map(function(y){return(0,c.fi)(y,"/")})},r.Id)}},{title:"\u7AEF\u53E3",dataIndex:"ports",search:!1,render:function(t,r,J,T){var y=[],u=[];return r!=null&&r.Ports&&r.Ports.map(function(f,m){f.PublicPort?y.push(f):u.push(f)}),(0,x.jsx)(M.Z,{publicPort:y,privatePort:u,domain:[]})}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",ellipsis:!0,width:100,render:function(t,r,J,T){return[(0,x.jsx)(B.ZP,{type:"link",onClick:A()(s()().mark(function y(){var u;return s()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,L.jV)({md5:r.Id});case 2:u=m.sent,o.onSelect&&o.onSelect(u.data.info);case 4:case"end":return m.stop()}},y)})),children:(0,x.jsx)(N.Z,{})},r.Id)]}}],rowKey:"Id",request:function(){var U=A()(s()().mark(function t(r,J,T){var y;return s()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,L.IE)({siteTitle:r.name});case 2:return y=f.sent,f.abrupt("return",{data:y.data.list,success:!0,total:y.data.list.length});case 4:case"end":return f.stop()}},t)}));return function(t,r,J){return U.apply(this,arguments)}}(),pagination:{pageSize:9}})}},52255:function(Be,q,n){n.d(q,{Z:function(){return ae}});var te=n(67294),s=n(85893);function ae(A){return(0,s.jsx)("div",{style:{display:A.show?"block":"none"},children:A.children})}},44349:function(Be,q,n){var te=n(97857),s=n.n(te),ae=n(17186),A=n(5966),L=n(86250),N=n(67294),O=n(85893),I=(0,N.forwardRef)(function(B,M){var c=(0,N.useRef)();(0,N.useImperativeHandle)(M,function(){return{addItem:function(o,U){var t,r=(t=c.current)===null||t===void 0?void 0:t.getList(),J=!1;if(r==null||r.map(function(y){if(y.name==o){J=!0;return}}),!J){var T;(T=c.current)===null||T===void 0||T.add({name:o,value:U})}},clear:function(){var o;(o=c.current)===null||o===void 0||(o=o.getList())===null||o===void 0||o.map(function(U,t){var r;(r=c.current)===null||r===void 0||r.remove(t)})}}});var x={};return B.hideCopyButton===!0&&(x.copyIconProps=!1),B.hideDeleteButton===!0&&(x.deleteIconProps=!1),(0,O.jsx)(ae.u,s()(s()({initialValue:B.initialValue,label:B.label,name:B.name,actionRef:c,creatorButtonProps:B.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(B.label?B.label:B.name)}:!1,min:B.min?B.min:0},x),{},{children:function(o,U,t){return(0,O.jsx)(L.Z,{justify:B.justify,gap:B.gap,children:B.items.map(function(r){return r.render?(0,O.jsx)("div",{children:r.render&&r.render(o,U,t)},"".concat(B.name,"-").concat(r.name,"-").concat(o.key)):(0,O.jsx)(A.Z,{width:r.width,name:r.name,label:r.label,required:r.required,rules:[{required:r.required}],disabled:r.disabled,placeholder:r.placeholder},"".concat(B.name,"-").concat(r.name,"-").concat(o.key))})})}}))});q.Z=I},12491:function(Be,q,n){n.d(q,{Z:function(){return I}});var te=n(24963),s=n(88484),ae=n(62370),A=n(31418),L=n(28036),N=n(67294),O=n(85893);function I(B){var M=(0,N.useContext)(te.Z),c=M.message,x=M.notice,$=M.lang,o=(0,N.useRef)(null),U=A.Z.useApp(),t=function(){o.current&&(o.current.click(),o.current.onchange=function(J){if(!J||!J.target)return"";var T=new FileReader;T.onload=function(u){var f,m,W=(f=u.target)===null||f===void 0?void 0:f.result;if(B.onLoad)try{B.onLoad&&B.onLoad(W)}catch(i){x.error(i);return}typeof B.onImport=="function"&&(c.success("\u6210\u529F\u5BFC\u5165 ".concat(B.title)),B.onImport(W)),(m=o.current)!==null&&m!==void 0&&m.value&&(o.current.value="")};var y=J.target;if(y.files)try{T.readAsText(y.files[0])}catch(u){x.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ae.Z,{children:(0,O.jsx)(L.ZP,{icon:(0,O.jsx)(s.Z,{}),block:!0,onClick:t,children:B.title})}),(0,O.jsx)("input",{style:{display:"none"},type:"file",ref:o,name:"importFileInput"})]})}},28230:function(Be,q,n){var te=n(15009),s=n.n(te),ae=n(99289),A=n.n(ae),L=n(5574),N=n.n(L),O=n(24963),I=n(14946),B=n(184),M=n(5966),c=n(62370),x=n(97462),$=n(52688),o=n(24739),U=n(17186),t=n(28036),r=n(34041),J=n(71230),T=n(15746),y=n(67294),u=n(85893),f=(0,y.forwardRef)(function(m,W){var i=(0,y.useState)(!1),ue=N()(i,2),Z=ue[0],_e=ue[1],ce=(0,y.useRef)(),de=(0,y.useContext)(O.Z),ee=de.message;return(0,y.useImperativeHandle)(W,function(){return{}}),(0,u.jsxs)(B.a,{name:"create",title:"\u521B\u5EFA\u7F51\u7EDC",open:Z,onOpenChange:function(k){_e(k)},formRef:ce,trigger:(0,u.jsx)(t.ZP,{type:"primary",children:"\u521B\u5EFA\u7F51\u7EDC"}),onFinish:function(){var D=A()(s()().mark(function k(g){var G,me,e,ge,Pe,Ae,re,Ue,Fe,Se,Le,Re,Te,Ne;return s()().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Re={name:g.name,driver:(G=g.driver)!==null&&G!==void 0?G:"bridge",ipSubnet:(me=g.ipSubnet)!==null&&me!==void 0?me:"",ipGateway:(e=g.ipGateway)!==null&&e!==void 0?e:"",ipRange:(ge=g.ipRange)!==null&&ge!==void 0?ge:"",ipAux:g.ipAux,enableIpV6:(Pe=g.enableIpV6)!==null&&Pe!==void 0?Pe:!1,ipV6Subnet:(Ae=g.ipV6Subnet)!==null&&Ae!==void 0?Ae:"",ipV6Gateway:(re=g.ipV6Gateway)!==null&&re!==void 0?re:"",ipV6Range:(Ue=g.ipV6Range)!==null&&Ue!==void 0?Ue:"",ipV6Aux:(Fe=g.ipV6Aux)!==null&&Fe!==void 0?Fe:[],driverOption:g.driverOption,internal:(Se=g.internal)!==null&&Se!==void 0?Se:!1,attachable:(Le=g.attachable)!==null&&Le!==void 0?Le:!1},(g.driver=="macvlan"||g.driver=="ipvlan")&&(Re.driverOption||(Re.driverOption=[]),Re.driverOption.push({name:"parent",value:g.macvlanParentCard})),Ie.next=4,(0,I.XY)(Re);case 4:if(Te=Ie.sent,!(Te&&Te.data&&Te.data.id!="")){Ie.next=10;break}return ee.success("\u521B\u5EFA\u7F51\u7EDC\u6210\u529F"),m.onFinish&&m.onFinish(),(Ne=ce.current)===null||Ne===void 0||Ne.resetFields(),Ie.abrupt("return",!0);case 10:case"end":return Ie.stop()}},k)}));return function(k){return D.apply(this,arguments)}}(),children:[(0,u.jsx)(M.Z,{label:"\u540D\u79F0",tooltip:"\u4E0D\u914D\u7F6E\u5B50\u7F51\u65F6\uFF0C\u4F1A\u81EA\u52A8\u751F\u6210",name:"name",required:!0,rules:[{required:!0}],placeholder:"\u6307\u5B9A\u552F\u4E00\u7684\u7F51\u7EDC\u540D\u79F0"}),(0,u.jsx)(c.Z,{label:"\u7C7B\u578B",name:"driver",children:(0,u.jsxs)(r.Z,{defaultValue:"bridge",children:[(0,u.jsx)(r.Z.Option,{value:"bridge",children:"bridge"}),(0,u.jsx)(r.Z.Option,{value:"macvlan",children:"macvlan"}),(0,u.jsx)(r.Z.Option,{value:"ipvlan",children:"ipvlan"}),(0,u.jsx)(r.Z.Option,{value:"overlay",children:"overlay"})]})}),(0,u.jsx)(x.Z,{name:["driver"],children:function(k){var g=k.driver;if(g=="macvlan"||g=="ipvlan")return(0,u.jsx)(M.Z,{required:!0,rules:[{required:!0}],label:"\u7236\u7F51\u5361",name:"macvlanParentCard",tooltip:"\u6307\u5B9A\u8981\u6865\u63A5\u7684\u5BBF\u4E3B\u673A\u7F51\u5361\u540D\u79F0"})}}),(0,u.jsxs)(J.Z,{children:[(0,u.jsx)(T.Z,{span:8,children:(0,u.jsx)($.Z,{label:"\u81EA\u5B9AIPV4\u5B50\u7F51",name:"userIpV4Subnet"})}),(0,u.jsx)(T.Z,{span:8,children:(0,u.jsx)($.Z,{name:"internal",label:"\u9694\u79BB\u5916\u90E8\u8BBF\u95EE",initialValue:!1})}),(0,u.jsx)(T.Z,{span:8,children:(0,u.jsx)($.Z,{name:"attachable",label:"\u5141\u8BB8\u624B\u52A8\u9644\u52A0\u5BB9\u5668",initialValue:!1})})]}),(0,u.jsx)(x.Z,{name:["userIpV4Subnet"],children:function(k){var g=k.userIpV4Subnet;if(g)return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(o.UW,{title:"IPV4\u914D\u7F6E",children:[(0,u.jsx)(M.Z,{label:"\u5B50\u7F51",name:"ipSubnet",width:"md",tooltip:"\u683C\u5F0F\u4E3A: \u5B50\u7F51\u8D77\u59CB\u5730\u5740/\u63A9\u7801\u3002\u5E38\u89C1\u7684\u683C\u5F0F\u6709 10.0.0.0/8, 172.20.0.0/16, 192.168.1.0/24",placeholder:"192.168.0.0/16"}),(0,u.jsx)(M.Z,{label:"\u7F51\u5173",name:"ipGateway",width:"md",placeholder:"192.168.0.1"}),(0,u.jsx)(M.Z,{label:"\u6307\u5B9AIp\u8303\u56F4",name:"ipRange",width:"md",placeholder:"192.168.1.0/24"})]}),(0,u.jsx)(U.u,{name:"ipAux",label:"\u6392\u9664Ip",children:(0,u.jsxs)(o.UW,{children:[(0,u.jsx)(M.Z,{label:"\u8BBE\u5907\u540D\u79F0",name:"device",width:"md"}),(0,u.jsx)(M.Z,{label:"Ip\u5730\u5740",name:"address",width:"md"})]})})]})}}),(0,u.jsxs)(J.Z,{children:[(0,u.jsx)(T.Z,{span:8,children:(0,u.jsx)($.Z,{label:"\u542F\u7528IPV6",name:"enableIpV6"})}),(0,u.jsx)(T.Z,{children:(0,u.jsx)($.Z,{label:"\u81EA\u5B9AIPV6\u5B50\u7F51",name:"userIpV6Subnet",fieldProps:{onChange:function(k,g){if(k){var G;(G=ce.current)===null||G===void 0||G.setFieldValue("enableIpV6",!0)}}}})})]}),(0,u.jsx)(x.Z,{name:["userIpV6Subnet"],children:function(k){var g=k.userIpV6Subnet;if(g)return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(o.UW,{title:"IPV6\u914D\u7F6E",children:[(0,u.jsx)(M.Z,{label:"\u5B50\u7F51",name:"ipV6Subnet",width:"md",placeholder:"2001:db8::/48"}),(0,u.jsx)(M.Z,{label:"\u7F51\u5173",name:"ipV6Gateway",width:"md",placeholder:"2001:db8::1"}),(0,u.jsx)(M.Z,{label:"Ip\u8303\u56F4",name:"ipV6Range",width:"md",placeholder:"2001:db8::/64"})]}),(0,u.jsx)(U.u,{name:"ipV6Aux",label:"\u6392\u9664Ip",children:(0,u.jsxs)(o.UW,{children:[(0,u.jsx)(M.Z,{label:"\u8BBE\u5907\u540D\u79F0",name:"device",width:"md"}),(0,u.jsx)(M.Z,{label:"Ip\u5730\u5740",name:"address",width:"md"})]})})]})}}),(0,u.jsx)(U.u,{name:"driverOption",label:"\u81EA\u5B9A\u4E49\u9A71\u52A8\u914D\u7F6E",children:(0,u.jsxs)(o.UW,{children:[(0,u.jsx)(M.Z,{label:"\u540D\u79F0",name:"name",width:"md"}),(0,u.jsx)(M.Z,{label:"\u503C",name:"value",width:"md"})]})})]})});q.Z=f},46442:function(Be,q,n){var te=n(15009),s=n.n(te),ae=n(99289),A=n.n(ae),L=n(5574),N=n.n(L),O=n(67294),I=n(14946),B=n(64789),M=n(10641),c=n(28036),x=n(85265),$=n(42075),o=n(66309),U=n(28230),t=n(85893),r=(0,O.forwardRef)(function(J,T){(0,O.useImperativeHandle)(T,function(){return{show:function(){m(!0)}}});var y=(0,O.useState)(!1),u=N()(y,2),f=u[0],m=u[1],W=(0,O.useRef)();return(0,t.jsxs)(t.Fragment,{children:[J.showTriggerButton&&(0,t.jsx)(c.ZP,{onClick:function(){m(!0)},children:"\u52A0\u5165\u7F51\u7EDC"}),(0,t.jsx)(x.Z,{title:"\u9009\u62E9\u7F51\u7EDC",width:800,footer:!1,open:f,onClose:function(){return m(!1)},extra:(0,t.jsx)($.Z,{children:(0,t.jsx)(U.Z,{onFinish:function(){var ue,Z;!((ue=W.current)===null||ue===void 0)&&ue.reloadAndRest&&((Z=W.current)===null||Z===void 0||Z.reloadAndRest())}},"create")}),children:(0,t.jsx)(M.Z,{rowKey:"Name",toolBarRender:!1,actionRef:W,columns:[{title:"\u540D\u79F0",dataIndex:"Name",render:function(ue,Z,_e,ce,de){return Z.Name=="none"||Z.Name=="bridge"||Z.Name=="host"?(0,t.jsxs)(t.Fragment,{children:[Z.Name," ",(0,t.jsx)(o.Z,{color:"blue",children:"System"})]}):(0,t.jsx)(t.Fragment,{children:ue})}},{title:"\u7C7B\u578B",ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"IPAM Driver",ellipsis:!0,width:120,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4 IPAM Network",search:!1,dataIndex:["IPAM","Config",0,"Subnet"],render:function(ue,Z,_e,ce,de){return(0,t.jsxs)($.Z,{children:[Z.IPAM.Config&&Z.IPAM.Config[0]&&"".concat(Z.IPAM.Config[0].Subnet," - ").concat(Z.IPAM.Config[0].Gateway),Z.IPAM.Config&&Z.IPAM.Config[1]&&"".concat(Z.IPAM.Config[1].Subnet," - ").concat(Z.IPAM.Config[1].Gateway)]})}},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(ue,Z,_e,ce,de){return[Z.Name!="none"&&Z.Name!="bridge"&&Z.Name!="host"&&(0,t.jsx)(c.ZP,{type:"link",onClick:function(){J.onSelect(Z),m(!1)},children:(0,t.jsx)(B.Z,{})},Z.Id)]}}],request:function(){var i=A()(s()().mark(function ue(Z,_e,ce){var de;return s()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,I.jR)({name:Z.Name});case 2:return de=D.sent,D.abrupt("return",{data:de.data.list,success:!0,total:de.data.list.length});case 4:case"end":return D.stop()}},ue)}));return function(ue,Z,_e){return i.apply(this,arguments)}}(),pagination:{pageSize:10}})})]})});q.Z=r},35880:function(Be,q,n){var te=n(67294),s=(0,te.createContext)({});q.Z=s},57841:function(Be,q,n){n.r(q),n.d(q,{default:function(){return bn}});var te=n(15009),s=n.n(te),ae=n(99289),A=n.n(ae),L=n(5574),N=n.n(L),O=n(90078),I=n(38345),B=n(97269),M=n(2236),c=n(5966),x=n(97462),$=n(64218),o=n(92398),U=n(38925),t=n(67294),r=n(35880),J=n(10641),T=n(62370),y=n(85576),u=n(42075),f=n(96074),m=n(25593),W=n(83062),i=n(71230),ue=n(15746),Z=n(28036),_e=n(3393),ce=n(18148),de=n(5251),ee=n(64789),D=n(75162),k=n(85060),g=n(28307),G=n(78451),me=n(99861),e=n(85893);function ge(v){var K=(0,t.useState)(!1),w=N()(K,2),S=w[0],E=w[1],b=(0,t.useRef)(),_=(0,t.useContext)(r.Z),h=_.createFormRef,F=_.volumeListRef,j=_.createEnvRef,d=_.domainRef,p=(0,t.useRef)(),V=function(){var P=A()(s()().mark(function R(C){var H,se,ne,Q,ie,ve,pe,oe,he,De,xe,ke;return s()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return E(!1),Y.next=3,(0,_e.YU)({md5:C});case 3:Q=Y.sent,v.redeploy||(oe=(ie=h.current)===null||ie===void 0?void 0:ie.getFieldsValue(),(ve=h.current)===null||ve===void 0||ve.resetFields(),(pe=h.current)===null||pe===void 0||pe.setFieldsValue({siteName:oe.siteName,siteTitle:oe.siteTitle,useBridgeNetwork:oe.useBridgeNetwork})),Q.data.info.Config.Env&&Q.data.info.Config.Env.map(function(l){var le,a=l.split("=");(le=j.current)===null||le===void 0||le.addEnvItem(a[0],a.slice(1).join("="))}),(H=h.current)===null||H===void 0||H.setFieldValue("imageName",C),(se=h.current)===null||se===void 0||se.setFieldValue("workDir",Q.data.info.Config.WorkingDir),(ne=d.current)===null||ne===void 0||ne.setExposePort(Q.data.info.Config.ExposedPorts),v.redeploy||(Q.data.info.Config.Volumes?(xe=[],Object.keys(Q.data.info.Config.Volumes).map(function(l,le){xe.push(l)}),(De=F.current)===null||De===void 0||De.setDefaultDestPath(xe)):(ke=F.current)===null||ke===void 0||ke.setDefaultDestPath([]),(he=h.current)===null||he===void 0||he.setFieldsValue({workDir:{value:"",useDefault:!0,default:Q.data.info.Config.WorkingDir},user:{value:"",useDefault:!0,default:Q.data.info.Config.User},command:{value:"",useDefault:!0,default:Q.data.info.Config.Cmd&&Q.data.info.Config.Cmd.join(" ")},entrypoint:{value:"",useDefault:!0,default:Q.data.info.Config.Entrypoint&&Q.data.info.Config.Entrypoint.join(" ")}}));case 10:case"end":return Y.stop()}},R)}));return function(C){return P.apply(this,arguments)}}();return(0,t.useEffect)(function(){v.fromImageId&&V(v.fromImageId)},[v.fromImageId]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(y.Z,{open:S,width:1024,title:"\u9009\u62E9\u955C\u50CF",footer:!1,onCancel:function(){return E(!1)},children:(0,e.jsx)(J.Z,{scroll:{x:"max-content"},columns:[{title:"Id",dataIndex:"Id",search:!1,width:200,render:function(R,C,H,se,ne){return(0,e.jsx)(G.Z,{content:C.Id})}},{title:"\u955C\u50CF\u540D\u79F0",dataIndex:"tag",width:200,render:function(R,C,H,se){return(0,e.jsx)(G.Z,{content:C.RepoTags[0]})}},{title:"\u521B\u5EFA\u65E5\u671F",dataIndex:"Created",ellipsis:!0,search:!1,width:"180px",render:function(R,C,H,se){return(0,e.jsx)("div",{children:(0,de.ZM)(C.Created*1e3)},C.Id)},sorter:function(R,C){return R.Created-C.Created}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:80,render:function(R,C,H,se){return(0,e.jsxs)(u.Z,{split:(0,e.jsx)(f.Z,{type:"vertical"}),children:[(0,e.jsx)(m.Z.Link,{onClick:A()(s()().mark(function ne(){return s()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.abrupt("return",V(C.RepoTags[0]));case 1:case"end":return ie.stop()}},ne)})),children:(0,e.jsx)(W.Z,{title:"\u4F7F\u7528\u955C\u50CF",children:(0,e.jsx)(ee.Z,{})})},"addImage"),(0,e.jsx)(m.Z.Link,{onClick:A()(s()().mark(function ne(){var Q;return s()().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:C.RepoTags[0]&&((Q=p.current)===null||Q===void 0||Q.setImageName(C.RepoTags[0]));case 1:case"end":return ve.stop()}},ne)})),children:(0,e.jsx)(W.Z,{title:"\u66F4\u65B0\u955C\u50CF",children:(0,e.jsx)(D.Z,{})})},"updateImage")]})}}],request:function(){var P=A()(s()().mark(function R(C,H,se){var ne,Q,ie,ve,pe;return s()().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return v.redeploy&&(Q=(ne=h.current)===null||ne===void 0?void 0:ne.getFieldValue("imageName"),C.tag=Q?Q.split(":")[0]:C.tag),he.next=3,(0,ce.KG)({tag:C.tag});case 3:return ie=he.sent,ve=0,pe=[],ie.data.list&&(pe=ie.data.list.flatMap(function(De){return De.RepoTags.map(function(xe){return{Key:ve++,Id:De.Id,Created:De.Created,RepoTags:[xe]}})})),he.abrupt("return",{data:pe,success:!0,total:pe.length});case 8:case"end":return he.stop()}},R)}));return function(R,C,H){return P.apply(this,arguments)}}(),toolBarRender:function(){return[(0,e.jsx)(g.Z,{onClick:function(){E(!1)},buttonType:"primary",ref:p,onFinish:function(C){V(C)}},"remote")]},formRef:b,rowKey:"Key",pagination:{pageSize:5}})},"imageTableList"),(0,e.jsxs)(i.Z,{children:[(0,e.jsx)(ue.Z,{span:14,children:(0,e.jsx)(c.Z,{label:"\u955C\u50CF",tooltip:v.redeploy?"\u66F4\u65B0\u5BB9\u5668\u65F6,\u53EA\u53EF\u4EE5\u9009\u62E9\u8BE5\u955C\u50CF\u4E0B\u7684\u4E0D\u540Ctag.\u4E5F\u53EF\u4EE5\u5F3A\u5236\u66F4\u65B0\u5DF2\u90E8\u7F72tag,\u66F4\u6B21\u90E8\u7F72":"\u65B0\u5EFA\u5BB9\u5668\u65F6,\u53EF\u4EE5\u4F7F\u7528\u672C\u5730\u955C\u50CF,\u4E5F\u53EF\u4EE5\u4E0B\u8F7D\u5168\u65B0\u7684\u955C\u50CF\u6216\u662F\u66F4\u65B0\u672C\u5730\u955C\u50CF\u7684tag",name:"imageName",disabled:!0,placeholder:"\u8BF7\u9009\u62E9\u955C\u50CF\uFF0C\u5982\u679C\u662F\u8FDC\u7A0B\u955C\u50CF\u8BF7\u5148\u4E0B\u8F7D",rules:[{required:!0}],required:!0})}),(0,e.jsx)(ue.Z,{children:(0,e.jsx)(T.Z,{label:" ",children:(0,e.jsxs)(u.Z.Compact,{children:[(0,e.jsx)(Z.ZP,{type:"primary",onClick:function(){return E(!0)},children:v.redeploy?"\u66F4\u6362\u955C\u50CF":"\u9009\u62E9\u955C\u50CF"},"showBtn"),(0,e.jsx)(x.Z,{name:["imageName"],children:function(R){var C=R.imageName;return v.redeploy?(0,e.jsx)(me.Z,{image:[C],trigger:(0,e.jsx)(W.Z,{title:"\u91CD\u65B0\u62C9\u53D6\u5F53\u524D\u955C\u50CF",children:(0,e.jsx)(Z.ZP,{icon:(0,e.jsx)(k.Z,{}),children:"\u62C9\u53D6\u5F53\u524D\u955C\u50CF"})})}):(0,e.jsx)(g.Z,{onClick:function(){E(!1)},ref:p,onFinish:function(se){V(se)}},"remote")}})]})})})]})]})}var Pe=n(60335),Ae=n(51042),re=n(24739),Ue=n(63434),Fe=n(17186),Se=n(85265),Le=n(92067),Re=(0,t.forwardRef)(function(v,K){var w=(0,t.useState)(!1),S=N()(w,2),E=S[0],b=S[1],_=(0,t.useRef)(),h=function(d){var p=(0,t.useState)([]),V=N()(p,2),P=V[0],R=V[1];return(0,t.useEffect)(function(){(0,Pe.jV)({md5:d.name}).then(function(C){var H;return R((H=C.data.info.Config.Env)!==null&&H!==void 0?H:[]),!0})},[]),(0,e.jsxs)(I.Z,{bordered:!0,extra:d.action,style:{marginBottom:10},children:[(0,e.jsx)(I.Z,{title:"\u5173\u8054\u4FE1\u606F",children:(0,e.jsxs)(re.UW,{children:[(0,e.jsx)(c.Z,{label:"\u5BB9\u5668\u540D\u79F0",name:"name",width:"md",readonly:!0}),(0,e.jsx)(c.Z,{label:"\u8BBF\u95EEHostName",name:"alise",width:"md",tooltip:"\u901A\u8FC7\u914D\u7F6E\u6B64\u540D\u79F0\uFF0C\u5728\u5BB9\u5668\u5185\u90E8\u8FDB\u884C\u8BF7\u6C42\u8BBF\u95EE"}),(0,e.jsx)(Ue.Z,{label:"\u5173\u8054\u5B58\u50A8",name:"volume"})]})}),(0,e.jsx)(I.Z,{title:"\u73AF\u5883\u53D8\u91CF",children:(0,e.jsx)(u.Z,{direction:"vertical",children:P&&P.map(function(C,H){return(0,e.jsx)(m.Z.Text,{copyable:{icon:(0,e.jsx)(Ae.Z,{}),onCopy:function(){var ne=C.split("=");v.onAddEnv(ne[0],ne[1])},tooltips:["add env","success"]},code:!0,ellipsis:{tooltip:C},style:{width:300},children:C},H)})},"linkEnv")})]})},F=function(d){var p,V,P=!1,R=(p=(V=_.current)===null||V===void 0?void 0:V.getList())!==null&&p!==void 0?p:[];if(R.map(function(H){H.name==d.name&&(P=!0)}),!P){var C;(C=_.current)===null||C===void 0||C.add(d)}};return(0,t.useImperativeHandle)(K,function(){return{setDefaultLink:function(d){d&&d.map(function(p){p.name!=""&&F(p)})}}}),(0,e.jsxs)(I.Z,{title:"\u5173\u8054\u5BB9\u5668",headerBordered:!0,children:[(0,e.jsx)(Fe.u,{name:"links",actionRef:_,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5173\u8054"},actionGuard:{beforeAddRow:function(d,p){return b(!0),!1}},copyIconProps:!1,min:0,itemRender:function(d,p){return(0,e.jsx)(h,{action:d.action,name:p.record.name})}}),(0,e.jsx)(Se.Z,{title:"\u9009\u62E9\u5BB9\u5668",width:800,footer:!1,open:E,onClose:function(){return b(!1)},children:(0,e.jsx)(Le.Z,{onSelect:function(d){F({name:d.Name,alise:d.Config.Hostname,volume:!1}),b(!1)}})})]})}),Te=Re,Ne=n(91058),ye=n(64317),Ie=(0,t.forwardRef)(function(v,K){var w=(0,t.useRef)();return(0,t.useImperativeHandle)(K,function(){return{setDefaultDestPath:function(E){var b,_,h=(b=(_=w.current)===null||_===void 0?void 0:_.getList())!==null&&b!==void 0?b:[];E.length!=0&&E.filter(function(F){return F!=""}).map(function(F){var j=!1;if(h.map(function(p){if(p.dest==F){j=!0;return}}),!j){var d;(d=w.current)===null||d===void 0||d.add({dest:F,permission:"write",inImage:!0})}})},addUserVolumeItem:function(E,b){var _,h=(_=w.current)===null||_===void 0?void 0:_.getList(),F=!1;if(h==null||h.map(function(d){if(d.dest==b){F=!0;return}}),!F){var j;(j=w.current)===null||j===void 0||j.add({host:E,dest:b})}}}}),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(I.Z,{title:"\u81EA\u5B9A\u4E49\u6302\u8F7D\u6216\u662F\u5B58\u50A8\u5377",tooltip:"\u6302\u8F7D\u53EF\u4EE5\u662F\u5BBF\u4E3B\u673A\u7684\u76EE\u5F55\u6216\u662F\u6587\u4EF6\uFF0C\u4E5F\u53EF\u4EE5\u6307\u5B9A\u5B58\u50A8\u5377\u540D\uFF08\u81EA\u52A8\u65B0\u5EFA\uFF09\u3002",headerBordered:!0,direction:"column",children:(0,e.jsx)(Fe.u,{actionRef:w,name:"volumes",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u6620\u5C04\u76EE\u5F55"},copyIconProps:!1,min:0,children:function(E,b,_){var h=_.getCurrentRowData();return(0,e.jsxs)(re.UW,{children:[(0,e.jsxs)(u.Z.Compact,{children:[(0,e.jsx)(c.Z,{label:"\u5BBF\u4E3B\u673A\u6587\u4EF6\u3001\u76EE\u5F55\u6216\u5B58\u50A8\u5377",name:"host",width:v.showInDrawer?"sm":"md"}),(0,e.jsx)(ye.Z,{label:" ",valueEnum:{write:"\u8BFB\u5199",readonly:"\u53EA\u8BFB"},initialValue:"write",name:"permission"})]}),(0,e.jsx)(c.Z,{label:"\u5BB9\u5668\u5185\u8DEF\u5F84",name:"dest",width:v.showInDrawer?"sm":"md",required:!0,rules:[{required:!0}],disabled:v.disabledUserVolumeDest||h.inImage})]})}})})})}),an=Ie,rn=n(2831),fe=n(52688),qe=n(86125),ln=n(44349);function sn(v){var K,w=(0,t.useState)(),S=N()(w,2),E=S[0],b=S[1];return(0,t.useEffect)(function(){(0,rn.aF)().then(function(_){return b(_.data.info)})},[]),(0,e.jsxs)(I.Z,{children:[(0,e.jsx)(c.Z,{label:"\u5171\u4EAB\u5185\u5B58\u5927\u5C0F - /dev/shm",name:"shmsize",initialValue:"64M",tooltip:"0 \u4E3A\u4F7F\u7528\u9ED8\u8BA464M\uFF0C\u914D\u7F6E\u65F6\u8BF7\u9644\u52A0\u5355\u4F4D\uFF0C\u4F8B\u5982\uFF1A1G"}),(0,e.jsx)(T.Z,{label:"\u6700\u5927Cpu\u914D\u989D",name:"cpus",tooltip:"0 \u4E3A\u4E0D\u9650\u5236",children:(0,e.jsx)(qe.Z,{step:.1,max:E==null?void 0:E.NCPU,marks:{0:"0",.5:"0.5\u6838",1:"1\u6838",1.5:"1.5\u6838",2:"2\u6838",4:"4\u6838",6:"6\u6838",8:"8\u6838"}})}),(0,e.jsx)(T.Z,{label:"\u6700\u5927\u5185\u5B58\u914D\u989D",name:"memory",tooltip:"0 \u4E3A\u4E0D\u9650\u5236",children:(0,e.jsx)(qe.Z,{step:256,max:Math.round(((K=E==null?void 0:E.MemTotal)!==null&&K!==void 0?K:0)/1024/1024),marks:{0:"0",1024:"1G",2048:"2G",3072:"3G",4096:"4G"}})}),(0,e.jsx)(ye.Z,{label:"\u65E5\u5FD7\u7C7B\u578B",name:["log","driver"],tooltip:"\u9ED8\u8BA4\u4F7F\u7528 json-file \u9A71\u52A8\u7531 docker \u7EDF\u4E00\u7BA1\u7406\u3002\u91C7\u7528 journal \u65F6\u65E5\u5FD7\u5C06\u6765\u5BBF\u4E3B\u673A\u7BA1\u7406",initialValue:"json-file",valueEnum:{"json-file":"json-file",journald:"journal (\u5BBF\u4E3B\u9700\u8981\u5B89\u88C5journal\u670D\u52A1)"}}),(0,e.jsx)(x.Z,{name:["log"],children:function(h){var F=h.log;if(F.driver=="json-file")return(0,e.jsxs)(re.UW,{children:[(0,e.jsx)(c.Z,{label:"\u65E5\u5FD7\u5207\u5272\u5927\u5C0F",name:["log","maxSize"],placeholder:"\u4F8B\u5982\uFF1A10k,5M",tooltip:"\u9ED8\u8BA4 Docker \u5E76\u4E0D\u4F1A\u81EA\u52A8\u5207\u5272\u65E5\u5FD7"}),(0,e.jsx)(c.Z,{tooltip:"\u9ED8\u8BA4 Docker \u5E76\u4E0D\u4F1A\u81EA\u52A8\u6E05\u7406\u65E5\u5FD7\u6587\u4EF6",label:"\u4FDD\u7559\u65E5\u5FD7\u6587\u4EF6\u6570",name:["log","maxFile"],placeholder:"\u4F8B\u5982\uFF1A10"})]})}}),(0,e.jsx)(ln.Z,{name:"device",label:"\u5173\u8054\u8BBE\u5907",hideCopyButton:!0,showAddButton:!0,items:[{label:"\u5BBF\u4E3B\u673A\u8DEF\u5F84",name:"host",width:"md",placeholder:"\u4F8B\u5982\uFF1A/dev/tty0"},{label:"\u5BB9\u5668\u5185\u8DEF\u5F84",name:"dest",width:"md",placeholder:"\u4F8B\u5982\uFF1A/dev/tty0"}]}),(0,e.jsxs)(i.Z,{children:[(0,e.jsx)(ue.Z,{span:4,children:(0,e.jsx)(fe.Z,{label:"\u4F7F\u7528 Gpu",name:["gpus","enable"]})}),(0,e.jsx)(ue.Z,{span:20,children:(0,e.jsx)(x.Z,{name:["gpus"],children:function(h){var F=h.gpus;if(F&&F.enable)return(0,e.jsx)(ye.Z,{mode:"tags",label:"\u8BBE\u5907\u5217\u8868",name:["gpus","device"],placeholder:"\u914D\u7F6E\u4F7F\u7528\u8BBE\u5907id\u6216\u662Fuuid\uFF0C\u4E0D\u586B\u6240\u4E3A\u6240\u6709\u8BBE\u5907"})}})})]}),(0,e.jsx)(x.Z,{name:["gpus"],children:function(h){var F=h.gpus;if(F&&F.enable)return(0,e.jsx)(ye.Z,{label:"\u8BA1\u7B97\u80FD\u529B",name:["gpus","capabilities"],mode:"multiple",fieldProps:{allowClear:!0},options:[{label:"compute - \u8BA1\u7B97\u80FD\u529B",value:"compute"},{label:"compat32 - \u517C\u5BB932\u4F4D",value:"compat32"},{label:"graphics - \u56FE\u5F62\u5904\u7406\u80FD\u529B",value:"graphics"},{label:"utility - \u76D1\u63A7\u548C\u7BA1\u7406\u80FD\u529B",value:"utility"},{label:"video - \u89C6\u9891\u5904\u7406\u80FD\u529B",value:"video"},{label:"display - \u663E\u793A\u56FE\u5F62\u754C\u9762\u80FD\u529B",value:"display"}]})}})]})}function on(){return(0,e.jsx)(I.Z,{title:"\u5BB9\u5668\u6807\u7B7E",children:(0,e.jsx)(Fe.u,{name:"label",label:"",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u6807\u7B7E"},copyIconProps:!1,min:0,children:(0,e.jsxs)(re.UW,{children:[(0,e.jsx)(c.Z,{width:"md",name:"name",label:"\u540D\u79F0",placeholder:""}),(0,e.jsx)(c.Z,{width:"md",name:"value",label:"\u503C",placeholder:""})]})})})}var dn=n(44771),cn=n(86615),On="default",Zn="user";function mn(v){return(0,e.jsx)(T.Z,{label:v.label,tooltip:v.tooltip,children:(0,e.jsxs)(u.Z.Compact,{block:!0,children:[(0,e.jsx)(cn.Z.Group,{radioType:"button",name:[v.name,"useDefault"],options:[{label:"\u4F7F\u7528\u9ED8\u8BA4",value:!0},{label:"\u81EA\u5B9A\u4E49",value:!1}]}),(0,e.jsx)(x.Z,{name:[v.name],children:function(w){return w[v.name]&&w[v.name].useDefault?(0,e.jsx)(c.Z,{name:[v.name,"default"],disabled:!0,placeholder:"\u672A\u8BBE\u7F6E"}):(0,e.jsx)(c.Z,{name:[v.name,"value"]})}})]})})}var Ke=mn,He=n(24963);function vn(){var v=(0,t.useContext)(He.Z),K=v.notice,w=v.lang;return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(I.Z,{children:[(0,e.jsx)(dn.Z,{label:"\u91CD\u542F\u7B56\u7565"}),(0,e.jsxs)(re.UW,{children:[(0,e.jsx)(fe.Z,{fieldProps:{onChange:function(E){E&&K.warning(w("app.create.privilegedNotice"))}},name:"privileged",label:"\u8D4B\u4E88\u5BB9\u5668Root\u6743\u9650",initialValue:!1}),(0,e.jsx)(fe.Z,{name:"autoRemove",label:"\u505C\u6B62\u540E\u81EA\u52A8\u5220\u9664",initialValue:!1}),(0,e.jsx)(fe.Z,{fieldProps:{onChange:function(E){E&&K.warning(w("app.create.hostPidNotice"))}},name:"hostPid",label:"\u5173\u8054\u5BBF\u4E3B\u673APid",initialValue:!1})]}),(0,e.jsx)(Ke,{label:"\u5DE5\u4F5C\u76EE\u5F55",tooltip:"\u9ED8\u8BA4\u4F7F\u7528\u955C\u50CF\u4E2D\u6307\u5B9A\u7684\u5DE5\u4F5C\u76EE\u5F55",name:"workDir"}),(0,e.jsx)(Ke,{label:"User",tooltip:"\u5728\u5BB9\u5668\u4E2D\u8FD0\u884C\u547D\u4EE4\u7684\u7528\u6237",name:"user"}),(0,e.jsx)(Ke,{label:"Command",tooltip:"\u542F\u52A8\u5BB9\u5668\u65F6\u8FD0\u884C\u7684\u547D\u4EE4\uFF0C\u4EE5\u7A7A\u683C\u5206\u9694",name:"command"}),(0,e.jsx)(Ke,{label:"Entrypoint",tooltip:"\u65E0\u6CD5\u8986\u76D6\u955C\u50CF\u4E2D\u5DF2\u7ECF\u6307\u5B9A\u7684 Entrypoint \u547D\u4EE4",name:"entrypoint"})]})})}var hn=n(91845),en=n(62597),nn=n(82346),_n=n(46442),fn=(0,t.forwardRef)(function(v,K){var w=(0,t.useContext)(He.Z),S=w.notice,E=(0,t.useRef)(),b=(0,t.useRef)();(0,t.useImperativeHandle)(K,function(){return{}});var _=function(F){var j,d,p=!1,V=(j=(d=E.current)===null||d===void 0?void 0:d.getList())!==null&&j!==void 0?j:[];if(V.map(function(R){R.name==F.name&&(p=!0)}),!p){var P;(P=E.current)===null||P===void 0||P.add(F)}};return(0,e.jsxs)(I.Z,{title:"\u5173\u8054\u7F51\u7EDC",headerBordered:!0,extra:(0,e.jsx)(u.Z,{children:v.showUseBridgeNetwork&&(0,e.jsx)(fe.Z,{name:"useBridgeNetwork",fieldProps:{checkedChildren:"\u5173\u8054 Bridge \u7F51\u7EDC",unCheckedChildren:"\u5173\u8054 Bridge \u7F51\u7EDC"}},"useBridgeNetwork")}),children:[(0,e.jsx)(Fe.u,{name:"network",actionRef:E,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u7F51\u7EDC"},actionGuard:{beforeAddRow:function(F,j){var d;return!v.siteName||v.siteName==""||typeof v.siteName=="undefined"?(S.error("\u8BF7\u8F93\u5165\u7AD9\u70B9\u6807\u8BC6"),!1):((d=b.current)===null||d===void 0||d.show(),!1)}},copyIconProps:!1,min:0,itemRender:function(F,j){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(re.UW,{children:[(0,e.jsx)(c.Z,{label:"\u7F51\u7EDC\u540D\u79F0",name:"name",width:"md",disabled:!0,fieldProps:{value:j.record.name}}),(0,e.jsx)(T.Z,{label:"\u8BBF\u95EEHostname",name:"alise",children:j.record.alise!=""&&(0,e.jsx)(m.Z.Text,{code:!0,copyable:!0,children:j.record.alise})}),(0,e.jsx)(T.Z,{label:" ",children:F.action})]}),(0,e.jsx)(re.UW,{children:(0,e.jsx)(c.Z,{label:"\u6307\u5B9AIpV4",name:"ipV4",width:"md",disabled:j.record.name=="bridge",fieldProps:{addonAfter:j.record.subnet}})})]})}}),(0,e.jsx)(_n.Z,{ref:b,onSelect:function(F){_({name:F.Name,alise:[""],subnet:F.IPAM.Config[0].Subnet})}})]})}),pn=fn,En=(0,t.forwardRef)(function(v,K){var w=(0,t.useState)(""),S=N()(w,2),E=S[0],b=S[1],_=(0,t.useRef)(),h=(0,t.useContext)(r.Z),F=h.createFormRef;return(0,t.useImperativeHandle)(K,function(){return{setExposePort:function(d){if(d){var p,V,P=(p=(V=_.current)===null||V===void 0?void 0:V.getList())!==null&&p!==void 0?p:[];Object.keys(d).map(function(R){var C=!1;if(P.map(function(se){se.dest==R&&(C=!0)}),!C){var H;(H=_.current)===null||H===void 0||H.add({host:"",dest:R})}})}},setHostname:function(d){b(d)},addPortItem:function(d,p){var V,P=(V=_.current)===null||V===void 0?void 0:V.getList(),R=!1;if(P==null||P.map(function(H){if(H.host==d){R=!0;return}}),!R){var C;(C=_.current)===null||C===void 0||C.add({host:String(d),dest:String(p)})}}}}),(0,e.jsx)(I.Z,{title:"\u7ED1\u5B9A\u7AEF\u53E3",tooltip:"\u8BBF\u95EE\u7AEF\u53E3\u7559\u7A7A\u65F6\u968F\u673A\u751F\u6210\u7AEF\u53E3\uFF0C\u5168\u90E8\u5220\u9664\u5219\u8868\u793A\u4E0D\u66B4\u9732\u7AEF\u53E3",headerBordered:!0,extra:(0,e.jsxs)(u.Z,{children:[v.showBindHost&&(0,e.jsx)(fe.Z,{name:"useHostNetwork",fieldProps:{checkedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",unCheckedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",onChange:function(d){if(d){var p;(p=F.current)===null||p===void 0||p.setFieldsValue({bindIpV6:!1,publishAllPorts:!1})}}}}),v.showBindIpV6&&(0,e.jsx)(x.Z,{name:["siteName","useHostNetwork"],children:function(d){var p=d.useHostNetwork;return(0,e.jsx)(fe.Z,{name:"publishAllPorts",fieldProps:{checkedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3",unCheckedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3"},disabled:p},"publishAllPorts")}}),v.showBindIpV6&&(0,e.jsx)(x.Z,{name:["siteName","useHostNetwork"],children:function(d){var p=d.useHostNetwork;return(0,e.jsx)(fe.Z,{name:"bindIpV6",fieldProps:{checkedChildren:"IpV6",unCheckedChildren:"IpV6"},disabled:p},"bindIpV6")}})]}),children:(0,e.jsx)(x.Z,{name:["useHostNetwork","bindIpV6","publishAllPorts"],children:function(d){var p=d.useHostNetwork,V=d.bindIpV6,P=d.publishAllPorts;if(!p&&!P)return(0,e.jsx)(Fe.u,{name:"ports",actionRef:_,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BF9\u5916\u90E8\u8BBF\u95EE"},min:0,copyIconProps:!1,children:(0,e.jsxs)(re.UW,{children:[(0,e.jsx)(c.Z,{width:v.showInDrawer?"sm":"md",name:"host",label:"\u5916\u90E8\u8BBF\u95EE\u7AEF\u53E3",tooltip:"\u5BF9\u5916\u8BBF\u95EE\u53EF\u4EE5\u901A\u8FC7\u6DFB\u52A0\u8BBF\u95EE\u7AEF\u53E3\u6216\u662F\u521B\u5EFA\u5B8C\u6210\u540E\u5BF9\u5BB9\u5668\u7ED1\u5B9A\u57DF\u540D",placeholder:"\u7559\u7A7A\u5C06\u4F7F\u7528\u968F\u673A\u7AEF\u53E3\uFF0C\u7ED1\u5B9AIpV6\u5FC5\u586B",required:V,rules:[{required:V}]}),(0,e.jsx)(c.Z,{label:"\u5BB9\u5668\u5185\u7AEF\u53E3",width:v.showInDrawer?"sm":"md",name:"dest",placeholder:"\u6784\u5EFA\u65F6 Expose \u6307\u5B9A\u7684\u7AEF\u53E3",required:!0,rules:[{required:!0}]})]})})}})})}),Cn=En,Me=n(52255);function jn(){var v=(0,t.useRef)(),K=function(E){var b,_,h=!1,F=(b=(_=v.current)===null||_===void 0?void 0:_.getList())!==null&&b!==void 0?b:[];if(F.map(function(d){d.name==E.name&&(h=!0)}),!h){var j;(j=v.current)===null||j===void 0||j.add(E)}},w=function(E){var b,_,h=!1,F=(b=(_=v.current)===null||_===void 0?void 0:_.getList())!==null&&b!==void 0?b:[];F.map(function(j,d){if(j.name==E){var p;(p=v.current)===null||p===void 0||p.remove(d)}})};return(0,e.jsx)(I.Z,{title:"\u5173\u8054\u5BBF\u4E3B\u673A\u7F51\u7EDC\u5185\u4E3B\u673A",tooltip:"\u5BB9\u5668\u5185\u5982\u679C\u9700\u8981\u8BF7\u6C42\u5BBF\u4E3B\u673A\u6240\u5728\u7684\u7F51\u7EDC\u4E2D\u7684\u4E3B\u673A\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6B64\u914D\u7F6E\u5C06Ip\u6CE8\u5165\u5230\u5BB9\u5668\u4E2D",extra:(0,e.jsx)(u.Z,{children:(0,e.jsx)(fe.Z,{name:"enableBindHost",fieldProps:{checkedChildren:"\u7ED1\u5B9A\u5BBF\u4E3B\u673AIp",unCheckedChildren:"\u7ED1\u5B9A\u5BBF\u4E3B\u673AIp",onChange:function(E){E?K({name:"host.dpanel.local",value:"host-gateway"}):w("host.dpanel.local")}}})}),children:(0,e.jsx)(Fe.u,{name:"extraHosts",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BBF\u4E3B\u673A\u7F51\u7EDC\u5173\u8054"},actionRef:v,copyIconProps:!1,min:0,children:(0,e.jsxs)(re.UW,{children:[(0,e.jsx)(c.Z,{width:"md",name:"name",label:"Hostname",placeholder:""}),(0,e.jsx)(c.Z,{width:"md",name:"value",label:"ip",placeholder:""})]})})})}var Ge=n(90672),Bn=(0,t.forwardRef)(function(v,K){return(0,t.useImperativeHandle)(K,function(){return{}}),(0,e.jsxs)(I.Z,{title:"\u7F51\u7EDC\u914D\u7F6E",children:[(0,e.jsxs)(re.UW,{children:[(0,e.jsx)(c.Z,{label:"\u914D\u7F6E ipV4 \u5730\u5740",name:["ipV4","address"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u5730\u5740\uFF0C\u4F8B\u5982 192.168.1.5",placeholder:"192.168.1.5"}),(0,e.jsx)(x.Z,{name:["ipV4"],children:function(S){var E=S.ipV4;return(0,e.jsx)(c.Z,{label:"\u914D\u7F6E ipV4 \u5B50\u7F51",name:["ipV4","subnet"],width:"md",required:E&&E.address,tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u6240\u5728\u7684\u5B50\u7F51\uFF0C\u4F8B\u5982 192.168.1.0/24",placeholder:"192.168.1.0/24",rules:[{required:E&&E.address}]})}}),(0,e.jsx)(c.Z,{label:"\u914D\u7F6E ipV4 \u7F51\u5173",name:["ipV4","gateway"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u7684\u7F51\u5173\uFF0C\u4F8B\u5982 192.168.1.1",placeholder:"192.168.1.1"}),(0,e.jsx)(fe.Z,{label:"\u81EA\u5B9A\u4E49ipV6",name:"enableIpV6Address"})]}),(0,e.jsx)(x.Z,{name:["enableIpV6Address"],children:function(S){var E=S.enableIpV6Address;if(E)return(0,e.jsxs)(re.UW,{children:[(0,e.jsx)(c.Z,{label:"\u914D\u7F6E ipV6 \u5730\u5740",name:["ipV6","address"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipV6\u5730\u5740\uFF0C\u4F8B\u5982 2001:db8::5",placeholder:"2001:db8::5"}),(0,e.jsx)(x.Z,{name:["ipV6"],children:function(_){var h=_.ipV6;return(0,e.jsx)(c.Z,{label:"\u914D\u7F6E ipV6 \u5B50\u7F51",name:["ipV6","subnet"],width:"md",required:h&&h.address,tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u6240\u5728\u7684\u5B50\u7F51\uFF0C\u4F8B\u5982 2001:db8::/48",placeholder:"2001:db8::/48",rules:[{required:h&&h.address}]})}}),(0,e.jsx)(c.Z,{label:"\u914D\u7F6E ipV6 \u7F51\u5173",name:["ipV6","gateway"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipV6\u7684\u7F51\u5173\uFF0C\u4F8B\u5982 2001:db8::1",placeholder:"2001:db8::1"})]})}}),(0,e.jsx)(Ge.Z,{label:"DNS\u914D\u7F6E",name:"dns",placeholder:"\u8BF7\u6307\u5B9Adns\u5730\u5740\uFF0C\u4F8B\u5982\uFF1A8.8.8.8\uFF0C\u4E00\u884C\u6DFB\u4E00\u6761dns\u5730\u5740"})]})}),gn=Bn,Ye=n(31199),Fn=n(86250);function Dn(){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(I.Z,{title:"\u9644\u52A0\u6267\u884C\u811A\u672C",headerBordered:!0,subTitle:"",children:(0,e.jsx)(Ge.Z,{label:"\u5BB9\u5668\u521B\u5EFA\u540E\u6267\u884C\u811A\u672C",name:["hook","containerCreate"],placeholder:"\u5BB9\u5668\u5728\u521B\u5EFA\u540E\u6267\u884C\u7684\u811A\u672C\uFF0C\u6B64\u811A\u672C\u5E76\u4E0D\u4F1A\u5F71\u54CD entrypoint \u53CA command\u3002\u4F8B\u5982\uFF1Als -al && touch abc.txt && apt update"})}),(0,e.jsxs)(I.Z,{title:"\u5065\u5EB7\u68C0\u67E5",headerBordered:!0,children:[(0,e.jsxs)(Fn.Z,{gap:20,justify:"start",children:[(0,e.jsx)(Ye.Z,{label:"\u91CD\u590D\u95F4\u9694\u65F6\u95F4\uFF08\u79D2\uFF09",name:["healthcheck","interval"],initialValue:30}),(0,e.jsx)(Ye.Z,{label:"\u8D85\u65F6\u5931\u8D25\u65F6\u95F4\uFF08\u79D2\uFF09",name:["healthcheck","timeout"],initialValue:10}),(0,e.jsx)(Ye.Z,{label:"\u5931\u8D25\u91CD\u590D\u6B21\u6570",name:["healthcheck","retries"],initialValue:3}),(0,e.jsx)(ye.Z,{width:"sm",label:"\u811A\u672C\u6267\u884C\u73AF\u5883",initialValue:"CMD",name:["healthcheck","shellType"],valueEnum:{CMD:"\u5728 Docker \u73AF\u5883\u6267\u884C","CMD-SHELL":"\u5728\u5BB9\u5668\u5185\u6267\u884C"}})]}),(0,e.jsx)(Ge.Z,{label:"\u6267\u884C\u811A\u672C",name:["healthcheck","cmd"],placeholder:"\u914D\u7F6E\u5BB9\u5668\u5065\u5EB7\u68C0\u67E5\u811A\u672C\uFF0C\u4F8B\u5982\uFF1Acurl -f http://localhost:8080/ || exit 1"})]})]})}var xn=n(74763),tn=n(2487),Pn=[{name:"ALL"},{name:"AUDIT_CONTROL"},{name:"AUDIT_WRITE",default:!0},{name:"BLOCK_SUSPEND"},{name:"CHOWN",default:!0},{name:"DAC_OVERRIDE",default:!0},{name:"DAC_READ_SEARCH"},{name:"FOWNER",default:!0},{name:"FSETID",default:!0},{name:"IPC_LOCK"},{name:"IPC_OWNER"},{name:"KILL",default:!0},{name:"LEASE"},{name:"LINUX_IMMUTABLE"},{name:"MAC_ADMIN"},{name:"MAC_OVERRIDE"},{name:"MKNOD",default:!0},{name:"NET_ADMIN"},{name:"NET_BIND_SERVICE",default:!0},{name:"NET_BROADCAST"},{name:"NET_RAW",default:!0},{name:"SETFCAP",default:!0},{name:"SETGID",default:!0},{name:"SETPCAP",default:!0},{name:"SETUID",default:!0},{name:"SYSLOG"},{name:"SYS_ADMIN"},{name:"SYS_BOOT"},{name:"SYS_CHROOT",default:!0},{name:"SYS_MODULE"},{name:"SYS_NICE"},{name:"SYS_PACCT"},{name:"SYS_PTRACE"},{name:"SYS_RAWIO"},{name:"SYS_RESOURCE"},{name:"SYS_TIME"},{name:"SYS_TTY_CONFIG"}],An=(0,t.forwardRef)(function(v,K){var w=(0,t.useContext)(He.Z),S=w.lang,E=(0,t.useState)(null),b=N()(E,2),_=b[0],h=b[1],F=(0,t.useContext)(r.Z),j=F.createFormRef;return(0,t.useImperativeHandle)(K,function(){return{}}),(0,e.jsx)(I.Z,{children:(0,e.jsx)(tn.Z,{grid:{gutter:10,xs:3,sm:3,md:4,lg:4,xl:4,xxl:6},dataSource:Pn,renderItem:function(p,V){var P;return(0,e.jsx)(tn.Z.Item,{children:(0,e.jsx)(fe.Z,{fieldProps:{onChange:function(C){p.name=="ALL"&&h(C)}},disabled:p.name!="ALL"&&((0,xn.k)(_)?(P=j.current)===null||P===void 0?void 0:P.getFieldValue(["capAdd","ALL"]):_),initialValue:p.default,name:["capAdd",p.name],tooltip:S("app.create.cap."+p.name.toLocaleLowerCase()),label:p.name})},V)}})})}),In=An,We="update",un="copy",ze="new";function bn(){var v,K,w,S=(0,t.useContext)(He.Z),E=S.loading,b=S.notice,_=(0,t.useContext)(r.Z),h=_.createFormRef,F=_.volumeListRef,j=_.domainRef,d=_.createEnvRef,p=_.createLinkRef,V=(0,t.useState)(ze),P=N()(V,2),R=P[0],C=P[1],H=(0,nn.useSearchParams)(),se=N()(H,2),ne=se[0],Q=se[1],ie=(0,nn.useNavigate)(),ve=(0,t.useState)("basic"),pe=N()(ve,2),oe=pe[0],he=pe[1],De=parseInt((v=ne.get("id"))!==null&&v!==void 0?v:""),xe=(K=ne.get("containerId"))!==null&&K!==void 0?K:"",ke=(w=ne.get("imageId"))!==null&&w!==void 0?w:"";return(0,t.useEffect)(function(){if(xe||De)E.show(),(0,en.iE)({md5:xe,id:De}).then(function(){var l=A()(s()().mark(function le(a){var be,Oe,z,Ze,$e,Ce,Ve,Xe,Je;return s()().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:if(z={info:{},layer:[]},!a.data.env.imageName){je.next=11;break}return je.prev=2,je.next=5,(0,_e.YU)({md5:a.data.env.imageName});case 5:Ze=je.sent,z=Ze.data,je.next=11;break;case 9:je.prev=9,je.t0=je.catch(2);case 11:ne.get("op")==un?C(un):C(We),a.data.env.network&&a.data.env.network.map(function(X){return!X.alise&&X.name!="bridge"&&(X.alise=[a.data.siteName+".pod.dpanel.local"]),X}),a.data.env.ports&&a.data.env.ports.map(function(X){return X.host=="0"&&(X.host=""),X}),$e=a.data.env.bindIpV6,a.data.containerInfo.Info&&a.data.containerInfo.Info.NetworkSettings.Networks&&Object.keys(a.data.containerInfo.Info.NetworkSettings.Networks).map(function(X){if(a.data.env.network&&(a.data.env.network=a.data.env.network.map(function(Qe){return X==Qe.name&&(Qe.subnet=a.data.containerInfo.Info.NetworkSettings.Networks[X].IPAddress+"/"+a.data.containerInfo.Info.NetworkSettings.Networks[X].IPPrefixLen),Qe})),a.data.containerInfo.Info.NetworkSettings.Networks[X].IPv6Gateway!=""&&($e=!0),X=="bridge"){var we;(we=h.current)===null||we===void 0||we.setFieldValue("useBridgeNetwork",!0)}}),a.data.env.extraHosts&&a.data.env.extraHosts.map(function(X){if(X.value=="host-gateway"){var we;(we=h.current)===null||we===void 0||we.setFieldValue("enableBindHost",!0)}}),Ce=a.data.env.ports,a.data.env.ports&&(Ce=a.data.env.ports.map(function(X){return X.host=(X.hostIp?X.hostIp+":":"")+X.host,X})),(be=h.current)===null||be===void 0||be.setFieldsValue({imageName:a.data.env.imageName,privileged:a.data.env.privileged,bindIpV6:a.data.env.useHostNetwork?!1:$e,useHostNetwork:a.data.env.useHostNetwork,publishAllPorts:a.data.env.useHostNetwork?!1:a.data.env.publishAllPorts,workDir:{value:a.data.env.workDir,useDefault:!a.data.env.workDir,default:z&&z.info.Config&&z.info.Config.WorkingDir},user:{value:a.data.env.user,useDefault:!a.data.env.user,default:z&&z.info.Config&&z.info.Config.User},command:{value:a.data.env.command,useDefault:!a.data.env.command,default:z&&z.info.Config&&z.info.Config.Cmd&&z.info.Config.Cmd.join(" ")},entrypoint:{value:a.data.env.entrypoint,useDefault:!a.data.env.entrypoint,default:z&&z.info.Config&&z.info.Config.Entrypoint&&z.info.Config.Entrypoint.join(" ")},shmsize:(Oe=a.data.env.shmsize)!==null&&Oe!==void 0?Oe:"64M",cpus:a.data.env.cpus,memory:a.data.env.memory,environment:a.data.env.environment,label:a.data.env.label,volumes:a.data.env.volumes,ports:Ce,links:a.data.env.links,network:a.data.env.network,restart:a.data.env.restart,extraHosts:a.data.env.extraHosts,autoRemove:a.data.env.autoRemove,log:a.data.env.log,dns:a.data.env.dns&&a.data.env.dns.join(`
`),ipV4:a.data.env.ipV4,ipV6:a.data.env.ipV6,gpus:a.data.env.gpus,device:a.data.env.device,hook:a.data.env.hook,hostPid:a.data.env.hostPid,capAdd:a.data.env.capAdd&&Object.fromEntries(a.data.env.capAdd.map(function(X){return[X,!0]}))}),a.data.env.ipV6&&((Ve=h.current)===null||Ve===void 0||Ve.setFieldValue("enableIpV6Address",!0)),a.data.env.healthcheck&&a.data.env.healthcheck.cmd&&a.data.env.healthcheck.cmd!=""&&((Xe=h.current)===null||Xe===void 0||Xe.setFieldsValue({healthcheck:a.data.env.healthcheck})),ne.get("op")==We&&((Je=h.current)===null||Je===void 0||Je.setFieldsValue({siteTitle:a.data.siteTitle,siteName:a.data.siteName}));case 23:case"end":return je.stop()}},le,null,[[2,9]])}));return function(le){return l.apply(this,arguments)}}()).finally(function(){E.destroy()});else{var Ee,Y;C(ze),(Ee=h.current)===null||Ee===void 0||Ee.resetFields(),(Y=h.current)===null||Y===void 0||Y.setFieldValue("useBridgeNetwork",!0)}},[ne]),(0,e.jsx)(O._z,{children:(0,e.jsx)(I.Z,{direction:"column",gutter:[0,10],children:(0,e.jsxs)(B.A,{submitter:{render:function(Y,l){return(0,e.jsx)(M.S,{children:l})}},formRef:h,onFinish:function(){var Ee=A()(s()().mark(function Y(l){var le,a,be,Oe,z,Ze;return s()().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(Ze={siteTitle:l.siteTitle,siteName:l.siteName,imageName:l.imageName,environment:l.environment,links:l.links,ports:l.ports,volumes:l.volumes,network:(le=l.network)!==null&&le!==void 0?le:[],privileged:(a=l.privileged)!==null&&a!==void 0?a:!1,autoRemove:(be=l.autoRemove)!==null&&be!==void 0?be:!1,restart:l.restart,cpus:l.cpus,memory:l.memory,shmsize:(Oe=l.shmsize)!==null&&Oe!==void 0?Oe:0,workDir:l.workDir&&!l.workDir.useDefault?l.workDir.value:"",user:l.user&&!l.user.useDefault?l.user.value:"",command:l.command&&!l.command.useDefault?l.command.value:"",entrypoint:l.entrypoint&&!l.entrypoint.useDefault?l.entrypoint.value:"",useHostNetwork:l.useHostNetwork,bindIpV6:l.bindIpV6,log:l.log,dns:l.dns&&l.dns!=""?l.dns.split(`
`):[],label:l.label,publishAllPorts:l.publishAllPorts,extraHosts:l.extraHosts,ipV4:l.ipV4,ipV6:l.ipV6,device:l.device,gpus:l.gpus,hook:l.hook,hostPid:l.hostPid,capAdd:l.capAdd?Object.keys(l.capAdd).map(function(Ve){return Ve}):[],useBridgeNetwork:(z=l.useBridgeNetwork)!==null&&z!==void 0?z:!0},!(!l.useBridgeNetwork&&!l.useHostNetwork&&(!l.network||l.network.length==0))){Ce.next=4;break}return b.error("\u4E0D\u52A0\u5165 Bridge \u7F51\u7EDC\u65F6\uFF0C\u5FC5\u987B\u6307\u5B9A\u4E00\u4E2A\u81EA\u5B9A\u4E49\u7F51\u7EDC"),Ce.abrupt("return",!1);case 4:return l.useBridgeNetwork&&Ze.network.push({name:"bridge",alise:[],ipV4:""}),l.healthcheck&&l.healthcheck.cmd&&l.healthcheck.cmd!=""&&(Ze.healthcheck=l.healthcheck),xe&&R==We&&(Ze.containerId=xe),Ce.next=9,(0,en.$G)(Ze);case 9:return ie("/app/list"),Ce.abrupt("return",!0);case 11:case"end":return Ce.stop()}},Y)}));return function(Y){return Ee.apply(this,arguments)}}(),children:[(0,e.jsxs)(I.Z,{title:"\u57FA\u7840\u4FE1\u606F",headerBordered:!0,children:[(0,e.jsx)(c.Z,{name:"siteTitle",label:"\u5BB9\u5668\u63CF\u8FF0",fieldProps:{onChange:function(Y){var l="";if(Y.target.value&&R!=We){var le,a=(0,hn.N9)(Y.target.value.trim(),{toneType:"none",type:"array"});l=a.join(""),(le=h.current)===null||le===void 0||le.setFieldValue("siteName",l)}}},placeholder:"\u8BF7\u8F93\u5165\u5BB9\u5668\u63CF\u8FF0\u540D\u79F0"}),(0,e.jsx)(c.Z,{name:"siteName",label:"\u5BB9\u5668\u6807\u8BC6",tooltip:"\u5BB9\u5668\u552F\u4E00\u6807\u8BC6\uFF0C\u7528\u4E8E\u6807\u8BC6\u5BB9\u5668\u548C\u5185\u90E8\u8BBF\u95EE",required:!0,disabled:R==We,rules:[{required:!0}],placeholder:"\u8BF7\u8F93\u5165\u5BB9\u5668\u6807\u8BC6\u540D\u79F0"}),(0,e.jsx)(ge,{redeploy:R!=ze,fromImageId:ke})]}),(0,e.jsx)($.Z,{offsetTop:50,children:(0,e.jsx)(I.Z,{style:{marginBottom:-20},children:(0,e.jsx)(o.Z,{activeKey:oe,onChange:function(Y){he(Y),window.scrollTo(0,450)},items:[{label:"\u57FA\u672C\u914D\u7F6E",key:"basic"},{label:"\u5173\u8054\u914D\u7F6E",key:"link"},{label:"\u8FD0\u884C\u914D\u7F6E",key:"run-command"},{label:"\u8D44\u6E90\u914D\u7F6E",key:"resource"},{label:"Hook",key:"hook"},{label:"\u80FD\u529B\u914D\u7F6E",key:"cap"},{label:"\u5176\u5B83",key:"other"}]})})}),(0,e.jsxs)(Me.Z,{show:oe=="basic",children:[(0,e.jsx)(Cn,{ref:j,showBindHost:!0,showBindIpV6:!0}),(0,e.jsx)(Ne.Z,{showAddButton:!0,showImportButton:!0,showCodeMode:!0,label:"\u73AF\u5883\u53D8\u91CF",ref:d}),(0,e.jsx)(an,{showDefault:!0,ref:F}),(0,e.jsx)(x.Z,{name:["siteName","useHostNetwork"],children:function(Y){var l=Y.siteName,le=Y.useHostNetwork;if(!le)return(0,e.jsx)(gn,{})}})]}),(0,e.jsx)(Me.Z,{show:oe=="link",children:(0,e.jsx)(x.Z,{name:["siteName","useHostNetwork"],children:function(Y){var l=Y.siteName,le=Y.useHostNetwork;return le?(0,e.jsx)(U.Z,{showIcon:!0,description:"\u7ED1\u5B9A\u5230\u5BBF\u4E3B\u673A\u7F51\u7EDC\u65F6\uFF0C\u65E0\u6CD5\u901A\u8FC7 Docker \u5173\u8054\u5176\u5B83\u5BB9\u5668\u3002\u8BF7\u4F7F\u7528\u5BBF\u4E3B\u673A\u5185\u7F51IP\u6216\u662F127.0.0.1\u4E92\u8054\u5BB9\u5668\u66B4\u9732\u7AEF\u53E3\u3002"}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Te,{onAddEnv:function(be,Oe){var z;(z=d.current)===null||z===void 0||z.addEnvItem(be,Oe)},ref:p}),(0,e.jsx)(pn,{showUseBridgeNetwork:!0,siteName:l}),(0,e.jsx)(jn,{})]})}})}),(0,e.jsx)(Me.Z,{show:oe=="run-command",children:(0,e.jsx)(vn,{})}),(0,e.jsx)(Me.Z,{show:oe=="resource",children:(0,e.jsx)(sn,{})}),(0,e.jsx)(Me.Z,{show:oe=="hook",children:(0,e.jsx)(Dn,{})}),(0,e.jsx)(Me.Z,{show:oe=="other",children:(0,e.jsx)(on,{})}),(0,e.jsx)(Me.Z,{show:oe=="cap",children:(0,e.jsx)(In,{})})]},"form")})})}},2831:function(Be,q,n){n.d(q,{Ll:function(){return M},aF:function(){return N},d6:function(){return x},u5:function(){return I}});var te=n(15009),s=n.n(te),ae=n(99289),A=n.n(ae),L=n(82346);function N(){return O.apply(this,arguments)}function O(){return O=A()(s()().mark(function o(){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,L.request)("/api/common/home/info",{method:"POST"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},o)})),O.apply(this,arguments)}function I(){return B.apply(this,arguments)}function B(){return B=A()(s()().mark(function o(){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,L.request)("/api/common/home/check-new-version",{method:"POST"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},o)})),B.apply(this,arguments)}function M(){return c.apply(this,arguments)}function c(){return c=A()(s()().mark(function o(){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,L.request)("/api/common/home/usage",{method:"POST"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},o)})),c.apply(this,arguments)}function x(){return $.apply(this,arguments)}function $(){return $=A()(s()().mark(function o(){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,L.request)("/api/common/home/upgrade-script",{method:"POST"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},o)})),$.apply(this,arguments)}},14946:function(Be,q,n){n.d(q,{CI:function(){return M},HY:function(){return J},IS:function(){return N},XY:function(){return o},_3:function(){return y},_x:function(){return x},jR:function(){return I},t9:function(){return t}});var te=n(15009),s=n.n(te),ae=n(99289),A=n.n(ae),L=n(82346);function N(f){return O.apply(this,arguments)}function O(){return O=A()(s()().mark(function f(m){return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,L.request)("/api/app/network/get-detail",{method:"POST",data:m}));case 1:case"end":return i.stop()}},f)})),O.apply(this,arguments)}function I(f){return B.apply(this,arguments)}function B(){return B=A()(s()().mark(function f(m){return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,L.request)("/api/app/network/get-list",{method:"POST",data:m}));case 1:case"end":return i.stop()}},f)})),B.apply(this,arguments)}function M(){return c.apply(this,arguments)}function c(){return c=A()(s()().mark(function f(){return s()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,(0,L.request)("/api/app/network/prune",{method:"POST"});case 2:return W.abrupt("return",W.sent);case 3:case"end":return W.stop()}},f)})),c.apply(this,arguments)}function x(f){return $.apply(this,arguments)}function $(){return $=A()(s()().mark(function f(m){return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,L.request)("/api/app/network/delete",{method:"POST",data:m});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},f)})),$.apply(this,arguments)}function o(f){return U.apply(this,arguments)}function U(){return U=A()(s()().mark(function f(m){return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,L.request)("/api/app/network/create",{method:"POST",data:m});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},f)})),U.apply(this,arguments)}function t(f){return r.apply(this,arguments)}function r(){return r=A()(s()().mark(function f(m){return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,L.request)("/api/app/network/disconnect",{method:"POST",data:m});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},f)})),r.apply(this,arguments)}function J(f){return T.apply(this,arguments)}function T(){return T=A()(s()().mark(function f(m){return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,L.request)("/api/app/network/connect",{method:"POST",data:m});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},f)})),T.apply(this,arguments)}function y(f){return u.apply(this,arguments)}function u(){return u=A()(s()().mark(function f(m){return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,L.request)("/api/app/network/get-container-list",{method:"POST",data:m}));case 1:case"end":return i.stop()}},f)})),u.apply(this,arguments)}}}]);
