!(function(){var x=Object.defineProperty,j=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var A=(L,g,h)=>g in L?x(L,g,{enumerable:!0,configurable:!0,writable:!0,value:h}):L[g]=h,W=(L,g)=>{for(var h in g||(g={}))k.call(g,h)&&A(L,h,g[h]);if(I)for(var h of I(g))K.call(g,h)&&A(L,h,g[h]);return L},B=(L,g)=>j(L,U(g));(self.webpackChunk=self.webpackChunk||[]).push([[3079],{74344:function(L,g,h){"use strict";var P=h(5574),m=h.n(P),M=h(37476),_=h(38345),f=h(82346),u=h(67294),b=h(35887),S=h(3616),e=h(85893),t=(0,u.forwardRef)(function(n,i){(0,u.useImperativeHandle)(i,function(){return{start:function(){for(var w=arguments.length,p=new Array(w),o=0;o<w;o++)p[o]=arguments[o];R(p.join(":")),c(!0)},reset:function(){var w;(w=O.current)===null||w===void 0||w.clear(),c(!1)},show:function(w){var p,o;(p=O.current)===null||p===void 0||p.clear(),(o=O.current)===null||o===void 0||o.write(w),c(!0)}}});var s=(0,u.useState)(!1),r=m()(s,2),a=r[0],c=r[1],d=(0,u.useState)(""),C=m()(d,2),E=C[0],R=C[1],y=(0,f.useModel)("subscriber"),O=(0,u.useRef)();return y.addDataHandler("image:"+E,function(v){var w;(w=O.current)===null||w===void 0||w.write(v.data)}),(0,u.useEffect)(function(){var v;(v=O.current)===null||v===void 0||v.fit()},[]),(0,e.jsx)(M.Y,{modalProps:{forceRender:!0,width:S.ob},title:"\u6784\u5EFA\u65E5\u5FD7",submitter:!1,width:1e3,onOpenChange:function(w){if(c(w),w){var p,o;(p=O.current)===null||p===void 0||p.clear(),(o=O.current)===null||o===void 0||o.fit()}},open:a,children:(0,e.jsx)(_.Z,{ghost:!0,children:(0,e.jsx)(b.Z,{showInModal:!0,width:"960px",height:"500px",ref:O})})})});g.Z=t},35887:function(L,g,h){"use strict";var P=h(5574),m=h.n(P),M=h(12323),_=h(78267),f=h.n(_),u=h(75458),b=h.n(u),S=h(67294),e=h(4244),t=h.n(e),n=h(24078),i=h(85893),s,r,a,c=(0,S.forwardRef)(function(d,C){var E,R=(0,S.useState)(!0),y=m()(R,2),O=y[0],v=y[1];return(0,S.useEffect)(function(){return s=new e.Terminal(M.X),r=new u.SearchAddon,a=new _.FitAddon,window.addEventListener("resize",function(){d.showInModal||a.fit()}),d.style&&d.style.fontSize&&(s.options.fontSize=d.style.fontSize),s.loadAddon(a),s.loadAddon(r),s.open(document.getElementById(d.id?d.id:"terminal-container")),d.showInModal||a.fit(),function(){s.reset(),v(!0)}},[]),(0,S.useImperativeHandle)(C,function(){return{write:function(p){O&&(a.fit(),v(!1)),s.write(p)},clear:function(){s.clear()},getTerminal:function(){return s},findNext:function(p){r.findNext(p)},findPrev:function(p){r.findPrevious(p)},fit:function(){a.fit()},onData:function(p){return s.onData(p)}}}),(0,i.jsx)("div",{id:d.id?d.id:"terminal-container",style:{width:d.width?d.width:"100%",height:d.height?d.height:"500px",marginTop:(E=d.style)===null||E===void 0?void 0:E.marginTop}})});g.Z=c},3616:function(L,g,h){"use strict";h.d(g,{Ed:function(){return _},FK:function(){return m},R_:function(){return P},ob:function(){return M}});var P=window.innerWidth<=1024?"90vw":"65vw",m="90vw",M="60vw",_="50vh"},12323:function(L,g,h){"use strict";h.d(g,{X:function(){return P},n:function(){return m}});var P={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},m=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},24963:function(L,g,h){"use strict";var P=h(67294),m=(0,P.createContext)({});g.Z=m},18148:function(L,g,h){"use strict";h.d(g,{$q:function(){return r},Fj:function(){return O},KG:function(){return u},KX:function(){return w},T8:function(){return i},Xn:function(){return t},ao:function(){return c},c5:function(){return R},c7:function(){return C}});var P=h(15009),m=h.n(P),M=h(99289),_=h.n(M),f=h(82346);function u(o){return b.apply(this,arguments)}function b(){return b=_()(m()().mark(function o(T){return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,f.request)("/api/app/image/get-list",{method:"POST",data:T}));case 1:case"end":return l.stop()}},o)})),b.apply(this,arguments)}function S(o){return e.apply(this,arguments)}function e(){return e=_asyncToGenerator(_regeneratorRuntime().mark(function o(T){return _regeneratorRuntime().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,request("/api/app/log/image-build",{method:"POST",data:T});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},o)})),e.apply(this,arguments)}function t(o){return n.apply(this,arguments)}function n(){return n=_()(m()().mark(function o(T){return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,f.request)("/api/app/image/get-list-build",{method:"POST",data:T}));case 1:case"end":return l.stop()}},o)})),n.apply(this,arguments)}function i(o){return s.apply(this,arguments)}function s(){return s=_()(m()().mark(function o(T){return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,f.request)("/api/app/image/get-build-task",{method:"POST",data:T});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},o)})),s.apply(this,arguments)}function r(o){return a.apply(this,arguments)}function a(){return a=_()(m()().mark(function o(T){return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,f.request)("/api/app/image/delete-build-task",{method:"POST",data:T});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},o)})),a.apply(this,arguments)}function c(o){return d.apply(this,arguments)}function d(){return d=_()(m()().mark(function o(T){return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,f.request)("/api/app/image/image-delete",{method:"POST",data:T});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},o)})),d.apply(this,arguments)}function C(){return E.apply(this,arguments)}function E(){return E=_()(m()().mark(function o(){return m()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,f.request)("/api/app/image/image-prune",{method:"POST"});case 2:return D.abrupt("return",D.sent);case 3:case"end":return D.stop()}},o)})),E.apply(this,arguments)}function R(){return y.apply(this,arguments)}function y(){return y=_()(m()().mark(function o(){return m()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,f.request)("/api/app/image/build-prune",{method:"POST"});case 2:return D.abrupt("return",D.sent);case 3:case"end":return D.stop()}},o)})),y.apply(this,arguments)}function O(o){return v.apply(this,arguments)}function v(){return v=_()(m()().mark(function o(T){return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,f.request)("/api/app/image/update-title",{method:"POST",data:T});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},o)})),v.apply(this,arguments)}function w(o){return p.apply(this,arguments)}function p(){return p=_()(m()().mark(function o(T){return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,f.request)("/api/app/image/tag-sync",{method:"POST",data:T}));case 1:case"end":return l.stop()}},o)})),p.apply(this,arguments)}},75458:function(L){(function(g,h){L.exports=h()})(self,()=>(()=>{"use strict";var g={345:(M,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.runAndSubscribe=_.forwardEvent=_.EventEmitter=void 0,_.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=f=>(this._listeners.push(f),{dispose:()=>{if(!this._disposed){for(let u=0;u<this._listeners.length;u++)if(this._listeners[u]===f)return void this._listeners.splice(u,1)}}})),this._event}fire(f,u){const b=[];for(let S=0;S<this._listeners.length;S++)b.push(this._listeners[S]);for(let S=0;S<b.length;S++)b[S].call(void 0,f,u)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},_.forwardEvent=function(f,u){return f(b=>u.fire(b))},_.runAndSubscribe=function(f,u){return u(void 0),f(b=>u(b))}},859:(M,_)=>{function f(u){for(const b of u)b.dispose();u.length=0}Object.defineProperty(_,"__esModule",{value:!0}),_.getDisposeArrayDisposable=_.disposeArray=_.toDisposable=_.MutableDisposable=_.Disposable=void 0,_.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const u of this._disposables)u.dispose();this._disposables.length=0}register(u){return this._disposables.push(u),u}unregister(u){const b=this._disposables.indexOf(u);b!==-1&&this._disposables.splice(b,1)}},_.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(u){var b;this._isDisposed||u===this._value||((b=this._value)==null||b.dispose(),this._value=u)}clear(){this.value=void 0}dispose(){var u;this._isDisposed=!0,(u=this._value)==null||u.dispose(),this._value=void 0}},_.toDisposable=function(u){return{dispose:u}},_.disposeArray=f,_.getDisposeArrayDisposable=function(u){return{dispose:()=>f(u)}}}},h={};function P(M){var _=h[M];if(_!==void 0)return _.exports;var f=h[M]={exports:{}};return g[M](f,f.exports,P),f.exports}var m={};return(()=>{var M=m;Object.defineProperty(M,"__esModule",{value:!0}),M.SearchAddon=void 0;const _=P(345),f=P(859),u=" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?";class b extends f.Disposable{constructor(e){var t;super(),this._highlightedLines=new Set,this._highlightDecorations=[],this._selectedDecoration=this.register(new f.MutableDisposable),this._linesCacheTimeoutId=0,this._linesCacheDisposables=new f.MutableDisposable,this._onDidChangeResults=this.register(new _.EventEmitter),this.onDidChangeResults=this._onDidChangeResults.event,this._highlightLimit=(t=e==null?void 0:e.highlightLimit)!=null?t:1e3}activate(e){this._terminal=e,this.register(this._terminal.onWriteParsed(()=>this._updateMatches())),this.register(this._terminal.onResize(()=>this._updateMatches())),this.register((0,f.toDisposable)(()=>this.clearDecorations()))}_updateMatches(){var e;this._highlightTimeout&&window.clearTimeout(this._highlightTimeout),this._cachedSearchTerm&&((e=this._lastSearchOptions)!=null&&e.decorations)&&(this._highlightTimeout=setTimeout(()=>{const t=this._cachedSearchTerm;this._cachedSearchTerm=void 0,this.findPrevious(t,B(W({},this._lastSearchOptions),{incremental:!0,noScroll:!0}))},200))}clearDecorations(e){this._selectedDecoration.clear(),(0,f.disposeArray)(this._highlightDecorations),this._highlightDecorations=[],this._highlightedLines.clear(),e||(this._cachedSearchTerm=void 0)}clearActiveDecoration(){this._selectedDecoration.clear()}findNext(e,t){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");const n=!this._lastSearchOptions||this._didOptionsChange(this._lastSearchOptions,t);this._lastSearchOptions=t,t!=null&&t.decorations&&(this._cachedSearchTerm===void 0||e!==this._cachedSearchTerm||n)&&this._highlightAllMatches(e,t);const i=this._findNextAndSelect(e,t);return this._fireResults(t),this._cachedSearchTerm=e,i}_highlightAllMatches(e,t){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!e||e.length===0)return void this.clearDecorations();t=t||{},this.clearDecorations(!0);const n=[];let i,s=this._find(e,0,0,t);for(;s&&((i==null?void 0:i.row)!==s.row||(i==null?void 0:i.col)!==s.col)&&!(n.length>=this._highlightLimit);)i=s,n.push(i),s=this._find(e,i.col+i.term.length>=this._terminal.cols?i.row+1:i.row,i.col+i.term.length>=this._terminal.cols?0:i.col+1,t);for(const r of n){const a=this._createResultDecoration(r,t.decorations);a&&(this._highlightedLines.add(a.marker.line),this._highlightDecorations.push({decoration:a,match:r,dispose(){a.dispose()}}))}}_find(e,t,n,i){var a;if(!this._terminal||!e||e.length===0)return(a=this._terminal)==null||a.clearSelection(),void this.clearDecorations();if(n>this._terminal.cols)throw new Error(`Invalid col: ${n} to search in terminal of ${this._terminal.cols} cols`);let s;this._initLinesCache();const r={startRow:t,startCol:n};if(s=this._findInLine(e,r,i),!s)for(let c=t+1;c<this._terminal.buffer.active.baseY+this._terminal.rows&&(r.startRow=c,r.startCol=0,s=this._findInLine(e,r,i),!s);c++);return s}_findNextAndSelect(e,t){var c;if(!this._terminal||!e||e.length===0)return(c=this._terminal)==null||c.clearSelection(),this.clearDecorations(),!1;const n=this._terminal.getSelectionPosition();this._terminal.clearSelection();let i=0,s=0;n&&(this._cachedSearchTerm===e?(i=n.end.x,s=n.end.y):(i=n.start.x,s=n.start.y)),this._initLinesCache();const r={startRow:s,startCol:i};let a=this._findInLine(e,r,t);if(!a)for(let d=s+1;d<this._terminal.buffer.active.baseY+this._terminal.rows&&(r.startRow=d,r.startCol=0,a=this._findInLine(e,r,t),!a);d++);if(!a&&s!==0)for(let d=0;d<s&&(r.startRow=d,r.startCol=0,a=this._findInLine(e,r,t),!a);d++);return!a&&n&&(r.startRow=n.start.y,r.startCol=0,a=this._findInLine(e,r,t)),this._selectResult(a,t==null?void 0:t.decorations,t==null?void 0:t.noScroll)}findPrevious(e,t){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");const n=!this._lastSearchOptions||this._didOptionsChange(this._lastSearchOptions,t);this._lastSearchOptions=t,t!=null&&t.decorations&&(this._cachedSearchTerm===void 0||e!==this._cachedSearchTerm||n)&&this._highlightAllMatches(e,t);const i=this._findPreviousAndSelect(e,t);return this._fireResults(t),this._cachedSearchTerm=e,i}_didOptionsChange(e,t){return!!t&&(e.caseSensitive!==t.caseSensitive||e.regex!==t.regex||e.wholeWord!==t.wholeWord)}_fireResults(e){if(e!=null&&e.decorations){let t=-1;if(this._selectedDecoration.value){const n=this._selectedDecoration.value.match;for(let i=0;i<this._highlightDecorations.length;i++){const s=this._highlightDecorations[i].match;if(s.row===n.row&&s.col===n.col&&s.size===n.size){t=i;break}}}this._onDidChangeResults.fire({resultIndex:t,resultCount:this._highlightDecorations.length})}}_findPreviousAndSelect(e,t){var d;if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!this._terminal||!e||e.length===0)return(d=this._terminal)==null||d.clearSelection(),this.clearDecorations(),!1;const n=this._terminal.getSelectionPosition();this._terminal.clearSelection();let i=this._terminal.buffer.active.baseY+this._terminal.rows-1,s=this._terminal.cols;const r=!0;this._initLinesCache();const a={startRow:i,startCol:s};let c;if(n&&(a.startRow=i=n.start.y,a.startCol=s=n.start.x,this._cachedSearchTerm!==e&&(c=this._findInLine(e,a,t,!1),c||(a.startRow=i=n.end.y,a.startCol=s=n.end.x))),c||(c=this._findInLine(e,a,t,r)),!c){a.startCol=Math.max(a.startCol,this._terminal.cols);for(let C=i-1;C>=0&&(a.startRow=C,c=this._findInLine(e,a,t,r),!c);C--);}if(!c&&i!==this._terminal.buffer.active.baseY+this._terminal.rows-1)for(let C=this._terminal.buffer.active.baseY+this._terminal.rows-1;C>=i&&(a.startRow=C,c=this._findInLine(e,a,t,r),!c);C--);return this._selectResult(c,t==null?void 0:t.decorations,t==null?void 0:t.noScroll)}_initLinesCache(){const e=this._terminal;this._linesCache||(this._linesCache=new Array(e.buffer.active.length),this._linesCacheDisposables.value=(0,f.getDisposeArrayDisposable)([e.onLineFeed(()=>this._destroyLinesCache()),e.onCursorMove(()=>this._destroyLinesCache()),e.onResize(()=>this._destroyLinesCache())])),window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=window.setTimeout(()=>this._destroyLinesCache(),15e3)}_destroyLinesCache(){this._linesCache=void 0,this._linesCacheDisposables.clear(),this._linesCacheTimeoutId&&(window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=0)}_isWholeWord(e,t,n){return(e===0||u.includes(t[e-1]))&&(e+n.length===t.length||u.includes(t[e+n.length]))}_findInLine(e,t,n={},i=!1){var w;const s=this._terminal,r=t.startRow,a=t.startCol,c=s.buffer.active.getLine(r);if(c!=null&&c.isWrapped)return i?void(t.startCol+=s.cols):(t.startRow--,t.startCol+=s.cols,this._findInLine(e,t,n));let d=(w=this._linesCache)==null?void 0:w[r];d||(d=this._translateBufferLineToStringWithWrap(r,!0),this._linesCache&&(this._linesCache[r]=d));const[C,E]=d,R=this._bufferColsToStringOffset(r,a),y=n.caseSensitive?e:e.toLowerCase(),O=n.caseSensitive?C:C.toLowerCase();let v=-1;if(n.regex){const p=RegExp(y,"g");let o;if(i)for(;o=p.exec(O.slice(0,R));)v=p.lastIndex-o[0].length,e=o[0],p.lastIndex-=e.length-1;else o=p.exec(O.slice(R)),o&&o[0].length>0&&(v=R+(p.lastIndex-o[0].length),e=o[0])}else i?R-y.length>=0&&(v=O.lastIndexOf(y,R-y.length)):v=O.indexOf(y,R);if(v>=0){if(n.wholeWord&&!this._isWholeWord(v,O,e))return;let p=0;for(;p<E.length-1&&v>=E[p+1];)p++;let o=p;for(;o<E.length-1&&v+e.length>=E[o+1];)o++;const T=v-E[p],D=v+e.length-E[o],l=this._stringLengthToBufferSize(r+p,T);return{term:e,col:l,row:r+p,size:this._stringLengthToBufferSize(r+o,D)-l+s.cols*(o-p)}}}_stringLengthToBufferSize(e,t){const n=this._terminal.buffer.active.getLine(e);if(!n)return 0;for(let i=0;i<t;i++){const s=n.getCell(i);if(!s)break;const r=s.getChars();r.length>1&&(t-=r.length-1);const a=n.getCell(i+1);a&&a.getWidth()===0&&t++}return t}_bufferColsToStringOffset(e,t){const n=this._terminal;let i=e,s=0,r=n.buffer.active.getLine(i);for(;t>0&&r;){for(let a=0;a<t&&a<n.cols;a++){const c=r.getCell(a);if(!c)break;c.getWidth()&&(s+=c.getCode()===0?1:c.getChars().length)}if(i++,r=n.buffer.active.getLine(i),r&&!r.isWrapped)break;t-=n.cols}return s}_translateBufferLineToStringWithWrap(e,t){var a;const n=this._terminal,i=[],s=[0];let r=n.buffer.active.getLine(e);for(;r;){const c=n.buffer.active.getLine(e+1),d=!!c&&c.isWrapped;let C=r.translateToString(!d&&t);if(d&&c){const E=r.getCell(r.length-1);E&&E.getCode()===0&&E.getWidth()===1&&((a=c.getCell(0))==null?void 0:a.getWidth())===2&&(C=C.slice(0,-1))}if(i.push(C),!d)break;s.push(s[s.length-1]+C.length),e++,r=c}return[i.join(""),s]}_selectResult(e,t,n){const i=this._terminal;if(this._selectedDecoration.clear(),!e)return i.clearSelection(),!1;if(i.select(e.col,e.row,e.size),t){const s=i.registerMarker(-i.buffer.active.baseY-i.buffer.active.cursorY+e.row);if(s){const r=i.registerDecoration({marker:s,x:e.col,width:e.size,backgroundColor:t.activeMatchBackground,layer:"top",overviewRulerOptions:{color:t.activeMatchColorOverviewRuler}});if(r){const a=[];a.push(s),a.push(r.onRender(c=>this._applyStyles(c,t.activeMatchBorder,!0))),a.push(r.onDispose(()=>(0,f.disposeArray)(a))),this._selectedDecoration.value={decoration:r,match:e,dispose(){r.dispose()}}}}}if(!n&&(e.row>=i.buffer.active.viewportY+i.rows||e.row<i.buffer.active.viewportY)){let s=e.row-i.buffer.active.viewportY;s-=Math.floor(i.rows/2),i.scrollLines(s)}return!0}_applyStyles(e,t,n){e.classList.contains("xterm-find-result-decoration")||(e.classList.add("xterm-find-result-decoration"),t&&(e.style.outline=`1px solid ${t}`)),n&&e.classList.add("xterm-find-active-result-decoration")}_createResultDecoration(e,t){const n=this._terminal,i=n.registerMarker(-n.buffer.active.baseY-n.buffer.active.cursorY+e.row);if(!i)return;const s=n.registerDecoration({marker:i,x:e.col,width:e.size,backgroundColor:t.matchBackground,overviewRulerOptions:this._highlightedLines.has(i.line)?void 0:{color:t.matchOverviewRuler,position:"center"}});if(s){const r=[];r.push(i),r.push(s.onRender(a=>this._applyStyles(a,t.matchBorder,!1))),r.push(s.onDispose(()=>(0,f.disposeArray)(r)))}return s}}M.SearchAddon=b})(),m})())}}]);
}());