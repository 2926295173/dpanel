"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9363],{28307:function(W,b,e){var M=e(15009),n=e.n(M),y=e(99289),i=e.n(y),o=e(5574),j=e.n(o),t=e(38345),a=e(97269),h=e(62370),_=e(5966),g=e(64317),v=e(28036),f=e(85265),m=e(42075),p=e(67294),E=e(3393),u=e(97961),C=e(92754),P=e(82346),c=e(96042),d=e(85893),S=(0,p.forwardRef)(function(U,w){var A=(0,p.useState)(!1),s=j()(A,2),D=s[0],l=s[1],r=(0,p.useRef)(),F=(0,p.useRef)(),z=(0,p.useState)(!1),Z=j()(z,2),x=Z[0],G=Z[1];return(0,p.useImperativeHandle)(w,function(){return{upgradeImage:function(T){var O;return l(!0),(O=r.current)===null||O===void 0||O.setFieldValue("imageUrl",T),(0,E.Gb)({tag:T,type:"pull"})},setImageName:function(T){var O;l(!0),(O=r.current)===null||O===void 0||O.setFieldValue("imageUrl",T)}}}),[(0,d.jsx)(v.ZP,{type:U.buttonType?U.buttonType:"default",onClick:function(){var T,O;U.onClick&&U.onClick(),l(!0),(T=r.current)===null||T===void 0||T.resetFields(),(O=F.current)===null||O===void 0||O.setStart("")},children:"\u62C9\u53D6\u955C\u50CF"},"remoteBtn"),(0,d.jsxs)(f.Z,{forceRender:!0,open:D,title:"\u62C9\u53D6\u8FDC\u7A0B\u955C\u50CF",width:800,onClose:function(){return l(!1)},footer:!1,children:[(0,d.jsx)(t.Z,{children:(0,d.jsxs)(m.Z,{direction:"vertical",size:"middle",children:[(0,d.jsxs)("div",{children:["1\u3001\u955C\u50CF\u540D\u79F0\u4E2D\u4E0D\u5305\u542B\u4ED3\u5E93\u5730\u5740\u65F6\uFF0C \u9ED8\u8BA4\u4ECE ",(0,d.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:"docker hub"})," \u4E2D\u4E0B\u8F7D\uFF0C \u4F60\u53EF\u4EE5\u5728\u4E0A\u9762",(0,d.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:"\u3010\u67E5\u627E\u3011"}),"\u9700\u8981\u7684\u955C\u50CF"]}),(0,d.jsxs)("div",{children:["2\u3001\u955C\u50CF\u4E2D\u5305\u542B\u4ED3\u5E93\u5730\u5740\u65F6\uFF0C\u8BF7\u786E",(0,d.jsx)(P.Link,{to:"/image/registry",children:"\u3010\u6DFB\u52A0\u3011"}),"\u8FC7\u8BE5\u4ED3\u5E93\uFF0C\u5E76\u6709 Pull \u6743\u9650"]}),(0,d.jsxs)("div",{children:["3\u3001\u53EF\u5728",(0,d.jsx)(P.Link,{to:"/image/registry",children:"\u3010\u4ED3\u5E93\u7BA1\u7406\u3011"}),"\u4E2D\u914D\u7F6E\u955C\u50CF\u7684\u52A0\u901F\u5730\u5740"]})]})}),(0,d.jsx)(t.Z,{title:"\u62C9\u53D6\u955C\u50CF",headerBordered:!0,children:(0,d.jsxs)(a.A,{formRef:r,submitter:!1,isKeyPressSubmit:!0,onFinish:function(){var R=i()(n()().mark(function T(O){var B,K,k,$,L,H;return n()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return L=(B=O.imageUrl)!==null&&B!==void 0?B:"",O.registry&&(L=O.registry.serverAddress+"/"+L),G(!0),(K=F.current)===null||K===void 0||K.setStart(L),I.next=6,(0,E.Gb)({tag:L,type:"pull",platform:(k=O.platform)!==null&&k!==void 0?k:""}).finally(function(){G(!1)});case 6:return H=I.sent,($=F.current)===null||$===void 0||$.setFinish(),l(!1),U.onFinish&&U.onFinish(H.data.tag),I.abrupt("return",!0);case 11:case"end":return I.stop()}},T)}));return function(T){return R.apply(this,arguments)}}(),children:[(0,d.jsxs)(m.Z.Compact,{children:[(0,d.jsx)(h.Z,{name:"registry",children:(0,d.jsx)(c.Z,{width:"150px"})}),(0,d.jsx)(_.Z,{disabled:x,width:300,name:"imageUrl",placeholder:"\u8BF7\u8F93\u5165\u955C\u50CF\u5730\u5740",required:!0,rules:[{required:!0}]}),(0,d.jsx)(g.Z,{name:"platform",style:{width:150},placeholder:"\u9ED8\u8BA4\u5F53\u524D\u67B6\u6784",options:u.ii.map(function(R){return{label:R.name,value:R.name}})}),(0,d.jsx)(v.ZP,{loading:x,onClick:i()(n()().mark(function R(){var T;return n()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:(T=r.current)===null||T===void 0||T.submit();case 1:case"end":return B.stop()}},R)})),children:"\u62C9\u53D6\u955C\u50CF"})]}),(0,d.jsx)(h.Z,{label:"\u62C9\u53D6\u8FDB\u5EA6",children:(0,d.jsx)(C.Z,{ref:F})})]})})]},"remoteDrawer")]});b.Z=S},96042:function(W,b,e){e.d(b,{Z:function(){return h}});var M=e(97857),n=e.n(M),y=e(5574),i=e.n(y),o=e(75870),j=e(34041),t=e(67294),a=e(85893);function h(_){var g=(0,t.useState)([]),v=i()(g,2),f=v[0],m=v[1];(0,t.useEffect)(function(){(0,o.Ot)().then(function(E){E&&m(E.data.list)})},[]);var p={};return _.multiple&&(p.mode="multiple"),_.top&&(p.placement="topLeft"),(0,a.jsx)(j.Z,n()({popupMatchSelectWidth:!_.width,style:_.width?{width:_.width}:{},onChange:function(u){if(Array.isArray(u)){var C=u.map(function(P){return f[P]});_.onChangeList&&_.onChangeList(C)}else _.onChange&&_.onChange(f[u])},placeholder:"\u9009\u62E9\u955C\u50CF\u4ED3\u5E93\uFF0C\u9ED8\u8BA4\u4E3A\u5F53\u524D\u4ED3\u5E93",options:f.map(function(E,u){return{value:u,label:E.title+"("+E.serverAddress+")"}}),allowClear:!0},p))}},24963:function(W,b,e){var M=e(67294),n=(0,M.createContext)({});b.Z=n},97961:function(W,b,e){e.d(b,{GH:function(){return g},MF:function(){return p},_2:function(){return f},fN:function(){return t},ii:function(){return j},vC:function(){return h}});var M=e(15009),n=e.n(M),y=e(99289),i=e.n(y),o=e(82346),j=[{name:"linux/amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"linux/arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"linux/i386",arch:"386",search:[]},{name:"linux/arm/v6",arch:"arm",search:[]},{name:"linux/arm/v7",arch:"arm",search:[]},{name:"linux/arm/v8",arch:"arm64",search:[]},{name:"linux/ppc64le",arch:"ppc64le",search:[]},{name:"linux/riscv64",arch:"riscv64",search:[]}];function t(u){return a.apply(this,arguments)}function a(){return a=i()(n()().mark(function u(C){return n()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,o.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:C}));case 1:case"end":return c.stop()}},u)})),a.apply(this,arguments)}function h(u){return _.apply(this,arguments)}function _(){return _=i()(n()().mark(function u(C){return n()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,o.request)("/api/app/image/import-by-container-tar",{method:"POST",data:C}));case 1:case"end":return c.stop()}},u)})),_.apply(this,arguments)}function g(u){return v.apply(this,arguments)}function v(){return v=i()(n()().mark(function u(C){return n()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,o.request)("/api/app/image/import-by-image-tar",{method:"POST",data:C}));case 1:case"end":return c.stop()}},u)})),v.apply(this,arguments)}function f(u){return m.apply(this,arguments)}function m(){return m=i()(n()().mark(function u(C){return n()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,o.request)("/api/common/attach/delete",{method:"POST",data:C});case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},u)})),m.apply(this,arguments)}function p(){return E.apply(this,arguments)}function E(){return E=i()(n()().mark(function u(){return n()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,o.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return P.stop()}},u)})),E.apply(this,arguments)}},18148:function(W,b,e){e.d(b,{$q:function(){return m},Fj:function(){return S},KG:function(){return j},KX:function(){return w},T8:function(){return v},Xn:function(){return _},ao:function(){return E},c5:function(){return c},c7:function(){return C}});var M=e(15009),n=e.n(M),y=e(99289),i=e.n(y),o=e(82346);function j(s){return t.apply(this,arguments)}function t(){return t=i()(n()().mark(function s(D){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.request)("/api/app/image/get-list",{method:"POST",data:D}));case 1:case"end":return r.stop()}},s)})),t.apply(this,arguments)}function a(s){return h.apply(this,arguments)}function h(){return h=_asyncToGenerator(_regeneratorRuntime().mark(function s(D){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,request("/api/app/log/image-build",{method:"POST",data:D});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},s)})),h.apply(this,arguments)}function _(s){return g.apply(this,arguments)}function g(){return g=i()(n()().mark(function s(D){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.request)("/api/app/image/get-list-build",{method:"POST",data:D}));case 1:case"end":return r.stop()}},s)})),g.apply(this,arguments)}function v(s){return f.apply(this,arguments)}function f(){return f=i()(n()().mark(function s(D){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,o.request)("/api/app/image/get-build-task",{method:"POST",data:D});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},s)})),f.apply(this,arguments)}function m(s){return p.apply(this,arguments)}function p(){return p=i()(n()().mark(function s(D){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,o.request)("/api/app/image/delete-build-task",{method:"POST",data:D});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},s)})),p.apply(this,arguments)}function E(s){return u.apply(this,arguments)}function u(){return u=i()(n()().mark(function s(D){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,o.request)("/api/app/image/image-delete",{method:"POST",data:D});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},s)})),u.apply(this,arguments)}function C(){return P.apply(this,arguments)}function P(){return P=i()(n()().mark(function s(){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,o.request)("/api/app/image/image-prune",{method:"POST"});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},s)})),P.apply(this,arguments)}function c(){return d.apply(this,arguments)}function d(){return d=i()(n()().mark(function s(){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,o.request)("/api/app/image/build-prune",{method:"POST"});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},s)})),d.apply(this,arguments)}function S(s){return U.apply(this,arguments)}function U(){return U=i()(n()().mark(function s(D){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,o.request)("/api/app/image/update-title",{method:"POST",data:D});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},s)})),U.apply(this,arguments)}function w(s){return A.apply(this,arguments)}function A(){return A=i()(n()().mark(function s(D){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,o.request)("/api/app/image/tag-sync",{method:"POST",data:D}));case 1:case"end":return r.stop()}},s)})),A.apply(this,arguments)}},75870:function(W,b,e){e.d(b,{Ot:function(){return j},ZH:function(){return a},ix:function(){return _},t1:function(){return v}});var M=e(15009),n=e.n(M),y=e(99289),i=e.n(y),o=e(82346);function j(m){return t.apply(this,arguments)}function t(){return t=i()(n()().mark(function m(p){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,o.request)("/api/common/registry/get-list",{method:"POST",data:p}));case 1:case"end":return u.stop()}},m)})),t.apply(this,arguments)}function a(m){return h.apply(this,arguments)}function h(){return h=i()(n()().mark(function m(p){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,o.request)("/api/common/registry/create",{method:"POST",data:p}));case 1:case"end":return u.stop()}},m)})),h.apply(this,arguments)}function _(m){return g.apply(this,arguments)}function g(){return g=i()(n()().mark(function m(p){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,o.request)("/api/common/registry/delete",{method:"POST",data:p}));case 1:case"end":return u.stop()}},m)})),g.apply(this,arguments)}function v(m){return f.apply(this,arguments)}function f(){return f=i()(n()().mark(function m(p){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,o.request)("/api/common/registry/get-detail",{method:"POST",data:p}));case 1:case"end":return u.stop()}},m)})),f.apply(this,arguments)}},5251:function(W,b,e){e.d(b,{FI:function(){return n},NF:function(){return i},ZM:function(){return y},fi:function(){return o}});function M(t){return t.trim()}function n(t){var a="";t<.1*1024?a=t.toFixed(2)+"B":t<.1*1024*1024?a=(t/1024).toFixed(2)+"KB":t<1*1024*1024*1024?a=(t/(1024*1024)).toFixed(2)+"MB":a=(t/(1024*1024*1024)).toFixed(2)+"GB";var h=a+"",_=h.indexOf("."),g=h.substring(_+1,_+3);return g=="00"?h.substring(0,_)+h.substr(_+3,2):a}function y(t){if(t){var a=new Date(t),h=a.getFullYear()+"-",_=(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-",g=(a.getDate()<10?"0"+a.getDate():a.getDate())+" ",v=(a.getHours()<10?"0"+a.getHours():a.getHours())+":",f=(a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes())+":",m=a.getSeconds()<10?"0"+a.getSeconds():a.getSeconds();return h+_+g+v+f+m}}function i(t){if(!t||t=="")return"-";var a=new Date(t),h=a.getUTCFullYear(),_=String(a.getUTCMonth()+1).padStart(2,"0"),g=String(a.getUTCDate()).padStart(2,"0"),v=String(a.getUTCHours()).padStart(2,"0"),f=String(a.getUTCMinutes()).padStart(2,"0"),m=String(a.getUTCSeconds()).padStart(2,"0");return"".concat(h,"-").concat(_,"-").concat(g," ").concat(v,":").concat(f,":").concat(m)}function o(t,a){if(!t||t.length===0)return"";if(a.length===0)return t;for(;t.startsWith(a);)t=t.slice(a.length);return t}function j(t,a){if(!t||t.length===0)return"";if(a.length===0)return t;for(;t.endsWith(a);)t=t.slice(0,t.length-a.length);return t}}}]);
