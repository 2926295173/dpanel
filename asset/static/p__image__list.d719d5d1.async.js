"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4214],{80821:function(K,P,e){e.d(P,{Z:function(){return p}});var R=e(5574),s=e.n(R),D=e(24963),d=e(86738),v=e(14726),C=e(83062),M=e(67294),A=e(85893);function p(r){var j=(0,M.useState)(!1),T=s()(j,2),O=T[0],i=T[1],o=(0,M.useContext)(D.Z),c=o.lang,u=o.notice,L=o.message,U=function(){i(!0),r.action().then(function(y){if(i(!1),typeof r.onSuccess=="function"&&r.onSuccess(y),r.messageSuccess){var x="";typeof r.messageSuccess=="function"?x=r.messageSuccess(y):x=r.messageSuccess,x.indexOf(".")>-1&&(x=c(x)),r.asynced?L.info(x):L.success(x)}}).catch(function(y){i(!1),typeof r.onError=="function"&&r.onError(y)})};return r.confirm?(0,A.jsx)(d.Z,{style:{width:500},title:r.confirmTitle?r.confirmTitle:c("notification.title.tip"),description:r.confirm,onConfirm:U,okText:"Yes",cancelText:"No",children:(0,A.jsx)(v.ZP,{disabled:r.disabled,icon:r.icon,loading:O,danger:r.danger,type:r.type,children:r.children})}):(0,A.jsx)(C.Z,{title:r.tips,children:(0,A.jsx)(v.ZP,{disabled:r.disabled,icon:r.icon,loading:O,onClick:U,danger:r.danger,type:r.type,children:r.children})})}},96042:function(K,P,e){e.d(P,{Z:function(){return p}});var R=e(97857),s=e.n(R),D=e(5574),d=e.n(D),v=e(75870),C=e(34041),M=e(67294),A=e(85893);function p(r){var j=(0,M.useState)([]),T=d()(j,2),O=T[0],i=T[1];(0,M.useEffect)(function(){(0,v.Ot)().then(function(c){c&&i(c.data.list)})},[]);var o={};return r.multiple&&(o.mode="multiple"),r.top&&(o.placement="topLeft"),(0,A.jsx)(C.Z,s()({onChange:function(u){if(r.multiple){var L=u.map(function(U){return O[U]});r.onChangeList&&r.onChangeList(L)}else r.onChange&&r.onChange(O[u])},placeholder:"\u9009\u62E9\u955C\u50CF\u4ED3\u5E93\uFF0C\u672C\u5730\u4F7F\u7528\u7559\u7A7A\u5373\u53EF",options:O.map(function(c,u){return{value:c.serverAddress,label:c.title+"("+c.serverAddress+")"}})},o))}},24963:function(K,P,e){var R=e(67294),s=(0,R.createContext)({});P.Z=s},88583:function(K,P,e){e.r(P),e.d(P,{default:function(){return ne}});var R=e(15009),s=e.n(R),D=e(99289),d=e.n(D),v=e(5574),C=e.n(v),M=e(90078),A=e(10641),p=e(37476),r=e(62370),j=e(5966),T=e(31418),O=e(14726),i=e(25593),o=e(42075),c=e(66309),u=e(96074),L=e(83062),U=e(72723),N=e(65233),y=e(84567),x=e(50136),b=e(67294),F=e(54006),S=e(18148),G=e(5251),V=e(80821),w=e(43425),k=e(95556),q=e(28307),ee=e(96042),J=e(67255),te=e(24963),n=e(85893);function ne(){var z=(0,b.useContext)(te.Z),re=z.message,ie=z.notice,oe=z.lang,h=(0,b.useRef)(),ae=(0,b.useState)({force:!1}),Y=C()(ae,2),ue=Y[0],_e=Y[1],de=T.Z.useApp(),se=(0,b.useState)(1),H=C()(se,2),X=H[0],le=H[1],Q=(0,b.useRef)();return(0,b.useEffect)(function(){var E;(E=h.current)===null||E===void 0||E.reload()},[X]),(0,n.jsx)(M._z,{header:{extra:[(0,n.jsx)(F.Link,{to:"/image/create",children:(0,n.jsx)(O.ZP,{type:"primary",children:"\u521B\u5EFA&\u5BFC\u5165\u955C\u50CF"},"create")}),(0,n.jsx)(q.Z,{onFinish:function(){var l,t;!((l=h.current)===null||l===void 0)&&l.reloadAndRest&&((t=h.current)===null||t===void 0||t.reloadAndRest())}},"remote")]},children:(0,n.jsx)(A.Z,{scroll:{x:"max-content"},rowKey:"Id",columns:[{title:"\u540D\u79F0",dataIndex:"title",render:function(l,t,f,g,a){var _=t.Id.substring(7,19);return t.Title&&(_=t.Title),(0,n.jsx)(i.Z.Text,{editable:{tooltip:"\u4FEE\u6539\u955C\u50CF\u5907\u6CE8\u540D\u79F0",onChange:function(){var m=d()(s()().mark(function W(Z){var I;return s()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,S.Fj)({tag:t.RepoTags[0],title:Z});case 2:I=$.sent,le(X+1),re.success("\u4FEE\u6539\u955C\u50CF\u540D\u79F0\u6210\u529F");case 5:case"end":return $.stop()}},W)}));function B(W){return m.apply(this,arguments)}return B}()},children:(0,n.jsx)(F.Link,{to:"/image/detail/"+t.Id,children:_},"edit")},"title-".concat(f))}},{title:"Tag",dataIndex:"tag",render:function(l,t,f,g){return(0,n.jsx)(o.Z,{direction:"vertical",style:{textAlign:"left"},children:t.RepoTags.map(function(a,_){return(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(c.Z,{color:"#2db7f5",children:(0,n.jsx)(i.Z.Text,{copyable:!0,style:{color:"#ffffff",maxWidth:"300px"},ellipsis:!0,title:a,children:a},_)},_),t.Containers>0&&(0,n.jsx)(c.Z,{color:"cyan",children:"\u4F7F\u7528\u4E2D"},"use-".concat(_))]},_)})},t.Id)}},{title:"\u67B6\u6784",width:80,render:function(l,t,f,g,a){if(t.Labels&&t.Labels["com.dpanel.image.arch"])return(0,n.jsx)(c.Z,{children:t.Labels["com.dpanel.image.arch"]},"arch"+t.Id)}},{title:"\u5C3A\u5BF8",dataIndex:"size",ellipsis:!0,width:"120px",search:!1,sorter:function(l,t){return parseFloat(l.Size)-parseFloat(t.Size)},render:function(l,t,f,g){return(0,n.jsx)("div",{children:(0,G.FI)(parseFloat(t.Size))},t.Id)}},{title:"\u521B\u5EFA\u65E5\u671F",dataIndex:"Created",ellipsis:!0,search:!1,width:"180px",render:function(l,t,f,g){return(0,n.jsx)("div",{children:(0,G.ZM)(t.Created*1e3)},t.Id)},sorter:function(l,t){return l.Created-t.Created}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:"150px",render:function(l,t,f,g){return(0,n.jsxs)(o.Z,{split:(0,n.jsx)(u.Z,{type:"vertical"}),children:[(0,n.jsx)(F.Link,{to:"/image/detail/"+t.Id,children:(0,n.jsx)(L.Z,{title:"\u7BA1\u7406",children:(0,n.jsx)(w.Z,{})})},"edit"),(0,n.jsx)(F.Link,{to:"/app/create/image?imageId="+t.RepoTags[0],children:(0,n.jsx)(L.Z,{title:"\u521B\u5EFA\u5BB9\u5668",children:(0,n.jsx)(k.Z,{})})},"create")]})}}],request:function(){var E=d()(s()().mark(function l(t,f,g){var a;return s()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,S.KG)({tag:t.tag,title:t.title});case 2:if(a=m.sent,!(!a||!a.data||!a.data.list)){m.next=5;break}return m.abrupt("return",{data:[],success:!0,total:0});case 5:return a.data.list.map(function(B){var W="";B.RepoTags.map(function(Z){a.data.title[Z]&&(W=a.data.title[Z])}),B.Title=W}),m.abrupt("return",{data:a.data.list,success:!0,total:a.data.list.length});case 7:case"end":return m.stop()}},l)}));return function(l,t,f){return E.apply(this,arguments)}}(),pagination:(0,J.O)(),search:{collapsed:!1},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},actionRef:h,tableAlertOptionRender:function(l){var t=l.selectedRowKeys,f=l.selectedRows;return(0,n.jsxs)(o.Z,{size:16,children:[(0,n.jsxs)(p.Y,{formRef:Q,title:"\u6279\u91CF\u63A8\u9001\u955C\u50CF",trigger:(0,n.jsx)(O.ZP,{children:"\u6279\u91CF\u63A8\u9001"}),onFinish:function(){var g=d()(s()().mark(function a(_){var m,B,W;return s()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,(0,S.KX)({md5:t,registryId:_.registryId,newNamespace:_.newNamespace});case 2:return W=I.sent,(m=h.current)===null||m===void 0||m.reload(),!((B=h.current)===null||B===void 0)&&B.clearSelected&&h.current.clearSelected(),I.abrupt("return",!0);case 6:case"end":return I.stop()}},a)}));return function(a){return g.apply(this,arguments)}}(),children:[(0,n.jsx)(U.Z.List,{name:"registryId",children:function(a){return a.map(function(_,m){return(0,n.jsx)(N.Z,{hidden:!0},m)})}}),(0,n.jsx)(r.Z,{label:"\u955C\u50CF\u4ED3\u5E93",name:"imageRespo",tooltip:(0,n.jsxs)(n.Fragment,{children:["\u63A8\u9001\u524D\u8BF7\u4FDD\u8BC1\u4ED3\u5E93\u4E2D\u6709\u6307\u5B9A\u7684\u547D\u540D\u7A7A\u95F4, \u5982\u6CA1\u6709\u8BF7\u5148 ",(0,n.jsx)("a",{href:"",target:"_blank",children:"\u6DFB\u52A0\u4ED3\u5E93"})]}),children:(0,n.jsx)(ee.Z,{multiple:!0,top:!0,onChangeList:function(a){var _;(_=Q.current)===null||_===void 0||_.setFieldValue("registryId",a.map(function(m){return m.id}))}})}),(0,n.jsx)(j.Z,{tooltip:"\u53EF\u4EE5\u901A\u8FC7\u6B64\u9879\u91CD\u65B0\u5B9A\u4E49\u547D\u540D\u7A7A\u95F4\uFF0Cdocker hub \u4E0D\u53D7\u8BE5\u914D\u7F6E\u7684\u5F71\u54CD\u3002 \u914D\u7F6E\u6B64\u9879\u540E mysql:latest \u4F1A\u63A8\u9001\u81F3 {\u547D\u540D\u7A7A\u95F4}/mysql:latest\uFF0C dpanel/dpanel:latest \u4F1A\u63A8\u9001\u81F3 {\u547D\u540D\u7A7A\u95F4}/dpanel:latest",label:"\u91CD\u5199\u975E\u5B98\u65B9\u4ED3\u5E93\u547D\u540D\u7A7A\u95F4",name:"newNamespace"})]}),(0,n.jsx)(V.Z,{danger:!0,type:"primary",action:function(){return(0,S.ao)({md5:t,force:ue.force})},onSuccess:function(){var a,_;return!((a=h.current)===null||a===void 0)&&a.reloadAndRest&&((_=h.current)===null||_===void 0||_.reloadAndRest()),!0},onError:function(){var a,_;return!((a=h.current)===null||a===void 0)&&a.reset&&((_=h.current)===null||_===void 0||_.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",confirm:(0,n.jsxs)(o.Z,{style:{width:280},direction:"vertical",children:[(0,n.jsx)(i.Z.Text,{children:"\u5220\u9664\u955C\u50CF\u540E\u65E0\u6CD5\u6062\u590D,\u786E\u8BA4\u5417\uFF1F"}),(0,n.jsx)(y.Z,{name:"deleteVolume",onChange:function(a){return _e({force:a.target.checked})},children:"\u5F3A\u5236\u5220\u9664\uFF1F"})]}),children:"\u6279\u91CF\u5220\u9664"})]})},tableExtraRender:function(){return(0,n.jsx)(x.Z,{mode:"horizontal",selectedKeys:["all"],items:[{label:(0,n.jsx)(F.Link,{to:"/image/list",replace:!0,children:"\u5168\u90E8\u955C\u50CF"}),key:"all"},{label:(0,n.jsx)(F.Link,{to:"/image/list/recycle",replace:!0,children:"\u6784\u5EFA\u4EFB\u52A1"}),key:"build"}]})},toolBarRender:function(){return[(0,n.jsx)(V.Z,{action:function(){return(0,S.c7)()},onSuccess:function(){var t,f;return!((t=h.current)===null||t===void 0)&&t.reloadAndRest&&((f=h.current)===null||f===void 0||f.reloadAndRest()),!0},onError:function(){var t,f;return!((t=h.current)===null||t===void 0)&&t.reset&&((f=h.current)===null||f===void 0||f.reset()),!0},messageSuccess:"\u6E05\u9664\u6210\u529F",confirm:"\u662F\u5426\u6E05\u7406\u672A\u4F7F\u7528\u6216\u662F\u672A\u8FD0\u884C\u7684\u955C\u50CF",children:"\u6E05\u7406\u672A\u4F7F\u7528\u955C\u50CF"})]},columnsState:(0,J.j)("image-list")})})}},75870:function(K,P,e){e.d(P,{Ot:function(){return C},ZH:function(){return A},ix:function(){return r},t1:function(){return T}});var R=e(15009),s=e.n(R),D=e(99289),d=e.n(D),v=e(54006);function C(i){return M.apply(this,arguments)}function M(){return M=d()(s()().mark(function i(o){return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,v.request)("/api/common/registry/get-list",{method:"POST",data:o}));case 1:case"end":return u.stop()}},i)})),M.apply(this,arguments)}function A(i){return p.apply(this,arguments)}function p(){return p=d()(s()().mark(function i(o){return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,v.request)("/api/common/registry/create",{method:"POST",data:o}));case 1:case"end":return u.stop()}},i)})),p.apply(this,arguments)}function r(i){return j.apply(this,arguments)}function j(){return j=d()(s()().mark(function i(o){return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,v.request)("/api/common/registry/delete",{method:"POST",data:o}));case 1:case"end":return u.stop()}},i)})),j.apply(this,arguments)}function T(i){return O.apply(this,arguments)}function O(){return O=d()(s()().mark(function i(o){return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,v.request)("/api/common/registry/get-detail",{method:"POST",data:o}));case 1:case"end":return u.stop()}},i)})),O.apply(this,arguments)}},67255:function(K,P,e){e.d(P,{O:function(){return R},j:function(){return s}});function R(){var D,d=parseInt((D=localStorage.getItem("dpanel-pagesize"))!==null&&D!==void 0?D:"0");return{showSizeChanger:!0,defaultPageSize:d!=null?d:20}}function s(D){var d="dpanel-table-column-".concat(D),v={};if(localStorage.getItem(d)){var C;v=JSON.parse((C=localStorage.getItem(d))!==null&&C!==void 0?C:"{}")}return{defaultValue:v,onChange:function(A){localStorage.setItem("dpanel-table-column-".concat(D),JSON.stringify(A))}}}}}]);
