"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5050],{80821:function(j,v,t){t.d(v,{Z:function(){return x}});var P=t(5574),l=t.n(P),u=t(24963),d=t(86738),g=t(28036),f=t(83062),_=t(67294),c=t(85893);function x(e){var R=(0,_.useState)(!1),C=l()(R,2),h=C[0],E=C[1],o=(0,_.useContext)(u.Z),y=o.lang,i=o.notice,r=o.message,a=function(){E(!0);var S=e.action();S instanceof Promise?S.then(function(m){if(E(!1),m){typeof e.onSuccess=="function"&&e.onSuccess(m);var s="";e.messageSuccess?typeof e.messageSuccess=="function"?s=e.messageSuccess(m):s=e.messageSuccess.indexOf("notification.")==0?y(e.messageSuccess):e.messageSuccess:s=y("notification.finish"),e.asynced?r.info(s):r.success(s)}}).catch(function(m){E(!1),typeof e.onError=="function"&&e.onError(m)}):E(!1)};return e.confirm?(0,c.jsx)(d.Z,{style:{width:500},title:e.confirmTitle?e.confirmTitle:y("notification.title.tip"),description:typeof e.confirm=="string"&&e.confirm.indexOf("notification.")==0?y(e.confirm):e.confirm,onConfirm:a,okText:"Yes",cancelText:"No",onOpenChange:e.confirmOnOpenChange,children:(0,c.jsx)(g.ZP,{block:e.block,disabled:e.disabled,icon:!e.children&&h?void 0:e.icon,loading:h,danger:e.danger,type:e.type,children:e.children})}):(0,c.jsx)(f.Z,{title:e.tips,children:(0,c.jsx)(g.ZP,{block:e.block,style:e.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:e.disabled,icon:!e.children&&h?void 0:e.icon,loading:h,onClick:a,danger:e.danger,type:e.type,children:e.children})})}},85827:function(j,v,t){t.r(v),t.d(v,{default:function(){return y}});var P=t(15009),l=t.n(P),u=t(99289),d=t.n(u),g=t(80821),f=t(82346);function _(i){return c.apply(this,arguments)}function c(){return c=d()(l()().mark(function i(r){return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,f.request)("/api/common/event/get-list",{method:"POST",data:r}));case 1:case"end":return n.stop()}},i)})),c.apply(this,arguments)}function x(i){return e.apply(this,arguments)}function e(){return e=d()(l()().mark(function i(r){return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,f.request)("/api/common/event/prune",{method:"POST",data:r}));case 1:case"end":return n.stop()}},i)})),e.apply(this,arguments)}var R=t(67255),C=t(90078),h=t(41482),E=t(67294),o=t(85893);function y(){var i=(0,E.useRef)();return(0,o.jsx)(C._z,{header:{extra:[(0,o.jsx)(g.Z,{action:function(){return x()},onSuccess:function(){var a,n;return!((a=i.current)===null||a===void 0)&&a.reloadAndRest&&((n=i.current)===null||n===void 0||n.reloadAndRest()),!0},onError:function(){var a,n;return!((a=i.current)===null||a===void 0)&&a.reset&&((n=i.current)===null||n===void 0||n.reset()),!0},confirm:"notification.confirm.title",danger:!0,type:"primary",children:"\u6E05\u9664\u6240\u6709\u4E8B\u4EF6"})]},children:(0,o.jsx)(h.Z,{scroll:{x:"max-content"},columns:[{title:"\u7C7B\u578B",ellipsis:!0,dataIndex:"type",width:200},{title:"\u8BE6\u60C5",search:!1,render:function(a,n,S,m){return(0,o.jsxs)(o.Fragment,{children:[n.action," ",n.message]})}},{title:"\u65F6\u95F4",ellipsis:!0,search:!1,dataIndex:"createdAt",width:200,render:function(a,n,S,m,s){return new Date(n.createdAt).toLocaleString()}}],rowKey:"id",request:function(){var r=d()(l()().mark(function a(n,S,m){var s,T,D;return l()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,_({page:(s=n.current)!==null&&s!==void 0?s:1,pageSize:(T=n.pageSize)!==null&&T!==void 0?T:10,type:n.type});case 2:return D=O.sent,O.abrupt("return",{data:D.data.list,success:!0,total:D.data.total});case 4:case"end":return O.stop()}},a)}));return function(a,n,S){return r.apply(this,arguments)}}(),pagination:(0,R.O)(),actionRef:i})})}},67255:function(j,v,t){t.d(v,{O:function(){return P},j:function(){return l}});function P(){var u=localStorage.getItem("dpanel-pagesize");return u=="all"?!1:{showSizeChanger:!0,defaultPageSize:parseInt(u!=null?u:"20")}}function l(u){var d="dpanel-table-column-".concat(u),g={};if(localStorage.getItem(d)){var f;g=JSON.parse((f=localStorage.getItem(d))!==null&&f!==void 0?f:"{}")}return{defaultValue:g,onChange:function(c){localStorage.setItem("dpanel-table-column-".concat(u),JSON.stringify(c))}}}}}]);
