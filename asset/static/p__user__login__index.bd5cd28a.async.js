"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4037],{63434:function(te,U,e){var s=e(1413),g=e(45987),A=e(22270),P=e(84567),B=e(67294),w=e(90789),I=e(40284),O=e(85893),D=["options","fieldProps","proFieldProps","valueEnum"],R=B.forwardRef(function(i,C){var z=i.options,x=i.fieldProps,X=i.proFieldProps,k=i.valueEnum,H=(0,g.Z)(i,D);return(0,O.jsx)(I.Z,(0,s.Z)({ref:C,valueType:"checkbox",valueEnum:(0,A.h)(k,void 0),fieldProps:(0,s.Z)({options:z},x),lightProps:(0,s.Z)({labelFormatter:function(){return(0,O.jsx)(I.Z,(0,s.Z)({ref:C,valueType:"checkbox",mode:"read",valueEnum:(0,A.h)(k,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,s.Z)({options:z},x),proFieldProps:X},H))}},H.lightProps),proFieldProps:X},H))}),$=B.forwardRef(function(i,C){var z=i.fieldProps,x=i.children;return(0,O.jsx)(P.Z,(0,s.Z)((0,s.Z)({ref:C},z),{},{children:x}))}),S=(0,w.G)($,{valuePropName:"checked"}),F=S;F.Group=R,U.Z=F},75293:function(te,U,e){e.d(U,{Z:function(){return A}});var s=e(25593),g=e(85893);function A(P){return(0,g.jsx)(s.Z.Text,{copyable:!0,style:{padding:10,display:P.block?"block":"",background:"#24292f",color:"#ffffff"},children:P.content})}},18678:function(te,U,e){e.r(U),e.d(U,{default:function(){return he}});var s=e(15009),g=e.n(s),A=e(99289),P=e.n(A),B=e(5574),w=e.n(B),I=e(68602),O=e(89075),D=e(68262),R=e(82346),$=e(9361),S=e(40056),F=e(86250),i=e(25593),C=e(67294),z=e(75293),x=e(36146),X=e(29177),k=e(88360),H=e(94149),re=e(87462),se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M608 112c-167.9 0-304 136.1-304 304 0 70.3 23.9 135 63.9 186.5l-41.1 41.1-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-44.9 44.9-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-65.3 65.3a8.03 8.03 0 000 11.3l42.3 42.3c3.1 3.1 8.2 3.1 11.3 0l253.6-253.6A304.06 304.06 0 00608 720c167.9 0 304-136.1 304-304S775.9 112 608 112zm161.2 465.2C726.2 620.3 668.9 644 608 644c-60.9 0-118.2-23.7-161.2-66.8-43.1-43-66.8-100.3-66.8-161.2 0-60.9 23.7-118.2 66.8-161.2 43-43.1 100.3-66.8 161.2-66.8 60.9 0 118.2 23.7 161.2 66.8 43.1 43 66.8 100.3 66.8 161.2 0 60.9-23.7 118.2-66.8 161.2z"}}]},name:"key",theme:"outlined"},oe=se,le=e(84089),ie=function(L,m){return C.createElement(le.Z,(0,re.Z)({},L,{ref:m,icon:oe}))},ce=C.forwardRef(ie),ge=ce,Q=e(5966),de=e(97462),ue=e(63434),ae=e(92398),me=e(55241),fe=e(42075),o=e(85893);function pe(b){var L,m=new x.Uo("user");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ae.Z,{centered:!0,activeKey:b.loginType,items:[{icon:(0,o.jsx)(X.Z,{}),key:"login",label:m.format("title")},{icon:(0,o.jsx)(k.Z,{}),key:"register",label:m.format("registerTitle")}].filter(function(n){return n.key==b.loginType})}),(0,o.jsx)(Q.Z,{name:"username",fieldProps:{size:"large",prefix:(0,o.jsx)(X.Z,{className:"prefixIcon"})},placeholder:m.format("formUsernameEmpty"),rules:[{required:!0,message:m.format("formUsernameEmpty")}]},"username"),(0,o.jsx)(Q.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,o.jsx)(H.Z,{className:"prefixIcon"})},placeholder:m.format("formPasswordEmpty"),rules:[{required:!0,message:m.format("formPasswordEmpty")}]},"password"),b.showTwoFa&&(0,o.jsx)(Q.Z,{name:"code",placeholder:m.format("formTwofaEmpty"),rules:[{required:!0}],fieldProps:{maxLength:6,size:"large",prefix:(0,o.jsx)(ge,{className:"prefixIcon"})}}),b.loginType=="register"&&(0,o.jsx)(de.Z,{name:["password"],children:function(t){var a=t.password;return(0,o.jsx)(Q.Z.Password,{fieldProps:{size:"large",prefix:(0,o.jsx)(H.Z,{className:"prefixIcon"})},placeholder:m.format("formConfirmPasswordEmpty"),name:"confirmPassword",dependencies:["password"],rules:[{required:!0,message:m.format("formConfirmPasswordEmpty")},function(r){var l=r.getFieldValue;return{validator:function(h,d){return!d||l("password")===d?Promise.resolve():Promise.reject(new Error(m.format("formMessagePasswordNotMatch")))}}}]},"confirmPassword")}}),b.showAutoLogin&&(0,o.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,o.jsx)(ue.Z,{noStyle:!0,name:"autoLogin",initialValue:!0,children:m.format("formAutoLogin")}),(0,o.jsx)(me.Z,{content:(0,o.jsxs)(fe.Z,{direction:"vertical",size:[0,30],children:[(0,o.jsxs)("span",{children:[m.format("formUserResetTip"),", ",(0,o.jsx)("a",{href:"https://dpanel.cc/install/ctrl",target:"_blank",children:x.FD.format("help")})]}),(0,o.jsx)(z.Z,{content:"docker exec ".concat((L=b.appName)!==null&&L!==void 0?L:"dpanel"," ./dpanel user:reset -f config.yaml")}),(0,o.jsx)("span",{})]}),children:(0,o.jsx)(i.Z.Link,{style:{float:"right"},children:m.format("formUserReset")})})]})]})}var he=function(){var b=$.Z.useToken(),L=b.token,m=(0,R.useModel)("@@initialState"),n=m.refresh,t=(0,C.useState)({loginType:"account",appName:"dpanel"}),a=w()(t,2),r=a[0],l=a[1],f=(0,C.useState)(),h=w()(f,2),d=h[0],T=h[1],j=(0,C.useState)(),N=w()(j,2),M=N[0],G=N[1],V=(0,R.useAntdConfigSetter)(),p=(0,C.useRef)(),y=new x.Uo("user"),W=(0,R.useAccess)();return(0,C.useEffect)(function(){window.document.title=y.format("documentTitle"),(0,I.Nr)().then(function(){var q=P()(g()().mark(function Y(u){var v;return g()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:y.appendXk(u.data.feature.includes("canSeeEnableXk")),v={loginType:"account"},u.data.showBuildName&&u.data.family!="lite"&&(v.showBuildName=!0),u.data.showRegister&&(v.loginType="register"),u.data.family=="demo"&&(v.showDemo=!0),v.appName=u.data.appName,u.data.theme&&u.data.theme.algorithm&&(localStorage.setItem("dpanel-theme",u.data.theme.algorithm),V(function(c){var ne;(ne=c.theme)!==null&&ne!==void 0||(c.theme={});var Z=[];return u.data.theme&&(u.data.theme.algorithm=="dark"?Z.push($.Z.darkAlgorithm):Z.push($.Z.defaultAlgorithm),c.theme.algorithm=Z),c})),G(u.data),l(v),u.data.feature.indexOf("canSeeEnableThemeUser")!=-1?(0,O.ax)().then(function(c){c.data&&c.data.themeUserConfig&&c.data.themeUserConfig.siteTitle&&(window.document.title=c.data.themeUserConfig.siteTitle),T(c.data)}):T({});case 10:case"end":return J.stop()}},Y)}));return function(Y){return q.apply(this,arguments)}}())},[]),(0,o.jsxs)(o.Fragment,{children:[r&&r.showBuildName&&(0,o.jsx)(S.Z,{type:"error",message:y.format("tipShowBuildName"),banner:!0}),r&&r.showDemo&&(0,o.jsx)(S.Z,{type:"error",message:y.format("tipShowDemo"),banner:!0}),(0,o.jsx)(F.Z,{justify:"center",align:"center",style:{height:"100vh",background:d&&d.themeUserConfig&&d.themeUserConfig.bgImage&&d.themeUserConfig.bgImage.src?"url(".concat(d.themeUserConfig.bgImage.src,")"):"".concat(L.colorBgElevated,"dd")},children:(0,o.jsxs)(D.U,{onFinish:function(){var q=P()(g()().mark(function Y(u){var v,_;return g()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(r.loginType!="register"){c.next=3;break}return c.next=3,(0,I.AT)({username:u.username,password:u.password,confirmPassword:u.confirmPassword});case 3:return c.prev=3,c.next=6,(0,I.n$)({username:u.username,password:u.password,autoLogin:u.autoLogin,code:u.code});case 6:if(v=c.sent,!v.data.accessToken){c.next=14;break}return localStorage.setItem("token",v.data.accessToken),n(),v.data.redirect&&v.data.redirect!=""&&!W.canSeeEnableCe?window.location.href="/dpanel/ui"+v.data.redirect:window.location.href="/dpanel/ui",c.abrupt("return");case 14:return c.abrupt("return",!1);case 15:c.next=20;break;case 17:c.prev=17,c.t0=c.catch(3),(_=p.current)===null||_===void 0||_.resetFields(["code"]);case 20:case"end":return c.stop()}},Y,null,[[3,17]])}));return function(Y){return q.apply(this,arguments)}}(),containerStyle:{background:"transparent",height:"auto"},contentStyle:{width:"auto"},logo:"",title:(0,o.jsx)("img",{src:d&&d.themeUserConfig&&d.themeUserConfig.loginLogo?d.themeUserConfig.loginLogo:"/dpanel/static/asset/logo.png",width:"350"}),subTitle:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("br",{}),(0,o.jsx)("br",{})]}),formRef:p,children:[(0,o.jsx)(pe,{showTwoFa:!!(d&&d.canSeeEnableTwoFa),loginType:r.loginType,appName:r.appName,showAutoLogin:!(M!=null&&M.feature.includes("canSeeEnableXk"))}),(0,o.jsxs)(i.Z.Paragraph,{style:{marginBottom:10,color:"#999999",textAlign:"center"},children:[y.format("agree"),(0,o.jsx)("a",{href:y.format("userAgreementUrl"),target:"_blank",children:y.format("userAgreement")}),(0,o.jsx)("a",{href:y.format("userPrivacyUrl"),target:"_blank",children:y.format("userPrivacy")})]})]})})]})}},89075:function(te,U,e){e.d(U,{$w:function(){return w},YQ:function(){return O},ax:function(){return R}});var s=e(15009),g=e.n(s),A=e(99289),P=e.n(A),B=e(82346);function w(){return I.apply(this,arguments)}function I(){return I=P()(g()().mark(function S(){return g()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,B.request)("/api/pro/home/get-machine-id",{method:"POST"}));case 1:case"end":return i.stop()}},S)})),I.apply(this,arguments)}function O(){return D.apply(this,arguments)}function D(){return D=P()(g()().mark(function S(){return g()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,B.request)("/api/pro/home/get-license-info",{method:"POST"}));case 1:case"end":return i.stop()}},S)})),D.apply(this,arguments)}function R(){return $.apply(this,arguments)}function $(){return $=P()(g()().mark(function S(){return g()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,B.request)("/api/pro/home/login-info",{method:"POST"}));case 1:case"end":return i.stop()}},S)})),$.apply(this,arguments)}},40056:function(te,U,e){e.d(U,{Z:function(){return m}});var s=e(67294),g=e(89739),A=e(4340),P=e(97937),B=e(21640),w=e(78860),I=e(93967),O=e.n(I),D=e(29372),R=e(64217),$=e(42550),S=e(96159),F=e(53124),i=e(11568),C=e(14747),z=e(83559);const x=(n,t,a,r,l)=>({background:n,border:`${(0,i.bf)(r.lineWidth)} ${r.lineType} ${t}`,[`${l}-icon`]:{color:a}}),X=n=>{const{componentCls:t,motionDurationSlow:a,marginXS:r,marginSM:l,fontSize:f,fontSizeLG:h,lineHeight:d,borderRadiusLG:T,motionEaseInOutCirc:j,withDescriptionIconSize:N,colorText:M,colorTextHeading:G,withDescriptionPadding:V,defaultPadding:p}=n;return{[t]:Object.assign(Object.assign({},(0,C.Wf)(n)),{position:"relative",display:"flex",alignItems:"center",padding:p,wordWrap:"break-word",borderRadius:T,[`&${t}-rtl`]:{direction:"rtl"},[`${t}-content`]:{flex:1,minWidth:0},[`${t}-icon`]:{marginInlineEnd:r,lineHeight:0},"&-description":{display:"none",fontSize:f,lineHeight:d},"&-message":{color:G},[`&${t}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${a} ${j}, opacity ${a} ${j},
        padding-top ${a} ${j}, padding-bottom ${a} ${j},
        margin-bottom ${a} ${j}`},[`&${t}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${t}-with-description`]:{alignItems:"flex-start",padding:V,[`${t}-icon`]:{marginInlineEnd:l,fontSize:N,lineHeight:0},[`${t}-message`]:{display:"block",marginBottom:r,color:G,fontSize:h},[`${t}-description`]:{display:"block",color:M}},[`${t}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},k=n=>{const{componentCls:t,colorSuccess:a,colorSuccessBorder:r,colorSuccessBg:l,colorWarning:f,colorWarningBorder:h,colorWarningBg:d,colorError:T,colorErrorBorder:j,colorErrorBg:N,colorInfo:M,colorInfoBorder:G,colorInfoBg:V}=n;return{[t]:{"&-success":x(l,r,a,n,t),"&-info":x(V,G,M,n,t),"&-warning":x(d,h,f,n,t),"&-error":Object.assign(Object.assign({},x(N,j,T,n,t)),{[`${t}-description > pre`]:{margin:0,padding:0}})}}},H=n=>{const{componentCls:t,iconCls:a,motionDurationMid:r,marginXS:l,fontSizeIcon:f,colorIcon:h,colorIconHover:d}=n;return{[t]:{"&-action":{marginInlineStart:l},[`${t}-close-icon`]:{marginInlineStart:l,padding:0,overflow:"hidden",fontSize:f,lineHeight:(0,i.bf)(f),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${a}-close`]:{color:h,transition:`color ${r}`,"&:hover":{color:d}}},"&-close-text":{color:h,transition:`color ${r}`,"&:hover":{color:d}}}}},re=n=>({withDescriptionIconSize:n.fontSizeHeading3,defaultPadding:`${n.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${n.paddingMD}px ${n.paddingContentHorizontalLG}px`});var se=(0,z.I$)("Alert",n=>[X(n),k(n),H(n)],re),oe=function(n,t){var a={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(a[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,r=Object.getOwnPropertySymbols(n);l<r.length;l++)t.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(n,r[l])&&(a[r[l]]=n[r[l]]);return a};const le={success:g.Z,info:w.Z,error:A.Z,warning:B.Z},ie=n=>{const{icon:t,prefixCls:a,type:r}=n,l=le[r]||null;return t?(0,S.wm)(t,s.createElement("span",{className:`${a}-icon`},t),()=>({className:O()(`${a}-icon`,t.props.className)})):s.createElement(l,{className:`${a}-icon`})},ce=n=>{const{isClosable:t,prefixCls:a,closeIcon:r,handleClose:l,ariaProps:f}=n,h=r===!0||r===void 0?s.createElement(P.Z,null):r;return t?s.createElement("button",Object.assign({type:"button",onClick:l,className:`${a}-close-icon`,tabIndex:0},f),h):null};var Q=s.forwardRef((n,t)=>{const{description:a,prefixCls:r,message:l,banner:f,className:h,rootClassName:d,style:T,onMouseEnter:j,onMouseLeave:N,onClick:M,afterClose:G,showIcon:V,closable:p,closeText:y,closeIcon:W,action:q,id:Y}=n,u=oe(n,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[v,_]=s.useState(!1),J=s.useRef(null);s.useImperativeHandle(t,()=>({nativeElement:J.current}));const{getPrefixCls:c,direction:ne,closable:Z,closeIcon:ve,className:Pe,style:xe}=(0,F.dj)("alert"),E=c("alert",r),[je,Ie,Se]=se(E),Te=K=>{var ee;_(!0),(ee=n.onClose)===null||ee===void 0||ee.call(n,K)},ye=s.useMemo(()=>n.type!==void 0?n.type:f?"warning":"info",[n.type,f]),Oe=s.useMemo(()=>typeof p=="object"&&p.closeIcon||y?!0:typeof p=="boolean"?p:W!==!1&&W!==null&&W!==void 0?!0:!!Z,[y,W,p,Z]),Ce=f&&V===void 0?!0:V,$e=O()(E,`${E}-${ye}`,{[`${E}-with-description`]:!!a,[`${E}-no-icon`]:!Ce,[`${E}-banner`]:!!f,[`${E}-rtl`]:ne==="rtl"},Pe,h,d,Se,Ie),be=(0,R.Z)(u,{aria:!0,data:!0}),Me=s.useMemo(()=>typeof p=="object"&&p.closeIcon?p.closeIcon:y||(W!==void 0?W:typeof Z=="object"&&Z.closeIcon?Z.closeIcon:ve),[W,p,y,ve]),Ze=s.useMemo(()=>{const K=p!=null?p:Z;if(typeof K=="object"){const{closeIcon:ee}=K;return oe(K,["closeIcon"])}return{}},[p,Z]);return je(s.createElement(D.ZP,{visible:!v,motionName:`${E}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:K=>({maxHeight:K.offsetHeight}),onLeaveEnd:G},({className:K,style:ee},Ee)=>s.createElement("div",Object.assign({id:Y,ref:(0,$.sQ)(J,Ee),"data-show":!v,className:O()($e,K),style:Object.assign(Object.assign(Object.assign({},xe),T),ee),onMouseEnter:j,onMouseLeave:N,onClick:M,role:"alert"},be),Ce?s.createElement(ie,{description:a,icon:n.icon,prefixCls:E,type:ye}):null,s.createElement("div",{className:`${E}-content`},l?s.createElement("div",{className:`${E}-message`},l):null,a?s.createElement("div",{className:`${E}-description`},a):null),q?s.createElement("div",{className:`${E}-action`},q):null,s.createElement(ce,{isClosable:Oe,prefixCls:E,closeIcon:Me,handleClose:Te,ariaProps:Ze}))))}),de=e(15671),ue=e(43144),ae=e(61120),me=e(78814),fe=e(82963);function o(n,t,a){return t=(0,ae.Z)(t),(0,fe.Z)(n,(0,me.Z)()?Reflect.construct(t,a||[],(0,ae.Z)(n).constructor):t.apply(n,a))}var pe=e(60136),b=function(n){function t(){var a;return(0,de.Z)(this,t),a=o(this,t,arguments),a.state={error:void 0,info:{componentStack:""}},a}return(0,pe.Z)(t,n),(0,ue.Z)(t,[{key:"componentDidCatch",value:function(r,l){this.setState({error:r,info:l})}},{key:"render",value:function(){const{message:r,description:l,id:f,children:h}=this.props,{error:d,info:T}=this.state,j=(T==null?void 0:T.componentStack)||null,N=typeof r=="undefined"?(d||"").toString():r,M=typeof l=="undefined"?j:l;return d?s.createElement(Q,{id:f,type:"error",message:N,description:s.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},M)}):h}}])}(s.Component);const L=Q;L.ErrorBoundary=b;var m=L}}]);
