"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5947],{24963:function(J,I,e){var o=e(67294),a=(0,o.createContext)({});I.Z=a},50070:function(J,I,e){e.r(I),e.d(I,{AppDetailContext:function(){return K},default:function(){return G}});var o=e(15009),a=e.n(o),Z=e(99289),p=e.n(Z),h=e(5574),U=e.n(h),P=e(24963),w=e(2831),D=e(60335),A=e(41123),d=e(54006),T=e(86738),g=e(25593),l=e(50136),O=e(67294),C=e(85893),K=(0,O.createContext)({});function G(){var W,c=(0,O.useContext)(P.Z),m=c.lang,v=c.loading,n=(0,d.useParams)(),q=(0,d.useSearchParams)(),ee=U()(q,2),Q=ee[0],ne=ee[1],t=(W=Q.get("tab"))!==null&&W!==void 0?W:"edit",s=(0,O.useState)("edit"),_=U()(s,2),r=_[0],u=_[1],y=(0,d.useNavigate)(),S=(0,O.useState)(1),b=U()(S,2),j=b[0],R=b[1],B=[{label:(0,C.jsx)(d.Link,{to:"/app/detail/edit/".concat(n.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,C.jsx)(d.Link,{to:"/app/detail/domain/".concat(n.id,"?tab=domain"),children:"\u57DF\u540D\u7BA1\u7406"}),key:"domain"},{label:(0,C.jsx)(T.Z,{style:{width:500},title:m("notification.title.tip"),description:"\u6587\u4EF6\u7BA1\u7406\u4F1A\u81EA\u52A8\u521B\u5EFA dpanel-plugin-exolorer \u5BB9\u5668\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F",onConfirm:function(){y("/app/detail/file/".concat(n.id,"?tab=file")),z(B.filter(function(E){return E.key!="fileConfirm"})),u("file")},okText:"Yes",cancelText:"No",children:(0,C.jsx)(g.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"})}),key:"fileConfirm"},{label:(0,C.jsx)(g.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){y("/app/detail/file/".concat(n.id,"?tab=file"))}},{label:(0,C.jsx)(g.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){y("/app/detail/log/".concat(n.id,"?tab=log"))}},{label:(0,C.jsx)(g.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){y("/app/detail/stat/".concat(n.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,C.jsx)(A.Z,{}),disabled:!0}],k=(0,O.useState)(B),$=U()(k,2),H=$[0],z=$[1];(0,O.useEffect)(function(){v.show(),u(t);var f=function(){var E=p()(a()().mark(function F(){var Y,M,V,N;return a()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return M=B,L.next=3,(0,w.aF)();case 3:return V=L.sent,V.data.dpanel.family=="lite"&&(M=M.filter(function(i){return i.key!="domain"})),V.data.plugin.explorer.isCreated||(M=M.filter(function(i){return i.key!="file"})),V.data.plugin.explorer.isCreated&&(M=M.filter(function(i){return i.key!="fileConfirm"})),L.next=9,(0,D.jV)({md5:(Y=n.id)!==null&&Y!==void 0?Y:""});case 9:N=L.sent,M.map(function(i){return i.key=="containerName"&&(i.label=N.data.info.Name),(!N.data.info.State.Running||N.data.info.State.Restarting)&&(i.key=="file"||i.key=="fileConfirm"||i.key=="stat")&&(i.disabled=!0),i}),z(M),v.destroy();case 13:case"end":return L.stop()}},F)}));return function(){return E.apply(this,arguments)}}();f()},[j]);var X=function(E){E.key!="fileConfirm"&&u(E.key)};return(0,C.jsxs)(K.Provider,{value:{reload:function(){R(j+1)}},children:[(0,C.jsx)(l.Z,{mode:"horizontal",onClick:X,selectedKeys:[r],items:H}),(0,C.jsx)(d.Outlet,{})]})}},2831:function(J,I,e){e.d(I,{Ll:function(){return w},aF:function(){return U},d6:function(){return A}});var o=e(15009),a=e.n(o),Z=e(99289),p=e.n(Z),h=e(54006);function U(){return P.apply(this,arguments)}function P(){return P=p()(a()().mark(function T(){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,h.request)("/api/common/home/info",{method:"POST"});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},T)})),P.apply(this,arguments)}function w(){return D.apply(this,arguments)}function D(){return D=p()(a()().mark(function T(){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,h.request)("/api/common/home/usage",{method:"POST"});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},T)})),D.apply(this,arguments)}function A(){return d.apply(this,arguments)}function d(){return d=p()(a()().mark(function T(){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,h.request)("/api/common/home/upgrade-script",{method:"POST"});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},T)})),d.apply(this,arguments)}},60335:function(J,I,e){e.d(I,{IE:function(){return w},IW:function(){return U},KK:function(){return l},LJ:function(){return C},Re:function(){return G},eE:function(){return T},jV:function(){return A}});var o=e(15009),a=e.n(o),Z=e(99289),p=e.n(Z),h=e(54006);function U(c){return P.apply(this,arguments)}function P(){return P=p()(a()().mark(function c(m){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,h.request)("/api/app/container/status",{method:"POST",data:m}));case 1:case"end":return n.stop()}},c)})),P.apply(this,arguments)}function w(c){return D.apply(this,arguments)}function D(){return D=p()(a()().mark(function c(m){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,h.request)("/api/app/container/get-list",{data:m,method:"POST"}));case 1:case"end":return n.stop()}},c)})),D.apply(this,arguments)}function A(c){return d.apply(this,arguments)}function d(){return d=p()(a()().mark(function c(m){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,h.request)("/api/app/container/get-detail",{data:m,method:"POST"}));case 1:case"end":return n.stop()}},c)})),d.apply(this,arguments)}function T(c){return g.apply(this,arguments)}function g(){return g=p()(a()().mark(function c(m){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,h.request)("/api/app/container/update",{data:m,method:"POST"}));case 1:case"end":return n.stop()}},c)})),g.apply(this,arguments)}function l(){return O.apply(this,arguments)}function O(){return O=p()(a()().mark(function c(){return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,h.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return v.stop()}},c)})),O.apply(this,arguments)}function C(c){return K.apply(this,arguments)}function K(){return K=p()(a()().mark(function c(m){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,h.request)("/api/app/container/export",{method:"POST",data:m,responseType:"blob"}));case 1:case"end":return n.stop()}},c)})),K.apply(this,arguments)}function G(c){return W.apply(this,arguments)}function W(){return W=p()(a()().mark(function c(m){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,h.request)("/api/app/container/commit",{method:"POST",data:m}));case 1:case"end":return n.stop()}},c)})),W.apply(this,arguments)}},86738:function(J,I,e){e.d(I,{Z:function(){return ne}});var o=e(67294),a=e(21640),Z=e(93967),p=e.n(Z),h=e(21770),U=e(98423),P=e(53124),w=e(55241),D=e(86743),A=e(81643),d=e(14726),T=e(33671),g=e(10110),l=e(24457),O=e(66330),C=e(83559);const K=t=>{const{componentCls:s,iconCls:_,antCls:r,zIndexPopup:u,colorText:y,colorWarning:S,marginXXS:b,marginXS:j,fontSize:R,fontWeightStrong:B,colorTextHeading:k}=t;return{[s]:{zIndex:u,[`&${r}-popover`]:{fontSize:R},[`${s}-message`]:{marginBottom:j,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${s}-message-icon ${_}`]:{color:S,fontSize:R,lineHeight:1,marginInlineEnd:j},[`${s}-title`]:{fontWeight:B,color:k,"&:only-child":{fontWeight:"normal"}},[`${s}-description`]:{marginTop:b,color:y}},[`${s}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:j}}}}},G=t=>{const{zIndexPopupBase:s}=t;return{zIndexPopup:s+60}};var W=(0,C.I$)("Popconfirm",t=>K(t),G,{resetStyle:!1}),c=function(t,s){var _={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&s.indexOf(r)<0&&(_[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,r=Object.getOwnPropertySymbols(t);u<r.length;u++)s.indexOf(r[u])<0&&Object.prototype.propertyIsEnumerable.call(t,r[u])&&(_[r[u]]=t[r[u]]);return _};const m=t=>{const{prefixCls:s,okButtonProps:_,cancelButtonProps:r,title:u,description:y,cancelText:S,okText:b,okType:j="primary",icon:R=o.createElement(a.Z,null),showCancel:B=!0,close:k,onConfirm:$,onCancel:H,onPopupClick:z}=t,{getPrefixCls:X}=o.useContext(P.E_),[f]=(0,g.Z)("Popconfirm",l.Z.Popconfirm),E=(0,A.Z)(u),F=(0,A.Z)(y);return o.createElement("div",{className:`${s}-inner-content`,onClick:z},o.createElement("div",{className:`${s}-message`},R&&o.createElement("span",{className:`${s}-message-icon`},R),o.createElement("div",{className:`${s}-message-text`},E&&o.createElement("div",{className:`${s}-title`},E),F&&o.createElement("div",{className:`${s}-description`},F))),o.createElement("div",{className:`${s}-buttons`},B&&o.createElement(d.ZP,Object.assign({onClick:H,size:"small"},r),S||(f==null?void 0:f.cancelText)),o.createElement(D.Z,{buttonProps:Object.assign(Object.assign({size:"small"},(0,T.nx)(j)),_),actionFn:$,close:k,prefixCls:X("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},b||(f==null?void 0:f.okText))))};var n=t=>{const{prefixCls:s,placement:_,className:r,style:u}=t,y=c(t,["prefixCls","placement","className","style"]),{getPrefixCls:S}=o.useContext(P.E_),b=S("popconfirm",s),[j]=W(b);return j(o.createElement(O.ZP,{placement:_,className:p()(b,r),style:u,content:o.createElement(m,Object.assign({prefixCls:b},y))}))},q=function(t,s){var _={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&s.indexOf(r)<0&&(_[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,r=Object.getOwnPropertySymbols(t);u<r.length;u++)s.indexOf(r[u])<0&&Object.prototype.propertyIsEnumerable.call(t,r[u])&&(_[r[u]]=t[r[u]]);return _};const Q=o.forwardRef((t,s)=>{var _,r;const{prefixCls:u,placement:y="top",trigger:S="click",okType:b="primary",icon:j=o.createElement(a.Z,null),children:R,overlayClassName:B,onOpenChange:k,onVisibleChange:$}=t,H=q(t,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),{getPrefixCls:z}=o.useContext(P.E_),[X,f]=(0,h.Z)(!1,{value:(_=t.open)!==null&&_!==void 0?_:t.visible,defaultValue:(r=t.defaultOpen)!==null&&r!==void 0?r:t.defaultVisible}),E=(i,x)=>{f(i,!0),$==null||$(i),k==null||k(i,x)},F=i=>{E(!1,i)},Y=i=>{var x;return(x=t.onConfirm)===null||x===void 0?void 0:x.call(void 0,i)},M=i=>{var x;E(!1,i),(x=t.onCancel)===null||x===void 0||x.call(void 0,i)},V=(i,x)=>{const{disabled:re=!1}=t;re||E(i,x)},N=z("popconfirm",u),te=p()(N,B),[L]=W(N);return L(o.createElement(w.Z,Object.assign({},(0,U.Z)(H,["title"]),{trigger:S,placement:y,onOpenChange:V,open:X,ref:s,overlayClassName:te,content:o.createElement(m,Object.assign({okType:b,icon:j},t,{prefixCls:N,close:F,onConfirm:Y,onCancel:M})),"data-popover-inject":!0}),R))});Q._InternalPanelDoNotUseOrYouWillBeFired=n;var ne=Q}}]);
