"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8022],{80821:function(w,C,t){t.d(C,{Z:function(){return v}});var T=t(5574),r=t.n(T),E=t(24963),l=t(86738),c=t(14726),P=t(83062),S=t(67294),D=t(85893);function v(o){var W=(0,S.useState)(!1),u=r()(W,2),B=u[0],a=u[1],d=(0,S.useContext)(E.Z),j=d.lang,A=d.notice,M=d.message,Z=function(){a(!0),o.action().then(function(g){if(a(!1),typeof o.onSuccess=="function"&&o.onSuccess(g),o.messageSuccess){var _="";typeof o.messageSuccess=="function"?_=o.messageSuccess(g):_=o.messageSuccess,_.indexOf(".")>-1&&(_=j(_)),o.asynced?M.info(_):M.success(_)}}).catch(function(g){a(!1),typeof o.onError=="function"&&o.onError(g)})};return o.confirm?(0,D.jsx)(l.Z,{style:{width:500},title:o.confirmTitle?o.confirmTitle:j("notification.title.tip"),description:o.confirm,onConfirm:Z,okText:"Yes",cancelText:"No",children:(0,D.jsx)(c.ZP,{disabled:o.disabled,icon:o.icon,loading:B,danger:o.danger,type:o.type,children:o.children})}):(0,D.jsx)(P.Z,{title:o.tips,children:(0,D.jsx)(c.ZP,{disabled:o.disabled,icon:o.icon,loading:B,onClick:Z,danger:o.danger,type:o.type,children:o.children})})}},94359:function(w,C,t){t.d(C,{Z:function(){return B}});var T=t(67294),r=t(3089),E=t(98165),l=t(18429),c=t(8751),P=t(14313),S=t(30159),D=t(87740),v=t(66309),o=t(83062),W=t(54006),u=t(85893);function B(a){var d=(0,u.jsx)(u.Fragment,{});if(a.status=="0"&&(d=(0,u.jsx)(v.Z,{icon:(0,u.jsx)(r.Z,{}),color:"default",children:"waiting"})),a.status=="10"&&(d=(0,u.jsx)(v.Z,{icon:(0,u.jsx)(E.Z,{spin:!0}),color:"processing",children:"processing"})),a.status=="20"&&(d=(0,u.jsx)(v.Z,{icon:(0,u.jsx)(l.Z,{}),color:"error",children:"error"})),a.status=="30"&&(d=(0,u.jsx)(v.Z,{icon:(0,u.jsx)(c.Z,{}),color:"success",children:"success"})),a.status=="running"||a.status=="healthy"){var j,A;d=(0,u.jsx)(v.Z,{icon:(0,u.jsx)(P.Z,{}),color:"success",children:(j=a.message)!==null&&j!==void 0&&j.showInTag?(A=a.message)===null||A===void 0?void 0:A.content:a.status})}if(a.status=="paused"){var M,Z;d=(0,u.jsx)(v.Z,{icon:(0,u.jsx)(S.Z,{}),children:(M=a.message)!==null&&M!==void 0&&M.showInTag?(Z=a.message)===null||Z===void 0?void 0:Z.content:a.status})}if(a.status=="waiting"||a.status=="starting"){var K,g;d=(0,u.jsx)(v.Z,{icon:(0,u.jsx)(D.Z,{}),children:(K=a.message)!==null&&K!==void 0&&K.showInTag?(g=a.message)===null||g===void 0?void 0:g.content:a.status})}if(a.status=="exited"||a.status=="dead"||a.status=="removing"||a.status=="restarting"||a.status=="unhealthy"||a.status=="created"){var _,L;d=(0,u.jsx)(v.Z,{icon:(0,u.jsx)(l.Z,{}),color:"warning",children:(_=a.message)!==null&&_!==void 0&&_.showInTag?(L=a.message)===null||L===void 0?void 0:L.content:a.status})}if(a.link&&(d=(0,u.jsx)(W.Link,{to:a.link,children:d})),a.message){var y;d=(0,u.jsx)(o.Z,{placement:(y=a.message.placement)!==null&&y!==void 0?y:"top",title:a.message.content,children:d})}return(0,u.jsx)(u.Fragment,{children:d})}},24963:function(w,C,t){var T=t(67294),r=(0,T.createContext)({});C.Z=r},96781:function(w,C,t){var T=t(67294),r=(0,T.createContext)({});C.Z=r},83536:function(w,C,t){t.r(C),t.d(C,{default:function(){return k}});var T=t(15009),r=t.n(T),E=t(99289),l=t.n(E),c=t(80821),P=t(90098),S=t(43425),D=t(86548),v=t(23430),o=t(90078),W=t(10641),u=t(54006),B=t(14726),a=t(42075),d=t(96074),j=t(83062),A=t(25593),M=t(67294),Z=t(96781),K=t(94359),g=t(67255),_=t(93162),L=t(24963),y=t(66309),s=t(85893);function G(O){var U=(0,u.useIntl)(),b=(0,M.useContext)(L.Z),x=b.lang,n;if(!O.type)n=(0,s.jsx)(y.Z,{children:x("compose.default")});else switch(O.type){case"remoteUrl":n=(0,s.jsx)(y.Z,{color:"cyan",children:x("compose.".concat(O.type))});break;case"serverPath":n=(0,s.jsx)(y.Z,{color:"blue",children:x("compose.".concat(O.type))});break;case"storagePath":n=(0,s.jsx)(y.Z,{color:"geekblue",children:x("compose.".concat(O.type))});break;case"outPath":n=(0,s.jsx)(y.Z,{color:"yellow",children:x("compose.".concat(O.type))});break;case"store":n=(0,s.jsx)(y.Z,{color:"green",children:x("compose.".concat(O.type))});break;default:n=(0,s.jsx)(y.Z,{children:x("compose.".concat(O.type))})}return(0,s.jsx)(j.Z,{title:O.tootip,children:n})}function k(){var O=(0,M.useContext)(Z.Z),U=O.listTableRef,b=(0,M.useContext)(L.Z),x=b.lang,n=b.notice;return(0,s.jsx)(o._z,{header:{extra:[(0,s.jsx)(u.Link,{to:"/compose/create",reloadDocument:location.search.length>0,children:(0,s.jsx)(B.ZP,{type:"primary",children:"\u521B\u5EFA\u4EFB\u52A1"},"createCompose")},"create")]},children:(0,s.jsx)(W.Z,{scroll:{x:"max-content"},request:function(){var i=l()(r()().mark(function m(e){var I,f,p;return r()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,P.pm)({title:e.title,name:e.name,pageSize:(I=e.pageSize)!==null&&I!==void 0?I:10,page:(f=e.current)!==null&&f!==void 0?f:1});case 2:return p=h.sent,h.abrupt("return",{data:p.data.list,success:!0,total:p.data.list.length});case 4:case"end":return h.stop()}},m)}));return function(m){return i.apply(this,arguments)}}(),rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name",width:200,render:function(m,e,I,f,p){return(0,s.jsx)(u.Link,{to:"/compose/deploy/"+e.id,children:e.name},I)}},{title:"\u9879\u76EE\u540D\u79F0",dataIndex:"title",width:200},{title:"\u7C7B\u578B",width:150,search:!1,render:function(m,e,I,f,p){var R;return(0,s.jsx)(G,{tootip:(R=e.setting.uri)!==null&&R!==void 0?R:"",type:e.setting&&e.setting.type?e.setting.type:""})}},{title:"\u5BB9\u5668\u72B6\u6001",dataIndex:"status",search:!1,width:300,render:function(m,e,I,f,p){return(0,s.jsx)(a.Z,{children:e.setting.status.split(", ").map(function(R){var h="running",F=R.indexOf("(");return F>-1?h=R.slice(0,F):h=R,(0,s.jsx)(K.Z,{status:h,message:{content:x("compose.".concat(h),{count:R.slice(F+1,R.length-1)}),placement:"top",showInTag:!0}},e.id)})})}},{title:"\u64CD\u4F5C",width:80,valueType:"option",key:"option",render:function(m,e,I,f,p){return(0,s.jsxs)(a.Z,{split:(0,s.jsx)(d.Z,{type:"vertical"}),children:[(0,s.jsx)(u.Link,{to:"/compose/deploy/"+e.id,children:(0,s.jsx)(j.Z,{title:"\u7BA1\u7406",children:(0,s.jsx)(S.Z,{})})},"3"),e.setting.type!="outPath"&&(0,s.jsx)(u.Link,{to:"/compose/create?id="+e.id,children:(0,s.jsx)(j.Z,{title:"\u7F16\u8F91",children:(0,s.jsx)(D.Z,{})})},"4"),(0,s.jsx)(A.Z.Link,{onClick:l()(r()().mark(function R(){var h,F;return r()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,(0,P.Pn)({id:e.id});case 2:h=z.sent,h&&h.data&&h.data.detail&&(F=new Blob([h.data.detail.yaml],{type:"text/plain"}),(0,_.saveAs)(F,e.name+"-compose.yaml"));case 4:case"end":return z.stop()}},R)})),children:(0,s.jsx)(j.Z,{title:"\u4E0B\u8F7D",children:(0,s.jsx)(v.Z,{})})},"2")]})}}],rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0,getCheckboxProps:function(m){return{disabled:m.setting.type=="outPath"}}},tableAlertOptionRender:function(m){var e=m.selectedRows;return(0,s.jsx)(a.Z,{size:16,children:(0,s.jsx)(c.Z,{danger:!0,type:"primary",action:function(){return(0,P.ik)({id:e.map(function(f){return f.id})})},onSuccess:function(){var f,p;return!((f=U.current)===null||f===void 0)&&f.reloadAndRest&&((p=U.current)===null||p===void 0||p.reloadAndRest()),!0},onError:function(){var f,p;return!((f=U.current)===null||f===void 0)&&f.reset&&((p=U.current)===null||p===void 0||p.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",confirm:(0,s.jsx)(a.Z,{style:{width:280},direction:"vertical",children:(0,s.jsx)(A.Z.Text,{children:"\u5220\u9664\u524D\u8BF7\u5148\u9500\u6BC1\u76F8\u5173\u5BB9\u5668\uFF0C\u786E\u8BA4\u5417\uFF1F"})}),children:"\u6279\u91CF\u5220\u9664"})})},pagination:(0,g.O)(),search:{collapsed:!1},actionRef:U,columnsState:(0,g.j)("compose-list")})})}},90098:function(w,C,t){t.d(C,{CT:function(){return u},GG:function(){return K},MG:function(){return G},Oh:function(){return j},Pn:function(){return o},U_:function(){return y},VN:function(){return _},iE:function(){return b},ik:function(){return a},im:function(){return P},mg:function(){return M},pm:function(){return D},xC:function(){return O}});var T=t(15009),r=t.n(T),E=t(99289),l=t.n(E),c=t(54006);function P(n){return S.apply(this,arguments)}function S(){return S=l()(r()().mark(function n(i){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/app/compose/create",{method:"POST",data:i}));case 1:case"end":return e.stop()}},n)})),S.apply(this,arguments)}function D(n){return v.apply(this,arguments)}function v(){return v=l()(r()().mark(function n(i){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/app/compose/get-list",{method:"POST",data:i}));case 1:case"end":return e.stop()}},n)})),v.apply(this,arguments)}function o(n){return W.apply(this,arguments)}function W(){return W=l()(r()().mark(function n(i){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/app/compose/get-task",{method:"POST",data:i}));case 1:case"end":return e.stop()}},n)})),W.apply(this,arguments)}function u(n){return B.apply(this,arguments)}function B(){return B=l()(r()().mark(function n(i){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/app/compose/get-detail",{method:"POST",data:i}));case 1:case"end":return e.stop()}},n)})),B.apply(this,arguments)}function a(n){return d.apply(this,arguments)}function d(){return d=l()(r()().mark(function n(i){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/app/compose/delete",{method:"POST",data:i}));case 1:case"end":return e.stop()}},n)})),d.apply(this,arguments)}function j(n){return A.apply(this,arguments)}function A(){return A=l()(r()().mark(function n(i){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/app/compose/container-deploy",{method:"POST",data:i}));case 1:case"end":return e.stop()}},n)})),A.apply(this,arguments)}function M(n){return Z.apply(this,arguments)}function Z(){return Z=l()(r()().mark(function n(i){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/app/compose/container-destroy",{method:"POST",data:i}));case 1:case"end":return e.stop()}},n)})),Z.apply(this,arguments)}function K(n){return g.apply(this,arguments)}function g(){return g=l()(r()().mark(function n(i){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/app/compose/container-ctrl",{method:"POST",data:i}));case 1:case"end":return e.stop()}},n)})),g.apply(this,arguments)}function _(n){return L.apply(this,arguments)}function L(){return L=l()(r()().mark(function n(i){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/app/compose/container-log",{method:"POST",data:i}));case 1:case"end":return e.stop()}},n)})),L.apply(this,arguments)}function y(n){return s.apply(this,arguments)}function s(){return s=l()(r()().mark(function n(i){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/app/compose/container-process-kill",{method:"POST",data:i}));case 1:case"end":return e.stop()}},n)})),s.apply(this,arguments)}function G(n){return k.apply(this,arguments)}function k(){return k=l()(r()().mark(function n(i){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/app/compose/get-from-uri",{method:"POST",data:i}));case 1:case"end":return e.stop()}},n)})),k.apply(this,arguments)}function O(n){return U.apply(this,arguments)}function U(){return U=l()(r()().mark(function n(i){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/app/compose/parse",{method:"POST",data:i}));case 1:case"end":return e.stop()}},n)})),U.apply(this,arguments)}function b(n){return x.apply(this,arguments)}function x(){return x=l()(r()().mark(function n(i){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/common/store/deploy",{method:"POST",data:i}));case 1:case"end":return e.stop()}},n)})),x.apply(this,arguments)}},67255:function(w,C,t){t.d(C,{O:function(){return T},j:function(){return r}});function T(){var E,l=parseInt((E=localStorage.getItem("dpanel-pagesize"))!==null&&E!==void 0?E:"0");return{showSizeChanger:!0,defaultPageSize:l!=null?l:20}}function r(E){var l="dpanel-table-column-".concat(E),c={};if(localStorage.getItem(l)){var P;c=JSON.parse((P=localStorage.getItem(l))!==null&&P!==void 0?P:"{}")}return{defaultValue:c,onChange:function(D){localStorage.setItem("dpanel-table-column-".concat(E),JSON.stringify(D))}}}}}]);
