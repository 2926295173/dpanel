"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5050],{80821:function(D,d,t){t.d(d,{Z:function(){return x}});var v=t(97857),u=t.n(v),l=t(5574),f=t.n(l),h=t(24963),_=t(86738),P=t(28036),g=t(83062),y=t(67294),m=t(85893);function x(e){var R=(0,y.useState)(!1),C=f()(R,2),s=C[0],E=C[1],i=(0,y.useContext)(h.Z),r=i.lang,a=i.message,n=function(){E(!0);var S=e.action();S instanceof Promise?S.then(function(c){if(E(!1),c){typeof e.onSuccess=="function"&&e.onSuccess(c);var o="";e.messageSuccess?typeof e.messageSuccess=="function"?o=e.messageSuccess(c):o=e.messageSuccess.indexOf("notification.")==0?r(e.messageSuccess):e.messageSuccess:o=r("notification.finish"),e.asynced?a.info(o):a.success(o)}}).catch(function(c){E(!1),typeof e.onError=="function"&&e.onError(c)}):E(!1)};return e.confirm?(0,m.jsx)(_.Z,u()(u()({style:{width:500},title:e.confirmTitle?e.confirmTitle:r("notification.title.tip"),description:typeof e.confirm=="string"&&e.confirm.indexOf("notification.")==0?r(e.confirm):e.confirm,onConfirm:n,okText:"Yes",cancelText:"No",onOpenChange:e.confirmOnOpenChange},e.confirmProps),{},{children:(0,m.jsx)(P.ZP,{block:e.block,disabled:e.disabled,icon:!e.children&&s?void 0:e.icon,loading:s,danger:e.danger,type:e.type,children:e.children})})):(0,m.jsx)(g.Z,{title:e.tips,children:(0,m.jsx)(P.ZP,{block:e.block,style:e.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:e.disabled,icon:!e.children&&s?void 0:e.icon,loading:s,onClick:n,danger:e.danger,type:e.type,children:e.children})})}},24963:function(D,d,t){var v=t(67294),u=(0,v.createContext)({});d.Z=u},85827:function(D,d,t){t.r(d),t.d(d,{default:function(){return E}});var v=t(15009),u=t.n(v),l=t(99289),f=t.n(l),h=t(80821),_=t(82346);function P(i){return g.apply(this,arguments)}function g(){return g=f()(u()().mark(function i(r){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,_.request)("/api/common/event/get-list",{method:"POST",data:r}));case 1:case"end":return n.stop()}},i)})),g.apply(this,arguments)}function y(i){return m.apply(this,arguments)}function m(){return m=f()(u()().mark(function i(r){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,_.request)("/api/common/event/prune",{method:"POST",data:r}));case 1:case"end":return n.stop()}},i)})),m.apply(this,arguments)}var x=t(67255),e=t(90078),R=t(41482),C=t(67294),s=t(85893);function E(){var i=(0,C.useRef)();return(0,s.jsx)(e._z,{header:{extra:[(0,s.jsx)(h.Z,{action:function(){return y()},onSuccess:function(){var a,n;return!((a=i.current)===null||a===void 0)&&a.reloadAndRest&&((n=i.current)===null||n===void 0||n.reloadAndRest()),!0},onError:function(){var a,n;return!((a=i.current)===null||a===void 0)&&a.reset&&((n=i.current)===null||n===void 0||n.reset()),!0},confirm:"notification.confirm.title",danger:!0,type:"primary",children:"\u6E05\u9664\u6240\u6709\u4E8B\u4EF6"})]},children:(0,s.jsx)(R.Z,{scroll:{x:"max-content"},columns:[{title:"\u7C7B\u578B",ellipsis:!0,dataIndex:"type",width:200},{title:"\u8BE6\u60C5",search:!1,render:function(a,n,j,S){return(0,s.jsxs)(s.Fragment,{children:[n.action," ",n.message]})}},{title:"\u65F6\u95F4",ellipsis:!0,search:!1,dataIndex:"createdAt",width:200,render:function(a,n,j,S,c){return new Date(n.createdAt).toLocaleString()}}],rowKey:"id",request:function(){var r=f()(u()().mark(function a(n,j,S){var c,o,T;return u()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,P({page:(c=n.current)!==null&&c!==void 0?c:1,pageSize:(o=n.pageSize)!==null&&o!==void 0?o:10,type:n.type});case 2:return T=O.sent,O.abrupt("return",{data:T.data.list,success:!0,total:T.data.total});case 4:case"end":return O.stop()}},a)}));return function(a,n,j){return r.apply(this,arguments)}}(),pagination:(0,x.O)(),actionRef:i})})}},67255:function(D,d,t){t.d(d,{O:function(){return v},j:function(){return u}});function v(){var l=localStorage.getItem("dpanel-pagesize");return l=="all"?!1:{showSizeChanger:!0,defaultPageSize:parseInt(l!=null?l:"20")}}function u(l){var f="dpanel-table-column-".concat(l),h={};if(localStorage.getItem(f)){var _;h=JSON.parse((_=localStorage.getItem(f))!==null&&_!==void 0?_:"{}")}return{defaultValue:h,onChange:function(g){localStorage.setItem("dpanel-table-column-".concat(l),JSON.stringify(g))}}}}}]);
