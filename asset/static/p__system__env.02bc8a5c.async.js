"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1180],{88484:function(G,p,e){e.d(p,{Z:function(){return x}});var E=e(87462),g=e(67294),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},D=R,I=e(84089),M=function(v,A){return g.createElement(I.Z,(0,E.Z)({},v,{ref:A,icon:D}))},f=g.forwardRef(M),x=f},52688:function(G,p,e){var E=e(1413),g=e(45987),R=e(67294),D=e(73406),I=e(85893),M=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],f=R.forwardRef(function(x,d){var v=x.fieldProps,A=x.unCheckedChildren,a=x.checkedChildren,K=x.proFieldProps,S=(0,g.Z)(x,M);return(0,I.jsx)(D.Z,(0,E.Z)({valueType:"switch",fieldProps:(0,E.Z)({unCheckedChildren:A,checkedChildren:a},v),ref:d,valuePropName:"checked",proFieldProps:K,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},S))});p.Z=f},80821:function(G,p,e){e.d(p,{Z:function(){return A}});var E=e(5574),g=e.n(E),R=e(93246),D=e(54006),I=e(31418),M=e(86738),f=e(14726),x=e(83062),d=e(67294),v=e(85893);function A(a){var K=(0,d.useState)(!1),S=g()(K,2),y=S[0],$=S[1],L=I.Z.useApp(),Z=(0,D.useIntl)(),l=function(){$(!0),a.action().then(function(U){if($(!1),typeof a.onSuccess=="function"&&a.onSuccess(U),a.messageSuccess){var B="";typeof a.messageSuccess=="function"?B=a.messageSuccess(U):B=a.messageSuccess,B.indexOf(".")>-1&&(B=Z.formatMessage({id:B})),a.asynced?(0,R.Rk)(L,B):(0,R.$h)(L,B)}}).catch(function(U){$(!1),typeof a.onError=="function"&&a.onError(U)})};return a.confirm?(0,v.jsx)(M.Z,{style:{width:500},title:"\u63D0\u793A",description:a.confirm,onConfirm:l,okText:"Yes",cancelText:"No",children:(0,v.jsx)(f.ZP,{disabled:a.disabled,icon:a.icon,loading:y,danger:a.danger,type:a.type,children:a.children})}):(0,v.jsx)(x.Z,{title:a.tips,children:(0,v.jsx)(f.ZP,{disabled:a.disabled,icon:a.icon,loading:y,onClick:l,danger:a.danger,type:a.type,children:a.children})})}},89063:function(G,p,e){e.d(p,{Z:function(){return x}});var E=e(93246),g=e(88484),R=e(31418),D=e(72723),I=e(14726),M=e(67294),f=e(85893);function x(d){var v=(0,M.useRef)(null),A=R.Z.useApp(),a=function(){v.current&&(v.current.click(),v.current.onchange=function(S){if(!S||!S.target)return"";var y=new FileReader;y.onload=function(L){var Z,l=(Z=L.target)===null||Z===void 0?void 0:Z.result;if(d.onLoad)try{d.onLoad&&d.onLoad(l)}catch(N){(0,E.YZ)(A,N);return}typeof d.onImport=="function"&&d.onImport(l)};var $=S.target;if($.files)try{y.readAsText($.files[0])}catch(L){(0,E.YZ)(A,"\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(D.Z.Item,{name:"importFile",label:d.label,children:(0,f.jsx)(I.ZP,{icon:(0,f.jsx)(g.Z,{}),block:!0,onClick:a,children:d.title})}),(0,f.jsx)("input",{style:{display:"none"},type:"file",ref:v,name:"importFileInput"})]})}},53893:function(G,p,e){e.r(p),e.d(p,{default:function(){return o}});var E=e(15009),g=e.n(E),R=e(99289),D=e.n(R),I=e(80821),M=e(5574),f=e.n(M),x=e(184),d=e(5966),v=e(52688),A=e(97462),a=e(62370),K=e(14726),S=e(86250),y=e(67294),$=e(91845),L=e(87662),Z=e(89063),l=e(85893),N=(0,y.forwardRef)(function(t,r){(0,y.useImperativeHandle)(r,function(){return{edit:function(s){var u;(u=m.current)===null||u===void 0||u.setFieldsValue({name:s.name,title:s.title,address:s.address,enableTLS:s.enableTLS,tlsCa:s.tlsCa,tlsCert:s.tlsCert,tlsKey:s.tlsKey}),c(!0),T(s.name)}}});var i=(0,y.useState)(!1),h=f()(i,2),O=h[0],c=h[1],m=(0,y.useRef)(),P=(0,y.useState)(""),z=f()(P,2),W=z[0],T=z[1];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(K.ZP,{onClick:function(){var s;T(""),(s=m.current)===null||s===void 0||s.resetFields(),c(!0)},type:"primary",children:"\u6DFB\u52A0Docker\u73AF\u5883"}),(0,l.jsxs)(x.a,{drawerProps:{forceRender:!0},onOpenChange:function(s){c(s)},open:O,width:800,formRef:m,title:"\u6DFB\u52A0Docker\u73AF\u5883",onFinish:function(){var b=D()(g()().mark(function s(u){var F,C;return g()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return F={name:u.name,title:u.title,address:u.address,tlsCa:u.tlsCa,tlsCert:u.tlsCert,tlsKey:u.tlsKey,enableTLS:u.enableTLS},console.log(u),V.next=4,(0,L.ad)(F);case 4:return C=V.sent,t.onFinish&&t.onFinish(),V.abrupt("return",!0);case 7:case"end":return V.stop()}},s)}));return function(s){return b.apply(this,arguments)}}(),children:[(0,l.jsx)(d.Z,{label:"\u540D\u79F0",name:"title",required:!0,rules:[{required:!0}],fieldProps:{onChange:function(s){var u="";if(s.target.value&&!W){var F,C=(0,$.N9)(s.target.value.trim(),{toneType:"none",type:"array"});u=C.join(""),(F=m.current)===null||F===void 0||F.setFieldValue("name",u)}}}}),(0,l.jsx)(d.Z,{label:"\u6807\u8BC6",name:"name",required:!0,disabled:W!="",rules:[{required:!0}],placeholder:"\u6807\u8BC6Docker\u73AF\u5883\uFF0C\u53EA\u5141\u8BB8\u4E3A\u82F1\u6587\u6216\u662F\u6570\u5B57"}),(0,l.jsx)(d.Z,{label:"Docker Api \u5730\u5740",name:"address",tooltip:"\u8FDE\u63A5\u8FDC\u7A0B Docker \u65F6\u8BF7\u5148\u5F00\u542F Api \u5730\u5740\u8BBF\u95EE\u3002",placeholder:"\u4F8B\u5982\uFF1Aunix:///var/run/docker.sock\u3001tcp://192.16.0.5:2375"}),(0,l.jsx)(v.Z,{label:"\u542F\u7528TLS",name:"enableTLS",tooltip:"\u751F\u6210\u6559\u7A0B\u89C1\uFF1Ahttps://donknap.github.io/dpanel-docs/#/zh-cn/manual/remote"}),(0,l.jsx)(A.Z,{name:["enableTLS"],children:function(s){var u=s.enableTLS;if(u)return(0,l.jsxs)(S.Z,{gap:20,justify:"start",children:[(0,l.jsx)(a.Z,{name:"tlsCa",children:(0,l.jsx)(Z.Z,{title:"\u4E0A\u4F20CA\u8BC1\u4E66 ca.pem",onImport:function(C){var j;return(j=m.current)===null||j===void 0||j.setFieldValue("tlsCa",C),!0},onLoad:function(C){if(C.indexOf("CERTIFICATE")<0)throw new Error("\u5BFC\u5165ca.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})}),(0,l.jsx)(a.Z,{name:"tlsCert",children:(0,l.jsx)(Z.Z,{title:"\u4E0A\u4F20\u8BC1\u4E66\u6587\u4EF6 cert.pem",onImport:function(C){var j;return(j=m.current)===null||j===void 0||j.setFieldValue("tlsCert",C),!0},onLoad:function(C){if(C.indexOf("CERTIFICATE")<0)throw new Error("\u5BFC\u5165cert.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})}),(0,l.jsx)(a.Z,{name:"tlsKey",children:(0,l.jsx)(Z.Z,{title:"\u4E0A\u4F20\u5BC6\u94A5\u6587\u4EF6 key.pem",onImport:function(C){var j;return(j=m.current)===null||j===void 0||j.setFieldValue("tlsKey",C),!0},onLoad:function(C){if(C.indexOf("PRIVATE")<0)throw new Error("\u5BFC\u5165key.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})})]})}})]})]})}),U=N,B=e(43425),H=e(90078),Y=e(10641),w=e(42075),J=e(96074),n=e(46464);function o(){var t=(0,y.useRef)(),r=(0,y.useRef)();return(0,l.jsx)(H._z,{header:{extra:[(0,l.jsx)(U,{ref:r,onFinish:function(){var h,O;!((h=t.current)===null||h===void 0)&&h.reloadAndRest&&((O=t.current)===null||O===void 0||O.reloadAndRest())}},"dockerEnvCreate")]},children:(0,l.jsx)(Y.Z,{rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name"},{title:"\u540D\u79F0",dataIndex:"title"},{title:"\u5730\u5740",dataIndex:"address"},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(h,O,c,m,P){return(0,l.jsx)(w.Z,{split:(0,l.jsx)(J.Z,{type:"vertical"}),children:!O.default&&(0,l.jsx)(n.Z.Link,{onClick:function(){var W;(W=r.current)===null||W===void 0||W.edit(O)},children:(0,l.jsx)(B.Z,{})},O.name)})}}],pagination:!1,request:D()(g()().mark(function i(){var h;return g()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,L.Kg)();case 2:return h=c.sent,c.abrupt("return",{data:h.data.list,total:h.data.list.length});case 4:case"end":return c.stop()}},i)})),search:!1,rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0,getCheckboxProps:function(h){return{disabled:h.default}}},actionRef:t,tableAlertOptionRender:function(h){var O=h.selectedRowKeys;return(0,l.jsx)(w.Z,{size:16,children:(0,l.jsx)(I.Z,{danger:!0,type:"primary",action:function(){return(0,L._g)({name:O})},onSuccess:function(){var m,P;return!((m=t.current)===null||m===void 0)&&m.reloadAndRest&&((P=t.current)===null||P===void 0||P.reloadAndRest()),!0},onError:function(){var m,P;return!((m=t.current)===null||m===void 0)&&m.reset&&((P=t.current)===null||P===void 0||P.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"})})}})})}},86250:function(G,p,e){e.d(p,{Z:function(){return J}});var E=e(67294),g=e(93967),R=e.n(g),D=e(98423),I=e(98065),M=e(53124),f=e(83559),x=e(83262);const d=["wrap","nowrap","wrap-reverse"],v=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],A=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],a=(n,o)=>{const t=o.wrap===!0?"wrap":o.wrap;return{[`${n}-wrap-${t}`]:t&&d.includes(t)}},K=(n,o)=>{const t={};return A.forEach(r=>{t[`${n}-align-${r}`]=o.align===r}),t[`${n}-align-stretch`]=!o.align&&!!o.vertical,t},S=(n,o)=>{const t={};return v.forEach(r=>{t[`${n}-justify-${r}`]=o.justify===r}),t};function y(n,o){return R()(Object.assign(Object.assign(Object.assign({},a(n,o)),K(n,o)),S(n,o)))}var $=y;const L=n=>{const{componentCls:o}=n;return{[o]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},Z=n=>{const{componentCls:o}=n;return{[o]:{"&-gap-small":{gap:n.flexGapSM},"&-gap-middle":{gap:n.flexGap},"&-gap-large":{gap:n.flexGapLG}}}},l=n=>{const{componentCls:o}=n,t={};return d.forEach(r=>{t[`${o}-wrap-${r}`]={flexWrap:r}}),t},N=n=>{const{componentCls:o}=n,t={};return A.forEach(r=>{t[`${o}-align-${r}`]={alignItems:r}}),t},U=n=>{const{componentCls:o}=n,t={};return v.forEach(r=>{t[`${o}-justify-${r}`]={justifyContent:r}}),t},B=()=>({});var H=(0,f.I$)("Flex",n=>{const{paddingXS:o,padding:t,paddingLG:r}=n,i=(0,x.IX)(n,{flexGapSM:o,flexGap:t,flexGapLG:r});return[L(i),Z(i),l(i),N(i),U(i)]},B,{resetStyle:!1}),Y=function(n,o){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&o.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)o.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},J=E.forwardRef((n,o)=>{const{prefixCls:t,rootClassName:r,className:i,style:h,flex:O,gap:c,children:m,vertical:P=!1,component:z="div"}=n,W=Y(n,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:T,direction:b,getPrefixCls:s}=E.useContext(M.E_),u=s("flex",t),[F,C,j]=H(u),V=P!=null?P:T==null?void 0:T.vertical,Q=R()(i,r,T==null?void 0:T.className,u,C,j,$(u,n),{[`${u}-rtl`]:b==="rtl",[`${u}-gap-${c}`]:(0,I.n)(c),[`${u}-vertical`]:V}),X=Object.assign(Object.assign({},T==null?void 0:T.style),h);return O&&(X.flex=O),c&&!(0,I.n)(c)&&(X.gap=c),F(E.createElement(z,Object.assign({ref:o,className:Q,style:X},(0,D.Z)(W,["justify","wrap","align"])),m))})}}]);
