"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5050],{80821:function(M,g,n){n.d(g,{Z:function(){return T}});var h=n(97857),u=n.n(h),j=n(5574),E=n.n(j),S=n(24963),D=n(36146),c=n(86738),a=n(83062),r=n(96074),o=n(83622),d=n(67294),s=n(85893);function T(e){var b=(0,d.useState)(!1),v=E()(b,2),P=v[0],l=v[1],f=(0,d.useContext)(S.Z),i=f.message,t=new D.Uo,y=function(){l(!0);var O=e.action();O instanceof Promise?O.then(function(_){if(l(!1),_){typeof e.onSuccess=="function"&&e.onSuccess(_);var m="";e.messageSuccess?typeof e.messageSuccess=="function"?m=e.messageSuccess(_):m=e.messageSuccess.indexOf("notification.")==0?t.format(e.messageSuccess):e.messageSuccess:m=t.format("notification.finish"),e.asynced?i.info(m):i.success(m)}}).catch(function(_){l(!1),typeof e.onError=="function"&&e.onError(_)}):l(!1)};return e.confirm?(0,s.jsx)(c.Z,u()(u()({style:{width:500},title:e.confirmTitle?e.confirmTitle:t.format("notification.title.tip"),description:typeof e.confirm=="string"&&e.confirm.indexOf("notification.")==0?t.format(e.confirm):e.confirm,onConfirm:y,okText:"Yes",cancelText:"No",onOpenChange:e.confirmOnOpenChange},e.confirmProps),{},{children:(0,s.jsxs)(a.Z,{title:e.tips,children:[e.showDivider&&(0,s.jsx)(r.Z,{type:"vertical",style:{marginRight:15}}),(0,s.jsx)(o.ZP,{block:e.block,disabled:e.disabled,icon:!e.children&&P?void 0:e.icon,loading:P,danger:e.danger,type:e.type,children:e.children})]})})):(0,s.jsxs)(a.Z,{title:e.tips,children:[e.showDivider&&(0,s.jsx)(r.Z,{type:"vertical",style:{marginRight:15}}),(0,s.jsx)(o.ZP,{block:e.block,style:e.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:e.disabled,icon:!e.children&&P?void 0:e.icon,loading:P,onClick:y,danger:e.danger,type:e.type,children:e.children})]})}},24963:function(M,g,n){var h=n(67294),u=(0,h.createContext)({});g.Z=u},85827:function(M,g,n){n.r(g),n.d(g,{default:function(){return P}});var h=n(15009),u=n.n(h),j=n(99289),E=n.n(j),S=n(80821),D=n(82346);function c(l){return a.apply(this,arguments)}function a(){return a=E()(u()().mark(function l(f){return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,D.request)("/api/common/event/get-list",{method:"POST",data:f}));case 1:case"end":return t.stop()}},l)})),a.apply(this,arguments)}function r(l){return o.apply(this,arguments)}function o(){return o=E()(u()().mark(function l(f){return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,D.request)("/api/common/event/prune",{method:"POST",data:f}));case 1:case"end":return t.stop()}},l)})),o.apply(this,arguments)}var d=n(36146),s=n(67255),T=n(90078),e=n(56729),b=n(67294),v=n(85893);function P(){var l=(0,b.useRef)();return(0,v.jsx)(T._z,{header:{extra:[(0,v.jsx)(S.Z,{action:function(){return r()},onSuccess:function(){var i,t;return!((i=l.current)===null||i===void 0)&&i.reloadAndRest&&((t=l.current)===null||t===void 0||t.reloadAndRest()),!0},onError:function(){var i,t;return!((i=l.current)===null||i===void 0)&&i.reset&&((t=l.current)===null||t===void 0||t.reset()),!0},confirm:"notification.confirm.title",danger:!0,type:"primary",children:d.FD.format("listManageClear")})]},children:(0,v.jsx)(e.Z,{search:!1,scroll:{x:"max-content"},columns:[{title:d.FD.format("listType"),ellipsis:!0,dataIndex:"type",width:200},{title:d.FD.format("listDescription"),search:!1,render:function(i,t,y,R){return(0,v.jsxs)(v.Fragment,{children:[t.action," ",t.message]})}},{title:d.FD.format("listCreatedAt"),ellipsis:!0,search:!1,dataIndex:"createdAt",width:200,render:function(i,t,y,R,O){return new Date(t.createdAt).toLocaleString()}}],rowKey:"id",request:function(){var f=E()(u()().mark(function i(t,y,R){var O,_,m;return u()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,c({page:(O=t.current)!==null&&O!==void 0?O:1,pageSize:(_=t.pageSize)!==null&&_!==void 0?_:10,type:t.type});case 2:return m=C.sent,C.abrupt("return",{data:m.data.list,success:!0,total:m.data.total});case 4:case"end":return C.stop()}},i)}));return function(i,t,y){return f.apply(this,arguments)}}(),pagination:(0,s.Oh)(),actionRef:l})})}},67255:function(M,g,n){n.d(g,{O$:function(){return D},Oh:function(){return j},j_:function(){return E},nX:function(){return S}});var h=n(5574),u=n.n(h);function j(c){var a=localStorage.getItem("dpanel-pagesize");if(a=="all")return!1;var r=location.pathname.split("/").slice(-2).join("-");return{defaultCurrent:c==null?void 0:c.page,showSizeChanger:!0,defaultPageSize:parseInt(a!=null?a:"20"),onChange:function(d,s){["app-list","compose-list"].includes(r)&&localStorage.setItem("dpanel-page-"+r,"".concat(d))}}}function E(c){var a="dpanel-table-column-".concat(c),r={};if(localStorage.getItem(a)){var o;r=JSON.parse((o=localStorage.getItem(a))!==null&&o!==void 0?o:"{}")}return{defaultValue:r,onChange:function(s){localStorage.setItem("dpanel-table-column-".concat(c),JSON.stringify(s))}}}function S(c,a,r){var o=location.pathname.split("/").slice(-2).join("-");r.columnKey&&localStorage.setItem("dpanel-table-sort-".concat(o),"".concat(r.columnKey,"|").concat(r.order))}function D(c,a){var r=localStorage.getItem("dpanel-table-sort-".concat(c));if(r){var o=r.split("|"),d=u()(o,2),s=d[0],T=d[1];if(s==a)return T}}}}]);
