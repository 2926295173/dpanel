"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3840],{99861:function(Ze,pe,e){var _e=e(64599),_=e.n(_e),ie=e(15009),u=e.n(ie),w=e(99289),B=e.n(w),I=e(5574),N=e.n(I),k=e(42119),A=e(83062),h=e(67294),O=e(92754),v=e(184),G=e(38345),P=e(3616),J=e(36146),S=e(68297),E=e(85893),m=(0,h.forwardRef)(function(t,o){(0,h.useImperativeHandle)(o,function(){return{start:function(){var Z;return V(!0),Q((Z=t.image)!==null&&Z!==void 0?Z:[])},finish:function(){V(!1)},pull:function(Z){return V(!0),Q(Z)}}});var p=(0,h.useState)(0),a=N()(p,2),R=a[0],s=a[1],c=(0,h.useRef)(),j=(0,h.useState)(!1),K=N()(j,2),d=K[0],V=K[1],g=(0,h.useState)([]),ne=N()(g,2),x=ne[0],H=ne[1],n=new J.Uo("components.appCompose");function Q(f){return $.apply(this,arguments)}function $(){return $=B()(u()().mark(function f(Z){var Oe,z,fe,De,le,Ue,Ke;return u()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:z=0,H(Z),fe=_()(Z),re.prev=3,fe.s();case 5:if((De=fe.n()).done){re.next=15;break}return Ue=De.value,s(z),(le=c.current)===null||le===void 0||le.setStart(Ue),re.next=11,(0,S.Ze)({tag:Ue,type:"pull"});case 11:Ke=re.sent,z++;case 13:re.next=5;break;case 15:re.next=20;break;case 17:re.prev=17,re.t0=re.catch(3),fe.e(re.t0);case 20:return re.prev=20,fe.f(),re.finish(20);case 23:(Oe=c.current)===null||Oe===void 0||Oe.setFinish(),s(z),t.finishAutoHide&&V(!1);case 26:case"end":return re.stop()}},f,null,[[3,17,20,23]])})),$.apply(this,arguments)}return(0,E.jsxs)(v.a,{trigger:t.trigger,open:d,submitter:!1,title:n.format("pullImageTitle"),onOpenChange:function(){var f=B()(u()().mark(function Z(Oe){var z,fe;return u()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:V(Oe),Oe&&t.trigger&&Q((z=t.image)!==null&&z!==void 0?z:[]),Oe||(fe=c.current)===null||fe===void 0||fe.close();case 3:case"end":return le.stop()}},Z)}));return function(Z){return f.apply(this,arguments)}}(),drawerProps:{forceRender:!0,width:P.R_},children:[(0,E.jsx)(G.Z,{children:x&&(0,E.jsx)(k.Z,{current:R,items:x.map(function(f,Z){return{title:(0,E.jsx)(A.Z,{title:f,children:f.length>15?f.substring(0,6)+" ... "+f.substring(f.length-6):f}),key:Z}})})}),(0,E.jsx)(G.Z,{children:(0,E.jsx)(O.Z,{ref:c})})]})});pe.Z=m},44771:function(Ze,pe,e){e.d(pe,{Z:function(){return N}});var _e=e(36146),_=e(38345),ie=e(64317),u=e(97462),w=e(31199),B=e(86250),I=e(85893);function N(k){var A=new _e.Uo("components.appForm");return(0,I.jsx)(_.Z,{ghost:k.ghost,children:(0,I.jsxs)(B.Z,{gap:50,children:[(0,I.jsx)(ie.Z,{tooltip:"".concat(A.format("createParamsDemo",{params:"--restart always"})),label:k.showLabel&&A.format("createAdvRestart"),name:["restart","name"],width:"md",initialValue:k.defaultValue?k.defaultValue:"on-failure",options:A.option("createAdvRestartOption",["no","on-failure","unless-stopped","always"])}),(0,I.jsx)(u.Z,{name:["restart"],children:function(O){var v=O.restart;return v&&v.name=="on-failure"&&(0,I.jsx)(w.Z,{width:"md",label:A.format("createAdvRestartMax"),name:["restart","maxAttempt"],initialValue:5})}})]})})}},84941:function(Ze,pe,e){e.d(pe,{Z:function(){return or}});var _e=e(97857),_=e.n(_e),ie=e(15009),u=e.n(ie),w=e(19632),B=e.n(w),I=e(99289),N=e.n(I),k=e(5574),A=e.n(k),h=e(38345),O=e(62370),v=e(5966),G=e(24739),P=e(97462),J=e(83622),S=e(30291),E=e(92398),m=e(40056),t=e(67294),o=e(42963),p=e(51042),a=e(63434),R=e(17186),s=e(71230),c=e(15746),j=e(42075),K=e(25593),d=e(85265),V=e(92067),g=e(5251),ne=e(3616),x=e(36146),H=e(89240),n=e(85893),Q=(0,t.forwardRef)(function(y,Re){var C=(0,t.useState)(!1),ve=A()(C,2),Y=ve[0],he=ve[1],te=(0,t.useRef)(),D=new x.Uo("components.appForm"),q=function(F){return(0,n.jsxs)(h.Z,{bordered:!0,extra:F.action,style:{marginBottom:10},children:[(0,n.jsx)(h.Z,{title:D.format("createLinkItemTitle"),ghost:!0,children:(0,n.jsxs)(s.Z,{children:[(0,n.jsx)(c.Z,{span:6,children:(0,n.jsx)(v.Z,{label:D.format("createLinkItemName"),name:"name",width:"md",readonly:!0})}),(0,n.jsxs)(c.Z,{span:14,children:[(0,n.jsx)(v.Z,{label:D.format("createLinkItemAlise"),name:"alise",width:"md",readonly:!0,tooltip:D.format("createLinkItemAliseTip"),hidden:!0}),(0,n.jsx)(O.Z,{label:D.format("createLinkItemAlise"),tooltip:D.format("createLinkItemAliseTip"),children:(0,n.jsx)(j.Z,{direction:"vertical",children:[F.name,F.record.alise].map(function(W){return(0,n.jsx)(K.Z.Text,{copyable:!0,children:W})})})})]}),(0,n.jsx)(c.Z,{span:4,children:(0,n.jsx)(a.Z,{label:D.format("createLinkItemVolume"),name:"volume"})})]})}),(0,n.jsx)(h.Z,{ghost:!0,title:D.format("createLinkItemEnv"),children:(0,n.jsx)(j.Z,{direction:"vertical",children:F.record.env&&(0,g.oZ)(F.record.env).map(function(W,be){return(0,n.jsx)(K.Z.Text,{copyable:{icon:(0,n.jsx)(p.Z,{}),onCopy:function(){y.onAddEnv(W.name,W.value)},tooltips:[D.format("createLinkAddToEnv"),"success"]},code:!0,ellipsis:{tooltip:"".concat(W.name,"=").concat(W.value)},children:"".concat(W.name,"=").concat(W.value)},be)})},"linkEnv")})]})},ue=function(F){var W,be,Ne=!1,Se=(W=(be=te.current)===null||be===void 0?void 0:be.getList())!==null&&W!==void 0?W:[];if(Se.map(function(X){X.name==F.name&&(Ne=!0)}),!Ne){var We;(We=te.current)===null||We===void 0||We.add(F)}};return(0,t.useImperativeHandle)(Re,function(){return{setDefaultLink:function(F){F&&F.map(function(W){W.name!=""&&ue(W)})}}}),(0,n.jsxs)(h.Z,{title:D.format("createLinkTitle"),headerBordered:!0,tooltip:"".concat(D.format("createParamsDemo",{params:"--link list"})),ghost:!0,children:[(0,n.jsx)(R.u,{name:"links",actionRef:te,creatorButtonProps:{creatorButtonText:D.format("createLinkAddButton")},actionGuard:{beforeAddRow:function(F,W){return he(!0),!1}},copyIconProps:!1,min:0,itemRender:function(F,W){return(0,n.jsx)(q,{action:F.action,name:W.record.name,record:W.record})}}),(0,n.jsx)(d.Z,{title:D.format("createLinkSelectContainer"),width:ne.R_,footer:!1,open:Y,onClose:function(){return he(!1)},children:(0,n.jsx)(V.Z,{onSelect:function(F){ue({name:(0,g.fi)(F.Name,"/"),volume:!1,env:F.Config.Env,alise:(0,H.zY)(F.Name)}),he(!1)}})})]})}),$=Q,f=e(91058),Z=e(10523),Oe=e(24796),z=e(52688),fe=e(24963);function De(){var y=(0,t.useContext)(fe.Z),Re=y.message,C=new x.Uo("components.appForm");return(0,n.jsx)(h.Z,{ghost:!0,children:(0,n.jsxs)(G.UW,{children:[(0,n.jsx)(z.Z,{fieldProps:{onChange:function(Y){Y&&Re.warning(C.format("createAdvRunCommandPrivilegedNotice"))}},name:"privileged",tooltip:"".concat(C.format("createParamsDemo",{params:"--privileged"})),label:C.format("createAdvRunCommandPrivileged"),initialValue:!1}),(0,n.jsx)(z.Z,{name:"autoRemove",tooltip:"".concat(C.format("createParamsDemo",{params:"--rm"})),label:C.format("createAdvRunCommandAutoRemove"),initialValue:!1}),(0,n.jsx)(z.Z,{fieldProps:{onChange:function(Y){Y&&Re.warning(C.format("createAdvRunCommandHostPidNotice"))}},tooltip:"".concat(C.format("createParamsDemo",{params:"--pid host"})),name:"hostPid",label:C.format("createAdvRunCommandHostPid"),initialValue:!1})]})})}var le=e(62597),Ue=e(82346),Ke=e(20743),Ye=(0,t.forwardRef)(function(y,Re){var C=(0,t.useRef)(),ve=(0,t.useRef)(),Y=new x.Uo("components.appForm");(0,t.useImperativeHandle)(Re,function(){return{}});var he=function(D){var q,ue,ee=!1,F=(q=(ue=C.current)===null||ue===void 0?void 0:ue.getList())!==null&&q!==void 0?q:[];if(F.map(function(be){be.name==D.name&&(ee=!0)}),!ee){var W;(W=C.current)===null||W===void 0||W.add(D)}};return(0,n.jsxs)(h.Z,{ghost:!0,title:Y.format("createNetworkTitle"),tooltip:"".concat(Y.format("createParamsDemo",{params:"--network list"})),headerBordered:!0,extra:(0,n.jsx)(j.Z,{children:y.showUseBridgeNetwork&&(0,n.jsx)(z.Z,{name:"useBridgeNetwork",initialValue:!0,fieldProps:{checkedChildren:Y.format("createNetworkUseBridgeNetwork"),unCheckedChildren:Y.format("createNetworkUseBridgeNetwork")}},"useBridgeNetwork")}),children:[(0,n.jsx)(R.u,{name:"network",actionRef:C,creatorButtonProps:{creatorButtonText:Y.format("createNetworkAddButton")},actionGuard:{beforeAddRow:function(D,q){var ue;return(ue=ve.current)===null||ue===void 0||ue.show(),!1}},copyIconProps:!1,min:0,itemRender:function(D,q){return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(G.UW,{children:[(0,n.jsx)(v.Z,{label:Y.format("createNetworkName"),name:"name",width:"md",disabled:!0,fieldProps:{value:q.record.name}}),(0,n.jsx)(v.Z,{label:Y.format("createNetworkAlise"),name:"alise",tooltip:Y.format("createNetworkAliseTip"),placeholder:Y.format("createNetworkAliseEmpty"),disabled:q.record.name=="bridge"}),(0,n.jsx)(v.Z,{label:"IpV4",name:"ipV4",width:"md",disabled:q.record.name=="bridge",fieldProps:{addonAfter:q.record.subnet}}),q.record.subnetV6&&(0,n.jsx)(v.Z,{label:"IpV6",name:"ipV6",width:"md",disabled:q.record.name=="bridge",fieldProps:{addonAfter:q.record.subnetV6}}),(0,n.jsx)(O.Z,{label:" ",children:D.action})]})})}}),(0,n.jsx)(Ke.Z,{ref:ve,onSelect:function(D){he({name:D.Name,alise:[""],subnet:D.IPAM.Config&&D.IPAM.Config[0].Subnet,subnetV6:D.IPAM.Config&&D.IPAM.Config[1]&&D.IPAM.Config[1].Subnet})}})]})}),re=Ye,rn=e(82034),ye=e(52255),Je=e(59252),Fe=e(73813),Cn=function(Re){var C=new x.Uo("components.appForm");return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(h.Z,{title:C.format("createSelfNetworkTitle"),subTitle:C.format("createSelfNetworkTitleTip"),tooltip:"".concat(C.format("createParamsDemo",{params:"--network string --ip string --ip6 string"})),ghost:!0,children:[(0,n.jsxs)(G.UW,{children:[(0,n.jsx)(v.Z,{label:C.format("createSelfNetworkIp",{ip:"ipv4"}),name:["ipV4","address"],width:"md",tooltip:C.format("createSelfNetworkIpTip",{ip:"ipv4",example:"192.168.1.5"}),placeholder:"192.168.1.5"}),(0,n.jsx)(P.Z,{name:["ipV4"],children:function(Y){var he=Y.ipV4;return(0,n.jsx)(v.Z,{label:C.format("createSelfNetworkIpSubnet",{ip:"ipv4"}),name:["ipV4","subnet"],width:"md",required:he&&he.address,tooltip:C.format("createSelfNetworkIpSubnetTip",{ip:"ipv4",example:"192.168.1.0/24"}),placeholder:"192.168.1.0/24",rules:[{required:he&&he.address}]})}}),(0,n.jsx)(v.Z,{label:C.format("createSelfNetworkIpGateway",{ip:"ipv4"}),name:["ipV4","gateway"],width:"md",tooltip:C.format("createSelfNetworkIpGatewayTip",{ip:"ipv4",example:"192.168.1.1"}),placeholder:"192.168.1.1"}),(0,n.jsx)(z.Z,{label:C.format("createSelfNetworkIpV6Enable"),name:"enableIpV6Address"})]}),(0,n.jsx)(P.Z,{name:["enableIpV6Address"],children:function(Y){var he=Y.enableIpV6Address;if(he)return(0,n.jsxs)(G.UW,{children:[(0,n.jsx)(v.Z,{label:C.format("createSelfNetworkIp",{ip:"ipv6"}),name:["ipV6","address"],width:"md",tooltip:C.format("createSelfNetworkIpTip",{ip:"ipv6",example:"2001:db8::5"}),placeholder:"2001:db8::5"}),(0,n.jsx)(P.Z,{name:["ipV6"],children:function(D){var q=D.ipV6;return(0,n.jsx)(v.Z,{label:C.format("createSelfNetworkIpSubnet",{ip:"ipv6"}),name:["ipV6","subnet"],width:"md",required:q&&q.address,tooltip:C.format("createSelfNetworkIpSubnetTip",{ip:"ipv6",example:"2001:db8::/48"}),placeholder:"2001:db8::/48",rules:[{required:q&&q.address}]})}}),(0,n.jsx)(v.Z,{label:C.format("createSelfNetworkIpGateway",{ip:"ipv6"}),name:["ipV6","gateway"],width:"md",tooltip:C.format("createSelfNetworkIpGatewayTip",{ip:"ipv6",example:"2001:db8::1"}),placeholder:"2001:db8::1"})]})}})]})})},Le=Cn,An=e(90672);function yn(){var y=new x.Uo("components.appForm");return(0,n.jsx)(h.Z,{ghost:!0,title:y.format("createHookTitle"),subTitle:"",children:(0,n.jsx)(An.Z,{label:y.format("createHookContainerCreate"),name:["hook","containerCreate"],placeholder:y.format("createHookContainerCreateTip")})})}var Tn=e(93529),Zn=e(66309),Un=e(96074),Ln=e(83062),Sn=e(64789),Wn=e(85060),jn=e(78451),Bn=e(99861),Nn=e(80821),kn=e(1699),Kn=e(80271),Fn=e(47248),Vn=e(98510);function Hn(y){var Re=(0,t.useState)(!1),C=A()(Re,2),ve=C[0],Y=C[1],he=(0,t.useContext)(o.Z),te=he.createFormRef,D=he.volumeListRef,q=he.createEnvRef,ue=he.domainRef,ee=new x.Uo("components.appForm"),F=(0,t.useState)(!1),W=A()(F,2),be=W[0],Ne=W[1];(0,t.useEffect)(function(){if(te.current){var X;Ne(!!((X=te.current)!==null&&X!==void 0&&X.getFieldValue("id")))}},[te.current]);function Se(X){return We.apply(this,arguments)}function We(){return We=N()(u()().mark(function X(de){var U,je,T,L,i,ce,xe,me,ge,Pe,Ee,Ae;return u()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,(0,Fe.YU)({md5:de});case 2:return T=ae.sent,be||(xe=(L=te.current)===null||L===void 0?void 0:L.getFieldsValue(),(i=te.current)===null||i===void 0||i.resetFields(),(ce=te.current)===null||ce===void 0||ce.setFieldsValue({siteName:xe.siteName,siteTitle:xe.siteTitle})),T.data.info.Config.Env&&T.data.info.Config.Env.map(function(oe){var we,He=oe.split("=");(we=q.current)===null||we===void 0||we.addEnvItem(He[0],He.slice(1).join("="))}),(U=te.current)===null||U===void 0||U.setFieldValue("imageName",de),(je=te.current)===null||je===void 0||je.setFieldValue("workDir",T.data.info.Config.WorkingDir),be||((me=ue.current)===null||me===void 0||me.setExposePort(T.data.info.Config.ExposedPorts),T.data.info.Config.Volumes?(Ee=[],Object.keys(T.data.info.Config.Volumes).map(function(oe,we){Ee.push(oe)}),(Pe=D.current)===null||Pe===void 0||Pe.setDefaultDestPath(Ee)):(Ae=D.current)===null||Ae===void 0||Ae.setDefaultDestPath([]),(ge=te.current)===null||ge===void 0||ge.setFieldsValue({workDir:{value:"",useDefault:!0,default:T.data.info.Config.WorkingDir},user:{value:"",useDefault:!0,default:T.data.info.Config.User},command:{value:"",useDefault:!0,default:T.data.info.Config.Cmd&&T.data.info.Config.Cmd.join(" ")},entrypoint:{value:"",useDefault:!0,default:T.data.info.Config.Entrypoint&&T.data.info.Config.Entrypoint.join(" ")}})),ae.abrupt("return",!0);case 9:case"end":return ae.stop()}},X)})),We.apply(this,arguments)}return(0,t.useEffect)(function(){y.fromImageId&&Se(y.fromImageId)},[y.fromImageId]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Z,{destroyOnHidden:!0,open:ve,width:ne.R_,title:ee.format("dockerImageTitle"),footer:!1,onClose:function(){Y(!1)},children:(0,n.jsx)(Vn.C,{columns:[{title:"Id",dataIndex:"Id",search:!1,width:120,render:function(de,U,je,T,L){return(0,n.jsx)(jn.Z,{content:U.Id.slice(7,19)})}},{title:x.FD.format("listImageName"),dataIndex:"tag",render:function(de,U,je,T){return(0,n.jsx)(jn.Z,{content:U.RepoTags[0]})}},{title:"Digest",width:120,render:function(de,U,je,T,L){var i=U.RepoDigests&&U.RepoDigests[0];return i?i.substring(i.indexOf("@")+8).substring(0,12):(0,n.jsx)(Zn.Z,{color:"warning",children:new x.Uo("components.appDetail").format("checkImageUpgradeOption.-3")})}},{title:x.FD.format("listCreatedAt"),dataIndex:"Created",search:!1,width:180,render:function(de,U,je,T){return(0,n.jsx)("div",{children:(0,g.ZM)(U.Created*1e3)},U.Id)},sorter:function(de,U){return de.Created-U.Created}},{title:x.FD.format("listManage"),valueType:"option",key:"option",width:50,render:function(de,U,je,T){return(0,n.jsx)(j.Z,{split:(0,n.jsx)(Un.Z,{type:"vertical"}),children:(0,n.jsx)(Nn.Z,{buttonProps:{icon:(0,n.jsx)(Sn.Z,{}),type:"link"},tips:x.FD.format("listManageUse"),action:function(){return Se(U.RepoTags[0])},onSuccess:function(){Y(!1)}},"addImage")})}}],request:function(){var X=N()(u()().mark(function de(U,je,T){var L,i,ce;return u()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=3,(0,Fe.KG)({tag:U.tag});case 3:return L=me.sent,i=0,ce=[],L.data.list&&(ce=L.data.list.flatMap(function(ge){return ge.RepoTags.map(function(Pe){var Ee,Ae=(Ee=ge.RepoDigests)===null||Ee===void 0?void 0:Ee.find(function(Ve){var ae=Ve.split("@"),oe=A()(ae,2),we=oe[0],He=oe[1];return Pe.includes(we)});return{Key:i++,Id:ge.Id,Created:ge.Created,RepoTags:[Pe],RepoDigests:[Ae]}})})),me.abrupt("return",{data:ce,success:!0,total:ce.length});case 8:case"end":return me.stop()}},de)}));return function(de,U,je){return X.apply(this,arguments)}}(),rowKey:"Key"})},"imageTableList"),(0,n.jsxs)(j.Z.Compact,{children:[(0,n.jsx)(v.Z,{width:"lg",label:ee.format("dockerImageImageName"),name:"imageName",disabled:!0,placeholder:ee.format("dockerImageImageNameEmpty"),rules:[{required:!0}],required:!0}),(0,n.jsx)(O.Z,{label:" ",children:(0,n.jsx)(J.ZP,{type:"primary",onClick:function(){return Y(!0)},children:ee.format("dockerImageTitle")},"showBtn")}),(0,n.jsx)(P.Z,{name:["imageName"],children:function(de){var U=de.imageName;if(U)return(0,n.jsx)(O.Z,{label:" ",children:(0,n.jsx)(Bn.Z,{finishAutoHide:!0,image:U?[U]:[],trigger:(0,n.jsx)(Ln.Z,{title:ee.format("dockerImageUpgradeImageTip"),children:(0,n.jsx)(J.ZP,{icon:(0,n.jsx)(Wn.Z,{}),children:ee.format("dockerImageUpgradeImageButton")})})})})}}),(0,n.jsx)(O.Z,{label:" ",children:(0,n.jsx)(Fn.Z,{onFinish:function(de){Se(de)}},"remote")}),(0,n.jsx)(O.Z,{label:" ",children:(0,n.jsx)(P.Z,{name:["imageName"],children:function(de){var U=de.imageName;if(U)return(0,n.jsx)(kn.u,{access:"canSeeEnableCe",showProTips:!0,children:function(T){var L=T.canSeeEnableCe;return(0,n.jsx)(Kn.Z,{imageId:U,trigger:(0,n.jsx)(J.ZP,{disabled:L,children:ee.format("dockerImageFileExplorer")})})}})}})})]})]})}var $n=e(44349);function Gn(){var y=new x.Uo("components.appForm");return(0,n.jsx)(h.Z,{ghost:!0,title:y.format("createDevice"),headerBordered:!0,tooltip:"".concat(y.format("createParamsDemo",{params:"--device list"})),children:(0,n.jsx)($n.Z,{name:"device",showAddButtonLabel:"".concat(x.FD.format("listManageAdd")).concat(y.format("createDevice")),hideCopyButton:!0,showAddButton:!0,gap:10,items:[{label:y.format("createDeviceHost"),name:"host",width:"md",placeholder:"/dev/tty0"},{label:y.format("createDeviceDest"),name:"dest",width:"md",placeholder:"/dev/tty0"}]})})}var In=e(64317);function zn(){var y=new x.Uo("components.appForm");return(0,n.jsxs)(h.Z,{ghost:!0,children:[(0,n.jsxs)(s.Z,{children:[(0,n.jsx)(c.Z,{span:4,children:(0,n.jsx)(z.Z,{label:y.format("createGpus"),name:["gpus","enable"]})}),(0,n.jsx)(c.Z,{span:20,children:(0,n.jsx)(P.Z,{name:["gpus"],children:function(C){var ve=C.gpus;if(ve&&ve.enable)return(0,n.jsx)(In.Z,{tooltip:"".concat(y.format("createParamsDemo",{params:"--gpus 'device=0'"})),mode:"tags",label:y.format("createGpusDevice"),name:["gpus","device"],placeholder:y.format("createGpusDeviceEmpty")})}})})]}),(0,n.jsx)(P.Z,{name:["gpus"],children:function(C){var ve=C.gpus;if(ve&&ve.enable)return(0,n.jsx)(In.Z,{tooltip:"".concat(y.format("createParamsDemo",{params:"--gpus 'capabilities=compute,utility'"})),label:y.format("createGpusCap"),name:["gpus","capabilities"],mode:"multiple",fieldProps:{allowClear:!0},options:y.option("createGpusCapOption",["compute","compat32","graphics","utility","video","display"])})}})]})}var Yn=e(55730),Jn=e(27323),Xn=e(44771),Qn=e(33879),qn=e(96486),sn=e.n(qn),er=e(73396),On=e(14946),nr=e(13822),rr=e(64412),tr=e(27166),ar=(0,t.forwardRef)(function(y,Re){var C=(0,t.useContext)(fe.Z),ve=C.notice,Y=(0,Ue.useAccess)(),he=(0,t.useState)("basic"),te=A()(he,2),D=te[0],q=te[1],ue=new x.Uo("app"),ee=new x.Uo("components.appForm"),F=(0,t.useRef)(),W=(0,t.useRef)(),be=(0,t.useRef)(),Ne=(0,t.useRef)(),Se=(0,t.useRef)(),We=(0,t.useState)(!1),X=A()(We,2),de=X[0],U=X[1],je=(0,t.useRef)();return(0,t.useImperativeHandle)(Re,function(){return{show:function(L){return N()(u()().mark(function i(){var ce,xe,me,ge,Pe,Ee,Ae,Ve,ae,oe,we,He,ln,un,dn,cn,mn,pn,Xe,_n,fn,vn,hn,Qe,$e,r,Me,Dn,qe,bn,Mn,en,Rn,gn;return u()().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if((ce=F.current)===null||ce===void 0||ce.resetFields(),L){Ie.next=3;break}return Ie.abrupt("return");case 3:return U(!0),(xe=je.current)===null||xe===void 0||xe.loading(),Ie.prev=5,Ie.next=8,(0,le.iE)({id:L});case 8:if($e=Ie.sent,r=(me=$e.data.containerInfo)===null||me===void 0?void 0:me.Info,Me={info:{}},!r){Ie.next=16;break}return Ie.next=14,(0,Fe.YU)({md5:r.Image});case 14:Dn=Ie.sent,Me=Dn.data;case 16:return qe=[],Ie.next=19,(0,On.jR)();case 19:return bn=Ie.sent,qe=bn.data.list,Mn=function(l){if(!l)return{};var b=l[$e.data.siteName];if(!b)return{};var M=qe&&qe.find(function(se){return se.Id==b.NetworkID});return{ipV4:{address:b.IPAddress,gateway:b.Gateway,subnet:M&&M.IPAM.Config&&M.IPAM.Config[0]&&M.IPAM.Config[0].Subnet},ipV6:{address:b.GlobalIPv6Address,gateway:b.IPv6Gateway,subnet:M&&M.IPAM.Config&&M.IPAM.Config[1]&&M.IPAM.Config[1].Subnet},enableIpV6Address:M&&M.IPAM.Config&&M.IPAM.Config[1],bindIpV6:!!(M&&M.IPAM.Config&&M.IPAM.Config[1])}}(r==null?void 0:r.NetworkSettings.Networks),en=[],Ie.next=25,function(){var l=N()(u()().mark(function b(M,se){var Te;return u()().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(!(!(se!=null&&se.NetworkSettings)||!(se!=null&&se.NetworkSettings.Networks)||!(se!=null&&se.NetworkSettings.Networks[M]))){Ce.next=2;break}return Ce.abrupt("return",[]);case 2:return Ce.next=4,(0,On.IS)({name:M});case 4:if(Te=Ce.sent,Ce.t0=Te.data.info.Containers,!Ce.t0){Ce.next=10;break}return Ce.next=9,Promise.all(Object.entries(Te.data.info.Containers).filter(function(ke){var tn=A()(ke,2),xn=tn[0],an=tn[1];return an.Name!=M}).map(function(){var ke=N()(u()().mark(function tn(xn){var an,sr,on,nn,wn,Ge,Pn;return u()().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:if(an=A()(xn,2),sr=an[0],on=an[1],on.Name==M){ze.next=9;break}return ze.next=4,(0,nr.jV)({md5:on.Name});case 4:return wn=ze.sent,Ge=wn.data.info,Pn=(nn=se.HostConfig)===null||nn===void 0||(nn=nn.VolumesFrom)===null||nn===void 0?void 0:nn.includes(on.Name),Pn&&Ge.Mounts&&en.push.apply(en,B()(Ge.Mounts.map(function(ir){var En;return(En=ir.Destination)!==null&&En!==void 0?En:""}))),ze.abrupt("return",{name:on.Name,alise:Ge&&(0,H.zY)(Ge.Name),env:Ge&&Ge.Config.Env,volume:Pn});case 9:case"end":return ze.stop()}},tn)}));return function(tn){return ke.apply(this,arguments)}}()));case 9:Ce.t0=Ce.sent;case 10:return Ce.abrupt("return",Ce.t0);case 11:case"end":return Ce.stop()}},b)}));return function(b,M){return l.apply(this,arguments)}}()($e.data.siteName,r);case 25:Rn=Ie.sent,(ge=F.current)===null||ge===void 0||ge.setFieldsValue(_()({id:r==null?void 0:r.Id,siteTitle:$e.data.siteTitle,siteName:$e.data.siteName,hook:$e.data.env.hook,imageName:r==null?void 0:r.Config.Image,hostname:r==null?void 0:r.Config.Hostname,privileged:r==null||(Pe=r.HostConfig)===null||Pe===void 0?void 0:Pe.Privileged,useHostNetwork:(r==null||(Ee=r.HostConfig)===null||Ee===void 0?void 0:Ee.NetworkMode)=="host",publishAllPorts:r==null||(Ae=r.HostConfig)===null||Ae===void 0?void 0:Ae.PublishAllPorts,groupAdd:r==null||(Ve=r.HostConfig)===null||Ve===void 0?void 0:Ve.GroupAdd,workDir:{value:r==null?void 0:r.Config.WorkingDir,useDefault:Me.info.Config.WorkingDir==(r==null?void 0:r.Config.WorkingDir),default:Me&&Me.info.Config&&Me.info.Config.WorkingDir},user:{value:r==null?void 0:r.Config.User,useDefault:Me.info.Config.User==(r==null?void 0:r.Config.User),default:Me.info.Config.User},command:{value:r==null||(ae=r.Config.Cmd)===null||ae===void 0?void 0:ae.join(" "),useDefault:sn().isEqual(Me.info.Config.Cmd,r==null?void 0:r.Config.Cmd),default:((oe=Me.info.Config)===null||oe===void 0?void 0:oe.Cmd)&&Me.info.Config.Cmd.join(" ")},entrypoint:{value:r==null?void 0:r.Config.Entrypoint,useDefault:sn().isEqual(Me.info.Config.Entrypoint,r==null?void 0:r.Config.Entrypoint),default:((we=Me.info)===null||we===void 0||(we=we.Config)===null||we===void 0?void 0:we.Entrypoint)&&Me.info.Config.Entrypoint.join(" ")},shmsize:(0,H.Rk)(r==null||(He=r.HostConfig)===null||He===void 0?void 0:He.ShmSize),cpus:(0,H.PD)(r==null||(ln=r.HostConfig)===null||ln===void 0?void 0:ln.NanoCpus),memory:(0,H.pM)(r==null||(un=r.HostConfig)===null||un===void 0?void 0:un.Memory),environment:(r==null?void 0:r.Config.Env)&&(0,g.oZ)(r.Config.Env,"="),label:function(l){return l&&Object.entries(l).map(function(b){var M=A()(b,2),se=M[0],Te=M[1];return{name:se,value:Te}})}(r==null?void 0:r.Config.Labels),volumes:function(l){return l==null?void 0:l.filter(function(b){var M;return!en||en.length==0||!en.includes((M=b.Destination)!==null&&M!==void 0?M:"")}).map(function(b){return{host:b.Type=="bind"?b.Source:b.Name,dest:b.Destination,type:b.Type,permission:b.RW?"write":"readonly"}})}(r==null?void 0:r.Mounts),ports:(0,H.yi)(r),links:Rn,network:function(l){return l&&Object.entries(l).map(function(b){var M=A()(b,2),se=M[0],Te=M[1],Be=qe&&qe.find(function(ke){return ke.Name==se}),Ce="";return Te.Aliases&&Te.Aliases.forEach(function(ke){if(!ke.includes("pod.dpanel.local")){Ce=ke;return}}),{name:se,alise:Ce,ipV4:Te.IPAddress,subnet:"".concat(Be&&Be.IPAM.Config&&Be!==null&&Be!==void 0&&Be.IPAM.Config[0]?Be==null?void 0:Be.IPAM.Config[0].Subnet:"-","/").concat(Te.IPPrefixLen)}})}(r==null?void 0:r.NetworkSettings.Networks),restart:function(l){return l?{name:l==null?void 0:l.Name,maxAttempt:l==null?void 0:l.MaximumRetryCount}:{name:"no"}}(r==null||(dn=r.HostConfig)===null||dn===void 0?void 0:dn.RestartPolicy),extraHosts:(0,g.oZ)(r==null||(cn=r.HostConfig)===null||cn===void 0?void 0:cn.ExtraHosts,":"),autoRemove:r==null||(mn=r.HostConfig)===null||mn===void 0?void 0:mn.AutoRemove,log:function(l,b){return{driver:(b=l==null?void 0:l.Type)!==null&&b!==void 0?b:"json-file",maxFile:(l==null?void 0:l.Config)&&l.Config["max-file"],maxSize:(l==null?void 0:l.Config)&&l.Config["max-size"]}}(r==null||(pn=r.HostConfig)===null||pn===void 0?void 0:pn.LogConfig),dns:r==null||(Xe=r.HostConfig)===null||Xe===void 0||(Xe=Xe.Dns)===null||Xe===void 0?void 0:Xe.join(`
`),gpus:function(l){var b=l==null?void 0:l.find(function(se){return se.Driver=="nvidia"});if(!b)return{enable:!1};var M=b.Capabilities&&b.Capabilities[0];return{device:b.DeviceIDs,capabilities:M&&M.includes("gpu")?[]:M,enable:!0}}(r==null||(_n=r.HostConfig)===null||_n===void 0?void 0:_n.DeviceRequests),device:function(l){return l==null?void 0:l.map(function(b){return{host:b.PathOnHost,dest:b.PathInContainer}})}(r==null||(fn=r.HostConfig)===null||fn===void 0?void 0:fn.Devices),hostPid:(r==null||(vn=r.HostConfig)===null||vn===void 0?void 0:vn.PidMode)=="host",capAdd:r==null||(hn=r.HostConfig)===null||hn===void 0?void 0:hn.CapAdd,healthcheck:function(l,b,M){if(!l)return{};var se=l!=null&&(b=l.Test)!==null&&b!==void 0&&b.includes("CMD-SHELL")?"CMD-SHELL":"CMD";return{interval:(l==null?void 0:l.Interval)&&l.Interval/le.nL.Second,timeout:(l==null?void 0:l.Timeout)&&l.Timeout/le.nL.Second,retries:l==null?void 0:l.Retries,cmd:l!=null&&l.Test?l==null||(M=l.Test)===null||M===void 0?void 0:M.slice(1).join(" "):"",shellType:se}}(r==null?void 0:r.Config.Healthcheck),useBridgeNetwork:function(l){return!!(l&&l.bridge)}(r==null?void 0:r.NetworkSettings.Networks),enableBindHost:r==null||(Qe=r.HostConfig)===null||Qe===void 0||(Qe=Qe.ExtraHosts)===null||Qe===void 0?void 0:Qe.some(function(l){return l.includes(":host-gateway")})},Mn));case 27:return Ie.prev=27,(gn=je.current)===null||gn===void 0||gn.finish(),Ie.finish(27);case 30:case"end":return Ie.stop()}},i,null,[[5,,27,30]])}))()}}}),(0,n.jsx)(o.Z.Provider,{value:{createFormRef:F,volumeListRef:W,domainRef:be,createEnvRef:Se,createLinkRef:Ne},children:(0,n.jsx)(tr.Z,{title:x.Ob.format("container.create"),trigger:y.showTrigger?(0,n.jsx)(J.ZP,{type:"primary",disabled:!Y.canSeeContainerListManageCreate,children:x.Ob.format("container.create")}):void 0,drawerProps:{width:ne.R_,rootClassName:"createAppWapper"},ref:je,formRef:F,onFinish:function(){var T=N()(u()().mark(function L(i){var ce,xe,me,ge,Pe,Ee,Ae;return u()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if((ce=je.current)===null||ce===void 0||ce.loading(),Ee={id:i.id,siteTitle:i.siteTitle,siteName:i.siteName,hostname:i.hostname,imageName:i.imageName,environment:i.environment,links:i.links,ports:i.ports,volumes:i.volumes,network:i.network&&i.network.map(function(oe){return sn().isArray(oe.alise)||(oe.alise=[oe.alise]),oe}),privileged:(xe=i.privileged)!==null&&xe!==void 0?xe:!1,autoRemove:(me=i.autoRemove)!==null&&me!==void 0?me:!1,restartPolicy:i.restart,cpus:i.cpus,memory:i.memory,shmsize:(ge=i.shmsize)!==null&&ge!==void 0?ge:0,workDir:i.workDir&&!i.workDir.useDefault?i.workDir.value:"",user:i.user&&!i.user.useDefault?i.user.value:"",groupAdd:i.groupAdd,command:i.command&&!i.command.useDefault?i.command.value:"",entrypoint:i.entrypoint&&!i.entrypoint.useDefault?i.entrypoint.value:"",useHostNetwork:i.useHostNetwork,bindIpV6:i.bindIpV6,log:i.log,dns:i.dns,label:i.label,publishAllPorts:i.publishAllPorts,extraHosts:i.extraHosts,ipV4:i.ipV4,ipV6:i.ipV6,device:i.device,gpus:i.gpus,hook:i.hook,hostPid:i.hostPid,capAdd:i.capAdd,useBridgeNetwork:(Pe=i.useBridgeNetwork)!==null&&Pe!==void 0?Pe:!0},!(!i.useBridgeNetwork&&!i.useHostNetwork&&(!i.network||i.network.length==0))){ae.next=5;break}return ve.error(ue.format("createMessageNoBridgeNetworkMustHasUseNetwork")),ae.abrupt("return",!1);case 5:return i.useBridgeNetwork&&Ee.network&&!Ee.network.find(function(oe){return oe.name=="bridge"})&&Ee.network.push({name:"bridge",alise:[],ipV4:""}),i.healthcheck&&i.healthcheck.cmd&&i.healthcheck.cmd!=""&&(Ee.healthcheck=i.healthcheck),ae.next=9,(0,le.$G)(Ee).finally(function(){var oe;(oe=je.current)===null||oe===void 0||oe.finish()});case 9:return Ae=ae.sent,y.onFinish&&y.onFinish(Ae.data.containerId),ae.abrupt("return",!0);case 12:case"end":return ae.stop()}},L)}));return function(L){return T.apply(this,arguments)}}(),open:de,onOpenChange:function(L){var i;U(L),!L&&((i=F.current)===null||i===void 0||i.resetFields())},children:(0,n.jsxs)(h.Z,{direction:"column",gutter:[0,10],ghost:!0,children:[(0,n.jsxs)(h.Z,{ghost:!0,title:ue.format("createTitle"),children:[(0,n.jsx)(O.Z,{hidden:!0,name:"id"}),(0,n.jsx)(v.Z,{name:"siteTitle",label:ue.format("createSiteTitle"),placeholder:ue.format("createSiteTitleEmpty")}),(0,n.jsxs)(G.UW,{children:[(0,n.jsx)(v.Z,{width:"md",name:"siteName",label:ue.format("createSiteName"),required:!0,rules:[{required:!0}],tooltip:"".concat(ee.format("createParamsDemo",{params:"--name string"})),placeholder:ue.format("createSiteNameEmpty")}),(0,n.jsx)(v.Z,{label:"Hostname",name:"hostname",width:"md",tooltip:"".concat(ee.format("createParamsDemo",{params:"--hostname string"}))})]}),(0,n.jsx)(Hn,{fromImageId:""})]}),(0,n.jsx)(S.Z,{offsetTop:10,target:function(){return document.querySelector(".createAppWapper .ant-drawer-body")},children:(0,n.jsx)(h.Z,{style:{margin:-20},children:(0,n.jsx)(E.Z,{activeKey:D,onChange:function(L){q(L)},items:ee.option("createTabOption",["basic","link","run-command","resource","cap"]).map(function(T){return{label:T.label,key:T.value}})})})}),(0,n.jsxs)(ye.Z,{show:D=="basic",children:[(0,n.jsx)(rn.Z,{ref:be,showBindHost:!0,showBindIpV6:!0,showBindAll:!0}),(0,n.jsx)(f.Z,{showAddButton:!0,showImportButton:!0,showCodeMode:!0,ref:Se,drawerProps:{title:ee.format("createEnvTitle"),tooltip:"".concat(ee.format("createParamsDemo",{params:"-e, --env list"})),ghost:!0}}),(0,n.jsx)(Z.Z,{showDefault:!0,ref:W}),(0,n.jsx)(P.Z,{name:["siteName","useHostNetwork"],children:function(L){var i=L.siteName,ce=L.useHostNetwork;if(!ce)return(0,n.jsx)(Le,{})}}),(0,n.jsx)(rr.Z,{}),(0,n.jsx)(Oe.Z,{})]}),(0,n.jsxs)(ye.Z,{show:D=="link",children:[(0,n.jsx)(P.Z,{name:["siteName","useHostNetwork"],children:function(L){var i=L.siteName,ce=L.useHostNetwork;return ce?(0,n.jsx)(h.Z,{children:(0,n.jsx)(m.Z,{showIcon:!0,description:ue.format("createNetworkDesc")})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)($,{onAddEnv:function(me,ge){var Pe;(Pe=Se.current)===null||Pe===void 0||Pe.addEnvItem(me,ge)},ref:Ne}),(0,n.jsx)(re,{showUseBridgeNetwork:!0,siteName:i}),(0,n.jsx)(Je.Z,{})]})}}),(0,n.jsx)(Gn,{})]}),(0,n.jsxs)(ye.Z,{show:D=="run-command",children:[(0,n.jsxs)(G.UW,{children:[(0,n.jsx)(Xn.Z,{ghost:!0,defaultValue:"always",showLabel:!0}),(0,n.jsx)(De,{})]}),(0,n.jsx)(Qn.Z,{showCommand:!0,showEntrypoint:!0,showWorkDir:!0,showUser:!0}),(0,n.jsx)(Jn.Z,{}),(0,n.jsx)(yn,{})]}),(0,n.jsxs)(ye.Z,{show:D=="resource",children:[(0,n.jsx)(er.Z,{}),(0,n.jsx)(Yn.Z,{showShmsize:!0}),(0,n.jsx)(zn,{})]}),(0,n.jsx)(ye.Z,{show:D=="cap",children:(0,n.jsx)(Tn.Z,{})})]})})})}),or=ar},92067:function(Ze,pe,e){e.d(pe,{Z:function(){return J}});var _e=e(15009),_=e.n(_e),ie=e(99289),u=e.n(ie),w=e(13822),B=e(64789),I=e(9773),N=e(42075),k=e(83062),A=e(83622),h=e(37413),O=e(5251),v=e(36146),G=e(67255),P=e(85893);function J(S){return(0,P.jsx)(I.Z,{columns:[{title:v.FD.format("listContainerName"),dataIndex:"name",render:function(m,t,o,p){return(0,P.jsx)(N.Z,{direction:"vertical",style:{textAlign:"left"},children:t==null?void 0:t.Names.map(function(a){return(0,O.fi)(a,"/")})},t.Id)}},{title:v.FD.format("listPort"),dataIndex:"ports",search:!1,render:function(m,t,o,p){var a=[],R=[];return t!=null&&t.Ports&&t.Ports.map(function(s,c){s.PublicPort?a.push(s):R.push(s)}),(0,P.jsx)(h.Z,{publicPort:a,privatePort:R,domain:[]})}},{title:v.FD.format("listManage"),valueType:"option",key:"option",ellipsis:!0,width:100,render:function(m,t,o,p){return[(0,P.jsx)(k.Z,{title:v.FD.format("listManageUse"),children:(0,P.jsx)(A.ZP,{type:"link",onClick:u()(_()().mark(function a(){var R;return _()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,w.jV)({md5:t.Id});case 2:R=c.sent,S.onSelect&&S.onSelect(R.data.info);case 4:case"end":return c.stop()}},a)})),children:(0,P.jsx)(B.Z,{})},t.Id)},t.Id)]}}],rowKey:"Id",request:function(){var E=u()(_()().mark(function m(t,o,p){var a;return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,w.IE)({siteTitle:t.name});case 2:return a=s.sent,s.abrupt("return",{data:a.data.list,success:!0,total:a.data.list.length});case 4:case"end":return s.stop()}},m)}));return function(m,t,o){return E.apply(this,arguments)}}(),pagination:(0,G.Oh)()})}},16970:function(Ze,pe,e){var _e=e(15009),_=e.n(_e),ie=e(99289),u=e.n(ie),w=e(5574),B=e.n(w),I=e(3616),N=e(24963),k=e(14946),A=e(36146),h=e(184),O=e(5966),v=e(62370),G=e(97462),P=e(52688),J=e(24739),S=e(17186),E=e(83622),m=e(34041),t=e(71230),o=e(15746),p=e(67294),a=e(85893),R=(0,p.forwardRef)(function(s,c){var j,K=(0,p.useState)(!1),d=B()(K,2),V=d[0],g=d[1],ne=(0,p.useRef)(),x=(0,p.useContext)(N.Z),H=x.message,n=new A.Uo("components.network");return(0,p.useImperativeHandle)(c,function(){return{}}),(0,a.jsxs)(h.a,{drawerProps:{width:I.R_},name:"createNetwork",title:n.format("createTitle"),open:V,onOpenChange:function($){g($)},formRef:ne,trigger:(j=s.trigger)!==null&&j!==void 0?j:(0,a.jsx)(E.ZP,{type:"primary",children:n.format("createTitle")}),onFinish:function(){var Q=u()(_()().mark(function $(f){var Z,Oe,z,fe,De,le,Ue,Ke,Ye,re,rn,ye,Je,Fe;return _()().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return ye={name:f.name,driver:(Z=f.driver)!==null&&Z!==void 0?Z:"bridge",ipSubnet:(Oe=f.ipSubnet)!==null&&Oe!==void 0?Oe:"",ipGateway:(z=f.ipGateway)!==null&&z!==void 0?z:"",ipRange:(fe=f.ipRange)!==null&&fe!==void 0?fe:"",ipAux:f.ipAux,enableIpV6:(De=f.enableIpV6)!==null&&De!==void 0?De:!1,ipV6Subnet:(le=f.ipV6Subnet)!==null&&le!==void 0?le:"",ipV6Gateway:(Ue=f.ipV6Gateway)!==null&&Ue!==void 0?Ue:"",ipV6Range:(Ke=f.ipV6Range)!==null&&Ke!==void 0?Ke:"",ipV6Aux:(Ye=f.ipV6Aux)!==null&&Ye!==void 0?Ye:[],driverOption:f.driverOption,internal:(re=f.internal)!==null&&re!==void 0?re:!1,attachable:(rn=f.attachable)!==null&&rn!==void 0?rn:!1},(f.driver=="macvlan"||f.driver=="ipvlan")&&(ye.driverOption||(ye.driverOption=[]),ye.driverOption.push({name:"parent",value:f.macvlanParentCard})),Le.next=4,(0,k.XY)(ye);case 4:if(Je=Le.sent,!(Je&&Je.data&&Je.data.id!="")){Le.next=10;break}return H.success(A.FD.format("finish")),s.onFinish&&s.onFinish(),(Fe=ne.current)===null||Fe===void 0||Fe.resetFields(),Le.abrupt("return",!0);case 10:case"end":return Le.stop()}},$)}));return function($){return Q.apply(this,arguments)}}(),children:[(0,a.jsx)(O.Z,{label:n.format("createFormName"),name:"name",required:!0,rules:[{required:!0}],placeholder:n.format("createFormNameEmpty")}),(0,a.jsx)(v.Z,{label:n.format("createFormDriver"),name:"driver",children:(0,a.jsxs)(m.Z,{defaultValue:"bridge",children:[(0,a.jsx)(m.Z.Option,{value:"bridge",children:"bridge"}),(0,a.jsx)(m.Z.Option,{value:"macvlan",children:"macvlan"}),(0,a.jsx)(m.Z.Option,{value:"ipvlan",children:"ipvlan"}),(0,a.jsx)(m.Z.Option,{value:"overlay",children:"overlay"})]})}),(0,a.jsx)(G.Z,{name:["driver"],children:function($){var f=$.driver;if(f=="macvlan"||f=="ipvlan")return(0,a.jsx)(O.Z,{required:!0,rules:[{required:!0}],label:n.format("createFormDriverMacvlanParentCard"),name:"macvlanParentCard",tooltip:n.format("createFormDriverMacvlanParentCardTip")})}}),(0,a.jsxs)(t.Z,{children:[(0,a.jsx)(o.Z,{span:8,children:(0,a.jsx)(P.Z,{label:n.format("createFormUserIpV4Subnet"),name:"userIpV4Subnet"})}),(0,a.jsx)(o.Z,{span:8,children:(0,a.jsx)(P.Z,{name:"internal",label:n.format("createFormInternal"),initialValue:!1})}),(0,a.jsx)(o.Z,{span:8,children:(0,a.jsx)(P.Z,{name:"attachable",label:n.format("createFormAttachable"),initialValue:!1})})]}),(0,a.jsx)(G.Z,{name:["userIpV4Subnet"],children:function($){var f=$.userIpV4Subnet;if(f)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(J.UW,{title:n.format("createFormIpTitle"),children:[(0,a.jsx)(O.Z,{label:n.format("createFormIpSubnet"),name:"ipSubnet",width:"md",tooltip:n.format("createFormIpSubnetTip"),placeholder:"192.168.0.0/16"}),(0,a.jsx)(O.Z,{label:n.format("createFormIpGateway"),name:"ipGateway",width:"md",placeholder:"192.168.0.1"}),(0,a.jsx)(O.Z,{label:n.format("createFormIpRange"),name:"ipRange",width:"md",placeholder:"192.168.1.0/24"})]}),(0,a.jsx)(S.u,{name:"ipAux",label:n.format("createFormIpAux"),children:(0,a.jsxs)(J.UW,{children:[(0,a.jsx)(O.Z,{label:n.format("createFormIpAuxDevice"),name:"device",width:"md"}),(0,a.jsx)(O.Z,{label:n.format("createFormIpAuxAddress"),name:"address",width:"md"})]})})]})}}),(0,a.jsxs)(t.Z,{children:[(0,a.jsx)(o.Z,{span:8,children:(0,a.jsx)(P.Z,{label:n.format("createFormEnableIpV6"),name:"enableIpV6"})}),(0,a.jsx)(o.Z,{children:(0,a.jsx)(P.Z,{label:n.format("createFormUserIpV6Subnet"),name:"userIpV6Subnet",fieldProps:{onChange:function($,f){if($){var Z;(Z=ne.current)===null||Z===void 0||Z.setFieldValue("enableIpV6",!0)}}}})})]}),(0,a.jsx)(G.Z,{name:["userIpV6Subnet"],children:function($){var f=$.userIpV6Subnet;if(f)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(J.UW,{title:n.format("createFormIpV6"),children:[(0,a.jsx)(O.Z,{label:n.format("createFormIpSubnet"),name:"ipV6Subnet",width:"md",placeholder:"2001:db8::/48"}),(0,a.jsx)(O.Z,{label:n.format("createFormIpGateway"),name:"ipV6Gateway",width:"md",placeholder:"2001:db8::1"}),(0,a.jsx)(O.Z,{label:n.format("createFormIpRange"),name:"ipV6Range",width:"md",placeholder:"2001:db8::/64"})]}),(0,a.jsx)(S.u,{name:"ipV6Aux",label:n.format("createFormIpAux"),children:(0,a.jsxs)(J.UW,{children:[(0,a.jsx)(O.Z,{label:n.format("createFormIpAuxDevice"),name:"device",width:"md"}),(0,a.jsx)(O.Z,{label:n.format("createFormIpAuxAddress"),name:"address",width:"md"})]})})]})}}),(0,a.jsx)(S.u,{name:"driverOption",label:n.format("createFormDriverOption"),children:(0,a.jsxs)(J.UW,{children:[(0,a.jsx)(O.Z,{label:n.format("createFormDriverOptionName"),name:"name",width:"md"}),(0,a.jsx)(O.Z,{label:n.format("createFormDriverOptionValue"),name:"value",width:"md"})]})})]})});pe.Z=R},20743:function(Ze,pe,e){var _e=e(15009),_=e.n(_e),ie=e(99289),u=e.n(ie),w=e(5574),B=e.n(w),I=e(67294),N=e(14946),k=e(64789),A=e(9773),h=e(83622),O=e(85265),v=e(42075),G=e(66309),P=e(16970),J=e(3616),S=e(36146),E=e(67255),m=e(85893),t=(0,I.forwardRef)(function(o,p){(0,I.useImperativeHandle)(p,function(){return{show:function(){c(!0)}}});var a=(0,I.useState)(!1),R=B()(a,2),s=R[0],c=R[1],j=(0,I.useRef)(),K=new S.Uo("components.network");return(0,m.jsxs)(m.Fragment,{children:[o.showTriggerButton&&(0,m.jsx)(h.ZP,{onClick:function(){c(!0)},children:K.format("selectTriggerButton")}),(0,m.jsx)(O.Z,{title:K.format("selectDrawerTitle"),width:J.R_,footer:!1,open:s,onClose:function(){return c(!1)},extra:(0,m.jsx)(v.Z,{children:(0,m.jsx)(P.Z,{onFinish:function(){var V,g;!((V=j.current)===null||V===void 0)&&V.reloadAndRest&&((g=j.current)===null||g===void 0||g.reloadAndRest())}},"create")}),children:(0,m.jsx)(A.Z,{rowKey:"Name",actionRef:j,columns:[{title:S.FD.format("listTitle"),dataIndex:"Name",render:function(V,g,ne,x,H){return g.Name=="none"||g.Name=="bridge"||g.Name=="host"?(0,m.jsxs)(m.Fragment,{children:[g.Name," ",(0,m.jsx)(G.Z,{color:"blue",children:"System"})]}):(0,m.jsx)(m.Fragment,{children:V})}},{title:S.FD.format("listType"),ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"Driver",ellipsis:!0,width:100,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4",search:!1,width:120,render:function(V,g,ne,x,H){return g.IPAM.Config&&g.IPAM.Config[0]&&(0,m.jsxs)(v.Z,{direction:"vertical",children:[g.IPAM.Config[0].Subnet,g.IPAM.Config[0].Gateway]})}},{title:"IPV6",search:!1,render:function(V,g,ne,x,H){return g.IPAM.Config&&g.IPAM.Config[1]&&(0,m.jsxs)(v.Z,{direction:"vertical",children:[g.IPAM.Config[1].Subnet,g.IPAM.Config[1].Gateway]})}},{title:S.FD.format("listManage"),width:100,search:!1,render:function(V,g,ne,x,H){return[g.Name!="none"&&g.Name!="bridge"&&g.Name!="host"&&(0,m.jsx)(h.ZP,{type:"link",onClick:function(){o.onSelect(g),c(!1)},children:(0,m.jsx)(k.Z,{})},g.Id)]}}],request:function(){var d=u()(_()().mark(function V(g,ne,x){var H;return _()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,(0,N.jR)({name:g.Name});case 2:return H=Q.sent,Q.abrupt("return",{data:H.data.list,success:!0,total:H.data.list.length});case 4:case"end":return Q.stop()}},V)}));return function(V,g,ne){return d.apply(this,arguments)}}(),pagination:(0,E.Oh)()})})]})});pe.Z=t},70146:function(Ze,pe,e){e.d(pe,{SR:function(){return O},VE:function(){return A},Zy:function(){return N},iD:function(){return G},vG:function(){return J},yB:function(){return B}});var _e=e(15009),_=e.n(_e),ie=e(99289),u=e.n(ie),w=e(82346);function B(E){return I.apply(this,arguments)}function I(){return I=u()(_()().mark(function E(m){return _()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,w.request)("/api/app/container-backup/create",{data:m,method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},E)})),I.apply(this,arguments)}function N(E){return k.apply(this,arguments)}function k(){return k=u()(_()().mark(function E(m){return _()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,w.request)("/api/app/container-backup/get-list",{method:"POST",data:m}));case 1:case"end":return o.stop()}},E)})),k.apply(this,arguments)}function A(E){return h.apply(this,arguments)}function h(){return h=u()(_()().mark(function E(m){return _()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,w.request)("/api/app/container-backup/delete",{method:"POST",data:m}));case 1:case"end":return o.stop()}},E)})),h.apply(this,arguments)}function O(E){return v.apply(this,arguments)}function v(){return v=u()(_()().mark(function E(m){return _()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,w.request)("/api/app/container-backup/restore",{method:"POST",data:m}));case 1:case"end":return o.stop()}},E)})),v.apply(this,arguments)}function G(E){return P.apply(this,arguments)}function P(){return P=u()(_()().mark(function E(m){return _()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,w.request)("/api/app/container-backup/get-detail",{method:"POST",data:m}));case 1:case"end":return o.stop()}},E)})),P.apply(this,arguments)}function J(E){return S.apply(this,arguments)}function S(){return S=u()(_()().mark(function E(m){return _()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,w.request)("/api/app/site/restore",{data:m,method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},E)})),S.apply(this,arguments)}},13822:function(Ze,pe,e){e.d(pe,{IE:function(){return A},IW:function(){return N},KK:function(){return J},LJ:function(){return E},RF:function(){return p},Re:function(){return t},aF:function(){return R},eE:function(){return G},jV:function(){return O}});var _e=e(5574),_=e.n(_e),ie=e(15009),u=e.n(ie),w=e(99289),B=e.n(w),I=e(82346);function N(c){return k.apply(this,arguments)}function k(){return k=B()(u()().mark(function c(j){return u()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,I.request)("/api/app/container/status",{method:"POST",data:j}));case 1:case"end":return d.stop()}},c)})),k.apply(this,arguments)}function A(c){return h.apply(this,arguments)}function h(){return h=B()(u()().mark(function c(j){return u()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,I.request)("/api/app/container/get-list",{data:j,method:"POST"}));case 1:case"end":return d.stop()}},c)})),h.apply(this,arguments)}function O(c){return v.apply(this,arguments)}function v(){return v=B()(u()().mark(function c(j){return u()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,I.request)("/api/app/container/get-detail",{data:j,method:"POST"}));case 1:case"end":return d.stop()}},c)})),v.apply(this,arguments)}function G(c){return P.apply(this,arguments)}function P(){return P=B()(u()().mark(function c(j){return u()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,I.request)("/api/app/container/update",{data:j,method:"POST"}));case 1:case"end":return d.stop()}},c)})),P.apply(this,arguments)}function J(){return S.apply(this,arguments)}function S(){return S=B()(u()().mark(function c(){return u()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.abrupt("return",(0,I.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return K.stop()}},c)})),S.apply(this,arguments)}function E(c){return m.apply(this,arguments)}function m(){return m=B()(u()().mark(function c(j){return u()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!j.enableExportToPath){d.next=2;break}return d.abrupt("return",(0,I.request)("/api/app/container/export",{method:"GET",params:j}));case 2:return d.abrupt("return",new Promise(function(V,g){var ne=localStorage.getItem("token"),x=new URLSearchParams;x.append("token",ne||""),Object.entries(j).forEach(function(Q){var $=_()(Q,2),f=$[0],Z=$[1];x.append(f,String(Z))});var H="/api/app/container/export?".concat(x.toString()),n=document.createElement("iframe");n.style.display="none",n.src=H,document.body.appendChild(n),setTimeout(function(){n.parentElement&&document.body.removeChild(n)},5e3),V({code:200,data:"success",error:""})}));case 3:case"end":return d.stop()}},c)})),m.apply(this,arguments)}function t(c){return o.apply(this,arguments)}function o(){return o=B()(u()().mark(function c(j){return u()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,I.request)("/api/app/container/commit",{method:"POST",data:j}));case 1:case"end":return d.stop()}},c)})),o.apply(this,arguments)}function p(c){return a.apply(this,arguments)}function a(){return a=B()(u()().mark(function c(j){return u()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,I.request)("/api/app/container/upgrade",{method:"POST",data:j}));case 1:case"end":return d.stop()}},c)})),a.apply(this,arguments)}function R(c){return s.apply(this,arguments)}function s(){return s=B()(u()().mark(function c(j){return u()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,I.request)("/api/app/container/copy",{method:"POST",data:j}));case 1:case"end":return d.stop()}},c)})),s.apply(this,arguments)}},14946:function(Ze,pe,e){e.d(pe,{CI:function(){return A},HY:function(){return E},IS:function(){return B},XY:function(){return G},_3:function(){return t},_x:function(){return O},jR:function(){return N},t9:function(){return J}});var _e=e(15009),_=e.n(_e),ie=e(99289),u=e.n(ie),w=e(82346);function B(p){return I.apply(this,arguments)}function I(){return I=u()(_()().mark(function p(a){return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,w.request)("/api/app/network/get-detail",{method:"POST",data:a}));case 1:case"end":return s.stop()}},p)})),I.apply(this,arguments)}function N(p){return k.apply(this,arguments)}function k(){return k=u()(_()().mark(function p(a){return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,w.request)("/api/app/network/get-list",{method:"POST",data:a}));case 1:case"end":return s.stop()}},p)})),k.apply(this,arguments)}function A(){return h.apply(this,arguments)}function h(){return h=u()(_()().mark(function p(){return _()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,(0,w.request)("/api/app/network/prune",{method:"POST"});case 2:return R.abrupt("return",R.sent);case 3:case"end":return R.stop()}},p)})),h.apply(this,arguments)}function O(p){return v.apply(this,arguments)}function v(){return v=u()(_()().mark(function p(a){return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,w.request)("/api/app/network/delete",{method:"POST",data:a});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},p)})),v.apply(this,arguments)}function G(p){return P.apply(this,arguments)}function P(){return P=u()(_()().mark(function p(a){return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,w.request)("/api/app/network/create",{method:"POST",data:a});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},p)})),P.apply(this,arguments)}function J(p){return S.apply(this,arguments)}function S(){return S=u()(_()().mark(function p(a){return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,w.request)("/api/app/network/disconnect",{method:"POST",data:a});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},p)})),S.apply(this,arguments)}function E(p){return m.apply(this,arguments)}function m(){return m=u()(_()().mark(function p(a){return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,w.request)("/api/app/network/connect",{method:"POST",data:a});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},p)})),m.apply(this,arguments)}function t(p){return o.apply(this,arguments)}function o(){return o=u()(_()().mark(function p(a){return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,w.request)("/api/app/network/get-container-list",{method:"POST",data:a}));case 1:case"end":return s.stop()}},p)})),o.apply(this,arguments)}},89240:function(Ze,pe,e){e.d(pe,{HJ:function(){return P},PD:function(){return S},Rk:function(){return J},pM:function(){return E},yi:function(){return G},zY:function(){return m}});var _e=e(64599),_=e.n(_e),ie=e(5251),u=e(10531),w=e(43836),B=e(17179),I=e(74911),N=e(17637),k=e(58353),A=/^([1-9]|[1-5]?[0-9]{2,4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$/m;function h(t){return A.test(t)?parseInt(t,10):0}function O(t){typeof t!="string"&&(t=t.toString());var o=u.Z(t,"-",2),p=w.Z(o,h);return p.length==1&&p.push(p[0]),p}function v(t,o){typeof t!="string"&&(t=t.toString());var p=null,a=t.indexOf(":");a>=0&&(p=t.substring(0,a),t=t.substring(a+1)),o=typeof o=="number"?o:h(o);var R=O(t),s=Math.min(R[0],o),c=Math.max(R[1],o);return p?p+":"+s+"-"+c:s+"-"+c}function G(t){if(!t||!t.HostConfig||!t.HostConfig.PortBindings)return[];var o=[],p=t.HostConfig.PortBindings,a=B.Z(p),R=I.Z(a,function(s){return u.Z(s,"/")[1]});return N.Z(R,function(s,c){var j={},K=_()(s),d;try{for(K.s();!(d=K.n()).done;){var V=d.value,g=_()(p[V]),ne;try{for(g.s();!(ne=g.n()).done;){var x=ne.value;j[x.HostIp]=j[x.HostIp]||[],j[x.HostIp].push(V)}}catch(H){g.e(H)}finally{g.f()}}}catch(H){K.e(H)}finally{K.f()}N.Z(j,function(H,n){var Q=k.Z(H,function(Z){return parseInt(u.Z(Z,"/")[0],10)}),$=-1,f=-1;N.Z(Q,function(Z){var Oe=u.Z(Z,"/"),z=parseInt(Oe[0],10),fe=p[Z][0];p[Z].shift();var De=h(fe.HostPort);if(De>0){if(o.length>0&&$===De-1&&f===z-1){o[o.length-1].host=v(o[o.length-1].host,De),o[o.length-1].dest=v(o[o.length-1].dest,z),$=De,f=z;return}$=De,f=z}else $=-1,f=-1;var le=fe.HostPort.toString();n&&(le="".concat(n,":").concat(le)),o.push({host:le,dest:z.toString(),protocol:c})})})}),o}function P(t){return(0,ie.fi)(t,"/")}function J(t){return t?(0,ie.FI)(t):"64M"}function S(t){return t&&t>1e8?t/1e9:0}function E(t){return t?t/1024/1024:0}function m(t){return"".concat(P(t),".pod.dpanel.local")}}}]);
