"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4037],{94149:function(z,y,e){e.d(y,{Z:function(){return Z}});var o=e(87462),r=e(67294),p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},h=p,E=e(84089),O=function(i,x){return r.createElement(E.Z,(0,o.Z)({},i,{ref:x,icon:h}))},v=r.forwardRef(O),Z=v},88360:function(z,y,e){e.d(y,{Z:function(){return Z}});var o=e(87462),r=e(67294),p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"},h=p,E=e(84089),O=function(i,x){return r.createElement(E.Z,(0,o.Z)({},i,{ref:x,icon:h}))},v=r.forwardRef(O),Z=v},63434:function(z,y,e){var o=e(1413),r=e(45987),p=e(22270),h=e(84567),E=e(67294),O=e(90789),v=e(40284),Z=e(85893),P=["options","fieldProps","proFieldProps","valueEnum"],i=E.forwardRef(function(a,T){var c=a.options,u=a.fieldProps,j=a.proFieldProps,l=a.valueEnum,t=(0,r.Z)(a,P);return(0,Z.jsx)(v.Z,(0,o.Z)({ref:T,valueType:"checkbox",valueEnum:(0,p.h)(l,void 0),fieldProps:(0,o.Z)({options:c},u),lightProps:(0,o.Z)({labelFormatter:function(){return(0,Z.jsx)(v.Z,(0,o.Z)({ref:T,valueType:"checkbox",mode:"read",valueEnum:(0,p.h)(l,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,o.Z)({options:c},u),proFieldProps:j},t))}},t.lightProps),proFieldProps:j},t))}),x=E.forwardRef(function(a,T){var c=a.fieldProps,u=a.children;return(0,Z.jsx)(h.Z,(0,o.Z)((0,o.Z)({ref:T},c),{},{children:u}))}),M=(0,O.G)(x,{valuePropName:"checked"}),d=M;d.Group=i,y.Z=d},5966:function(z,y,e){var o=e(97685),r=e(1413),p=e(45987),h=e(21770),E=e(21054),O=e(55241),v=e(98423),Z=e(67294),P=e(40284),i=e(85893),x=["fieldProps","proFieldProps"],M=["fieldProps","proFieldProps"],d="text",a=function(l){var t=l.fieldProps,S=l.proFieldProps,A=(0,p.Z)(l,x);return(0,i.jsx)(P.Z,(0,r.Z)({valueType:d,fieldProps:t,filedConfig:{valueType:d},proFieldProps:S},A))},T=function(l){var t=(0,h.Z)(l.open||!1,{value:l.open,onChange:l.onOpenChange}),S=(0,o.Z)(t,2),A=S[0],K=S[1];return(0,i.jsx)(E.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(_){var D,C=_.getFieldValue(l.name||[]);return(0,i.jsx)(O.Z,(0,r.Z)((0,r.Z)({getPopupContainer:function(g){return g&&g.parentNode?g.parentNode:g},onOpenChange:function(g){return K(g)},content:(0,i.jsxs)("div",{style:{padding:"4px 0"},children:[(D=l.statusRender)===null||D===void 0?void 0:D.call(l,C),l.strengthText?(0,i.jsx)("div",{style:{marginTop:10},children:(0,i.jsx)("span",{children:l.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},l.popoverProps),{},{open:A,children:l.children}))}})},c=function(l){var t=l.fieldProps,S=l.proFieldProps,A=(0,p.Z)(l,M),K=(0,Z.useState)(!1),$=(0,o.Z)(K,2),_=$[0],D=$[1];return t!=null&&t.statusRender&&A.name?(0,i.jsx)(T,{name:A.name,statusRender:t==null?void 0:t.statusRender,popoverProps:t==null?void 0:t.popoverProps,strengthText:t==null?void 0:t.strengthText,open:_,onOpenChange:D,children:(0,i.jsx)("div",{children:(0,i.jsx)(P.Z,(0,r.Z)({valueType:"password",fieldProps:(0,r.Z)((0,r.Z)({},(0,v.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(R){var g;t==null||(g=t.onBlur)===null||g===void 0||g.call(t,R),D(!1)},onClick:function(R){var g;t==null||(g=t.onClick)===null||g===void 0||g.call(t,R),D(!0)}}),proFieldProps:S,filedConfig:{valueType:d}},A))})}):(0,i.jsx)(P.Z,(0,r.Z)({valueType:"password",fieldProps:t,proFieldProps:S,filedConfig:{valueType:d}},A))},u=a;u.Password=c,u.displayName="ProFormComponent",y.Z=u},68262:function(z,y,e){e.d(y,{U:function(){return T}});var o=e(1413),r=e(45987),p=e(10915),h=e(21532),E=e(93967),O=e.n(E),v=e(67294),Z=e(97269),P=e(4942),i=e(64847),x=function(u){return(0,P.Z)((0,P.Z)({},u.componentCls,{"&-container":{display:"flex",flex:"1",flexDirection:"column",height:"100%",paddingInline:32,paddingBlock:24,overflow:"auto",background:"inherit"},"&-top":{textAlign:"center"},"&-header":{display:"flex",alignItems:"center",justifyContent:"center",height:"44px",lineHeight:"44px",a:{textDecoration:"none"}},"&-title":{position:"relative",insetBlockStart:"2px",color:"@heading-color",fontWeight:"600",fontSize:"33px"},"&-logo":{width:"44px",height:"44px",marginInlineEnd:"16px",verticalAlign:"top",img:{width:"100%"}},"&-desc":{marginBlockStart:"12px",marginBlockEnd:"40px",color:u.colorTextSecondary,fontSize:u.fontSize},"&-main":{minWidth:"328px",maxWidth:"580px",margin:"0 auto","&-other":{marginBlockStart:"24px",lineHeight:"22px",textAlign:"start"}}}),"@media (min-width: @screen-md-min)",(0,P.Z)({},"".concat(u.componentCls,"-container"),{paddingInline:0,paddingBlockStart:32,paddingBlockEnd:24,backgroundRepeat:"no-repeat",backgroundPosition:"center 110px",backgroundSize:"100%"}))};function M(c){return(0,i.Xj)("LoginForm",function(u){var j=(0,o.Z)((0,o.Z)({},u),{},{componentCls:".".concat(c)});return[x(j)]})}var d=e(85893),a=["logo","message","contentStyle","title","subTitle","actions","children","containerStyle","otherStyle"];function T(c){var u,j=c.logo,l=c.message,t=c.contentStyle,S=c.title,A=c.subTitle,K=c.actions,$=c.children,_=c.containerStyle,D=c.otherStyle,C=(0,r.Z)(c,a),R=(0,p.YB)(),g=C.submitter===!1?!1:(0,o.Z)((0,o.Z)({searchConfig:{submitText:R.getMessage("loginForm.submitText","\u767B\u5F55")}},C.submitter),{},{submitButtonProps:(0,o.Z)({size:"large",style:{width:"100%"}},(u=C.submitter)===null||u===void 0?void 0:u.submitButtonProps),render:function(F,f){var w,V=f.pop();if(typeof(C==null||(w=C.submitter)===null||w===void 0?void 0:w.render)=="function"){var N,L;return C==null||(N=C.submitter)===null||N===void 0||(L=N.render)===null||L===void 0?void 0:L.call(N,F,f)}return V}}),J=(0,v.useContext)(h.ZP.ConfigContext),H=J.getPrefixCls("pro-form-login"),X=M(H),q=X.wrapSSR,n=X.hashId,W=function(F){return"".concat(H,"-").concat(F," ").concat(n)},k=(0,v.useMemo)(function(){return j?typeof j=="string"?(0,d.jsx)("img",{src:j}):j:null},[j]);return q((0,d.jsxs)("div",{className:O()(W("container"),n),style:_,children:[(0,d.jsxs)("div",{className:"".concat(W("top")," ").concat(n).trim(),children:[S||k?(0,d.jsxs)("div",{className:"".concat(W("header")),children:[k?(0,d.jsx)("span",{className:W("logo"),children:k}):null,S?(0,d.jsx)("span",{className:W("title"),children:S}):null]}):null,A?(0,d.jsx)("div",{className:W("desc"),children:A}):null]}),(0,d.jsxs)("div",{className:W("main"),style:(0,o.Z)({width:328},t),children:[(0,d.jsxs)(Z.A,(0,o.Z)((0,o.Z)({isKeyPressSubmit:!0},C),{},{submitter:g,children:[l,$]})),K?(0,d.jsx)("div",{className:W("main-other"),style:D,children:K}):null]})]}))}},75293:function(z,y,e){e.d(y,{Z:function(){return p}});var o=e(25593),r=e(85893);function p(h){return(0,r.jsx)(o.Z.Text,{copyable:!0,style:{padding:10,display:h.block?"block":"",background:"#24292f",color:"#ffffff"},children:h.content})}},18678:function(z,y,e){e.r(y),e.d(y,{default:function(){return k}});var o=e(15009),r=e.n(o),p=e(99289),h=e.n(p),E=e(5574),O=e.n(E),v=e(68602),Z=e(89075),P=e(68262),i=e(82346),x=e(9361),M=e(40056),d=e(86250),a=e(25593),T=e(67294),c=e(75293),u=e(36146),j=e(29177),l=e(88360),t=e(94149),S=e(87462),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M608 112c-167.9 0-304 136.1-304 304 0 70.3 23.9 135 63.9 186.5l-41.1 41.1-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-44.9 44.9-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-65.3 65.3a8.03 8.03 0 000 11.3l42.3 42.3c3.1 3.1 8.2 3.1 11.3 0l253.6-253.6A304.06 304.06 0 00608 720c167.9 0 304-136.1 304-304S775.9 112 608 112zm161.2 465.2C726.2 620.3 668.9 644 608 644c-60.9 0-118.2-23.7-161.2-66.8-43.1-43-66.8-100.3-66.8-161.2 0-60.9 23.7-118.2 66.8-161.2 43-43.1 100.3-66.8 161.2-66.8 60.9 0 118.2 23.7 161.2 66.8 43.1 43 66.8 100.3 66.8 161.2 0 60.9-23.7 118.2-66.8 161.2z"}}]},name:"key",theme:"outlined"},K=A,$=e(84089),_=function(F,f){return T.createElement($.Z,(0,S.Z)({},F,{ref:f,icon:K}))},D=T.forwardRef(_),C=D,R=e(5966),g=e(97462),J=e(63434),H=e(92398),X=e(55241),q=e(42075),n=e(85893);function W(B){var F,f=new u.Uo("user");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(H.Z,{centered:!0,activeKey:B.loginType,items:[{icon:(0,n.jsx)(j.Z,{}),key:"login",label:f.format("title")},{icon:(0,n.jsx)(l.Z,{}),key:"register",label:f.format("registerTitle")}].filter(function(w){return w.key==B.loginType})}),(0,n.jsx)(R.Z,{name:"username",fieldProps:{size:"large",prefix:(0,n.jsx)(j.Z,{className:"prefixIcon"})},placeholder:f.format("formUsernameEmpty"),rules:[{required:!0,message:f.format("formUsernameEmpty")}]},"username"),(0,n.jsx)(R.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,n.jsx)(t.Z,{className:"prefixIcon"})},placeholder:f.format("formPasswordEmpty"),rules:[{required:!0,message:f.format("formPasswordEmpty")}]},"password"),B.showTwoFa&&(0,n.jsx)(R.Z,{name:"code",placeholder:f.format("formTwofaEmpty"),rules:[{required:!0}],fieldProps:{maxLength:6,size:"large",prefix:(0,n.jsx)(C,{className:"prefixIcon"})}}),B.loginType=="register"&&(0,n.jsx)(g.Z,{name:["password"],children:function(V){var N=V.password;return(0,n.jsx)(R.Z.Password,{fieldProps:{size:"large",prefix:(0,n.jsx)(t.Z,{className:"prefixIcon"})},placeholder:f.format("formConfirmPasswordEmpty"),name:"confirmPassword",dependencies:["password"],rules:[{required:!0,message:f.format("formConfirmPasswordEmpty")},function(L){var ee=L.getFieldValue;return{validator:function(ne,U){return!U||ee("password")===U?Promise.resolve():Promise.reject(new Error(f.format("formMessagePasswordNotMatch")))}}}]},"confirmPassword")}}),B.showAutoLogin&&(0,n.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,n.jsx)(J.Z,{noStyle:!0,name:"autoLogin",initialValue:!0,children:f.format("formAutoLogin")}),(0,n.jsx)(X.Z,{content:(0,n.jsxs)(q.Z,{direction:"vertical",size:[0,30],children:[(0,n.jsxs)("span",{children:[f.format("formUserResetTip"),", ",(0,n.jsx)("a",{href:"https://dpanel.cc/install/ctrl",target:"_blank",children:u.FD.format("help")})]}),(0,n.jsx)(c.Z,{content:"docker exec ".concat((F=B.appName)!==null&&F!==void 0?F:"dpanel"," ./dpanel user:reset -f config.yaml")}),(0,n.jsx)("span",{})]}),children:(0,n.jsx)(a.Z.Link,{style:{float:"right"},children:f.format("formUserReset")})})]})]})}var k=function(){var B=x.Z.useToken(),F=B.token,f=(0,i.useModel)("@@initialState"),w=f.refresh,V=(0,T.useState)({loginType:"account",appName:"dpanel"}),N=O()(V,2),L=N[0],ee=N[1],se=(0,T.useState)(),ne=O()(se,2),U=ne[0],le=ne[1],ue=(0,T.useState)(),ie=O()(ue,2),te=ie[0],ce=ie[1],me=(0,i.useAntdConfigSetter)(),de=(0,T.useRef)(),b=new u.Uo("user"),fe=(0,i.useAccess)();return(0,T.useEffect)(function(){window.document.title=b.format("documentTitle"),(0,v.Nr)().then(function(){var re=h()(r()().mark(function G(m){var I;return r()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:b.appendXk(m.data.feature.includes("canSeeEnableXk")),I={loginType:"account"},m.data.showBuildName&&m.data.family!="lite"&&(I.showBuildName=!0),m.data.showRegister&&(I.loginType="register"),m.data.family=="demo"&&(I.showDemo=!0),I.appName=m.data.appName,m.data.theme&&m.data.theme.algorithm&&(localStorage.setItem("dpanel-theme",m.data.theme.algorithm),me(function(s){var ae;(ae=s.theme)!==null&&ae!==void 0||(s.theme={});var oe=[];return m.data.theme&&(m.data.theme.algorithm=="dark"?oe.push(x.Z.darkAlgorithm):oe.push(x.Z.defaultAlgorithm),s.theme.algorithm=oe),s})),ce(m.data),ee(I),m.data.feature.indexOf("canSeeEnableThemeUser")!=-1?(0,Z.ax)().then(function(s){s.data&&s.data.themeUserConfig&&s.data.themeUserConfig.siteTitle&&(window.document.title=s.data.themeUserConfig.siteTitle),le(s.data)}):le({});case 10:case"end":return Q.stop()}},G)}));return function(G){return re.apply(this,arguments)}}())},[]),(0,n.jsxs)(n.Fragment,{children:[L&&L.showBuildName&&(0,n.jsx)(M.Z,{type:"error",message:b.format("tipShowBuildName"),banner:!0}),L&&L.showDemo&&(0,n.jsx)(M.Z,{type:"error",message:b.format("tipShowDemo"),banner:!0}),(0,n.jsx)(d.Z,{justify:"center",align:"center",style:{height:"100vh",background:U&&U.themeUserConfig&&U.themeUserConfig.bgImage&&U.themeUserConfig.bgImage.src?"url(".concat(U.themeUserConfig.bgImage.src,")"):"".concat(F.colorBgElevated,"dd")},children:(0,n.jsxs)(P.U,{onFinish:function(){var re=h()(r()().mark(function G(m){var I,Y;return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(L.loginType!="register"){s.next=3;break}return s.next=3,(0,v.AT)({username:m.username,password:m.password,confirmPassword:m.confirmPassword});case 3:return s.prev=3,s.next=6,(0,v.n$)({username:m.username,password:m.password,autoLogin:m.autoLogin,code:m.code});case 6:if(I=s.sent,!I.data.accessToken){s.next=14;break}return localStorage.setItem("token",I.data.accessToken),w(),I.data.redirect&&I.data.redirect!=""&&!fe.canSeeEnableCe?window.location.href="/dpanel/ui"+I.data.redirect:window.location.href="/dpanel/ui",s.abrupt("return");case 14:return s.abrupt("return",!1);case 15:s.next=20;break;case 17:s.prev=17,s.t0=s.catch(3),(Y=de.current)===null||Y===void 0||Y.resetFields(["code"]);case 20:case"end":return s.stop()}},G,null,[[3,17]])}));return function(G){return re.apply(this,arguments)}}(),containerStyle:{background:"transparent",height:"auto"},contentStyle:{width:"auto"},logo:"",title:(0,n.jsx)("img",{src:U&&U.themeUserConfig&&U.themeUserConfig.loginLogo?U.themeUserConfig.loginLogo:"/dpanel/static/asset/logo.png",width:"350"}),subTitle:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)("br",{})]}),formRef:de,children:[(0,n.jsx)(W,{showTwoFa:!!(U&&U.canSeeEnableTwoFa),loginType:L.loginType,appName:L.appName,showAutoLogin:!(te!=null&&te.feature.includes("canSeeEnableXk"))}),(0,n.jsxs)(a.Z.Paragraph,{style:{marginBottom:10,color:"#999999",textAlign:"center"},children:[b.format("agree"),(0,n.jsx)("a",{href:b.format("userAgreementUrl"),target:"_blank",children:b.format("userAgreement")}),(0,n.jsx)("a",{href:b.format("userPrivacyUrl"),target:"_blank",children:b.format("userPrivacy")})]})]})})]})}},89075:function(z,y,e){e.d(y,{$w:function(){return O},YQ:function(){return Z},ax:function(){return i}});var o=e(15009),r=e.n(o),p=e(99289),h=e.n(p),E=e(82346);function O(){return v.apply(this,arguments)}function v(){return v=h()(r()().mark(function M(){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,E.request)("/api/pro/home/get-machine-id",{method:"POST"}));case 1:case"end":return a.stop()}},M)})),v.apply(this,arguments)}function Z(){return P.apply(this,arguments)}function P(){return P=h()(r()().mark(function M(){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,E.request)("/api/pro/home/get-license-info",{method:"POST"}));case 1:case"end":return a.stop()}},M)})),P.apply(this,arguments)}function i(){return x.apply(this,arguments)}function x(){return x=h()(r()().mark(function M(){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,E.request)("/api/pro/home/login-info",{method:"POST"}));case 1:case"end":return a.stop()}},M)})),x.apply(this,arguments)}}}]);
