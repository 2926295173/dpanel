"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3763],{57546:function(ye,G,n){n.d(G,{Z:function(){return E}});var l=n(87462),d=n(67294),k={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM653.3 424.6l52.2 52.2a8.01 8.01 0 01-4.7 13.6l-179.4 21c-5.1.6-9.5-3.7-8.9-8.9l21-179.4c.8-6.6 8.9-9.4 13.6-4.7l52.4 52.4 256.2-256.2c3.1-3.1 8.2-3.1 11.3 0l42.4 42.4c3.1 3.1 3.1 8.2 0 11.3L653.3 424.6z"}}]},name:"import",theme:"outlined"},A=k,_=n(84089),T=function(H,ee){return d.createElement(_.Z,(0,l.Z)({},H,{ref:ee,icon:A}))},W=d.forwardRef(T),E=W},74842:function(ye,G,n){n.d(G,{Z:function(){return E}});var l=n(87462),d=n(67294),k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},A=k,_=n(84089),T=function(H,ee){return d.createElement(_.Z,(0,l.Z)({},H,{ref:ee,icon:A}))},W=d.forwardRef(T),E=W},87784:function(ye,G,n){n.d(G,{Z:function(){return E}});var l=n(87462),d=n(67294),k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"},A=k,_=n(84089),T=function(H,ee){return d.createElement(_.Z,(0,l.Z)({},H,{ref:ee,icon:A}))},W=d.forwardRef(T),E=W},86615:function(ye,G,n){var l=n(1413),d=n(45987),k=n(22270),A=n(78045),_=n(67294),T=n(90789),W=n(56),E=n(85893),ae=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],H=_.forwardRef(function(a,e){var xe=a.fieldProps,fe=a.options,B=a.radioType,Ze=a.layout,Be=a.proFieldProps,Te=a.valueEnum,Ie=(0,d.Z)(a,ae);return(0,E.jsx)(W.Z,(0,l.Z)((0,l.Z)({valueType:B==="button"?"radioButton":"radio",ref:e,valueEnum:(0,k.h)(Te,void 0)},Ie),{},{fieldProps:(0,l.Z)({options:fe,layout:Ze},xe),proFieldProps:Be,filedConfig:{customLightMode:!0}}))}),ee=_.forwardRef(function(a,e){var xe=a.fieldProps,fe=a.children;return(0,E.jsx)(A.ZP,(0,l.Z)((0,l.Z)({},xe),{},{ref:e,children:fe}))}),Fe=(0,T.G)(ee,{valuePropName:"checked",ignoreWidth:!0}),ne=Fe;ne.Group=H,ne.Button=A.ZP.Button,ne.displayName="ProFormComponent",G.Z=ne},52688:function(ye,G,n){var l=n(1413),d=n(45987),k=n(67294),A=n(56),_=n(85893),T=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],W=k.forwardRef(function(E,ae){var H=E.fieldProps,ee=E.unCheckedChildren,Fe=E.checkedChildren,ne=E.proFieldProps,a=(0,d.Z)(E,T);return(0,_.jsx)(A.Z,(0,l.Z)({valueType:"switch",fieldProps:(0,l.Z)({unCheckedChildren:ee,checkedChildren:Fe},H),ref:ae,valuePropName:"checked",proFieldProps:ne,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},a))});G.Z=W},75293:function(ye,G,n){n.d(G,{Z:function(){return k}});var l=n(25593),d=n(85893);function k(A){return(0,d.jsx)(l.Z.Text,{copyable:!0,style:{padding:10,display:A.block?"block":"",background:"#24292f",color:"#ffffff"},children:A.content})}},47900:function(ye,G,n){n.r(G),n.d(G,{default:function(){return ce}});var l=n(15009),d=n.n(l),k=n(99289),A=n.n(k),_=n(5574),T=n.n(_),W=n(94359),E=n(24494),ae=n(184),H=n(5966),ee=n(52688),Fe=n(28036),ne=n(86250),a=n(67294),e=n(85893);function xe(h){var x=(0,a.useRef)();return(0,e.jsxs)(ae.a,{title:"\u521B\u5EFA\u96C6\u7FA4",trigger:(0,e.jsx)(Fe.ZP,{type:"primary",children:"\u521B\u5EFA\u96C6\u7FA4"}),onFinish:function(){var o=A()(d()().mark(function $(P){var Q;return d()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,(0,E.UK)({advertiseAddr:P.advertiseAddr,listenAddr:P.listenAddr,dataPathAddr:P.dataPathAddr,autoLockManagers:P.autoLockManagers,forceNewCluster:P.forceNewCluster,subnet:P.subnet});case 2:return Q=w.sent,h.onFinish&&h.onFinish(),w.abrupt("return",!0);case 5:case"end":return w.stop()}},$)}));return function($){return o.apply(this,arguments)}}(),formRef:x,onOpenChange:function($){var P;!$&&(!((P=x.current)===null||P===void 0)&&P.resetFields)&&x.current.resetFields()},children:[(0,e.jsx)(H.Z,{name:"advertiseAddr",label:"\u9ED8\u8BA4\u4F7F\u7528\u96C6\u7FA4\u901A\u544A\u5730\u5740",tooltip:"\u5176\u4ED6\u8282\u70B9\u901A\u8FC7\u6B64 ip \u8FDE\u63A5\u5F53\u524D\u8282\u70B9,\u7528\u4E8E\u96C6\u7FA4\u901A\u4FE1\u548C\u8282\u70B9\u53D1\u73B0\u3002\u6307\u5B9A\u5F53\u524D\u5BBF\u4E3B\u673A\u7684\u5185\u7F51 ip, \u683C\u5F0F\u4E3A <ip>[:port-2377].",required:!0,rules:[{required:!0}],placeholder:"172.16.1.13"}),(0,e.jsx)(H.Z,{name:"dataPathAddr",label:"\u96C6\u7FA4\u6570\u636E\u901A\u4FE1\u5730\u5740",tooltip:"\u7528\u4E8E\u8282\u70B9\u670D\u52A1\u95F4\u7684\u200B\u200B\u6570\u636E\u6D41\u91CF\u4F20\u8F93\u200B, \u6307\u5B9A\u5F53\u524D\u5BBF\u4E3B\u673A\u7684\u5185\u7F51\u6216\u662F\u516C\u7F51 ip, \u683C\u5F0F\u4E3A <ip|interface>[:port-4789].",placeholder:"\u9ED8\u8BA4\u4F7F\u7528\u96C6\u7FA4\u901A\u544A\u5730\u5740"}),(0,e.jsx)(H.Z,{name:"listenAddr",label:"\u8282\u70B9\u5185\u670D\u52A1\u76D1\u542C\u5730\u5740",tooltip:"\u5F53\u524D\u8282\u70B9\u5B9E\u9645\u76D1\u542C\u7684\u672C\u5730\u5730\u5740,\u627F\u8F7D\u96C6\u7FA4\u7684\u7BA1\u7406\u6D41\u91CF, \u683C\u5F0F\u4E3A <ip|interface>[:port-2377]",initialValue:"0.0.0.0",required:!0,rules:[{required:!0}]}),(0,e.jsx)(H.Z,{name:"subnet",label:"\u96C6\u7FA4\u5B50\u7F51",initialValue:"10.0.0.0/16"}),(0,e.jsxs)(ne.Z,{gap:30,children:[(0,e.jsx)(ee.Z,{label:"\u81EA\u52A8\u9501\u5B9A",name:"autoLockManagers",tooltip:"\u542F\u7528\u540E\uFF0C\u91CD\u542F Manager \u8282\u70B9\u65F6\u9700\u5BC6\u94A5\u89E3\u9501"}),(0,e.jsx)(ee.Z,{label:"\u5F3A\u5236\u521B\u5EFA",name:"forceNewCluster",tooltip:"\u5F3A\u5236\u4ECE\u5F53\u524D\u72B6\u6001\u521B\u5EFA\u65B0\u96C6\u7FA4\uFF0C\u200B\u200B\u4EC5\u7528\u4E8E\u96C6\u7FA4\u4EF2\u88C1\u4E22\u5931\u540E\u7684\u707E\u96BE\u6062\u590D"})]})]})}var fe=n(3616),B=n(36146),Ze=n(86615),Be=n(97462),Te=n(64317),Ie=n(62370),Ne=n(40056),we=n(75293),en=n(87662),ze=n(24963);function nn(h){var x=new B.Uo("swarm"),o=(0,a.useRef)(),$=(0,a.useState)(""),P=T()($,2),Q=P[0],te=P[1],w=(0,a.useContext)(ze.Z),oe=w.notice;return(0,e.jsxs)(ae.a,{drawerProps:{width:fe.R_},formRef:o,onOpenChange:function(O){var L;!O&&(!((L=o.current)===null||L===void 0)&&L.resetFields)&&o.current.resetFields(),!O&&h.onFinish&&h.onFinish(),!O&&te("")},title:x.format("nodeJoinTitle.".concat(h.type)),trigger:(0,e.jsx)(Fe.ZP,{children:x.format("nodeJoinTitle.".concat(h.type))}),onFinish:function(){var pe=A()(d()().mark(function O(L){var ie,b;return d()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,E.c7)({dockerEnvName:L.dockerEnvName,type:h.type,role:L.role,listenAddr:L.listenAddr});case 2:if(b=U.sent,b.data.id==""){U.next=6;break}return h.onFinish&&h.onFinish(),U.abrupt("return",!0);case 6:return oe.error("\u52A0\u5165\u96C6\u7FA4\u5931\u8D25\uFF0C\u8BF7\u624B\u52A8\u5728\u76EE\u6807\u4E3B\u673A\u6267\u884C\u547D\u4EE4\u52A0\u5165"),te((ie=b.data.cmd)!==null&&ie!==void 0?ie:""),U.abrupt("return",!1);case 9:case"end":return U.stop()}},O)}));return function(O){return pe.apply(this,arguments)}}(),children:[(0,e.jsx)(Ze.Z.Group,{label:"\u89D2\u8272",name:"role",initialValue:"worker",options:x.option("nodeAddRoleOption",["manager","worker"])}),(0,e.jsx)(Ze.Z.Group,{label:"\u6DFB\u52A0\u65B9\u5F0F",name:"type",initialValue:"command",options:x.option("nodeAddTypeOption",["command","env"])}),(0,e.jsx)(Be.Z,{name:["type"],children:function(O){var L=O.type;return L=="env"&&(0,e.jsx)(H.Z,{name:"listenAddr",label:"\u76EE\u6807\u8282\u70B9\u672C\u5730\u76D1\u542C\u5730\u5740",tooltip:"\u5F53\u524D\u8282\u70B9\u5B9E\u9645\u76D1\u542C\u7684\u672C\u5730\u5730\u5740\uFF0C\u627F\u8F7D Swarm \u7BA1\u7406\u6D41\u91CF",required:!0,rules:[{required:!0}]})}}),(0,e.jsx)(Be.Z,{name:["type","role"],children:function(O){var L=O.type,ie=O.role;if(L=="command"){var b,re,U,ue;return h.type=="add"?(0,e.jsxs)(ne.Z,{vertical:!0,gap:20,children:[(0,e.jsx)(Ne.Z,{message:"\u5728\u76EE\u6807 Docker \u4E3B\u673A\u4E0A\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\uFF0C\u6DFB\u52A0\u4E3A\u96C6\u7FA4\u8282\u70B9"}),(0,e.jsx)(we.Z,{block:!0,content:"docker swarm join --token ".concat(ie=="manager"?(b=h.detail)===null||b===void 0||(b=b.swarm)===null||b===void 0?void 0:b.JoinTokens.Manager:(re=h.detail)===null||re===void 0||(re=re.swarm)===null||re===void 0?void 0:re.JoinTokens.Worker," ").concat(((U=h.detail)===null||U===void 0?void 0:U.node)&&((ue=h.detail)===null||ue===void 0||(ue=ue.node.ManagerStatus)===null||ue===void 0?void 0:ue.Addr))})]}):(0,e.jsxs)(ne.Z,{vertical:!0,gap:20,children:[(0,e.jsx)(Ne.Z,{message:"\u5728\u76EE\u6807\u96C6\u7FA4\u7BA1\u7406\u8282\u70B9\u4E2D\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\uFF0C\u751F\u6210\u52A0\u5165\u547D\u4EE4\u540E\uFF0C\u5728\u5F53\u524D Docker \u4E3B\u673A\u4E0A\u6267\u884C\u52A0\u5165\u547D\u4EE4\u3002"}),(0,e.jsx)(we.Z,{block:!0,content:"docker swarm join-token ".concat(ie)})]})}else if(L=="env")return[(0,e.jsx)(Te.Z,{label:"\u76EE\u6807\u8282\u70B9 Docker \u670D\u52A1\u7AEF",name:"dockerEnvName",request:A()(d()().mark(function De(){var ge;return d()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,en.Kg)();case 2:return ge=y.sent,y.abrupt("return",ge.data.list.filter(function(c){return c.name!=ge.data.currentName}).map(function(c){return{label:c.title,value:c.name}}));case 4:case"end":return y.stop()}},De)})),required:!0,rules:[{required:!0}]},"env"),Q&&(0,e.jsx)(Ie.Z,{label:"\u624B\u52A8\u5728\u76EE\u6807\u4E3B\u673A\u6267\u884C\u52A0\u5165\u96C6\u7FA4\u547D\u4EE4",children:(0,e.jsx)(we.Z,{block:!0,content:Q})},"command")]}})]})}var We=n(43425),tn=n(74842),on=n(30159),He=n(87784),Oe=n(87462),rn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.5 360.3a7.95 7.95 0 00-12.9 0l-178 246c-3.8 5.3 0 12.7 6.5 12.7H381c10.2 0 19.9-4.9 25.9-13.2L512 460.4l105.2 145.4c6 8.3 15.6 13.2 25.9 13.2H690c6.5 0 10.3-7.4 6.5-12.7l-178-246z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"up-circle",theme:"outlined"},un=rn,Re=n(84089),An=function(x,o){return a.createElement(Re.Z,(0,Oe.Z)({},x,{ref:o,icon:un}))},ln=a.forwardRef(An),Ke=ln,an={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M690 405h-46.9c-10.2 0-19.9 4.9-25.9 13.2L512 563.6 406.8 418.2c-6-8.3-15.6-13.2-25.9-13.2H334c-6.5 0-10.3 7.4-6.5 12.7l178 246c3.2 4.4 9.7 4.4 12.9 0l178-246c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"down-circle",theme:"outlined"},i=an,r=function(x,o){return a.createElement(Re.Z,(0,Oe.Z)({},x,{ref:o,icon:i}))},v=a.forwardRef(r),f=v,D=n(45605),N=n(60433),I=n(38345),R=n(42075),se=n(96074),F=n(26412),me=n(66309),q=n(80821),de=n(5251),Se=n(91058),K=n(76428),Ae=n(97269),he=n(25593),Ve=n(84567);function Le(h){var x=(0,a.useRef)();return(0,e.jsx)(q.Z,{type:"primary",danger:!0,confirmTitle:B.FD.format("title.tip"),confirmOnOpenChange:function(){var $;!(($=x.current)===null||$===void 0)&&$.resetFields&&x.current.resetFields()},confirm:(0,e.jsx)(Ae.A,{submitter:!1,formRef:x,children:(0,e.jsxs)(R.Z,{style:{width:600,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(he.Z.Text,{children:(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:"\u6839\u636E Raft \u89C4\u5219\u7BA1\u7406\u8282\u70B9\u6570\u91CF\u9700\u8981\u6709\u5947\u6570\u4E2A\u5E76\u4E14\u662F3\u4E2A\u53CA\u4EE5\u4E0A."}),(0,e.jsx)("li",{children:"\u7BA1\u7406\u8282\u70B9\u9000\u51FA\u96C6\u7FA4\u540E,\u5982\u679C\u65E0\u6CD5\u6EE1\u8DB3\u8981\u6C42,\u96C6\u7FA4\u53EF\u80FD\u5D29\u6E83\u6216\u662F\u4E0D\u80FD\u6B63\u5E38\u7BA1\u7406\u5DE5\u4F5C\u8282\u70B9."}),(0,e.jsx)("li",{children:"\u5DE5\u4F5C\u8282\u70B9\u9000\u51FA\u96C6\u7FA4\u65F6,\u9700\u8981\u5148\u5728\u76EE\u6807\u5DE5\u4F5C\u8282\u70B9\u64CD\u4F5C\u9000\u51FA,\u5728\u5230\u7BA1\u7406\u8282\u70B9\u4E2D\u79FB\u9664."}),(0,e.jsx)("li",{children:"\u5DE5\u4F5C\u8282\u70B9\u9000\u51FA\u96C6\u7FA4\u540E,\u5176\u90E8\u7F72\u7684\u5BB9\u5668\u4F1A\u505C\u6B62\u6210\u4E3A\u5B64\u513F\u5BB9\u5668,\u9700\u8981\u624B\u52A8\u6E05\u7406\u3002"})]})}),(0,e.jsx)(Ie.Z,{name:"enableForce",valuePropName:"checked",children:(0,e.jsx)(Ve.Z,{disabled:!!h.nodeId,children:"\u5F3A\u5236\u9000\u51FA\uFF1F"})})]})}),action:A()(d()().mark(function o(){var $;return d()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.abrupt("return",(0,E.QB)({nodeId:h.nodeId,force:($=x.current)===null||$===void 0?void 0:$.getFieldValue("enableForce")}));case 1:case"end":return Q.stop()}},o)})),onSuccess:function(){h.onFinish&&h.onFinish()},children:h.title},"console")}var sn=n(94617),Ge=(0,a.forwardRef)(function(h,x){var o,$,P,Q,te,w,oe,pe,O,L,ie,b,re,U,ue,De,ge,M,y,c,j,V,Y,C,u,p,Z,z,ve,le,$e,Pe,be,Fn,Sn;(0,a.useImperativeHandle)(x,function(){return{show:function(s){var Ee,g,Me;!((Ee=s.Spec)===null||Ee===void 0)&&Ee.Labels&&((g=Bn.current)===null||g===void 0||g.setFieldValue("labels",Object.keys((Me=s.Spec)===null||Me===void 0?void 0:Me.Labels).map(function(_e){var Ce,yn,xn;return{name:_e,value:(Ce=s.Spec)!==null&&Ce!==void 0&&Ce.Labels&&(yn=s.Spec)!==null&&yn!==void 0&&yn.Labels[_e]?(xn=s.Spec)===null||xn===void 0?void 0:xn.Labels[_e]:""}}))),je(s),Dn(!0)}}});var On=(0,a.useState)(!1),jn=T()(On,2),Zn=jn[0],Dn=jn[1],Bn=(0,a.useRef)(),Rn=(0,a.useState)(),In=T()(Rn,2),t=In[0],je=In[1],Ue=new B.Uo("swarm"),qe=new B.Uo("system.home.overview"),$n=(0,a.useContext)(ze.Z),Pn=$n.message;return(0,e.jsx)(ae.a,{title:"\u8282\u70B9\u8BE6\u60C5",open:Zn,drawerProps:{forceRender:!0,width:fe.R_},onOpenChange:function(s){Dn(s),!s&&h.onFinish&&h.onFinish()},onFinish:function(){var S=A()(d()().mark(function s(Ee){var g,Me;return d()().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,(0,E.Zc)({nodeId:(g=t==null?void 0:t.ID)!==null&&g!==void 0?g:"",labels:Ee.labels});case 2:return Me=Ce.sent,je(Me.data.detail),Pn.success(B.FD.format("finish")),Ce.abrupt("return",!1);case 6:case"end":return Ce.stop()}},s)}));return function(s){return S.apply(this,arguments)}}(),formRef:Bn,children:(0,e.jsxs)(ne.Z,{vertical:!0,gap:20,children:[(0,e.jsx)(I.Z,{title:(0,e.jsx)(We.Z,{}),ghost:!0,subTitle:(0,e.jsx)(R.Z,{children:"\u72B6\u6001\u7BA1\u7406"}),children:(0,e.jsxs)(R.Z,{wrap:!0,children:[(0,e.jsx)(q.Z,{action:A()(d()().mark(function S(){var s;return d()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,E.Zc)({nodeId:(s=t==null?void 0:t.ID)!==null&&s!==void 0?s:"",availability:"active"}));case 1:case"end":return g.stop()}},S)})),onSuccess:function(s){je(s.data.detail)},disabled:(t==null||(o=t.Spec)===null||o===void 0?void 0:o.Availability)=="active"||(t==null||($=t.Status)===null||$===void 0?void 0:$.State)!="ready",tips:Ue.format("nodeListStatusOptionTip.active"),icon:(0,e.jsx)(tn.Z,{}),children:"\u542F\u52A8"}),(0,e.jsx)(q.Z,{action:A()(d()().mark(function S(){var s;return d()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,E.Zc)({nodeId:(s=t==null?void 0:t.ID)!==null&&s!==void 0?s:"",availability:"pause"}));case 1:case"end":return g.stop()}},S)})),onSuccess:function(s){je(s.data.detail)},disabled:(t==null||(P=t.Spec)===null||P===void 0?void 0:P.Availability)=="pause"||(t==null||(Q=t.Status)===null||Q===void 0?void 0:Q.State)!="ready",tips:Ue.format("nodeListStatusOptionTip.pause"),icon:(0,e.jsx)(on.Z,{}),children:"\u6682\u505C"}),(0,e.jsx)(q.Z,{action:A()(d()().mark(function S(){var s;return d()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,E.Zc)({nodeId:(s=t==null?void 0:t.ID)!==null&&s!==void 0?s:"",availability:"drain"}));case 1:case"end":return g.stop()}},S)})),onSuccess:function(s){je(s.data.detail)},tips:Ue.format("nodeListStatusOptionTip.drain"),disabled:(t==null||(te=t.Spec)===null||te===void 0?void 0:te.Availability)=="drain"||(t==null||(w=t.Status)===null||w===void 0?void 0:w.State)!="ready",icon:(0,e.jsx)(He.Z,{}),children:"\u505C\u6B62"}),(0,e.jsx)(se.Z,{type:"vertical"}),(t==null||(oe=t.Spec)===null||oe===void 0?void 0:oe.Role)=="worker"&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(q.Z,{action:A()(d()().mark(function S(){var s;return d()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,E.Zc)({nodeId:(s=t==null?void 0:t.ID)!==null&&s!==void 0?s:"",role:"manager"}));case 1:case"end":return g.stop()}},S)})),onSuccess:function(s){je(s.data.detail)},type:"primary",disabled:(t==null||(pe=t.Spec)===null||pe===void 0?void 0:pe.Availability)=="drain"||(t==null||(O=t.Status)===null||O===void 0?void 0:O.State)!="ready",icon:(0,e.jsx)(Ke,{}),children:"\u8BBE\u7F6E\u4E3A\u7BA1\u7406\u8282\u70B9"})}),(t==null||(L=t.Spec)===null||L===void 0?void 0:L.Role)=="manager"&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(q.Z,{action:A()(d()().mark(function S(){var s;return d()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,E.Zc)({nodeId:(s=t==null?void 0:t.ID)!==null&&s!==void 0?s:"",role:"worker"}));case 1:case"end":return g.stop()}},S)})),onSuccess:function(s){je(s.data.detail)},type:"primary",disabled:(t==null||(ie=t.Spec)===null||ie===void 0?void 0:ie.Availability)=="drain"||(t==null||(b=t.Status)===null||b===void 0?void 0:b.State)!="ready",icon:(0,e.jsx)(f,{}),children:"\u8BBE\u7F6E\u4E3A\u5DE5\u4F5C\u8282\u70B9"})}),(0,e.jsx)(se.Z,{type:"vertical"}),(0,e.jsx)(Le,{title:"\u5220\u9664\u8282\u70B9",nodeId:t==null?void 0:t.ID,onFinish:function(){Dn(!1),h.onFinish&&h.onFinish()}})]})}),(0,e.jsx)(I.Z,{title:(0,e.jsx)(D.Z,{}),subTitle:"\u8BE6\u60C5",ghost:!0,children:(0,e.jsxs)(F.Z,{column:1,bordered:!0,labelStyle:{width:150},children:[(0,e.jsxs)(F.Z.Item,{label:"Hostname",children:[(0,e.jsx)(K.Z,{title:t==null?void 0:t.ID})," - ",t==null||(re=t.Description)===null||re===void 0?void 0:re.Hostname," - ",(0,e.jsx)(me.Z,{color:"blue",children:t==null||(U=t.Spec)===null||U===void 0?void 0:U.Role})," ",t&&(0,e.jsx)(W.Z,{status:"swarm.".concat((ue=t.Status)===null||ue===void 0?void 0:ue.State),tip:Ue.format("nodeListRunStatusOptionTip.".concat((De=(ge=t.Status)===null||ge===void 0?void 0:ge.State)!==null&&De!==void 0?De:"ready"))}),t&&(0,e.jsx)(W.Z,{status:"swarm.".concat((M=t.Spec)===null||M===void 0?void 0:M.Availability),tip:Ue.format("nodeListStatusOptionTip.".concat((y=(c=t.Spec)===null||c===void 0?void 0:c.Availability)!==null&&y!==void 0?y:"active"))})]}),(0,e.jsx)(F.Z.Item,{label:qe.format("basicDockerTitleSystemVersion"),children:"".concat(t==null||(j=t.Description)===null||j===void 0||(j=j.Platform)===null||j===void 0?void 0:j.OS,` - 
              `).concat(t==null||(V=t.Description)===null||V===void 0||(V=V.Platform)===null||V===void 0?void 0:V.Architecture,` - 
              `).concat(t==null||(Y=t.Description)===null||Y===void 0||(Y=Y.Engine)===null||Y===void 0?void 0:Y.EngineVersion)}),(0,e.jsxs)(F.Z.Item,{label:"Cpu",children:[((C=t==null||(u=t.Description)===null||u===void 0||(u=u.Resources)===null||u===void 0?void 0:u.NanoCPUs)!==null&&C!==void 0?C:0)/1e9," ",B.FD.format("unitCpu")]}),(0,e.jsx)(F.Z.Item,{label:"Memory",children:(0,de.FI)((p=t==null||(Z=t.Description)===null||Z===void 0||(Z=Z.Resources)===null||Z===void 0?void 0:Z.MemoryBytes)!==null&&p!==void 0?p:0)}),(0,e.jsx)(F.Z.Item,{label:qe.format("basicDockerTitlePluginsVolume"),children:(0,e.jsx)(R.Z,{children:(t==null||(z=t.Description)===null||z===void 0||(z=z.Engine)===null||z===void 0?void 0:z.Plugins)&&(t==null||(ve=t.Description)===null||ve===void 0||(ve=ve.Engine)===null||ve===void 0?void 0:ve.Plugins.filter(function(S){return S.Type=="Volume"}).map(function(S){return S.Name}))})}),(0,e.jsx)(F.Z.Item,{label:qe.format("basicDockerTitlePluginsNetwork"),children:(0,e.jsx)(R.Z,{wrap:!0,children:(t==null||(le=t.Description)===null||le===void 0||(le=le.Engine)===null||le===void 0?void 0:le.Plugins)&&(t==null||($e=t.Description)===null||$e===void 0||($e=$e.Engine)===null||$e===void 0?void 0:$e.Plugins.filter(function(S){return S.Type=="Network"}).map(function(S){return S.Name}))})}),(0,e.jsx)(F.Z.Item,{label:qe.format("basicDockerTitleLogDriver"),children:(0,e.jsx)(R.Z,{wrap:!0,children:(t==null||(Pe=t.Description)===null||Pe===void 0||(Pe=Pe.Engine)===null||Pe===void 0?void 0:Pe.Plugins)&&(t==null||(be=t.Description)===null||be===void 0||(be=be.Engine)===null||be===void 0?void 0:be.Plugins.filter(function(S){return S.Type=="Log"}).map(function(S){return S.Name}))})})]})}),t&&t.ID&&Zn&&(0,e.jsx)(sn.Z,{showWithNodeName:(Fn=t.Description)===null||Fn===void 0?void 0:Fn.Hostname}),(t==null||(Sn=t.Spec)===null||Sn===void 0?void 0:Sn.Labels)&&(0,e.jsx)(I.Z,{title:(0,e.jsx)(N.Z,{}),ghost:!0,subTitle:"\u8282\u70B9\u6807\u7B7E",children:(0,e.jsx)(Se.Z,{showCardGhost:!0,name:"labels",showAddButton:!0,addButtonLabel:"\u6DFB\u52A0\u8282\u70B9\u6807\u7B7E"})})]})})}),dn=Ge,Je=n(98009),cn=function(x,o){return a.createElement(Re.Z,(0,Oe.Z)({},x,{ref:o,icon:Je.Z}))},vn=a.forwardRef(cn),m=vn,J=n(30432),fn=function(x,o){return a.createElement(Re.Z,(0,Oe.Z)({},x,{ref:o,icon:J.Z}))},mn=a.forwardRef(fn),pn=mn,hn=n(90078),Xe=n(78099),Qe=n(32983),Ye=n(60940),En=n(40411),Cn=n(83062),gn=n(22181),ke={xs:1,sm:2,md:2,lg:2,xl:3,xxl:4},X={display:"flex",justifyContent:"flex-end",width:100};function ce(){var h=(0,a.useState)(),x=T()(h,2),o=x[0],$=x[1],P=(0,a.useState)(0),Q=T()(P,2),te=Q[0],w=Q[1],oe=new B.Uo("swarm"),pe=(0,a.useRef)(),O=(0,a.useRef)(),L=(0,a.useState)(),ie=T()(L,2),b=ie[0],re=ie[1],U=(0,a.useState)(),ue=T()(U,2),De=ue[0],ge=ue[1];return(0,a.useEffect)(function(){(0,E.JC)().then(function(M){var y;$(M.data),!((y=O.current)===null||y===void 0)&&y.reloadAndRest&&O.current.reloadAndRest()})},[te]),(0,e.jsxs)(hn._z,{extra:[o&&o.status.isManage&&(0,e.jsx)(nn,{type:"add",detail:o,onFinish:function(){w(te+1)}},"join"),o&&o.status.isNode&&(0,e.jsx)(Le,{title:o.status.isManage?"\u5220\u9664\u96C6\u7FA4":"\u9000\u51FA\u96C6\u7FA4",onFinish:function(){w(te+1)}},"leave")],children:[(0,e.jsx)(dn,{ref:pe,onFinish:function(){w(te+1)}}),(0,e.jsxs)(I.Z,{direction:"column",ghost:!0,gutter:[0,10],children:[(!o||!o.status.isNode)&&(0,e.jsx)(ne.Z,{justify:"center",style:{height:"58vh"},vertical:!0,children:(0,e.jsx)(Qe.Z,{image:Qe.Z.PRESENTED_IMAGE_SIMPLE,description:(0,e.jsxs)(R.Z,{direction:"vertical",size:[0,20],children:["\u5F53\u524D Docker \u73AF\u5883\u975E Swarm \u8282\u70B9\uFF0C\u60A8\u53EF\u4EE5\u9009\u62E9\u52A0\u5165\u4E00\u4E2A\u5DF2\u5B58\u5728\u7684\u96C6\u7FA4\u6216\u662F\u521D\u59CB\u5316\u4E3A\u4E00\u4E2A\u65B0\u7684\u96C6\u7FA4",(0,e.jsxs)(R.Z,{children:[(0,e.jsx)(nn,{type:"join",detail:o,onFinish:function(){w(te+1)}},"join"),(0,e.jsx)(xe,{onFinish:function(){w(te+1)}})]})]})})}),o&&o.status.isNode&&o.info&&(0,e.jsxs)(I.Z,{title:(0,e.jsx)(m,{}),subTitle:"\u5F53\u524D\u8282\u70B9",direction:"column",gutter:[0,20],children:[(0,e.jsx)(I.Z,{ghost:!0,children:(0,e.jsxs)(F.Z,{column:ke,labelStyle:X,children:[(0,e.jsx)(F.Z.Item,{label:"Id",children:o.info.NodeID}),(0,e.jsx)(F.Z.Item,{label:B.FD.format("listRunStatus"),children:(0,e.jsx)(W.Z,{status:"swarm.".concat(o.info.LocalNodeState),tip:oe.format("nodeListRunStatusOptionTip.".concat(o.info.LocalNodeState))})}),(0,e.jsx)(F.Z.Item,{label:B.FD.format("listType"),children:oe.format("nodeAddRoleOption.".concat(o.info.ControlAvailable?"manager":"worker"))})]})}),o.info.RemoteManagers&&!o.status.isManage&&(0,e.jsx)(I.Z,{ghost:!0,title:(0,e.jsx)(m,{}),subTitle:"\u7BA1\u7406\u8282\u70B9",children:(0,e.jsx)(Ye.Z,{pagination:!1,columns:[{title:B.FD.format("listName"),dataIndex:"NodeID"},{title:B.FD.format("listIpAddress"),dataIndex:"Addr"}],dataSource:o.info.RemoteManagers})})]}),o&&o.status.isManage&&o.swarm&&(0,e.jsx)(I.Z,{title:(0,e.jsx)(pn,{}),subTitle:"\u96C6\u7FA4\u4FE1\u606F",direction:"column",gutter:[0,15],children:(0,e.jsx)(I.Z,{ghost:!0,children:(0,e.jsxs)(F.Z,{column:ke,labelStyle:X,children:[(0,e.jsx)(F.Z.Item,{label:"Id",children:o.swarm.ID}),(0,e.jsx)(F.Z.Item,{label:"\u540D\u79F0",children:o.swarm.Spec&&o.swarm.Spec.Name}),(0,e.jsxs)(F.Z.Item,{label:"\u8D44\u6E90",children:[b&&(0,de.$w)(b.cpu)," / ",(0,de.FI)(b==null?void 0:b.memory)]}),(0,e.jsxs)(F.Z.Item,{label:"\u5DE5\u4F5C / \u7BA1\u7406",children:[o.info.Nodes," / ",o.info.Managers]}),(0,e.jsx)(F.Z.Item,{label:"\u521B\u5EFA\u65F6\u95F4",children:new Date(o.swarm.CreatedAt).toLocaleString()}),(0,e.jsx)(F.Z.Item,{label:"\u66F4\u65B0\u65F6\u95F4",children:new Date(o.swarm.UpdatedAt).toLocaleString()})]})})}),o&&o.status.isManage&&o.info.LocalNodeState!="error"&&(0,e.jsx)(I.Z,{title:(0,e.jsx)(N.Z,{}),subTitle:"\u96C6\u7FA4\u8282\u70B9",children:(0,e.jsx)(Xe.Z,{scroll:{x:"max-content"},rowKey:"ID",actionRef:O,pagination:!1,ghost:!0,search:!1,request:A()(d()().mark(function M(){var y,c,j,V,Y;return d()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,E.HN)();case 2:return y=u.sent,c={cpu:0,memory:0},y.data.list&&y.data.list.forEach(function(p){var Z,z,ve,le;c.cpu+=(Z=(z=p.Description)===null||z===void 0||(z=z.Resources)===null||z===void 0?void 0:z.NanoCPUs)!==null&&Z!==void 0?Z:0,c.memory+=(ve=(le=p.Description)===null||le===void 0||(le=le.Resources)===null||le===void 0?void 0:le.MemoryBytes)!==null&&ve!==void 0?ve:0}),re(c),u.next=8,(0,E.kM)();case 8:return j=u.sent,u.next=11,(0,E.XX)();case 11:return V=u.sent,V.data&&V.data.list&&(Y=[],V.data.list.forEach(function(p){if(p.Status.State=="running"){var Z,z=j.data&&j.data.list&&((Z=j.data.list.find(function(ve){return ve.ID==p.ServiceID}))===null||Z===void 0||(Z=Z.Spec)===null||Z===void 0?void 0:Z.Name);(!z||z=="")&&(z=p.ServiceID),Y.push({nodeId:p.NodeID,serviceName:z,taskId:p.ID})}}),ge(Y)),u.abrupt("return",{data:y.data.list,success:!0,total:y.data.list.length});case 14:case"end":return u.stop()}},M)})),columns:[{title:B.FD.format("listName"),render:function(y,c,j,V,Y){var C;return(0,e.jsxs)(R.Z,{children:[(0,e.jsx)(he.Z.Link,{onClick:function(){var p;(p=pe.current)===null||p===void 0||p.show(c)},children:(C=c.Description)===null||C===void 0?void 0:C.Hostname})," ",o.node&&c.ID==o.node.ID&&(0,e.jsx)(En.Z,{status:"processing"})]})}},{title:B.FD.format("listRole"),dataIndex:["Spec","Role"],render:function(y,c,j,V,Y){var C,u,p,Z;return(0,e.jsx)(me.Z,{color:oe.format("nodeAddRoleColor.".concat((C=(u=c.Spec)===null||u===void 0?void 0:u.Role)!==null&&C!==void 0?C:"worker")),children:oe.format("nodeAddRoleOption.".concat((p=(Z=c.Spec)===null||Z===void 0?void 0:Z.Role)!==null&&p!==void 0?p:"worker"))})}},{title:"CPU / Memory",render:function(y,c,j,V,Y){var C,u,p;return"".concat((0,de.$w)((C=c.Description)===null||C===void 0||(C=C.Resources)===null||C===void 0?void 0:C.NanoCPUs)," / ").concat((0,de.FI)((u=(p=c.Description)===null||p===void 0||(p=p.Resources)===null||p===void 0?void 0:p.MemoryBytes)!==null&&u!==void 0?u:0))}},{title:B.FD.format("listRunTask"),render:function(y,c,j,V,Y){var C={};return De&&De.filter(function(u){return u.nodeId==c.ID}).forEach(function(u){C[u.serviceName]||(C[u.serviceName]=0),C[u.serviceName]+=1}),Object.keys(C).map(function(u,p){return(0,e.jsx)(Cn.Z,{title:u,children:(0,e.jsx)(me.Z,{color:"success",children:C[u]})},"".concat(u,"-").concat(p))})}},{title:B.FD.format("listApiVersion"),dataIndex:["Description","Engine","EngineVersion"]},{title:B.FD.format("listIpAddress"),dataIndex:["Status","Addr"]},{title:B.FD.format("listRunStatus"),render:function(y,c,j,V,Y){var C,u,p=(C=(u=c.Status)===null||u===void 0?void 0:u.State)!==null&&C!==void 0?C:"ready";return(0,e.jsx)(W.Z,{status:"swarm.".concat(p),tip:oe.format("nodeListRunStatusOptionTip.".concat(p))})}},{title:B.FD.format("listStatus"),render:function(y,c,j,V,Y){var C,u,p,Z;return(0,e.jsx)(W.Z,{status:"swarm.".concat((C=(u=c.Spec)===null||u===void 0?void 0:u.Availability)!==null&&C!==void 0?C:"active"),tip:oe.format("nodeListStatusOptionTip.".concat((p=(Z=c.Spec)===null||Z===void 0?void 0:Z.Availability)!==null&&p!==void 0?p:"active"))})}}],toolBarRender:function(){return[(0,e.jsx)(q.Z,{action:function(){return(0,E.kp)()},onSuccess:function(){var c,j;return!((c=O.current)===null||c===void 0)&&c.reloadAndRest&&((j=O.current)===null||j===void 0||j.reloadAndRest()),!0},onError:function(){var c,j;return!((c=O.current)===null||c===void 0)&&c.reset&&((j=O.current)===null||j===void 0||j.reset()),!0},tips:B.FD.format("listManagePruneTip"),confirm:"notification.confirm.title",children:B.FD.format("listManagePrune")},"clear")]}})}),o&&o.status.isNode&&o.info.LocalNodeState=="error"&&(0,e.jsx)(gn.ZP,{status:"error",title:oe.format(["nodeListRunStatusOptionTip.unreachable","nodeListRunStatusOptionTip.down"]),subTitle:o.info.Error,extra:[(0,e.jsx)(Le,{title:"\u9000\u51FA\u96C6\u7FA4"},"leave")]})]})]})}},40056:function(ye,G,n){n.d(G,{Z:function(){return an}});var l=n(67294),d=n(89739),k=n(4340),A=n(97937),_=n(21640),T=n(78860),W=n(93967),E=n.n(W),ae=n(29372),H=n(64217),ee=n(42550),Fe=n(96159),ne=n(53124),a=n(11568),e=n(14747),xe=n(83559);const fe=(i,r,v,f,D)=>({background:i,border:`${(0,a.bf)(f.lineWidth)} ${f.lineType} ${r}`,[`${D}-icon`]:{color:v}}),B=i=>{const{componentCls:r,motionDurationSlow:v,marginXS:f,marginSM:D,fontSize:N,fontSizeLG:I,lineHeight:R,borderRadiusLG:se,motionEaseInOutCirc:F,withDescriptionIconSize:me,colorText:q,colorTextHeading:de,withDescriptionPadding:Se,defaultPadding:K}=i;return{[r]:Object.assign(Object.assign({},(0,e.Wf)(i)),{position:"relative",display:"flex",alignItems:"center",padding:K,wordWrap:"break-word",borderRadius:se,[`&${r}-rtl`]:{direction:"rtl"},[`${r}-content`]:{flex:1,minWidth:0},[`${r}-icon`]:{marginInlineEnd:f,lineHeight:0},"&-description":{display:"none",fontSize:N,lineHeight:R},"&-message":{color:de},[`&${r}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${v} ${F}, opacity ${v} ${F},
        padding-top ${v} ${F}, padding-bottom ${v} ${F},
        margin-bottom ${v} ${F}`},[`&${r}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${r}-with-description`]:{alignItems:"flex-start",padding:Se,[`${r}-icon`]:{marginInlineEnd:D,fontSize:me,lineHeight:0},[`${r}-message`]:{display:"block",marginBottom:f,color:de,fontSize:I},[`${r}-description`]:{display:"block",color:q}},[`${r}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},Ze=i=>{const{componentCls:r,colorSuccess:v,colorSuccessBorder:f,colorSuccessBg:D,colorWarning:N,colorWarningBorder:I,colorWarningBg:R,colorError:se,colorErrorBorder:F,colorErrorBg:me,colorInfo:q,colorInfoBorder:de,colorInfoBg:Se}=i;return{[r]:{"&-success":fe(D,f,v,i,r),"&-info":fe(Se,de,q,i,r),"&-warning":fe(R,I,N,i,r),"&-error":Object.assign(Object.assign({},fe(me,F,se,i,r)),{[`${r}-description > pre`]:{margin:0,padding:0}})}}},Be=i=>{const{componentCls:r,iconCls:v,motionDurationMid:f,marginXS:D,fontSizeIcon:N,colorIcon:I,colorIconHover:R}=i;return{[r]:{"&-action":{marginInlineStart:D},[`${r}-close-icon`]:{marginInlineStart:D,padding:0,overflow:"hidden",fontSize:N,lineHeight:(0,a.bf)(N),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${v}-close`]:{color:I,transition:`color ${f}`,"&:hover":{color:R}}},"&-close-text":{color:I,transition:`color ${f}`,"&:hover":{color:R}}}}},Te=i=>({withDescriptionIconSize:i.fontSizeHeading3,defaultPadding:`${i.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${i.paddingMD}px ${i.paddingContentHorizontalLG}px`});var Ie=(0,xe.I$)("Alert",i=>[B(i),Ze(i),Be(i)],Te),Ne=function(i,r){var v={};for(var f in i)Object.prototype.hasOwnProperty.call(i,f)&&r.indexOf(f)<0&&(v[f]=i[f]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var D=0,f=Object.getOwnPropertySymbols(i);D<f.length;D++)r.indexOf(f[D])<0&&Object.prototype.propertyIsEnumerable.call(i,f[D])&&(v[f[D]]=i[f[D]]);return v};const we={success:d.Z,info:T.Z,error:k.Z,warning:_.Z},en=i=>{const{icon:r,prefixCls:v,type:f}=i,D=we[f]||null;return r?(0,Fe.wm)(r,l.createElement("span",{className:`${v}-icon`},r),()=>({className:E()(`${v}-icon`,r.props.className)})):l.createElement(D,{className:`${v}-icon`})},ze=i=>{const{isClosable:r,prefixCls:v,closeIcon:f,handleClose:D,ariaProps:N}=i,I=f===!0||f===void 0?l.createElement(A.Z,null):f;return r?l.createElement("button",Object.assign({type:"button",onClick:D,className:`${v}-close-icon`,tabIndex:0},N),I):null};var We=l.forwardRef((i,r)=>{const{description:v,prefixCls:f,message:D,banner:N,className:I,rootClassName:R,style:se,onMouseEnter:F,onMouseLeave:me,onClick:q,afterClose:de,showIcon:Se,closable:K,closeText:Ae,closeIcon:he,action:Ve,id:Le}=i,sn=Ne(i,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[Ge,dn]=l.useState(!1),Je=l.useRef(null);l.useImperativeHandle(r,()=>({nativeElement:Je.current}));const{getPrefixCls:cn,direction:vn,alert:m}=l.useContext(ne.E_),J=cn("alert",f),[fn,mn,pn]=Ie(J),hn=X=>{var ce;dn(!0),(ce=i.onClose)===null||ce===void 0||ce.call(i,X)},Xe=l.useMemo(()=>i.type!==void 0?i.type:N?"warning":"info",[i.type,N]),Qe=l.useMemo(()=>typeof K=="object"&&K.closeIcon||Ae?!0:typeof K=="boolean"?K:he!==!1&&he!==null&&he!==void 0?!0:!!(m!=null&&m.closable),[Ae,he,K,m==null?void 0:m.closable]),Ye=N&&Se===void 0?!0:Se,En=E()(J,`${J}-${Xe}`,{[`${J}-with-description`]:!!v,[`${J}-no-icon`]:!Ye,[`${J}-banner`]:!!N,[`${J}-rtl`]:vn==="rtl"},m==null?void 0:m.className,I,R,pn,mn),Cn=(0,H.Z)(sn,{aria:!0,data:!0}),gn=l.useMemo(()=>{var X,ce;return typeof K=="object"&&K.closeIcon?K.closeIcon:Ae||(he!==void 0?he:typeof(m==null?void 0:m.closable)=="object"&&(!((X=m==null?void 0:m.closable)===null||X===void 0)&&X.closeIcon)?(ce=m==null?void 0:m.closable)===null||ce===void 0?void 0:ce.closeIcon:m==null?void 0:m.closeIcon)},[he,K,Ae,m==null?void 0:m.closeIcon]),ke=l.useMemo(()=>{const X=K!=null?K:m==null?void 0:m.closable;if(typeof X=="object"){const{closeIcon:ce}=X;return Ne(X,["closeIcon"])}return{}},[K,m==null?void 0:m.closable]);return fn(l.createElement(ae.ZP,{visible:!Ge,motionName:`${J}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:X=>({maxHeight:X.offsetHeight}),onLeaveEnd:de},(X,ce)=>{let{className:h,style:x}=X;return l.createElement("div",Object.assign({id:Le,ref:(0,ee.sQ)(Je,ce),"data-show":!Ge,className:E()(En,h),style:Object.assign(Object.assign(Object.assign({},m==null?void 0:m.style),se),x),onMouseEnter:F,onMouseLeave:me,onClick:q,role:"alert"},Cn),Ye?l.createElement(en,{description:v,icon:i.icon,prefixCls:J,type:Xe}):null,l.createElement("div",{className:`${J}-content`},D?l.createElement("div",{className:`${J}-message`},D):null,v?l.createElement("div",{className:`${J}-description`},v):null),Ve?l.createElement("div",{className:`${J}-action`},Ve):null,l.createElement(ze,{isClosable:Qe,prefixCls:J,closeIcon:gn,handleClose:hn,ariaProps:ke}))}))}),tn=n(15671),on=n(43144),He=n(61120),Oe=n(78814),rn=n(82963);function un(i,r,v){return r=(0,He.Z)(r),(0,rn.Z)(i,(0,Oe.Z)()?Reflect.construct(r,v||[],(0,He.Z)(i).constructor):r.apply(i,v))}var Re=n(60136),ln=function(i){function r(){var v;return(0,tn.Z)(this,r),v=un(this,r,arguments),v.state={error:void 0,info:{componentStack:""}},v}return(0,Re.Z)(r,i),(0,on.Z)(r,[{key:"componentDidCatch",value:function(f,D){this.setState({error:f,info:D})}},{key:"render",value:function(){const{message:f,description:D,id:N,children:I}=this.props,{error:R,info:se}=this.state,F=(se==null?void 0:se.componentStack)||null,me=typeof f=="undefined"?(R||"").toString():f,q=typeof D=="undefined"?F:D;return R?l.createElement(We,{id:N,type:"error",message:me,description:l.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},q)}):I}}])}(l.Component);const Ke=We;Ke.ErrorBoundary=ln;var an=Ke}}]);
