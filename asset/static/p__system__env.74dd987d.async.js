"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1180],{88484:function(H,O,e){e.d(O,{Z:function(){return h}});var g=e(87462),u=e(67294),j={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},A=j,T=e(84089),I=function(r,S){return u.createElement(T.Z,(0,g.Z)({},r,{ref:S,icon:A}))},m=u.forwardRef(I),h=m},52688:function(H,O,e){var g=e(1413),u=e(45987),j=e(67294),A=e(1961),T=e(85893),I=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],m=j.forwardRef(function(h,c){var r=h.fieldProps,S=h.unCheckedChildren,R=h.checkedChildren,Z=h.proFieldProps,P=(0,u.Z)(h,I);return(0,T.jsx)(A.Z,(0,g.Z)({valueType:"switch",fieldProps:(0,g.Z)({unCheckedChildren:S,checkedChildren:R},r),ref:c,valuePropName:"checked",proFieldProps:Z,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},P))});O.Z=m},5966:function(H,O,e){var g=e(97685),u=e(1413),j=e(45987),A=e(21770),T=e(72723),I=e(55241),m=e(97435),h=e(67294),c=e(1961),r=e(85893),S=["fieldProps","proFieldProps"],R=["fieldProps","proFieldProps"],Z="text",P=function(t){var o=t.fieldProps,E=t.proFieldProps,i=(0,j.Z)(t,S);return(0,r.jsx)(c.Z,(0,u.Z)({valueType:Z,fieldProps:o,filedConfig:{valueType:Z},proFieldProps:E},i))},F=function(t){var o=(0,A.Z)(t.open||!1,{value:t.open,onChange:t.onOpenChange}),E=(0,g.Z)(o,2),i=E[0],K=E[1];return(0,r.jsx)(T.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(N){var $,a=N.getFieldValue(t.name||[]);return(0,r.jsx)(I.Z,(0,u.Z)((0,u.Z)({getPopupContainer:function(n){return n&&n.parentNode?n.parentNode:n},onOpenChange:function(n){return K(n)},content:(0,r.jsxs)("div",{style:{padding:"4px 0"},children:[($=t.statusRender)===null||$===void 0?void 0:$.call(t,a),t.strengthText?(0,r.jsx)("div",{style:{marginTop:10},children:(0,r.jsx)("span",{children:t.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},t.popoverProps),{},{open:i,children:t.children}))}})},b=function(t){var o=t.fieldProps,E=t.proFieldProps,i=(0,j.Z)(t,R),K=(0,h.useState)(!1),V=(0,g.Z)(K,2),N=V[0],$=V[1];return o!=null&&o.statusRender&&i.name?(0,r.jsx)(F,{name:i.name,statusRender:o==null?void 0:o.statusRender,popoverProps:o==null?void 0:o.popoverProps,strengthText:o==null?void 0:o.strengthText,open:N,onOpenChange:$,children:(0,r.jsx)("div",{children:(0,r.jsx)(c.Z,(0,u.Z)({valueType:"password",fieldProps:(0,u.Z)((0,u.Z)({},(0,m.Z)(o,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(l){var n;o==null||(n=o.onBlur)===null||n===void 0||n.call(o,l),$(!1)},onClick:function(l){var n;o==null||(n=o.onClick)===null||n===void 0||n.call(o,l),$(!0)}}),proFieldProps:E,filedConfig:{valueType:Z}},i))})}):(0,r.jsx)(c.Z,(0,u.Z)({valueType:"password",fieldProps:o,proFieldProps:E,filedConfig:{valueType:Z}},i))},U=P;U.Password=b,U.displayName="ProFormComponent",O.Z=U},80821:function(H,O,e){e.d(O,{Z:function(){return c}});var g=e(5574),u=e.n(g),j=e(24963),A=e(86738),T=e(14726),I=e(83062),m=e(67294),h=e(85893);function c(r){var S=(0,m.useState)(!1),R=u()(S,2),Z=R[0],P=R[1],F=(0,m.useContext)(j.Z),b=F.lang,U=F.notice,D=F.message,t=function(){P(!0),r.action().then(function(E){if(P(!1),typeof r.onSuccess=="function"&&r.onSuccess(E),r.messageSuccess){var i="";typeof r.messageSuccess=="function"?i=r.messageSuccess(E):i=r.messageSuccess,i.indexOf(".")>-1&&(i=b(i)),r.asynced?D.info(i):D.success(i)}}).catch(function(E){P(!1),typeof r.onError=="function"&&r.onError(E)})};return r.confirm?(0,h.jsx)(A.Z,{style:{width:500},title:r.confirmTitle?r.confirmTitle:b("notification.title.tip"),description:r.confirm,onConfirm:t,okText:"Yes",cancelText:"No",children:(0,h.jsx)(T.ZP,{disabled:r.disabled,icon:r.icon,loading:Z,danger:r.danger,type:r.type,children:r.children})}):(0,h.jsx)(I.Z,{title:r.tips,children:(0,h.jsx)(T.ZP,{disabled:r.disabled,icon:r.icon,loading:Z,onClick:t,danger:r.danger,type:r.type,children:r.children})})}},89063:function(H,O,e){e.d(O,{Z:function(){return h}});var g=e(24963),u=e(88484),j=e(62370),A=e(31418),T=e(14726),I=e(67294),m=e(85893);function h(c){var r=(0,I.useContext)(g.Z),S=r.message,R=r.notice,Z=r.lang,P=(0,I.useRef)(null),F=A.Z.useApp(),b=function(){P.current&&(P.current.click(),P.current.onchange=function(D){if(!D||!D.target)return"";var t=new FileReader;t.onload=function(E){var i,K,V=(i=E.target)===null||i===void 0?void 0:i.result;if(c.onLoad)try{c.onLoad&&c.onLoad(V)}catch(N){R.error(N);return}typeof c.onImport=="function"&&(S.success("\u6210\u529F\u5BFC\u5165 ".concat(c.title)),c.onImport(V)),(K=P.current)!==null&&K!==void 0&&K.value&&(P.current.value="")};var o=D.target;if(o.files)try{t.readAsText(o.files[0])}catch(E){R.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(j.Z,{children:(0,m.jsx)(T.ZP,{icon:(0,m.jsx)(u.Z,{}),block:!0,onClick:b,children:c.title})}),(0,m.jsx)("input",{style:{display:"none"},type:"file",ref:P,name:"importFileInput"})]})}},24963:function(H,O,e){var g=e(67294),u=(0,g.createContext)({});O.Z=u},53893:function(H,O,e){e.r(O),e.d(O,{default:function(){return l}});var g=e(15009),u=e.n(g),j=e(99289),A=e.n(j),T=e(80821),I=e(5574),m=e.n(I),h=e(184),c=e(5966),r=e(52688),S=e(97462),R=e(62370),Z=e(14726),P=e(86250),F=e(67294),b=e(91845),U=e(87662),D=e(89063),t=e(85893),o=(0,F.forwardRef)(function(n,s){(0,F.useImperativeHandle)(s,function(){return{edit:function(d){var f;(f=x.current)===null||f===void 0||f.setFieldsValue({name:d.name,title:d.title,address:d.address,enableTLS:d.enableTLS,tlsCa:d.tlsCa,tlsCert:d.tlsCert,tlsKey:d.tlsKey}),C(!0),W(d.name)}}});var v=(0,F.useState)(!1),p=m()(v,2),M=p[0],C=p[1],x=(0,F.useRef)(),L=(0,F.useState)(""),J=m()(L,2),G=J[0],W=J[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Z.ZP,{onClick:function(){var d;W(""),(d=x.current)===null||d===void 0||d.resetFields(),C(!0)},type:"primary",children:"\u6DFB\u52A0Docker\u73AF\u5883"}),(0,t.jsxs)(h.a,{drawerProps:{forceRender:!0},onOpenChange:function(d){C(d)},open:M,width:800,formRef:x,title:"\u6DFB\u52A0Docker\u73AF\u5883",onFinish:function(){var z=A()(u()().mark(function d(f){var B,y;return u()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return B={name:f.name,title:f.title,address:f.address,tlsCa:f.tlsCa,tlsCert:f.tlsCert,tlsKey:f.tlsKey,enableTLS:f.enableTLS},w.next=3,(0,U.ad)(B);case 3:return y=w.sent,n.onFinish&&n.onFinish(),w.abrupt("return",!0);case 6:case"end":return w.stop()}},d)}));return function(d){return z.apply(this,arguments)}}(),children:[(0,t.jsx)(c.Z,{label:"\u540D\u79F0",name:"title",required:!0,rules:[{required:!0}],fieldProps:{onChange:function(d){var f="";if(d.target.value&&!G){var B,y=(0,b.N9)(d.target.value.trim(),{toneType:"none",type:"array"});f=y.join(""),(B=x.current)===null||B===void 0||B.setFieldValue("name",f)}}}}),(0,t.jsx)(c.Z,{label:"\u6807\u8BC6",name:"name",required:!0,disabled:G!="",rules:[{required:!0}],placeholder:"\u6807\u8BC6Docker\u73AF\u5883\uFF0C\u53EA\u5141\u8BB8\u4E3A\u82F1\u6587\u6216\u662F\u6570\u5B57"}),(0,t.jsx)(c.Z,{label:"Docker Api \u5730\u5740",name:"address",tooltip:"\u8FDE\u63A5\u8FDC\u7A0B Docker \u65F6\u8BF7\u5148\u5F00\u542F Api \u5730\u5740\u8BBF\u95EE\u3002",placeholder:"\u4F8B\u5982\uFF1Aunix:///var/run/docker.sock\u3001tcp://192.16.0.5:2375"}),(0,t.jsx)(r.Z,{label:"\u542F\u7528TLS",name:"enableTLS",tooltip:"\u751F\u6210\u6559\u7A0B\u89C1\uFF1Ahttps://donknap.github.io/dpanel-docs/#/zh-cn/manual/remote"}),(0,t.jsx)(S.Z,{name:["enableTLS"],children:function(d){var f=d.enableTLS;if(f)return(0,t.jsxs)(P.Z,{gap:20,justify:"start",children:[(0,t.jsx)(R.Z,{name:"tlsCa",children:(0,t.jsx)(D.Z,{title:"\u4E0A\u4F20CA\u8BC1\u4E66 ca.pem",onImport:function(y){var _;return(_=x.current)===null||_===void 0||_.setFieldValue("tlsCa",y),!0},onLoad:function(y){if(y.indexOf("CERTIFICATE")<0)throw new Error("\u5BFC\u5165ca.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})}),(0,t.jsx)(R.Z,{name:"tlsCert",children:(0,t.jsx)(D.Z,{title:"\u4E0A\u4F20\u8BC1\u4E66\u6587\u4EF6 cert.pem",onImport:function(y){var _;return(_=x.current)===null||_===void 0||_.setFieldValue("tlsCert",y),!0},onLoad:function(y){if(y.indexOf("CERTIFICATE")<0)throw new Error("\u5BFC\u5165cert.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})}),(0,t.jsx)(R.Z,{name:"tlsKey",children:(0,t.jsx)(D.Z,{title:"\u4E0A\u4F20\u5BC6\u94A5\u6587\u4EF6 key.pem",onImport:function(y){var _;return(_=x.current)===null||_===void 0||_.setFieldValue("tlsKey",y),!0},onLoad:function(y){if(y.indexOf("PRIVATE")<0)throw new Error("\u5BFC\u5165key.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})})]})}})]})]})}),E=o,i=e(43425),K=e(90078),V=e(10641),N=e(42075),$=e(96074),a=e(25593);function l(){var n=(0,F.useRef)(),s=(0,F.useRef)();return(0,t.jsx)(K._z,{header:{extra:[(0,t.jsx)(E,{ref:s,onFinish:function(){var p,M;!((p=n.current)===null||p===void 0)&&p.reloadAndRest&&((M=n.current)===null||M===void 0||M.reloadAndRest())}},"dockerEnvCreate")]},children:(0,t.jsx)(V.Z,{rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name"},{title:"\u540D\u79F0",dataIndex:"title"},{title:"\u5730\u5740",dataIndex:"address"},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(p,M,C,x,L){return(0,t.jsx)(N.Z,{split:(0,t.jsx)($.Z,{type:"vertical"}),children:!M.default&&(0,t.jsx)(a.Z.Link,{onClick:function(){var G;(G=s.current)===null||G===void 0||G.edit(M)},children:(0,t.jsx)(i.Z,{})},M.name)})}}],pagination:!1,request:A()(u()().mark(function v(){var p;return u()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,U.Kg)();case 2:return p=C.sent,C.abrupt("return",{data:p.data.list,total:p.data.list.length});case 4:case"end":return C.stop()}},v)})),search:!1,rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0,getCheckboxProps:function(p){return{disabled:p.default}}},actionRef:n,tableAlertOptionRender:function(p){var M=p.selectedRowKeys;return(0,t.jsx)(N.Z,{size:16,children:(0,t.jsx)(T.Z,{danger:!0,type:"primary",action:function(){return(0,U._g)({name:M})},onSuccess:function(){var x,L;return!((x=n.current)===null||x===void 0)&&x.reloadAndRest&&((L=n.current)===null||L===void 0||L.reloadAndRest()),!0},onError:function(){var x,L;return!((x=n.current)===null||x===void 0)&&x.reset&&((L=n.current)===null||L===void 0||L.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"})})}})})}},86250:function(H,O,e){e.d(O,{Z:function(){return $}});var g=e(67294),u=e(93967),j=e.n(u),A=e(98423),T=e(98065),I=e(53124),m=e(83559),h=e(83262);const c=["wrap","nowrap","wrap-reverse"],r=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],S=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],R=(a,l)=>{const n=l.wrap===!0?"wrap":l.wrap;return{[`${a}-wrap-${n}`]:n&&c.includes(n)}},Z=(a,l)=>{const n={};return S.forEach(s=>{n[`${a}-align-${s}`]=l.align===s}),n[`${a}-align-stretch`]=!l.align&&!!l.vertical,n},P=(a,l)=>{const n={};return r.forEach(s=>{n[`${a}-justify-${s}`]=l.justify===s}),n};function F(a,l){return j()(Object.assign(Object.assign(Object.assign({},R(a,l)),Z(a,l)),P(a,l)))}var b=F;const U=a=>{const{componentCls:l}=a;return{[l]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},D=a=>{const{componentCls:l}=a;return{[l]:{"&-gap-small":{gap:a.flexGapSM},"&-gap-middle":{gap:a.flexGap},"&-gap-large":{gap:a.flexGapLG}}}},t=a=>{const{componentCls:l}=a,n={};return c.forEach(s=>{n[`${l}-wrap-${s}`]={flexWrap:s}}),n},o=a=>{const{componentCls:l}=a,n={};return S.forEach(s=>{n[`${l}-align-${s}`]={alignItems:s}}),n},E=a=>{const{componentCls:l}=a,n={};return r.forEach(s=>{n[`${l}-justify-${s}`]={justifyContent:s}}),n},i=()=>({});var K=(0,m.I$)("Flex",a=>{const{paddingXS:l,padding:n,paddingLG:s}=a,v=(0,h.IX)(a,{flexGapSM:l,flexGap:n,flexGapLG:s});return[U(v),D(v),t(v),o(v),E(v)]},i,{resetStyle:!1}),V=function(a,l){var n={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&l.indexOf(s)<0&&(n[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,s=Object.getOwnPropertySymbols(a);v<s.length;v++)l.indexOf(s[v])<0&&Object.prototype.propertyIsEnumerable.call(a,s[v])&&(n[s[v]]=a[s[v]]);return n},$=g.forwardRef((a,l)=>{const{prefixCls:n,rootClassName:s,className:v,style:p,flex:M,gap:C,children:x,vertical:L=!1,component:J="div"}=a,G=V(a,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:W,direction:z,getPrefixCls:d}=g.useContext(I.E_),f=d("flex",n),[B,y,_]=K(f),w=L!=null?L:W==null?void 0:W.vertical,Y=j()(v,s,W==null?void 0:W.className,f,y,_,b(f,a),{[`${f}-rtl`]:z==="rtl",[`${f}-gap-${C}`]:(0,T.n)(C),[`${f}-vertical`]:w}),X=Object.assign(Object.assign({},W==null?void 0:W.style),p);return M&&(X.flex=M),C&&!(0,T.n)(C)&&(X.gap=C),B(g.createElement(J,Object.assign({ref:l,className:Y,style:X},(0,A.Z)(G,["justify","wrap","align"])),x))})}}]);
