"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7523],{75544:function(Q,R,e){var C=e(5574),n=e.n(C),I=e(12323),i=e(78267),d=e.n(i),u=e(75458),j=e.n(u),O=e(67294),c=e(4244),p=e.n(c),m=e(24078),_=e(85893),E,g,a,T=(0,O.forwardRef)(function(r,l){var o,P=(0,O.useState)(!0),S=n()(P,2),J=S[0],X=S[1];return(0,O.useEffect)(function(){return E=new c.Terminal(I.X),g=new u.SearchAddon,a=new i.FitAddon,window.addEventListener("resize",function(){r.showInModal||a.fit()}),r.style&&r.style.fontSize&&(E.options.fontSize=r.style.fontSize),E.loadAddon(a),E.loadAddon(g),E.open(document.getElementById(r.id?r.id:"terminal-container")),r.showInModal||a.fit(),function(){E.reset(),X(!0)}},[]),(0,O.useImperativeHandle)(l,function(){return{write:function(v){J&&(a.fit(),X(!1)),E.write(v)},clear:function(){E.clear()},getTerminal:function(){return E},findNext:function(v){g.findNext(v)},findPrev:function(v){g.findPrevious(v)},fit:function(){a.fit()},onData:function(v){return E.onData(v)}}}),(0,_.jsx)("div",{id:r.id?r.id:"terminal-container",style:{width:r.width?r.width:"100%",height:r.height?r.height:"500px",marginTop:(o=r.style)===null||o===void 0?void 0:o.marginTop}})});R.Z=T},94359:function(Q,R,e){e.d(R,{Z:function(){return T}});var C=e(5574),n=e.n(C),I=e(3089),i=e(98165),d=e(18429),u=e(8751),j=e(66212),O=e(14313),c=e(30159),p=e(87740),m=e(50888),_=e(66309),E=e(83062),g=e(36146),a=e(85893);function T(r){var l,o,P=new g.Uo("components.containerStatus"),S=r.status.split("."),J=n()(S,2),X=J[0],h=J[1],v="";v=P.format(r.status,(l=r.statusValue)!==null&&l!==void 0?l:{});var f=(0,a.jsx)(a.Fragment,{});return h=="0"&&(f=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(I.Z,{}),color:"default",children:v})),h=="10"&&(f=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(i.Z,{spin:!0}),color:"processing",children:v})),h=="20"&&(f=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(d.Z,{}),color:"error",children:v})),h=="30"&&(f=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(u.Z,{}),color:"success",children:v})),h=="new"&&(f=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(j.Z,{}),children:v})),(h=="running"||h=="healthy"||h=="active"||h=="ready")&&(f=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(O.Z,{}),color:"success",children:v})),(h=="paused"||h=="pause"||h=="rollback_paused")&&(f=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(c.Z,{}),color:"warning",children:v})),(h=="waiting"||h=="starting"||h=="accepted")&&(f=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(p.Z,{}),children:v})),["deploying","pending","allocated","accepted","assigned","preparing","updating","rollback_started"].includes(h)&&(f=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(m.Z,{}),color:"processing",children:v})),(h=="error"||h=="down"||h=="failed")&&(f=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(d.Z,{}),color:"error",children:v})),["complete","completed","rollback_completed"].includes(h)&&(f=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(u.Z,{}),color:"success",children:v})),["exited","dead","removing","restarting","unhealthy","created","drain","unreachable","shutdown","rejected","remove","orphaned"].includes(h)&&(f=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(d.Z,{}),color:"warning",children:v})),(0,a.jsx)(E.Z,{placement:"top",title:(o=r.tip)!==null&&o!==void 0?o:"",children:f})}},27166:function(Q,R,e){var C=e(97857),n=e.n(C),I=e(5574),i=e.n(I),d=e(13769),u=e.n(d),j=e(184),O=e(74330),c=e(67294),p=e(85893),m=["requestLoading"],_=(0,c.forwardRef)(function(E,g){var a,T=E.requestLoading,r=u()(E,m),l=(0,c.useState)(!1),o=i()(l,2),P=o[0],S=o[1];return(0,c.useImperativeHandle)(g,function(){return{loading:function(){S(!0)},finish:function(){S(!1)}}}),(0,p.jsx)(j.a,n()(n()({},r),{},{children:(0,p.jsx)(O.Z,{spinning:(a=E.requestLoading)!==null&&a!==void 0?a:P,size:"default",style:{marginTop:"30%"},children:E.children})}))});R.Z=_},81366:function(Q,R,e){var C=e(97857),n=e.n(C),I=e(19632),i=e.n(I),d=e(5574),u=e.n(d),j=e(27254),O=e(42075),c=e(85418),p=e(25593),m=e(83622),_=e(67294),E=e(31112),g=e(85893),a={title:"/",path:"/"},T=(0,_.forwardRef)(function(r,l){var o=(0,_.useContext)(E.Z),P=o.showPath,S=o.redirectPath,J=(0,_.useState)([a]),X=u()(J,2),h=X[0],v=X[1];(0,_.useImperativeHandle)(l,function(){return{addHistory:function(A,t){t=="/"?v([a]):v([].concat(i()(h),[{title:A,path:t}]))},initHistory:function(A,t){v([n()(n()({},a),{},{children:t})].concat(i()(A)))}}});var f=function(A){P?P(h[A].title,h[A].path):r.showPath&&r.showPath(h[A].title,h[A].path);var t=h.filter(function(_e,ce){return ce<=A});v(i()(t))};return(0,g.jsxs)(O.Z,{children:[(0,g.jsx)(O.Z.Compact,{children:h.map(function(y,A){return y.children?(0,g.jsxs)(c.Z.Button,{menu:{items:y.children.map(function(t,_e){return{key:_e,label:(0,g.jsx)(p.Z.Link,{onClick:function(){S(t)},children:t},_e)}})},type:"dashed",onClick:function(_e){f(A)},children:[(0,g.jsx)(j.Z,{})," ",y.title]},A):(0,g.jsx)(m.ZP,{icon:(0,g.jsx)(j.Z,{}),type:"dashed",onClick:function(){f(A)},children:y.title},A)})}),h.length>=2&&(0,g.jsx)(p.Z.Text,{copyable:{text:h[h.length-1].path}})]})});R.Z=T},31112:function(Q,R,e){var C=e(67294),n=(0,C.createContext)({});R.Z=n},68536:function(Q,R,e){e.d(R,{Z:function(){return m}});var C=e(24963),n=e(36146),I=e(93613),i=e(36693),d=e(2741),u=e(25593),j=e(42075),O=e(67294),c=e(85893),p=0;function m(_){var E=(0,O.useContext)(C.Z),g=E.message,a=new n.Uo("components.explorer");return _.isDir?(0,c.jsx)(u.Z.Link,{onClick:function(){_.onClick&&_.onClick()},children:(0,c.jsxs)(j.Z,{children:[(0,c.jsx)(I.Z,{}),_.showName]})}):_.isLink?(0,c.jsx)(u.Z.Link,{onClick:function(){_.onClick&&_.onClick()},children:(0,c.jsxs)(j.Z,{children:[(0,c.jsx)(i.Z,{}),_.showName]})}):(0,c.jsx)(u.Z.Text,{onClick:function(){if(p++,p==2){p=0,_.onClick&&_.onClick();return}setTimeout(function(){p==1&&g.info(a.format("fileNameMessageViewDetail")),p=0},400)},style:{cursor:"pointer"},children:(0,c.jsxs)(j.Z,{children:[(0,c.jsx)(d.Z,{}),_.showName]})})}},80271:function(Q,R,e){var C=e(15009),n=e.n(C),I=e(99289),i=e.n(I),d=e(5574),u=e.n(d),j=e(184),O=e(9773),c=e(83062),p=e(67294),m=e(68536),_=e(5251),E=e(81366),g=e(3616),a=e(36146),T=e(73813),r=e(85893),l=(0,p.forwardRef)(function(o,P){(0,p.useImperativeHandle)(P,function(){return{show:function(){}}});var S=(0,p.useState)(""),J=u()(S,2),X=J[0],h=J[1],v=(0,p.useState)(!1),f=u()(v,2),y=f[0],A=f[1],t=(0,p.useRef)(),_e=(0,p.useRef)(),ce=function(q,$){h($)},ae=new a.Uo("components.explorer"),me=new a.Uo("image");return(0,r.jsx)(j.a,{drawerProps:{width:g.R_},open:y,submitter:!1,title:me.format("fileTitle"),onOpenChange:function(q){A(q),h(q?"/":"")},trigger:(0,r.jsx)(c.Z,{title:me.format("fileTitle"),children:o.trigger}),children:(0,r.jsx)(O.Z,{headerTitle:(0,r.jsx)(E.Z,{ref:_e,showPath:ce}),scroll:{x:"max-content"},search:!1,rowKey:"name",pagination:{pageSize:500,position:["topRight","bottomRight"]},actionRef:t,request:i()(n()().mark(function Y(){var q;return n()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(X!=""){ee.next=2;break}return ee.abrupt("return",{data:[],total:0,success:!0});case 2:return ee.next=4,(0,T.cD)({md5:o.imageId,path:X});case 4:return q=ee.sent,ee.abrupt("return",{data:q.data.info,total:q.data.info.length,success:!0});case 6:case"end":return ee.stop()}},Y)})),columns:[{title:ae.format("listName"),dataIndex:"showName",key:"name",render:function(pe,$,ee,Oe,Pe){var pe,te=$.name.replace(X,"");return $.isDir?pe=(0,r.jsx)(m.Z,{isDir:!0,onClick:function(){return ce(te,$.path)},showName:te}):$.isSymlink?pe=(0,r.jsx)(m.Z,{isLink:!0,showName:te}):pe=(0,r.jsx)(m.Z,{showName:te}),pe}},{title:ae.format("listModStr"),dataIndex:"modStr",key:"modStr"},{title:ae.format("listUser"),dataIndex:"user"},{title:ae.format("listGroup"),dataIndex:"group"},{title:ae.format("listSize"),dataIndex:"size",key:"size",render:function(q,$,ee,Oe,Pe){return(0,_.FI)($.size)}},{title:ae.format("listModTime"),dataIndex:"modTime",key:"modTime",render:function(q,$,ee,Oe,Pe){return(0,_.NF)($.modTime)},sorter:function(q,$){return new Date(q.modTime).getTime()-new Date($.modTime).getTime()}}],cardProps:{ghost:!0}},"".concat(o.imageId,"-").concat(X))})});R.Z=l},2205:function(Q,R,e){e.d(R,{Z:function(){return p}});var C=e(97857),n=e.n(C),I=e(5574),i=e.n(I),d=e(75870),u=e(36146),j=e(34041),O=e(67294),c=e(85893);function p(m){var _=(0,O.useState)([]),E=i()(_,2),g=E[0],a=E[1],T=new u.Uo("components.selectRegistry");(0,O.useEffect)(function(){(0,d.Ot)().then(function(l){l&&a(l.data.list)})},[]);var r={};return m.multiple&&(r.mode="multiple"),m.top&&(r.placement="topLeft"),(0,c.jsx)(j.Z,n()({popupMatchSelectWidth:!m.width,style:m.width?{width:m.width}:{},onChange:function(o){if(o)if(Array.isArray(o)){var P=o.map(function(S){return g[S]});m.onChangeList&&m.onChangeList(P)}else m.onChange&&m.onChange(g[o])},placeholder:T.format("nameEmpty"),options:g.map(function(l,o){return{value:o,label:l.title+"("+l.serverAddress+")"}}),allowClear:!0},r))}},78451:function(Q,R,e){e.d(R,{Z:function(){return I}});var C=e(67294),n=e(85893);function I(i){var d;return(0,n.jsx)("span",{style:{width:i.width?i.width:"auto",wordBreak:"break-word"},children:(d=i.content)!==null&&d!==void 0?d:i.children})}},51100:function(Q,R,e){e.d(R,{Z:function(){return d}});var C=e(4813),n=e(91604),I=e(1677),i=e(85893);function d(u){return u.showDragger?(0,i.jsx)(n.Z,{max:u.max?u.max:1,title:u.title,label:u.label,required:u.required,rules:[{required:u.required}],fieldProps:{multiple:!!(u.max&&u.max>1),name:"file",accept:u.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(O){return new Promise(function(c){var p;(0,C._)({path:(p=O.response.data.path)!==null&&p!==void 0?p:""}).then(function(m){c(!0)})})}},name:u.name}):(0,i.jsx)(I.Z,{max:u.max?u.max:1,title:u.title,label:u.label,required:u.required,rules:[{required:u.required}],fieldProps:{multiple:!!(u.max&&u.max>1),name:"file",accept:u.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(O){return new Promise(function(c){var p;(0,C._)({path:(p=O.response.data.path)!==null&&p!==void 0?p:""}).then(function(m){c(!0)})})}},name:u.name})}},12323:function(Q,R,e){e.d(R,{X:function(){return C},n:function(){return n}});var C={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},n=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},65913:function(Q,R,e){var C=e(5574),n=e.n(C),I=e(74330),i=e(67294),d=e(85893),u=(0,i.forwardRef)(function(j,O){(0,i.useImperativeHandle)(O,function(){return{show:function(){_(!0)},destroy:function(){_(!1)}}});var c=(0,i.useState)(!1),p=n()(c,2),m=p[0],_=p[1];return(0,d.jsx)(I.Z,{spinning:m,size:"default",children:j.children})});R.Z=u},99430:function(Q,R,e){e.r(R),e.d(R,{default:function(){return we}});var C=e(15009),n=e.n(C),I=e(97857),i=e.n(I),d=e(99289),u=e.n(d),j=e(74453),O=e(25593),c=e(42075),p=e(96074),m=e(83062),_=e(97841),E=e(94359),g=e(86548),a=e(87740),T=e(82061),r=e(80821),l=e(67294),o=e(5574),P=e.n(o),S=e(38345),J=e(82346),X=e(75544),h=e(3616),v=e(36146),f=e(85265),y=e(74330),A=e(38703),t=e(85893),_e=(0,l.forwardRef)(function(w,fe){var b=(0,J.useModel)("subscriber"),ne=(0,l.useRef)(),re=(0,l.useState)(!1),B=P()(re,2),D=B[0],F=B[1],z=(0,l.useState)(""),x=P()(z,2),G=x[0],V=x[1],H=(0,l.useState)(0),U=P()(H,2),s=U[0],M=U[1];return(0,l.useImperativeHandle)(fe,function(){return{start:function(){for(var K=arguments.length,N=new Array(K),Z=0;Z<K;Z++)N[Z]=arguments[Z];var ie=N.join(":");F(!0),M(0),V(ie),b.addDataHandler("image:"+ie,function(W){var le;if(W.data.includes("Step")){var se=Array.from(W.data.matchAll(/Step\s+(\d+)\/(\d+)/g));if(se.length>0){var de=se[se.length-1],he=parseInt(de[1],10),oe=parseInt(de[2],10);if(oe>0&&he>=1&&he<=oe){var ge=he/oe*100;M(Math.round(ge))}}}(le=ne.current)===null||le===void 0||le.write(W.data)})},close:function(){var K;(K=ne.current)===null||K===void 0||K.clear(),F(!1)},show:function(K){F(!0),setTimeout(function(){var N,Z;(N=ne.current)===null||N===void 0||N.clear(),(Z=ne.current)===null||Z===void 0||Z.write(K)},500)}}}),(0,t.jsx)(f.Z,{width:h.ob,destroyOnHidden:!0,title:v.FD.format("listLog"),afterOpenChange:function(K){if(K){var N,Z;(N=ne.current)===null||N===void 0||N.clear(),(Z=ne.current)===null||Z===void 0||Z.fit()}},onClose:function(){b.progress.close("image:"+G),F(!1),M(0),V(""),w.onFinish&&w.onFinish()},open:D,children:(0,t.jsx)(S.Z,{ghost:!0,children:(0,t.jsxs)(y.Z,{spinning:s==0,children:[(0,t.jsx)(A.Z,{strokeLinecap:"butt",percent:s,size:["100%",10],percentPosition:{align:"center",type:"inner"},format:function(){return null}}),(0,t.jsx)(X.Z,{style:{fontSize:12},height:"85vh",ref:ne})]})})})}),ce=_e,ae=e(19632),me=e.n(ae),Y=e(91058),q=e(11106),$=e(62370),ee=e(12491);function Oe(w){var fe=new v.Uo("image");return(0,t.jsx)($.Z,{shouldUpdate:!0,children:function(ne){var re=ne.getFieldValue,B=ne.setFieldValue;return[(0,t.jsx)($.Z,{name:w.name,hidden:!0},"input"),(0,t.jsx)(ee.Z,{title:fe.format("formBuildDockerfileContent"),onImport:function(F){return B(w.name,F),!0},onLoad:function(F){if(F.indexOf("FROM ")<0)throw new Error(v.FD.format("commonFileIncorrectFormat",{name:"Dockerfile"}));return!0}},"importFile"),(0,t.jsx)(q.ZP,{value:re("buildDockerfileContent"),onChange:function(F){B(w.name,F)},height:"600px",theme:"dark",style:{marginBottom:"20px"}},"codeMirror")]}})}var Pe=e(51100),pe=e(75870),te=e(5966),je=e(24739),Ce=e(64317),ye=e(86615),Ie=e(97462),Te=e(90672),Ue=e(83622),We=e(27166),Ae=e(22390),Le=e(73813),Be=e(68297),xe=e(24963),Ze=(0,l.forwardRef)(function(w,fe){var b=new v.Uo("image"),ne=(0,l.useContext)(xe.Z),re=ne.message,B=(0,l.useRef)(),D=(0,l.useRef)(),F=(0,l.useState)(!1),z=P()(F,2),x=z[0],G=z[1],V=(0,l.useRef)();return(0,l.useImperativeHandle)(fe,function(){return{show:function(U){return u()(n()().mark(function s(){var M,k,K,N,Z,ie,W,le,se,de,he,oe,ge,L,ue,Re,ve,Ee,be;return n()().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return G(!0),(M=V.current)===null||M===void 0||M.loading(),De.next=4,(0,_.Xr)({id:U}).finally(function(){var Me;(Me=V.current)===null||Me===void 0||Me.finish()});case 4:L=De.sent,(k=L.data.detail.setting)!==null&&k!==void 0&&k.buildGit&&(Ee=L.data.detail.setting.buildGit,Ee.includes("#")?(be=(0,Ae.Z)(Ee,"#"),ue=Ee.slice(0,be),Re=Ee.slice(be+1)):ue=Ee,ue.includes("@")&&(ve=new URL(ue),ve&&(ue="".concat(ve.origin).concat(ve.pathname)))),(K=D.current)===null||K===void 0||K.setFieldsValue({id:L.data.detail.id,title:L.data.detail.title,imageTag:(N=L.data.detail.setting)===null||N===void 0?void 0:N.tag,imageRegistry:(Z=L.data.detail.setting)===null||Z===void 0?void 0:Z.registry,buildType:(ie=L.data.detail.setting)===null||ie===void 0?void 0:ie.buildType,buildDockerfileRoot:(W=L.data.detail.setting)===null||W===void 0?void 0:W.buildDockerfileRoot,buildDockerfileContent:(le=L.data.detail.setting)===null||le===void 0?void 0:le.buildDockerfileContent,buildDockerfileName:(se=L.data.detail.setting)===null||se===void 0?void 0:se.buildDockerfileName,buildGit:ue,buildGitBranch:Re,buildGitUsername:(de=ve)===null||de===void 0?void 0:de.username,buildGitPassword:(he=ve)===null||he===void 0?void 0:he.password,buildArgs:(oe=L.data.detail.setting)===null||oe===void 0?void 0:oe.buildArgs,platform:(ge=L.data.detail.setting)===null||ge===void 0?void 0:ge.platform});case 7:case"end":return De.stop()}},s)}))()}}}),(0,t.jsx)(We.Z,{drawerProps:{width:h.R_},ref:V,title:v.Ob.format("image.create"),open:x,onOpenChange:function(U){if(G(U),!U){var s;(s=D.current)===null||s===void 0||s.resetFields(),w.onFinish&&w.onFinish()}},trigger:(0,t.jsx)(Ue.ZP,{type:"primary",children:v.Ob.format("image.create")},"create"),onFinish:function(){var H=u()(n()().mark(function U(s){var M,k,K,N,Z,ie,W,le,se,de,he,oe;return n()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(k=(M=s.buildType)!==null&&M!==void 0?M:"dockerfile",k!="containerTar"){L.next=7;break}return L.next=4,(0,Le.Ck)({tag:s.imageTag,registry:s.imageRegistry,tar:(K=s.containerTar[0].response.data.path)!==null&&K!==void 0?K:"",cmd:s.cmd,workDir:s.workDir,expose:s.expose?s.expose.split(`
`):[],env:s.env?s.env.split(`
`):[],volume:s.volume?s.volume.split(`
`):[]});case 4:return L.abrupt("return",!0);case 7:return ie={name:"",arch:""},Be.ii.map(function(ue){ue.name==s.platform&&(ie=ue)}),W={id:s.id?parseInt(s.id):0,tag:s.imageTag,title:s.title,registry:s.imageRegistry,buildDockerfileContent:s.buildDockerfileContent,buildDockerfileRoot:s.buildDockerfileRoot,buildDockerfileName:s.buildDockerfileName,buildZip:"",buildGit:s.buildGit,buildType:s.buildType,platform:{type:ie.name,arch:ie.arch},buildArgs:s.buildArgs},s.buildZip&&s.buildZip.length>0&&(W.buildZip=(le=s.buildZip[0].response.data.path)!==null&&le!==void 0?le:""),k=="git"&&(W.buildGit=W.buildGit+"#"+(s.buildGitBranch||"master"),s.buildDockerfileRoot&&s.buildDockerfileRoot!=""&&(W.buildGit="".concat(W.buildGit,":").concat(s.buildDockerfileRoot)),s.buildGitUsername&&s.buildGitPassword&&(se="https://",W.buildGit.includes("http://")&&(se="http://"),W.buildGit="".concat(W.buildGit.replace(se,"".concat(se).concat(s.buildGitUsername,":").concat(s.buildGitPassword,"@"))))),(N=B.current)===null||N===void 0||N.start("build",((Z=W.id)!==null&&Z!==void 0?Z:0).toString()),L.prev=13,L.next=16,(0,_.l9)(W);case 16:return he=L.sent,re.success(v.FD.format("finish")),L.next=20,new Promise(function(ue){setTimeout(function(){ue(!0)},1e3)});case 20:return(de=B.current)===null||de===void 0||de.close(),L.abrupt("return",!0);case 24:L.prev=24,L.t0=L.catch(13),(oe=B.current)===null||oe===void 0||oe.close();case 27:case"end":return L.stop()}},U,null,[[13,24]])}));return function(U){return H.apply(this,arguments)}}(),formRef:D,children:(0,t.jsxs)(S.Z,{direction:"column",ghost:!0,gutter:[0,10],children:[(0,t.jsxs)(S.Z,{ghost:!0,children:[(0,t.jsx)($.Z,{name:"id",hidden:!0}),(0,t.jsx)(te.Z,{width:"lg",label:b.format("formTitle"),name:"title"}),(0,t.jsxs)(je.UW,{children:[(0,t.jsx)(Ce.Z,{width:"lg",label:b.format("formImageRegistry"),tooltip:b.format("formImageRegistryTip"),name:"imageRegistry",request:u()(n()().mark(function H(){var U;return n()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,(0,pe.Ot)();case 2:return U=M.sent,M.abrupt("return",U.data.list.map(function(k){return{value:k.serverAddress,label:k.title+"("+k.serverAddress+")"}}));case 4:case"end":return M.stop()}},H)}))}),(0,t.jsx)(te.Z,{rules:[{required:!0}],width:"lg",required:!0,tooltip:b.format("formImageTagTip"),placeholder:b.format("formImageTagEmpty"),label:b.format("formImageTag"),name:"imageTag"})]}),(0,t.jsx)(ye.Z.Group,{name:"buildType",initialValue:"dockerfile",label:b.format("formBuildType"),options:b.option("formBuildTypeOption",["dockerfile","zip","git","containerTar"]).map(function(H){return{label:(0,t.jsx)(m.Z,{title:b.format("formBuildTypeTipOption."+H.value),children:H.label}),value:H.value}})}),(0,t.jsx)(Ie.Z,{name:["buildType"],children:function(U){var s=U.buildType,M=[];return s=="containerTar"?M=[(0,t.jsx)(te.Z,{tooltip:b.format("formWorkDirTip"),label:b.format("formWorkDir"),name:"workDir",placeholder:b.format("formWorkDirEmpty")},"workDir"),(0,t.jsx)(te.Z,{required:!0,tooltip:b.format("formCmdTip"),rules:[{required:!0}],label:"CMD",name:"cmd"},"cmd"),(0,t.jsx)(Te.Z,{tooltip:b.format("formExposeTip"),label:b.format("formExpose"),name:"expose",placeholder:`80 
9000`},"expose"),(0,t.jsx)(Te.Z,{tooltip:b.format("formEnvTip"),label:b.format("formEnv"),name:"env",placeholder:`TEST_VALUE=123 
TEST_NO_VALUE=`},"env"),(0,t.jsx)(Te.Z,{tooltip:b.format("formVolumeTip"),label:b.format("formVolume"),name:"volume",placeholder:`/app 
/home`},"volume")]:(s=="zip"||s=="git")&&(M=[(0,t.jsxs)(je.UW,{children:[(0,t.jsx)(te.Z,{width:"lg",name:"buildDockerfileRoot",label:b.format("formBuildDockerfileRoot"),fieldProps:{addonBefore:"/"},placeholder:b.format("formBuildDockerfileRootEmpty")},"buildDockerfileRoot"),(0,t.jsx)(te.Z,{width:"lg",name:"buildDockerfileName",label:b.format("formBuildDockerfileName"),placeholder:b.format("formBuildDockerfileNameEmpty")},"dockerfileName")]},"buildRoot"),(0,t.jsx)(Y.Z,{drawerProps:{ghost:!0},name:"buildArgs",showAddButton:!0,showCodeMode:!0,listLabel:b.format("formBuildArgs")},"env")]),s=="zip"&&(M=[].concat(me()(M),[(0,t.jsx)(Pe.Z,{required:!0,label:b.format("formBuildZip"),name:"buildZip",accept:".zip"},"buildZip")])),s=="containerTar"&&(M=[].concat(me()(M),[(0,t.jsx)(Pe.Z,{required:!0,label:b.format("formBuildContainerTar"),name:"containerTar",accept:".tar"},"containerTar")])),s=="git"&&(M=[].concat(me()(M),[(0,t.jsxs)(je.UW,{children:[(0,t.jsxs)(c.Z.Compact,{block:!0,children:[(0,t.jsx)(te.Z,{width:"md",label:b.format("formBuildGitUsername"),name:"buildGitUsername",placeholder:b.format("formBuildGitUsernameEmpty")}),(0,t.jsx)(te.Z,{width:"md",label:b.format("formBuildGitPassword"),name:"buildGitPassword"})]}),(0,t.jsxs)(c.Z.Compact,{block:!0,children:[(0,t.jsx)(te.Z,{label:b.format("formBuildGitBranch"),width:"md",name:"buildGitBranch"}),(0,t.jsx)(te.Z,{fieldProps:{min:2,max:255},rules:[{required:!0}],width:"lg",required:!0,placeholder:b.format("formBuildGitEmpty"),label:b.format("formBuildGit"),name:"buildGit"})]})]},"buildGit")])),s=="dockerfile"&&(M=[].concat(me()(M),[(0,t.jsx)(Oe,{name:"buildDockerfileContent"},"buildDockerfileContent")])),M}})]}),(0,t.jsx)(ce,{onFinish:function(){G(!1),w.onFinish&&w.onFinish()},ref:B})]})})}),Ke=Ze,Se=e(59683),$e=e(78914);function we(){var w=(0,l.useRef)(),fe=(0,l.useRef)(),b=(0,l.useRef)(),ne=(0,l.useRef)();return(0,t.jsxs)(j._z,{header:{extra:[(0,t.jsx)(Ke,{ref:b,onFinish:function(){var B;!((B=w.current)===null||B===void 0)&&B.reloadAndRest&&w.current.reloadAndRest()}},"create")]},children:[(0,t.jsx)($e.Z,{ref:ne}),(0,t.jsx)(Se.C,{actionRef:w,rowKey:"id",columns:[{title:v.FD.format("listTitle"),render:function(B,D,F,z){return D.title}},{title:v.FD.format("listImageName"),dataIndex:"tag",search:!1,render:function(B,D,F,z){var x,G,V;return(0,t.jsx)(O.Z.Link,{type:!((x=D.setting)!==null&&x!==void 0&&x.imageId)||D.setting.imageId==""?"secondary":void 0,onClick:function(){var U,s,M;!((U=D.setting)===null||U===void 0)&&U.imageId&&((s=ne.current)===null||s===void 0||s.show((M=D.setting)===null||M===void 0?void 0:M.imageId))},children:(G=(V=D.setting)===null||V===void 0?void 0:V.tag)!==null&&G!==void 0?G:D.tag})}},{title:v.FD.format("listStatus"),width:150,ellipsis:!0,search:!1,render:function(B,D,F,z){var x;return(x=D.setting)!==null&&x!==void 0&&x.imageId||(D.status=0),[(0,t.jsx)("div",{children:(0,t.jsx)(E.Z,{status:"status.".concat(D.status)},D.id)},D.id)]}},{title:v.FD.format("listManage"),valueType:"option",key:"option",width:100,fixed:"right",render:function(B,D,F,z){return(0,t.jsxs)(c.Z,{split:(0,t.jsx)(p.Z,{type:"vertical"}),children:[(0,t.jsx)(O.Z.Link,{onClick:function(){var G;D.id&&((G=b.current)===null||G===void 0||G.show(D.id))},children:(0,t.jsx)(m.Z,{title:v.FD.format("listManageEdit"),children:(0,t.jsx)(g.Z,{})})},"rebuild"),(0,t.jsx)(O.Z.Link,{onClick:u()(n()().mark(function x(){var G,V,H,U,s,M,k,K,N,Z;return n()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return(G=fe.current)===null||G===void 0||G.start("build",((V=D.id)!==null&&V!==void 0?V:0).toString()),W.prev=1,W.next=4,(0,_.l9)(i()(i()({id:D.id,title:D.title},D.setting),{},{buildDockerfileContent:((H=D.setting)===null||H===void 0?void 0:H.buildDockerfileContent)||((U=D.setting)===null||U===void 0?void 0:U.buildDockerfile),buildDockerfileRoot:((s=D.setting)===null||s===void 0?void 0:s.buildDockerfileRoot)||((M=D.setting)===null||M===void 0?void 0:M.buildRoot),buildType:((k=D.setting)===null||k===void 0?void 0:k.buildType)||D.buildType,tag:((K=D.setting)===null||K===void 0?void 0:K.tag)||D.tag}));case 4:return N=W.sent,W.abrupt("return",!0);case 8:W.prev=8,W.t0=W.catch(1),(Z=fe.current)===null||Z===void 0||Z.close();case 11:case"end":return W.stop()}},x,null,[[1,8]])})),children:(0,t.jsx)(m.Z,{title:v.FD.format("listManageBuild"),children:(0,t.jsx)(a.Z,{})})},"logs")]})}}],request:function(){var re=u()(n()().mark(function B(D,F,z){var x,G,V;return n()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,_.bJ)({page:(x=D.current)!==null&&x!==void 0?x:1,pageSize:(G=D.pageSize)!==null&&G!==void 0?G:10});case 2:return V=U.sent,U.abrupt("return",{data:V.data.list,success:!0,total:V.data.list.length});case 4:case"end":return U.stop()}},B)}));return function(B,D,F){return re.apply(this,arguments)}}(),quickToolbarRender:function(B){var D=B.selectedRows;return(0,t.jsx)(c.Z,{size:16,children:(0,t.jsx)(r.Z,{buttonProps:{danger:!0,type:"primary",icon:(0,t.jsx)(T.Z,{})},confirmProps:{showCommonConfirm:!0},action:function(){return(0,_.hf)({id:D.map(function(z){return z.id})})},onSuccess:function(){var z,x;return!((z=w.current)===null||z===void 0)&&z.reloadAndRest&&((x=w.current)===null||x===void 0||x.reloadAndRest()),!0},onError:function(){var z,x;return!((z=w.current)===null||z===void 0)&&z.reset&&((x=w.current)===null||x===void 0||x.reset()),!0},children:v.FD.format("listManageDeleteBatch")})})}}),(0,t.jsx)(ce,{onFinish:function(){var B;!((B=w.current)===null||B===void 0)&&B.reloadAndRest&&w.current.reloadAndRest()},ref:fe})]})}},4813:function(Q,R,e){e.d(R,{_:function(){return u}});var C=e(15009),n=e.n(C),I=e(99289),i=e.n(I),d=e(82346);function u(O){return j.apply(this,arguments)}function j(){return j=i()(n()().mark(function O(c){return n()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,d.request)("/api/common/attach/delete",{method:"POST",data:c});case 2:return m.abrupt("return",m.sent);case 3:case"end":return m.stop()}},O)})),j.apply(this,arguments)}},97841:function(Q,R,e){e.d(R,{Xr:function(){return _},bJ:function(){return p},c5:function(){return g},hf:function(){return u},l9:function(){return O}});var C=e(15009),n=e.n(C),I=e(99289),i=e.n(I),d=e(82346);function u(T){return j.apply(this,arguments)}function j(){return j=i()(n()().mark(function T(r){return n()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,d.request)("/api/app/image-build/delete",{method:"POST",data:r});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},T)})),j.apply(this,arguments)}function O(T){return c.apply(this,arguments)}function c(){return c=i()(n()().mark(function T(r){return n()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,d.request)("/api/app/image-build/create",{method:"POST",data:r}));case 1:case"end":return o.stop()}},T)})),c.apply(this,arguments)}function p(T){return m.apply(this,arguments)}function m(){return m=i()(n()().mark(function T(r){return n()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,d.request)("/api/app/image-build/get-list",{method:"POST",data:r}));case 1:case"end":return o.stop()}},T)})),m.apply(this,arguments)}function _(T){return E.apply(this,arguments)}function E(){return E=i()(n()().mark(function T(r){return n()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,d.request)("/api/app/image-build/get-detail",{method:"POST",data:r});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},T)})),E.apply(this,arguments)}function g(){return a.apply(this,arguments)}function a(){return a=i()(n()().mark(function T(){return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,d.request)("/api/app/image-build/prune",{method:"POST"});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},T)})),a.apply(this,arguments)}},73813:function(Q,R,e){e.d(R,{Ck:function(){return u},Fj:function(){return T},GH:function(){return O},KG:function(){return _},Rb:function(){return P},Xz:function(){return p},YU:function(){return l},ZQ:function(){return J},ao:function(){return g},cD:function(){return h}});var C=e(15009),n=e.n(C),I=e(99289),i=e.n(I),d=e(82346);function u(f){return j.apply(this,arguments)}function j(){return j=i()(n()().mark(function f(y){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.request)("/api/app/image/import-by-container-tar",{method:"POST",data:y}));case 1:case"end":return t.stop()}},f)})),j.apply(this,arguments)}function O(f){return c.apply(this,arguments)}function c(){return c=i()(n()().mark(function f(y){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.request)("/api/app/image/import-by-image-tar",{method:"POST",data:y}));case 1:case"end":return t.stop()}},f)})),c.apply(this,arguments)}function p(f){return m.apply(this,arguments)}function m(){return m=i()(n()().mark(function f(y){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,d.request)("/api/app/image/prune",{method:"POST"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},f)})),m.apply(this,arguments)}function _(f){return E.apply(this,arguments)}function E(){return E=i()(n()().mark(function f(y){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.request)("/api/app/image/get-list",{method:"POST",data:y}));case 1:case"end":return t.stop()}},f)})),E.apply(this,arguments)}function g(f){return a.apply(this,arguments)}function a(){return a=i()(n()().mark(function f(y){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,d.request)("/api/app/image/delete",{method:"POST",data:y});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},f)})),a.apply(this,arguments)}function T(f){return r.apply(this,arguments)}function r(){return r=i()(n()().mark(function f(y){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,d.request)("/api/app/image/update-title",{method:"POST",data:y});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},f)})),r.apply(this,arguments)}function l(f){return o.apply(this,arguments)}function o(){return o=i()(n()().mark(function f(y){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.request)("/api/app/image/get-detail",{method:"POST",data:y}));case 1:case"end":return t.stop()}},f)})),o.apply(this,arguments)}function P(f){return S.apply(this,arguments)}function S(){return S=i()(n()().mark(function f(y){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!y.enableExportToPath){t.next=2;break}return t.abrupt("return",(0,d.request)("/api/app/image/export",{method:"POST",data:y}));case 2:return t.abrupt("return",new Promise(function(_e,ce){var ae,me=localStorage.getItem("token"),Y=new URLSearchParams;Y.append("token",me||""),y.md5&&y.md5.forEach(function(ee){Y.append("md5",ee)}),Y.append("enableExportToPath",String((ae=y.enableExportToPath)!==null&&ae!==void 0?ae:!1));var q="/api/app/image/export?".concat(Y.toString()),$=document.createElement("iframe");$.style.display="none",$.src=q,document.body.appendChild($),_e({code:200,data:"success",error:""})}));case 3:case"end":return t.stop()}},f)})),S.apply(this,arguments)}function J(f){return X.apply(this,arguments)}function X(){return X=i()(n()().mark(function f(y){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.request)("/api/app/image/check-upgrade",{method:"POST",data:y}));case 1:case"end":return t.stop()}},f)})),X.apply(this,arguments)}function h(f){return v.apply(this,arguments)}function v(){return v=i()(n()().mark(function f(y){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.request)("/api/pro/image/get-rootfs",{method:"POST",data:y}));case 1:case"end":return t.stop()}},f)})),v.apply(this,arguments)}},75870:function(Q,R,e){e.d(R,{Ot:function(){return u},ZH:function(){return O},ix:function(){return p},t1:function(){return _}});var C=e(15009),n=e.n(C),I=e(99289),i=e.n(I),d=e(82346);function u(g){return j.apply(this,arguments)}function j(){return j=i()(n()().mark(function g(a){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.request)("/api/common/registry/get-list",{method:"POST",data:a}));case 1:case"end":return r.stop()}},g)})),j.apply(this,arguments)}function O(g){return c.apply(this,arguments)}function c(){return c=i()(n()().mark(function g(a){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.request)("/api/common/registry/create",{method:"POST",data:a}));case 1:case"end":return r.stop()}},g)})),c.apply(this,arguments)}function p(g){return m.apply(this,arguments)}function m(){return m=i()(n()().mark(function g(a){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.request)("/api/common/registry/delete",{method:"POST",data:a}));case 1:case"end":return r.stop()}},g)})),m.apply(this,arguments)}function _(g){return E.apply(this,arguments)}function E(){return E=i()(n()().mark(function g(a){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.request)("/api/common/registry/get-detail",{method:"POST",data:a}));case 1:case"end":return r.stop()}},g)})),E.apply(this,arguments)}},68297:function(Q,R,e){e.d(R,{Qd:function(){return c},Ze:function(){return j},aw:function(){return a},cV:function(){return m},fy:function(){return E},ii:function(){return u}});var C=e(15009),n=e.n(C),I=e(99289),i=e.n(I),d=e(82346),u=[{name:"amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"i386",arch:"386",search:[]},{name:"arm/v6",arch:"arm",search:[]},{name:"arm/v7",arch:"arm",search:[]},{name:"arm/v8",arch:"arm64",search:[]},{name:"ppc64le",arch:"ppc64le",search:[]},{name:"riscv64",arch:"riscv64",search:[]}];function j(r){return O.apply(this,arguments)}function O(){return O=i()(n()().mark(function r(l){return n()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,d.request)("/api/app/image/tag-sync",{method:"POST",data:l}));case 1:case"end":return P.stop()}},r)})),O.apply(this,arguments)}function c(r){return p.apply(this,arguments)}function p(){return p=i()(n()().mark(function r(l){return n()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,d.request)("/api/app/image/tag-add",{method:"POST",data:l}));case 1:case"end":return P.stop()}},r)})),p.apply(this,arguments)}function m(r){return _.apply(this,arguments)}function _(){return _=i()(n()().mark(function r(l){return n()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,d.request)("/api/app/image/tag-delete",{method:"POST",data:l}));case 1:case"end":return P.stop()}},r)})),_.apply(this,arguments)}function E(r){return g.apply(this,arguments)}function g(){return g=i()(n()().mark(function r(l){return n()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,d.request)("/api/app/image/tag-push-batch",{method:"POST",data:l}));case 1:case"end":return P.stop()}},r)})),g.apply(this,arguments)}function a(r){return T.apply(this,arguments)}function T(){return T=i()(n()().mark(function r(l){return n()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,d.request)("/api/pro/image/get-remote-tag",{method:"POST",data:l}));case 1:case"end":return P.stop()}},r)})),T.apply(this,arguments)}}}]);
