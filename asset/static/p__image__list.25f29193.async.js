"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4214],{5966:function(se,L,t){var v=t(97685),l=t(1413),R=t(45987),A=t(21770),B=t(72723),$=t(55241),W=t(97435),k=t(67294),I=t(30506),g=t(85893),N=["fieldProps","proFieldProps"],G=["fieldProps","proFieldProps"],b="text",h=function(p){var u=p.fieldProps,H=p.proFieldProps,U=(0,R.Z)(p,N);return(0,g.jsx)(I.Z,(0,l.Z)({valueType:b,fieldProps:u,filedConfig:{valueType:b},proFieldProps:H},U))},E=function(p){var u=(0,A.Z)(p.open||!1,{value:p.open,onChange:p.onOpenChange}),H=(0,v.Z)(u,2),U=H[0],_=H[1];return(0,g.jsx)(B.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(K){var F,ne=K.getFieldValue(p.name||[]);return(0,g.jsx)($.Z,(0,l.Z)((0,l.Z)({getPopupContainer:function(O){return O&&O.parentNode?O.parentNode:O},onOpenChange:function(O){return _(O)},content:(0,g.jsxs)("div",{style:{padding:"4px 0"},children:[(F=p.statusRender)===null||F===void 0?void 0:F.call(p,ne),p.strengthText?(0,g.jsx)("div",{style:{marginTop:10},children:(0,g.jsx)("span",{children:p.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},p.popoverProps),{},{open:U,children:p.children}))}})},x=function(p){var u=p.fieldProps,H=p.proFieldProps,U=(0,R.Z)(p,G),_=(0,k.useState)(!1),M=(0,v.Z)(_,2),K=M[0],F=M[1];return u!=null&&u.statusRender&&U.name?(0,g.jsx)(E,{name:U.name,statusRender:u==null?void 0:u.statusRender,popoverProps:u==null?void 0:u.popoverProps,strengthText:u==null?void 0:u.strengthText,open:K,onOpenChange:F,children:(0,g.jsx)("div",{children:(0,g.jsx)(I.Z,(0,l.Z)({valueType:"password",fieldProps:(0,l.Z)((0,l.Z)({},(0,W.Z)(u,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(q){var O;u==null||(O=u.onBlur)===null||O===void 0||O.call(u,q),F(!1)},onClick:function(q){var O;u==null||(O=u.onClick)===null||O===void 0||O.call(u,q),F(!0)}}),proFieldProps:H,filedConfig:{valueType:b}},U))})}):(0,g.jsx)(I.Z,(0,l.Z)({valueType:"password",fieldProps:u,proFieldProps:H,filedConfig:{valueType:b}},U))},o=h;o.Password=x,o.displayName="ProFormComponent",L.Z=o},96042:function(se,L,t){t.d(L,{Z:function(){return I}});var v=t(97857),l=t.n(v),R=t(5574),A=t.n(R),B=t(75870),$=t(34041),W=t(67294),k=t(85893);function I(g){var N=(0,W.useState)([]),G=A()(N,2),b=G[0],h=G[1];(0,W.useEffect)(function(){(0,B.Ot)().then(function(x){x&&h(x.data.list)})},[]);var E={};return g.multiple&&(E.mode="multiple"),g.top&&(E.placement="topLeft"),(0,k.jsx)($.Z,l()({onChange:function(o){if(g.multiple){var Q=o.map(function(p){return b[p]});g.onChangeList&&g.onChangeList(Q)}else g.onChange&&g.onChange(b[o])},placeholder:"\u9009\u62E9\u955C\u50CF\u4ED3\u5E93\uFF0C\u672C\u5730\u4F7F\u7528\u7559\u7A7A\u5373\u53EF",options:b.map(function(x,o){return{value:o,label:x.title+"("+x.serverAddress+")"}})},E))}},31810:function(se,L,t){t.r(L),t.d(L,{default:function(){return Y}});var v=t(15009),l=t.n(v),R=t(99289),A=t.n(R),B=t(5574),$=t.n(B),W=t(6110),k=t(88717),I=t(37476),g=t(62370),N=t(5966),G=t(31418),b=t(14726),h=t(22015),E=t(78957),x=t(66309),o=t(96074),Q=t(83062),p=t(84567),u=t(72723),H=t(25278),U=t(50136),_=t(67294),M=t(54006),K=t(18148),F=t(5251),ne=t(80821),q=t(43425),O=t(87462),ce=t(3803),pe=t(84089),e=function(m,te){return _.createElement(pe.Z,(0,O.Z)({},m,{ref:te,icon:ce.Z}))},i=_.forwardRef(e),C=i,a=t(93246),s=t(28307),z=t(96042),T=t(6409),r=t(85893);function Y(){var ee=(0,M.useParams)(),m=(0,_.useRef)(),te=(0,_.useState)({force:!1}),J=$()(te,2),ue=J[0],ie=J[1],V=(0,_.useState)([]),ae=$()(V,2),oe=ae[0],he=ae[1],de=G.Z.useApp(),fe=(0,_.useState)(1),le=$()(fe,2),ve=le[0],Z=le[1],me=(0,_.useRef)();return(0,_.useEffect)(function(){var P;(P=m.current)===null||P===void 0||P.reload(),(0,K.Xn)({page:1,pageSize:9999,all:!0}).then(function(c){return he(c.data.list),!0})},[ee,ve]),(0,r.jsx)(W._z,{header:{extra:[(0,r.jsx)(b.ZP,{type:"primary",children:(0,r.jsx)(M.Link,{to:"/image/create",children:"\u6784\u5EFA\u955C\u50CF"})},"create"),(0,r.jsx)(s.Z,{onFinish:function(){var c,n;!((c=m.current)===null||c===void 0)&&c.reloadAndRest&&((n=m.current)===null||n===void 0||n.reloadAndRest())}},"remote")]},children:(0,r.jsx)(k.Z,{scroll:{x:"max-content"},rowKey:"Id",columns:[{title:"\u540D\u79F0",dataIndex:"title",render:function(c,n,j,D,d){var f=n.Id.substring(7,19);return oe.map(function(y){n.RepoTags.map(function(w){w==y.tag&&(f=y.title)})}),(0,r.jsx)(h.Z.Text,{editable:{tooltip:"\u4FEE\u6539\u955C\u50CF\u5907\u6CE8\u540D\u79F0",onChange:function(){var y=A()(l()().mark(function X(ge){var S;return l()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,(0,K.Fj)({tag:n.RepoTags[0],title:ge});case 2:S=re.sent,Z(ve+1),(0,a.$h)(de,"\u4FEE\u6539\u955C\u50CF\u540D\u79F0\u6210\u529F");case 5:case"end":return re.stop()}},X)}));function w(X){return y.apply(this,arguments)}return w}()},children:f?(0,r.jsx)(M.Link,{to:"/image/detail/"+n.Id,children:f},"edit"):"---"})}},{title:"Tag",dataIndex:"tag",render:function(c,n,j,D){return(0,r.jsx)(E.Z,{direction:"vertical",style:{textAlign:"left"},children:n.RepoTags.map(function(d,f){return(0,r.jsx)(x.Z,{color:"#2db7f5",children:(0,r.jsx)(h.Z.Text,{copyable:!0,style:{color:"#ffffff",maxWidth:"300px"},ellipsis:!0,title:d,children:d},f)},f)})},n.Id)}},{title:"\u5C3A\u5BF8",dataIndex:"size",ellipsis:!0,width:"120px",search:!1,sorter:function(c,n){return c.Size-n.Size},render:function(c,n,j,D){return(0,r.jsx)("div",{children:(0,F.FI)(parseFloat(n.Size))},n.Id)}},{title:"\u521B\u5EFA\u65E5\u671F",dataIndex:"Created",ellipsis:!0,search:!1,width:"180px",render:function(c,n,j,D){return(0,r.jsx)("div",{children:(0,F.ZM)(n.Created*1e3)},n.Id)},sorter:function(c,n){return c.Created-n.Created}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:"150px",render:function(c,n,j,D){return(0,r.jsxs)(E.Z,{split:(0,r.jsx)(o.Z,{type:"vertical"}),children:[(0,r.jsx)(M.Link,{to:"/image/detail/"+n.Id,children:(0,r.jsx)(Q.Z,{title:"\u7BA1\u7406",children:(0,r.jsx)(q.Z,{})})},"edit"),(0,r.jsx)(M.Link,{to:"/app/create/image?imageId="+n.Id,children:(0,r.jsx)(Q.Z,{title:"\u521B\u5EFA\u5BB9\u5668",children:(0,r.jsx)(C,{})})},"create")]})}}],request:function(){var P=A()(l()().mark(function c(n,j,D){var d;return l()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,K.KG)({tag:n.tag,title:n.title});case 2:if(d=y.sent,!(!d||!d.data||!d.data.list)){y.next=5;break}return y.abrupt("return",{data:[],success:!0,total:0});case 5:return y.abrupt("return",{data:d.data.list,success:!0,total:d.data.list.length});case 6:case"end":return y.stop()}},c)}));return function(c,n,j){return P.apply(this,arguments)}}(),pagination:(0,T.O)(),search:{collapsed:!1},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},actionRef:m,tableAlertOptionRender:function(c){var n=c.selectedRowKeys,j=c.selectedRows;return(0,r.jsxs)(E.Z,{size:16,children:[(0,r.jsx)(ne.Z,{danger:!0,type:"primary",action:function(){return(0,K.ao)({md5:n,force:ue.force})},onSuccess:function(){var d,f;return!((d=m.current)===null||d===void 0)&&d.reloadAndRest&&((f=m.current)===null||f===void 0||f.reloadAndRest()),!0},onError:function(){var d,f;return!((d=m.current)===null||d===void 0)&&d.reset&&((f=m.current)===null||f===void 0||f.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",confirm:(0,r.jsxs)(E.Z,{style:{width:280},direction:"vertical",children:[(0,r.jsx)(h.Z.Text,{children:"\u5220\u9664\u955C\u50CF\u540E\u65E0\u6CD5\u6062\u590D,\u786E\u8BA4\u5417\uFF1F"}),(0,r.jsx)(p.Z,{name:"deleteVolume",onChange:function(d){return ie({force:d.target.checked})},children:"\u5F3A\u5236\u5220\u9664\uFF1F"})]}),children:"\u6279\u91CF\u5220\u9664"}),(0,r.jsxs)(I.Y,{formRef:me,title:"\u6279\u91CF\u63A8\u9001\u955C\u50CF",trigger:(0,r.jsx)(b.ZP,{children:"\u6279\u91CF\u63A8\u9001"}),onFinish:function(){var D=A()(l()().mark(function d(f){var y,w,X;return l()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,K.KX)({md5:n,registryId:f.registryId,newNamespace:f.newNamespace});case 2:return X=S.sent,(y=m.current)===null||y===void 0||y.reload(),!((w=m.current)===null||w===void 0)&&w.clearSelected&&m.current.clearSelected(),S.abrupt("return",!0);case 6:case"end":return S.stop()}},d)}));return function(d){return D.apply(this,arguments)}}(),children:[(0,r.jsx)(u.Z.List,{name:"registryId",children:function(d){return d.map(function(f,y){return console.log(f),(0,r.jsx)(H.Z,{hidden:!0},y)})}}),(0,r.jsx)(g.Z,{label:"\u955C\u50CF\u4ED3\u5E93",name:"imageRespo",tooltip:(0,r.jsxs)(r.Fragment,{children:["\u63A8\u9001\u524D\u8BF7\u4FDD\u8BC1\u4ED3\u5E93\u4E2D\u6709\u6307\u5B9A\u7684\u547D\u540D\u7A7A\u95F4, \u5982\u6CA1\u6709\u8BF7\u5148 ",(0,r.jsx)("a",{href:"",target:"_blank",children:"\u6DFB\u52A0\u4ED3\u5E93"})]}),children:(0,r.jsx)(z.Z,{multiple:!0,top:!0,onChangeList:function(d){var f;(f=me.current)===null||f===void 0||f.setFieldValue("registryId",d.map(function(y){return y.id}))}})}),(0,r.jsx)(N.Z,{tooltip:"\u53EF\u4EE5\u901A\u8FC7\u6B64\u9879\u91CD\u65B0\u5B9A\u4E49\u547D\u540D\u7A7A\u95F4\uFF0Cdocker hub \u4E0D\u53D7\u8BE5\u914D\u7F6E\u7684\u5F71\u54CD\u3002 \u914D\u7F6E\u6B64\u9879\u540E mysql:latest \u4F1A\u63A8\u9001\u81F3 {\u547D\u540D\u7A7A\u95F4}/mysql:latest\uFF0C dpanel/dpanel:latest \u4F1A\u63A8\u9001\u81F3 {\u547D\u540D\u7A7A\u95F4}/dpanel:latest",label:"\u91CD\u5199\u975E\u5B98\u65B9\u4ED3\u5E93\u547D\u540D\u7A7A\u95F4",name:"newNamespace"})]})]})},tableExtraRender:function(){var c;return(0,r.jsx)(U.Z,{mode:"horizontal",selectedKeys:[(c=ee.type)!==null&&c!==void 0?c:"all"],items:[{label:(0,r.jsx)(M.Link,{to:"/image/list/all",replace:!0,children:"\u5168\u90E8\u955C\u50CF"}),key:"all"},{label:(0,r.jsx)(M.Link,{to:"/image/list/build",replace:!0,children:"\u6784\u5EFA\u4EFB\u52A1"}),key:"build"}]})},toolBarRender:function(){return[(0,r.jsx)(ne.Z,{action:function(){return(0,K.c7)()},onSuccess:function(){var n,j;return!((n=m.current)===null||n===void 0)&&n.reloadAndRest&&((j=m.current)===null||j===void 0||j.reloadAndRest()),!0},onError:function(){var n,j;return!((n=m.current)===null||n===void 0)&&n.reset&&((j=m.current)===null||j===void 0||j.reset()),!0},messageSuccess:"\u6E05\u9664\u6210\u529F",confirm:"\u662F\u5426\u6E05\u7406\u672A\u4F7F\u7528\u6216\u662F\u672A\u8FD0\u884C\u7684\u955C\u50CF",children:"\u6E05\u7406\u672A\u4F7F\u7528\u955C\u50CF"})]}})})}},75870:function(se,L,t){t.d(L,{Ot:function(){return $},ZH:function(){return k},ix:function(){return g},t1:function(){return G}});var v=t(15009),l=t.n(v),R=t(99289),A=t.n(R),B=t(54006);function $(h){return W.apply(this,arguments)}function W(){return W=A()(l()().mark(function h(E){return l()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,B.request)("/api/common/registry/get-list",{method:"POST",data:E}));case 1:case"end":return o.stop()}},h)})),W.apply(this,arguments)}function k(h){return I.apply(this,arguments)}function I(){return I=A()(l()().mark(function h(E){return l()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,B.request)("/api/common/registry/create",{method:"POST",data:E}));case 1:case"end":return o.stop()}},h)})),I.apply(this,arguments)}function g(h){return N.apply(this,arguments)}function N(){return N=A()(l()().mark(function h(E){return l()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,B.request)("/api/common/registry/delete",{method:"POST",data:E}));case 1:case"end":return o.stop()}},h)})),N.apply(this,arguments)}function G(h){return b.apply(this,arguments)}function b(){return b=A()(l()().mark(function h(E){return l()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,B.request)("/api/common/registry/get-detail",{method:"POST",data:E}));case 1:case"end":return o.stop()}},h)})),b.apply(this,arguments)}},6409:function(se,L,t){t.d(L,{O:function(){return v}});function v(){var l,R=parseInt((l=localStorage.getItem("dpanel-pagesize"))!==null&&l!==void 0?l:"0");return{showSizeChanger:!0,defaultPageSize:R!=null?R:20}}},66309:function(se,L,t){t.d(L,{Z:function(){return pe}});var v=t(67294),l=t(93967),R=t.n(l),A=t(98423),B=t(98787),$=t(69760),W=t(96159),k=t(45353),I=t(53124),g=t(11568),N=t(10274),G=t(14747),b=t(83262),h=t(83559);const E=e=>{const{paddingXXS:i,lineWidth:C,tagPaddingHorizontal:a,componentCls:s,calc:z}=e,T=z(a).sub(C).equal(),r=z(i).sub(C).equal();return{[s]:Object.assign(Object.assign({},(0,G.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:T,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,g.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${s}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${s}-close-icon`]:{marginInlineStart:r,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${s}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${s}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:T}}),[`${s}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},x=e=>{const{lineWidth:i,fontSizeIcon:C,calc:a}=e,s=e.fontSizeSM;return(0,b.IX)(e,{tagFontSize:s,tagLineHeight:(0,g.bf)(a(e.lineHeightSM).mul(s).equal()),tagIconSize:a(C).sub(a(i).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},o=e=>({defaultBg:new N.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var Q=(0,h.I$)("Tag",e=>{const i=x(e);return E(i)},o),p=function(e,i){var C={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&i.indexOf(a)<0&&(C[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)i.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(C[a[s]]=e[a[s]]);return C},H=v.forwardRef((e,i)=>{const{prefixCls:C,style:a,className:s,checked:z,onChange:T,onClick:r}=e,Y=p(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:ee,tag:m}=v.useContext(I.E_),te=oe=>{T==null||T(!z),r==null||r(oe)},J=ee("tag",C),[ue,ie,V]=Q(J),ae=R()(J,`${J}-checkable`,{[`${J}-checkable-checked`]:z},m==null?void 0:m.className,s,ie,V);return ue(v.createElement("span",Object.assign({},Y,{ref:i,style:Object.assign(Object.assign({},a),m==null?void 0:m.style),className:ae,onClick:te})))}),U=t(98719);const _=e=>(0,U.Z)(e,(i,C)=>{let{textColor:a,lightBorderColor:s,lightColor:z,darkColor:T}=C;return{[`${e.componentCls}${e.componentCls}-${i}`]:{color:a,background:z,borderColor:s,"&-inverse":{color:e.colorTextLightSolid,background:T,borderColor:T},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}});var M=(0,h.bk)(["Tag","preset"],e=>{const i=x(e);return _(i)},o);function K(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const F=(e,i,C)=>{const a=K(C);return{[`${e.componentCls}${e.componentCls}-${i}`]:{color:e[`color${C}`],background:e[`color${a}Bg`],borderColor:e[`color${a}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var ne=(0,h.bk)(["Tag","status"],e=>{const i=x(e);return[F(i,"success","Success"),F(i,"processing","Info"),F(i,"error","Error"),F(i,"warning","Warning")]},o),q=function(e,i){var C={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&i.indexOf(a)<0&&(C[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)i.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(C[a[s]]=e[a[s]]);return C};const ce=v.forwardRef((e,i)=>{const{prefixCls:C,className:a,rootClassName:s,style:z,children:T,icon:r,color:Y,onClose:ee,bordered:m=!0,visible:te}=e,J=q(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:ue,direction:ie,tag:V}=v.useContext(I.E_),[ae,oe]=v.useState(!0),he=(0,A.Z)(J,["closeIcon","closable"]);v.useEffect(()=>{te!==void 0&&oe(te)},[te]);const de=(0,B.o2)(Y),fe=(0,B.yT)(Y),le=de||fe,ve=Object.assign(Object.assign({backgroundColor:Y&&!le?Y:void 0},V==null?void 0:V.style),z),Z=ue("tag",C),[me,P,c]=Q(Z),n=R()(Z,V==null?void 0:V.className,{[`${Z}-${Y}`]:le,[`${Z}-has-color`]:Y&&!le,[`${Z}-hidden`]:!ae,[`${Z}-rtl`]:ie==="rtl",[`${Z}-borderless`]:!m},a,s,P,c),j=X=>{X.stopPropagation(),ee==null||ee(X),!X.defaultPrevented&&oe(!1)},[,D]=(0,$.Z)((0,$.w)(e),(0,$.w)(V),{closable:!1,closeIconRender:X=>{const ge=v.createElement("span",{className:`${Z}-close-icon`,onClick:j},X);return(0,W.wm)(X,ge,S=>({onClick:Ce=>{var re;(re=S==null?void 0:S.onClick)===null||re===void 0||re.call(S,Ce),j(Ce)},className:R()(S==null?void 0:S.className,`${Z}-close-icon`)}))}}),d=typeof J.onClick=="function"||T&&T.type==="a",f=r||null,y=f?v.createElement(v.Fragment,null,f,T&&v.createElement("span",null,T)):T,w=v.createElement("span",Object.assign({},he,{ref:i,className:n,style:ve}),y,D,de&&v.createElement(M,{key:"preset",prefixCls:Z}),fe&&v.createElement(ne,{key:"status",prefixCls:Z}));return me(d?v.createElement(k.Z,{component:"Tag"},w):w)});ce.CheckableTag=H;var pe=ce}}]);
