"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4037],{63434:function(re,U,e){var a=e(1413),h=e(45987),B=e(22270),E=e(84567),L=e(67294),D=e(90789),j=e(40284),O=e(85893),R=["options","fieldProps","proFieldProps","valueEnum"],H=L.forwardRef(function(i,y){var G=i.options,P=i.fieldProps,Q=i.proFieldProps,k=i.valueEnum,V=(0,h.Z)(i,R);return(0,O.jsx)(j.Z,(0,a.Z)({ref:y,valueType:"checkbox",valueEnum:(0,B.h)(k,void 0),fieldProps:(0,a.Z)({options:G},P),lightProps:(0,a.Z)({labelFormatter:function(){return(0,O.jsx)(j.Z,(0,a.Z)({ref:y,valueType:"checkbox",mode:"read",valueEnum:(0,B.h)(k,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,a.Z)({options:G},P),proFieldProps:Q},V))}},V.lightProps),proFieldProps:Q},V))}),$=L.forwardRef(function(i,y){var G=i.fieldProps,P=i.children;return(0,O.jsx)(E.Z,(0,a.Z)((0,a.Z)({ref:y},G),{},{children:P}))}),I=(0,D.G)($,{valuePropName:"checked"}),w=I;w.Group=H,U.Z=w},75293:function(re,U,e){e.d(U,{Z:function(){return B}});var a=e(25593),h=e(85893);function B(E){return(0,h.jsx)(a.Z.Text,{copyable:!0,style:{padding:10,display:E.block?"block":"",background:"#24292f",color:"#ffffff"},children:E.content})}},18678:function(re,U,e){e.r(U),e.d(U,{default:function(){return Ce}});var a=e(15009),h=e.n(a),B=e(99289),E=e.n(B),L=e(5574),D=e.n(L),j=e(68602),O=e(89075),R=e(68262),H=e(82346),$=e(9361),I=e(40056),w=e(86250),i=e(25593),y=e(67294),G=e(75293),P=e(36146),Q=e(29177),k=e(88360),V=e(94149),oe=e(87462),ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M608 112c-167.9 0-304 136.1-304 304 0 70.3 23.9 135 63.9 186.5l-41.1 41.1-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-44.9 44.9-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-65.3 65.3a8.03 8.03 0 000 11.3l42.3 42.3c3.1 3.1 8.2 3.1 11.3 0l253.6-253.6A304.06 304.06 0 00608 720c167.9 0 304-136.1 304-304S775.9 112 608 112zm161.2 465.2C726.2 620.3 668.9 644 608 644c-60.9 0-118.2-23.7-161.2-66.8-43.1-43-66.8-100.3-66.8-161.2 0-60.9 23.7-118.2 66.8-161.2 43-43.1 100.3-66.8 161.2-66.8 60.9 0 118.2 23.7 161.2 66.8 43.1 43 66.8 100.3 66.8 161.2 0 60.9-23.7 118.2-66.8 161.2z"}}]},name:"key",theme:"outlined"},ae=ce,de=e(84089),ue=function(A,u){return y.createElement(de.Z,(0,oe.Z)({},A,{ref:u,icon:ae}))},me=y.forwardRef(ue),ye=me,Y=e(5966),fe=e(97462),pe=e(63434),se=e(92398),ge=e(55241),he=e(42075),r=e(85893);function ve(b){var A,u=new P.Uo("user");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(se.Z,{centered:!0,activeKey:b.loginType,items:[{icon:(0,r.jsx)(Q.Z,{}),key:"login",label:u.format("title")},{icon:(0,r.jsx)(k.Z,{}),key:"register",label:u.format("registerTitle")}].filter(function(n){return n.key==b.loginType})}),(0,r.jsx)(Y.Z,{name:"username",fieldProps:{size:"large",prefix:(0,r.jsx)(Q.Z,{className:"prefixIcon"})},placeholder:u.format("formUsernameEmpty"),rules:[{required:!0,message:u.format("formUsernameEmpty")}]},"username"),(0,r.jsx)(Y.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,r.jsx)(V.Z,{className:"prefixIcon"})},placeholder:u.format("formPasswordEmpty"),rules:[{required:!0,message:u.format("formPasswordEmpty")}]},"password"),b.showTwoFa&&(0,r.jsx)(Y.Z,{name:"code",placeholder:u.format("formTwofaEmpty"),rules:[{required:!0}],fieldProps:{maxLength:6,size:"large",prefix:(0,r.jsx)(ye,{className:"prefixIcon"})}}),b.loginType=="register"&&(0,r.jsx)(fe.Z,{name:["password"],children:function(t){var s=t.password;return(0,r.jsx)(Y.Z.Password,{fieldProps:{size:"large",prefix:(0,r.jsx)(V.Z,{className:"prefixIcon"})},placeholder:u.format("formConfirmPasswordEmpty"),name:"confirmPassword",dependencies:["password"],rules:[{required:!0,message:u.format("formConfirmPasswordEmpty")},function(o){var l=o.getFieldValue;return{validator:function(v,m){return!m||l("password")===m?Promise.resolve():Promise.reject(new Error(u.format("formMessagePasswordNotMatch")))}}}]},"confirmPassword")}}),b.showAutoLogin&&(0,r.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,r.jsx)(pe.Z,{noStyle:!0,name:"autoLogin",initialValue:!0,children:u.format("formAutoLogin")}),(0,r.jsx)(ge.Z,{content:(0,r.jsxs)(he.Z,{direction:"vertical",size:[0,30],children:[(0,r.jsxs)("span",{children:[u.format("formUserResetTip"),", ",(0,r.jsx)("a",{href:"https://dpanel.cc/#/zh-cn/install/ctrl",target:"_blank",children:P.FD.format("help")})]}),(0,r.jsx)(G.Z,{content:"docker exec ".concat((A=b.appName)!==null&&A!==void 0?A:"dpanel"," ./dpanel user:reset -f config.yaml")}),(0,r.jsx)("span",{})]}),children:(0,r.jsx)(i.Z.Link,{style:{float:"right"},children:u.format("formUserReset")})})]})]})}var Ce=function(){var b=$.Z.useToken(),A=b.token,u=(0,H.useModel)("@@initialState"),n=u.initialState,t=u.loading,s=u.error,o=u.refresh,l=u.setInitialState,p=(0,y.useState)({loginType:"account",appName:"dpanel"}),v=D()(p,2),m=v[0],M=v[1],x=(0,y.useState)(),N=D()(x,2),f=N[0],F=N[1],X=(0,y.useState)(),g=D()(X,2),W=g[0],z=g[1],le=(0,H.useAntdConfigSetter)(),ie=(0,y.useRef)(),Z=new P.Uo("user");return(0,y.useEffect)(function(){window.document.title=Z.format("documentTitle"),(0,j.Nr)().then(function(){var q=E()(h()().mark(function J(d){var S;return h()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:Z.appendXk(d.data.feature.includes("canSeeEnableXk")),S={loginType:"account"},d.data.showBuildName&&d.data.family!="lite"&&(S.showBuildName=!0),d.data.showRegister&&(S.loginType="register"),d.data.family=="demo"&&(S.showDemo=!0),S.appName=d.data.appName,d.data.theme&&d.data.theme.algorithm&&(localStorage.setItem("dpanel-theme",d.data.theme.algorithm),le(function(c){var ne;(ne=c.theme)!==null&&ne!==void 0||(c.theme={});var te=[];return d.data.theme&&(d.data.theme.algorithm=="dark"?te.push($.Z.darkAlgorithm):te.push($.Z.defaultAlgorithm),c.theme.algorithm=te),c})),z(d.data),M(S),d.data.feature.indexOf("canSeeEnableThemeUser")!=-1?(0,O.ax)().then(function(c){c.data&&c.data.themeUserConfig&&c.data.themeUserConfig.siteTitle&&(window.document.title=c.data.themeUserConfig.siteTitle),F(c.data)}):F({});case 10:case"end":return T.stop()}},J)}));return function(J){return q.apply(this,arguments)}}())},[]),(0,r.jsxs)(r.Fragment,{children:[m&&m.showBuildName&&(0,r.jsx)(I.Z,{type:"error",message:Z.format("tipShowBuildName"),banner:!0}),m&&m.showDemo&&(0,r.jsx)(I.Z,{type:"error",message:Z.format("tipShowDemo"),banner:!0}),(0,r.jsx)(w.Z,{justify:"center",align:"center",style:{height:"100vh",background:f&&f.themeUserConfig&&f.themeUserConfig.bgImage&&f.themeUserConfig.bgImage.src?"url(".concat(f.themeUserConfig.bgImage.src,")"):"".concat(A.colorBgElevated,"dd")},children:(0,r.jsxs)(R.U,{onFinish:function(){var q=E()(h()().mark(function J(d){var S,_;return h()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(m.loginType!="register"){c.next=3;break}return c.next=3,(0,j.AT)({username:d.username,password:d.password,confirmPassword:d.confirmPassword});case 3:return c.prev=3,c.next=6,(0,j.n$)({username:d.username,password:d.password,autoLogin:d.autoLogin,code:d.code});case 6:if(S=c.sent,!S.data.accessToken){c.next=14;break}return localStorage.setItem("token",S.data.accessToken),o(),window.location.href="/dpanel/ui",c.abrupt("return");case 14:return c.abrupt("return",!1);case 15:c.next=20;break;case 17:c.prev=17,c.t0=c.catch(3),(_=ie.current)===null||_===void 0||_.resetFields(["code"]);case 20:case"end":return c.stop()}},J,null,[[3,17]])}));return function(J){return q.apply(this,arguments)}}(),containerStyle:{background:"transparent",height:"auto"},contentStyle:{width:"auto"},logo:"",title:(0,r.jsx)("img",{src:f&&f.themeUserConfig&&f.themeUserConfig.loginLogo?f.themeUserConfig.loginLogo:"/dpanel/static/asset/logo.png",width:"350"}),subTitle:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsx)("br",{})]}),formRef:ie,children:[(0,r.jsx)(ve,{showTwoFa:!!(f&&f.canSeeEnableTwoFa),loginType:m.loginType,appName:m.appName,showAutoLogin:!(W!=null&&W.feature.includes("canSeeEnableXk"))}),(0,r.jsxs)(i.Z.Paragraph,{style:{marginBottom:10,color:"#999999",textAlign:"center"},children:[Z.format("agree"),(0,r.jsx)("a",{href:Z.format("userAgreementUrl"),target:"_blank",children:Z.format("userAgreement")}),(0,r.jsx)("a",{href:Z.format("userPrivacyUrl"),target:"_blank",children:Z.format("userPrivacy")})]})]})})]})}},89075:function(re,U,e){e.d(U,{$w:function(){return D},YQ:function(){return O},ax:function(){return H}});var a=e(15009),h=e.n(a),B=e(99289),E=e.n(B),L=e(82346);function D(){return j.apply(this,arguments)}function j(){return j=E()(h()().mark(function I(){return h()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,L.request)("/api/pro/home/get-machine-id",{method:"POST"}));case 1:case"end":return i.stop()}},I)})),j.apply(this,arguments)}function O(){return R.apply(this,arguments)}function R(){return R=E()(h()().mark(function I(){return h()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,L.request)("/api/pro/home/get-license-info",{method:"POST"}));case 1:case"end":return i.stop()}},I)})),R.apply(this,arguments)}function H(){return $.apply(this,arguments)}function $(){return $=E()(h()().mark(function I(){return h()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,L.request)("/api/pro/home/login-info",{method:"POST"}));case 1:case"end":return i.stop()}},I)})),$.apply(this,arguments)}},40056:function(re,U,e){e.d(U,{Z:function(){return u}});var a=e(67294),h=e(89739),B=e(4340),E=e(97937),L=e(21640),D=e(78860),j=e(93967),O=e.n(j),R=e(29372),H=e(64217),$=e(42550),I=e(96159),w=e(53124),i=e(11568),y=e(14747),G=e(83559);const P=(n,t,s,o,l)=>({background:n,border:`${(0,i.bf)(o.lineWidth)} ${o.lineType} ${t}`,[`${l}-icon`]:{color:s}}),Q=n=>{const{componentCls:t,motionDurationSlow:s,marginXS:o,marginSM:l,fontSize:p,fontSizeLG:v,lineHeight:m,borderRadiusLG:M,motionEaseInOutCirc:x,withDescriptionIconSize:N,colorText:f,colorTextHeading:F,withDescriptionPadding:X,defaultPadding:g}=n;return{[t]:Object.assign(Object.assign({},(0,y.Wf)(n)),{position:"relative",display:"flex",alignItems:"center",padding:g,wordWrap:"break-word",borderRadius:M,[`&${t}-rtl`]:{direction:"rtl"},[`${t}-content`]:{flex:1,minWidth:0},[`${t}-icon`]:{marginInlineEnd:o,lineHeight:0},"&-description":{display:"none",fontSize:p,lineHeight:m},"&-message":{color:F},[`&${t}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${s} ${x}, opacity ${s} ${x},
        padding-top ${s} ${x}, padding-bottom ${s} ${x},
        margin-bottom ${s} ${x}`},[`&${t}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${t}-with-description`]:{alignItems:"flex-start",padding:X,[`${t}-icon`]:{marginInlineEnd:l,fontSize:N,lineHeight:0},[`${t}-message`]:{display:"block",marginBottom:o,color:F,fontSize:v},[`${t}-description`]:{display:"block",color:f}},[`${t}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},k=n=>{const{componentCls:t,colorSuccess:s,colorSuccessBorder:o,colorSuccessBg:l,colorWarning:p,colorWarningBorder:v,colorWarningBg:m,colorError:M,colorErrorBorder:x,colorErrorBg:N,colorInfo:f,colorInfoBorder:F,colorInfoBg:X}=n;return{[t]:{"&-success":P(l,o,s,n,t),"&-info":P(X,F,f,n,t),"&-warning":P(m,v,p,n,t),"&-error":Object.assign(Object.assign({},P(N,x,M,n,t)),{[`${t}-description > pre`]:{margin:0,padding:0}})}}},V=n=>{const{componentCls:t,iconCls:s,motionDurationMid:o,marginXS:l,fontSizeIcon:p,colorIcon:v,colorIconHover:m}=n;return{[t]:{"&-action":{marginInlineStart:l},[`${t}-close-icon`]:{marginInlineStart:l,padding:0,overflow:"hidden",fontSize:p,lineHeight:(0,i.bf)(p),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${s}-close`]:{color:v,transition:`color ${o}`,"&:hover":{color:m}}},"&-close-text":{color:v,transition:`color ${o}`,"&:hover":{color:m}}}}},oe=n=>({withDescriptionIconSize:n.fontSizeHeading3,defaultPadding:`${n.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${n.paddingMD}px ${n.paddingContentHorizontalLG}px`});var ce=(0,G.I$)("Alert",n=>[Q(n),k(n),V(n)],oe),ae=function(n,t){var s={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&t.indexOf(o)<0&&(s[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(n);l<o.length;l++)t.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(n,o[l])&&(s[o[l]]=n[o[l]]);return s};const de={success:h.Z,info:D.Z,error:B.Z,warning:L.Z},ue=n=>{const{icon:t,prefixCls:s,type:o}=n,l=de[o]||null;return t?(0,I.wm)(t,a.createElement("span",{className:`${s}-icon`},t),()=>({className:O()(`${s}-icon`,t.props.className)})):a.createElement(l,{className:`${s}-icon`})},me=n=>{const{isClosable:t,prefixCls:s,closeIcon:o,handleClose:l,ariaProps:p}=n,v=o===!0||o===void 0?a.createElement(E.Z,null):o;return t?a.createElement("button",Object.assign({type:"button",onClick:l,className:`${s}-close-icon`,tabIndex:0},p),v):null};var Y=a.forwardRef((n,t)=>{const{description:s,prefixCls:o,message:l,banner:p,className:v,rootClassName:m,style:M,onMouseEnter:x,onMouseLeave:N,onClick:f,afterClose:F,showIcon:X,closable:g,closeText:W,closeIcon:z,action:le,id:ie}=n,Z=ae(n,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[q,J]=a.useState(!1),d=a.useRef(null);a.useImperativeHandle(t,()=>({nativeElement:d.current}));const{getPrefixCls:S,direction:_,closable:T,closeIcon:c,className:ne,style:te}=(0,w.dj)("alert"),C=S("alert",o),[je,Ie,Se]=ce(C),Te=K=>{var ee;J(!0),(ee=n.onClose)===null||ee===void 0||ee.call(n,K)},Ee=a.useMemo(()=>n.type!==void 0?n.type:p?"warning":"info",[n.type,p]),Oe=a.useMemo(()=>typeof g=="object"&&g.closeIcon||W?!0:typeof g=="boolean"?g:z!==!1&&z!==null&&z!==void 0?!0:!!T,[W,z,g,T]),Pe=p&&X===void 0?!0:X,$e=O()(C,`${C}-${Ee}`,{[`${C}-with-description`]:!!s,[`${C}-no-icon`]:!Pe,[`${C}-banner`]:!!p,[`${C}-rtl`]:_==="rtl"},ne,v,m,Se,Ie),be=(0,H.Z)(Z,{aria:!0,data:!0}),Me=a.useMemo(()=>typeof g=="object"&&g.closeIcon?g.closeIcon:W||(z!==void 0?z:typeof T=="object"&&T.closeIcon?T.closeIcon:c),[z,g,W,c]),Ze=a.useMemo(()=>{const K=g!=null?g:T;if(typeof K=="object"){const{closeIcon:ee}=K;return ae(K,["closeIcon"])}return{}},[g,T]);return je(a.createElement(R.ZP,{visible:!q,motionName:`${C}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:K=>({maxHeight:K.offsetHeight}),onLeaveEnd:F},({className:K,style:ee},xe)=>a.createElement("div",Object.assign({id:ie,ref:(0,$.sQ)(d,xe),"data-show":!q,className:O()($e,K),style:Object.assign(Object.assign(Object.assign({},te),M),ee),onMouseEnter:x,onMouseLeave:N,onClick:f,role:"alert"},be),Pe?a.createElement(ue,{description:s,icon:n.icon,prefixCls:C,type:Ee}):null,a.createElement("div",{className:`${C}-content`},l?a.createElement("div",{className:`${C}-message`},l):null,s?a.createElement("div",{className:`${C}-description`},s):null),le?a.createElement("div",{className:`${C}-action`},le):null,a.createElement(me,{isClosable:Oe,prefixCls:C,closeIcon:Me,handleClose:Te,ariaProps:Ze}))))}),fe=e(15671),pe=e(43144),se=e(61120),ge=e(78814),he=e(82963);function r(n,t,s){return t=(0,se.Z)(t),(0,he.Z)(n,(0,ge.Z)()?Reflect.construct(t,s||[],(0,se.Z)(n).constructor):t.apply(n,s))}var ve=e(60136),b=function(n){function t(){var s;return(0,fe.Z)(this,t),s=r(this,t,arguments),s.state={error:void 0,info:{componentStack:""}},s}return(0,ve.Z)(t,n),(0,pe.Z)(t,[{key:"componentDidCatch",value:function(o,l){this.setState({error:o,info:l})}},{key:"render",value:function(){const{message:o,description:l,id:p,children:v}=this.props,{error:m,info:M}=this.state,x=(M==null?void 0:M.componentStack)||null,N=typeof o=="undefined"?(m||"").toString():o,f=typeof l=="undefined"?x:l;return m?a.createElement(Y,{id:p,type:"error",message:N,description:a.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},f)}):v}}])}(a.Component);const A=Y;A.ErrorBoundary=b;var u=A}}]);
