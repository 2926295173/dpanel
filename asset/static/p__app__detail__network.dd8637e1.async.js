"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2902],{80821:function(U,i,e){e.d(i,{Z:function(){return W}});var m=e(97857),_=e.n(m),d=e(5574),s=e.n(d),u=e(24963),h=e(36146),P=e(86738),T=e(83062),O=e(28036),g=e(67294),f=e(85893);function W(n){var v=(0,g.useState)(!1),D=s()(v,2),p=D[0],o=D[1],l=(0,g.useContext)(u.Z),M=l.message,b=new h.Uo,C=function(){o(!0);var j=n.action();j instanceof Promise?j.then(function(a){if(o(!1),a){typeof n.onSuccess=="function"&&n.onSuccess(a);var r="";n.messageSuccess?typeof n.messageSuccess=="function"?r=n.messageSuccess(a):r=n.messageSuccess.indexOf("notification.")==0?b.format(n.messageSuccess):n.messageSuccess:r=b.format("notification.finish"),n.asynced?M.info(r):M.success(r)}}).catch(function(a){o(!1),typeof n.onError=="function"&&n.onError(a)}):o(!1)};return n.confirm?(0,f.jsx)(P.Z,_()(_()({style:{width:500},title:n.confirmTitle?n.confirmTitle:b.format("notification.title.tip"),description:typeof n.confirm=="string"&&n.confirm.indexOf("notification.")==0?b.format(n.confirm):n.confirm,onConfirm:C,okText:"Yes",cancelText:"No",onOpenChange:n.confirmOnOpenChange},n.confirmProps),{},{children:(0,f.jsx)(T.Z,{title:n.tips,children:(0,f.jsx)(O.ZP,{block:n.block,disabled:n.disabled,icon:!n.children&&p?void 0:n.icon,loading:p,danger:n.danger,type:n.type,children:n.children})})})):(0,f.jsx)(T.Z,{title:n.tips,children:(0,f.jsx)(O.ZP,{block:n.block,style:n.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:n.disabled,icon:!n.children&&p?void 0:n.icon,loading:p,onClick:C,danger:n.danger,type:n.type,children:n.children})})}},78498:function(U,i,e){e.d(i,{Z:function(){return h}});var m=e(25035),_=e(42075),d=e(83062),s=e(67294),u=e(85893);function h(P){return(0,u.jsxs)(_.Z,{children:[P.title,(0,u.jsx)(d.Z,{title:P.help,children:(0,u.jsx)(m.Z,{})})]})}},78451:function(U,i,e){e.d(i,{Z:function(){return d}});var m=e(67294),_=e(85893);function d(s){return(0,_.jsx)("span",{style:{width:s.width?s.width:"auto",wordBreak:"break-word"},children:s.content})}},3616:function(U,i,e){e.d(i,{Ed:function(){return s},FK:function(){return _},R_:function(){return m},ob:function(){return d}});var m=window.innerWidth<=1024?"90vw":"65vw",_="90vw",d="60vw",s="50vh"},24963:function(U,i,e){var m=e(67294),_=(0,m.createContext)({});i.Z=_},50070:function(U,i,e){e.r(i),e.d(i,{AppDetailContext:function(){return M},default:function(){return b}});var m=e(15009),_=e.n(m),d=e(99289),s=e.n(d),u=e(5574),h=e.n(u),P=e(1699),T=e(24963),O=e(13822),g=e(36146),f=e(55809),W=e(90078),n=e(82346),v=e(25593),D=e(28036),p=e(50136),o=e(67294),l=e(85893),M=(0,o.createContext)({});function b(){var C,y=(0,o.useContext)(T.Z),j=y.loading,a=(0,n.useParams)(),r=(0,n.useSearchParams)(),c=h()(r,2),t=c[0],ee=c[1],G=(C=t.get("tab"))!==null&&C!==void 0?C:"edit",V=(0,o.useState)("edit"),x=h()(V,2),z=x[0],k=x[1],L=(0,n.useNavigate)(),H=(0,o.useState)(1),Z=h()(H,2),$=Z[0],J=Z[1],w=[{label:(0,l.jsx)(n.Link,{to:"/app/detail/edit/".concat(a.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,l.jsx)(n.Link,{to:"/app/detail/network/".concat(a.id,"?tab=network"),children:"\u7F51\u7EDC\u7BA1\u7406"}),key:"network"},{label:(0,l.jsx)(v.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){L("/app/detail/file/".concat(a.id,"?tab=file"))}},{label:(0,l.jsx)(v.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){L("/app/detail/log/".concat(a.id,"?tab=log"))}},{label:(0,l.jsx)(v.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){L("/app/detail/stat/".concat(a.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,l.jsx)(f.Z,{}),disabled:!0}],Y=(0,o.useState)(w),F=h()(Y,2),Q=F[0],X=F[1];(0,o.useEffect)(function(){j.show(),k(G);var A=function(){var B=s()(_()().mark(function N(){var K,S,I;return _()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return K=w,E.prev=1,E.next=4,(0,O.jV)({md5:(S=a.id)!==null&&S!==void 0?S:""});case 4:I=E.sent,K.map(function(R){return R.key=="containerName"&&(R.label=I.data.info.Name),(!I.data.info.State.Running||I.data.info.State.Restarting)&&(R.key=="file"||R.key=="stat")&&(R.disabled=!0),R}),X(K),E.next=13;break;case 9:return E.prev=9,E.t0=E.catch(1),L("/app/list"),E.abrupt("return");case 13:return E.prev=13,j.destroy(),E.finish(13);case 16:case"end":return E.stop()}},N,null,[[1,9,13,16]])}));return function(){return B.apply(this,arguments)}}();A()},[$,a]);var q=function(B){k(B.key)};return(0,l.jsx)(M.Provider,{value:{reload:function(){J($+1)}},children:(0,l.jsxs)(W._z,{header:{extra:[(0,l.jsx)(P.u,{access:"canSeeContainerListManageCreate",children:(0,l.jsx)(n.Link,{to:"/app/create/image",children:(0,l.jsx)(D.ZP,{type:"primary",children:g.Ob.format("container.create")})})},"create")]},children:[(0,l.jsx)(p.Z,{mode:"horizontal",onClick:q,selectedKeys:[z],items:Q}),(0,l.jsx)(n.Outlet,{})]})})}},77812:function(U,i,e){e.r(i),e.d(i,{default:function(){return O}});var m=e(5574),_=e.n(m),d=e(67294),s=e(13822),u=e(82346),h=e(50070),P=e(43831),T=e(85893);function O(){var g=(0,u.useParams)(),f=(0,d.useState)(),W=_()(f,2),n=W[0],v=W[1],D=(0,d.useContext)(h.AppDetailContext);return(0,d.useEffect)(function(){var p;(0,s.jV)({md5:(p=g.id)!==null&&p!==void 0?p:""}).then(function(o){v(o.data.info)}),D.reload()},[]),n&&(0,T.jsx)(P.Z,{containerInfo:n})}},13822:function(U,i,e){e.d(i,{IE:function(){return T},IW:function(){return h},KK:function(){return v},LJ:function(){return p},RF:function(){return b},Re:function(){return l},aF:function(){return y},eE:function(){return W},jV:function(){return g}});var m=e(15009),_=e.n(m),d=e(99289),s=e.n(d),u=e(82346);function h(a){return P.apply(this,arguments)}function P(){return P=s()(_()().mark(function a(r){return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/status",{method:"POST",data:r}));case 1:case"end":return t.stop()}},a)})),P.apply(this,arguments)}function T(a){return O.apply(this,arguments)}function O(){return O=s()(_()().mark(function a(r){return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/get-list",{data:r,method:"POST"}));case 1:case"end":return t.stop()}},a)})),O.apply(this,arguments)}function g(a){return f.apply(this,arguments)}function f(){return f=s()(_()().mark(function a(r){return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/get-detail",{data:r,method:"POST"}));case 1:case"end":return t.stop()}},a)})),f.apply(this,arguments)}function W(a){return n.apply(this,arguments)}function n(){return n=s()(_()().mark(function a(r){return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/update",{data:r,method:"POST"}));case 1:case"end":return t.stop()}},a)})),n.apply(this,arguments)}function v(){return D.apply(this,arguments)}function D(){return D=s()(_()().mark(function a(){return _()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,u.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return c.stop()}},a)})),D.apply(this,arguments)}function p(a){return o.apply(this,arguments)}function o(){return o=s()(_()().mark(function a(r){return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/export",{method:"POST",data:r,responseType:"blob"}));case 1:case"end":return t.stop()}},a)})),o.apply(this,arguments)}function l(a){return M.apply(this,arguments)}function M(){return M=s()(_()().mark(function a(r){return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/commit",{method:"POST",data:r}));case 1:case"end":return t.stop()}},a)})),M.apply(this,arguments)}function b(a){return C.apply(this,arguments)}function C(){return C=s()(_()().mark(function a(r){return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/upgrade",{method:"POST",data:r}));case 1:case"end":return t.stop()}},a)})),C.apply(this,arguments)}function y(a){return j.apply(this,arguments)}function j(){return j=s()(_()().mark(function a(r){return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/copy",{method:"POST",data:r}));case 1:case"end":return t.stop()}},a)})),j.apply(this,arguments)}}}]);
