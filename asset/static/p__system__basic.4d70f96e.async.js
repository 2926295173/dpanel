"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1050],{1699:function(ae,L,a){a.d(L,{u:function(){return _}});var R=a(9783),u=a.n(R),k=a(97857),F=a.n(k),N=a(67294),r=a(82346),U=a(40411),b=a(42075),o=a(85893),_=function(n){var K=(0,r.useAccess)(),s=Array.isArray(n.access)?n.access:[n.access],c,D=n.fallback;return typeof n.children=="function"?(c=n.children(s.reduce(function(t,T){return F()(F()({},t),{},u()({},T,K[T]))},{})),c||(c=D)):s.every(function(t){return K[t]})?c=n.children:c=D,!D&&c&&n.showProTips&&K.canSeeEnableCe&&(c=(0,o.jsx)(U.Z,{offset:n.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:c})),!D&&c&&n.showProRibbonTips&&K.canSeeEnableCe&&(c=(0,o.jsx)(U.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:c})),n.space?(0,o.jsx)(b.Z,F()(F()({},n.space),{},{children:c})):c}},80821:function(ae,L,a){a.d(L,{Z:function(){return G}});var R=a(97857),u=a.n(R),k=a(5574),F=a.n(k),N=a(24963),r=a(86738),U=a(28036),b=a(83062),o=a(67294),_=a(85893);function G(n){var K=(0,o.useState)(!1),s=F()(K,2),c=s[0],D=s[1],t=(0,o.useContext)(N.Z),T=t.lang,W=t.message,f=function(){D(!0);var de=n.action();de instanceof Promise?de.then(function(ne){if(D(!1),ne){typeof n.onSuccess=="function"&&n.onSuccess(ne);var e="";n.messageSuccess?typeof n.messageSuccess=="function"?e=n.messageSuccess(ne):e=n.messageSuccess.indexOf("notification.")==0?T(n.messageSuccess):n.messageSuccess:e=T("notification.finish"),n.asynced?W.info(e):W.success(e)}}).catch(function(ne){D(!1),typeof n.onError=="function"&&n.onError(ne)}):D(!1)};return n.confirm?(0,_.jsx)(r.Z,u()(u()({style:{width:500},title:n.confirmTitle?n.confirmTitle:T("notification.title.tip"),description:typeof n.confirm=="string"&&n.confirm.indexOf("notification.")==0?T(n.confirm):n.confirm,onConfirm:f,okText:"Yes",cancelText:"No",onOpenChange:n.confirmOnOpenChange},n.confirmProps),{},{children:(0,_.jsx)(U.ZP,{block:n.block,disabled:n.disabled,icon:!n.children&&c?void 0:n.icon,loading:c,danger:n.danger,type:n.type,children:n.children})})):(0,_.jsx)(b.Z,{title:n.tips,children:(0,_.jsx)(U.ZP,{block:n.block,style:n.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:n.disabled,icon:!n.children&&c?void 0:n.icon,loading:c,onClick:f,danger:n.danger,type:n.type,children:n.children})})}},44349:function(ae,L,a){var R=a(97857),u=a.n(R),k=a(17186),F=a(5966),N=a(86250),r=a(67294),U=a(85893),b=(0,r.forwardRef)(function(o,_){var G=(0,r.useRef)();(0,r.useImperativeHandle)(_,function(){return{addItem:function(s,c){var D,t=(D=G.current)===null||D===void 0?void 0:D.getList(),T=!1;if(t==null||t.map(function(f){if(f.name==s){T=!0;return}}),!T){var W;(W=G.current)===null||W===void 0||W.add({name:s,value:c})}},clear:function(){var s;(s=G.current)===null||s===void 0||(s=s.getList())===null||s===void 0||s.map(function(c,D){var t;(t=G.current)===null||t===void 0||t.remove(D)})}}});var n={};return o.hideCopyButton===!0&&(n.copyIconProps=!1),o.hideDeleteButton===!0&&(n.deleteIconProps=!1),(0,U.jsx)(k.u,u()(u()({initialValue:o.initialValue,label:o.label,name:o.name,actionRef:G,creatorButtonProps:o.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(o.label?o.label:o.name)}:!1,min:o.min?o.min:0},n),{},{children:function(s,c,D){return(0,U.jsx)(N.Z,{justify:o.justify,gap:o.gap,children:o.items.map(function(t){return t.render?(0,U.jsx)("div",{children:t.render&&t.render(s,c,D)},"".concat(o.name,"-").concat(t.name,"-").concat(s.key)):(0,U.jsx)(F.Z,{width:t.width,name:t.name,label:t.label,required:t.required,rules:[{required:t.required}],disabled:t.disabled,placeholder:t.placeholder},"".concat(o.name,"-").concat(t.name,"-").concat(s.key))})})}}))});L.Z=b},34879:function(ae,L,a){a.d(L,{Z:function(){return N}});var R=a(97961),u=a(91604),k=a(1677),F=a(85893);function N(r){return r.showDragger?(0,F.jsx)(u.Z,{max:r.max?r.max:1,title:r.title,label:r.label,required:r.required,rules:[{required:r.required}],fieldProps:{multiple:!!(r.max&&r.max>1),name:"file",accept:r.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(b){return new Promise(function(o){var _;(0,R._2)({path:(_=b.response.data.path)!==null&&_!==void 0?_:""}).then(function(G){o(!0)})})}},name:r.name}):(0,F.jsx)(k.Z,{max:r.max?r.max:1,title:r.title,label:r.label,required:r.required,rules:[{required:r.required}],fieldProps:{multiple:!!(r.max&&r.max>1),name:"file",accept:r.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(b){return new Promise(function(o){var _;(0,R._2)({path:(_=b.response.data.path)!==null&&_!==void 0?_:""}).then(function(G){o(!0)})})}},name:r.name})}},2808:function(ae,L,a){a.d(L,{Z:function(){return U}});var R=a(97857),u=a.n(R),k=a(62370),F=a(51663),N=a(67294),r=a(85893);function U(b){return(0,r.jsx)(k.Z,u()(u()({},b),{},{children:(0,r.jsx)(F.Z,{showText:function(_){return _.toHexString()},allowClear:!0,presets:[{label:"\u9884\u8BBE\u989C\u8272",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},3616:function(ae,L,a){a.d(L,{Ed:function(){return F},FK:function(){return u},R_:function(){return R},ob:function(){return k}});var R=window.innerWidth<=1024?"90vw":"65vw",u="90vw",k="60vw",F="50vh"},12323:function(ae,L,a){a.d(L,{Xq:function(){return u},nS:function(){return k}});var R=null,u={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},k=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},24963:function(ae,L,a){var R=a(67294),u=(0,R.createContext)({});L.Z=u},56757:function(ae,L,a){a.r(L),a.d(L,{default:function(){return aa}});var R=a(5574),u=a.n(R),k=a(19632),F=a.n(k),N=a(15009),r=a.n(N),U=a(99289),b=a.n(U),o=a(24963),_=a(87662),G=a(88641),n=a(38345),K=a(97269),s=a(5966),c=a(31199),D=a(63434),t=a(67294),T=a(42075),W=a(80821),f=a(1699),Y=a(82346);function de(x){return ne.apply(this,arguments)}function ne(){return ne=b()(r()().mark(function x(P){return r()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",(0,Y.request)("/api/common/home/email-test",{method:"POST",data:P}));case 1:case"end":return B.stop()}},x)})),ne.apply(this,arguments)}var e=a(85893);function Se(){var x=(0,t.useRef)(),P=(0,t.useContext)(o.Z),I=P.lang,B=(0,t.useState)(""),m=u()(B,2),q=m[0],w=m[1],X=function(){var ee=b()(r()().mark(function V(){var E,h,i,g,y,j,H,v;return r()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,_.pe)({groupName:"setting",name:"emailServer"});case 2:v=S.sent,v.data&&((E=x.current)===null||E===void 0||E.setFieldsValue({host:(h=v.data.host)!==null&&h!==void 0?h:"",port:(i=v.data.port)!==null&&i!==void 0?i:"",email:(g=v.data.email)!==null&&g!==void 0?g:"",code:(y=v.data.code)!==null&&y!==void 0?y:"",status:(j=v.data.status)!==null&&j!==void 0?j:[]})),v.data&&w((H=v.data)===null||H===void 0?void 0:H.email);case 5:case"end":return S.stop()}},V)}));return function(){return ee.apply(this,arguments)}}();return(0,e.jsx)(n.Z,{direction:"column",gutter:[0,10],ghost:!0,children:(0,e.jsx)(n.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(G.Z,{}),subTitle:"\u90AE\u4EF6\u670D\u52A1",children:(0,e.jsxs)(K.A,{layout:"horizontal",labelAlign:"right",labelCol:{span:5,offset:0},formRef:x,onInit:b()(r()().mark(function ee(){return r()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return X(),E.abrupt("return",!0);case 2:case"end":return E.stop()}},ee)})),submitter:{render:function(V,E){return[].concat(F()(E),[(0,e.jsx)(W.Z,{tips:"\u5C06\u53D1\u9001\u90AE\u4EF6\u81F3 ".concat(q," \u4E2D\uFF0C\u6CE8\u610F\u67E5\u6536"),action:b()(r()().mark(function h(){return r()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,de({subject:I("system.basic.emailTestSubject"),content:I("system.basic.emailTestContent",{time:new Date().toISOString()})});case 2:return g.abrupt("return",g.sent);case 3:case"end":return g.stop()}},h)})),children:"\u6D4B\u8BD5"},"testEmail")])}},onFinish:function(){var ee=b()(r()().mark(function V(E){var h;return r()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,_.bv)({emailServer:{host:E.host,port:E.port,email:E.email,code:E.code,status:E.status}});case 2:return(h=x.current)===null||h===void 0||h.resetFields(),X(),g.abrupt("return",!0);case 5:case"end":return g.stop()}},V)}));return function(V){return ee.apply(this,arguments)}}(),children:[(0,e.jsx)(s.Z,{label:"SMTP\u670D\u52A1\u5668\u5730\u5740",name:"host",placeholder:"\u4F8B\u5982:smtp.163.com",required:!0,rules:[{required:!0}]}),(0,e.jsx)(c.Z,{label:"SMTP\u670D\u52A1\u5668\u7AEF\u53E3",name:"port",placeholder:"\u53D1\u9001\u90AE\u4EF6\u7AEF\u53E3\uFF0C\u901A\u5E38\u4E3A465",required:!0,rules:[{required:!0}]}),(0,e.jsx)(s.Z,{label:"SMTP\u6388\u6743\u7801",name:"code",width:"lg",placeholder:"SMTP\u6388\u6743\u7801",required:!0,rules:[{required:!0}],addonAfter:(0,e.jsxs)(T.Z,{children:[(0,e.jsx)("a",{target:"_blank",href:"https://service.mail.qq.com/detail/0/75",children:"QQ\u90AE\u7BB1\u6388\u6743\u7801"}),(0,e.jsx)("a",{target:"_blank",href:"https://help.mail.163.com/faqDetail.do?code=d7a5dc8471cd0c0e8b4b8f4f8e49998b374173cfe9171305fa1ce630d7f67ac286624f309a1a7089",children:"163\u90AE\u7BB1\u6388\u6743\u7801"})]})}),(0,e.jsx)(s.Z,{label:"\u53D1\u4EF6\u90AE\u7BB1",name:"email",placeholder:"\u53D1\u4EF6\u90AE\u7BB1\u5730\u5740",required:!0,rules:[{required:!0}]}),(0,e.jsx)(f.u,{access:"canSeeEnableEe",children:(0,e.jsx)(D.Z.Group,{name:"status",label:"\u5F00\u542F\u529F\u80FD",options:[{label:"\u6CE8\u518C",value:"register"}]})})]})})})}function xe(x){return ge.apply(this,arguments)}function ge(){return ge=b()(r()().mark(function x(P){return r()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",(0,Y.request)("/api/pro/two-fa/enable",{method:"POST",data:P}));case 1:case"end":return B.stop()}},x)})),ge.apply(this,arguments)}function Pe(){return ve.apply(this,arguments)}function ve(){return ve=b()(r()().mark(function x(){return r()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.abrupt("return",(0,Y.request)("/api/pro/two-fa/get-setting",{method:"POST"}));case 1:case"end":return I.stop()}},x)})),ve.apply(this,arguments)}var ye=a(29177),Be=a(86548),Ae=a(97937),Fe=a(12119),re=a(97462),se=a(52688),ce=a(62370),be=a(28036),De=a(35930);function Te(){var x=(0,t.useRef)(),P=(0,Y.useModel)("@@initialState"),I=P.initialState,B=P.loading,m=P.error,q=P.refresh,w=P.setInitialState,X=(0,t.useContext)(o.Z),ee=X.message,V=X.notice,E=X.lang,h=(0,t.useRef)(),i=(0,t.useState)(0),g=u()(i,2),y=g[0],j=g[1],H=(0,Y.useAccess)();return(0,t.useEffect)(function(){!H.canSeeEnableCe&&Pe().then(function(v){var A;(A=h.current)===null||A===void 0||A.setFieldsValue({enable:v.data.enable,email:v.data.email,qrcode:v.data.qrcode})})},[y]),(0,e.jsxs)(n.Z,{direction:"column",gutter:[0,10],ghost:!0,children:[(0,e.jsx)(n.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(ye.Z,{}),subTitle:"\u7BA1\u7406\u5458",children:(0,e.jsxs)(K.A,{layout:"horizontal",labelAlign:"right",labelCol:{span:3,offset:0},formRef:x,onFinish:function(){var v=b()(r()().mark(function A(S){var $,Z;return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,_.Jn)({username:S.username,password:S.password,newPassword:S.newPassword});case 2:if($=d.sent,!($&&$.data)){d.next=9;break}return(Z=x.current)===null||Z===void 0||Z.resetFields(),ee.success("\u4FEE\u6539\u7BA1\u7406\u5458\u7528\u6237\u540D\u548C\u5BC6\u7801\u6210\u529F"),localStorage.removeItem("token"),q(),d.abrupt("return",!0);case 9:case"end":return d.stop()}},A)}));return function(A){return v.apply(this,arguments)}}(),children:[(0,e.jsx)(re.Z,{name:["enableUsername"],children:function(A){var S=A.enableUsername;return(0,e.jsx)(s.Z,{label:"\u7528\u6237\u540D",name:"username",style:{width:"80%"},initialValue:I==null?void 0:I.user.username,disabled:!S,addonAfter:[(0,e.jsx)(be.ZP,{type:"link",hidden:!!S,icon:(0,e.jsx)(Be.Z,{}),onClick:function(){var Z;(Z=x.current)===null||Z===void 0||Z.setFieldValue("enableUsername",!0)}},"editBtn"),(0,e.jsx)(be.ZP,{type:"link",hidden:!S,icon:(0,e.jsx)(Ae.Z,{}),onClick:function(){var Z;(Z=x.current)===null||Z===void 0||Z.setFieldValue("enableUsername",!1)}},"closeBtn")]},"username")}}),(0,e.jsx)(s.Z.Password,{label:"\u5F53\u524D\u5BC6\u7801",name:"password",placeholder:"\u8F93\u5165\u7BA1\u7406\u5458\u5F53\u524D\u5BC6\u7801",rules:[{required:!0}]},"password"),(0,e.jsx)(s.Z.Password,{label:"\u65B0\u5BC6\u7801",name:"newPassword"},"newPasword"),(0,e.jsx)(re.Z,{name:["newPassword"],children:function(A){var S=A.newPassword;return(0,e.jsx)(s.Z.Password,{label:"\u786E\u8BA4\u65B0\u5BC6\u7801",name:"newPassword2",dependencies:["newPassword"],rules:[{required:typeof S!="undefined"&&S!=""},function($){var Z=$.getFieldValue;return{validator:function(d,l){return!l||Z("newPassword")===l?Promise.resolve():Promise.reject(new Error("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4"))}}}]},"newPasword2")}})]})}),(0,e.jsx)(f.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(A){var S=A.canSeeEnableCe;return(0,e.jsx)(n.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(Fe.Z,{}),subTitle:"\u767B\u5F55\u53CC\u56E0\u7D20\u914D\u7F6E",children:(0,e.jsxs)(K.A,{disabled:S,onFinish:function(){var $=b()(r()().mark(function Z(O){var d,l;return r()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,xe({email:O.email,enable:O.enable});case 2:d=M.sent,d&&d.data.qrcode&&((l=h.current)===null||l===void 0||l.setFieldValue("qrcode",d.data.qrcode)),j(y+1);case 5:case"end":return M.stop()}},Z)}));return function(Z){return $.apply(this,arguments)}}(),formRef:h,layout:"horizontal",labelAlign:"right",labelCol:{span:3,offset:0},children:[(0,e.jsx)(se.Z,{label:"\u5F00\u542F",name:"enable"}),(0,e.jsx)(s.Z,{label:"\u90AE\u7BB1",name:"email",placeholder:"\u8BF7\u8F93\u5165\u4F60\u7684\u90AE\u7BB1",rules:[{required:!0},{type:"email"}]}),(0,e.jsx)(ce.Z,{name:"qrcode",hidden:!0}),(0,e.jsx)(re.Z,{name:["qrcode"],children:function(Z){var O=Z.qrcode;if(O)return(0,e.jsx)(ce.Z,{label:"\u7ED1\u5B9A\u4E8C\u7EF4\u7801",tooltip:"\u4F7F\u7528\u652F\u6301 2fa \u7684\u9A8C\u8BC1 App \u626B\u7801\u8BE5\u4E8C\u7EF4\u7801",children:(0,e.jsx)(De.Z,{style:{border:"#d1d9e0b3 solid 1px",padding:"10px",borderRadius:"10px"},width:200,src:"data:image/png;base64,".concat(O)})})}})]})})}})]})}var Oe={xs:6,sm:6,md:6,lg:3,xl:3,xxl:3,offset:0},Me=a(43425),Ze=a(19400),oe=a(86615),me=a(64317),J=a(24739),Le=a(47221),Ie=a(86125),_e=a(86250),pe=a(2487),Re=a(4393),Ue=a(71230),We=a(15746),we=a(40411),$e=a(184),ke=a(25054),Ke=a(90672),ze=a(21532),Ee=a(34879),Ne=a(44349),he=a(65451),Ve=a(2808),He=a(3616),le=function(P){return(0,e.jsx)(Ve.Z,{name:P.name,label:P.label,tooltip:P.tooltip})},ie={colorPrimary:"",colorTextBase:"",colorLink:"",colorBgContainer:"",colorBorder:"",colorBgElevated:"",colorBorderSecondary:"colorBorder"},Ge=["borderRadius","wireframe"],Je=(0,t.forwardRef)(function(x,P){(0,t.useImperativeHandle)(P,function(){return{show:function(){q(!0)},reset:function(){var h;(h=w.current)===null||h===void 0||h.resetFields(["siteLogo","siteTitle","siteCopyright","siteLink","bgImage","bgSize"])}}});var I=(0,t.useState)(!1),B=u()(I,2),m=B[0],q=B[1],w=(0,t.useRef)(),X=(0,t.useContext)(o.Z),ee=X.message,V=X.lang;return(0,e.jsx)(ze.ZP,{children:(0,e.jsxs)($e.a,{drawerProps:{forceRender:!0,width:He.R_},submitter:{render:function(h,i){return(0,e.jsx)(T.Z,{children:i[1]})}},title:"\u81EA\u5B9A\u4E49\u4E3B\u9898",formRef:w,open:m,onOpenChange:function(h){var i;(i=w.current)===null||i===void 0||i.resetFields(["bgImageUpload","siteLogoUpload"]),h&&((0,he.Py)().then(function(g){var y=g.data.config;if(y){var j;if((j=w.current)===null||j===void 0||j.setFieldsValue({siteLogo:y.siteLogo,siteTitle:y.siteTitle,siteCopyright:y.siteCopyright,siteLink:y.siteLink,bgImage:y.bgImage,loginLogo:y.loginLogo}),!y.bgImage||!y.bgImage.width||y.bgImage.width=="100%"){var H;(H=w.current)===null||H===void 0||H.setFieldValue("bgSize","full")}else{var v;(v=w.current)===null||v===void 0||v.setFieldValue("bgSize","default")}}}),Object.keys(ie).map(function(g){var y=g;ie[g]!=""&&(y=ie[g]),w!=null&&w.current})),q(h)},name:"theme-user",onFinish:function(){var E=b()(r()().mark(function h(i){var g,y,j;return r()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return j={token:{},bgImage:i.bgImage,siteLink:i.siteLink,siteTitle:(g=i.siteTitle)!==null&&g!==void 0?g:"",siteCopyright:i.siteCopyright,siteLogo:(y=i.siteLogo)!==null&&y!==void 0?y:"",loginLogo:i.loginLogo},i.siteLogoUpload&&i.siteLogoUpload.length>0&&(j.siteLogo=i.siteLogoUpload[0].response.data.path),j.bgImage||(j.bgImage={}),i.bgImageUpload&&i.bgImageUpload.length>0&&(j.bgImage.src=i.bgImageUpload[0].response.data.path),j.bgImage.width=i.bgSize=="full"?"100%":"",i.loginLogoUpload&&i.loginLogoUpload.length>0&&(j.loginLogo=i.loginLogoUpload[0].response.data.path),Object.keys(ie).map(function(A){j.token||(j.token={});var S=A;ie[A]!=""&&(S=ie[A]);var $=w.current&&w.current.getFieldValue(S);$&&$.toHexString?$.cleared||(j.token[A]=$.toHexString()):j.token[A]=$}),Ge.map(function(A){j.token||(j.token={});var S=w.current&&w.current.getFieldValue(A);j.token[A]=S}),v.next=10,(0,he.Z8)(j);case 10:return x.onFinish&&x.onFinish(),ee.success(V("notification.finishTheme")),v.abrupt("return",!0);case 13:case"end":return v.stop()}},h)}));return function(h){return E.apply(this,arguments)}}(),children:[(0,e.jsx)(J.UW,{title:"\u76AE\u80A4\u8272\u7CFB",extra:(0,e.jsx)(se.Z,{name:"enableColor"})}),(0,e.jsx)(re.Z,{name:["enableColor"],children:function(h){var i=h.enableColor;return i&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(J.UW,{children:le({name:"colorPrimary",label:"\u54C1\u724C\u8272",tooltip:"\u54C1\u724C\u8272\u662F\u4F53\u73B0\u4EA7\u54C1\u7279\u6027\u548C\u4F20\u64AD\u7406\u5FF5\u6700\u76F4\u89C2\u7684\u89C6\u89C9\u5143\u7D20\u4E4B\u4E00\u3002\u5728\u4F60\u5B8C\u6210\u54C1\u724C\u4E3B\u8272\u7684\u9009\u53D6\u4E4B\u540E\uFF0C\u4F1A\u81EA\u52A8\u5E2E\u4F60\u751F\u6210\u4E00\u5957\u5B8C\u6574\u7684\u8272\u677F\uFF0C\u5E76\u8D4B\u4E88\u5B83\u4EEC\u6709\u6548\u7684\u8BBE\u8BA1\u8BED\u4E49"})}),(0,e.jsxs)(J.UW,{children:[le({name:"colorBgContainer",label:"\u4E3B\u7A97\u53E3\u80CC\u666F\u8272\u53CA\u900F\u660E\u5EA6"}),le({name:"colorBgElevated",label:"\u5F39\u51FA\u7A97\u80CC\u666F\u8272\u53CA\u900F\u660E\u5EA6"})]}),(0,e.jsxs)(J.UW,{children:[le({name:"colorTextBase",label:"\u57FA\u7840\u6587\u672C"}),le({name:"colorLink",label:"\u94FE\u63A5\u6587\u672C"}),le({name:"colorBorder",label:"\u8FB9\u6846\u8272"})]})]})}}),(0,e.jsx)(J.UW,{title:"\u98CE\u683C",extra:(0,e.jsx)(se.Z,{name:"enableStyle"})}),(0,e.jsx)(re.Z,{name:["enableStyle"],children:function(h){var i=h.enableStyle;return i&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(J.UW,{children:(0,e.jsxs)(_e.Z,{gap:40,children:[(0,e.jsx)(se.Z,{label:"\u7EBF\u6846\u5316",name:"wireframe"}),(0,e.jsx)(ke.Z,{min:1,max:16,label:"\u5706\u89D2",name:"borderRadius"})]})})})}}),(0,e.jsx)(J.UW,{title:"\u9762\u677F"}),(0,e.jsx)(s.Z,{label:"\u6807\u9898",name:"siteTitle",placeholder:"\u5C55\u793A\u5728\u9762\u677F\u5DE6\u4E0A\u89D2\u53CA\u9875\u9762\u6807\u7B7E\uFF0C\u4E3A\u7A7A\u5219\u4E0D\u663E\u793A"}),(0,e.jsxs)(J.UW,{children:[(0,e.jsx)(Ee.Z,{label:"Logo",title:"\u4E0A\u4F20 Logo",name:"siteLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(s.Z,{width:"md",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u8FDC\u7A0BUrl",name:"siteLogo"})]}),(0,e.jsxs)(J.UW,{children:[(0,e.jsx)(Ee.Z,{label:"\u80CC\u666F\u56FE",title:"\u4E0A\u4F20\u80CC\u666F\u56FE",name:"bgImageUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(s.Z,{width:"md",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u8FDC\u7A0BUrl",name:["bgImage","src"]}),(0,e.jsx)(oe.Z.Group,{name:"bgSize",label:"\u5C3A\u5BF8",initialValue:"full",valueEnum:{full:"\u5168\u5C4F",default:"\u9ED8\u8BA4"}})]}),(0,e.jsx)(J.UW,{children:(0,e.jsx)(re.Z,{name:["bgSize"],children:function(h){var i=h.bgSize;if(i=="default")return(0,e.jsxs)(J.UW,{children:[(0,e.jsx)(c.Z,{width:"xs",name:["bgImage","top"],label:"\u8DDD\u9876\u90E8\u504F\u79FB\u91CF"}),(0,e.jsx)(c.Z,{width:"xs",name:["bgImage","bottom"],label:"\u8DDD\u5E95\u90E8\u504F\u79FB\u91CF"}),(0,e.jsx)(c.Z,{width:"xs",name:["bgImage","left"],label:"\u8DDD\u5DE6\u4FA7\u504F\u79FB\u91CF"}),(0,e.jsx)(c.Z,{width:"xs",name:["bgImage","right"],label:"\u8DDD\u53F3\u4FA7\u504F\u79FB\u91CF"})]})}})}),(0,e.jsx)(Ne.Z,{name:"siteLink",label:"\u5E95\u90E8\u94FE\u63A5",showAddButton:!0,hideCopyButton:!0,gap:10,items:[{name:"title",label:"\u6587\u672C"},{name:"href",label:"\u94FE\u63A5"}]}),(0,e.jsx)(Ke.Z,{label:"\u7248\u6743\u4FE1\u606F",name:"siteCopyright"}),(0,e.jsxs)(J.UW,{title:"\u767B\u5F55\u9875",children:[(0,e.jsx)(Ee.Z,{label:"Logo",title:"Logo",name:"loginLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(s.Z,{width:"md",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u8FDC\u7A0BUrl",name:"loginLogo"})]})]})})}),Qe=Je,je=a(12323),Xe=a(64304),fe=a.n(Xe);function Ye(){var x=(0,t.useRef)(),P=(0,t.useRef)(),I=(0,t.useRef)(),B=(0,Y.useModel)("@@initialState"),m=B.initialState,q=B.loading,w=B.error,X=B.refresh,ee=B.setInitialState,V=(0,Y.useAccess)(),E=(0,t.useContext)(o.Z),h=E.message,i=E.lang,g=(0,Y.useAntdConfigSetter)(),y=(0,t.useState)(),j=u()(y,2),H=j[0],v=j[1],A=(0,t.useState)(),S=u()(A,2),$=S[0],Z=S[1];return(0,t.useEffect)(function(){var O,d,l,C,M,p,Q,z;(O=x.current)===null||O===void 0||O.setFieldsValue({algorithm:(d=m==null?void 0:m.theme.algorithm)!==null&&d!==void 0?d:"default",mainMenu:(l=m==null?void 0:m.theme.mainMenu)!==null&&l!==void 0?l:"top",compact:(C=m==null?void 0:m.theme.compact)!==null&&C!==void 0?C:"default",fontSize:(M=m==null?void 0:m.theme.fontSize)!==null&&M!==void 0?M:14,fontSizeConsole:(p=m==null?void 0:m.theme.fontSizeConsole)!==null&&p!==void 0?p:12,sideMenu:(Q=m==null?void 0:m.theme.sideMenu)!==null&&Q!==void 0?Q:"default",tablePageSize:(z=m==null?void 0:m.theme.tablePageSize)!==null&&z!==void 0?z:"20"})},[m]),(0,e.jsx)(Le.Z,{accordion:!0,defaultActiveKey:"basic",items:[{key:"basic",label:"\u57FA\u7840\u98CE\u683C",children:(0,e.jsxs)(n.Z,{ghost:!0,children:[!V.canSeeEnableCe&&(0,e.jsx)(Qe,{ref:P}),(0,e.jsxs)(K.A,{layout:"horizontal",labelAlign:"right",labelCol:Oe,formRef:x,submitter:{render:function(d,l){return[l[1]]}},onFinish:function(){var O=b()(r()().mark(function d(l){var C;return r()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(C={algorithm:l.algorithm,mainMenu:l.mainMenu,sideMenu:l.sideMenu,compact:l.compact,fontSizeConsole:l.fontSizeConsole,fontSize:l.fontSize,tablePageSize:l.tablePageSize},!(l.algorithm!=(m==null?void 0:m.theme.algorithm)&&!V.canSeeEnableCe)){p.next=4;break}return p.next=4,(0,he.H)({clearColor:!0});case 4:return localStorage.setItem("dpanel-theme",l.algorithm),localStorage.setItem("dpanel-compact",l.compact),localStorage.setItem("dpanel-pagesize",l.tablePageSize),p.next=9,(0,_.bv)({theme:C});case 9:h.success(i("notification.finishTheme"));case 10:case"end":return p.stop()}},d)}));return function(d){return O.apply(this,arguments)}}(),children:[(0,e.jsx)(oe.Z.Group,{name:"algorithm",label:"\u4E3B\u9898\u76AE\u80A4",initialValue:"default",radioType:"button",valueEnum:function(){var d={default:"\u4EAE\u8272",dark:"\u6697\u8272",system:"\u8DDF\u968F\u7CFB\u7EDF"};return d}}),(0,e.jsx)(f.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(d){var l=d.canSeeEnableCe;return(0,e.jsx)(re.Z,{name:["algorithm"],children:function(M){var p=M.algorithm;return(0,e.jsx)(ce.Z,{label:"\u81EA\u5B9A\u4E49\u76AE\u80A4\u914D\u7F6E",children:(0,e.jsxs)(T.Z.Compact,{children:[(0,e.jsx)(be.ZP,{disabled:l||p=="system",onClick:function(){var z;(z=P.current)===null||z===void 0||z.show()},icon:(0,e.jsx)(Me.Z,{}),children:"\u914D\u7F6E"}),(0,e.jsx)(W.Z,{disabled:l||p=="system",action:b()(r()().mark(function Q(){var z;return r()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,(0,he.H)({clearColor:!0,clearSite:!0});case 2:g(function(Ce){return Ce.theme={token:{}},Ce}),(z=P.current)===null||z===void 0||z.reset(),window.location.reload();case 5:case"end":return te.stop()}},Q)})),children:"\u6062\u590D\u9ED8\u8BA4"})]})})}})}}),(0,e.jsx)(oe.Z.Group,{name:"mainMenu",label:"\u4E3B\u83DC\u5355\u4F4D\u7F6E",initialValue:"top",radioType:"button",valueEnum:{top:"\u9876\u90E8",side:"\u4FA7\u9762"}}),(0,e.jsx)(oe.Z.Group,{name:"sideMenu",label:"\u5DE6\u4FA7\u83DC\u5355",initialValue:"default",radioType:"button",valueEnum:{default:"\u9ED8\u8BA4\u5C55\u5F00",collapse:"\u9ED8\u8BA4\u6536\u7F29"}}),(0,e.jsx)(oe.Z.Group,{name:"compact",label:"\u6587\u672C\u5E03\u5C40",initialValue:"default",radioType:"button",valueEnum:{default:"\u9ED8\u8BA4",compact:"\u7D27\u51D1"}}),(0,e.jsx)(ce.Z,{name:"fontSize",label:"\u4E3B\u9898\u5B57\u53F7",initialValue:14,children:(0,e.jsx)(Ie.Z,{step:2,max:30,min:8,marks:{8:"8",10:"10",12:"12",14:"14",16:"16",20:"20",26:"26",30:"20"}})}),(0,e.jsx)(me.Z,{initialValue:"20",label:"\u8868\u683C\u5206\u9875\u6570",name:"tablePageSize",valueEnum:{10:"\u6BCF\u987510\u6761",20:"\u6BCF\u987520\u6761",50:"\u6BCF\u987550\u6761",100:"\u6BCF\u9875100\u6761",all:"\u663E\u793A\u5168\u90E8"}})]})]})},{key:"console",label:"\u63A7\u5236\u53F0\u98CE\u683C",children:(0,e.jsx)(n.Z,{ghost:!0,children:(0,e.jsxs)(K.A,{submitter:{render:function(d,l){return[l[1]]}},request:b()(r()().mark(function O(){var d,l,C;return r()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return l=je.Xq,p.next=3,(0,_.pe)({groupName:"setting",name:"themeConsoleConfig"});case 3:return C=p.sent,C.data&&Object.assign(l,C.data),!V.canSeeEnableCe&&C.data&&(d=C.data)!==null&&d!==void 0&&d.themeName&&C.data.themeName!=""&&Object.keys(fe()).forEach(function(Q,z){Q==C.data.themeName&&(Z(Math.ceil((z+1)/36)),v(C.data.themeName))}),p.abrupt("return",{fontSize:l.fontSize,lineHeight:l.lineHeight,letterSpacing:l.letterSpacing,fontWeight:l.fontWeight,cursorStyle:l.cursorStyle,cursorInactiveStyle:l.cursorInactiveStyle,cursorBlink:l.cursorBlink});case 7:case"end":return p.stop()}},O)})),formRef:I,onFinish:function(){var O=b()(r()().mark(function d(l){var C;return r()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return C={fontSize:l.fontSize,lineHeight:l.lineHeight,letterSpacing:l.letterSpacing,fontWeight:l.fontWeight,cursorStyle:l.cursorStyle,cursorInactiveStyle:l.cursorInactiveStyle,cursorBlink:l.cursorBlink,theme:{},themeName:""},H!=""&&!V.canSeeEnableCe&&(C.theme=fe()[H],C.themeName=H),p.next=4,(0,_.bv)({console:C});case 4:return h.success(i("notification.finishTheme")),p.abrupt("return",!1);case 6:case"end":return p.stop()}},d)}));return function(d){return O.apply(this,arguments)}}(),children:[(0,e.jsx)(J.UW,{title:"\u5B57\u4F53",children:(0,e.jsxs)(_e.Z,{gap:50,children:[(0,e.jsx)(c.Z,{label:"\u5B57\u53F7",name:"fontSize",tooltip:"\u4EE5\u50CF\u7D20\u4E3A\u5355\u4F4D\u4E2D\u5B57\u4F53\u7684\u5927\u5C0F",fieldProps:{addonAfter:"px"}}),(0,e.jsx)(c.Z,{label:"\u884C\u9AD8",name:"lineHeight",tooltip:"\u4EE5\u500D\u7387\u4E3A\u5355\u4F4D\u7684\u884C\u9AD8",fieldProps:{addonAfter:"\u500D"}}),(0,e.jsx)(c.Z,{label:"\u5B57\u95F4\u8DDD",name:"letterSpacing",fieldProps:{addonAfter:"px"},tooltip:"\u4EE5\u50CF\u7D20\u4E3A\u5355\u4F4D\u7684\u5B57\u95F4\u8DDD"}),(0,e.jsx)(me.Z,{label:"\u52A0\u7C97",name:"fontWeight",options:[{label:"normal",value:"normal"},{label:"bold",value:"bold"},{label:"100",value:"100"},{label:"200",value:"200"},{label:"300",value:"300"},{label:"400",value:"400"},{label:"500",value:"500"},{label:"600",value:"600"},{label:"700",value:"700"},{label:"800",value:"800"},{label:"900",value:"900"}]})]})}),(0,e.jsx)(J.UW,{title:"\u5149\u6807",children:(0,e.jsxs)(_e.Z,{gap:50,children:[(0,e.jsx)(me.Z,{label:"\u6837\u5F0F - \u6D3B\u52A8\u6001",name:"cursorStyle",width:"sm",valueEnum:{bar:"\u7AD6\u7EBF",underline:"\u4E0B\u5212\u7EBF",block:"\u5B9E\u5FC3\u6846"}}),(0,e.jsx)(me.Z,{label:"\u6837\u5F0F - \u975E\u6D3B\u52A8\u6001",name:"cursorInactiveStyle",width:"sm",valueEnum:{bar:"\u7AD6\u7EBF",underline:"\u4E0B\u5212\u7EBF",block:"\u5B9E\u5FC3\u6846",outline:"\u7A7A\u5FC3\u6846"}}),(0,e.jsx)(se.Z,{label:"\u95EA\u52A8?",name:"cursorBlink"})]})}),(0,e.jsx)(f.u,{showProRibbonTips:!0,access:"canSeeEnableCe",children:function(d){var l=d.canSeeEnableCe;return(0,e.jsx)(n.Z,{ghost:!0,title:(0,e.jsx)(Ze.Z,{}),subTitle:"\u76AE\u80A4",children:(0,e.jsx)(pe.Z,{split:!0,style:{overflow:"hidden"},grid:{column:6},pagination:{pageSize:36,current:$,onChange:function(M,p){Z(M)}},dataSource:Object.keys(fe()).map(function(C){return{label:C,value:C,data:fe()[C]}}),renderItem:function(M,p){var Q=M.data,z=(0,e.jsxs)(Re.Z,{style:{backgroundColor:Q.background,color:Q.foreground,textAlign:"center",cursor:l?"not-allowed":"pointer",borderRadius:0},onClick:function(){if(!l){var te;(te=I.current)===null||te===void 0||te.setFieldValue("theme",M.data),v(M.label)}},hoverable:!0,children:[(0,e.jsx)(Ue.Z,{wrap:!0,gutter:[2,2],justify:"center",align:"middle",children:je.nS.filter(function(ue){return Q[ue]!=""}).map(function(ue){return(0,e.jsx)(We.Z,{style:{backgroundColor:Q[ue],padding:8}},ue)})}),(0,e.jsx)("div",{style:{paddingTop:5},children:M.label})]});return(0,e.jsx)(pe.Z.Item,{style:{margin:0},children:H==M.label?(0,e.jsx)(we.Z.Ribbon,{text:"Checked",children:z}):z},p)}})})}})]})})}]})}var qe=a(90078),ea=a(92398);function aa(){var x=(0,t.useState)("user"),P=u()(x,2),I=P[0],B=P[1],m=(0,Y.useAccess)(),q=(0,Y.useLocation)();return(0,t.useEffect)(function(){q.state&&B(q.state.tag)},[q.state]),(0,e.jsx)(qe._z,{children:(0,e.jsx)(n.Z,{children:(0,e.jsx)(ea.Z,{activeKey:I,onChange:function(X){B(X)},items:[{key:"user",label:"\u767B\u5F55\u914D\u7F6E",children:(0,e.jsx)(Te,{})},{key:"theme",label:"\u754C\u9762\u914D\u7F6E",children:(0,e.jsx)(Ye,{})},{key:"notice",label:"\u901A\u77E5\u670D\u52A1",children:(0,e.jsx)(Se,{}),disabled:m.canSeeEnableCe}]})})})}},97961:function(ae,L,a){a.d(L,{GH:function(){return G},MF:function(){return c},_2:function(){return K},fN:function(){return U},ii:function(){return r},vC:function(){return o}});var R=a(15009),u=a.n(R),k=a(99289),F=a.n(k),N=a(82346),r=[{name:"amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"i386",arch:"386",search:[]},{name:"arm/v6",arch:"arm",search:[]},{name:"arm/v7",arch:"arm",search:[]},{name:"arm/v8",arch:"arm64",search:[]},{name:"ppc64le",arch:"ppc64le",search:[]},{name:"riscv64",arch:"riscv64",search:[]}];function U(t){return b.apply(this,arguments)}function b(){return b=F()(u()().mark(function t(T){return u()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,N.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:T}));case 1:case"end":return f.stop()}},t)})),b.apply(this,arguments)}function o(t){return _.apply(this,arguments)}function _(){return _=F()(u()().mark(function t(T){return u()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,N.request)("/api/app/image/import-by-container-tar",{method:"POST",data:T}));case 1:case"end":return f.stop()}},t)})),_.apply(this,arguments)}function G(t){return n.apply(this,arguments)}function n(){return n=F()(u()().mark(function t(T){return u()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,N.request)("/api/app/image/import-by-image-tar",{method:"POST",data:T}));case 1:case"end":return f.stop()}},t)})),n.apply(this,arguments)}function K(t){return s.apply(this,arguments)}function s(){return s=F()(u()().mark(function t(T){return u()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,N.request)("/api/common/attach/delete",{method:"POST",data:T});case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},t)})),s.apply(this,arguments)}function c(){return D.apply(this,arguments)}function D(){return D=F()(u()().mark(function t(){return u()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.abrupt("return",(0,N.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return W.stop()}},t)})),D.apply(this,arguments)}}}]);
