"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4316],{36435:function(Be,te,a){var oe=a(15009),d=a.n(oe),de=a(64599),p=a.n(de),F=a(99289),ce=a.n(F),ae=a(9783),D=a.n(ae),se=a(5574),b=a.n(se),Q=a(67294),me=a(184),ge=a(38345),fe=a(97269),_e=a(97321),ie=a(97462),J=a(64317),$=a(5966),Pe=a(86615),z=a(68602),Y=a(83622),I=a(83403),Se=a(24963),k=a(1699),_=a(29177),O=a(1883),V=a(43425),l=a(44349),Ie=a(3616),Me=a(36146),S=a(85893),Ke=(0,Q.forwardRef)(function(G,re){var X=(0,Q.useState)(!1),M=b()(X,2),ve=M[0],Ee=M[1],q=(0,Q.useRef)(),le=(0,Q.useContext)(Se.Z),r=le.message,$e=(0,Q.useState)([]),Ue=b()($e,2),Ce=Ue[0],A=Ue[1],U=new Me.Uo("components.permissionButton"),We=D()(D()(D()(D()(D()({},I.W6.CONTAINER,"Id"),I.W6.APPSTORE,"name"),I.W6.COMPOSE,"name"),I.W6.REGISTRY,"serverAddress"),I.W6.DOCKER_ENV,"name"),ke=D()(D()(D()(D()(D()({},I.W6.CONTAINER,"name"),I.W6.APPSTORE,"name"),I.W6.COMPOSE,"name"),I.W6.REGISTRY,"title"),I.W6.DOCKER_ENV,"title"),Ae=We[G.type],xe=ke[G.type],we=G.selected.map(function(y){return y[We[G.type]]});return Q.useEffect(function(){if(ve){if(!G.selected||G.selected.length==0){r.error(Me.FD.format("message.noDataSelect")),Ee(!1);return}(0,z.dP)({permission:{uri:G.type,key:Ae,value:we}}).then(function(y){var E;(E=q.current)===null||E===void 0||E.setFieldValue("list",Object.keys(y.data.list).map(function(R){return{name:R,type:y.data.list[R].type,users:y.data.list[R].users}}))}),(0,z.lE)().then(function(y){var E,R=(E=y.data)===null||E===void 0||(E=E.list)===null||E===void 0?void 0:E.map(function(P){return{label:P.username,value:P.username}});A(R)})}},[ve]),(0,S.jsx)(k.u,{access:["canSeeEnableEe","canSeeFounder","canSeeManage"],children:(0,S.jsxs)(me.a,{name:"create",title:U.format("drawerTitle"),open:ve,onOpenChange:function(E){if(!E){var R;(R=q.current)===null||R===void 0||R.resetFields()}Ee(E)},drawerProps:{forceRender:!0,width:Ie.R_},formRef:q,trigger:(0,S.jsx)(Y.ZP,{icon:(0,S.jsx)(_.Z,{}),children:U.format("drawerTriggerButton")}),onFinish:function(){var y=ce()(d()().mark(function E(R){var P,C,u;return d()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:P=p()(R.list),j.prev=1,P.s();case 3:if((C=P.n()).done){j.next=9;break}return u=C.value,j.next=7,(0,z.Db)({usernames:u.users,permissionType:u.type,permission:{uri:G.type,key:Ae,showKey:xe,value:[u.name]}});case 7:j.next=3;break;case 9:j.next=14;break;case 11:j.prev=11,j.t0=j.catch(1),P.e(j.t0);case 14:return j.prev=14,P.f(),j.finish(14);case 17:r.success(Me.FD.format("finish")),Ee(!1),G.onSuccess();case 20:case"end":return j.stop()}},E,null,[[1,11,14,17]])}));return function(E){return y.apply(this,arguments)}}(),children:[(0,S.jsxs)(ge.Z,{ghost:!0,title:(0,S.jsx)(O.Z,{}),subTitle:U.format("batchTitle"),children:[(0,S.jsx)(fe.A.Item,{name:"type",style:{marginBottom:0},children:(0,S.jsx)(_e.Z.Group,{defaultValue:"admin",onChange:function(E){var R,P,C=(R=q.current)===null||R===void 0?void 0:R.getFieldValue("list");C.forEach(function(u){u.type=E,u.users=[]}),(P=q.current)===null||P===void 0||P.setFieldValue("list",C)},children:["admin","restricted","public"].map(function(y){return(0,S.jsx)(_e.Z,{style:{width:240},title:U.format("dataTypeOption.".concat(y)),description:U.format("dataTypeOptionDesc.".concat(y)),value:y},y)})})}),(0,S.jsx)(ie.Z,{name:["type"],children:function(E){var R=E.type;if(R==="restricted")return(0,S.jsx)(J.Z,{mode:"multiple",name:"usernames",label:U.format("formUsernames"),onChange:function(C){var u,x,j=(u=q.current)===null||u===void 0?void 0:u.getFieldValue("list");j.forEach(function(w){w.users=C}),(x=q.current)===null||x===void 0||x.setFieldValue("list",j)},rules:[{required:!0}],request:ce()(d()().mark(function P(){var C,u,x;return d()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(!(Ce.length>0)){w.next=2;break}return w.abrupt("return",Ce);case 2:return w.next=4,(0,z.lE)();case 4:return u=w.sent,x=(C=u.data)===null||C===void 0||(C=C.list)===null||C===void 0?void 0:C.map(function(Ze){return{label:Ze.username,value:Ze.username}}),A(x),w.abrupt("return",x);case 8:case"end":return w.stop()}},P)}))})}})]}),(0,S.jsx)(ge.Z,{ghost:!0,title:(0,S.jsx)(V.Z,{}),subTitle:U.format("dataTitle"),children:(0,S.jsx)(l.Z,{name:"list",hideCopyButton:!0,gap:10,items:[{name:"name",label:U.format("dataName"),render:function(E,R,P){var C=P.getCurrentRowData();return(0,S.jsx)($.Z,{disabled:!0,label:U.format("dataName"),width:"sm",name:"name"})}},{name:"type",label:U.format("dataType"),render:function(E,R,P){var C=P.getCurrentRowData();return(0,S.jsx)(Pe.Z.Group,{label:U.format("dataType"),name:"type",radioType:"button",options:["admin","public","restricted"].map(function(u){return{label:U.format("dataTypeOption.".concat(u)),value:u}})})}},{name:"users",label:U.format("dataUsers"),render:function(E,R,P){return(0,S.jsx)(ie.Z,{name:["type"],children:function(u){var x=u.type;if(x=="restricted")return(0,S.jsx)(J.Z,{width:"sm",mode:"tags",name:"users",label:U.format("dataUsers"),options:Ce})}})}}]})})]})})});te.Z=Ke},14668:function(Be,te,a){a.r(te),a.d(te,{default:function(){return ua}});var oe=a(64599),d=a.n(oe),de=a(15009),p=a.n(de),F=a(19632),ce=a.n(F),ae=a(99289),D=a.n(ae),se=a(5574),b=a.n(se),Q=a(90078),me=a(83622),ge=a(34041),fe=a(56729),_e=a(97269),ie=a(62370),J=a(42075),$=a(25593),Pe=a(40411),z=a(96074),Y=a(83062),I=a(84567),Se=a(50136),k=a(82346),_=a(1883),O=a(89035),V=a(95591),l=a(86548),Ie=a(74842),Me=a(87784),S=a(33160),Ke=a(30159),G=a(94359),re=a(13822),X=a(80821),M=a(67294),ve=a(62597),Ee=a(87662),q=a(16165),le=a(5251),r=a(85893),$e=function(){return(0,r.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18403",children:(0,r.jsx)("path",{d:"M224 192v64H96v576h128v64h64v-64h64v64h64v-64h64v64h64v-64h64v64h64v-64h64v64h64v-64h128V256h-128V192h-64v64h-64V192h-64v64h-64V192h-64v64h-64V192h-64v64H288V192z m-64 128h704v448H160z m96 64c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32zM256 512c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m512 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32zM256 640c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z","p-id":"18404"})})},Ue=function(){return(0,r.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18546",children:(0,r.jsx)("path",{d:"M64 224v576h416v-32c0-17.76 14.24-32 32-32 17.76 0 32 14.24 32 32v32h416V224z m64 64h768v288H128z m64 64v160h192v-160z m224 0v160h192v-160z m224 0v160h192v-160zM256 416h64v32H256z m224 0h64v32h-64z m224 0h64v32h-64zM128 640h768v96h-300.992c-14.144-35.52-42.752-64-83.008-64-40.256 0-68.864 28.48-83.008 64H128z","p-id":"18547"})})};function Ce(B){var pe,T,be,je,Te,Le;return(0,r.jsx)(r.Fragment,{children:B.value&&B.value.memory&&B.value.memory.out>0?(0,r.jsxs)(J.Z,{children:[(0,r.jsxs)(Y.Z,{title:"Cpu: ".concat((pe=B.value)===null||pe===void 0?void 0:pe.cpu.toFixed(2),"%"),children:[(0,r.jsx)(q.Z,{component:$e,style:{width:15,lineHeight:20}})," ","".concat((T=B.value)===null||T===void 0?void 0:T.cpu.toFixed(2),"%")]}),(0,r.jsxs)(Y.Z,{title:"Memory: ".concat((0,le.FI)((be=B.value)===null||be===void 0?void 0:be.memory.in)," / ").concat((0,le.FI)((je=B.value)===null||je===void 0?void 0:je.memory.out)),children:[(0,r.jsx)(q.Z,{component:Ue,style:{width:15,lineHeight:20}})," ","".concat((((Te=B.value)===null||Te===void 0?void 0:Te.memory.in)/((Le=B.value)===null||Le===void 0?void 0:Le.memory.out)*100).toFixed(2),"%")]})]}):""})}var A=a(67255),U=a(37413),We=a(46357),ke=a(99922),Ae=a(83403),xe=a(20578),we=a(99861),y=a(78914),E=a(29453),R=a(8287),P=a(93362),C=a(78451),u=a(36146),x=a(36435),j=a(1699),w=a(96486),Ze=a.n(w),ue=a(55375);function ua(){var B=(0,k.useLocation)(),pe=(0,k.useAccess)(),T=(0,M.useRef)(),be=(0,M.useState)(""),je=b()(be,2),Te=je[0],Le=je[1],oa=(0,M.useState)(1),He=b()(oa,2),H=He[0],ee=He[1],da=(0,M.useState)([]),Qe=b()(da,2),De=Qe[0],ca=Qe[1],ma=(0,M.useState)(),Je=b()(ma,2),Oe=Je[0],fa=Je[1],va=(0,M.useState)([]),Ye=b()(va,2),Xe=Ye[0],pa=Ye[1],qe=(0,M.useRef)(),ea=(0,M.useRef)(),aa=(0,M.useRef)(),ra=(0,M.useRef)(),na=(0,M.useRef)(),Ne=(0,M.useRef)(),ta=(0,M.useRef)(),sa=new u.Uo("components.appDetail.appDetailQuickManage");return(0,M.useEffect)(function(){(0,Ee.K3)().then(function(h){var m;Le((m=h.data.serverUrl)!==null&&m!==void 0?m:"")}),!pe.canSeeEnableCe&&(0,xe.q)().then(function(h){fa(h.data)})},[]),(0,M.useEffect)(function(){var h;!((h=T.current)===null||h===void 0)&&h.reloadAndRest&&T.current.reloadAndRest().then(function(){var m;!((m=T.current)===null||m===void 0)&&m.setPageInfo&&T.current.setPageInfo({current:(0,A.G$)(ue.Dc)})})},[H]),(0,M.useEffect)(function(){var h;B.state&&!((h=T.current)===null||h===void 0)&&h.setPageInfo&&T.current.setPageInfo({current:(0,A.G$)(ue.Dc)})},[B.state,T.current]),(0,r.jsxs)(Q._z,{header:{extra:[(0,r.jsx)(j.u,{access:"canSeeContainerListManageCreate",children:(0,r.jsx)(k.Link,{to:"/app/create/image",children:(0,r.jsx)(me.ZP,{type:"primary",children:u.Ob.format("container.create")})})},"create")]},children:[(0,r.jsx)(We.Z,{ref:qe,onFinish:function(){ee(H+1)},onUpgradeFinish:function(){ee(H+1)}}),(0,r.jsx)(ke.Z,{showFileExplorer:!0,ref:ea}),(0,r.jsx)(R.Z,{ref:aa}),(0,r.jsx)(we.Z,{ref:Ne,finishAutoHide:!0}),(0,r.jsx)(y.Z,{ref:ta}),(0,r.jsx)(P.Z,{showConsole:!0,ref:ra}),(0,r.jsx)(fe.Z,{actionRef:T,scroll:{x:"max-content"},onChange:function(m,s,g){!Ze().isArray(g)&&(0,A.LX)(ue.Dc,g.columnKey,g.order),(0,A.MJ)(ue.Dc,m.current)},columns:[{key:"title",title:u.FD.format("listTitle"),width:300,dataIndex:"siteTitle",sorter:function(m,s){return m.Names[0].localeCompare(s.Names[0])},defaultSortOrder:(0,A.rj)(ue.Dc,"title"),sortDirections:A.h5,render:function(m,s,g,f,n){var t=(0,le.fi)(s.Names[0],"/");return(0,r.jsxs)(J.Z,{direction:"vertical",children:[(0,r.jsx)($.Z.Link,{onClick:function(){var o;(o=qe.current)===null||o===void 0||o.show(s.Id)},children:(0,r.jsx)(C.Z,{content:t})}),!pe.canSeeEnableCe&&Oe&&Oe.container&&Oe.container.find(function(i){return i.id==s.Id})&&(0,r.jsx)(Pe.Z,{count:"new"})]})}},{title:u.FD.format("listTag"),hidden:!0,dataIndex:"tag",renderFormItem:function(m,s,g,f){return(0,r.jsx)(ge.Z,{onSelect:function(t){g.submit()},onDeselect:function(){g.submit()},mode:"multiple",popupMatchSelectWidth:!1,options:Xe&&Object.entries(Xe.reduce(function(n,t){var i=t.group||"tag";return n[i]||(n[i]=[]),n[i].push(t),n},{})).map(function(n){var t=b()(n,2),i=t[0],o=t[1];return{label:i,title:i,options:o.map(function(L){return{label:L.tag,value:L.tag}})}})})}},{key:"ports",title:u.FD.format("listAccess"),tooltip:u.FD.format("listAccessTip"),width:150,dataIndex:"ports",search:!1,render:function(m,s,g,f){var n,t=[],i=[];return s!=null&&s.Ports&&s.Ports.map(function(o,L){o.PublicPort?t.push(o):i.push(o)}),(0,r.jsx)(U.Z,{publicPort:t,privatePort:i,domain:(n=s.DPExtend)===null||n===void 0?void 0:n.domainList,serverIp:Te})}},{title:u.FD.format("listUsage"),width:200,search:!1,key:"usage",sorter:function(m,s){var g={},f={};if(De){var n,t;g=(n=De.find(function(i){return m.Id.startsWith(i.container)}))!==null&&n!==void 0?n:{},f=(t=De.find(function(i){return s.Id.startsWith(i.container)}))!==null&&t!==void 0?t:{}}return JSON.stringify(g).localeCompare(JSON.stringify(f))},defaultSortOrder:(0,A.rj)(ue.Dc,"usage"),sortDirections:A.h5,render:function(m,s,g,f,n){if(!De||De.length<=0)return"";var t={};return De.filter(function(i){s.Id.indexOf(i.container)==0&&(t=i)}),(0,r.jsx)(Ce,{value:t})}},{title:u.FD.format("listRunStatus"),key:"status",dataIndex:["container","status"],search:!1,width:130,render:function(m,s,g,f){var n="",t={};if(s.State.includes("(")){var i=s.State.indexOf("(");i>-1&&(n="compose.".concat(s.State.slice(0,i))),t={count:s.State.slice(i+1,s.State.length-1)}}else n="container.".concat(s.State),s.Status.indexOf("(healthy)")>-1?n="container.healthy":s.Status.indexOf("(unhealthy)")>-1&&(n="container.unhealthy");return(0,r.jsx)(G.Z,{statusValue:t,status:n,tip:"".concat(s.State," ").concat(s.Status)})}},{title:u.FD.format("listImageName"),key:"image",search:!1,width:150,render:function(m,s,g,f){return(0,r.jsx)("span",{style:{wordBreak:"break-word"},children:(0,r.jsx)($.Z.Link,{onClick:function(){var t;(t=ta.current)===null||t===void 0||t.show(s.Image)},children:s.Image})})}},{key:"created",search:!1,title:u.FD.format("listCreatedAt"),width:170,dataIndex:["Created"],render:function(m,s,g,f,n){return(0,le.ZM)(s.Created*1e3)},sorter:function(m,s){return new Date(m.Created*1e3).toISOString().localeCompare(new Date(s.Created*1e3).toISOString())},defaultSortOrder:(0,A.rj)(ue.Dc,"created"),sortDirections:A.h5},{title:u.FD.format("listManage"),valueType:"option",key:"option",width:200,fixed:"right",hidden:!pe.canSeeContainerListManage,render:function(m,s,g,f){return(0,r.jsxs)(J.Z,{split:(0,r.jsx)(z.Z,{type:"vertical"}),children:[(0,r.jsx)($.Z.Link,{onClick:function(){var t;(t=aa.current)===null||t===void 0||t.show(s.Id)},children:(0,r.jsx)(Y.Z,{title:u.FD.format("listManageLog"),children:(0,r.jsx)(_.Z,{})})},"log"),(s.State=="running"||s.State=="healthy"||s.State=="unhealthy")&&(0,r.jsx)($.Z.Link,{onClick:function(){var t;(t=ea.current)===null||t===void 0||t.show({url:"/console/container/".concat(s.Id),title:(0,le.fi)(s.Names[0],"/")})},children:(0,r.jsx)(Y.Z,{title:u.FD.format("listManageConsole"),children:(0,r.jsx)(O.Z,{})})},"console"),(s.State=="running"||s.State=="healthy"||s.State=="unhealthy")&&(0,r.jsx)($.Z.Link,{onClick:function(){var t,i=s.Names.find(function(o){if(o.indexOf("/")===0)return o});(t=ra.current)===null||t===void 0||t.showContainer(i!=null?i:s.Names[0])},children:(0,r.jsx)(Y.Z,{title:u.FD.format("listManageFileExplorer"),children:(0,r.jsx)(V.Z,{})})},"file"),(0,r.jsx)(k.Link,{to:"/app/create/image?id="+s.Id,children:(0,r.jsx)(Y.Z,{title:u.FD.format("listManageEdit"),children:(0,r.jsx)(l.Z,{})})},"edit")]})}}],rowKey:"Id",request:function(){var h=D()(p()().mark(function m(s,g,f){var n,t,i,o,L,e;return p()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,re.IE)({tag:s.title,siteTitle:s.title,md5:s.Id});case 2:return t=K.sent,i="",o=[],K.next=7,(0,E.e1)({showCompose:!0,showSwarm:!0});case 7:return L=K.sent,pa(L.data.list),e=[],e=t.data.list.map(function(c){var Z=t.data.siteList.find(function(W){return W.containerInfo&&W.containerInfo.Id==c.Id&&W.siteTitle!=""});if(Z&&c.Names.unshift(Z.siteTitle),c.Labels&&c.Labels[ve.fu]&&c.Names.unshift(c.Labels[ve.fu]),c.DPExtend={domainList:t.data.domainList.filter(function(W,Re){return c.Names.includes(W.containerId)}).map(function(W){return W.setting.enableSSL?"https://"+W.serverName:"http://"+W.serverName}),tag:[]},c.Labels&&c.Labels["com.docker.compose.project"]){var N;(N=c.DPExtend.tag)===null||N===void 0||N.push((0,le.fi)(c.Labels["com.docker.compose.project"],"dpanel-c-"))}if(c.Labels&&c.Labels["com.docker.swarm.service.name"]){var ne;(ne=c.DPExtend.tag)===null||ne===void 0||ne.push(c.Labels["com.docker.swarm.service.name"])}return L.data.list.forEach(function(W){W.item&&W.item.forEach(function(Re){if(c.Names.includes(Re.name)&&c.DPExtend){var he;(he=c.DPExtend.tag)===null||he===void 0||he.push(W.tag)}})}),c}),s.tag&&e.forEach(function(c){var Z;!((Z=c.DPExtend)===null||Z===void 0)&&Z.tag&&c.DPExtend.tag.forEach(function(N){s.tag.includes(N)&&o.push.apply(o,ce()(c.Names))})}),i!=""?e=e.filter(function(c){var Z=!1;return c.Names.forEach(function(N){N.startsWith("/"+i)&&(Z=!0)}),Z}):o&&o.length>0&&(e=e.filter(function(c){var Z=!1;return c.Names.forEach(function(N){o.includes(N)&&(Z=!0)}),Z})),(0,Ee.Cz)({follow:!1}).then(function(c){ca(c.data.list)}),K.abrupt("return",{data:(n=e)!==null&&n!==void 0?n:[],success:!0,total:t.data.list.length});case 15:case"end":return K.stop()}},m)}));return function(m,s,g){return h.apply(this,arguments)}}(),rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(m){var s=m.selectedRowKeys,g=m.selectedRows;return(0,r.jsxs)(J.Z,{size:16,wrap:!0,children:[(0,r.jsx)(x.Z,{type:Ae.W6.CONTAINER,selected:g!=null?g:[],onSuccess:function(){return ee(H+1),!0}},"dataPermission"),(0,r.jsxs)(j.u,{access:"canSeeContainerList",space:{size:16,wrap:!0},children:[(0,r.jsx)(X.Z,{icon:(0,r.jsx)(Ie.Z,{}),action:D()(p()().mark(function f(){var n,t,i,o;return p()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=d()(s),e.prev=1,n.s();case 3:if((t=n.n()).done){e.next=10;break}return i=t.value,e.next=7,(0,re.IW)({md5:i,operate:"start"});case 7:o=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},f,null,[[1,12,15,18]])})),onSuccess:function(){return ee(H+1),!0},children:u.FD.format("listManageStart")}),(0,r.jsx)(X.Z,{action:D()(p()().mark(function f(){var n,t,i,o;return p()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=d()(s),e.prev=1,n.s();case 3:if((t=n.n()).done){e.next=10;break}return i=t.value,e.next=7,(0,re.IW)({md5:i,operate:"stop"});case 7:o=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},f,null,[[1,12,15,18]])})),icon:(0,r.jsx)(Me.Z,{}),onSuccess:function(){return ee(H+1),!0},children:u.FD.format("listManageStop")}),(0,r.jsx)(X.Z,{action:D()(p()().mark(function f(){var n,t,i,o;return p()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=d()(s),e.prev=1,n.s();case 3:if((t=n.n()).done){e.next=10;break}return i=t.value,e.next=7,(0,re.IW)({md5:i,operate:"restart"});case 7:o=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},f,null,[[1,12,15,18]])})),onSuccess:function(){return ee(H+1),!0},icon:(0,r.jsx)(S.Z,{}),children:u.FD.format("listManageRestart")}),(0,r.jsx)(X.Z,{action:D()(p()().mark(function f(){var n,t,i,o;return p()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=d()(s),e.prev=1,n.s();case 3:if((t=n.n()).done){e.next=10;break}return i=t.value,e.next=7,(0,re.IW)({md5:i,operate:"pause"});case 7:o=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},f,null,[[1,12,15,18]])})),onSuccess:function(){return ee(H+1),!0},icon:(0,r.jsx)(Ke.Z,{}),children:u.FD.format("listManagePause")}),(0,r.jsx)(X.Z,{action:D()(p()().mark(function f(){var n,t,i,o;return p()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=d()(s),e.prev=1,n.s();case 3:if((t=n.n()).done){e.next=10;break}return i=t.value,e.next=7,(0,re.IW)({md5:i,operate:"unpause"});case 7:o=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},f,null,[[1,12,15,18]])})),onSuccess:function(){return ee(H+1),!0},icon:(0,r.jsx)(Ie.Z,{}),children:u.FD.format("listManageUnpause")})]}),(0,r.jsx)(z.Z,{}),(0,r.jsx)(j.u,{showProTips:!0,access:["canSeeEnableCe","canSeeContainerListManageOp"],children:function(n){var t=n.canSeeEnableCe,i=n.canSeeContainerListManageOp;return i&&(0,r.jsx)(X.Z,{disabled:t,type:"primary",action:D()(p()().mark(function o(){var L,e,ye,K,c,Z,N,ne,W,Re,he,ze,ia;return p()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(g){v.next=2;break}return v.abrupt("return",!1);case 2:ye=[],K=d()(g),v.prev=4,Z=p()().mark(function ha(){var Ve,la,Fe;return p()().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:la=c.value,Fe=Oe==null||(Ve=Oe.container)===null||Ve===void 0?void 0:Ve.find(function(ga){return ga.id==la.Id}),Fe&&!ye.includes(Fe.image)&&ye.push(Fe.image);case 3:case"end":return Ge.stop()}},ha)}),K.s();case 7:if((c=K.n()).done){v.next=11;break}return v.delegateYield(Z(),"t0",9);case 9:v.next=7;break;case 11:v.next=16;break;case 13:v.prev=13,v.t1=v.catch(4),K.e(v.t1);case 16:return v.prev=16,K.f(),v.finish(16);case 19:if(ye){v.next=21;break}return v.abrupt("return",!1);case 21:return v.next=23,(L=Ne.current)===null||L===void 0?void 0:L.pull(ye);case 23:(e=Ne.current)===null||e===void 0||e.finish(),ne=d()(g),v.prev=25,ne.s();case 27:if((W=ne.n()).done){v.next=34;break}return ia=W.value,v.next=31,(0,re.RF)({md5:(Re=ia.Id)!==null&&Re!==void 0?Re:"",imageTag:"",enableBak:(he=(ze=na.current)===null||ze===void 0?void 0:ze.getFieldValue("enableBak"))!==null&&he!==void 0?he:!1});case 31:N=v.sent;case 32:v.next=27;break;case 34:v.next=39;break;case 36:v.prev=36,v.t2=v.catch(25),ne.e(v.t2);case 39:return v.prev=39,ne.f(),v.finish(39);case 42:return v.abrupt("return",N);case 43:case"end":return v.stop()}},o,null,[[4,13,16,19],[25,36,39,42]])})),onSuccess:function(){return ee(H+1),!0},confirm:(0,r.jsxs)(J.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,r.jsx)($.Z.Text,{children:sa.format("upgradeConfirm")}),(0,r.jsx)(_e.A,{formRef:na,submitter:!1,layout:"inline",children:(0,r.jsx)(ie.Z,{name:"enableBak",valuePropName:"checked",children:(0,r.jsx)(I.Z,{children:sa.format("upgradeConfirmEnableBak")})})})]}),children:u.FD.format("listManageUpgradeBatch")})}}),(0,r.jsx)(j.u,{access:"canSeeContainerListManageDelete",children:(0,r.jsx)(X.Z,{danger:!0,type:"primary",action:D()(p()().mark(function f(){var n,t,i,o;return p()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=d()(s),e.prev=1,t.s();case 3:if((i=t.n()).done){e.next=12;break}return o=i.value,e.next=7,(0,ve.Ct)({md5:o,deleteImage:!1,deleteVolume:!1});case 7:return n=e.sent,e.next=10,(0,E.rn)({name:o});case 10:e.next=3;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),t.e(e.t0);case 17:return e.prev=17,t.f(),e.finish(17);case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}},f,null,[[1,14,17,20]])})),onSuccess:function(){var n,t;return!((n=T.current)===null||n===void 0)&&n.reloadAndRest&&((t=T.current)===null||t===void 0||t.reloadAndRest()),!0},onError:function(){var n,t;return!((n=T.current)===null||n===void 0)&&n.reload&&((t=T.current)===null||t===void 0||t.reload()),!0},confirm:"notification.confirm.title",children:u.FD.format("listManageDeleteBatch")})})]})},pagination:(0,A.Oh)(),search:{collapsed:!1},tableExtraRender:function(){return(0,r.jsx)(Se.Z,{mode:"horizontal",selectedKeys:["list"],items:[{label:(0,r.jsx)(k.Link,{to:"/app/list",replace:!0,children:u.Ob.format("container.list")}),key:"list"},{label:(0,r.jsx)(k.Link,{to:"/app/list/recycle",replace:!0,children:u.Ob.format("container.list.recycle")}),key:"recycle"}]})},toolBarRender:function(){return[(0,r.jsx)(j.u,{access:"canSeeContainerListManageDelete",children:(0,r.jsx)(X.Z,{action:function(){return(0,re.KK)()},onSuccess:function(){return ee(H+1),!0},onError:function(){var s,g;return!((s=T.current)===null||s===void 0)&&s.reset&&((g=T.current)===null||g===void 0||g.reset()),!0},tips:u.FD.format("listManagePruneTip"),confirm:"notification.confirm.title",children:u.FD.format("listManagePrune")})},"clear")]},columnsState:(0,A.j_)(ue.Dc)})]})}},62597:function(Be,te,a){a.d(te,{$G:function(){return D},Ct:function(){return Pe},Tb:function(){return ge},XH:function(){return _e},cl:function(){return Q},fp:function(){return b},fu:function(){return ae},iE:function(){return J},xb:function(){return Y},ze:function(){return Se}});var oe=a(15009),d=a.n(oe),de=a(99289),p=a.n(de),F=a(82346),ce="com.dpanel.container.description",ae="com.dpanel.container.title";function D(_){return se.apply(this,arguments)}function se(){return se=p()(d()().mark(function _(O){return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,F.request)("/api/app/site/create-by-image",{method:"POST",data:O}));case 1:case"end":return l.stop()}},_)})),se.apply(this,arguments)}var b={EnvValueRuleRequired:1,EnvValueRuleDisabled:2,EnvValueTypeNumber:1024,EnvValueTypeText:2048,EnvValueTypeSelect:4096,EnvValueTypeSelectMultiple:8192};function Q(_){return me.apply(this,arguments)}function me(){return me=p()(d()().mark(function _(O){return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,F.request)("/api/app/site/get-list",{method:"POST",data:O}));case 1:case"end":return l.stop()}},_)})),me.apply(this,arguments)}function ge(_){return fe.apply(this,arguments)}function fe(){return fe=p()(d()().mark(function _(O){return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return O.download=!1,l.next=3,(0,F.request)("/api/app/log/run",{method:"POST",data:O});case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},_)})),fe.apply(this,arguments)}function _e(_){return ie.apply(this,arguments)}function ie(){return ie=p()(d()().mark(function _(O){return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return O.download=!0,l.next=3,(0,F.request)("/api/app/log/run",{method:"POST",data:O,responseType:"blob"});case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},_)})),ie.apply(this,arguments)}function J(_){return $.apply(this,arguments)}function $(){return $=p()(d()().mark(function _(O){return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return O.id=String(O.id),l.next=3,(0,F.request)("/api/app/site/get-detail",{data:O,method:"POST"});case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},_)})),$.apply(this,arguments)}function Pe(_){return z.apply(this,arguments)}function z(){return z=p()(d()().mark(function _(O){return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,F.request)("/api/app/container/delete",{method:"POST",data:O}));case 1:case"end":return l.stop()}},_)})),z.apply(this,arguments)}function Y(_){return I.apply(this,arguments)}function I(){return I=p()(d()().mark(function _(O){return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,F.request)("/api/app/site/delete",{method:"POST",data:O}));case 1:case"end":return l.stop()}},_)})),I.apply(this,arguments)}function Se(_){return k.apply(this,arguments)}function k(){return k=p()(d()().mark(function _(O){return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,F.request)("/api/app/container/ignore",{method:"POST",data:O}));case 1:case"end":return l.stop()}},_)})),k.apply(this,arguments)}},20578:function(Be,te,a){a.d(te,{q:function(){return ce}});var oe=a(15009),d=a.n(oe),de=a(99289),p=a.n(de),F=a(82346);function ce(){return ae.apply(this,arguments)}function ae(){return ae=p()(d()().mark(function D(){return d()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,F.request)("/api/pro/container-upgrade/get-all-list",{method:"POST"});case 2:return b.abrupt("return",b.sent);case 3:case"end":return b.stop()}},D)})),ae.apply(this,arguments)}}}]);
