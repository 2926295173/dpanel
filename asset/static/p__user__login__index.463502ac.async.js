"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4037],{24963:function(Z,v,e){var g=e(67294),l=(0,g.createContext)({});v.Z=l},52756:function(Z,v,e){e.r(v),e.d(v,{default:function(){return A},getLang:function(){return M}});var g=e(82346),l=e(31418),w=e(26058),f=e(85137),T=e(24963),x=e(65913),E=e(67294),j=e(85893);function M(d,c,m){var s=(0,g.getLocale)();m!=null&&m.XK&&(s="zh-XK");var h=(0,g.getIntl)(s).formatMessage({id:d},c);return h}function A(){var d=(0,E.useRef)(),c=(0,g.useIntl)(),m=function(t){for(var a=arguments.length,n=new Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];h.notification[t]({message:c.formatMessage({id:"notification.title."+t}),description:n.join(" "),placement:"topRight"})},s=function(t){for(var a=arguments.length,n=new Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];h.message[t](n.join(" "))},h=l.Z.useApp(),O=(0,g.useModel)("@@initialState"),y=O.initialState,W=O.loading,N=O.error,b=O.refresh,U=O.setInitialState,_=(0,g.useModel)("subscriber");return y!=null&&y.user.username&&_.addDataHandler("user:permission:".concat(y==null?void 0:y.user.username),function(u){b()}),(0,j.jsx)(w.Z,{children:(0,j.jsx)(T.Z.Provider,{value:{notice:{success:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];m.apply(void 0,["success"].concat(a))},error:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];m.apply(void 0,["error"].concat(a))},warning:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];m.apply(void 0,["warning"].concat(a))},info:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];m.apply(void 0,["info"].concat(a))},destroy:function(){h.notification.destroy()}},message:{success:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];s.apply(void 0,["success"].concat(a))},error:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];s.apply(void 0,["error"].concat(a))},warning:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];s.apply(void 0,["warning"].concat(a))},info:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];s.apply(void 0,["info"].concat(a))},loading:function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];s.apply(void 0,["loading"].concat(a))},destroy:function(){h.message.destroy()}},loading:{show:function(){d.current&&d.current.show()},destroy:function(){d.current&&d.current.destroy()}},lang:function(t,a){return c.formatMessage({id:t},a)}},children:(0,j.jsxs)(x.Z,{ref:d,children:[(0,j.jsx)(g.Outlet,{}),(0,j.jsx)(f.Z.BackTop,{duration:10,style:{bottom:100}})]})},W?"1":"2")})}},65913:function(Z,v,e){var g=e(5574),l=e.n(g),w=e(74330),f=e(67294),T=e(85893),x=(0,f.forwardRef)(function(E,j){(0,f.useImperativeHandle)(j,function(){return{show:function(){c(!0)},destroy:function(){c(!1)}}});var M=(0,f.useState)(!1),A=l()(M,2),d=A[0],c=A[1];return(0,T.jsx)(w.Z,{spinning:d,size:"default",children:E.children})});v.Z=x},66139:function(Z,v,e){e.r(v),e.d(v,{default:function(){return ne}});var g=e(15009),l=e.n(g),w=e(99289),f=e.n(w),T=e(5574),x=e.n(T),E=e(68602),j=e(89075),M=e(68262),A=e(82346),d=e(9361),c=e(38925),m=e(86250),s=e(25593),h=e(67294),O=e(52756),y=e(29177),W=e(88360),N=e(94149),b=e(12119),U=e(5966),_=e(97462),u=e(63434),t=e(92398),a=e(55241),n=e(42075),r=e(85893);function ee(B){var S;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.Z,{centered:!0,activeKey:B.loginType,items:[{icon:(0,r.jsx)(y.Z,{}),key:"account",label:"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55"},{icon:(0,r.jsx)(W.Z,{}),key:"register",label:"\u914D\u7F6E\u7BA1\u7406\u5458\u7528\u6237\u540D\u53CA\u5BC6\u7801"}].filter(function(D){return D.key==B.loginType})}),(0,r.jsx)(U.Z,{name:"username",fieldProps:{size:"large",prefix:(0,r.jsx)(y.Z,{className:"prefixIcon"})},placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"}]},"username"),(0,r.jsx)(U.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,r.jsx)(N.Z,{className:"prefixIcon"})},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"}]},"password"),B.showTwoFa&&(0,r.jsx)(U.Z,{name:"code",placeholder:"\u8BF7\u8F93\u5165\u53CC\u56E0\u7D20\u9A8C\u8BC1\u7801",rules:[{required:!0}],fieldProps:{maxLength:6,size:"large",prefix:(0,r.jsx)(b.Z,{className:"prefixIcon"})}}),B.loginType=="register"&&(0,r.jsx)(_.Z,{name:["password"],children:function(V){var re=V.password;return(0,r.jsx)(U.Z.Password,{fieldProps:{size:"large",prefix:(0,r.jsx)(N.Z,{className:"prefixIcon"})},placeholder:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801",name:"confirmPassword",dependencies:["password"],rules:[{required:!0,message:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801\uFF01"},function(H){var $=H.getFieldValue;return{validator:function(Q,L){return!L||$("password")===L?Promise.resolve():Promise.reject(new Error("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4"))}}}]},"confirmPassword")}}),(0,r.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,r.jsx)(u.Z,{noStyle:!0,name:"autoLogin",initialValue:!0,children:"\u4FDD\u6301\u767B\u5F55\u72B6\u6001"}),(0,r.jsx)(a.Z,{content:(0,r.jsxs)(n.Z,{direction:"vertical",size:[0,30],children:[(0,r.jsxs)("span",{children:["\u5BBF\u4E3B\u673A\u4E2D\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\uFF0C",(0,r.jsx)("a",{href:"https://dpanel.cc/#/zh-cn/install/ctrl",target:"_blank",children:(0,O.getLang)("notification.help")})]}),(0,r.jsxs)(s.Z.Text,{copyable:!0,style:{padding:10,background:"#24292f",color:"#ffffff"},children:["docker exec ",(S=B.appName)!==null&&S!==void 0?S:"dpanel"," ./dpanel user:reset -f config.yaml"]}),(0,r.jsx)("span",{})]}),children:(0,r.jsx)(s.Z.Link,{style:{float:"right"},children:"\u5FD8\u8BB0\u5BC6\u7801?"})})]})]})}var ne=function(){var B=d.Z.useToken(),S=B.token,D=(0,A.useModel)("@@initialState"),V=D.initialState,re=D.loading,H=D.error,$=D.refresh,ae=D.setInitialState,Q=(0,h.useState)({loginType:"account",appName:"dpanel"}),L=x()(Q,2),C=L[0],te=L[1],se=(0,h.useState)(),Y=x()(se,2),p=Y[0],J=Y[1],oe=(0,h.useState)(),k=x()(oe,2),I=k[0],ie=k[1],ue=(0,A.useAntdConfigSetter)(),q=(0,h.useRef)();return(0,h.useEffect)(function(){window.document.title="DPanel - Docker \u7BA1\u7406\u9762\u677F",(0,E.Nr)().then(function(){var z=f()(l()().mark(function R(i){var P;return l()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:P={loginType:"account"},i.data.showBuildName&&i.data.family!="lite"&&(P.showBuildName=!0),i.data.showRegister&&(P.loginType="register"),i.data.family=="demo"&&(P.showDemo=!0),P.appName=i.data.appName,i.data.theme&&i.data.theme.algorithm&&(localStorage.setItem("dpanel-theme",i.data.theme.algorithm),ue(function(o){var X;(X=o.theme)!==null&&X!==void 0||(o.theme={});var G=[];return i.data.theme&&(i.data.theme.algorithm=="dark"?G.push(d.Z.darkAlgorithm):G.push(d.Z.defaultAlgorithm),o.theme.algorithm=G),o})),i.data.feature.indexOf("canSeeEnableThemeUser")!=-1?(0,j.ax)().then(function(o){o.data&&o.data.themeUserConfig&&o.data.themeUserConfig.siteTitle&&(window.document.title=o.data.themeUserConfig.siteTitle),J(o.data)}):J({}),ie(i.data),te(P);case 9:case"end":return K.stop()}},R)}));return function(R){return z.apply(this,arguments)}}())},[]),(0,r.jsxs)(r.Fragment,{children:[C&&C.showBuildName&&(0,r.jsx)(c.Z,{type:"error",message:"\u60A8\u521B\u5EFA\u7684\u9762\u677F\u5BB9\u5668\u540D\u79F0\u975E\u9ED8\u8BA4\u7684 dpanel\uFF0C\u8BF7\u91CD\u5EFA\u5E76\u901A\u8FC7\u73AF\u5883\u53D8\u91CF -e APP_NAME= \u6307\u5B9A\u65B0\u7684\u5BB9\u5668\u540D\u79F0\u3002",banner:!0}),C&&C.showDemo&&(0,r.jsx)(c.Z,{type:"error",message:"\u5F53\u524D\u4E3A\u6F14\u793A\u7AD9\uFF0C\u7981\u7528 docker \u76F8\u5173\u529F\u80FD\u3002\u5E10\u53F7\u5BC6\u7801\u4E3A admin 123456",banner:!0}),(0,r.jsx)(m.Z,{justify:"center",align:"center",style:{height:"100vh",background:p&&p.themeUserConfig&&p.themeUserConfig.bgImage&&p.themeUserConfig.bgImage.src?"url(".concat(p.themeUserConfig.bgImage.src,")"):"".concat(S.colorBgElevated,"dd")},children:(0,r.jsxs)(M.U,{onFinish:function(){var z=f()(l()().mark(function R(i){var P,F;return l()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(C.loginType!="register"){o.next=3;break}return o.next=3,(0,E.AT)({username:i.username,password:i.password,confirmPassword:i.confirmPassword});case 3:return o.prev=3,o.next=6,(0,E.n$)({username:i.username,password:i.password,autoLogin:i.autoLogin,code:i.code});case 6:if(P=o.sent,!P.data.accessToken){o.next=14;break}return localStorage.setItem("token",P.data.accessToken),$(),window.location.href="/dpanel/ui",o.abrupt("return");case 14:return o.abrupt("return",!1);case 15:o.next=20;break;case 17:o.prev=17,o.t0=o.catch(3),(F=q.current)===null||F===void 0||F.resetFields(["code"]);case 20:case"end":return o.stop()}},R,null,[[3,17]])}));return function(R){return z.apply(this,arguments)}}(),containerStyle:{background:"transparent",height:"auto"},logo:"",title:p&&(0,r.jsx)("img",{src:p&&p.themeUserConfig&&p.themeUserConfig.loginLogo?p.themeUserConfig.loginLogo:"/dpanel/static/asset/logo.png",width:"350"}),subTitle:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsx)("br",{})]}),formRef:q,children:[(0,r.jsx)(ee,{showTwoFa:!!(p&&p.canSeeEnableTwoFa),loginType:C.loginType,appName:C.appName}),(0,r.jsxs)(s.Z.Paragraph,{style:{marginBottom:10,color:"#999999",textAlign:"center"},children:["\u767B\u5F55\u5373\u8868\u793A\u540C\u610F",(0,r.jsx)("a",{href:(0,O.getLang)("user.login.licenseUrl",{},{XK:I==null?void 0:I.feature.includes("canSeeEnableXk")}),target:"_blank",children:(0,O.getLang)("user.login.licenseName",{},{XK:I==null?void 0:I.feature.includes("canSeeEnableXk")})})]})]})})]})}},89075:function(Z,v,e){e.d(v,{$w:function(){return x},YQ:function(){return j},ax:function(){return A}});var g=e(15009),l=e.n(g),w=e(99289),f=e.n(w),T=e(82346);function x(){return E.apply(this,arguments)}function E(){return E=f()(l()().mark(function c(){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,T.request)("/api/pro/home/get-machine-id",{method:"POST"}));case 1:case"end":return s.stop()}},c)})),E.apply(this,arguments)}function j(){return M.apply(this,arguments)}function M(){return M=f()(l()().mark(function c(){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,T.request)("/api/pro/home/get-license-info",{method:"POST"}));case 1:case"end":return s.stop()}},c)})),M.apply(this,arguments)}function A(){return d.apply(this,arguments)}function d(){return d=f()(l()().mark(function c(){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,T.request)("/api/pro/home/login-info",{method:"POST"}));case 1:case"end":return s.stop()}},c)})),d.apply(this,arguments)}}}]);
