"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1050],{1699:function(ee,N,n){n.d(N,{u:function(){return w}});var V=n(9783),x=n.n(V),K=n(97857),Z=n.n(K),Y=n(67294),y=n(82346),H=n(40411),g=n(42075),I=n(85893),w=function(T){var J=(0,y.useAccess)(),l=Array.isArray(T.access)?T.access:[T.access],k,O=T.fallback;if(typeof T.children=="function"?(k=T.children(l.reduce(function(R,F){return Z()(Z()({},R),{},x()({},F,J[F]))},{})),k||(k=O)):l.every(function(R){return J[R]})?k=T.children:k=O,!O&&k&&T.showProTips&&J.canSeeEnableCe){if(J.canSeeEnableHiddenProTips)return null;k=(0,I.jsx)(H.Z,{offset:T.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:k})}if(!O&&k&&T.showProRibbonTips&&J.canSeeEnableCe){if(J.canSeeEnableHiddenProTips)return null;k=(0,I.jsx)(H.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:k})}return T.space?(0,I.jsx)(g.Z,Z()(Z()({},T.space),{},{children:k})):k}},80821:function(ee,N,n){n.d(N,{Z:function(){return J}});var V=n(97857),x=n.n(V),K=n(5574),Z=n.n(K),Y=n(24963),y=n(36146),H=n(86738),g=n(83062),I=n(96074),w=n(83622),e=n(67294),T=n(85893);function J(l){var k=(0,e.useState)(!1),O=Z()(k,2),R=O[0],F=O[1],B=(0,e.useContext)(Y.Z),G=B.message,L=function(){F(!0);var ce=l.action();ce instanceof Promise?ce.then(function(oe){if(F(!1),oe){typeof l.onSuccess=="function"&&l.onSuccess(oe);var he=y.FD.format("finish");G.success(he)}}).catch(function(oe){F(!1),typeof l.onError=="function"&&l.onError(oe)}):F(!1)};if(l.confirmProps){var E,M,S,A,ne,te,z,ae=l.confirmProps.description;return l.confirmProps.showCommonConfirm&&(ae=y.FD.format("confirm.title")),l.confirmProps.showCommonDisabled&&(ae=y.FD.format("confirm.disable")),(0,T.jsx)(H.Z,x()(x()({},l.confirmProps),{},{style:{width:500},title:(E=l.confirmProps)!==null&&E!==void 0&&E.title?(M=l.confirmProps)===null||M===void 0?void 0:M.title:y.FD.format("title.tip"),description:ae,onConfirm:L,okText:"Yes",cancelText:"No",children:(0,T.jsxs)(g.Z,{title:l.tips,children:[l.showDivider&&(0,T.jsx)(I.Z,{type:"vertical",style:{marginRight:15}}),(0,T.jsx)(w.ZP,x()(x()({},l.buttonProps),{},{ghost:((S=l.buttonProps)===null||S===void 0?void 0:S.ghost)&&((A=l.buttonProps)===null||A===void 0?void 0:A.type)!=="link",style:(ne=l.buttonProps)!==null&&ne!==void 0&&ne.ghost?x()(x()({},l.buttonProps.style),{},{padding:0,width:"auto"}):x()({},(te=l.buttonProps)===null||te===void 0?void 0:te.style),icon:!l.children&&R||(z=l.buttonProps)===null||z===void 0?void 0:z.icon,loading:R,children:l.children}))]})}))}else{var $,q,re,se,ue;return(0,T.jsxs)(g.Z,{title:l.tips,children:[l.showDivider&&(0,T.jsx)(I.Z,{type:"vertical",style:{marginRight:15}}),(0,T.jsx)(w.ZP,x()(x()({},l.buttonProps),{},{ghost:(($=l.buttonProps)===null||$===void 0?void 0:$.ghost)&&((q=l.buttonProps)===null||q===void 0?void 0:q.type)!=="link",style:(re=l.buttonProps)!==null&&re!==void 0&&re.ghost?x()(x()({},l.buttonProps.style),{},{padding:0,width:"auto"}):x()({},(se=l.buttonProps)===null||se===void 0?void 0:se.style),icon:!l.children&&R||(ue=l.buttonProps)===null||ue===void 0?void 0:ue.icon,loading:R,onClick:L,children:l.children}))]})}}},44349:function(ee,N,n){var V=n(97857),x=n.n(V),K=n(15009),Z=n.n(K),Y=n(99289),y=n.n(Y),H=n(74763),g=n(17186),I=n(5966),w=n(86250),e=n(67294),T=n(85893),J=(0,e.forwardRef)(function(l,k){var O=(0,e.useRef)();(0,e.useImperativeHandle)(k,function(){return{addItem:function(F){function B(G,L,E){return F.apply(this,arguments)}return B.toString=function(){return F.toString()},B}(function(F,B,G){var L,E=(L=O.current)===null||L===void 0?void 0:L.getList(),M;if(E==null||E.forEach(function(ne,te){ne[F]==B[F]&&(M=te)}),!(0,H.k)(M)&&G){var S;(S=O.current)===null||S===void 0||S.remove(M),M=void 0}if(!M){var A;(A=O.current)===null||A===void 0||A.add(B)}}),removeItemByKey:function(B,G){return y()(Z()().mark(function L(){var E,M;return Z()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return M=(E=O.current)===null||E===void 0?void 0:E.getList(),M==null||M.forEach(function(ne,te){if(ne[B]==G){var z;(z=O.current)===null||z===void 0||z.remove(te);return}}),A.abrupt("return");case 3:case"end":return A.stop()}},L)}))()},clear:function(B){if(!B){var G;B=(G=O.current)===null||G===void 0||(G=G.getList())===null||G===void 0?void 0:G.map(function(E,M){return M})}if(B){var L;(L=O.current)===null||L===void 0||L.remove(B)}},getList:function(){var B;return(B=O.current)===null||B===void 0?void 0:B.getList()}}});var R={};return l.hideCopyButton===!0&&(R.copyIconProps=!1),l.hideDeleteButton===!0&&(R.deleteIconProps=!1),(0,T.jsx)(g.u,x()(x()({initialValue:l.initialValue,label:l.label,name:l.name,actionRef:O,creatorButtonProps:l.showAddButton?{creatorButtonText:l.label?l.label:l.showAddButtonLabel?l.showAddButtonLabel:l.name}:!1,min:l.min?l.min:0},R),{},{children:function(B,G,L){return(0,T.jsx)(w.Z,{justify:l.justify,gap:l.gap,children:l.items.map(function(E){return E.render?(0,T.jsx)("div",{children:E.render&&E.render(B,G,L)},"".concat(l.name,"-").concat(E.name,"-").concat(B.key)):(0,T.jsx)(I.Z,{width:E.width,name:E.name,label:E.label,required:E.required,rules:[{required:E.required}],disabled:E.disabled,placeholder:E.placeholder},"".concat(l.name,"-").concat(E.name,"-").concat(B.key))})})}}))});N.Z=J},2808:function(ee,N,n){n.d(N,{Z:function(){return H}});var V=n(97857),x=n.n(V),K=n(62370),Z=n(51663),Y=n(67294),y=n(85893);function H(g){return(0,y.jsx)(K.Z,x()(x()({},g),{},{children:(0,y.jsx)(Z.Z,{showText:function(w){return w.toHexString()},allowClear:!0,presets:[{label:"Color",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},51100:function(ee,N,n){n.d(N,{Z:function(){return Y}});var V=n(4813),x=n(91604),K=n(1677),Z=n(85893);function Y(y){return y.showDragger?(0,Z.jsx)(x.Z,{max:y.max?y.max:1,title:y.title,label:y.label,required:y.required,rules:[{required:y.required}],fieldProps:{multiple:!!(y.max&&y.max>1),name:"file",accept:y.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(g){return new Promise(function(I){var w;(0,V._)({path:(w=g.response.data.path)!==null&&w!==void 0?w:""}).then(function(e){I(!0)})})}},name:y.name}):(0,Z.jsx)(K.Z,{max:y.max?y.max:1,title:y.title,label:y.label,required:y.required,rules:[{required:y.required}],fieldProps:{multiple:!!(y.max&&y.max>1),name:"file",accept:y.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(g){return new Promise(function(I){var w;(0,V._)({path:(w=g.response.data.path)!==null&&w!==void 0?w:""}).then(function(e){I(!0)})})}},name:y.name})}},3616:function(ee,N,n){n.d(N,{Ed:function(){return Z},FK:function(){return x},R_:function(){return V},ob:function(){return K}});var V=window.innerWidth<=1024?"90vw":"65vw",x="90vw",K="60vw",Z="50vh"},12323:function(ee,N,n){n.d(N,{X:function(){return V},n:function(){return x}});var V={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},x=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},24963:function(ee,N,n){var V=n(67294),x=(0,V.createContext)({});N.Z=x},74219:function(ee,N,n){n.r(N),n.d(N,{default:function(){return $e}});var V=n(5574),x=n.n(V),K=n(62370),Z=n(97462),Y=n(42075),y=n(25593),H=n(80821),g=n(36146),I=n(1699),w=n(82346),e=n(85893);function T(o){var t=(0,w.useAccess)(),d=(0,e.jsxs)(Y.Z,{style:{display:"block",marginTop:40},direction:"vertical",children:[(0,e.jsx)(K.Z,{name:o.name,hidden:!0}),(0,e.jsx)(Z.Z,{name:[o.name],children:function(U){var P,u=U[o.name];return(0,e.jsxs)(K.Z,{label:o.label,children:[(0,e.jsxs)(Y.Z.Compact,{children:[o.disable&&(0,e.jsx)(H.Z,{confirmProps:{showCommonDisabled:!0},buttonProps:{danger:o.disable(u),type:o.disable(u)?"primary":"default"},action:function(){return o.onDisable()},onSuccess:function(){o.onFinish&&o.onFinish()},children:(P=o.disableLabel)!==null&&P!==void 0?P:g.FD.format("listManageDisable")}),o.settingComponent&&(0,e.jsx)(o.settingComponent,{data:u,onFinish:o.onFinish})]}),(0,e.jsx)(y.Z.Text,{type:"secondary",style:{marginLeft:30},children:o.tip})]})}})]});return o.isPe?(0,e.jsx)(I.u,{access:["canSeeEnableCe"],showProRibbonTips:!0,children:function(U){var P=U.canSeeEnableCe;return d}}):d}var J=n(15009),l=n.n(J),k=n(99289),O=n.n(k),R=n(24963),F=n(87662),B=n(86548),G=n(97937),L=n(184),E=n(5966),M=n(83622),S=n(67294),A=n(3616),ne=function(t){var d=(0,S.useRef)(),s=(0,w.useModel)("@@initialState"),U=s.refresh,P=(0,S.useContext)(R.Z),u=P.message,h=new g.Uo("components.systemBasic"),D=(0,S.useState)(!1),b=x()(D,2),v=b[0],c=b[1];return(0,e.jsxs)(L.a,{trigger:(0,e.jsx)(M.ZP,{type:"primary",children:g.FD.format("listManageSetting")}),onOpenChange:function(r){var a;c(r),r&&((a=d.current)===null||a===void 0||a.setFieldValue("username",t.data.username))},open:v,drawerProps:{width:A.R_,forceRender:!0},title:h.format("founderTitle"),formRef:d,onFinish:function(){var i=O()(l()().mark(function r(a){var m,C;return l()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,F.Jn)({username:a.username,password:a.password,newPassword:a.newPassword});case 2:if(m=j.sent,!(m&&m.data)){j.next=9;break}return(C=d.current)===null||C===void 0||C.resetFields(),u.success(g.FD.format("finish")),localStorage.removeItem("token"),U(),j.abrupt("return",!0);case 9:case"end":return j.stop()}},r)}));return function(r){return i.apply(this,arguments)}}(),children:[(0,e.jsx)(Z.Z,{name:["enableUsername"],children:function(r){var a=r.enableUsername;return(0,e.jsx)(E.Z,{label:h.format("founderUsername"),name:"username",width:"lg",disabled:!a,addonAfter:[(0,e.jsx)(M.ZP,{type:"link",hidden:!!a,icon:(0,e.jsx)(B.Z,{}),onClick:function(){var C;(C=d.current)===null||C===void 0||C.setFieldValue("enableUsername",!0)}},"editBtn"),(0,e.jsx)(M.ZP,{type:"link",hidden:!a,icon:(0,e.jsx)(G.Z,{}),onClick:function(){var C;(C=d.current)===null||C===void 0||C.setFieldValue("enableUsername",!1)}},"closeBtn")]},"username")}}),(0,e.jsx)(E.Z.Password,{label:h.format("founderPassword"),name:"password",placeholder:h.format("founderPasswordEmpty"),rules:[{required:!0}]},"password"),(0,e.jsx)(E.Z.Password,{label:h.format("founderNewPassword"),name:"newPassword"},"newPasword"),(0,e.jsx)(Z.Z,{name:["newPassword"],children:function(r){var a=r.newPassword;return(0,e.jsx)(E.Z.Password,{label:h.format("founderNewPassword2"),name:"newPassword2",dependencies:["newPassword"],rules:[{required:typeof a!="undefined"&&a!=""},function(m){var C=m.getFieldValue;return{validator:function(j,p){return!p||C("newPassword")===p?Promise.resolve():Promise.reject(new Error(h.format("founderMessagePasswordNotMatch")))}}}]},"newPasword2")}})]},"drawer")},te=ne,z=n(38345),ae=n(64317),$=n(52688),q=n(86615),re=n(90672),se=n(40056),ue=function(t){var d,s,U=(0,S.useContext)(R.Z),P=U.message,u=(0,S.useRef)(),h=new g.Uo("components.systemBasic"),D=(0,S.useState)(!1),b=x()(D,2),v=b[0],c=b[1];return(0,S.useEffect)(function(){if(u.current&&t.data){var i,r;(i=u.current)===null||i===void 0||i.setFieldsValue({loginFailedEnable:t.data.failedEnable,loginFailedTotal:t.data.failedTotal===0?5:t.data.failedTotal,loginFailedLockTime:t.data.failedLockTime?t.data.failedLockTime.toString():"900",loginNoPasswordEnable:t.data.noPasswordEnable,loginNoPasswordUrl:t.data.noPasswordUrl,loginNoPassworkUserAgent:t.data.noPasswordUserAgent,loginNoPasswordIpList:t.data.noPasswordIpList,loginDefaultRedirect:(r=t.data.defaultRedirect)!==null&&r!==void 0?r:"/home/overview"})}},[u.current]),(0,e.jsxs)(L.a,{drawerProps:{width:A.R_,destroyOnHidden:!0},trigger:(0,e.jsx)(M.ZP,{type:(d=t.data)!==null&&d!==void 0&&d.failedEnable?"primary":"default",children:(s=t.data)!==null&&s!==void 0&&s.failedEnable?g.FD.format("listManageSetting"):g.FD.format("listManageEnable")}),onOpenChange:function(r){var a;c(r),!r&&((a=u.current)===null||a===void 0||a.resetFields())},open:v,title:h.format("loginTitle"),onFinish:function(){var i=O()(l()().mark(function r(a){var m;return l()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return m={failedEnable:a.loginFailedEnable,noPasswordEnable:a.loginNoPasswordEnable,defaultRedirect:a.loginDefaultRedirect},m.failedEnable&&(m.failedTotal=parseInt(a.loginFailedTotal),m.failedLockTime=parseInt(a.loginFailedLockTime)),m.noPasswordEnable&&(m=Object.assign(m,{noPasswordUrl:a.loginNoPasswordUrl,noPasswordUserAgent:a.loginNoPasswordUserAgent,noPasswordIplist:a.loginNoPasswordIplist})),_.next=5,(0,F.bv)({login:m,saveCache:!0});case 5:c(!1),P.success(g.FD.format("finish")),t.onFinish&&t.onFinish();case 8:case"end":return _.stop()}},r)}));return function(r){return i.apply(this,arguments)}}(),formRef:u,children:[(0,e.jsx)(z.Z,{title:h.format("loginBasicTitle"),ghost:!0,children:(0,e.jsx)(I.u,{access:["canSeeEnableCe"],showProRibbonTips:!0,children:function(r){var a=r.canSeeEnableCe;return(0,e.jsx)(ae.Z,{disabled:a,label:h.format("loginBasicDefaultRedirect"),name:"loginDefaultRedirect",options:h.option("loginBasicDefaultRedirectOption",["/home/overview","/home/tag","/app/list","/compose/list","/swarm/service"])})}})}),(0,e.jsxs)(z.Z,{title:h.format("loginFailedTitle"),ghost:!0,children:[(0,e.jsx)($.Z,{name:"loginFailedEnable"}),(0,e.jsx)(E.Z,{name:"loginFailedTotal",label:h.format("loginFailedTotal"),fieldProps:{addonAfter:g.FD.format("unitTimes")}}),(0,e.jsx)(q.Z.Group,{name:"loginFailedLockTime",label:h.format("loginFailedLockTime"),options:h.option("loginFailedLockTimeOption",["300","900","3600","18000","-1"])})]}),(0,e.jsxs)(z.Z,{title:h.format("loginNoPasswordTitle"),hidden:!0,ghost:!0,children:[(0,e.jsx)(se.Z,{message:"\u5F00\u542F\u514D\u5BC6\u767B\u5F55\u540E\uFF0C\u9762\u677F\u540E\u53F0\u5C06\u4E0D\u9700\u8981\u767B\u5F55\u3002\u6B64\u529F\u80FD\u4EC5\u9650\u4E8E\u5728\u672C\u5730\u6216\u662F\u5185\u7F51\u4E2D\u4F7F\u7528\uFF0C\u8BF7\u8C28\u614E\u5F00\u542F\u3002",type:"warning",style:{marginBottom:15}}),(0,e.jsx)($.Z,{name:"loginNoPasswordEnable"}),(0,e.jsx)(I.u,{access:["canSeeEnableCe"],showProRibbonTips:!0,children:function(r){var a=r.canSeeEnableCe;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(E.Z,{disabled:a,label:"\u514D\u5BC6\u767B\u5F55\u5730\u5740",name:"loginNoPasswordUrl"}),(0,e.jsx)(E.Z,{disabled:a,label:"\u514D\u5BC6\u767B\u5F55 User-Agent",name:"loginNoPasswordUserAgent"}),(0,e.jsx)(re.Z,{disabled:a,label:"\u514D\u5BC6\u767B\u5F55 IP \u767D\u540D\u5355",name:"loginNoPasswordIpWhitelist"})]})}})]})]})},xe=ue;function ce(o){return oe.apply(this,arguments)}function oe(){return oe=O()(l()().mark(function o(t){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,w.request)("/api/pro/two-fa/enable",{method:"POST",data:t}));case 1:case"end":return s.stop()}},o)})),oe.apply(this,arguments)}var he=n(29104),Fe=function(t){var d,s,U=new g.Uo("components.systemBasic"),P=(0,w.useAccess)(),u=(0,S.useRef)(),h=(0,S.useContext)(R.Z),D=h.message,b=(0,S.useState)(!1),v=x()(b,2),c=v[0],i=v[1],r=(0,w.useModel)("@@initialState"),a=r.initialState;return(0,S.useEffect)(function(){if(u.current&&!P.canSeeEnableCe&&a){var m;if(!t.data||!t.data.enable)var C=ce({email:a==null?void 0:a.user.username,enable:!1}).then(function(p){var f,W;(f=u.current)===null||f===void 0||f.setFieldValue("twoFaEmail",a.user.username),(W=u.current)===null||W===void 0||W.setFieldValue("towFaQrcode",p.data.qrCode)});else{var _,j;(_=u.current)===null||_===void 0||_.setFieldValue("twoFaEmail",t.data.email),(j=u.current)===null||j===void 0||j.setFieldValue("towFaQrcode",t.data.qrCode)}(m=u.current)===null||m===void 0||m.setFieldValue("twoFaCode","")}},[u.current]),(0,e.jsx)(L.a,{drawerProps:{width:A.R_,destroyOnHidden:!0},trigger:(0,e.jsx)(M.ZP,{disabled:P.canSeeEnableCe,style:{width:90},type:(d=t.data)!==null&&d!==void 0&&d.enable?"primary":"default",children:(s=t.data)!==null&&s!==void 0&&s.enable?g.FD.format("listManageSetting"):g.FD.format("listManageEnable")}),onOpenChange:function(){var m=O()(l()().mark(function C(_){var j;return l()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:i(_),!_&&((j=u.current)===null||j===void 0||j.resetFields());case 2:case"end":return f.stop()}},C)}));return function(C){return m.apply(this,arguments)}}(),open:c,title:U.format("twoFaTitle"),onFinish:function(){var m=O()(l()().mark(function C(_){var j;return l()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(P.canSeeEnableCe){f.next=4;break}return f.next=3,ce({email:_.twoFaEmail,enable:!0,code:_.twoFaCode});case 3:j=f.sent;case 4:D.success(g.FD.format("finish")),i(!1),t.onFinish&&t.onFinish();case 7:case"end":return f.stop()}},C)}));return function(C){return m.apply(this,arguments)}}(),formRef:u,children:(0,e.jsx)(I.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(C){var _=C.canSeeEnableCe;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(E.Z,{label:U.format("twoFaEmail"),name:"twoFaEmail",disabled:!0,placeholder:U.format("twoFaEmailEmpty")}),(0,e.jsx)(E.Z,{label:"\u9A8C\u8BC1\u7801",name:"twoFaCode",required:!0,disabled:_,rules:[{required:!0}]}),(0,e.jsx)(K.Z,{label:U.format("twoFaQrcode"),tooltip:U.format("twoFaQrcodeTip"),shouldUpdate:!0,children:function(p){var f=p.getFieldValue("towFaQrcode");return f&&(0,e.jsx)(he.Z,{style:{border:"#d1d9e0b3 solid 1px",padding:"10px",borderRadius:"10px"},width:200,src:"data:image/png;base64,".concat(f)})}})]})}})})},Te=Fe,Ue=n(29177),pe=n(74453),we=n(97269),Oe=n(86125);function Me(o){var t=(0,w.useModel)("@@initialState"),d=t.initialState,s=(0,w.useAccess)(),U=(0,S.useContext)(R.Z),P=U.message,u=(0,w.useAntdConfigSetter)(),h=new g.Uo("components.systemBasic"),D=(0,S.useState)(!1),b=x()(D,2),v=b[0],c=b[1],i=(0,S.useRef)();return(0,S.useEffect)(function(){if(i.current){var r,a,m,C,_,j,p,f;(r=i.current)===null||r===void 0||r.setFieldsValue({algorithm:(a=d==null?void 0:d.theme.algorithm)!==null&&a!==void 0?a:"default",mainMenu:(m=d==null?void 0:d.theme.mainMenu)!==null&&m!==void 0?m:"top",compact:(C=d==null?void 0:d.theme.compact)!==null&&C!==void 0?C:"default",fontSize:(_=d==null?void 0:d.theme.fontSize)!==null&&_!==void 0?_:14,fontSizeConsole:(j=d==null?void 0:d.theme.fontSizeConsole)!==null&&j!==void 0?j:12,sideMenu:(p=d==null?void 0:d.theme.sideMenu)!==null&&p!==void 0?p:"default",tablePageSize:(f=d==null?void 0:d.theme.tablePageSize)!==null&&f!==void 0?f:"20"})}},[d,i.current]),(0,e.jsxs)(L.a,{formRef:i,drawerProps:{width:A.R_,destroyOnHidden:!0},onOpenChange:function(a){var m;c(a),!a&&((m=i.current)===null||m===void 0||m.resetFields())},open:v,trigger:(0,e.jsx)(M.ZP,{type:"primary",children:g.FD.format("listManageSetting")}),onFinish:function(){var r=O()(l()().mark(function a(m){var C;return l()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(C={algorithm:m.algorithm,mainMenu:m.mainMenu,sideMenu:m.sideMenu,compact:m.compact,fontSizeConsole:m.fontSizeConsole,fontSize:m.fontSize,tablePageSize:m.tablePageSize},!(m.algorithm!=(d==null?void 0:d.theme.algorithm)&&!s.canSeeEnableCe)){j.next=4;break}return j.next=4,(0,F.GV)({groupName:"setting",name:"themeUserConfig"});case 4:return localStorage.setItem("dpanel-theme",m.algorithm),localStorage.setItem("dpanel-compact",m.compact),localStorage.setItem("dpanel-pagesize",m.tablePageSize),j.next=9,(0,F.bv)({theme:C});case 9:P.success(g.FD.format("finishTheme")),c(!1),o.onFinish&&o.onFinish();case 12:case"end":return j.stop()}},a)}));return function(a){return r.apply(this,arguments)}}(),children:[(0,e.jsx)(q.Z.Group,{name:"algorithm",label:h.format("themeConfigAlgorithm"),initialValue:"default",radioType:"button",options:h.option("themeConfigAlgorithmOption",["default","dark","system"]),fieldProps:{onChange:function(a){a.target.value=="system"&&P.warning("\u4E3B\u9898\u76AE\u80A4\u914D\u7F6E\u4E3A\u8DDF\u968F\u7CFB\u7EDF\u540E\uFF0C\u5C06\u4F1A\u6E05\u7A7A\u81EA\u5B9A\u4E49\u4E3B\u9898\u98CE\u683C")}}}),(0,e.jsx)(q.Z.Group,{name:"mainMenu",label:h.format("themeConfigMainMenu"),initialValue:"top",radioType:"button",options:h.option("themeConfigMainMenuOption",["top","side"])}),(0,e.jsx)(q.Z.Group,{name:"sideMenu",label:h.format("themeConfigSideMenu"),initialValue:"default",radioType:"button",options:h.option("themeConfigSideMenuOption",["default","collapse"])}),(0,e.jsx)(q.Z.Group,{name:"compact",label:h.format("themeConfigCompact"),initialValue:"default",radioType:"button",options:h.option("themeConfigCompactOption",["default","compact"])}),(0,e.jsx)(K.Z,{name:"fontSize",label:h.format("themeConfigFontSize"),initialValue:14,children:(0,e.jsx)(Oe.Z,{step:2,max:30,min:8,marks:{8:"8",10:"10",12:"12",14:"14",16:"16",20:"20",26:"26"}})}),(0,e.jsx)(ae.Z,{initialValue:"20",label:h.format("themeConfigTablePageSize"),name:"tablePageSize",options:h.option("themeConfigTablePageSizeOption",["5","10","20","50","100","all"])})]})}var X=n(24739),Ze=n(25054),ie=n(31199),De=n(21532),ve=n(86250),Be=n(44349);function Le(o){return be.apply(this,arguments)}function be(){return be=O()(l()().mark(function o(t){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,w.request)("/api/pro/theme/save-theme-user-config",{method:"POST",data:t});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},o)})),be.apply(this,arguments)}var Ie=n(2808),_e=n(51100),Re=n(96486),Ae=n.n(Re),de={colorPrimary:"",colorTextBase:"",colorLink:"",colorBgContainer:"",colorBorder:"",colorBgElevated:"",colorBorderSecondary:"colorBorder"},Ee=["borderRadius","wireframe"],We=function(t){var d=(0,w.useAccess)(),s=(0,S.useRef)(),U=(0,S.useContext)(R.Z),P=U.message,u=new g.Uo("components.systemBasic"),h=(0,S.useState)(!1),D=x()(h,2),b=D[0],v=D[1],c=function(r){return(0,e.jsx)(Ie.Z,{name:r.name,label:u.format("themeUserConfigOption.".concat(r.name)),tooltip:r.tooltip})};return(0,S.useEffect)(function(){if(!d.canSeeEnableCe&&s.current&&t.data){var i,r;if((i=s.current)===null||i===void 0||i.resetFields(["bgImageUpload","siteLogoUpload"]),Ee.forEach(function(C){if(t.data&&t.data.token&&t.data.token[C]){var _,j;(_=s.current)===null||_===void 0||_.setFieldValue("enableStyle",!0),(j=s.current)===null||j===void 0||j.setFieldValue(C,t.data.token[C])}}),(r=s.current)===null||r===void 0||r.setFieldsValue({siteLogo:t.data.siteLogo,siteTitle:t.data.siteTitle,siteCopyright:t.data.siteCopyright,siteLink:t.data.siteLink,bgImage:t.data.bgImage,loginLogo:t.data.loginLogo}),!t.data.bgImage||!t.data.bgImage.width||t.data.bgImage.width=="100%"){var a;(a=s.current)===null||a===void 0||a.setFieldValue("bgSize","full")}else{var m;(m=s.current)===null||m===void 0||m.setFieldValue("bgSize","default")}Object.keys(de).map(function(C){var _=C;de[C]!=""&&(_=de[C]),s!=null&&s.current&&t.data&&t.data.token&&!Ae().isEmpty(t.data.token)&&(s==null||s.current.setFieldValue("enableColor",!0),s==null||s.current.setFieldValue(C,t.data.token[_]))})}},[s.current]),(0,e.jsx)(De.ZP,{children:(0,e.jsxs)(L.a,{trigger:(0,e.jsx)(M.ZP,{disabled:d.canSeeEnableCe,type:"primary",children:g.FD.format("listManageSetting")}),drawerProps:{width:A.R_},onOpenChange:function(r){var a;v(r),!r&&((a=s.current)===null||a===void 0||a.resetFields())},open:b,title:u.format("themeUserConfigTitle"),formRef:s,onFinish:function(){var i=O()(l()().mark(function r(a){var m,C,_;return l()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!d.canSeeEnableCe){p.next=2;break}return p.abrupt("return",!1);case 2:return _={token:{},bgImage:a.bgImage,siteLink:a.siteLink,siteTitle:(m=a.siteTitle)!==null&&m!==void 0?m:"",siteCopyright:a.siteCopyright,siteLogo:(C=a.siteLogo)!==null&&C!==void 0?C:"",loginLogo:a.loginLogo},a.siteLogoUpload&&a.siteLogoUpload.length>0&&(_.siteLogo=a.siteLogoUpload[0].response.data.path),_.bgImage||(_.bgImage={}),a.bgImageUpload&&a.bgImageUpload.length>0&&(_.bgImage.src=a.bgImageUpload[0].response.data.path),_.bgImage.width=a.bgSize=="full"?"100%":"",a.loginLogoUpload&&a.loginLogoUpload.length>0&&(_.loginLogo=a.loginLogoUpload[0].response.data.path),Object.keys(de).map(function(f){_.token||(_.token={});var W=f;de[f]!=""&&(W=de[f]);var Q=s.current&&s.current.getFieldValue(W);Q&&Q.toHexString?Q.cleared||(_.token[f]=Q.toHexString()):_.token[f]=Q}),Ee.map(function(f){_.token||(_.token={});var W=s.current&&s.current.getFieldValue(f);_.token[f]=W}),p.next=12,Le(_);case 12:return t.onFinish&&t.onFinish(),P.success(g.FD.format("finishTheme")),p.abrupt("return",!0);case 15:case"end":return p.stop()}},r)}));return function(r){return i.apply(this,arguments)}}(),children:[(0,e.jsx)(X.UW,{title:u.format("themeUserConfigColorTitle"),extra:(0,e.jsx)($.Z,{name:"enableColor"})}),(0,e.jsx)(Z.Z,{name:["enableColor"],children:function(r){var a=r.enableColor;return a&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(X.UW,{children:c({name:"colorPrimary",tooltip:u.format("themeUserConfigColorPrimaryTip")})}),(0,e.jsxs)(X.UW,{children:[c({name:"colorBgContainer"}),c({name:"colorBgElevated"})]}),(0,e.jsxs)(X.UW,{children:[c({name:"colorTextBase"}),c({name:"colorLink"}),c({name:"colorBorder"})]})]})}}),(0,e.jsx)(X.UW,{title:u.format("themeUserConfigStyleTitle"),extra:(0,e.jsx)($.Z,{name:"enableStyle"})}),(0,e.jsx)(Z.Z,{name:["enableStyle"],children:function(r){var a=r.enableStyle;return a&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(X.UW,{children:(0,e.jsxs)(ve.Z,{gap:40,children:[(0,e.jsx)($.Z,{label:u.format("themeUserConfigWireframe"),name:"wireframe"}),(0,e.jsx)(Ze.Z,{min:1,max:16,label:u.format("themeUserConfigBorderRadius"),name:"borderRadius"})]})})})}}),(0,e.jsx)(X.UW,{title:u.format("themeUserConfigUiTitle")}),(0,e.jsx)(E.Z,{label:u.format("themeUserConfigSiteTitle"),name:"siteTitle",placeholder:u.format("themeUserConfigSiteTitleEmpty")}),(0,e.jsxs)(X.UW,{children:[(0,e.jsx)(_e.Z,{label:"Logo",title:u.format("themeUserConfigSiteLogoUploadTitle"),name:"siteLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(E.Z,{width:"md",placeholder:u.format("themeUserConfigSiteLogoEmpty"),label:u.format("themeUserConfigSiteLogo"),name:"siteLogo"})]}),(0,e.jsxs)(X.UW,{children:[(0,e.jsx)(_e.Z,{label:u.format("themeUserConfigBgImageUpload"),title:u.format("themeUserConfigBgImageUploadTitle"),name:"bgImageUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(E.Z,{width:"md",placeholder:u.format("themeUserConfigSiteLogoEmpty"),label:u.format("themeUserConfigBgImageSrc"),name:["bgImage","src"]}),(0,e.jsx)(q.Z.Group,{name:"bgSize",label:u.format("themeUserConfigBgImageBgSize"),initialValue:"full",options:u.option("themeUserConfigBgImageBgSizeOption",["full","default"])})]}),(0,e.jsx)(X.UW,{children:(0,e.jsx)(Z.Z,{name:["bgSize"],children:function(r){var a=r.bgSize;if(a=="default")return(0,e.jsxs)(X.UW,{children:[(0,e.jsx)(ie.Z,{width:"xs",name:["bgImage","top"],label:u.format("themeUserConfigBgImageTop")}),(0,e.jsx)(ie.Z,{width:"xs",name:["bgImage","bottom"],label:u.format("themeUserConfigBgImageBottom")}),(0,e.jsx)(ie.Z,{width:"xs",name:["bgImage","left"],label:u.format("themeUserConfigBgImageLeft")}),(0,e.jsx)(ie.Z,{width:"xs",name:["bgImage","right"],label:u.format("themeUserConfigBgImageRight")})]})}})}),(0,e.jsx)(Be.Z,{name:"siteLink",label:u.format("themeUserConfigSiteLink"),showAddButton:!0,hideCopyButton:!0,gap:10,items:u.option("themeUserConfigSiteLinkOption",["title","href"]).map(function(i){return{name:i.value,label:i.label}})}),(0,e.jsx)(re.Z,{label:u.format("themeUserConfigSiteCopyright"),name:"siteCopyright"}),(0,e.jsxs)(X.UW,{title:u.format("themeUserConfigUiLoginTitle"),children:[(0,e.jsx)(_e.Z,{label:"Logo",title:"Logo",name:"loginLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(E.Z,{width:"md",placeholder:u.format("themeUserConfigSiteLogoEmpty"),label:u.format("themeUserConfigLoginLogo"),name:"loginLogo"})]})]})})},Ne=We,Ve=n(19400),Se=n(2487),ke=n(4393),Ke=n(71230),ze=n(15746),He=n(40411),Pe=n(12323),Ge=n(64304),fe=n.n(Ge);function Qe(o){var t=new g.Uo("components.systemBasic"),d=(0,w.useAccess)(),s=(0,S.useContext)(R.Z),U=s.message,P=(0,S.useState)(),u=x()(P,2),h=u[0],D=u[1],b=(0,S.useState)(),v=x()(b,2),c=v[0],i=v[1],r=(0,S.useRef)(),a=(0,S.useState)(!1),m=x()(a,2),C=m[0],_=m[1];return(0,S.useEffect)(function(){if(r.current&&o.data){var j,p,f=Pe.X;o.data&&Object.assign(f,o.data),!d.canSeeEnableCe&&o.data&&(j=o.data)!==null&&j!==void 0&&j.themeName&&o.data.themeName!=""&&Object.keys(fe()).forEach(function(W,Q){o.data&&W==o.data.themeName&&(i(Math.ceil((Q+1)/36)),D(o.data.themeName))}),(p=r.current)===null||p===void 0||p.setFieldsValue({fontSize:f.fontSize,lineHeight:f.lineHeight,letterSpacing:f.letterSpacing,fontWeight:f.fontWeight,cursorStyle:f.cursorStyle,cursorInactiveStyle:f.cursorInactiveStyle,cursorBlink:f.cursorBlink})}},[r.current,o.data]),(0,e.jsxs)(L.a,{onOpenChange:function(p){var f;_(p),!p&&((f=r.current)===null||f===void 0||f.resetFields())},open:C,title:t.format("themeConsoleTitle"),formRef:r,drawerProps:{width:A.R_,destroyOnHidden:!0},trigger:(0,e.jsx)(M.ZP,{type:"primary",children:g.FD.format("listManageSetting")}),onFinish:function(){var j=O()(l()().mark(function p(f){var W;return l()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return W={fontSize:f.fontSize,lineHeight:f.lineHeight,letterSpacing:f.letterSpacing,fontWeight:f.fontWeight,cursorStyle:f.cursorStyle,cursorInactiveStyle:f.cursorInactiveStyle,cursorBlink:f.cursorBlink,theme:{},themeName:""},h!=""&&!d.canSeeEnableCe&&(W.theme=fe()[h],W.themeName=h),le.next=4,(0,F.bv)({console:W});case 4:return U.success(g.FD.format("finishTheme")),_(!1),o.onFinish&&o.onFinish(),le.abrupt("return",!0);case 8:case"end":return le.stop()}},p)}));return function(p){return j.apply(this,arguments)}}(),children:[(0,e.jsx)(X.UW,{title:t.format("themeConsoleFont"),children:(0,e.jsxs)(ve.Z,{gap:50,children:[(0,e.jsx)(ie.Z,{label:t.format("themeConsoleFontSize"),name:"fontSize",tooltip:t.format("themeConsoleFontSizeTip"),fieldProps:{addonAfter:"px"}}),(0,e.jsx)(ie.Z,{label:t.format("themeConsoleLineHeight"),name:"lineHeight",tooltip:t.format("themeConsoleLineHeightTip"),fieldProps:{addonAfter:t.format("themeConsoleLineHeightUnit")}}),(0,e.jsx)(ie.Z,{label:t.format("themeConsoleLetterSpacing"),name:"letterSpacing",fieldProps:{addonAfter:"px"},tooltip:t.format("themeConsoleLetterSpacingTip")}),(0,e.jsx)(ae.Z,{label:t.format("themeConsoleFontWeight"),name:"fontWeight",options:[{label:"normal",value:"normal"},{label:"bold",value:"bold"},{label:"100",value:"100"},{label:"200",value:"200"},{label:"300",value:"300"},{label:"400",value:"400"},{label:"500",value:"500"},{label:"600",value:"600"},{label:"700",value:"700"},{label:"800",value:"800"},{label:"900",value:"900"}]})]})}),(0,e.jsx)(X.UW,{title:t.format("themeConsoleCursorStyleTitle"),children:(0,e.jsxs)(ve.Z,{gap:50,children:[(0,e.jsx)(ae.Z,{label:t.format("themeConsoleCursorStyle"),name:"cursorStyle",width:"sm",options:t.option("themeConsoleCursorStyleOption",["bar","underline","block"])}),(0,e.jsx)(ae.Z,{label:t.format("themeConsoleCursorInactiveStyle"),name:"cursorInactiveStyle",width:"sm",options:t.option("themeConsoleCursorStyleOption",["bar","underline","block","outline"])}),(0,e.jsx)($.Z,{label:t.format("themeConsoleCursorBlink"),name:"cursorBlink"})]})}),(0,e.jsx)(I.u,{showProRibbonTips:!0,access:"canSeeEnableCe",children:function(p){var f=p.canSeeEnableCe;return(0,e.jsx)(z.Z,{ghost:!0,title:(0,e.jsx)(Ve.Z,{}),subTitle:t.format("themeConsoleTheme"),children:(0,e.jsx)(Se.Z,{split:!0,style:{overflow:"hidden"},grid:{column:6},pagination:{pageSize:36,current:c,onChange:function(Q,le){i(Q)}},dataSource:Object.keys(fe()).map(function(W){return{label:W,value:W,data:fe()[W]}}),renderItem:function(Q,le){var ge=Q.data,ye=(0,e.jsxs)(ke.Z,{style:{backgroundColor:ge.background,color:ge.foreground,textAlign:"center",cursor:f?"not-allowed":"pointer",borderRadius:0},onClick:function(){if(!f){var je;(je=r.current)===null||je===void 0||je.setFieldValue("theme",Q.data),D(Q.label)}},hoverable:!0,children:[(0,e.jsx)(Ke.Z,{wrap:!0,gutter:[2,2],justify:"center",align:"middle",children:Pe.n.filter(function(me){return ge[me]!=""}).map(function(me){return(0,e.jsx)(ze.Z,{style:{backgroundColor:ge[me],padding:8}},me)})}),(0,e.jsx)("div",{style:{paddingTop:5},children:Q.label})]});return(0,e.jsx)(Se.Z.Item,{style:{margin:0},children:h==Q.label?(0,e.jsx)(He.Z.Ribbon,{text:"Checked",children:ye}):ye},le)}})})}})]})}var Xe=n(63434);function Ye(o){var t=new g.Uo("components.systemBasic"),d=(0,S.useRef)(),s=(0,S.useState)(!1),U=x()(s,2),P=U[0],u=U[1],h=(0,S.useContext)(R.Z),D=h.message;return(0,S.useEffect)(function(){if(d.current&&o.data){var b;(b=d.current)===null||b===void 0||b.setFieldsValue(o.data)}},[d.current,o.data]),(0,e.jsxs)(L.a,{drawerProps:{width:A.R_,destroyOnHidden:!0},trigger:(0,e.jsx)(M.ZP,{style:{width:150},type:"primary",children:g.FD.format("listManageSetting")}),onOpenChange:function(v){var c;u(v),!v&&((c=d.current)===null||c===void 0||c.resetFields())},open:P,title:t.format("notificationTitle"),onFinish:function(){var b=O()(l()().mark(function v(c){return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,F.bv)({notification:{emailServer:c.emailServer}});case 2:u(!1),D.success(g.FD.format("finish")),o.onFinish&&o.onFinish();case 5:case"end":return r.stop()}},v)}));return function(v){return b.apply(this,arguments)}}(),formRef:d,children:[(0,e.jsx)(X.UW,{title:t.format("notificationEmailTitle")}),(0,e.jsx)(E.Z,{label:t.format("notificationEmailHost"),name:["emailServer","host"],tooltip:t.format("notificationEmailHostTip"),required:!0,rules:[{required:!0}]}),(0,e.jsx)(ie.Z,{label:t.format("notificationEmailPort"),name:["emailServer","port"],required:!0,rules:[{required:!0}],initialValue:465}),(0,e.jsx)(E.Z,{label:t.format("notificationEmailCode"),name:["emailServer","code"],width:"lg",placeholder:t.format("notificationEmailCodeTip"),required:!0,rules:[{required:!0}],addonAfter:(0,e.jsxs)(Y.Z,{children:[(0,e.jsx)("a",{target:"_blank",href:"https://service.mail.qq.com/detail/0/75",children:t.format("notificationEmailCodeHelp.qq")}),(0,e.jsx)("a",{target:"_blank",href:"https://help.mail.163.com/faqDetail.do?code=d7a5dc8471cd0c0e8b4b8f4f8e49998b374173cfe9171305fa1ce630d7f67ac286624f309a1a7089",children:t.format("notificationEmailCodeHelp.163")})]})}),(0,e.jsx)(E.Z,{label:t.format("notificationEmailEmail"),name:["emailServer","email"],required:!0,rules:[{required:!0}],width:"lg",addonAfter:(0,e.jsx)(H.Z,{buttonProps:{type:"primary"},tips:t.format("notificationEmailTestTip"),action:O()(l()().mark(function b(){var v;return l()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,F.FB)({emailServer:(v=d.current)===null||v===void 0?void 0:v.getFieldValue("emailServer"),subject:t.format("notificationEmailTestSubject"),content:t.format("notificationEmailTestContent",{time:new Date().toISOString()})});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},b)})),children:t.format("notificationEmailTestButton")},"testEmail")}),(0,e.jsx)(I.u,{access:"canSeeEnableEe",children:(0,e.jsx)(Xe.Z.Group,{name:"status",label:t.format("notificationEmailStatus"),options:t.option("notificationEmailStatusOption",["register"])})})]})}var Ce=n(89035);function Je(o){var t=(0,S.useState)([]),d=x()(t,2),s=d[0],U=d[1],P=new g.Uo("components.systemBasic");return(0,S.useEffect)(function(){var u,h,D;if(o.data){var b;!((u=o.data.info)===null||u===void 0)&&u.Mounts&&o.data.info.Mounts.forEach(function(a){a.Type=="volume"&&a.Name&&(b=a.Name)});var v=((h=o.data.info)===null||h===void 0||(h=h.HostConfig)===null||h===void 0?void 0:h.PortBindings)&&Object.entries(o.data.info.HostConfig.PortBindings).map(function(a){var m=x()(a,2),C=m[0],_=m[1];return _.map(function(j){return"-p ".concat(j.HostPort,":").concat(String(parseInt(C)))})}),c=!1,i=((D=o.data.info)===null||D===void 0||(D=D.HostConfig)===null||D===void 0?void 0:D.Binds)&&o.data.info.HostConfig.Binds.map(function(a){return a.indexOf(":/dpanel")>-1&&(c=!0),"-v ".concat(a)});if(!c){var r,b="";!((r=o.data.info)===null||r===void 0)&&r.Mounts&&o.data.info.Mounts.forEach(function(m){m.Type=="volume"&&m.Name&&(b=m.Name)}),i||(i=[]),i.push("-v "+b+":/dpanel")}o.data.info&&U(["docker stop ".concat(o.data.info.Name," && docker rm ").concat(o.data.info.Name),"docker pull ".concat(o.data.info.Config.Image),"docker run -d --name ".concat(o.data.info.Name," --restart=always ").concat(v&&v.join(" ")," ").concat(i&&i.join(" ")," ").concat(o.data.info.Config.Image),o.data.info.NetworkSettings.Networks["dpanel-local"]?"docker network connect dpanel-local ".concat(o.data.info.Name):""])}},[]),(0,e.jsx)(L.a,{drawerProps:{width:A.R_,destroyOnHidden:!0},title:P.format("upgradeTitle"),trigger:(0,e.jsx)(M.ZP,{style:{width:150},children:g.FD.format("listManageView")}),children:(0,e.jsxs)(z.Z,{direction:"column",ghost:!0,children:[(0,e.jsx)(se.Z,{message:P.format("upgradeAlertTitle"),showIcon:!0,description:(0,e.jsxs)("ol",{style:{marginLeft:"-20px"},children:[(0,e.jsx)("li",{children:P.format("upgradeAlertContent1")}),(0,e.jsx)("li",{children:P.format("upgradeAlertContent2")}),(0,e.jsx)("li",{children:P.format("upgradeAlertContent3")}),(0,e.jsx)("li",{children:(0,e.jsx)(y.Z.Text,{type:"danger",children:P.format("upgradeAlertContent4")})})]}),type:"warning",style:{marginBottom:"20px"}}),(0,e.jsxs)(z.Z,{ghost:!0,style:{paddingBottom:50},direction:"column",gutter:[10,50],children:[(0,e.jsx)(z.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(Ce.Z,{}),bodyStyle:{padding:"10px",background:"#24292f"},subTitle:(0,e.jsxs)(e.Fragment,{children:[P.format("upgradeShellRootLessTitle")," ",(0,e.jsx)("a",{href:"https://dpanel.cc/install/shell",target:"_blank",children:g.FD.format("help")})]}),children:(0,e.jsx)(y.Z.Text,{copyable:!0,style:{color:"#ffffff"},children:"sudo curl -sSL https://dpanel.cc/quick.sh -o quick.sh && sudo bash quick.sh"})}),(0,e.jsx)(z.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(Ce.Z,{}),bodyStyle:{padding:"10px",background:"#24292f"},subTitle:(0,e.jsxs)(e.Fragment,{children:[P.format("upgradeShellRootTitle")," ",(0,e.jsx)("a",{href:"https://dpanel.cc/install/shell",target:"_blank",children:g.FD.format("help")})]}),children:(0,e.jsx)(y.Z.Text,{copyable:!0,style:{color:"#ffffff"},children:"curl -sSL https://dpanel.cc/quick.sh -o quick.sh && bash quick.sh"})}),(0,e.jsx)(z.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(Ce.Z,{}),bodyStyle:{padding:"10px",background:"#24292f"},subTitle:(0,e.jsxs)(e.Fragment,{children:[P.format("upgradeDockerrunTitle")," ",(0,e.jsx)("a",{href:"https://dpanel.cc/manual/system-dpanel-upgrade",target:"_blank",children:g.FD.format("help")})]}),children:s&&s.length>0?(0,e.jsx)(y.Z.Paragraph,{copyable:!0,style:{color:"#ffffff"},children:'sudo sh -c "'.concat(s.join(" && "),'"')}):(0,e.jsx)("span",{style:{color:"#ffffff"},children:g.FD.format("systemUpgradeDPanelNotFound")})})]})]})})}function $e(){var o=new g.Uo("components.systemBasic"),t=(0,S.useState)(0),d=x()(t,2),s=d[0],U=d[1],P=(0,S.useRef)(),u=(0,S.useContext)(R.Z),h=u.loading,D=(0,w.useAccess)();return(0,S.useEffect)(function(){var b;h.show(),(b=P.current)===null||b===void 0||b.resetFields(),Promise.all([(0,F.pe)({groupName:"user",name:"founder"}).then(function(v){var c;(c=P.current)===null||c===void 0||c.setFieldsValue({founder:v.data})}),(0,F.pe)({groupName:"setting",name:"login"}).then(function(v){var c,i;(c=P.current)===null||c===void 0||c.setFieldsValue({login:(i=v.data)!==null&&i!==void 0?i:{}})}),!D.canSeeEnableCe&&(0,F.pe)({groupName:"setting",name:"twoFa"}).then(function(v){var c,i;(c=P.current)===null||c===void 0||c.setFieldsValue({twoFa:(i=v.data)!==null&&i!==void 0?i:{}})}),!D.canSeeEnableCe&&(0,F.pe)({groupName:"setting",name:"themeUserConfig"}).then(function(v){var c,i;(c=P.current)===null||c===void 0||c.setFieldsValue({themeUserConfig:(i=v.data)!==null&&i!==void 0?i:{}})}),(0,F.pe)({groupName:"setting",name:"themeConsoleConfig"}).then(function(v){var c,i;(c=P.current)===null||c===void 0||c.setFieldsValue({themeConsoleConfig:(i=v.data)!==null&&i!==void 0?i:{}})}),(0,F.pe)({groupName:"setting",name:"themeConfig"}).then(function(v){var c,i;(c=P.current)===null||c===void 0||c.setFieldsValue({themeConfig:(i=v.data)!==null&&i!==void 0?i:{}})}),(0,F.pe)({groupName:"setting",name:"notification"}).then(function(v){var c,i;(c=P.current)===null||c===void 0||c.setFieldsValue({notification:(i=v.data)!==null&&i!==void 0?i:{}})}),(0,F.d6)().then(function(v){var c,i;(c=P.current)===null||c===void 0||c.setFieldValue("upgradeScript",(i=v.data)!==null&&i!==void 0?i:{})})]).finally(function(){h.destroy()})},[s]),(0,e.jsx)(pe._z,{children:(0,e.jsx)(z.Z,{children:(0,e.jsxs)(we.A,{layout:"horizontal",labelAlign:"left",labelCol:{xs:7,sm:6,md:5,lg:5,xl:4,xxl:3,offset:0},submitter:!1,formRef:P,children:[(0,e.jsx)(Z.Z,{name:["founder"],children:function(v){var c=v.founder;return c&&(0,e.jsx)(E.Z,{label:o.format("founderTitle"),disabled:!0,width:"md",fieldProps:{prefix:(0,e.jsx)(Ue.Z,{}),value:c.username},addonAfter:(0,e.jsx)(te,{data:c,onFinish:function(){U(s+1)}}),name:"adminUsername"})}}),(0,e.jsx)(T,{label:o.format("loginTitle"),name:"login",disable:function(v){return!1},disableLabel:g.FD.format("listManageDefault"),onDisable:function(){return(0,F.GV)({groupName:"setting",name:"login"})},settingComponent:xe,onFinish:function(){U(s+1)},tip:o.format("loginTip")}),(0,e.jsx)(T,{isPe:!0,label:o.format("twoFaTitle"),name:"twoFa",disable:function(v){return!(v!=null&&v.enable)},onDisable:function(){return(0,F.GV)({groupName:"setting",name:"twoFa"})},settingComponent:Te,onFinish:function(){U(s+1)},tip:o.format("twoFaTip")}),(0,e.jsx)(T,{label:o.format("themeConfigTitle"),name:"themeConfig",disable:function(v){return!1},disableLabel:g.FD.format("listManageDefault"),onDisable:function(){return localStorage.removeItem("dpanel-theme"),localStorage.removeItem("dpanel-compact"),localStorage.removeItem("dpanel-pagesize"),(0,F.GV)({groupName:"setting",name:"themeConfig"})},settingComponent:Me,onFinish:function(){window.location.reload(),U(s+1)},tip:o.format("themeConfigTip")}),(0,e.jsx)(T,{isPe:!0,label:o.format("themeUserConfigTitle"),name:"themeUserConfig",disable:function(v){return!1},disableLabel:g.FD.format("listManageDefault"),onDisable:function(){return(0,F.GV)({groupName:"setting",name:"themeUserConfig"})},settingComponent:Ne,onFinish:function(){window.location.reload(),U(s+1)},tip:o.format("themeUserConfigTip")}),(0,e.jsx)(T,{label:o.format("themeConsoleTitle"),name:"themeConsoleConfig",disable:function(v){return!1},disableLabel:g.FD.format("listManageDefault"),onDisable:function(){return(0,F.GV)({groupName:"setting",name:"themeConsoleConfig"})},settingComponent:Qe,onFinish:function(){U(s+1)},tip:o.format("themeConsoleTip")}),(0,e.jsx)(T,{label:o.format("notificationTitle"),name:"notification",onDisable:function(){return(0,F.GV)({groupName:"setting",name:"themeConsoleConfig"})},settingComponent:Ye,onFinish:function(){U(s+1)},tip:o.format("notificationTip")}),(0,e.jsx)(T,{label:o.format("upgradeTitle"),name:"upgradeScript",onDisable:function(){return new Promise(function(){})},settingComponent:Je,tip:o.format("upgradeTip")})]})})})}},4813:function(ee,N,n){n.d(N,{_:function(){return y}});var V=n(15009),x=n.n(V),K=n(99289),Z=n.n(K),Y=n(82346);function y(g){return H.apply(this,arguments)}function H(){return H=Z()(x()().mark(function g(I){return x()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Y.request)("/api/common/attach/delete",{method:"POST",data:I});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},g)})),H.apply(this,arguments)}}}]);
