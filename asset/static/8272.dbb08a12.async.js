"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8272],{43831:function(ie,V,e){var G=e(15009),c=e.n(G),z=e(99289),_=e.n(z),Q=e(5574),j=e.n(Q),s=e(67294),F=e(14946),Z=e(43425),$=e(48689),b=e(38345),N=e(78099),w=e(42075),L=e(25593),W=e(83062),f=e(60335),ee=e(78498),J=e(80821),ne=e(10032),te=e(5251),X=e(28230),k=e(46442),Y=e(78451),i=e(85893),n=(0,s.forwardRef)(function(E,u){var U;(0,s.useImperativeHandle)(u,function(){return{}});var R=(0,s.useRef)(),t=(0,s.useRef)(),x=(0,s.useState)(),C=j()(x,2),q=C[0],ae=C[1];return(0,s.useEffect)(function(){var D,M;ae(E.containerInfo),!((D=R.current)===null||D===void 0)&&D.reloadAndRest&&((M=R.current)===null||M===void 0||M.reloadAndRest())},[E.containerInfo]),(0,i.jsxs)(b.Z,{ghost:E.ghost,children:[(0,i.jsx)(ne.Z,{ref:t}),(0,i.jsx)(N.Z,{scroll:{x:"max-content"},rowKey:"key",actionRef:R,pagination:!1,columns:[{title:"\u6240\u5C5E\u7F51\u7EDC",key:"name",dataIndex:"networkName"},{title:"\u5BB9\u5668\u540D\u79F0",key:"containerName",dataIndex:"containerName",width:100,render:function(M,d,p,g,h){return(0,i.jsx)(Y.Z,{content:(0,te.fi)(d.containerName,"/")})}},{title:(0,i.jsx)(ee.Z,{title:"hostname",help:"\u63D0\u4F9B\u5BB9\u5668\u5185\u90E8\u8BBF\u95EE"}),key:"hostName",render:function(M,d,p){return d.hostName?(0,i.jsx)(w.Z,{direction:"vertical",children:d.hostName.map(function(g){if(g)return(0,i.jsx)(L.Z.Text,{copyable:!0,keyboard:!0,children:g},g)})}):(0,i.jsx)(i.Fragment,{})}},{title:"Ip",key:"ip",render:function(M,d,p,g,h){return(0,i.jsxs)(w.Z,{direction:"vertical",children:[(0,i.jsx)("span",{children:d.networkInfo.IPv4Address}),d.networkInfo.IPv6Address&&(0,i.jsx)("span",{children:d.networkInfo.IPv6Address})]})}},{title:"\u64CD\u4F5C",key:"option",width:50,fixed:"right",render:function(M,d,p,g,h){return(0,i.jsxs)(w.Z,{children:[d.networkName!=""&&(0,i.jsx)(L.Z.Link,{onClick:function(){var a;(a=t.current)===null||a===void 0||a.show(d.networkName)},children:(0,i.jsx)(W.Z,{title:"\u7BA1\u7406",children:(0,i.jsx)(Z.Z,{})})}),d.key!="bridge"&&d.key!="none"&&d.key!="host"&&d.networkName!=""&&(0,i.jsx)(J.Z,{type:"link",action:function(){return(0,F.t9)({name:d.networkName,containerName:E.containerInfo.Name})},onSuccess:function(){var a,o;!((a=R.current)===null||a===void 0)&&a.reloadAndRest&&((o=R.current)===null||o===void 0||o.reloadAndRest())},tips:"\u9000\u51FA\u8BE5\u7F51\u7EDC",children:(0,i.jsx)($.Z,{})})]})}}],request:function(){var D=_()(c()().mark(function M(d,p,g){var h,l;return c()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,f.jV)({md5:E.containerInfo.Name});case 2:return h=o.sent,ae(h.data.info),o.next=6,(0,F._3)({name:Object.keys(h.data.info.NetworkSettings.Networks)});case 6:return l=o.sent,o.abrupt("return",{data:l.data.list,success:!0,total:l.data.list.length});case 8:case"end":return o.stop()}},M)}));return function(M,d,p){return D.apply(this,arguments)}}(),toolBarRender:function(){return[(0,i.jsx)(k.Z,{showTriggerButton:!0,onSelect:function(){var M=_()(c()().mark(function d(p){var g,h;return c()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,F.HY)({name:p.Name,containerName:E.containerInfo.Name,ipV4:""});case 2:h=a.sent,!((g=R.current)===null||g===void 0)&&g.reloadAndRest&&R.current.reloadAndRest();case 4:case"end":return a.stop()}},d)}));return function(d){return M.apply(this,arguments)}}()},"joinNetwork"),(0,i.jsx)(X.Z,{onFinish:function(){var d,p;!((d=R.current)===null||d===void 0)&&d.reloadAndRest&&((p=R.current)===null||p===void 0||p.reloadAndRest())}},"create")]},search:!1,expandable:{expandRowByClick:!1,expandedRowKeys:Object.keys((U=q==null?void 0:q.NetworkSettings.Networks)!==null&&U!==void 0?U:{bridge:[]})}})]})});V.Z=n},78272:function(ie,V,e){e.d(V,{Z:function(){return h}});var G=e(5574),c=e.n(G),z=e(15009),_=e.n(z),Q=e(99289),j=e.n(Q),s=e(67294),F=e(37767),Z=e(60335),$=e(82346),b=e(58638),N=e(85265),w=e(42075),L=e(96074),W=e(83062),f=e(86250),ee=e(52031),J=e(14189),ne=e(27813),te=e(46934),X=e(184),k=e(25593),Y=e(95591),i=e(5251),n=e(85893),E=(0,s.forwardRef)(function(l,a){var o,I=(0,s.useState)(!1),A=c()(I,2),H=A[0],r=A[1];return(0,s.useImperativeHandle)(a,function(){return{}}),(0,n.jsx)(X.a,{submitter:!1,title:(0,i.fi)(l.containerInfo.Name,"/")+" - \u6587\u4EF6\u7BA1\u7406",onOpenChange:function(y){r(y)},trigger:(0,n.jsx)(k.Z.Link,{children:(0,n.jsx)(Y.Z,{})},"file"),children:H&&(0,n.jsx)(te.Z,{md5:l.containerInfo.Id,initPath:(o=l.containerInfo.Config.WorkingDir)!==null&&o!==void 0?o:"/"})})}),u=E,U=e(43831),R=e(52209),t=(0,s.forwardRef)(function(l,a){(0,s.useImperativeHandle)(a,function(){return{}});var o=(0,s.useState)(!1),I=c()(o,2),A=I[0],H=I[1];return(0,n.jsx)(X.a,{submitter:!1,title:(0,i.fi)(l.containerInfo.Name,"/")+" - \u7F51\u7EDC\u7BA1\u7406",onOpenChange:function(re){H(re)},open:A,trigger:(0,n.jsx)(k.Z.Link,{children:(0,n.jsx)(R.Z,{})},"file"),children:(0,n.jsx)(U.Z,{ghost:!0,containerInfo:l.containerInfo})})}),x=t,C=e(81146),q=e(45742),ae=e(62597),D=(0,s.forwardRef)(function(l,a){(0,s.useImperativeHandle)(a,function(){return{show:function(K){return j()(_()().mark(function m(){var P;return _()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,Z.jV)({md5:K});case 2:P=O.sent,P.data&&le(P.data.info),H(!0);case 5:case"end":return O.stop()}},m)}))()}}});var o=(0,s.useState)(!1),I=c()(o,2),A=I[0],H=I[1],r=(0,s.useState)(),re=c()(r,2),y=re[0],le=re[1],se=(0,s.useRef)();return(0,n.jsxs)(n.Fragment,{children:[l.showTriggerButton&&(0,n.jsx)(k.Z.Link,{onClick:j()(_()().mark(function S(){return _()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:le(l.containerInfo),H(!0);case 2:case"end":return m.stop()}},S)})),children:(0,n.jsx)(W.Z,{title:"\u8FD0\u884C\u65E5\u5FD7",children:(0,n.jsx)(q.Z,{})})},"log"),(0,n.jsx)(N.Z,{title:"\u5BB9\u5668\u65E5\u5FD7",open:A,forceRender:!0,onClose:function(){H(!1)},afterOpenChange:function(K){if(K)setTimeout(function(){var P,v;(P=se.current)===null||P===void 0||P.start(),(v=se.current)===null||v===void 0||v.fit()},1e3);else{var m;(m=se.current)===null||m===void 0||m.close()}},width:800,children:y&&A&&(0,n.jsx)(C.Z,{ref:se,showInDrawer:!0,id:"container:log:".concat(y==null?void 0:y.Id),request:function(){var S=j()(_()().mark(function K(m){var P;return _()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,ae.Tb)({id:(P=y.Id)!==null&&P!==void 0?P:"",lineTotal:m.lineTotal,download:m.download,showTime:m.showTime});case 2:case"end":return O.stop()}},K)}));return function(K){return S.apply(this,arguments)}}(),download:function(){var S=j()(_()().mark(function K(m){var P,v,O,T;return _()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,(0,ae.XH)({id:(P=y.Id)!==null&&P!==void 0?P:"",lineTotal:m.lineTotal,showTime:m.showTime});case 2:return O=B.sent,B.next=5,(0,Z.jV)({md5:(v=y.Id)!==null&&v!==void 0?v:""});case 5:return T=B.sent,B.abrupt("return",{data:new Blob([O],{type:"text/plain"}),name:T.data.info.Name.replaceAll("/","")+"_"+new Date().toLocaleDateString()+".log"});case 7:case"end":return B.stop()}},K)}));return function(K){return S.apply(this,arguments)}}()})})]})}),M=D,d=e(65913),p=e(14245),g=(0,s.forwardRef)(function(l,a){var o;(0,s.useImperativeHandle)(a,function(){return{show:function(P){return j()(_()().mark(function v(){return _()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return S(!0),T.next=3,K(P);case 3:case"end":return T.stop()}},v)}))()}}});var I=(0,s.useRef)(),A=(0,s.useState)(),H=c()(A,2),r=H[0],re=H[1],y=(0,s.useState)(!1),le=c()(y,2),se=le[0],S=le[1],K=function(){var m=j()(_()().mark(function P(v){var O,T;return _()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return(O=I.current)===null||O===void 0||O.show(),B.next=3,(0,Z.jV)({md5:v}).finally(function(){var oe;(oe=I.current)===null||oe===void 0||oe.destroy()});case 3:T=B.sent,T.data&&(T.data.info.HostConfig.NetworkMode=="host"&&T.data.info.Config.ExposedPorts&&Object.keys(T.data.info.Config.ExposedPorts).map(function(oe){T.data.info.NetworkSettings.Ports[oe]=[{HostIp:"0.0.0.0",HostPort:oe.substring(0,oe.indexOf("/"))}]}),re(T.data));case 5:case"end":return B.stop()}},P)}));return function(v){return m.apply(this,arguments)}}();return(0,n.jsx)(N.Z,{title:"\u5FEB\u6377\u67E5\u770B\u5BB9\u5668 - ".concat((0,i.fi)((o=r==null?void 0:r.info.Name)!==null&&o!==void 0?o:"","/")),open:se,onClose:function(){S(!1),l.onFinish&&l.onFinish()},width:800,extra:(0,n.jsxs)(w.Z,{split:(0,n.jsx)(L.Z,{type:"vertical"}),children:[(r==null?void 0:r.info)&&(0,n.jsx)(u,{containerInfo:r.info}),(r==null?void 0:r.info)&&(0,n.jsx)(x,{containerInfo:r.info}),(r==null?void 0:r.info)&&(0,n.jsx)(M,{containerInfo:r.info,showTriggerButton:!0}),(0,n.jsx)(W.Z,{title:"\u67E5\u770B\u5B8C\u6574\u4FE1\u606F",children:(0,n.jsx)($.Link,{to:"/app/detail/edit/"+(r==null?void 0:r.info.Id),children:(0,n.jsx)(b.Z,{})},"detail")})]}),children:(0,n.jsx)(d.Z,{ref:I,children:(0,n.jsxs)(f.Z,{vertical:!0,gap:20,children:[r&&(0,n.jsx)(J.Z,{ghost:!0,data:r==null?void 0:r.info,onFinish:j()(_()().mark(function m(){return _()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,K(r.info.Id);case 2:return v.t0=v.sent,v.abrupt("return",[v.t0]);case 4:case"end":return v.stop()}},m)}))}),r&&(0,n.jsx)(ne.Z,{ghost:!0,data:r,checkContainerUpgrade:function(){S(!1),l.onUpgradeFinish&&l.onUpgradeFinish()}}),r&&(0,n.jsx)(F.Z,{data:r,ghost:!0}),(0,n.jsx)(ee.Z,{data:r==null?void 0:r.info,ghost:!0}),r&&(0,n.jsx)(p.Z,{data:r.info,ghost:!0})]})})})}),h=g},81146:function(ie,V,e){var G=e(15009),c=e.n(G),z=e(99289),_=e.n(z),Q=e(97857),j=e.n(Q),s=e(67294),F=e(97269),Z=e(62370),$=e(5966),b=e(97462),N=e(82346),w=e(71230),L=e(15746),W=e(34041),f=e(28036),ee=e(84567),J=e(42075),ne=e(54964),te=e(80821),X=e(23430),k=e(93162),Y=e.n(k),i=e(12320),n=e.n(i),E=e(78267),u=e.n(E),U=e(75458),R=e.n(U),t=e(85893),x=new i.Terminal(j()(j()({},ne.a),{},{fontSize:12})),C=new E.FitAddon,q=new U.SearchAddon,ae=(0,s.forwardRef)(function(D,M){(0,s.useImperativeHandle)(M,function(){return{fit:function(){x.clear(),C.fit()},start:function(){return _()(c()().mark(function l(){return c()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,g({lineTotal:500});case 2:case"end":return o.stop()}},l)}))()},close:function(){p.progress.close(D.id)}}});var d=(0,s.useRef)(),p=(0,N.useModel)("subscriber");p.addDataHandler(D.id,function(h){x.write(h.data.replaceAll(`
`,`

`))});var g=function(){var h=_()(c()().mark(function l(a){return c()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return x.clear(),a.download=!1,I.next=4,D.request(a);case 4:case"end":return I.stop()}},l)}));return function(a){return h.apply(this,arguments)}}();return(0,s.useEffect)(function(){return window.addEventListener("resize",function(){C.fit()}),x.loadAddon(C),x.open(document.getElementById("terminal-container-log")),C.fit(),function(){x.clear(),x.reset(),p.progress.close(D.id)}},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(F.A,{submitter:!1,layout:"horizontal",onValuesChange:function(l,a){g({md5:D.id,lineTotal:parseInt(a.lineTotal),showTime:a.showTime})},formRef:d,children:(0,t.jsxs)(w.Z,{gutter:[10,0],children:[(0,t.jsx)(L.Z,{span:8,children:(0,t.jsx)(Z.Z,{name:"lineTotal",initialValue:"500",label:"\u83B7\u53D6\u65E5\u5FD7\u6761\u6570",children:(0,t.jsxs)(W.Z,{defaultValue:"500",children:[(0,t.jsx)(W.Z.Option,{value:"100",children:"100\u6761\u65E5\u5FD7\u6570\u636E"}),(0,t.jsx)(W.Z.Option,{value:"200",children:"200\u6761\u65E5\u5FD7\u6570\u636E"}),(0,t.jsx)(W.Z.Option,{value:"500",children:"500\u6761\u65E5\u5FD7\u6570\u636E"}),(0,t.jsx)(W.Z.Option,{value:"1000",children:"1000\u6761\u65E5\u5FD7\u6570\u636E"}),(0,t.jsx)(W.Z.Option,{value:"-1",children:"\u5168\u90E8\uFF08\u4E0B\u8F7D\u53EF\u89C1\uFF09"})]})})}),(0,t.jsx)(L.Z,{children:(0,t.jsx)(f.ZP,{onClick:function(){x.clear()},children:"\u6E05\u5C4F"})}),(0,t.jsx)(L.Z,{children:(0,t.jsx)(Z.Z,{name:"showTime",valuePropName:"checked",children:(0,t.jsx)(ee.Z,{children:"\u663E\u793A\u65F6\u95F4"})})}),(0,t.jsx)(L.Z,{children:(0,t.jsx)($.Z,{label:"\u67E5\u627E",name:"keywork"})}),(0,t.jsx)(L.Z,{children:(0,t.jsx)(b.Z,{name:["keywork"],children:function(l){var a=l.keywork;return(0,t.jsxs)(J.Z,{size:10,children:[(0,t.jsx)(f.ZP,{onClick:function(){q.findNext(a)},children:"\u4E0B\u4E00\u4E2A"},"next"),(0,t.jsx)(f.ZP,{onClick:function(){q.findPrevious(a)},children:"\u4E0A\u4E00\u4E2A"},"prev")]})}})}),(0,t.jsx)(L.Z,{children:(0,t.jsx)(te.Z,{icon:(0,t.jsx)(X.Z,{}),action:_()(c()().mark(function h(){var l,a,o;return c()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(!D.download){A.next=5;break}return A.next=3,D.download({lineTotal:parseInt((l=d.current)===null||l===void 0?void 0:l.getFieldValue("lineTotal")),showTime:(a=d.current)===null||a===void 0?void 0:a.getFieldValue("showTime")});case 3:o=A.sent,(0,k.saveAs)(o.data,o.name);case 5:case"end":return A.stop()}},h)})),children:"\u4E0B\u8F7D\u65E5\u5FD7"})})]})}),(0,t.jsx)("div",{style:{marginTop:"20px",height:D.showInDrawer?"75vh":"580px"},id:"terminal-container-log"})]})});V.Z=ae},46442:function(ie,V,e){var G=e(15009),c=e.n(G),z=e(99289),_=e.n(z),Q=e(5574),j=e.n(Q),s=e(67294),F=e(14946),Z=e(64789),$=e(78099),b=e(28036),N=e(85265),w=e(42075),L=e(66309),W=e(28230),f=e(85893),ee=(0,s.forwardRef)(function(J,ne){(0,s.useImperativeHandle)(ne,function(){return{show:function(){Y(!0)}}});var te=(0,s.useState)(!1),X=j()(te,2),k=X[0],Y=X[1],i=(0,s.useRef)();return(0,f.jsxs)(f.Fragment,{children:[J.showTriggerButton&&(0,f.jsx)(b.ZP,{onClick:function(){Y(!0)},children:"\u52A0\u5165\u7F51\u7EDC"}),(0,f.jsx)(N.Z,{title:"\u9009\u62E9\u7F51\u7EDC",width:800,footer:!1,open:k,onClose:function(){return Y(!1)},extra:(0,f.jsx)(w.Z,{children:(0,f.jsx)(W.Z,{onFinish:function(){var E,u;!((E=i.current)===null||E===void 0)&&E.reloadAndRest&&((u=i.current)===null||u===void 0||u.reloadAndRest())}},"create")}),children:(0,f.jsx)($.Z,{rowKey:"Name",toolBarRender:!1,actionRef:i,columns:[{title:"\u540D\u79F0",dataIndex:"Name",render:function(E,u,U,R,t){return u.Name=="none"||u.Name=="bridge"||u.Name=="host"?(0,f.jsxs)(f.Fragment,{children:[u.Name," ",(0,f.jsx)(L.Z,{color:"blue",children:"System"})]}):(0,f.jsx)(f.Fragment,{children:E})}},{title:"\u7C7B\u578B",ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"IPAM Driver",ellipsis:!0,width:120,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4 IPAM Network",search:!1,dataIndex:["IPAM","Config",0,"Subnet"],render:function(E,u,U,R,t){return(0,f.jsxs)(w.Z,{children:[u.IPAM.Config&&u.IPAM.Config[0]&&"".concat(u.IPAM.Config[0].Subnet," - ").concat(u.IPAM.Config[0].Gateway),u.IPAM.Config&&u.IPAM.Config[1]&&"".concat(u.IPAM.Config[1].Subnet," - ").concat(u.IPAM.Config[1].Gateway)]})}},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(E,u,U,R,t){return[u.Name!="none"&&u.Name!="bridge"&&u.Name!="host"&&(0,f.jsx)(b.ZP,{type:"link",onClick:function(){J.onSelect(u),Y(!1)},children:(0,f.jsx)(Z.Z,{})},u.Id)]}}],request:function(){var n=_()(c()().mark(function E(u,U,R){var t;return c()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,F.jR)({name:u.Name});case 2:return t=C.sent,C.abrupt("return",{data:t.data.list,success:!0,total:t.data.list.length});case 4:case"end":return C.stop()}},E)}));return function(E,u,U){return n.apply(this,arguments)}}(),pagination:{pageSize:10}})})]})});V.Z=ee},65913:function(ie,V,e){var G=e(5574),c=e.n(G),z=e(74330),_=e(67294),Q=e(85893),j=(0,_.forwardRef)(function(s,F){(0,_.useImperativeHandle)(F,function(){return{show:function(){N(!0)},destroy:function(){N(!1)}}});var Z=(0,_.useState)(!1),$=c()(Z,2),b=$[0],N=$[1];return(0,Q.jsx)(z.Z,{spinning:b,size:"default",children:s.children})});V.Z=j}}]);
