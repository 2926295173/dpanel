"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1050],{80821:function(Q,L,a){a.d(L,{Z:function(){return h}});var R=a(5574),E=a.n(R),V=a(24963),O=a(86738),M=a(28036),t=a(83062),U=a(67294),g=a(85893);function h(n){var W=(0,U.useState)(!1),B=E()(W,2),w=B[0],s=B[1],K=(0,U.useContext)(V.Z),d=K.lang,u=K.notice,T=K.message,A=function(){s(!0);var ae=n.action();ae instanceof Promise?ae.then(function(I){if(s(!1),I){typeof n.onSuccess=="function"&&n.onSuccess(I);var N="";n.messageSuccess?typeof n.messageSuccess=="function"?N=n.messageSuccess(I):N=n.messageSuccess.indexOf("notification.")==0?d(n.messageSuccess):n.messageSuccess:N=d("notification.finish"),n.asynced?T.info(N):T.success(N)}}).catch(function(I){s(!1),typeof n.onError=="function"&&n.onError(I)}):s(!1)};return n.confirm?(0,g.jsx)(O.Z,{style:{width:500},title:n.confirmTitle?n.confirmTitle:d("notification.title.tip"),description:typeof n.confirm=="string"&&n.confirm.indexOf("notification.")==0?d(n.confirm):n.confirm,onConfirm:A,okText:"Yes",cancelText:"No",onOpenChange:n.confirmOnOpenChange,children:(0,g.jsx)(M.ZP,{block:n.block,disabled:n.disabled,icon:!n.children&&w?void 0:n.icon,loading:w,danger:n.danger,type:n.type,children:n.children})}):(0,g.jsx)(t.Z,{title:n.tips,children:(0,g.jsx)(M.ZP,{block:n.block,style:n.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:n.disabled,icon:!n.children&&w?void 0:n.icon,loading:w,onClick:A,danger:n.danger,type:n.type,children:n.children})})}},44349:function(Q,L,a){var R=a(97857),E=a.n(R),V=a(17186),O=a(5966),M=a(86250),t=a(67294),U=a(85893),g=(0,t.forwardRef)(function(h,n){var W=(0,t.useRef)();(0,t.useImperativeHandle)(n,function(){return{addItem:function(s,K){var d,u=(d=W.current)===null||d===void 0?void 0:d.getList(),T=!1;if(u==null||u.map(function(e){if(e.name==s){T=!0;return}}),!T){var A;(A=W.current)===null||A===void 0||A.add({name:s,value:K})}},clear:function(){var s;(s=W.current)===null||s===void 0||(s=s.getList())===null||s===void 0||s.map(function(K,d){var u;(u=W.current)===null||u===void 0||u.remove(d)})}}});var B={};return h.hideCopyButton===!0&&(B.copyIconProps=!1),h.hideDeleteButton===!0&&(B.deleteIconProps=!1),(0,U.jsx)(V.u,E()(E()({initialValue:h.initialValue,label:h.label,name:h.name,actionRef:W,creatorButtonProps:h.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(h.label?h.label:h.name)}:!1,min:h.min?h.min:0},B),{},{children:function(s,K,d){return(0,U.jsx)(M.Z,{justify:h.justify,gap:h.gap,children:h.items.map(function(u){return u.render?(0,U.jsx)("div",{children:u.render&&u.render(s,K,d)},"".concat(h.name,"-").concat(u.name,"-").concat(s.key)):(0,U.jsx)(O.Z,{width:u.width,name:u.name,label:u.label,required:u.required,rules:[{required:u.required}],disabled:u.disabled,placeholder:u.placeholder},"".concat(h.name,"-").concat(u.name,"-").concat(s.key))})})}}))});L.Z=g},34879:function(Q,L,a){a.d(L,{Z:function(){return M}});var R=a(97961),E=a(91604),V=a(1677),O=a(85893);function M(t){return t.showDragger?(0,O.jsx)(E.Z,{max:t.max?t.max:1,title:t.title,label:t.label,required:t.required,rules:[{required:t.required}],fieldProps:{multiple:!!(t.max&&t.max>1),name:"file",accept:t.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(g){return new Promise(function(h){var n;(0,R._2)({path:(n=g.response.data.path)!==null&&n!==void 0?n:""}).then(function(W){h(!0)})})}},name:t.name}):(0,O.jsx)(V.Z,{max:t.max?t.max:1,title:t.title,label:t.label,required:t.required,rules:[{required:t.required}],fieldProps:{multiple:!!(t.max&&t.max>1),name:"file",accept:t.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(g){return new Promise(function(h){var n;(0,R._2)({path:(n=g.response.data.path)!==null&&n!==void 0?n:""}).then(function(W){h(!0)})})}},name:t.name})}},2808:function(Q,L,a){a.d(L,{Z:function(){return U}});var R=a(97857),E=a.n(R),V=a(62370),O=a(51663),M=a(67294),t=a(85893);function U(g){return(0,t.jsx)(V.Z,E()(E()({},g),{},{children:(0,t.jsx)(O.Z,{showText:function(n){return n.toHexString()},allowClear:!0,presets:[{label:"\u9884\u8BBE\u989C\u8272",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},24963:function(Q,L,a){var R=a(67294),E=(0,R.createContext)({});L.Z=E},60737:function(Q,L,a){a.r(L),a.d(L,{default:function(){return Ue}});var R=a(5574),E=a.n(R),V=a(19632),O=a.n(V),M=a(15009),t=a.n(M),U=a(99289),g=a.n(U),h=a(24963),n=a(87662),W=a(88641),B=a(38345),w=a(97269),s=a(5966),K=a(63434),d=a(67294),u=a(42075),T=a(80821),A=a(68602),e=a(85893);function ae(){var x=(0,d.useRef)(),_=(0,d.useContext)(h.Z),S=_.message,i=function(){var z=g()(t()().mark(function D(){var o,P,F,y,j,k,Z;return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,n.pe)({groupName:"setting",name:"emailServer"});case 2:Z=r.sent,Z.data.setting.value.emailServer&&((o=x.current)===null||o===void 0||o.setFieldsValue({host:(P=Z.data.setting.value.emailServer.host)!==null&&P!==void 0?P:"",port:(F=Z.data.setting.value.emailServer.port)!==null&&F!==void 0?F:"",email:(y=Z.data.setting.value.emailServer.email)!==null&&y!==void 0?y:"",code:(j=Z.data.setting.value.emailServer.code)!==null&&j!==void 0?j:"",status:(k=Z.data.setting.value.emailServer.status)!==null&&k!==void 0?k:[]}));case 4:case"end":return r.stop()}},D)}));return function(){return z.apply(this,arguments)}}();return(0,e.jsx)(B.Z,{direction:"column",gutter:[0,10],ghost:!0,children:(0,e.jsx)(B.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(W.Z,{}),subTitle:"\u90AE\u4EF6\u670D\u52A1",children:(0,e.jsxs)(w.A,{layout:"horizontal",labelAlign:"right",labelCol:{span:3,offset:0},formRef:x,onInit:g()(t()().mark(function z(){return t()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return i(),o.abrupt("return",!0);case 2:case"end":return o.stop()}},z)})),submitter:{render:function(D,o){return[].concat(O()(o),[(0,e.jsx)(T.Z,{messageSuccess:"\u6D4B\u8BD5\u90AE\u4EF6\u5DF2\u53D1\u9001\u81F3\u53D1\u4EF6\u90AE\u7BB1\uFF0C\u5982\u672A\u6536\u5230\uFF0C\u8BF7\u68C0\u67E5\u90AE\u7BB1\u914D\u7F6E\u662F\u5426\u6B63\u786E",action:g()(t()().mark(function P(){var F;return t()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,A.jC)((F=x.current)===null||F===void 0?void 0:F.getFieldsValue());case 2:return j.abrupt("return",j.sent);case 3:case"end":return j.stop()}},P)})),children:"\u6D4B\u8BD5"},"testEmail")])}},onFinish:function(){var z=g()(t()().mark(function D(o){var P,F;return t()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return F={groupName:"setting",name:"emailServer",value:{emailServer:{host:o.host,port:o.port,email:o.email,code:o.code}}},j.next=3,(0,n.KU)(F);case 3:return(P=x.current)===null||P===void 0||P.resetFields(),i(),S.success("\u4FEE\u6539\u90AE\u4EF6\u914D\u7F6E\u6210\u529F"),j.abrupt("return",!0);case 7:case"end":return j.stop()}},D)}));return function(D){return z.apply(this,arguments)}}(),children:[(0,e.jsx)(s.Z,{label:"SMTP\u670D\u52A1\u5668\u5730\u5740",name:"host",placeholder:"\u4F8B\u5982:smtp.163.com",required:!0,rules:[{required:!0}]}),(0,e.jsx)(s.Z,{label:"SMTP\u670D\u52A1\u5668\u7AEF\u53E3",name:"port",placeholder:"\u53D1\u9001\u90AE\u4EF6\u7AEF\u53E3\uFF0C\u901A\u5E38\u4E3A465",required:!0,rules:[{required:!0}]}),(0,e.jsx)(s.Z,{label:"SMTP\u6388\u6743\u7801",name:"code",width:"lg",placeholder:"SMTP\u6388\u6743\u7801",required:!0,rules:[{required:!0}],addonAfter:(0,e.jsxs)(u.Z,{children:[(0,e.jsx)("a",{target:"_blank",href:"https://service.mail.qq.com/detail/0/75",children:"QQ\u90AE\u7BB1\u6388\u6743\u7801"}),(0,e.jsx)("a",{target:"_blank",href:"https://help.mail.163.com/faqDetail.do?code=d7a5dc8471cd0c0e8b4b8f4f8e49998b374173cfe9171305fa1ce630d7f67ac286624f309a1a7089",children:"163\u90AE\u7BB1\u6388\u6743\u7801"})]})}),(0,e.jsx)(s.Z,{label:"\u53D1\u4EF6\u90AE\u7BB1",name:"email",placeholder:"\u53D1\u4EF6\u90AE\u7BB1\u5730\u5740",required:!0,rules:[{required:!0}]}),(0,e.jsx)(s.Z,{label:"\u90AE\u4EF6\u6807\u9898",name:"subject",placeholder:"\u90AE\u4EF6\u6807\u9898",required:!0,rules:[{required:!0}]}),(0,e.jsx)(K.Z.Group,{name:"status",label:"\u5F00\u542F\u529F\u80FD",options:[{label:"\u6CE8\u518C",value:"register"}]})]})})})}var I=a(82346);function N(x){return re.apply(this,arguments)}function re(){return re=g()(t()().mark(function x(_){return t()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,I.request)("/api/pro/two-fa/enable",{method:"POST",data:_}));case 1:case"end":return i.stop()}},x)})),re.apply(this,arguments)}function me(){return le.apply(this,arguments)}function le(){return le=g()(t()().mark(function x(){return t()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",(0,I.request)("/api/pro/two-fa/get-setting",{method:"POST"}));case 1:case"end":return S.stop()}},x)})),le.apply(this,arguments)}var fe=a(29177),he=a(86548),ve=a(97937),ge=a(12119),X=a(97462),se=a(52688),q=a(62370),ue=a(28036),be=a(35930);function Ee(){var x=(0,d.useRef)(),_=(0,I.useModel)("@@initialState"),S=_.initialState,i=_.loading,z=_.error,D=_.refresh,o=_.setInitialState,P=(0,d.useContext)(h.Z),F=P.message,y=P.notice,j=P.lang,k=(0,d.useRef)(),Z=(0,d.useState)(0),p=E()(Z,2),r=p[0],m=p[1],v=(0,I.useAccess)();return(0,d.useEffect)(function(){!v.canSeeEnableCe&&me().then(function(l){var f;(f=k.current)===null||f===void 0||f.setFieldsValue({enable:l.data.enable,email:l.data.email,qrcode:l.data.qrcode})})},[r]),(0,e.jsxs)(B.Z,{direction:"column",gutter:[0,10],ghost:!0,children:[(0,e.jsx)(B.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(fe.Z,{}),subTitle:"\u7BA1\u7406\u5458",children:(0,e.jsxs)(w.A,{layout:"horizontal",labelAlign:"right",labelCol:{span:3,offset:0},formRef:x,onFinish:function(){var l=g()(t()().mark(function f(c){var b,C;return t()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,n.Jn)({username:c.username,password:c.password,newPassword:c.newPassword});case 2:if(b=$.sent,!(b&&b.data)){$.next=9;break}return(C=x.current)===null||C===void 0||C.resetFields(),F.success("\u4FEE\u6539\u7BA1\u7406\u5458\u7528\u6237\u540D\u548C\u5BC6\u7801\u6210\u529F"),localStorage.removeItem("token"),D(),$.abrupt("return",!0);case 9:case"end":return $.stop()}},f)}));return function(f){return l.apply(this,arguments)}}(),children:[(0,e.jsx)(X.Z,{name:["enableUsername"],children:function(f){var c=f.enableUsername;return(0,e.jsx)(s.Z,{label:"\u7528\u6237\u540D",name:"username",style:{width:"80%"},initialValue:S==null?void 0:S.user.username,disabled:!c,addonAfter:[(0,e.jsx)(ue.ZP,{type:"link",hidden:!!c,icon:(0,e.jsx)(he.Z,{}),onClick:function(){var C;(C=x.current)===null||C===void 0||C.setFieldValue("enableUsername",!0)}},"editBtn"),(0,e.jsx)(ue.ZP,{type:"link",hidden:!c,icon:(0,e.jsx)(ve.Z,{}),onClick:function(){var C;(C=x.current)===null||C===void 0||C.setFieldValue("enableUsername",!1)}},"closeBtn")]},"username")}}),(0,e.jsx)(s.Z.Password,{label:"\u5F53\u524D\u5BC6\u7801",name:"password",placeholder:"\u8F93\u5165\u7BA1\u7406\u5458\u5F53\u524D\u5BC6\u7801",rules:[{required:!0}]},"password"),(0,e.jsx)(s.Z.Password,{label:"\u65B0\u5BC6\u7801",name:"newPassword"},"newPasword"),(0,e.jsx)(X.Z,{name:["newPassword"],children:function(f){var c=f.newPassword;return(0,e.jsx)(s.Z.Password,{label:"\u786E\u8BA4\u65B0\u5BC6\u7801",name:"newPassword2",dependencies:["newPassword"],rules:[{required:typeof c!="undefined"&&c!=""},function(b){var C=b.getFieldValue;return{validator:function($,ce){return!ce||C("newPassword")===ce?Promise.resolve():Promise.reject(new Error("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4"))}}}]},"newPasword2")}})]})}),!v.canSeeEnableCe&&(0,e.jsx)(B.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(ge.Z,{}),subTitle:"\u767B\u5F55\u53CC\u56E0\u7D20\u914D\u7F6E",children:(0,e.jsxs)(w.A,{onFinish:function(){var l=g()(t()().mark(function f(c){var b,C;return t()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,N({email:c.email,enable:c.enable});case 2:b=$.sent,b&&b.data.qrcode&&((C=k.current)===null||C===void 0||C.setFieldValue("qrcode",b.data.qrcode)),m(r+1);case 5:case"end":return $.stop()}},f)}));return function(f){return l.apply(this,arguments)}}(),formRef:k,layout:"horizontal",labelAlign:"right",labelCol:{span:3,offset:0},children:[(0,e.jsx)(se.Z,{label:"\u5F00\u542F",name:"enable"}),(0,e.jsx)(s.Z,{label:"\u90AE\u7BB1",name:"email",placeholder:"\u8BF7\u8F93\u5165\u4F60\u7684\u90AE\u7BB1",rules:[{required:!0},{type:"email"}]}),(0,e.jsx)(q.Z,{name:"qrcode",hidden:!0}),(0,e.jsx)(X.Z,{name:["qrcode"],children:function(f){var c=f.qrcode;if(c)return(0,e.jsx)(q.Z,{label:"\u7ED1\u5B9A\u4E8C\u7EF4\u7801",tooltip:"\u4F7F\u7528\u652F\u6301 2fa \u7684\u9A8C\u8BC1 App \u626B\u7801\u8BE5\u4E8C\u7EF4\u7801",children:(0,e.jsx)(be.Z,{style:{border:"#d1d9e0b3 solid 1px",padding:"10px",borderRadius:"10px"},width:200,src:"data:image/png;base64,".concat(c)})})}})]})})]})}var pe={xs:6,sm:6,md:6,lg:3,xl:3,xxl:3,offset:0},oe=a(43425),ee=a(86615),je=a(64317),de=a(86125),xe=a(184),G=a(24739),_e=a(25054),ne=a(31199),Ce=a(90672),Se=a(9361),Pe=a(21532),Fe=a(86250),ie=a(34879),Be=a(44349),te=a(65451),Ae=a(2808),J=function(_){return(0,e.jsx)(Ae.Z,{name:_.name,label:_.label,tooltip:_.tooltip})},Y={colorPrimary:"",colorTextBase:"",colorLink:"",colorBgContainer:"",colorBorder:"",colorBgElevated:"",colorBorderSecondary:"colorBorder"},ye=["borderRadius","wireframe"],Ze=(0,d.forwardRef)(function(x,_){(0,d.useImperativeHandle)(_,function(){return{show:function(){D(!0)},reset:function(){var p;(p=o.current)===null||p===void 0||p.resetFields(["siteLogo","siteTitle","siteCopyright","siteLink","bgImage","bgSize"])}}});var S=(0,d.useState)(!1),i=E()(S,2),z=i[0],D=i[1],o=(0,d.useRef)(),P=(0,d.useContext)(h.Z),F=P.message,y=P.lang,j=Se.Z.useToken(),k=j.token;return(0,e.jsx)(Pe.ZP,{children:(0,e.jsxs)(xe.a,{drawerProps:{forceRender:!0},submitter:{render:function(p,r){return(0,e.jsx)(u.Z,{children:r[1]})}},title:"\u81EA\u5B9A\u4E49\u4E3B\u9898",formRef:o,open:z,onOpenChange:function(p){var r;(r=o.current)===null||r===void 0||r.resetFields(["bgImageUpload","siteLogoUpload"]),p&&((0,te.Py)().then(function(m){var v=m.data.config;if(v){var l;if((l=o.current)===null||l===void 0||l.setFieldsValue({siteLogo:v.siteLogo,siteTitle:v.siteTitle,siteCopyright:v.siteCopyright,siteLink:v.siteLink,bgImage:v.bgImage,loginLogo:v.loginLogo}),!v.bgImage||!v.bgImage.width||v.bgImage.width=="100%"){var f;(f=o.current)===null||f===void 0||f.setFieldValue("bgSize","full")}else{var c;(c=o.current)===null||c===void 0||c.setFieldValue("bgSize","default")}}}),Object.keys(Y).map(function(m){var v=m;Y[m]!=""&&(v=Y[m]),o!=null&&o.current&&(o==null||o.current.setFieldValue(m,k[v]))})),D(p)},name:"theme-user",onFinish:function(){var Z=g()(t()().mark(function p(r){var m,v,l;return t()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return l={token:{},bgImage:r.bgImage,siteLink:r.siteLink,siteTitle:(m=r.siteTitle)!==null&&m!==void 0?m:"",siteCopyright:r.siteCopyright,siteLogo:(v=r.siteLogo)!==null&&v!==void 0?v:"",loginLogo:r.loginLogo},r.siteLogoUpload&&r.siteLogoUpload.length>0&&(l.siteLogo=r.siteLogoUpload[0].response.data.path),l.bgImage||(l.bgImage={}),r.bgImageUpload&&r.bgImageUpload.length>0&&(l.bgImage.src=r.bgImageUpload[0].response.data.path),l.bgImage.width=r.bgSize=="full"?"100%":"",r.loginLogoUpload&&r.loginLogoUpload.length>0&&(l.loginLogo=r.loginLogoUpload[0].response.data.path),Object.keys(Y).map(function(b){l.token||(l.token={});var C=b;Y[b]!=""&&(C=Y[b]);var H=o.current&&o.current.getFieldValue(C);H&&H.toHexString?H.cleared||(l.token[b]=H.toHexString()):l.token[b]=H}),ye.map(function(b){l.token||(l.token={});var C=o.current&&o.current.getFieldValue(b);l.token[b]=C}),c.next=10,(0,te.Z8)(l);case 10:return x.onFinish&&x.onFinish(),F.success(y("notification.finishTheme")),c.abrupt("return",!0);case 13:case"end":return c.stop()}},p)}));return function(p){return Z.apply(this,arguments)}}(),children:[(0,e.jsx)(G.UW,{title:"\u76AE\u80A4\u8272\u7CFB",children:J({name:"colorPrimary",label:"\u54C1\u724C\u8272",tooltip:"\u54C1\u724C\u8272\u662F\u4F53\u73B0\u4EA7\u54C1\u7279\u6027\u548C\u4F20\u64AD\u7406\u5FF5\u6700\u76F4\u89C2\u7684\u89C6\u89C9\u5143\u7D20\u4E4B\u4E00\u3002\u5728\u4F60\u5B8C\u6210\u54C1\u724C\u4E3B\u8272\u7684\u9009\u53D6\u4E4B\u540E\uFF0C\u4F1A\u81EA\u52A8\u5E2E\u4F60\u751F\u6210\u4E00\u5957\u5B8C\u6574\u7684\u8272\u677F\uFF0C\u5E76\u8D4B\u4E88\u5B83\u4EEC\u6709\u6548\u7684\u8BBE\u8BA1\u8BED\u4E49"})}),(0,e.jsxs)(G.UW,{children:[J({name:"colorBgContainer",label:"\u4E3B\u7A97\u53E3\u80CC\u666F\u8272\u53CA\u900F\u660E\u5EA6"}),J({name:"colorBgElevated",label:"\u5F39\u51FA\u7A97\u80CC\u666F\u8272\u53CA\u900F\u660E\u5EA6"})]}),(0,e.jsxs)(G.UW,{children:[J({name:"colorTextBase",label:"\u57FA\u7840\u6587\u672C"}),J({name:"colorLink",label:"\u94FE\u63A5\u6587\u672C"}),J({name:"colorBorder",label:"\u8FB9\u6846\u8272"})]}),(0,e.jsx)(G.UW,{title:"\u98CE\u683C",children:(0,e.jsxs)(Fe.Z,{gap:40,children:[(0,e.jsx)(se.Z,{label:"\u7EBF\u6846\u5316",name:"wireframe",initialValue:!1}),(0,e.jsx)(_e.Z,{min:1,max:16,label:"\u5706\u89D2",initialValue:6,name:"borderRadius"})]})}),(0,e.jsx)(G.UW,{title:"\u9762\u677F"}),(0,e.jsx)(s.Z,{label:"\u6807\u9898",name:"siteTitle",placeholder:"\u5C55\u793A\u5728\u9762\u677F\u5DE6\u4E0A\u89D2\u53CA\u9875\u9762\u6807\u7B7E\uFF0C\u4E3A\u7A7A\u5219\u4E0D\u663E\u793A"}),(0,e.jsxs)(G.UW,{children:[(0,e.jsx)(ie.Z,{label:"Logo",title:"\u4E0A\u4F20 Logo",name:"siteLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(s.Z,{width:"md",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u8FDC\u7A0BUrl",name:"siteLogo"})]}),(0,e.jsxs)(G.UW,{children:[(0,e.jsx)(ie.Z,{label:"\u80CC\u666F\u56FE",title:"\u4E0A\u4F20\u80CC\u666F\u56FE",name:"bgImageUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(s.Z,{width:"md",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u8FDC\u7A0BUrl",name:["bgImage","src"]}),(0,e.jsx)(ee.Z.Group,{name:"bgSize",label:"\u5C3A\u5BF8",initialValue:"full",valueEnum:{full:"\u5168\u5C4F",default:"\u9ED8\u8BA4"}})]}),(0,e.jsx)(G.UW,{children:(0,e.jsx)(X.Z,{name:["bgSize"],children:function(p){var r=p.bgSize;if(r=="default")return(0,e.jsxs)(G.UW,{children:[(0,e.jsx)(ne.Z,{width:"xs",name:["bgImage","top"],label:"\u8DDD\u9876\u90E8\u504F\u79FB\u91CF"}),(0,e.jsx)(ne.Z,{width:"xs",name:["bgImage","bottom"],label:"\u8DDD\u5E95\u90E8\u504F\u79FB\u91CF"}),(0,e.jsx)(ne.Z,{width:"xs",name:["bgImage","left"],label:"\u8DDD\u5DE6\u4FA7\u504F\u79FB\u91CF"}),(0,e.jsx)(ne.Z,{width:"xs",name:["bgImage","right"],label:"\u8DDD\u53F3\u4FA7\u504F\u79FB\u91CF"})]})}})}),(0,e.jsx)(Be.Z,{name:"siteLink",label:"\u5E95\u90E8\u94FE\u63A5",showAddButton:!0,hideCopyButton:!0,gap:10,items:[{name:"title",label:"\u6587\u672C"},{name:"href",label:"\u94FE\u63A5"}]}),(0,e.jsx)(Ce.Z,{label:"\u7248\u6743\u4FE1\u606F",name:"siteCopyright"}),(0,e.jsxs)(G.UW,{title:"\u767B\u5F55\u9875",children:[(0,e.jsx)(ie.Z,{label:"Logo",title:"Logo",name:"loginLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(s.Z,{width:"md",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u8FDC\u7A0BUrl",name:"loginLogo"})]})]})})}),Te=Ze;function Oe(){var x=(0,d.useRef)(),_=(0,d.useRef)(),S=(0,I.useModel)("@@initialState"),i=S.initialState,z=S.loading,D=S.error,o=S.refresh,P=S.setInitialState,F=(0,I.useAccess)(),y=(0,d.useContext)(h.Z),j=y.message,k=y.lang,Z=(0,I.useAntdConfigSetter)();return(0,d.useEffect)(function(){var p,r,m,v,l,f,c,b;(p=x.current)===null||p===void 0||p.setFieldsValue({algorithm:(r=i==null?void 0:i.theme.algorithm)!==null&&r!==void 0?r:"default",mainMenu:(m=i==null?void 0:i.theme.mainMenu)!==null&&m!==void 0?m:"top",compact:(v=i==null?void 0:i.theme.compact)!==null&&v!==void 0?v:"default",fontSize:(l=i==null?void 0:i.theme.fontSize)!==null&&l!==void 0?l:14,fontSizeConsole:(f=i==null?void 0:i.theme.fontSizeConsole)!==null&&f!==void 0?f:12,sideMenu:(c=i==null?void 0:i.theme.sideMenu)!==null&&c!==void 0?c:"default",tablePageSize:(b=i==null?void 0:i.theme.tablePageSize)!==null&&b!==void 0?b:"20"})},[i]),(0,e.jsx)(B.Z,{direction:"column",gutter:[0,10],ghost:!0,children:(0,e.jsxs)(B.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(oe.Z,{}),subTitle:"\u57FA\u672C\u914D\u7F6E",children:[!F.canSeeEnableCe&&(0,e.jsx)(Te,{ref:_}),(0,e.jsxs)(w.A,{layout:"horizontal",labelAlign:"right",labelCol:pe,formRef:x,submitter:{render:function(r,m){return[m[1]]}},onFinish:function(){var p=g()(t()().mark(function r(m){var v;return t()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(v={algorithm:m.algorithm,mainMenu:m.mainMenu,sideMenu:m.sideMenu,compact:m.compact,fontSizeConsole:m.fontSizeConsole,fontSize:m.fontSize,tablePageSize:m.tablePageSize},!(m.algorithm!=(i==null?void 0:i.theme.algorithm)&&!F.canSeeEnableCe)){f.next=4;break}return f.next=4,(0,te.H)({clearColor:!0});case 4:return localStorage.setItem("dpanel-theme",m.algorithm),localStorage.setItem("dpanel-compact",m.compact),localStorage.setItem("dpanel-pagesize",m.tablePageSize),f.next=9,(0,A.Gk)(v);case 9:j.success(k("notification.finishTheme"));case 10:case"end":return f.stop()}},r)}));return function(r){return p.apply(this,arguments)}}(),children:[(0,e.jsx)(ee.Z.Group,{name:"algorithm",label:"\u4E3B\u9898\u76AE\u80A4",initialValue:"default",radioType:"button",valueEnum:function(){var r={default:"\u4EAE\u8272",dark:"\u6697\u8272",system:"\u8DDF\u968F\u7CFB\u7EDF"};return r}}),!F.canSeeEnableCe&&(0,e.jsx)(X.Z,{name:["algorithm"],children:function(r){var m=r.algorithm;if(m!="system")return(0,e.jsx)(q.Z,{label:"\u81EA\u5B9A\u4E49\u76AE\u80A4\u914D\u7F6E",children:(0,e.jsxs)(u.Z.Compact,{children:[(0,e.jsx)(ue.ZP,{onClick:function(){var l;(l=_.current)===null||l===void 0||l.show()},icon:(0,e.jsx)(oe.Z,{}),children:"\u914D\u7F6E"}),(0,e.jsx)(T.Z,{action:g()(t()().mark(function v(){var l;return t()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,te.H)({clearColor:!0,clearSite:!0});case 2:Z(function(b){return b.theme={token:{}},b}),(l=_.current)===null||l===void 0||l.reset(),window.location.reload();case 5:case"end":return c.stop()}},v)})),children:"\u6062\u590D\u9ED8\u8BA4"})]})})}}),(0,e.jsx)(ee.Z.Group,{name:"mainMenu",label:"\u4E3B\u83DC\u5355\u4F4D\u7F6E",initialValue:"top",radioType:"button",valueEnum:{top:"\u9876\u90E8",side:"\u4FA7\u9762"}}),(0,e.jsx)(ee.Z.Group,{name:"sideMenu",label:"\u5DE6\u4FA7\u83DC\u5355",initialValue:"default",radioType:"button",valueEnum:{default:"\u9ED8\u8BA4\u5C55\u5F00",collapse:"\u9ED8\u8BA4\u6536\u7F29"}}),(0,e.jsx)(ee.Z.Group,{name:"compact",label:"\u6587\u672C\u5E03\u5C40",initialValue:"default",radioType:"button",valueEnum:{default:"\u9ED8\u8BA4",compact:"\u7D27\u51D1"}}),(0,e.jsx)(q.Z,{name:"fontSize",label:"\u4E3B\u9898\u5B57\u53F7",initialValue:14,children:(0,e.jsx)(de.Z,{step:2,max:30,min:8,marks:{8:"8",10:"10",12:"12",14:"14",16:"16",20:"20",26:"26",30:"20"}})}),(0,e.jsx)(q.Z,{name:"fontSizeConsole",label:"\u63A7\u5236\u53F0\u5B57\u53F7",initialValue:12,children:(0,e.jsx)(de.Z,{step:2,max:30,min:8,marks:{8:"8",10:"10",12:"12",14:"14",16:"16",20:"20",26:"26",30:"20"}})}),(0,e.jsx)(je.Z,{initialValue:"20",label:"\u8868\u683C\u5206\u9875\u6570",name:"tablePageSize",valueEnum:{10:"\u6BCF\u987510\u6761",20:"\u6BCF\u987520\u6761",50:"\u6BCF\u987550\u6761",100:"\u6BCF\u9875100\u6761",all:"\u663E\u793A\u5168\u90E8"}})]})]})})}var De=a(90078),Me=a(92398);function Ue(){var x=(0,I.useSearchParams)(),_=E()(x,2),S=_[0],i=_[1],z=(0,d.useState)("user"),D=E()(z,2),o=D[0],P=D[1],F=(0,I.useAccess)();return(0,d.useEffect)(function(){var y;P((y=S.get("tab"))!==null&&y!==void 0?y:"user")},[]),(0,e.jsx)(De._z,{children:(0,e.jsx)(B.Z,{children:(0,e.jsx)(Me.Z,{activeKey:o,onChange:function(j){P(j),i("tab="+j)},items:[{key:"user",label:"\u767B\u5F55\u914D\u7F6E",children:(0,e.jsx)(Ee,{})},{key:"theme",label:"\u754C\u9762\u914D\u7F6E",children:(0,e.jsx)(Oe,{})},{key:"notice",label:"\u901A\u77E5\u670D\u52A1",children:(0,e.jsx)(ae,{})}].filter(function(y){return!(F.canSeeEnableCe&&y.key=="notice")})})})})}},97961:function(Q,L,a){a.d(L,{GH:function(){return W},MF:function(){return K},_2:function(){return w},fN:function(){return U},ii:function(){return t},vC:function(){return h}});var R=a(15009),E=a.n(R),V=a(99289),O=a.n(V),M=a(82346),t=[{name:"linux/amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"linux/arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"linux/i386",arch:"386",search:[]},{name:"linux/arm/v6",arch:"arm",search:[]},{name:"linux/arm/v7",arch:"arm",search:[]},{name:"linux/arm/v8",arch:"arm64",search:[]},{name:"linux/ppc64le",arch:"ppc64le",search:[]},{name:"linux/riscv64",arch:"riscv64",search:[]}];function U(u){return g.apply(this,arguments)}function g(){return g=O()(E()().mark(function u(T){return E()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,M.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:T}));case 1:case"end":return e.stop()}},u)})),g.apply(this,arguments)}function h(u){return n.apply(this,arguments)}function n(){return n=O()(E()().mark(function u(T){return E()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,M.request)("/api/app/image/import-by-container-tar",{method:"POST",data:T}));case 1:case"end":return e.stop()}},u)})),n.apply(this,arguments)}function W(u){return B.apply(this,arguments)}function B(){return B=O()(E()().mark(function u(T){return E()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,M.request)("/api/app/image/import-by-image-tar",{method:"POST",data:T}));case 1:case"end":return e.stop()}},u)})),B.apply(this,arguments)}function w(u){return s.apply(this,arguments)}function s(){return s=O()(E()().mark(function u(T){return E()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,M.request)("/api/common/attach/delete",{method:"POST",data:T});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},u)})),s.apply(this,arguments)}function K(){return d.apply(this,arguments)}function d(){return d=O()(E()().mark(function u(){return E()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",(0,M.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return A.stop()}},u)})),d.apply(this,arguments)}}}]);
