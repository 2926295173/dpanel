"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8878],{55809:function(A,E,e){var P=e(87462),a=e(67294),h=e(44805),l=e(84089),p=function(T,D){return a.createElement(l.Z,(0,P.Z)({},T,{ref:D,icon:h.Z}))},f=a.forwardRef(p);E.Z=f},1699:function(A,E,e){e.d(E,{u:function(){return s}});var P=e(9783),a=e.n(P),h=e(97857),l=e.n(h),p=e(67294),f=e(82346),C=e(40411),T=e(42075),D=e(85893),s=function(r){var u=(0,f.useAccess)(),v=Array.isArray(r.access)?r.access:[r.access],i,M=r.fallback;if(typeof r.children=="function"?(i=r.children(v.reduce(function(o,m){return l()(l()({},o),{},a()({},m,u[m]))},{})),i||(i=M)):v.every(function(o){return u[o]})?i=r.children:i=M,!M&&i&&r.showProTips&&u.canSeeEnableCe){if(u.canSeeEnableHiddenProTips)return null;i=(0,D.jsx)(C.Z,{offset:r.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:i})}if(!M&&i&&r.showProRibbonTips&&u.canSeeEnableCe){if(u.canSeeEnableHiddenProTips)return null;i=(0,D.jsx)(C.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:i})}return r.space?(0,D.jsx)(T.Z,l()(l()({},r.space),{},{children:i})):i}},3616:function(A,E,e){e.d(E,{Ed:function(){return l},FK:function(){return a},R_:function(){return P},ob:function(){return h}});var P=window.innerWidth<=1024?"90vw":"65vw",a="90vw",h="60vw",l="50vh"},24963:function(A,E,e){var P=e(67294),a=(0,P.createContext)({});E.Z=a},29798:function(A,E,e){e.r(E),e.d(E,{default:function(){return m}});var P=e(5574),a=e.n(P),h=e(13822),l=e(38345),p=e(82346),f=e(67294),C=e(24963),T=e(50070),D=e(37767),s=e(52031),_=e(14189),r=e(53399),u=e(14245),v=e(1699),i=e(55375),M=e(67255),o=e(85893);function m(){var W=(0,f.useContext)(C.Z),I=W.loading,j=(0,f.useContext)(T.AppDetailContext),K=(0,p.useParams)(),U=(0,f.useState)(),g=a()(U,2),c=g[0],t=g[1],d=(0,f.useState)(1),b=a()(d,2),n=b[0],z=b[1],x=(0,p.useNavigate)();return(0,f.useEffect)(function(){var B;I.show(),j.reload(),(0,h.jV)({md5:(B=K.id)!==null&&B!==void 0?B:""}).then(function(R){R.data&&(R.data.info.HostConfig.NetworkMode=="host"&&R.data.info.Config.ExposedPorts&&Object.keys(R.data.info.Config.ExposedPorts).map(function(L){R.data.info.NetworkSettings.Ports[L]=[{HostIp:"0.0.0.0",HostPort:L.substring(0,L.indexOf("/"))}]}),t(R.data))}).finally(function(){I.destroy()})},[n]),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(l.Z,{direction:"column",gutter:[0,10],children:[(c==null?void 0:c.info)&&(0,o.jsx)(_.Z,{data:c.info}),(c==null?void 0:c.info)&&(0,o.jsx)(v.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,o.jsx)(r.Z,{data:c,checkContainerUpgrade:function(){x("/app/list",{state:{page:(0,M.G$)(i.q9)}})}})}),c&&(0,o.jsx)(D.Z,{data:c}),c&&(0,o.jsx)(s.Z,{data:c==null?void 0:c.info}),c&&(0,o.jsx)(u.Z,{data:c.info})]})})}},50070:function(A,E,e){e.r(E),e.d(E,{AppDetailContext:function(){return W},default:function(){return I}});var P=e(15009),a=e.n(P),h=e(99289),l=e.n(h),p=e(5574),f=e.n(p),C=e(1699),T=e(24963),D=e(13822),s=e(36146),_=e(55809),r=e(90078),u=e(82346),v=e(25593),i=e(83622),M=e(50136),o=e(67294),m=e(85893),W=(0,o.createContext)({});function I(){var j,K=(0,o.useContext)(T.Z),U=K.loading,g=(0,u.useParams)(),c=(0,u.useSearchParams)(),t=f()(c,2),d=t[0],b=t[1],n=(j=d.get("tab"))!==null&&j!==void 0?j:"edit",z=(0,o.useState)("edit"),x=f()(z,2),B=x[0],R=x[1],L=(0,u.useNavigate)(),J=(0,o.useState)(1),F=f()(J,2),H=F[0],X=F[1],G=[{label:(0,m.jsx)(u.Link,{to:"/app/detail/edit/".concat(g.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,m.jsx)(u.Link,{to:"/app/detail/network/".concat(g.id,"?tab=network"),children:"\u7F51\u7EDC\u7BA1\u7406"}),key:"network"},{label:(0,m.jsx)(v.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){L("/app/detail/file/".concat(g.id,"?tab=file"))}},{label:(0,m.jsx)(v.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){L("/app/detail/log/".concat(g.id,"?tab=log"))}},{label:(0,m.jsx)(v.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){L("/app/detail/stat/".concat(g.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,m.jsx)(_.Z,{}),disabled:!0}],Q=(0,o.useState)(G),V=f()(Q,2),Y=V[0],q=V[1];(0,o.useEffect)(function(){U.show(),R(n);var S=function(){var Z=l()(a()().mark(function w(){var $,N,k;return a()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return $=G,O.prev=1,O.next=4,(0,D.jV)({md5:(N=g.id)!==null&&N!==void 0?N:""});case 4:k=O.sent,$.map(function(y){return y.key=="containerName"&&(y.label=k.data.info.Name),(!k.data.info.State.Running||k.data.info.State.Restarting)&&(y.key=="file"||y.key=="stat")&&(y.disabled=!0),y}),q($),O.next=13;break;case 9:return O.prev=9,O.t0=O.catch(1),L("/app/list"),O.abrupt("return");case 13:return O.prev=13,U.destroy(),O.finish(13);case 16:case"end":return O.stop()}},w,null,[[1,9,13,16]])}));return function(){return Z.apply(this,arguments)}}();S()},[H,g]);var ee=function(Z){R(Z.key)};return(0,m.jsx)(W.Provider,{value:{reload:function(){X(H+1)}},children:(0,m.jsxs)(r._z,{header:{extra:[(0,m.jsx)(C.u,{access:"canSeeContainerListManageCreate",children:(0,m.jsx)(u.Link,{to:"/app/create/image",children:(0,m.jsx)(i.ZP,{type:"primary",children:s.Ob.format("container.create")})})},"create")]},children:[(0,m.jsx)(M.Z,{mode:"horizontal",onClick:ee,selectedKeys:[B],items:Y}),(0,m.jsx)(u.Outlet,{})]})})}},62597:function(A,E,e){e.d(E,{$G:function(){return D},Ct:function(){return I},Tb:function(){return v},XH:function(){return M},cl:function(){return r},fp:function(){return _},fu:function(){return C},iE:function(){return m},nL:function(){return T},xb:function(){return K},ze:function(){return g}});var P=e(15009),a=e.n(P),h=e(99289),l=e.n(h),p=e(82346),f="com.dpanel.container.description",C="com.dpanel.container.title",T={Nanosecond:1,Microsecond:1e3,Millisecond:1e3*1e3,Second:1e3*1e3*1e3,Minute:60*1e3*1e3*1e3,Hour:3600*1e3*1e3*1e3};function D(t){return s.apply(this,arguments)}function s(){return s=l()(a()().mark(function t(d){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.request)("/api/app/site/create-by-image",{method:"POST",data:d}));case 1:case"end":return n.stop()}},t)})),s.apply(this,arguments)}var _={EnvValueRuleRequired:1,EnvValueRuleDisabled:2,EnvValueRuleRWOnly:4,EnvValueTypeNumber:1024,EnvValueTypeText:2048,EnvValueTypeSelect:4096,EnvValueTypeSelectMultiple:8192};function r(t){return u.apply(this,arguments)}function u(){return u=l()(a()().mark(function t(d){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.request)("/api/app/site/get-list",{method:"POST",data:d}));case 1:case"end":return n.stop()}},t)})),u.apply(this,arguments)}function v(t){return i.apply(this,arguments)}function i(){return i=l()(a()().mark(function t(d){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return d.download=!1,n.next=3,(0,p.request)("/api/app/log/run",{method:"POST",data:d});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},t)})),i.apply(this,arguments)}function M(t){return o.apply(this,arguments)}function o(){return o=l()(a()().mark(function t(d){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return d.download=!0,n.next=3,(0,p.request)("/api/app/log/run",{method:"POST",data:d,responseType:"blob"});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},t)})),o.apply(this,arguments)}function m(t){return W.apply(this,arguments)}function W(){return W=l()(a()().mark(function t(d){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return d.id=String(d.id),n.next=3,(0,p.request)("/api/app/site/get-detail",{data:d,method:"POST"});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},t)})),W.apply(this,arguments)}function I(t){return j.apply(this,arguments)}function j(){return j=l()(a()().mark(function t(d){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.request)("/api/app/container/delete",{method:"POST",data:d}));case 1:case"end":return n.stop()}},t)})),j.apply(this,arguments)}function K(t){return U.apply(this,arguments)}function U(){return U=l()(a()().mark(function t(d){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.request)("/api/app/site/delete",{method:"POST",data:d}));case 1:case"end":return n.stop()}},t)})),U.apply(this,arguments)}function g(t){return c.apply(this,arguments)}function c(){return c=l()(a()().mark(function t(d){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.request)("/api/app/container/ignore",{method:"POST",data:d}));case 1:case"end":return n.stop()}},t)})),c.apply(this,arguments)}},67255:function(A,E,e){e.d(E,{G$:function(){return p},LX:function(){return D},MJ:function(){return l},Oh:function(){return h},h5:function(){return C},j_:function(){return f},rj:function(){return T}});var P=e(5574),a=e.n(P);function h(s){var _=localStorage.getItem("dpanel-pagesize");return _=="all"?!1:{defaultCurrent:s==null?void 0:s.page,showSizeChanger:!0,defaultPageSize:parseInt(_!=null?_:"20"),showQuickJumper:!0}}function l(s,_){_?localStorage.setItem("dpanel-page-"+s,"".concat(_)):localStorage.removeItem("dpanel-page-"+s)}function p(s,_){var r=_?Math.ceil((_==null?void 0:_.total)/(_==null?void 0:_.pageSize)):void 0,u=localStorage.getItem("dpanel-page-"+s),v=1;return u&&(v=parseInt(u)),r&&v>r?1:v}function f(s){return{persistenceKey:s,persistenceType:"localStorage"}}var C=["descend","ascend"];function T(s,_){var r=localStorage.getItem("dpanel-table-sort-".concat(s));if(r){var u=r.split("|"),v=a()(u,2),i=v[0],M=v[1];if(i==_)return M}}function D(s,_,r){!_||!r?localStorage.removeItem("dpanel-table-sort-".concat(s)):localStorage.setItem("dpanel-table-sort-".concat(s),"".concat(_,"|").concat(r))}}}]);
