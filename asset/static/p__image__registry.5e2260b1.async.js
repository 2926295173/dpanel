"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9013],{5966:function(b,h,e){var E=e(97685),r=e(1413),i=e(45987),_=e(21770),v=e(99859),C=e(55241),P=e(97435),y=e(67294),d=e(35510),t=e(85893),g=["fieldProps","proFieldProps"],B=["fieldProps","proFieldProps"],m="text",u=function(l){var a=l.fieldProps,T=l.proFieldProps,f=(0,i.Z)(l,g);return(0,t.jsx)(d.Z,(0,r.Z)({valueType:m,fieldProps:a,filedConfig:{valueType:m},proFieldProps:T},f))},n=function(l){var a=(0,_.Z)(l.open||!1,{value:l.open,onChange:l.onOpenChange}),T=(0,E.Z)(a,2),f=T[0],j=T[1];return(0,t.jsx)(v.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(L){var c,S=L.getFieldValue(l.name||[]);return(0,t.jsx)(C.Z,(0,r.Z)((0,r.Z)({getPopupContainer:function(s){return s&&s.parentNode?s.parentNode:s},onOpenChange:function(s){return j(s)},content:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[(c=l.statusRender)===null||c===void 0?void 0:c.call(l,S),l.strengthText?(0,t.jsx)("div",{style:{marginTop:10},children:(0,t.jsx)("span",{children:l.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},l.popoverProps),{},{open:f,children:l.children}))}})},A=function(l){var a=l.fieldProps,T=l.proFieldProps,f=(0,i.Z)(l,B),j=(0,y.useState)(!1),K=(0,E.Z)(j,2),L=K[0],c=K[1];return a!=null&&a.statusRender&&f.name?(0,t.jsx)(n,{name:f.name,statusRender:a==null?void 0:a.statusRender,popoverProps:a==null?void 0:a.popoverProps,strengthText:a==null?void 0:a.strengthText,open:L,onOpenChange:c,children:(0,t.jsx)("div",{children:(0,t.jsx)(d.Z,(0,r.Z)({valueType:"password",fieldProps:(0,r.Z)((0,r.Z)({},(0,P.Z)(a,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(R){var s;a==null||(s=a.onBlur)===null||s===void 0||s.call(a,R),c(!1)},onClick:function(R){var s;a==null||(s=a.onClick)===null||s===void 0||s.call(a,R),c(!0)}}),proFieldProps:T,filedConfig:{valueType:m}},f))})}):(0,t.jsx)(d.Z,(0,r.Z)({valueType:"password",fieldProps:a,proFieldProps:T,filedConfig:{valueType:m}},f))},o=u;o.Password=A,o.displayName="ProFormComponent",h.Z=o},90672:function(b,h,e){var E=e(1413),r=e(45987),i=e(67294),_=e(35510),v=e(85893),C=["fieldProps","proFieldProps"],P=function(d,t){var g=d.fieldProps,B=d.proFieldProps,m=(0,r.Z)(d,C);return(0,v.jsx)(_.Z,(0,E.Z)({ref:t,valueType:"textarea",fieldProps:g,proFieldProps:B},m))};h.Z=i.forwardRef(P)},80821:function(b,h,e){e.d(h,{Z:function(){return d}});var E=e(5574),r=e.n(E),i=e(24963),_=e(86738),v=e(28036),C=e(83062),P=e(67294),y=e(85893);function d(t){var g=(0,P.useState)(!1),B=r()(g,2),m=B[0],u=B[1],n=(0,P.useContext)(i.Z),A=n.lang,o=n.notice,I=n.message,l=function(){u(!0);var T=t.action();T instanceof Promise?T.then(function(f){if(u(!1),f){typeof t.onSuccess=="function"&&t.onSuccess(f);var j="";t.messageSuccess?typeof t.messageSuccess=="function"?j=t.messageSuccess(f):j=t.messageSuccess.indexOf("notification.")==0?A(t.messageSuccess):t.messageSuccess:j=A("notification.finish"),t.asynced?I.info(j):I.success(j)}}).catch(function(f){u(!1),typeof t.onError=="function"&&t.onError(f)}):u(!1)};return t.confirm?(0,y.jsx)(_.Z,{style:{width:500},title:t.confirmTitle?t.confirmTitle:A("notification.title.tip"),description:typeof t.confirm=="string"&&t.confirm.indexOf("notification.")==0?A(t.confirm):t.confirm,onConfirm:l,okText:"Yes",cancelText:"No",onOpenChange:t.confirmOnOpenChange,children:(0,y.jsx)(v.ZP,{block:t.block,disabled:t.disabled,icon:t.icon,loading:m,danger:t.danger,type:t.type,children:t.children})}):(0,y.jsx)(C.Z,{title:t.tips,children:(0,y.jsx)(v.ZP,{block:t.block,style:t.ghost?{padding:0,height:"auto"}:{},disabled:t.disabled,icon:t.icon,loading:m,onClick:l,danger:t.danger,type:t.type,children:t.children})})}},24963:function(b,h,e){var E=e(67294),r=(0,E.createContext)({});h.Z=r},24396:function(b,h,e){e.r(h),e.d(h,{default:function(){return L}});var E=e(15009),r=e.n(E),i=e(99289),_=e.n(i),v=e(80821),C=e(5574),P=e.n(C),y=e(24963),d=e(75870),t=e(184),g=e(5966),B=e(90672),m=e(28036),u=e(67294),n=e(85893),A=(0,u.forwardRef)(function(c,S){var R=(0,u.useState)(!1),s=P()(R,2),x=s[0],Z=s[1],p=(0,u.useRef)(),D=(0,u.useState)(0),$=P()(D,2),O=$[0],V=$[1],H=(0,u.useContext)(y.Z),Y=H.notice,J=H.message;return(0,u.useImperativeHandle)(S,function(){return{setEditId:function(F){(0,d.t1)({id:F}).then(function(M){var W;Z(!0),V(F),(W=p.current)===null||W===void 0||W.setFieldsValue({title:M.data.info.title,serverAddress:M.data.info.serverAddress,username:M.data.info.setting.username,proxy:M.data.info.setting.proxy.join(`
`)})})}}}),(0,n.jsxs)(t.a,{drawerProps:{forceRender:!0},name:"create",title:"\u6DFB\u52A0/\u7F16\u8F91\u955C\u50CF\u4ED3\u5E93",open:x,onOpenChange:function(F){Z(F)},formRef:p,trigger:(0,n.jsx)(m.ZP,{type:"primary",onClick:function(){var F;(F=p.current)===null||F===void 0||F.resetFields(),V(0)},children:"\u6DFB\u52A0\u4ED3\u5E93"}),onFinish:function(){var w=_()(r()().mark(function F(M){var W,N,z,G;return r()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,d.ZH)({id:O,title:M.title,serverAddress:M.serverAddress,username:(W=M.username)!==null&&W!==void 0?W:"",password:(N=M.password)!==null&&N!==void 0?N:"",proxy:M.proxy?M.proxy.split(`
`):[]});case 2:if(z=U.sent,!(z&&z.data&&z.data.id>0)){U.next=8;break}return J.success("\u6DFB\u52A0\u6216\u662F\u7F16\u8F91\u955C\u50CF\u4ED3\u5E93\u6210\u529F"),c.onFinish&&c.onFinish(),(G=p.current)===null||G===void 0||G.resetFields(),U.abrupt("return",!0);case 8:case"end":return U.stop()}},F)}));return function(F){return w.apply(this,arguments)}}(),children:[(0,n.jsx)(g.Z,{label:"\u540D\u79F0",name:"title",placeholder:"\u6307\u5B9A\u4ED3\u5E93\u4E00\u4E2A\u540D\u79F0",disabled:O==-1,required:!0}),(0,n.jsx)(g.Z,{label:"\u4ED3\u5E93\u5730\u5740",tooltip:"\u4F8B\u5982:ccr.ccs.tencentyun.com\uFF0Cdocker.io",name:"serverAddress",placeholder:"\u586B\u5199\u4ED3\u5E93\u5730\u5740\uFF0C\u5B98\u65B9\u9ED8\u8BA4\u7559\u7A7A",disabled:O==-1}),(0,n.jsx)(g.Z,{label:"\u7528\u6237\u540D",name:"username",placeholder:"\u914D\u7F6E\u4ED3\u5E93\u7528\u6237\u540D",tooltip:""},"username"),(0,n.jsx)(g.Z.Password,{label:"\u5BC6\u7801",name:"password",placeholder:"\u914D\u7F6E\u4ED3\u5E93\u5BC6\u7801,\u4E3A\u7A7A\u65F6\u4F7F\u7528\u65E7\u5BC6\u7801"},"password"),(0,n.jsx)(B.Z,{label:"\u52A0\u901F\u5730\u5740",name:"proxy",fieldProps:{autoSize:{minRows:10}},placeholder:`https://docker.1panel.live 
https://docker.m.daocloud.io`,tooltip:"\u914D\u7F6E\u8BE5\u4ED3\u5E93\u7684\u52A0\u901F\u5730\u5740\uFF0C\u591A\u4E2A\u5730\u5740\u7528\u6362\u884C\u5206\u9694\u3002\u591A\u4E2A\u5730\u5740\u91C7\u7528\u8F6E\u8BAD\u7684\u65B9\u5F0F\u4E0B\u8F7D"})]})}),o=A,I=e(67255),l=e(43425),a=e(90078),T=e(78099),f=e(42075),j=e(96074),K=e(83062);function L(){var c=(0,u.useRef)(),S=(0,u.useRef)();return(0,n.jsx)(a._z,{header:{extra:[(0,n.jsx)(o,{onFinish:function(){var s,x;!((s=c.current)===null||s===void 0)&&s.reloadAndRest&&((x=c.current)===null||x===void 0||x.reloadAndRest())},ref:S})]},children:(0,n.jsx)(T.Z,{scroll:{x:"max-content"},rowKey:"id",columns:[{title:"\u540D\u79F0",ellipsis:!0,dataIndex:"title"},{title:"Url",dataIndex:"serverAddress"},{title:"\u7528\u6237",dataIndex:["setting","username"],search:!1},{title:"\u64CD\u4F5C",width:100,search:!1,fixed:"right",render:function(s,x,Z,p,D){return(0,n.jsx)(f.Z,{split:(0,n.jsx)(j.Z,{type:"vertical"}),children:(0,n.jsx)(m.ZP,{type:"link",onClick:function(){var O;(O=S.current)===null||O===void 0||O.setEditId(x.id)},children:(0,n.jsx)(K.Z,{title:"\u7BA1\u7406",children:(0,n.jsx)(l.Z,{})})})})}}],request:function(){var R=_()(r()().mark(function s(x,Z,p){var D;return r()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,d.Ot)({title:x.title,serverAddress:x.serverAddress});case 2:return D=O.sent,O.abrupt("return",{data:D.data.list,success:!0,total:D.data.list.length});case 4:case"end":return O.stop()}},s)}));return function(s,x,Z){return R.apply(this,arguments)}}(),toolBarRender:function(){return[]},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},pagination:(0,I.O)(),actionRef:c,tableAlertOptionRender:function(s){var x=s.selectedRowKeys;return(0,n.jsx)(f.Z,{size:16,children:(0,n.jsx)(v.Z,{danger:!0,type:"primary",action:function(){return(0,d.ix)({id:x})},onSuccess:function(){var p,D;return!((p=c.current)===null||p===void 0)&&p.reloadAndRest&&((D=c.current)===null||D===void 0||D.reloadAndRest()),!0},onError:function(){var p,D;return!((p=c.current)===null||p===void 0)&&p.reset&&((D=c.current)===null||D===void 0||D.reset()),!0},confirm:"notification.confirm.title",children:"\u6279\u91CF\u5220\u9664"})})}})})}},75870:function(b,h,e){e.d(h,{Ot:function(){return C},ZH:function(){return y},ix:function(){return t},t1:function(){return B}});var E=e(15009),r=e.n(E),i=e(99289),_=e.n(i),v=e(82346);function C(u){return P.apply(this,arguments)}function P(){return P=_()(r()().mark(function u(n){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,v.request)("/api/common/registry/get-list",{method:"POST",data:n}));case 1:case"end":return o.stop()}},u)})),P.apply(this,arguments)}function y(u){return d.apply(this,arguments)}function d(){return d=_()(r()().mark(function u(n){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,v.request)("/api/common/registry/create",{method:"POST",data:n}));case 1:case"end":return o.stop()}},u)})),d.apply(this,arguments)}function t(u){return g.apply(this,arguments)}function g(){return g=_()(r()().mark(function u(n){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,v.request)("/api/common/registry/delete",{method:"POST",data:n}));case 1:case"end":return o.stop()}},u)})),g.apply(this,arguments)}function B(u){return m.apply(this,arguments)}function m(){return m=_()(r()().mark(function u(n){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,v.request)("/api/common/registry/get-detail",{method:"POST",data:n}));case 1:case"end":return o.stop()}},u)})),m.apply(this,arguments)}},67255:function(b,h,e){e.d(h,{O:function(){return E},j:function(){return r}});function E(){var i=localStorage.getItem("dpanel-pagesize");return i=="all"?!1:{showSizeChanger:!0,defaultPageSize:parseInt(i!=null?i:"20")}}function r(i){var _="dpanel-table-column-".concat(i),v={};if(localStorage.getItem(_)){var C;v=JSON.parse((C=localStorage.getItem(_))!==null&&C!==void 0?C:"{}")}return{defaultValue:v,onChange:function(y){localStorage.setItem("dpanel-table-column-".concat(i),JSON.stringify(y))}}}}}]);
