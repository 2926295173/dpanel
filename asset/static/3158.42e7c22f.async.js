"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3158],{91058:function(b,L,e){var W=e(5574),o=e.n(W),A=e(89035),f=e(38345),m=e(17186),j=e(24739),l=e(5966),I=e(42075),u=e(14726),r=e(85576),d=e(67294),p=e(95089),B=e(89063),a=e(85893),E="docker-image",h=(0,d.forwardRef)(function(n,M){var D=(0,d.useState)(E),U=o()(D,2),O=U[0],v=U[1],c=(0,d.useRef)(),_=(0,d.useState)(""),s=o()(_,2),C=s[0],t=s[1],V=function(){O!="code"?v("code"):v(E)};(0,d.useImperativeHandle)(M,function(){return{addEnvItem:function(i,T){var y,g=(y=c.current)===null||y===void 0?void 0:y.getList(),R=!1;if(g==null||g.map(function(x){if(x.name==i){R=!0;return}}),!R){var K;(K=c.current)===null||K===void 0||K.add({name:i,value:T})}},clear:function(){var i;(i=c.current)===null||i===void 0||(i=i.getList())===null||i===void 0||i.map(function(T,y){var g;(g=c.current)===null||g===void 0||g.remove(y)})}}});function F(P){try{var i,T;P==""&&(P=k());for(var y=(i=(T=c.current)===null||T===void 0||(T=T.getList())===null||T===void 0?void 0:T.length)!==null&&i!==void 0?i:0,g=y;g>=0;g--){var R;(R=c.current)===null||R===void 0||R.remove(g)}var K=P.split(`
`),x=0;K.map(function(S){var w,Z=S.split("=");Z.length<2||((w=c.current)===null||w===void 0||w.add({name:Z[0],value:Z.slice(1).join("=")},x),x++)})}catch(S){console.log(S)}}function k(){if(c&&c.current&&c.current.getList){var P,i=(P=c.current)===null||P===void 0?void 0:P.getList();if(i){var T=[];return i.map(function(y){T.push("".concat(y.name,"=").concat(y.value))}),T.join(`
`)}else return""}else return""}return(0,a.jsxs)(f.Z,{ghost:n.showCardGhost,title:n.label?n.label:null,headerBordered:!0,extra:(n.showCodeMode||n.showImportButton)&&(0,a.jsxs)(I.Z,{children:[n.showImportButton&&(0,a.jsx)("div",{style:{marginBottom:"-25px"},children:(0,a.jsx)(B.Z,{title:"\u5BFC\u5165 env \u6587\u4EF6",onImport:function(i){return F(i),!0},onLoad:function(i){if(i.indexOf("=")<0)throw new Error("\u5BFC\u5165env\u6587\u4EF6\u9519\u8BEF");return!0}})}),n.showCodeMode?(0,a.jsx)(u.ZP,{icon:(0,a.jsx)(A.Z,{}),type:O=="code"?"primary":"default",onClick:V,children:"\u4EE3\u7801\u6A21\u5F0F"},"code"):""]}),children:[(0,a.jsx)(m.u,{name:n.name?n.name:"environment",actionRef:c,creatorButtonProps:n.showAddButton?{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u73AF\u5883\u53D8\u91CF"}:!1,copyIconProps:!1,min:100,label:n.listLabel,children:function(i,T,y){var g=y.getCurrentRowData();return(0,a.jsxs)(j.UW,{children:[(0,a.jsx)(l.Z,{width:n.showInDrawer?"sm":"md",name:"name",label:"\u53D8\u91CF\u540D",required:!0,rules:[{required:!0}],disabled:n.showDisableName,placeholder:"\u8F93\u5165\u53D8\u91CF\u540D\u79F0"}),(0,a.jsx)(l.Z,{width:n.showInDrawer?"sm":"md",name:"value",label:"\u53D8\u91CF\u503C",rules:[{required:!!n.requireValue}],disabled:n.showDisableValue,placeholder:g&&g.label?g.label:"\u8F93\u5165\u53D8\u91CF\u503C"})]})}}),(0,a.jsx)(r.Z,{width:"800px",open:O=="code",onCancel:function(){return v("docker-image")},onOk:function(){F(C),v("docker-image")},children:(0,a.jsx)(p.ZP,{onChange:function(i){return t(i)},value:k(),height:"680px",theme:"light"})})]})});L.Z=h},80821:function(b,L,e){e.d(L,{Z:function(){return u}});var W=e(5574),o=e.n(W),A=e(24963),f=e(86738),m=e(14726),j=e(83062),l=e(67294),I=e(85893);function u(r){var d=(0,l.useState)(!1),p=o()(d,2),B=p[0],a=p[1],E=(0,l.useContext)(A.Z),h=E.lang,n=E.notice,M=E.message,D=function(){a(!0),r.action().then(function(O){if(a(!1),typeof r.onSuccess=="function"&&r.onSuccess(O),r.messageSuccess){var v="";typeof r.messageSuccess=="function"?v=r.messageSuccess(O):v=r.messageSuccess,v=h("notification.".concat(v))+h("notification.title.success"),r.asynced?M.info(v):M.success(v)}}).catch(function(O){a(!1),typeof r.onError=="function"&&r.onError(O)})};return r.confirm?(0,I.jsx)(f.Z,{style:{width:500},title:r.confirmTitle?r.confirmTitle:h("notification.title.tip"),description:r.confirm,onConfirm:D,okText:"Yes",cancelText:"No",children:(0,I.jsx)(m.ZP,{disabled:r.disabled,icon:r.icon,loading:B,danger:r.danger,type:r.type,children:r.children})}):(0,I.jsx)(j.Z,{title:r.tips,children:(0,I.jsx)(m.ZP,{disabled:r.disabled,icon:r.icon,loading:B,onClick:D,danger:r.danger,type:r.type,children:r.children})})}},44349:function(b,L,e){var W=e(97857),o=e.n(W),A=e(17186),f=e(5966),m=e(86250),j=e(67294),l=e(85893),I=(0,j.forwardRef)(function(u,r){var d=(0,j.useRef)();(0,j.useImperativeHandle)(r,function(){return{addItem:function(a,E){var h,n=(h=d.current)===null||h===void 0?void 0:h.getList(),M=!1;if(n==null||n.map(function(U){if(U.name==a){M=!0;return}}),!M){var D;(D=d.current)===null||D===void 0||D.add({name:a,value:E})}},clear:function(){var a;(a=d.current)===null||a===void 0||(a=a.getList())===null||a===void 0||a.map(function(E,h){var n;(n=d.current)===null||n===void 0||n.remove(h)})}}});var p={};return u.hideCopyButton===!0&&(p.copyIconProps=!1),u.hideDeleteButton===!0&&(p.deleteIconProps=!1),(0,l.jsx)(A.u,o()(o()({initialValue:u.initialValue,label:u.label,name:u.name,actionRef:d,creatorButtonProps:u.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(u.label?u.label:u.name)}:!1,min:u.min?u.min:0},p),{},{children:function(a,E,h){return(0,l.jsx)(m.Z,{justify:u.justify,gap:u.gap,children:u.items.map(function(n){return n.render?(0,l.jsx)("div",{children:n.render&&n.render(a,E,h)},"".concat(u.name,"-").concat(n.name,"-").concat(a.key)):(0,l.jsx)(f.Z,{width:n.width,name:n.name,label:n.label,required:n.required,rules:[{required:n.required}],disabled:n.disabled,placeholder:n.placeholder},"".concat(u.name,"-").concat(n.name,"-").concat(a.key))})})}}))});L.Z=I},89063:function(b,L,e){e.d(L,{Z:function(){return I}});var W=e(24963),o=e(88484),A=e(62370),f=e(31418),m=e(14726),j=e(67294),l=e(85893);function I(u){var r=(0,j.useContext)(W.Z),d=r.message,p=r.notice,B=r.lang,a=(0,j.useRef)(null),E=f.Z.useApp(),h=function(){a.current&&(a.current.click(),a.current.onchange=function(M){if(!M||!M.target)return"";var D=new FileReader;D.onload=function(O){var v,c,_=(v=O.target)===null||v===void 0?void 0:v.result;if(u.onLoad)try{u.onLoad&&u.onLoad(_)}catch(s){p.error(s);return}typeof u.onImport=="function"&&(d.success("\u6210\u529F\u5BFC\u5165 ".concat(u.title)),u.onImport(_)),(c=a.current)!==null&&c!==void 0&&c.value&&(a.current.value="")};var U=M.target;if(U.files)try{D.readAsText(U.files[0])}catch(O){p.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(A.Z,{children:(0,l.jsx)(m.ZP,{icon:(0,l.jsx)(o.Z,{}),block:!0,onClick:h,children:u.title})}),(0,l.jsx)("input",{style:{display:"none"},type:"file",ref:a,name:"importFileInput"})]})}},24963:function(b,L,e){var W=e(67294),o=(0,W.createContext)({});L.Z=o},60335:function(b,L,e){e.d(L,{IE:function(){return I},IW:function(){return j},KK:function(){return a},LJ:function(){return h},RF:function(){return U},Re:function(){return M},aF:function(){return v},eE:function(){return p},jV:function(){return r}});var W=e(15009),o=e.n(W),A=e(99289),f=e.n(A),m=e(54006);function j(_){return l.apply(this,arguments)}function l(){return l=f()(o()().mark(function _(s){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.request)("/api/app/container/status",{method:"POST",data:s}));case 1:case"end":return t.stop()}},_)})),l.apply(this,arguments)}function I(_){return u.apply(this,arguments)}function u(){return u=f()(o()().mark(function _(s){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.request)("/api/app/container/get-list",{data:s,method:"POST"}));case 1:case"end":return t.stop()}},_)})),u.apply(this,arguments)}function r(_){return d.apply(this,arguments)}function d(){return d=f()(o()().mark(function _(s){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.request)("/api/app/container/get-detail",{data:s,method:"POST"}));case 1:case"end":return t.stop()}},_)})),d.apply(this,arguments)}function p(_){return B.apply(this,arguments)}function B(){return B=f()(o()().mark(function _(s){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.request)("/api/app/container/update",{data:s,method:"POST"}));case 1:case"end":return t.stop()}},_)})),B.apply(this,arguments)}function a(){return E.apply(this,arguments)}function E(){return E=f()(o()().mark(function _(){return o()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",(0,m.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return C.stop()}},_)})),E.apply(this,arguments)}function h(_){return n.apply(this,arguments)}function n(){return n=f()(o()().mark(function _(s){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.request)("/api/app/container/export",{method:"POST",data:s,responseType:"blob"}));case 1:case"end":return t.stop()}},_)})),n.apply(this,arguments)}function M(_){return D.apply(this,arguments)}function D(){return D=f()(o()().mark(function _(s){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.request)("/api/app/container/commit",{method:"POST",data:s}));case 1:case"end":return t.stop()}},_)})),D.apply(this,arguments)}function U(_){return O.apply(this,arguments)}function O(){return O=f()(o()().mark(function _(s){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.request)("/api/app/container/upgrade",{method:"POST",data:s}));case 1:case"end":return t.stop()}},_)})),O.apply(this,arguments)}function v(_){return c.apply(this,arguments)}function c(){return c=f()(o()().mark(function _(s){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.request)("/api/app/container/copy",{method:"POST",data:s}));case 1:case"end":return t.stop()}},_)})),c.apply(this,arguments)}}}]);
