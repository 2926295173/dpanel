"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3985],{91058:function(je,Y,n){var Q=n(5574),a=n.n(Q),te=n(89035),j=n(38345),P=n(17186),w=n(24739),b=n(5966),I=n(42075),C=n(28036),ae=n(85576),d=n(67294),D=n(95089),H=n(12491),o=n(85893),k="docker-image",i=(0,d.forwardRef)(function(r,X){var U=(0,d.useState)(k),W=a()(U,2),T=W[0],c=W[1],s=(0,d.useRef)(),f=(0,d.useState)(""),u=a()(f,2),J=u[0],v=u[1],be=function(){T!="code"?c("code"):c(k)};(0,d.useImperativeHandle)(X,function(){return{addEnvItem:function(Z,ue){var le,ee=(le=s.current)===null||le===void 0?void 0:le.getList(),re=!1;if(ee==null||ee.map(function(F){if(F.name==Z){re=!0;return}}),!re){var e;(e=s.current)===null||e===void 0||e.add({name:Z,value:ue})}},clear:function(){var Z;(Z=s.current)===null||Z===void 0||(Z=Z.getList())===null||Z===void 0||Z.map(function(ue,le){var ee;(ee=s.current)===null||ee===void 0||ee.remove(le)})}}});function Te(q){try{var Z,ue;q==""&&(q=Fe());for(var le=(Z=(ue=s.current)===null||ue===void 0||(ue=ue.getList())===null||ue===void 0?void 0:ue.length)!==null&&Z!==void 0?Z:0,ee=le;ee>=0;ee--){var re;(re=s.current)===null||re===void 0||re.remove(ee)}var e=q.split(`
`),F=0;e.map(function(me){var _e,z=me.split("=");z.length<2||((_e=s.current)===null||_e===void 0||_e.add({name:z[0],value:z.slice(1).join("=")},F),F++)})}catch(me){console.log(me)}}function Fe(){if(s&&s.current&&s.current.getList){var q,Z=(q=s.current)===null||q===void 0?void 0:q.getList();if(Z){var ue=[];return Z.map(function(le){ue.push("".concat(le.name,"=").concat(le.value))}),ue.join(`
`)}else return""}else return""}return(0,o.jsxs)(j.Z,{ghost:r.showCardGhost,title:r.label?r.label:null,headerBordered:!0,extra:(r.showCodeMode||r.showImportButton)&&(0,o.jsxs)(I.Z,{children:[r.showImportButton&&(0,o.jsx)("div",{style:{marginBottom:"-25px"},children:(0,o.jsx)(H.Z,{title:"\u5BFC\u5165 env \u6587\u4EF6",onImport:function(Z){return Te(Z),!0},onLoad:function(Z){if(Z.indexOf("=")<0)throw new Error("\u5BFC\u5165env\u6587\u4EF6\u9519\u8BEF");return!0}})}),r.showCodeMode?(0,o.jsx)(C.ZP,{icon:(0,o.jsx)(te.Z,{}),type:T=="code"?"primary":"default",onClick:be,children:"\u4EE3\u7801\u6A21\u5F0F"},"code"):""]}),children:[(0,o.jsx)(P.u,{name:r.name?r.name:"environment",actionRef:s,creatorButtonProps:r.showAddButton?{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u73AF\u5883\u53D8\u91CF"}:!1,copyIconProps:!1,min:100,label:r.listLabel,children:function(Z,ue,le){var ee=le.getCurrentRowData();return(0,o.jsxs)(w.UW,{children:[(0,o.jsx)(b.Z,{width:r.showInDrawer?"sm":"md",name:"name",label:"\u53D8\u91CF\u540D",required:!0,rules:[{required:!0}],disabled:r.showDisableName,placeholder:"\u8F93\u5165\u53D8\u91CF\u540D\u79F0"}),(0,o.jsx)(b.Z,{width:r.showInDrawer?"sm":"md",name:"value",label:"\u53D8\u91CF\u503C",rules:[{required:!!r.requireValue}],disabled:r.showDisableValue,placeholder:ee&&ee.label?ee.label:"\u8F93\u5165\u53D8\u91CF\u503C"})]})}}),(0,o.jsx)(ae.Z,{width:"800px",open:T=="code",onCancel:function(){return c("docker-image")},onOk:function(){Te(J),c("docker-image")},children:(0,o.jsx)(D.ZP,{onChange:function(Z){return v(Z)},value:Fe(),height:"680px",theme:"light"})})]})});Y.Z=i},4798:function(je,Y,n){var Q=n(15009),a=n.n(Q),te=n(99289),j=n.n(te),P=n(5574),w=n.n(P),b=n(24963),I=n(14946),C=n(64789),ae=n(38345),d=n(17186),D=n(24739),H=n(5966),o=n(62370),k=n(10641),i=n(31418),r=n(25593),X=n(85576),U=n(66309),W=n(42075),T=n(28036),c=n(67294),s=n(85893),f=(0,c.forwardRef)(function(u,J){var v=(0,c.useContext)(b.Z),be=v.notice,Te=(0,c.useState)(!1),Fe=w()(Te,2),q=Fe[0],Z=Fe[1],ue=(0,c.useRef)(),le=i.Z.useApp();(0,c.useImperativeHandle)(J,function(){return{}});var ee=function(e){var F,me,_e=!1,z=(F=(me=ue.current)===null||me===void 0?void 0:me.getList())!==null&&F!==void 0?F:[];if(z.map(function(fe){fe.name==e.name&&(_e=!0)}),!_e){var Pe;(Pe=ue.current)===null||Pe===void 0||Pe.add(e)}};return(0,s.jsxs)(ae.Z,{title:"\u5173\u8054\u7F51\u7EDC",headerBordered:!0,children:[(0,s.jsx)(d.u,{name:"network",actionRef:ue,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u7F51\u7EDC"},actionGuard:{beforeAddRow:function(e,F){return!u.siteName||u.siteName==""||typeof u.siteName=="undefined"?(be.error("\u8BF7\u8F93\u5165\u7AD9\u70B9\u6807\u8BC6"),!1):(Z(!0),!1)}},copyIconProps:!1,min:0,itemRender:function(e,F){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(D.UW,{children:[(0,s.jsx)(H.Z,{label:"\u7F51\u7EDC\u540D\u79F0",name:"name",width:"md",disabled:!0,fieldProps:{value:F.record.name}}),(0,s.jsx)(o.Z,{label:"\u8BBF\u95EEHostname",name:"alise",children:F.record.alise!=""&&(0,s.jsx)(r.Z.Text,{code:!0,copyable:!0,children:F.record.alise})}),(0,s.jsx)(o.Z,{label:" ",children:e.action})]}),(0,s.jsx)(D.UW,{children:(0,s.jsx)(H.Z,{label:"\u6307\u5B9AIpV4",name:"ipV4",width:"md",fieldProps:{addonAfter:F.record.subnet}})})]})}}),(0,s.jsx)(X.Z,{title:"\u9009\u62E9\u7F51\u7EDC",width:1024,footer:!1,open:q,onCancel:function(){return Z(!1)},children:(0,s.jsx)(k.Z,{rowKey:"Name",toolBarRender:!1,columns:[{title:"\u540D\u79F0",dataIndex:"Name",render:function(e,F,me,_e,z){return F.Name=="none"||F.Name=="bridge"||F.Name=="host"?(0,s.jsxs)(s.Fragment,{children:[F.Name," ",(0,s.jsx)(U.Z,{color:"blue",children:"System"})]}):(0,s.jsx)(s.Fragment,{children:e})}},{title:"\u7C7B\u578B",ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"IPAM Driver",ellipsis:!0,width:120,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4 IPAM Network",search:!1,dataIndex:["IPAM","Config",0,"Subnet"],render:function(e,F,me,_e,z){return(0,s.jsxs)(W.Z,{children:[F.IPAM.Config&&F.IPAM.Config[0]&&"".concat(F.IPAM.Config[0].Subnet," - ").concat(F.IPAM.Config[0].Gateway),F.IPAM.Config&&F.IPAM.Config[1]&&"".concat(F.IPAM.Config[1].Subnet," - ").concat(F.IPAM.Config[1].Gateway)]})}},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(e,F,me,_e,z){return[(0,s.jsx)(T.ZP,{type:"link",onClick:function(){ee({name:F.Name,alise:[""],subnet:F.IPAM.Config[0].Subnet}),Z(!1)},children:(0,s.jsx)(C.Z,{})},F.Id)]}}],request:function(){var re=j()(a()().mark(function e(F,me,_e){var z;return a()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.next=2,(0,I.jR)({name:F.Name});case 2:return z=fe.sent,fe.abrupt("return",{data:z.data.list,success:!0,total:z.data.list.length});case 4:case"end":return fe.stop()}},e)}));return function(e,F,me){return re.apply(this,arguments)}}(),pagination:{pageSize:10}})})]})});Y.Z=f},92067:function(je,Y,n){n.d(Y,{Z:function(){return H}});var Q=n(15009),a=n.n(Q),te=n(99289),j=n.n(te),P=n(60335),w=n(64789),b=n(10641),I=n(42075),C=n(28036),ae=n(37413),d=n(5251),D=n(85893);function H(o){return(0,D.jsx)(b.Z,{columns:[{title:"\u5BB9\u5668\u540D\u79F0",dataIndex:"name",render:function(i,r,X,U){return(0,D.jsx)(I.Z,{direction:"vertical",style:{textAlign:"left"},children:r==null?void 0:r.Names.map(function(W){return(0,d.fi)(W,"/")})},r.Id)}},{title:"\u7AEF\u53E3",dataIndex:"ports",search:!1,render:function(i,r,X,U){var W=[],T=[];return r!=null&&r.Ports&&r.Ports.map(function(c,s){c.PublicPort?W.push(c):T.push(c)}),(0,D.jsx)(ae.Z,{publicPort:W,privatePort:T,domain:[]})}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",ellipsis:!0,width:100,render:function(i,r,X,U){return[(0,D.jsx)(C.ZP,{type:"link",onClick:j()(a()().mark(function W(){var T;return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,P.jV)({md5:r.Id});case 2:T=s.sent,o.onSelect&&o.onSelect(T.data.info);case 4:case"end":return s.stop()}},W)})),children:(0,D.jsx)(w.Z,{})},r.Id)]}}],rowKey:"Id",request:function(){var k=j()(a()().mark(function i(r,X,U){var W;return a()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,P.IE)({siteTitle:r.name});case 2:return W=c.sent,c.abrupt("return",{data:W.data.list,success:!0,total:W.data.list.length});case 4:case"end":return c.stop()}},i)}));return function(i,r,X){return k.apply(this,arguments)}}(),pagination:{pageSize:9}})}},52255:function(je,Y,n){n.d(Y,{Z:function(){return te}});var Q=n(67294),a=n(85893);function te(j){return(0,a.jsx)("div",{style:{display:j.show?"block":"none"},children:j.children})}},44349:function(je,Y,n){var Q=n(97857),a=n.n(Q),te=n(17186),j=n(5966),P=n(86250),w=n(67294),b=n(85893),I=(0,w.forwardRef)(function(C,ae){var d=(0,w.useRef)();(0,w.useImperativeHandle)(ae,function(){return{addItem:function(o,k){var i,r=(i=d.current)===null||i===void 0?void 0:i.getList(),X=!1;if(r==null||r.map(function(W){if(W.name==o){X=!0;return}}),!X){var U;(U=d.current)===null||U===void 0||U.add({name:o,value:k})}},clear:function(){var o;(o=d.current)===null||o===void 0||(o=o.getList())===null||o===void 0||o.map(function(k,i){var r;(r=d.current)===null||r===void 0||r.remove(i)})}}});var D={};return C.hideCopyButton===!0&&(D.copyIconProps=!1),C.hideDeleteButton===!0&&(D.deleteIconProps=!1),(0,b.jsx)(te.u,a()(a()({initialValue:C.initialValue,label:C.label,name:C.name,actionRef:d,creatorButtonProps:C.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(C.label?C.label:C.name)}:!1,min:C.min?C.min:0},D),{},{children:function(o,k,i){return(0,b.jsx)(P.Z,{justify:C.justify,gap:C.gap,children:C.items.map(function(r){return r.render?(0,b.jsx)("div",{children:r.render&&r.render(o,k,i)},"".concat(C.name,"-").concat(r.name,"-").concat(o.key)):(0,b.jsx)(j.Z,{width:r.width,name:r.name,label:r.label,required:r.required,rules:[{required:r.required}],disabled:r.disabled,placeholder:r.placeholder},"".concat(C.name,"-").concat(r.name,"-").concat(o.key))})})}}))});Y.Z=I},12491:function(je,Y,n){n.d(Y,{Z:function(){return I}});var Q=n(24963),a=n(88484),te=n(62370),j=n(31418),P=n(28036),w=n(67294),b=n(85893);function I(C){var ae=(0,w.useContext)(Q.Z),d=ae.message,D=ae.notice,H=ae.lang,o=(0,w.useRef)(null),k=j.Z.useApp(),i=function(){o.current&&(o.current.click(),o.current.onchange=function(X){if(!X||!X.target)return"";var U=new FileReader;U.onload=function(T){var c,s,f=(c=T.target)===null||c===void 0?void 0:c.result;if(C.onLoad)try{C.onLoad&&C.onLoad(f)}catch(u){D.error(u);return}typeof C.onImport=="function"&&(d.success("\u6210\u529F\u5BFC\u5165 ".concat(C.title)),C.onImport(f)),(s=o.current)!==null&&s!==void 0&&s.value&&(o.current.value="")};var W=X.target;if(W.files)try{U.readAsText(W.files[0])}catch(T){D.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(te.Z,{children:(0,b.jsx)(P.ZP,{icon:(0,b.jsx)(a.Z,{}),block:!0,onClick:i,children:C.title})}),(0,b.jsx)("input",{style:{display:"none"},type:"file",ref:o,name:"importFileInput"})]})}},35880:function(je,Y,n){var Q=n(67294),a=(0,Q.createContext)({});Y.Z=a},80378:function(je,Y,n){n.r(Y),n.d(Y,{default:function(){return Fn}});var Q=n(15009),a=n.n(Q),te=n(99289),j=n.n(te),P=n(5574),w=n.n(P),b=n(90078),I=n(38345),C=n(97269),ae=n(2236),d=n(5966),D=n(97462),H=n(64218),o=n(92398),k=n(38925),i=n(67294),r=n(35880),X=n(10641),U=n(62370),W=n(85576),T=n(42075),c=n(96074),s=n(25593),f=n(83062),u=n(71230),J=n(15746),v=n(28036),be=n(3393),Te=n(18148),Fe=n(5251),q=n(64789),Z=n(75162),ue=n(85060),le=n(28307),ee=n(78451),re=n(99861),e=n(85893);function F(p){var V=(0,i.useState)(!1),R=w()(V,2),N=R[0],g=R[1],x=(0,i.useRef)(),m=(0,i.useContext)(r.Z),B=m.createFormRef,M=m.volumeListRef,O=m.createEnvRef,h=m.domainRef,_=(0,i.useRef)(),S=function(){var A=j()(a()().mark(function y(E){var L,ne,ie,K,de,ve,se,Me,pe,Ee,Ae,he;return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return g(!1),l.next=3,(0,be.YU)({md5:E});case 3:K=l.sent,p.redeploy||(Me=(de=B.current)===null||de===void 0?void 0:de.getFieldsValue(),(ve=B.current)===null||ve===void 0||ve.resetFields(),(se=B.current)===null||se===void 0||se.setFieldsValue({siteName:Me.siteName,siteTitle:Me.siteTitle})),K.data.info.Config.Env&&K.data.info.Config.Env.map(function(t){var ce,Ce=t.split("=");(ce=O.current)===null||ce===void 0||ce.addEnvItem(Ce[0],Ce.slice(1).join("="))}),(L=B.current)===null||L===void 0||L.setFieldValue("imageName",E),(ne=B.current)===null||ne===void 0||ne.setFieldValue("workDir",K.data.info.Config.WorkingDir),(ie=h.current)===null||ie===void 0||ie.setExposePort(K.data.info.Config.ExposedPorts),p.redeploy||(K.data.info.Config.Volumes?(Ae=[],Object.keys(K.data.info.Config.Volumes).map(function(t,ce){Ae.push(t)}),(Ee=M.current)===null||Ee===void 0||Ee.setDefaultDestPath(Ae)):(he=M.current)===null||he===void 0||he.setDefaultDestPath([]),(pe=B.current)===null||pe===void 0||pe.setFieldsValue({workDir:{value:"",useDefault:!0,default:K.data.info.Config.WorkingDir},user:{value:"",useDefault:!0,default:K.data.info.Config.User},command:{value:"",useDefault:!0,default:K.data.info.Config.Cmd&&K.data.info.Config.Cmd.join(" ")},entrypoint:{value:"",useDefault:!0,default:K.data.info.Config.Entrypoint&&K.data.info.Config.Entrypoint.join(" ")}}));case 10:case"end":return l.stop()}},y)}));return function(E){return A.apply(this,arguments)}}();return(0,i.useEffect)(function(){p.fromImageId&&S(p.fromImageId)},[p.fromImageId]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(W.Z,{open:N,width:1024,title:"\u9009\u62E9\u955C\u50CF",footer:!1,onCancel:function(){return g(!1)},children:(0,e.jsx)(X.Z,{scroll:{x:"max-content"},columns:[{title:"Id",dataIndex:"Id",search:!1,width:200,render:function(y,E,L,ne,ie){return(0,e.jsx)(ee.Z,{content:E.Id})}},{title:"\u955C\u50CF\u540D\u79F0",dataIndex:"tag",width:200,render:function(y,E,L,ne){return(0,e.jsx)(ee.Z,{content:E.RepoTags[0]})}},{title:"\u521B\u5EFA\u65E5\u671F",dataIndex:"Created",ellipsis:!0,search:!1,width:"180px",render:function(y,E,L,ne){return(0,e.jsx)("div",{children:(0,Fe.ZM)(E.Created*1e3)},E.Id)},sorter:function(y,E){return y.Created-E.Created}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:80,render:function(y,E,L,ne){return(0,e.jsxs)(T.Z,{split:(0,e.jsx)(c.Z,{type:"vertical"}),children:[(0,e.jsx)(s.Z.Link,{onClick:j()(a()().mark(function ie(){return a()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.abrupt("return",S(E.RepoTags[0]));case 1:case"end":return de.stop()}},ie)})),children:(0,e.jsx)(f.Z,{title:"\u4F7F\u7528\u955C\u50CF",children:(0,e.jsx)(q.Z,{})})},"addImage"),(0,e.jsx)(s.Z.Link,{onClick:j()(a()().mark(function ie(){var K;return a()().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:E.RepoTags[0]&&((K=_.current)===null||K===void 0||K.setImageName(E.RepoTags[0]));case 1:case"end":return ve.stop()}},ie)})),children:(0,e.jsx)(f.Z,{title:"\u66F4\u65B0\u955C\u50CF",children:(0,e.jsx)(Z.Z,{})})},"updateImage")]})}}],request:function(){var A=j()(a()().mark(function y(E,L,ne){var ie,K,de,ve,se;return a()().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return p.redeploy&&(K=(ie=B.current)===null||ie===void 0?void 0:ie.getFieldValue("imageName"),E.tag=K?K.split(":")[0]:E.tag),pe.next=3,(0,Te.KG)({tag:E.tag});case 3:return de=pe.sent,ve=0,se=[],de.data.list&&(se=de.data.list.flatMap(function(Ee){return Ee.RepoTags.map(function(Ae){return{Key:ve++,Id:Ee.Id,Created:Ee.Created,RepoTags:[Ae]}})})),pe.abrupt("return",{data:se,success:!0,total:se.length});case 8:case"end":return pe.stop()}},y)}));return function(y,E,L){return A.apply(this,arguments)}}(),toolBarRender:function(){return[(0,e.jsx)(le.Z,{onClick:function(){g(!1)},buttonType:"primary",ref:_,onFinish:function(E){S(E)}},"remote")]},formRef:x,rowKey:"Key",pagination:{pageSize:5}})},"imageTableList"),(0,e.jsxs)(u.Z,{children:[(0,e.jsx)(J.Z,{span:14,children:(0,e.jsx)(d.Z,{label:"\u955C\u50CF",tooltip:p.redeploy?"\u66F4\u65B0\u5BB9\u5668\u65F6,\u53EA\u53EF\u4EE5\u9009\u62E9\u8BE5\u955C\u50CF\u4E0B\u7684\u4E0D\u540Ctag.\u4E5F\u53EF\u4EE5\u5F3A\u5236\u66F4\u65B0\u5DF2\u90E8\u7F72tag,\u66F4\u6B21\u90E8\u7F72":"\u65B0\u5EFA\u5BB9\u5668\u65F6,\u53EF\u4EE5\u4F7F\u7528\u672C\u5730\u955C\u50CF,\u4E5F\u53EF\u4EE5\u4E0B\u8F7D\u5168\u65B0\u7684\u955C\u50CF\u6216\u662F\u66F4\u65B0\u672C\u5730\u955C\u50CF\u7684tag",name:"imageName",disabled:!0,placeholder:"\u8BF7\u9009\u62E9\u955C\u50CF\uFF0C\u5982\u679C\u662F\u8FDC\u7A0B\u955C\u50CF\u8BF7\u5148\u4E0B\u8F7D",rules:[{required:!0}],required:!0})}),(0,e.jsx)(J.Z,{children:(0,e.jsx)(U.Z,{label:" ",children:(0,e.jsxs)(T.Z.Compact,{children:[(0,e.jsx)(v.ZP,{type:"primary",onClick:function(){return g(!0)},children:p.redeploy?"\u66F4\u6362\u955C\u50CF":"\u9009\u62E9\u955C\u50CF"},"showBtn"),(0,e.jsx)(D.Z,{name:["imageName"],children:function(y){var E=y.imageName;return p.redeploy?(0,e.jsx)(re.Z,{image:[E],trigger:(0,e.jsx)(f.Z,{title:"\u91CD\u65B0\u62C9\u53D6\u5F53\u524D\u955C\u50CF",children:(0,e.jsx)(v.ZP,{icon:(0,e.jsx)(ue.Z,{}),children:"\u62C9\u53D6\u5F53\u524D\u955C\u50CF"})})}):(0,e.jsx)(le.Z,{onClick:function(){g(!1)},ref:_,onFinish:function(ne){S(ne)}},"remote")}})]})})})]})]})}var me=n(60335),_e=n(51042),z=n(24739),Pe=n(63434),fe=n(17186),ze=n(85265),Xe=n(92067),Je=(0,i.forwardRef)(function(p,V){var R=(0,i.useState)(!1),N=w()(R,2),g=N[0],x=N[1],m=(0,i.useRef)(),B=function(h){var _=(0,i.useState)([]),S=w()(_,2),A=S[0],y=S[1];return(0,i.useEffect)(function(){(0,me.jV)({md5:h.name}).then(function(E){var L;return y((L=E.data.info.Config.Env)!==null&&L!==void 0?L:[]),!0})},[]),(0,e.jsxs)(I.Z,{bordered:!0,extra:h.action,style:{marginBottom:10},children:[(0,e.jsx)(I.Z,{title:"\u5173\u8054\u4FE1\u606F",children:(0,e.jsxs)(z.UW,{children:[(0,e.jsx)(d.Z,{label:"\u5BB9\u5668\u540D\u79F0",name:"name",width:"md",readonly:!0}),(0,e.jsx)(d.Z,{label:"\u8BBF\u95EEHostName",name:"alise",width:"md",tooltip:"\u901A\u8FC7\u914D\u7F6E\u6B64\u540D\u79F0\uFF0C\u5728\u5BB9\u5668\u5185\u90E8\u8FDB\u884C\u8BF7\u6C42\u8BBF\u95EE"}),(0,e.jsx)(Pe.Z,{label:"\u5173\u8054\u5B58\u50A8",name:"volume"})]})}),(0,e.jsx)(I.Z,{title:"\u73AF\u5883\u53D8\u91CF",children:(0,e.jsx)(T.Z,{direction:"vertical",children:A&&A.map(function(E,L){return(0,e.jsx)(s.Z.Text,{copyable:{icon:(0,e.jsx)(_e.Z,{}),onCopy:function(){var ie=E.split("=");p.onAddEnv(ie[0],ie[1])},tooltips:["add env","success"]},code:!0,ellipsis:{tooltip:E},style:{width:300},children:E},L)})},"linkEnv")})]})},M=function(h){var _,S,A=!1,y=(_=(S=m.current)===null||S===void 0?void 0:S.getList())!==null&&_!==void 0?_:[];if(y.map(function(L){L.name==h.name&&(A=!0)}),!A){var E;(E=m.current)===null||E===void 0||E.add(h)}};return(0,i.useImperativeHandle)(V,function(){return{setDefaultLink:function(h){h&&h.map(function(_){_.name!=""&&M(_)})}}}),(0,e.jsxs)(I.Z,{title:"\u5173\u8054\u5BB9\u5668",headerBordered:!0,children:[(0,e.jsx)(fe.u,{name:"links",actionRef:m,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5173\u8054"},actionGuard:{beforeAddRow:function(h,_){return x(!0),!1}},copyIconProps:!1,min:0,itemRender:function(h,_){return(0,e.jsx)(B,{action:h.action,name:_.record.name})}}),(0,e.jsx)(ze.Z,{title:"\u9009\u62E9\u5BB9\u5668",width:800,footer:!1,open:g,onClose:function(){return x(!1)},children:(0,e.jsx)(Xe.Z,{onSelect:function(h){M({name:h.Name,alise:h.Config.Hostname,volume:!1}),x(!1)}})})]})}),Qe=Je,qe=n(91058),Re=n(64317),en=(0,i.forwardRef)(function(p,V){var R=(0,i.useRef)();return(0,i.useImperativeHandle)(V,function(){return{setDefaultDestPath:function(g){var x,m,B=(x=(m=R.current)===null||m===void 0?void 0:m.getList())!==null&&x!==void 0?x:[];g.length!=0&&g.filter(function(M){return M!=""}).map(function(M){var O=!1;if(B.map(function(_){if(_.dest==M){O=!0;return}}),!O){var h;(h=R.current)===null||h===void 0||h.add({dest:M,permission:"write",inImage:!0})}})},addUserVolumeItem:function(g,x){var m,B=(m=R.current)===null||m===void 0?void 0:m.getList(),M=!1;if(B==null||B.map(function(h){if(h.dest==x){M=!0;return}}),!M){var O;(O=R.current)===null||O===void 0||O.add({host:g,dest:x})}}}}),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(I.Z,{title:"\u81EA\u5B9A\u4E49\u6302\u8F7D\u6216\u662F\u5B58\u50A8\u5377",tooltip:"\u6302\u8F7D\u53EF\u4EE5\u662F\u5BBF\u4E3B\u673A\u7684\u76EE\u5F55\u6216\u662F\u6587\u4EF6\uFF0C\u4E5F\u53EF\u4EE5\u6307\u5B9A\u5B58\u50A8\u5377\u540D\uFF08\u81EA\u52A8\u65B0\u5EFA\uFF09\u3002",headerBordered:!0,direction:"column",children:(0,e.jsx)(fe.u,{actionRef:R,name:"volumes",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u6620\u5C04\u76EE\u5F55"},copyIconProps:!1,min:0,children:function(g,x,m){var B=m.getCurrentRowData();return(0,e.jsxs)(z.UW,{children:[(0,e.jsxs)(T.Z.Compact,{children:[(0,e.jsx)(d.Z,{label:"\u5BBF\u4E3B\u673A\u6587\u4EF6\u3001\u76EE\u5F55\u6216\u5B58\u50A8\u5377",name:"host",width:p.showInDrawer?"sm":"md"}),(0,e.jsx)(Re.Z,{label:" ",valueEnum:{write:"\u8BFB\u5199",readonly:"\u53EA\u8BFB"},initialValue:"write",name:"permission"})]}),(0,e.jsx)(d.Z,{label:"\u5BB9\u5668\u5185\u8DEF\u5F84",name:"dest",width:p.showInDrawer?"sm":"md",required:!0,rules:[{required:!0}],disabled:p.disabledUserVolumeDest||B.inImage})]})}})})})}),nn=en,tn=n(2831),De=n(52688),Ke=n(86125),an=n(44349);function un(p){var V,R=(0,i.useState)(),N=w()(R,2),g=N[0],x=N[1];return(0,i.useEffect)(function(){(0,tn.aF)().then(function(m){return x(m.data.info)})},[]),(0,e.jsxs)(I.Z,{children:[(0,e.jsx)(d.Z,{label:"\u5171\u4EAB\u5185\u5B58\u5927\u5C0F - /dev/shm",name:"shmsize",initialValue:"64M",tooltip:"0 \u4E3A\u4F7F\u7528\u9ED8\u8BA464M\uFF0C\u914D\u7F6E\u65F6\u8BF7\u9644\u52A0\u5355\u4F4D\uFF0C\u4F8B\u5982\uFF1A1G"}),(0,e.jsx)(U.Z,{label:"\u6700\u5927Cpu\u914D\u989D",name:"cpus",tooltip:"0 \u4E3A\u4E0D\u9650\u5236",children:(0,e.jsx)(Ke.Z,{step:.1,max:g==null?void 0:g.NCPU,marks:{0:"0",.5:"0.5\u6838",1:"1\u6838",1.5:"1.5\u6838",2:"2\u6838",4:"4\u6838",6:"6\u6838",8:"8\u6838"}})}),(0,e.jsx)(U.Z,{label:"\u6700\u5927\u5185\u5B58\u914D\u989D",name:"memory",tooltip:"0 \u4E3A\u4E0D\u9650\u5236",children:(0,e.jsx)(Ke.Z,{step:256,max:Math.round(((V=g==null?void 0:g.MemTotal)!==null&&V!==void 0?V:0)/1024/1024),marks:{0:"0",1024:"1G",2048:"2G",3072:"3G",4096:"4G"}})}),(0,e.jsx)(Re.Z,{label:"\u65E5\u5FD7\u7C7B\u578B",name:["log","driver"],tooltip:"\u9ED8\u8BA4\u4F7F\u7528 json-file \u9A71\u52A8\u7531 docker \u7EDF\u4E00\u7BA1\u7406\u3002\u91C7\u7528 journal \u65F6\u65E5\u5FD7\u5C06\u6765\u5BBF\u4E3B\u673A\u7BA1\u7406",initialValue:"json-file",valueEnum:{"json-file":"json-file",journald:"journal (\u5BBF\u4E3B\u9700\u8981\u5B89\u88C5journal\u670D\u52A1)"}}),(0,e.jsx)(D.Z,{name:["log"],children:function(B){var M=B.log;if(M.driver=="json-file")return(0,e.jsxs)(z.UW,{children:[(0,e.jsx)(d.Z,{label:"\u65E5\u5FD7\u5207\u5272\u5C3A\u5BF8",name:["log","maxSize"],placeholder:"\u4F8B\u5982\uFF1A10k,5M",tooltip:"\u9ED8\u8BA4 Docker \u5E76\u4E0D\u4F1A\u81EA\u52A8\u5207\u5272\u65E5\u5FD7"}),(0,e.jsx)(d.Z,{tooltip:"\u9ED8\u8BA4 Docker \u5E76\u4E0D\u4F1A\u81EA\u52A8\u6E05\u7406\u65E5\u5FD7\u6587\u4EF6",label:"\u4FDD\u7559\u65E5\u5FD7\u6587\u4EF6\u6570",name:["log","maxFile"],placeholder:"\u4F8B\u5982\uFF1A10"})]})}}),(0,e.jsx)(an.Z,{name:"device",label:"\u5173\u8054\u8BBE\u5907",hideCopyButton:!0,showAddButton:!0,items:[{label:"\u5BBF\u4E3B\u673A\u8DEF\u5F84",name:"host",width:"md",placeholder:"\u4F8B\u5982\uFF1A/dev/tty0"},{label:"\u5BB9\u5668\u5185\u8DEF\u5F84",name:"dest",width:"md",placeholder:"\u4F8B\u5982\uFF1A/dev/tty0"}]}),(0,e.jsxs)(u.Z,{children:[(0,e.jsx)(J.Z,{span:4,children:(0,e.jsx)(De.Z,{label:"\u4F7F\u7528 Gpu",name:["gpus","enable"]})}),(0,e.jsx)(J.Z,{span:20,children:(0,e.jsx)(D.Z,{name:["gpus"],children:function(B){var M=B.gpus;if(M&&M.enable)return(0,e.jsx)(Re.Z,{mode:"tags",label:"\u8BBE\u5907\u5217\u8868",name:["gpus","device"],placeholder:"\u914D\u7F6E\u4F7F\u7528\u8BBE\u5907id\u6216\u662Fuuid\uFF0C\u4E0D\u586B\u6240\u4E3A\u6240\u6709\u8BBE\u5907"})}})})]}),(0,e.jsx)(D.Z,{name:["gpus"],children:function(B){var M=B.gpus;if(M&&M.enable)return(0,e.jsx)(Re.Z,{label:"\u8BA1\u7B97\u80FD\u529B",name:["gpus","capabilities"],mode:"multiple",fieldProps:{allowClear:!0},options:[{label:"compute - \u8BA1\u7B97\u80FD\u529B",value:"compute"},{label:"compat32 - \u517C\u5BB932\u4F4D",value:"compat32"},{label:"graphics - \u56FE\u5F62\u5904\u7406\u80FD\u529B",value:"graphics"},{label:"utility - \u76D1\u63A7\u548C\u7BA1\u7406\u80FD\u529B",value:"utility"},{label:"video - \u89C6\u9891\u5904\u7406\u80FD\u529B",value:"video"},{label:"display - \u663E\u793A\u56FE\u5F62\u754C\u9762\u80FD\u529B",value:"display"}]})}})]})}function rn(){return(0,e.jsx)(I.Z,{title:"\u5BB9\u5668\u6807\u7B7E",children:(0,e.jsx)(fe.u,{name:"label",label:"",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u6807\u7B7E"},copyIconProps:!1,min:0,children:(0,e.jsxs)(z.UW,{children:[(0,e.jsx)(d.Z,{width:"md",name:"name",label:"\u540D\u79F0",placeholder:""}),(0,e.jsx)(d.Z,{width:"md",name:"value",label:"\u503C",placeholder:""})]})})})}var sn=n(44771),on=n(86615),Pn="default",xn="user";function ln(p){return(0,e.jsx)(U.Z,{label:p.label,tooltip:p.tooltip,children:(0,e.jsxs)(T.Z.Compact,{block:!0,children:[(0,e.jsx)(on.Z.Group,{radioType:"button",name:[p.name,"useDefault"],options:[{label:"\u4F7F\u7528\u9ED8\u8BA4",value:!0},{label:"\u81EA\u5B9A\u4E49",value:!1}]}),(0,e.jsx)(D.Z,{name:[p.name],children:function(R){return R[p.name]&&R[p.name].useDefault?(0,e.jsx)(d.Z,{name:[p.name,"default"],disabled:!0,placeholder:"\u672A\u8BBE\u7F6E"}):(0,e.jsx)(d.Z,{name:[p.name,"value"]})}})]})})}var we=ln,Le=n(24963);function dn(){var p=(0,i.useContext)(Le.Z),V=p.notice,R=p.lang;return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(I.Z,{children:[(0,e.jsx)(sn.Z,{label:"\u91CD\u542F\u7B56\u7565"}),(0,e.jsxs)(z.UW,{children:[(0,e.jsx)(De.Z,{fieldProps:{onChange:function(g){g&&V.warning(R("app.create.privilegedNotice"))}},name:"privileged",label:"\u8D4B\u4E88\u5BB9\u5668Root\u6743\u9650",initialValue:!1}),(0,e.jsx)(De.Z,{name:"autoRemove",label:"\u505C\u6B62\u540E\u81EA\u52A8\u5220\u9664",initialValue:!1}),(0,e.jsx)(De.Z,{fieldProps:{onChange:function(g){g&&V.warning(R("app.create.hostPidNotice"))}},name:"hostPid",label:"\u5173\u8054\u5BBF\u4E3B\u673APid",initialValue:!1})]}),(0,e.jsx)(we,{label:"\u5DE5\u4F5C\u76EE\u5F55",tooltip:"\u9ED8\u8BA4\u4F7F\u7528\u955C\u50CF\u4E2D\u6307\u5B9A\u7684\u5DE5\u4F5C\u76EE\u5F55",name:"workDir"}),(0,e.jsx)(we,{label:"User",tooltip:"\u5728\u5BB9\u5668\u4E2D\u8FD0\u884C\u547D\u4EE4\u7684\u7528\u6237",name:"user"}),(0,e.jsx)(we,{label:"Command",tooltip:"\u542F\u52A8\u5BB9\u5668\u65F6\u8FD0\u884C\u7684\u547D\u4EE4\uFF0C\u4EE5\u7A7A\u683C\u5206\u9694",name:"command"}),(0,e.jsx)(we,{label:"Entrypoint",tooltip:"\u65E0\u6CD5\u8986\u76D6\u955C\u50CF\u4E2D\u5DF2\u7ECF\u6307\u5B9A\u7684 Entrypoint \u547D\u4EE4",name:"entrypoint"})]})})}var cn=n(91845),He=n(62597),$e=n(82346),mn=n(4798),fn=(0,i.forwardRef)(function(p,V){var R=(0,i.useState)(""),N=w()(R,2),g=N[0],x=N[1],m=(0,i.useRef)(),B=(0,i.useContext)(r.Z),M=B.createFormRef;return(0,i.useImperativeHandle)(V,function(){return{setExposePort:function(h){if(h){var _,S,A=(_=(S=m.current)===null||S===void 0?void 0:S.getList())!==null&&_!==void 0?_:[];Object.keys(h).map(function(y){var E=!1;if(A.map(function(ne){ne.dest==y&&(E=!0)}),!E){var L;(L=m.current)===null||L===void 0||L.add({host:"",dest:y})}})}},setHostname:function(h){x(h)},addPortItem:function(h,_){var S,A=(S=m.current)===null||S===void 0?void 0:S.getList(),y=!1;if(A==null||A.map(function(L){if(L.host==h){y=!0;return}}),!y){var E;(E=m.current)===null||E===void 0||E.add({host:String(h),dest:String(_)})}}}}),(0,e.jsx)(I.Z,{title:"\u7ED1\u5B9A\u7AEF\u53E3",tooltip:"\u8BBF\u95EE\u7AEF\u53E3\u7559\u7A7A\u65F6\u968F\u673A\u751F\u6210\u7AEF\u53E3\uFF0C\u5168\u90E8\u5220\u9664\u5219\u8868\u793A\u4E0D\u66B4\u9732\u7AEF\u53E3",headerBordered:!0,extra:(0,e.jsxs)(T.Z,{children:[p.showBindHost&&(0,e.jsx)(De.Z,{name:"useHostNetwork",fieldProps:{checkedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",unCheckedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",onChange:function(h){if(h){var _;(_=M.current)===null||_===void 0||_.setFieldsValue({bindIpV6:!1,publishAllPorts:!1})}}}}),p.showBindIpV6&&(0,e.jsx)(D.Z,{name:["siteName","useHostNetwork"],children:function(h){var _=h.useHostNetwork;return(0,e.jsx)(De.Z,{name:"publishAllPorts",fieldProps:{checkedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3",unCheckedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3"},disabled:_},"publishAllPorts")}}),p.showBindIpV6&&(0,e.jsx)(D.Z,{name:["siteName","useHostNetwork"],children:function(h){var _=h.useHostNetwork;return(0,e.jsx)(De.Z,{name:"bindIpV6",fieldProps:{checkedChildren:"IpV6",unCheckedChildren:"IpV6"},disabled:_},"bindIpV6")}})]}),children:(0,e.jsx)(D.Z,{name:["useHostNetwork","bindIpV6","publishAllPorts"],children:function(h){var _=h.useHostNetwork,S=h.bindIpV6,A=h.publishAllPorts;if(!_&&!A)return(0,e.jsx)(fe.u,{name:"ports",actionRef:m,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BF9\u5916\u90E8\u8BBF\u95EE"},min:0,copyIconProps:!1,children:(0,e.jsxs)(z.UW,{children:[(0,e.jsx)(d.Z,{width:p.showInDrawer?"sm":"md",name:"host",label:"\u5916\u90E8\u8BBF\u95EE\u7AEF\u53E3",tooltip:"\u5BF9\u5916\u8BBF\u95EE\u53EF\u4EE5\u901A\u8FC7\u6DFB\u52A0\u8BBF\u95EE\u7AEF\u53E3\u6216\u662F\u521B\u5EFA\u5B8C\u6210\u540E\u5BF9\u5BB9\u5668\u7ED1\u5B9A\u57DF\u540D",placeholder:"\u7559\u7A7A\u5C06\u4F7F\u7528\u968F\u673A\u7AEF\u53E3\uFF0C\u7ED1\u5B9AIpV6\u5FC5\u586B",required:S,rules:[{required:S}]}),(0,e.jsx)(d.Z,{label:"\u5BB9\u5668\u5185\u7AEF\u53E3",width:p.showInDrawer?"sm":"md",name:"dest",placeholder:"\u6784\u5EFA\u65F6 Expose \u6307\u5B9A\u7684\u7AEF\u53E3",required:!0,rules:[{required:!0}]})]})})}})})}),hn=fn,xe=n(52255);function vn(){var p=(0,i.useRef)(),V=function(g){var x,m,B=!1,M=(x=(m=p.current)===null||m===void 0?void 0:m.getList())!==null&&x!==void 0?x:[];if(M.map(function(h){h.name==g.name&&(B=!0)}),!B){var O;(O=p.current)===null||O===void 0||O.add(g)}},R=function(g){var x,m,B=!1,M=(x=(m=p.current)===null||m===void 0?void 0:m.getList())!==null&&x!==void 0?x:[];M.map(function(O,h){if(O.name==g){var _;(_=p.current)===null||_===void 0||_.remove(h)}})};return(0,e.jsx)(I.Z,{title:"\u5173\u8054\u5BBF\u4E3B\u7F51\u7EDC\u4E3B\u673A",tooltip:"\u5BB9\u5668\u5185\u5982\u679C\u9700\u8981\u8BF7\u6C42\u5BBF\u4E3B\u673A\u6240\u5728\u7684\u7F51\u7EDC\u4E2D\u7684\u4E3B\u673A\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6B64\u914D\u7F6E\u5C06Ip\u6CE8\u5165\u5230\u5BB9\u5668\u4E2D",extra:(0,e.jsx)(T.Z,{children:(0,e.jsx)(De.Z,{name:"enableBindHost",fieldProps:{checkedChildren:"\u7ED1\u5B9A\u5BBF\u4E3B\u673AIp",unCheckedChildren:"\u7ED1\u5B9A\u5BBF\u4E3B\u673AIp",onChange:function(g){g?V({name:"host.dpanel.local",value:"host-gateway"}):R("host.dpanel.local")}}})}),children:(0,e.jsx)(fe.u,{name:"extraHosts",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BBF\u4E3B\u673A\u7F51\u7EDC\u5173\u8054"},actionRef:p,copyIconProps:!1,min:0,children:(0,e.jsxs)(z.UW,{children:[(0,e.jsx)(d.Z,{width:"md",name:"name",label:"Hostname",placeholder:""}),(0,e.jsx)(d.Z,{width:"md",name:"value",label:"ip",placeholder:""})]})})})}var Ue=n(90672),pn=(0,i.forwardRef)(function(p,V){return(0,i.useImperativeHandle)(V,function(){return{}}),(0,e.jsxs)(I.Z,{title:"\u7F51\u7EDC\u914D\u7F6E",children:[(0,e.jsxs)(z.UW,{children:[(0,e.jsx)(d.Z,{label:"\u914D\u7F6E ipV4 \u5730\u5740",name:["ipV4","address"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u5730\u5740\uFF0C\u4F8B\u5982 192.168.1.5",placeholder:"192.168.1.5"}),(0,e.jsx)(D.Z,{name:["ipV4"],children:function(N){var g=N.ipV4;return(0,e.jsx)(d.Z,{label:"\u914D\u7F6E ipV4 \u5B50\u7F51",name:["ipV4","subnet"],width:"md",required:g&&g.address,tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u6240\u5728\u7684\u5B50\u7F51\uFF0C\u4F8B\u5982 192.168.1.0/24",placeholder:"192.168.1.0/24",rules:[{required:g&&g.address}]})}}),(0,e.jsx)(d.Z,{label:"\u914D\u7F6E ipV4 \u7F51\u5173",name:["ipV4","gateway"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u7684\u7F51\u5173\uFF0C\u4F8B\u5982 192.168.1.1",placeholder:"192.168.1.1"}),(0,e.jsx)(De.Z,{label:"\u81EA\u5B9A\u4E49ipV6",name:"enableIpV6Address"})]}),(0,e.jsx)(D.Z,{name:["enableIpV6Address"],children:function(N){var g=N.enableIpV6Address;if(g)return(0,e.jsxs)(z.UW,{children:[(0,e.jsx)(d.Z,{label:"\u914D\u7F6E ipV6 \u5730\u5740",name:["ipV6","address"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipV6\u5730\u5740\uFF0C\u4F8B\u5982 2001:db8::5",placeholder:"2001:db8::5"}),(0,e.jsx)(D.Z,{name:["ipV6"],children:function(m){var B=m.ipV6;return(0,e.jsx)(d.Z,{label:"\u914D\u7F6E ipV6 \u5B50\u7F51",name:["ipV6","subnet"],width:"md",required:B&&B.address,tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u6240\u5728\u7684\u5B50\u7F51\uFF0C\u4F8B\u5982 2001:db8::/48",placeholder:"2001:db8::/48",rules:[{required:B&&B.address}]})}}),(0,e.jsx)(d.Z,{label:"\u914D\u7F6E ipV6 \u7F51\u5173",name:["ipV6","gateway"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipV6\u7684\u7F51\u5173\uFF0C\u4F8B\u5982 2001:db8::1",placeholder:"2001:db8::1"})]})}}),(0,e.jsx)(Ue.Z,{label:"DNS\u914D\u7F6E",name:"dns",placeholder:"\u8BF7\u6307\u5B9Adns\u5730\u5740\uFF0C\u4F8B\u5982\uFF1A8.8.8.8\uFF0C\u4E00\u884C\u6DFB\u4E00\u6761dns\u5730\u5740"})]})}),_n=pn,Se=n(31199),En=n(86250);function Cn(){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(I.Z,{title:"\u9644\u52A0\u6267\u884C\u811A\u672C",headerBordered:!0,subTitle:"",children:(0,e.jsx)(Ue.Z,{label:"\u5BB9\u5668\u521B\u5EFA\u540E\u6267\u884C\u811A\u672C",name:["hook","containerCreate"],placeholder:"\u5BB9\u5668\u5728\u521B\u5EFA\u540E\u6267\u884C\u7684\u811A\u672C\uFF0C\u6B64\u811A\u672C\u5E76\u4E0D\u4F1A\u5F71\u54CD entrypoint \u53CA command\u3002\u4F8B\u5982\uFF1Als -al && touch abc.txt && apt update"})}),(0,e.jsxs)(I.Z,{title:"\u5065\u5EB7\u68C0\u67E5",headerBordered:!0,children:[(0,e.jsxs)(En.Z,{gap:20,justify:"start",children:[(0,e.jsx)(Se.Z,{label:"\u91CD\u590D\u95F4\u9694\u65F6\u95F4\uFF08\u79D2\uFF09",name:["healthcheck","interval"],initialValue:30}),(0,e.jsx)(Se.Z,{label:"\u8D85\u65F6\u5931\u8D25\u65F6\u95F4\uFF08\u79D2\uFF09",name:["healthcheck","timeout"],initialValue:10}),(0,e.jsx)(Se.Z,{label:"\u5931\u8D25\u91CD\u590D\u6B21\u6570",name:["healthcheck","retries"],initialValue:3}),(0,e.jsx)(Re.Z,{width:"sm",label:"\u811A\u672C\u6267\u884C\u73AF\u5883",initialValue:"CMD",name:["healthcheck","shellType"],valueEnum:{CMD:"\u5728 Docker \u73AF\u5883\u6267\u884C","CMD-SHELL":"\u5728\u5BB9\u5668\u5185\u6267\u884C"}})]}),(0,e.jsx)(Ue.Z,{label:"\u6267\u884C\u811A\u672C",name:["healthcheck","cmd"],placeholder:"\u914D\u7F6E\u5BB9\u5668\u5065\u5EB7\u68C0\u67E5\u811A\u672C\uFF0C\u4F8B\u5982\uFF1Acurl -f http://localhost:8080/ || exit 1"})]})]})}var gn=n(74763),Ge=n(2487),jn=[{name:"ALL"},{name:"AUDIT_CONTROL"},{name:"AUDIT_WRITE",default:!0},{name:"BLOCK_SUSPEND"},{name:"CHOWN",default:!0},{name:"DAC_OVERRIDE",default:!0},{name:"DAC_READ_SEARCH"},{name:"FOWNER",default:!0},{name:"FSETID",default:!0},{name:"IPC_LOCK"},{name:"IPC_OWNER"},{name:"KILL",default:!0},{name:"LEASE"},{name:"LINUX_IMMUTABLE"},{name:"MAC_ADMIN"},{name:"MAC_OVERRIDE"},{name:"MKNOD",default:!0},{name:"NET_ADMIN"},{name:"NET_BIND_SERVICE",default:!0},{name:"NET_BROADCAST"},{name:"NET_RAW",default:!0},{name:"SETFCAP",default:!0},{name:"SETGID",default:!0},{name:"SETPCAP",default:!0},{name:"SETUID",default:!0},{name:"SYSLOG"},{name:"SYS_ADMIN"},{name:"SYS_BOOT"},{name:"SYS_CHROOT",default:!0},{name:"SYS_MODULE"},{name:"SYS_NICE"},{name:"SYS_PACCT"},{name:"SYS_PTRACE"},{name:"SYS_RAWIO"},{name:"SYS_RESOURCE"},{name:"SYS_TIME"},{name:"SYS_TTY_CONFIG"}],Dn=(0,i.forwardRef)(function(p,V){var R=(0,i.useContext)(Le.Z),N=R.lang,g=(0,i.useState)(null),x=w()(g,2),m=x[0],B=x[1],M=(0,i.useContext)(r.Z),O=M.createFormRef;return(0,i.useImperativeHandle)(V,function(){return{}}),(0,e.jsx)(I.Z,{children:(0,e.jsx)(Ge.Z,{grid:{gutter:10,xs:3,sm:3,md:4,lg:4,xl:4,xxl:6},dataSource:jn,renderItem:function(_,S){var A;return(0,e.jsx)(Ge.Z.Item,{children:(0,e.jsx)(De.Z,{fieldProps:{onChange:function(E){_.name=="ALL"&&B(E)}},disabled:_.name!="ALL"&&((0,gn.k)(m)?(A=O.current)===null||A===void 0?void 0:A.getFieldValue(["capAdd","ALL"]):m),initialValue:_.default,name:["capAdd",_.name],tooltip:N("app.create.cap."+_.name.toLocaleLowerCase()),label:_.name})},S)}})})}),Bn=Dn,ye="update",Ye="copy",We="new";function Fn(){var p,V,R,N=(0,i.useContext)(Le.Z),g=N.loading,x=(0,i.useContext)(r.Z),m=x.createFormRef,B=x.volumeListRef,M=x.domainRef,O=x.createEnvRef,h=x.createLinkRef,_=(0,i.useState)(We),S=w()(_,2),A=S[0],y=S[1],E=(0,$e.useSearchParams)(),L=w()(E,2),ne=L[0],ie=L[1],K=(0,$e.useNavigate)(),de=(0,i.useState)("basic"),ve=w()(de,2),se=ve[0],Me=ve[1],pe=parseInt((p=ne.get("id"))!==null&&p!==void 0?p:""),Ee=(V=ne.get("containerId"))!==null&&V!==void 0?V:"",Ae=(R=ne.get("imageId"))!==null&&R!==void 0?R:"";return(0,i.useEffect)(function(){if(Ee||pe)g.show(),(0,He.iE)({md5:Ee,id:pe}).then(function(){var oe=j()(a()().mark(function l(t){var ce,Ce,$,Ie,Be,Ze,Ne,ke,Ve;return a()().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:if($={info:{},layer:[]},!t.data.env.imageName){ge.next=11;break}return ge.prev=2,ge.next=5,(0,be.YU)({md5:t.data.env.imageName});case 5:Ie=ge.sent,$=Ie.data,ge.next=11;break;case 9:ge.prev=9,ge.t0=ge.catch(2);case 11:ne.get("op")==Ye?y(Ye):y(ye),t.data.env.network&&t.data.env.network.map(function(G){return!G.alise&&G.name!="bridge"&&(G.alise=[t.data.siteName+".pod.dpanel.local"]),G}),t.data.env.ports&&t.data.env.ports.map(function(G){return G.host=="0"&&(G.host=""),G}),Be=t.data.env.bindIpV6,t.data.containerInfo.Info&&t.data.containerInfo.Info.NetworkSettings.Networks&&Object.keys(t.data.containerInfo.Info.NetworkSettings.Networks).map(function(G){t.data.env.network&&(t.data.env.network=t.data.env.network.map(function(Oe){return G==Oe.name&&(Oe.subnet=t.data.containerInfo.Info.NetworkSettings.Networks[G].IPAddress+"/"+t.data.containerInfo.Info.NetworkSettings.Networks[G].IPPrefixLen),Oe})),t.data.containerInfo.Info.NetworkSettings.Networks[G].IPv6Gateway!=""&&(Be=!0)}),t.data.env.extraHosts&&t.data.env.extraHosts.map(function(G){if(G.value=="host-gateway"){var Oe;(Oe=m.current)===null||Oe===void 0||Oe.setFieldValue("enableBindHost",!0)}}),Ze=t.data.env.ports,t.data.env.ports&&(Ze=t.data.env.ports.map(function(G){return G.host=(G.hostIp?G.hostIp+":":"")+G.host,G})),(ce=m.current)===null||ce===void 0||ce.setFieldsValue({imageName:t.data.env.imageName,privileged:t.data.env.privileged,bindIpV6:t.data.env.useHostNetwork?!1:Be,useHostNetwork:t.data.env.useHostNetwork,publishAllPorts:t.data.env.useHostNetwork?!1:t.data.env.publishAllPorts,workDir:{value:t.data.env.workDir,useDefault:!t.data.env.workDir,default:$&&$.info.Config&&$.info.Config.WorkingDir},user:{value:t.data.env.user,useDefault:!t.data.env.user,default:$&&$.info.Config&&$.info.Config.User},command:{value:t.data.env.command,useDefault:!t.data.env.command,default:$&&$.info.Config&&$.info.Config.Cmd&&$.info.Config.Cmd.join(" ")},entrypoint:{value:t.data.env.entrypoint,useDefault:!t.data.env.entrypoint,default:$&&$.info.Config&&$.info.Config.Entrypoint&&$.info.Config.Entrypoint.join(" ")},shmsize:(Ce=t.data.env.shmsize)!==null&&Ce!==void 0?Ce:"64M",cpus:t.data.env.cpus,memory:t.data.env.memory,environment:t.data.env.environment,label:t.data.env.label,volumes:t.data.env.volumes,ports:Ze,links:t.data.env.links,network:t.data.env.network,restart:t.data.env.restart,extraHosts:t.data.env.extraHosts,autoRemove:t.data.env.autoRemove,log:t.data.env.log,dns:t.data.env.dns&&t.data.env.dns.join(`
`),ipV4:t.data.env.ipV4,ipV6:t.data.env.ipV6,gpus:t.data.env.gpus,device:t.data.env.device,hook:t.data.env.hook,hostPid:t.data.env.hostPid,capAdd:t.data.env.capAdd&&Object.fromEntries(t.data.env.capAdd.map(function(G){return[G,!0]}))}),t.data.env.ipV6&&((Ne=m.current)===null||Ne===void 0||Ne.setFieldValue("enableIpV6Address",!0)),t.data.env.healthcheck&&t.data.env.healthcheck.cmd&&t.data.env.healthcheck.cmd!=""&&((ke=m.current)===null||ke===void 0||ke.setFieldsValue({healthcheck:t.data.env.healthcheck})),ne.get("op")==ye&&((Ve=m.current)===null||Ve===void 0||Ve.setFieldsValue({siteTitle:t.data.siteTitle,siteName:t.data.siteName}));case 23:case"end":return ge.stop()}},l,null,[[2,9]])}));return function(l){return oe.apply(this,arguments)}}()).finally(function(){g.destroy()});else{var he;y(We),(he=m.current)===null||he===void 0||he.resetFields()}},[ne]),(0,e.jsx)(b._z,{children:(0,e.jsx)(I.Z,{direction:"column",gutter:[0,10],children:(0,e.jsxs)(C.A,{submitter:{render:function(oe,l){return(0,e.jsx)(ae.S,{children:l})}},formRef:m,onFinish:function(){var he=j()(a()().mark(function oe(l){var t,ce,Ce,$;return a()().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return $={siteTitle:l.siteTitle,siteName:l.siteName,imageName:l.imageName,environment:l.environment,links:l.links,ports:l.ports,volumes:l.volumes,network:l.network,privileged:(t=l.privileged)!==null&&t!==void 0?t:!1,autoRemove:(ce=l.autoRemove)!==null&&ce!==void 0?ce:!1,restart:l.restart,cpus:l.cpus,memory:l.memory,shmsize:(Ce=l.shmsize)!==null&&Ce!==void 0?Ce:0,workDir:l.workDir&&!l.workDir.useDefault?l.workDir.value:"",user:l.user&&!l.user.useDefault?l.user.value:"",command:l.command&&!l.command.useDefault?l.command.value:"",entrypoint:l.entrypoint&&!l.entrypoint.useDefault?l.entrypoint.value:"",useHostNetwork:l.useHostNetwork,bindIpV6:l.bindIpV6,log:l.log,dns:l.dns&&l.dns!=""?l.dns.split(`
`):[],label:l.label,publishAllPorts:l.publishAllPorts,extraHosts:l.extraHosts,ipV4:l.ipV4,ipV6:l.ipV6,device:l.device,gpus:l.gpus,hook:l.hook,hostPid:l.hostPid,capAdd:l.capAdd?Object.keys(l.capAdd).map(function(Ze){return Ze}):[]},l.healthcheck&&l.healthcheck.cmd&&l.healthcheck.cmd!=""&&($.healthcheck=l.healthcheck),Ee&&A==ye&&($.containerId=Ee),Be.next=5,(0,He.$G)($);case 5:return K("/app/list"),Be.abrupt("return",!0);case 7:case"end":return Be.stop()}},oe)}));return function(oe){return he.apply(this,arguments)}}(),children:[(0,e.jsxs)(I.Z,{title:"\u57FA\u7840\u4FE1\u606F",headerBordered:!0,children:[(0,e.jsx)(d.Z,{name:"siteTitle",label:"\u5BB9\u5668\u63CF\u8FF0",fieldProps:{onChange:function(oe){var l="";if(oe.target.value&&A!=ye){var t,ce=(0,cn.N9)(oe.target.value.trim(),{toneType:"none",type:"array"});l=ce.join(""),(t=m.current)===null||t===void 0||t.setFieldValue("siteName",l)}}},placeholder:"\u8BF7\u8F93\u5165\u5BB9\u5668\u63CF\u8FF0\u540D\u79F0"}),(0,e.jsx)(d.Z,{name:"siteName",label:"\u5BB9\u5668\u6807\u8BC6",tooltip:"\u5BB9\u5668\u552F\u4E00\u6807\u8BC6\uFF0C\u7528\u4E8E\u6807\u8BC6\u5BB9\u5668\u548C\u5185\u90E8\u8BBF\u95EE",required:!0,disabled:A==ye,rules:[{required:!0}],placeholder:"\u8BF7\u8F93\u5165\u5BB9\u5668\u6807\u8BC6\u540D\u79F0"}),(0,e.jsx)(F,{redeploy:A!=We,fromImageId:Ae})]}),(0,e.jsx)(H.Z,{offsetTop:50,children:(0,e.jsx)(I.Z,{style:{marginBottom:-20},children:(0,e.jsx)(o.Z,{activeKey:se,onChange:function(oe){Me(oe),window.scrollTo(0,450)},items:[{label:"\u57FA\u672C\u914D\u7F6E",key:"basic"},{label:"\u5173\u8054\u914D\u7F6E",key:"link"},{label:"\u8FD0\u884C\u914D\u7F6E",key:"run-command"},{label:"\u8D44\u6E90\u914D\u7F6E",key:"resource"},{label:"Hook",key:"hook"},{label:"\u80FD\u529B\u914D\u7F6E",key:"cap"},{label:"\u5176\u5B83",key:"other"}]})})}),(0,e.jsxs)(xe.Z,{show:se=="basic",children:[(0,e.jsx)(hn,{ref:M,showBindHost:!0,showBindIpV6:!0}),(0,e.jsx)(qe.Z,{showAddButton:!0,showImportButton:!0,showCodeMode:!0,label:"\u73AF\u5883\u53D8\u91CF",ref:O}),(0,e.jsx)(nn,{showDefault:!0,ref:B}),(0,e.jsx)(D.Z,{name:["siteName","useHostNetwork"],children:function(oe){var l=oe.siteName,t=oe.useHostNetwork;if(!t)return(0,e.jsx)(_n,{})}})]}),(0,e.jsx)(xe.Z,{show:se=="link",children:(0,e.jsx)(D.Z,{name:["siteName","useHostNetwork"],children:function(oe){var l=oe.siteName,t=oe.useHostNetwork;return t?(0,e.jsx)(k.Z,{showIcon:!0,description:"\u7ED1\u5B9A\u5230\u5BBF\u4E3B\u673A\u7F51\u7EDC\u65F6\uFF0C\u65E0\u6CD5\u901A\u8FC7 Docker \u5173\u8054\u5176\u5B83\u5BB9\u5668\u3002\u8BF7\u4F7F\u7528\u5BBF\u4E3B\u673A\u5185\u7F51IP\u6216\u662F127.0.0.1\u4E92\u8054\u5BB9\u5668\u66B4\u9732\u7AEF\u53E3\u3002"}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Qe,{onAddEnv:function(Ce,$){var Ie;(Ie=O.current)===null||Ie===void 0||Ie.addEnvItem(Ce,$)},ref:h}),(0,e.jsx)(mn.Z,{siteName:l}),(0,e.jsx)(vn,{})]})}})}),(0,e.jsx)(xe.Z,{show:se=="run-command",children:(0,e.jsx)(dn,{})}),(0,e.jsx)(xe.Z,{show:se=="resource",children:(0,e.jsx)(un,{})}),(0,e.jsx)(xe.Z,{show:se=="hook",children:(0,e.jsx)(Cn,{})}),(0,e.jsx)(xe.Z,{show:se=="other",children:(0,e.jsx)(rn,{})}),(0,e.jsx)(xe.Z,{show:se=="cap",children:(0,e.jsx)(Bn,{})})]},"form")})})}},2831:function(je,Y,n){n.d(Y,{Ll:function(){return I},aF:function(){return w},d6:function(){return ae}});var Q=n(15009),a=n.n(Q),te=n(99289),j=n.n(te),P=n(82346);function w(){return b.apply(this,arguments)}function b(){return b=j()(a()().mark(function D(){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,P.request)("/api/common/home/info",{method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},D)})),b.apply(this,arguments)}function I(){return C.apply(this,arguments)}function C(){return C=j()(a()().mark(function D(){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,P.request)("/api/common/home/usage",{method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},D)})),C.apply(this,arguments)}function ae(){return d.apply(this,arguments)}function d(){return d=j()(a()().mark(function D(){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,P.request)("/api/common/home/upgrade-script",{method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},D)})),d.apply(this,arguments)}},14946:function(je,Y,n){n.d(Y,{CI:function(){return ae},HY:function(){return X},IS:function(){return w},XY:function(){return o},_3:function(){return W},_x:function(){return D},jR:function(){return I},t9:function(){return i}});var Q=n(15009),a=n.n(Q),te=n(99289),j=n.n(te),P=n(82346);function w(c){return b.apply(this,arguments)}function b(){return b=j()(a()().mark(function c(s){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,P.request)("/api/app/network/get-detail",{method:"POST",data:s}));case 1:case"end":return u.stop()}},c)})),b.apply(this,arguments)}function I(c){return C.apply(this,arguments)}function C(){return C=j()(a()().mark(function c(s){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,P.request)("/api/app/network/get-list",{method:"POST",data:s}));case 1:case"end":return u.stop()}},c)})),C.apply(this,arguments)}function ae(){return d.apply(this,arguments)}function d(){return d=j()(a()().mark(function c(){return a()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,P.request)("/api/app/network/prune",{method:"POST"});case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},c)})),d.apply(this,arguments)}function D(c){return H.apply(this,arguments)}function H(){return H=j()(a()().mark(function c(s){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,P.request)("/api/app/network/delete",{method:"POST",data:s});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},c)})),H.apply(this,arguments)}function o(c){return k.apply(this,arguments)}function k(){return k=j()(a()().mark(function c(s){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,P.request)("/api/app/network/create",{method:"POST",data:s});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},c)})),k.apply(this,arguments)}function i(c){return r.apply(this,arguments)}function r(){return r=j()(a()().mark(function c(s){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,P.request)("/api/app/network/disconnect",{method:"POST",data:s});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},c)})),r.apply(this,arguments)}function X(c){return U.apply(this,arguments)}function U(){return U=j()(a()().mark(function c(s){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,P.request)("/api/app/network/connect",{method:"POST",data:s});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},c)})),U.apply(this,arguments)}function W(c){return T.apply(this,arguments)}function T(){return T=j()(a()().mark(function c(s){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,P.request)("/api/app/network/get-container-list",{method:"POST",data:s}));case 1:case"end":return u.stop()}},c)})),T.apply(this,arguments)}},60335:function(je,Y,n){n.d(Y,{IE:function(){return I},IW:function(){return w},KK:function(){return o},LJ:function(){return i},RF:function(){return W},Re:function(){return X},aF:function(){return c},eE:function(){return D},jV:function(){return ae}});var Q=n(15009),a=n.n(Q),te=n(99289),j=n.n(te),P=n(82346);function w(f){return b.apply(this,arguments)}function b(){return b=j()(a()().mark(function f(u){return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,P.request)("/api/app/container/status",{method:"POST",data:u}));case 1:case"end":return v.stop()}},f)})),b.apply(this,arguments)}function I(f){return C.apply(this,arguments)}function C(){return C=j()(a()().mark(function f(u){return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,P.request)("/api/app/container/get-list",{data:u,method:"POST"}));case 1:case"end":return v.stop()}},f)})),C.apply(this,arguments)}function ae(f){return d.apply(this,arguments)}function d(){return d=j()(a()().mark(function f(u){return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,P.request)("/api/app/container/get-detail",{data:u,method:"POST"}));case 1:case"end":return v.stop()}},f)})),d.apply(this,arguments)}function D(f){return H.apply(this,arguments)}function H(){return H=j()(a()().mark(function f(u){return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,P.request)("/api/app/container/update",{data:u,method:"POST"}));case 1:case"end":return v.stop()}},f)})),H.apply(this,arguments)}function o(){return k.apply(this,arguments)}function k(){return k=j()(a()().mark(function f(){return a()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.abrupt("return",(0,P.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return J.stop()}},f)})),k.apply(this,arguments)}function i(f){return r.apply(this,arguments)}function r(){return r=j()(a()().mark(function f(u){return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,P.request)("/api/app/container/export",{method:"POST",data:u,responseType:"blob"}));case 1:case"end":return v.stop()}},f)})),r.apply(this,arguments)}function X(f){return U.apply(this,arguments)}function U(){return U=j()(a()().mark(function f(u){return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,P.request)("/api/app/container/commit",{method:"POST",data:u}));case 1:case"end":return v.stop()}},f)})),U.apply(this,arguments)}function W(f){return T.apply(this,arguments)}function T(){return T=j()(a()().mark(function f(u){return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,P.request)("/api/app/container/upgrade",{method:"POST",data:u}));case 1:case"end":return v.stop()}},f)})),T.apply(this,arguments)}function c(f){return s.apply(this,arguments)}function s(){return s=j()(a()().mark(function f(u){return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,P.request)("/api/app/container/copy",{method:"POST",data:u}));case 1:case"end":return v.stop()}},f)})),s.apply(this,arguments)}}}]);
