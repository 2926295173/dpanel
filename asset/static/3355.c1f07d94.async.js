"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3355],{28307:function(B,M,n){var y=n(5574),r=n.n(y),v=n(38345),c=n(97269),u=n(5966),s=n(64317),p=n(62370),E=n(28036),g=n(85265),D=n(42075),d=n(67294),P=n(80821),T=n(3393),C=n(97961),O=n(92754),b=n(63713),t=n(85893),h=(0,d.forwardRef)(function(o,a){var f=(0,d.useState)(!1),j=r()(f,2),_=j[0],R=j[1],I=(0,d.useRef)(),l=(0,d.useRef)();return(0,d.useImperativeHandle)(a,function(){return{upgradeImage:function(i){var e;return R(!0),(e=I.current)===null||e===void 0||e.setFieldValue("imageUrl",i),(0,T.Gb)({tag:i,type:"pull"})},setImageName:function(i){var e;R(!0),(e=I.current)===null||e===void 0||e.setFieldValue("imageUrl",i)}}}),[(0,t.jsx)(E.ZP,{type:o.buttonType?o.buttonType:"default",onClick:function(){var i,e;o.onClick&&o.onClick(),R(!0),(i=I.current)===null||i===void 0||i.resetFields(),(e=l.current)===null||e===void 0||e.setStart("")},children:"\u62C9\u53D6\u955C\u50CF"},"remoteBtn"),(0,t.jsxs)(g.Z,{forceRender:!0,open:_,title:"\u62C9\u53D6\u8FDC\u7A0B\u955C\u50CF",width:800,onClose:function(){return R(!1)},footer:!1,children:[(0,t.jsx)(v.Z,{children:(0,t.jsxs)(D.Z,{direction:"vertical",size:"middle",children:[(0,t.jsxs)("div",{children:["1\u3001\u955C\u50CF\u540D\u79F0\u4E2D\u4E0D\u5305\u542B\u4ED3\u5E93\u5730\u5740\u65F6\uFF0C \u9ED8\u8BA4\u4ECE ",(0,t.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:"docker hub"})," \u4E2D\u4E0B\u8F7D\uFF0C \u4F60\u53EF\u4EE5\u5728\u4E0A\u9762",(0,t.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:"\u3010\u67E5\u627E\u3011"}),"\u9700\u8981\u7684\u955C\u50CF"]}),(0,t.jsxs)("div",{children:["2\u3001\u955C\u50CF\u4E2D\u5305\u542B\u4ED3\u5E93\u5730\u5740\u65F6\uFF0C\u8BF7\u786E",(0,t.jsx)(b.Link,{to:"/image/registry",children:"\u3010\u6DFB\u52A0\u3011"}),"\u8FC7\u8BE5\u4ED3\u5E93\uFF0C\u5E76\u6709 Pull \u6743\u9650"]}),(0,t.jsxs)("div",{children:["3\u3001\u53EF\u5728",(0,t.jsx)(b.Link,{to:"/image/registry",children:"\u3010\u4ED3\u5E93\u7BA1\u7406\u3011"}),"\u4E2D\u914D\u7F6E\u955C\u50CF\u7684\u52A0\u901F\u5730\u5740"]})]})}),(0,t.jsx)(v.Z,{title:"\u62C9\u53D6\u955C\u50CF",headerBordered:!0,children:(0,t.jsxs)(c.A,{submitter:!1,formRef:I,children:[(0,t.jsxs)(D.Z.Compact,{children:[(0,t.jsx)(u.Z,{width:400,name:"imageUrl",placeholder:"\u8BF7\u8F93\u5165\u955C\u50CF\u5730\u5740"}),(0,t.jsx)(s.Z,{name:"platform",style:{width:150},placeholder:"\u9ED8\u8BA4\u5F53\u524D\u67B6\u6784",options:C.ii.map(function(m){return{label:m.name,value:m.name}})}),(0,t.jsx)(P.Z,{action:function(){var i,e,U,F,w,A=(i=(e=I.current)===null||e===void 0?void 0:e.getFieldValue("imageUrl"))!==null&&i!==void 0?i:"";return(U=l.current)===null||U===void 0||U.setStart(A),(0,T.Gb)({tag:A,type:"pull",platform:(F=(w=I.current)===null||w===void 0?void 0:w.getFieldValue("platform"))!==null&&F!==void 0?F:""})},onSuccess:function(i){var e;(e=l.current)===null||e===void 0||e.setFinish(),R(!1),o.onFinish&&(console.log(i),o.onFinish(i.data.tag))},children:"\u62C9\u53D6\u955C\u50CF"})]}),(0,t.jsx)(p.Z,{label:"\u62C9\u53D6\u8FDB\u5EA6",children:(0,t.jsx)(O.Z,{ref:l})})]})})]},"remoteDrawer")]});M.Z=h},92754:function(B,M,n){var y=n(5574),r=n.n(y),v=n(67294),c=n(63713),u=n(38703),s=n(85893),p=(0,v.forwardRef)(function(E,g){var D=(0,v.useState)(""),d=r()(D,2),P=d[0],T=d[1];(0,v.useImperativeHandle)(g,function(){return{setFinish:function(){h({finish:{downloading:100,extracting:100}})},setStart:function(a){a&&T(a),h({start:{downloading:0,extracting:0}})}}});var C=(0,c.useModel)("subscriber");C.addDataHandler("image:pull:"+P,function(o){h(o.data)});var O=(0,v.useState)(),b=r()(O,2),t=b[0],h=b[1];return(0,v.useEffect)(function(){h({start:{downloading:0,extracting:0}})},[]),(0,s.jsx)(s.Fragment,{children:t&&Object.keys(t).map(function(o){return(0,s.jsx)(u.Z,{percent:t[o].downloading,success:{percent:t[o].extracting}},o)})})});M.Z=p},97961:function(B,M,n){n.d(M,{GH:function(){return d},MF:function(){return O},_2:function(){return T},fN:function(){return p},ii:function(){return s},vC:function(){return g}});var y=n(15009),r=n.n(y),v=n(99289),c=n.n(v),u=n(63713),s=[{name:"linux/amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"linux/arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"linux/i386",arch:"386",search:[]},{name:"linux/arm/v6",arch:"arm",search:[]},{name:"linux/arm/v7",arch:"arm",search:[]},{name:"linux/arm/v8",arch:"arm64",search:[]},{name:"linux/ppc64le",arch:"ppc64le",search:[]},{name:"linux/riscv64",arch:"riscv64",search:[]}];function p(t){return E.apply(this,arguments)}function E(){return E=c()(r()().mark(function t(h){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,u.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:h}));case 1:case"end":return a.stop()}},t)})),E.apply(this,arguments)}function g(t){return D.apply(this,arguments)}function D(){return D=c()(r()().mark(function t(h){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,u.request)("/api/app/image/import-by-container-tar",{method:"POST",data:h}));case 1:case"end":return a.stop()}},t)})),D.apply(this,arguments)}function d(t){return P.apply(this,arguments)}function P(){return P=c()(r()().mark(function t(h){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,u.request)("/api/app/image/import-by-image-tar",{method:"POST",data:h}));case 1:case"end":return a.stop()}},t)})),P.apply(this,arguments)}function T(t){return C.apply(this,arguments)}function C(){return C=c()(r()().mark(function t(h){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,u.request)("/api/common/attach/delete",{method:"POST",data:h});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},t)})),C.apply(this,arguments)}function O(){return b.apply(this,arguments)}function b(){return b=c()(r()().mark(function t(){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,u.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return o.stop()}},t)})),b.apply(this,arguments)}},3393:function(B,M,n){n.d(M,{Gb:function(){return E},Pn:function(){return P},Rb:function(){return C},YU:function(){return s},ZQ:function(){return h},_U:function(){return D},cd:function(){return b}});var y=n(15009),r=n.n(y),v=n(99289),c=n.n(v),u=n(63713);function s(a){return p.apply(this,arguments)}function p(){return p=c()(r()().mark(function a(f){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,u.request)("/api/app/image/get-detail",{method:"POST",data:f}));case 1:case"end":return _.stop()}},a)})),p.apply(this,arguments)}function E(a){return g.apply(this,arguments)}function g(){return g=c()(r()().mark(function a(f){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,u.request)("/api/app/image/tag-remote",{method:"POST",data:f}));case 1:case"end":return _.stop()}},a)})),g.apply(this,arguments)}function D(a){return d.apply(this,arguments)}function d(){return d=c()(r()().mark(function a(f){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,u.request)("/api/app/image/tag-add",{method:"POST",data:f}));case 1:case"end":return _.stop()}},a)})),d.apply(this,arguments)}function P(a){return T.apply(this,arguments)}function T(){return T=c()(r()().mark(function a(f){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,u.request)("/api/app/image/tag-delete",{method:"POST",data:f}));case 1:case"end":return _.stop()}},a)})),T.apply(this,arguments)}function C(a){return O.apply(this,arguments)}function O(){return O=c()(r()().mark(function a(f){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,u.request)("/api/app/image/export",{method:"POST",data:f,responseType:"blob"}));case 1:case"end":return _.stop()}},a)})),O.apply(this,arguments)}function b(a){return t.apply(this,arguments)}function t(){return t=c()(r()().mark(function a(f){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,u.request)("/api/pro/image/get-remote-tag",{method:"POST",data:f}));case 1:case"end":return _.stop()}},a)})),t.apply(this,arguments)}function h(a){return o.apply(this,arguments)}function o(){return o=c()(r()().mark(function a(f){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,u.request)("/api/app/image/check-upgrade",{method:"POST",data:f}));case 1:case"end":return _.stop()}},a)})),o.apply(this,arguments)}},18148:function(B,M,n){n.d(M,{$q:function(){return C},Fj:function(){return j},KG:function(){return s},KX:function(){return R},T8:function(){return P},Xn:function(){return D},ao:function(){return b},c5:function(){return a},c7:function(){return h}});var y=n(15009),r=n.n(y),v=n(99289),c=n.n(v),u=n(63713);function s(l){return p.apply(this,arguments)}function p(){return p=c()(r()().mark(function l(m){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/app/image/get-list",{method:"POST",data:m}));case 1:case"end":return e.stop()}},l)})),p.apply(this,arguments)}function E(l){return g.apply(this,arguments)}function g(){return g=_asyncToGenerator(_regeneratorRuntime().mark(function l(m){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request("/api/app/log/image-build",{method:"POST",data:m});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},l)})),g.apply(this,arguments)}function D(l){return d.apply(this,arguments)}function d(){return d=c()(r()().mark(function l(m){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/app/image/get-list-build",{method:"POST",data:m}));case 1:case"end":return e.stop()}},l)})),d.apply(this,arguments)}function P(l){return T.apply(this,arguments)}function T(){return T=c()(r()().mark(function l(m){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.request)("/api/app/image/get-build-task",{method:"POST",data:m});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},l)})),T.apply(this,arguments)}function C(l){return O.apply(this,arguments)}function O(){return O=c()(r()().mark(function l(m){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.request)("/api/app/image/delete-build-task",{method:"POST",data:m});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},l)})),O.apply(this,arguments)}function b(l){return t.apply(this,arguments)}function t(){return t=c()(r()().mark(function l(m){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.request)("/api/app/image/image-delete",{method:"POST",data:m});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},l)})),t.apply(this,arguments)}function h(){return o.apply(this,arguments)}function o(){return o=c()(r()().mark(function l(){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,u.request)("/api/app/image/image-prune",{method:"POST"});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},l)})),o.apply(this,arguments)}function a(){return f.apply(this,arguments)}function f(){return f=c()(r()().mark(function l(){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,u.request)("/api/app/image/build-prune",{method:"POST"});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},l)})),f.apply(this,arguments)}function j(l){return _.apply(this,arguments)}function _(){return _=c()(r()().mark(function l(m){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.request)("/api/app/image/update-title",{method:"POST",data:m});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},l)})),_.apply(this,arguments)}function R(l){return I.apply(this,arguments)}function I(){return I=c()(r()().mark(function l(m){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/app/image/tag-sync",{method:"POST",data:m}));case 1:case"end":return e.stop()}},l)})),I.apply(this,arguments)}},5251:function(B,M,n){n.d(M,{FI:function(){return r},NF:function(){return c},ZM:function(){return v}});function y(u){return u.trim()}function r(u){var s="";u<.1*1024?s=u.toFixed(2)+"B":u<.1*1024*1024?s=(u/1024).toFixed(2)+"KB":u<1*1024*1024*1024?s=(u/(1024*1024)).toFixed(2)+"MB":s=(u/(1024*1024*1024)).toFixed(2)+"GB";var p=s+"",E=p.indexOf("."),g=p.substring(E+1,E+3);return g=="00"?p.substring(0,E)+p.substr(E+3,2):s}function v(u){if(u){var s=new Date(u),p=s.getFullYear()+"-",E=(s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1)+"-",g=(s.getDate()<10?"0"+s.getDate():s.getDate())+" ",D=(s.getHours()<10?"0"+s.getHours():s.getHours())+":",d=(s.getMinutes()<10?"0"+s.getMinutes():s.getMinutes())+":",P=s.getSeconds()<10?"0"+s.getSeconds():s.getSeconds();return p+E+g+D+d+P}}function c(u){if(!u||u=="")return"-";var s=new Date(u),p=s.getUTCFullYear(),E=String(s.getUTCMonth()+1).padStart(2,"0"),g=String(s.getUTCDate()).padStart(2,"0"),D=String(s.getUTCHours()).padStart(2,"0"),d=String(s.getUTCMinutes()).padStart(2,"0"),P=String(s.getUTCSeconds()).padStart(2,"0");return"".concat(p,"-").concat(E,"-").concat(g," ").concat(D,":").concat(d,":").concat(P)}}}]);
