"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4202],{45742:function(K,D,e){e.d(D,{Z:function(){return P}});var j=e(87462),r=e(67294),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656zM492 400h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 144h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 144h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zM340 368a40 40 0 1080 0 40 40 0 10-80 0zm0 144a40 40 0 1080 0 40 40 0 10-80 0zm0 144a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"profile",theme:"outlined"},l=E,c=e(84089),v=function(i,O){return r.createElement(c.Z,(0,j.Z)({},i,{ref:O,icon:l}))},A=r.forwardRef(v),P=A},80821:function(K,D,e){e.d(D,{Z:function(){return h}});var j=e(5574),r=e.n(j),E=e(24963),l=e(86738),c=e(14726),v=e(83062),A=e(67294),P=e(85893);function h(i){var O=(0,A.useState)(!1),u=r()(O,2),R=u[0],t=u[1],s=(0,A.useContext)(E.Z),x=s.lang,M=s.notice,T=s.message,B=function(){t(!0),i.action().then(function(g){if(t(!1),typeof i.onSuccess=="function"&&i.onSuccess(g),i.messageSuccess){var f="";typeof i.messageSuccess=="function"?f=i.messageSuccess(g):f=i.messageSuccess,f.indexOf(".")>-1&&(f=x(f)),i.asynced?T.info(f):T.success(f)}}).catch(function(g){t(!1),typeof i.onError=="function"&&i.onError(g)})};return i.confirm?(0,P.jsx)(l.Z,{style:{width:500},title:i.confirmTitle?i.confirmTitle:x("notification.title.tip"),description:i.confirm,onConfirm:B,okText:"Yes",cancelText:"No",children:(0,P.jsx)(c.ZP,{disabled:i.disabled,icon:i.icon,loading:R,danger:i.danger,type:i.type,children:i.children})}):(0,P.jsx)(v.Z,{title:i.tips,children:(0,P.jsx)(c.ZP,{disabled:i.disabled,icon:i.icon,loading:R,onClick:B,danger:i.danger,type:i.type,children:i.children})})}},94359:function(K,D,e){e.d(D,{Z:function(){return R}});var j=e(67294),r=e(3089),E=e(98165),l=e(18429),c=e(8751),v=e(14313),A=e(30159),P=e(87740),h=e(66309),i=e(83062),O=e(54006),u=e(85893);function R(t){var s=(0,u.jsx)(u.Fragment,{});if(t.status=="0"&&(s=(0,u.jsx)(h.Z,{icon:(0,u.jsx)(r.Z,{}),color:"default",children:"waiting"})),t.status=="10"&&(s=(0,u.jsx)(h.Z,{icon:(0,u.jsx)(E.Z,{spin:!0}),color:"processing",children:"processing"})),t.status=="20"&&(s=(0,u.jsx)(h.Z,{icon:(0,u.jsx)(l.Z,{}),color:"error",children:"error"})),t.status=="30"&&(s=(0,u.jsx)(h.Z,{icon:(0,u.jsx)(c.Z,{}),color:"success",children:"success"})),t.status=="running"){var x,M;s=(0,u.jsx)(h.Z,{icon:(0,u.jsx)(v.Z,{}),color:"success",children:(x=t.message)!==null&&x!==void 0&&x.showInTag?(M=t.message)===null||M===void 0?void 0:M.content:t.status})}if(t.status=="paused"){var T,B;s=(0,u.jsx)(h.Z,{icon:(0,u.jsx)(A.Z,{}),children:(T=t.message)!==null&&T!==void 0&&T.showInTag?(B=t.message)===null||B===void 0?void 0:B.content:t.status})}if(t.status=="waiting"){var U,g;s=(0,u.jsx)(h.Z,{icon:(0,u.jsx)(P.Z,{}),children:(U=t.message)!==null&&U!==void 0&&U.showInTag?(g=t.message)===null||g===void 0?void 0:g.content:t.status})}if(t.status=="exited"||t.status=="dead"||t.status=="removing"||t.status=="restarting"||t.status=="created"){var f,m;s=(0,u.jsx)(h.Z,{icon:(0,u.jsx)(l.Z,{}),color:"warning",children:(f=t.message)!==null&&f!==void 0&&f.showInTag?(m=t.message)===null||m===void 0?void 0:m.content:t.status})}return t.link&&(s=(0,u.jsx)(O.Link,{to:t.link,children:s})),t.message&&(s=(0,u.jsx)(i.Z,{placement:t.message.placement,title:t.message.content,children:s})),(0,u.jsx)(u.Fragment,{children:s})}},74344:function(K,D,e){var j=e(5574),r=e.n(j),E=e(37476),l=e(38345),c=e(54006),v=e(67294),A=e(54964),P=e(85893),h=(0,v.forwardRef)(function(i,O){(0,v.useImperativeHandle)(O,function(){return{start:function(){for(var m=arguments.length,a=new Array(m),C=0;C<m;C++)a[C]=arguments[C];B(a.join(":")),s(!0)},reset:function(){var m;(m=g.current)===null||m===void 0||m.clear()},show:function(m){var a,C;(a=g.current)===null||a===void 0||a.clear(),(C=g.current)===null||C===void 0||C.write(m),s(!0)}}});var u=(0,v.useState)(!1),R=r()(u,2),t=R[0],s=R[1],x=(0,v.useState)(""),M=r()(x,2),T=M[0],B=M[1],U=(0,c.useModel)("subscriber"),g=(0,v.useRef)();return U.addDataHandler("image:"+T,function(f){var m;(m=g.current)===null||m===void 0||m.write(f.data)}),(0,v.useEffect)(function(){var f;(f=g.current)===null||f===void 0||f.fit()},[]),(0,P.jsx)(E.Y,{modalProps:{forceRender:!0},title:"\u6784\u5EFA\u65E5\u5FD7",submitter:!1,width:1e3,onOpenChange:function(m){if(s(m),m){var a,C;(a=g.current)===null||a===void 0||a.clear(),(C=g.current)===null||C===void 0||C.fit()}},open:t,children:(0,P.jsx)(l.Z,{ghost:!0,children:(0,P.jsx)(A.Z,{showInModal:!0,width:"960px",height:"500px",ref:g})})})});D.Z=h},78451:function(K,D,e){e.d(D,{Z:function(){return E}});var j=e(67294),r=e(85893);function E(l){return(0,r.jsx)("span",{style:{wordBreak:"break-word"},children:l.content})}},54964:function(K,D,e){var j=e(78267),r=e.n(j),E=e(75458),l=e.n(E),c=e(67294),v=e(12320),A=e.n(v),P=e(89629),h=e(85893),i={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,cursorStyle:"block",cursorBlink:!0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},O=new v.Terminal(i),u=new E.SearchAddon,R=new j.FitAddon,t=(0,c.forwardRef)(function(s,x){return(0,c.useEffect)(function(){window.addEventListener("resize",function(){s.showInModal||R.fit()}),O.loadAddon(R),O.loadAddon(u),O.open(document.getElementById("terminal-container")),R.fit()},[]),(0,c.useImperativeHandle)(x,function(){return{write:function(T){O.write(T)},clear:function(){O.clear()},getTerminal:function(){return O},findNext:function(T){u.findNext(T)},findPrev:function(T){u.findPrevious(T)},fit:function(){R.fit()},onData:function(T){O.onData(T)}}}),(0,h.jsx)("div",{id:"terminal-container",style:{width:s.width?s.width:"100%",height:s.height?s.height:"500px"}})});D.Z=t},24963:function(K,D,e){var j=e(67294),r=(0,j.createContext)({});D.Z=r},52548:function(K,D,e){e.r(D),e.d(D,{default:function(){return C}});var j=e(15009),r=e.n(j),E=e(99289),l=e.n(E),c=e(90078),v=e(10641),A=e(14726),P=e(42075),h=e(83062),i=e(66309),O=e(96074),u=e(60922),R=e(50136),t=e(54006),s=e(18148),x=e(94359),M=e(43425),T=e(45742),B=e(80821),U=e(67294),g=e(67255),f=e(78451),m=e(74344),a=e(85893);function C(){var _=(0,U.useRef)(),I=(0,U.useRef)();return(0,a.jsxs)(c._z,{header:{extra:[(0,a.jsx)(A.ZP,{type:"primary",children:(0,a.jsx)(t.Link,{to:"/image/create",children:"\u521B\u5EFA\u955C\u50CF"})},"create"),(0,a.jsx)(A.ZP,{children:"\u62C9\u53D6\u955C\u50CF"},"pull")]},children:[(0,a.jsx)(v.Z,{scroll:{x:"max-content"},actionRef:_,rowKey:"id",columns:[{title:"\u540D\u79F0",render:function(n,d,y,W){return(0,a.jsx)(P.Z,{direction:"vertical",style:{textAlign:"left"},children:d.imageInfo&&d.imageInfo.info.Id?(0,a.jsx)(t.Link,{to:"/image/detail/".concat(d.imageInfo.info.Id),children:(0,a.jsxs)(h.Z,{title:"\u67E5\u770B\u955C\u50CF",children:[" ",d.title]})},"detail"):d.title},d.id)}},{title:"\u6700\u65B0Tag",dataIndex:"tag",search:!1,render:function(n,d,y,W){return d.imageInfo?d.imageInfo.info.Id==""?(0,a.jsx)(i.Z,{children:"none"},"none"):(0,a.jsx)(P.Z,{direction:"vertical",style:{textAlign:"left"},children:d.imageInfo.info.RepoTags.map(function(L,Z){return(0,a.jsx)(i.Z,{color:"#2db7f5",children:L},Z)})},d.id):(0,a.jsx)(i.Z,{color:"#2db7f5",children:d.tag},d.id)}},{title:"\u955C\u50CFId",search:!1,copyable:!0,width:300,render:function(n,d,y,W,L){return(0,a.jsx)(f.Z,{content:d.imageInfo&&d.imageInfo.info.Id})}},{title:"\u6784\u5EFA\u72B6\u6001",width:150,ellipsis:!0,search:!1,render:function(n,d,y,W){return[(0,a.jsx)("div",{children:(0,a.jsx)(x.Z,{status:d.status},d.id)},d.id)]}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:150,render:function(n,d,y,W){return(0,a.jsxs)(P.Z,{split:(0,a.jsx)(O.Z,{type:"vertical"}),children:[(0,a.jsx)(t.Link,{to:"/image/create?id="+d.id,type:"link",children:(0,a.jsx)(h.Z,{title:"\u518D\u6B21\u6784\u5EFA",children:(0,a.jsx)(M.Z,{})})},"rebuild"),(0,a.jsx)(u.Z.Link,{onClick:function(){var Z;(Z=I.current)===null||Z===void 0||Z.show(d.message)},children:(0,a.jsx)(h.Z,{title:"\u6784\u5EFA\u65E5\u5FD7",children:(0,a.jsx)(T.Z,{})})},"logs")]})}}],request:function(){var o=l()(r()().mark(function n(d,y,W){var L,Z,b;return r()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,s.Xn)({page:(L=d.current)!==null&&L!==void 0?L:1,pageSize:(Z=d.pageSize)!==null&&Z!==void 0?Z:10});case 2:return b=S.sent,S.abrupt("return",{data:b.data.list,success:!0,total:b.data.total});case 4:case"end":return S.stop()}},n)}));return function(n,d,y){return o.apply(this,arguments)}}(),pagination:(0,g.O)(),search:{collapsed:!1},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(n){var d=n.selectedRowKeys;return(0,a.jsx)(P.Z,{size:16,children:(0,a.jsx)(B.Z,{danger:!0,type:"primary",action:function(){return(0,s.$q)({id:d})},onSuccess:function(){var W,L;return!((W=_.current)===null||W===void 0)&&W.reloadAndRest&&((L=_.current)===null||L===void 0||L.reloadAndRest()),!0},onError:function(){var W,L;return!((W=_.current)===null||W===void 0)&&W.reset&&((L=_.current)===null||L===void 0||L.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"})})},tableExtraRender:function(){return(0,a.jsx)(R.Z,{mode:"horizontal",selectedKeys:["build"],items:[{label:(0,a.jsx)(t.Link,{to:"/image/list",replace:!0,children:"\u5168\u90E8\u955C\u50CF"}),key:"all"},{label:(0,a.jsx)(t.Link,{to:"/image/list/build",replace:!0,children:"\u6784\u5EFA\u4EFB\u52A1"}),key:"build"}]})}}),(0,a.jsx)(m.Z,{ref:I})]})}},18148:function(K,D,e){e.d(D,{$q:function(){return t},Fj:function(){return f},KG:function(){return v},KX:function(){return a},T8:function(){return u},Xn:function(){return i},ao:function(){return x},c5:function(){return U},c7:function(){return T}});var j=e(15009),r=e.n(j),E=e(99289),l=e.n(E),c=e(54006);function v(_){return A.apply(this,arguments)}function A(){return A=l()(r()().mark(function _(I){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.request)("/api/app/image/get-list",{method:"POST",data:I}));case 1:case"end":return n.stop()}},_)})),A.apply(this,arguments)}function P(_){return h.apply(this,arguments)}function h(){return h=_asyncToGenerator(_regeneratorRuntime().mark(function _(I){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,request("/api/app/log/image-build",{method:"POST",data:I});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},_)})),h.apply(this,arguments)}function i(_){return O.apply(this,arguments)}function O(){return O=l()(r()().mark(function _(I){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.request)("/api/app/image/get-list-build",{method:"POST",data:I}));case 1:case"end":return n.stop()}},_)})),O.apply(this,arguments)}function u(_){return R.apply(this,arguments)}function R(){return R=l()(r()().mark(function _(I){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,c.request)("/api/app/image/get-build-task",{method:"POST",data:I});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},_)})),R.apply(this,arguments)}function t(_){return s.apply(this,arguments)}function s(){return s=l()(r()().mark(function _(I){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,c.request)("/api/app/image/delete-build-task",{method:"POST",data:I});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},_)})),s.apply(this,arguments)}function x(_){return M.apply(this,arguments)}function M(){return M=l()(r()().mark(function _(I){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,c.request)("/api/app/image/image-delete",{method:"POST",data:I});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},_)})),M.apply(this,arguments)}function T(){return B.apply(this,arguments)}function B(){return B=l()(r()().mark(function _(){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,c.request)("/api/app/image/image-prune",{method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},_)})),B.apply(this,arguments)}function U(){return g.apply(this,arguments)}function g(){return g=l()(r()().mark(function _(){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,c.request)("/api/app/image/build-prune",{method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},_)})),g.apply(this,arguments)}function f(_){return m.apply(this,arguments)}function m(){return m=l()(r()().mark(function _(I){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,c.request)("/api/app/image/update-title",{method:"POST",data:I});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},_)})),m.apply(this,arguments)}function a(_){return C.apply(this,arguments)}function C(){return C=l()(r()().mark(function _(I){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.request)("/api/app/image/tag-sync",{method:"POST",data:I}));case 1:case"end":return n.stop()}},_)})),C.apply(this,arguments)}},67255:function(K,D,e){e.d(D,{O:function(){return j},j:function(){return r}});function j(){var E,l=parseInt((E=localStorage.getItem("dpanel-pagesize"))!==null&&E!==void 0?E:"0");return{showSizeChanger:!0,defaultPageSize:l!=null?l:20}}function r(E){var l="dpanel-table-column-".concat(E),c={};if(localStorage.getItem(l)){var v;c=JSON.parse((v=localStorage.getItem(l))!==null&&v!==void 0?v:"{}")}return{defaultValue:c,onChange:function(P){localStorage.setItem("dpanel-table-column-".concat(E),JSON.stringify(P))}}}}}]);
