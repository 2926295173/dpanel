"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8022],{80821:function(b,p,t){t.d(p,{Z:function(){return f}});var T=t(5574),r=t.n(T),v=t(24963),l=t(86738),m=t(28036),P=t(83062),A=t(67294),Z=t(85893);function f(u){var B=(0,A.useState)(!1),o=r()(B,2),I=o[0],s=o[1],d=(0,A.useContext)(v.Z),R=d.lang,x=d.notice,M=d.message,D=function(){s(!0),u.action().then(function(g){if(s(!1),typeof u.onSuccess=="function"&&u.onSuccess(g),u.messageSuccess){var _="";typeof u.messageSuccess=="function"?_=u.messageSuccess(g):_=u.messageSuccess,_=R("notification.".concat(_))+R("notification.title.success"),u.asynced?M.info(_):M.success(_)}}).catch(function(g){s(!1),typeof u.onError=="function"&&u.onError(g)})};return u.confirm?(0,Z.jsx)(l.Z,{style:{width:500},title:u.confirmTitle?u.confirmTitle:R("notification.title.tip"),description:u.confirm,onConfirm:D,okText:"Yes",cancelText:"No",children:(0,Z.jsx)(m.ZP,{disabled:u.disabled,icon:u.icon,loading:I,danger:u.danger,type:u.type,children:u.children})}):(0,Z.jsx)(P.Z,{title:u.tips,children:(0,Z.jsx)(m.ZP,{disabled:u.disabled,icon:u.icon,loading:I,onClick:D,danger:u.danger,type:u.type,children:u.children})})}},94359:function(b,p,t){t.d(p,{Z:function(){return I}});var T=t(67294),r=t(3089),v=t(98165),l=t(18429),m=t(8751),P=t(14313),A=t(30159),Z=t(87740),f=t(66309),u=t(83062),B=t(63713),o=t(85893);function I(s){var d=(0,o.jsx)(o.Fragment,{});if(s.status=="0"&&(d=(0,o.jsx)(f.Z,{icon:(0,o.jsx)(r.Z,{}),color:"default",children:"waiting"})),s.status=="10"&&(d=(0,o.jsx)(f.Z,{icon:(0,o.jsx)(v.Z,{spin:!0}),color:"processing",children:"processing"})),s.status=="20"&&(d=(0,o.jsx)(f.Z,{icon:(0,o.jsx)(l.Z,{}),color:"error",children:"error"})),s.status=="30"&&(d=(0,o.jsx)(f.Z,{icon:(0,o.jsx)(m.Z,{}),color:"success",children:"success"})),s.status=="running"||s.status=="healthy"){var R,x;d=(0,o.jsx)(f.Z,{icon:(0,o.jsx)(P.Z,{}),color:"success",children:(R=s.message)!==null&&R!==void 0&&R.showInTag?(x=s.message)===null||x===void 0?void 0:x.content:s.status})}if(s.status=="paused"){var M,D;d=(0,o.jsx)(f.Z,{icon:(0,o.jsx)(A.Z,{}),children:(M=s.message)!==null&&M!==void 0&&M.showInTag?(D=s.message)===null||D===void 0?void 0:D.content:s.status})}if(s.status=="waiting"||s.status=="starting"){var U,g;d=(0,o.jsx)(f.Z,{icon:(0,o.jsx)(Z.Z,{}),children:(U=s.message)!==null&&U!==void 0&&U.showInTag?(g=s.message)===null||g===void 0?void 0:g.content:s.status})}if(s.status=="exited"||s.status=="dead"||s.status=="removing"||s.status=="restarting"||s.status=="unhealthy"||s.status=="created"){var _,L;d=(0,o.jsx)(f.Z,{icon:(0,o.jsx)(l.Z,{}),color:"warning",children:(_=s.message)!==null&&_!==void 0&&_.showInTag?(L=s.message)===null||L===void 0?void 0:L.content:s.status})}if(s.link&&(d=(0,o.jsx)(B.Link,{to:s.link,children:d})),s.message){var C;d=(0,o.jsx)(u.Z,{placement:(C=s.message.placement)!==null&&C!==void 0?C:"top",title:s.message.content,children:d})}return(0,o.jsx)(o.Fragment,{children:d})}},24963:function(b,p,t){var T=t(67294),r=(0,T.createContext)({});p.Z=r},96781:function(b,p,t){var T=t(67294),r=(0,T.createContext)({});p.Z=r},83536:function(b,p,t){t.r(p),t.d(p,{default:function(){return k}});var T=t(15009),r=t.n(T),v=t(99289),l=t.n(v),m=t(80821),P=t(90098),A=t(43425),Z=t(86548),f=t(23430),u=t(90078),B=t(10641),o=t(63713),I=t(28036),s=t(25593),d=t(42075),R=t(96074),x=t(83062),M=t(67294),D=t(96781),U=t(94359),g=t(67255),_=t(93162),L=t(24963),C=t(66309),i=t(85893);function G(E){var w=(0,o.useIntl)(),K=(0,M.useContext)(L.Z),y=K.lang,O;if(!E.type)O=(0,i.jsx)(C.Z,{children:y("compose.type.default")});else switch(E.type){case"remoteUrl":O=(0,i.jsx)(C.Z,{color:"cyan",children:y("compose.type.".concat(E.type))});break;case"serverPath":O=(0,i.jsx)(C.Z,{color:"blue",children:y("compose.type.".concat(E.type))});break;case"storagePath":O=(0,i.jsx)(C.Z,{color:"geekblue",children:y("compose.type.".concat(E.type))});break;case"outPath":O=(0,i.jsx)(C.Z,{color:"yellow",children:y("compose.type.".concat(E.type))});break;case"store":O=(0,i.jsx)(C.Z,{color:"green",children:y("compose.type.".concat(E.type))});break;case"dangling":O=(0,i.jsx)(C.Z,{color:"error",children:y("compose.type.".concat(E.type))});break;default:O=(0,i.jsx)(C.Z,{children:y("compose.type.".concat(E.type))})}return(0,i.jsx)(x.Z,{title:E.tootip,children:O})}function k(){var E=(0,M.useContext)(D.Z),w=E.listTableRef,K=(0,M.useContext)(L.Z),y=K.lang,O=K.notice;return(0,i.jsx)(u._z,{header:{extra:[(0,i.jsx)(o.Link,{to:"/compose/create",reloadDocument:location.search.length>0,children:(0,i.jsx)(I.ZP,{type:"primary",children:"\u521B\u5EFA\u4EFB\u52A1"},"createCompose")},"create")]},children:(0,i.jsx)(B.Z,{scroll:{x:"max-content"},request:function(){var j=l()(r()().mark(function a(n){var c;return r()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,P.pm)({title:n.title,name:n.name});case 2:return c=h.sent,h.abrupt("return",{data:c.data.list,success:!0,total:c.data.list.length});case 4:case"end":return h.stop()}},a)}));return function(a){return j.apply(this,arguments)}}(),rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name",width:200,render:function(a,n,c,e,h){return n.setting.type=="dangling"?(0,i.jsx)(s.Z.Link,{onClick:function(){O.info("\u65E0\u6CD5\u627E\u5230\u8BE5\u4EFB\u52A1\u7684 compose.yaml \u6587\u4EF6\uFF0C\u8BF7\u6302\u8F7D\u76F8\u5E94\u7684 compose \u6587\u4EF6\u6216\u662F\u5728\u9762\u677F\u7684 compose \u76EE\u5F55\u6DFB\u52A0\u540C\u6807\u8BC6\u7684\u4EFB\u52A1\u76EE\u5F55\u53CA compose.yaml \u6587\u4EF6")},children:n.name}):(0,i.jsx)(o.Link,{to:"/compose/deploy/"+(n.id||n.name),children:n.name},c)},sorter:function(a,n){return a.name.localeCompare(n.name)},sortDirections:["descend","ascend"]},{title:"\u9879\u76EE\u540D\u79F0",dataIndex:"title",width:200},{title:"\u7C7B\u578B",width:150,search:!1,render:function(a,n,c,e,h){var S;return(0,i.jsx)(G,{tootip:(S=n.setting.uri)!==null&&S!==void 0?S:"",type:n.setting&&n.setting.type?n.setting.type:""})}},{title:"\u5BB9\u5668\u72B6\u6001",dataIndex:"status",search:!1,width:300,render:function(a,n,c,e,h){return(0,i.jsx)(d.Z,{children:n.setting.status.split(", ").map(function(S){var W="running",F=S.indexOf("(");return F>-1?W=S.slice(0,F):W=S,(0,i.jsx)(U.Z,{status:W,message:{content:y("compose.status.".concat(W),{count:S.slice(F+1,S.length-1)}),placement:"top",showInTag:!0}},n.id)})})}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"",search:!1,width:150,render:function(a,n,c,e,h){return n.setting.createdAt?new Date(n.setting.createdAt).toLocaleString():"-"}},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"",search:!1,width:150,render:function(a,n,c,e,h){return n.setting.updatedAt?new Date(n.setting.updatedAt).toLocaleString():"-"}},{title:"\u64CD\u4F5C",width:80,valueType:"option",key:"option",render:function(a,n,c,e,h){return n.setting.type!="dangling"&&(0,i.jsxs)(d.Z,{split:(0,i.jsx)(R.Z,{type:"vertical"}),children:[(0,i.jsx)(o.Link,{to:"/compose/deploy/"+(n.id||n.name),children:(0,i.jsx)(x.Z,{title:"\u90E8\u7F72",children:(0,i.jsx)(A.Z,{})})},"3"),(0,i.jsx)(o.Link,{to:"/compose/create?id="+(n.id||n.name),children:(0,i.jsx)(x.Z,{title:"\u7F16\u8F91",children:(0,i.jsx)(Z.Z,{})})},"4"),(0,i.jsx)(s.Z.Link,{onClick:l()(r()().mark(function S(){var W,F;return r()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,(0,P.d1)({id:n.id||n.name});case 2:W=z.sent,F=new Blob([W],{type:"application/zip"}),(0,_.saveAs)(F,"compose-"+n.name+".zip");case 5:case"end":return z.stop()}},S)})),children:(0,i.jsx)(x.Z,{title:"\u4E0B\u8F7D",children:(0,i.jsx)(f.Z,{})})},"2")]})}}],rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0,getCheckboxProps:function(a){return{disabled:a.setting.type=="dangling"||a.setting.type=="outPath"}}},tableAlertOptionRender:function(a){var n=a.selectedRows;return(0,i.jsx)(d.Z,{size:16,children:(0,i.jsx)(m.Z,{danger:!0,type:"primary",action:function(){return(0,P.ik)({id:n.map(function(e){return e.id})})},onSuccess:function(){var e,h;return!((e=w.current)===null||e===void 0)&&e.reloadAndRest&&((h=w.current)===null||h===void 0||h.reloadAndRest()),!0},onError:function(){var e,h;return!((e=w.current)===null||e===void 0)&&e.reset&&((h=w.current)===null||h===void 0||h.reset()),!0},messageSuccess:"delete",confirm:(0,i.jsx)(d.Z,{style:{width:280},direction:"vertical",children:(0,i.jsx)(s.Z.Text,{children:"\u5220\u9664\u524D\u8BF7\u5148\u9500\u6BC1\u76F8\u5173\u5BB9\u5668\uFF0C\u786E\u8BA4\u5417\uFF1F"})}),children:"\u6279\u91CF\u5220\u9664"})})},pagination:(0,g.O)(),search:{collapsed:!1},actionRef:w,columnsState:(0,g.j)("compose-list")})})}},90098:function(b,p,t){t.d(p,{CT:function(){return o},GG:function(){return U},MG:function(){return G},Oh:function(){return R},Pn:function(){return u},U_:function(){return C},VN:function(){return _},d1:function(){return O},iE:function(){return K},ik:function(){return s},im:function(){return P},mg:function(){return M},pm:function(){return Z},xC:function(){return E}});var T=t(15009),r=t.n(T),v=t(99289),l=t.n(v),m=t(63713);function P(a){return A.apply(this,arguments)}function A(){return A=l()(r()().mark(function a(n){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/create",{method:"POST",data:n}));case 1:case"end":return e.stop()}},a)})),A.apply(this,arguments)}function Z(a){return f.apply(this,arguments)}function f(){return f=l()(r()().mark(function a(n){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/get-list",{method:"POST",data:n}));case 1:case"end":return e.stop()}},a)})),f.apply(this,arguments)}function u(a){return B.apply(this,arguments)}function B(){return B=l()(r()().mark(function a(n){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,m.request)("/api/app/compose/get-task",{method:"POST",data:n}));case 2:case"end":return e.stop()}},a)})),B.apply(this,arguments)}function o(a){return I.apply(this,arguments)}function I(){return I=l()(r()().mark(function a(n){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,m.request)("/api/app/compose/get-detail",{method:"POST",data:n}));case 2:case"end":return e.stop()}},a)})),I.apply(this,arguments)}function s(a){return d.apply(this,arguments)}function d(){return d=l()(r()().mark(function a(n){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/delete",{method:"POST",data:n}));case 1:case"end":return e.stop()}},a)})),d.apply(this,arguments)}function R(a){return x.apply(this,arguments)}function x(){return x=l()(r()().mark(function a(n){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,m.request)("/api/app/compose/container-deploy",{method:"POST",data:n}));case 2:case"end":return e.stop()}},a)})),x.apply(this,arguments)}function M(a){return D.apply(this,arguments)}function D(){return D=l()(r()().mark(function a(n){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,m.request)("/api/app/compose/container-destroy",{method:"POST",data:n}));case 2:case"end":return e.stop()}},a)})),D.apply(this,arguments)}function U(a){return g.apply(this,arguments)}function g(){return g=l()(r()().mark(function a(n){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,m.request)("/api/app/compose/container-ctrl",{method:"POST",data:n}));case 2:case"end":return e.stop()}},a)})),g.apply(this,arguments)}function _(a){return L.apply(this,arguments)}function L(){return L=l()(r()().mark(function a(n){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,m.request)("/api/app/compose/container-log",{method:"POST",data:n}));case 2:case"end":return e.stop()}},a)})),L.apply(this,arguments)}function C(a){return i.apply(this,arguments)}function i(){return i=l()(r()().mark(function a(n){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/container-process-kill",{method:"POST",data:n}));case 1:case"end":return e.stop()}},a)})),i.apply(this,arguments)}function G(a){return k.apply(this,arguments)}function k(){return k=l()(r()().mark(function a(n){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/get-from-uri",{method:"POST",data:n}));case 1:case"end":return e.stop()}},a)})),k.apply(this,arguments)}function E(a){return w.apply(this,arguments)}function w(){return w=l()(r()().mark(function a(n){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/parse",{method:"POST",data:n}));case 1:case"end":return e.stop()}},a)})),w.apply(this,arguments)}function K(a){return y.apply(this,arguments)}function y(){return y=l()(r()().mark(function a(n){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/common/store/deploy",{method:"POST",data:n}));case 1:case"end":return e.stop()}},a)})),y.apply(this,arguments)}function O(a){return j.apply(this,arguments)}function j(){return j=l()(r()().mark(function a(n){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,m.request)("/api/app/compose/download",{method:"POST",data:n,responseType:"blob"}));case 2:case"end":return e.stop()}},a)})),j.apply(this,arguments)}},67255:function(b,p,t){t.d(p,{O:function(){return T},j:function(){return r}});function T(){var v,l=parseInt((v=localStorage.getItem("dpanel-pagesize"))!==null&&v!==void 0?v:"0");return{showSizeChanger:!0,defaultPageSize:l!=null?l:20}}function r(v){var l="dpanel-table-column-".concat(v),m={};if(localStorage.getItem(l)){var P;m=JSON.parse((P=localStorage.getItem(l))!==null&&P!==void 0?P:"{}")}return{defaultValue:m,onChange:function(Z){localStorage.setItem("dpanel-table-column-".concat(v),JSON.stringify(Z))}}}}}]);
