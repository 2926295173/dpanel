"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2573],{62573:function(X,U,n){n.d(U,{Z:function(){return F}});var Z=n(15009),u=n.n(Z),y=n(99289),E=n.n(y),j=n(5574),W=n.n(j),P=n(67294),b=n(14946),R=n(43425),L=n(48689),A=n(38345),S=n(10641),O=n(42075),w=n(25593),l=n(83062),C=n(60335),s=n(78498),k=n(80821),B=n(64599),K=n.n(B),T=n(40717),i=n(184),o=n(28036),v=n(4798),r=n(85893);function $(p){var M=(0,P.useRef)();return[(0,r.jsx)(i.a,{trigger:(0,r.jsx)(o.ZP,{type:"primary",icon:(0,r.jsx)(T.Z,{}),children:"\u52A0\u5165\u7F51\u7EDC"},"button"),width:800,formRef:M,title:"\u914D\u7F6E\u7F51\u7EDC",onFinish:function(){var c=E()(u()().mark(function D(h){var d,t,m,_,f;return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!h.network){a.next=19;break}t=K()(h.network),a.prev=2,t.s();case 4:if((m=t.n()).done){a.next=11;break}return _=m.value,a.next=8,(0,b.HY)({name:_.name,containerName:p.containerName,containerAlise:_.alise,ipV4:_.ipV4});case 8:f=a.sent;case 9:a.next=4;break;case 11:a.next=16;break;case 13:a.prev=13,a.t0=a.catch(2),t.e(a.t0);case 16:return a.prev=16,t.f(),a.finish(16);case 19:return!((d=M.current)===null||d===void 0)&&d.resetFields&&M.current.resetFields(),p.onSuccess&&p.onSuccess(),a.abrupt("return",!0);case 22:case"end":return a.stop()}},D,null,[[2,13,16,19]])}));return function(D){return c.apply(this,arguments)}}(),children:(0,r.jsx)(v.Z,{siteName:p.containerName})},"form")]}var e=n(10032),Y=n(5251),z=(0,P.forwardRef)(function(p,M){var c;(0,P.useImperativeHandle)(M,function(){return{}});var D=(0,P.useRef)(),h=(0,P.useRef)(),d=(0,P.useState)(),t=W()(d,2),m=t[0],_=t[1];return(0,P.useEffect)(function(){_(p.containerInfo)},[]),(0,r.jsxs)(A.Z,{ghost:p.ghost,children:[(0,r.jsx)(e.Z,{ref:h}),(0,r.jsx)(S.Z,{scroll:{x:"max-content"},rowKey:"key",actionRef:D,pagination:!1,columns:[{title:"\u6240\u5C5E\u7F51\u7EDC",key:"name",dataIndex:"networkName"},{title:"\u5BB9\u5668\u540D\u79F0",key:"containerName",dataIndex:"containerName",render:function(I,a,G,x,V){return(0,Y.fi)(a.containerName,"/")}},{title:(0,r.jsx)(s.Z,{title:"hostname",help:"\u63D0\u4F9B\u5BB9\u5668\u5185\u90E8\u8BBF\u95EE"}),key:"hostName",render:function(I,a,G){return a.hostName?(0,r.jsx)(O.Z,{direction:"vertical",children:a.hostName.map(function(x){if(x)return(0,r.jsx)(w.Z.Text,{copyable:!0,keyboard:!0,children:x},x)})}):(0,r.jsx)(r.Fragment,{})}},{title:"Ip",key:"ip",render:function(I,a,G,x,V){return(0,r.jsxs)(O.Z,{direction:"vertical",children:[(0,r.jsx)("span",{children:a.networkInfo.IPv4Address}),a.networkInfo.IPv6Address&&(0,r.jsx)("span",{children:a.networkInfo.IPv6Address})]})}},{title:"\u64CD\u4F5C",key:"option",width:50,fixed:"right",render:function(I,a,G,x,V){return(0,r.jsxs)(O.Z,{children:[a.networkName!=""&&(0,r.jsx)(w.Z.Link,{onClick:function(){var N;(N=h.current)===null||N===void 0||N.show(a.networkName)},children:(0,r.jsx)(l.Z,{title:"\u7BA1\u7406",children:(0,r.jsx)(R.Z,{})})}),a.key!="bridge"&&a.key!="none"&&a.key!="host"&&a.networkName!=""&&(0,r.jsx)(k.Z,{type:"link",action:function(){return(0,b.t9)({name:a.networkName,containerName:p.containerInfo.Name})},onSuccess:function(){var N,g;!((N=D.current)===null||N===void 0)&&N.reloadAndRest&&((g=D.current)===null||g===void 0||g.reloadAndRest())},tips:"\u9000\u51FA\u8BE5\u7F51\u7EDC",children:(0,r.jsx)(L.Z,{})})]})}}],request:function(){var f=E()(u()().mark(function I(a,G,x){var V,H;return u()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,C.jV)({md5:p.containerInfo.Name});case 2:return V=g.sent,_(V.data.info),g.next=6,(0,b._3)({name:Object.keys(V.data.info.NetworkSettings.Networks)});case 6:return H=g.sent,g.abrupt("return",{data:H.data.list,success:!0,total:H.data.list.length});case 8:case"end":return g.stop()}},I)}));return function(I,a,G){return f.apply(this,arguments)}}(),toolBarRender:function(){var I,a;return[(0,r.jsx)($,{onSuccess:function(){var x;(x=D.current)===null||x===void 0||x.reload()},containerName:(I=(a=p.containerInfo)===null||a===void 0?void 0:a.Name)!==null&&I!==void 0?I:""},"joinNetwork")]},search:!1,expandable:{expandRowByClick:!1,expandedRowKeys:Object.keys((c=m==null?void 0:m.NetworkSettings.Networks)!==null&&c!==void 0?c:{bridge:[]})}})]})}),F=z},4798:function(X,U,n){var Z=n(15009),u=n.n(Z),y=n(99289),E=n.n(y),j=n(5574),W=n.n(j),P=n(24963),b=n(14946),R=n(64789),L=n(38345),A=n(52688),S=n(17186),O=n(24739),w=n(5966),l=n(62370),C=n(10641),s=n(42075),k=n(25593),B=n(85265),K=n(66309),T=n(28036),i=n(67294),o=n(85893),v=(0,i.forwardRef)(function(r,$){var e=(0,i.useContext)(P.Z),Y=e.notice,z=(0,i.useState)(!1),F=W()(z,2),p=F[0],M=F[1],c=(0,i.useRef)();(0,i.useImperativeHandle)($,function(){return{}});var D=function(d){var t,m,_=!1,f=(t=(m=c.current)===null||m===void 0?void 0:m.getList())!==null&&t!==void 0?t:[];if(f.map(function(a){a.name==d.name&&(_=!0)}),!_){var I;(I=c.current)===null||I===void 0||I.add(d)}};return(0,o.jsxs)(L.Z,{title:"\u5173\u8054\u7F51\u7EDC",headerBordered:!0,extra:(0,o.jsx)(s.Z,{children:r.showUseBridgeNetwork&&(0,o.jsx)(A.Z,{name:"useBridgeNetwork",fieldProps:{checkedChildren:"\u5173\u8054 Bridge \u7F51\u7EDC",unCheckedChildren:"\u5173\u8054 Bridge \u7F51\u7EDC"}},"useBridgeNetwork")}),children:[(0,o.jsx)(S.u,{name:"network",actionRef:c,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u7F51\u7EDC"},actionGuard:{beforeAddRow:function(d,t){return!r.siteName||r.siteName==""||typeof r.siteName=="undefined"?(Y.error("\u8BF7\u8F93\u5165\u7AD9\u70B9\u6807\u8BC6"),!1):(M(!0),!1)}},copyIconProps:!1,min:0,itemRender:function(d,t){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(O.UW,{children:[(0,o.jsx)(w.Z,{label:"\u7F51\u7EDC\u540D\u79F0",name:"name",width:"md",disabled:!0,fieldProps:{value:t.record.name}}),(0,o.jsx)(l.Z,{label:"\u8BBF\u95EEHostname",name:"alise",children:t.record.alise!=""&&(0,o.jsx)(k.Z.Text,{code:!0,copyable:!0,children:t.record.alise})}),(0,o.jsx)(l.Z,{label:" ",children:d.action})]}),(0,o.jsx)(O.UW,{children:(0,o.jsx)(w.Z,{label:"\u6307\u5B9AIpV4",name:"ipV4",width:"md",disabled:t.record.name=="bridge",fieldProps:{addonAfter:t.record.subnet}})})]})}}),(0,o.jsx)(B.Z,{title:"\u9009\u62E9\u7F51\u7EDC",width:800,footer:!1,open:p,onClose:function(){return M(!1)},children:(0,o.jsx)(C.Z,{rowKey:"Name",toolBarRender:!1,columns:[{title:"\u540D\u79F0",dataIndex:"Name",render:function(d,t,m,_,f){return t.Name=="none"||t.Name=="bridge"||t.Name=="host"?(0,o.jsxs)(o.Fragment,{children:[t.Name," ",(0,o.jsx)(K.Z,{color:"blue",children:"System"})]}):(0,o.jsx)(o.Fragment,{children:d})}},{title:"\u7C7B\u578B",ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"IPAM Driver",ellipsis:!0,width:120,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4 IPAM Network",search:!1,dataIndex:["IPAM","Config",0,"Subnet"],render:function(d,t,m,_,f){return(0,o.jsxs)(s.Z,{children:[t.IPAM.Config&&t.IPAM.Config[0]&&"".concat(t.IPAM.Config[0].Subnet," - ").concat(t.IPAM.Config[0].Gateway),t.IPAM.Config&&t.IPAM.Config[1]&&"".concat(t.IPAM.Config[1].Subnet," - ").concat(t.IPAM.Config[1].Gateway)]})}},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(d,t,m,_,f){return[t.Name!="none"&&t.Name!="bridge"&&t.Name!="host"&&(0,o.jsx)(T.ZP,{type:"link",onClick:function(){D({name:t.Name,alise:[""],subnet:t.IPAM.Config[0].Subnet}),M(!1)},children:(0,o.jsx)(R.Z,{})},t.Id)]}}],request:function(){var h=E()(u()().mark(function d(t,m,_){var f;return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,b.jR)({name:t.Name});case 2:return f=a.sent,a.abrupt("return",{data:f.data.list,success:!0,total:f.data.list.length});case 4:case"end":return a.stop()}},d)}));return function(d,t,m){return h.apply(this,arguments)}}(),pagination:{pageSize:10}})})]})});U.Z=v},10032:function(X,U,n){var Z=n(5574),u=n.n(Z),y=n(15009),E=n.n(y),j=n(99289),W=n.n(j),P=n(80821),b=n(14946),R=n(48689),L=n(184),A=n(38345),S=n(63490),O=n(42075),w=n(96074),l=n(26412),C=n(67294),s=n(85893),k=(0,C.forwardRef)(function(B,K){(0,C.useImperativeHandle)(K,function(){return{show:function(D){return W()(E()().mark(function h(){var d,t;return E()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,b.IS)({name:D});case 2:d=_.sent,d.data.info.Containers?(t=[],Object.keys(d.data.info.Containers).map(function(f){d.data.info.Containers[f].Id=f,t.push(d.data.info.Containers[f])}),M(t)):M([]),Y(d.data.info),v(!0);case 6:case"end":return _.stop()}},h)}))()}}});var T=(0,C.useState)(!1),i=u()(T,2),o=i[0],v=i[1],r=(0,C.useState)(),$=u()(r,2),e=$[0],Y=$[1],z=(0,C.useState)(),F=u()(z,2),p=F[0],M=F[1];return(0,s.jsx)(L.a,{title:"\u7F51\u7EDC\u8BE6\u60C5",open:o,onOpenChange:function(D){v(D)},submitter:!1,children:(0,s.jsxs)(A.Z,{ghost:!0,direction:"column",gutter:[10,0],children:[(0,s.jsx)(A.Z,{title:"\u7F51\u7EDC\u5185\u5BB9\u5668",ghost:!0,children:(0,s.jsx)(S.Z,{rowKey:"Id",columns:[{title:"\u5BB9\u5668\u540D\u79F0",dataIndex:"Name"},{title:"IPV4",dataIndex:"IPv4Address"},{title:"IPV6",dataIndex:"IPv6Address"},{title:"MacAddress",dataIndex:"MacAddress"},{title:"\u64CD\u4F5C",render:function(D,h,d){return(0,s.jsx)(O.Z,{split:(0,s.jsx)(w.Z,{type:"vertical"}),children:(0,s.jsx)(P.Z,{type:"text",action:function(){var m,_;return(0,b.t9)({name:(m=e==null?void 0:e.Id)!==null&&m!==void 0?m:"",containerName:(_=h.Id)!==null&&_!==void 0?_:""})},onSuccess:function(){var m=p==null?void 0:p.filter(function(_){return _.Id!=h.Id});M(m)},children:(0,s.jsx)(R.Z,{})},"delete")})}}],dataSource:p,pagination:!1})}),(0,s.jsx)(A.Z,{ghost:!0,title:"\u57FA\u7840\u4FE1\u606F",children:(0,s.jsxs)(l.Z,{labelStyle:{width:"180px"},column:1,bordered:!0,children:[(0,s.jsx)(l.Z.Item,{label:"\u540D\u79F0",children:e==null?void 0:e.Name}),(0,s.jsx)(l.Z.Item,{label:"Id",children:e==null?void 0:e.Id}),(0,s.jsx)(l.Z.Item,{label:"Driver",children:e==null?void 0:e.Driver}),(0,s.jsx)(l.Z.Item,{label:"Scope",children:e==null?void 0:e.Scope}),(0,s.jsx)(l.Z.Item,{label:"Attachable",children:e!=null&&e.Attachable?"\u662F":"\u5426"}),(0,s.jsx)(l.Z.Item,{label:"Internal",children:e!=null&&e.Internal?"\u662F":"\u5426"}),(e==null?void 0:e.IPAM.Config)&&(e==null?void 0:e.IPAM.Config[0])&&(0,s.jsx)(l.Z.Item,{label:"IPV4",children:(0,s.jsxs)(l.Z,{labelStyle:{width:"150px"},column:1,bordered:!0,children:[(0,s.jsx)(l.Z.Item,{label:"Subnet",children:e==null?void 0:e.IPAM.Config[0].Subnet}),(0,s.jsx)(l.Z.Item,{label:"Gateway",children:e==null?void 0:e.IPAM.Config[0].Gateway}),(0,s.jsx)(l.Z.Item,{label:"IP Range ",children:e==null?void 0:e.IPAM.Config[0].IPRange}),(0,s.jsx)(l.Z.Item,{label:"Excluded IPs",children:(e==null?void 0:e.IPAM.Config[0].AuxiliaryAddresses)&&Object.keys(e==null?void 0:e.IPAM.Config[0].AuxiliaryAddresses).map(function(c){return(e==null?void 0:e.IPAM.Config[0].AuxiliaryAddresses[c])+" ,"})})]})}),(e==null?void 0:e.IPAM.Config)&&(e==null?void 0:e.IPAM.Config[1])&&(0,s.jsx)(l.Z.Item,{label:"IPV6",children:(0,s.jsxs)(l.Z,{labelStyle:{width:"150px"},column:1,bordered:!0,children:[(0,s.jsx)(l.Z.Item,{label:"Subnet",children:e==null?void 0:e.IPAM.Config[1].Subnet}),(0,s.jsx)(l.Z.Item,{label:"Gateway",children:e==null?void 0:e.IPAM.Config[1].Gateway}),(0,s.jsx)(l.Z.Item,{label:"IP Range ",children:e==null?void 0:e.IPAM.Config[1].IPRange}),(0,s.jsx)(l.Z.Item,{label:"Excluded IPs",children:(e==null?void 0:e.IPAM.Config[1].AuxiliaryAddresses)&&Object.keys(e==null?void 0:e.IPAM.Config[1].AuxiliaryAddresses).map(function(c){return(e==null?void 0:e.IPAM.Config[1].AuxiliaryAddresses[c])+" ,"})})]})}),(e==null?void 0:e.Options)&&Object.keys(e==null?void 0:e.Options).length>0&&(0,s.jsx)(l.Z.Item,{label:"Options",children:(0,s.jsx)(l.Z,{labelStyle:{width:"150px"},column:1,bordered:!0,children:Object.keys(e==null?void 0:e.Options).map(function(c){return(0,s.jsx)(l.Z.Item,{label:c,children:e.Options[c]},c)})})}),(e==null?void 0:e.Labels)&&Object.keys(e==null?void 0:e.Labels).length>0&&(0,s.jsx)(l.Z.Item,{label:"Lables",children:(0,s.jsx)(l.Z,{labelStyle:{width:"150px"},column:1,bordered:!0,children:Object.keys(e==null?void 0:e.Labels).map(function(c){return(0,s.jsx)(l.Z.Item,{label:c,children:e.Labels[c]},c)})})})]})})]})})});U.Z=k},14946:function(X,U,n){n.d(U,{CI:function(){return L},HY:function(){return k},IS:function(){return W},XY:function(){return w},_3:function(){return K},_x:function(){return S},jR:function(){return b},t9:function(){return C}});var Z=n(15009),u=n.n(Z),y=n(99289),E=n.n(y),j=n(82346);function W(i){return P.apply(this,arguments)}function P(){return P=E()(u()().mark(function i(o){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,j.request)("/api/app/network/get-detail",{method:"POST",data:o}));case 1:case"end":return r.stop()}},i)})),P.apply(this,arguments)}function b(i){return R.apply(this,arguments)}function R(){return R=E()(u()().mark(function i(o){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,j.request)("/api/app/network/get-list",{method:"POST",data:o}));case 1:case"end":return r.stop()}},i)})),R.apply(this,arguments)}function L(){return A.apply(this,arguments)}function A(){return A=E()(u()().mark(function i(){return u()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,j.request)("/api/app/network/prune",{method:"POST"});case 2:return v.abrupt("return",v.sent);case 3:case"end":return v.stop()}},i)})),A.apply(this,arguments)}function S(i){return O.apply(this,arguments)}function O(){return O=E()(u()().mark(function i(o){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,j.request)("/api/app/network/delete",{method:"POST",data:o});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},i)})),O.apply(this,arguments)}function w(i){return l.apply(this,arguments)}function l(){return l=E()(u()().mark(function i(o){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,j.request)("/api/app/network/create",{method:"POST",data:o});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},i)})),l.apply(this,arguments)}function C(i){return s.apply(this,arguments)}function s(){return s=E()(u()().mark(function i(o){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,j.request)("/api/app/network/disconnect",{method:"POST",data:o});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},i)})),s.apply(this,arguments)}function k(i){return B.apply(this,arguments)}function B(){return B=E()(u()().mark(function i(o){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,j.request)("/api/app/network/connect",{method:"POST",data:o});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},i)})),B.apply(this,arguments)}function K(i){return T.apply(this,arguments)}function T(){return T=E()(u()().mark(function i(o){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,j.request)("/api/app/network/get-container-list",{method:"POST",data:o}));case 1:case"end":return r.stop()}},i)})),T.apply(this,arguments)}}}]);
