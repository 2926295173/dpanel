"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1610],{87740:function(U,m,e){e.d(m,{Z:function(){return g}});var v=e(87462),a=e(67294),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},r=c,u=e(84089),P=function(p,j){return a.createElement(u.Z,(0,v.Z)({},p,{ref:j,icon:r}))},h=a.forwardRef(P),g=h},1699:function(U,m,e){e.d(m,{u:function(){return p}});var v=e(9783),a=e.n(v),c=e(97857),r=e.n(c),u=e(67294),P=e(82346),h=e(40411),g=e(42075),f=e(85893),p=function(l){var s=(0,P.useAccess)(),t=Array.isArray(l.access)?l.access:[l.access],d,M=l.fallback;if(typeof l.children=="function"?(d=l.children(t.reduce(function(T,R){return r()(r()({},T),{},a()({},R,s[R]))},{})),d||(d=M)):t.every(function(T){return s[T]})?d=l.children:d=M,!M&&d&&l.showProTips&&s.canSeeEnableCe){if(s.canSeeEnableHiddenProTips)return null;d=(0,f.jsx)(h.Z,{offset:l.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:d})}if(!M&&d&&l.showProRibbonTips&&s.canSeeEnableCe){if(s.canSeeEnableHiddenProTips)return null;d=(0,f.jsx)(h.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:d})}return l.space?(0,f.jsx)(g.Z,r()(r()({},l.space),{},{children:d})):d}},80821:function(U,m,e){e.d(m,{Z:function(){return s}});var v=e(97857),a=e.n(v),c=e(5574),r=e.n(c),u=e(24963),P=e(36146),h=e(86738),g=e(83062),f=e(96074),p=e(83622),j=e(67294),l=e(85893);function s(t){var d=(0,j.useState)(!1),M=r()(d,2),T=M[0],R=M[1],B=(0,j.useContext)(u.Z),W=B.message,y=new P.Uo,E=function(){R(!0);var o=t.action();o instanceof Promise?o.then(function(_){if(R(!1),_){typeof t.onSuccess=="function"&&t.onSuccess(_);var i="";t.messageSuccess?typeof t.messageSuccess=="function"?i=t.messageSuccess(_):i=t.messageSuccess.indexOf("notification.")==0?y.format(t.messageSuccess):t.messageSuccess:i=y.format("notification.finish"),t.asynced?W.info(i):W.success(i)}}).catch(function(_){R(!1),typeof t.onError=="function"&&t.onError(_)}):R(!1)};return t.confirm?(0,l.jsx)(h.Z,a()(a()({style:{width:500},title:t.confirmTitle?t.confirmTitle:y.format("notification.title.tip"),description:typeof t.confirm=="string"&&t.confirm.indexOf("notification.")==0?y.format(t.confirm):t.confirm,onConfirm:E,okText:"Yes",cancelText:"No",onOpenChange:t.confirmOnOpenChange},t.confirmProps),{},{children:(0,l.jsxs)(g.Z,{title:t.tips,children:[t.showDivider&&(0,l.jsx)(f.Z,{type:"vertical",style:{marginRight:15}}),(0,l.jsx)(p.ZP,{block:t.block,disabled:t.disabled,icon:!t.children&&T?void 0:t.icon,loading:T,danger:t.danger,type:t.type,children:t.children})]})})):(0,l.jsxs)(g.Z,{title:t.tips,children:[t.showDivider&&(0,l.jsx)(f.Z,{type:"vertical",style:{marginRight:15}}),(0,l.jsx)(p.ZP,{block:t.block,style:t.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:t.disabled,icon:!t.children&&T?void 0:t.icon,loading:T,onClick:E,danger:t.danger,type:t.type,children:t.children})]})}},78451:function(U,m,e){e.d(m,{Z:function(){return c}});var v=e(67294),a=e(85893);function c(r){var u;return(0,a.jsx)("span",{style:{width:r.width?r.width:"auto",wordBreak:"break-word"},children:(u=r.content)!==null&&u!==void 0?u:r.children})}},24963:function(U,m,e){var v=e(67294),a=(0,v.createContext)({});m.Z=a},67108:function(U,m,e){e.r(m),e.d(m,{default:function(){return _}});var v=e(15009),a=e.n(v),c=e(99289),r=e.n(c),u=e(90078),P=e(56729),h=e(62597),g=e(83622),f=e(42075),p=e(96074),j=e(83062),l=e(50136),s=e(82346),t=e(86548),d=e(87740),M=e(67294),T=e(96974),R=e(80821),B=e(67255),W=e(78451),y=e(1699),E=e(36146),S=e(77446),o=e(85893);function _(){var i=(0,T.UO)(),D=(0,M.useRef)();return(0,M.useEffect)(function(){var n;(n=D.current)===null||n===void 0||n.reload()},[i]),(0,o.jsx)(u._z,{header:{extra:[(0,o.jsx)(y.u,{access:"canSeeContainerListManageCreate",children:(0,o.jsx)(g.ZP,{type:"primary",children:(0,o.jsx)(s.Link,{to:"/app/create/image",children:E.Ob.format("container.create")})})},"create")]},children:(0,o.jsx)(P.Z,{scroll:{x:"max-content"},actionRef:D,columns:[{title:E.FD.format("listTitle"),dataIndex:"siteTitle",width:200},{title:E.FD.format("listName"),dataIndex:"siteName",width:200},{title:E.FD.format("listLastError"),dataIndex:"message",search:!1,width:250,render:function(A,O,I,C,b){return(0,o.jsx)(W.Z,{content:O.message})}},{title:E.FD.format("listDeletedAt"),ellipsis:!0,dataIndex:"deletedAt",search:!1,width:180,render:function(A,O,I,C,b){return new Date(O.deletedAt).toLocaleString()}},{title:E.FD.format("listManage"),valueType:"option",key:"option",width:80,fixed:"right",render:function(A,O,I,C){return(0,o.jsxs)(f.Z,{split:(0,o.jsx)(p.Z,{type:"vertical"}),children:[(0,o.jsx)(s.Link,{to:"/app/create/image?op=update&id="+O.id,type:"link",children:(0,o.jsx)(j.Z,{title:E.FD.format("listManageEdit"),children:(0,o.jsx)(t.Z,{})})},"rebuild"),O.containerInfo&&O.containerInfo.Info&&O.containerInfo.Info.Name&&(0,o.jsx)(y.u,{access:"canSeeEnableCe",children:function(K){var Z=K.canSeeEnableCe;return(0,o.jsx)(R.Z,{disabled:Z,action:function(){return(0,S.v)({id:O.id})},ghost:!0,type:"link",tips:E.FD.format("listManageUnpause"),onSuccess:function(){var x;!((x=D.current)===null||x===void 0)&&x.reloadAndRest&&D.current.reloadAndRest()},icon:(0,o.jsx)(d.Z,{})})}})]})}}],rowKey:"id",request:function(){var n=r()(a()().mark(function A(O,I,C){var b,K;return a()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,h.cl)({pageSize:O.pageSize,page:(b=O.current)!==null&&b!==void 0?b:1,isDelete:!0,siteTitle:O.siteTitle,siteName:O.siteName});case 2:return K=L.sent,L.abrupt("return",{data:K.data.list,success:!0,total:K.data.total});case 4:case"end":return L.stop()}},A)}));return function(A,O,I){return n.apply(this,arguments)}}(),rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(A){var O=A.selectedRowKeys;return(0,o.jsx)(f.Z,{size:16,children:(0,o.jsx)(R.Z,{danger:!0,type:"primary",action:function(){return(0,h.xb)({id:O})},onSuccess:function(){var C,b;return!((C=D.current)===null||C===void 0)&&C.reloadAndRest&&((b=D.current)===null||b===void 0||b.reloadAndRest()),!0},onError:function(){var C,b;return!((C=D.current)===null||C===void 0)&&C.reset&&((b=D.current)===null||b===void 0||b.reset()),!0},confirm:"notification.confirm.title",children:E.FD.format("listManageDeleteBatch")})})},pagination:(0,B.O)(),search:{collapsed:!1},tableExtraRender:function(){return(0,o.jsx)(l.Z,{mode:"horizontal",selectedKeys:["recycle"],items:[{label:(0,o.jsx)(s.Link,{to:"/app/list",replace:!0,children:E.Ob.format("container.list")}),key:"all"},{label:(0,o.jsx)(s.Link,{to:"/app/recycle",replace:!0,children:E.Ob.format("container.list.recycle")}),key:"recycle"}]})}})})}},62597:function(U,m,e){e.d(m,{$G:function(){return g},Ct:function(){return B},Tb:function(){return s},XH:function(){return d},cl:function(){return j},fp:function(){return p},fu:function(){return h},iE:function(){return T},xb:function(){return y},ze:function(){return S}});var v=e(15009),a=e.n(v),c=e(99289),r=e.n(c),u=e(82346),P="com.dpanel.container.description",h="com.dpanel.container.title";function g(_){return f.apply(this,arguments)}function f(){return f=r()(a()().mark(function _(i){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,u.request)("/api/app/site/create-by-image",{method:"POST",data:i}));case 1:case"end":return n.stop()}},_)})),f.apply(this,arguments)}var p={EnvValueRuleRequired:1,EnvValueRuleDisabled:2,EnvValueTypeNumber:1024,EnvValueTypeText:2048,EnvValueTypeSelect:4096,EnvValueTypeSelectMultiple:8192};function j(_){return l.apply(this,arguments)}function l(){return l=r()(a()().mark(function _(i){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,u.request)("/api/app/site/get-list",{method:"POST",data:i}));case 1:case"end":return n.stop()}},_)})),l.apply(this,arguments)}function s(_){return t.apply(this,arguments)}function t(){return t=r()(a()().mark(function _(i){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i.download=!1,n.next=3,(0,u.request)("/api/app/log/run",{method:"POST",data:i});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},_)})),t.apply(this,arguments)}function d(_){return M.apply(this,arguments)}function M(){return M=r()(a()().mark(function _(i){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i.download=!0,n.next=3,(0,u.request)("/api/app/log/run",{method:"POST",data:i,responseType:"blob"});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},_)})),M.apply(this,arguments)}function T(_){return R.apply(this,arguments)}function R(){return R=r()(a()().mark(function _(i){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i.id=String(i.id),n.next=3,(0,u.request)("/api/app/site/get-detail",{data:i,method:"POST"});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},_)})),R.apply(this,arguments)}function B(_){return W.apply(this,arguments)}function W(){return W=r()(a()().mark(function _(i){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,u.request)("/api/app/container/delete",{method:"POST",data:i}));case 1:case"end":return n.stop()}},_)})),W.apply(this,arguments)}function y(_){return E.apply(this,arguments)}function E(){return E=r()(a()().mark(function _(i){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,u.request)("/api/app/site/delete",{method:"POST",data:i}));case 1:case"end":return n.stop()}},_)})),E.apply(this,arguments)}function S(_){return o.apply(this,arguments)}function o(){return o=r()(a()().mark(function _(i){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,u.request)("/api/app/container/ignore",{method:"POST",data:i}));case 1:case"end":return n.stop()}},_)})),o.apply(this,arguments)}},77446:function(U,m,e){e.d(m,{V:function(){return P},v:function(){return g}});var v=e(15009),a=e.n(v),c=e(99289),r=e.n(c),u=e(82346);function P(p){return h.apply(this,arguments)}function h(){return h=r()(a()().mark(function p(j){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,u.request)("/api/pro/container-rollback/get-list",{data:j,method:"POST"});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},p)})),h.apply(this,arguments)}function g(p){return f.apply(this,arguments)}function f(){return f=r()(a()().mark(function p(j){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,u.request)("/api/pro/container-rollback/restore",{data:j,method:"POST"});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},p)})),f.apply(this,arguments)}},67255:function(U,m,e){e.d(m,{O:function(){return v},j:function(){return a}});function v(c){var r=localStorage.getItem("dpanel-pagesize");return r=="all"?!1:{defaultCurrent:c==null?void 0:c.page,showSizeChanger:!0,defaultPageSize:parseInt(r!=null?r:"20"),onChange:function(P,h){localStorage.setItem("dpanel-page-"+location.pathname.split("/").slice(-2).join("-"),"".concat(P))}}}function a(c){var r="dpanel-table-column-".concat(c),u={};if(localStorage.getItem(r)){var P;u=JSON.parse((P=localStorage.getItem(r))!==null&&P!==void 0?P:"{}")}return{defaultValue:u,onChange:function(g){localStorage.setItem("dpanel-table-column-".concat(c),JSON.stringify(g))}}}}}]);
