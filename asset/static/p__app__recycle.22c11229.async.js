"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1610],{1699:function(j,m,n){n.d(m,{u:function(){return g}});var O=n(97857),s=n.n(O),l=n(67294),u=n(82346),i=n(42075),h=n(85893),g=function(c){var t=(0,u.useAccess)(),T=Array.isArray(c.access)?c.access:[c.access];return c.space?(0,h.jsx)(i.Z,s()(s()({},c.space),{},{children:T.every(function(d){return t[d]})?c.children:c.fallback})):(0,h.jsx)(h.Fragment,{children:T.every(function(d){return t[d]})?c.children:c.fallback})}},80821:function(j,m,n){n.d(m,{Z:function(){return c}});var O=n(5574),s=n.n(O),l=n(24963),u=n(86738),i=n(28036),h=n(83062),g=n(67294),P=n(85893);function c(t){var T=(0,g.useState)(!1),d=s()(T,2),C=d[0],v=d[1],y=(0,g.useContext)(l.Z),M=y.lang,L=y.notice,R=y.message,b=function(){v(!0);var U=t.action();U instanceof Promise?U.then(function(D){if(v(!1),D){typeof t.onSuccess=="function"&&t.onSuccess(D);var f="";t.messageSuccess?typeof t.messageSuccess=="function"?f=t.messageSuccess(D):f=t.messageSuccess.indexOf("notification.")==0?M(t.messageSuccess):t.messageSuccess:f=M("notification.finish"),t.asynced?R.info(f):R.success(f)}}).catch(function(D){v(!1),typeof t.onError=="function"&&t.onError(D)}):v(!1)};return t.confirm?(0,P.jsx)(u.Z,{style:{width:500},title:t.confirmTitle?t.confirmTitle:M("notification.title.tip"),description:typeof t.confirm=="string"&&t.confirm.indexOf("notification.")==0?M(t.confirm):t.confirm,onConfirm:b,okText:"Yes",cancelText:"No",onOpenChange:t.confirmOnOpenChange,children:(0,P.jsx)(i.ZP,{block:t.block,disabled:t.disabled,icon:t.icon,loading:C,danger:t.danger,type:t.type,children:t.children})}):(0,P.jsx)(h.Z,{title:t.tips,children:(0,P.jsx)(i.ZP,{block:t.block,style:t.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:t.disabled,icon:t.icon,loading:C,onClick:b,danger:t.danger,type:t.type,children:t.children})})}},78451:function(j,m,n){n.d(m,{Z:function(){return l}});var O=n(67294),s=n(85893);function l(u){return(0,s.jsx)("span",{style:{width:u.width?u.width:"auto",wordBreak:"break-word"},children:u.content})}},24963:function(j,m,n){var O=n(67294),s=(0,O.createContext)({});m.Z=s},67108:function(j,m,n){n.r(m),n.d(m,{default:function(){return U}});var O=n(15009),s=n.n(O),l=n(99289),u=n.n(l),i=n(90078),h=n(78099),g=n(62597),P=n(28036),c=n(83062),t=n(42075),T=n(50136),d=n(82346),C=n(43425),v=n(67294),y=n(96974),M=n(80821),L=n(67255),R=n(78451),b=n(1699),_=n(85893);function U(){var D=(0,y.UO)(),f=(0,v.useRef)();return(0,v.useEffect)(function(){var E;(E=f.current)===null||E===void 0||E.reload()},[D]),(0,_.jsx)(i._z,{header:{extra:[(0,_.jsx)(b.u,{access:"canSeeContainerListManageCreate",children:(0,_.jsx)(P.ZP,{type:"primary",children:(0,_.jsx)(d.Link,{to:"/app/create/image",children:"\u521B\u5EFA\u5BB9\u5668"})})},"create")]},children:(0,_.jsx)(h.Z,{scroll:{x:"max-content"},actionRef:f,columns:[{title:"\u540D\u79F0",dataIndex:"siteTitle",width:200},{title:"\u6807\u8BC6",dataIndex:"siteName",width:200},{title:"\u6700\u540E\u9519\u8BEF",dataIndex:"message",search:!1,width:250,render:function(a,r,o,e,p){return(0,_.jsx)(R.Z,{content:r.message})}},{title:"\u5220\u9664\u65E5\u671F",ellipsis:!0,dataIndex:"deletedAt",search:!1,width:180,render:function(a,r,o,e,p){return new Date(r.deletedAt).toLocaleString()}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:100,fixed:"right",render:function(a,r,o,e){return[(0,_.jsx)(d.Link,{to:"/app/create/image?op=update&id="+r.id,type:"link",children:(0,_.jsx)(c.Z,{title:"\u518D\u6B21\u6784\u5EFA",children:(0,_.jsx)(C.Z,{})})},"rebuild")]}}],rowKey:"id",request:function(){var E=u()(s()().mark(function a(r,o,e){var p,W,B;return s()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,g.cl)({pageSize:(p=r.pageSize)!==null&&p!==void 0?p:10,page:(W=r.current)!==null&&W!==void 0?W:1,isDelete:!0,siteTitle:r.siteTitle,siteName:r.siteName});case 2:return B=A.sent,A.abrupt("return",{data:B.data.list,success:!0,total:B.data.total});case 4:case"end":return A.stop()}},a)}));return function(a,r,o){return E.apply(this,arguments)}}(),rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(a){var r=a.selectedRowKeys;return(0,_.jsx)(t.Z,{size:16,children:(0,_.jsx)(M.Z,{danger:!0,type:"primary",action:function(){return(0,g.xb)({id:r})},onSuccess:function(){var e,p;return!((e=f.current)===null||e===void 0)&&e.reloadAndRest&&((p=f.current)===null||p===void 0||p.reloadAndRest()),!0},onError:function(){var e,p;return!((e=f.current)===null||e===void 0)&&e.reset&&((p=f.current)===null||p===void 0||p.reset()),!0},confirm:"notification.confirm.title",children:"\u6279\u91CF\u5220\u9664"})})},pagination:(0,L.O)(),search:{collapsed:!1},tableExtraRender:function(){return(0,_.jsx)(T.Z,{mode:"horizontal",selectedKeys:["recycle"],items:[{label:(0,_.jsx)(d.Link,{to:"/app/list",replace:!0,children:"\u5BB9\u5668\u5217\u8868"}),key:"all"},{label:(0,_.jsx)(d.Link,{to:"/app/recycle",replace:!0,children:"\u56DE\u6536\u7AD9"}),key:"recycle"}]})}})})}},62597:function(j,m,n){n.d(m,{$G:function(){return h},Ct:function(){return L},Tb:function(){return T},XH:function(){return C},cl:function(){return c},fp:function(){return P},iE:function(){return y},xb:function(){return b},ze:function(){return f}});var O=n(15009),s=n.n(O),l=n(99289),u=n.n(l),i=n(82346);function h(a){return g.apply(this,arguments)}function g(){return g=u()(s()().mark(function a(r){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/site/create-by-image",{method:"POST",data:r}));case 1:case"end":return e.stop()}},a)})),g.apply(this,arguments)}var P={EnvValueRuleRequired:1,EnvValueRuleDisabled:2,EnvValueTypeNumber:1024,EnvValueTypeText:2048,EnvValueTypeSelect:4096};function c(a){return t.apply(this,arguments)}function t(){return t=u()(s()().mark(function a(r){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/site/get-list",{method:"POST",data:r}));case 1:case"end":return e.stop()}},a)})),t.apply(this,arguments)}function T(a){return d.apply(this,arguments)}function d(){return d=u()(s()().mark(function a(r){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.download=!1,e.next=3,(0,i.request)("/api/app/log/run",{method:"POST",data:r});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},a)})),d.apply(this,arguments)}function C(a){return v.apply(this,arguments)}function v(){return v=u()(s()().mark(function a(r){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.download=!0,e.next=3,(0,i.request)("/api/app/log/run",{method:"POST",data:r,responseType:"blob"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},a)})),v.apply(this,arguments)}function y(a){return M.apply(this,arguments)}function M(){return M=u()(s()().mark(function a(r){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.request)("/api/app/site/get-detail",{data:r,method:"POST"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},a)})),M.apply(this,arguments)}function L(a){return R.apply(this,arguments)}function R(){return R=u()(s()().mark(function a(r){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/container/delete",{method:"POST",data:r}));case 1:case"end":return e.stop()}},a)})),R.apply(this,arguments)}function b(a){return _.apply(this,arguments)}function _(){return _=u()(s()().mark(function a(r){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/site/delete",{method:"POST",data:r}));case 1:case"end":return e.stop()}},a)})),_.apply(this,arguments)}function U(a){return D.apply(this,arguments)}function D(){return D=_asyncToGenerator(_regeneratorRuntime().mark(function a(r){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request("/api/app/site/update-title",{method:"POST",data:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},a)})),D.apply(this,arguments)}function f(a){return E.apply(this,arguments)}function E(){return E=u()(s()().mark(function a(r){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/container/ignore",{method:"POST",data:r}));case 1:case"end":return e.stop()}},a)})),E.apply(this,arguments)}},67255:function(j,m,n){n.d(m,{O:function(){return O},j:function(){return s}});function O(){var l=localStorage.getItem("dpanel-pagesize");return l=="all"?!1:{showSizeChanger:!0,defaultPageSize:parseInt(l!=null?l:"20")}}function s(l){var u="dpanel-table-column-".concat(l),i={};if(localStorage.getItem(u)){var h;i=JSON.parse((h=localStorage.getItem(u))!==null&&h!==void 0?h:"{}")}return{defaultValue:i,onChange:function(P){localStorage.setItem("dpanel-table-column-".concat(l),JSON.stringify(P))}}}}}]);
