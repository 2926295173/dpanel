"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3985],{85060:function(ce,U,t){t.d(U,{Z:function(){return E}});var O=t(87462),x=t(67294),W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},D=W,B=t(84089),y=function(Y,h){return x.createElement(B.Z,(0,O.Z)({},Y,{ref:h,icon:D}))},L=x.forwardRef(y),E=L},2741:function(ce,U,t){t.d(U,{Z:function(){return E}});var O=t(87462),x=t(67294),W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.7c6 6 9.4 14.1 9.4 22.6V928c0 17.7-14.3 32-32 32H192c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32h424.7c8.5 0 16.7 3.4 22.7 9.4l215.2 215.3zM790.2 326L602 137.8V326h188.2z"}}]},name:"file",theme:"filled"},D=W,B=t(84089),y=function(Y,h){return x.createElement(B.Z,(0,O.Z)({},Y,{ref:h,icon:D}))},L=x.forwardRef(y),E=L},93613:function(ce,U,t){t.d(U,{Z:function(){return E}});var O=t(87462),x=t(67294),W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32z"}}]},name:"folder",theme:"filled"},D=W,B=t(84089),y=function(Y,h){return x.createElement(B.Z,(0,O.Z)({},Y,{ref:h,icon:D}))},L=x.forwardRef(y),E=L},27254:function(ce,U,t){t.d(U,{Z:function(){return E}});var O=t(87462),x=t(67294),W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zm-180 0H238c-13 0-24.8 7.9-29.7 20L136 643.2V256h188.5l119.6 114.4H748V444z"}}]},name:"folder-open",theme:"filled"},D=W,B=t(84089),y=function(Y,h){return x.createElement(B.Z,(0,O.Z)({},Y,{ref:h,icon:D}))},L=x.forwardRef(y),E=L},63434:function(ce,U,t){var O=t(1413),x=t(45987),W=t(22270),D=t(84567),B=t(67294),y=t(90789),L=t(35510),E=t(85893),ee=["options","fieldProps","proFieldProps","valueEnum"],Y=B.forwardRef(function(M,te){var I=M.options,c=M.fieldProps,T=M.proFieldProps,F=M.valueEnum,oe=(0,x.Z)(M,ee);return(0,E.jsx)(L.Z,(0,O.Z)({ref:te,valueType:"checkbox",valueEnum:(0,W.h)(F,void 0),fieldProps:(0,O.Z)({options:I},c),lightProps:(0,O.Z)({labelFormatter:function(){return(0,E.jsx)(L.Z,(0,O.Z)({ref:te,valueType:"checkbox",mode:"read",valueEnum:(0,W.h)(F,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,O.Z)({options:I},c),proFieldProps:T},oe))}},oe.lightProps),proFieldProps:T},oe))}),h=B.forwardRef(function(M,te){var I=M.fieldProps,c=M.children;return(0,E.jsx)(D.Z,(0,O.Z)((0,O.Z)({ref:te},I),{},{children:c}))}),K=(0,y.G)(h,{valuePropName:"checked"}),w=K;w.Group=Y,U.Z=w},92067:function(ce,U,t){t.d(U,{Z:function(){return te}});var O=t(15009),x=t.n(O),W=t(99289),D=t.n(W),B=t(13822),y=t(64789),L=t(78099),E=t(42075),ee=t(83062),Y=t(28036),h=t(37413),K=t(5251),w=t(36146),M=t(85893);function te(I){return(0,M.jsx)(L.Z,{columns:[{title:w.FD.format("listContainerName"),dataIndex:"name",render:function(T,F,oe,X){return(0,M.jsx)(E.Z,{direction:"vertical",style:{textAlign:"left"},children:F==null?void 0:F.Names.map(function(ne){return(0,K.fi)(ne,"/")})},F.Id)}},{title:w.FD.format("listPort"),dataIndex:"ports",search:!1,render:function(T,F,oe,X){var ne=[],J=[];return F!=null&&F.Ports&&F.Ports.map(function(Q,V){Q.PublicPort?ne.push(Q):J.push(Q)}),(0,M.jsx)(h.Z,{publicPort:ne,privatePort:J,domain:[]})}},{title:w.FD.format("listManage"),valueType:"option",key:"option",ellipsis:!0,width:100,render:function(T,F,oe,X){return[(0,M.jsx)(ee.Z,{title:w.FD.format("listManageUse"),children:(0,M.jsx)(Y.ZP,{type:"link",onClick:D()(x()().mark(function ne(){var J;return x()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,(0,B.jV)({md5:F.Id});case 2:J=V.sent,I.onSelect&&I.onSelect(J.data.info);case 4:case"end":return V.stop()}},ne)})),children:(0,M.jsx)(y.Z,{})},F.Id)},F.Id)]}}],rowKey:"Id",request:function(){var c=D()(x()().mark(function T(F,oe,X){var ne;return x()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,(0,B.IE)({siteTitle:F.name});case 2:return ne=Q.sent,Q.abrupt("return",{data:ne.data.list,success:!0,total:ne.data.list.length});case 4:case"end":return Q.stop()}},T)}));return function(T,F,oe){return c.apply(this,arguments)}}(),pagination:{pageSize:9}})}},52255:function(ce,U,t){t.d(U,{Z:function(){return W}});var O=t(67294),x=t(85893);function W(D){return(0,x.jsx)("div",{style:{display:D.show?"block":"none"},children:D.children})}},20743:function(ce,U,t){var O=t(15009),x=t.n(O),W=t(99289),D=t.n(W),B=t(5574),y=t.n(B),L=t(67294),E=t(14946),ee=t(64789),Y=t(78099),h=t(28036),K=t(85265),w=t(42075),M=t(66309),te=t(16970),I=t(3616),c=t(36146),T=t(85893),F=(0,L.forwardRef)(function(oe,X){(0,L.useImperativeHandle)(X,function(){return{show:function(){V(!0)}}});var ne=(0,L.useState)(!1),J=y()(ne,2),Q=J[0],V=J[1],je=(0,L.useRef)(),Pe=new c.Uo("components.network");return(0,T.jsxs)(T.Fragment,{children:[oe.showTriggerButton&&(0,T.jsx)(h.ZP,{onClick:function(){V(!0)},children:Pe.format("selectTriggerButton")}),(0,T.jsx)(K.Z,{title:Pe.format("selectDrawerTitle"),width:I.R_,footer:!1,open:Q,onClose:function(){return V(!1)},extra:(0,T.jsx)(w.Z,{children:(0,T.jsx)(te.Z,{onFinish:function(){var ae,m;!((ae=je.current)===null||ae===void 0)&&ae.reloadAndRest&&((m=je.current)===null||m===void 0||m.reloadAndRest())}},"create")}),children:(0,T.jsx)(Y.Z,{rowKey:"Name",actionRef:je,columns:[{title:c.FD.format("listTitle"),dataIndex:"Name",render:function(ae,m,e,Ce,ve){return m.Name=="none"||m.Name=="bridge"||m.Name=="host"?(0,T.jsxs)(T.Fragment,{children:[m.Name," ",(0,T.jsx)(M.Z,{color:"blue",children:"System"})]}):(0,T.jsx)(T.Fragment,{children:ae})}},{title:c.FD.format("listType"),ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"Driver",ellipsis:!0,width:100,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4",search:!1,width:120,render:function(ae,m,e,Ce,ve){return m.IPAM.Config&&m.IPAM.Config[0]&&(0,T.jsxs)(w.Z,{direction:"vertical",children:[m.IPAM.Config[0].Subnet,m.IPAM.Config[0].Gateway]})}},{title:"IPV6",search:!1,render:function(ae,m,e,Ce,ve){return m.IPAM.Config&&m.IPAM.Config[1]&&(0,T.jsxs)(w.Z,{direction:"vertical",children:[m.IPAM.Config[1].Subnet,m.IPAM.Config[1].Gateway]})}},{title:c.FD.format("listManage"),width:100,search:!1,render:function(ae,m,e,Ce,ve){return[m.Name!="none"&&m.Name!="bridge"&&m.Name!="host"&&(0,T.jsx)(h.ZP,{type:"link",onClick:function(){oe.onSelect(m),V(!1)},children:(0,T.jsx)(ee.Z,{})},m.Id)]}}],request:function(){var ie=D()(x()().mark(function ae(m,e,Ce){var ve;return x()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=2,(0,E.jR)({name:m.Name});case 2:return ve=me.sent,me.abrupt("return",{data:ve.data.list,success:!0,total:ve.data.list.length});case 4:case"end":return me.stop()}},ae)}));return function(ae,m,e){return ie.apply(this,arguments)}}(),pagination:{pageSize:10}})})]})});U.Z=F},35880:function(ce,U,t){var O=t(67294),x=(0,O.createContext)({});U.Z=x},57841:function(ce,U,t){t.r(U),t.d(U,{default:function(){return It}});var O=t(15009),x=t.n(O),W=t(99289),D=t.n(W),B=t(5574),y=t.n(B),L=t(90078),E=t(38345),ee=t(97269),Y=t(2236),h=t(5966),K=t(24739),w=t(97462),M=t(30291),te=t(92398),I=t(40056),c=t(67294),T=t(35880),F=t(13822),oe=t(51042),X=t(62370),ne=t(63434),J=t(17186),Q=t(25593),V=t(42075),je=t(85265),Pe=t(92067),ie=t(5251),ae=t(3616),m=t(36146),e=t(85893),Ce=(0,c.forwardRef)(function(o,b){var i=(0,c.useState)(!1),k=y()(i,2),g=k[0],s=k[1],l=(0,c.useRef)(),a=new m.Uo("components.appForm"),d=function(v){var u=(0,c.useState)([]),j=y()(u,2),P=j[0],p=j[1];return(0,c.useEffect)(function(){(0,F.jV)({md5:v.name}).then(function(R){var A;return p((A=R.data.info.Config.Env)!==null&&A!==void 0?A:[]),!0})},[]),(0,e.jsxs)(E.Z,{bordered:!0,extra:v.action,style:{marginBottom:10},children:[(0,e.jsx)(E.Z,{title:a.format("createLinkItemTitle"),children:(0,e.jsxs)(K.UW,{children:[(0,e.jsx)(h.Z,{label:a.format("createLinkItemName"),name:"name",width:"md",readonly:!0}),(0,e.jsx)(h.Z,{label:a.format("createLinkItemAlise"),name:"alise",width:"md",readonly:!0,tooltip:a.format("createLinkItemAliseTip"),hidden:!0}),(0,e.jsx)(X.Z,{label:a.format("createLinkItemAlise"),tooltip:a.format("createLinkItemAliseTip"),children:(0,e.jsx)(Q.Z.Text,{copyable:!0,children:v.record.alise})}),(0,e.jsx)(ne.Z,{label:a.format("createLinkItemVolume"),name:"volume"})]})}),(0,e.jsx)(E.Z,{title:a.format("createLinkItemEnv"),children:(0,e.jsx)(V.Z,{direction:"vertical",children:P&&P.map(function(R,A){return(0,e.jsx)(Q.Z.Text,{copyable:{icon:(0,e.jsx)(oe.Z,{}),onCopy:function(){var G=R.split("=");o.onAddEnv(G[0],G[1])},tooltips:["add env","success"]},code:!0,ellipsis:{tooltip:R},style:{width:300},children:R},A)})},"linkEnv")})]})},C=function(v){var u,j,P=!1,p=(u=(j=l.current)===null||j===void 0?void 0:j.getList())!==null&&u!==void 0?u:[];if(p.map(function(A){A.name==v.name&&(P=!0)}),!P){var R;(R=l.current)===null||R===void 0||R.add(v)}};return(0,c.useImperativeHandle)(b,function(){return{setDefaultLink:function(v){v&&v.map(function(u){u.name!=""&&C(u)})}}}),(0,e.jsxs)(E.Z,{title:a.format("createLinkTitle"),headerBordered:!0,children:[(0,e.jsx)(J.u,{name:"links",actionRef:l,creatorButtonProps:{creatorButtonText:a.format("createLinkAddButton")},actionGuard:{beforeAddRow:function(v,u){return s(!0),!1}},copyIconProps:!1,min:0,itemRender:function(v,u){return(0,e.jsx)(d,{action:v.action,name:u.record.name,record:u.record})}}),(0,e.jsx)(je.Z,{title:a.format("createLinkSelectContainer"),width:ae.R_,footer:!1,open:g,onClose:function(){return s(!1)},children:(0,e.jsx)(Pe.Z,{onSelect:function(v){C({name:(0,ie.fi)(v.Name,"/"),alise:"".concat(v.Config.Hostname,".").concat(v.Config.Domainname),volume:!1}),s(!1)}})})]})}),ve=Ce,Ae=t(91058),me=t(3393),Ie=t(64317),ye=(0,c.forwardRef)(function(o,b){var i=(0,c.useRef)(),k=(0,c.useState)(),g=y()(k,2),s=g[0],l=g[1],a=new m.Uo("components.appForm");(0,c.useImperativeHandle)(b,function(){return{setDefaultDestPath:function(f){var v,u,j=(v=(u=i.current)===null||u===void 0?void 0:u.getList())!==null&&v!==void 0?v:[];f.length!=0&&f.filter(function(P){return P!=""}).map(function(P){var p=!1;if(j.map(function(A){if(A.dest==P){p=!0;return}}),!p){var R;(R=i.current)===null||R===void 0||R.add({dest:P,permission:"write",inImage:!0})}})},addUserVolumeItem:function(f,v){var u,j=(u=i.current)===null||u===void 0?void 0:u.getList(),P=!1;if(j==null||j.map(function(R){if(R.dest==v){P=!0;return}}),!P){var p;(p=i.current)===null||p===void 0||p.add({host:f,dest:v})}}}});var d=function(){var C=D()(x()().mark(function f(v){var u,j;return x()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!s){p.next=2;break}return p.abrupt("return");case 2:if(v){p.next=4;break}return p.abrupt("return");case 4:return p.next=6,(0,me.cD)({md5:v});case 6:u=p.sent,j={title:"/",value:"/",children:[]},u.data.list.map(function(R){var A=j;R.split("/").map(function(_,G,le){var $;if(_){var Z=($=A.children)===null||$===void 0?void 0:$.find(function(N){return N.title===_});Z||(Z={title:_,value:le.join("/"),children:[]},A.children?A.children.push(Z):A.children=[Z]),A=Z}})}),j.children&&l(j.children);case 10:case"end":return p.stop()}},f)}));return function(v){return C.apply(this,arguments)}}();return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(E.Z,{title:a.format("createVolumeTitle"),tooltip:a.format("createVolumeTitleTip"),headerBordered:!0,direction:"column",children:(0,e.jsx)(J.u,{actionRef:i,name:"volumes",creatorButtonProps:{creatorButtonText:a.format("createVolumeAddButton")},copyIconProps:!1,min:0,children:function(f,v,u){var j=u.getCurrentRowData();return(0,e.jsxs)(K.UW,{children:[(0,e.jsxs)(V.Z.Compact,{children:[(0,e.jsx)(h.Z,{label:a.format("createVolumeHost"),name:"host",width:o.showInDrawer?"sm":"md"}),(0,e.jsx)(Ie.Z,{label:" ",options:a.option("createVolumePermission",["write","readonly"]),initialValue:"write",name:"permission"})]}),(0,e.jsx)(V.Z.Compact,{children:(0,e.jsx)(h.Z,{label:a.format("createVolumeDest"),name:"dest",width:o.showInDrawer?"sm":"md",required:!0,rules:[{required:!0}],disabled:o.disabledUserVolumeDest||j.inImage})})]})}})})})}),Le=ye,Fe=t(2831),se=t(52688),_e=t(86125),Ue=t(71230),De=t(15746),Be=t(44349);function Ve(o){var b,i=(0,c.useState)(),k=y()(i,2),g=k[0],s=k[1],l=new m.Uo("components.appForm");return(0,c.useEffect)(function(){(0,Fe.aF)().then(function(a){return s(a.data.info)})},[]),(0,e.jsxs)(E.Z,{children:[(0,e.jsx)(h.Z,{label:l.format("createAdvRuntimeShmsize"),name:"shmsize",initialValue:"64M",tooltip:l.format("createAdvRuntimeShmsizeTip")}),(0,e.jsx)(X.Z,{label:l.format("createAdvRuntimeCpus"),name:"cpus",children:(0,e.jsx)(_e.Z,{step:.1,max:g==null?void 0:g.NCPU,marks:Object.fromEntries(l.option("createAdvRuntimeCpusOption",["0","1","1.5","2","4","6","8"]).map(function(a){return[a.value,a.label]}))})}),(0,e.jsx)(X.Z,{label:l.format("createAdvRuntimeMemory"),name:"memory",children:(0,e.jsx)(_e.Z,{step:256,max:Math.round(((b=g==null?void 0:g.MemTotal)!==null&&b!==void 0?b:0)/1024/1024),marks:Object.fromEntries(l.option("createAdvRuntimeMemoryOption",["0","1024","2048","3072","4096"]).map(function(a){return[a.value,a.label]}))})}),(0,e.jsx)(Ie.Z,{label:l.format("createAdvRuntimeLogDriver"),name:["log","driver"],tooltip:l.format("createAdvRuntimeLogDriverTip"),initialValue:"json-file",options:l.option("createAdvRuntimeLogDriverOption",["json-file","journald"])}),(0,e.jsx)(w.Z,{name:["log"],children:function(d){var C=d.log;if(C.driver=="json-file")return(0,e.jsxs)(K.UW,{children:[(0,e.jsx)(h.Z,{label:l.format("createAdvRuntimeLogMaxSize"),name:["log","maxSize"],placeholder:"5M",tooltip:l.format("createAdvRuntimeLogMaxSizeTip")}),(0,e.jsx)(h.Z,{tooltip:l.format("createAdvRuntimeLogMaxFileTip"),label:l.format("createAdvRuntimeLogMaxFile"),name:["log","maxFile"],placeholder:"10"})]})}}),(0,e.jsx)(Be.Z,{name:"device",label:l.format("createAdvRuntimeDevice"),hideCopyButton:!0,showAddButton:!0,items:[{label:l.format("createAdvRuntimeDeviceHost"),name:"host",width:"md",placeholder:"/dev/tty0"},{label:l.format("createAdvRuntimeDeviceDest"),name:"dest",width:"md",placeholder:"/dev/tty0"}]}),(0,e.jsxs)(Ue.Z,{children:[(0,e.jsx)(De.Z,{span:4,children:(0,e.jsx)(se.Z,{label:l.format("createAdvRuntimeGpus"),name:["gpus","enable"]})}),(0,e.jsx)(De.Z,{span:20,children:(0,e.jsx)(w.Z,{name:["gpus"],children:function(d){var C=d.gpus;if(C&&C.enable)return(0,e.jsx)(Ie.Z,{mode:"tags",label:l.format("createAdvRuntimeGpusDevice"),name:["gpus","device"],placeholder:l.format("createAdvRuntimeGpusDeviceEmpty")})}})})]}),(0,e.jsx)(w.Z,{name:["gpus"],children:function(d){var C=d.gpus;if(C&&C.enable)return(0,e.jsx)(Ie.Z,{label:l.format("createAdvRuntimeGpusCap"),name:["gpus","capabilities"],mode:"multiple",fieldProps:{allowClear:!0},options:l.option("createAdvRuntimeGpusCapOption",["compute","compat32","graphics","utility","video","display"])})}})]})}function He(){var o=new m.Uo("components.appForm");return(0,e.jsx)(E.Z,{title:o.format("createAdvLabel"),children:(0,e.jsx)(J.u,{name:"label",label:"",creatorButtonProps:{creatorButtonText:o.format("createAdvLabelAddButton")},copyIconProps:!1,min:0,children:(0,e.jsxs)(K.UW,{children:[(0,e.jsx)(h.Z,{width:"md",name:"name",label:o.format("createAdvLabelName")}),(0,e.jsx)(h.Z,{width:"md",name:"value",label:o.format("createAdvLabelValue")})]})})})}var We=t(44771),Ke=t(86615),Pt="default",Et="user";function Ge(o){return(0,e.jsx)(X.Z,{label:o.label,tooltip:o.tooltip,children:(0,e.jsxs)(V.Z.Compact,{block:!0,children:[(0,e.jsx)(Ke.Z.Group,{radioType:"button",name:[o.name,"useDefault"],options:[{label:m.FD.format("listDefault"),value:!0},{label:m.FD.format("listUseUser"),value:!1}]}),(0,e.jsx)(w.Z,{name:[o.name],children:function(i){return i[o.name]&&i[o.name].useDefault?(0,e.jsx)(h.Z,{name:[o.name,"default"],disabled:!0}):(0,e.jsx)(h.Z,{name:[o.name,"value"]})}})]})})}var Ee=Ge,Ne=t(24963);function $e(){var o=(0,c.useContext)(Ne.Z),b=o.message,i=new m.Uo("components.appForm");return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(E.Z,{children:[(0,e.jsx)(We.Z,{label:i.format("createAdvRunCommandRestart")}),(0,e.jsxs)(K.UW,{children:[(0,e.jsx)(se.Z,{fieldProps:{onChange:function(g){g&&b.warning(i.format("createAdvRunCommandPrivilegedNotice"))}},name:"privileged",tooltip:"--privileged",label:i.format("createAdvRunCommandPrivileged"),initialValue:!1}),(0,e.jsx)(se.Z,{name:"autoRemove",tooltip:"--rm",label:i.format("createAdvRunCommandAutoRemove"),initialValue:!1}),(0,e.jsx)(se.Z,{fieldProps:{onChange:function(g){g&&b.warning(i.format("createAdvRunCommandHostPidNotice"))}},tooltip:"--pid host",name:"hostPid",label:i.format("createAdvRunCommandHostPid"),initialValue:!1})]}),(0,e.jsx)(Ee,{label:"WorkDir",tooltip:i.format("createAdvRunCommandWorkDirTip"),name:"workDir"}),(0,e.jsx)(Ee,{label:"User",tooltip:i.format("createAdvRunCommandUserTip"),name:"user"}),(0,e.jsx)(Ee,{label:"Command",tooltip:i.format("createAdvRunCommandCommandTip"),name:"command"}),(0,e.jsx)(Ee,{label:"Entrypoint",tooltip:i.format("createAdvRunCommandEntrypointTip"),name:"entrypoint"})]})})}var ze=t(91845),Se=t(62597),Me=t(82346),Ye=t(20743),Xe=(0,c.forwardRef)(function(o,b){var i=(0,c.useRef)(),k=(0,c.useRef)(),g=new m.Uo("components.appForm");(0,c.useImperativeHandle)(b,function(){return{}});var s=function(a){var d,C,f=!1,v=(d=(C=i.current)===null||C===void 0?void 0:C.getList())!==null&&d!==void 0?d:[];if(v.map(function(j){j.name==a.name&&(f=!0)}),!f){var u;(u=i.current)===null||u===void 0||u.add(a)}};return(0,e.jsxs)(E.Z,{title:g.format("createNetworkTitle"),headerBordered:!0,extra:(0,e.jsx)(V.Z,{children:o.showUseBridgeNetwork&&(0,e.jsx)(se.Z,{name:"useBridgeNetwork",fieldProps:{checkedChildren:g.format("createNetworkUseBridgeNetwork"),unCheckedChildren:g.format("createNetworkUseBridgeNetwork")}},"useBridgeNetwork")}),children:[(0,e.jsx)(J.u,{name:"network",actionRef:i,creatorButtonProps:{creatorButtonText:g.format("createNetworkAddButton")},actionGuard:{beforeAddRow:function(a,d){var C;return(C=k.current)===null||C===void 0||C.show(),!1}},copyIconProps:!1,min:0,itemRender:function(a,d){if(d.record.name!="bridge")return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(K.UW,{children:[(0,e.jsx)(h.Z,{label:g.format("createNetworkName"),name:"name",width:"md",disabled:!0,fieldProps:{value:d.record.name}}),(0,e.jsx)(h.Z,{label:g.format("createNetworkAlise"),name:"alise",tooltip:g.format("createNetworkAliseTip"),placeholder:g.format("createNetworkAliseEmpty")}),(0,e.jsx)(h.Z,{label:"IpV4",name:"ipV4",width:"md",disabled:d.record.name=="bridge",fieldProps:{addonAfter:d.record.subnet}}),d.record.subnetV6&&(0,e.jsx)(h.Z,{label:"IpV6",name:"ipV6",width:"md",disabled:d.record.name=="bridge",fieldProps:{addonAfter:d.record.subnetV6}}),(0,e.jsx)(X.Z,{label:" ",children:a.action})]})})}}),(0,e.jsx)(Ye.Z,{ref:k,onSelect:function(a){s({name:a.Name,alise:[""],subnet:a.IPAM.Config[0].Subnet,subnetV6:a.IPAM.Config[1]&&a.IPAM.Config[1].Subnet})}})]})}),Je=Xe,Qe=(0,c.forwardRef)(function(o,b){var i=(0,c.useRef)(),k=(0,c.useContext)(T.Z),g=k.createFormRef,s=new m.Uo("components.appForm");return(0,c.useImperativeHandle)(b,function(){return{setExposePort:function(a){if(a){var d,C,f=(d=(C=i.current)===null||C===void 0?void 0:C.getList())!==null&&d!==void 0?d:[];Object.keys(a).map(function(v){var u=!1;if(f.map(function(P){P.dest==v&&(u=!0)}),!u){var j;(j=i.current)===null||j===void 0||j.add({host:"",dest:v})}})}},addPortItem:function(a,d){var C,f=(C=i.current)===null||C===void 0?void 0:C.getList(),v=!1;if(f==null||f.map(function(j){if(j.host==a){v=!0;return}}),!v){var u;(u=i.current)===null||u===void 0||u.add({host:String(a),dest:String(d)})}}}}),(0,e.jsx)(E.Z,{title:s.format("createPortTitle"),tooltip:s.format("createPortTitleTip"),headerBordered:!0,extra:(0,e.jsxs)(V.Z,{children:[o.showBindHost&&(0,e.jsx)(se.Z,{name:"useHostNetwork",fieldProps:{checkedChildren:s.format("createPortBindHost"),unCheckedChildren:s.format("createPortBindHost"),onChange:function(a){if(a){var d;(d=g.current)===null||d===void 0||d.setFieldsValue({bindIpV6:!1,publishAllPorts:!1})}}}}),o.showBindIpV6&&(0,e.jsx)(w.Z,{name:["siteName","useHostNetwork"],children:function(a){var d=a.useHostNetwork;return(0,e.jsx)(se.Z,{name:"publishAllPorts",fieldProps:{checkedChildren:s.format("createPortPublishAllPorts"),unCheckedChildren:s.format("createPortPublishAllPorts")},disabled:d},"publishAllPorts")}}),o.showBindIpV6&&(0,e.jsx)(w.Z,{name:["siteName","useHostNetwork"],children:function(a){var d=a.useHostNetwork;return(0,e.jsx)(se.Z,{name:"bindIpV6",fieldProps:{checkedChildren:"IpV6",unCheckedChildren:"IpV6"},disabled:d},"bindIpV6")}})]}),children:(0,e.jsx)(w.Z,{name:["useHostNetwork","bindIpV6","publishAllPorts"],children:function(a){var d=a.useHostNetwork,C=a.bindIpV6,f=a.publishAllPorts;if(!d&&!f)return(0,e.jsx)(J.u,{name:"ports",actionRef:i,creatorButtonProps:{creatorButtonText:s.format("createPortAddButton")},min:0,copyIconProps:!1,children:(0,e.jsxs)(K.UW,{children:[(0,e.jsx)(h.Z,{width:o.showInDrawer?"sm":"md",name:"host",label:s.format("createPortHost"),tooltip:s.format("createPortHostTip"),placeholder:s.format("createPortHostEmpty"),required:C,rules:[{required:C}]}),(0,e.jsx)(h.Z,{label:s.format("createPortDest"),width:o.showInDrawer?"sm":"md",name:"dest",placeholder:s.format("createPortDestEmpty"),required:!0,rules:[{required:!0}]})]})})}})})}),qe=Qe,he=t(52255);function et(){var o=(0,c.useRef)(),b=new m.Uo("components.appForm"),i=function(s){var l,a,d=!1,C=(l=(a=o.current)===null||a===void 0?void 0:a.getList())!==null&&l!==void 0?l:[];if(C.map(function(v){v.name==s.name&&(d=!0)}),!d){var f;(f=o.current)===null||f===void 0||f.add(s)}},k=function(s){var l,a,d=!1,C=(l=(a=o.current)===null||a===void 0?void 0:a.getList())!==null&&l!==void 0?l:[];C.map(function(f,v){if(f.name==s){var u;(u=o.current)===null||u===void 0||u.remove(v)}})};return(0,e.jsx)(E.Z,{title:b.format("createAddHost"),tooltip:b.format("createAddHostTip"),extra:(0,e.jsx)(V.Z,{children:(0,e.jsx)(se.Z,{name:"enableBindHost",fieldProps:{checkedChildren:b.format("createAddHostBindHost"),unCheckedChildren:b.format("createAddHostBindHost"),onChange:function(s){s?i({name:"host.dpanel.local",value:"host-gateway"}):k("host.dpanel.local")}}})}),children:(0,e.jsx)(J.u,{name:"extraHosts",creatorButtonProps:{creatorButtonText:b.format("createAddHostAddButton")},actionRef:o,copyIconProps:!1,min:0,children:(0,e.jsxs)(K.UW,{children:[(0,e.jsx)(h.Z,{width:"md",name:"name",label:"Hostname",placeholder:""}),(0,e.jsx)(h.Z,{width:"md",name:"value",label:"ip",placeholder:""})]})})})}var Re=t(90672),tt=(0,c.forwardRef)(function(o,b){(0,c.useImperativeHandle)(b,function(){return{}});var i=new m.Uo("components.appForm");return(0,e.jsxs)(E.Z,{title:i.format("createSelfNetworkTitle"),children:[(0,e.jsxs)(K.UW,{children:[(0,e.jsx)(h.Z,{label:i.format("createSelfNetworkIp",{ip:"ipv4"}),name:["ipV4","address"],width:"md",tooltip:i.format("createSelfNetworkIpTip",{ip:"ipv4",example:"192.168.1.5"}),placeholder:"192.168.1.5"}),(0,e.jsx)(w.Z,{name:["ipV4"],children:function(g){var s=g.ipV4;return(0,e.jsx)(h.Z,{label:i.format("createSelfNetworkIpSubnet",{ip:"ipv4"}),name:["ipV4","subnet"],width:"md",required:s&&s.address,tooltip:i.format("createSelfNetworkIpSubnetTip",{ip:"ipv4",example:"192.168.1.0/24"}),placeholder:"192.168.1.0/24",rules:[{required:s&&s.address}]})}}),(0,e.jsx)(h.Z,{label:i.format("createSelfNetworkIpGateway",{ip:"ipv4"}),name:["ipV4","gateway"],width:"md",tooltip:i.format("createSelfNetworkIpGatewayTip",{ip:"ipv4",example:"192.168.1.1"}),placeholder:"192.168.1.1"}),(0,e.jsx)(se.Z,{label:i.format("createSelfNetworkIpV6Enable"),name:"enableIpV6Address"})]}),(0,e.jsx)(w.Z,{name:["enableIpV6Address"],children:function(g){var s=g.enableIpV6Address;if(s)return(0,e.jsxs)(K.UW,{children:[(0,e.jsx)(h.Z,{label:i.format("createSelfNetworkIp",{ip:"ipv6"}),name:["ipV6","address"],width:"md",tooltip:i.format("createSelfNetworkIpTip",{ip:"ipv6",example:"2001:db8::5"}),placeholder:"2001:db8::5"}),(0,e.jsx)(w.Z,{name:["ipV6"],children:function(a){var d=a.ipV6;return(0,e.jsx)(h.Z,{label:i.format("createSelfNetworkIpSubnet",{ip:"ipv6"}),name:["ipV6","subnet"],width:"md",required:d&&d.address,tooltip:i.format("createSelfNetworkIpSubnetTip",{ip:"ipv6",example:"2001:db8::/48"}),placeholder:"2001:db8::/48",rules:[{required:d&&d.address}]})}}),(0,e.jsx)(h.Z,{label:i.format("createSelfNetworkIpGateway",{ip:"ipv6"}),name:["ipV6","gateway"],width:"md",tooltip:i.format("createSelfNetworkIpGatewayTip",{ip:"ipv6",example:"2001:db8::1"}),placeholder:"2001:db8::1"})]})}}),(0,e.jsx)(Re.Z,{label:i.format("createSelfNetworkDns"),name:"dns",placeholder:i.format("createSelfNetworkDnsTip")})]})}),nt=tt,Ze=t(31199),at=t(86250);function rt(){var o=new m.Uo("components.appForm");return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(E.Z,{title:o.format("createHookTitle"),headerBordered:!0,subTitle:"",children:(0,e.jsx)(Re.Z,{label:o.format("createHookContainerCreate"),name:["hook","containerCreate"],tooltip:o.format("createHookContainerCreateTip")})}),(0,e.jsxs)(E.Z,{title:o.format("createHookHealthyTitle"),headerBordered:!0,children:[(0,e.jsxs)(at.Z,{gap:20,justify:"start",children:[(0,e.jsx)(Ze.Z,{label:o.format("createHookHealthyInterval"),name:["healthcheck","interval"],initialValue:30,fieldProps:{addonAfter:m.FD.format("unitSecond")}}),(0,e.jsx)(Ze.Z,{label:o.format("createHookHealthyTimeout"),name:["healthcheck","timeout"],initialValue:10,fieldProps:{addonAfter:m.FD.format("unitSecond")}}),(0,e.jsx)(Ze.Z,{label:o.format("createHookHealthyRetries"),name:["healthcheck","retries"],initialValue:3}),(0,e.jsx)(Ie.Z,{width:"sm",label:o.format("createHookHealthyShellType"),initialValue:"CMD",name:["healthcheck","shellType"],options:o.option("createHookHealthyShellTypeOption",["CMD","CMD-SHELL"])})]}),(0,e.jsx)(Re.Z,{label:o.format("createHookHealthyCmd"),name:["healthcheck","cmd"],tooltip:o.format("createHookHealthyCmdTip")})]})]})}var ot=t(74763),Oe=t(2487),it=[{name:"ALL"},{name:"AUDIT_CONTROL"},{name:"AUDIT_WRITE",default:!0},{name:"BLOCK_SUSPEND"},{name:"CHOWN",default:!0},{name:"DAC_OVERRIDE",default:!0},{name:"DAC_READ_SEARCH"},{name:"FOWNER",default:!0},{name:"FSETID",default:!0},{name:"IPC_LOCK"},{name:"IPC_OWNER"},{name:"KILL",default:!0},{name:"LEASE"},{name:"LINUX_IMMUTABLE"},{name:"MAC_ADMIN"},{name:"MAC_OVERRIDE"},{name:"MKNOD",default:!0},{name:"NET_ADMIN"},{name:"NET_BIND_SERVICE",default:!0},{name:"NET_BROADCAST"},{name:"NET_RAW",default:!0},{name:"SETFCAP",default:!0},{name:"SETGID",default:!0},{name:"SETPCAP",default:!0},{name:"SETUID",default:!0},{name:"SYSLOG"},{name:"SYS_ADMIN"},{name:"SYS_BOOT"},{name:"SYS_CHROOT",default:!0},{name:"SYS_MODULE"},{name:"SYS_NICE"},{name:"SYS_PACCT"},{name:"SYS_PTRACE"},{name:"SYS_RAWIO"},{name:"SYS_RESOURCE"},{name:"SYS_TIME"},{name:"SYS_TTY_CONFIG"}],lt=(0,c.forwardRef)(function(o,b){var i=(0,c.useState)(null),k=y()(i,2),g=k[0],s=k[1],l=(0,c.useContext)(T.Z),a=l.createFormRef,d=new m.Uo("components.appForm");return(0,c.useImperativeHandle)(b,function(){return{}}),(0,e.jsx)(E.Z,{children:(0,e.jsx)(Oe.Z,{grid:{gutter:10,xs:3,sm:3,md:4,lg:4,xl:4,xxl:6},dataSource:it,renderItem:function(f,v){var u;return(0,e.jsx)(Oe.Z.Item,{children:(0,e.jsx)(se.Z,{fieldProps:{onChange:function(P){f.name=="ALL"&&s(P)}},disabled:f.name!="ALL"&&((0,ot.k)(g)?(u=a.current)===null||u===void 0?void 0:u.getFieldValue(["capAdd","ALL"]):g),initialValue:f.default,name:["capAdd",f.name],tooltip:d.format("createCap."+f.name.toLocaleLowerCase()),label:f.name})},v)}})})}),st=lt,dt=t(78099),ut=t(96074),we=t(28036),ct=t(83062),mt=t(18148),ft=t(64789),vt=t(85060),ke=t(78451),ht=t(99861),pt=t(80821),gt=t(1699),xt=t(80271),jt=t(47248);function Ct(o){var b=(0,c.useState)(!1),i=y()(b,2),k=i[0],g=i[1],s=(0,c.useContext)(T.Z),l=s.createFormRef,a=s.volumeListRef,d=s.createEnvRef,C=s.domainRef,f=new m.Uo("components.appForm");function v(j){return u.apply(this,arguments)}function u(){return u=D()(x()().mark(function j(P){var p,R,A,_,G,le,$,Z,N,r,z,n;return x()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(0,me.YU)({md5:P});case 2:return _=q.sent,o.redeploy||(Z=(G=l.current)===null||G===void 0?void 0:G.getFieldsValue(),(le=l.current)===null||le===void 0||le.resetFields(),($=l.current)===null||$===void 0||$.setFieldsValue({siteName:Z.siteName,siteTitle:Z.siteTitle,useBridgeNetwork:Z.useBridgeNetwork})),_.data.info.Config.Env&&_.data.info.Config.Env.map(function(S){var re,pe=S.split("=");(re=d.current)===null||re===void 0||re.addEnvItem(pe[0],pe.slice(1).join("="))}),(p=l.current)===null||p===void 0||p.setFieldValue("imageName",P),(R=l.current)===null||R===void 0||R.setFieldValue("workDir",_.data.info.Config.WorkingDir),(A=C.current)===null||A===void 0||A.setExposePort(_.data.info.Config.ExposedPorts),o.redeploy||(_.data.info.Config.Volumes?(z=[],Object.keys(_.data.info.Config.Volumes).map(function(S,re){z.push(S)}),(r=a.current)===null||r===void 0||r.setDefaultDestPath(z)):(n=a.current)===null||n===void 0||n.setDefaultDestPath([]),(N=l.current)===null||N===void 0||N.setFieldsValue({workDir:{value:"",useDefault:!0,default:_.data.info.Config.WorkingDir},user:{value:"",useDefault:!0,default:_.data.info.Config.User},command:{value:"",useDefault:!0,default:_.data.info.Config.Cmd&&_.data.info.Config.Cmd.join(" ")},entrypoint:{value:"",useDefault:!0,default:_.data.info.Config.Entrypoint&&_.data.info.Config.Entrypoint.join(" ")}})),q.abrupt("return",!0);case 10:case"end":return q.stop()}},j)})),u.apply(this,arguments)}return(0,c.useEffect)(function(){o.fromImageId&&v(o.fromImageId)},[o.fromImageId]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(je.Z,{destroyOnClose:!0,open:k,width:ae.R_,title:f.format("dockerImageTitle"),footer:!1,onClose:function(){g(!1)},children:(0,e.jsx)(dt.Z,{scroll:{x:"max-content"},columns:[{title:"Id",dataIndex:"Id",search:!1,width:80,render:function(P,p,R,A,_){return(0,e.jsx)(ke.Z,{content:p.Id.slice(7,19)})}},{title:m.FD.format("listImageName"),dataIndex:"tag",width:200,render:function(P,p,R,A){return(0,e.jsx)(ke.Z,{content:p.RepoTags[0]})}},{title:m.FD.format("listCreatedAt"),dataIndex:"Created",search:!1,width:100,render:function(P,p,R,A){return(0,e.jsx)("div",{children:(0,ie.ZM)(p.Created*1e3)},p.Id)},sorter:function(P,p){return P.Created-p.Created}},{title:m.FD.format("listManage"),valueType:"option",key:"option",width:50,render:function(P,p,R,A){return(0,e.jsx)(V.Z,{split:(0,e.jsx)(ut.Z,{type:"vertical"}),children:(0,e.jsx)(pt.Z,{icon:(0,e.jsx)(ft.Z,{}),tips:m.FD.format("listManageUse"),action:function(){return v(p.RepoTags[0])},type:"link",onSuccess:function(){g(!1)}},"addImage")})}}],request:function(){var j=D()(x()().mark(function P(p,R,A){var _,G,le;return x()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return o.redeploy,Z.next=3,(0,mt.KG)({tag:p.tag});case 3:return _=Z.sent,G=0,le=[],_.data.list&&(le=_.data.list.flatMap(function(N){return N.RepoTags.map(function(r){return{Key:G++,Id:N.Id,Created:N.Created,RepoTags:[r]}})})),Z.abrupt("return",{data:le,success:!0,total:le.length});case 8:case"end":return Z.stop()}},P)}));return function(P,p,R){return j.apply(this,arguments)}}(),rowKey:"Key",pagination:{pageSize:8}})},"imageTableList"),(0,e.jsxs)(V.Z.Compact,{children:[(0,e.jsx)(h.Z,{width:"lg",label:f.format("dockerImageImageName"),name:"imageName",disabled:!0,placeholder:f.format("dockerImageImageNameEmpty"),rules:[{required:!0}],required:!0}),(0,e.jsx)(X.Z,{label:" ",children:(0,e.jsx)(we.ZP,{type:"primary",onClick:function(){return g(!0)},children:f.format("dockerImageTitle")},"showBtn")}),(0,e.jsx)(w.Z,{name:["imageName"],children:function(P){var p=P.imageName;if(p)return(0,e.jsx)(X.Z,{label:" ",children:(0,e.jsx)(ht.Z,{finishAutoHide:!0,image:p?[p]:[],trigger:(0,e.jsx)(ct.Z,{title:f.format("dockerImageUpgradeImageTip"),children:(0,e.jsx)(we.ZP,{icon:(0,e.jsx)(vt.Z,{}),children:f.format("dockerImageUpgradeImageButton")})})})})}}),(0,e.jsx)(X.Z,{label:" ",children:(0,e.jsx)(jt.Z,{onFinish:function(P){v(P)}},"remote")}),(0,e.jsx)(X.Z,{label:" ",children:(0,e.jsx)(w.Z,{name:["imageName"],children:function(P){var p=P.imageName;if(p)return(0,e.jsx)(gt.u,{access:"canSeeEnableCe",showProTips:!0,children:function(A){var _=A.canSeeEnableCe;return(0,e.jsx)(xt.Z,{imageId:p,trigger:(0,e.jsx)(we.ZP,{disabled:_,children:f.format("dockerImageFileExplorer")})})}})}})})]})]})}function It(){var o,b=(0,c.useContext)(Ne.Z),i=b.loading,k=b.notice,g=(0,c.useContext)(T.Z),s=g.createFormRef,l=g.volumeListRef,a=g.domainRef,d=g.createEnvRef,C=g.createLinkRef,f=(0,Me.useSearchParams)(),v=y()(f,2),u=v[0],j=v[1],P=(0,Me.useNavigate)(),p=(0,c.useState)("basic"),R=y()(p,2),A=R[0],_=R[1],G=u.get("id"),le=(o=u.get("imageId"))!==null&&o!==void 0?o:"",$=new m.Uo("app");return(0,c.useEffect)(function(){if(G)i.show(),(0,Se.iE)({id:G}).then(function(){var r=D()(x()().mark(function z(n){var fe,q,S,re,pe,de,ge,Te;return x()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(S={info:{}},!n.data.env.imageName){ue.next=11;break}return ue.prev=2,ue.next=5,(0,me.YU)({md5:n.data.env.imageName});case 5:re=ue.sent,S=re.data,ue.next=11;break;case 9:ue.prev=9,ue.t0=ue.catch(2);case 11:n.data.env.ports&&n.data.env.ports.map(function(H){return H.host=="0"&&(H.host=""),H}),pe=n.data.env.bindIpV6,n.data.containerInfo&&n.data.containerInfo.Info.NetworkSettings&&n.data.containerInfo.Info.NetworkSettings.Networks&&Object.keys(n.data.containerInfo.Info.NetworkSettings.Networks).map(function(H){if(n.data.env.network&&(n.data.env.network=n.data.env.network.map(function(be){return H==be.name&&n.data.containerInfo&&(be.subnet=n.data.containerInfo.Info.NetworkSettings.Networks[H].IPAddress+"/"+n.data.containerInfo.Info.NetworkSettings.Networks[H].IPPrefixLen),be})),n.data.containerInfo&&n.data.containerInfo.Info.NetworkSettings.Networks[H].IPv6Gateway!=""&&H==n.data.siteName&&(pe=!0),H=="bridge"){var xe;(xe=s.current)===null||xe===void 0||xe.setFieldValue("useBridgeNetwork",!0)}}),n.data.env.extraHosts&&n.data.env.extraHosts.map(function(H){if(H.value=="host-gateway"){var xe;(xe=s.current)===null||xe===void 0||xe.setFieldValue("enableBindHost",!0)}}),de=n.data.env.ports,n.data.env.ports&&(de=n.data.env.ports.map(function(H){return H.host=H.host!=""?(H.hostIp?H.hostIp+":":"")+H.host:"",H})),(fe=s.current)===null||fe===void 0||fe.setFieldsValue({siteTitle:n.data.siteTitle,siteName:n.data.siteName,imageName:n.data.env.imageName,privileged:n.data.env.privileged,bindIpV6:n.data.env.useHostNetwork?!1:pe,useHostNetwork:n.data.env.useHostNetwork,publishAllPorts:n.data.env.useHostNetwork?!1:n.data.env.publishAllPorts,workDir:{value:n.data.env.workDir,useDefault:!n.data.env.workDir,default:S&&S.info.Config&&S.info.Config.WorkingDir},user:{value:n.data.env.user,useDefault:!n.data.env.user,default:S&&S.info.Config&&S.info.Config.User},command:{value:n.data.env.command,useDefault:!n.data.env.command,default:S&&S.info.Config&&S.info.Config.Cmd&&S.info.Config.Cmd.join(" ")},entrypoint:{value:n.data.env.entrypoint,useDefault:!n.data.env.entrypoint,default:S&&S.info.Config&&S.info.Config.Entrypoint&&S.info.Config.Entrypoint.join(" ")},shmsize:(q=n.data.env.shmsize)!==null&&q!==void 0?q:"64M",cpus:n.data.env.cpus,memory:n.data.env.memory,environment:n.data.env.environment,label:n.data.env.label,volumes:n.data.env.volumes,ports:de,links:n.data.env.links,network:n.data.env.network,restart:n.data.env.restart,extraHosts:n.data.env.extraHosts,autoRemove:n.data.env.autoRemove,log:n.data.env.log,dns:n.data.env.dns&&n.data.env.dns.join(`
`),ipV4:n.data.env.ipV4,ipV6:n.data.env.ipV6,gpus:n.data.env.gpus,device:n.data.env.device,hook:n.data.env.hook,hostPid:n.data.env.hostPid,capAdd:n.data.env.capAdd&&Object.fromEntries(n.data.env.capAdd.map(function(H){return[H,!0]}))}),n.data.env.ipV6&&((ge=s.current)===null||ge===void 0||ge.setFieldValue("enableIpV6Address",!0)),n.data.env.healthcheck&&n.data.env.healthcheck.cmd&&n.data.env.healthcheck.cmd!=""&&((Te=s.current)===null||Te===void 0||Te.setFieldsValue({healthcheck:n.data.env.healthcheck}));case 20:case"end":return ue.stop()}},z,null,[[2,9]])}));return function(z){return r.apply(this,arguments)}}()).finally(function(){i.destroy()});else{var Z,N;(Z=s.current)===null||Z===void 0||Z.resetFields(),(N=s.current)===null||N===void 0||N.setFieldValue("useBridgeNetwork",!0)}},[u]),(0,e.jsx)(L._z,{children:(0,e.jsx)(E.Z,{direction:"column",gutter:[0,10],children:(0,e.jsxs)(ee.A,{submitter:{render:function(N,r){return(0,e.jsx)(Y.S,{children:r})}},formRef:s,onFinish:function(){var Z=D()(x()().mark(function N(r){var z,n,fe,q,S,re;return x()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(re={siteTitle:r.siteTitle,siteName:r.siteName,hostname:r.hostname,imageName:r.imageName,environment:r.environment,links:r.links,ports:r.ports,volumes:r.volumes,network:(z=r.network)!==null&&z!==void 0?z:[],privileged:(n=r.privileged)!==null&&n!==void 0?n:!1,autoRemove:(fe=r.autoRemove)!==null&&fe!==void 0?fe:!1,restart:r.restart,cpus:r.cpus,memory:r.memory,shmsize:(q=r.shmsize)!==null&&q!==void 0?q:0,workDir:r.workDir&&!r.workDir.useDefault?r.workDir.value:"",user:r.user&&!r.user.useDefault?r.user.value:"",command:r.command&&!r.command.useDefault?r.command.value:"",entrypoint:r.entrypoint&&!r.entrypoint.useDefault?r.entrypoint.value:"",useHostNetwork:r.useHostNetwork,bindIpV6:r.bindIpV6,log:r.log,dns:r.dns&&r.dns!=""?r.dns.split(`
`):[],label:r.label,publishAllPorts:r.publishAllPorts,extraHosts:r.extraHosts,ipV4:r.ipV4,ipV6:r.ipV6,device:r.device,gpus:r.gpus,hook:r.hook,hostPid:r.hostPid,capAdd:r.capAdd?Object.keys(r.capAdd).map(function(ge){return ge}):[],useBridgeNetwork:(S=r.useBridgeNetwork)!==null&&S!==void 0?S:!0},!(!r.useBridgeNetwork&&!r.useHostNetwork&&(!r.network||r.network.length==0))){de.next=4;break}return k.error($.format("createMessageNoBridgeNetworkMustHasUseNetwork")),de.abrupt("return",!1);case 4:return r.useBridgeNetwork&&!re.network.find(function(ge){return ge.name=="bridge"})&&re.network.push({name:"bridge",alise:[],ipV4:""}),r.healthcheck&&r.healthcheck.cmd&&r.healthcheck.cmd!=""&&(re.healthcheck=r.healthcheck),G&&(re.containerId=G),de.next=9,(0,Se.$G)(re);case 9:return P("/app/list",{state:{page:localStorage.getItem("dpanel-page-app-list")}}),de.abrupt("return",!0);case 11:case"end":return de.stop()}},N)}));return function(N){return Z.apply(this,arguments)}}(),children:[(0,e.jsxs)(E.Z,{title:$.format("createTitle"),headerBordered:!0,children:[(0,e.jsx)(h.Z,{name:"siteTitle",label:$.format("createSiteTitle"),fieldProps:{onChange:function(N){var r="";if(N.target.value&&!G){var z,n=(0,ze.N9)(N.target.value.trim(),{toneType:"none",type:"array"});r=n.join(""),(z=s.current)===null||z===void 0||z.setFieldValue("siteName",r)}}},placeholder:$.format("createSiteTitleEmpty")}),(0,e.jsxs)(K.UW,{children:[(0,e.jsx)(h.Z,{width:"lg",name:"siteName",label:$.format("createSiteName"),required:!0,rules:[{required:!0}],placeholder:$.format("createSiteNameEmpty"),disabled:!!G}),(0,e.jsx)(h.Z,{label:"Hostname",name:"hostname",width:"md"})]}),(0,e.jsx)(Ct,{redeploy:!!G,fromImageId:le})]}),(0,e.jsx)(M.Z,{offsetTop:50,children:(0,e.jsx)(E.Z,{style:{marginBottom:-20},children:(0,e.jsx)(te.Z,{activeKey:A,onChange:function(N){_(N),window.scrollTo(0,450)},items:$.option("createTabOption",["basic","link","run-command","resource","hook","cap","other"]).map(function(Z){return{label:Z.label,key:Z.value}})})})}),(0,e.jsxs)(he.Z,{show:A=="basic",children:[(0,e.jsx)(qe,{ref:a,showBindHost:!0,showBindIpV6:!0}),(0,e.jsx)(Ae.Z,{showAddButton:!0,showImportButton:!0,showCodeMode:!0,label:$.format("createEnvTitle"),ref:d}),(0,e.jsx)(Le,{showDefault:!0,ref:l}),(0,e.jsx)(w.Z,{name:["siteName","useHostNetwork"],children:function(N){var r=N.siteName,z=N.useHostNetwork;if(!z)return(0,e.jsx)(nt,{})}})]}),(0,e.jsx)(he.Z,{show:A=="link",children:(0,e.jsx)(w.Z,{name:["siteName","useHostNetwork"],children:function(N){var r=N.siteName,z=N.useHostNetwork;return z?(0,e.jsx)(I.Z,{showIcon:!0,description:$.format("createNetworkDesc")}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ve,{onAddEnv:function(fe,q){var S;(S=d.current)===null||S===void 0||S.addEnvItem(fe,q)},ref:C}),(0,e.jsx)(Je,{showUseBridgeNetwork:!0,siteName:r}),(0,e.jsx)(et,{})]})}})}),(0,e.jsx)(he.Z,{show:A=="run-command",children:(0,e.jsx)($e,{})}),(0,e.jsx)(he.Z,{show:A=="resource",children:(0,e.jsx)(Ve,{})}),(0,e.jsx)(he.Z,{show:A=="hook",children:(0,e.jsx)(rt,{})}),(0,e.jsx)(he.Z,{show:A=="other",children:(0,e.jsx)(He,{})}),(0,e.jsx)(he.Z,{show:A=="cap",children:(0,e.jsx)(st,{})})]},"form")})})}},2831:function(ce,U,t){t.d(U,{Ll:function(){return Y},aF:function(){return y},d6:function(){return K},u5:function(){return E}});var O=t(15009),x=t.n(O),W=t(99289),D=t.n(W),B=t(82346);function y(){return L.apply(this,arguments)}function L(){return L=D()(x()().mark(function M(){return x()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,(0,B.request)("/api/common/home/info",{method:"POST"});case 2:return I.abrupt("return",I.sent);case 3:case"end":return I.stop()}},M)})),L.apply(this,arguments)}function E(){return ee.apply(this,arguments)}function ee(){return ee=D()(x()().mark(function M(){return x()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,(0,B.request)("/api/common/home/check-new-version",{method:"POST"});case 2:return I.abrupt("return",I.sent);case 3:case"end":return I.stop()}},M)})),ee.apply(this,arguments)}function Y(){return h.apply(this,arguments)}function h(){return h=D()(x()().mark(function M(){return x()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,(0,B.request)("/api/common/home/usage",{method:"POST"});case 2:return I.abrupt("return",I.sent);case 3:case"end":return I.stop()}},M)})),h.apply(this,arguments)}function K(){return w.apply(this,arguments)}function w(){return w=D()(x()().mark(function M(){return x()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,(0,B.request)("/api/common/home/upgrade-script",{method:"POST"});case 2:return I.abrupt("return",I.sent);case 3:case"end":return I.stop()}},M)})),w.apply(this,arguments)}}}]);
