(self.webpackChunk=self.webpackChunk||[]).push([[8022],{23430:function(B,C,n){"use strict";n.d(C,{Z:function(){return h}});var E=n(87462),i=n(67294),p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},m=p,d=n(84089),O=function(s,u){return i.createElement(d.Z,(0,E.Z)({},s,{ref:u,icon:m}))},j=i.forwardRef(O),h=j},80821:function(B,C,n){"use strict";n.d(C,{Z:function(){return g}});var E=n(5574),i=n.n(E),p=n(24963),m=n(86738),d=n(28036),O=n(83062),j=n(67294),h=n(85893);function g(s){var u=(0,j.useState)(!1),r=i()(u,2),v=r[0],a=r[1],c=(0,j.useContext)(p.Z),M=c.lang,x=c.notice,P=c.message,w=function(){a(!0);var y=s.action();y instanceof Promise?y.then(function(Z){if(a(!1),Z){typeof s.onSuccess=="function"&&s.onSuccess(Z);var T="";s.messageSuccess?typeof s.messageSuccess=="function"?T=s.messageSuccess(Z):T=s.messageSuccess.indexOf("notification.")==0?M(s.messageSuccess):s.messageSuccess:T=M("notification.finish"),s.asynced?P.info(T):P.success(T)}}).catch(function(Z){a(!1),typeof s.onError=="function"&&s.onError(Z)}):a(!1)};return s.confirm?(0,h.jsx)(m.Z,{style:{width:500},title:s.confirmTitle?s.confirmTitle:M("notification.title.tip"),description:typeof s.confirm=="string"&&s.confirm.indexOf("notification.")==0?M(s.confirm):s.confirm,onConfirm:w,okText:"Yes",cancelText:"No",children:(0,h.jsx)(d.ZP,{disabled:s.disabled,icon:s.icon,loading:v,danger:s.danger,type:s.type,children:s.children})}):(0,h.jsx)(O.Z,{title:s.tips,children:(0,h.jsx)(d.ZP,{style:s.ghost?{padding:0,height:"auto"}:{},disabled:s.disabled,icon:s.icon,loading:v,onClick:w,danger:s.danger,type:s.type,children:s.children})})}},94359:function(B,C,n){"use strict";n.d(C,{Z:function(){return v}});var E=n(67294),i=n(3089),p=n(98165),m=n(18429),d=n(8751),O=n(14313),j=n(30159),h=n(87740),g=n(66309),s=n(83062),u=n(82346),r=n(85893);function v(a){var c=(0,r.jsx)(r.Fragment,{});if(a.status=="0"&&(c=(0,r.jsx)(g.Z,{icon:(0,r.jsx)(i.Z,{}),color:"default",children:"waiting"})),a.status=="10"&&(c=(0,r.jsx)(g.Z,{icon:(0,r.jsx)(p.Z,{spin:!0}),color:"processing",children:"processing"})),a.status=="20"&&(c=(0,r.jsx)(g.Z,{icon:(0,r.jsx)(m.Z,{}),color:"error",children:"error"})),a.status=="30"&&(c=(0,r.jsx)(g.Z,{icon:(0,r.jsx)(d.Z,{}),color:"success",children:"success"})),a.status=="running"||a.status=="healthy"){var M,x;c=(0,r.jsx)(g.Z,{icon:(0,r.jsx)(O.Z,{}),color:"success",children:(M=a.message)!==null&&M!==void 0&&M.showInTag?(x=a.message)===null||x===void 0?void 0:x.content:a.status})}if(a.status=="paused"){var P,w;c=(0,r.jsx)(g.Z,{icon:(0,r.jsx)(j.Z,{}),children:(P=a.message)!==null&&P!==void 0&&P.showInTag?(w=a.message)===null||w===void 0?void 0:w.content:a.status})}if(a.status=="waiting"||a.status=="starting"){var U,y;c=(0,r.jsx)(g.Z,{icon:(0,r.jsx)(h.Z,{}),children:(U=a.message)!==null&&U!==void 0&&U.showInTag?(y=a.message)===null||y===void 0?void 0:y.content:a.status})}if(a.status=="exited"||a.status=="dead"||a.status=="removing"||a.status=="restarting"||a.status=="unhealthy"||a.status=="created"){var Z,T;c=(0,r.jsx)(g.Z,{icon:(0,r.jsx)(m.Z,{}),color:"warning",children:(Z=a.message)!==null&&Z!==void 0&&Z.showInTag?(T=a.message)===null||T===void 0?void 0:T.content:a.status})}if(a.link&&(c=(0,r.jsx)(u.Link,{to:a.link,children:c})),a.message){var D;c=(0,r.jsx)(s.Z,{placement:(D=a.message.placement)!==null&&D!==void 0?D:"top",title:a.message.content,children:c})}return(0,r.jsx)(r.Fragment,{children:c})}},24963:function(B,C,n){"use strict";var E=n(67294),i=(0,E.createContext)({});C.Z=i},96781:function(B,C,n){"use strict";var E=n(67294),i=(0,E.createContext)({});C.Z=i},83536:function(B,C,n){"use strict";n.r(C),n.d(C,{default:function(){return F}});var E=n(15009),i=n.n(E),p=n(99289),m=n.n(p),d=n(80821),O=n(90098),j=n(43425),h=n(86548),g=n(23430),s=n(90078),u=n(10641),r=n(82346),v=n(28036),a=n(25593),c=n(42075),M=n(96074),x=n(83062),P=n(67294),w=n(96781),U=n(94359),y=n(67255),Z=n(93162),T=n(24963),D=n(66309),l=n(85893);function H(A){var b=(0,r.useIntl)(),K=(0,P.useContext)(T.Z),R=K.lang,L;if(!A.type)L=(0,l.jsx)(D.Z,{children:R("compose.type.default")});else switch(A.type){case"remoteUrl":L=(0,l.jsx)(D.Z,{color:"cyan",children:R("compose.type.".concat(A.type))});break;case"serverPath":L=(0,l.jsx)(D.Z,{color:"blue",children:R("compose.type.".concat(A.type))});break;case"storagePath":L=(0,l.jsx)(D.Z,{color:"geekblue",children:R("compose.type.".concat(A.type))});break;case"outPath":L=(0,l.jsx)(D.Z,{color:"yellow",children:R("compose.type.".concat(A.type))});break;case"store":L=(0,l.jsx)(D.Z,{color:"green",children:R("compose.type.".concat(A.type))});break;case"dangling":L=(0,l.jsx)(D.Z,{color:"error",children:R("compose.type.".concat(A.type))});break;default:L=(0,l.jsx)(D.Z,{children:R("compose.type.".concat(A.type))})}return(0,l.jsx)(x.Z,{title:A.tootip,children:L})}function F(){var A=(0,P.useContext)(w.Z),b=A.listTableRef,K=(0,P.useContext)(T.Z),R=K.lang,L=K.notice;return(0,l.jsx)(s._z,{header:{extra:[(0,l.jsx)(r.Link,{to:"/compose/create",reloadDocument:location.search.length>0,children:(0,l.jsx)(v.ZP,{type:"primary",children:"\u521B\u5EFA\u4EFB\u52A1"},"createCompose")},"create")]},children:(0,l.jsx)(u.Z,{scroll:{x:"max-content"},request:function(){var S=m()(i()().mark(function o(t){var f;return i()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,O.pm)({title:t.title,name:t.name});case 2:return f=_.sent,_.abrupt("return",{data:f.data.list,success:!0,total:f.data.list.length});case 4:case"end":return _.stop()}},o)}));return function(o){return S.apply(this,arguments)}}(),rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name",width:200,render:function(o,t,f,e,_){return t.setting.type=="dangling"?(0,l.jsx)(a.Z.Link,{onClick:function(){L.info("\u65E0\u6CD5\u627E\u5230\u8BE5\u4EFB\u52A1\u7684 compose.yaml \u6587\u4EF6\uFF0C\u8BF7\u6302\u8F7D\u76F8\u5E94\u7684 compose \u6587\u4EF6\u6216\u662F\u5728\u9762\u677F\u7684 compose \u76EE\u5F55\u6DFB\u52A0\u540C\u6807\u8BC6\u7684\u4EFB\u52A1\u76EE\u5F55\u53CA compose.yaml \u6587\u4EF6")},children:t.name}):(0,l.jsx)(r.Link,{to:"/compose/deploy/"+(t.id||t.name),children:t.name},f)},sorter:function(o,t){return o.name.localeCompare(t.name)},sortDirections:["descend","ascend"]},{title:"\u9879\u76EE\u540D\u79F0",dataIndex:"title",width:200},{title:"\u7C7B\u578B",width:150,search:!1,render:function(o,t,f,e,_){var I;return(0,l.jsx)(H,{tootip:(I=t.setting.uri)!==null&&I!==void 0?I:"",type:t.setting&&t.setting.type?t.setting.type:""})}},{title:"\u5BB9\u5668\u72B6\u6001",dataIndex:"status",search:!1,width:300,render:function(o,t,f,e,_){return(0,l.jsx)(c.Z,{children:t.setting.status.split(", ").map(function(I,z){var W="running",G=I.indexOf("(");return G>-1?W=I.slice(0,G):W=I,(0,l.jsx)(U.Z,{status:W,message:{content:R("compose.status.".concat(W),{count:I.slice(G+1,I.length-1)}),placement:"top",showInTag:!0}},z)})})}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"",search:!1,width:150,render:function(o,t,f,e,_){return t.setting.createdAt?new Date(t.setting.createdAt).toLocaleString():"-"}},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"",search:!1,width:150,render:function(o,t,f,e,_){return t.setting.updatedAt?new Date(t.setting.updatedAt).toLocaleString():"-"}},{title:"\u64CD\u4F5C",width:80,valueType:"option",fixed:"right",key:"option",render:function(o,t,f,e,_){return t.setting.type!="dangling"&&(0,l.jsxs)(c.Z,{split:(0,l.jsx)(M.Z,{type:"vertical"}),children:[(0,l.jsx)(r.Link,{to:"/compose/deploy/"+(t.id||t.name),children:(0,l.jsx)(x.Z,{title:"\u90E8\u7F72",children:(0,l.jsx)(j.Z,{})})},"3"),(0,l.jsx)(r.Link,{to:"/compose/create?id="+(t.id||t.name),children:(0,l.jsx)(x.Z,{title:"\u7F16\u8F91",children:(0,l.jsx)(h.Z,{})})},"4"),(0,l.jsx)(a.Z.Link,{onClick:m()(i()().mark(function I(){var z,W;return i()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,O.tw)({id:t.id||t.name});case 2:z=k.sent,W=new Blob([z],{type:"application/zip"}),(0,Z.saveAs)(W,"compose-"+t.name+".zip");case 5:case"end":return k.stop()}},I)})),children:(0,l.jsx)(x.Z,{title:"\u4E0B\u8F7D",children:(0,l.jsx)(g.Z,{})})},"2")]})}}],rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0,getCheckboxProps:function(o){return{disabled:o.setting.type=="dangling"||o.setting.type=="outPath"}}},tableAlertOptionRender:function(o){var t=o.selectedRows;return(0,l.jsx)(c.Z,{size:16,children:(0,l.jsx)(d.Z,{danger:!0,type:"primary",action:function(){return(0,O.ik)({id:t.map(function(e){return e.id})})},onSuccess:function(){var e,_;return!((e=b.current)===null||e===void 0)&&e.reloadAndRest&&((_=b.current)===null||_===void 0||_.reloadAndRest()),!0},onError:function(){var e,_;return!((e=b.current)===null||e===void 0)&&e.reset&&((_=b.current)===null||_===void 0||_.reset()),!0},confirm:"notification.confirm.title",children:"\u6279\u91CF\u5220\u9664"})})},pagination:(0,y.O)(),search:{collapsed:!1},actionRef:b,columnsState:(0,y.j)("compose-list")})})}},90098:function(B,C,n){"use strict";n.d(C,{CT:function(){return r},GG:function(){return U},MG:function(){return H},Oh:function(){return M},Pn:function(){return s},U_:function(){return D},VN:function(){return Z},iE:function(){return K},ik:function(){return a},im:function(){return O},mg:function(){return P},pm:function(){return h},tw:function(){return L},xC:function(){return A}});var E=n(15009),i=n.n(E),p=n(99289),m=n.n(p),d=n(82346);function O(o){return j.apply(this,arguments)}function j(){return j=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/app/compose/create",{method:"POST",data:t}));case 1:case"end":return e.stop()}},o)})),j.apply(this,arguments)}function h(o){return g.apply(this,arguments)}function g(){return g=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/app/compose/get-list",{method:"POST",data:t}));case 1:case"end":return e.stop()}},o)})),g.apply(this,arguments)}function s(o){return u.apply(this,arguments)}function u(){return u=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.id=String(t.id),e.abrupt("return",(0,d.request)("/api/app/compose/get-task",{method:"POST",data:t}));case 2:case"end":return e.stop()}},o)})),u.apply(this,arguments)}function r(o){return v.apply(this,arguments)}function v(){return v=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.id=String(t.id),e.abrupt("return",(0,d.request)("/api/app/compose/get-detail",{method:"POST",data:t}));case 2:case"end":return e.stop()}},o)})),v.apply(this,arguments)}function a(o){return c.apply(this,arguments)}function c(){return c=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/app/compose/delete",{method:"POST",data:t}));case 1:case"end":return e.stop()}},o)})),c.apply(this,arguments)}function M(o){return x.apply(this,arguments)}function x(){return x=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.id=String(t.id),e.abrupt("return",(0,d.request)("/api/app/compose/container-deploy",{method:"POST",data:t}));case 2:case"end":return e.stop()}},o)})),x.apply(this,arguments)}function P(o){return w.apply(this,arguments)}function w(){return w=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.id=String(t.id),e.abrupt("return",(0,d.request)("/api/app/compose/container-destroy",{method:"POST",data:t}));case 2:case"end":return e.stop()}},o)})),w.apply(this,arguments)}function U(o){return y.apply(this,arguments)}function y(){return y=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.id=String(t.id),e.abrupt("return",(0,d.request)("/api/app/compose/container-ctrl",{method:"POST",data:t}));case 2:case"end":return e.stop()}},o)})),y.apply(this,arguments)}function Z(o){return T.apply(this,arguments)}function T(){return T=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.id=String(t.id),e.abrupt("return",(0,d.request)("/api/app/compose/container-log",{method:"POST",data:t}));case 2:case"end":return e.stop()}},o)})),T.apply(this,arguments)}function D(o){return l.apply(this,arguments)}function l(){return l=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/app/compose/container-process-kill",{method:"POST",data:t}));case 1:case"end":return e.stop()}},o)})),l.apply(this,arguments)}function H(o){return F.apply(this,arguments)}function F(){return F=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/app/compose/get-from-uri",{method:"POST",data:t}));case 1:case"end":return e.stop()}},o)})),F.apply(this,arguments)}function A(o){return b.apply(this,arguments)}function b(){return b=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/app/compose/parse",{method:"POST",data:t}));case 1:case"end":return e.stop()}},o)})),b.apply(this,arguments)}function K(o){return R.apply(this,arguments)}function R(){return R=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/common/store/deploy",{method:"POST",data:t}));case 1:case"end":return e.stop()}},o)})),R.apply(this,arguments)}function L(o){return S.apply(this,arguments)}function S(){return S=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.id=String(t.id),e.abrupt("return",(0,d.request)("/api/app/compose/download",{method:"POST",data:t,responseType:"blob"}));case 2:case"end":return e.stop()}},o)})),S.apply(this,arguments)}},67255:function(B,C,n){"use strict";n.d(C,{O:function(){return E},j:function(){return i}});function E(){var p=localStorage.getItem("dpanel-pagesize");return p=="all"?!1:{showSizeChanger:!0,defaultPageSize:parseInt(p!=null?p:"20")}}function i(p){var m="dpanel-table-column-".concat(p),d={};if(localStorage.getItem(m)){var O;d=JSON.parse((O=localStorage.getItem(m))!==null&&O!==void 0?O:"{}")}return{defaultValue:d,onChange:function(h){localStorage.setItem("dpanel-table-column-".concat(p),JSON.stringify(h))}}}},93162:function(B,C,n){var E,i,p;(function(m,d){i=[],E=d,p=typeof E=="function"?E.apply(C,i):E,p!==void 0&&(B.exports=p)})(this,function(){"use strict";function m(u,r){return typeof r=="undefined"?r={autoBom:!1}:typeof r!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function d(u,r,v){var a=new XMLHttpRequest;a.open("GET",u),a.responseType="blob",a.onload=function(){s(a.response,r,v)},a.onerror=function(){console.error("could not download file")},a.send()}function O(u){var r=new XMLHttpRequest;r.open("HEAD",u,!1);try{r.send()}catch(v){}return 200<=r.status&&299>=r.status}function j(u){try{u.dispatchEvent(new MouseEvent("click"))}catch(v){var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(r)}}var h=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof n.g=="object"&&n.g.global===n.g?n.g:void 0,g=h.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=h.saveAs||(typeof window!="object"||window!==h?function(){}:"download"in HTMLAnchorElement.prototype&&!g?function(u,r,v){var a=h.URL||h.webkitURL,c=document.createElement("a");r=r||u.name||"download",c.download=r,c.rel="noopener",typeof u=="string"?(c.href=u,c.origin===location.origin?j(c):O(c.href)?d(u,r,v):j(c,c.target="_blank")):(c.href=a.createObjectURL(u),setTimeout(function(){a.revokeObjectURL(c.href)},4e4),setTimeout(function(){j(c)},0))}:"msSaveOrOpenBlob"in navigator?function(u,r,v){if(r=r||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(m(u,v),r);else if(O(u))d(u,r,v);else{var a=document.createElement("a");a.href=u,a.target="_blank",setTimeout(function(){j(a)})}}:function(u,r,v,a){if(a=a||open("","_blank"),a&&(a.document.title=a.document.body.innerText="downloading..."),typeof u=="string")return d(u,r,v);var c=u.type==="application/octet-stream",M=/constructor/i.test(h.HTMLElement)||h.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||c&&M||g)&&typeof FileReader!="undefined"){var P=new FileReader;P.onloadend=function(){var y=P.result;y=x?y:y.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=y:location=y,a=null},P.readAsDataURL(u)}else{var w=h.URL||h.webkitURL,U=w.createObjectURL(u);a?a.location=U:location.href=U,a=null,setTimeout(function(){w.revokeObjectURL(U)},4e4)}});h.saveAs=s.saveAs=s,B.exports=s})}}]);
