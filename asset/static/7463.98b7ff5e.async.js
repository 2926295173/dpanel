"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7463],{8287:function(Le,xe,n){var Pe=n(5574),E=n.n(Pe),De=n(15009),a=n.n(De),ee=n(99289),M=n.n(ee),r=n(13822),Y=n(83622),B=n(85265),W=n(42075),y=n(83062),C=n(67294),ne=n(81146),b=n(1883),O=n(58638),ce=n(62597),i=n(3616),_=n(82346),g=n(36146),ae=n(85893),p=(0,C.forwardRef)(function(Me,Ue){(0,C.useImperativeHandle)(Ue,function(){return{show:function(te){return M()(a()().mark(function T(){var se;return a()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,(0,r.jV)({md5:te});case 2:se=X.sent,se.data&&Fe(se.data.info),ge(!0);case 5:case"end":return X.stop()}},T)}))()}}});var s=(0,C.useState)(!1),e=E()(s,2),he=e[0],ge=e[1],Te=(0,C.useState)(),I=E()(Te,2),J=I[0],Fe=I[1],L=(0,C.useRef)(),pe=new g.Uo("components.appDetail");return(0,ae.jsxs)(ae.Fragment,{children:[Me.showTriggerButton&&(0,ae.jsx)(Y.ZP,{icon:(0,ae.jsx)(b.Z,{}),onClick:M()(a()().mark(function me(){return a()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:Fe(Me.containerInfo),ge(!0);case 2:case"end":return T.stop()}},me)})),children:g.FD.format("listManageLog")},"log"),(0,ae.jsx)(B.Z,{title:pe.format("titleLog"),open:he,forceRender:!0,onClose:function(){ge(!1)},afterOpenChange:function(te){if(te)setTimeout(function(){var se,re;(se=L.current)===null||se===void 0||se.start(),(re=L.current)===null||re===void 0||re.fit()},1e3);else{var T;(T=L.current)===null||T===void 0||T.close()}},width:i.FK,extra:(0,ae.jsx)(W.Z,{children:(0,ae.jsx)(_.Link,{to:"/container/log/".concat(J==null?void 0:J.Name),target:"_blank",onClick:function(){var te;(te=L.current)===null||te===void 0||te.close(),ge(!1)},children:(0,ae.jsx)(y.Z,{title:g.FD.format("listManageOpenNewWindow"),children:(0,ae.jsx)(O.Z,{})})})}),children:J&&he&&(0,ae.jsx)(ne.Z,{ref:L,showInDrawer:!0,id:"container:log:".concat(J==null?void 0:J.Id),request:function(){var me=M()(a()().mark(function te(T){var se;return a()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,(0,ce.Tb)({id:(se=J.Id)!==null&&se!==void 0?se:"",lineTotal:T.lineTotal,download:T.download,showTime:T.showTime});case 2:case"end":return X.stop()}},te)}));return function(te){return me.apply(this,arguments)}}(),download:function(){var me=M()(a()().mark(function te(T){var se,re,X,ye;return a()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,ce.XH)({id:(se=J.Id)!==null&&se!==void 0?se:"",lineTotal:T.lineTotal,showTime:T.showTime});case 2:return X=$.sent,$.next=5,(0,r.jV)({md5:(re=J.Id)!==null&&re!==void 0?re:""});case 5:return ye=$.sent,$.abrupt("return",{data:new Blob([X],{type:"text/plain"}),name:ye.data.info.Name.replaceAll("/","")+"_"+new Date().toLocaleDateString()+".log"});case 7:case"end":return $.stop()}},te)}));return function(te){return me.apply(this,arguments)}}()})})]})});xe.Z=p},47463:function(Le,xe,n){n.d(xe,{Z:function(){return tt}});var Pe=n(5574),E=n.n(Pe),De=n(15009),a=n.n(De),ee=n(99289),M=n.n(ee),r=n(67294),Y=n(45605),B=n(38345),W=n(97269),y=n(26412),C=n(42075),ne=n(96074),b=n(25593),O=n(2487),ce=n(76428),i=n(44771),_=n(13822),g=n(24963),ae=n(37413),p=n(5251),Me=n(82346),Ue=n(87662),s=n(36146),e=n(85893);function he(t){var U,o,v,x,w,D,l,P,f,R,u,c=new s.Uo("components.appDetail"),le=(0,r.useState)(""),H=E()(le,2),ie=H[0],F=H[1],K=(0,Me.useAccess)(),A=(0,r.useContext)(g.Z),Re=A.message,Ie=(0,r.useRef)(),m=[],je=[],Ae=[],Ne=(0,r.useState)(""),N=E()(Ne,2),h=N[0],Z=N[1];return(0,r.useEffect)(function(){t.data&&((0,Ue.K3)().then(function(d){var j;Z((j=d.data.serverUrl)!==null&&j!==void 0?j:"")}),F(t.data.info.Name))},[t.data]),(0,r.useEffect)(function(){var d,j,k;(d=Ie.current)===null||d===void 0||d.setFieldValue("restart",{name:(j=t.data.info.HostConfig)===null||j===void 0?void 0:j.RestartPolicy.Name,maxAccept:(k=t.data.info.HostConfig)===null||k===void 0?void 0:k.RestartPolicy.MaximumRetryCount})},[Ie.current,t.data]),t.data&&t.data.domain&&t.data.domain.map(function(d){Ae.push(d.setting.enableSSL?"https://"+d.serverName:"http://"+d.serverName)}),t.data.info.NetworkSettings.Ports&&Object.entries(t.data.info.NetworkSettings.Ports).forEach(function(d){var j=E()(d,2),k=j[0],S=j[1];if(S){var Ee=k.split("/"),ue=E()(Ee,2),de=ue[0],we=ue[1];S.forEach(function(nn){nn.HostPort?m.push({PrivatePort:de,Type:we,IP:nn.HostIp,PublicPort:nn.HostPort}):je.push({PrivatePort:de,Type:we,IP:"",PublicPort:""})})}}),(0,e.jsxs)(e.Fragment,{children:[t.data&&t.data.info.State.Running&&(0,e.jsx)(ae.Z,{publicPort:m,privatePort:je,domain:Ae,serverIp:h,showInDetail:!0,ghost:t.ghost,layout:"inline"}),(0,e.jsx)(B.Z,{title:(0,e.jsx)(Y.Z,{}),subTitle:c.format("titleBasic"),ghost:t.ghost,children:(0,e.jsxs)(y.Z,{column:1,bordered:!0,children:[(0,e.jsx)(y.Z.Item,{label:"Hostname",children:(0,e.jsx)(C.Z,{split:(0,e.jsx)(ne.Z,{type:"vertical"}),children:(0,e.jsx)(ce.Z,{title:(U=t.data.info)===null||U===void 0?void 0:U.Config.Hostname})})}),(0,e.jsx)(y.Z.Item,{label:s.FD.format("listName"),children:(0,e.jsxs)(C.Z,{split:(0,e.jsx)(ne.Z,{type:"vertical"}),children:[(0,e.jsx)(ce.Z,{title:(o=t.data.info)===null||o===void 0?void 0:o.Id.substring(0,12)}),(0,e.jsx)(b.Z.Text,{copyable:!0,editable:{tooltip:s.FD.format("listManageEdit"),onChange:function(){var d=M()(a()().mark(function k(S){var Ee;return a()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if((Ee=t.data.info)!==null&&Ee!==void 0&&Ee.Id){de.next=2;break}return de.abrupt("return");case 2:return de.next=4,(0,_.eE)({md5:t.data.info.Id,name:S});case 4:F(S),Re.success(s.FD.format("finish"));case 6:case"end":return de.stop()}},k)}));function j(k){return d.apply(this,arguments)}return j}()},children:(0,p.fi)(ie,"/")})]})}),(0,e.jsx)(y.Z.Item,{label:s.FD.format("listNetwork"),children:((v=t.data.info)===null||v===void 0?void 0:v.State.Running)&&(0,e.jsxs)(y.Z,{column:1,bordered:!0,children:[t.data.info.NetworkSettings.Networks&&Object.keys(t.data.info.NetworkSettings.Networks).map(function(d,j){var k,S,Ee;return(0,e.jsx)(y.Z.Item,{label:d,children:d=="host"?s.FD.format("listNetworkUseHost"):(0,e.jsxs)(C.Z,{direction:"vertical",children:[(0,e.jsx)(ce.Z,{title:(k=t.data.info)===null||k===void 0?void 0:k.NetworkSettings.Networks[d].IPAddress}),(S=t.data.info)===null||S===void 0?void 0:S.NetworkSettings.Networks[d].Gateway,(Ee=t.data.info)===null||Ee===void 0?void 0:Ee.NetworkSettings.Networks[d].MacAddress]})},j)}),((x=t.data.info.HostConfig)===null||x===void 0?void 0:x.ExtraHosts)&&(0,e.jsx)(y.Z.Item,{label:s.FD.format("listNetworkUseHost"),children:(0,e.jsx)(C.Z,{direction:"vertical",children:t.data.info.HostConfig.ExtraHosts.map(function(d,j){if(d.indexOf(":")>-1){var k=d.split(":");return"".concat(k[0]," - ").concat(k.slice(1).join(":"))}})})},"host")]})}),(0,e.jsx)(y.Z.Item,{label:s.FD.format("listRunTime"),children:c.format("runTimeValue",{create:new Date((w=(D=t.data.info)===null||D===void 0?void 0:D.Created)!==null&&w!==void 0?w:"").toLocaleString(),upgrade:new Date((l=(P=t.data.info)===null||P===void 0?void 0:P.State.StartedAt)!==null&&l!==void 0?l:"").toLocaleString()})}),K.canSeeContainerListManage&&(0,e.jsx)(y.Z.Item,{label:s.FD.format("listRestartPolicy"),children:(0,e.jsx)(W.A,{name:"container-restart",submitter:!1,onValuesChange:function(){var d=M()(a()().mark(function j(k,S){var Ee,ue;return a()().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:if((Ee=t.data.info)!==null&&Ee!==void 0&&Ee.Id){we.next=2;break}return we.abrupt("return");case 2:return we.next=4,(0,_.eE)({md5:t.data.info.Id,restart:S.restart});case 4:return ue=we.sent,Re.success(s.FD.format("finish")),we.abrupt("return");case 7:case"end":return we.stop()}},j)}));return function(j,k){return d.apply(this,arguments)}}(),layout:"inline",formRef:Ie,children:(0,e.jsx)(i.Z,{ghost:!0,defaultValue:(f=t.data.info)===null||f===void 0||(f=f.HostConfig)===null||f===void 0?void 0:f.RestartPolicy.Name})})}),(0,e.jsx)(y.Z.Item,{label:s.FD.format("listEnv"),children:(0,e.jsx)(O.Z,{dataSource:(R=(u=t.data.info)===null||u===void 0?void 0:u.Config.Env)!==null&&R!==void 0?R:[],renderItem:function(j){var k=j.split("=");return(0,e.jsxs)(O.Z.Item,{children:[(0,e.jsx)(b.Z.Text,{code:!0,children:k[0]})," = ",(0,e.jsx)(b.Z.Text,{copyable:!0,children:k.slice(1).join("=")})]})}})})]})})]})}var ge=n(60433),Te=n(85265),I=n(86250),J=n(31574);function Fe(t){var U,o=new s.Uo("components.appDetail");return t.data&&t.data.Mounts&&t.data.Mounts.length>0&&(0,e.jsx)(B.Z,{ghost:t.ghost,title:(0,e.jsx)(J.Z,{}),subTitle:o.format("titleVolume"),children:(0,e.jsx)(y.Z,{column:1,bordered:!0,children:(U=t.data)===null||U===void 0?void 0:U.Mounts.map(function(v,x){return(0,e.jsx)(y.Z.Item,{styles:{label:{width:"50%",wordBreak:"break-word"},content:{width:"50%",wordBreak:"break-word"}},label:v.Type=="volume"?v.Name:v.Source,children:v.Destination},x)})})})}var L=n(43425),pe=n(74842),me=n(33160),te=n(87784),T=n(30159),se=n(89035),re=n(95591),X=n(83622),ye=n(94359),z=n(80821),$=n(99922),Q=n(96486),ke=n.n(Q),be=n(29463),fe=n(8287),_e=n(19632),G=n.n(_e),$e=n(3616),q=n(12122),ve=n(60940),V=n(27619);function Ze(t){return Oe.apply(this,arguments)}function Oe(){return Oe=M()(a()().mark(function t(U){return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,Me.request)("/api/app/container/get-stat-info",{method:"POST",data:U}));case 1:case"end":return v.stop()}},t)})),Oe.apply(this,arguments)}function Ce(t){return oe.apply(this,arguments)}function oe(){return oe=M()(a()().mark(function t(U){return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,Me.request)("/api/app/container/get-process-info",{method:"POST",data:U}));case 1:case"end":return v.stop()}},t)})),oe.apply(this,arguments)}var Se={total:0,memory:{usage:[{name:"use",data:[]},{name:"all",show:!1,data:[]}],source:{usage:0,limit:0}},cpu:{usage:[{name:"use",data:[]}],source:{usage:0,limit:0}},network:{usage:[{name:"rx",data:[]},{name:"tx",data:[]}],source:{usageIn:0,usageOut:0}},io:{usage:[{name:"read",data:[]},{name:"write",data:[]}],source:{usageRead:0,usageWrite:0}}},Be=function(U,o){var v,x,w;switch(o.type){case"clear":return Se;case"update":var D=new Date().toLocaleTimeString(),l=JSON.parse(JSON.stringify(Se));return(v=o.payload)!==null&&v!==void 0&&v.memory&&(l.memory.usage=[{name:"use",data:[].concat(G()(U.memory.usage[0].data.slice(-20)),[{date:D,value:Math.round(o.payload.memory.in)}])},{name:"all",show:!1,data:[].concat(G()(U.memory.usage[1].data.slice(-20)),[{date:D,value:Math.round(o.payload.memory.out)}])}],l.memory.source={usage:o.payload.memory.in,limit:o.payload.memory.out},l.cpu.usage=[{name:"use",data:[].concat(G()(U.cpu.usage[0].data.slice(-20)),[{date:D,value:o.payload.cpu.toFixed(2)}])}],l.cpu.source={usage:o.payload.cpu,limit:100}),(x=o.payload)!==null&&x!==void 0&&x.networkIO&&(l.network.source={usageIn:parseFloat(o.payload.networkIO.in.toFixed(2)),usageOut:parseFloat(o.payload.networkIO.out.toFixed(2))},l.network.usage=[{name:"rx",data:[].concat(G()(U.network.usage[0].data.slice(-20)),[{date:D,value:o.payload.networkIO.out.toFixed(2)}])},{name:"tx",data:[].concat(G()(U.network.usage[1].data.slice(-20)),[{date:D,value:o.payload.networkIO.in.toFixed(2)}])}]),(w=o.payload)!==null&&w!==void 0&&w.blockIO&&(l.io.source={usageRead:parseFloat(o.payload.blockIO.out.toFixed(2)),usageWrite:parseFloat(o.payload.blockIO.in.toFixed(2))},l.io.usage=[{name:"read",data:[].concat(G()(U.io.usage[0].data.slice(-20)),[{date:D,value:o.payload.blockIO.out.toFixed(2)}])},{name:"write",data:[].concat(G()(U.io.usage[1].data.slice(-20)),[{date:D,value:o.payload.blockIO.in.toFixed(2)}])}]),l}},Ve=(0,r.forwardRef)(function(t,U){var o=(0,r.useState)(!1),v=E()(o,2),x=v[0],w=v[1],D=(0,r.useReducer)(Be,Se),l=E()(D,2),P=l[0],f=l[1],R=(0,r.useState)(),u=E()(R,2),c=u[0],le=u[1],H=(0,r.useContext)(g.Z),ie=H.loading,F=(0,Me.useModel)("subscriber"),K=new s.Uo("components.appDetail");(0,r.useImperativeHandle)(U,function(){return{}});function A(Ie){return Re.apply(this,arguments)}function Re(){return Re=M()(a()().mark(function Ie(m){var je,Ae;return a()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return ie.show(),Ze({id:m}),N.next=4,Ce({id:m});case 4:je=N.sent,Ae={columns:[],data:[]},je.data.list.Titles.map(function(h){Ae.columns.push({title:h,label:h,dataIndex:h})}),je.data.list.Processes.map(function(h,Z){Ae.data.push({UID:h[0],PID:h[1],PPID:h[2],C:h[3],STIME:h[4],TTY:h[5],TIME:h[6],CMD:h[7]})}),le(Ae),ie.destroy();case 10:case"end":return N.stop()}},Ie)})),Re.apply(this,arguments)}return(0,r.useEffect)(function(){return function(){F.progress.close("container:stat:"+t.containerInfo.Id),f({type:"clear",payload:{}})}},[t.containerInfo]),(0,e.jsxs)(e.Fragment,{children:[t.showTriggerButton&&(0,e.jsx)(X.ZP,{onClick:M()(a()().mark(function Ie(){return a()().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:w(!0);case 1:case"end":return je.stop()}},Ie)})),icon:(0,e.jsx)(q.Z,{}),children:s.FD.format("listManageStat")},"log"),(0,e.jsxs)(Te.Z,{title:K.format("titleStat"),open:x,onClose:function(){w(!1)},afterOpenChange:function(m){m?setTimeout(function(){var je;!((je=t.containerInfo)===null||je===void 0)&&je.Name&&A(t.containerInfo.Id),F.addDataHandler("container:stat:".concat(t.containerInfo.Id),function(Ae){f({type:"update",payload:Ae.data})})},500):(F.progress.close("container:stat:"+t.containerInfo.Id),f({type:"clear"}))},width:$e.R_,children:[(0,e.jsxs)(B.Z,{ghost:!0,direction:"row",wrap:!0,gutter:[20,20],children:[P.memory&&P.memory.source&&(0,e.jsx)(B.Z,{colSpan:12,title:(0,e.jsx)(q.Z,{}),subTitle:"Memory usage: ".concat((0,p.FI)(P.memory.source.usage)," / ").concat((0,p.FI)(P.memory.source.limit)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(V.Z,{name:"container-memory",data:P.memory.usage,yLabelFormatter:function(m){return(0,p.FI)(parseFloat(m))},yValueFormatter:function(m){return(0,p.FI)(parseFloat(m))},yDomainMaxCallback:function(m){return m.min*2}})}),(0,e.jsx)(B.Z,{colSpan:12,title:(0,e.jsx)(q.Z,{}),subTitle:"Cpu usage: ".concat(P.cpu.source.usage.toFixed(2),"%"),headerBordered:!0,bordered:!0,children:(0,e.jsx)(V.Z,{name:"container-cpu",data:P.cpu.usage,yDomainMaxCallback:function(m){return m.min*100},yLabelFormatter:function(m){return"".concat(parseFloat(m).toFixed(2),"%")}})}),P.io&&P.io.source&&(0,e.jsx)(B.Z,{colSpan:12,title:(0,e.jsx)(q.Z,{}),subTitle:"I/O: ".concat((0,p.FI)(P.io.source.usageRead)," / ").concat((0,p.FI)(P.io.source.usageWrite)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(V.Z,{name:"container-disk",data:P.io.usage,yDomainMaxCallback:function(m){return m.max*2},yLabelFormatter:function(m){return(0,p.FI)(parseFloat(m))}})}),P.network&&P.network.source&&(0,e.jsx)(B.Z,{colSpan:12,title:(0,e.jsx)(q.Z,{}),subTitle:"Network: ".concat((0,p.FI)(P.network.source.usageIn)," / ").concat((0,p.FI)(P.network.source.usageOut)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(V.Z,{name:"container-network",data:P.network.usage,yDomainMaxCallback:function(m){return m.max*2},yLabelFormatter:function(m){return(0,p.FI)(parseFloat(m))}})})]}),(0,e.jsx)(B.Z,{title:(0,e.jsx)(ge.Z,{}),subTitle:"Progress",children:(0,e.jsx)(ve.Z,{scroll:{x:"max-content"},rowKey:"PID",columns:c==null?void 0:c.columns,dataSource:c==null?void 0:c.data,pagination:{pageSize:10}})})]})]})}),He=Ve,ln=(0,r.createContext)({}),Je=ln,un=(0,r.forwardRef)(function(t,U){(0,r.useImperativeHandle)(U,function(){return{showConsole:l}});var o=new s.Uo("components.appDetail"),v=(0,r.useRef)(),x=(0,r.useContext)(Je),w=x.reload,D=x.loadingRef;function l(P){var f;(f=v.current)===null||f===void 0||f.show({url:"/console/container/".concat(t.data.Id),title:t.data.Name,workDir:P})}return(0,e.jsx)(B.Z,{title:(0,e.jsx)(L.Z,{}),ghost:t.ghost,subTitle:(0,e.jsxs)(C.Z,{children:[o.format("titleOp")," - ",function(P){if(P){var f=P.State.Status,R=P.State.Status;if(P.State.Health&&P.State.Health.Status=="unhealthy"){var u,c;f=P.State.Health.Status,R=(u=(c=ke().last(P.State.Health.Log))===null||c===void 0?void 0:c.Output)!==null&&u!==void 0?u:f}return(0,e.jsx)(ye.Z,{status:"container.".concat(f),tip:R})}}(t.data)]}),children:(0,e.jsxs)(C.Z,{wrap:!0,children:[(0,e.jsx)(z.Z,{buttonProps:{icon:(0,e.jsx)(pe.Z,{}),disabled:t.data&&t.data.State.Running||t.data&&t.data.State.Paused},action:function(){var f,R,u;return(f=D.current)===null||f===void 0||f.show(),(0,_.IW)({md5:(R=(u=t.data)===null||u===void 0?void 0:u.Id)!==null&&R!==void 0?R:"",operate:"start"}).finally(function(){var c;(c=D.current)===null||c===void 0||c.destroy()})},onSuccess:function(){return w()},children:s.FD.format("listManageStart")}),(0,e.jsx)(z.Z,{buttonProps:{icon:(0,e.jsx)(me.Z,{})},action:function(){var f,R,u;return(f=D.current)===null||f===void 0||f.show(),(0,_.IW)({md5:(R=(u=t.data)===null||u===void 0?void 0:u.Id)!==null&&R!==void 0?R:"",operate:"restart"}).finally(function(){var c;(c=D.current)===null||c===void 0||c.destroy()})},onSuccess:function(){return w()},children:s.FD.format("listManageRestart")}),(0,e.jsx)(z.Z,{action:function(){var f,R,u;return(f=D.current)===null||f===void 0||f.show(),(0,_.IW)({md5:(R=(u=t.data)===null||u===void 0?void 0:u.Id)!==null&&R!==void 0?R:"",operate:"stop"}).finally(function(){var c;(c=D.current)===null||c===void 0||c.destroy()})},buttonProps:{danger:!0,icon:(0,e.jsx)(te.Z,{}),disabled:t.data&&t.data.State.Dead},onSuccess:function(){return w()},children:s.FD.format("listManageStop")}),(0,e.jsx)(z.Z,{action:function(){var f,R,u;return(f=D.current)===null||f===void 0||f.show(),(0,_.IW)({md5:(R=(u=t.data)===null||u===void 0?void 0:u.Id)!==null&&R!==void 0?R:"",operate:"pause"}).finally(function(){var c;(c=D.current)===null||c===void 0||c.destroy()})},onSuccess:function(){return w()},buttonProps:{icon:(0,e.jsx)(T.Z,{}),disabled:t.data&&t.data&&t.data.State.Paused},children:s.FD.format("listManagePause")}),(0,e.jsx)(z.Z,{action:function(){var f,R,u;return(f=D.current)===null||f===void 0||f.show(),(0,_.IW)({md5:(R=(u=t.data)===null||u===void 0?void 0:u.Id)!==null&&R!==void 0?R:"",operate:"unpause"}).finally(function(){var c;(c=D.current)===null||c===void 0||c.destroy()})},onSuccess:function(){return w()},buttonProps:{icon:(0,e.jsx)(pe.Z,{}),disabled:t.data&&!t.data.State.Paused},children:s.FD.format("listManageUnpause")}),(0,e.jsx)(ne.Z,{type:"vertical"}),t.data&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)($.Z,{showFileExplorer:!0,ref:v}),(0,e.jsx)(X.ZP,{type:"primary",onClick:function(){t.data&&l(t.data.Config.WorkingDir)},icon:(0,e.jsx)(se.Z,{}),children:s.FD.format("listManageConsole")})]}),t.data&&t.data.State.Running&&(0,e.jsx)(be.Z,{showConsole:!0,type:"container",name:(0,p.fi)(t.data.Name,"/"),title:(0,p.fi)(t.data.Name,"/"),trigger:(0,e.jsx)(X.ZP,{icon:(0,e.jsx)(re.Z,{}),children:s.FD.format("listManageFilePath")})}),t.data&&t.data.State.Running&&(0,e.jsx)(fe.Z,{containerInfo:t.data,showTriggerButton:!0}),t.data&&t.data.State.Running&&(0,e.jsx)(He,{containerInfo:t.data,showTriggerButton:!0})]})})}),dn=un,Ge=n(62597),cn=n(58638),tn=n(60219),an=n(82061),rn=n(25035),mn=n(57132),fn=n(86548),We=n(62370),_n=n(5966),vn=n(52688),Ke=n(84567),hn=n(25278),Ye=n(83062),gn=n(85418),pn=n(40411),jn=n(24739),on=n(97462),En=n(70146);function xn(t){var U=(0,r.useRef)(),o=new s.Uo("components.appDetail");return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(z.Z,{buttonProps:{icon:(0,e.jsx)(tn.Z,{})},confirmProps:{onOpenChange:function(x,w){var D,l;!((D=U.current)===null||D===void 0)&&D.resetFields&&((l=U.current)===null||l===void 0||l.resetFields())},description:(0,e.jsxs)(C.Z,{style:{width:650,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,e.jsx)(b.Z.Text,{children:(0,e.jsx)("ul",{children:o.prefix("backupVolumeTipOption",4).map(function(v,x){return(0,e.jsxs)("li",{children:[v," ",x==3&&(0,e.jsx)(Me.Link,{to:"/app/backup",children:s.Ob.format("container.backup")})]},x)})})}),(0,e.jsxs)(W.A,{layout:"horizontal",formRef:U,submitter:!1,children:[(0,e.jsxs)(jn.UW,{children:[(0,e.jsx)(We.Z,{valuePropName:"checked",name:"enableSelectVolume",children:(0,e.jsx)(Ke.Z,{disabled:!t.container.Mounts||t.container.Mounts.length==0,children:o.format("backupVolumeEnableSelectVolume")})}),(0,e.jsx)(We.Z,{valuePropName:"checked",name:"enableImage",children:(0,e.jsx)(Ke.Z,{children:o.format("backupVolumeEnableImage")})}),(0,e.jsx)(on.Z,{name:["enableImage"],children:function(x){var w=x.enableImage;if(w)return(0,e.jsx)(We.Z,{valuePropName:"checked",name:"enableCommitImage",children:(0,e.jsx)(Ke.Z,{children:o.format("backupVolumeEnableCommitImage")})})}})]}),(0,e.jsx)(on.Z,{name:["enableSelectVolume"],children:function(x){var w=x.enableSelectVolume;return w&&(0,e.jsx)(C.Z,{wrap:!0,children:t.container.Mounts&&t.container.Mounts.map(function(D,l){return(0,e.jsx)(We.Z,{valuePropName:"checked",name:["volume",D.Destination],children:(0,e.jsx)(Ke.Z,{children:D.Destination})},"volume-".concat(l))})})}})]})]})},action:M()(a()().mark(function v(){var x,w,D,l;return a()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,En.yB)({id:t.container.Name,enableImage:(x=U.current)===null||x===void 0?void 0:x.getFieldValue("enableImage"),volume:Object.keys((w=(D=U.current)===null||D===void 0?void 0:D.getFieldValue("volume"))!==null&&w!==void 0?w:{}).filter(function(R){return R}),enableCommitImage:(l=U.current)===null||l===void 0?void 0:l.getFieldValue("enableCommitImage")});case 2:case"end":return f.stop()}},v)})),children:o.format("backupVolumeButton")})})}var Pn=n(99861),Xe=n(73813),Dn=n(50888),On=n(16596),ze=n(1699),qe=n(29453),In=n(71965),sn=n(77446),Cn=n(86615),Rn=n(40056),Mn=n(89240);function bn(t){var U=(0,Me.useAccess)(),o=(0,r.useState)(),v=E()(o,2),x=v[0],w=v[1],D=(0,r.useRef)(),l=new s.Uo("components.appDetail");return(0,r.useEffect)(function(){U.canSeeEnableCe||(0,sn.V)({siteName:(0,Mn.HJ)(t.detail.Name)}).then(function(P){w(P.data.list)})},[t.detail]),(0,e.jsx)(ze.u,{access:["canSeeEnableCe"],showProTips:!0,children:function(f){var R=f.canSeeEnableCe;return(0,e.jsx)(z.Z,{action:function(){var c;return(0,sn.v)({id:(c=D.current)===null||c===void 0?void 0:c.getFieldValue("id"),enableForce:!0})},buttonProps:{icon:(0,e.jsx)(In.Z,{}),disabled:R},confirmProps:{onOpenChange:function(c,le){var H;!((H=D.current)===null||H===void 0)&&H.resetFields&&D.current.resetFields()},description:(0,e.jsx)(W.A,{formRef:D,submitter:!1,children:(0,e.jsxs)(C.Z,{direction:"vertical",style:{width:500},size:[0,15],children:[(0,e.jsx)(b.Z.Text,{children:l.format("rollbackTip")}),x&&x.length>0?(0,e.jsx)(Cn.Z.Group,{fieldProps:{style:{display:"flex",flexDirection:"column",gap:8}},name:"id",label:"",options:x&&x.map(function(u){return{label:"id: ".concat(u.id," ").concat(s.FD.format("listDeletedAt"),": ").concat((0,p.NF)(u.deletedAt)),value:u.id}})}):(0,e.jsx)(Rn.Z,{message:l.format("rollbackEmptyTip"),style:{marginBottom:10}})]})})},onSuccess:function(){var c;(c=D.current)===null||c===void 0||c.resetFields(),t.onFinish&&t.onFinish()},children:s.FD.format("listManageRollback")})}})}var yn=n(184),en=n(14946),Zn=n(9773);function Tn(t){return(0,e.jsxs)(C.Z,{children:[t.title,(0,e.jsx)(Ye.Z,{title:t.help,children:(0,e.jsx)(rn.Z,{})})]})}var Sn=n(55943),Ln=n(16970),Un=n(20743),An=n(78451),wn=(0,r.forwardRef)(function(t,U){var o;(0,r.useImperativeHandle)(U,function(){return{}});var v=(0,r.useRef)(),x=(0,r.useRef)(),w=(0,r.useState)(),D=E()(w,2),l=D[0],P=D[1];return(0,r.useEffect)(function(){var f,R;P(t.containerInfo),!((f=v.current)===null||f===void 0)&&f.reloadAndRest&&((R=v.current)===null||R===void 0||R.reloadAndRest())},[t.containerInfo]),(0,e.jsxs)(B.Z,{ghost:t.ghost,children:[(0,e.jsx)(Sn.Z,{ref:x}),(0,e.jsx)(Zn.Z,{scroll:{x:"max-content"},rowKey:"key",actionRef:v,pagination:!1,ghost:!0,columns:[{title:s.FD.format("listContainerNetworkName"),key:"name",dataIndex:"networkName"},{title:s.FD.format("listContainerName"),key:"containerName",dataIndex:"containerName",width:100,render:function(R,u,c,le,H){return(0,e.jsx)(An.Z,{content:(0,p.fi)(u.containerName,"/")})}},{title:(0,e.jsx)(Tn,{title:"hostname",help:s.FD.format("listHostnameTip")}),key:"hostName",render:function(R,u,c){return u.hostName?(0,e.jsx)(C.Z,{direction:"vertical",children:u.hostName.map(function(le,H){if(le)return(0,e.jsx)(b.Z.Text,{copyable:!0,keyboard:!0,children:le},H)})}):(0,e.jsx)(e.Fragment,{})}},{title:"Ip",key:"ip",render:function(R,u,c,le,H){return(0,e.jsxs)(C.Z,{direction:"vertical",children:[(0,e.jsx)("span",{children:u.networkInfo.IPv4Address}),u.networkInfo.IPv6Address&&(0,e.jsx)("span",{children:u.networkInfo.IPv6Address})]})}},{title:s.FD.format("listManage"),key:"option",width:50,fixed:"right",render:function(R,u,c,le,H){return(0,e.jsxs)(C.Z,{children:[u.networkName!=""&&(0,e.jsx)(b.Z.Link,{onClick:function(){var F;(F=x.current)===null||F===void 0||F.show(u.networkName)},children:(0,e.jsx)(Ye.Z,{title:s.FD.format("listManageDetail"),children:(0,e.jsx)(L.Z,{})})}),u.key!="bridge"&&u.key!="none"&&u.key!="host"&&u.networkName!=""&&(0,e.jsx)(z.Z,{buttonProps:{type:"link",danger:!0},confirmProps:{description:"notification.confirm.title"},action:function(){return(0,en.t9)({name:u.networkName,containerName:t.containerInfo.Name})},onSuccess:function(){var F,K;!((F=v.current)===null||F===void 0)&&F.reloadAndRest&&((K=v.current)===null||K===void 0||K.reloadAndRest())},tips:s.FD.format("listManageExit"),children:(0,e.jsx)(an.Z,{})})]})}}],request:function(){var f=M()(a()().mark(function R(u,c,le){var H,ie;return a()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,_.jV)({md5:t.containerInfo.Name});case 2:return H=K.sent,P(H.data.info),K.next=6,(0,en._3)({name:Object.keys(H.data.info.NetworkSettings.Networks)});case 6:return ie=K.sent,K.abrupt("return",{data:ie.data.list,success:!0,total:ie.data.list.length});case 8:case"end":return K.stop()}},R)}));return function(R,u,c){return f.apply(this,arguments)}}(),toolBarRender:function(){return[(0,e.jsx)(Un.Z,{showTriggerButton:!0,onSelect:function(){var R=M()(a()().mark(function u(c){var le,H;return a()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,en.HY)({name:c.Name,containerName:t.containerInfo.Name,ipV4:""});case 2:H=F.sent,!((le=v.current)===null||le===void 0)&&le.reloadAndRest&&v.current.reloadAndRest();case 4:case"end":return F.stop()}},u)}));return function(u){return R.apply(this,arguments)}}()},"joinNetwork"),(0,e.jsx)(Ln.Z,{onFinish:function(){var u,c;!((u=v.current)===null||u===void 0)&&u.reloadAndRest&&((c=v.current)===null||c===void 0||c.reloadAndRest())}},"create")]},search:!1,expandable:{expandRowByClick:!1,expandedRowKeys:Object.keys((o=l==null?void 0:l.NetworkSettings.Networks)!==null&&o!==void 0?o:{bridge:[]})}})]})}),Fn=wn,Bn=n(26522),Wn=(0,r.forwardRef)(function(t,U){(0,r.useImperativeHandle)(U,function(){return{}});var o=(0,r.useState)(!1),v=E()(o,2),x=v[0],w=v[1],D=new s.Uo("components.appDetail");return(0,e.jsx)(yn.a,{submitter:!1,title:D.format("titleNetwork"),onOpenChange:function(P){w(P)},drawerProps:{width:$e.R_},open:x,trigger:(0,e.jsx)(X.ZP,{icon:(0,e.jsx)(Bn.Z,{}),children:s.Ob.format("docker.network")}),children:(0,e.jsx)(Fn,{ghost:!0,containerInfo:t.containerInfo})})}),$n=Wn,Kn=n(84941),kn=(0,r.forwardRef)(function(t,U){var o=new s.Uo("components.appDetail"),v=(0,r.useContext)(Je),x=v.reload,w=v.loadingRef,D=v.close,l=v.redirect,P=(0,r.useRef)(),f=(0,r.useRef)(),R=(0,r.useRef)(),u=(0,r.useRef)(),c=(0,r.useRef)(),le=(0,r.useRef)(),H=(0,r.useRef)(),ie=(0,r.useState)({status:0,error:""}),F=E()(ie,2),K=F[0],A=F[1],Re=(0,r.useState)(),Ie=E()(Re,2),m=Ie[0],je=Ie[1];(0,r.useImperativeHandle)(U,function(){return{}});function Ae(N){return Ne.apply(this,arguments)}function Ne(){return Ne=M()(a()().mark(function N(h){var Z,d,j;return a()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(d=-2,!h.ignore){S.next=6;break}if(!(h.ignore.indexOf("".concat(h.info.Name,"@*"))>-1)){S.next=4;break}return S.abrupt("return",{status:-2,error:""});case 4:if(!(h.ignore.indexOf("".concat(h.info.Name,"@").concat(h.info.Image))>-1)){S.next=6;break}return S.abrupt("return",{status:-2,error:""});case 6:return S.next=8,(0,Xe.ZQ)({tag:(Z=h.info.Config.Image)!==null&&Z!==void 0?Z:"",md5:h.info.Image,cacheTime:3600}).catch(function(Ee){d=-1});case 8:if(j=S.sent,!(j&&j.data.error&&j.data.error!="")){S.next=11;break}return S.abrupt("return",{status:-1,error:j.data.error});case 11:return j&&(j.data.digestLocal&&j.data.digestLocal.length>0?d=j.data.upgrade?1:2:j.data.error&&j.data.error!=""?d=-1:j.data.digestLocal.length==0?d=-3:d=-2),S.abrupt("return",{status:d,error:""});case 13:case"end":return S.stop()}},N)})),Ne.apply(this,arguments)}return(0,r.useEffect)(function(){A({status:0}),Ae(t.data).then(function(N){A(N)}),je(t.data)},[t.data]),(0,e.jsxs)(B.Z,{ghost:t.ghost,title:(0,e.jsx)(L.Z,{}),subTitle:o.format("titleManage"),children:[(0,e.jsx)(Kn.Z,{onFinish:function(){var N=M()(a()().mark(function h(Z){return a()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:Z&&l(Z);case 1:case"end":return j.stop()}},h)}));return function(h){return N.apply(this,arguments)}}(),ref:P},"createByImage"),(0,e.jsxs)(C.Z,{wrap:!0,children:[(0,e.jsx)(z.Z,{buttonProps:{icon:(0,e.jsx)(cn.Z,{})},confirmProps:{onOpenChange:function(h,Z){var d;!((d=f.current)===null||d===void 0)&&d.resetFields&&f.current.resetFields()},description:(0,e.jsxs)(C.Z,{style:{width:500,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,e.jsx)(b.Z.Text,{children:o.format("exportConfirm")}),(0,e.jsx)(W.A,{layout:"horizontal",formRef:f,submitter:!1,children:(0,e.jsx)(We.Z,{valuePropName:"checked",name:"enableExportToPath",children:(0,e.jsx)(Ke.Z,{children:o.format("exportEnableExportToPath")})},"enableExportToPath")})]})},action:function(){var h,Z,d;return(0,_.LJ)({md5:(h=m==null?void 0:m.info.Id)!==null&&h!==void 0?h:"",enableExportToPath:(Z=(d=f.current)===null||d===void 0?void 0:d.getFieldValue("enableExportToPath"))!==null&&Z!==void 0?Z:!1})},children:o.format("exportButton")}),(0,e.jsx)(z.Z,{buttonProps:{icon:(0,e.jsx)(tn.Z,{})},confirmProps:{onOpenChange:function(h,Z){var d;!((d=u.current)===null||d===void 0)&&d.resetFields&&u.current.resetFields()},title:o.format("commitConfirmTitle"),description:(0,e.jsx)(C.Z,{style:{width:400,marginTop:"10px",paddingRight:"10px"},direction:"vertical",children:(0,e.jsx)(W.A,{formRef:u,submitter:!1,children:(0,e.jsx)(We.Z,{name:"saveImageName",children:(0,e.jsx)(hn.Z,{addonBefore:o.format("commitConfirmSaveImageName")})})})})},action:function(){var h,Z,d;return(0,_.Re)({md5:(h=m==null?void 0:m.info.Id)!==null&&h!==void 0?h:"",name:(Z=(d=u.current)===null||d===void 0?void 0:d.getFieldValue("saveImageName"))!==null&&Z!==void 0?Z:m==null?void 0:m.info.Name})},children:o.format("commitButton")}),m&&(0,e.jsx)(ze.u,{access:"canSeeContainerBackup",children:(0,e.jsx)(xn,{container:m.info})}),(0,e.jsx)(ne.Z,{type:"vertical"}),m&&(0,e.jsx)(z.Z,{action:M()(a()().mark(function N(){var h,Z,d,j,k,S;return a()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return(h=w.current)===null||h===void 0||h.show(),ue.abrupt("return",Promise.all([(0,Ge.Ct)({md5:(Z=m==null?void 0:m.info.Id)!==null&&Z!==void 0?Z:"",deleteImage:(d=(j=R.current)===null||j===void 0?void 0:j.getFieldValue("deleteImage"))!==null&&d!==void 0?d:!1,deleteVolume:(k=(S=R.current)===null||S===void 0?void 0:S.getFieldValue("deleteVolume"))!==null&&k!==void 0?k:!1}),(0,qe.rn)({name:m==null?void 0:m.info.Name})]).finally(function(){var de;(de=w.current)===null||de===void 0||de.destroy()}));case 2:case"end":return ue.stop()}},N)})),buttonProps:{danger:!0,type:"primary",icon:(0,e.jsx)(an.Z,{})},confirmProps:{description:(0,e.jsxs)(C.Z,{style:{width:200},direction:"vertical",children:[(0,e.jsx)(b.Z.Text,{children:s.FD.format("confirm.title")}),(0,e.jsxs)(W.A,{formRef:R,layout:"inline",submitter:!1,children:[(0,e.jsx)(We.Z,{addonAfter:(0,e.jsx)(Ye.Z,{title:o.format("deleteConfirmTip"),children:(0,e.jsx)(rn.Z,{})}),name:"deleteVolume",valuePropName:"checked",children:(0,e.jsx)(Ke.Z,{children:o.format("deleteConfirmDeleteVolume")})}),(0,e.jsx)(We.Z,{name:"deleteImage",valuePropName:"checked",children:(0,e.jsx)(Ke.Z,{children:o.format("deleteConfirmDeleteImage")})})]})]})},onSuccess:function(){D()},children:o.format("deleteButton")}),(0,e.jsx)(z.Z,{buttonProps:{icon:(0,e.jsx)(mn.Z,{})},confirmProps:{description:(0,e.jsxs)(C.Z,{style:{width:400,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(b.Z.Text,{children:o.format("copyConfirmTip")}),(0,e.jsxs)(W.A,{formRef:c,submitter:!1,layout:"horizontal",children:[(0,e.jsx)("br",{}),(0,e.jsx)(_n.Z,{label:o.format("copyCopyName"),name:"copyName"}),(0,e.jsx)(vn.Z,{label:o.format("copyEnableRandomPort"),name:"enableRandomPort"})]})]})},action:M()(a()().mark(function N(){var h,Z,d,j,k;return a()().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,(0,_.aF)({md5:(h=m==null?void 0:m.info.Id)!==null&&h!==void 0?h:"",copyName:(Z=(d=c.current)===null||d===void 0?void 0:d.getFieldValue("copyName"))!==null&&Z!==void 0?Z:"",enableRandomPort:(j=(k=c.current)===null||k===void 0?void 0:k.getFieldValue("enableRandomPort"))!==null&&j!==void 0?j:!1});case 2:return Ee.abrupt("return",Ee.sent);case 3:case"end":return Ee.stop()}},N)})),onSuccess:function(h){var Z;(Z=c.current)===null||Z===void 0||Z.resetFields()},children:o.format("copyButton")}),(0,e.jsx)(X.ZP,{onClick:function(){var h;(h=P.current)===null||h===void 0||h.show(t.data.info.Id)},type:"primary",icon:(0,e.jsx)(fn.Z,{}),children:o.format("editButton")}),m&&(0,e.jsx)(bn,{detail:m.info,onFinish:function(){D()}}),(0,e.jsx)(ne.Z,{type:"vertical"}),m&&(0,e.jsxs)(e.Fragment,{children:[m.info.Config.Image&&(0,e.jsx)(Pn.Z,{image:[m.info.Config.Image],ref:le}),(0,e.jsx)(gn.Z,{placement:"bottomLeft",menu:{items:[{key:"1",label:(0,e.jsx)(z.Z,{action:M()(a()().mark(function N(){var h,Z,d,j,k,S;return a()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,(0,Ge.ze)({md5:(h=(Z=m.info)===null||Z===void 0?void 0:Z.Name)!==null&&h!==void 0?h:"",imageId:""});case 2:return A({status:0}),ue.next=5,(0,Xe.ZQ)({tag:(d=(j=m.info)===null||j===void 0?void 0:j.Config.Image)!==null&&d!==void 0?d:"",md5:(k=(S=m.info)===null||S===void 0?void 0:S.Image)!==null&&k!==void 0?k:"",cacheTime:0}).then(function(de){de.data.error&&de.data.error!=""?A({status:-1,error:de.data.error}):de.data.digestLocal&&de.data.digestLocal.length>0?A({status:de.data.upgrade?1:2}):A({status:-2})}).catch(function(de){A({status:-1})});case 5:return ue.abrupt("return",ue.sent);case 6:case"end":return ue.stop()}},N)})),buttonProps:{type:"link"},children:o.format("upgradeCheckUpgrade")})},{key:"2",label:(0,e.jsx)(z.Z,{action:M()(a()().mark(function N(){var h,Z,d,j;return a()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,Ge.ze)({md5:(h=(Z=m.info)===null||Z===void 0?void 0:Z.Name)!==null&&h!==void 0?h:"",imageId:(d=(j=m.info)===null||j===void 0?void 0:j.Image)!==null&&d!==void 0?d:""});case 2:return S.abrupt("return",S.sent);case 3:case"end":return S.stop()}},N)})),buttonProps:{type:"link"},children:o.format("upgradeCheckUpgradeIgnoreOnce")})},{key:"3",label:(0,e.jsx)(z.Z,{action:M()(a()().mark(function N(){var h,Z;return a()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,Ge.ze)({md5:(h=(Z=m.info)===null||Z===void 0?void 0:Z.Name)!==null&&h!==void 0?h:"",imageId:"*"});case 2:return j.abrupt("return",j.sent);case 3:case"end":return j.stop()}},N)})),buttonProps:{type:"link"},children:o.format("upgradeCheckUpgradeIgnore")})}]},children:(0,e.jsx)(pn.Z,{title:K.error,count:o.format("checkImageUpgradeOption."+K.status),color:o.format("checkImageUpgradeColorOption."+K.status),children:(0,e.jsx)(z.Z,{buttonProps:{disabled:K.status===0,icon:K.status===0?(0,e.jsx)(Dn.Z,{}):(0,e.jsx)(On.Z,{})},confirmProps:{description:(0,e.jsxs)(C.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(b.Z.Text,{children:o.format("upgradeConfirm")}),(0,e.jsx)(W.A,{formRef:H,submitter:!1,layout:"inline",children:(0,e.jsx)(We.Z,{name:"enableBak",valuePropName:"checked",children:(0,e.jsx)(Ke.Z,{children:o.format("upgradeConfirmEnableBak")})})})]})},action:M()(a()().mark(function N(){var h,Z,d,j,k,S;return a()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,(h=le.current)===null||h===void 0?void 0:h.start();case 2:return(Z=w.current)===null||Z===void 0||Z.show(),(d=le.current)===null||d===void 0||d.finish(),ue.next=6,(0,_.RF)({md5:(j=m.info.Id)!==null&&j!==void 0?j:"",imageTag:"",enableBak:(k=(S=H.current)===null||S===void 0?void 0:S.getFieldValue("enableBak"))!==null&&k!==void 0?k:!1}).finally(function(){var de;(de=w.current)===null||de===void 0||de.destroy()});case 6:return ue.abrupt("return",ue.sent);case 7:case"end":return ue.stop()}},N)})),onSuccess:function(h){D()},children:o.format("upgradeButton")})})})]}),(0,e.jsx)(ne.Z,{type:"vertical"}),m&&(0,e.jsx)($n,{containerInfo:m.info}),(0,e.jsx)(X.ZP,{icon:(0,e.jsx)(me.Z,{}),onClick:function(){x()},children:s.FD.format("listManageRefresh")})]})]})}),Nn=kn,Vn=n(65913);function Hn(t){var U=new s.Uo("components.appDetail"),o=(0,r.useState)(),v=E()(o,2),x=v[0],w=v[1];return(0,r.useEffect)(function(){(0,Xe.YU)({md5:t.data.Image}).then(function(D){w(D.data)})},[t.data]),(0,e.jsx)(B.Z,{ghost:t.ghost,title:(0,e.jsx)(ge.Z,{}),subTitle:U.format("titleImage"),children:(0,e.jsxs)(y.Z,{styles:{label:{width:200}},column:1,bordered:!0,children:[(0,e.jsx)(y.Z.Item,{label:"Image Tag",children:(0,e.jsx)(b.Z.Text,{copyable:!0,children:t.data.Config.Image})}),(0,e.jsx)(y.Z.Item,{label:"Image",children:t.data.Image}),(0,e.jsx)(y.Z.Item,{label:"CMD",children:(x==null?void 0:x.info.Config.Cmd)&&(x==null?void 0:x.info.Config.Cmd.join(" "))}),(0,e.jsx)(y.Z.Item,{label:"ENTRYPOINT",children:x==null?void 0:x.info.Config.Entrypoint}),(0,e.jsx)(y.Z.Item,{label:"Labels",children:(0,e.jsx)(y.Z,{column:1,bordered:!0,children:(x==null?void 0:x.info.Config.Labels)&&Object.entries(x==null?void 0:x.info.Config.Labels).map(function(D){var l=E()(D,2),P=l[0],f=l[1];return(0,e.jsx)(y.Z.Item,{label:P,children:f},P)})})})]})})}var Gn=n(97857),Qe=n.n(Gn),zn=n(40666),Qn=n(64789),Jn=n(97937),Yn=n(66309),Xn=n(86738),qn=n(90127);function et(t){var U=(0,r.useState)(0),o=E()(U,2),v=o[0],x=o[1],w=(0,r.useState)(),D=E()(w,2),l=D[0],P=D[1],f=new s.Uo("components.appDetail"),R=(0,r.useState)(),u=E()(R,2),c=u[0],le=u[1];return(0,r.useEffect)(function(){P([]),(0,qe.e1)().then(function(H){P(H.data.list)})},[v,t.data.info.Name]),(0,e.jsx)(B.Z,{ghost:!0,title:(0,e.jsx)(zn.Z,{}),subTitle:f.format("titleTag"),extra:(0,e.jsx)(qn.Z,{trigger:(0,e.jsx)(b.Z.Link,{children:(0,e.jsx)(Qn.Z,{})}),containerDetail:t.data,onFinish:function(){x(v+1)}}),children:(0,e.jsx)(C.Z,{wrap:!0,children:l&&(l==null?void 0:l.filter(function(H){return H.item&&H.item.find(function(ie){return ie.name==t.data.info.Name})}).map(function(H,ie){return(0,e.jsx)(Yn.Z,{color:H.tagColor,closable:{closeIcon:(0,e.jsx)(Xn.Z,{title:s.FD.format("confirm.title"),open:c&&c[ie],onOpenChange:function(K){le(Qe()(Qe()({},c),{index:K}))},onConfirm:M()(a()().mark(function F(){return a()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,qe.rn)({name:t.data.info.Name,tag:H.tag});case 2:x(v+1);case 3:case"end":return A.stop()}},F)})),children:(0,e.jsx)(Jn.Z,{})})},style:{height:35,display:"flex",borderRadius:20,justifyContent:"center",alignItems:"center"},onClose:M()(a()().mark(function F(){return a()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:le(Qe()(Qe()({},c),{index:!0}));case 1:case"end":return A.stop()}},F)})),children:(0,e.jsx)("span",{style:{paddingLeft:10,paddingRight:3},children:H.tag})},ie)}))})})}var nt=(0,r.forwardRef)(function(t,U){var o;(0,r.useImperativeHandle)(U,function(){return{show:function(F){return M()(a()().mark(function K(){return a()().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return c(!0),Re.next=3,le(F);case 3:case"end":return Re.stop()}},K)}))()}}});var v=new s.Uo("components.appDetail"),x=(0,r.useRef)(),w=(0,r.useState)(),D=E()(w,2),l=D[0],P=D[1],f=(0,r.useState)(!1),R=E()(f,2),u=R[0],c=R[1];function le(ie){return H.apply(this,arguments)}function H(){return H=M()(a()().mark(function ie(F){var K,A,Re;return a()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return(K=x.current)===null||K===void 0||K.show(),m.next=3,(0,_.jV)({md5:F}).finally(function(){var je;(je=x.current)===null||je===void 0||je.destroy()});case 3:A=m.sent,A.data&&(((Re=A.data.info.HostConfig)===null||Re===void 0?void 0:Re.NetworkMode)=="host"&&A.data.info.Config.ExposedPorts&&Object.keys(A.data.info.Config.ExposedPorts).map(function(je){A.data.info.NetworkSettings.Ports||(A.data.info.NetworkSettings.Ports={}),A.data.info.NetworkSettings.Ports[je]=[{HostIp:"0.0.0.0",HostPort:je.substring(0,je.indexOf("/"))}]}),P(A.data));case 5:case"end":return m.stop()}},ie)})),H.apply(this,arguments)}return(0,e.jsx)(Je.Provider,{value:{loadingRef:x,reload:function(){return M()(a()().mark(function F(){return a()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(!l){A.next=3;break}return A.next=3,le(l.info.Id);case 3:case"end":return A.stop()}},F)}))()},close:function(){return M()(a()().mark(function F(){return a()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:c(!1),t.onFinish&&t.onFinish();case 2:case"end":return A.stop()}},F)}))()},redirect:function(F){return M()(a()().mark(function K(){return a()().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return Re.next=2,le(F);case 2:case"end":return Re.stop()}},K)}))()}},children:(0,e.jsx)(Te.Z,{title:v.format("drawerTitle",{name:(0,p.fi)((o=l==null?void 0:l.info.Name)!==null&&o!==void 0?o:"","/")}),open:u,onClose:function(){c(!1),t.onFinish&&t.onFinish()},width:$e.R_,children:(0,e.jsx)(Vn.Z,{ref:x,children:(0,e.jsxs)(I.Z,{vertical:!0,gap:20,children:[l&&(0,e.jsx)(ze.u,{access:"canSeeContainerList",children:(0,e.jsx)(dn,{ghost:!0,data:l==null?void 0:l.info})}),l&&(0,e.jsx)(ze.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,e.jsx)(Nn,{ghost:!0,data:l})}),l&&(0,e.jsx)(et,{data:l}),l&&(0,e.jsx)(he,{data:l,ghost:!0}),(0,e.jsx)(Fe,{data:l==null?void 0:l.info,ghost:!0}),l&&(0,e.jsx)(Hn,{data:l.info,ghost:!0}),(l==null?void 0:l.info.Config.Labels)&&(0,e.jsx)(B.Z,{title:(0,e.jsx)(ge.Z,{}),ghost:!0,subTitle:v.format("titleLabel"),children:(0,e.jsx)(y.Z,{column:1,bordered:!0,children:l.info.Config.Labels&&Object.entries(l.info.Config.Labels).map(function(ie){var F=E()(ie,2),K=F[0],A=F[1];return(0,e.jsx)(y.Z.Item,{label:K,children:A},K)})})})]})})})})}),tt=nt},90127:function(Le,xe,n){var Pe=n(15009),E=n.n(Pe),De=n(99289),a=n.n(De),ee=n(5574),M=n.n(ee),r=n(5251),Y=n(184),B=n(62370),W=n(5966),y=n(24739),C=n(64317),ne=n(52688),b=n(97462),O=n(40056),ce=n(42075),i=n(67294),_=n(1699),g=n(80821),ae=n(2808),p=n(87662),Me=n(29453),Ue=n(3616),s=n(36146),e=n(85893),he=(0,i.forwardRef)(function(ge,Te){var I;(0,i.useImperativeHandle)(Te,function(){return{edit:function(ve){_e(!0),$e(ve),J.current&&J.current.setFieldsValue({tag:[ve.tag],tagColor:ve.tagColor,enableShowGroup:ve.enableShowGroup})}}});var J=(0,i.useRef)(),Fe=(0,i.useState)(0),L=M()(Fe,2),pe=L[0],me=L[1],te=(0,i.useState)([]),T=M()(te,2),se=T[0],re=T[1],X=(0,i.useState)(),ye=M()(X,2),z=ye[0],$=ye[1],Q=(I=ge.containerDetail)===null||I===void 0?void 0:I.info,ke=(0,i.useState)(!1),be=M()(ke,2),fe=be[0],_e=be[1],G=new s.Uo("components.appDetail");function $e(q){J.current&&J.current.setFieldsValue({title:q.title,description:q.description,url:q.url,icon:q.icon,name:q.name})}return(0,i.useEffect)(function(){$([]),(0,Me.e1)().then(function(q){$(q.data.list)})},[pe]),(0,i.useEffect)(function(){Q&&(0,p.K3)().then(function(q){var ve=[];Q.NetworkSettings&&Q.NetworkSettings.Ports&&Object.keys(Q.NetworkSettings.Ports).map(function(V){Q.NetworkSettings.Ports&&Q.NetworkSettings.Ports[V]&&Q.NetworkSettings.Ports[V].map(function(Ze){Ze.HostPort&&ve.push("http://".concat(q.data.serverUrl,":").concat(Ze.HostPort))})}),re(ve)})},[ge.containerDetail]),(0,e.jsxs)(Y.a,{drawerProps:{forceRender:!0,width:Ue.R_},open:fe,onFinish:function(){var q=a()(E()().mark(function ve(V){var Ze,Oe,Ce,oe;return E()().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return Ce="",V.tagColor&&V.tagColor.toHexString?V.tagColor.cleared||(Ce=V.tagColor.toHexString()):Ce=V.tagColor,oe=(Ze=V.enableShowGroup)!==null&&Ze!==void 0?Ze:ge.defaultEnableShowGroup,Be.next=5,(0,Me.A9)({enableShowGroup:oe,tag:V.tag?V.tag[0]:"",tagColor:Ce,name:(Oe=Q==null?void 0:Q.Name)!==null&&Oe!==void 0?Oe:V.name,title:oe?V.title:"",description:oe?V.description:"",url:oe?V.url:"",icon:oe?V.icon:""});case 5:return me(pe+1),ge.onFinish&&ge.onFinish({tag:V.tag,tagColor:V.tagColor,enableShowGroup:oe}),Be.abrupt("return",!0);case 8:case"end":return Be.stop()}},ve)}));return function(ve){return q.apply(this,arguments)}}(),formRef:J,title:G.format("tagCreateTitle"),trigger:ge.trigger,onOpenChange:function(ve){var V;_e(ve),!ve&&(!((V=J.current)===null||V===void 0)&&V.resetFields)&&J.current.resetFields()},children:[ge.defaultEnableShowGroup&&(0,e.jsx)(B.Z,{children:(0,e.jsx)(O.Z,{message:new s.Uo("system.home.tag").format("emptyTip")})}),(0,e.jsx)(W.Z,{name:"name",hidden:!0}),(0,e.jsxs)(y.UW,{children:[(0,e.jsx)(C.Z,{width:"lg",label:G.format("tagFormTag"),layout:"vertical",required:!0,rules:[{required:!0}],onChange:function(ve){var V=z&&z.find(function(He){return ve&&ve.length>=1&&He.tag==ve[0]});if(V){var Ze,Oe,Ce,oe=V.item.find(function(He){return He.name==(Q==null?void 0:Q.Name)});(Ze=J.current)===null||Ze===void 0||Ze.setFieldsValue({tagColor:V.tagColor,enableShowGroup:V.enableShowGroup}),oe&&oe.name&&$e({name:(Oe=Q==null?void 0:Q.Name)!==null&&Oe!==void 0?Oe:"",title:oe?oe.title:(0,r.fi)((Ce=Q==null?void 0:Q.Name)!==null&&Ce!==void 0?Ce:"","/"),description:oe&&oe.description,url:oe&&oe.url,icon:oe&&oe.icon})}if(!ve||ve.length==0){var Se,Be=(Se=J.current)===null||Se===void 0?void 0:Se.getFieldValue("url");if(!Be||Be==""){var Ve;!((Ve=J.current)===null||Ve===void 0)&&Ve.resetFields&&J.current.resetFields()}}},options:z&&z.map(function(q){return{lable:q.tag,value:q.tag}}),name:"tag",mode:"tags",fieldProps:{maxCount:1},placeholder:G.format("tagFormTagEmpty")},"tagSelect".concat(pe)),!ge.defaultEnableShowGroup&&(0,e.jsx)(ae.Z,{label:G.format("tagFormTagColor"),name:"tagColor"})]}),!ge.defaultEnableShowGroup&&(0,e.jsx)(_.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(ve){var V=ve.canSeeEnableCe;return(0,e.jsx)(ne.Z,{label:G.format("tagFormEnableShowGroup"),name:"enableShowGroup",disabled:V,fieldProps:{onChange:function(Oe){if(Oe){var Ce,oe;$e({name:(Ce=Q==null?void 0:Q.Name)!==null&&Ce!==void 0?Ce:"",title:(0,r.fi)((oe=Q==null?void 0:Q.Name)!==null&&oe!==void 0?oe:"","/")})}}}})}}),(0,e.jsx)(b.Z,{name:["enableShowGroup"],children:function(ve){var V=ve.enableShowGroup;return(V||ge.defaultEnableShowGroup)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(ce.Z.Compact,{children:[ge.containerDetail&&(0,e.jsx)(C.Z,{label:G.format("tagFormSelectUrl"),width:"sm",name:"selectUrl",options:se.map(function(Ze){return{label:Ze,value:Ze}}),onChange:function(Oe){var Ce;!((Ce=J.current)===null||Ce===void 0)&&Ce.setFieldValue&&J.current.setFieldValue("url",Oe)}}),(0,e.jsx)(W.Z,{label:G.format("tagFormUrl"),name:"url",width:"md"}),(0,e.jsx)(B.Z,{label:" ",children:(0,e.jsx)(g.Z,{action:function(){var Oe;return(0,Me.R3)({url:(Oe=J.current)===null||Oe===void 0?void 0:Oe.getFieldValue("url")})},onSuccess:function(Oe){var Ce,oe,Se;(Ce=J.current)===null||Ce===void 0||Ce.setFieldValue("icon",Oe.data.icon),(oe=J.current)===null||oe===void 0||oe.setFieldValue("title",Oe.data.title),(Se=J.current)===null||Se===void 0||Se.setFieldValue("description",Oe.data.description)},children:G.format("tagGetUrlDetailButton")})})]}),(0,e.jsxs)(y.UW,{children:[(0,e.jsx)(W.Z,{label:G.format("tagFormTitle"),name:"title"}),(0,e.jsx)(W.Z,{label:G.format("tagFormDescription"),name:"description"})]}),(0,e.jsx)(y.UW,{children:(0,e.jsx)(W.Z,{width:"lg",placeholder:G.format("tagFormIconEmpty"),label:G.format("tagFormIcon"),name:"icon"})})]})}})]})});xe.Z=he},81146:function(Le,xe,n){var Pe=n(97857),E=n.n(Pe),De=n(15009),a=n.n(De),ee=n(99289),M=n.n(ee),r=n(67294),Y=n(97269),B=n(62370),W=n(5966),y=n(97462),C=n(82346),ne=n(71230),b=n(15746),O=n(34041),ce=n(83622),i=n(84567),_=n(42075),g=n(80821),ae=n(23430),p=n(93162),Me=n.n(p),Ue=n(78267),s=n.n(Ue),e=n(75458),he=n.n(e),ge=n(12323),Te=n(4244),I=n.n(Te),J=n(24078),Fe=n(36146),L=n(85893),pe,me,te,T={decorations:{matchBackground:"",matchBorder:"#FFFF00",activeMatchBackground:"#FFFF0066",matchOverviewRuler:"",activeMatchColorOverviewRuler:""}},se=(0,r.forwardRef)(function(re,X){var ye=(0,r.useRef)(),z=(0,C.useModel)("subscriber"),$=new Fe.Uo("components.containerLog");(0,r.useImperativeHandle)(X,function(){return{fit:function(){pe.clear(),te.fit()},start:function(){return M()(a()().mark(function fe(){return a()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,Q({lineTotal:500});case 2:case"end":return G.stop()}},fe)}))()},close:function(){z.progress.close(re.id)}}});function Q(be){return ke.apply(this,arguments)}function ke(){return ke=M()(a()().mark(function be(fe){return a()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:z.progress.close(re.id),pe.clear(),fe.download=!1,re.request(fe);case 4:case"end":return G.stop()}},be)})),ke.apply(this,arguments)}return(0,r.useEffect)(function(){return window.addEventListener("resize",function(){te.fit()}),pe=new Te.Terminal(E()(E()({},ge.X),{},{fontSize:12,lineHeight:1.2,allowProposedApi:!0})),te=new Ue.FitAddon,me=new e.SearchAddon({}),pe.loadAddon(te),pe.loadAddon(me),pe.open(document.getElementById("terminal-container-log")),te.fit(),z.addDataHandler(re.id,function(be){pe.write(be.data)}),function(){pe.clear(),pe.reset(),z.progress.close(re.id)}},[]),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Y.A,{submitter:!1,layout:"horizontal",onFinish:function(fe){var _e;Q({id:re.id,lineTotal:parseInt(fe.lineTotal),showTime:(_e=fe.showTime)!==null&&_e!==void 0?_e:!1})},formRef:ye,children:(0,L.jsxs)(ne.Z,{gutter:[10,0],children:[(0,L.jsx)(b.Z,{span:8,children:(0,L.jsx)(B.Z,{name:"lineTotal",initialValue:"500",label:$.format("formLineTotal"),children:(0,L.jsxs)(O.Z,{defaultValue:"500",onChange:function(fe){var _e;(_e=ye.current)===null||_e===void 0||_e.submit()},children:[(0,L.jsx)(O.Z.Option,{value:"100",children:$.format("formLineTotalOption",{number:"100"})}),(0,L.jsx)(O.Z.Option,{value:"200",children:$.format("formLineTotalOption",{number:"200"})}),(0,L.jsx)(O.Z.Option,{value:"500",children:$.format("formLineTotalOption",{number:"500"})}),(0,L.jsx)(O.Z.Option,{value:"1000",children:$.format("formLineTotalOption",{number:"1000"})}),(0,L.jsx)(O.Z.Option,{value:"-1",children:$.format("formLineTotalOptionAll")})]})})}),(0,L.jsx)(b.Z,{children:(0,L.jsx)(ce.ZP,{onClick:function(){pe.clear()},children:$.format("clearButton")})}),(0,L.jsx)(b.Z,{children:(0,L.jsx)(B.Z,{name:"showTime",valuePropName:"checked",children:(0,L.jsx)(i.Z,{onChange:function(fe){var _e;(_e=ye.current)===null||_e===void 0||_e.submit()},children:$.format("formShowTime")})})}),(0,L.jsx)(b.Z,{children:(0,L.jsx)(W.Z,{label:$.format("formKeywork"),name:"keywork",fieldProps:{onPressEnter:function(){var fe;me.findNext((fe=ye.current)===null||fe===void 0?void 0:fe.getFieldValue("keywork"),T)},onChange:function(fe){me.findNext(fe.target.value,T)}},placeholder:$.format("formKeyworkEmpty")})}),(0,L.jsx)(b.Z,{children:(0,L.jsx)(y.Z,{name:["keywork"],children:function(fe){var _e=fe.keywork;return(0,L.jsxs)(_.Z,{size:10,children:[(0,L.jsx)(ce.ZP,{onClick:function(){me.findNext(_e,T)},children:$.format("formKeyworkNext")},"next"),(0,L.jsx)(ce.ZP,{onClick:function(){me.findPrevious(_e,T)},children:$.format("formKeyworkPrev")},"prev")]})}})}),(0,L.jsx)(b.Z,{children:(0,L.jsx)(g.Z,{buttonProps:{icon:(0,L.jsx)(ae.Z,{})},action:M()(a()().mark(function be(){var fe,_e,G;return a()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(!re.download){q.next=5;break}return q.next=3,re.download({lineTotal:parseInt((fe=ye.current)===null||fe===void 0?void 0:fe.getFieldValue("lineTotal")),showTime:(_e=ye.current)===null||_e===void 0?void 0:_e.getFieldValue("showTime")});case 3:G=q.sent,(0,p.saveAs)(G.data,G.name);case 5:case"end":return q.stop()}},be)})),children:$.format("downloadButton")})})]})}),(0,L.jsx)("div",{style:{marginTop:"20px",height:re.showInDrawer?"75vh":"85vh"},id:"terminal-container-log"})]})});xe.Z=se},27619:function(Le,xe,n){n.d(xe,{Z:function(){return r}});var Pe=n(5574),E=n.n(Pe),De=n(82346),a=n(67294),ee=n(64389),M=n(85893);function r(Y){var B=(0,De.useModel)("@@initialState"),W=B.initialState,y="chart-area-".concat(Y.name),C=(0,a.useState)(),ne=E()(C,2),b=ne[0],O=ne[1],ce={};Y.data.forEach(function(_){_.show===!1?ce[_.name]=!1:ce[_.name]=!0});var i={tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},valueFormatter:function(g){return Y.yValueFormatter?Y.yValueFormatter(g):g}},legend:{selected:ce},grid:{left:"0",right:"0",bottom:"0",top:"30",containLabel:!0},xAxis:{type:"category",data:Y.data[0].data.map(function(_){return _.date}),boundaryGap:!1,axisLabel:{rotate:20}},yAxis:{type:"value",axisLabel:{formatter:Y.yLabelFormatter},max:function(g){if(Y.yDomainMaxCallback)return Y.yDomainMaxCallback(g)}},series:[]};return(0,a.useEffect)(function(){var _="",g=window.matchMedia("(prefers-color-scheme: dark)");(W==null?void 0:W.theme.algorithm)=="dark"||g.matches?_="dark":_="",b&&!b.isDisposed()&&b.dispose();var ae=document.getElementById(y),p=ee.S1(ae,_);p.setOption(i);var Me=new ResizeObserver(function(){p.resize()});ae&&Me.observe(ae),O(p)},[W]),(0,a.useEffect)(function(){b&&!b.isDisposed()&&b.setOption({legend:{data:Y.data.map(function(_){return _.name})},xAxis:{data:Y.data[0].data.map(function(_){return _.date})},series:Y.data.map(function(_){return{name:_.name,type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:_.data.map(function(g){return g.value})}})})},[Y.data]),(0,M.jsx)("div",{style:{height:200},id:y})}},94359:function(Le,xe,n){n.d(xe,{Z:function(){return ce}});var Pe=n(5574),E=n.n(Pe),De=n(3089),a=n(98165),ee=n(18429),M=n(8751),r=n(66212),Y=n(14313),B=n(30159),W=n(87740),y=n(50888),C=n(66309),ne=n(83062),b=n(36146),O=n(85893);function ce(i){var _,g,ae=new b.Uo("components.containerStatus"),p=i.status.split("."),Me=E()(p,2),Ue=Me[0],s=Me[1],e="";e=ae.format(i.status,(_=i.statusValue)!==null&&_!==void 0?_:{});var he=(0,O.jsx)(O.Fragment,{});return s=="0"&&(he=(0,O.jsx)(C.Z,{icon:(0,O.jsx)(De.Z,{}),color:"default",children:e})),s=="10"&&(he=(0,O.jsx)(C.Z,{icon:(0,O.jsx)(a.Z,{spin:!0}),color:"processing",children:e})),s=="20"&&(he=(0,O.jsx)(C.Z,{icon:(0,O.jsx)(ee.Z,{}),color:"error",children:e})),s=="30"&&(he=(0,O.jsx)(C.Z,{icon:(0,O.jsx)(M.Z,{}),color:"success",children:e})),s=="new"&&(he=(0,O.jsx)(C.Z,{icon:(0,O.jsx)(r.Z,{}),children:e})),(s=="running"||s=="healthy"||s=="active"||s=="ready")&&(he=(0,O.jsx)(C.Z,{icon:(0,O.jsx)(Y.Z,{}),color:"success",children:e})),(s=="paused"||s=="pause"||s=="rollback_paused")&&(he=(0,O.jsx)(C.Z,{icon:(0,O.jsx)(B.Z,{}),color:"warning",children:e})),(s=="waiting"||s=="starting"||s=="accepted")&&(he=(0,O.jsx)(C.Z,{icon:(0,O.jsx)(W.Z,{}),children:e})),["deploying","pending","allocated","accepted","assigned","preparing","updating","rollback_started"].includes(s)&&(he=(0,O.jsx)(C.Z,{icon:(0,O.jsx)(y.Z,{}),color:"processing",children:e})),(s=="error"||s=="down"||s=="failed")&&(he=(0,O.jsx)(C.Z,{icon:(0,O.jsx)(ee.Z,{}),color:"error",children:e})),["complete","completed","rollback_completed"].includes(s)&&(he=(0,O.jsx)(C.Z,{icon:(0,O.jsx)(M.Z,{}),color:"success",children:e})),["exited","dead","removing","restarting","unhealthy","created","drain","unreachable","shutdown","rejected","remove","orphaned"].includes(s)&&(he=(0,O.jsx)(C.Z,{icon:(0,O.jsx)(ee.Z,{}),color:"warning",children:e})),(0,O.jsx)(ne.Z,{placement:"top",title:(g=i.tip)!==null&&g!==void 0?g:"",children:he})}},55943:function(Le,xe,n){var Pe=n(5574),E=n.n(Pe),De=n(15009),a=n.n(De),ee=n(99289),M=n.n(ee),r=n(80821),Y=n(3616),B=n(14946),W=n(36146),y=n(82061),C=n(184),ne=n(38345),b=n(60940),O=n(42075),ce=n(96074),i=n(26412),_=n(67294),g=n(85893),ae=(0,_.forwardRef)(function(p,Me){(0,_.useImperativeHandle)(Me,function(){return{show:function(se){return M()(a()().mark(function re(){var X,ye;return a()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,B.IS)({name:se});case 2:X=$.sent,X.data.info.Containers?(ye=[],Object.keys(X.data.info.Containers).map(function(Q){X.data.info.Containers[Q].Id=Q,ye.push(X.data.info.Containers[Q])}),me(ye)):me([]),J(X.data.info),he(!0);case 6:case"end":return $.stop()}},re)}))()}}});var Ue=(0,_.useState)(!1),s=E()(Ue,2),e=s[0],he=s[1],ge=(0,_.useState)(),Te=E()(ge,2),I=Te[0],J=Te[1],Fe=(0,_.useState)(),L=E()(Fe,2),pe=L[0],me=L[1],te=new W.Uo("components.network");return(0,g.jsx)(C.a,{drawerProps:{width:Y.R_},title:te.format("detailTitle"),open:e,onOpenChange:function(se){he(se)},submitter:!1,children:(0,g.jsxs)(ne.Z,{ghost:!0,direction:"column",gutter:[10,0],children:[(0,g.jsx)(ne.Z,{title:te.format("detailContainer"),ghost:!0,children:(0,g.jsx)(b.Z,{rowKey:"Name",columns:[{title:W.FD.format("listContainerName"),dataIndex:"Name"},{title:"IPV4",dataIndex:"IPv4Address"},{title:"IPV6",dataIndex:"IPv6Address"},{title:"MacAddress",dataIndex:"MacAddress"},{title:W.FD.format("listManage"),render:function(se,re,X){return(0,g.jsx)(O.Z,{split:(0,g.jsx)(ce.Z,{type:"vertical"}),children:(0,g.jsx)(r.Z,{buttonProps:{type:"text",icon:(0,g.jsx)(y.Z,{}),danger:!0},confirmProps:{showCommonConfirm:!0},action:function(){var z,$;return(0,B.t9)({name:(z=I==null?void 0:I.Id)!==null&&z!==void 0?z:"",containerName:($=re.Id)!==null&&$!==void 0?$:""})},tips:W.FD.format("listManageExit"),onSuccess:function(){var z=pe==null?void 0:pe.filter(function($){return $.Id!=re.Id});me(z)}},"delete")})}}],dataSource:pe,pagination:!1})}),(0,g.jsx)(ne.Z,{ghost:!0,title:te.format("detailBasic"),children:(0,g.jsxs)(i.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:[(0,g.jsx)(i.Z.Item,{label:te.format("detailName"),children:I==null?void 0:I.Name}),(0,g.jsx)(i.Z.Item,{label:"Id",children:I==null?void 0:I.Id}),(0,g.jsx)(i.Z.Item,{label:"Driver",children:I==null?void 0:I.Driver}),(0,g.jsx)(i.Z.Item,{label:"Scope",children:I==null?void 0:I.Scope}),(0,g.jsx)(i.Z.Item,{label:"Attachable",children:te.yesNo(I==null?void 0:I.Attachable)}),(0,g.jsx)(i.Z.Item,{label:"Internal",children:te.yesNo(I==null?void 0:I.Internal)}),(I==null?void 0:I.IPAM.Config)&&(I==null?void 0:I.IPAM.Config.map(function(T,se){return(0,g.jsx)(i.Z.Item,{label:T.Gateway&&T.Gateway.includes(":")?"IPV6":"IPV4",children:(0,g.jsxs)(i.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:[(0,g.jsx)(i.Z.Item,{label:"Subnet",children:T.Subnet}),(0,g.jsx)(i.Z.Item,{label:"Gateway",children:T.Gateway}),(0,g.jsx)(i.Z.Item,{label:"IP Range ",children:T.IPRange}),(0,g.jsx)(i.Z.Item,{label:"Excluded IPs",children:T.AuxiliaryAddresses&&Object.keys(T.AuxiliaryAddresses).map(function(re){return T.AuxiliaryAddresses[re]+" ,"})})]})},se)})),(I==null?void 0:I.Options)&&Object.keys(I==null?void 0:I.Options).length>0&&(0,g.jsx)(i.Z.Item,{label:"Options",children:(0,g.jsx)(i.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:Object.keys(I==null?void 0:I.Options).map(function(T){return(0,g.jsx)(i.Z.Item,{label:T,children:I.Options[T]},T)})})}),(I==null?void 0:I.Labels)&&Object.keys(I==null?void 0:I.Labels).length>0&&(0,g.jsx)(i.Z.Item,{label:"Lables",children:(0,g.jsx)(i.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:Object.keys(I==null?void 0:I.Labels).map(function(T){return(0,g.jsx)(i.Z.Item,{label:T,children:I.Labels[T]},T)})})})]})})]})})});xe.Z=ae},2808:function(Le,xe,n){n.d(xe,{Z:function(){return r}});var Pe=n(97857),E=n.n(Pe),De=n(62370),a=n(51663),ee=n(67294),M=n(85893);function r(Y){return(0,M.jsx)(De.Z,E()(E()({},Y),{},{children:(0,M.jsx)(a.Z,{showText:function(W){return W.toHexString()},allowClear:!0,presets:[{label:"Color",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},76428:function(Le,xe,n){n.d(xe,{Z:function(){return a}});var Pe=n(25593),E=n(67294),De=n(85893);function a(ee){return(0,De.jsx)(Pe.Z.Text,{copyable:!0,children:ee.title})}},65913:function(Le,xe,n){var Pe=n(5574),E=n.n(Pe),De=n(74330),a=n(67294),ee=n(85893),M=(0,a.forwardRef)(function(r,Y){(0,a.useImperativeHandle)(Y,function(){return{show:function(){C(!0)},destroy:function(){C(!1)}}});var B=(0,a.useState)(!1),W=E()(B,2),y=W[0],C=W[1];return(0,ee.jsx)(De.Z,{spinning:y,size:"default",children:r.children})});xe.Z=M},70146:function(Le,xe,n){n.d(xe,{SR:function(){return C},VE:function(){return W},Zy:function(){return Y},iD:function(){return b},yB:function(){return M}});var Pe=n(15009),E=n.n(Pe),De=n(99289),a=n.n(De),ee=n(82346);function M(_){return r.apply(this,arguments)}function r(){return r=a()(E()().mark(function _(g){return E()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,ee.request)("/api/app/container-backup/create",{data:g,method:"POST"});case 2:return p.abrupt("return",p.sent);case 3:case"end":return p.stop()}},_)})),r.apply(this,arguments)}function Y(_){return B.apply(this,arguments)}function B(){return B=a()(E()().mark(function _(g){return E()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,ee.request)("/api/app/container-backup/get-list",{method:"POST",data:g}));case 1:case"end":return p.stop()}},_)})),B.apply(this,arguments)}function W(_){return y.apply(this,arguments)}function y(){return y=a()(E()().mark(function _(g){return E()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,ee.request)("/api/app/container-backup/delete",{method:"POST",data:g}));case 1:case"end":return p.stop()}},_)})),y.apply(this,arguments)}function C(_){return ne.apply(this,arguments)}function ne(){return ne=a()(E()().mark(function _(g){return E()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,ee.request)("/api/app/container-backup/restore",{method:"POST",data:g}));case 1:case"end":return p.stop()}},_)})),ne.apply(this,arguments)}function b(_){return O.apply(this,arguments)}function O(){return O=a()(E()().mark(function _(g){return E()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,ee.request)("/api/app/container-backup/get-detail",{method:"POST",data:g}));case 1:case"end":return p.stop()}},_)})),O.apply(this,arguments)}function ce(_){return i.apply(this,arguments)}function i(){return i=_asyncToGenerator(_regeneratorRuntime().mark(function _(g){return _regeneratorRuntime().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,request("/api/app/site/restore",{data:g,method:"POST"});case 2:return p.abrupt("return",p.sent);case 3:case"end":return p.stop()}},_)})),i.apply(this,arguments)}},29453:function(Le,xe,n){n.d(xe,{A9:function(){return M},R3:function(){return C},e1:function(){return Y},rn:function(){return W}});var Pe=n(15009),E=n.n(Pe),De=n(99289),a=n.n(De),ee=n(82346);function M(b){return r.apply(this,arguments)}function r(){return r=a()(E()().mark(function b(O){return E()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,ee.request)("/api/common/tag/create",{method:"POST",data:O});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},b)})),r.apply(this,arguments)}function Y(b){return B.apply(this,arguments)}function B(){return B=a()(E()().mark(function b(O){return E()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,ee.request)("/api/common/tag/get-list",{method:"POST",data:O});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},b)})),B.apply(this,arguments)}function W(b){return y.apply(this,arguments)}function y(){return y=a()(E()().mark(function b(O){return E()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,ee.request)("/api/common/tag/delete",{method:"POST",data:O});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},b)})),y.apply(this,arguments)}function C(b){return ne.apply(this,arguments)}function ne(){return ne=a()(E()().mark(function b(O){return E()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,ee.request)("/api/pro/tag/get-url-detail",{method:"POST",data:O});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},b)})),ne.apply(this,arguments)}}}]);
