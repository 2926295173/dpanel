"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8022],{80821:function(K,p,n){n.d(p,{Z:function(){return f}});var T=n(5574),s=n.n(T),_=n(24963),l=n(86738),m=n(28036),x=n(83062),A=n(67294),Z=n(85893);function f(u){var W=(0,A.useState)(!1),o=s()(W,2),I=o[0],r=o[1],d=(0,A.useContext)(_.Z),R=d.lang,P=d.notice,M=d.message,D=function(){r(!0),u.action().then(function(v){if(r(!1),typeof u.onSuccess=="function"&&u.onSuccess(v),u.messageSuccess){var C="";typeof u.messageSuccess=="function"?C=u.messageSuccess(v):C=u.messageSuccess,C=R("notification.".concat(C))+R("notification.title.success"),u.asynced?M.info(C):M.success(C)}}).catch(function(v){r(!1),typeof u.onError=="function"&&u.onError(v)})};return u.confirm?(0,Z.jsx)(l.Z,{style:{width:500},title:u.confirmTitle?u.confirmTitle:R("notification.title.tip"),description:u.confirm,onConfirm:D,okText:"Yes",cancelText:"No",children:(0,Z.jsx)(m.ZP,{disabled:u.disabled,icon:u.icon,loading:I,danger:u.danger,type:u.type,children:u.children})}):(0,Z.jsx)(x.Z,{title:u.tips,children:(0,Z.jsx)(m.ZP,{disabled:u.disabled,icon:u.icon,loading:I,onClick:D,danger:u.danger,type:u.type,children:u.children})})}},94359:function(K,p,n){n.d(p,{Z:function(){return I}});var T=n(67294),s=n(3089),_=n(98165),l=n(18429),m=n(8751),x=n(14313),A=n(30159),Z=n(87740),f=n(66309),u=n(83062),W=n(63713),o=n(85893);function I(r){var d=(0,o.jsx)(o.Fragment,{});if(r.status=="0"&&(d=(0,o.jsx)(f.Z,{icon:(0,o.jsx)(s.Z,{}),color:"default",children:"waiting"})),r.status=="10"&&(d=(0,o.jsx)(f.Z,{icon:(0,o.jsx)(_.Z,{spin:!0}),color:"processing",children:"processing"})),r.status=="20"&&(d=(0,o.jsx)(f.Z,{icon:(0,o.jsx)(l.Z,{}),color:"error",children:"error"})),r.status=="30"&&(d=(0,o.jsx)(f.Z,{icon:(0,o.jsx)(m.Z,{}),color:"success",children:"success"})),r.status=="running"||r.status=="healthy"){var R,P;d=(0,o.jsx)(f.Z,{icon:(0,o.jsx)(x.Z,{}),color:"success",children:(R=r.message)!==null&&R!==void 0&&R.showInTag?(P=r.message)===null||P===void 0?void 0:P.content:r.status})}if(r.status=="paused"){var M,D;d=(0,o.jsx)(f.Z,{icon:(0,o.jsx)(A.Z,{}),children:(M=r.message)!==null&&M!==void 0&&M.showInTag?(D=r.message)===null||D===void 0?void 0:D.content:r.status})}if(r.status=="waiting"||r.status=="starting"){var w,v;d=(0,o.jsx)(f.Z,{icon:(0,o.jsx)(Z.Z,{}),children:(w=r.message)!==null&&w!==void 0&&w.showInTag?(v=r.message)===null||v===void 0?void 0:v.content:r.status})}if(r.status=="exited"||r.status=="dead"||r.status=="removing"||r.status=="restarting"||r.status=="unhealthy"||r.status=="created"){var C,L;d=(0,o.jsx)(f.Z,{icon:(0,o.jsx)(l.Z,{}),color:"warning",children:(C=r.message)!==null&&C!==void 0&&C.showInTag?(L=r.message)===null||L===void 0?void 0:L.content:r.status})}if(r.link&&(d=(0,o.jsx)(W.Link,{to:r.link,children:d})),r.message){var E;d=(0,o.jsx)(u.Z,{placement:(E=r.message.placement)!==null&&E!==void 0?E:"top",title:r.message.content,children:d})}return(0,o.jsx)(o.Fragment,{children:d})}},24963:function(K,p,n){var T=n(67294),s=(0,T.createContext)({});p.Z=s},96781:function(K,p,n){var T=n(67294),s=(0,T.createContext)({});p.Z=s},83536:function(K,p,n){n.r(p),n.d(p,{default:function(){return k}});var T=n(15009),s=n.n(T),_=n(99289),l=n.n(_),m=n(80821),x=n(90098),A=n(43425),Z=n(86548),f=n(23430),u=n(90078),W=n(10641),o=n(63713),I=n(28036),r=n(25593),d=n(42075),R=n(96074),P=n(83062),M=n(67294),D=n(96781),w=n(94359),v=n(67255),C=n(93162),L=n(24963),E=n(66309),i=n(85893);function z(y){var B=(0,o.useIntl)(),b=(0,M.useContext)(L.Z),j=b.lang,t;if(!y.type)t=(0,i.jsx)(E.Z,{children:j("compose.type.default")});else switch(y.type){case"remoteUrl":t=(0,i.jsx)(E.Z,{color:"cyan",children:j("compose.type.".concat(y.type))});break;case"serverPath":t=(0,i.jsx)(E.Z,{color:"blue",children:j("compose.type.".concat(y.type))});break;case"storagePath":t=(0,i.jsx)(E.Z,{color:"geekblue",children:j("compose.type.".concat(y.type))});break;case"outPath":t=(0,i.jsx)(E.Z,{color:"yellow",children:j("compose.type.".concat(y.type))});break;case"store":t=(0,i.jsx)(E.Z,{color:"green",children:j("compose.type.".concat(y.type))});break;case"dangling":t=(0,i.jsx)(E.Z,{color:"error",children:j("compose.type.".concat(y.type))});break;default:t=(0,i.jsx)(E.Z,{children:j("compose.type.".concat(y.type))})}return(0,i.jsx)(P.Z,{title:y.tootip,children:t})}function k(){var y=(0,M.useContext)(D.Z),B=y.listTableRef,b=(0,M.useContext)(L.Z),j=b.lang,t=b.notice;return(0,i.jsx)(u._z,{header:{extra:[(0,i.jsx)(o.Link,{to:"/compose/create",reloadDocument:location.search.length>0,children:(0,i.jsx)(I.ZP,{type:"primary",children:"\u521B\u5EFA\u4EFB\u52A1"},"createCompose")},"create")]},children:(0,i.jsx)(W.Z,{scroll:{x:"max-content"},request:function(){var a=l()(s()().mark(function c(e){var O;return s()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,x.pm)({title:e.title,name:e.name});case 2:return O=h.sent,h.abrupt("return",{data:O.data.list,success:!0,total:O.data.list.length});case 4:case"end":return h.stop()}},c)}));return function(c){return a.apply(this,arguments)}}(),rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name",width:200,render:function(c,e,O,g,h){return e.setting.type=="dangling"?(0,i.jsx)(r.Z.Link,{onClick:function(){t.info("\u65E0\u6CD5\u627E\u5230\u8BE5\u4EFB\u52A1\u7684 compose.yaml \u6587\u4EF6\uFF0C\u8BF7\u6302\u8F7D\u76F8\u5E94\u7684 compose \u6587\u4EF6\u6216\u662F\u5728\u9762\u677F\u7684 compose \u76EE\u5F55\u6DFB\u52A0\u540C\u6807\u8BC6\u7684\u4EFB\u52A1\u76EE\u5F55\u53CA compose.yaml \u6587\u4EF6")},children:e.name}):(0,i.jsx)(o.Link,{to:"/compose/deploy/"+(e.id||e.name),children:e.name},O)},sorter:function(c,e){return c.name.localeCompare(e.name)},sortDirections:["descend","ascend"]},{title:"\u9879\u76EE\u540D\u79F0",dataIndex:"title",width:200},{title:"\u7C7B\u578B",width:150,search:!1,render:function(c,e,O,g,h){var S;return(0,i.jsx)(z,{tootip:(S=e.setting.uri)!==null&&S!==void 0?S:"",type:e.setting&&e.setting.type?e.setting.type:""})}},{title:"\u5BB9\u5668\u72B6\u6001",dataIndex:"status",search:!1,width:300,render:function(c,e,O,g,h){return(0,i.jsx)(d.Z,{children:e.setting.status.split(", ").map(function(S){var U="running",F=S.indexOf("(");return F>-1?U=S.slice(0,F):U=S,(0,i.jsx)(w.Z,{status:U,message:{content:j("compose.status.".concat(U),{count:S.slice(F+1,S.length-1)}),placement:"top",showInTag:!0}},e.id)})})}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"",search:!1,width:150,render:function(c,e,O,g,h){return e.setting.createdAt?new Date(e.setting.createdAt).toLocaleString():"-"}},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"",search:!1,width:150,render:function(c,e,O,g,h){return e.setting.updatedAt?new Date(e.setting.updatedAt).toLocaleString():"-"}},{title:"\u64CD\u4F5C",width:80,valueType:"option",key:"option",render:function(c,e,O,g,h){return e.setting.type!="dangling"&&(0,i.jsxs)(d.Z,{split:(0,i.jsx)(R.Z,{type:"vertical"}),children:[(0,i.jsx)(o.Link,{to:"/compose/deploy/"+(e.id||e.name),children:(0,i.jsx)(P.Z,{title:"\u90E8\u7F72",children:(0,i.jsx)(A.Z,{})})},"3"),(0,i.jsx)(o.Link,{to:"/compose/create?id="+(e.id||e.name),children:(0,i.jsx)(P.Z,{title:"\u7F16\u8F91",children:(0,i.jsx)(Z.Z,{})})},"4"),(0,i.jsx)(r.Z.Link,{onClick:l()(s()().mark(function S(){var U,F;return s()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,(0,x.Pn)({id:e.id});case 2:U=G.sent,U&&U.data&&U.data.detail&&(F=new Blob([U.data.detail.yaml],{type:"text/plain"}),(0,C.saveAs)(F,e.name+"-compose.yaml"));case 4:case"end":return G.stop()}},S)})),children:(0,i.jsx)(P.Z,{title:"\u4E0B\u8F7D",children:(0,i.jsx)(f.Z,{})})},"2")]})}}],rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0,getCheckboxProps:function(c){return{disabled:c.setting.type=="dangling"||c.setting.type=="outPath"}}},tableAlertOptionRender:function(c){var e=c.selectedRows;return(0,i.jsx)(d.Z,{size:16,children:(0,i.jsx)(m.Z,{danger:!0,type:"primary",action:function(){return(0,x.ik)({id:e.map(function(g){return g.id})})},onSuccess:function(){var g,h;return!((g=B.current)===null||g===void 0)&&g.reloadAndRest&&((h=B.current)===null||h===void 0||h.reloadAndRest()),!0},onError:function(){var g,h;return!((g=B.current)===null||g===void 0)&&g.reset&&((h=B.current)===null||h===void 0||h.reset()),!0},messageSuccess:"delete",confirm:(0,i.jsx)(d.Z,{style:{width:280},direction:"vertical",children:(0,i.jsx)(r.Z.Text,{children:"\u5220\u9664\u524D\u8BF7\u5148\u9500\u6BC1\u76F8\u5173\u5BB9\u5668\uFF0C\u786E\u8BA4\u5417\uFF1F"})}),children:"\u6279\u91CF\u5220\u9664"})})},pagination:(0,v.O)(),search:{collapsed:!1},actionRef:B,columnsState:(0,v.j)("compose-list")})})}},90098:function(K,p,n){n.d(p,{CT:function(){return o},GG:function(){return w},MG:function(){return z},Oh:function(){return R},Pn:function(){return u},U_:function(){return E},VN:function(){return C},iE:function(){return b},ik:function(){return r},im:function(){return x},mg:function(){return M},pm:function(){return Z},xC:function(){return y}});var T=n(15009),s=n.n(T),_=n(99289),l=n.n(_),m=n(63713);function x(t){return A.apply(this,arguments)}function A(){return A=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/create",{method:"POST",data:a}));case 1:case"end":return e.stop()}},t)})),A.apply(this,arguments)}function Z(t){return f.apply(this,arguments)}function f(){return f=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/get-list",{method:"POST",data:a}));case 1:case"end":return e.stop()}},t)})),f.apply(this,arguments)}function u(t){return W.apply(this,arguments)}function W(){return W=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.id=String(a.id),e.abrupt("return",(0,m.request)("/api/app/compose/get-task",{method:"POST",data:a}));case 2:case"end":return e.stop()}},t)})),W.apply(this,arguments)}function o(t){return I.apply(this,arguments)}function I(){return I=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.id=String(a.id),e.abrupt("return",(0,m.request)("/api/app/compose/get-detail",{method:"POST",data:a}));case 2:case"end":return e.stop()}},t)})),I.apply(this,arguments)}function r(t){return d.apply(this,arguments)}function d(){return d=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/delete",{method:"POST",data:a}));case 1:case"end":return e.stop()}},t)})),d.apply(this,arguments)}function R(t){return P.apply(this,arguments)}function P(){return P=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.id=String(a.id),e.abrupt("return",(0,m.request)("/api/app/compose/container-deploy",{method:"POST",data:a}));case 2:case"end":return e.stop()}},t)})),P.apply(this,arguments)}function M(t){return D.apply(this,arguments)}function D(){return D=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.id=String(a.id),e.abrupt("return",(0,m.request)("/api/app/compose/container-destroy",{method:"POST",data:a}));case 2:case"end":return e.stop()}},t)})),D.apply(this,arguments)}function w(t){return v.apply(this,arguments)}function v(){return v=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.id=String(a.id),e.abrupt("return",(0,m.request)("/api/app/compose/container-ctrl",{method:"POST",data:a}));case 2:case"end":return e.stop()}},t)})),v.apply(this,arguments)}function C(t){return L.apply(this,arguments)}function L(){return L=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.id=String(a.id),e.abrupt("return",(0,m.request)("/api/app/compose/container-log",{method:"POST",data:a}));case 2:case"end":return e.stop()}},t)})),L.apply(this,arguments)}function E(t){return i.apply(this,arguments)}function i(){return i=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/container-process-kill",{method:"POST",data:a}));case 1:case"end":return e.stop()}},t)})),i.apply(this,arguments)}function z(t){return k.apply(this,arguments)}function k(){return k=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/get-from-uri",{method:"POST",data:a}));case 1:case"end":return e.stop()}},t)})),k.apply(this,arguments)}function y(t){return B.apply(this,arguments)}function B(){return B=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/parse",{method:"POST",data:a}));case 1:case"end":return e.stop()}},t)})),B.apply(this,arguments)}function b(t){return j.apply(this,arguments)}function j(){return j=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/common/store/deploy",{method:"POST",data:a}));case 1:case"end":return e.stop()}},t)})),j.apply(this,arguments)}},67255:function(K,p,n){n.d(p,{O:function(){return T},j:function(){return s}});function T(){var _,l=parseInt((_=localStorage.getItem("dpanel-pagesize"))!==null&&_!==void 0?_:"0");return{showSizeChanger:!0,defaultPageSize:l!=null?l:20}}function s(_){var l="dpanel-table-column-".concat(_),m={};if(localStorage.getItem(l)){var x;m=JSON.parse((x=localStorage.getItem(l))!==null&&x!==void 0?x:"{}")}return{defaultValue:m,onChange:function(Z){localStorage.setItem("dpanel-table-column-".concat(_),JSON.stringify(Z))}}}}}]);
