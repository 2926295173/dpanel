"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4037],{63434:function(J,Z,e){var c=e(1413),m=e(45987),B=e(22270),C=e(84567),y=e(67294),D=e(90789),P=e(35510),j=e(85893),E=["options","fieldProps","proFieldProps","valueEnum"],u=y.forwardRef(function(r,t){var M=r.options,F=r.fieldProps,R=r.proFieldProps,w=r.valueEnum,L=(0,m.Z)(r,E);return(0,j.jsx)(P.Z,(0,c.Z)({ref:t,valueType:"checkbox",valueEnum:(0,B.h)(w,void 0),fieldProps:(0,c.Z)({options:M},F),lightProps:(0,c.Z)({labelFormatter:function(){return(0,j.jsx)(P.Z,(0,c.Z)({ref:t,valueType:"checkbox",mode:"read",valueEnum:(0,B.h)(w,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,c.Z)({options:M},F),proFieldProps:R},L))}},L.lightProps),proFieldProps:R},L))}),O=y.forwardRef(function(r,t){var M=r.fieldProps,F=r.children;return(0,j.jsx)(C.Z,(0,c.Z)((0,c.Z)({ref:t},M),{},{children:F}))}),h=(0,D.G)(O,{valuePropName:"checked"}),x=h;x.Group=u,Z.Z=x},67610:function(J,Z,e){e.r(Z),e.d(Z,{default:function(){return xe}});var c=e(15009),m=e.n(c),B=e(99289),C=e.n(B),y=e(5574),D=e.n(y),P=e(68602),j=e(87547),E=e(87462),u=e(67294),O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"},h=O,x=e(84089),r=function(s,o){return u.createElement(x.Z,(0,E.Z)({},s,{ref:o,icon:h}))},t=u.forwardRef(r),M=t,F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},R=F,w=function(s,o){return u.createElement(x.Z,(0,E.Z)({},s,{ref:o,icon:R}))},L=u.forwardRef(w),U=L,re=e(12119),Q=e(10915),T=e(1413),te=e(45987),ae=e(21532),oe=e(93967),se=e.n(oe),ie=e(97269),G=e(4942),le=e(98082),ue=function(s){return(0,G.Z)((0,G.Z)({},s.componentCls,{"&-container":{display:"flex",flex:"1",flexDirection:"column",height:"100%",paddingInline:32,paddingBlock:24,overflow:"auto",background:"inherit"},"&-top":{textAlign:"center"},"&-header":{display:"flex",alignItems:"center",justifyContent:"center",height:"44px",lineHeight:"44px",a:{textDecoration:"none"}},"&-title":{position:"relative",insetBlockStart:"2px",color:"@heading-color",fontWeight:"600",fontSize:"33px"},"&-logo":{width:"44px",height:"44px",marginInlineEnd:"16px",verticalAlign:"top",img:{width:"100%"}},"&-desc":{marginBlockStart:"12px",marginBlockEnd:"40px",color:s.colorTextSecondary,fontSize:s.fontSize},"&-main":{minWidth:"328px",maxWidth:"580px",margin:"0 auto","&-other":{marginBlockStart:"24px",lineHeight:"22px",textAlign:"start"}}}),"@media (min-width: @screen-md-min)",(0,G.Z)({},"".concat(s.componentCls,"-container"),{paddingInline:0,paddingBlockStart:32,paddingBlockEnd:24,backgroundRepeat:"no-repeat",backgroundPosition:"center 110px",backgroundSize:"100%"}))};function de(a){return(0,le.Xj)("LoginForm",function(s){var o=(0,T.Z)((0,T.Z)({},s),{},{componentCls:".".concat(a)});return[ue(o)]})}var n=e(85893),ce=["logo","message","contentStyle","title","subTitle","actions","children","containerStyle","otherStyle"];function me(a){var s,o=a.logo,A=a.message,ee=a.contentStyle,W=a.title,N=a.subTitle,V=a.actions,$=a.children,z=a.containerStyle,f=a.otherStyle,d=(0,te.Z)(a,ce),v=(0,Q.YB)(),i=d.submitter===!1?!1:(0,T.Z)((0,T.Z)({searchConfig:{submitText:v.getMessage("loginForm.submitText","\u767B\u5F55")}},d.submitter),{},{submitButtonProps:(0,T.Z)({size:"large",style:{width:"100%"}},(s=d.submitter)===null||s===void 0?void 0:s.submitButtonProps),render:function(_,ne){var Y,ye=ne.pop();if(typeof(d==null||(Y=d.submitter)===null||Y===void 0?void 0:Y.render)=="function"){var k,X;return d==null||(k=d.submitter)===null||k===void 0||(X=k.render)===null||X===void 0?void 0:X.call(k,_,ne)}return ye}}),l=(0,u.useContext)(ae.ZP.ConfigContext),S=l.getPrefixCls("pro-form-login"),b=de(S),g=b.wrapSSR,K=b.hashId,p=function(_){return"".concat(S,"-").concat(_," ").concat(K)},H=(0,u.useMemo)(function(){return o?typeof o=="string"?(0,n.jsx)("img",{src:o}):o:null},[o]);return g((0,n.jsxs)("div",{className:se()(p("container"),K),style:z,children:[(0,n.jsxs)("div",{className:"".concat(p("top")," ").concat(K).trim(),children:[W||H?(0,n.jsxs)("div",{className:"".concat(p("header")),children:[H?(0,n.jsx)("span",{className:p("logo"),children:H}):null,W?(0,n.jsx)("span",{className:p("title"),children:W}):null]}):null,N?(0,n.jsx)("div",{className:p("desc"),children:N}):null]}),(0,n.jsxs)("div",{className:p("main"),style:(0,T.Z)({width:328},ee),children:[(0,n.jsxs)(ie.A,(0,T.Z)((0,T.Z)({isKeyPressSubmit:!0},d),{},{submitter:i,children:[A,$]})),V?(0,n.jsx)("div",{className:p("main-other"),style:f,children:V}):null]})]}))}var I=e(5966),he=e(97462),fe=e(63434),ve=e(63713),ge=e(9361),q=e(38925),pe=e(92398),xe=function(){var a=ge.Z.useToken(),s=a.token,o=(0,ve.useModel)("@@initialState"),A=o.initialState,ee=o.loading,W=o.error,N=o.refresh,V=o.setInitialState,$=(0,u.useState)({loginType:"account"}),z=D()($,2),f=z[0],d=z[1];return(0,u.useEffect)(function(){var v;window.document.title=(v=A==null?void 0:A.theme.siteTitle)!==null&&v!==void 0?v:"DPanel - Docker \u7BA1\u7406\u9762\u677F",(0,P.Nr)().then(function(i){var l={loginType:"account"};i.data.showBuildName&&i.data.family!="lite"&&(l.showBuildName=!0),i.data.showRegister&&(l.loginType="register"),i.data.family=="demo"&&(l.showDemo=!0),i.data.showTwoFa&&(l.showTwoFa=!0),d(l)})},[]),(0,n.jsxs)(Q._Y,{hashed:!1,children:[f&&f.showBuildName&&(0,n.jsx)(q.Z,{type:"error",message:"\u60A8\u521B\u5EFA\u7684\u9762\u677F\u5BB9\u5668\u540D\u79F0\u975E\u9ED8\u8BA4\u7684 dpanel\uFF0C\u8BF7\u91CD\u5EFA\u5E76\u901A\u8FC7\u73AF\u5883\u53D8\u91CF -e APP_NAME= \u6307\u5B9A\u65B0\u7684\u5BB9\u5668\u540D\u79F0\u3002",banner:!0}),f&&f.showDemo&&(0,n.jsx)(q.Z,{type:"error",message:"\u5F53\u524D\u4E3A\u6F14\u793A\u7AD9\uFF0C\u7981\u7528 docker \u76F8\u5173\u529F\u80FD\u3002\u5E10\u53F7\u5BC6\u7801\u4E3A admin 123456",banner:!0}),(0,n.jsx)("div",{style:{backgroundColor:s.colorBgContainer,height:"91vh",paddingTop:"200px"},children:(0,n.jsxs)(me,{onFinish:function(){var v=C()(m()().mark(function i(l){var S;return m()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,P.n$)({username:l.username,password:l.password,confirmPassword:l.confirmPassword,autoLogin:l.autoLogin,code:l.code});case 2:if(S=g.sent,!S.data.accessToken){g.next=10;break}return localStorage.setItem("token",S.data.accessToken),N(),window.location.href="/dpanel/ui/home",g.abrupt("return");case 10:return g.abrupt("return",!1);case 11:case"end":return g.stop()}},i)}));return function(i){return v.apply(this,arguments)}}(),logo:"",title:(0,n.jsx)("a",{href:"https://dpanel.cc",target:"_blank",children:(0,n.jsx)("img",{src:"/dpanel/static/asset/logo.png",width:"350"})}),subTitle:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{}),(0,n.jsx)("br",{})]}),children:[(0,n.jsx)(pe.Z,{centered:!0,activeKey:f.loginType,items:[{icon:(0,n.jsx)(j.Z,{}),key:"account",label:"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55"},{icon:(0,n.jsx)(M,{}),key:"register",label:"\u914D\u7F6E\u7BA1\u7406\u5458\u7528\u6237\u540D\u53CA\u5BC6\u7801"}].filter(function(v){return v.key==f.loginType}),onChange:function(i){console.log(i)}}),(0,n.jsx)(I.Z,{name:"username",fieldProps:{size:"large",prefix:(0,n.jsx)(j.Z,{className:"prefixIcon"})},placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"}]},"username"),(0,n.jsx)(I.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,n.jsx)(U,{className:"prefixIcon"})},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"}]},"password"),f.showTwoFa&&(0,n.jsx)(I.Z,{name:"code",placeholder:"\u8BF7\u8F93\u5165\u53CC\u56E0\u7D20\u9A8C\u8BC1\u7801",rules:[{required:!0}],fieldProps:{maxLength:6,size:"large",prefix:(0,n.jsx)(re.Z,{className:"prefixIcon"})}}),f.loginType=="register"&&(0,n.jsx)(he.Z,{name:["password"],children:function(i){var l=i.password;return(0,n.jsx)(I.Z.Password,{fieldProps:{size:"large",prefix:(0,n.jsx)(U,{className:"prefixIcon"})},placeholder:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801",name:"confirmPassword",dependencies:["password"],rules:[{required:!0,message:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801\uFF01"},function(S){var b=S.getFieldValue;return{validator:function(K,p){return!p||b("password")===p?Promise.resolve():Promise.reject(new Error("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4"))}}}]},"confirmPassword")}}),f.loginType=="twoFa"&&(0,n.jsx)(I.Z,{fieldProps:{size:"large",prefix:(0,n.jsx)(U,{className:"prefixIcon"})},placeholder:"\u8BF7\u8F93\u51656\u4F4D\u6388\u6743\u7801",rules:[{required:!0}]}),(0,n.jsx)("div",{style:{marginBlockEnd:24},children:(0,n.jsx)(fe.Z,{noStyle:!0,name:"autoLogin",initialValue:!0,children:"\u4FDD\u6301\u767B\u5F55\u72B6\u6001"})})]})})]})}},68602:function(J,Z,e){e.d(Z,{Gk:function(){return u},Nr:function(){return j},n$:function(){return D}});var c=e(15009),m=e.n(c),B=e(99289),C=e.n(B),y=e(63713);function D(h){return P.apply(this,arguments)}function P(){return P=C()(m()().mark(function h(x){return m()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,y.request)("/api/common/user/login",{method:"POST",data:x}));case 1:case"end":return t.stop()}},h)})),P.apply(this,arguments)}function j(){return E.apply(this,arguments)}function E(){return E=C()(m()().mark(function h(){return m()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,y.request)("/api/common/user/login-info",{method:"POST"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},h)})),E.apply(this,arguments)}function u(h){return O.apply(this,arguments)}function O(){return O=C()(m()().mark(function h(x){return m()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,y.request)("/api/common/user/theme",{method:"POST",data:x});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},h)})),O.apply(this,arguments)}}}]);
