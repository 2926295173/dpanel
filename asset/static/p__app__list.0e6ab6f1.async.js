"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4316],{16165:function(ye,Y,e){var J=e(87462),o=e(1413),X=e(4942),c=e(45987),O=e(67294),W=e(93967),x=e.n(W),P=e(42550),G=e(63017),B=e(41755),F=["className","component","viewBox","spin","rotate","tabIndex","onClick","children"],y=O.forwardRef(function(E,ne){var ie=E.className,w=E.component,Z=E.viewBox,q=E.spin,re=E.rotate,U=E.tabIndex,ue=E.onClick,C=E.children,h=(0,c.Z)(E,F),g=O.useRef(),N=(0,P.x1)(g,ne);(0,B.Kp)(!!(w||C),"Should have `component` prop or `children`."),(0,B.C3)(g);var i=O.useContext(G.Z),pe=i.prefixCls,ce=pe===void 0?"anticon":pe,Oe=i.rootClassName,ve=x()(Oe,ce,(0,X.Z)({},"".concat(ce,"-spin"),!!q&&!!w),ie),_=x()((0,X.Z)({},"".concat(ce,"-spin"),!!q)),z=re?{msTransform:"rotate(".concat(re,"deg)"),transform:"rotate(".concat(re,"deg)")}:void 0,m=(0,o.Z)((0,o.Z)({},B.vD),{},{className:_,style:z,viewBox:Z});Z||delete m.viewBox;var Me=function(){return w?O.createElement(w,m,C):C?((0,B.Kp)(!!Z||O.Children.count(C)===1&&O.isValidElement(C)&&O.Children.only(C).type==="use","Make sure that you provide correct `viewBox` prop (default `0 0 1024 1024`) to the icon."),O.createElement("svg",(0,J.Z)({},m,{viewBox:Z}),C)):null},le=U;return le===void 0&&ue&&(le=-1),O.createElement("span",(0,J.Z)({role:"img"},h,{ref:N,tabIndex:le,onClick:ue,className:ve}),Me())});y.displayName="AntdIcon",Y.Z=y},36435:function(ye,Y,e){var J=e(15009),o=e.n(J),X=e(64599),c=e.n(X),O=e(99289),W=e.n(O),x=e(9783),P=e.n(x),G=e(5574),B=e.n(G),F=e(67294),y=e(184),E=e(38345),ne=e(97269),ie=e(97321),w=e(97462),Z=e(64317),q=e(5966),re=e(86615),U=e(68602),ue=e(28036),C=e(83403),h=e(24963),g=e(1699),N=e(29177),i=e(45742),pe=e(43425),ce=e(44349),Oe=e(3616),ve=e(36146),_=e(85893),z=(0,F.forwardRef)(function(m,Me){var le=(0,F.useState)(!1),he=B()(le,2),ae=he[0],t=he[1],te=(0,F.useRef)(),Ze=(0,F.useContext)(h.Z),be=Ze.message,Ie=(0,F.useState)([]),Se=B()(Ie,2),je=Se[0],Te=Se[1],$=new ve.Uo("components.permissionButton"),oe=P()(P()(P()(P()(P()({},C.W6.CONTAINER,"Id"),C.W6.APPSTORE,"name"),C.W6.COMPOSE,"name"),C.W6.REGISTRY,"serverAddress"),C.W6.DOCKER_ENV,"name"),$e=P()(P()(P()(P()(P()({},C.W6.CONTAINER,"name"),C.W6.APPSTORE,"name"),C.W6.COMPOSE,"name"),C.W6.REGISTRY,"title"),C.W6.DOCKER_ENV,"title"),Ae=oe[m.type],Ke=$e[m.type],Fe=m.selected.map(function(M){return M[oe[m.type]]});return F.useEffect(function(){if(ae){if(!m.selected||m.selected.length==0){be.error(ve.FD.format("message.noDataSelect")),t(!1);return}(0,U.dP)({permission:{uri:m.type,key:Ae,value:Fe}}).then(function(M){var j;(j=te.current)===null||j===void 0||j.setFieldValue("list",Object.keys(M.data.list).map(function(b){return{name:b,type:M.data.list[b].type,users:M.data.list[b].users}}))}),(0,U.lE)().then(function(M){var j,b=(j=M.data)===null||j===void 0||(j=j.list)===null||j===void 0?void 0:j.map(function(I){return{label:I.username,value:I.username}});Te(b)})}},[ae]),(0,_.jsx)(g.u,{access:["canSeeEnableEe","canSeeFounder","canSeeManage"],children:(0,_.jsxs)(y.a,{name:"create",title:$.format("drawerTitle"),open:ae,onOpenChange:function(j){if(!j){var b;(b=te.current)===null||b===void 0||b.resetFields()}t(j)},drawerProps:{forceRender:!0,width:Oe.R_},formRef:te,trigger:(0,_.jsx)(ue.ZP,{icon:(0,_.jsx)(N.Z,{}),children:$.format("drawerTriggerButton")}),onFinish:function(){var M=W()(o()().mark(function j(b){var I,L,S;return o()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:I=c()(b.list),T.prev=1,I.s();case 3:if((L=I.n()).done){T.next=9;break}return S=L.value,T.next=7,(0,U.Db)({usernames:S.users,permissionType:S.type,permission:{uri:m.type,key:Ae,showKey:Ke,value:[S.name]}});case 7:T.next=3;break;case 9:T.next=14;break;case 11:T.prev=11,T.t0=T.catch(1),I.e(T.t0);case 14:return T.prev=14,I.f(),T.finish(14);case 17:be.success(ve.FD.format("finish")),t(!1),m.onSuccess();case 20:case"end":return T.stop()}},j,null,[[1,11,14,17]])}));return function(j){return M.apply(this,arguments)}}(),children:[(0,_.jsxs)(E.Z,{ghost:!0,title:(0,_.jsx)(i.Z,{}),subTitle:$.format("batchTitle"),children:[(0,_.jsx)(ne.A.Item,{name:"type",style:{marginBottom:0},children:(0,_.jsx)(ie.Z.Group,{defaultValue:"admin",onChange:function(j){var b,I,L=(b=te.current)===null||b===void 0?void 0:b.getFieldValue("list");L.forEach(function(S){S.type=j,S.users=[]}),(I=te.current)===null||I===void 0||I.setFieldValue("list",L)},children:["admin","restricted","public"].map(function(M){return(0,_.jsx)(ie.Z,{style:{width:240},title:$.format("dataTypeOption.".concat(M)),description:$.format("dataTypeOptionDesc.".concat(M)),value:M},M)})})}),(0,_.jsx)(w.Z,{name:["type"],children:function(j){var b=j.type;if(b==="restricted")return(0,_.jsx)(Z.Z,{mode:"multiple",name:"usernames",label:$.format("formUsernames"),onChange:function(L){var S,V,T=(S=te.current)===null||S===void 0?void 0:S.getFieldValue("list");T.forEach(function(H){H.users=L}),(V=te.current)===null||V===void 0||V.setFieldValue("list",T)},rules:[{required:!0}],request:W()(o()().mark(function I(){var L,S,V;return o()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!(je.length>0)){H.next=2;break}return H.abrupt("return",je);case 2:return H.next=4,(0,U.lE)();case 4:return S=H.sent,V=(L=S.data)===null||L===void 0||(L=L.list)===null||L===void 0?void 0:L.map(function(Le){return{label:Le.username,value:Le.username}}),Te(V),H.abrupt("return",V);case 8:case"end":return H.stop()}},I)}))})}})]}),(0,_.jsx)(E.Z,{ghost:!0,title:(0,_.jsx)(pe.Z,{}),subTitle:$.format("dataTitle"),children:(0,_.jsx)(ce.Z,{name:"list",hideCopyButton:!0,gap:10,items:[{name:"name",label:$.format("dataName"),render:function(j,b,I){var L=I.getCurrentRowData();return(0,_.jsx)(q.Z,{disabled:!0,label:$.format("dataName"),width:"sm",name:"name"})}},{name:"type",label:$.format("dataType"),render:function(j,b,I){var L=I.getCurrentRowData();return(0,_.jsx)(re.Z.Group,{label:$.format("dataType"),name:"type",radioType:"button",options:["admin","public","restricted"].map(function(S){return{label:$.format("dataTypeOption.".concat(S)),value:S}})})}},{name:"users",label:$.format("dataUsers"),render:function(j,b,I){return(0,_.jsx)(w.Z,{name:["type"],children:function(S){var V=S.type;if(V=="restricted")return(0,_.jsx)(Z.Z,{width:"sm",mode:"tags",name:"users",label:$.format("dataUsers"),options:je})}})}}]})})]})})});Y.Z=z},42939:function(ye,Y,e){e.r(Y),e.d(Y,{default:function(){return ln}});var J=e(64599),o=e.n(J),X=e(15009),c=e.n(X),O=e(99289),W=e.n(O),x=e(5574),P=e.n(x),G=e(41482),B=e(97269),F=e(62370),y=e(42075),E=e(25593),ne=e(40411),ie=e(34041),w=e(96074),Z=e(83062),q=e(84567),re=e(50136),U=e(82346),ue=e(45742),C=e(89035),h=e(95591),g=e(86548),N=e(74842),i=e(87784),pe=e(33160),ce=e(30159),Oe=e(94359),ve=e(78498),_=e(13822),z=e(80821),m=e(67294),Me=e(62597),le=e(87662),he=e(16165),ae=e(5251),t=e(85893),te=function(){return(0,t.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18403",children:(0,t.jsx)("path",{d:"M224 192v64H96v576h128v64h64v-64h64v64h64v-64h64v64h64v-64h64v64h64v-64h64v64h64v-64h128V256h-128V192h-64v64h-64V192h-64v64h-64V192h-64v64h-64V192h-64v64H288V192z m-64 128h704v448H160z m96 64c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32zM256 512c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m512 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32zM256 640c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z","p-id":"18404"})})},Ze=function(){return(0,t.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18546",children:(0,t.jsx)("path",{d:"M64 224v576h416v-32c0-17.76 14.24-32 32-32 17.76 0 32 14.24 32 32v32h416V224z m64 64h768v288H128z m64 64v160h192v-160z m224 0v160h192v-160z m224 0v160h192v-160zM256 416h64v32H256z m224 0h64v32h-64z m224 0h64v32h-64zM128 640h768v96h-300.992c-14.144-35.52-42.752-64-83.008-64-40.256 0-68.864 28.48-83.008 64H128z","p-id":"18547"})})};function be(A){var Ce,me,fe,v,Pe,_e;return(0,t.jsx)(t.Fragment,{children:A.value&&A.value.memory&&A.value.memory.out>0?(0,t.jsxs)(y.Z,{children:[(0,t.jsxs)(Z.Z,{title:"Cpu: ".concat((Ce=A.value)===null||Ce===void 0?void 0:Ce.cpu.toFixed(2),"%"),children:[(0,t.jsx)(he.Z,{component:te,style:{width:15,lineHeight:20}})," ","".concat((me=A.value)===null||me===void 0?void 0:me.cpu.toFixed(2),"%")]}),(0,t.jsxs)(Z.Z,{title:"Memory: ".concat((0,ae.FI)((fe=A.value)===null||fe===void 0?void 0:fe.memory.in)," / ").concat((0,ae.FI)((v=A.value)===null||v===void 0?void 0:v.memory.out)),children:[(0,t.jsx)(he.Z,{component:Ze,style:{width:15,lineHeight:20}})," ","".concat((((Pe=A.value)===null||Pe===void 0?void 0:Pe.memory.in)/((_e=A.value)===null||_e===void 0?void 0:_e.memory.out)*100).toFixed(2),"%")]})]}):""})}var Ie=e(67255),Se=e(37413),je=e(46357),Te=e(99922),$=e(83403),oe=e(1699),$e=e(20578),Ae=e(24963),Ke=e(99861),Fe=e(78914),M=e(29453),j=e(8287),b=e(93362),I=e(78451),L=e(36146),S=e(36435),V=(0,m.forwardRef)(function(A,Ce){var me,fe,v=(0,m.useRef)(),Pe=(0,m.useState)(""),_e=P()(Pe,2),on=_e[0],dn=_e[1],cn=(0,m.useState)(),He=P()(cn,2),de=He[0],vn=He[1],mn=(0,m.useState)(1),Ge=P()(mn,2),fn=Ge[0],pn=Ge[1],hn=(0,m.useState)([]),Qe=P()(hn,2),Ee=Qe[0],_n=Qe[1],Ye=(0,m.useRef)(),Je=(0,m.useRef)(),Xe=(0,m.useRef)(),qe=(0,m.useRef)(),Be=(0,U.useAccess)(),En=(0,m.useState)(),en=P()(En,2),ge=en[0],gn=en[1],nn=(0,m.useRef)(),xe=(0,m.useRef)(),rn=(0,m.useRef)(),Rn=(0,m.useState)([]),an=P()(Rn,2),We=an[0],On=an[1],jn=(0,m.useContext)(Ae.Z),yn=jn.lang,Cn=(0,U.useLocation)();return(0,m.useImperativeHandle)(Ce,function(){return{reload:function(){var u,s;!((u=v.current)===null||u===void 0)&&u.reloadAndRest&&((s=v.current)===null||s===void 0||s.reloadAndRest())}}}),(0,m.useEffect)(function(){(0,le.K3)().then(function(R){var u;dn((u=R.data.serverUrl)!==null&&u!==void 0?u:"")}),!Be.canSeeEnableCe&&(0,$e.q)().then(function(R){gn(R.data)}),(0,M.e1)().then(function(R){On(R.data.list)})},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(je.Z,{ref:Ye,onFinish:function(){var u,s;!((u=v.current)===null||u===void 0)&&u.reloadAndRest&&((s=v.current)===null||s===void 0||s.reloadAndRest())},onUpgradeFinish:function(){var u,s;!((u=v.current)===null||u===void 0)&&u.reloadAndRest&&((s=v.current)===null||s===void 0||s.reloadAndRest())}}),(0,t.jsx)(Te.Z,{ref:Je}),(0,t.jsx)(j.Z,{ref:Xe}),(0,t.jsx)(Ke.Z,{ref:xe,finishAutoHide:!0}),(0,t.jsx)(Fe.Z,{ref:rn}),(0,t.jsx)(b.Z,{ref:qe}),(0,t.jsx)(G.Z,{actionRef:v,scroll:{x:"max-content"},columns:[{key:"title",title:"\u540D\u79F0",width:300,dataIndex:"siteTitle",sorter:function(u,s){return u.Names[0].localeCompare(s.Names[0])},sortDirections:["descend","ascend"],render:function(u,s,K,f,a){var r=(0,ae.fi)(s.Names[0],"/");de!=null&&de.siteList&&de.siteList.map(function(l){l.containerInfo&&l.containerInfo.Id==s.Id&&l.siteTitle!=""&&(r=l.siteTitle)}),s.Labels&&s.Labels["com.dpanel.container.title"]&&(r=s.Labels["com.dpanel.container.title"]);var d=ge&&ge.container?ge.container.find(function(l){return l.id==s.Id}):!1;return(0,t.jsxs)(y.Z,{direction:"vertical",children:[(0,t.jsx)(E.Z.Link,{onClick:function(){var D;(D=Ye.current)===null||D===void 0||D.show(s.Id)},children:(0,t.jsx)(I.Z,{content:r})}),!Be.canSeeEnableCe&&d&&(0,t.jsx)(ne.Z,{count:"new"})]})}},{title:"\u6807\u7B7E",hidden:!0,dataIndex:"tag",renderFormItem:function(u,s,K,f){return(0,t.jsx)(ie.Z,{options:We&&We.map(function(a){return{lable:a.tag,value:a.tag}})})}},{key:"ports",title:(0,t.jsx)(ve.Z,{title:"\u5BF9\u5916\u8BBF\u95EE",help:"\u6216\u7ED1\u5B9A\u5BB9\u5668\u57DF\u540D\uFF0C\u6216\u662F\u5728\u591A\u73AF\u5883\u7BA1\u7406\u4E2D\u914D\u7F6E\u5F53\u524D\u73AF\u5883\u7684\u8BBF\u95EE ip \u6216\u662F\u57DF\u540D\u3002"}),width:150,dataIndex:"ports",search:!1,render:function(u,s,K,f){var a=[],r=[],d=[];return s!=null&&s.Ports&&s.Ports.map(function(l,D){l.PublicPort?a.push(l):r.push(l)}),de!=null&&de.domainList&&de.domainList.map(function(l,D){s.Names.indexOf(l.containerId)>-1&&d.push(l.setting.enableSSL?"https://"+l.serverName:"http://"+l.serverName)}),(0,t.jsx)(Se.Z,{publicPort:a,privatePort:r,domain:d,serverIp:on})}},{title:"\u5360\u7528\u7387",width:200,search:!1,key:"usage",sorter:function(u,s){var K={},f={};if(Ee){var a,r;K=(a=Ee.find(function(d){return u.Id.startsWith(d.container)}))!==null&&a!==void 0?a:{},f=(r=Ee.find(function(d){return s.Id.startsWith(d.container)}))!==null&&r!==void 0?r:{}}return JSON.stringify(K).localeCompare(JSON.stringify(f))},render:function(u,s,K,f,a){if(!Ee||Ee.length<=0)return"";var r={};return Ee.filter(function(d){s.Id.indexOf(d.container)==0&&(r=d)}),(0,t.jsx)(be,{value:r})}},{title:"\u8FD0\u884C\u72B6\u6001",key:"status",dataIndex:["container","status"],search:!1,width:130,render:function(u,s,K,f){return s.Status.indexOf("(healthy)")>-1?s.State="healthy":s.Status.indexOf("(unhealthy)")>-1&&(s.State="unhealthy"),[(0,t.jsx)("div",{children:(0,t.jsx)(Oe.Z,{status:s.State,message:{content:s.Status,placement:"top"}})},"status")]}},{title:"\u6240\u5C5E\u955C\u50CF",key:"image",search:!1,width:150,render:function(u,s,K,f){return(0,t.jsx)("span",{style:{wordBreak:"break-word"},children:(0,t.jsx)(E.Z.Link,{onClick:function(){var r;(r=rn.current)===null||r===void 0||r.show(s.Image)},children:s.Image})})}},{title:"\u521B\u5EFA\u65E5\u671F",width:170,dataIndex:["Created"],render:function(u,s,K,f,a){return(0,ae.ZM)(s.Created*1e3)},sorter:function(u,s){return new Date(u.Created*1e3).toISOString().localeCompare(new Date(s.Created*1e3).toISOString())},search:!1,sortDirections:["descend","ascend"]},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:200,fixed:"right",hidden:!Be.canSeeContainerListManage,render:function(u,s,K,f){return(0,t.jsxs)(y.Z,{split:(0,t.jsx)(w.Z,{type:"vertical"}),children:[(0,t.jsx)(E.Z.Link,{onClick:function(){var r;(r=Xe.current)===null||r===void 0||r.show(s.Id)},children:(0,t.jsx)(Z.Z,{title:"\u8FD0\u884C\u65E5\u5FD7",children:(0,t.jsx)(ue.Z,{})})},"log"),(s.State=="running"||s.State=="healthy")&&(0,t.jsx)(E.Z.Link,{onClick:function(){var r;(r=Je.current)===null||r===void 0||r.show({url:"/console/container/".concat(s.Id),title:(0,ae.fi)(s.Names[0],"/")})},children:(0,t.jsx)(Z.Z,{title:"\u63A7\u5236\u53F0",children:(0,t.jsx)(C.Z,{})})},"console"),(s.State=="running"||s.State=="healthy")&&(0,t.jsx)(E.Z.Link,{onClick:function(){var r;(r=qe.current)===null||r===void 0||r.showContainer(s.Names[0])},children:(0,t.jsx)(Z.Z,{title:"\u6587\u4EF6\u7BA1\u7406",children:(0,t.jsx)(h.Z,{})})},"file"),(0,t.jsx)(U.Link,{to:"/app/create/image?id="+s.Id,children:(0,t.jsx)(Z.Z,{title:"\u7F16\u8F91\u5BB9\u5668",children:(0,t.jsx)(g.Z,{})})},"edit")]})}}],rowKey:"Id",request:function(){var R=W()(c()().mark(function u(s,K,f){var a,r,d,l,D,n,Q;return c()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,(0,_.IE)({tag:s.title,siteTitle:s.title,md5:s.Id});case 2:return r=se.sent,d="",l=[],A.searchPrefix&&(d=A.searchPrefix),A.searchNameList&&(l=A.searchNameList),s.tag&&We&&(l=(D=(n=We.find(function(k){return k.tag==s.tag}))===null||n===void 0?void 0:n.item.map(function(k){var ee;return(ee=k.name)!==null&&ee!==void 0?ee:""}))!==null&&D!==void 0?D:[]),Q=[],d!=""?r.data.list.map(function(k){k.Names.map(function(ee){ee.startsWith("/"+d)&&Q.push(k)})}):l&&l.length>0?r.data.list.map(function(k){k.Names.map(function(ee){l.indexOf(ee)>-1&&Q.push(k)})}):Q=r.data.list,vn(r.data),pn(fn+1),(0,le.Cz)({follow:!1}).then(function(k){_n(k.data.list)}),se.abrupt("return",{data:(a=Q)!==null&&a!==void 0?a:[],success:!0,total:r.data.list.length});case 14:case"end":return se.stop()}},u)}));return function(u,s,K){return R.apply(this,arguments)}}(),rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(u){var s=u.selectedRowKeys,K=u.selectedRows;return(0,t.jsxs)(y.Z,{size:16,wrap:!0,children:[(0,t.jsx)(S.Z,{type:$.W6.CONTAINER,selected:K,onSuccess:function(){var a,r;return!((a=v.current)===null||a===void 0)&&a.reloadAndRest&&((r=v.current)===null||r===void 0||r.reloadAndRest()),!0}},"dataPermission"),(0,t.jsxs)(oe.u,{access:"canSeeContainerList",space:{size:16,wrap:!0},children:[(0,t.jsx)(z.Z,{icon:(0,t.jsx)(N.Z,{}),action:W()(c()().mark(function f(){var a,r,d,l;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a=o()(s),n.prev=1,a.s();case 3:if((r=a.n()).done){n.next=10;break}return d=r.value,n.next=7,(0,_.IW)({md5:d,operate:"start"});case 7:l=n.sent;case 8:n.next=3;break;case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),a.e(n.t0);case 15:return n.prev=15,a.f(),n.finish(15);case 18:return n.abrupt("return",!0);case 19:case"end":return n.stop()}},f,null,[[1,12,15,18]])})),onSuccess:function(){var a,r;return!((a=v.current)===null||a===void 0)&&a.reloadAndRest&&((r=v.current)===null||r===void 0||r.reloadAndRest()),!0},children:"\u542F\u52A8"}),(0,t.jsx)(z.Z,{action:W()(c()().mark(function f(){var a,r,d,l;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a=o()(s),n.prev=1,a.s();case 3:if((r=a.n()).done){n.next=10;break}return d=r.value,n.next=7,(0,_.IW)({md5:d,operate:"stop"});case 7:l=n.sent;case 8:n.next=3;break;case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),a.e(n.t0);case 15:return n.prev=15,a.f(),n.finish(15);case 18:return n.abrupt("return",!0);case 19:case"end":return n.stop()}},f,null,[[1,12,15,18]])})),icon:(0,t.jsx)(i.Z,{}),onSuccess:function(){var a,r;return!((a=v.current)===null||a===void 0)&&a.reloadAndRest&&((r=v.current)===null||r===void 0||r.reloadAndRest()),!0},children:"\u505C\u6B62"}),(0,t.jsx)(z.Z,{action:W()(c()().mark(function f(){var a,r,d,l;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a=o()(s),n.prev=1,a.s();case 3:if((r=a.n()).done){n.next=10;break}return d=r.value,n.next=7,(0,_.IW)({md5:d,operate:"restart"});case 7:l=n.sent;case 8:n.next=3;break;case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),a.e(n.t0);case 15:return n.prev=15,a.f(),n.finish(15);case 18:return n.abrupt("return",!0);case 19:case"end":return n.stop()}},f,null,[[1,12,15,18]])})),onSuccess:function(){var a,r;return!((a=v.current)===null||a===void 0)&&a.reloadAndRest&&((r=v.current)===null||r===void 0||r.reloadAndRest()),!0},icon:(0,t.jsx)(pe.Z,{}),children:"\u91CD\u542F"}),(0,t.jsx)(z.Z,{action:W()(c()().mark(function f(){var a,r,d,l;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a=o()(s),n.prev=1,a.s();case 3:if((r=a.n()).done){n.next=10;break}return d=r.value,n.next=7,(0,_.IW)({md5:d,operate:"pause"});case 7:l=n.sent;case 8:n.next=3;break;case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),a.e(n.t0);case 15:return n.prev=15,a.f(),n.finish(15);case 18:return n.abrupt("return",!0);case 19:case"end":return n.stop()}},f,null,[[1,12,15,18]])})),onSuccess:function(){var a,r;return!((a=v.current)===null||a===void 0)&&a.reloadAndRest&&((r=v.current)===null||r===void 0||r.reloadAndRest()),!0},icon:(0,t.jsx)(ce.Z,{}),children:"\u6682\u505C"}),(0,t.jsx)(z.Z,{action:W()(c()().mark(function f(){var a,r,d,l;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a=o()(s),n.prev=1,a.s();case 3:if((r=a.n()).done){n.next=10;break}return d=r.value,n.next=7,(0,_.IW)({md5:d,operate:"unpause"});case 7:l=n.sent;case 8:n.next=3;break;case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),a.e(n.t0);case 15:return n.prev=15,a.f(),n.finish(15);case 18:return n.abrupt("return",!0);case 19:case"end":return n.stop()}},f,null,[[1,12,15,18]])})),onSuccess:function(){var a,r;return!((a=v.current)===null||a===void 0)&&a.reloadAndRest&&((r=v.current)===null||r===void 0||r.reloadAndRest()),!0},icon:(0,t.jsx)(N.Z,{}),children:"\u6062\u590D"})]}),(0,t.jsx)(w.Z,{}),(0,t.jsx)(oe.u,{showProTips:!0,access:["canSeeEnableCe","canSeeContainerListManageOp"],children:function(a){var r=a.canSeeEnableCe,d=a.canSeeContainerListManageOp;return d&&(0,t.jsx)(z.Z,{disabled:r,type:"primary",action:W()(c()().mark(function l(){var D,n,Q,Re,se,k,ee,De,tn,we,Ne,ke,sn;return c()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:Q=[],Re=o()(K),p.prev=2,k=c()().mark(function Pn(){var ze,un,Ue;return c()().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:un=se.value,Ue=ge==null||(ze=ge.container)===null||ze===void 0?void 0:ze.find(function(Dn){return Dn.id==un.Id}),Ue&&!Q.includes(Ue.image)&&Q.push(Ue.image);case 3:case"end":return Ve.stop()}},Pn)}),Re.s();case 5:if((se=Re.n()).done){p.next=9;break}return p.delegateYield(k(),"t0",7);case 7:p.next=5;break;case 9:p.next=14;break;case 11:p.prev=11,p.t1=p.catch(2),Re.e(p.t1);case 14:return p.prev=14,Re.f(),p.finish(14);case 17:if(Q){p.next=19;break}return p.abrupt("return",!1);case 19:return p.next=21,(D=xe.current)===null||D===void 0?void 0:D.pull(Q);case 21:(n=xe.current)===null||n===void 0||n.finish(),De=o()(K),p.prev=23,De.s();case 25:if((tn=De.n()).done){p.next=32;break}return sn=tn.value,p.next=29,(0,_.RF)({md5:(we=sn.Id)!==null&&we!==void 0?we:"",imageTag:"",enableBak:(Ne=(ke=nn.current)===null||ke===void 0?void 0:ke.getFieldValue("enableBak"))!==null&&Ne!==void 0?Ne:!1});case 29:ee=p.sent;case 30:p.next=25;break;case 32:p.next=37;break;case 34:p.prev=34,p.t2=p.catch(23),De.e(p.t2);case 37:return p.prev=37,De.f(),p.finish(37);case 40:return p.abrupt("return",ee);case 41:case"end":return p.stop()}},l,null,[[2,11,14,17],[23,34,37,40]])})),onSuccess:function(){var D,n;return!((D=v.current)===null||D===void 0)&&D.reloadAndRest&&((n=v.current)===null||n===void 0||n.reloadAndRest()),!0},confirm:(0,t.jsxs)(y.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,t.jsx)(E.Z.Text,{children:new L.Uo("components.appDetail.appDetailQuickManage").format("upgradeConfirm")}),(0,t.jsx)(B.A,{formRef:nn,submitter:!1,layout:"inline",children:(0,t.jsx)(F.Z,{name:"enableBak",valuePropName:"checked",children:(0,t.jsx)(q.Z,{children:"\u5907\u4EFD\u65E7\u5BB9\u5668\uFF1F"})})})]}),children:"\u6279\u91CF\u5347\u7EA7"})}}),(0,t.jsx)(oe.u,{access:"canSeeContainerListManageDelete",children:(0,t.jsx)(z.Z,{danger:!0,type:"primary",action:W()(c()().mark(function f(){var a,r,d,l;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=o()(s),n.prev=1,r.s();case 3:if((d=r.n()).done){n.next=10;break}return l=d.value,n.next=7,(0,Me.Ct)({md5:l,deleteImage:!1,deleteVolume:!1});case 7:a=n.sent;case 8:n.next=3;break;case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),r.e(n.t0);case 15:return n.prev=15,r.f(),n.finish(15);case 18:return n.abrupt("return",a);case 19:case"end":return n.stop()}},f,null,[[1,12,15,18]])})),onSuccess:function(){var a,r;return!((a=v.current)===null||a===void 0)&&a.reloadAndRest&&((r=v.current)===null||r===void 0||r.reloadAndRest()),!0},onError:function(){var a,r;return!((a=v.current)===null||a===void 0)&&a.reset&&((r=v.current)===null||r===void 0||r.reset()),!0},confirm:"notification.confirm.title",children:"\u6279\u91CF\u5220\u9664"})})]})},pagination:A.showLite?!1:(0,Ie.O)({page:(me=(fe=Cn.state)===null||fe===void 0?void 0:fe.page)!==null&&me!==void 0?me:void 0}),search:A.showLite?!1:{collapsed:!1},tableExtraRender:function(){return!A.showLite&&Be.canSeeContainerListManageCreate&&(0,t.jsx)(re.Z,{mode:"horizontal",selectedKeys:["list"],items:[{label:(0,t.jsx)(U.Link,{to:"/app/list",replace:!0,children:"\u5BB9\u5668\u5217\u8868"}),key:"list"},{label:(0,t.jsx)(U.Link,{to:"/app/list/recycle",replace:!0,children:"\u56DE\u6536\u7AD9"}),key:"recycle"}]})},toolBarRender:A.showLite?!1:function(){return[(0,t.jsx)(oe.u,{access:"canSeeContainerListManageDelete",children:(0,t.jsx)(z.Z,{action:function(){return(0,_.KK)()},onSuccess:function(){var u,s;return!((u=v.current)===null||u===void 0)&&u.reloadAndRest&&((s=v.current)===null||s===void 0||s.reloadAndRest()),!0},onError:function(){var u,s;return!((u=v.current)===null||u===void 0)&&u.reset&&((s=v.current)===null||s===void 0||s.reset()),!0},confirm:"notification.confirm.title",children:"\u6E05\u7406\u5DF2\u505C\u6B62\u5BB9\u5668"})},"clear")]},columnsState:(0,Ie.j)("app-list")})]})}),T=V,H=e(90078),Le=e(28036);function ln(){return(0,t.jsx)(H._z,{header:{extra:[(0,t.jsx)(oe.u,{access:"canSeeContainerListManageCreate",children:(0,t.jsx)(U.Link,{to:"/app/create/image",children:(0,t.jsx)(Le.ZP,{type:"primary",children:"\u521B\u5EFA\u5BB9\u5668"})})},"create")]},children:(0,t.jsx)(T,{},"appList")})}},62597:function(ye,Y,e){e.d(Y,{$G:function(){return W},Ct:function(){return Z},Tb:function(){return F},XH:function(){return E},cl:function(){return G},fp:function(){return P},iE:function(){return ie},xb:function(){return re},ze:function(){return ue}});var J=e(15009),o=e.n(J),X=e(99289),c=e.n(X),O=e(82346);function W(h){return x.apply(this,arguments)}function x(){return x=c()(o()().mark(function h(g){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,O.request)("/api/app/site/create-by-image",{method:"POST",data:g}));case 1:case"end":return i.stop()}},h)})),x.apply(this,arguments)}var P={EnvValueRuleRequired:1,EnvValueRuleDisabled:2,EnvValueTypeNumber:1024,EnvValueTypeText:2048,EnvValueTypeSelect:4096,EnvValueTypeSelectMultiple:8192};function G(h){return B.apply(this,arguments)}function B(){return B=c()(o()().mark(function h(g){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,O.request)("/api/app/site/get-list",{method:"POST",data:g}));case 1:case"end":return i.stop()}},h)})),B.apply(this,arguments)}function F(h){return y.apply(this,arguments)}function y(){return y=c()(o()().mark(function h(g){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return g.download=!1,i.next=3,(0,O.request)("/api/app/log/run",{method:"POST",data:g});case 3:return i.abrupt("return",i.sent);case 4:case"end":return i.stop()}},h)})),y.apply(this,arguments)}function E(h){return ne.apply(this,arguments)}function ne(){return ne=c()(o()().mark(function h(g){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return g.download=!0,i.next=3,(0,O.request)("/api/app/log/run",{method:"POST",data:g,responseType:"blob"});case 3:return i.abrupt("return",i.sent);case 4:case"end":return i.stop()}},h)})),ne.apply(this,arguments)}function ie(h){return w.apply(this,arguments)}function w(){return w=c()(o()().mark(function h(g){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return g.id=String(g.id),i.next=3,(0,O.request)("/api/app/site/get-detail",{data:g,method:"POST"});case 3:return i.abrupt("return",i.sent);case 4:case"end":return i.stop()}},h)})),w.apply(this,arguments)}function Z(h){return q.apply(this,arguments)}function q(){return q=c()(o()().mark(function h(g){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,O.request)("/api/app/container/delete",{method:"POST",data:g}));case 1:case"end":return i.stop()}},h)})),q.apply(this,arguments)}function re(h){return U.apply(this,arguments)}function U(){return U=c()(o()().mark(function h(g){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,O.request)("/api/app/site/delete",{method:"POST",data:g}));case 1:case"end":return i.stop()}},h)})),U.apply(this,arguments)}function ue(h){return C.apply(this,arguments)}function C(){return C=c()(o()().mark(function h(g){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,O.request)("/api/app/container/ignore",{method:"POST",data:g}));case 1:case"end":return i.stop()}},h)})),C.apply(this,arguments)}},20578:function(ye,Y,e){e.d(Y,{q:function(){return P},w:function(){return W}});var J=e(15009),o=e.n(J),X=e(99289),c=e.n(X),O=e(82346);function W(B){return x.apply(this,arguments)}function x(){return x=c()(o()().mark(function B(F){return o()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,O.request)("/api/pro/container/recycle-restore",{data:F,method:"POST"});case 2:return E.abrupt("return",E.sent);case 3:case"end":return E.stop()}},B)})),x.apply(this,arguments)}function P(){return G.apply(this,arguments)}function G(){return G=c()(o()().mark(function B(){return o()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,O.request)("/api/pro/container/check-all-upgrade",{method:"POST"});case 2:return y.abrupt("return",y.sent);case 3:case"end":return y.stop()}},B)})),G.apply(this,arguments)}}}]);
