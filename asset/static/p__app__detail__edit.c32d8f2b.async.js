"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8878],{55809:function(S,v,e){var D=e(87462),o=e(67294),g=e(44805),p=e(84089),C=function(M,h){return o.createElement(p.Z,(0,D.Z)({},M,{ref:h,icon:g.Z}))},d=o.forwardRef(C);v.Z=d},5966:function(S,v,e){var D=e(97685),o=e(1413),g=e(45987),p=e(21770),C=e(72723),d=e(55241),j=e(97435),M=e(67294),h=e(35510),n=e(85893),U=["fieldProps","proFieldProps"],E=["fieldProps","proFieldProps"],f="text",T=function(_){var a=_.fieldProps,c=_.proFieldProps,i=(0,g.Z)(_,U);return(0,n.jsx)(h.Z,(0,o.Z)({valueType:f,fieldProps:a,filedConfig:{valueType:f},proFieldProps:c},i))},r=function(_){var a=(0,p.Z)(_.open||!1,{value:_.open,onChange:_.onOpenChange}),c=(0,D.Z)(a,2),i=c[0],P=c[1];return(0,n.jsx)(C.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(m){var t,B=m.getFieldValue(_.name||[]);return(0,n.jsx)(d.Z,(0,o.Z)((0,o.Z)({getPopupContainer:function(l){return l&&l.parentNode?l.parentNode:l},onOpenChange:function(l){return P(l)},content:(0,n.jsxs)("div",{style:{padding:"4px 0"},children:[(t=_.statusRender)===null||t===void 0?void 0:t.call(_,B),_.strengthText?(0,n.jsx)("div",{style:{marginTop:10},children:(0,n.jsx)("span",{children:_.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},_.popoverProps),{},{open:i,children:_.children}))}})},u=function(_){var a=_.fieldProps,c=_.proFieldProps,i=(0,g.Z)(_,E),P=(0,M.useState)(!1),L=(0,D.Z)(P,2),m=L[0],t=L[1];return a!=null&&a.statusRender&&i.name?(0,n.jsx)(r,{name:i.name,statusRender:a==null?void 0:a.statusRender,popoverProps:a==null?void 0:a.popoverProps,strengthText:a==null?void 0:a.strengthText,open:m,onOpenChange:t,children:(0,n.jsx)("div",{children:(0,n.jsx)(h.Z,(0,o.Z)({valueType:"password",fieldProps:(0,o.Z)((0,o.Z)({},(0,j.Z)(a,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(A){var l;a==null||(l=a.onBlur)===null||l===void 0||l.call(a,A),t(!1)},onClick:function(A){var l;a==null||(l=a.onClick)===null||l===void 0||l.call(a,A),t(!0)}}),proFieldProps:c,filedConfig:{valueType:f}},i))})}):(0,n.jsx)(h.Z,(0,o.Z)({valueType:"password",fieldProps:a,proFieldProps:c,filedConfig:{valueType:f}},i))},s=T;s.Password=u,s.displayName="ProFormComponent",v.Z=s},80821:function(S,v,e){e.d(v,{Z:function(){return h}});var D=e(5574),o=e.n(D),g=e(24963),p=e(86738),C=e(28036),d=e(83062),j=e(67294),M=e(85893);function h(n){var U=(0,j.useState)(!1),E=o()(U,2),f=E[0],T=E[1],r=(0,j.useContext)(g.Z),u=r.lang,s=r.notice,R=r.message,_=function(){T(!0);var c=n.action();c instanceof Promise?c.then(function(i){if(T(!1),i){typeof n.onSuccess=="function"&&n.onSuccess(i);var P="";n.messageSuccess?typeof n.messageSuccess=="function"?P=n.messageSuccess(i):P=n.messageSuccess.indexOf("notification.")==0?u(n.messageSuccess):n.messageSuccess:P=u("notification.finish"),n.asynced?R.info(P):R.success(P)}}).catch(function(i){T(!1),typeof n.onError=="function"&&n.onError(i)}):T(!1)};return n.confirm?(0,M.jsx)(p.Z,{style:{width:500},title:n.confirmTitle?n.confirmTitle:u("notification.title.tip"),description:typeof n.confirm=="string"&&n.confirm.indexOf("notification.")==0?u(n.confirm):n.confirm,onConfirm:_,okText:"Yes",cancelText:"No",onOpenChange:n.confirmOnOpenChange,children:(0,M.jsx)(C.ZP,{block:n.block,disabled:n.disabled,icon:n.icon,loading:f,danger:n.danger,type:n.type,children:n.children})}):(0,M.jsx)(d.Z,{title:n.tips,children:(0,M.jsx)(C.ZP,{block:n.block,style:n.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:n.disabled,icon:n.icon,loading:f,onClick:_,danger:n.danger,type:n.type,children:n.children})})}},24963:function(S,v,e){var D=e(67294),o=(0,D.createContext)({});v.Z=o},29798:function(S,v,e){e.r(v),e.d(v,{default:function(){return u}});var D=e(5574),o=e.n(D),g=e(60335),p=e(38345),C=e(82346),d=e(67294),j=e(24963),M=e(50070),h=e(37767),n=e(52031),U=e(14189),E=e(27813),f=e(14245),T=e(1699),r=e(85893);function u(){var s=(0,d.useContext)(j.Z),R=s.message,_=s.notice,a=s.loading,c=s.lang,i=(0,d.useContext)(M.AppDetailContext),P=(0,C.useParams)(),L=(0,d.useState)(),m=o()(L,2),t=m[0],B=m[1],A=(0,d.useState)(1),l=o()(A,2),F=l[0],H=l[1],Z=(0,C.useNavigate)();return(0,d.useEffect)(function(){var I;a.show(),i.reload(),(0,g.jV)({md5:(I=P.id)!==null&&I!==void 0?I:""}).then(function(x){x.data&&(x.data.info.HostConfig.NetworkMode=="host"&&x.data.info.Config.ExposedPorts&&Object.keys(x.data.info.Config.ExposedPorts).map(function(W){x.data.info.NetworkSettings.Ports[W]=[{HostIp:"0.0.0.0",HostPort:W.substring(0,W.indexOf("/"))}]}),B(x.data))}).finally(function(){a.destroy()})},[F]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(p.Z,{direction:"column",gutter:[0,10],children:[(t==null?void 0:t.info)&&(0,r.jsx)(U.Z,{data:t.info}),(t==null?void 0:t.info)&&(0,r.jsx)(T.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,r.jsx)(E.Z,{data:t,checkContainerUpgrade:function(){Z("/app/list")}})}),t&&(0,r.jsx)(h.Z,{data:t}),t&&(0,r.jsx)(n.Z,{data:t==null?void 0:t.info}),t&&(0,r.jsx)(f.Z,{data:t.info})]})})}},50070:function(S,v,e){e.r(v),e.d(v,{AppDetailContext:function(){return R},default:function(){return _}});var D=e(15009),o=e.n(D),g=e(99289),p=e.n(g),C=e(5574),d=e.n(C),j=e(1699),M=e(24963),h=e(60335),n=e(55809),U=e(90078),E=e(82346),f=e(25593),T=e(28036),r=e(50136),u=e(67294),s=e(85893),R=(0,u.createContext)({});function _(){var a,c=(0,u.useContext)(M.Z),i=c.lang,P=c.loading,L=c.message,m=(0,E.useParams)(),t=(0,E.useSearchParams)(),B=d()(t,2),A=B[0],l=B[1],F=(a=A.get("tab"))!==null&&a!==void 0?a:"edit",H=(0,u.useState)("edit"),Z=d()(H,2),I=Z[0],x=Z[1],W=(0,E.useNavigate)(),Q=(0,u.useState)(1),V=d()(Q,2),z=V[0],X=V[1],G=[{label:(0,s.jsx)(E.Link,{to:"/app/detail/edit/".concat(m.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,s.jsx)(E.Link,{to:"/app/detail/network/".concat(m.id,"?tab=network"),children:"\u7F51\u7EDC\u7BA1\u7406"}),key:"network"},{label:(0,s.jsx)(f.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){L.info(i("app.detail.createExplorerPlugin")),W("/app/detail/file/".concat(m.id,"?tab=file"))}},{label:(0,s.jsx)(f.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){W("/app/detail/log/".concat(m.id,"?tab=log"))}},{label:(0,s.jsx)(f.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){W("/app/detail/stat/".concat(m.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,s.jsx)(n.Z,{}),disabled:!0}],w=(0,u.useState)(G),Y=d()(w,2),q=Y[0],ee=Y[1];(0,u.useEffect)(function(){P.show(),x(F);var K=function(){var k=p()(o()().mark(function J(){var N,$,b;return o()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return N=G,O.prev=1,O.next=4,(0,h.jV)({md5:($=m.id)!==null&&$!==void 0?$:""});case 4:b=O.sent,N.map(function(y){return y.key=="containerName"&&(y.label=b.data.info.Name),(!b.data.info.State.Running||b.data.info.State.Restarting)&&(y.key=="file"||y.key=="stat")&&(y.disabled=!0),y}),ee(N),O.next=13;break;case 9:return O.prev=9,O.t0=O.catch(1),W("/app/list"),O.abrupt("return");case 13:return O.prev=13,P.destroy(),O.finish(13);case 16:case"end":return O.stop()}},J,null,[[1,9,13,16]])}));return function(){return k.apply(this,arguments)}}();K()},[z,m]);var ne=function(k){x(k.key)};return(0,s.jsx)(R.Provider,{value:{reload:function(){X(z+1)}},children:(0,s.jsxs)(U._z,{header:{extra:[(0,s.jsx)(j.u,{access:"canSeeContainerListManageCreate",children:(0,s.jsx)(E.Link,{to:"/app/create/image",children:(0,s.jsx)(T.ZP,{type:"primary",children:"\u521B\u5EFA\u5BB9\u5668"})})},"create")]},children:[(0,s.jsx)(r.Z,{mode:"horizontal",onClick:ne,selectedKeys:[I],items:q}),(0,s.jsx)(E.Outlet,{})]})})}}}]);
