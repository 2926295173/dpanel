"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7523],{86615:function(ue,W,e){var T=e(1413),r=e(45987),L=e(22270),_=e(78045),E=e(67294),A=e(90789),C=e(73552),u=e(85893),y=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],b=E.forwardRef(function(l,o){var h=l.fieldProps,t=l.options,s=l.radioType,O=l.layout,c=l.proFieldProps,$=l.valueEnum,x=(0,r.Z)(l,y);return(0,u.jsx)(C.Z,(0,T.Z)((0,T.Z)({valueType:s==="button"?"radioButton":"radio",ref:o,valueEnum:(0,L.h)($,void 0)},x),{},{fieldProps:(0,T.Z)({options:t,layout:O},h),proFieldProps:c,filedConfig:{customLightMode:!0}}))}),P=E.forwardRef(function(l,o){var h=l.fieldProps,t=l.children;return(0,u.jsx)(_.ZP,(0,T.Z)((0,T.Z)({},h),{},{ref:o,children:t}))}),p=(0,A.G)(P,{valuePropName:"checked",ignoreWidth:!0}),M=p;M.Group=b,M.Button=_.ZP.Button,M.displayName="ProFormComponent",W.Z=M},37476:function(ue,W,e){e.d(W,{Y:function(){return t}});var T=e(74165),r=e(15861),L=e(1413),_=e(97685),E=e(45987),A=e(73177),C=e(28459),u=e(85576),y=e(55917),b=e(21770),P=e(80334),p=e(67294),M=e(73935),l=e(89671),o=e(85893),h=["children","trigger","onVisibleChange","onOpenChange","modalProps","onFinish","submitTimeout","title","width","visible","open"];function t(s){var O,c,$=s.children,x=s.trigger,g=s.onVisibleChange,Z=s.onOpenChange,i=s.modalProps,v=s.onFinish,D=s.submitTimeout,I=s.title,n=s.width,ne=s.visible,oe=s.open,V=(0,E.Z)(s,h);(0,P.ET)(!V.footer||!(i!=null&&i.footer),"ModalForm \u662F\u4E00\u4E2A ProForm \u7684\u7279\u6B8A\u5E03\u5C40\uFF0C\u5982\u679C\u60F3\u81EA\u5B9A\u4E49\u6309\u94AE\uFF0C\u8BF7\u4F7F\u7528 submit.render \u81EA\u5B9A\u4E49\u3002");var se=(0,p.useContext)(C.ZP.ConfigContext),ge=(0,p.useState)([]),Fe=(0,_.Z)(ge,2),Ce=Fe[1],pe=(0,p.useState)(!1),fe=(0,_.Z)(pe,2),ce=fe[0],ie=fe[1],_e=(0,b.Z)(!!ne,{value:oe||ne,onChange:Z||g}),Ee=(0,_.Z)(_e,2),q=Ee[0],ee=Ee[1],de=(0,p.useRef)(null),X=(0,p.useCallback)(function(f){de.current===null&&f&&Ce([]),de.current=f},[]),B=(0,p.useRef)(),K=(0,p.useCallback)(function(){var f,d,F,R=(f=(d=V.form)!==null&&d!==void 0?d:(F=V.formRef)===null||F===void 0?void 0:F.current)!==null&&f!==void 0?f:B.current;R&&i!==null&&i!==void 0&&i.destroyOnClose&&R.resetFields()},[i==null?void 0:i.destroyOnClose,V.form,V.formRef]);(0,p.useImperativeHandle)(V.formRef,function(){return B.current},[B.current]),(0,p.useEffect)(function(){(oe||ne)&&(Z==null||Z(!0),g==null||g(!0))},[ne,oe]);var U=(0,p.useMemo)(function(){return x?p.cloneElement(x,(0,L.Z)((0,L.Z)({key:"trigger"},x.props),{},{onClick:function(){var f=(0,r.Z)((0,T.Z)().mark(function F(R){var S,m;return(0,T.Z)().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:ee(!q),(S=x.props)===null||S===void 0||(m=S.onClick)===null||m===void 0||m.call(S,R);case 2:case"end":return k.stop()}},F)}));function d(F){return f.apply(this,arguments)}return d}()})):null},[ee,x,q]),j=(0,p.useMemo)(function(){var f,d,F,R,S,m;return V.submitter===!1?!1:(0,y.Z)({searchConfig:{submitText:(f=(d=i==null?void 0:i.okText)!==null&&d!==void 0?d:(F=se.locale)===null||F===void 0||(F=F.Modal)===null||F===void 0?void 0:F.okText)!==null&&f!==void 0?f:"\u786E\u8BA4",resetText:(R=(S=i==null?void 0:i.cancelText)!==null&&S!==void 0?S:(m=se.locale)===null||m===void 0||(m=m.Modal)===null||m===void 0?void 0:m.cancelText)!==null&&R!==void 0?R:"\u53D6\u6D88"},resetButtonProps:{preventDefault:!0,disabled:D?ce:void 0,onClick:function(k){var J;ee(!1),i==null||(J=i.onCancel)===null||J===void 0||J.call(i,k)}}},V.submitter)},[(O=se.locale)===null||O===void 0||(O=O.Modal)===null||O===void 0?void 0:O.cancelText,(c=se.locale)===null||c===void 0||(c=c.Modal)===null||c===void 0?void 0:c.okText,i,V.submitter,ee,ce,D]),z=(0,p.useCallback)(function(f,d){return(0,o.jsxs)(o.Fragment,{children:[f,de.current&&d?(0,o.jsx)(p.Fragment,{children:(0,M.createPortal)(d,de.current)},"submitter"):d]})},[]),N=(0,p.useCallback)(function(){var f=(0,r.Z)((0,T.Z)().mark(function d(F){var R,S,m;return(0,T.Z)().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return R=v==null?void 0:v(F),D&&R instanceof Promise&&(ie(!0),S=setTimeout(function(){return ie(!1)},D),R.finally(function(){clearTimeout(S),ie(!1)})),k.next=4,R;case 4:return m=k.sent,m&&ee(!1),k.abrupt("return",m);case 7:case"end":return k.stop()}},d)}));return function(d){return f.apply(this,arguments)}}(),[v,ee,D]),Y=(0,A.X)(q);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(u.Z,(0,L.Z)((0,L.Z)((0,L.Z)({title:I,width:n||800},i),Y),{},{onCancel:function(d){var F;D&&ce||(ee(!1),i==null||(F=i.onCancel)===null||F===void 0||F.call(i,d))},afterClose:function(){var d;K(),q&&ee(!1),i==null||(d=i.afterClose)===null||d===void 0||d.call(i)},footer:V.submitter!==!1?(0,o.jsx)("div",{ref:X,style:{display:"flex",justifyContent:"flex-end"}}):null,children:(0,o.jsx)(l.I,(0,L.Z)((0,L.Z)({formComponentType:"ModalForm",layout:"vertical"},V),{},{onInit:function(d,F){var R;V.formRef&&(V.formRef.current=F),V==null||(R=V.onInit)===null||R===void 0||R.call(V,d,F),B.current=F},formRef:B,submitter:j,onFinish:function(){var f=(0,r.Z)((0,T.Z)().mark(function d(F){var R;return(0,T.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,N(F);case 2:return R=m.sent,m.abrupt("return",R);case 4:case"end":return m.stop()}},d)}));return function(d){return f.apply(this,arguments)}}(),contentRender:z,children:$}))})),U]})}},74344:function(ue,W,e){var T=e(5574),r=e.n(T),L=e(37476),_=e(38345),E=e(54006),A=e(67294),C=e(54964),u=e(85893),y=(0,A.forwardRef)(function(b,P){(0,A.useImperativeHandle)(P,function(){return{start:function(){for(var g=arguments.length,Z=new Array(g),i=0;i<g;i++)Z[i]=arguments[i];O(Z.join(":")),o(!0)},reset:function(){var g;(g=$.current)===null||g===void 0||g.clear()},show:function(g){var Z,i;(Z=$.current)===null||Z===void 0||Z.clear(),(i=$.current)===null||i===void 0||i.write(g),o(!0)}}});var p=(0,A.useState)(!1),M=r()(p,2),l=M[0],o=M[1],h=(0,A.useState)(""),t=r()(h,2),s=t[0],O=t[1],c=(0,E.useModel)("subscriber"),$=(0,A.useRef)();return c.addDataHandler("image:"+s,function(x){var g;(g=$.current)===null||g===void 0||g.write(x.data)}),(0,A.useEffect)(function(){var x;(x=$.current)===null||x===void 0||x.fit()},[]),(0,u.jsx)(L.Y,{modalProps:{forceRender:!0},title:"\u6784\u5EFA\u65E5\u5FD7",submitter:!1,width:1e3,onOpenChange:function(g){if(o(g),g){var Z,i;(Z=$.current)===null||Z===void 0||Z.clear(),(i=$.current)===null||i===void 0||i.fit()}},open:l,children:(0,u.jsx)(_.Z,{ghost:!0,children:(0,u.jsx)(C.Z,{showInModal:!0,width:"960px",height:"500px",ref:$})})})});W.Z=y},89063:function(ue,W,e){e.d(W,{Z:function(){return u}});var T=e(24963),r=e(88484),L=e(31418),_=e(72723),E=e(14726),A=e(67294),C=e(85893);function u(y){var b=(0,A.useContext)(T.Z),P=b.message,p=b.notice,M=b.lang,l=(0,A.useRef)(null),o=L.Z.useApp(),h=function(){l.current&&(l.current.click(),l.current.onchange=function(s){if(!s||!s.target)return"";var O=new FileReader;O.onload=function($){var x,g,Z=(x=$.target)===null||x===void 0?void 0:x.result;if(y.onLoad)try{y.onLoad&&y.onLoad(Z)}catch(i){p.error(i);return}typeof y.onImport=="function"&&y.onImport(Z),(g=l.current)!==null&&g!==void 0&&g.value&&(l.current.value="")};var c=s.target;if(c.files)try{O.readAsText(c.files[0])}catch($){p.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(_.Z.Item,{name:"importFile",label:y.label,children:(0,C.jsx)(E.ZP,{icon:(0,C.jsx)(r.Z,{}),block:!0,onClick:h,children:y.title})}),(0,C.jsx)("input",{style:{display:"none"},type:"file",ref:l,name:"importFileInput"})]})}},54964:function(ue,W,e){e.d(W,{a:function(){return b}});var T=e(78267),r=e.n(T),L=e(75458),_=e.n(L),E=e(67294),A=e(12320),C=e.n(A),u=e(89629),y=e(85893),b={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,cursorStyle:"block",cursorBlink:!0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},P=new A.Terminal(b),p=new L.SearchAddon,M=new T.FitAddon,l=(0,E.forwardRef)(function(o,h){return(0,E.useEffect)(function(){window.addEventListener("resize",function(){o.showInModal||M.fit()}),o.style&&o.style.fontSize&&(P.options.fontSize=o.style.fontSize),P.loadAddon(M),P.loadAddon(p),P.open(document.getElementById("terminal-container")),M.fit()},[]),(0,E.useImperativeHandle)(h,function(){return{write:function(s){P.write(s)},clear:function(){P.clear()},getTerminal:function(){return P},findNext:function(s){p.findNext(s)},findPrev:function(s){p.findPrevious(s)},fit:function(){M.fit()},onData:function(s){P.onData(s)}}}),(0,y.jsx)("div",{id:"terminal-container",style:{width:o.width?o.width:"100%",height:o.height?o.height:"500px"}})});W.Z=l},24963:function(ue,W,e){var T=e(67294),r=(0,T.createContext)({});W.Z=r},90128:function(ue,W,e){e.r(W),e.d(W,{default:function(){return de}});var T=e(15009),r=e.n(T),L=e(99289),_=e.n(L),E=e(5574),A=e.n(E),C=e(5966),u=e(85893);function y(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(C.Z,{fieldProps:{min:2,max:255},rules:[{required:!0}],required:!0,placeholder:"\u6307\u5B9AGit\u5730\u5740\uFF0C\u79C1\u6709\u4ED3\u5E93\u8BF7\u9644\u52A0\u6743\u9650\u3002\u4EC5\u652F\u6301Master\u5206\u652F",label:"Git\u4ED3\u5E93\u5730\u5740",name:"buildGit"})})}var b=e(97961),P=e(1413),p=e(45987),M=e(88484),l=e(31365),o=e(14726),h=e(67294),t=e(9105),s=e(90789),O=["fieldProps","action","accept","listType","title","max","icon","buttonProps","disabled","proFieldProps"],c=function(B,K){var U,j=B.fieldProps,z=B.action,N=B.accept,Y=B.listType,f=B.title,d=f===void 0?"\u5355\u51FB\u4E0A\u4F20":f,F=B.max,R=B.icon,S=R===void 0?(0,u.jsx)(M.Z,{}):R,m=B.buttonProps,re=B.disabled,k=B.proFieldProps,J=(0,p.Z)(B,O),H=(0,h.useMemo)(function(){var ae;return(ae=J.fileList)!==null&&ae!==void 0?ae:J.value},[J.fileList,J.value]),w=(0,h.useContext)(t.A),a=(k==null?void 0:k.mode)||w.mode||"edit",G=(F===void 0||!H||(H==null?void 0:H.length)<F)&&a!=="read",te=(Y!=null?Y:j==null?void 0:j.listType)==="picture-card";return(0,u.jsx)(l.Z,(0,P.Z)((0,P.Z)({action:z,accept:N,ref:K,listType:Y||"picture",fileList:H},j),{},{name:(U=j==null?void 0:j.name)!==null&&U!==void 0?U:"file",onChange:function(me){var le;j==null||(le=j.onChange)===null||le===void 0||le.call(j,me)},children:G&&(te?(0,u.jsxs)("span",{children:[S," ",d]}):(0,u.jsxs)(o.ZP,(0,P.Z)((0,P.Z)({disabled:re||(j==null?void 0:j.disabled)},m),{},{children:[S,d]})))}))},$=(0,s.G)(h.forwardRef(c),{getValueFromEvent:function(B){return B.fileList}}),x=$;function g(X){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(x,{max:1,title:X.title,label:X.label,required:!0,rules:[{required:!0}],fieldProps:{name:"file",accept:X.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(K){return new Promise(function(U){var j;(0,b._2)({path:(j=K.response.data.path)!==null&&j!==void 0?j:""}).then(function(z){U(!0)})})}},name:X.name})})}var Z=e(74344),i=e(89063),v=e(95089),D=e(62370),I=e(184),n=e(86615),ne=e(97462),oe=e(34041);function V(X){var B=(0,h.useState)([]),K=A()(B,2),U=K[0],j=K[1];return(0,h.useEffect)(function(){(0,b.MF)().then(function(z){var N=Object.keys(z.data).map(function(Y){return z.data[Y]});j(N)})},[]),(0,u.jsx)(D.Z,{children:(0,u.jsxs)(I.a,{trigger:(0,u.jsx)(o.ZP,{block:!0,children:"\u4F7F\u7528\u6A21\u677F\u751F\u6210"}),onFinish:function(N){return new Promise(function(Y,f){var d=N[N.language+"EnvVersion"].split("|"),F=A()(d,2),R=F[0],S=F[1],m="FROM ".concat(R,`
# \u5E94\u7528\u76EE\u5F55\u4F4D\u4E8E /app
# \u53EF\u901A\u7BA1\u5BB9\u5668 - \u6587\u4EF6\u7BA1\u7406, \u4E0A\u4F20\u4EE3\u7801\u81F3\u6B64\u76EE\u5F55\u5E76\u4FEE\u6539\u6743\u9650

WORKDIR /app
VOLUME [ "/app" ]
EXPOSE 80

# \u81EA\u5B9A\u4E49\u5B89\u88C5\u7EC4\u4EF6\u3001\u6269\u5C55\u6216\u662F\u5E93, \u4F8B\u5982:
# RUN apk add --no-cache --update vim
`);switch(N.language){case"php":m+=`
                
# \u7AD9\u70B9\u76EE\u5F55\u4F4D\u4E8E /app/wwwroot \u53EF\u4E0A\u4F20\u6216\u662F\u4FEE\u6539\u7AD9\u70B9\u6587\u4EF6
# nginx \u914D\u7F6E\u4F4D\u4E8E /app/nginx/ \u53EF\u4FEE\u6539\u589E\u52A0\u81EA\u5B9A\u4E49\u914D\u7F6E
# \u901A\u8FC7\u8BBF\u95EE\u5BB9\u5668\u8FD0\u884C\u6620\u5C04\u7AEF\u53E3\uFF0C\u67E5\u770B\u73AF\u5883\u53CA\u6269\u5C55\u4FE1\u606F

`,N.language=="php"&&N.phpExt&&(m+="RUN apk add --no-cache --update ",N.phpExt.map(function(re){m+="php".concat(S,"-").concat(re," ")}));break;case"golang":m+=`
# \u53EF\u4EE5\u4FEE\u6539 RUN_COMMAND \u73AF\u5883\u53D8\u91CF, \u66F4\u6539\u542F\u52A8\u6267\u884C\u547D\u4EE4
ENV RUN_COMMAND="go version"`;break;default:break}X.onFinish(m),Y(!0)})},children:[(0,u.jsx)(n.Z.Group,{radioType:"button",name:"language",label:"\u7A0B\u5E8F\u8BED\u8A00",options:U.map(function(z){return{label:z.name,value:z.name}}),required:!0}),(0,u.jsx)(ne.Z,{name:["language"],children:function(N){var Y=N.language;return Y?(0,u.jsx)(u.Fragment,{children:U.map(function(f){if(f.name==Y)return(0,u.jsxs)("div",{children:[(0,u.jsx)(D.Z,{name:"".concat(f.name,"EnvVersion"),label:"\u73AF\u5883\u7248\u672C",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7A0B\u5E8F\u8FD0\u884C\u7684\u73AF\u5883"}],children:(0,u.jsx)(oe.Z,{options:f.env.map(function(d){return{label:d.name,value:d.baseImage}}),placeholder:"\u8BF7\u9009\u62E9\u5177\u4F53\u7684\u73AF\u5883\u7248\u672C"},"".concat(f.name,"Select"))},f.name),f.name=="php"&&(0,u.jsx)(D.Z,{label:"php\u6269\u5C55",name:"phpExt",children:(0,u.jsx)(oe.Z,{options:f.ext.map(function(d){return{label:d,value:d}}),mode:"multiple",placeholder:"\u8BF7\u9009\u62E9\u8981\u5B89\u88C5\u7684php\u6269\u5C55"},"phpExtSelect")},"phpExt")]},"envSelect")})}):(0,u.jsx)(u.Fragment,{})}})]})})}function se(X){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.Z,{title:"\u5BFC\u5165\u672C\u5730Dockerfile\u6587\u4EF6",onImport:function(K){var U;return(U=X.createFormRef.current)===null||U===void 0||U.setFieldValue("buildDockerfile",K),!0},onLoad:function(K){if(K.indexOf("FROM ")<0)throw new Error("\u5BFC\u5165Dockerfile\u6587\u4EF6\u9519\u8BEF");return!0}}),(0,u.jsx)(V,{onFinish:function(K){var U;(U=X.createFormRef.current)===null||U===void 0||U.setFieldValue("buildDockerfile",K)}}),(0,u.jsx)(D.Z,{shouldUpdate:!0,children:function(K){var U=K.getFieldValue;return(0,u.jsx)(D.Z,{name:"buildDockerfile",children:(0,u.jsx)(v.ZP,{value:U("buildDockerfile"),onChange:function(z){var N;(N=X.createFormRef.current)===null||N===void 0||N.setFieldValue("buildDockerfile",z)},height:"600px",theme:"dark",style:{marginBottom:"20px"}})})}})]})}var ge=e(24963),Fe=e(18148),Ce=e(75870),pe=e(38345),fe=e(97269),ce=e(64317),ie=e(90672),_e=e(54006),Ee=e(42075),q=e(83062),ee=e(91845);function de(){var X=(0,h.useContext)(ge.Z),B=X.loading,K=(0,h.useRef)(),U=(0,h.useState)([]),j=A()(U,2),z=j[0],N=j[1],Y=(0,_e.useSearchParams)(),f=A()(Y,2),d=f[0],F=f[1],R=(0,h.useState)("dockerfile"),S=A()(R,2),m=S[0],re=S[1],k=(0,_e.useNavigate)(),J=(0,h.useRef)();return(0,h.useEffect)(function(){var H,w=(H=d.get("id"))!==null&&H!==void 0?H:0;w&&(B.show(),(0,Fe.T8)({id:parseInt(w)}).then(function(a){var G;re(a.data.task.buildType),(G=K.current)===null||G===void 0||G.setFieldsValue({title:a.data.task.title,imageTag:a.data.task.tag,imageRegistry:a.data.task.setting.registry,uploadType:a.data.task.buildType,buildRoot:a.data.task.setting.buildRoot,buildGit:a.data.task.setting.buildGit,buildDockerfile:a.data.task.setting.buildDockerfile,platform:a.data.task.setting.platform})}).finally(function(){B.destroy()}))},[]),(0,u.jsxs)(pe.Z,{direction:"column",ghost:!0,gutter:[0,10],children:[(0,u.jsx)(pe.Z,{bordered:!0,headerBordered:!0,children:(0,u.jsxs)(fe.A,{submitter:{render:function(w,a){return(0,u.jsx)(Ee.Z,{children:a})}},onFinish:function(){var H=_()(r()().mark(function w(a){var G,te,ae,me,le,Me,Pe,De,Te,Be,ve,he,Ae,Oe,Re;return r()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(m!="containerTar"){Q.next=8;break}return Q.next=3,(0,b.vC)({tag:a.imageTag,registry:a.imageRegistry,tar:(G=a.containerTar[0].response.data.path)!==null&&G!==void 0?G:"",cmd:a.cmd,workDir:a.workDir,expose:a.expose?a.expose.split(`
`):[],env:a.env?a.env.split(`
`):[],volume:a.volume?a.volume.split(`
`):[]});case 3:return te=Q.sent,k("/image/list"),Q.abrupt("return",!0);case 8:if(m!="imageTar"){Q.next=18;break}return(ae=J.current)===null||ae===void 0||ae.start("import",a.imageTag),Q.next=12,(0,b.hG)({tag:a.imageTag,registry:a.imageRegistry,tar:(me=a.imageTar[0].response.data.path)!==null&&me!==void 0?me:""});case 12:return Me=Q.sent,(le=J.current)===null||le===void 0||le.reset(),k("/image/list"),Q.abrupt("return",!0);case 18:return Be=(Pe=d.get("id"))!==null&&Pe!==void 0?Pe:"0",ve=z&&z[0]?z[0].fileName:"",he={name:"",arch:""},b.ii.map(function(ye){ye.name==a.platform&&(he=ye)}),Ae={id:parseInt(Be),tag:a.imageTag,title:a.title,registry:a.imageRegistry,buildRoot:a.buildRoot,buildDockerfile:a.buildDockerfile,buildZip:ve!=null?ve:"",buildGit:a.buildGit,buildType:m,platform:he.name,PlatformArch:he.arch},a.buildZip&&a.buildZip.length>0&&(Ae.buildZip=(Oe=a.buildZip[0].response.data.path)!==null&&Oe!==void 0?Oe:""),(De=J.current)===null||De===void 0||De.start("build",Be),Q.next=27,(0,b.fN)(Ae);case 27:return Re=Q.sent,(Te=J.current)===null||Te===void 0||Te.reset(),k("/image/list/recycle"),Q.abrupt("return",!0);case 31:case"end":return Q.stop()}},w)}));return function(w){return H.apply(this,arguments)}}(),formRef:K,children:[(0,u.jsx)(C.Z,{label:"\u955C\u50CF\u540D\u79F0",name:"title",fieldProps:{onChange:function(w){var a="";if(w.target.value){var G,te=(0,ee.N9)(w.target.value.trim(),{toneType:"none",type:"array"});a=te.join(""),(G=K.current)===null||G===void 0||G.setFieldValue("imageTag",a)}}}}),(0,u.jsx)(ce.Z,{label:"\u955C\u50CF\u4ED3\u5E93",tooltip:(0,u.jsxs)(u.Fragment,{children:["\u63A8\u9001\u524D\u8BF7\u4FDD\u8BC1\u4ED3\u5E93\u4E2D\u6709\u6307\u5B9A\u7684\u547D\u540D\u7A7A\u95F4, \u5982\u6CA1\u6709\u8BF7\u5148 ",(0,u.jsx)("a",{href:"",target:"_blank",children:"\u6DFB\u52A0\u4ED3\u5E93"})]}),name:"imageRegistry",request:_()(r()().mark(function H(){var w;return r()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,(0,Ce.Ot)();case 2:return w=G.sent,G.abrupt("return",w.data.list.map(function(te){return{value:te.serverAddress,label:te.title+"("+te.serverAddress+")"}}));case 4:case"end":return G.stop()}},H)}))}),(0,u.jsx)(ne.Z,{name:["imageRegistry"],children:function(w){var a=w.imageRegistry;return(0,u.jsx)(C.Z,{fieldProps:{min:2,max:255,addonBefore:"".concat(a||"","/")},rules:[{required:!0}],required:!0,tooltip:"\u4F8B\u5982: name:tag\u3001namespace/name:tag\u3001registry/namespace/name:tag",placeholder:"\u53EA\u80FD\u4F7F\u7528\u5C0F\u5199\u82F1\u6587\u5B57\u7B26\u3001\u6570\u5B57\u3001_\u3001-\u3001",label:"\u955C\u50CFTag",name:"imageTag"})}}),(0,u.jsx)(n.Z.Group,{name:"uploadType",label:"\u6784\u5EFA\u65B9\u5F0F",initialValue:m,options:[{label:(0,u.jsx)(q.Z,{title:"\u901A\u8FC7 Dockerfile \u6587\u4EF6\u5FEB\u901F\u6784\u5EFA\u955C\u50CF",children:"Dockerfile"}),value:"dockerfile"},{label:(0,u.jsx)(q.Z,{title:"\u5C06 Dockerfile \u6587\u4EF6\u4E0E\u6784\u5EFA\u955C\u50CF\u7528\u5230\u7684\u8D44\u6E90\uFF0C\u901A\u8FC7\u4E0A\u4F20 Zip \u5305\u7684\u5F62\u5F0F\u6784\u5EFA\u955C\u50CF",children:"Zip\u5305"}),value:"zip"},{label:(0,u.jsx)(q.Z,{title:"\u5C06 Dockerfile \u6587\u4EF6\u4E0E\u6784\u5EFA\u955C\u50CF\u7528\u5230\u7684\u8D44\u6E90\u653E\u7F6E\u5230 Git \u4ED3\u5E93\u4E2D\uFF0C\u53EF\u4EE5\u6301\u7EED\u6027\u7684\u6784\u5EFA\u955C\u50CF",children:"Git\u6E90\u7801\u4ED3\u5E93"}),value:"git"},{label:(0,u.jsx)(q.Z,{title:"\u4E0A\u4F20\u5BB9\u5668\u5BFC\u51FA\u7684 Tar \u5305\uFF0C\u5E76\u81EA\u5B9A\u4E49\u53C2\u6570\u6784\u5EFA\u955C\u50CF\u3002\u5982\u679C\u4F60\u4E0D\u9700\u8981\u4FEE\u6539\u5BB9\u5668\u539F\u59CB\u914D\u7F6E\uFF0C\u53EF\u4EE5\u5728\u5BB9\u5668\u8BE6\u60C5\u9875\u4F7F\u7528\u3010\u5C06\u5BB9\u5668\u4FDD\u5B58\u4E3A\u955C\u50CF\u3011\u529F\u80FD",children:"\u5BFC\u5165\u5BB9\u5668Tar\u5305"}),value:"containerTar"},{label:(0,u.jsx)(q.Z,{title:"\u4E0A\u4F20\u955C\u50CF Tar \u5305\u6784\u5EFA\u955C\u50CF",children:"\u5BFC\u5165\u955C\u50CFTar\u5305"}),value:"imageTar"}],fieldProps:{onChange:function(w){re(w.target.value)}}}),(0,u.jsx)(ne.Z,{name:["uploadType"],children:function(w){var a=w.uploadType;if(a=="containerTar")return[(0,u.jsx)(C.Z,{tooltip:"\u6307\u5B9A\u5BFC\u5165\u540E\u7684\u955C\u50CF\u5DE5\u4F5C\u76EE\u5F55\uFF0C\u4E00\u822C\u6307\u5411\u4EE3\u7801\u7684\u6240\u5728\u76EE\u5F55",label:"\u5DE5\u4F5C\u76EE\u5F55",name:"workDir",placeholder:"\u9ED8\u8BA4\u4E3A / \u76EE\u5F55"},"workDir"),(0,u.jsx)(C.Z,{required:!0,tooltip:"\u901A\u8FC7\u5BB9\u5668\u5BFC\u5165\u955C\u50CF\u65F6\uFF0C\u5FC5\u987B\u6307\u5B9A\u542F\u52A8\u547D\u4EE4\uFF0C\u5426\u5219\u518D\u521B\u5EFA\u65F6\u65E0\u6CD5\u542F\u52A8",rules:[{required:!0}],label:"CMD",name:"cmd"},"cmd"),(0,u.jsx)(ie.Z,{tooltip:"\u6307\u5B9A\u5BFC\u5165\u540E\u7684\u955C\u50CF\u5BF9\u5916\u66B4\u9732\u7684\u7AEF\u53E3\uFF0C\u4E00\u884C\u6307\u5B9A\u4E00\u4E2A\u7AEF\u53E3",label:"\u66B4\u9732\u7AEF\u53E3",name:"expose",placeholder:`80 
9000`},"expose"),(0,u.jsx)(ie.Z,{tooltip:"\u6307\u5B9A\u5BFC\u5165\u540E\u7684\u955C\u50CF\u9700\u8981\u914D\u7F6E\u7684\u73AF\u5883\u53D8\u91CF\uFF0C\u4E00\u884C\u6307\u5B9A\u4E00\u4E2A\u73AF\u5883\u53D8\u91CF",label:"\u73AF\u5883\u53D8\u91CF",name:"env",placeholder:`TEST_VALUE=123 
TEST_NO_VALUE=`},"env"),(0,u.jsx)(ie.Z,{tooltip:"\u6307\u5B9A\u5BFC\u5165\u540E\u7684\u955C\u50CF\u9700\u8981\u6301\u4E45\u5316\u7684\u76EE\u5F55\uFF0C\u4E00\u884C\u6307\u5B9A\u4E00\u4E2A\u76EE\u5F55",label:"\u5B58\u50A8\u5377\u76EE\u5F55",name:"volume",placeholder:`/app 
/home`},"volume")];if(a!="imageTar"){if(a=="zip"||a=="git")return(0,u.jsx)(C.Z,{name:"buildRoot",label:"Dockerfile\u6587\u4EF6\u4F4D\u7F6E",tooltip:"\u6307\u5B9ADockerfile\u6240\u5728\u7684\u76EE\u5F55",fieldProps:{addonBefore:"\u9ED8\u8BA4\u4EE5\u5305\u6216\u662F\u4ED3\u5E93\u76EE\u5F55\u5F00\u59CB\uFF08/\uFF09"},placeholder:"/Dockerfile"})}}}),m=="zip"&&(0,u.jsx)(g,{label:"\u4E0A\u4F20\u6784\u5EFA\u5305 (\u53EA\u5141\u8BB8\u4E0A\u4F20 .zip \u6587\u4EF6\uFF0C\u4E14\u4E0E\u5305\u4E2D\u7684 Dockerfile \u6307\u5B9A\u7684\u76EE\u5F55\u4FDD\u6301\u4E00\u81F4)",name:"buildZip",accept:".zip"}),m=="containerTar"&&(0,u.jsx)(g,{label:"\u5BFC\u5165\u5BB9\u5668\u5305\uFF08\u53EA\u5141\u8BB8\u4E0A\u4F20 .tar \u6587\u4EF6\uFF0C\u901A\u8FC7\u5BFC\u51FA\u5BB9\u5668\u751F\u6210\uFF09",name:"containerTar",accept:".tar"}),m=="imageTar"&&(0,u.jsx)(g,{label:"\u5BFC\u5165\u955C\u50CF\u5305\uFF08\u53EA\u5141\u8BB8\u4E0A\u4F20 .tar \u6587\u4EF6\uFF0C\u901A\u8FC7\u5BFC\u51FA\u955C\u50CF\u751F\u6210\uFF09",name:"imageTar",accept:".tar"}),m=="git"&&(0,u.jsx)(y,{}),m=="dockerfile"&&(0,u.jsx)(se,{createFormRef:K})]})}),(0,u.jsx)(Z.Z,{ref:J})]})}},97961:function(ue,W,e){e.d(W,{MF:function(){return o},_2:function(){return M},fN:function(){return C},hG:function(){return P},ii:function(){return A},vC:function(){return y}});var T=e(15009),r=e.n(T),L=e(99289),_=e.n(L),E=e(54006),A=[{name:"amd64",arch:"amd64"},{name:"arm64",arch:"arm64"},{name:"i386",arch:"386"},{name:"arm/v6",arch:"arm"},{name:"arm/v7",arch:"arm"},{name:"arm/v8",arch:"arm64"},{name:"ppc64le",arch:"ppc64le"},{name:"riscv64",arch:"riscv64"}];function C(t){return u.apply(this,arguments)}function u(){return u=_()(r()().mark(function t(s){return r()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,E.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:s}));case 1:case"end":return c.stop()}},t)})),u.apply(this,arguments)}function y(t){return b.apply(this,arguments)}function b(){return b=_()(r()().mark(function t(s){return r()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,E.request)("/api/app/image/import-by-container-tar",{method:"POST",data:s}));case 1:case"end":return c.stop()}},t)})),b.apply(this,arguments)}function P(t){return p.apply(this,arguments)}function p(){return p=_()(r()().mark(function t(s){return r()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,E.request)("/api/app/image/import-by-image-tar",{method:"POST",data:s}));case 1:case"end":return c.stop()}},t)})),p.apply(this,arguments)}function M(t){return l.apply(this,arguments)}function l(){return l=_()(r()().mark(function t(s){return r()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,E.request)("/api/common/attach/delete",{method:"POST",data:s});case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},t)})),l.apply(this,arguments)}function o(){return h.apply(this,arguments)}function h(){return h=_()(r()().mark(function t(){return r()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,E.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return O.stop()}},t)})),h.apply(this,arguments)}},18148:function(ue,W,e){e.d(W,{$q:function(){return l},Fj:function(){return x},KG:function(){return A},KX:function(){return Z},T8:function(){return p},Xn:function(){return b},ao:function(){return h},c5:function(){return c},c7:function(){return s}});var T=e(15009),r=e.n(T),L=e(99289),_=e.n(L),E=e(54006);function A(v){return C.apply(this,arguments)}function C(){return C=_()(r()().mark(function v(D){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,E.request)("/api/app/image/get-list",{method:"POST",data:D}));case 1:case"end":return n.stop()}},v)})),C.apply(this,arguments)}function u(v){return y.apply(this,arguments)}function y(){return y=_asyncToGenerator(_regeneratorRuntime().mark(function v(D){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,request("/api/app/log/image-build",{method:"POST",data:D});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},v)})),y.apply(this,arguments)}function b(v){return P.apply(this,arguments)}function P(){return P=_()(r()().mark(function v(D){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,E.request)("/api/app/image/get-list-build",{method:"POST",data:D}));case 1:case"end":return n.stop()}},v)})),P.apply(this,arguments)}function p(v){return M.apply(this,arguments)}function M(){return M=_()(r()().mark(function v(D){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.request)("/api/app/image/get-build-task",{method:"POST",data:D});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},v)})),M.apply(this,arguments)}function l(v){return o.apply(this,arguments)}function o(){return o=_()(r()().mark(function v(D){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.request)("/api/app/image/delete-build-task",{method:"POST",data:D});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},v)})),o.apply(this,arguments)}function h(v){return t.apply(this,arguments)}function t(){return t=_()(r()().mark(function v(D){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.request)("/api/app/image/image-delete",{method:"POST",data:D});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},v)})),t.apply(this,arguments)}function s(){return O.apply(this,arguments)}function O(){return O=_()(r()().mark(function v(){return r()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,(0,E.request)("/api/app/image/image-prune",{method:"POST"});case 2:return I.abrupt("return",I.sent);case 3:case"end":return I.stop()}},v)})),O.apply(this,arguments)}function c(){return $.apply(this,arguments)}function $(){return $=_()(r()().mark(function v(){return r()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,(0,E.request)("/api/app/image/build-prune",{method:"POST"});case 2:return I.abrupt("return",I.sent);case 3:case"end":return I.stop()}},v)})),$.apply(this,arguments)}function x(v){return g.apply(this,arguments)}function g(){return g=_()(r()().mark(function v(D){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,E.request)("/api/app/image/update-title",{method:"POST",data:D});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},v)})),g.apply(this,arguments)}function Z(v){return i.apply(this,arguments)}function i(){return i=_()(r()().mark(function v(D){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,E.request)("/api/app/image/tag-sync",{method:"POST",data:D}));case 1:case"end":return n.stop()}},v)})),i.apply(this,arguments)}},75870:function(ue,W,e){e.d(W,{Ot:function(){return A},ZH:function(){return u},ix:function(){return b},t1:function(){return p}});var T=e(15009),r=e.n(T),L=e(99289),_=e.n(L),E=e(54006);function A(l){return C.apply(this,arguments)}function C(){return C=_()(r()().mark(function l(o){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/common/registry/get-list",{method:"POST",data:o}));case 1:case"end":return t.stop()}},l)})),C.apply(this,arguments)}function u(l){return y.apply(this,arguments)}function y(){return y=_()(r()().mark(function l(o){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/common/registry/create",{method:"POST",data:o}));case 1:case"end":return t.stop()}},l)})),y.apply(this,arguments)}function b(l){return P.apply(this,arguments)}function P(){return P=_()(r()().mark(function l(o){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/common/registry/delete",{method:"POST",data:o}));case 1:case"end":return t.stop()}},l)})),P.apply(this,arguments)}function p(l){return M.apply(this,arguments)}function M(){return M=_()(r()().mark(function l(o){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/common/registry/get-detail",{method:"POST",data:o}));case 1:case"end":return t.stop()}},l)})),M.apply(this,arguments)}}}]);
