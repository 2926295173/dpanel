"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4316],{52645:function(vn,Ze,n){n.d(Ze,{Z:function(){return C}});var Ae=n(87462),B=n(67294),Le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},c=Le,be=n(84089),_e=function(D,Re){return B.createElement(be.Z,(0,Ae.Z)({},D,{ref:Re,icon:c}))},Pe=B.forwardRef(_e),C=Pe},85060:function(vn,Ze,n){n.d(Ze,{Z:function(){return C}});var Ae=n(87462),B=n(67294),Le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},c=Le,be=n(84089),_e=function(D,Re){return B.createElement(be.Z,(0,Ae.Z)({},D,{ref:Re,icon:c}))},Pe=B.forwardRef(_e),C=Pe},92067:function(vn,Ze,n){n.d(Ze,{Z:function(){return Y}});var Ae=n(15009),B=n.n(Ae),Le=n(99289),c=n.n(Le),be=n(13822),_e=n(64789),Pe=n(9773),C=n(42075),Fe=n(83062),D=n(83622),Re=n(37413),Je=n(5251),Ve=n(36146),Ie=n(67255),Q=n(85893);function Y(Xe){return(0,Q.jsx)(Pe.Z,{columns:[{title:Ve.FD.format("listContainerName"),dataIndex:"name",render:function(S,j,H,G){return(0,Q.jsx)(C.Z,{direction:"vertical",style:{textAlign:"left"},children:j==null?void 0:j.Names.map(function(de){return(0,Je.fi)(de,"/")})},j.Id)}},{title:Ve.FD.format("listPort"),dataIndex:"ports",search:!1,render:function(S,j,H,G){var de=[],Ue=[];return j!=null&&j.Ports&&j.Ports.map(function(g,Ge){g.PublicPort?de.push(g):Ue.push(g)}),(0,Q.jsx)(Re.Z,{publicPort:de,privatePort:Ue,domain:[]})}},{title:Ve.FD.format("listManage"),valueType:"option",key:"option",ellipsis:!0,width:100,render:function(S,j,H,G){return[(0,Q.jsx)(Fe.Z,{title:Ve.FD.format("listManageUse"),children:(0,Q.jsx)(D.ZP,{type:"link",onClick:c()(B()().mark(function de(){var Ue;return B()().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:return Ge.next=2,(0,be.jV)({md5:j.Id});case 2:Ue=Ge.sent,Xe.onSelect&&Xe.onSelect(Ue.data.info);case 4:case"end":return Ge.stop()}},de)})),children:(0,Q.jsx)(_e.Z,{})},j.Id)},j.Id)]}}],rowKey:"Id",request:function(){var w=c()(B()().mark(function S(j,H,G){var de;return B()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,be.IE)({siteTitle:j.name});case 2:return de=g.sent,g.abrupt("return",{data:de.data.list,success:!0,total:de.data.list.length});case 4:case"end":return g.stop()}},S)}));return function(S,j,H){return w.apply(this,arguments)}}(),pagination:(0,Ie.Oh)()})}},47248:function(vn,Ze,n){var Ae=n(15009),B=n.n(Ae),Le=n(99289),c=n.n(Le),be=n(5574),_e=n.n(be),Pe=n(38345),C=n(97269),Fe=n(62370),D=n(5966),Re=n(64317),Je=n(83622),Ve=n(85265),Ie=n(25593),Q=n(42075),Y=n(67294),Xe=n(92754),w=n(82346),S=n(2205),j=n(3616),H=n(36146),G=n(23430),de=n(68297),Ue=n(77342),g=n(85893),Ge=(0,Y.forwardRef)(function(dn,yn){var Dn=(0,Y.useState)(!1),cn=_e()(Dn,2),oe=cn[0],rn=cn[1],ye=(0,Y.useRef)(),an=(0,Y.useRef)(),Qe=(0,Y.useState)(!1),en=_e()(Qe,2),v=en[0],ke=en[1],J=new H.Uo("components.imagePull");return(0,Y.useImperativeHandle)(yn,function(){return{upgradeImage:function(E){var e;return rn(!0),(e=ye.current)===null||e===void 0||e.setFieldValue("imageUrl",E),(0,de.Ze)({tag:E,type:"pull"})},setImageName:function(E){var e;rn(!0),(e=ye.current)===null||e===void 0||e.setFieldValue("imageUrl",E)}}}),[(0,g.jsx)(Je.ZP,{type:dn.buttonType?dn.buttonType:"default",icon:(0,g.jsx)(G.Z,{}),onClick:function(){var E,e;rn(!0),(E=ye.current)===null||E===void 0||E.resetFields(),(e=an.current)===null||e===void 0||e.setStart("")},children:J.format("triggerButton")},"remoteBtn"),(0,g.jsxs)(Ve.Z,{forceRender:!0,open:oe,title:J.format("drawerTitle"),width:j.R_,onClose:function(){var E;rn(!1),(E=an.current)===null||E===void 0||E.close()},footer:!1,children:[(0,g.jsx)(Pe.Z,{children:(0,g.jsx)(Ie.Z.Text,{children:(0,g.jsxs)("ul",{style:{lineHeight:"30px"},children:[(0,g.jsxs)("li",{children:[J.format("tip.1")," ",(0,g.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:H.FD.format("help")})]}),(0,g.jsxs)("li",{children:[J.format("tip.2")," ",(0,g.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:H.FD.format("help")})]}),(0,g.jsxs)("li",{children:[J.format("tip.3")," "]}),(0,g.jsxs)("li",{children:[J.format("tip.4")," ",(0,g.jsx)(w.Link,{to:"/image/registry",children:H.Ob.format("image.registry.create")})]}),(0,g.jsxs)("li",{children:[J.format("tip.5")," ",(0,g.jsx)(w.Link,{to:"/image/registry",children:H.Ob.format("image.registry")})]})]})})}),(0,g.jsx)(Pe.Z,{title:J.format("triggerButton"),headerBordered:!0,children:(0,g.jsxs)(C.A,{formRef:ye,submitter:!1,isKeyPressSubmit:!0,onFinish:function(){var we=c()(B()().mark(function E(e){var Ye,on,mn,K,nn,Cn;return B()().wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:return nn=(Ye=e.imageUrl)!==null&&Ye!==void 0?Ye:"",e.registry&&(nn=e.registry.serverAddress+"/"+nn),ke(!0),(on=an.current)===null||on===void 0||on.setStart(nn),tn.next=6,(0,de.Ze)({tag:(0,Ue.Z)(nn," "),type:"pull",platform:(mn=e.platform)!==null&&mn!==void 0?mn:""}).finally(function(){ke(!1)});case 6:return Cn=tn.sent,(K=an.current)===null||K===void 0||K.setFinish(),rn(!1),dn.onFinish&&dn.onFinish(Cn.data.tag),tn.abrupt("return",!0);case 11:case"end":return tn.stop()}},E)}));return function(E){return we.apply(this,arguments)}}(),children:[(0,g.jsxs)(Q.Z.Compact,{children:[(0,g.jsx)(Fe.Z,{name:"registry",children:(0,g.jsx)(S.Z,{width:"150px"})}),(0,g.jsx)(D.Z,{disabled:v,width:270,name:"imageUrl",placeholder:J.format("imageUrlEmpty"),required:!0,rules:[{required:!0}]}),(0,g.jsx)(Re.Z,{name:"platform",style:{width:100},placeholder:J.format("imagePlatformEmpty"),options:de.ii.map(function(we){return{label:we.name,value:we.name}})}),(0,g.jsx)(Je.ZP,{loading:v,onClick:c()(B()().mark(function we(){var E;return B()().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:(E=ye.current)===null||E===void 0||E.submit();case 1:case"end":return Ye.stop()}},we)})),children:J.format("triggerButton")}),(0,g.jsx)(Je.ZP,{danger:!0,onClick:function(){var E;(E=an.current)===null||E===void 0||E.close()},children:H.FD.format("listManageKill")})]}),(0,g.jsx)(Fe.Z,{label:J.format("progressTitle"),children:(0,g.jsx)(Xe.Z,{ref:an})})]})})]},"remoteDrawer")]});Ze.Z=Ge},36435:function(vn,Ze,n){var Ae=n(15009),B=n.n(Ae),Le=n(64599),c=n.n(Le),be=n(99289),_e=n.n(be),Pe=n(9783),C=n.n(Pe),Fe=n(5574),D=n.n(Fe),Re=n(67294),Je=n(184),Ve=n(38345),Ie=n(97269),Q=n(97321),Y=n(97462),Xe=n(64317),w=n(5966),S=n(86615),j=n(68602),H=n(83622),G=n(83403),de=n(24963),Ue=n(1699),g=n(29177),Ge=n(1883),dn=n(43425),yn=n(44349),Dn=n(3616),cn=n(36146),oe=n(85893),rn=(0,Re.forwardRef)(function(ye,an){var Qe=(0,Re.useState)(!1),en=D()(Qe,2),v=en[0],ke=en[1],J=(0,Re.useRef)(),we=(0,Re.useContext)(de.Z),E=we.message,e=(0,Re.useState)([]),Ye=D()(e,2),on=Ye[0],mn=Ye[1],K=new cn.Uo("components.permissionButton"),nn=C()(C()(C()(C()(C()({},G.W6.CONTAINER,"Id"),G.W6.APPSTORE,"name"),G.W6.COMPOSE,"name"),G.W6.REGISTRY,"serverAddress"),G.W6.DOCKER_ENV,"name"),Cn=C()(C()(C()(C()(C()({},G.W6.CONTAINER,"name"),G.W6.APPSTORE,"name"),G.W6.COMPOSE,"name"),G.W6.REGISTRY,"title"),G.W6.DOCKER_ENV,"title"),Mn=nn[ye.type],tn=Cn[ye.type],An=ye.selected.map(function(X){return X[nn[ye.type]]});return Re.useEffect(function(){if(v){if(!ye.selected||ye.selected.length==0){E.error(cn.FD.format("title.noDataSelect")),ke(!1);return}(0,j.dP)({permission:{uri:ye.type,key:Mn,value:An}}).then(function(X){var $;($=J.current)===null||$===void 0||$.setFieldValue("list",Object.keys(X.data.list).map(function(q){return{name:q,type:X.data.list[q].type,users:X.data.list[q].users}}))}),(0,j.lE)().then(function(X){var $,q=($=X.data)===null||$===void 0||($=$.list)===null||$===void 0?void 0:$.map(function(ie){return{label:ie.username,value:ie.username}});mn(q)})}},[v]),(0,oe.jsx)(Ue.u,{access:["canSeeEnableEe","canSeeFounder","canSeeManage"],children:(0,oe.jsxs)(Je.a,{name:"create",title:K.format("drawerTitle"),open:v,onOpenChange:function($){if(!$){var q;(q=J.current)===null||q===void 0||q.resetFields()}ke($)},drawerProps:{forceRender:!0,width:Dn.R_},formRef:J,trigger:(0,oe.jsx)(H.ZP,{icon:(0,oe.jsx)(g.Z,{}),children:K.format("drawerTriggerButton")}),onFinish:function(){var X=_e()(B()().mark(function $(q){var ie,ge,ee;return B()().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:ie=c()(q.list),ve.prev=1,ie.s();case 3:if((ge=ie.n()).done){ve.next=9;break}return ee=ge.value,ve.next=7,(0,j.Db)({usernames:ee.users,permissionType:ee.type,permission:{uri:ye.type,key:Mn,showKey:tn,value:[ee.name]}});case 7:ve.next=3;break;case 9:ve.next=14;break;case 11:ve.prev=11,ve.t0=ve.catch(1),ie.e(ve.t0);case 14:return ve.prev=14,ie.f(),ve.finish(14);case 17:E.success(cn.FD.format("finish")),ke(!1),ye.onSuccess();case 20:case"end":return ve.stop()}},$,null,[[1,11,14,17]])}));return function($){return X.apply(this,arguments)}}(),children:[(0,oe.jsxs)(Ve.Z,{ghost:!0,title:(0,oe.jsx)(Ge.Z,{}),subTitle:K.format("batchTitle"),children:[(0,oe.jsx)(Ie.A.Item,{name:"type",style:{marginBottom:0},children:(0,oe.jsx)(Q.Z.Group,{defaultValue:"admin",onChange:function($){var q,ie,ge=(q=J.current)===null||q===void 0?void 0:q.getFieldValue("list");ge.forEach(function(ee){ee.type=$,ee.users=[]}),(ie=J.current)===null||ie===void 0||ie.setFieldValue("list",ge)},children:["admin","restricted","public"].map(function(X){return(0,oe.jsx)(Q.Z,{style:{width:240},title:K.format("dataTypeOption.".concat(X)),description:K.format("dataTypeDescOption.".concat(X)),value:X},X)})})}),(0,oe.jsx)(Y.Z,{name:["type"],children:function($){var q=$.type;if(q==="restricted")return(0,oe.jsx)(Xe.Z,{mode:"multiple",name:"usernames",label:K.format("formUsernames"),onChange:function(ge){var ee,u,ve=(ee=J.current)===null||ee===void 0?void 0:ee.getFieldValue("list");ve.forEach(function(Ne){Ne.users=ge}),(u=J.current)===null||u===void 0||u.setFieldValue("list",ve)},rules:[{required:!0}],request:_e()(B()().mark(function ie(){var ge,ee,u;return B()().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if(!(on.length>0)){Ne.next=2;break}return Ne.abrupt("return",on);case 2:return Ne.next=4,(0,j.lE)();case 4:return ee=Ne.sent,u=(ge=ee.data)===null||ge===void 0||(ge=ge.list)===null||ge===void 0?void 0:ge.map(function(pn){return{label:pn.username,value:pn.username}}),mn(u),Ne.abrupt("return",u);case 8:case"end":return Ne.stop()}},ie)}))})}})]}),(0,oe.jsx)(Ve.Z,{ghost:!0,title:(0,oe.jsx)(dn.Z,{}),subTitle:K.format("dataTitle"),children:(0,oe.jsx)(yn.Z,{name:"list",hideCopyButton:!0,gap:10,items:[{name:"name",label:K.format("dataName"),render:function($,q,ie){var ge=ie.getCurrentRowData();return(0,oe.jsx)(w.Z,{disabled:!0,label:K.format("dataName"),width:"sm",name:"name"})}},{name:"type",label:K.format("dataType"),render:function($,q,ie){var ge=ie.getCurrentRowData();return(0,oe.jsx)(S.Z.Group,{label:K.format("dataType"),name:"type",radioType:"button",options:["admin","public","restricted"].map(function(ee){return{label:K.format("dataTypeOption.".concat(ee)),value:ee}})})}},{name:"users",label:K.format("dataUsers"),render:function($,q,ie){return(0,oe.jsx)(Y.Z,{name:["type"],children:function(ee){var u=ee.type;if(u=="restricted")return(0,oe.jsx)(Xe.Z,{width:"sm",mode:"tags",name:"users",label:K.format("dataUsers"),options:on})}})}}]})})]})})});Ze.Z=rn},57755:function(vn,Ze,n){n.r(Ze),n.d(Ze,{default:function(){return $t}});var Ae=n(64599),B=n.n(Ae),Le=n(15009),c=n.n(Le),be=n(19632),_e=n.n(be),Pe=n(99289),C=n.n(Pe),Fe=n(5574),D=n.n(Fe),Re=n(74453),Je=n(34041),Ve=n(97269),Ie=n(62370),Q=n(42075),Y=n(25593),Xe=n(40411),w=n(96074),S=n(83062),j=n(84567),H=n(82346),G=n(1883),de=n(89035),Ue=n(95591),g=n(86548),Ge=n(16596),dn=n(52645),yn=n(82061),Dn=n(33160),cn=n(87784),oe=n(30159),rn=n(74842),ye=n(99611),an=n(94359),Qe=n(13822),en=n(80821),v=n(67294),ke=n(62597),J=n(87662),we=n(16165),E=n(5251),e=n(85893),Ye=function(){return(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18403",children:(0,e.jsx)("path",{d:"M224 192v64H96v576h128v64h64v-64h64v64h64v-64h64v64h64v-64h64v64h64v-64h64v64h64v-64h128V256h-128V192h-64v64h-64V192h-64v64h-64V192h-64v64h-64V192h-64v64H288V192z m-64 128h704v448H160z m96 64c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32zM256 512c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m512 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32zM256 640c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z","p-id":"18404"})})},on=function(){return(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18546",children:(0,e.jsx)("path",{d:"M64 224v576h416v-32c0-17.76 14.24-32 32-32 17.76 0 32 14.24 32 32v32h416V224z m64 64h768v288H128z m64 64v160h192v-160z m224 0v160h192v-160z m224 0v160h192v-160zM256 416h64v32H256z m224 0h64v32h-64z m224 0h64v32h-64zM128 640h768v96h-300.992c-14.144-35.52-42.752-64-83.008-64-40.256 0-68.864 28.48-83.008 64H128z","p-id":"18547"})})};function mn(f){var Ce,m,V,T,z,ne;return(0,e.jsx)(e.Fragment,{children:f.value&&f.value.memory&&f.value.memory.out>0?(0,e.jsxs)(Q.Z,{children:[(0,e.jsxs)(S.Z,{title:"Cpu: ".concat((Ce=f.value)===null||Ce===void 0?void 0:Ce.cpu.toFixed(2),"%"),children:[(0,e.jsx)(we.Z,{component:Ye,style:{width:15,lineHeight:20}})," ","".concat((m=f.value)===null||m===void 0?void 0:m.cpu.toFixed(2),"%")]}),(0,e.jsxs)(S.Z,{title:"Memory: ".concat((0,E.FI)((V=f.value)===null||V===void 0?void 0:V.memory.in)," / ").concat((0,E.FI)((T=f.value)===null||T===void 0?void 0:T.memory.out)),children:[(0,e.jsx)(we.Z,{component:on,style:{width:15,lineHeight:20}})," ","".concat((((z=f.value)===null||z===void 0?void 0:z.memory.in)/((ne=f.value)===null||ne===void 0?void 0:ne.memory.out)*100).toFixed(2),"%")]})]}):""})}var K=n(67255),nn=n(37413),Cn=n(67007),Mn=n(99922),tn=n(83403),An=n(20578),X=n(99861),$=n(78914),q=n(29453),ie=n(8287),ge=n(24905),ee=n(78451),u=n(36146),ve=n(36435),Ne=n(1699),pn=n(55375),sn=n(59683),nt=n(97857),tt=n.n(nt),Be=n(38345),Se=n(5966),jn=n(24739),ln=n(97462),Tn=n(83622),rt=n(30291),at=n(92398),ot=n(40056),Hn=n(42963),it=n(51042),st=n(63434),Kn=n(17186),$n=n(71230),On=n(15746),Vn=n(85265),lt=n(92067),Ln=n(3616),En=n(89240),ut=(0,v.forwardRef)(function(f,Ce){var m=(0,v.useState)(!1),V=D()(m,2),T=V[0],z=V[1],ne=(0,v.useRef)(),y=new u.Uo("components.appForm"),L=function(A){return(0,e.jsxs)(Be.Z,{bordered:!0,extra:A.action,style:{marginBottom:10},children:[(0,e.jsx)(Be.Z,{title:y.format("createLinkItemTitle"),ghost:!0,children:(0,e.jsxs)($n.Z,{children:[(0,e.jsx)(On.Z,{span:6,children:(0,e.jsx)(Se.Z,{label:y.format("createLinkItemName"),name:"name",width:"md",readonly:!0})}),(0,e.jsxs)(On.Z,{span:14,children:[(0,e.jsx)(Se.Z,{label:y.format("createLinkItemAlise"),name:"alise",width:"md",readonly:!0,tooltip:y.format("createLinkItemAliseTip"),hidden:!0}),(0,e.jsx)(Ie.Z,{label:y.format("createLinkItemAlise"),tooltip:y.format("createLinkItemAliseTip"),children:(0,e.jsx)(Q.Z,{direction:"vertical",children:[A.name,A.record.alise].map(function(x){return(0,e.jsx)(Y.Z.Text,{copyable:!0,children:x})})})})]}),(0,e.jsx)(On.Z,{span:4,children:(0,e.jsx)(st.Z,{label:y.format("createLinkItemVolume"),name:"volume"})})]})}),(0,e.jsx)(Be.Z,{ghost:!0,title:y.format("createLinkItemEnv"),children:(0,e.jsx)(Q.Z,{direction:"vertical",children:A.record.env&&(0,E.oZ)(A.record.env).map(function(x,Z){return(0,e.jsx)(Y.Z.Text,{copyable:{icon:(0,e.jsx)(it.Z,{}),onCopy:function(){f.onAddEnv(x.name,x.value)},tooltips:[y.format("createLinkAddToEnv"),"success"]},code:!0,ellipsis:{tooltip:"".concat(x.name,"=").concat(x.value)},children:"".concat(x.name,"=").concat(x.value)},Z)})},"linkEnv")})]})},te=function(A){var x,Z,W=!1,M=(x=(Z=ne.current)===null||Z===void 0?void 0:Z.getList())!==null&&x!==void 0?x:[];if(M.map(function(je){je.name==A.name&&(W=!0)}),!W){var se;(se=ne.current)===null||se===void 0||se.add(A)}};return(0,v.useImperativeHandle)(Ce,function(){return{setDefaultLink:function(A){A&&A.map(function(x){x.name!=""&&te(x)})}}}),(0,e.jsxs)(Be.Z,{title:y.format("createLinkTitle"),headerBordered:!0,tooltip:"".concat(y.format("createParamsDemo",{params:"--link list"})),ghost:!0,children:[(0,e.jsx)(Kn.u,{name:"links",actionRef:ne,creatorButtonProps:{creatorButtonText:y.format("createLinkAddButton")},actionGuard:{beforeAddRow:function(A,x){return z(!0),!1}},copyIconProps:!1,min:0,itemRender:function(A,x){return(0,e.jsx)(L,{action:A.action,name:x.record.name,record:x.record})}}),(0,e.jsx)(Vn.Z,{title:y.format("createLinkSelectContainer"),width:Ln.R_,footer:!1,open:T,onClose:function(){return z(!1)},children:(0,e.jsx)(lt.Z,{onSelect:function(A){te({name:(0,E.fi)(A.Name,"/"),volume:!1,env:A.Config.Env,alise:(0,En.zY)(A.Name)}),z(!1)}})})]})}),dt=ut,ct=n(91058),mt=n(10523),ft=n(24796),_n=n(52688),zn=n(24963);function vt(){var f=(0,v.useContext)(zn.Z),Ce=f.message,m=new u.Uo("components.appForm");return(0,e.jsx)(Be.Z,{ghost:!0,children:(0,e.jsxs)(jn.UW,{children:[(0,e.jsx)(_n.Z,{fieldProps:{onChange:function(T){T&&Ce.warning(m.format("createAdvRunCommandPrivilegedNotice"))}},name:"privileged",tooltip:"".concat(m.format("createParamsDemo",{params:"--privileged"})),label:m.format("createAdvRunCommandPrivileged"),initialValue:!1}),(0,e.jsx)(_n.Z,{name:"autoRemove",tooltip:"".concat(m.format("createParamsDemo",{params:"--rm"})),label:m.format("createAdvRunCommandAutoRemove"),initialValue:!1}),(0,e.jsx)(_n.Z,{fieldProps:{onChange:function(T){T&&Ce.warning(m.format("createAdvRunCommandHostPidNotice"))}},tooltip:"".concat(m.format("createParamsDemo",{params:"--pid host"})),name:"hostPid",label:m.format("createAdvRunCommandHostPid"),initialValue:!1})]})})}var pt=n(20743),ht=(0,v.forwardRef)(function(f,Ce){var m=(0,v.useRef)(),V=(0,v.useRef)(),T=new u.Uo("components.appForm");(0,v.useImperativeHandle)(Ce,function(){return{}});var z=function(y){var L,te,O=!1,A=(L=(te=m.current)===null||te===void 0?void 0:te.getList())!==null&&L!==void 0?L:[];if(A.map(function(Z){Z.name==y.name&&(O=!0)}),!O){var x;(x=m.current)===null||x===void 0||x.add(y)}};return(0,e.jsxs)(Be.Z,{ghost:!0,title:T.format("createNetworkTitle"),tooltip:"".concat(T.format("createParamsDemo",{params:"--network list"})),headerBordered:!0,extra:(0,e.jsx)(Q.Z,{children:f.showUseBridgeNetwork&&(0,e.jsx)(_n.Z,{name:"useBridgeNetwork",initialValue:!0,fieldProps:{checkedChildren:T.format("createNetworkUseBridgeNetwork"),unCheckedChildren:T.format("createNetworkUseBridgeNetwork")}},"useBridgeNetwork")}),children:[(0,e.jsx)(Kn.u,{name:"network",actionRef:m,creatorButtonProps:{creatorButtonText:T.format("createNetworkAddButton")},actionGuard:{beforeAddRow:function(y,L){var te;return(te=V.current)===null||te===void 0||te.show(),!1}},copyIconProps:!1,min:0,itemRender:function(y,L){return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(jn.UW,{children:[(0,e.jsx)(Se.Z,{label:T.format("createNetworkName"),name:"name",width:"md",disabled:!0,fieldProps:{value:L.record.name}}),(0,e.jsx)(Se.Z,{label:T.format("createNetworkAlise"),name:"alise",tooltip:T.format("createNetworkAliseTip"),placeholder:T.format("createNetworkAliseEmpty"),disabled:L.record.name=="bridge"}),(0,e.jsx)(Se.Z,{label:"IpV4",name:"ipV4",width:"md",disabled:L.record.name=="bridge",fieldProps:{addonAfter:L.record.subnet}}),L.record.subnetV6&&(0,e.jsx)(Se.Z,{label:"IpV6",name:"ipV6",width:"md",disabled:L.record.name=="bridge",fieldProps:{addonAfter:L.record.subnetV6}}),(0,e.jsx)(Ie.Z,{label:" ",children:y.action})]})})}}),(0,e.jsx)(pt.Z,{ref:V,onSelect:function(y){z({name:y.Name,alise:[""],subnet:y.IPAM.Config&&y.IPAM.Config[0].Subnet,subnetV6:y.IPAM.Config&&y.IPAM.Config[1]&&y.IPAM.Config[1].Subnet})}})]})}),gt=ht,Ct=n(82034),Zn=n(52255),jt=n(59252),Un=n(73813),Et=function(Ce){var m=new u.Uo("components.appForm");return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(Be.Z,{title:m.format("createSelfNetworkTitle"),subTitle:m.format("createSelfNetworkTitleTip"),tooltip:"".concat(m.format("createParamsDemo",{params:"--network string --ip string --ip6 string"})),ghost:!0,children:[(0,e.jsxs)(jn.UW,{children:[(0,e.jsx)(Se.Z,{label:m.format("createSelfNetworkIp",{ip:"ipv4"}),name:["ipV4","address"],width:"md",tooltip:m.format("createSelfNetworkIpTip",{ip:"ipv4",example:"192.168.1.5"}),placeholder:"192.168.1.5"}),(0,e.jsx)(ln.Z,{name:["ipV4"],children:function(T){var z=T.ipV4;return(0,e.jsx)(Se.Z,{label:m.format("createSelfNetworkIpSubnet",{ip:"ipv4"}),name:["ipV4","subnet"],width:"md",required:z&&z.address,tooltip:m.format("createSelfNetworkIpSubnetTip",{ip:"ipv4",example:"192.168.1.0/24"}),placeholder:"192.168.1.0/24",rules:[{required:z&&z.address}]})}}),(0,e.jsx)(Se.Z,{label:m.format("createSelfNetworkIpGateway",{ip:"ipv4"}),name:["ipV4","gateway"],width:"md",tooltip:m.format("createSelfNetworkIpGatewayTip",{ip:"ipv4",example:"192.168.1.1"}),placeholder:"192.168.1.1"}),(0,e.jsx)(_n.Z,{label:m.format("createSelfNetworkIpV6Enable"),name:"enableIpV6Address"})]}),(0,e.jsx)(ln.Z,{name:["enableIpV6Address"],children:function(T){var z=T.enableIpV6Address;if(z)return(0,e.jsxs)(jn.UW,{children:[(0,e.jsx)(Se.Z,{label:m.format("createSelfNetworkIp",{ip:"ipv6"}),name:["ipV6","address"],width:"md",tooltip:m.format("createSelfNetworkIpTip",{ip:"ipv6",example:"2001:db8::5"}),placeholder:"2001:db8::5"}),(0,e.jsx)(ln.Z,{name:["ipV6"],children:function(y){var L=y.ipV6;return(0,e.jsx)(Se.Z,{label:m.format("createSelfNetworkIpSubnet",{ip:"ipv6"}),name:["ipV6","subnet"],width:"md",required:L&&L.address,tooltip:m.format("createSelfNetworkIpSubnetTip",{ip:"ipv6",example:"2001:db8::/48"}),placeholder:"2001:db8::/48",rules:[{required:L&&L.address}]})}}),(0,e.jsx)(Se.Z,{label:m.format("createSelfNetworkIpGateway",{ip:"ipv6"}),name:["ipV6","gateway"],width:"md",tooltip:m.format("createSelfNetworkIpGatewayTip",{ip:"ipv6",example:"2001:db8::1"}),placeholder:"2001:db8::1"})]})}})]})})},_t=Et,Pt=n(90672);function Rt(){var f=new u.Uo("components.appForm");return(0,e.jsx)(Be.Z,{ghost:!0,title:f.format("createHookTitle"),subTitle:"",children:(0,e.jsx)(Pt.Z,{label:f.format("createHookContainerCreate"),name:["hook","containerCreate"],placeholder:f.format("createHookContainerCreateTip")})})}var xt=n(93529),It=n(9773),yt=n(66309),Dt=n(64789),Mt=n(85060),Ot=n(80271),Zt=n(47248);function bt(f){var Ce=(0,v.useState)(!1),m=D()(Ce,2),V=m[0],T=m[1],z=(0,v.useContext)(Hn.Z),ne=z.createFormRef,y=z.volumeListRef,L=z.createEnvRef,te=z.domainRef,O=new u.Uo("components.appForm");function A(Z){return x.apply(this,arguments)}function x(){return x=C()(c()().mark(function Z(W){var M,se,je,F,We,He,ze,re,b,a,ae,xe;return c()().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.next=2,(0,Un.YU)({md5:W});case 2:return F=ce.sent,f.redeploy||(re=(We=ne.current)===null||We===void 0?void 0:We.getFieldsValue(),(He=ne.current)===null||He===void 0||He.resetFields(),(ze=ne.current)===null||ze===void 0||ze.setFieldsValue({siteName:re.siteName,siteTitle:re.siteTitle})),F.data.info.Config.Env&&F.data.info.Config.Env.map(function(le){var pe,qe=le.split("=");(pe=L.current)===null||pe===void 0||pe.addEnvItem(qe[0],qe.slice(1).join("="))}),(M=ne.current)===null||M===void 0||M.setFieldValue("imageName",W),(se=ne.current)===null||se===void 0||se.setFieldValue("workDir",F.data.info.Config.WorkingDir),(je=te.current)===null||je===void 0||je.setExposePort(F.data.info.Config.ExposedPorts),f.redeploy||(F.data.info.Config.Volumes?(ae=[],Object.keys(F.data.info.Config.Volumes).map(function(le,pe){ae.push(le)}),(a=y.current)===null||a===void 0||a.setDefaultDestPath(ae)):(xe=y.current)===null||xe===void 0||xe.setDefaultDestPath([]),(b=ne.current)===null||b===void 0||b.setFieldsValue({workDir:{value:"",useDefault:!0,default:F.data.info.Config.WorkingDir},user:{value:"",useDefault:!0,default:F.data.info.Config.User},command:{value:"",useDefault:!0,default:F.data.info.Config.Cmd&&F.data.info.Config.Cmd.join(" ")},entrypoint:{value:"",useDefault:!0,default:F.data.info.Config.Entrypoint&&F.data.info.Config.Entrypoint.join(" ")}})),ce.abrupt("return",!0);case 10:case"end":return ce.stop()}},Z)})),x.apply(this,arguments)}return(0,v.useEffect)(function(){f.fromImageId&&A(f.fromImageId)},[f.fromImageId]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Vn.Z,{destroyOnHidden:!0,open:V,width:Ln.R_,title:O.format("dockerImageTitle"),footer:!1,onClose:function(){T(!1)},children:(0,e.jsx)(It.Z,{scroll:{x:"max-content"},columns:[{title:"Id",dataIndex:"Id",search:!1,width:120,render:function(W,M,se,je,F){return(0,e.jsx)(ee.Z,{content:M.Id.slice(7,19)})}},{title:u.FD.format("listImageName"),dataIndex:"tag",render:function(W,M,se,je){return(0,e.jsx)(ee.Z,{content:M.RepoTags[0]})}},{title:"Digest",width:120,render:function(W,M,se,je,F){var We=M.RepoDigests&&M.RepoDigests[0];return We?We.substring(We.indexOf("@")+8).substring(0,12):(0,e.jsx)(yt.Z,{color:"warning",children:new u.Uo("components.appDetail").format("checkImageUpgradeOption.-3")})}},{title:u.FD.format("listCreatedAt"),dataIndex:"Created",search:!1,width:180,render:function(W,M,se,je){return(0,e.jsx)("div",{children:(0,E.ZM)(M.Created*1e3)},M.Id)},sorter:function(W,M){return W.Created-M.Created}},{title:u.FD.format("listManage"),valueType:"option",key:"option",width:50,render:function(W,M,se,je){return(0,e.jsx)(Q.Z,{split:(0,e.jsx)(w.Z,{type:"vertical"}),children:(0,e.jsx)(en.Z,{buttonProps:{icon:(0,e.jsx)(Dt.Z,{}),type:"link"},tips:u.FD.format("listManageUse"),action:function(){return A(M.RepoTags[0])},onSuccess:function(){T(!1)}},"addImage")})}}],request:function(){var Z=C()(c()().mark(function W(M,se,je){var F,We,He;return c()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return f.redeploy,re.next=3,(0,Un.KG)({tag:M.tag});case 3:return F=re.sent,We=0,He=[],F.data.list&&(He=F.data.list.flatMap(function(b){return b.RepoTags.map(function(a){var ae,xe=(ae=b.RepoDigests)===null||ae===void 0?void 0:ae.find(function(Te){var ce=Te.split("@"),le=D()(ce,2),pe=le[0],qe=le[1];return a.includes(pe)});return{Key:We++,Id:b.Id,Created:b.Created,RepoTags:[a],RepoDigests:[xe]}})})),re.abrupt("return",{data:He,success:!0,total:He.length});case 8:case"end":return re.stop()}},W)}));return function(W,M,se){return Z.apply(this,arguments)}}(),rowKey:"Key",pagination:(0,K.Oh)()})},"imageTableList"),(0,e.jsxs)(Q.Z.Compact,{children:[(0,e.jsx)(Se.Z,{width:"lg",label:O.format("dockerImageImageName"),name:"imageName",disabled:!0,placeholder:O.format("dockerImageImageNameEmpty"),rules:[{required:!0}],required:!0}),(0,e.jsx)(Ie.Z,{label:" ",children:(0,e.jsx)(Tn.ZP,{type:"primary",onClick:function(){return T(!0)},children:O.format("dockerImageTitle")},"showBtn")}),(0,e.jsx)(ln.Z,{name:["imageName"],children:function(W){var M=W.imageName;if(M)return(0,e.jsx)(Ie.Z,{label:" ",children:(0,e.jsx)(X.Z,{finishAutoHide:!0,image:M?[M]:[],trigger:(0,e.jsx)(S.Z,{title:O.format("dockerImageUpgradeImageTip"),children:(0,e.jsx)(Tn.ZP,{icon:(0,e.jsx)(Mt.Z,{}),children:O.format("dockerImageUpgradeImageButton")})})})})}}),(0,e.jsx)(Ie.Z,{label:" ",children:(0,e.jsx)(Zt.Z,{onFinish:function(W){A(W)}},"remote")}),(0,e.jsx)(Ie.Z,{label:" ",children:(0,e.jsx)(ln.Z,{name:["imageName"],children:function(W){var M=W.imageName;if(M)return(0,e.jsx)(Ne.u,{access:"canSeeEnableCe",showProTips:!0,children:function(je){var F=je.canSeeEnableCe;return(0,e.jsx)(Ot.Z,{imageId:M,trigger:(0,e.jsx)(Tn.ZP,{disabled:F,children:O.format("dockerImageFileExplorer")})})}})}})})]})]})}var wt=n(44349);function St(){var f=new u.Uo("components.appForm");return(0,e.jsx)(Be.Z,{ghost:!0,title:f.format("createDevice"),headerBordered:!0,tooltip:"".concat(f.format("createParamsDemo",{params:"--device list"})),children:(0,e.jsx)(wt.Z,{name:"device",showAddButtonLabel:"".concat(u.FD.format("listManageAdd")).concat(f.format("createDevice")),hideCopyButton:!0,showAddButton:!0,gap:10,items:[{label:f.format("createDeviceHost"),name:"host",width:"md",placeholder:"/dev/tty0"},{label:f.format("createDeviceDest"),name:"dest",width:"md",placeholder:"/dev/tty0"}]})})}var Gn=n(64317);function Tt(){var f=new u.Uo("components.appForm");return(0,e.jsxs)(Be.Z,{ghost:!0,children:[(0,e.jsxs)($n.Z,{children:[(0,e.jsx)(On.Z,{span:4,children:(0,e.jsx)(_n.Z,{label:f.format("createGpus"),name:["gpus","enable"]})}),(0,e.jsx)(On.Z,{span:20,children:(0,e.jsx)(ln.Z,{name:["gpus"],children:function(m){var V=m.gpus;if(V&&V.enable)return(0,e.jsx)(Gn.Z,{tooltip:"".concat(f.format("createParamsDemo",{params:"--gpus 'device=0'"})),mode:"tags",label:f.format("createGpusDevice"),name:["gpus","device"],placeholder:f.format("createGpusDeviceEmpty")})}})})]}),(0,e.jsx)(ln.Z,{name:["gpus"],children:function(m){var V=m.gpus;if(V&&V.enable)return(0,e.jsx)(Gn.Z,{tooltip:"".concat(f.format("createParamsDemo",{params:"--gpus 'capabilities=compute,utility'"})),label:f.format("createGpusCap"),name:["gpus","capabilities"],mode:"multiple",fieldProps:{allowClear:!0},options:f.option("createGpusCapOption",["compute","compat32","graphics","utility","video","display"])})}})]})}var At=n(55730),Lt=n(27323),Ut=n(44771),Nt=n(33879),Ft=n(96486),Nn=n.n(Ft),kt=n(73396),Qn=n(14946),Bt=n(64412),Wt=n(27166),Ht=(0,v.forwardRef)(function(f,Ce){var m,V=(0,v.useContext)(zn.Z),T=V.notice,z=(0,H.useAccess)(),ne=(0,v.useState)("basic"),y=D()(ne,2),L=y[0],te=y[1],O=new u.Uo("app"),A=new u.Uo("components.appForm"),x=(0,v.useRef)(),Z=(0,v.useRef)(),W=(0,v.useRef)(),M=(0,v.useRef)(),se=(0,v.useRef)(),je=(0,v.useState)(!1),F=D()(je,2),We=F[0],He=F[1],ze=(0,v.useRef)();return(0,v.useImperativeHandle)(Ce,function(){return{show:function(b){return C()(c()().mark(function a(){var ae,xe,Te,ce,le,pe,qe,I,o,r,h,p,i,s,d,k,De,me,Ke,U,_,he,$e,Ee,N,t,ue,Pn,Rn,Yn,Jn,xn,Xn,Fn;return c()().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if((ae=x.current)===null||ae===void 0||ae.resetFields(),b){Me.next=3;break}return Me.abrupt("return");case 3:return He(!0),(xe=ze.current)===null||xe===void 0||xe.loading(),Me.prev=5,Me.next=8,(0,ke.iE)({id:b});case 8:if(N=Me.sent,t=(Te=N.data.containerInfo)===null||Te===void 0?void 0:Te.Info,ue={info:{}},!t){Me.next=16;break}return Me.next=14,(0,Un.YU)({md5:t.Image});case 14:Pn=Me.sent,ue=Pn.data;case 16:return Rn=[],Me.next=19,(0,Qn.jR)();case 19:return Yn=Me.sent,Rn=Yn.data.list,Jn=function(l){if(!l)return{};var P=l[N.data.siteName];if(!P)return{};var R=Rn&&Rn.find(function(fe){return fe.Id==P.NetworkID});return{ipV4:{address:P.IPAddress,gateway:P.Gateway,subnet:R&&R.IPAM.Config&&R.IPAM.Config[0]&&R.IPAM.Config[0].Subnet},ipV6:{address:P.GlobalIPv6Address,gateway:P.IPv6Gateway,subnet:R&&R.IPAM.Config&&R.IPAM.Config[1]&&R.IPAM.Config[1].Subnet},enableIpV6Address:R&&R.IPAM.Config&&R.IPAM.Config[1],bindIpV6:!!(R&&R.IPAM.Config&&R.IPAM.Config[1])}}(t==null?void 0:t.NetworkSettings.Networks),xn=[],Me.next=25,function(){var l=C()(c()().mark(function P(R,fe){var fn;return c()().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(!(!(fe!=null&&fe.NetworkSettings)||!(fe!=null&&fe.NetworkSettings.Networks)||!(fe!=null&&fe.NetworkSettings.Networks[R]))){Oe.next=2;break}return Oe.abrupt("return",[]);case 2:return Oe.next=4,(0,Qn.IS)({name:R});case 4:if(fn=Oe.sent,Oe.t0=fn.data.info.Containers,!Oe.t0){Oe.next=10;break}return Oe.next=9,Promise.all(Object.entries(fn.data.info.Containers).filter(function(kn){var bn=D()(kn,2),qn=bn[0],wn=bn[1];return wn.Name!=R}).map(function(){var kn=C()(c()().mark(function bn(qn){var wn,Vt,Sn,In,et,hn,Bn;return c()().wrap(function(gn){for(;;)switch(gn.prev=gn.next){case 0:if(wn=D()(qn,2),Vt=wn[0],Sn=wn[1],Sn.Name==R){gn.next=9;break}return gn.next=4,(0,Qe.jV)({md5:Sn.Name});case 4:return et=gn.sent,hn=et.data.info,Bn=(In=fe.HostConfig)===null||In===void 0||(In=In.VolumesFrom)===null||In===void 0?void 0:In.includes(Sn.Name),Bn&&hn.Mounts&&xn.push.apply(xn,_e()(hn.Mounts.map(function(zt){var Wn;return(Wn=zt.Destination)!==null&&Wn!==void 0?Wn:""}))),gn.abrupt("return",{name:Sn.Name,alise:hn&&(0,En.zY)(hn.Name),env:hn&&hn.Config.Env,volume:Bn});case 9:case"end":return gn.stop()}},bn)}));return function(bn){return kn.apply(this,arguments)}}()));case 9:Oe.t0=Oe.sent;case 10:return Oe.abrupt("return",Oe.t0);case 11:case"end":return Oe.stop()}},P)}));return function(P,R){return l.apply(this,arguments)}}()(N.data.siteName,t);case 25:Xn=Me.sent,(ce=x.current)===null||ce===void 0||ce.setFieldsValue(tt()({id:t==null?void 0:t.Id,siteTitle:N.data.siteTitle,siteName:N.data.siteName,hook:N.data.env.hook,imageName:t==null?void 0:t.Config.Image,hostname:t==null?void 0:t.Config.Hostname,privileged:t==null||(le=t.HostConfig)===null||le===void 0?void 0:le.Privileged,useHostNetwork:(t==null||(pe=t.HostConfig)===null||pe===void 0?void 0:pe.NetworkMode)=="host",publishAllPorts:t==null||(qe=t.HostConfig)===null||qe===void 0?void 0:qe.PublishAllPorts,groupAdd:t==null||(I=t.HostConfig)===null||I===void 0?void 0:I.GroupAdd,workDir:{value:t==null?void 0:t.Config.WorkingDir,useDefault:ue.info.Config.WorkingDir==(t==null?void 0:t.Config.WorkingDir),default:ue&&ue.info.Config&&ue.info.Config.WorkingDir},user:{value:t==null?void 0:t.Config.User,useDefault:ue.info.Config.User==(t==null?void 0:t.Config.User),default:ue.info.Config.User},command:{value:t==null||(o=t.Config.Cmd)===null||o===void 0?void 0:o.join(" "),useDefault:Nn().isEqual(ue.info.Config.Cmd,t==null?void 0:t.Config.Cmd),default:((r=ue.info.Config)===null||r===void 0?void 0:r.Cmd)&&ue.info.Config.Cmd.join(" ")},entrypoint:{value:t==null?void 0:t.Config.Entrypoint,useDefault:Nn().isEqual(ue.info.Config.Entrypoint,t==null?void 0:t.Config.Entrypoint),default:((h=ue.info)===null||h===void 0||(h=h.Config)===null||h===void 0?void 0:h.Entrypoint)&&ue.info.Config.Entrypoint.join(" ")},shmsize:(0,En.Rk)(t==null||(p=t.HostConfig)===null||p===void 0?void 0:p.ShmSize),cpus:(0,En.PD)(t==null||(i=t.HostConfig)===null||i===void 0?void 0:i.NanoCpus),memory:(0,En.pM)(t==null||(s=t.HostConfig)===null||s===void 0?void 0:s.Memory),environment:(t==null?void 0:t.Config.Env)&&(0,E.oZ)(t.Config.Env,"="),label:function(l){return l&&Object.entries(l).map(function(P){var R=D()(P,2),fe=R[0],fn=R[1];return{name:fe,value:fn}})}(t==null?void 0:t.Config.Labels),volumes:function(l){return l==null?void 0:l.filter(function(P){var R;return!xn||xn.length==0||!xn.includes((R=P.Destination)!==null&&R!==void 0?R:"")}).map(function(P){return{host:P.Type=="bind"?P.Source:P.Name,dest:P.Destination,type:P.Type,permission:P.RW?"write":"readonly"}})}(t==null?void 0:t.Mounts),ports:(0,En.yi)(t),links:Xn,network:function(l){return l&&Object.entries(l).map(function(P){var R=D()(P,2),fe=R[0],fn=R[1],un=Rn&&Rn.find(function(Oe){return Oe.Name==fe});return{name:fe,alise:"",ipV4:fn.IPAddress,subnet:"".concat(un&&un.IPAM.Config&&un!==null&&un!==void 0&&un.IPAM.Config[0]?un==null?void 0:un.IPAM.Config[0].Subnet:"-","/").concat(fn.IPPrefixLen)}})}(t==null?void 0:t.NetworkSettings.Networks),restart:function(l){return l?{name:l==null?void 0:l.Name,maxAttempt:l==null?void 0:l.MaximumRetryCount}:{name:"no"}}(t==null||(d=t.HostConfig)===null||d===void 0?void 0:d.RestartPolicy),extraHosts:(0,E.oZ)(t==null||(k=t.HostConfig)===null||k===void 0?void 0:k.ExtraHosts,":"),autoRemove:t==null||(De=t.HostConfig)===null||De===void 0?void 0:De.AutoRemove,log:function(l,P){return{driver:(P=l==null?void 0:l.Type)!==null&&P!==void 0?P:"json-file",maxFile:(l==null?void 0:l.Config)&&l.Config["max-file"],maxSize:(l==null?void 0:l.Config)&&l.Config["max-size"]}}(t==null||(me=t.HostConfig)===null||me===void 0?void 0:me.LogConfig),dns:t==null||(Ke=t.HostConfig)===null||Ke===void 0||(Ke=Ke.Dns)===null||Ke===void 0?void 0:Ke.join(`
`),gpus:function(l){var P=l==null?void 0:l.find(function(fe){return fe.Driver=="nvidia"});if(!P)return{enable:!1};var R=P.Capabilities&&P.Capabilities[0];return{device:P.DeviceIDs,capabilities:R&&R.includes("gpu")?[]:R,enable:!0}}(t==null||(U=t.HostConfig)===null||U===void 0?void 0:U.DeviceRequests),device:function(l){return l==null?void 0:l.map(function(P){return{host:P.PathOnHost,dest:P.PathInContainer}})}(t==null||(_=t.HostConfig)===null||_===void 0?void 0:_.Devices),hostPid:(t==null||(he=t.HostConfig)===null||he===void 0?void 0:he.PidMode)=="host",capAdd:t==null||($e=t.HostConfig)===null||$e===void 0?void 0:$e.CapAdd,healthcheck:function(l,P,R){if(!l)return{};var fe=l!=null&&(P=l.Test)!==null&&P!==void 0&&P.includes("CMD-SHELL")?"CMD-SHELL":"CMD";return{interval:(l==null?void 0:l.Interval)&&l.Interval/ke.nL.Second,timeout:(l==null?void 0:l.Timeout)&&l.Timeout/ke.nL.Second,retries:l==null?void 0:l.Retries,cmd:l!=null&&l.Test?l==null||(R=l.Test)===null||R===void 0?void 0:R.slice(1).join(" "):"",shellType:fe}}(t==null?void 0:t.Config.Healthcheck),useBridgeNetwork:function(l){return!!(l&&l.bridge)}(t==null?void 0:t.NetworkSettings.Networks),enableBindHost:t==null||(Ee=t.HostConfig)===null||Ee===void 0||(Ee=Ee.ExtraHosts)===null||Ee===void 0?void 0:Ee.some(function(l){return l.includes(":host-gateway")})},Jn));case 27:return Me.prev=27,(Fn=ze.current)===null||Fn===void 0||Fn.finish(),Me.finish(27);case 30:case"end":return Me.stop()}},a,null,[[5,,27,30]])}))()}}}),(0,e.jsx)(Hn.Z.Provider,{value:{createFormRef:x,volumeListRef:Z,domainRef:W,createEnvRef:se,createLinkRef:M},children:(0,e.jsx)(Wt.Z,{title:u.Ob.format("container.create"),trigger:(0,e.jsx)(Tn.ZP,{type:"primary",disabled:!z.canSeeContainerListManageCreate,children:u.Ob.format("container.create")}),drawerProps:{forceRender:!0,width:Ln.R_,rootClassName:"createAppWapper"},ref:ze,formRef:x,onFinish:function(){var re=C()(c()().mark(function b(a){var ae,xe,Te,ce,le,pe;return c()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if((ae=ze.current)===null||ae===void 0||ae.loading(),pe={id:a.id,siteTitle:a.siteTitle,siteName:a.siteName,hostname:a.hostname,imageName:a.imageName,environment:a.environment,links:a.links,ports:a.ports,volumes:a.volumes,network:a.network&&a.network.map(function(o){return Nn().isArray(o.alise)||(o.alise=[o.alise]),o}),privileged:(xe=a.privileged)!==null&&xe!==void 0?xe:!1,autoRemove:(Te=a.autoRemove)!==null&&Te!==void 0?Te:!1,restartPolicy:a.restart,cpus:a.cpus,memory:a.memory,shmsize:(ce=a.shmsize)!==null&&ce!==void 0?ce:0,workDir:a.workDir&&!a.workDir.useDefault?a.workDir.value:"",user:a.user&&!a.user.useDefault?a.user.value:"",groupAdd:a.groupAdd,command:a.command&&!a.command.useDefault?a.command.value:"",entrypoint:a.entrypoint&&!a.entrypoint.useDefault?a.entrypoint.value:"",useHostNetwork:a.useHostNetwork,bindIpV6:a.bindIpV6,log:a.log,dns:a.dns,label:a.label,publishAllPorts:a.publishAllPorts,extraHosts:a.extraHosts,ipV4:a.ipV4,ipV6:a.ipV6,device:a.device,gpus:a.gpus,hook:a.hook,hostPid:a.hostPid,capAdd:a.capAdd,useBridgeNetwork:(le=a.useBridgeNetwork)!==null&&le!==void 0?le:!0},!(!a.useBridgeNetwork&&!a.useHostNetwork&&(!a.network||a.network.length==0))){I.next=5;break}return T.error(O.format("createMessageNoBridgeNetworkMustHasUseNetwork")),I.abrupt("return",!1);case 5:return a.useBridgeNetwork&&pe.network&&!pe.network.find(function(o){return o.name=="bridge"})&&pe.network.push({name:"bridge",alise:[],ipV4:""}),a.healthcheck&&a.healthcheck.cmd&&a.healthcheck.cmd!=""&&(pe.healthcheck=a.healthcheck),I.next=9,(0,ke.$G)(pe).finally(function(){var o;(o=ze.current)===null||o===void 0||o.finish()});case 9:return f.onFinish&&f.onFinish(),I.abrupt("return",!0);case 11:case"end":return I.stop()}},b)}));return function(b){return re.apply(this,arguments)}}(),open:We,onOpenChange:function(b){var a;He(b),!b&&((a=x.current)===null||a===void 0||a.resetFields())},children:(0,e.jsxs)(Be.Z,{direction:"column",gutter:[0,10],ghost:!0,children:[(0,e.jsxs)(Be.Z,{ghost:!0,title:O.format("createTitle"),children:[(0,e.jsx)(Ie.Z,{hidden:!0,name:"id"}),(0,e.jsx)(Se.Z,{name:"siteTitle",label:O.format("createSiteTitle"),placeholder:O.format("createSiteTitleEmpty")}),(0,e.jsxs)(jn.UW,{children:[(0,e.jsx)(Se.Z,{width:"md",name:"siteName",label:O.format("createSiteName"),required:!0,rules:[{required:!0}],tooltip:"".concat(A.format("createParamsDemo",{params:"--name string"})),placeholder:O.format("createSiteNameEmpty")}),(0,e.jsx)(Se.Z,{label:"Hostname",name:"hostname",width:"md",tooltip:"".concat(A.format("createParamsDemo",{params:"--hostname string"}))})]}),(0,e.jsx)(bt,{redeploy:(m=x.current)===null||m===void 0?void 0:m.getFieldValue("id"),fromImageId:""})]}),(0,e.jsx)(rt.Z,{offsetTop:10,target:function(){return document.querySelector(".createAppWapper .ant-drawer-body")},children:(0,e.jsx)(Be.Z,{style:{margin:-20},children:(0,e.jsx)(at.Z,{activeKey:L,onChange:function(b){te(b)},items:A.option("createTabOption",["basic","link","run-command","resource","cap"]).map(function(re){return{label:re.label,key:re.value}})})})}),(0,e.jsxs)(Zn.Z,{show:L=="basic",children:[(0,e.jsx)(Ct.Z,{ref:W,showBindHost:!0,showBindIpV6:!0,showBindAll:!0}),(0,e.jsx)(ct.Z,{showAddButton:!0,showImportButton:!0,showCodeMode:!0,ref:se,drawerProps:{title:A.format("createEnvTitle"),tooltip:"".concat(A.format("createParamsDemo",{params:"-e, --env list"})),ghost:!0}}),(0,e.jsx)(mt.Z,{showDefault:!0,ref:Z}),(0,e.jsx)(ln.Z,{name:["siteName","useHostNetwork"],children:function(b){var a=b.siteName,ae=b.useHostNetwork;if(!ae)return(0,e.jsx)(_t,{})}}),(0,e.jsx)(Bt.Z,{}),(0,e.jsx)(ft.Z,{})]}),(0,e.jsxs)(Zn.Z,{show:L=="link",children:[(0,e.jsx)(ln.Z,{name:["siteName","useHostNetwork"],children:function(b){var a=b.siteName,ae=b.useHostNetwork;return ae?(0,e.jsx)(Be.Z,{children:(0,e.jsx)(ot.Z,{showIcon:!0,description:O.format("createNetworkDesc")})}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(dt,{onAddEnv:function(Te,ce){var le;(le=se.current)===null||le===void 0||le.addEnvItem(Te,ce)},ref:M}),(0,e.jsx)(gt,{showUseBridgeNetwork:!0,siteName:a}),(0,e.jsx)(jt.Z,{})]})}}),(0,e.jsx)(St,{})]}),(0,e.jsxs)(Zn.Z,{show:L=="run-command",children:[(0,e.jsxs)(jn.UW,{children:[(0,e.jsx)(Ut.Z,{ghost:!0,defaultValue:"always",showLabel:!0}),(0,e.jsx)(vt,{})]}),(0,e.jsx)(Nt.Z,{showCommand:!0,showEntrypoint:!0,showWorkDir:!0,showUser:!0}),(0,e.jsx)(Lt.Z,{}),(0,e.jsx)(Rt,{})]}),(0,e.jsxs)(Zn.Z,{show:L=="resource",children:[(0,e.jsx)(kt.Z,{}),(0,e.jsx)(At.Z,{showShmsize:!0}),(0,e.jsx)(Tt,{})]}),(0,e.jsx)(Zn.Z,{show:L=="cap",children:(0,e.jsx)(xt.Z,{})})]})})})}),Kt=Ht;function $t(){var f=new u.Uo("components.appDetail"),Ce=new u.Uo("app"),m=(0,H.useAccess)(),V=(0,v.useState)(""),T=D()(V,2),z=T[0],ne=T[1],y=(0,v.useState)(1),L=D()(y,2),te=L[0],O=L[1],A=(0,v.useState)([]),x=D()(A,2),Z=x[0],W=x[1],M=(0,v.useState)(),se=D()(M,2),je=se[0],F=se[1],We=(0,v.useState)([]),He=D()(We,2),ze=He[0],re=He[1],b=(0,v.useRef)(),a=(0,v.useRef)(),ae=(0,v.useRef)(),xe=(0,v.useRef)(),Te=(0,v.useRef)(),ce=(0,v.useRef)(),le=(0,v.useRef)(),pe=(0,v.useRef)(),qe=(0,v.useRef)();return(0,v.useEffect)(function(){(0,J.K3)().then(function(I){var o;ne((o=I.data.serverUrl)!==null&&o!==void 0?o:"")}),!m.canSeeEnableCe&&(0,An.q)().then(function(I){F(I.data)})},[]),(0,v.useEffect)(function(){var I;!((I=b.current)===null||I===void 0)&&I.reload&&b.current.reload(!1)},[te]),(0,e.jsxs)(Re._z,{header:{extra:[(0,e.jsx)(Kt,{onFinish:function(){O(te+1)},ref:qe},"createByImage")]},children:[(0,e.jsx)(Cn.Z,{ref:a,onFinish:function(){O(te+1)},onUpgradeFinish:function(){O(te+1)}}),(0,e.jsx)(Mn.Z,{showFileExplorer:!0,ref:ae}),(0,e.jsx)(ie.Z,{ref:xe}),(0,e.jsx)(X.Z,{ref:le,finishAutoHide:!0}),(0,e.jsx)($.Z,{ref:pe}),(0,e.jsx)(ge.Z,{showConsole:!0,ref:Te}),(0,e.jsx)(sn.C,{actionRef:b,tableKey:pn.Dc,columns:[{key:"title",title:u.FD.format("listTitle"),width:300,dataIndex:"siteTitle",sorter:function(o,r){return o.Names[0].localeCompare(r.Names[0])},defaultSortOrder:(0,K.rj)(pn.Dc,"title"),sortDirections:K.h5,render:function(o,r,h,p,i){var s=(0,E.fi)(r.Names[0],"/");return(0,e.jsxs)(Q.Z,{direction:"vertical",children:[(0,e.jsx)(Y.Z.Link,{onClick:function(){var k;(k=a.current)===null||k===void 0||k.show(r.Id)},children:(0,e.jsx)(ee.Z,{content:s})}),!m.canSeeEnableCe&&je&&je.container&&je.container.find(function(d){return d.id==r.Id})&&(0,e.jsx)(Xe.Z,{count:"new"})]})}},{title:u.FD.format("listTag"),hidden:!0,dataIndex:"tag",renderFormItem:function(o,r,h,p){return(0,e.jsx)(Je.Z,{onSelect:function(s){h.submit()},onDeselect:function(){h.submit()},onClear:function(){h.submit()},allowClear:!0,popupMatchSelectWidth:!1,options:ze&&Object.entries(ze.reduce(function(i,s){var d=s.group||"tag";return i[d]||(i[d]=[]),i[d].push(s),i},{})).map(function(i){var s=D()(i,2),d=s[0],k=s[1];return{label:d,title:d,options:k.map(function(De){return{label:De.tag,value:De.tag}})}})})}},{key:"ports",title:u.FD.format("listAccess"),tooltip:u.FD.format("listAccessTip"),width:150,dataIndex:"ports",search:!1,render:function(o,r,h,p){var i,s=[],d=[];return r!=null&&r.Ports&&r.Ports.map(function(k,De){k.PublicPort?s.push(k):d.push(k)}),(0,e.jsx)(nn.Z,{publicPort:s,privatePort:d,domain:(i=r.DPExtend)===null||i===void 0?void 0:i.domainList,serverIp:z})}},{title:u.FD.format("listUsage"),width:200,search:!1,key:"usage",sorter:function(o,r){var h={},p={};if(Z){var i,s;h=(i=Z.find(function(d){return o.Id.startsWith(d.container)}))!==null&&i!==void 0?i:{},p=(s=Z.find(function(d){return r.Id.startsWith(d.container)}))!==null&&s!==void 0?s:{}}return JSON.stringify(h).localeCompare(JSON.stringify(p))},defaultSortOrder:(0,K.rj)(pn.Dc,"usage"),sortDirections:K.h5,render:function(o,r,h,p,i){if(!Z||Z.length<=0)return"";var s={};return Z.filter(function(d){r.Id.indexOf(d.container)==0&&(s=d)}),(0,e.jsx)(mn,{value:s})}},{title:u.FD.format("listRunStatus"),key:"status",dataIndex:["container","status"],search:!1,width:130,render:function(o,r,h,p){var i="",s={};if(r.State.includes("(")){var d=r.State.indexOf("(");d>-1&&(i="compose.".concat(r.State.slice(0,d))),s={count:r.State.slice(d+1,r.State.length-1)}}else i="container.".concat(r.State),r.Status.indexOf("(healthy)")>-1?i="container.healthy":r.Status.indexOf("(unhealthy)")>-1&&(i="container.unhealthy");return(0,e.jsx)(an.Z,{statusValue:s,status:i,tip:"".concat(r.State," ").concat(r.Status)})}},{title:u.FD.format("listImageName"),key:"image",width:150,dataIndex:"image",render:function(o,r,h,p){return(0,e.jsx)("span",{style:{wordBreak:"break-word"},children:(0,e.jsx)(Y.Z.Link,{onClick:function(){var s;(s=pe.current)===null||s===void 0||s.show(r.Image)},children:r.Image.includes("sha256:")?r.Image.substring(7,19):r.Image})})}},{key:"created",search:!1,title:u.FD.format("listCreatedAt"),width:170,dataIndex:["Created"],render:function(o,r,h,p,i){return(0,E.ZM)(r.Created*1e3)},sorter:function(o,r){return new Date(o.Created*1e3).toISOString().localeCompare(new Date(r.Created*1e3).toISOString())},defaultSortOrder:(0,K.rj)(pn.Dc,"created"),sortDirections:K.h5},{title:u.FD.format("listManage"),valueType:"option",key:"option",width:200,fixed:"right",hidden:!m.canSeeContainerListManage,render:function(o,r,h,p){return(0,e.jsxs)(Q.Z,{split:(0,e.jsx)(w.Z,{type:"vertical"}),children:[(0,e.jsx)(Y.Z.Link,{onClick:function(){var s;(s=xe.current)===null||s===void 0||s.show(r.Id)},children:(0,e.jsx)(S.Z,{title:u.FD.format("listManageLog"),children:(0,e.jsx)(G.Z,{})})},"log"),(r.State=="running"||r.State=="healthy"||r.State=="unhealthy")&&(0,e.jsx)(Y.Z.Link,{onClick:function(){var s;(s=ae.current)===null||s===void 0||s.show({url:"/console/container/".concat(r.Id),title:(0,E.fi)(r.Names[0],"/")})},children:(0,e.jsx)(S.Z,{title:u.FD.format("listManageConsole"),children:(0,e.jsx)(de.Z,{})})},"console"),(r.State=="running"||r.State=="healthy"||r.State=="unhealthy")&&(0,e.jsx)(Y.Z.Link,{onClick:function(){var s,d=r.Names.find(function(k){if(k.indexOf("/")===0)return k});(s=Te.current)===null||s===void 0||s.showContainer(d!=null?d:r.Names[0])},children:(0,e.jsx)(S.Z,{title:u.FD.format("listManageFileExplorer"),children:(0,e.jsx)(Ue.Z,{})})},"file"),(0,e.jsx)(Y.Z.Link,{onClick:function(){var s;(s=qe.current)===null||s===void 0||s.show(r.Id)},children:(0,e.jsx)(S.Z,{title:u.FD.format("listManageEdit"),children:(0,e.jsx)(g.Z,{})})},"edit")]})}}],rowKey:"Id",request:function(){var I=C()(c()().mark(function o(r,h,p){var i,s,d,k,De,me;return c()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,Qe.IE)({siteTitle:r.title,image:r.image});case 2:return s=U.sent,d="",k=[],U.next=7,(0,q.e1)({showCompose:!0,showSwarm:!0});case 7:if(De=U.sent,re(De.data.list),me=[],me=s.data.list.map(function(_){var he=s.data.siteList.find(function(N){return N.containerInfo&&N.containerInfo.Id==_.Id&&N.siteTitle!=""});if(he&&_.Names.unshift(he.siteTitle),_.Labels&&_.Labels[ke.fu]&&_.Names.unshift(_.Labels[ke.fu]),_.DPExtend={domainList:s.data.domainList.filter(function(N,t){return _.Names.includes(N.containerId)}).map(function(N){return N.setting.enableSSL?"https://"+N.serverName:"http://"+N.serverName}),tag:[]},_.Labels&&_.Labels["com.docker.compose.project"]){var $e;($e=_.DPExtend.tag)===null||$e===void 0||$e.push((0,E.fi)(_.Labels["com.docker.compose.project"],"dpanel-c-"))}if(_.Labels&&_.Labels["com.docker.swarm.service.name"]){var Ee;(Ee=_.DPExtend.tag)===null||Ee===void 0||Ee.push(_.Labels["com.docker.swarm.service.name"])}return De.data.list.forEach(function(N){N.item&&N.item.forEach(function(t){if(_.Names.includes(t.name)&&_.DPExtend){var ue;(ue=_.DPExtend.tag)===null||ue===void 0||ue.push(N.tag)}})}),_}),!r.tag){U.next=15;break}if(me.forEach(function(_){var he;!((he=_.DPExtend)===null||he===void 0)&&he.tag&&_.DPExtend.tag.forEach(function($e){r.tag.includes($e)&&k.push.apply(k,_e()(_.Names))})}),k.length!=0){U.next=15;break}return U.abrupt("return",{data:[],success:!0,total:0});case 15:return d!=""?me=me.filter(function(_){var he=!1;return _.Names.forEach(function($e){$e.startsWith("/"+d)&&(he=!0)}),he}):k&&k.length>0&&(me=me.filter(function(_){var he=!1;return _.Names.forEach(function($e){k.includes($e)&&(he=!0)}),he})),(0,J.Cz)({follow:!1}).then(function(_){W(_.data.list)}),U.abrupt("return",{data:(i=me)!==null&&i!==void 0?i:[],success:!0,total:s.data.list.length});case 18:case"end":return U.stop()}},o)}));return function(o,r,h){return I.apply(this,arguments)}}(),rowSelection:m.canSeeContainerListManage&&{defaultSelectedRowKeys:[],alwaysShowAlert:!0},quickToolbarRender:function(o){var r=o.selectedRows,h=o.loading,p=o.finish;return[(0,e.jsx)(ve.Z,{type:tn.W6.CONTAINER,selected:r!=null?r:[],onSuccess:function(){return O(te+1),!0}},"dataPermission"),(0,e.jsx)(Ne.u,{showProTips:!0,access:["canSeeEnableCe","canSeeContainerListManageOp"],children:function(s){var d=s.canSeeEnableCe,k=s.canSeeContainerListManageOp;return k&&(0,e.jsx)(en.Z,{buttonProps:{disabled:d,type:"primary",icon:(0,e.jsx)(Ge.Z,{})},action:C()(c()().mark(function De(){var me,Ke,U,_,he;return c()().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(r){Ee.next=2;break}return Ee.abrupt("return",!1);case 2:h(),me=[],Ke=B()(r);try{for(Ke.s();!(U=Ke.n()).done;)_=U.value,_&&!me.includes(_.Image)&&me.push(_.Image)}catch(N){Ke.e(N)}finally{Ke.f()}if(!me){Ee.next=9;break}return Ee.next=9,(he=le.current)===null||he===void 0?void 0:he.pull(me).finally(function(){var N;(N=le.current)===null||N===void 0||N.finish()});case 9:return Ee.abrupt("return",Promise.all(r.map(function(N){var t,ue,Pn;return(0,Qe.RF)({md5:(t=N.Id)!==null&&t!==void 0?t:"",imageTag:"",enableBak:(ue=(Pn=ce.current)===null||Pn===void 0?void 0:Pn.getFieldValue("enableBak"))!==null&&ue!==void 0?ue:!1}).finally(function(){p(!0)})})));case 10:case"end":return Ee.stop()}},De)})),onSuccess:function(){return O(te+1),!0},confirmProps:{description:(0,e.jsxs)(Q.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(Y.Z.Text,{children:f.format("upgradeConfirm")}),(0,e.jsx)(Ve.A,{formRef:ce,submitter:!1,layout:"inline",children:(0,e.jsx)(Ie.Z,{name:"enableBak",valuePropName:"checked",children:(0,e.jsx)(j.Z,{children:f.format("upgradeConfirmEnableBak")})})})]})},children:u.FD.format("listManageUpgradeBatch")})}},"batchUpgrade"),(0,e.jsx)(Ne.u,{access:"canSeeContainerListManageDelete",children:(0,e.jsx)(en.Z,{action:function(){return(0,Qe.KK)()},buttonProps:{icon:(0,e.jsx)(dn.Z,{})},onSuccess:function(){return O(te+1),!0},onError:function(){var s,d;return!((s=b.current)===null||s===void 0)&&s.reloadAndRest&&((d=b.current)===null||d===void 0||d.reloadAndRest()),!0},confirmProps:{description:Ce.format("listManagePruneTip")},children:u.FD.format("listManagePrune")})},"clear"),(0,e.jsx)(Ne.u,{access:"canSeeContainerListManageDelete",children:(0,e.jsx)(en.Z,{buttonProps:{danger:!0,type:"primary",icon:(0,e.jsx)(yn.Z,{})},action:C()(c()().mark(function i(){return c()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Promise.all(r.map(function(){var k=C()(c()().mark(function De(me){return c()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,ke.Ct)({md5:me.Id,deleteImage:!1,deleteVolume:!1});case 2:return U.t0=U.sent,U.next=5,(0,q.rn)({name:me.Names[0]});case 5:return U.t1=U.sent,U.abrupt("return",[U.t0,U.t1]);case 7:case"end":return U.stop()}},De)}));return function(De){return k.apply(this,arguments)}}())));case 1:case"end":return d.stop()}},i)})),onSuccess:function(){return O(te+1),!0},onError:function(){var s,d;return!((s=b.current)===null||s===void 0)&&s.reloadAndRest&&((d=b.current)===null||d===void 0||d.reloadAndRest()),!0},confirmProps:{showCommonConfirm:!0},children:u.FD.format("listManageDeleteBatch")})},"batchDelete")]},contextMenu:function(o){return{items:[{type:"group",label:u.FD.format("listManageManage"),key:"manage",children:[{access:"canSeeContainerList",label:(0,e.jsx)(sn.C.ContextMenuItem,{buttonProps:{icon:(0,e.jsx)(Dn.Z,{})},action:C()(c()().mark(function r(){return c()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return o.loading(),p.abrupt("return",Promise.all(o.selectedRows.map(function(i){return(0,Qe.IW)({md5:i.Id,operate:"restart"})})).finally(function(){o.finish(!0)}));case 2:case"end":return p.stop()}},r)})),children:u.FD.format("listManageRestart")}),key:"restart"},{label:(0,e.jsx)(sn.C.ContextMenuItem,{action:C()(c()().mark(function r(){return c()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return o.loading(),p.abrupt("return",Promise.all(o.selectedRows.map(function(i){return(0,Qe.IW)({md5:i.Id,operate:"stop"})})).finally(function(){o.finish(!0)}));case 2:case"end":return p.stop()}},r)})),buttonProps:{icon:(0,e.jsx)(cn.Z,{})},children:u.FD.format("listManageStop")}),key:"stop"},{label:(0,e.jsx)(sn.C.ContextMenuItem,{action:C()(c()().mark(function r(){return c()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return o.loading(),p.abrupt("return",Promise.all(o.selectedRows.map(function(i){return(0,Qe.IW)({md5:i.Id,operate:"pause"})})).finally(function(){o.finish(!0)}));case 2:case"end":return p.stop()}},r)})),buttonProps:{icon:(0,e.jsx)(oe.Z,{})},children:u.FD.format("listManagePause")}),key:"pause"},{label:(0,e.jsx)(sn.C.ContextMenuItem,{action:C()(c()().mark(function r(){return c()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return o.loading(),p.abrupt("return",Promise.all(o.selectedRows.map(function(i){return(0,Qe.IW)({md5:i.Id,operate:"unpause"})})).finally(function(){o.finish(!0)}));case 2:case"end":return p.stop()}},r)})),buttonProps:{icon:(0,e.jsx)(rn.Z,{})},children:u.FD.format("listManageUnpause")}),key:"unpause"}]},{type:"group",label:u.FD.format("listManage"),key:"operator",children:[{label:(0,e.jsx)(sn.C.ContextMenuItem,{buttonProps:{icon:(0,e.jsx)(ye.Z,{}),disabled:o.isMultiple()},action:C()(c()().mark(function r(){var h;return c()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:o.finish(!0),o.selectedRow&&((h=a.current)===null||h===void 0||h.show(o.selectedRow.Id));case 2:case"end":return i.stop()}},r)})),children:u.FD.format("listManageView")}),key:"view"},{label:(0,e.jsx)(sn.C.ContextMenuItem,{buttonProps:{icon:(0,e.jsx)(G.Z,{}),disabled:o.isMultiple()},action:C()(c()().mark(function r(){var h;return c()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:o.selectedRow&&((h=xe.current)===null||h===void 0||h.show(o.selectedRow.Id)),o.finish(!0);case 2:case"end":return i.stop()}},r)})),children:u.FD.format("listManageLog")}),key:"log"},{label:(0,e.jsx)(sn.C.ContextMenuItem,{buttonProps:{icon:(0,e.jsx)(de.Z,{}),disabled:o.isMultiple()||o.selectedRow&&!["running","healthy","unhealthy"].includes(o.selectedRow.State)},action:C()(c()().mark(function r(){var h;return c()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:o.selectedRow&&((h=ae.current)===null||h===void 0||h.show({url:"/console/container/".concat(o.selectedRow.Id),title:(0,E.fi)(o.selectedRow.Names[0],"/")})),o.finish(!0);case 2:case"end":return i.stop()}},r)})),children:u.FD.format("listManageConsole")}),key:"console"},{label:(0,e.jsx)(sn.C.ContextMenuItem,{buttonProps:{icon:(0,e.jsx)(Ue.Z,{}),disabled:o.isMultiple()||o.selectedRow&&!["running","healthy","unhealthy"].includes(o.selectedRow.State)},action:C()(c()().mark(function r(){var h,p;return c()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(o.selectedRow){s.next=2;break}return s.abrupt("return");case 2:p=o.selectedRow.Names.find(function(d){if(d.indexOf("/")===0)return d}),(h=Te.current)===null||h===void 0||h.showContainer(p!=null?p:o.selectedRow.Names[0]),o.finish(!0);case 5:case"end":return s.stop()}},r)})),children:u.FD.format("listManageFilePath")}),key:"file"}]}]}}},"app-list")]})}},20578:function(vn,Ze,n){n.d(Ze,{q:function(){return _e}});var Ae=n(15009),B=n.n(Ae),Le=n(99289),c=n.n(Le),be=n(82346);function _e(){return Pe.apply(this,arguments)}function Pe(){return Pe=c()(B()().mark(function C(){return B()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,be.request)("/api/pro/container-upgrade/get-all-list",{method:"POST"});case 2:return D.abrupt("return",D.sent);case 3:case"end":return D.stop()}},C)})),Pe.apply(this,arguments)}},77342:function(vn,Ze,n){n.d(Ze,{Z:function(){return Xe}});var Ae=n(42845),B=n(43461),Le=n(52062),c=n(21692),be=n(19137);function _e(w,S,j){for(var H=j-1,G=w.length;++H<G;)if(w[H]===S)return H;return-1}var Pe=_e;function C(w,S,j){return S===S?Pe(w,S,j):(0,c.Z)(w,be.Z,j)}var Fe=C;function D(w,S){for(var j=w.length;j--&&Fe(S,w[j],0)>-1;);return j}var Re=D;function Je(w,S){for(var j=-1,H=w.length;++j<H&&Fe(S,w[j],0)>-1;);return j}var Ve=Je,Ie=n(70394),Q=n(77338);function Y(w,S,j){if(w=(0,Q.Z)(w),w&&(j||S===void 0))return(0,B.Z)(w);if(!w||!(S=(0,Ae.Z)(S)))return w;var H=(0,Ie.Z)(w),G=(0,Ie.Z)(S),de=Ve(H,G),Ue=Re(H,G)+1;return(0,Le.Z)(H,de,Ue).join("")}var Xe=Y}}]);
