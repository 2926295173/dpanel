"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6357],{8287:function(he,X,e){var K=e(5574),_=e.n(K),J=e(15009),s=e.n(J),G=e(99289),h=e.n(G),i=e(13822),v=e(25593),U=e(83062),g=e(85265),D=e(42075),T=e(67294),f=e(81146),c=e(45742),P=e(58638),Z=e(62597),r=e(3616),C=e(82346),x=e(85893),se=(0,T.forwardRef)(function(te,$){(0,T.useImperativeHandle)($,function(){return{show:function(y){return h()(s()().mark(function A(){var O;return s()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,i.jV)({md5:y});case 2:O=L.sent,O.data&&w(O.data.info),a(!0);case 5:case"end":return L.stop()}},A)}))()}}});var j=(0,T.useState)(!1),d=_()(j,2),t=d[0],a=d[1],R=(0,T.useState)(),Ee=_()(R,2),k=Ee[0],w=Ee[1],m=(0,T.useRef)();return(0,x.jsxs)(x.Fragment,{children:[te.showTriggerButton&&(0,x.jsx)(v.Z.Link,{onClick:h()(s()().mark(function I(){return s()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:w(te.containerInfo),a(!0);case 2:case"end":return A.stop()}},I)})),children:(0,x.jsx)(U.Z,{title:"\u8FD0\u884C\u65E5\u5FD7",children:(0,x.jsx)(c.Z,{})})},"log"),(0,x.jsx)(g.Z,{title:"\u5BB9\u5668\u65E5\u5FD7",open:t,forceRender:!0,onClose:function(){a(!1)},afterOpenChange:function(y){if(y)setTimeout(function(){var O,ae;(O=m.current)===null||O===void 0||O.start(),(ae=m.current)===null||ae===void 0||ae.fit()},1e3);else{var A;(A=m.current)===null||A===void 0||A.close()}},width:r.FK,extra:(0,x.jsx)(D.Z,{children:(0,x.jsx)(C.Link,{to:"/container/log/".concat(k==null?void 0:k.Name),target:"_blank",onClick:function(){var y;(y=m.current)===null||y===void 0||y.close(),a(!1)},children:(0,x.jsx)(U.Z,{title:"\u65B0\u7A97\u53E3\u6253\u5F00",children:(0,x.jsx)(P.Z,{})})})}),children:k&&t&&(0,x.jsx)(f.Z,{ref:m,showInDrawer:!0,id:"container:log:".concat(k==null?void 0:k.Id),request:function(){var I=h()(s()().mark(function y(A){var O;return s()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,Z.Tb)({id:(O=k.Id)!==null&&O!==void 0?O:"",lineTotal:A.lineTotal,download:A.download,showTime:A.showTime});case 2:case"end":return L.stop()}},y)}));return function(y){return I.apply(this,arguments)}}(),download:function(){var I=h()(s()().mark(function y(A){var O,ae,L,De;return s()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(0,Z.XH)({id:(O=k.Id)!==null&&O!==void 0?O:"",lineTotal:A.lineTotal,showTime:A.showTime});case 2:return L=q.sent,q.next=5,(0,i.jV)({md5:(ae=k.Id)!==null&&ae!==void 0?ae:""});case 5:return De=q.sent,q.abrupt("return",{data:new Blob([L],{type:"text/plain"}),name:De.data.info.Name.replaceAll("/","")+"_"+new Date().toLocaleDateString()+".log"});case 7:case"end":return q.stop()}},y)}));return function(y){return I.apply(this,arguments)}}()})})]})});X.Z=se},46357:function(he,X,e){e.d(X,{Z:function(){return V}});var K=e(5574),_=e.n(K),J=e(15009),s=e.n(J),G=e(99289),h=e.n(G),i=e(67294),v=e(37767),U=e(13822),g=e(82346),D=e(60433),T=e(85265),f=e(96074),c=e(86250),P=e(26412),Z=e(52031),r=e(14189),C=e(72409),x=e(93362),se=e(184),te=e(43831),$=e(5251),j=e(25593),d=e(52209),t=e(3616),a=e(85893),R=(0,i.forwardRef)(function(u,S){(0,i.useImperativeHandle)(S,function(){return{}});var o=(0,i.useState)(!1),F=_()(o,2),H=F[0],oe=F[1];return(0,a.jsx)(se.a,{submitter:!1,title:(0,$.fi)(u.containerInfo.Name,"/")+" - \u7F51\u7EDC\u7BA1\u7406",onOpenChange:function(de){oe(de)},drawerProps:{width:t.R_},open:H,trigger:(0,a.jsx)(j.Z.Link,{children:(0,a.jsx)(d.Z,{})},"file"),children:(0,a.jsx)(te.Z,{ghost:!0,containerInfo:u.containerInfo})})}),Ee=R,k=e(8287),w=e(65913),m=e(14245),I=e(1699),y=e(40666),A=e(64789),O=e(38345),ae=e(42075),L=e(66309),De=e(90127),le=e(29453);function q(u){var S=(0,i.useState)(0),o=_()(S,2),F=o[0],H=o[1],oe=(0,i.useState)(),me=_()(oe,2),de=me[0],n=me[1];return(0,i.useEffect)(function(){n([]),(0,le.e1)().then(function(ne){n(ne.data.list)})},[F,u.data.info.Name]),(0,a.jsx)(O.Z,{ghost:!0,title:(0,a.jsx)(y.Z,{}),subTitle:"\u5BB9\u5668\u6807\u7B7E",extra:(0,a.jsx)(De.Z,{trigger:(0,a.jsx)(j.Z.Link,{children:(0,a.jsx)(A.Z,{})}),containerDetail:u.data,onFinish:function(){H(F+1)}}),children:(0,a.jsx)(ae.Z,{wrap:!0,children:de&&(de==null?void 0:de.filter(function(ne){return ne.item&&ne.item.find(function(Pe){return Pe.name==u.data.info.Name})}).map(function(ne,Pe){return(0,a.jsx)(L.Z,{color:ne.tagColor,closable:!0,style:{height:35,display:"flex",borderRadius:20,justifyContent:"center",alignItems:"center"},onClose:h()(s()().mark(function Me(){return s()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.next=2,(0,le.rn)({name:u.data.info.Name,tag:ne.tag});case 2:H(F+1);case 3:case"end":return fe.stop()}},Me)})),children:(0,a.jsx)("span",{style:{paddingLeft:10,paddingRight:3},children:ne.tag})},Pe)}))})})}var ge=e(19632),re=e.n(ge),l=e(12122),W=e(83062),B=e(60940),z=e(27619),Ce=e(84410),ie=e(24963),N={total:0,memory:{usage:[{name:"use",data:[]},{name:"all",show:!1,data:[]}],source:{usage:0,limit:0}},cpu:{usage:[{name:"use",data:[]}],source:{usage:0,limit:0}},network:{usage:[{name:"rx",data:[]},{name:"tx",data:[]}],source:{usageIn:0,usageOut:0}},io:{usage:[{name:"read",data:[]},{name:"write",data:[]}],source:{usageRead:0,usageWrite:0}}},b=function(S,o){switch(o.type){case"clear":return N;case"update":var F=new Date(o.payload.read).toLocaleTimeString(),H=JSON.parse(JSON.stringify(S));if(o.payload.memory_stats&&o.payload.memory_stats.limit&&o.payload.memory_stats.usage&&(H.memory.usage=[{name:"use",data:[].concat(re()(S.memory.usage[0].data.slice(-20)),[{date:F,value:Math.round(o.payload.memory_stats.usage)}])},{name:"all",show:!1,data:[].concat(re()(S.memory.usage[1].data.slice(-20)),[{date:F,value:Math.round(o.payload.memory_stats.limit)}])}],H.memory.source={usage:o.payload.memory_stats.usage,limit:o.payload.memory_stats.limit}),o.payload&&o.payload.cpu_stats){var oe=o.payload.cpu_stats.cpu_usage.total_usage-o.payload.precpu_stats.cpu_usage.total_usage,me=o.payload.cpu_stats.system_cpu_usage-o.payload.precpu_stats.system_cpu_usage;H.cpu.usage=[{name:"use",data:[].concat(re()(S.cpu.usage[0].data.slice(-20)),[{date:F,value:(oe/me*o.payload.cpu_stats.online_cpus*100).toFixed(2)}])}],H.cpu.source={usage:oe/me*o.payload.cpu_stats.online_cpus*100,limit:me*o.payload.cpu_stats.online_cpus*100}}return o.payload.networks&&(H.network.source={usageIn:parseFloat(o.payload.networks.eth0.rx_bytes.toFixed(2)),usageOut:parseFloat(o.payload.networks.eth0.tx_bytes.toFixed(2))},H.network.usage=[{name:"rx",data:[].concat(re()(S.network.usage[0].data.slice(-20)),[{date:F,value:parseFloat(o.payload.networks.eth0.rx_bytes.toFixed(2))}])},{name:"tx",data:[].concat(re()(S.network.usage[1].data.slice(-20)),[{date:F,value:parseFloat(o.payload.networks.eth0.tx_bytes.toFixed(2))}])}]),o.payload.blkio_stats&&o.payload.blkio_stats.io_service_bytes_recursive&&o.payload.blkio_stats.io_service_bytes_recursive.length>0&&(H.io.source={usageRead:o.payload.blkio_stats.io_service_bytes_recursive[0].value,usageWrite:o.payload.blkio_stats.io_service_bytes_recursive[1].value},H.io.usage=[{name:"read",data:[].concat(re()(S.io.usage[0].data.slice(-20)),[{date:F,value:parseFloat(o.payload.blkio_stats.io_service_bytes_recursive[0].value.toFixed(2))}])},{name:"write",data:[].concat(re()(S.io.usage[1].data.slice(-20)),[{date:F,value:parseFloat(o.payload.blkio_stats.io_service_bytes_recursive[1].value.toFixed(2))}])}]),H}},E=(0,i.forwardRef)(function(u,S){var o=(0,i.useState)(!1),F=_()(o,2),H=F[0],oe=F[1],me=(0,i.useReducer)(b,N),de=_()(me,2),n=de[0],ne=de[1],Pe=(0,i.useState)(),Me=_()(Pe,2),pe=Me[0],fe=Me[1],Re=(0,i.useContext)(ie.Z),Te=Re.loading,je=(0,g.useModel)("subscriber");(0,i.useImperativeHandle)(S,function(){return{}});function ue(M){return Oe.apply(this,arguments)}function Oe(){return Oe=h()(s()().mark(function M(p){var ee,_e;return s()().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return Te.show(),(0,Ce.i)({id:p}),xe.next=4,(0,Ce.a)({id:p});case 4:ee=xe.sent,_e={columns:[],data:[]},ee.data.list.Titles.map(function(ce){_e.columns.push({title:ce,label:ce,dataIndex:ce})}),ee.data.list.Processes.map(function(ce,Ie){_e.data.push({UID:ce[0],PID:ce[1],PPID:ce[2],C:ce[3],STIME:ce[4],TTY:ce[5],TIME:ce[6],CMD:ce[7]})}),fe(_e),Te.destroy();case 10:case"end":return xe.stop()}},M)})),Oe.apply(this,arguments)}return(0,i.useEffect)(function(){return function(){je.progress.close("container:stat:"+u.containerInfo.Id),ne({type:"clear",payload:{}})}},[u.containerInfo]),(0,a.jsxs)(a.Fragment,{children:[u.showTriggerButton&&(0,a.jsx)(j.Z.Link,{onClick:h()(s()().mark(function M(){return s()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:oe(!0);case 1:case"end":return ee.stop()}},M)})),children:(0,a.jsx)(W.Z,{title:"\u8FD0\u884C\u72B6\u6001",children:(0,a.jsx)(l.Z,{})})},"log"),(0,a.jsxs)(T.Z,{title:"\u5BB9\u5668\u65E5\u5FD7",open:H,onClose:function(){oe(!1)},afterOpenChange:function(p){p?setTimeout(function(){var ee;!((ee=u.containerInfo)===null||ee===void 0)&&ee.Name&&ue(u.containerInfo.Id),je.addDataHandler("container:stat:".concat(u.containerInfo.Id),function(_e){var ve=JSON.parse(_e.data);ne({type:"update",payload:ve})})},500):(je.progress.close("container:stat:"+u.containerInfo.Id),ne({type:"clear",payload:{}}))},width:t.R_,children:[(0,a.jsxs)(O.Z,{ghost:!0,direction:"row",wrap:!0,gutter:[20,20],children:[n.memory&&n.memory.source&&(0,a.jsx)(O.Z,{colSpan:12,title:(0,a.jsx)(l.Z,{}),subTitle:"Memory usage: ".concat((0,$.FI)(n.memory.source.usage)," / ").concat((0,$.FI)(n.memory.source.limit)),headerBordered:!0,bordered:!0,children:(0,a.jsx)(z.Z,{name:"container-memory",data:n.memory.usage,yLabelFormatter:function(p){return(0,$.FI)(parseFloat(p))},yValueFormatter:function(p){return(0,$.FI)(parseFloat(p))},yDomainMaxCallback:function(p){return p.min*2}})}),(0,a.jsx)(O.Z,{colSpan:12,title:(0,a.jsx)(l.Z,{}),subTitle:"Cpu usage: ".concat(n.cpu.source.usage.toFixed(2),"%"),headerBordered:!0,bordered:!0,children:(0,a.jsx)(z.Z,{name:"container-cpu",data:n.cpu.usage,yDomainMaxCallback:function(p){return p.min*100},yLabelFormatter:function(p){return"".concat(parseFloat(p).toFixed(2),"%")}})}),n.io&&n.io.source&&(0,a.jsx)(O.Z,{colSpan:12,title:(0,a.jsx)(l.Z,{}),subTitle:"I/O: ".concat((0,$.FI)(n.io.source.usageRead)," / ").concat((0,$.FI)(n.io.source.usageWrite)),headerBordered:!0,bordered:!0,children:(0,a.jsx)(z.Z,{name:"container-disk",data:n.io.usage,yDomainMaxCallback:function(p){return p.max*2},yLabelFormatter:function(p){return(0,$.FI)(parseFloat(p))}})}),n.network&&n.network.source&&(0,a.jsx)(O.Z,{colSpan:12,title:(0,a.jsx)(l.Z,{}),subTitle:"Network: ".concat((0,$.FI)(n.network.source.usageIn)," / ").concat((0,$.FI)(n.network.source.usageOut)),headerBordered:!0,bordered:!0,children:(0,a.jsx)(z.Z,{name:"container-network",data:n.network.usage,yDomainMaxCallback:function(p){return p.max*2},yLabelFormatter:function(p){return(0,$.FI)(parseFloat(p))}})})]}),(0,a.jsx)(O.Z,{title:(0,a.jsx)(D.Z,{}),subTitle:"Progress",children:(0,a.jsx)(B.Z,{scroll:{x:"max-content"},rowKey:"PID",columns:pe==null?void 0:pe.columns,dataSource:pe==null?void 0:pe.data,pagination:{pageSize:10}})})]})]})}),Y=E,Q=(0,i.forwardRef)(function(u,S){var o,F;(0,i.useImperativeHandle)(S,function(){return{show:function(Oe){return h()(s()().mark(function M(){return s()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return fe(!0),ee.next=3,Te(Oe);case 3:case"end":return ee.stop()}},M)}))()}}});var H=(0,g.useAccess)(),oe=(0,i.useRef)(),me=(0,i.useState)(),de=_()(me,2),n=de[0],ne=de[1],Pe=(0,i.useState)(!1),Me=_()(Pe,2),pe=Me[0],fe=Me[1],Re=(0,i.useRef)();function Te(ue){return je.apply(this,arguments)}function je(){return je=h()(s()().mark(function ue(Oe){var M,p;return s()().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return(M=oe.current)===null||M===void 0||M.show(),_e.next=3,(0,U.jV)({md5:Oe}).finally(function(){var ve;(ve=oe.current)===null||ve===void 0||ve.destroy()});case 3:p=_e.sent,p.data&&(p.data.info.HostConfig.NetworkMode=="host"&&p.data.info.Config.ExposedPorts&&Object.keys(p.data.info.Config.ExposedPorts).map(function(ve){p.data.info.NetworkSettings.Ports[ve]=[{HostIp:"0.0.0.0",HostPort:ve.substring(0,ve.indexOf("/"))}]}),ne(p.data));case 5:case"end":return _e.stop()}},ue)})),je.apply(this,arguments)}return(0,a.jsx)(T.Z,{title:"\u5FEB\u6377\u67E5\u770B\u5BB9\u5668 - ".concat((0,$.fi)((o=n==null?void 0:n.info.Name)!==null&&o!==void 0?o:"","/")),open:pe,onClose:function(){fe(!1),u.onFinish&&u.onFinish()},width:t.R_,extra:(0,a.jsxs)(I.u,{access:"canSeeContainerList",space:{split:(0,a.jsx)(f.Z,{type:"vertical"})},children:[(n==null?void 0:n.info)&&n.info.State.Running&&(0,a.jsx)(x.Z,{apiPrefix:"container",name:n.info.Name,title:(0,$.fi)(n.info.Name,"/"),workDir:(F=n.info.Config.WorkingDir)!==null&&F!==void 0?F:""}),(n==null?void 0:n.info)&&H.canSeeContainerListManageOp&&(0,a.jsx)(Ee,{containerInfo:n.info}),(n==null?void 0:n.info)&&n.info.State.Running&&(0,a.jsx)(k.Z,{containerInfo:n.info,showTriggerButton:!0}),(n==null?void 0:n.info)&&n.info.State.Running&&(0,a.jsx)(Y,{containerInfo:n.info,showTriggerButton:!0})]}),children:(0,a.jsx)(w.Z,{ref:oe,children:(0,a.jsxs)(c.Z,{vertical:!0,gap:20,children:[n&&(0,a.jsx)(I.u,{access:"canSeeContainerList",children:(0,a.jsx)(r.Z,{ref:Re,ghost:!0,data:n==null?void 0:n.info,onFinish:h()(s()().mark(function ue(){return s()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,Te(n.info.Id);case 2:return M.t0=M.sent,M.abrupt("return",[M.t0]);case 4:case"end":return M.stop()}},ue)}))})}),n&&(0,a.jsx)(I.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,a.jsx)(C.Z,{ghost:!0,data:n,checkContainerUpgrade:function(){fe(!1),u.onUpgradeFinish&&u.onUpgradeFinish()}})}),n&&(0,a.jsx)(q,{data:n}),n&&(0,a.jsx)(v.Z,{data:n,ghost:!0}),(0,a.jsx)(Z.Z,{data:n==null?void 0:n.info,ghost:!0}),n&&(0,a.jsx)(m.Z,{data:n.info,ghost:!0}),(n==null?void 0:n.info.Config.Labels)&&(0,a.jsx)(O.Z,{title:(0,a.jsx)(D.Z,{}),ghost:!0,subTitle:"\u6807\u7B7E",children:(0,a.jsx)(P.Z,{column:1,bordered:!0,children:(n==null?void 0:n.info.Config.Labels)&&Object.keys(n==null?void 0:n.info.Config.Labels).map(function(ue){return(0,a.jsx)(P.Z.Item,{label:ue,children:n==null?void 0:n.info.Config.Labels[ue]},ue)})})})]})})})}),V=Q},90127:function(he,X,e){var K=e(15009),_=e.n(K),J=e(99289),s=e.n(J),G=e(5574),h=e.n(G),i=e(5251),v=e(184),U=e(62370),g=e(5966),D=e(24739),T=e(64317),f=e(52688),c=e(97462),P=e(40056),Z=e(42075),r=e(67294),C=e(1699),x=e(80821),se=e(2808),te=e(87662),$=e(52756),j=e(29453),d=e(3616),t=e(85893),a=(0,r.forwardRef)(function(R,Ee){var k;(0,r.useImperativeHandle)(Ee,function(){return{edit:function(b){Ce(!0),ie(b),w.current&&w.current.setFieldsValue({tag:[b.tag],tagColor:b.tagColor,enableShowGroup:b.enableShowGroup})}}});var w=(0,r.useRef)(),m=(0,r.useState)(0),I=h()(m,2),y=I[0],A=I[1],O=(0,r.useState)([]),ae=h()(O,2),L=ae[0],De=ae[1],le=(0,r.useState)(),q=h()(le,2),ge=q[0],re=q[1],l=(k=R.containerDetail)===null||k===void 0?void 0:k.info,W=(0,r.useState)(!1),B=h()(W,2),z=B[0],Ce=B[1];function ie(N){w.current&&w.current.setFieldsValue({title:N.title,description:N.description,url:N.url,icon:N.icon,name:N.name})}return(0,r.useEffect)(function(){re([]),(0,j.e1)().then(function(N){re(N.data.list)})},[y]),(0,r.useEffect)(function(){l&&(0,te.K3)().then(function(N){var b=[];l.NetworkSettings&&l.NetworkSettings.Ports&&Object.keys(l.NetworkSettings.Ports).map(function(E){l.NetworkSettings.Ports[E]&&l.NetworkSettings.Ports[E].map(function(Y){Y.HostPort&&b.push("http://".concat(N.data.serverUrl,":").concat(Y.HostPort))})}),De(b)})},[R.containerDetail]),(0,t.jsxs)(v.a,{drawerProps:{forceRender:!0,width:d.R_},open:z,onFinish:function(){var N=s()(_()().mark(function b(E){var Y,Q,V,u;return _()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return V="",E.tagColor&&E.tagColor.toHexString?E.tagColor.cleared||(V=E.tagColor.toHexString()):V=E.tagColor,u=(Y=E.enableShowGroup)!==null&&Y!==void 0?Y:R.defaultEnableShowGroup,o.next=5,(0,j.A9)({enableShowGroup:u,tag:E.tag?E.tag[0]:"",tagColor:V,name:(Q=l==null?void 0:l.Name)!==null&&Q!==void 0?Q:E.name,title:u?E.title:"",description:u?E.description:"",url:u?E.url:"",icon:u?E.icon:""});case 5:return A(y+1),R.onFinish&&R.onFinish({tag:E.tag,tagColor:E.tagColor,enableShowGroup:u}),o.abrupt("return",!0);case 8:case"end":return o.stop()}},b)}));return function(b){return N.apply(this,arguments)}}(),formRef:w,title:"\u6DFB\u52A0\u5BB9\u5668\u6807\u7B7E",trigger:R.trigger,onOpenChange:function(b){var E;Ce(b),!b&&(!((E=w.current)===null||E===void 0)&&E.resetFields)&&w.current.resetFields()},children:[R.defaultEnableShowGroup&&(0,t.jsx)(U.Z,{children:(0,t.jsx)(P.Z,{message:(0,$.getLang)("system.home.tagAddContainerTips")})}),(0,t.jsx)(g.Z,{name:"name",hidden:!0}),(0,t.jsxs)(D.UW,{children:[(0,t.jsx)(T.Z,{width:"lg",label:"\u6807\u7B7E\u6216\u5206\u7EC4",layout:"vertical",required:!0,rules:[{required:!0}],onChange:function(b){var E=ge&&ge.find(function(H){return b&&b.length>=1&&H.tag==b[0]});if(E){var Y,Q,V,u=E.item.find(function(H){return H.name==(l==null?void 0:l.Name)});(Y=w.current)===null||Y===void 0||Y.setFieldsValue({tagColor:E.tagColor,enableShowGroup:E.enableShowGroup}),u&&u.name&&ie({name:(Q=l==null?void 0:l.Name)!==null&&Q!==void 0?Q:"",title:u?u.title:(0,i.fi)((V=l==null?void 0:l.Name)!==null&&V!==void 0?V:"","/"),description:u&&u.description,url:u&&u.url,icon:u&&u.icon})}if(!b||b.length==0){var S,o=(S=w.current)===null||S===void 0?void 0:S.getFieldValue("url");if(!o||o==""){var F;!((F=w.current)===null||F===void 0)&&F.resetFields&&w.current.resetFields()}}},options:ge&&ge.map(function(N){return{lable:N.tag,value:N.tag}}),name:"tag",mode:"tags",fieldProps:{maxCount:1},placeholder:"\u8BF7\u9009\u62E9\u6216\u662F\u8F93\u5165\u6807\u7B7E\u6216\u662F\u5206\u7EC4"},"tagSelect".concat(y)),!R.defaultEnableShowGroup&&(0,t.jsx)(se.Z,{label:"\u6807\u7B7E\u80CC\u666F\u989C\u8272",name:"tagColor"})]}),!R.defaultEnableShowGroup&&(0,t.jsx)(C.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(b){var E=b.canSeeEnableCe;return(0,t.jsx)(f.Z,{label:"\u4EE5\u5206\u7EC4\u7684\u5F62\u5F0F\u5C55\u793A\u9996\u9875\u5361\u7247",name:"enableShowGroup",disabled:E,fieldProps:{onChange:function(Q){if(Q){var V,u;ie({name:(V=l==null?void 0:l.Name)!==null&&V!==void 0?V:"",title:(0,i.fi)((u=l==null?void 0:l.Name)!==null&&u!==void 0?u:"","/")})}}}})}}),(0,t.jsx)(c.Z,{name:["enableShowGroup"],children:function(b){var E=b.enableShowGroup;return(E||R.defaultEnableShowGroup)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(Z.Z.Compact,{children:[R.containerDetail&&(0,t.jsx)(T.Z,{label:"\u9009\u62E9\u7AEF\u53E3",width:"sm",name:"selectUrl",options:L.map(function(Y){return{label:Y,value:Y}}),onChange:function(Q){var V;!((V=w.current)===null||V===void 0)&&V.setFieldValue&&w.current.setFieldValue("url",Q)}}),(0,t.jsx)(g.Z,{label:"\u8BBF\u95EE\u5730\u5740",name:"url",width:"md"}),(0,t.jsx)(U.Z,{label:" ",children:(0,t.jsx)(x.Z,{action:function(){var Q;return(0,j.R3)({url:(Q=w.current)===null||Q===void 0?void 0:Q.getFieldValue("url")})},onSuccess:function(Q){var V,u,S;(V=w.current)===null||V===void 0||V.setFieldValue("icon",Q.data.icon),(u=w.current)===null||u===void 0||u.setFieldValue("title",Q.data.title),(S=w.current)===null||S===void 0||S.setFieldValue("description",Q.data.description)},children:"\u83B7\u53D6\u4FE1\u606F"})})]}),(0,t.jsxs)(D.UW,{children:[(0,t.jsx)(g.Z,{label:"\u6807\u9898",name:"title"}),(0,t.jsx)(g.Z,{label:"\u63CF\u8FF0",name:"description"})]}),(0,t.jsx)(D.UW,{children:(0,t.jsx)(g.Z,{width:"lg",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u56FE\u6807\u8FDC\u7A0B\u5730\u5740",name:"icon"})})]})}})]})});X.Z=a},81146:function(he,X,e){var K=e(97857),_=e.n(K),J=e(15009),s=e.n(J),G=e(99289),h=e.n(G),i=e(67294),v=e(97269),U=e(62370),g=e(5966),D=e(97462),T=e(82346),f=e(71230),c=e(15746),P=e(34041),Z=e(28036),r=e(84567),C=e(42075),x=e(80821),se=e(23430),te=e(93162),$=e.n(te),j=e(78267),d=e.n(j),t=e(75458),a=e.n(t),R=e(12323),Ee=e(4244),k=e.n(Ee),w=e(24078),m=e(85893),I,y,A,O={decorations:{matchBackground:"",matchBorder:"#FFFF00",activeMatchBackground:"#FFFF0066",matchOverviewRuler:"",activeMatchColorOverviewRuler:""}},ae=(0,i.forwardRef)(function(L,De){var le=(0,i.useRef)(),q=(0,T.useModel)("subscriber");(0,i.useImperativeHandle)(De,function(){return{fit:function(){I.clear(),A.fit()},start:function(){return h()(s()().mark(function W(){return s()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,ge({lineTotal:500});case 2:case"end":return z.stop()}},W)}))()},close:function(){q.progress.close(L.id)}}});function ge(l){return re.apply(this,arguments)}function re(){return re=h()(s()().mark(function l(W){return s()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:I.clear(),W.download=!1,L.request(W);case 3:case"end":return z.stop()}},l)})),re.apply(this,arguments)}return(0,i.useEffect)(function(){return window.addEventListener("resize",function(){A.fit()}),I=new Ee.Terminal(_()(_()({},R.X),{},{fontSize:12,lineHeight:1.2,allowProposedApi:!0})),A=new j.FitAddon,y=new t.SearchAddon({}),I.loadAddon(A),I.loadAddon(y),I.open(document.getElementById("terminal-container-log")),A.fit(),q.addDataHandler(L.id,function(l){I.write(l.data)}),function(){I.clear(),I.reset(),q.progress.close(L.id)}},[]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(v.A,{submitter:!1,layout:"horizontal",onFinish:function(W){var B;ge({id:L.id,lineTotal:parseInt(W.lineTotal),showTime:(B=W.showTime)!==null&&B!==void 0?B:!1})},formRef:le,children:(0,m.jsxs)(f.Z,{gutter:[10,0],children:[(0,m.jsx)(c.Z,{span:8,children:(0,m.jsx)(U.Z,{name:"lineTotal",initialValue:"500",label:"\u83B7\u53D6\u65E5\u5FD7\u6761\u6570",children:(0,m.jsxs)(P.Z,{defaultValue:"500",onChange:function(W){var B;(B=le.current)===null||B===void 0||B.submit()},children:[(0,m.jsx)(P.Z.Option,{value:"100",children:"100\u6761\u65E5\u5FD7\u6570\u636E"}),(0,m.jsx)(P.Z.Option,{value:"200",children:"200\u6761\u65E5\u5FD7\u6570\u636E"}),(0,m.jsx)(P.Z.Option,{value:"500",children:"500\u6761\u65E5\u5FD7\u6570\u636E"}),(0,m.jsx)(P.Z.Option,{value:"1000",children:"1000\u6761\u65E5\u5FD7\u6570\u636E"}),(0,m.jsx)(P.Z.Option,{value:"-1",children:"\u5168\u90E8\uFF08\u4E0B\u8F7D\u53EF\u89C1\uFF09"})]})})}),(0,m.jsx)(c.Z,{children:(0,m.jsx)(Z.ZP,{onClick:function(){I.clear()},children:"\u6E05\u5C4F"})}),(0,m.jsx)(c.Z,{children:(0,m.jsx)(U.Z,{name:"showTime",valuePropName:"checked",children:(0,m.jsx)(r.Z,{onChange:function(W){var B;(B=le.current)===null||B===void 0||B.submit()},children:"\u663E\u793A\u65F6\u95F4"})})}),(0,m.jsx)(c.Z,{children:(0,m.jsx)(g.Z,{label:"\u67E5\u627E",name:"keywork",fieldProps:{onPressEnter:function(){var W;y.findNext((W=le.current)===null||W===void 0?void 0:W.getFieldValue("keywork"),O)},onChange:function(W){y.findNext(W.target.value,O)}},placeholder:"\u8F93\u5165\u5173\u952E\u5B57\u56DE\u8F66\u67E5\u627E"})}),(0,m.jsx)(c.Z,{children:(0,m.jsx)(D.Z,{name:["keywork"],children:function(W){var B=W.keywork;return(0,m.jsxs)(C.Z,{size:10,children:[(0,m.jsx)(Z.ZP,{onClick:function(){y.findNext(B,O)},children:"\u4E0B\u4E00\u4E2A"},"next"),(0,m.jsx)(Z.ZP,{onClick:function(){y.findPrevious(B,O)},children:"\u4E0A\u4E00\u4E2A"},"prev")]})}})}),(0,m.jsx)(c.Z,{children:(0,m.jsx)(x.Z,{icon:(0,m.jsx)(se.Z,{}),action:h()(s()().mark(function l(){var W,B,z;return s()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(!L.download){ie.next=5;break}return ie.next=3,L.download({lineTotal:parseInt((W=le.current)===null||W===void 0?void 0:W.getFieldValue("lineTotal")),showTime:(B=le.current)===null||B===void 0?void 0:B.getFieldValue("showTime")});case 3:z=ie.sent,(0,te.saveAs)(z.data,z.name);case 5:case"end":return ie.stop()}},l)})),children:"\u4E0B\u8F7D\u65E5\u5FD7"})})]})}),(0,m.jsx)("div",{style:{marginTop:"20px",height:L.showInDrawer?"75vh":"85vh"},id:"terminal-container-log"})]})});X.Z=ae},27619:function(he,X,e){e.d(X,{Z:function(){return i}});var K=e(5574),_=e.n(K),J=e(82346),s=e(67294),G=e(64389),h=e(85893);function i(v){var U=(0,J.useModel)("@@initialState"),g=U.initialState,D="chart-area-".concat(v.name),T=(0,s.useState)(),f=_()(T,2),c=f[0],P=f[1],Z={};v.data.forEach(function(C){C.show===!1?Z[C.name]=!1:Z[C.name]=!0});var r={tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},valueFormatter:function(x){return v.yValueFormatter?v.yValueFormatter(x):x}},legend:{selected:Z},grid:{left:"0",right:"0",bottom:"0",top:"30",containLabel:!0},xAxis:{type:"category",data:v.data[0].data.map(function(C){return C.date}),boundaryGap:!1,axisLabel:{rotate:20}},yAxis:{type:"value",axisLabel:{formatter:v.yLabelFormatter},max:function(x){if(v.yDomainMaxCallback)return v.yDomainMaxCallback(x)}},series:[]};return(0,s.useEffect)(function(){var C="",x=window.matchMedia("(prefers-color-scheme: dark)");(g==null?void 0:g.theme.algorithm)=="dark"||x.matches?C="dark":C="",c&&!c.isDisposed()&&c.dispose();var se=document.getElementById(D),te=G.S1(se,C);te.setOption(r);var $=new ResizeObserver(function(){te.resize()});se&&$.observe(se),P(te)},[g]),(0,s.useEffect)(function(){c&&!c.isDisposed()&&c.setOption({legend:{data:v.data.map(function(C){return C.name})},xAxis:{data:v.data[0].data.map(function(C){return C.date})},series:v.data.map(function(C){return{name:C.name,type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:C.data.map(function(x){return x.value})}})})},[v.data]),(0,h.jsx)("div",{style:{height:200},id:D})}},2808:function(he,X,e){e.d(X,{Z:function(){return i}});var K=e(97857),_=e.n(K),J=e(62370),s=e(51663),G=e(67294),h=e(85893);function i(v){return(0,h.jsx)(J.Z,_()(_()({},v),{},{children:(0,h.jsx)(s.Z,{showText:function(g){return g.toHexString()},allowClear:!0,presets:[{label:"\u9884\u8BBE\u989C\u8272",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},52756:function(he,X,e){e.r(X),e.d(X,{default:function(){return g},getLang:function(){return U}});var K=e(82346),_=e(31418),J=e(26058),s=e(85137),G=e(24963),h=e(65913),i=e(67294),v=e(85893);function U(D,T,f){var c=(0,K.getLocale)();f!=null&&f.XK&&(c="zh-XK");var P=(0,K.getIntl)(c).formatMessage({id:D},T);return P}function g(){var D=(0,i.useRef)(),T=(0,K.useIntl)(),f=function(d){for(var t=arguments.length,a=new Array(t>1?t-1:0),R=1;R<t;R++)a[R-1]=arguments[R];P.notification[d]({message:T.formatMessage({id:"notification.title."+d}),description:a.join(" "),placement:"topRight"})},c=function(d){for(var t=arguments.length,a=new Array(t>1?t-1:0),R=1;R<t;R++)a[R-1]=arguments[R];P.message[d](a.join(" "))},P=_.Z.useApp(),Z=(0,K.useModel)("@@initialState"),r=Z.initialState,C=Z.loading,x=Z.error,se=Z.refresh,te=Z.setInitialState,$=(0,K.useModel)("subscriber");return r!=null&&r.user.username&&$.addDataHandler("user:permission:".concat(r==null?void 0:r.user.username),function(j){se()}),(0,v.jsx)(J.Z,{children:(0,v.jsx)(G.Z.Provider,{value:{notice:{success:function(){for(var d=arguments.length,t=new Array(d),a=0;a<d;a++)t[a]=arguments[a];f.apply(void 0,["success"].concat(t))},error:function(){for(var d=arguments.length,t=new Array(d),a=0;a<d;a++)t[a]=arguments[a];f.apply(void 0,["error"].concat(t))},warning:function(){for(var d=arguments.length,t=new Array(d),a=0;a<d;a++)t[a]=arguments[a];f.apply(void 0,["warning"].concat(t))},info:function(){for(var d=arguments.length,t=new Array(d),a=0;a<d;a++)t[a]=arguments[a];f.apply(void 0,["info"].concat(t))},destroy:function(){P.notification.destroy()}},message:{success:function(){for(var d=arguments.length,t=new Array(d),a=0;a<d;a++)t[a]=arguments[a];c.apply(void 0,["success"].concat(t))},error:function(){for(var d=arguments.length,t=new Array(d),a=0;a<d;a++)t[a]=arguments[a];c.apply(void 0,["error"].concat(t))},warning:function(){for(var d=arguments.length,t=new Array(d),a=0;a<d;a++)t[a]=arguments[a];c.apply(void 0,["warning"].concat(t))},info:function(){for(var d=arguments.length,t=new Array(d),a=0;a<d;a++)t[a]=arguments[a];c.apply(void 0,["info"].concat(t))},loading:function(){for(var d=arguments.length,t=new Array(d),a=0;a<d;a++)t[a]=arguments[a];c.apply(void 0,["loading"].concat(t))},destroy:function(){P.message.destroy()}},loading:{show:function(){D.current&&D.current.show()},destroy:function(){D.current&&D.current.destroy()}},lang:function(d,t){return T.formatMessage({id:d},t)}},children:(0,v.jsxs)(h.Z,{ref:D,children:[(0,v.jsx)(K.Outlet,{}),(0,v.jsx)(s.Z.BackTop,{duration:10,style:{bottom:100}})]})},C?"1":"2")})}},65913:function(he,X,e){var K=e(5574),_=e.n(K),J=e(74330),s=e(67294),G=e(85893),h=(0,s.forwardRef)(function(i,v){(0,s.useImperativeHandle)(v,function(){return{show:function(){T(!0)},destroy:function(){T(!1)}}});var U=(0,s.useState)(!1),g=_()(U,2),D=g[0],T=g[1];return(0,G.jsx)(J.Z,{spinning:D,size:"default",children:i.children})});X.Z=h},84410:function(he,X,e){e.d(X,{a:function(){return v},i:function(){return h}});var K=e(15009),_=e.n(K),J=e(99289),s=e.n(J),G=e(82346);function h(g){return i.apply(this,arguments)}function i(){return i=s()(_()().mark(function g(D){return _()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,G.request)("/api/app/container/get-stat-info",{method:"POST",data:D}));case 1:case"end":return f.stop()}},g)})),i.apply(this,arguments)}function v(g){return U.apply(this,arguments)}function U(){return U=s()(_()().mark(function g(D){return _()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,G.request)("/api/app/container/get-process-info",{method:"POST",data:D}));case 1:case"end":return f.stop()}},g)})),U.apply(this,arguments)}},29453:function(he,X,e){e.d(X,{A9:function(){return h},R3:function(){return T},e1:function(){return v},rn:function(){return g}});var K=e(15009),_=e.n(K),J=e(99289),s=e.n(J),G=e(82346);function h(c){return i.apply(this,arguments)}function i(){return i=s()(_()().mark(function c(P){return _()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,G.request)("/api/common/tag/create",{method:"POST",data:P});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},c)})),i.apply(this,arguments)}function v(c){return U.apply(this,arguments)}function U(){return U=s()(_()().mark(function c(P){return _()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,G.request)("/api/common/tag/get-list",{method:"POST",data:P});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},c)})),U.apply(this,arguments)}function g(c){return D.apply(this,arguments)}function D(){return D=s()(_()().mark(function c(P){return _()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,G.request)("/api/common/tag/delete",{method:"POST",data:P});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},c)})),D.apply(this,arguments)}function T(c){return f.apply(this,arguments)}function f(){return f=s()(_()().mark(function c(P){return _()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,G.request)("/api/pro/tag/get-url-detail",{method:"POST",data:P});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},c)})),f.apply(this,arguments)}}}]);
