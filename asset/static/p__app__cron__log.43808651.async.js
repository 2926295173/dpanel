"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4250],{6812:function(re,A,t){t.r(A),t.d(A,{default:function(){return w}});var $=t(15009),T=t.n($),K=t(99289),Z=t.n(K),S=t(5574),R=t.n(S),F=t(1699),b=t(22191),f=t(80821),m=t(83727),y=t(67255),z=t(43425),N=t(90078),d=t(38345),G=t(78099),H=t(95213),C=t(95089),J=t(82346),O=t(42075),Q=t(66309),L=t(96074),V=t(28036),X=t(25593),Y=t(40411),k=t(86250),h=t(55054),v=t(67294),r=t(85893);function w(){var M,g,D=(0,J.useParams)(),q=(0,v.useState)(),I=R()(q,2),a=I[0],p=I[1],l=(0,v.useRef)(),ee=(0,v.useState)(),W=R()(ee,2),o=W[0],ne=W[1],j=(0,v.useRef)(),te=(0,v.useState)(0),B=R()(te,2),P=B[0],x=B[1];return(0,v.useEffect)(function(){var s;(0,m.Ih)({id:parseInt((s=D.id)!==null&&s!==void 0?s:"")}).then(function(e){ne(e.data.detail)})},[P]),(0,r.jsx)(N._z,{children:(0,r.jsxs)(d.Z,{ghost:!0,direction:"column",gutter:[0,10],children:[(0,r.jsx)(d.Z,{title:(0,r.jsx)(z.Z,{}),subTitle:o==null?void 0:o.title,extra:(0,r.jsxs)(O.Z,{children:[(0,r.jsx)("span",{children:"\u4E0B\u6B21\u8FD0\u884C\u65F6\u95F4\uFF1A"}),o&&o.setting.nextRunTime&&o.setting.nextRunTime.map(function(s,e){return(0,r.jsx)(Q.Z,{children:new Date(s).toLocaleString()},"runNextTime-".concat(e))})]}),children:(0,r.jsxs)(O.Z,{children:[(0,r.jsx)(f.Z,{action:function(){var e;return(0,m.yh)({id:parseInt((e=D.id)!==null&&e!==void 0?e:"")})},onSuccess:function(){var e,n;return!((e=l.current)===null||e===void 0)&&e.reloadAndRest&&((n=l.current)===null||n===void 0||n.reloadAndRest()),!0},onError:function(){var e,n;return!((e=l.current)===null||e===void 0)&&e.reloadAndRest&&((n=l.current)===null||n===void 0||n.reloadAndRest()),!0},type:"primary",children:"\u7ACB\u5373\u6267\u884C"},"runOnce"),o&&(0,r.jsx)(f.Z,{action:function(){var e,n,u,c,_,i,U={id:o.id,title:o.title,expression:(e=o.setting.expression)!==null&&e!==void 0?e:[],containerName:(n=o.setting.containerName)!==null&&n!==void 0?n:"",script:(u=o.setting.script)!==null&&u!==void 0?u:"",enableRunBlock:(c=o.setting.enableRunBlock)!==null&&c!==void 0?c:!1,environment:(_=o.setting.environment)!==null&&_!==void 0?_:[],keepLogTotal:(i=o.setting.keepLogTotal)!==null&&i!==void 0?i:10,disable:!o.setting.disable};return(0,m.FS)(U)},onSuccess:function(){return x(P+1),!0},onError:function(){return x(P+1),!0},children:o.setting.disable?"\u6062\u590D":"\u6682\u505C"},"pause"),(0,r.jsx)(L.Z,{type:"vertical"}),(0,r.jsx)(f.Z,{action:function(){var e;return p({}),(0,m.wb)({id:parseInt((e=D.id)!==null&&e!==void 0?e:"")})},onSuccess:function(){var e,n;return!((e=l.current)===null||e===void 0)&&e.reloadAndRest&&((n=l.current)===null||n===void 0||n.reloadAndRest()),!0},onError:function(){var e,n;return!((e=l.current)===null||e===void 0)&&e.reloadAndRest&&((n=l.current)===null||n===void 0||n.reloadAndRest()),!0},type:"primary",confirm:"notification.confirm.title",danger:!0,children:"\u6E05\u7A7A\u65E5\u5FD7"},"clear"),(0,r.jsx)(L.Z,{type:"vertical"}),(0,r.jsx)(b.Z,{ref:j,onFinish:function(){x(P+1)}},"create"),(0,r.jsx)(F.u,{access:"canSeeContainerCronManage",children:(0,r.jsx)(V.ZP,{onClick:function(){var e;!((e=j.current)===null||e===void 0)&&e.edit&&o&&j.current.edit(o)},children:"\u7F16\u8F91\u4EFB\u52A1"})})]})}),(0,r.jsxs)(d.Z,{split:"vertical",children:[(0,r.jsx)(d.Z,{ghost:!0,colSpan:"30%",children:(0,r.jsx)(G.Z,{actionRef:l,rowKey:"id",pagination:(0,y.O)(),columns:[{title:"Id",dataIndex:"id",render:function(e,n,u,c,_){return(0,r.jsxs)(O.Z,{children:[(0,r.jsx)(X.Z.Link,{onClick:function(){p(n)},children:n.id}),a!=null&&a.id&&a.id==n.id?(0,r.jsx)(Y.Z,{status:"processing"}):""]})}},{title:"\u5F00\u59CB\u65F6\u95F4",render:function(e,n,u,c,_){return new Date(n.value.runTime).toLocaleString()}},{title:"\u8017\u65F6",render:function(e,n,u,c,_){return"".concat(n.value.useTime?n.value.useTime.toFixed(2)+"s":"-")}}],search:!1,request:function(){var s=Z()(T()().mark(function e(n,u,c){var _,i;return T()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,m.bk)({id:parseInt((_=D.id)!==null&&_!==void 0?_:""),page:n.current,pageSize:n.pageSize});case 2:return i=E.sent,i.data.list&&i.data.list.length>0&&p(i.data.list[0]),E.abrupt("return",{data:i.data.list,success:!0,total:i.data.total});case 5:case"end":return E.stop()}},e)}));return function(e,n,u){return s.apply(this,arguments)}}()})}),(0,r.jsxs)(d.Z,{ghost:!0,colSpan:"70%",split:"horizontal",children:[(0,r.jsx)(d.Z,{children:(0,r.jsxs)(k.Z,{gap:50,align:"center",justify:"space-evenly",children:[(0,r.jsx)(h.Z,{title:"\u65E5\u5FD7Id",value:(a==null?void 0:a.id)&&(a==null?void 0:a.id)}),(0,r.jsx)(h.Z,{title:"\u6267\u884C\u65F6\u95F4",value:(a==null?void 0:a.value)&&new Date((M=a==null?void 0:a.value.runTime)!==null&&M!==void 0?M:"").toLocaleString()}),(0,r.jsx)(h.Z,{title:"\u6D88\u8017\u65F6\u95F4",value:(a==null?void 0:a.value)&&"".concat(a!=null&&a.value.useTime?a.value.useTime.toFixed(2)+"s":"-")})]})}),(0,r.jsx)(d.Z,{children:(0,r.jsx)(C.ZP,{theme:"dark",height:"100vh",value:(a==null?void 0:a.value)&&((g=a.value.message)!==null&&g!==void 0?g:a==null?void 0:a.value.error),extensions:[H.RI.shell(),C.tk.lineWrapping]})})]})]})]})})}}}]);
