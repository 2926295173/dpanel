"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8878],{55809:function(W,c,e){var p=e(87462),t=e(67294),h=e(44805),u=e(84089),l=function(M,O){return t.createElement(u.Z,(0,p.Z)({},M,{ref:O,icon:h.Z}))},d=t.forwardRef(l);c.Z=d},1699:function(W,c,e){e.d(c,{u:function(){return C}});var p=e(9783),t=e.n(p),h=e(97857),u=e.n(h),l=e(67294),d=e(82346),v=e(40411),M=e(42075),O=e(85893),C=function(i){var o=(0,d.useAccess)(),f=Array.isArray(i.access)?i.access:[i.access],r,P=i.fallback;if(typeof i.children=="function"?(r=i.children(f.reduce(function(m,s){return u()(u()({},m),{},t()({},s,o[s]))},{})),r||(r=P)):f.every(function(m){return o[m]})?r=i.children:r=P,!P&&r&&i.showProTips&&o.canSeeEnableCe){if(o.canSeeEnableHiddenProTips)return null;r=(0,O.jsx)(v.Z,{offset:i.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:r})}if(!P&&r&&i.showProRibbonTips&&o.canSeeEnableCe){if(o.canSeeEnableHiddenProTips)return null;r=(0,O.jsx)(v.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:r})}return i.space?(0,O.jsx)(M.Z,u()(u()({},i.space),{},{children:r})):r}},3616:function(W,c,e){e.d(c,{Ed:function(){return u},FK:function(){return t},R_:function(){return p},ob:function(){return h}});var p=window.innerWidth<=1024?"90vw":"65vw",t="90vw",h="60vw",u="50vh"},24963:function(W,c,e){var p=e(67294),t=(0,p.createContext)({});c.Z=t},29798:function(W,c,e){e.r(c),e.d(c,{default:function(){return P}});var p=e(5574),t=e.n(p),h=e(13822),u=e(38345),l=e(82346),d=e(67294),v=e(24963),M=e(50070),O=e(37767),C=e(52031),R=e(14189),i=e(72409),o=e(14245),f=e(1699),r=e(85893);function P(){var m=(0,d.useContext)(v.Z),s=m.loading,U=(0,d.useContext)(M.AppDetailContext),T=(0,l.useParams)(),b=(0,d.useState)(),j=t()(b,2),a=j[0],_=j[1],D=(0,d.useState)(1),n=t()(D,2),S=n[0],z=n[1],x=(0,l.useNavigate)();return(0,d.useEffect)(function(){var A;s.show(),U.reload(),(0,h.jV)({md5:(A=T.id)!==null&&A!==void 0?A:""}).then(function(g){g.data&&(g.data.info.HostConfig.NetworkMode=="host"&&g.data.info.Config.ExposedPorts&&Object.keys(g.data.info.Config.ExposedPorts).map(function(y){g.data.info.NetworkSettings.Ports[y]=[{HostIp:"0.0.0.0",HostPort:y.substring(0,y.indexOf("/"))}]}),_(g.data))}).finally(function(){s.destroy()})},[S]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(u.Z,{direction:"column",gutter:[0,10],children:[(a==null?void 0:a.info)&&(0,r.jsx)(R.Z,{data:a.info}),(a==null?void 0:a.info)&&(0,r.jsx)(f.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,r.jsx)(i.Z,{data:a,checkContainerUpgrade:function(){x("/app/list",{state:{page:localStorage.getItem("dpanel-page-compose-list")}})}})}),a&&(0,r.jsx)(O.Z,{data:a}),a&&(0,r.jsx)(C.Z,{data:a==null?void 0:a.info}),a&&(0,r.jsx)(o.Z,{data:a.info})]})})}},50070:function(W,c,e){e.r(c),e.d(c,{AppDetailContext:function(){return U},default:function(){return T}});var p=e(15009),t=e.n(p),h=e(99289),u=e.n(h),l=e(5574),d=e.n(l),v=e(1699),M=e(24963),O=e(13822),C=e(36146),R=e(55809),i=e(90078),o=e(82346),f=e(25593),r=e(28036),P=e(50136),m=e(67294),s=e(85893),U=(0,m.createContext)({});function T(){var b,j=(0,m.useContext)(M.Z),a=j.loading,_=(0,o.useParams)(),D=(0,o.useSearchParams)(),n=d()(D,2),S=n[0],z=n[1],x=(b=S.get("tab"))!==null&&b!==void 0?b:"edit",A=(0,m.useState)("edit"),g=d()(A,2),y=g[0],N=g[1],B=(0,o.useNavigate)(),X=(0,m.useState)(1),F=d()(X,2),H=F[0],J=F[1],w=[{label:(0,s.jsx)(o.Link,{to:"/app/detail/edit/".concat(_.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,s.jsx)(o.Link,{to:"/app/detail/network/".concat(_.id,"?tab=network"),children:"\u7F51\u7EDC\u7BA1\u7406"}),key:"network"},{label:(0,s.jsx)(f.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){B("/app/detail/file/".concat(_.id,"?tab=file"))}},{label:(0,s.jsx)(f.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){B("/app/detail/log/".concat(_.id,"?tab=log"))}},{label:(0,s.jsx)(f.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){B("/app/detail/stat/".concat(_.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,s.jsx)(R.Z,{}),disabled:!0}],Q=(0,m.useState)(w),G=d()(Q,2),Y=G[0],q=G[1];(0,m.useEffect)(function(){a.show(),N(x);var L=function(){var k=u()(t()().mark(function V(){var Z,$,K;return t()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return Z=w,E.prev=1,E.next=4,(0,O.jV)({md5:($=_.id)!==null&&$!==void 0?$:""});case 4:K=E.sent,Z.map(function(I){return I.key=="containerName"&&(I.label=K.data.info.Name),(!K.data.info.State.Running||K.data.info.State.Restarting)&&(I.key=="file"||I.key=="stat")&&(I.disabled=!0),I}),q(Z),E.next=13;break;case 9:return E.prev=9,E.t0=E.catch(1),B("/app/list"),E.abrupt("return");case 13:return E.prev=13,a.destroy(),E.finish(13);case 16:case"end":return E.stop()}},V,null,[[1,9,13,16]])}));return function(){return k.apply(this,arguments)}}();L()},[H,_]);var ee=function(k){N(k.key)};return(0,s.jsx)(U.Provider,{value:{reload:function(){J(H+1)}},children:(0,s.jsxs)(i._z,{header:{extra:[(0,s.jsx)(v.u,{access:"canSeeContainerListManageCreate",children:(0,s.jsx)(o.Link,{to:"/app/create/image",children:(0,s.jsx)(r.ZP,{type:"primary",children:C.Ob.format("container.create")})})},"create")]},children:[(0,s.jsx)(P.Z,{mode:"horizontal",onClick:ee,selectedKeys:[y],items:Y}),(0,s.jsx)(o.Outlet,{})]})})}},62597:function(W,c,e){e.d(c,{$G:function(){return d},Ct:function(){return m},Tb:function(){return R},XH:function(){return o},cl:function(){return O},fp:function(){return M},iE:function(){return r},xb:function(){return U},ze:function(){return b}});var p=e(15009),t=e.n(p),h=e(99289),u=e.n(h),l=e(82346);function d(a){return v.apply(this,arguments)}function v(){return v=u()(t()().mark(function a(_){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/site/create-by-image",{method:"POST",data:_}));case 1:case"end":return n.stop()}},a)})),v.apply(this,arguments)}var M={EnvValueRuleRequired:1,EnvValueRuleDisabled:2,EnvValueTypeNumber:1024,EnvValueTypeText:2048,EnvValueTypeSelect:4096,EnvValueTypeSelectMultiple:8192};function O(a){return C.apply(this,arguments)}function C(){return C=u()(t()().mark(function a(_){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/site/get-list",{method:"POST",data:_}));case 1:case"end":return n.stop()}},a)})),C.apply(this,arguments)}function R(a){return i.apply(this,arguments)}function i(){return i=u()(t()().mark(function a(_){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return _.download=!1,n.next=3,(0,l.request)("/api/app/log/run",{method:"POST",data:_});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},a)})),i.apply(this,arguments)}function o(a){return f.apply(this,arguments)}function f(){return f=u()(t()().mark(function a(_){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return _.download=!0,n.next=3,(0,l.request)("/api/app/log/run",{method:"POST",data:_,responseType:"blob"});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},a)})),f.apply(this,arguments)}function r(a){return P.apply(this,arguments)}function P(){return P=u()(t()().mark(function a(_){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return _.id=String(_.id),n.next=3,(0,l.request)("/api/app/site/get-detail",{data:_,method:"POST"});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},a)})),P.apply(this,arguments)}function m(a){return s.apply(this,arguments)}function s(){return s=u()(t()().mark(function a(_){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/container/delete",{method:"POST",data:_}));case 1:case"end":return n.stop()}},a)})),s.apply(this,arguments)}function U(a){return T.apply(this,arguments)}function T(){return T=u()(t()().mark(function a(_){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/site/delete",{method:"POST",data:_}));case 1:case"end":return n.stop()}},a)})),T.apply(this,arguments)}function b(a){return j.apply(this,arguments)}function j(){return j=u()(t()().mark(function a(_){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/container/ignore",{method:"POST",data:_}));case 1:case"end":return n.stop()}},a)})),j.apply(this,arguments)}}}]);
