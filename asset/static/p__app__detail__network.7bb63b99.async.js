(self.webpackChunk=self.webpackChunk||[]).push([[2902],{64789:function(U,M,e){"use strict";e.d(M,{Z:function(){return Z}});var A=e(87462),a=e(67294),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},f=c,o=e(84089),g=function(p,_){return a.createElement(o.Z,(0,A.Z)({},p,{ref:_,icon:f}))},v=a.forwardRef(g),Z=v},4798:function(U,M,e){"use strict";var A=e(15009),a=e.n(A),c=e(99289),f=e.n(c),o=e(5574),g=e.n(o),v=e(24963),Z=e(14946),T=e(64789),p=e(38345),_=e(17186),O=e(24739),b=e(5966),H=e(62370),j=e(10641),W=e(31418),N=e(25593),G=e(85576),D=e(66309),z=e(42075),$=e(28036),x=e(67294),s=e(85893),u=(0,x.forwardRef)(function(d,E){var n=(0,x.useContext)(v.Z),ee=n.notice,Q=(0,x.useState)(!1),X=g()(Q,2),ae=X[0],i=X[1],J=(0,x.useRef)(),ne=W.Z.useApp();(0,x.useImperativeHandle)(E,function(){return{}});var te=function(l){var r,P,y=!1,I=(r=(P=J.current)===null||P===void 0?void 0:P.getList())!==null&&r!==void 0?r:[];if(I.map(function(C){C.name==l.name&&(y=!0)}),!y){var h;(h=J.current)===null||h===void 0||h.add(l)}};return(0,s.jsxs)(p.Z,{title:"\u5173\u8054\u7F51\u7EDC",headerBordered:!0,children:[(0,s.jsx)(_.u,{name:"network",actionRef:J,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u7F51\u7EDC"},actionGuard:{beforeAddRow:function(l,r){return!d.siteName||d.siteName==""||typeof d.siteName=="undefined"?(ee.error("\u8BF7\u8F93\u5165\u7AD9\u70B9\u6807\u8BC6"),!1):(i(!0),!1)}},copyIconProps:!1,min:0,itemRender:function(l,r){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(O.UW,{children:[(0,s.jsx)(b.Z,{label:"\u7F51\u7EDC\u540D\u79F0",name:"name",width:"md",disabled:!0,fieldProps:{value:r.record.name}}),(0,s.jsx)(H.Z,{label:"\u8BBF\u95EEHostname",name:"alise",children:r.record.alise!=""&&(0,s.jsx)(N.Z.Text,{code:!0,copyable:!0,children:r.record.alise})}),(0,s.jsx)(H.Z,{label:" ",children:l.action})]}),(0,s.jsx)(O.UW,{children:(0,s.jsx)(b.Z,{label:"\u6307\u5B9AIpV4",name:"ipV4",width:"md",fieldProps:{addonAfter:r.record.subnet}})})]})}}),(0,s.jsx)(G.Z,{title:"\u9009\u62E9\u7F51\u7EDC",width:1024,footer:!1,open:ae,onCancel:function(){return i(!1)},children:(0,s.jsx)(j.Z,{rowKey:"Name",toolBarRender:!1,columns:[{title:"\u540D\u79F0",dataIndex:"Name",render:function(l,r,P,y,I){return r.Name=="none"||r.Name=="bridge"||r.Name=="host"?(0,s.jsxs)(s.Fragment,{children:[r.Name," ",(0,s.jsx)(D.Z,{color:"blue",children:"System"})]}):(0,s.jsx)(s.Fragment,{children:l})}},{title:"\u7C7B\u578B",ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"IPAM Driver",ellipsis:!0,width:120,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4 IPAM Network",search:!1,dataIndex:["IPAM","Config",0,"Subnet"],render:function(l,r,P,y,I){return(0,s.jsxs)(z.Z,{children:[r.IPAM.Config&&r.IPAM.Config[0]&&"".concat(r.IPAM.Config[0].Subnet," - ").concat(r.IPAM.Config[0].Gateway),r.IPAM.Config&&r.IPAM.Config[1]&&"".concat(r.IPAM.Config[1].Subnet," - ").concat(r.IPAM.Config[1].Gateway)]})}},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(l,r,P,y,I){return[(0,s.jsx)($.ZP,{type:"link",onClick:function(){te({name:r.Name,alise:[""],subnet:r.IPAM.Config[0].Subnet}),i(!1)},children:(0,s.jsx)(T.Z,{})},r.Id)]}}],request:function(){var B=f()(a()().mark(function l(r,P,y){var I;return a()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,Z.jR)({name:r.Name});case 2:return I=C.sent,C.abrupt("return",{data:I.data.list,success:!0,total:I.data.list.length});case 4:case"end":return C.stop()}},l)}));return function(l,r,P){return B.apply(this,arguments)}}(),pagination:{pageSize:10}})})]})});M.Z=u},78498:function(U,M,e){"use strict";e.d(M,{Z:function(){return g}});var A=e(25035),a=e(42075),c=e(83062),f=e(67294),o=e(85893);function g(v){return(0,o.jsxs)(a.Z,{children:[v.title,(0,o.jsx)(c.Z,{title:v.help,children:(0,o.jsx)(A.Z,{})})]})}},34548:function(U,M,e){"use strict";e.r(M),e.d(M,{AppDetailContext:function(){return z},default:function(){return $}});var A=e(15009),a=e.n(A),c=e(99289),f=e.n(c),o=e(5574),g=e.n(o),v=e(24963),Z=e(60335),T=e(87462),p=e(67294),_=e(44805),O=e(84089),b=function(s,u){return p.createElement(O.Z,(0,T.Z)({},s,{ref:u,icon:_.Z}))},H=p.forwardRef(b),j=H,W=e(82346),N=e(25593),G=e(50136),D=e(85893),z=(0,p.createContext)({});function $(){var x,s=(0,p.useContext)(v.Z),u=s.lang,d=s.loading,E=s.message,n=(0,W.useParams)(),ee=(0,W.useSearchParams)(),Q=g()(ee,2),X=Q[0],ae=Q[1],i=(x=X.get("tab"))!==null&&x!==void 0?x:"edit",J=(0,p.useState)("edit"),ne=g()(J,2),te=ne[0],B=ne[1],l=(0,W.useNavigate)(),r=(0,p.useState)(1),P=g()(r,2),y=P[0],I=P[1],h=[{label:(0,D.jsx)(W.Link,{to:"/app/detail/edit/".concat(n.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,D.jsx)(W.Link,{to:"/app/detail/network/".concat(n.id,"?tab=network"),children:"\u7F51\u7EDC\u7BA1\u7406"}),key:"network"},{label:(0,D.jsx)(N.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){E.info(u("app.detail.createExplorerPlugin")),l("/app/detail/file/".concat(n.id,"?tab=file"))}},{label:(0,D.jsx)(N.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){l("/app/detail/log/".concat(n.id,"?tab=log"))}},{label:(0,D.jsx)(N.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){l("/app/detail/stat/".concat(n.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,D.jsx)(j,{}),disabled:!0}],C=(0,p.useState)(h),Y=g()(C,2),V=Y[0],K=Y[1];(0,p.useEffect)(function(){d.show(),B(i);var t=function(){var L=f()(a()().mark(function k(){var w,F,m;return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return F=h,R.next=3,(0,Z.jV)({md5:(w=n.id)!==null&&w!==void 0?w:""});case 3:m=R.sent,F.map(function(q){return q.key=="containerName"&&(q.label=m.data.info.Name),(!m.data.info.State.Running||m.data.info.State.Restarting)&&(q.key=="file"||q.key=="stat")&&(q.disabled=!0),q}),K(F),d.destroy();case 7:case"end":return R.stop()}},k)}));return function(){return L.apply(this,arguments)}}();t()},[y]);var S=function(L){B(L.key)};return(0,D.jsxs)(z.Provider,{value:{reload:function(){I(y+1)}},children:[(0,D.jsx)(G.Z,{mode:"horizontal",onClick:S,selectedKeys:[te],items:V}),(0,D.jsx)(W.Outlet,{})]})}},79767:function(U,M,e){"use strict";e.r(M),e.d(M,{default:function(){return B}});var A=e(15009),a=e.n(A),c=e(99289),f=e.n(c),o=e(5574),g=e.n(o),v=e(14946),Z=e(43425),T=e(48689),p=e(38345),_=e(10641),O=e(42075),b=e(25593),H=e(83062),j=e(67294),W=e(60335),N=e(78498),G=e(80821),D=e(82346),z=e(64599),$=e.n(z),x=e(87462),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 680h-54V540H546v-92h238c8.8 0 16-7.2 16-16V168c0-8.8-7.2-16-16-16H240c-8.8 0-16 7.2-16 16v264c0 8.8 7.2 16 16 16h238v92H190v140h-54c-4.4 0-8 3.6-8 8v176c0 4.4 3.6 8 8 8h176c4.4 0 8-3.6 8-8V688c0-4.4-3.6-8-8-8h-54v-72h220v72h-54c-4.4 0-8 3.6-8 8v176c0 4.4 3.6 8 8 8h176c4.4 0 8-3.6 8-8V688c0-4.4-3.6-8-8-8h-54v-72h220v72h-54c-4.4 0-8 3.6-8 8v176c0 4.4 3.6 8 8 8h176c4.4 0 8-3.6 8-8V688c0-4.4-3.6-8-8-8zM256 805.3c0 1.5-1.2 2.7-2.7 2.7h-58.7c-1.5 0-2.7-1.2-2.7-2.7v-58.7c0-1.5 1.2-2.7 2.7-2.7h58.7c1.5 0 2.7 1.2 2.7 2.7v58.7zm288 0c0 1.5-1.2 2.7-2.7 2.7h-58.7c-1.5 0-2.7-1.2-2.7-2.7v-58.7c0-1.5 1.2-2.7 2.7-2.7h58.7c1.5 0 2.7 1.2 2.7 2.7v58.7zM288 384V216h448v168H288zm544 421.3c0 1.5-1.2 2.7-2.7 2.7h-58.7c-1.5 0-2.7-1.2-2.7-2.7v-58.7c0-1.5 1.2-2.7 2.7-2.7h58.7c1.5 0 2.7 1.2 2.7 2.7v58.7zM360 300a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"cluster",theme:"outlined"},u=s,d=e(84089),E=function(r,P){return j.createElement(d.Z,(0,x.Z)({},r,{ref:P,icon:u}))},n=j.forwardRef(E),ee=n,Q=e(184),X=e(28036),ae=e(4798),i=e(85893);function J(l){var r=(0,j.useRef)();return[(0,i.jsx)(Q.a,{trigger:(0,i.jsx)(X.ZP,{type:"primary",icon:(0,i.jsx)(ee,{}),children:"\u52A0\u5165\u7F51\u7EDC"},"button"),width:800,formRef:r,title:"\u914D\u7F6E\u7F51\u7EDC",onFinish:function(){var P=f()(a()().mark(function y(I){var h,C,Y,V,K;return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!I.network){t.next=19;break}C=$()(I.network),t.prev=2,C.s();case 4:if((Y=C.n()).done){t.next=11;break}return V=Y.value,t.next=8,(0,v.HY)({name:V.name,containerName:l.containerName,containerAlise:V.alise,ipV4:V.ipV4});case 8:K=t.sent;case 9:t.next=4;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),C.e(t.t0);case 16:return t.prev=16,C.f(),t.finish(16);case 19:return!((h=r.current)===null||h===void 0)&&h.resetFields&&r.current.resetFields(),l.onSuccess&&l.onSuccess(),t.abrupt("return",!0);case 22:case"end":return t.stop()}},y,null,[[2,13,16,19]])}));return function(y){return P.apply(this,arguments)}}(),children:(0,i.jsx)(ae.Z,{siteName:l.containerName})},"form")]}var ne=e(34548),te=e(10032);function B(){var l,r=(0,j.useRef)(),P=(0,D.useParams)(),y=(0,j.useState)(),I=g()(y,2),h=I[0],C=I[1],Y=(0,j.useContext)(ne.AppDetailContext),V=(0,j.useRef)();return(0,j.useEffect)(function(){Y.reload()},[]),(0,i.jsxs)(p.Z,{children:[(0,i.jsx)(te.Z,{ref:V}),(0,i.jsx)(_.Z,{scroll:{x:"max-content"},rowKey:"key",actionRef:r,pagination:!1,columns:[{title:"\u6240\u5C5E\u7F51\u7EDC",key:"name",dataIndex:"networkName",width:300},{title:"\u5BB9\u5668\u540D\u79F0",key:"containerName",dataIndex:"containerName"},{title:(0,i.jsx)(N.Z,{title:"hostname",help:"\u63D0\u4F9B\u5BB9\u5668\u5185\u90E8\u8BBF\u95EE"}),key:"hostName",render:function(S,t,L){return t.hostName?(0,i.jsx)(O.Z,{direction:"vertical",children:t.hostName.map(function(k){if(k)return(0,i.jsx)(b.Z.Text,{copyable:!0,keyboard:!0,children:k},k)})}):(0,i.jsx)(i.Fragment,{})}},{title:"Ip",key:"ip",render:function(S,t,L,k,w){return(0,i.jsxs)(O.Z,{direction:"vertical",children:[(0,i.jsx)("span",{children:t.networkInfo.IPv4Address}),t.networkInfo.IPv6Address&&(0,i.jsx)("span",{children:t.networkInfo.IPv6Address})]})}},{title:"MacAddress",key:"mac",render:function(S,t,L,k,w){return t.networkInfo.MacAddress}},{title:"\u64CD\u4F5C",key:"option",width:50,fixed:"right",render:function(S,t,L,k,w){return(0,i.jsxs)(O.Z,{children:[t.networkName!=""&&(0,i.jsx)(b.Z.Link,{onClick:function(){var m;(m=V.current)===null||m===void 0||m.show(t.networkName)},children:(0,i.jsx)(H.Z,{title:"\u7BA1\u7406",children:(0,i.jsx)(Z.Z,{})})}),t.key!="bridge"&&t.key!="none"&&t.key!="host"&&t.networkName!=""&&(0,i.jsx)(G.Z,{type:"link",action:function(){var m;return(0,v.t9)({name:t.networkName,containerName:(m=P.id)!==null&&m!==void 0?m:""})},onSuccess:function(){var m,re;!((m=r.current)===null||m===void 0)&&m.reloadAndRest&&((re=r.current)===null||re===void 0||re.reloadAndRest())},tips:"\u9000\u51FA\u8BE5\u7F51\u7EDC",children:(0,i.jsx)(T.Z,{})})]})}}],request:function(){var K=f()(a()().mark(function S(t,L,k){var w,F,m;return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,(0,W.jV)({md5:(w=P.id)!==null&&w!==void 0?w:""});case 2:return F=R.sent,C(F.data.info),R.next=6,(0,v._3)({name:Object.keys(F.data.info.NetworkSettings.Networks)});case 6:return m=R.sent,R.abrupt("return",{data:m.data.list,success:!0,total:m.data.list.length});case 8:case"end":return R.stop()}},S)}));return function(S,t,L){return K.apply(this,arguments)}}(),toolBarRender:function(){var S;return[(0,i.jsx)(J,{onSuccess:function(){var L;(L=r.current)===null||L===void 0||L.reload()},containerName:(S=h==null?void 0:h.Name)!==null&&S!==void 0?S:""},"joinNetwork")]},search:!1,expandable:{expandRowByClick:!1,expandedRowKeys:Object.keys((l=h==null?void 0:h.NetworkSettings.Networks)!==null&&l!==void 0?l:{bridge:[]})}})]})}},60335:function(U,M,e){"use strict";e.d(M,{IE:function(){return Z},IW:function(){return g},KK:function(){return H},LJ:function(){return W},RF:function(){return z},Re:function(){return G},aF:function(){return x},eE:function(){return O},jV:function(){return p}});var A=e(15009),a=e.n(A),c=e(99289),f=e.n(c),o=e(82346);function g(u){return v.apply(this,arguments)}function v(){return v=f()(a()().mark(function u(d){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,o.request)("/api/app/container/status",{method:"POST",data:d}));case 1:case"end":return n.stop()}},u)})),v.apply(this,arguments)}function Z(u){return T.apply(this,arguments)}function T(){return T=f()(a()().mark(function u(d){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,o.request)("/api/app/container/get-list",{data:d,method:"POST"}));case 1:case"end":return n.stop()}},u)})),T.apply(this,arguments)}function p(u){return _.apply(this,arguments)}function _(){return _=f()(a()().mark(function u(d){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,o.request)("/api/app/container/get-detail",{data:d,method:"POST"}));case 1:case"end":return n.stop()}},u)})),_.apply(this,arguments)}function O(u){return b.apply(this,arguments)}function b(){return b=f()(a()().mark(function u(d){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,o.request)("/api/app/container/update",{data:d,method:"POST"}));case 1:case"end":return n.stop()}},u)})),b.apply(this,arguments)}function H(){return j.apply(this,arguments)}function j(){return j=f()(a()().mark(function u(){return a()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",(0,o.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return E.stop()}},u)})),j.apply(this,arguments)}function W(u){return N.apply(this,arguments)}function N(){return N=f()(a()().mark(function u(d){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,o.request)("/api/app/container/export",{method:"POST",data:d,responseType:"blob"}));case 1:case"end":return n.stop()}},u)})),N.apply(this,arguments)}function G(u){return D.apply(this,arguments)}function D(){return D=f()(a()().mark(function u(d){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,o.request)("/api/app/container/commit",{method:"POST",data:d}));case 1:case"end":return n.stop()}},u)})),D.apply(this,arguments)}function z(u){return $.apply(this,arguments)}function $(){return $=f()(a()().mark(function u(d){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,o.request)("/api/app/container/upgrade",{method:"POST",data:d}));case 1:case"end":return n.stop()}},u)})),$.apply(this,arguments)}function x(u){return s.apply(this,arguments)}function s(){return s=f()(a()().mark(function u(d){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,o.request)("/api/app/container/copy",{method:"POST",data:d}));case 1:case"end":return n.stop()}},u)})),s.apply(this,arguments)}},64599:function(U,M,e){var A=e(96263);function a(c,f){var o=typeof Symbol!="undefined"&&c[Symbol.iterator]||c["@@iterator"];if(!o){if(Array.isArray(c)||(o=A(c))||f&&c&&typeof c.length=="number"){o&&(c=o);var g=0,v=function(){};return{s:v,n:function(){return g>=c.length?{done:!0}:{done:!1,value:c[g++]}},e:function(O){throw O},f:v}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Z=!0,T=!1,p;return{s:function(){o=o.call(c)},n:function(){var O=o.next();return Z=O.done,O},e:function(O){T=!0,p=O},f:function(){try{!Z&&o.return!=null&&o.return()}finally{if(T)throw p}}}}U.exports=a,U.exports.__esModule=!0,U.exports.default=U.exports}}]);
