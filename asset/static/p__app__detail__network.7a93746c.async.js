"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2902],{43831:function(w,p,e){var R=e(15009),r=e.n(R),f=e(99289),u=e.n(f),l=e(5574),h=e.n(l),i=e(67294),W=e(14946),U=e(43425),P=e(48689),D=e(38345),L=e(10641),d=e(42075),m=e(25593),I=e(83062),o=e(60335),M=e(78498),b=e(80821),k=e(10032),Z=e(5251),K=e(28230),A=e(46442),T=e(78451),t=e(85893),_=(0,i.forwardRef)(function(a,n){var x;(0,i.useImperativeHandle)(n,function(){return{}});var O=(0,i.useRef)(),g=(0,i.useRef)(),$=(0,i.useState)(),C=h()($,2),G=C[0],V=C[1];return(0,i.useEffect)(function(){V(a.containerInfo)},[]),(0,t.jsxs)(D.Z,{ghost:a.ghost,children:[(0,t.jsx)(k.Z,{ref:g}),(0,t.jsx)(L.Z,{scroll:{x:"max-content"},rowKey:"key",actionRef:O,pagination:!1,columns:[{title:"\u6240\u5C5E\u7F51\u7EDC",key:"name",dataIndex:"networkName"},{title:"\u5BB9\u5668\u540D\u79F0",key:"containerName",dataIndex:"containerName",width:100,render:function(B,s,j,v,y){return(0,t.jsx)(T.Z,{content:(0,Z.fi)(s.containerName,"/")})}},{title:(0,t.jsx)(M.Z,{title:"hostname",help:"\u63D0\u4F9B\u5BB9\u5668\u5185\u90E8\u8BBF\u95EE"}),key:"hostName",render:function(B,s,j){return s.hostName?(0,t.jsx)(d.Z,{direction:"vertical",children:s.hostName.map(function(v){if(v)return(0,t.jsx)(m.Z.Text,{copyable:!0,keyboard:!0,children:v},v)})}):(0,t.jsx)(t.Fragment,{})}},{title:"Ip",key:"ip",render:function(B,s,j,v,y){return(0,t.jsxs)(d.Z,{direction:"vertical",children:[(0,t.jsx)("span",{children:s.networkInfo.IPv4Address}),s.networkInfo.IPv6Address&&(0,t.jsx)("span",{children:s.networkInfo.IPv6Address})]})}},{title:"\u64CD\u4F5C",key:"option",width:50,fixed:"right",render:function(B,s,j,v,y){return(0,t.jsxs)(d.Z,{children:[s.networkName!=""&&(0,t.jsx)(m.Z.Link,{onClick:function(){var E;(E=g.current)===null||E===void 0||E.show(s.networkName)},children:(0,t.jsx)(I.Z,{title:"\u7BA1\u7406",children:(0,t.jsx)(U.Z,{})})}),s.key!="bridge"&&s.key!="none"&&s.key!="host"&&s.networkName!=""&&(0,t.jsx)(b.Z,{type:"link",action:function(){return(0,W.t9)({name:s.networkName,containerName:a.containerInfo.Name})},onSuccess:function(){var E,c;!((E=O.current)===null||E===void 0)&&E.reloadAndRest&&((c=O.current)===null||c===void 0||c.reloadAndRest())},tips:"\u9000\u51FA\u8BE5\u7F51\u7EDC",children:(0,t.jsx)(P.Z,{})})]})}}],request:function(){var S=u()(r()().mark(function B(s,j,v){var y,N;return r()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,o.jV)({md5:a.containerInfo.Name});case 2:return y=c.sent,V(y.data.info),c.next=6,(0,W._3)({name:Object.keys(y.data.info.NetworkSettings.Networks)});case 6:return N=c.sent,c.abrupt("return",{data:N.data.list,success:!0,total:N.data.list.length});case 8:case"end":return c.stop()}},B)}));return function(B,s,j){return S.apply(this,arguments)}}(),toolBarRender:function(){return[(0,t.jsx)(A.Z,{showTriggerButton:!0,onSelect:function(){var B=u()(r()().mark(function s(j){var v,y;return r()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,W.HY)({name:j.Name,containerName:a.containerInfo.Name,ipV4:""});case 2:y=E.sent,!((v=O.current)===null||v===void 0)&&v.reloadAndRest&&O.current.reloadAndRest();case 4:case"end":return E.stop()}},s)}));return function(s){return B.apply(this,arguments)}}()},"joinNetwork"),(0,t.jsx)(K.Z,{onFinish:function(){var s,j;!((s=O.current)===null||s===void 0)&&s.reloadAndRest&&((j=O.current)===null||j===void 0||j.reloadAndRest())}},"create")]},search:!1,expandable:{expandRowByClick:!1,expandedRowKeys:Object.keys((x=G==null?void 0:G.NetworkSettings.Networks)!==null&&x!==void 0?x:{bridge:[]})}})]})});p.Z=_},46442:function(w,p,e){var R=e(15009),r=e.n(R),f=e(99289),u=e.n(f),l=e(5574),h=e.n(l),i=e(67294),W=e(14946),U=e(64789),P=e(10641),D=e(28036),L=e(85265),d=e(42075),m=e(66309),I=e(28230),o=e(85893),M=(0,i.forwardRef)(function(b,k){(0,i.useImperativeHandle)(k,function(){return{show:function(){T(!0)}}});var Z=(0,i.useState)(!1),K=h()(Z,2),A=K[0],T=K[1],t=(0,i.useRef)();return(0,o.jsxs)(o.Fragment,{children:[b.showTriggerButton&&(0,o.jsx)(D.ZP,{onClick:function(){T(!0)},children:"\u52A0\u5165\u7F51\u7EDC"}),(0,o.jsx)(L.Z,{title:"\u9009\u62E9\u7F51\u7EDC",width:800,footer:!1,open:A,onClose:function(){return T(!1)},extra:(0,o.jsx)(d.Z,{children:(0,o.jsx)(I.Z,{onFinish:function(){var a,n;!((a=t.current)===null||a===void 0)&&a.reloadAndRest&&((n=t.current)===null||n===void 0||n.reloadAndRest())}},"create")}),children:(0,o.jsx)(P.Z,{rowKey:"Name",toolBarRender:!1,actionRef:t,columns:[{title:"\u540D\u79F0",dataIndex:"Name",render:function(a,n,x,O,g){return n.Name=="none"||n.Name=="bridge"||n.Name=="host"?(0,o.jsxs)(o.Fragment,{children:[n.Name," ",(0,o.jsx)(m.Z,{color:"blue",children:"System"})]}):(0,o.jsx)(o.Fragment,{children:a})}},{title:"\u7C7B\u578B",ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"IPAM Driver",ellipsis:!0,width:120,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4 IPAM Network",search:!1,dataIndex:["IPAM","Config",0,"Subnet"],render:function(a,n,x,O,g){return(0,o.jsxs)(d.Z,{children:[n.IPAM.Config&&n.IPAM.Config[0]&&"".concat(n.IPAM.Config[0].Subnet," - ").concat(n.IPAM.Config[0].Gateway),n.IPAM.Config&&n.IPAM.Config[1]&&"".concat(n.IPAM.Config[1].Subnet," - ").concat(n.IPAM.Config[1].Gateway)]})}},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(a,n,x,O,g){return[n.Name!="none"&&n.Name!="bridge"&&n.Name!="host"&&(0,o.jsx)(D.ZP,{type:"link",onClick:function(){b.onSelect(n),T(!1)},children:(0,o.jsx)(U.Z,{})},n.Id)]}}],request:function(){var _=u()(r()().mark(function a(n,x,O){var g;return r()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,W.jR)({name:n.Name});case 2:return g=C.sent,C.abrupt("return",{data:g.data.list,success:!0,total:g.data.list.length});case 4:case"end":return C.stop()}},a)}));return function(a,n,x){return _.apply(this,arguments)}}(),pagination:{pageSize:10}})})]})});p.Z=M},78498:function(w,p,e){e.d(p,{Z:function(){return h}});var R=e(25035),r=e(42075),f=e(83062),u=e(67294),l=e(85893);function h(i){return(0,l.jsxs)(r.Z,{children:[i.title,(0,l.jsx)(f.Z,{title:i.help,children:(0,l.jsx)(R.Z,{})})]})}},78451:function(w,p,e){e.d(p,{Z:function(){return f}});var R=e(67294),r=e(85893);function f(u){return(0,r.jsx)("span",{style:{width:u.width?u.width:"auto",wordBreak:"break-word"},children:u.content})}},50070:function(w,p,e){e.r(p),e.d(p,{AppDetailContext:function(){return I},default:function(){return o}});var R=e(15009),r=e.n(R),f=e(99289),u=e.n(f),l=e(5574),h=e.n(l),i=e(24963),W=e(60335),U=e(55809),P=e(82346),D=e(25593),L=e(50136),d=e(67294),m=e(85893),I=(0,d.createContext)({});function o(){var M,b=(0,d.useContext)(i.Z),k=b.lang,Z=b.loading,K=b.message,A=(0,P.useParams)(),T=(0,P.useSearchParams)(),t=h()(T,2),_=t[0],a=t[1],n=(M=_.get("tab"))!==null&&M!==void 0?M:"edit",x=(0,d.useState)("edit"),O=h()(x,2),g=O[0],$=O[1],C=(0,P.useNavigate)(),G=(0,d.useState)(1),V=h()(G,2),S=V[0],B=V[1],s=[{label:(0,m.jsx)(P.Link,{to:"/app/detail/edit/".concat(A.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,m.jsx)(P.Link,{to:"/app/detail/network/".concat(A.id,"?tab=network"),children:"\u7F51\u7EDC\u7BA1\u7406"}),key:"network"},{label:(0,m.jsx)(D.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){K.info(k("app.detail.createExplorerPlugin")),C("/app/detail/file/".concat(A.id,"?tab=file"))}},{label:(0,m.jsx)(D.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){C("/app/detail/log/".concat(A.id,"?tab=log"))}},{label:(0,m.jsx)(D.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){C("/app/detail/stat/".concat(A.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,m.jsx)(U.Z,{}),disabled:!0}],j=(0,d.useState)(s),v=h()(j,2),y=v[0],N=v[1];(0,d.useEffect)(function(){Z.show(),$(n);var c=function(){var J=u()(r()().mark(function X(){var Y,Q,z;return r()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return Q=s,H.next=3,(0,W.jV)({md5:(Y=A.id)!==null&&Y!==void 0?Y:""});case 3:z=H.sent,Q.map(function(F){return F.key=="containerName"&&(F.label=z.data.info.Name),(!z.data.info.State.Running||z.data.info.State.Restarting)&&(F.key=="file"||F.key=="stat")&&(F.disabled=!0),F}),N(Q),Z.destroy();case 7:case"end":return H.stop()}},X)}));return function(){return J.apply(this,arguments)}}();c()},[S]);var E=function(J){$(J.key)};return(0,m.jsxs)(I.Provider,{value:{reload:function(){B(S+1)}},children:[(0,m.jsx)(L.Z,{mode:"horizontal",onClick:E,selectedKeys:[g],items:y}),(0,m.jsx)(P.Outlet,{})]})}},77812:function(w,p,e){e.r(p),e.d(p,{default:function(){return U}});var R=e(5574),r=e.n(R),f=e(67294),u=e(60335),l=e(82346),h=e(50070),i=e(43831),W=e(85893);function U(){var P=(0,l.useParams)(),D=(0,f.useState)(),L=r()(D,2),d=L[0],m=L[1],I=(0,f.useContext)(h.AppDetailContext);return(0,f.useEffect)(function(){var o;(0,u.jV)({md5:(o=P.id)!==null&&o!==void 0?o:""}).then(function(M){m(M.data.info)}),I.reload()},[]),d&&(0,W.jsx)(i.Z,{containerInfo:d})}},60335:function(w,p,e){e.d(p,{IE:function(){return W},IW:function(){return h},KK:function(){return m},LJ:function(){return o},RF:function(){return Z},Re:function(){return b},aF:function(){return A},eE:function(){return L},jV:function(){return P}});var R=e(15009),r=e.n(R),f=e(99289),u=e.n(f),l=e(82346);function h(t){return i.apply(this,arguments)}function i(){return i=u()(r()().mark(function t(_){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/container/status",{method:"POST",data:_}));case 1:case"end":return n.stop()}},t)})),i.apply(this,arguments)}function W(t){return U.apply(this,arguments)}function U(){return U=u()(r()().mark(function t(_){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/container/get-list",{data:_,method:"POST"}));case 1:case"end":return n.stop()}},t)})),U.apply(this,arguments)}function P(t){return D.apply(this,arguments)}function D(){return D=u()(r()().mark(function t(_){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/container/get-detail",{data:_,method:"POST"}));case 1:case"end":return n.stop()}},t)})),D.apply(this,arguments)}function L(t){return d.apply(this,arguments)}function d(){return d=u()(r()().mark(function t(_){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/container/update",{data:_,method:"POST"}));case 1:case"end":return n.stop()}},t)})),d.apply(this,arguments)}function m(){return I.apply(this,arguments)}function I(){return I=u()(r()().mark(function t(){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,l.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return a.stop()}},t)})),I.apply(this,arguments)}function o(t){return M.apply(this,arguments)}function M(){return M=u()(r()().mark(function t(_){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/container/export",{method:"POST",data:_,responseType:"blob"}));case 1:case"end":return n.stop()}},t)})),M.apply(this,arguments)}function b(t){return k.apply(this,arguments)}function k(){return k=u()(r()().mark(function t(_){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/container/commit",{method:"POST",data:_}));case 1:case"end":return n.stop()}},t)})),k.apply(this,arguments)}function Z(t){return K.apply(this,arguments)}function K(){return K=u()(r()().mark(function t(_){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/container/upgrade",{method:"POST",data:_}));case 1:case"end":return n.stop()}},t)})),K.apply(this,arguments)}function A(t){return T.apply(this,arguments)}function T(){return T=u()(r()().mark(function t(_){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/container/copy",{method:"POST",data:_}));case 1:case"end":return n.stop()}},t)})),T.apply(this,arguments)}}}]);
