"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2902],{80821:function(b,o,e){e.d(o,{Z:function(){return j}});var f=e(97857),_=e.n(f),d=e(5574),r=e.n(d),u=e(24963),p=e(86738),E=e(83062),g=e(28036),v=e(67294),C=e(85893);function j(n){var l=(0,v.useState)(!1),M=r()(l,2),P=M[0],O=M[1],c=(0,v.useContext)(u.Z),s=c.lang,T=c.message,U=function(){O(!0);var A=n.action();A instanceof Promise?A.then(function(D){if(O(!1),D){typeof n.onSuccess=="function"&&n.onSuccess(D);var a="";n.messageSuccess?typeof n.messageSuccess=="function"?a=n.messageSuccess(D):a=n.messageSuccess.indexOf("notification.")==0?s(n.messageSuccess):n.messageSuccess:a=s("notification.finish"),n.asynced?T.info(a):T.success(a)}}).catch(function(D){O(!1),typeof n.onError=="function"&&n.onError(D)}):O(!1)};return n.confirm?(0,C.jsx)(p.Z,_()(_()({style:{width:500},title:n.confirmTitle?n.confirmTitle:s("notification.title.tip"),description:typeof n.confirm=="string"&&n.confirm.indexOf("notification.")==0?s(n.confirm):n.confirm,onConfirm:U,okText:"Yes",cancelText:"No",onOpenChange:n.confirmOnOpenChange},n.confirmProps),{},{children:(0,C.jsx)(E.Z,{title:n.tips,children:(0,C.jsx)(g.ZP,{block:n.block,disabled:n.disabled,icon:!n.children&&P?void 0:n.icon,loading:P,danger:n.danger,type:n.type,children:n.children})})})):(0,C.jsx)(E.Z,{title:n.tips,children:(0,C.jsx)(g.ZP,{block:n.block,style:n.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:n.disabled,icon:!n.children&&P?void 0:n.icon,loading:P,onClick:U,danger:n.danger,type:n.type,children:n.children})})}},78498:function(b,o,e){e.d(o,{Z:function(){return p}});var f=e(25035),_=e(42075),d=e(83062),r=e(67294),u=e(85893);function p(E){return(0,u.jsxs)(_.Z,{children:[E.title,(0,u.jsx)(d.Z,{title:E.help,children:(0,u.jsx)(f.Z,{})})]})}},78451:function(b,o,e){e.d(o,{Z:function(){return d}});var f=e(67294),_=e(85893);function d(r){return(0,_.jsx)("span",{style:{width:r.width?r.width:"auto",wordBreak:"break-word"},children:r.content})}},3616:function(b,o,e){e.d(o,{Ed:function(){return r},FK:function(){return _},R_:function(){return f},ob:function(){return d}});var f=window.innerWidth<=1024?"90vw":"65vw",_="90vw",d="60vw",r="50vh"},24963:function(b,o,e){var f=e(67294),_=(0,f.createContext)({});o.Z=_},50070:function(b,o,e){e.r(o),e.d(o,{AppDetailContext:function(){return T},default:function(){return U}});var f=e(15009),_=e.n(f),d=e(99289),r=e.n(d),u=e(5574),p=e.n(u),E=e(1699),g=e(24963),v=e(13822),C=e(36146),j=e(55809),n=e(90078),l=e(82346),M=e(25593),P=e(28036),O=e(50136),c=e(67294),s=e(85893),T=(0,c.createContext)({});function U(){var W,A=(0,c.useContext)(g.Z),D=A.loading,a=(0,l.useParams)(),i=(0,l.useSearchParams)(),m=p()(i,2),t=m[0],ee=m[1],G=(W=t.get("tab"))!==null&&W!==void 0?W:"edit",V=(0,c.useState)("edit"),x=p()(V,2),z=x[0],k=x[1],L=(0,l.useNavigate)(),H=(0,c.useState)(1),Z=p()(H,2),$=Z[0],J=Z[1],w=[{label:(0,s.jsx)(l.Link,{to:"/app/detail/edit/".concat(a.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,s.jsx)(l.Link,{to:"/app/detail/network/".concat(a.id,"?tab=network"),children:"\u7F51\u7EDC\u7BA1\u7406"}),key:"network"},{label:(0,s.jsx)(M.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){L("/app/detail/file/".concat(a.id,"?tab=file"))}},{label:(0,s.jsx)(M.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){L("/app/detail/log/".concat(a.id,"?tab=log"))}},{label:(0,s.jsx)(M.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){L("/app/detail/stat/".concat(a.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,s.jsx)(j.Z,{}),disabled:!0}],Y=(0,c.useState)(w),F=p()(Y,2),Q=F[0],X=F[1];(0,c.useEffect)(function(){D.show(),k(G);var y=function(){var B=r()(_()().mark(function N(){var K,S,I;return _()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return K=w,h.prev=1,h.next=4,(0,v.jV)({md5:(S=a.id)!==null&&S!==void 0?S:""});case 4:I=h.sent,K.map(function(R){return R.key=="containerName"&&(R.label=I.data.info.Name),(!I.data.info.State.Running||I.data.info.State.Restarting)&&(R.key=="file"||R.key=="stat")&&(R.disabled=!0),R}),X(K),h.next=13;break;case 9:return h.prev=9,h.t0=h.catch(1),L("/app/list"),h.abrupt("return");case 13:return h.prev=13,D.destroy(),h.finish(13);case 16:case"end":return h.stop()}},N,null,[[1,9,13,16]])}));return function(){return B.apply(this,arguments)}}();y()},[$,a]);var q=function(B){k(B.key)};return(0,s.jsx)(T.Provider,{value:{reload:function(){J($+1)}},children:(0,s.jsxs)(n._z,{header:{extra:[(0,s.jsx)(E.u,{access:"canSeeContainerListManageCreate",children:(0,s.jsx)(l.Link,{to:"/app/create/image",children:(0,s.jsx)(P.ZP,{type:"primary",children:C.Ob.format("container.create")})})},"create")]},children:[(0,s.jsx)(O.Z,{mode:"horizontal",onClick:q,selectedKeys:[z],items:Q}),(0,s.jsx)(l.Outlet,{})]})})}},77812:function(b,o,e){e.r(o),e.d(o,{default:function(){return v}});var f=e(5574),_=e.n(f),d=e(67294),r=e(13822),u=e(82346),p=e(50070),E=e(43831),g=e(85893);function v(){var C=(0,u.useParams)(),j=(0,d.useState)(),n=_()(j,2),l=n[0],M=n[1],P=(0,d.useContext)(p.AppDetailContext);return(0,d.useEffect)(function(){var O;(0,r.jV)({md5:(O=C.id)!==null&&O!==void 0?O:""}).then(function(c){M(c.data.info)}),P.reload()},[]),l&&(0,g.jsx)(E.Z,{containerInfo:l})}},13822:function(b,o,e){e.d(o,{IE:function(){return g},IW:function(){return p},KK:function(){return M},LJ:function(){return O},RF:function(){return U},Re:function(){return s},aF:function(){return A},eE:function(){return n},jV:function(){return C}});var f=e(15009),_=e.n(f),d=e(99289),r=e.n(d),u=e(82346);function p(a){return E.apply(this,arguments)}function E(){return E=r()(_()().mark(function a(i){return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/status",{method:"POST",data:i}));case 1:case"end":return t.stop()}},a)})),E.apply(this,arguments)}function g(a){return v.apply(this,arguments)}function v(){return v=r()(_()().mark(function a(i){return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/get-list",{data:i,method:"POST"}));case 1:case"end":return t.stop()}},a)})),v.apply(this,arguments)}function C(a){return j.apply(this,arguments)}function j(){return j=r()(_()().mark(function a(i){return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/get-detail",{data:i,method:"POST"}));case 1:case"end":return t.stop()}},a)})),j.apply(this,arguments)}function n(a){return l.apply(this,arguments)}function l(){return l=r()(_()().mark(function a(i){return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/update",{data:i,method:"POST"}));case 1:case"end":return t.stop()}},a)})),l.apply(this,arguments)}function M(){return P.apply(this,arguments)}function P(){return P=r()(_()().mark(function a(){return _()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,u.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return m.stop()}},a)})),P.apply(this,arguments)}function O(a){return c.apply(this,arguments)}function c(){return c=r()(_()().mark(function a(i){return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/export",{method:"POST",data:i,responseType:"blob"}));case 1:case"end":return t.stop()}},a)})),c.apply(this,arguments)}function s(a){return T.apply(this,arguments)}function T(){return T=r()(_()().mark(function a(i){return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/commit",{method:"POST",data:i}));case 1:case"end":return t.stop()}},a)})),T.apply(this,arguments)}function U(a){return W.apply(this,arguments)}function W(){return W=r()(_()().mark(function a(i){return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/upgrade",{method:"POST",data:i}));case 1:case"end":return t.stop()}},a)})),W.apply(this,arguments)}function A(a){return D.apply(this,arguments)}function D(){return D=r()(_()().mark(function a(i){return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/copy",{method:"POST",data:i}));case 1:case"end":return t.stop()}},a)})),D.apply(this,arguments)}}}]);
