"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8878],{75516:function(ue,y,t){t.d(y,{Z:function(){return C}});var Z=t(89035),u=t(37476),A=t(38345),d=t(97462),m=t(62370),D=t(54006),P=t(14726),M=t(63490),T=t(78045),l=t(67294),v=t(85893);function C(h){return(0,v.jsx)(u.Y,{trigger:(0,v.jsx)(P.ZP,{type:"dashed",icon:(0,v.jsx)(Z.Z,{}),children:"Console"}),submitter:!1,children:(0,v.jsxs)(A.Z,{children:[(0,v.jsx)(d.Z,{name:["entryCmd"],children:function(o){var f=o.entryCmd,j=f?"/bin/"+f:"/bin/sh";return(0,v.jsx)(M.Z,{columns:[{title:"\u5BB9\u5668\u540D\u79F0",key:"name",dataIndex:"name",ellipsis:!0},{title:"\u5DE5\u4F5C\u76EE\u5F55",key:"workDir",dataIndex:"workDir"},{title:"\u72B6\u6001",key:"status",dataIndex:"status",width:150},{title:"\u64CD\u4F5C",key:"status",width:150,render:function(n,E,g){return(0,v.jsx)(D.Link,{to:"/console/".concat(h.container.Id,"?cmd=").concat(encodeURIComponent(j),"&workDir=").concat(encodeURIComponent(h.workDir?h.workDir:h.container.Config.WorkingDir)),target:"_blank",children:"\u767B\u5F55"})}}],dataSource:[{key:1,name:h.container.Id,status:h.container.State.Status,workDir:h.workDir?h.workDir:h.container.Config.WorkingDir}],rowKey:"key",pagination:!1})}}),(0,v.jsx)(m.Z,{name:"entryCmd",label:"Shell\u73AF\u5883\uFF08\u4EC5\u505A\u9ED8\u8BA4\u73AF\u5883\uFF0C\u767B\u5F55\u540E\u53EF\u5207\u6362\u81F3\u5176\u4ED6\u73AF\u5883\uFF09",style:{marginTop:15},initialValue:"sh",children:(0,v.jsxs)(T.ZP.Group,{children:[(0,v.jsx)(T.ZP,{value:"bash",children:"/bin/bash"}),(0,v.jsx)(T.ZP,{value:"sh",children:"/bin/sh"})]})})]})})}},80821:function(ue,y,t){t.d(y,{Z:function(){return T}});var Z=t(5574),u=t.n(Z),A=t(24963),d=t(86738),m=t(14726),D=t(83062),P=t(67294),M=t(85893);function T(l){var v=(0,P.useState)(!1),C=u()(v,2),h=C[0],H=C[1],o=(0,P.useContext)(A.Z),f=o.lang,j=o.notice,V=o.message,n=function(){H(!0),l.action().then(function(g){if(H(!1),typeof l.onSuccess=="function"&&l.onSuccess(g),l.messageSuccess){var _="";typeof l.messageSuccess=="function"?_=l.messageSuccess(g):_=l.messageSuccess,_.indexOf(".")>-1&&(_=f(_)),l.asynced?V.info(_):V.success(_)}}).catch(function(g){H(!1),typeof l.onError=="function"&&l.onError(g)})};return l.confirm?(0,M.jsx)(d.Z,{style:{width:500},title:l.confirmTitle?l.confirmTitle:f("notification.title.tip"),description:l.confirm,onConfirm:n,okText:"Yes",cancelText:"No",children:(0,M.jsx)(m.ZP,{disabled:l.disabled,icon:l.icon,loading:h,danger:l.danger,type:l.type,children:l.children})}):(0,M.jsx)(D.Z,{title:l.tips,children:(0,M.jsx)(m.ZP,{disabled:l.disabled,icon:l.icon,loading:h,onClick:n,danger:l.danger,type:l.type,children:l.children})})}},76428:function(ue,y,t){t.d(y,{Z:function(){return d}});var Z=t(25593),u=t(67294),A=t(85893);function d(m){return(0,A.jsx)(Z.Z.Text,{copyable:!0,children:m.title})}},78498:function(ue,y,t){t.d(y,{Z:function(){return D}});var Z=t(25035),u=t(42075),A=t(83062),d=t(67294),m=t(85893);function D(P){return(0,m.jsxs)(u.Z,{children:[P.title,(0,m.jsx)(A.Z,{title:P.help,children:(0,m.jsx)(Z.Z,{})})]})}},24963:function(ue,y,t){var Z=t(67294),u=(0,Z.createContext)({});y.Z=u},50479:function(ue,y,t){t.r(y),t.d(y,{default:function(){return Qe}});var Z=t(15009),u=t.n(Z),A=t(99289),d=t.n(A),m=t(5574),D=t.n(m),P=t(14946),M=t(29158),T=t(48689),l=t(38345),v=t(10641),C=t(42075),h=t(25593),H=t(83062),o=t(67294),f=t(80821),j=t(60335),V=t(78498),n=t(85893),E=(0,o.forwardRef)(function($,J){var U=(0,o.useRef)();return(0,o.useImperativeHandle)(J,function(){return{reload:function(){var b;!((b=U.current)===null||b===void 0)&&b.reloadAndRest&&U.current.reloadAndRest()}}}),(0,n.jsx)(l.Z,{title:(0,n.jsx)(M.Z,{}),subTitle:"\u5BB9\u5668\u5173\u8054\u4FE1\u606F",ghost:!0,children:(0,n.jsx)(v.Z,{scroll:{x:"max-content"},rowKey:"key",actionRef:U,pagination:!1,options:!1,columns:[{title:"\u6240\u5C5E\u7F51\u7EDC",key:"name",dataIndex:"networkName",width:300},{title:"\u5BB9\u5668\u540D\u79F0",key:"containerName",dataIndex:"containerName"},{title:(0,n.jsx)(V.Z,{title:"hostname",help:"\u63D0\u4F9B\u5BB9\u5668\u5185\u90E8\u8BBF\u95EE"}),key:"hostName",render:function(b,F,S){return F.hostName?(0,n.jsx)(C.Z,{direction:"vertical",children:F.hostName.map(function(B){if(B)return(0,n.jsx)(h.Z.Text,{copyable:!0,keyboard:!0,children:B},B)})}):(0,n.jsx)(n.Fragment,{})}},{title:"Ip",key:"ip",render:function(b,F,S,B,w){return(0,n.jsxs)(C.Z,{direction:"vertical",children:[(0,n.jsx)("span",{children:F.networkInfo.IPv4Address}),F.networkInfo.IPv6Address&&(0,n.jsx)("span",{children:F.networkInfo.IPv6Address})]})}},{title:"\u64CD\u4F5C",key:"option",width:100,render:function(b,F,S,B,w){return(0,n.jsx)(C.Z,{children:F.key!="bridge"&&F.key!="none"&&F.key!="host"&&F.networkName!=""&&(0,n.jsx)(H.Z,{title:"\u9000\u51FA\u7F51\u7EDC",children:(0,n.jsx)(f.Z,{confirm:"\u786E\u8BA4\u9000\u51FA\u8BE5\u7F51\u7EDC\uFF1F",type:"link",action:function(){var L;return(0,P.t9)({name:F.networkName,containerName:(L=$.containerName)!==null&&L!==void 0?L:""})},messageSuccess:"\u9000\u51FA\u6210\u529F",onSuccess:function(){var L,e;!((L=U.current)===null||L===void 0)&&L.reloadAndRest&&((e=U.current)===null||e===void 0||e.reloadAndRest())},children:(0,n.jsx)(T.Z,{})})})})}}],request:function(){var W=d()(u()().mark(function b(F,S,B){var w,Y;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,j.jV)({md5:$.containerName});case 2:return w=e.sent,e.next=5,(0,P._3)({name:Object.keys(w.data.info.NetworkSettings.Networks)});case 5:return Y=e.sent,e.abrupt("return",{data:Y.data.list,success:!0,total:Y.data.list.length});case 7:case"end":return e.stop()}},b)}));return function(b,F,S){return W.apply(this,arguments)}}(),search:!1,expandable:{defaultExpandAllRows:!0,expandRowByClick:!1,defaultExpandedRowKeys:["bridge"]}})})}),g=E,_=t(44771),i=t(76428),he=t(62597),te=t(43425),c=t(74842),x=t(87784),K=t(33160),r=t(30159),Ce=t(58638),xe=t(60219),Ee=t(86548),de=t(57132),Ie=t(16596),De=t(45605),Pe=t(238),ye=t(32319),Oe=t(16664),ce=t(97269),Be=t(62370),q=t(54006),me=t(96074),fe=t(84567),Ze=t(65233),G=t(14726),p=t(26412),Fe=t(66309),ge=t(93162),z=t(87662),je=t(75516),pe=t(28031),Se=t(85576),ae=t(63490),R=t(37476),ke=t(86615),Ue=t(97462),We=t(5966),Ne=t(2831);function Ke($){var J=Se.Z.useModal(),U=D()(J,2),W=U[0],b=U[1],F=(0,o.useState)(),S=D()(F,2),B=S[0],w=S[1],Y=(0,o.useRef)(),L="";return(0,o.useEffect)(function(){var e,ee;(0,Ne.aF)().then(function(Q){w(Q.data.dpanel.containerInfo)}),L=(e=localStorage.getItem("backupPath"))!==null&&e!==void 0?e:"",(ee=Y.current)===null||ee===void 0||ee.setFieldValue("backupPath",L)},[]),(0,n.jsxs)(n.Fragment,{children:[b,(0,n.jsxs)(R.Y,{modalProps:{forceRender:!0},formRef:Y,title:"\u5907\u4EFD\u5BB9\u5668\u5B58\u50A8\u5377",trigger:(0,n.jsxs)(G.ZP,{children:[(0,n.jsx)(xe.Z,{})," \u5907\u4EFD\u5B58\u50A8"]}),onFinish:function(){var e=d()(u()().mark(function ee(Q){var ie,X;return u()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return Q.backupPath&&localStorage.setItem("backupPath",Q.backupPath),ie={containerMd5:$.container.Id,backupTargetType:Q.backupTargetType,backupPath:Q.backupPath},Q.backupTargetType=="dpanel"&&B&&B.Mounts&&B.Mounts.map(function(re){re.Destination=="/dpanel"&&(ie.backupPath=re.Type=="volume"?re.Name:ie.backupPath=re.Source)}),se.next=5,(0,pe.vp)(ie);case 5:return X=se.sent,W.info({title:"\u6B63\u5728\u5907\u4EFD\u5B58\u50A8\u4E2D",content:(0,n.jsx)(l.Z,{ghost:!0,style:{paddingTop:30},children:(0,n.jsx)(ae.Z,{columns:[{title:"\u5907\u4EFD\u6587\u4EF6",key:"backup",dataIndex:"backup",width:300,render:function(Te,ve,ne){return(0,n.jsx)(h.Z.Paragraph,{ellipsis:{rows:5,expandable:!0},children:ve.backupTar})}},{title:"\u5907\u4EFD\u76EE\u5F55",key:"pathList",dataIndex:"pathList",render:function(Te,ve,ne){return ve.pathList.map(function(_e,be){return(0,n.jsx)("div",{children:_e},be)})}}],dataSource:[{key:1,backupTar:X.data.backupTar,pathList:X.data.pathList}],rowKey:"key",pagination:!1})}),closable:!0,width:800}),se.abrupt("return",!0);case 8:case"end":return se.stop()}},ee)}));return function(ee){return e.apply(this,arguments)}}(),children:[(0,n.jsx)(ke.Z.Group,{label:"\u5907\u4EFD\u76EE\u6807\u4F4D\u7F6E",name:"backupTargetType",initialValue:"dpanel",fieldProps:{defaultValue:"dpanel"},options:[{label:"DPanel \u5907\u4EFD\u76EE\u5F55\u4E2D",value:"dpanel"},{label:"\u5BBF\u4E3B\u673A\u76EE\u5F55\u4E2D",value:"host"}]}),(0,n.jsx)(Ue.Z,{name:["backupTargetType"],children:function(ee){var Q=ee.backupTargetType;return Q=="host"?(0,n.jsx)(We.Z,{label:"\u6307\u5B9A\u5BBF\u4E3B\u673A\u76EE\u5F55",tooltip:"\u8BF7\u586B\u5199\u5BBF\u4E3B\u673A\u76EE\u5F55\uFF0C\u4E0D\u5B58\u65F6\u4F1A\u65B0\u5EFA",name:"backupPath",placeholder:"/home/backup",initialValue:"/home/backup"}):(0,n.jsxs)(n.Fragment,{children:["\u5907\u4EFD\u4F4D\u4E8E DPanel \u5BB9\u5668\u4E2D\u7684 /dpanel/backup \u8DEF\u5F84 ",(0,n.jsx)(q.Link,{target:"_blank",to:"/app/detail/file/".concat(B==null?void 0:B.Id,"?tab=file&path=").concat(encodeURIComponent("/dpanel/backup")),children:"\u67E5\u770B"})]})}})]})]})}var Ae=t(78451),$e=t(24963),we=t(50070),He=t(64599),Ve=t.n(He),Ge=t(40717),Ye=t(184),ze=t(4798);function Je($){var J=(0,o.useRef)();return[(0,n.jsx)(Ye.a,{trigger:(0,n.jsx)(G.ZP,{icon:(0,n.jsx)(Ge.Z,{}),children:"\u52A0\u5165\u5DF2\u6709\u7F51\u7EDC"},"button"),width:800,formRef:J,title:"\u914D\u7F6E\u7F51\u7EDC",onFinish:function(){var U=d()(u()().mark(function W(b){var F,S,B,w,Y;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!b.network){e.next=19;break}S=Ve()(b.network),e.prev=2,S.s();case 4:if((B=S.n()).done){e.next=11;break}return w=B.value,e.next=8,(0,P.HY)({name:w.name,containerName:$.containerName,containerAlise:w.alise,ipV4:w.ipV4});case 8:Y=e.sent;case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),S.e(e.t0);case 16:return e.prev=16,S.f(),e.finish(16);case 19:return!((F=J.current)===null||F===void 0)&&F.resetFields&&J.current.resetFields(),$.onSuccess&&$.onSuccess(),e.abrupt("return",!0);case 22:case"end":return e.stop()}},W,null,[[2,13,16,19]])}));return function(W){return U.apply(this,arguments)}}(),children:(0,n.jsx)(ze.Z,{siteName:$.containerName})},"form")]}function Qe(){var $,J,U,W=(0,o.useContext)($e.Z),b=W.message,F=W.notice,S=W.loading,B=(0,o.useContext)(we.AppDetailContext),w=(0,q.useParams)(),Y=(0,o.useState)(),L=D()(Y,2),e=L[0],ee=L[1],Q=(0,o.useState)(1),ie=D()(Q,2),X=ie[0],le=ie[1],se=(0,q.useNavigate)(),re=(0,o.useRef)(),Te=(0,o.useState)({deleteImage:!1,deleteVolume:!1,deleteLink:!1}),ve=D()(Te,2),ne=ve[0],_e=ve[1],be=(0,o.useState)(""),Me=D()(be,2),Xe=Me[0],qe=Me[1],Re=(0,o.useRef)(),Le=(0,o.useRef)();return(0,o.useEffect)(function(){var s;S.show(),B.reload(),(0,j.jV)({md5:(s=w.id)!==null&&s!==void 0?s:""}).then(function(a){var O;a.data&&(a.data.info.HostConfig.NetworkMode=="host"&&a.data.info.Config.ExposedPorts&&Object.keys(a.data.info.Config.ExposedPorts).map(function(I){a.data.info.NetworkSettings.Ports[I]=[{HostIp:"0.0.0.0",HostPort:I.substring(0,I.indexOf("/"))}]}),ee(a.data.info)),(O=re.current)===null||O===void 0||O.setFieldValue("restart",a.data.info.HostConfig.RestartPolicy.Name)}).finally(function(){S.destroy()}),(0,z.pe)({groupName:"setting",name:"server"}).then(function(a){a.data.setting.value.serverIp&&qe(a.data.setting.value.serverIp)})},[X]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(l.Z,{direction:"column",gutter:[0,10],children:[(0,n.jsx)(l.Z,{title:(0,n.jsx)(te.Z,{}),subTitle:"\u72B6\u6001\u7BA1\u7406",ghost:!0,children:(0,n.jsxs)(C.Z,{wrap:!0,children:[(0,n.jsx)(f.Z,{icon:(0,n.jsx)(c.Z,{}),action:function(){var a;return(0,j.IW)({md5:(a=e==null?void 0:e.Id)!==null&&a!==void 0?a:"",operate:"start"})},messageSuccess:"\u542F\u52A8\u6210\u529F",onSuccess:function(){return le(X+1)},disabled:e&&e.State.Running||e&&e.State.Paused,children:"\u542F\u52A8"}),(0,n.jsx)(f.Z,{action:function(){var a;return(0,j.IW)({md5:(a=e==null?void 0:e.Id)!==null&&a!==void 0?a:"",operate:"stop"})},messageSuccess:"\u505C\u6B62\u6210\u529F",icon:(0,n.jsx)(x.Z,{}),onSuccess:function(){return le(X+1)},disabled:e&&e.State.Dead,children:"\u505C\u6B62"}),(0,n.jsx)(f.Z,{action:function(){var a;return(0,j.IW)({md5:(a=e==null?void 0:e.Id)!==null&&a!==void 0?a:"",operate:"restart"})},messageSuccess:"\u91CD\u542F\u6210\u529F",onSuccess:function(){return le(X+1)},icon:(0,n.jsx)(K.Z,{}),children:"\u91CD\u542F"}),(0,n.jsx)(f.Z,{action:function(){var a;return(0,j.IW)({md5:(a=e==null?void 0:e.Id)!==null&&a!==void 0?a:"",operate:"pause"})},messageSuccess:"\u6682\u505C\u6210\u529F",onSuccess:function(){return le(X+1)},icon:(0,n.jsx)(r.Z,{}),disabled:e&&!e.State.Running,children:"\u6682\u505C"}),(0,n.jsx)(f.Z,{action:function(){var a;return(0,j.IW)({md5:(a=e==null?void 0:e.Id)!==null&&a!==void 0?a:"",operate:"unpause"})},messageSuccess:"\u542F\u52A8\u6210\u529F",onSuccess:function(){return le(X+1)},icon:(0,n.jsx)(c.Z,{}),disabled:e&&!e.State.Paused,children:"\u6062\u590D"}),(0,n.jsx)(me.Z,{type:"vertical"}),e&&(0,n.jsx)(je.Z,{container:e}),(0,n.jsx)(me.Z,{type:"vertical"}),e&&(!e.Config.Labels||!e.Config.Labels["com.docker.compose.project"])&&(0,n.jsx)(f.Z,{action:function(){var a;return(0,he.Ct)({md5:(a=e==null?void 0:e.Id)!==null&&a!==void 0?a:"",deleteImage:ne.deleteImage,deleteVolume:ne.deleteVolume})},messageSuccess:"\u5220\u9664\u6210\u529F",danger:!0,type:"primary",icon:(0,n.jsx)(x.Z,{}),onSuccess:function(){return se("/app/list")},confirm:(0,n.jsxs)(C.Z,{style:{width:280},direction:"vertical",children:[(0,n.jsx)(h.Z.Text,{children:"\u5220\u9664\u5BB9\u5668\u540E\u65E0\u6CD5\u6062\u590D,\u786E\u8BA4\u5417\uFF1F"}),(0,n.jsx)(fe.Z,{name:"deleteVolume",onChange:function(a){return _e({deleteImage:ne.deleteImage,deleteVolume:a.target.checked,deleteLink:ne.deleteLink})},children:"\u5220\u9664\u5B58\u50A8\uFF1F"}),(0,n.jsx)(fe.Z,{name:"deleteImage",onChange:function(a){return _e({deleteImage:a.target.checked,deleteVolume:ne.deleteVolume,deleteLink:ne.deleteLink})},children:"\u5220\u9664\u955C\u50CF\uFF1F"}),(0,n.jsx)(fe.Z,{name:"deleteLink",onChange:function(a){return _e({deleteImage:ne.deleteVolume,deleteVolume:ne.deleteVolume,deleteLink:a.target.checked})},children:"\u5220\u9664\u5173\u8054\u5BB9\u5668\uFF1F"})]}),children:"\u5220\u9664"})]})}),(0,n.jsx)(l.Z,{title:(0,n.jsx)(te.Z,{}),subTitle:"\u5BB9\u5668\u7BA1\u7406",ghost:!0,children:(0,n.jsxs)(C.Z,{wrap:!0,children:[(0,n.jsx)(f.Z,{icon:(0,n.jsx)(Ce.Z,{}),action:function(){var a;return(0,j.LJ)({md5:(a=e==null?void 0:e.Id)!==null&&a!==void 0?a:""})},confirm:"\u5BFC\u51FA\u5BB9\u5668 Tar \u5305\u4E0D\u5305\u542B\u6302\u8F7D\u76EE\u5F55\u7684\u6570\u636E\uFF0C\u786E\u5B9A\u5417\uFF1F",onSuccess:function(a){var O=new Blob([a],{type:"application/tar"});(0,ge.saveAs)(O,(e==null?void 0:e.Id)+".tar")},messageSuccess:"\u5BFC\u51FA\u6210\u529F",children:"\u5BFC\u51FA\u5BB9\u5668"}),(0,n.jsx)(f.Z,{icon:(0,n.jsx)(xe.Z,{}),action:d()(u()().mark(function s(){var a,O,I;return u()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,(0,j.Re)({md5:(a=e==null?void 0:e.Id)!==null&&a!==void 0?a:"",name:(O=(I=Re.current)===null||I===void 0?void 0:I.getFieldValue("saveImageName"))!==null&&O!==void 0?O:e==null?void 0:e.Name});case 2:case"end":return N.stop()}},s)})),confirmTitle:"\u5C06\u5F53\u524D\u5BB9\u5668\u4FDD\u5B58\u4E3A\u955C\u50CF",confirm:(0,n.jsx)(C.Z,{style:{width:300,marginTop:"10px",paddingRight:"10px"},direction:"vertical",children:(0,n.jsx)(ce.A,{formRef:Re,submitter:!1,children:(0,n.jsx)(Be.Z,{name:"saveImageName",children:(0,n.jsx)(Ze.Z,{addonBefore:"\u955C\u50CF\u540D\u79F0"})})})}),messageSuccess:"\u4FDD\u5B58\u6210\u529F",children:"\u53E6\u5B58\u4E3A\u955C\u50CF"}),e&&(0,n.jsx)(Ke,{container:e}),(0,n.jsx)(me.Z,{type:"vertical"}),(0,n.jsx)(q.Link,{to:"/app/create/image?containerId=".concat(e==null?void 0:e.Id,"&op=update"),children:(0,n.jsx)(G.ZP,{type:"primary",icon:(0,n.jsx)(Ee.Z,{}),children:"\u7F16\u8F91\u5BB9\u5668"})}),(0,n.jsx)(q.Link,{to:"/app/create/image?containerId=".concat(e==null?void 0:e.Id,"&op=copy"),children:(0,n.jsx)(G.ZP,{icon:(0,n.jsx)(de.Z,{}),children:"\u590D\u5236"})}),(0,n.jsx)(f.Z,{icon:(0,n.jsx)(Ie.Z,{}),action:function(){var a;return(0,j.LJ)({md5:(a=e==null?void 0:e.Id)!==null&&a!==void 0?a:""})},confirm:"\u5C06\u4F1A\u62C9\u53D6\u5F53\u524D\u4F7F\u7528\u7684\u955C\u50CF\uFF0C\u91CD\u5EFA\u5BB9\u5668\u3002\u786E\u5B9A\u5417\uFF1F",onSuccess:function(a){},messageSuccess:"\u66F4\u65B0\u5BB9\u5668\u6210\u529F",children:"\u5FEB\u901F\u5347\u7EA7\u5BB9\u5668"}),(0,n.jsx)(me.Z,{type:"vertical"}),e&&(0,n.jsx)(Je,{onSuccess:function(){var a;(a=Le.current)===null||a===void 0||a.reload()},containerName:e.Name})]})}),(0,n.jsx)(l.Z,{title:(0,n.jsx)(De.Z,{}),subTitle:"\u5BB9\u5668\u72B6\u6001",ghost:!0,children:(0,n.jsxs)(p.Z,{column:1,bordered:!0,children:[(0,n.jsx)(p.Z.Item,{label:"ID",children:(0,n.jsx)(i.Z,{title:e==null?void 0:e.Id})}),(0,n.jsx)(p.Z.Item,{label:"\u5BB9\u5668\u540D\u79F0",children:(0,n.jsx)(h.Z.Text,{editable:{tooltip:"\u4FEE\u6539\u5BB9\u5668\u540D\u79F0",onChange:function(){var s=d()(u()().mark(function O(I){var k;return u()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(e!=null&&e.Id){oe.next=2;break}return oe.abrupt("return");case 2:return oe.next=4,(0,j.eE)({md5:e.Id,name:I});case 4:k=oe.sent,le(X+1),b.success("\u4FEE\u6539\u5BB9\u5668\u540D\u79F0");case 7:case"end":return oe.stop()}},O)}));function a(O){return s.apply(this,arguments)}return a}()},children:e&&e.Name})}),(0,n.jsx)(p.Z.Item,{label:(0,n.jsx)(V.Z,{title:"\u7F51\u7EDC",help:"\u9ED8\u8BA4\u7F51\u7EDC\u53EA\u652F\u6301\u901A\u8FC7ip\u8BBF\u95EE,ip\u4F1A\u968F\u7740\u5BB9\u5668\u542F\u52A8\u505C\u6B62\u6539\u53D8.\u5982\u679C\u9700\u8981\u5728\u5BB9\u5668\u5185\u4E92\u8054,\u8BF7\u901A\u8FC7\u3010\u7F16\u8F91\u7AD9\u70B9\u3011-\u3010\u6DFB\u52A0\u5173\u8054\u3011"}),children:(e==null?void 0:e.State.Running)&&(0,n.jsxs)(p.Z,{column:1,bordered:!0,children:[e.NetworkSettings.Networks&&Object.keys(e.NetworkSettings.Networks).map(function(s,a){return(0,n.jsx)(p.Z.Item,{label:s,children:s=="host"?" Host \u7F51\u7EDC\uFF0C\u4E0E\u5BBF\u4E3B\u673A\u5171\u7528\u540C\u4E00\u7F51\u7EDC":(0,n.jsxs)(C.Z,{direction:"vertical",children:[(0,n.jsx)(i.Z,{title:e==null?void 0:e.NetworkSettings.Networks[s].IPAddress}),e==null?void 0:e.NetworkSettings.Networks[s].Gateway,e==null?void 0:e.NetworkSettings.Networks[s].MacAddress]})},"1")}),e.HostConfig.ExtraHosts&&(0,n.jsx)(p.Z.Item,{label:"\u5BBF\u4E3B\u673A\u7F51\u7EDC",children:(0,n.jsx)(C.Z,{direction:"vertical",children:e.HostConfig.ExtraHosts.map(function(s){if(s.indexOf(":")>-1){var a=s.split(":");return(0,n.jsxs)(C.Z,{children:[(0,n.jsx)(i.Z,{title:a[0]})," - ",a[1]]})}})})},"1")]})}),(0,n.jsx)(p.Z.Item,{label:"\u72B6\u6001",children:e==null?void 0:e.State.Status}),(0,n.jsx)(p.Z.Item,{label:"\u521B\u5EFA\u65F6\u95F4",children:new Date(($=e==null?void 0:e.Created)!==null&&$!==void 0?$:"").toLocaleString()}),(0,n.jsx)(p.Z.Item,{label:"\u542F\u52A8\u65F6\u95F4",children:new Date((J=e==null?void 0:e.State.StartedAt)!==null&&J!==void 0?J:"").toLocaleString()}),(0,n.jsx)(p.Z.Item,{label:"\u91CD\u542F\u7B56\u7565",children:(0,n.jsx)(ce.A,{onFinish:function(){var s=d()(u()().mark(function a(O){var I;return u()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(e!=null&&e.Id){N.next=2;break}return N.abrupt("return");case 2:return N.next=4,(0,j.eE)({md5:e.Id,restart:O.restart});case 4:return I=N.sent,b.success("\u4FEE\u6539\u91CD\u542F\u7B56\u7565\u6210\u529F"),N.abrupt("return");case 7:case"end":return N.stop()}},a)}));return function(a){return s.apply(this,arguments)}}(),formRef:re,children:(0,n.jsx)(_.Z,{defaultValue:e==null?void 0:e.HostConfig.RestartPolicy.Name})})})]})}),e&&e.Mounts&&e.Mounts.length>0&&(0,n.jsx)(l.Z,{title:(0,n.jsx)(Pe.Z,{}),subTitle:"\u6301\u4E45\u5B58\u50A8\u8BE6\u60C5",ghost:!0,children:(0,n.jsx)(p.Z,{column:1,bordered:!0,children:e==null?void 0:e.Mounts.map(function(s,a){return(0,n.jsx)(p.Z.Item,{labelStyle:{width:"30%"},label:s.Type=="volume"?(0,n.jsx)(Ae.Z,{content:s.Name}):s.Source,children:(0,n.jsxs)(q.Link,{target:"_blank",to:"/app/detail/file/".concat(e.Id,"?tab=file&path=").concat(encodeURIComponent(s.Destination)),children:[s.Destination," ",(0,n.jsx)(ye.Z,{})]})},a)})})}),(0,n.jsx)(l.Z,{title:(0,n.jsx)(Oe.Z,{}),subTitle:"\u955C\u50CF\u8BE6\u60C5",ghost:!0,children:(0,n.jsxs)(p.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,n.jsx)(p.Z.Item,{label:"Image Tag",children:(0,n.jsx)(q.Link,{target:"_blank",to:"/image/detail/"+(e==null?void 0:e.Image),children:e==null?void 0:e.Config.Image})}),(0,n.jsx)(p.Z.Item,{label:"Image",children:e==null?void 0:e.Image}),(0,n.jsx)(p.Z.Item,{label:"Port",children:(0,n.jsx)(C.Z,{direction:"vertical",children:(e==null?void 0:e.NetworkSettings.Ports)&&Object.keys(e.NetworkSettings.Ports).map(function(s){var a,O=(a=e==null?void 0:e.NetworkSettings.Ports[s])!==null&&a!==void 0?a:[{HostPort:null,HostIp:""}];return O.map(function(I){var k=Xe;return k!=""&&k.indexOf(":")>-1&&(k="[".concat(k,"]")),k==""&&I.HostIp=="::"&&(k="[::1]"),k==""&&I.HostIp=="0.0.0.0"&&(k="127.0.0.1"),k==""&&(k=I.HostIp),(0,n.jsxs)(C.Z.Compact,{children:[(0,n.jsxs)(Fe.Z,{color:I.HostPort?"success":"",children:[I.HostPort?"".concat(I.HostIp,":").concat(I.HostPort," ->"):"",s]},s),I.HostPort?(0,n.jsx)("a",{href:"http://".concat(k,":").concat(I.HostPort),target:"_blank",children:(0,n.jsx)(M.Z,{})}):""]})})})})}),(0,n.jsx)(p.Z.Item,{label:"CMD",children:(e==null?void 0:e.Config.Cmd)&&(e==null?void 0:e.Config.Cmd.join(" "))}),(0,n.jsx)(p.Z.Item,{label:"ENTRYPOINT",children:e==null?void 0:e.Config.Entrypoint}),(0,n.jsx)(p.Z.Item,{label:"ENV",children:(0,n.jsx)(p.Z,{column:1,bordered:!0,children:(e==null?void 0:e.Config.Env)&&e.Config.Env.map(function(s,a){var O=s.split("=");return(0,n.jsx)(p.Z.Item,{label:O[0],children:(0,n.jsx)(Ae.Z,{content:O.slice(1).join("=")})},a)})})}),(0,n.jsx)(p.Z.Item,{label:"Labels",children:(0,n.jsx)(p.Z,{column:1,bordered:!0,children:e&&Object.keys(e.Config.Labels).map(function(s){return(0,n.jsx)(p.Z.Item,{label:s,children:(0,n.jsx)(h.Z.Text,{style:{width:"400px"},ellipsis:{tooltip:e.Config.Labels[s]},children:e.Config.Labels[s]})},s)})})})]})}),(e==null?void 0:e.Name)&&(0,n.jsx)(g,{containerName:(U=e==null?void 0:e.Name)!==null&&U!==void 0?U:"",ref:Le})]})})}},50070:function(ue,y,t){t.r(y),t.d(y,{AppDetailContext:function(){return j},default:function(){return V}});var Z=t(15009),u=t.n(Z),A=t(99289),d=t.n(A),m=t(5574),D=t.n(m),P=t(24963),M=t(2831),T=t(60335),l=t(41123),v=t(54006),C=t(86738),h=t(25593),H=t(50136),o=t(67294),f=t(85893),j=(0,o.createContext)({});function V(){var n,E=(0,o.useContext)(P.Z),g=E.lang,_=E.loading,i=(0,v.useParams)(),he=(0,v.useSearchParams)(),te=D()(he,2),c=te[0],x=te[1],K=(n=c.get("tab"))!==null&&n!==void 0?n:"edit",r=(0,o.useState)("edit"),Ce=D()(r,2),xe=Ce[0],Ee=Ce[1],de=(0,v.useNavigate)(),Ie=(0,o.useState)(1),De=D()(Ie,2),Pe=De[0],ye=De[1],Oe=(0,v.useAccess)(),ce=[{label:(0,f.jsx)(v.Link,{to:"/app/detail/edit/".concat(i.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,f.jsx)(v.Link,{to:"/app/detail/domain/".concat(i.id,"?tab=domain"),children:"\u57DF\u540D\u7BA1\u7406"}),key:"domain"},{label:(0,f.jsx)(C.Z,{style:{width:500},title:g("notification.title.tip"),description:g("app.detail.createExplorerPlugin"),onConfirm:function(){de("/app/detail/file/".concat(i.id,"?tab=file")),fe(ce.filter(function(p){return p.key!="fileConfirm"})),Ee("file")},okText:"Yes",cancelText:"No",children:(0,f.jsx)(h.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"})}),key:"fileConfirm"},{label:(0,f.jsx)(h.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){de("/app/detail/file/".concat(i.id,"?tab=file"))}},{label:(0,f.jsx)(h.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){de("/app/detail/log/".concat(i.id,"?tab=log"))}},{label:(0,f.jsx)(h.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){de("/app/detail/stat/".concat(i.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,f.jsx)(l.Z,{}),disabled:!0}],Be=(0,o.useState)(ce),q=D()(Be,2),me=q[0],fe=q[1];(0,o.useEffect)(function(){_.show(),Ee(K);var G=function(){var p=d()(u()().mark(function Fe(){var ge,z,je,pe;return u()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return z=ce,ae.next=3,(0,M.aF)();case 3:return je=ae.sent,Oe.canSeeContainerDomain||(z=z.filter(function(R){return R.key!="domain"})),je.data.plugin.explorer.isCreated||(z=z.filter(function(R){return R.key!="file"})),je.data.plugin.explorer.isCreated&&(z=z.filter(function(R){return R.key!="fileConfirm"})),ae.next=9,(0,T.jV)({md5:(ge=i.id)!==null&&ge!==void 0?ge:""});case 9:pe=ae.sent,z.map(function(R){return R.key=="containerName"&&(R.label=pe.data.info.Name),(!pe.data.info.State.Running||pe.data.info.State.Restarting)&&(R.key=="file"||R.key=="fileConfirm"||R.key=="stat")&&(R.disabled=!0),R}),fe(z),_.destroy();case 13:case"end":return ae.stop()}},Fe)}));return function(){return p.apply(this,arguments)}}();G()},[Pe]);var Ze=function(p){p.key!="fileConfirm"&&Ee(p.key)};return(0,f.jsxs)(j.Provider,{value:{reload:function(){ye(Pe+1)}},children:[(0,f.jsx)(H.Z,{mode:"horizontal",onClick:Ze,selectedKeys:[xe],items:me}),(0,f.jsx)(v.Outlet,{})]})}},28031:function(ue,y,t){t.d(y,{C4:function(){return V},LK:function(){return f},OQ:function(){return E},V9:function(){return D},Yx:function(){return C},ZU:function(){return l},_U:function(){return M},gb:function(){return H},lE:function(){return he},vp:function(){return _}});var Z=t(15009),u=t.n(Z),A=t(99289),d=t.n(A),m=t(54006);function D(c){return P.apply(this,arguments)}function P(){return P=d()(u()().mark(function c(x){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,m.request)("/api/app/explorer/get-path-list",{data:x,method:"POST"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},c)})),P.apply(this,arguments)}function M(c){return T.apply(this,arguments)}function T(){return T=d()(u()().mark(function c(x){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,m.request)("/api/app/explorer/export",{data:x,method:"POST",responseType:"blob"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},c)})),T.apply(this,arguments)}function l(c){return v.apply(this,arguments)}function v(){return v=d()(u()().mark(function c(x){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,m.request)("/api/app/explorer/import",{data:x,method:"POST"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},c)})),v.apply(this,arguments)}function C(c){return h.apply(this,arguments)}function h(){return h=d()(u()().mark(function c(x){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,m.request)("/api/app/explorer/delete",{data:x,method:"POST"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},c)})),h.apply(this,arguments)}function H(c){return o.apply(this,arguments)}function o(){return o=d()(u()().mark(function c(x){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,m.request)("/api/app/explorer/unzip",{data:x,method:"POST"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},c)})),o.apply(this,arguments)}function f(c){return j.apply(this,arguments)}function j(){return j=d()(u()().mark(function c(x){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,m.request)("/api/app/explorer/get-content",{data:x,method:"POST"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},c)})),j.apply(this,arguments)}function V(c){return n.apply(this,arguments)}function n(){return n=d()(u()().mark(function c(x){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,m.request)("/api/app/explorer/import-file-content",{data:x,method:"POST"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},c)})),n.apply(this,arguments)}function E(c){return g.apply(this,arguments)}function g(){return g=d()(u()().mark(function c(x){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,m.request)("/api/app/explorer/chmod",{data:x,method:"POST"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},c)})),g.apply(this,arguments)}function _(c){return i.apply(this,arguments)}function i(){return i=d()(u()().mark(function c(x){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,m.request)("/api/app/volume/backup",{data:x,method:"POST"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},c)})),i.apply(this,arguments)}function he(c){return te.apply(this,arguments)}function te(){return te=d()(u()().mark(function c(x){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,m.request)("/api/app/explorer/get-passwd",{data:x,method:"POST"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},c)})),te.apply(this,arguments)}},60335:function(ue,y,t){t.d(y,{IE:function(){return M},IW:function(){return D},KK:function(){return H},LJ:function(){return f},Re:function(){return V},eE:function(){return C},jV:function(){return l}});var Z=t(15009),u=t.n(Z),A=t(99289),d=t.n(A),m=t(54006);function D(E){return P.apply(this,arguments)}function P(){return P=d()(u()().mark(function E(g){return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,m.request)("/api/app/container/status",{method:"POST",data:g}));case 1:case"end":return i.stop()}},E)})),P.apply(this,arguments)}function M(E){return T.apply(this,arguments)}function T(){return T=d()(u()().mark(function E(g){return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,m.request)("/api/app/container/get-list",{data:g,method:"POST"}));case 1:case"end":return i.stop()}},E)})),T.apply(this,arguments)}function l(E){return v.apply(this,arguments)}function v(){return v=d()(u()().mark(function E(g){return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,m.request)("/api/app/container/get-detail",{data:g,method:"POST"}));case 1:case"end":return i.stop()}},E)})),v.apply(this,arguments)}function C(E){return h.apply(this,arguments)}function h(){return h=d()(u()().mark(function E(g){return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,m.request)("/api/app/container/update",{data:g,method:"POST"}));case 1:case"end":return i.stop()}},E)})),h.apply(this,arguments)}function H(){return o.apply(this,arguments)}function o(){return o=d()(u()().mark(function E(){return u()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,m.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return _.stop()}},E)})),o.apply(this,arguments)}function f(E){return j.apply(this,arguments)}function j(){return j=d()(u()().mark(function E(g){return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,m.request)("/api/app/container/export",{method:"POST",data:g,responseType:"blob"}));case 1:case"end":return i.stop()}},E)})),j.apply(this,arguments)}function V(E){return n.apply(this,arguments)}function n(){return n=d()(u()().mark(function E(g){return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,m.request)("/api/app/container/commit",{method:"POST",data:g}));case 1:case"end":return i.stop()}},E)})),n.apply(this,arguments)}}}]);
