"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1050],{1699:function($,k,n){n.d(k,{u:function(){return w}});var K=n(9783),h=n.n(K),V=n(97857),M=n.n(V),H=n(67294),S=n(82346),W=n(40411),f=n(42075),L=n(85893),w=function(T){var Y=(0,S.useAccess)(),o=Array.isArray(T.access)?T.access:[T.access],R,p=T.fallback;if(typeof T.children=="function"?(R=T.children(o.reduce(function(B,F){return M()(M()({},B),{},h()({},F,Y[F]))},{})),R||(R=p)):o.every(function(B){return Y[B]})?R=T.children:R=p,!p&&R&&T.showProTips&&Y.canSeeEnableCe){if(Y.canSeeEnableHiddenProTips)return null;R=(0,L.jsx)(W.Z,{offset:T.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:R})}if(!p&&R&&T.showProRibbonTips&&Y.canSeeEnableCe){if(Y.canSeeEnableHiddenProTips)return null;R=(0,L.jsx)(W.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:R})}return T.space?(0,L.jsx)(f.Z,M()(M()({},T.space),{},{children:R})):R}},80821:function($,k,n){n.d(k,{Z:function(){return Y}});var K=n(97857),h=n.n(K),V=n(5574),M=n.n(V),H=n(24963),S=n(36146),W=n(86738),f=n(83062),L=n(96074),w=n(83622),e=n(67294),T=n(85893);function Y(o){var R=(0,e.useState)(!1),p=M()(R,2),B=p[0],F=p[1],A=(0,e.useContext)(H.Z),Q=A.message,I=function(){F(!0);var ce=o.action();ce instanceof Promise?ce.then(function(re){if(F(!1),re){typeof o.onSuccess=="function"&&o.onSuccess(re);var ve=S.FD.format("finish");Q.success(ve)}}).catch(function(re){F(!1),typeof o.onError=="function"&&o.onError(re)}):F(!1)};if(o.confirmProps){var P,D,x,N,ne,te,G,ae=o.confirmProps.description;return o.confirmProps.showCommonConfirm&&(ae=S.FD.format("confirm.title")),o.confirmProps.showCommonDisabled&&(ae=S.FD.format("confirm.disable")),(0,T.jsx)(W.Z,h()(h()({},o.confirmProps),{},{style:{width:500},title:(P=o.confirmProps)!==null&&P!==void 0&&P.title?(D=o.confirmProps)===null||D===void 0?void 0:D.title:S.FD.format("title.tip"),description:ae,onConfirm:I,okText:"Yes",cancelText:"No",children:(0,T.jsxs)(f.Z,{title:o.tips,children:[o.showDivider&&(0,T.jsx)(L.Z,{type:"vertical",style:{marginRight:15}}),(0,T.jsx)(w.ZP,h()(h()({},o.buttonProps),{},{ghost:((x=o.buttonProps)===null||x===void 0?void 0:x.ghost)&&((N=o.buttonProps)===null||N===void 0?void 0:N.type)!=="link",style:(ne=o.buttonProps)!==null&&ne!==void 0&&ne.ghost?h()(h()({},o.buttonProps.style),{},{padding:0,width:"auto"}):h()({},(te=o.buttonProps)===null||te===void 0?void 0:te.style),icon:!o.children&&B||(G=o.buttonProps)===null||G===void 0?void 0:G.icon,loading:B,children:o.children}))]})}))}else{var q,ee,se,le,de;return(0,T.jsxs)(f.Z,{title:o.tips,children:[o.showDivider&&(0,T.jsx)(L.Z,{type:"vertical",style:{marginRight:15}}),(0,T.jsx)(w.ZP,h()(h()({},o.buttonProps),{},{ghost:((q=o.buttonProps)===null||q===void 0?void 0:q.ghost)&&((ee=o.buttonProps)===null||ee===void 0?void 0:ee.type)!=="link",style:(se=o.buttonProps)!==null&&se!==void 0&&se.ghost?h()(h()({},o.buttonProps.style),{},{padding:0,width:"auto"}):h()({},(le=o.buttonProps)===null||le===void 0?void 0:le.style),icon:!o.children&&B||(de=o.buttonProps)===null||de===void 0?void 0:de.icon,loading:B,onClick:I,children:o.children}))]})}}},44349:function($,k,n){var K=n(97857),h=n.n(K),V=n(15009),M=n.n(V),H=n(99289),S=n.n(H),W=n(74763),f=n(17186),L=n(5966),w=n(86250),e=n(67294),T=n(85893),Y=(0,e.forwardRef)(function(o,R){var p=(0,e.useRef)();(0,e.useImperativeHandle)(R,function(){return{addItem:function(F){function A(Q,I,P){return F.apply(this,arguments)}return A.toString=function(){return F.toString()},A}(function(F,A,Q){var I,P=(I=p.current)===null||I===void 0?void 0:I.getList(),D;if(P==null||P.forEach(function(ne,te){ne[F]==A[F]&&(D=te)}),!(0,W.k)(D)&&Q){var x;(x=p.current)===null||x===void 0||x.remove(D),D=void 0}if(!D){var N;(N=p.current)===null||N===void 0||N.add(A)}}),removeItemByKey:function(A,Q){return S()(M()().mark(function I(){var P,D;return M()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return D=(P=p.current)===null||P===void 0?void 0:P.getList(),D==null||D.forEach(function(ne,te){if(ne[A]==Q){var G;(G=p.current)===null||G===void 0||G.remove(te);return}}),N.abrupt("return");case 3:case"end":return N.stop()}},I)}))()},clear:function(A){if(!A){var Q;A=(Q=p.current)===null||Q===void 0||(Q=Q.getList())===null||Q===void 0?void 0:Q.map(function(P,D){return D})}if(A){var I;(I=p.current)===null||I===void 0||I.remove(A)}},getList:function(){var A;return(A=p.current)===null||A===void 0?void 0:A.getList()}}});var B={};return o.hideCopyButton===!0&&(B.copyIconProps=!1),o.hideDeleteButton===!0&&(B.deleteIconProps=!1),(0,T.jsx)(f.u,h()(h()({initialValue:o.initialValue,label:o.label,name:o.name,actionRef:p,creatorButtonProps:o.showAddButton?{creatorButtonText:o.label?o.label:o.showAddButtonLabel?o.showAddButtonLabel:o.name}:!1,min:o.min?o.min:0},B),{},{children:function(A,Q,I){return(0,T.jsx)(w.Z,{justify:o.justify,gap:o.gap,children:o.items.map(function(P){return P.render?(0,T.jsx)("div",{children:P.render&&P.render(A,Q,I)},"".concat(o.name,"-").concat(P.name,"-").concat(A.key)):(0,T.jsx)(L.Z,{width:P.width,name:P.name,label:P.label,required:P.required,rules:[{required:P.required}],disabled:P.disabled,placeholder:P.placeholder},"".concat(o.name,"-").concat(P.name,"-").concat(A.key))})})}}))});k.Z=Y},2808:function($,k,n){n.d(k,{Z:function(){return W}});var K=n(97857),h=n.n(K),V=n(62370),M=n(51663),H=n(67294),S=n(85893);function W(f){return(0,S.jsx)(V.Z,h()(h()({},f),{},{children:(0,S.jsx)(M.Z,{showText:function(w){return w.toHexString()},allowClear:!0,presets:[{label:"Color",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},51100:function($,k,n){n.d(k,{Z:function(){return H}});var K=n(4813),h=n(91604),V=n(1677),M=n(85893);function H(S){return S.showDragger?(0,M.jsx)(h.Z,{max:S.max?S.max:1,title:S.title,label:S.label,required:S.required,rules:[{required:S.required}],fieldProps:{multiple:!!(S.max&&S.max>1),name:"file",accept:S.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(f){return new Promise(function(L){var w;(0,K._)({path:(w=f.response.data.path)!==null&&w!==void 0?w:""}).then(function(e){L(!0)})})},onChange:function(f){f.file.status=="done"&&S.onFinish&&S.onFinish(f.fileList)}},name:S.name}):(0,M.jsx)(V.Z,{max:S.max?S.max:1,title:S.title,label:S.label,required:S.required,rules:[{required:S.required}],fieldProps:{multiple:!!(S.max&&S.max>1),name:"file",accept:S.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(f){return new Promise(function(L){var w;(0,K._)({path:(w=f.response.data.path)!==null&&w!==void 0?w:""}).then(function(e){L(!0)})})},onChange:function(f){f.file.status=="done"&&S.onFinish&&S.onFinish(f.fileList)}},name:S.name})}},3616:function($,k,n){n.d(k,{Ed:function(){return M},FK:function(){return h},R_:function(){return K},ob:function(){return V}});var K=window.innerWidth<=1024?"90vw":"65vw",h="90vw",V="60vw",M="50vh"},12323:function($,k,n){n.d(k,{X:function(){return K},n:function(){return h}});var K={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},h=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},24963:function($,k,n){var K=n(67294),h=(0,K.createContext)({});k.Z=h},18568:function($,k,n){n.r(k),n.d(k,{default:function(){return on}});var K=n(5574),h=n.n(K),V=n(62370),M=n(97462),H=n(42075),S=n(25593),W=n(80821),f=n(36146),L=n(1699),w=n(82346),e=n(85893);function T(i){var a=(0,w.useAccess)(),c=(0,e.jsxs)(H.Z,{style:{display:"block",marginTop:40},direction:"vertical",children:[(0,e.jsx)(V.Z,{name:i.name,hidden:!0}),(0,e.jsx)(M.Z,{name:[i.name],children:function(U){var E,m=U[i.name];return(0,e.jsxs)(V.Z,{label:i.label,children:[(0,e.jsxs)(H.Z.Compact,{children:[i.disable&&(0,e.jsx)(W.Z,{confirmProps:{showCommonDisabled:!0},buttonProps:{danger:i.disable(m),type:i.disable(m)?"primary":"default"},action:function(){return i.onDisable()},onSuccess:function(){i.onFinish&&i.onFinish()},children:(E=i.disableLabel)!==null&&E!==void 0?E:f.FD.format("listManageDisable")}),i.settingComponent&&(0,e.jsx)(i.settingComponent,{data:m,onFinish:i.onFinish})]}),(0,e.jsx)(S.Z.Text,{type:"secondary",style:{marginLeft:30},children:i.tip})]})}})]});return i.isPe?(0,e.jsx)(L.u,{access:["canSeeEnableCe"],showProRibbonTips:!0,children:function(U){var E=U.canSeeEnableCe;return c}}):c}var Y=n(15009),o=n.n(Y),R=n(99289),p=n.n(R),B=n(24963),F=n(87662),A=n(86548),Q=n(97937),I=n(184),P=n(5966),D=n(83622),x=n(67294),N=n(3616),ne=function(a){var c=(0,x.useRef)(),d=(0,w.useModel)("@@initialState"),U=d.refresh,E=(0,x.useContext)(B.Z),m=E.message,_=new f.Uo("components.systemBasic"),Z=(0,x.useState)(!1),g=h()(Z,2),b=g[0],s=g[1];return(0,e.jsxs)(I.a,{trigger:(0,e.jsx)(D.ZP,{type:"primary",children:f.FD.format("listManageSetting")}),onOpenChange:function(l){var t;s(l),l&&((t=c.current)===null||t===void 0||t.setFieldValue("username",a.data.username))},open:b,drawerProps:{width:N.R_,forceRender:!0},title:_.format("founderTitle"),formRef:c,onFinish:function(){var r=p()(o()().mark(function l(t){var u,v;return o()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,F.Jn)({username:t.username,password:t.password,newPassword:t.newPassword});case 2:if(u=y.sent,!(u&&u.data)){y.next=9;break}return(v=c.current)===null||v===void 0||v.resetFields(),m.success(f.FD.format("finish")),localStorage.removeItem("token"),U(),y.abrupt("return",!0);case 9:case"end":return y.stop()}},l)}));return function(l){return r.apply(this,arguments)}}(),children:[(0,e.jsx)(M.Z,{name:["enableUsername"],children:function(l){var t=l.enableUsername;return(0,e.jsx)(P.Z,{label:_.format("founderUsername"),name:"username",width:"lg",disabled:!t,addonAfter:[(0,e.jsx)(D.ZP,{type:"link",hidden:!!t,icon:(0,e.jsx)(A.Z,{}),onClick:function(){var v;(v=c.current)===null||v===void 0||v.setFieldValue("enableUsername",!0)}},"editBtn"),(0,e.jsx)(D.ZP,{type:"link",hidden:!t,icon:(0,e.jsx)(Q.Z,{}),onClick:function(){var v;(v=c.current)===null||v===void 0||v.setFieldValue("enableUsername",!1)}},"closeBtn")]},"username")}}),(0,e.jsx)(P.Z.Password,{label:_.format("founderPassword"),name:"password",placeholder:_.format("founderPasswordEmpty"),rules:[{required:!0}]},"password"),(0,e.jsx)(P.Z.Password,{label:_.format("founderNewPassword"),name:"newPassword"},"newPasword"),(0,e.jsx)(M.Z,{name:["newPassword"],children:function(l){var t=l.newPassword;return(0,e.jsx)(P.Z.Password,{label:_.format("founderNewPassword2"),name:"newPassword2",dependencies:["newPassword"],rules:[{required:typeof t!="undefined"&&t!=""},function(u){var v=u.getFieldValue;return{validator:function(y,O){return!O||v("newPassword")===O?Promise.resolve():Promise.reject(new Error(_.format("founderMessagePasswordNotMatch")))}}}]},"newPasword2")}})]},"drawer")},te=ne,G=n(38345),ae=n(64317),q=n(52688),ee=n(86615),se=n(90672),le=n(40056),de=function(a){var c,d,U=(0,x.useContext)(B.Z),E=U.message,m=(0,x.useRef)(),_=new f.Uo("components.systemBasic"),Z=(0,x.useState)(!1),g=h()(Z,2),b=g[0],s=g[1];return(0,x.useEffect)(function(){if(m.current&&a.data){var r,l;(r=m.current)===null||r===void 0||r.setFieldsValue({loginFailedEnable:a.data.failedEnable,loginFailedTotal:a.data.failedTotal===0?5:a.data.failedTotal,loginFailedLockTime:a.data.failedLockTime?a.data.failedLockTime.toString():"900",loginNoPasswordEnable:a.data.noPasswordEnable,loginNoPasswordUrl:a.data.noPasswordUrl,loginNoPassworkUserAgent:a.data.noPasswordUserAgent,loginNoPasswordIpList:a.data.noPasswordIpList,loginDefaultRedirect:(l=a.data.defaultRedirect)!==null&&l!==void 0?l:"/home/overview"})}},[m.current]),(0,e.jsxs)(I.a,{drawerProps:{width:N.R_,destroyOnHidden:!0},trigger:(0,e.jsx)(D.ZP,{type:(c=a.data)!==null&&c!==void 0&&c.failedEnable?"primary":"default",children:(d=a.data)!==null&&d!==void 0&&d.failedEnable?f.FD.format("listManageSetting"):f.FD.format("listManageEnable")}),onOpenChange:function(l){var t;s(l),!l&&((t=m.current)===null||t===void 0||t.resetFields())},open:b,title:_.format("loginTitle"),onFinish:function(){var r=p()(o()().mark(function l(t){var u;return o()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return u={failedEnable:t.loginFailedEnable,noPasswordEnable:t.loginNoPasswordEnable,defaultRedirect:t.loginDefaultRedirect},u.failedEnable&&(u.failedTotal=parseInt(t.loginFailedTotal),u.failedLockTime=parseInt(t.loginFailedLockTime)),u.noPasswordEnable&&(u=Object.assign(u,{noPasswordUrl:t.loginNoPasswordUrl,noPasswordUserAgent:t.loginNoPasswordUserAgent,noPasswordIplist:t.loginNoPasswordIplist})),j.next=5,(0,F.bv)({login:u,saveCache:!0});case 5:s(!1),E.success(f.FD.format("finish")),a.onFinish&&a.onFinish();case 8:case"end":return j.stop()}},l)}));return function(l){return r.apply(this,arguments)}}(),formRef:m,children:[(0,e.jsx)(G.Z,{title:_.format("loginBasicTitle"),ghost:!0,children:(0,e.jsx)(L.u,{access:["canSeeEnableCe"],showProRibbonTips:!0,children:function(l){var t=l.canSeeEnableCe;return(0,e.jsx)(ae.Z,{disabled:t,label:_.format("loginBasicDefaultRedirect"),name:"loginDefaultRedirect",options:_.option("loginBasicDefaultRedirectOption",["/home/overview","/home/tag","/app/list","/compose/list","/swarm/service"])})}})}),(0,e.jsxs)(G.Z,{title:_.format("loginFailedTitle"),ghost:!0,children:[(0,e.jsx)(q.Z,{name:"loginFailedEnable"}),(0,e.jsx)(P.Z,{name:"loginFailedTotal",label:_.format("loginFailedTotal"),fieldProps:{addonAfter:f.FD.format("unitTimes")}}),(0,e.jsx)(ee.Z.Group,{name:"loginFailedLockTime",label:_.format("loginFailedLockTime"),options:_.option("loginFailedLockTimeOption",["300","900","3600","18000","-1"])})]}),(0,e.jsxs)(G.Z,{title:_.format("loginNoPasswordTitle"),hidden:!0,ghost:!0,children:[(0,e.jsx)(le.Z,{message:"\u5F00\u542F\u514D\u5BC6\u767B\u5F55\u540E\uFF0C\u9762\u677F\u540E\u53F0\u5C06\u4E0D\u9700\u8981\u767B\u5F55\u3002\u6B64\u529F\u80FD\u4EC5\u9650\u4E8E\u5728\u672C\u5730\u6216\u662F\u5185\u7F51\u4E2D\u4F7F\u7528\uFF0C\u8BF7\u8C28\u614E\u5F00\u542F\u3002",type:"warning",style:{marginBottom:15}}),(0,e.jsx)(q.Z,{name:"loginNoPasswordEnable"}),(0,e.jsx)(L.u,{access:["canSeeEnableCe"],showProRibbonTips:!0,children:function(l){var t=l.canSeeEnableCe;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(P.Z,{disabled:t,label:"\u514D\u5BC6\u767B\u5F55\u5730\u5740",name:"loginNoPasswordUrl"}),(0,e.jsx)(P.Z,{disabled:t,label:"\u514D\u5BC6\u767B\u5F55 User-Agent",name:"loginNoPasswordUserAgent"}),(0,e.jsx)(se.Z,{disabled:t,label:"\u514D\u5BC6\u767B\u5F55 IP \u767D\u540D\u5355",name:"loginNoPasswordIpWhitelist"})]})}})]})]})},xe=de;function ce(i){return re.apply(this,arguments)}function re(){return re=p()(o()().mark(function i(a){return o()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,w.request)("/api/pro/two-fa/enable",{method:"POST",data:a}));case 1:case"end":return d.stop()}},i)})),re.apply(this,arguments)}var ve=n(29104),Fe=function(a){var c,d,U=new f.Uo("components.systemBasic"),E=(0,w.useAccess)(),m=(0,x.useRef)(),_=(0,x.useContext)(B.Z),Z=_.message,g=(0,x.useState)(!1),b=h()(g,2),s=b[0],r=b[1],l=(0,w.useModel)("@@initialState"),t=l.initialState;return(0,x.useEffect)(function(){if(m.current&&!E.canSeeEnableCe&&t){var u;if(!a.data||!a.data.enable)var v=ce({email:t==null?void 0:t.user.username,enable:!1}).then(function(O){var C,z;(C=m.current)===null||C===void 0||C.setFieldValue("twoFaEmail",t.user.username),(z=m.current)===null||z===void 0||z.setFieldValue("towFaQrcode",O.data.qrCode)});else{var j,y;(j=m.current)===null||j===void 0||j.setFieldValue("twoFaEmail",a.data.email),(y=m.current)===null||y===void 0||y.setFieldValue("towFaQrcode",a.data.qrCode)}(u=m.current)===null||u===void 0||u.setFieldValue("twoFaCode","")}},[m.current]),(0,e.jsx)(I.a,{drawerProps:{width:N.R_,destroyOnHidden:!0},trigger:(0,e.jsx)(D.ZP,{disabled:E.canSeeEnableCe,style:{width:90},type:(c=a.data)!==null&&c!==void 0&&c.enable?"primary":"default",children:(d=a.data)!==null&&d!==void 0&&d.enable?f.FD.format("listManageSetting"):f.FD.format("listManageEnable")}),onOpenChange:function(){var u=p()(o()().mark(function v(j){var y;return o()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:r(j),!j&&((y=m.current)===null||y===void 0||y.resetFields());case 2:case"end":return C.stop()}},v)}));return function(v){return u.apply(this,arguments)}}(),open:s,title:U.format("twoFaTitle"),onFinish:function(){var u=p()(o()().mark(function v(j){var y;return o()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(E.canSeeEnableCe){C.next=4;break}return C.next=3,ce({email:j.twoFaEmail,enable:!0,code:j.twoFaCode});case 3:y=C.sent;case 4:Z.success(f.FD.format("finish")),r(!1),a.onFinish&&a.onFinish();case 7:case"end":return C.stop()}},v)}));return function(v){return u.apply(this,arguments)}}(),formRef:m,children:(0,e.jsx)(L.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(v){var j=v.canSeeEnableCe;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(P.Z,{label:U.format("twoFaEmail"),name:"twoFaEmail",disabled:!0,placeholder:U.format("twoFaEmailEmpty")}),(0,e.jsx)(P.Z,{label:"\u9A8C\u8BC1\u7801",name:"twoFaCode",required:!0,disabled:j,rules:[{required:!0}]}),(0,e.jsx)(V.Z,{label:U.format("twoFaQrcode"),tooltip:U.format("twoFaQrcodeTip"),shouldUpdate:!0,children:function(O){var C=O.getFieldValue("towFaQrcode");return C&&(0,e.jsx)(ve.Z,{style:{border:"#d1d9e0b3 solid 1px",padding:"10px",borderRadius:"10px"},width:200,src:"data:image/png;base64,".concat(C)})}})]})}})})},Te=Fe,Ue=n(29177),we=n(74453),Oe=n(97269),Me=n(86125);function De(i){var a=(0,w.useModel)("@@initialState"),c=a.initialState,d=(0,w.useAccess)(),U=(0,x.useContext)(B.Z),E=U.message,m=(0,w.useAntdConfigSetter)(),_=new f.Uo("components.systemBasic"),Z=(0,x.useState)(!1),g=h()(Z,2),b=g[0],s=g[1],r=(0,x.useRef)();return(0,x.useEffect)(function(){if(r.current){var l,t,u,v,j,y,O,C;(l=r.current)===null||l===void 0||l.setFieldsValue({algorithm:(t=c==null?void 0:c.theme.algorithm)!==null&&t!==void 0?t:"default",mainMenu:(u=c==null?void 0:c.theme.mainMenu)!==null&&u!==void 0?u:"top",compact:(v=c==null?void 0:c.theme.compact)!==null&&v!==void 0?v:"default",fontSize:(j=c==null?void 0:c.theme.fontSize)!==null&&j!==void 0?j:14,fontSizeConsole:(y=c==null?void 0:c.theme.fontSizeConsole)!==null&&y!==void 0?y:12,sideMenu:(O=c==null?void 0:c.theme.sideMenu)!==null&&O!==void 0?O:"default",tablePageSize:(C=c==null?void 0:c.theme.tablePageSize)!==null&&C!==void 0?C:"20"})}},[c,r.current]),(0,e.jsxs)(I.a,{formRef:r,drawerProps:{width:N.R_,destroyOnHidden:!0},onOpenChange:function(t){var u;s(t),!t&&((u=r.current)===null||u===void 0||u.resetFields())},open:b,trigger:(0,e.jsx)(D.ZP,{type:"primary",children:f.FD.format("listManageSetting")}),onFinish:function(){var l=p()(o()().mark(function t(u){var v;return o()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(v={algorithm:u.algorithm,mainMenu:u.mainMenu,sideMenu:u.sideMenu,compact:u.compact,fontSizeConsole:u.fontSizeConsole,fontSize:u.fontSize,tablePageSize:u.tablePageSize},!(u.algorithm!=(c==null?void 0:c.theme.algorithm)&&!d.canSeeEnableCe)){y.next=4;break}return y.next=4,(0,F.GV)({groupName:"setting",name:"themeUserConfig"});case 4:return localStorage.setItem("dpanel-theme",u.algorithm),localStorage.setItem("dpanel-compact",u.compact),localStorage.setItem("dpanel-pagesize",u.tablePageSize),y.next=9,(0,F.bv)({theme:v});case 9:E.success(f.FD.format("finishTheme")),s(!1),i.onFinish&&i.onFinish();case 12:case"end":return y.stop()}},t)}));return function(t){return l.apply(this,arguments)}}(),children:[(0,e.jsx)(ee.Z.Group,{name:"algorithm",label:_.format("themeConfigAlgorithm"),initialValue:"default",radioType:"button",options:_.option("themeConfigAlgorithmOption",["default","dark","system"]),fieldProps:{onChange:function(t){t.target.value=="system"&&E.warning("\u4E3B\u9898\u76AE\u80A4\u914D\u7F6E\u4E3A\u8DDF\u968F\u7CFB\u7EDF\u540E\uFF0C\u5C06\u4F1A\u6E05\u7A7A\u81EA\u5B9A\u4E49\u4E3B\u9898\u98CE\u683C")}}}),(0,e.jsx)(ee.Z.Group,{name:"mainMenu",label:_.format("themeConfigMainMenu"),initialValue:"top",radioType:"button",options:_.option("themeConfigMainMenuOption",["top","side"])}),(0,e.jsx)(ee.Z.Group,{name:"sideMenu",label:_.format("themeConfigSideMenu"),initialValue:"default",radioType:"button",options:_.option("themeConfigSideMenuOption",["default","collapse"])}),(0,e.jsx)(ee.Z.Group,{name:"compact",label:_.format("themeConfigCompact"),initialValue:"default",radioType:"button",options:_.option("themeConfigCompactOption",["default","compact"])}),(0,e.jsx)(V.Z,{name:"fontSize",label:_.format("themeConfigFontSize"),initialValue:14,children:(0,e.jsx)(Me.Z,{step:2,max:30,min:8,marks:{8:"8",10:"10",12:"12",14:"14",16:"16",20:"20",26:"26"}})}),(0,e.jsx)(ae.Z,{initialValue:"20",label:_.format("themeConfigTablePageSize"),name:"tablePageSize",options:_.option("themeConfigTablePageSizeOption",["5","10","20","50","100","all"])})]})}var J=n(24739),Ze=n(25054),oe=n(31199),Le=n(21532),_e=n(86250),Be=n(44349);function Ie(i){return be.apply(this,arguments)}function be(){return be=p()(o()().mark(function i(a){return o()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,w.request)("/api/pro/theme/save-theme-user-config",{method:"POST",data:a});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i)})),be.apply(this,arguments)}var Re=n(2808),fe=n(51100),Ae=n(96486),We=n.n(Ae),ue={colorPrimary:"",colorTextBase:"",colorLink:"",colorBgContainer:"",colorBorder:"",colorBgElevated:"",colorBorderSecondary:"colorBorder"},Se=["borderRadius","wireframe"],ke=function(a){var c=(0,w.useAccess)(),d=(0,x.useRef)(),U=(0,x.useContext)(B.Z),E=U.message,m=new f.Uo("components.systemBasic"),_=(0,x.useState)(!1),Z=h()(_,2),g=Z[0],b=Z[1],s=function(l){return(0,e.jsx)(Re.Z,{name:l.name,label:m.format("themeUserConfigOption.".concat(l.name)),tooltip:l.tooltip})};return(0,x.useEffect)(function(){if(!c.canSeeEnableCe&&d.current&&a.data){var r,l;if((r=d.current)===null||r===void 0||r.resetFields(["bgImageUpload","siteLogoUpload"]),Se.forEach(function(v){if(a.data&&a.data.token&&a.data.token[v]){var j,y;(j=d.current)===null||j===void 0||j.setFieldValue("enableStyle",!0),(y=d.current)===null||y===void 0||y.setFieldValue(v,a.data.token[v])}}),(l=d.current)===null||l===void 0||l.setFieldsValue({siteLogo:a.data.siteLogo,siteTitle:a.data.siteTitle,siteCopyright:a.data.siteCopyright,siteLink:a.data.siteLink,bgImage:a.data.bgImage,loginLogo:a.data.loginLogo}),!a.data.bgImage||!a.data.bgImage.width||a.data.bgImage.width=="100%"){var t;(t=d.current)===null||t===void 0||t.setFieldValue("bgSize","full")}else{var u;(u=d.current)===null||u===void 0||u.setFieldValue("bgSize","default")}Object.keys(ue).map(function(v){var j=v;ue[v]!=""&&(j=ue[v]),d!=null&&d.current&&a.data&&a.data.token&&!We().isEmpty(a.data.token)&&(d==null||d.current.setFieldValue("enableColor",!0),d==null||d.current.setFieldValue(v,a.data.token[j]))})}},[d.current]),(0,e.jsx)(Le.ZP,{children:(0,e.jsxs)(I.a,{trigger:(0,e.jsx)(D.ZP,{disabled:c.canSeeEnableCe,type:"primary",children:f.FD.format("listManageSetting")}),drawerProps:{width:N.R_},onOpenChange:function(l){var t;b(l),!l&&((t=d.current)===null||t===void 0||t.resetFields())},open:g,title:m.format("themeUserConfigTitle"),formRef:d,onFinish:function(){var r=p()(o()().mark(function l(t){var u,v,j;return o()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!c.canSeeEnableCe){O.next=2;break}return O.abrupt("return",!1);case 2:return j={token:{},bgImage:t.bgImage,siteLink:t.siteLink,siteTitle:(u=t.siteTitle)!==null&&u!==void 0?u:"",siteCopyright:t.siteCopyright,siteLogo:(v=t.siteLogo)!==null&&v!==void 0?v:"",loginLogo:t.loginLogo},t.siteLogoUpload&&t.siteLogoUpload.length>0&&(j.siteLogo=t.siteLogoUpload[0].response.data.path),j.bgImage||(j.bgImage={}),t.bgImageUpload&&t.bgImageUpload.length>0&&(j.bgImage.src=t.bgImageUpload[0].response.data.path),j.bgImage.width=t.bgSize=="full"?"100%":"",t.loginLogoUpload&&t.loginLogoUpload.length>0&&(j.loginLogo=t.loginLogoUpload[0].response.data.path),Object.keys(ue).map(function(C){j.token||(j.token={});var z=C;ue[C]!=""&&(z=ue[C]);var X=d.current&&d.current.getFieldValue(z);X&&X.toHexString?X.cleared||(j.token[C]=X.toHexString()):j.token[C]=X}),Se.map(function(C){j.token||(j.token={});var z=d.current&&d.current.getFieldValue(C);j.token[C]=z}),O.next=12,Ie(j);case 12:return a.onFinish&&a.onFinish(),E.success(f.FD.format("finishTheme")),O.abrupt("return",!0);case 15:case"end":return O.stop()}},l)}));return function(l){return r.apply(this,arguments)}}(),children:[(0,e.jsx)(J.UW,{title:m.format("themeUserConfigColorTitle"),extra:(0,e.jsx)(q.Z,{name:"enableColor"})}),(0,e.jsx)(M.Z,{name:["enableColor"],children:function(l){var t=l.enableColor;return t&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(J.UW,{children:s({name:"colorPrimary",tooltip:m.format("themeUserConfigColorPrimaryTip")})}),(0,e.jsxs)(J.UW,{children:[s({name:"colorBgContainer"}),s({name:"colorBgElevated"})]}),(0,e.jsxs)(J.UW,{children:[s({name:"colorTextBase"}),s({name:"colorLink"}),s({name:"colorBorder"})]})]})}}),(0,e.jsx)(J.UW,{title:m.format("themeUserConfigStyleTitle"),extra:(0,e.jsx)(q.Z,{name:"enableStyle"})}),(0,e.jsx)(M.Z,{name:["enableStyle"],children:function(l){var t=l.enableStyle;return t&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(J.UW,{children:(0,e.jsxs)(_e.Z,{gap:40,children:[(0,e.jsx)(q.Z,{label:m.format("themeUserConfigWireframe"),name:"wireframe"}),(0,e.jsx)(Ze.Z,{min:1,max:16,label:m.format("themeUserConfigBorderRadius"),name:"borderRadius"})]})})})}}),(0,e.jsx)(J.UW,{title:m.format("themeUserConfigUiTitle")}),(0,e.jsx)(P.Z,{label:m.format("themeUserConfigSiteTitle"),name:"siteTitle",placeholder:m.format("themeUserConfigSiteTitleEmpty")}),(0,e.jsxs)(J.UW,{children:[(0,e.jsx)(fe.Z,{label:"Logo",title:m.format("themeUserConfigSiteLogoUploadTitle"),name:"siteLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(P.Z,{width:"md",placeholder:m.format("themeUserConfigSiteLogoEmpty"),label:m.format("themeUserConfigSiteLogo"),name:"siteLogo"})]}),(0,e.jsxs)(J.UW,{children:[(0,e.jsx)(fe.Z,{label:m.format("themeUserConfigBgImageUpload"),title:m.format("themeUserConfigBgImageUploadTitle"),name:"bgImageUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(P.Z,{width:"md",placeholder:m.format("themeUserConfigSiteLogoEmpty"),label:m.format("themeUserConfigBgImageSrc"),name:["bgImage","src"]}),(0,e.jsx)(ee.Z.Group,{name:"bgSize",label:m.format("themeUserConfigBgImageBgSize"),initialValue:"full",options:m.option("themeUserConfigBgImageBgSizeOption",["full","default"])})]}),(0,e.jsx)(J.UW,{children:(0,e.jsx)(M.Z,{name:["bgSize"],children:function(l){var t=l.bgSize;if(t=="default")return(0,e.jsxs)(J.UW,{children:[(0,e.jsx)(oe.Z,{width:"xs",name:["bgImage","top"],label:m.format("themeUserConfigBgImageTop")}),(0,e.jsx)(oe.Z,{width:"xs",name:["bgImage","bottom"],label:m.format("themeUserConfigBgImageBottom")}),(0,e.jsx)(oe.Z,{width:"xs",name:["bgImage","left"],label:m.format("themeUserConfigBgImageLeft")}),(0,e.jsx)(oe.Z,{width:"xs",name:["bgImage","right"],label:m.format("themeUserConfigBgImageRight")})]})}})}),(0,e.jsx)(Be.Z,{name:"siteLink",label:m.format("themeUserConfigSiteLink"),showAddButton:!0,hideCopyButton:!0,gap:10,items:m.option("themeUserConfigSiteLinkOption",["title","href"]).map(function(r){return{name:r.value,label:r.label}})}),(0,e.jsx)(se.Z,{label:m.format("themeUserConfigSiteCopyright"),name:"siteCopyright"}),(0,e.jsxs)(J.UW,{title:m.format("themeUserConfigUiLoginTitle"),children:[(0,e.jsx)(fe.Z,{label:"Logo",title:"Logo",name:"loginLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(P.Z,{width:"md",placeholder:m.format("themeUserConfigSiteLogoEmpty"),label:m.format("themeUserConfigLoginLogo"),name:"loginLogo"})]})]})})},Ke=ke,Ne=n(19400),pe=n(2487),Ve=n(4393),ze=n(71230),He=n(15746),Ge=n(40411),Pe=n(12323),Qe=n(64304),he=n.n(Qe);function Ye(i){var a=new f.Uo("components.systemBasic"),c=(0,w.useAccess)(),d=(0,x.useContext)(B.Z),U=d.message,E=(0,x.useState)(),m=h()(E,2),_=m[0],Z=m[1],g=(0,x.useState)(),b=h()(g,2),s=b[0],r=b[1],l=(0,x.useRef)(),t=(0,x.useState)(!1),u=h()(t,2),v=u[0],j=u[1];return(0,x.useEffect)(function(){if(l.current&&i.data){var y,O,C=Pe.X;i.data&&Object.assign(C,i.data),!c.canSeeEnableCe&&i.data&&(y=i.data)!==null&&y!==void 0&&y.themeName&&i.data.themeName!=""&&Object.keys(he()).forEach(function(z,X){i.data&&z==i.data.themeName&&(r(Math.ceil((X+1)/36)),Z(i.data.themeName))}),(O=l.current)===null||O===void 0||O.setFieldsValue({fontSize:C.fontSize,lineHeight:C.lineHeight,letterSpacing:C.letterSpacing,fontWeight:C.fontWeight,cursorStyle:C.cursorStyle,cursorInactiveStyle:C.cursorInactiveStyle,cursorBlink:C.cursorBlink})}},[l.current,i.data]),(0,e.jsxs)(I.a,{onOpenChange:function(O){var C;j(O),!O&&((C=l.current)===null||C===void 0||C.resetFields())},open:v,title:a.format("themeConsoleTitle"),formRef:l,drawerProps:{width:N.R_,destroyOnHidden:!0},trigger:(0,e.jsx)(D.ZP,{type:"primary",children:f.FD.format("listManageSetting")}),onFinish:function(){var y=p()(o()().mark(function O(C){var z;return o()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return z={fontSize:C.fontSize,lineHeight:C.lineHeight,letterSpacing:C.letterSpacing,fontWeight:C.fontWeight,cursorStyle:C.cursorStyle,cursorInactiveStyle:C.cursorInactiveStyle,cursorBlink:C.cursorBlink,theme:{},themeName:""},_!=""&&!c.canSeeEnableCe&&(z.theme=he()[_],z.themeName=_),ie.next=4,(0,F.bv)({console:z});case 4:return U.success(f.FD.format("finishTheme")),j(!1),i.onFinish&&i.onFinish(),ie.abrupt("return",!0);case 8:case"end":return ie.stop()}},O)}));return function(O){return y.apply(this,arguments)}}(),children:[(0,e.jsx)(J.UW,{title:a.format("themeConsoleFont"),children:(0,e.jsxs)(_e.Z,{gap:50,children:[(0,e.jsx)(oe.Z,{label:a.format("themeConsoleFontSize"),name:"fontSize",tooltip:a.format("themeConsoleFontSizeTip"),fieldProps:{addonAfter:"px"}}),(0,e.jsx)(oe.Z,{label:a.format("themeConsoleLineHeight"),name:"lineHeight",tooltip:a.format("themeConsoleLineHeightTip"),fieldProps:{addonAfter:a.format("themeConsoleLineHeightUnit")}}),(0,e.jsx)(oe.Z,{label:a.format("themeConsoleLetterSpacing"),name:"letterSpacing",fieldProps:{addonAfter:"px"},tooltip:a.format("themeConsoleLetterSpacingTip")}),(0,e.jsx)(ae.Z,{label:a.format("themeConsoleFontWeight"),name:"fontWeight",options:[{label:"normal",value:"normal"},{label:"bold",value:"bold"},{label:"100",value:"100"},{label:"200",value:"200"},{label:"300",value:"300"},{label:"400",value:"400"},{label:"500",value:"500"},{label:"600",value:"600"},{label:"700",value:"700"},{label:"800",value:"800"},{label:"900",value:"900"}]})]})}),(0,e.jsx)(J.UW,{title:a.format("themeConsoleCursorStyleTitle"),children:(0,e.jsxs)(_e.Z,{gap:50,children:[(0,e.jsx)(ae.Z,{label:a.format("themeConsoleCursorStyle"),name:"cursorStyle",width:"sm",options:a.option("themeConsoleCursorStyleOption",["bar","underline","block"])}),(0,e.jsx)(ae.Z,{label:a.format("themeConsoleCursorInactiveStyle"),name:"cursorInactiveStyle",width:"sm",options:a.option("themeConsoleCursorStyleOption",["bar","underline","block","outline"])}),(0,e.jsx)(q.Z,{label:a.format("themeConsoleCursorBlink"),name:"cursorBlink"})]})}),(0,e.jsx)(L.u,{showProRibbonTips:!0,access:"canSeeEnableCe",children:function(O){var C=O.canSeeEnableCe;return(0,e.jsx)(G.Z,{ghost:!0,title:(0,e.jsx)(Ne.Z,{}),subTitle:a.format("themeConsoleTheme"),children:(0,e.jsx)(pe.Z,{split:!0,style:{overflow:"hidden"},grid:{column:6},pagination:{pageSize:36,current:s,onChange:function(X,ie){r(X)}},dataSource:Object.keys(he()).map(function(z){return{label:z,value:z,data:he()[z]}}),renderItem:function(X,ie){var ge=X.data,ye=(0,e.jsxs)(Ve.Z,{style:{backgroundColor:ge.background,color:ge.foreground,textAlign:"center",cursor:C?"not-allowed":"pointer",borderRadius:0},onClick:function(){if(!C){var Ee;(Ee=l.current)===null||Ee===void 0||Ee.setFieldValue("theme",X.data),Z(X.label)}},hoverable:!0,children:[(0,e.jsx)(ze.Z,{wrap:!0,gutter:[2,2],justify:"center",align:"middle",children:Pe.n.filter(function(me){return ge[me]!=""}).map(function(me){return(0,e.jsx)(He.Z,{style:{backgroundColor:ge[me],padding:8}},me)})}),(0,e.jsx)("div",{style:{paddingTop:5},children:X.label})]});return(0,e.jsx)(pe.Z.Item,{style:{margin:0},children:_==X.label?(0,e.jsx)(Ge.Z.Ribbon,{text:"Checked",children:ye}):ye},ie)}})})}})]})}var Xe=n(63434);function Je(i){var a=new f.Uo("components.systemBasic"),c=(0,x.useRef)(),d=(0,x.useState)(!1),U=h()(d,2),E=U[0],m=U[1],_=(0,x.useContext)(B.Z),Z=_.message;return(0,x.useEffect)(function(){if(c.current&&i.data){var g;(g=c.current)===null||g===void 0||g.setFieldsValue(i.data)}},[c.current,i.data]),(0,e.jsxs)(I.a,{drawerProps:{width:N.R_,destroyOnHidden:!0},trigger:(0,e.jsx)(D.ZP,{style:{width:150},type:"primary",children:f.FD.format("listManageSetting")}),onOpenChange:function(b){var s;m(b),!b&&((s=c.current)===null||s===void 0||s.resetFields())},open:E,title:a.format("notificationTitle"),onFinish:function(){var g=p()(o()().mark(function b(s){return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,F.bv)({notification:{emailServer:s.emailServer}});case 2:m(!1),Z.success(f.FD.format("finish")),i.onFinish&&i.onFinish();case 5:case"end":return l.stop()}},b)}));return function(b){return g.apply(this,arguments)}}(),formRef:c,children:[(0,e.jsx)(J.UW,{title:a.format("notificationEmailTitle")}),(0,e.jsx)(P.Z,{label:a.format("notificationEmailHost"),name:["emailServer","host"],tooltip:a.format("notificationEmailHostTip"),required:!0,rules:[{required:!0}]}),(0,e.jsx)(oe.Z,{label:a.format("notificationEmailPort"),name:["emailServer","port"],required:!0,rules:[{required:!0}],initialValue:465}),(0,e.jsx)(P.Z,{label:a.format("notificationEmailCode"),name:["emailServer","code"],width:"lg",placeholder:a.format("notificationEmailCodeTip"),required:!0,rules:[{required:!0}],addonAfter:(0,e.jsxs)(H.Z,{children:[(0,e.jsx)("a",{target:"_blank",href:"https://service.mail.qq.com/detail/0/75",children:a.format("notificationEmailCodeHelp.qq")}),(0,e.jsx)("a",{target:"_blank",href:"https://help.mail.163.com/faqDetail.do?code=d7a5dc8471cd0c0e8b4b8f4f8e49998b374173cfe9171305fa1ce630d7f67ac286624f309a1a7089",children:a.format("notificationEmailCodeHelp.163")})]})}),(0,e.jsx)(P.Z,{label:a.format("notificationEmailEmail"),name:["emailServer","email"],required:!0,rules:[{required:!0}],width:"lg",addonAfter:(0,e.jsx)(W.Z,{buttonProps:{type:"primary"},tips:a.format("notificationEmailTestTip"),action:p()(o()().mark(function g(){var b;return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,F.FB)({emailServer:(b=c.current)===null||b===void 0?void 0:b.getFieldValue("emailServer"),subject:a.format("notificationEmailTestSubject"),content:a.format("notificationEmailTestContent",{time:new Date().toISOString()})});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},g)})),children:a.format("notificationEmailTestButton")},"testEmail")}),(0,e.jsx)(L.u,{access:"canSeeEnableEe",children:(0,e.jsx)(Xe.Z.Group,{name:"status",label:a.format("notificationEmailStatus"),options:a.option("notificationEmailStatusOption",["register"])})})]})}var Ce=n(89035);function $e(i){var a=(0,x.useState)([]),c=h()(a,2),d=c[0],U=c[1],E=new f.Uo("components.systemBasic");return(0,x.useEffect)(function(){var m,_,Z;if(i.data){var g;!((m=i.data.info)===null||m===void 0)&&m.Mounts&&i.data.info.Mounts.forEach(function(t){t.Type=="volume"&&t.Name&&(g=t.Name)});var b=((_=i.data.info)===null||_===void 0||(_=_.HostConfig)===null||_===void 0?void 0:_.PortBindings)&&Object.entries(i.data.info.HostConfig.PortBindings).map(function(t){var u=h()(t,2),v=u[0],j=u[1];return j.map(function(y){return"-p ".concat(y.HostPort,":").concat(String(parseInt(v)))})}),s=!1,r=((Z=i.data.info)===null||Z===void 0||(Z=Z.HostConfig)===null||Z===void 0?void 0:Z.Binds)&&i.data.info.HostConfig.Binds.map(function(t){return t.indexOf(":/dpanel")>-1&&(s=!0),"-v ".concat(t)});if(!s){var l,g="";!((l=i.data.info)===null||l===void 0)&&l.Mounts&&i.data.info.Mounts.forEach(function(u){u.Type=="volume"&&u.Name&&(g=u.Name)}),r||(r=[]),r.push("-v "+g+":/dpanel")}i.data.info&&U(["docker stop ".concat(i.data.info.Name," && docker rm ").concat(i.data.info.Name),"docker pull ".concat(i.data.info.Config.Image),"docker run -d --name ".concat(i.data.info.Name," --restart=always ").concat(b&&b.join(" ")," ").concat(r&&r.join(" ")," ").concat(i.data.info.Config.Image),i.data.info.NetworkSettings.Networks["dpanel-local"]?"docker network connect dpanel-local ".concat(i.data.info.Name):""])}},[]),(0,e.jsx)(I.a,{drawerProps:{width:N.R_,destroyOnHidden:!0},title:E.format("upgradeTitle"),trigger:(0,e.jsx)(D.ZP,{style:{width:150},children:f.FD.format("listManageView")}),children:(0,e.jsxs)(G.Z,{direction:"column",ghost:!0,children:[(0,e.jsx)(le.Z,{message:E.format("upgradeAlertTitle"),showIcon:!0,description:(0,e.jsxs)("ol",{style:{marginLeft:"-20px"},children:[(0,e.jsx)("li",{children:E.format("upgradeAlertContent1")}),(0,e.jsx)("li",{children:E.format("upgradeAlertContent2")}),(0,e.jsx)("li",{children:E.format("upgradeAlertContent3")}),(0,e.jsx)("li",{children:(0,e.jsx)(S.Z.Text,{type:"danger",children:E.format("upgradeAlertContent4")})})]}),type:"warning",style:{marginBottom:"20px"}}),(0,e.jsxs)(G.Z,{ghost:!0,style:{paddingBottom:50},direction:"column",gutter:[10,50],children:[(0,e.jsx)(G.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(Ce.Z,{}),bodyStyle:{padding:"10px",background:"#24292f"},subTitle:(0,e.jsxs)(e.Fragment,{children:[E.format("upgradeShellRootLessTitle")," ",(0,e.jsx)("a",{href:"https://dpanel.cc/install/shell",target:"_blank",children:f.FD.format("help")})]}),children:(0,e.jsx)(S.Z.Text,{copyable:!0,style:{color:"#ffffff"},children:"sudo curl -sSL https://dpanel.cc/quick.sh -o quick.sh && sudo bash quick.sh"})}),(0,e.jsx)(G.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(Ce.Z,{}),bodyStyle:{padding:"10px",background:"#24292f"},subTitle:(0,e.jsxs)(e.Fragment,{children:[E.format("upgradeShellRootTitle")," ",(0,e.jsx)("a",{href:"https://dpanel.cc/install/shell",target:"_blank",children:f.FD.format("help")})]}),children:(0,e.jsx)(S.Z.Text,{copyable:!0,style:{color:"#ffffff"},children:"curl -sSL https://dpanel.cc/quick.sh -o quick.sh && bash quick.sh"})}),(0,e.jsx)(G.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(Ce.Z,{}),bodyStyle:{padding:"10px",background:"#24292f"},subTitle:(0,e.jsxs)(e.Fragment,{children:[E.format("upgradeDockerrunTitle")," ",(0,e.jsx)("a",{href:"https://dpanel.cc/manual/system-dpanel-upgrade",target:"_blank",children:f.FD.format("help")})]}),children:d&&d.length>0?(0,e.jsx)(S.Z.Paragraph,{copyable:!0,style:{color:"#ffffff"},children:'sudo sh -c "'.concat(d.join(" && "),'"')}):(0,e.jsx)("span",{style:{color:"#ffffff"},children:f.FD.format("systemUpgradeDPanelNotFound")})})]})]})})}var qe=n(96074),je=n(89075),en=n(93162),nn=n(27771),tn=n(5251),an=n(12119);function rn(){var i=new f.Uo("components.systemBasic"),a=(0,x.useState)(!1),c=h()(a,2),d=c[0],U=c[1],E=(0,x.useRef)(),m=(0,w.useAccess)(),_=(0,x.useState)(0),Z=h()(_,2),g=Z[0],b=Z[1];return(0,x.useEffect)(function(){E.current&&(E.current.resetFields(),!m.canSeeEnableCe&&(0,je.YQ)().then(function(s){var r;(r=E.current)===null||r===void 0||r.setFieldValue("expireTime","".concat((0,tn.NF)(s.data.expireTime)))}))},[E.current,g]),(0,e.jsxs)(I.a,{drawerProps:{width:N.R_,destroyOnHidden:!0,extra:(0,e.jsx)("a",{target:"_blank",href:"https://dpanel.cc/pro",children:f.FD.format("help")})},submitter:!1,onFinish:function(){var s=p()(o()().mark(function r(l){var t;return o()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!(l.uploadCertUpload&&(0,nn.Z)(l.uploadCertUpload))){v.next=4;break}return v.next=3,(0,je.E1)({fileName:l.uploadCertUpload[0].response.data.path});case 3:t=v.sent;case 4:return b(g+1),v.abrupt("return",!1);case 6:case"end":return v.stop()}},r)}));return function(r){return s.apply(this,arguments)}}(),formRef:E,open:d,onOpenChange:function(r){U(r)},title:i.format("proTitle"),trigger:(0,e.jsx)(D.ZP,{style:{width:150},children:f.FD.format("listManageManage")}),children:[(0,e.jsx)(le.Z,{type:"warning",message:(0,e.jsxs)(e.Fragment,{children:[i.format("proThanks")," ",(0,e.jsx)("a",{target:"_blank",href:"https://dpanel.cc/pro",children:i.format("proBuyButton")})]})}),(0,e.jsx)(qe.Z,{orientation:"center",children:(0,e.jsx)(an.Z,{})}),(0,e.jsx)(P.Z,{name:"expireTime",label:f.FD.format("listExpireAt"),readonly:!0}),(0,e.jsx)(V.Z,{children:(0,e.jsx)(D.ZP,{onClick:p()(o()().mark(function s(){var r,l;return o()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,je.$w)();case 2:r=u.sent,l=new Blob([r.data.code],{type:"text/plain"}),(0,en.saveAs)(l,"dpanel.code");case 5:case"end":return u.stop()}},s)})),block:!0,children:i.format("getMachineId")},"downloadCode")}),(0,e.jsx)(fe.Z,{showDragger:!0,required:!0,label:i.format("uploadCertUpload"),name:"uploadCertUpload",accept:".lic",onFinish:function(r){var l;(l=E.current)===null||l===void 0||l.submit()}})]})}function on(){var i=new f.Uo("components.systemBasic"),a=(0,x.useState)(0),c=h()(a,2),d=c[0],U=c[1],E=(0,x.useRef)(),m=(0,x.useContext)(B.Z),_=m.loading,Z=(0,w.useAccess)();return(0,x.useEffect)(function(){var g;_.show(),(g=E.current)===null||g===void 0||g.resetFields(),Promise.all([(0,F.pe)({groupName:"user",name:"founder"}).then(function(b){var s;(s=E.current)===null||s===void 0||s.setFieldsValue({founder:b.data})}),(0,F.pe)({groupName:"setting",name:"login"}).then(function(b){var s,r;(s=E.current)===null||s===void 0||s.setFieldsValue({login:(r=b.data)!==null&&r!==void 0?r:{}})}),!Z.canSeeEnableCe&&(0,F.pe)({groupName:"setting",name:"twoFa"}).then(function(b){var s,r;(s=E.current)===null||s===void 0||s.setFieldsValue({twoFa:(r=b.data)!==null&&r!==void 0?r:{}})}),!Z.canSeeEnableCe&&(0,F.pe)({groupName:"setting",name:"themeUserConfig"}).then(function(b){var s,r;(s=E.current)===null||s===void 0||s.setFieldsValue({themeUserConfig:(r=b.data)!==null&&r!==void 0?r:{}})}),(0,F.pe)({groupName:"setting",name:"themeConsoleConfig"}).then(function(b){var s,r;(s=E.current)===null||s===void 0||s.setFieldsValue({themeConsoleConfig:(r=b.data)!==null&&r!==void 0?r:{}})}),(0,F.pe)({groupName:"setting",name:"themeConfig"}).then(function(b){var s,r;(s=E.current)===null||s===void 0||s.setFieldsValue({themeConfig:(r=b.data)!==null&&r!==void 0?r:{}})}),(0,F.pe)({groupName:"setting",name:"notification"}).then(function(b){var s,r;(s=E.current)===null||s===void 0||s.setFieldsValue({notification:(r=b.data)!==null&&r!==void 0?r:{}})}),(0,F.d6)().then(function(b){var s,r;(s=E.current)===null||s===void 0||s.setFieldValue("upgradeScript",(r=b.data)!==null&&r!==void 0?r:{})})]).finally(function(){_.destroy()})},[d]),(0,e.jsx)(we._z,{children:(0,e.jsx)(G.Z,{children:(0,e.jsxs)(Oe.A,{layout:"horizontal",labelAlign:"left",labelCol:{xs:7,sm:6,md:5,lg:5,xl:4,xxl:3,offset:0},submitter:!1,formRef:E,children:[(0,e.jsx)(M.Z,{name:["founder"],children:function(b){var s=b.founder;return s&&(0,e.jsx)(P.Z,{label:i.format("founderTitle"),disabled:!0,width:"md",fieldProps:{prefix:(0,e.jsx)(Ue.Z,{}),value:s.username},addonAfter:(0,e.jsx)(te,{data:s,onFinish:function(){U(d+1)}}),name:"adminUsername"})}}),(0,e.jsx)(T,{label:i.format("loginTitle"),name:"login",disable:function(b){return!1},disableLabel:f.FD.format("listManageDefault"),onDisable:function(){return(0,F.GV)({groupName:"setting",name:"login"})},settingComponent:xe,onFinish:function(){U(d+1)},tip:i.format("loginTip")}),(0,e.jsx)(T,{isPe:!0,label:i.format("twoFaTitle"),name:"twoFa",disable:function(b){return!(b!=null&&b.enable)},onDisable:function(){return(0,F.GV)({groupName:"setting",name:"twoFa"})},settingComponent:Te,onFinish:function(){U(d+1)},tip:i.format("twoFaTip")}),(0,e.jsx)(T,{label:i.format("themeConfigTitle"),name:"themeConfig",disable:function(b){return!1},disableLabel:f.FD.format("listManageDefault"),onDisable:function(){return localStorage.removeItem("dpanel-theme"),localStorage.removeItem("dpanel-compact"),localStorage.removeItem("dpanel-pagesize"),(0,F.GV)({groupName:"setting",name:"themeConfig"})},settingComponent:De,onFinish:function(){window.location.reload(),U(d+1)},tip:i.format("themeConfigTip")}),(0,e.jsx)(T,{isPe:!0,label:i.format("themeUserConfigTitle"),name:"themeUserConfig",disable:function(b){return!1},disableLabel:f.FD.format("listManageDefault"),onDisable:function(){return(0,F.GV)({groupName:"setting",name:"themeUserConfig"})},settingComponent:Ke,onFinish:function(){window.location.reload(),U(d+1)},tip:i.format("themeUserConfigTip")}),(0,e.jsx)(T,{label:i.format("themeConsoleTitle"),name:"themeConsoleConfig",disable:function(b){return!1},disableLabel:f.FD.format("listManageDefault"),onDisable:function(){return(0,F.GV)({groupName:"setting",name:"themeConsoleConfig"})},settingComponent:Ye,onFinish:function(){U(d+1)},tip:i.format("themeConsoleTip")}),(0,e.jsx)(T,{label:i.format("notificationTitle"),name:"notification",onDisable:function(){return(0,F.GV)({groupName:"setting",name:"themeConsoleConfig"})},settingComponent:Je,onFinish:function(){U(d+1)},tip:i.format("notificationTip")}),(0,e.jsx)(T,{label:i.format("upgradeTitle"),name:"upgradeScript",onDisable:function(){return new Promise(function(){})},settingComponent:$e,tip:i.format("upgradeTip")}),!Z.canSeeEnableCe&&(0,e.jsx)(T,{label:i.format("proTitle"),name:"pro",onDisable:function(){return new Promise(function(){})},settingComponent:rn,tip:i.format("proTip")})]})})})}},4813:function($,k,n){n.d(k,{_:function(){return S}});var K=n(15009),h=n.n(K),V=n(99289),M=n.n(V),H=n(82346);function S(f){return W.apply(this,arguments)}function W(){return W=M()(h()().mark(function f(L){return h()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,H.request)("/api/common/attach/delete",{method:"POST",data:L});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},f)})),W.apply(this,arguments)}},89075:function($,k,n){n.d(k,{$w:function(){return S},E1:function(){return T},YQ:function(){return f},ax:function(){return w}});var K=n(15009),h=n.n(K),V=n(99289),M=n.n(V),H=n(82346);function S(){return W.apply(this,arguments)}function W(){return W=M()(h()().mark(function o(){return h()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,H.request)("/api/pro/home/get-machine-id",{method:"POST"}));case 1:case"end":return p.stop()}},o)})),W.apply(this,arguments)}function f(){return L.apply(this,arguments)}function L(){return L=M()(h()().mark(function o(){return h()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,H.request)("/api/pro/home/get-license-info",{method:"POST"}));case 1:case"end":return p.stop()}},o)})),L.apply(this,arguments)}function w(){return e.apply(this,arguments)}function e(){return e=M()(h()().mark(function o(){return h()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,H.request)("/api/pro/home/login-info",{method:"POST"}));case 1:case"end":return p.stop()}},o)})),e.apply(this,arguments)}function T(o){return Y.apply(this,arguments)}function Y(){return Y=M()(h()().mark(function o(R){return h()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",(0,H.request)("/api/pro/home/upload-license-file",{method:"POST",data:R}));case 1:case"end":return B.stop()}},o)})),Y.apply(this,arguments)}}}]);
