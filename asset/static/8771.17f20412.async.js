"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8771],{99861:function(We,le,e){var ue=e(64599),v=e.n(ue),se=e(15009),l=e.n(se),U=e(99289),L=e.n(U),C=e(5574),W=e.n(C),S=e(42119),R=e(83062),f=e(67294),j=e(92754),d=e(184),Q=e(38345),D=e(3616),ne=e(36146),H=e(68297),q=e(85893),g=(0,f.forwardRef)(function(a,p){(0,f.useImperativeHandle)(p,function(){return{start:function(){var T;return k(!0),ee((T=a.image)!==null&&T!==void 0?T:[])},finish:function(){k(!1)},pull:function(T){return k(!0),ee(T)}}});var m=(0,f.useState)(0),t=W()(m,2),b=t[0],o=t[1],c=(0,f.useRef)(),P=(0,f.useState)(!1),N=W()(P,2),u=N[0],k=N[1],h=(0,f.useState)([]),re=W()(h,2),M=re[0],K=re[1],n=new ne.Uo("components.appCompose");function ee(_){return F.apply(this,arguments)}function F(){return F=L()(l()().mark(function _(T){var je,$,de,Ie,ie,Se,Ke;return l()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:$=0,K(T),de=v()(T),te.prev=3,de.s();case 5:if((Ie=de.n()).done){te.next=15;break}return Se=Ie.value,o($),(ie=c.current)===null||ie===void 0||ie.setStart(Se),te.next=11,(0,H.Ze)({tag:Se,type:"pull"});case 11:Ke=te.sent,$++;case 13:te.next=5;break;case 15:te.next=20;break;case 17:te.prev=17,te.t0=te.catch(3),de.e(te.t0);case 20:return te.prev=20,de.f(),te.finish(20);case 23:(je=c.current)===null||je===void 0||je.setFinish(),o($),a.finishAutoHide&&k(!1);case 26:case"end":return te.stop()}},_,null,[[3,17,20,23]])})),F.apply(this,arguments)}return(0,q.jsxs)(d.a,{trigger:a.trigger,open:u,submitter:!1,title:n.format("pullImageTitle"),onOpenChange:function(){var _=L()(l()().mark(function T(je){var $,de;return l()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:k(je),je&&a.trigger&&ee(($=a.image)!==null&&$!==void 0?$:[]),je||(de=c.current)===null||de===void 0||de.close();case 3:case"end":return ie.stop()}},T)}));return function(T){return _.apply(this,arguments)}}(),drawerProps:{forceRender:!0,width:D.R_},children:[(0,q.jsx)(Q.Z,{children:M&&(0,q.jsx)(S.Z,{current:b,items:M.map(function(_,T){return{title:(0,q.jsx)(R.Z,{title:_,children:_.length>15?_.substring(0,6)+" ... "+_.substring(_.length-6):_}),key:T}})})}),(0,q.jsx)(Q.Z,{children:(0,q.jsx)(j.Z,{ref:c})})]})});le.Z=g},44771:function(We,le,e){e.d(le,{Z:function(){return W}});var ue=e(36146),v=e(38345),se=e(64317),l=e(97462),U=e(31199),L=e(86250),C=e(85893);function W(S){var R=new ue.Uo("components.appForm");return(0,C.jsx)(v.Z,{ghost:S.ghost,children:(0,C.jsxs)(L.Z,{gap:50,children:[(0,C.jsx)(se.Z,{tooltip:"".concat(R.format("createParamsDemo",{params:"--restart always"})),label:S.showLabel&&R.format("createAdvRestart"),name:["restart","name"],width:"md",initialValue:S.defaultValue?S.defaultValue:"on-failure",options:R.option("createAdvRestartOption",["no","on-failure","unless-stopped","always"])}),(0,C.jsx)(l.Z,{name:["restart"],children:function(j){var d=j.restart;return d&&d.name=="on-failure"&&(0,C.jsx)(U.Z,{width:"md",label:R.format("createAdvRestartMax"),name:["restart","maxAttempt"],initialValue:5})}})]})})}},84941:function(We,le,e){e.d(le,{Z:function(){return sr}});var ue=e(97857),v=e.n(ue),se=e(15009),l=e.n(se),U=e(19632),L=e.n(U),C=e(99289),W=e.n(C),S=e(5574),R=e.n(S),f=e(38345),j=e(62370),d=e(5966),Q=e(24739),D=e(97462),ne=e(83622),H=e(30291),q=e(92398),g=e(40056),a=e(67294),p=e(42963),m=e(51042),t=e(63434),b=e(17186),o=e(71230),c=e(15746),P=e(42075),N=e(25593),u=e(85265),k=e(92067),h=e(5251),re=e(3616),M=e(36146),K=e(89240),n=e(85893),ee=(0,a.forwardRef)(function(x,Re){var E=(0,a.useState)(!1),ce=R()(E,2),G=ce[0],me=ce[1],ge=(0,a.useRef)(),A=new M.Uo("components.appForm"),B=function(Z){return(0,n.jsxs)(f.Z,{bordered:!0,extra:Z.action,style:{marginBottom:10},children:[(0,n.jsx)(f.Z,{title:A.format("createLinkItemTitle"),ghost:!0,children:(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(c.Z,{span:6,children:(0,n.jsx)(d.Z,{label:A.format("createLinkItemName"),name:"name",width:"md",readonly:!0})}),(0,n.jsxs)(c.Z,{span:14,children:[(0,n.jsx)(d.Z,{label:A.format("createLinkItemAlise"),name:"alise",width:"md",readonly:!0,tooltip:A.format("createLinkItemAliseTip"),hidden:!0}),(0,n.jsx)(j.Z,{label:A.format("createLinkItemAlise"),tooltip:A.format("createLinkItemAliseTip"),children:(0,n.jsx)(P.Z,{direction:"vertical",children:[Z.name,Z.record.alise].map(function(w){return(0,n.jsx)(N.Z.Text,{copyable:!0,children:w})})})})]}),(0,n.jsx)(c.Z,{span:4,children:(0,n.jsx)(t.Z,{label:A.format("createLinkItemVolume"),name:"volume"})})]})}),(0,n.jsx)(f.Z,{ghost:!0,title:A.format("createLinkItemEnv"),children:(0,n.jsx)(P.Z,{direction:"vertical",children:Z.record.env&&(0,h.oZ)(Z.record.env).map(function(w,V){return(0,n.jsx)(N.Z.Text,{copyable:{icon:(0,n.jsx)(m.Z,{}),onCopy:function(){x.onAddEnv(w.name,w.value)},tooltips:[A.format("createLinkAddToEnv"),"success"]},code:!0,ellipsis:{tooltip:"".concat(w.name,"=").concat(w.value)},children:"".concat(w.name,"=").concat(w.value)},V)})},"linkEnv")})]})},Oe=function(Z){var w,V,Y=!1,y=(w=(V=ge.current)===null||V===void 0?void 0:V.getList())!==null&&w!==void 0?w:[];if(y.map(function(J){J.name==Z.name&&(Y=!0)}),!Y){var _e;(_e=ge.current)===null||_e===void 0||_e.add(Z)}};return(0,a.useImperativeHandle)(Re,function(){return{setDefaultLink:function(Z){Z&&Z.map(function(w){w.name!=""&&Oe(w)})}}}),(0,n.jsxs)(f.Z,{title:A.format("createLinkTitle"),headerBordered:!0,tooltip:"".concat(A.format("createParamsDemo",{params:"--link list"})),ghost:!0,children:[(0,n.jsx)(b.u,{name:"links",actionRef:ge,creatorButtonProps:{creatorButtonText:A.format("createLinkAddButton")},actionGuard:{beforeAddRow:function(Z,w){return me(!0),!1}},copyIconProps:!1,min:0,itemRender:function(Z,w){return(0,n.jsx)(B,{action:Z.action,name:w.record.name,record:w.record})}}),(0,n.jsx)(u.Z,{title:A.format("createLinkSelectContainer"),width:re.R_,footer:!1,open:G,onClose:function(){return me(!1)},children:(0,n.jsx)(k.Z,{onSelect:function(Z){Oe({name:(0,h.fi)(Z.Name,"/"),volume:!1,env:Z.Config.Env,alise:(0,K.zY)(Z.Name)}),me(!1)}})})]})}),F=ee,_=e(91058),T=e(10523),je=e(24796),$=e(52688),de=e(24963);function Ie(){var x=(0,a.useContext)(de.Z),Re=x.message,E=new M.Uo("components.appForm");return(0,n.jsx)(f.Z,{ghost:!0,children:(0,n.jsxs)(Q.UW,{children:[(0,n.jsx)($.Z,{fieldProps:{onChange:function(G){G&&Re.warning(E.format("createAdvRunCommandPrivilegedNotice"))}},name:"privileged",tooltip:"".concat(E.format("createParamsDemo",{params:"--privileged"})),label:E.format("createAdvRunCommandPrivileged"),initialValue:!1}),(0,n.jsx)($.Z,{name:"autoRemove",tooltip:"".concat(E.format("createParamsDemo",{params:"--rm"})),label:E.format("createAdvRunCommandAutoRemove"),initialValue:!1}),(0,n.jsx)($.Z,{fieldProps:{onChange:function(G){G&&Re.warning(E.format("createAdvRunCommandHostPidNotice"))}},tooltip:"".concat(E.format("createParamsDemo",{params:"--pid host"})),name:"hostPid",label:E.format("createAdvRunCommandHostPid"),initialValue:!1})]})})}var ie=e(62597),Se=e(82346),Ke=e(20743),Ge=(0,a.forwardRef)(function(x,Re){var E=(0,a.useRef)(),ce=(0,a.useRef)(),G=new M.Uo("components.appForm");(0,a.useImperativeHandle)(Re,function(){return{}});var me=function(A){var B,Oe,z=!1,Z=(B=(Oe=E.current)===null||Oe===void 0?void 0:Oe.getList())!==null&&B!==void 0?B:[];if(Z.map(function(V){V.name==A.name&&(z=!0)}),!z){var w;(w=E.current)===null||w===void 0||w.add(A)}};return(0,n.jsxs)(f.Z,{ghost:!0,title:G.format("createNetworkTitle"),tooltip:"".concat(G.format("createParamsDemo",{params:"--network list"})),headerBordered:!0,extra:(0,n.jsx)(P.Z,{children:x.showUseBridgeNetwork&&(0,n.jsx)($.Z,{name:"useBridgeNetwork",initialValue:!0,fieldProps:{checkedChildren:G.format("createNetworkUseBridgeNetwork"),unCheckedChildren:G.format("createNetworkUseBridgeNetwork")}},"useBridgeNetwork")}),children:[(0,n.jsx)(b.u,{name:"network",actionRef:E,creatorButtonProps:{creatorButtonText:G.format("createNetworkAddButton")},actionGuard:{beforeAddRow:function(A,B){var Oe;return(Oe=ce.current)===null||Oe===void 0||Oe.show(),!1}},copyIconProps:!1,min:0,itemRender:function(A,B){return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(Q.UW,{children:[(0,n.jsx)(d.Z,{label:G.format("createNetworkName"),name:"name",width:"md",disabled:!0,fieldProps:{value:B.record.name}}),(0,n.jsx)(d.Z,{label:G.format("createNetworkAlise"),name:"alise",tooltip:G.format("createNetworkAliseTip"),placeholder:G.format("createNetworkAliseEmpty"),disabled:B.record.name=="bridge"}),(0,n.jsx)(d.Z,{label:"IpV4",name:"ipV4",width:"md",disabled:B.record.name=="bridge",fieldProps:{addonAfter:B.record.subnet}}),B.record.subnetV6&&(0,n.jsx)(d.Z,{label:"IpV6",name:"ipV6",width:"md",disabled:B.record.name=="bridge",fieldProps:{addonAfter:B.record.subnetV6}}),(0,n.jsx)(j.Z,{label:" ",children:A.action})]})})}}),(0,n.jsx)(Ke.Z,{ref:ce,onSelect:function(A){me({name:A.Name,alise:[""],subnet:A.IPAM.Config&&A.IPAM.Config[0].Subnet,subnetV6:A.IPAM.Config&&A.IPAM.Config[1]&&A.IPAM.Config[1].Subnet})}})]})}),te=Ge,nn=e(82034),ye=e(52255),ze=e(59252),Fe=e(73813),jn=function(Re){var E=new M.Uo("components.appForm");return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(f.Z,{title:E.format("createSelfNetworkTitle"),subTitle:E.format("createSelfNetworkTitleTip"),tooltip:"".concat(E.format("createParamsDemo",{params:"--network string --ip string --ip6 string"})),ghost:!0,children:[(0,n.jsxs)(Q.UW,{children:[(0,n.jsx)(d.Z,{label:E.format("createSelfNetworkIp",{ip:"ipv4"}),name:["ipV4","address"],width:"md",tooltip:E.format("createSelfNetworkIpTip",{ip:"ipv4",example:"192.168.1.5"}),placeholder:"192.168.1.5"}),(0,n.jsx)(D.Z,{name:["ipV4"],children:function(G){var me=G.ipV4;return(0,n.jsx)(d.Z,{label:E.format("createSelfNetworkIpSubnet",{ip:"ipv4"}),name:["ipV4","subnet"],width:"md",required:me&&me.address,tooltip:E.format("createSelfNetworkIpSubnetTip",{ip:"ipv4",example:"192.168.1.0/24"}),placeholder:"192.168.1.0/24",rules:[{required:me&&me.address}]})}}),(0,n.jsx)(d.Z,{label:E.format("createSelfNetworkIpGateway",{ip:"ipv4"}),name:["ipV4","gateway"],width:"md",tooltip:E.format("createSelfNetworkIpGatewayTip",{ip:"ipv4",example:"192.168.1.1"}),placeholder:"192.168.1.1"}),(0,n.jsx)($.Z,{label:E.format("createSelfNetworkIpV6Enable"),name:"enableIpV6Address"})]}),(0,n.jsx)(D.Z,{name:["enableIpV6Address"],children:function(G){var me=G.enableIpV6Address;if(me)return(0,n.jsxs)(Q.UW,{children:[(0,n.jsx)(d.Z,{label:E.format("createSelfNetworkIp",{ip:"ipv6"}),name:["ipV6","address"],width:"md",tooltip:E.format("createSelfNetworkIpTip",{ip:"ipv6",example:"2001:db8::5"}),placeholder:"2001:db8::5"}),(0,n.jsx)(D.Z,{name:["ipV6"],children:function(A){var B=A.ipV6;return(0,n.jsx)(d.Z,{label:E.format("createSelfNetworkIpSubnet",{ip:"ipv6"}),name:["ipV6","subnet"],width:"md",required:B&&B.address,tooltip:E.format("createSelfNetworkIpSubnetTip",{ip:"ipv6",example:"2001:db8::/48"}),placeholder:"2001:db8::/48",rules:[{required:B&&B.address}]})}}),(0,n.jsx)(d.Z,{label:E.format("createSelfNetworkIpGateway",{ip:"ipv6"}),name:["ipV6","gateway"],width:"md",tooltip:E.format("createSelfNetworkIpGatewayTip",{ip:"ipv6",example:"2001:db8::1"}),placeholder:"2001:db8::1"})]})}})]})})},Ne=jn,yn=e(90672);function Tn(){var x=new M.Uo("components.appForm");return(0,n.jsx)(f.Z,{ghost:!0,title:x.format("createHookTitle"),subTitle:"",children:(0,n.jsx)(yn.Z,{label:x.format("createHookContainerCreate"),name:["hook","containerCreate"],placeholder:x.format("createHookContainerCreateTip")})})}var Zn=e(93529),Un=e(66309),Ln=e(96074),Wn=e(83062),Sn=e(64789),Nn=e(85060),In=e(78451),Bn=e(99861),kn=e(80821),Kn=e(1699),Fn=e(80271),Vn=e(47248),Hn=e(98510);function $n(x){var Re=(0,a.useState)(!1),E=R()(Re,2),ce=E[0],G=E[1],me=(0,a.useContext)(p.Z),ge=me.createFormRef,A=me.volumeListRef,B=me.createEnvRef,Oe=me.domainRef,z=new M.Uo("components.appForm");function Z(V){return w.apply(this,arguments)}function w(){return w=W()(l()().mark(function V(Y){var y,_e,J,Ce,xe,Te,Ze,ae,X,s,pe,De;return l()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.next=2,(0,Fe.YU)({md5:Y});case 2:return J=fe.sent,x.redeploy||(Ze=(Ce=ge.current)===null||Ce===void 0?void 0:Ce.getFieldsValue(),(xe=ge.current)===null||xe===void 0||xe.resetFields(),(Te=ge.current)===null||Te===void 0||Te.setFieldsValue({siteName:Ze.siteName,siteTitle:Ze.siteTitle})),J.data.info.Config.Env&&J.data.info.Config.Env.map(function(ve){var Ee,Ue=ve.split("=");(Ee=B.current)===null||Ee===void 0||Ee.addEnvItem(Ue[0],Ue.slice(1).join("="))}),(y=ge.current)===null||y===void 0||y.setFieldValue("imageName",Y),(_e=ge.current)===null||_e===void 0||_e.setFieldValue("workDir",J.data.info.Config.WorkingDir),x.redeploy||((ae=Oe.current)===null||ae===void 0||ae.setExposePort(J.data.info.Config.ExposedPorts),J.data.info.Config.Volumes?(pe=[],Object.keys(J.data.info.Config.Volumes).map(function(ve,Ee){pe.push(ve)}),(s=A.current)===null||s===void 0||s.setDefaultDestPath(pe)):(De=A.current)===null||De===void 0||De.setDefaultDestPath([]),(X=ge.current)===null||X===void 0||X.setFieldsValue({workDir:{value:"",useDefault:!0,default:J.data.info.Config.WorkingDir},user:{value:"",useDefault:!0,default:J.data.info.Config.User},command:{value:"",useDefault:!0,default:J.data.info.Config.Cmd&&J.data.info.Config.Cmd.join(" ")},entrypoint:{value:"",useDefault:!0,default:J.data.info.Config.Entrypoint&&J.data.info.Config.Entrypoint.join(" ")}})),fe.abrupt("return",!0);case 9:case"end":return fe.stop()}},V)})),w.apply(this,arguments)}return(0,a.useEffect)(function(){x.fromImageId&&Z(x.fromImageId)},[x.fromImageId]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{destroyOnHidden:!0,open:ce,width:re.R_,title:z.format("dockerImageTitle"),footer:!1,onClose:function(){G(!1)},children:(0,n.jsx)(Hn.C,{columns:[{title:"Id",dataIndex:"Id",search:!1,width:120,render:function(Y,y,_e,J,Ce){return(0,n.jsx)(In.Z,{content:y.Id.slice(7,19)})}},{title:M.FD.format("listImageName"),dataIndex:"tag",render:function(Y,y,_e,J){return(0,n.jsx)(In.Z,{content:y.RepoTags[0]})}},{title:"Digest",width:120,render:function(Y,y,_e,J,Ce){var xe=y.RepoDigests&&y.RepoDigests[0];return xe?xe.substring(xe.indexOf("@")+8).substring(0,12):(0,n.jsx)(Un.Z,{color:"warning",children:new M.Uo("components.appDetail").format("checkImageUpgradeOption.-3")})}},{title:M.FD.format("listCreatedAt"),dataIndex:"Created",search:!1,width:180,render:function(Y,y,_e,J){return(0,n.jsx)("div",{children:(0,h.ZM)(y.Created*1e3)},y.Id)},sorter:function(Y,y){return Y.Created-y.Created}},{title:M.FD.format("listManage"),valueType:"option",key:"option",width:50,render:function(Y,y,_e,J){return(0,n.jsx)(P.Z,{split:(0,n.jsx)(Ln.Z,{type:"vertical"}),children:(0,n.jsx)(kn.Z,{buttonProps:{icon:(0,n.jsx)(Sn.Z,{}),type:"link"},tips:M.FD.format("listManageUse"),action:function(){return Z(y.RepoTags[0])},onSuccess:function(){G(!1)}},"addImage")})}}],request:function(){var V=W()(l()().mark(function Y(y,_e,J){var Ce,xe,Te;return l()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return x.redeploy,ae.next=3,(0,Fe.KG)({tag:y.tag});case 3:return Ce=ae.sent,xe=0,Te=[],Ce.data.list&&(Te=Ce.data.list.flatMap(function(X){return X.RepoTags.map(function(s){var pe,De=(pe=X.RepoDigests)===null||pe===void 0?void 0:pe.find(function(Ae){var fe=Ae.split("@"),ve=R()(fe,2),Ee=ve[0],Ue=ve[1];return s.includes(Ee)});return{Key:xe++,Id:X.Id,Created:X.Created,RepoTags:[s],RepoDigests:[De]}})})),ae.abrupt("return",{data:Te,success:!0,total:Te.length});case 8:case"end":return ae.stop()}},Y)}));return function(Y,y,_e){return V.apply(this,arguments)}}(),rowKey:"Key"})},"imageTableList"),(0,n.jsxs)(P.Z.Compact,{children:[(0,n.jsx)(d.Z,{width:"lg",label:z.format("dockerImageImageName"),name:"imageName",disabled:!0,placeholder:z.format("dockerImageImageNameEmpty"),rules:[{required:!0}],required:!0}),(0,n.jsx)(j.Z,{label:" ",children:(0,n.jsx)(ne.ZP,{type:"primary",onClick:function(){return G(!0)},children:z.format("dockerImageTitle")},"showBtn")}),(0,n.jsx)(D.Z,{name:["imageName"],children:function(Y){var y=Y.imageName;if(y)return(0,n.jsx)(j.Z,{label:" ",children:(0,n.jsx)(Bn.Z,{finishAutoHide:!0,image:y?[y]:[],trigger:(0,n.jsx)(Wn.Z,{title:z.format("dockerImageUpgradeImageTip"),children:(0,n.jsx)(ne.ZP,{icon:(0,n.jsx)(Nn.Z,{}),children:z.format("dockerImageUpgradeImageButton")})})})})}}),(0,n.jsx)(j.Z,{label:" ",children:(0,n.jsx)(Vn.Z,{onFinish:function(Y){Z(Y)}},"remote")}),(0,n.jsx)(j.Z,{label:" ",children:(0,n.jsx)(D.Z,{name:["imageName"],children:function(Y){var y=Y.imageName;if(y)return(0,n.jsx)(Kn.u,{access:"canSeeEnableCe",showProTips:!0,children:function(J){var Ce=J.canSeeEnableCe;return(0,n.jsx)(Fn.Z,{imageId:y,trigger:(0,n.jsx)(ne.ZP,{disabled:Ce,children:z.format("dockerImageFileExplorer")})})}})}})})]})]})}var Gn=e(44349);function zn(){var x=new M.Uo("components.appForm");return(0,n.jsx)(f.Z,{ghost:!0,title:x.format("createDevice"),headerBordered:!0,tooltip:"".concat(x.format("createParamsDemo",{params:"--device list"})),children:(0,n.jsx)(Gn.Z,{name:"device",showAddButtonLabel:"".concat(M.FD.format("listManageAdd")).concat(x.format("createDevice")),hideCopyButton:!0,showAddButton:!0,gap:10,items:[{label:x.format("createDeviceHost"),name:"host",width:"md",placeholder:"/dev/tty0"},{label:x.format("createDeviceDest"),name:"dest",width:"md",placeholder:"/dev/tty0"}]})})}var On=e(64317);function Yn(){var x=new M.Uo("components.appForm");return(0,n.jsxs)(f.Z,{ghost:!0,children:[(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(c.Z,{span:4,children:(0,n.jsx)($.Z,{label:x.format("createGpus"),name:["gpus","enable"]})}),(0,n.jsx)(c.Z,{span:20,children:(0,n.jsx)(D.Z,{name:["gpus"],children:function(E){var ce=E.gpus;if(ce&&ce.enable)return(0,n.jsx)(On.Z,{tooltip:"".concat(x.format("createParamsDemo",{params:"--gpus 'device=0'"})),mode:"tags",label:x.format("createGpusDevice"),name:["gpus","device"],placeholder:x.format("createGpusDeviceEmpty")})}})})]}),(0,n.jsx)(D.Z,{name:["gpus"],children:function(E){var ce=E.gpus;if(ce&&ce.enable)return(0,n.jsx)(On.Z,{tooltip:"".concat(x.format("createParamsDemo",{params:"--gpus 'capabilities=compute,utility'"})),label:x.format("createGpusCap"),name:["gpus","capabilities"],mode:"multiple",fieldProps:{allowClear:!0},options:x.option("createGpusCapOption",["compute","compat32","graphics","utility","video","display"])})}})]})}var Jn=e(55730),Xn=e(27323),Qn=e(44771),qn=e(33879),er=e(96486),sn=e.n(er),nr=e(73396),Dn=e(14946),rr=e(13822),tr=e(64412),ar=e(27166),or=(0,a.forwardRef)(function(x,Re){var E,ce=(0,a.useContext)(de.Z),G=ce.notice,me=(0,Se.useAccess)(),ge=(0,a.useState)("basic"),A=R()(ge,2),B=A[0],Oe=A[1],z=new M.Uo("app"),Z=new M.Uo("components.appForm"),w=(0,a.useRef)(),V=(0,a.useRef)(),Y=(0,a.useRef)(),y=(0,a.useRef)(),_e=(0,a.useRef)(),J=(0,a.useState)(!1),Ce=R()(J,2),xe=Ce[0],Te=Ce[1],Ze=(0,a.useRef)();return(0,a.useImperativeHandle)(Re,function(){return{show:function(X){return W()(l()().mark(function s(){var pe,De,Ae,fe,ve,Ee,Ue,on,we,be,Ye,ln,un,dn,cn,mn,_n,pn,Je,fn,vn,hn,gn,Xe,Ve,r,Me,bn,Qe,Mn,Rn,qe,xn,En;return l()().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if((pe=w.current)===null||pe===void 0||pe.resetFields(),X){Pe.next=3;break}return Pe.abrupt("return");case 3:return Te(!0),(De=Ze.current)===null||De===void 0||De.loading(),Pe.prev=5,Pe.next=8,(0,ie.iE)({id:X});case 8:if(Ve=Pe.sent,r=(Ae=Ve.data.containerInfo)===null||Ae===void 0?void 0:Ae.Info,Me={info:{}},!r){Pe.next=16;break}return Pe.next=14,(0,Fe.YU)({md5:r.Image});case 14:bn=Pe.sent,Me=bn.data;case 16:return Qe=[],Pe.next=19,(0,Dn.jR)();case 19:return Mn=Pe.sent,Qe=Mn.data.list,Rn=function(i){if(!i)return{};var I=i[Ve.data.siteName];if(!I)return{};var O=Qe&&Qe.find(function(oe){return oe.Id==I.NetworkID});return{ipV4:{address:I.IPAddress,gateway:I.Gateway,subnet:O&&O.IPAM.Config&&O.IPAM.Config[0]&&O.IPAM.Config[0].Subnet},ipV6:{address:I.GlobalIPv6Address,gateway:I.IPv6Gateway,subnet:O&&O.IPAM.Config&&O.IPAM.Config[1]&&O.IPAM.Config[1].Subnet},enableIpV6Address:O&&O.IPAM.Config&&O.IPAM.Config[1],bindIpV6:!!(O&&O.IPAM.Config&&O.IPAM.Config[1])}}(r==null?void 0:r.NetworkSettings.Networks),qe=[],Pe.next=25,function(){var i=W()(l()().mark(function I(O,oe){var Le;return l()().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(!(!(oe!=null&&oe.NetworkSettings)||!(oe!=null&&oe.NetworkSettings.Networks)||!(oe!=null&&oe.NetworkSettings.Networks[O]))){he.next=2;break}return he.abrupt("return",[]);case 2:return he.next=4,(0,Dn.IS)({name:O});case 4:if(Le=he.sent,he.t0=Le.data.info.Containers,!he.t0){he.next=10;break}return he.next=9,Promise.all(Object.entries(Le.data.info.Containers).filter(function(ke){var rn=R()(ke,2),An=rn[0],tn=rn[1];return tn.Name!=O}).map(function(){var ke=W()(l()().mark(function rn(An){var tn,ir,an,en,wn,He,Pn;return l()().wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:if(tn=R()(An,2),ir=tn[0],an=tn[1],an.Name==O){$e.next=9;break}return $e.next=4,(0,rr.jV)({md5:an.Name});case 4:return wn=$e.sent,He=wn.data.info,Pn=(en=oe.HostConfig)===null||en===void 0||(en=en.VolumesFrom)===null||en===void 0?void 0:en.includes(an.Name),Pn&&He.Mounts&&qe.push.apply(qe,L()(He.Mounts.map(function(lr){var Cn;return(Cn=lr.Destination)!==null&&Cn!==void 0?Cn:""}))),$e.abrupt("return",{name:an.Name,alise:He&&(0,K.zY)(He.Name),env:He&&He.Config.Env,volume:Pn});case 9:case"end":return $e.stop()}},rn)}));return function(rn){return ke.apply(this,arguments)}}()));case 9:he.t0=he.sent;case 10:return he.abrupt("return",he.t0);case 11:case"end":return he.stop()}},I)}));return function(I,O){return i.apply(this,arguments)}}()(Ve.data.siteName,r);case 25:xn=Pe.sent,(fe=w.current)===null||fe===void 0||fe.setFieldsValue(v()({id:r==null?void 0:r.Id,siteTitle:Ve.data.siteTitle,siteName:Ve.data.siteName,hook:Ve.data.env.hook,imageName:r==null?void 0:r.Config.Image,hostname:r==null?void 0:r.Config.Hostname,privileged:r==null||(ve=r.HostConfig)===null||ve===void 0?void 0:ve.Privileged,useHostNetwork:(r==null||(Ee=r.HostConfig)===null||Ee===void 0?void 0:Ee.NetworkMode)=="host",publishAllPorts:r==null||(Ue=r.HostConfig)===null||Ue===void 0?void 0:Ue.PublishAllPorts,groupAdd:r==null||(on=r.HostConfig)===null||on===void 0?void 0:on.GroupAdd,workDir:{value:r==null?void 0:r.Config.WorkingDir,useDefault:Me.info.Config.WorkingDir==(r==null?void 0:r.Config.WorkingDir),default:Me&&Me.info.Config&&Me.info.Config.WorkingDir},user:{value:r==null?void 0:r.Config.User,useDefault:Me.info.Config.User==(r==null?void 0:r.Config.User),default:Me.info.Config.User},command:{value:r==null||(we=r.Config.Cmd)===null||we===void 0?void 0:we.join(" "),useDefault:sn().isEqual(Me.info.Config.Cmd,r==null?void 0:r.Config.Cmd),default:((be=Me.info.Config)===null||be===void 0?void 0:be.Cmd)&&Me.info.Config.Cmd.join(" ")},entrypoint:{value:r==null?void 0:r.Config.Entrypoint,useDefault:sn().isEqual(Me.info.Config.Entrypoint,r==null?void 0:r.Config.Entrypoint),default:((Ye=Me.info)===null||Ye===void 0||(Ye=Ye.Config)===null||Ye===void 0?void 0:Ye.Entrypoint)&&Me.info.Config.Entrypoint.join(" ")},shmsize:(0,K.Rk)(r==null||(ln=r.HostConfig)===null||ln===void 0?void 0:ln.ShmSize),cpus:(0,K.PD)(r==null||(un=r.HostConfig)===null||un===void 0?void 0:un.NanoCpus),memory:(0,K.pM)(r==null||(dn=r.HostConfig)===null||dn===void 0?void 0:dn.Memory),environment:(r==null?void 0:r.Config.Env)&&(0,h.oZ)(r.Config.Env,"="),label:function(i){return i&&Object.entries(i).map(function(I){var O=R()(I,2),oe=O[0],Le=O[1];return{name:oe,value:Le}})}(r==null?void 0:r.Config.Labels),volumes:function(i){return i==null?void 0:i.filter(function(I){var O;return!qe||qe.length==0||!qe.includes((O=I.Destination)!==null&&O!==void 0?O:"")}).map(function(I){return{host:I.Type=="bind"?I.Source:I.Name,dest:I.Destination,type:I.Type,permission:I.RW?"write":"readonly"}})}(r==null?void 0:r.Mounts),ports:(0,K.yi)(r),links:xn,network:function(i){return i&&Object.entries(i).map(function(I){var O=R()(I,2),oe=O[0],Le=O[1],Be=Qe&&Qe.find(function(ke){return ke.Name==oe}),he="";return Le.Aliases&&Le.Aliases.forEach(function(ke){if(!ke.includes("pod.dpanel.local")){he=ke;return}}),{name:oe,alise:he,ipV4:Le.IPAddress,subnet:"".concat(Be&&Be.IPAM.Config&&Be!==null&&Be!==void 0&&Be.IPAM.Config[0]?Be==null?void 0:Be.IPAM.Config[0].Subnet:"-","/").concat(Le.IPPrefixLen)}})}(r==null?void 0:r.NetworkSettings.Networks),restart:function(i){return i?{name:i==null?void 0:i.Name,maxAttempt:i==null?void 0:i.MaximumRetryCount}:{name:"no"}}(r==null||(cn=r.HostConfig)===null||cn===void 0?void 0:cn.RestartPolicy),extraHosts:(0,h.oZ)(r==null||(mn=r.HostConfig)===null||mn===void 0?void 0:mn.ExtraHosts,":"),autoRemove:r==null||(_n=r.HostConfig)===null||_n===void 0?void 0:_n.AutoRemove,log:function(i,I){return{driver:(I=i==null?void 0:i.Type)!==null&&I!==void 0?I:"json-file",maxFile:(i==null?void 0:i.Config)&&i.Config["max-file"],maxSize:(i==null?void 0:i.Config)&&i.Config["max-size"]}}(r==null||(pn=r.HostConfig)===null||pn===void 0?void 0:pn.LogConfig),dns:r==null||(Je=r.HostConfig)===null||Je===void 0||(Je=Je.Dns)===null||Je===void 0?void 0:Je.join(`
`),gpus:function(i){var I=i==null?void 0:i.find(function(oe){return oe.Driver=="nvidia"});if(!I)return{enable:!1};var O=I.Capabilities&&I.Capabilities[0];return{device:I.DeviceIDs,capabilities:O&&O.includes("gpu")?[]:O,enable:!0}}(r==null||(fn=r.HostConfig)===null||fn===void 0?void 0:fn.DeviceRequests),device:function(i){return i==null?void 0:i.map(function(I){return{host:I.PathOnHost,dest:I.PathInContainer}})}(r==null||(vn=r.HostConfig)===null||vn===void 0?void 0:vn.Devices),hostPid:(r==null||(hn=r.HostConfig)===null||hn===void 0?void 0:hn.PidMode)=="host",capAdd:r==null||(gn=r.HostConfig)===null||gn===void 0?void 0:gn.CapAdd,healthcheck:function(i,I,O){if(!i)return{};var oe=i!=null&&(I=i.Test)!==null&&I!==void 0&&I.includes("CMD-SHELL")?"CMD-SHELL":"CMD";return{interval:(i==null?void 0:i.Interval)&&i.Interval/ie.nL.Second,timeout:(i==null?void 0:i.Timeout)&&i.Timeout/ie.nL.Second,retries:i==null?void 0:i.Retries,cmd:i!=null&&i.Test?i==null||(O=i.Test)===null||O===void 0?void 0:O.slice(1).join(" "):"",shellType:oe}}(r==null?void 0:r.Config.Healthcheck),useBridgeNetwork:function(i){return!!(i&&i.bridge)}(r==null?void 0:r.NetworkSettings.Networks),enableBindHost:r==null||(Xe=r.HostConfig)===null||Xe===void 0||(Xe=Xe.ExtraHosts)===null||Xe===void 0?void 0:Xe.some(function(i){return i.includes(":host-gateway")})},Rn));case 27:return Pe.prev=27,(En=Ze.current)===null||En===void 0||En.finish(),Pe.finish(27);case 30:case"end":return Pe.stop()}},s,null,[[5,,27,30]])}))()}}}),(0,n.jsx)(p.Z.Provider,{value:{createFormRef:w,volumeListRef:V,domainRef:Y,createEnvRef:_e,createLinkRef:y},children:(0,n.jsx)(ar.Z,{title:M.Ob.format("container.create"),trigger:x.showTrigger?(0,n.jsx)(ne.ZP,{type:"primary",disabled:!me.canSeeContainerListManageCreate,children:M.Ob.format("container.create")}):void 0,drawerProps:{forceRender:!0,width:re.R_,rootClassName:"createAppWapper"},ref:Ze,formRef:w,onFinish:function(){var ae=W()(l()().mark(function X(s){var pe,De,Ae,fe,ve,Ee,Ue;return l()().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:if((pe=Ze.current)===null||pe===void 0||pe.loading(),Ee={id:s.id,siteTitle:s.siteTitle,siteName:s.siteName,hostname:s.hostname,imageName:s.imageName,environment:s.environment,links:s.links,ports:s.ports,volumes:s.volumes,network:s.network&&s.network.map(function(be){return sn().isArray(be.alise)||(be.alise=[be.alise]),be}),privileged:(De=s.privileged)!==null&&De!==void 0?De:!1,autoRemove:(Ae=s.autoRemove)!==null&&Ae!==void 0?Ae:!1,restartPolicy:s.restart,cpus:s.cpus,memory:s.memory,shmsize:(fe=s.shmsize)!==null&&fe!==void 0?fe:0,workDir:s.workDir&&!s.workDir.useDefault?s.workDir.value:"",user:s.user&&!s.user.useDefault?s.user.value:"",groupAdd:s.groupAdd,command:s.command&&!s.command.useDefault?s.command.value:"",entrypoint:s.entrypoint&&!s.entrypoint.useDefault?s.entrypoint.value:"",useHostNetwork:s.useHostNetwork,bindIpV6:s.bindIpV6,log:s.log,dns:s.dns,label:s.label,publishAllPorts:s.publishAllPorts,extraHosts:s.extraHosts,ipV4:s.ipV4,ipV6:s.ipV6,device:s.device,gpus:s.gpus,hook:s.hook,hostPid:s.hostPid,capAdd:s.capAdd,useBridgeNetwork:(ve=s.useBridgeNetwork)!==null&&ve!==void 0?ve:!0},!(!s.useBridgeNetwork&&!s.useHostNetwork&&(!s.network||s.network.length==0))){we.next=5;break}return G.error(z.format("createMessageNoBridgeNetworkMustHasUseNetwork")),we.abrupt("return",!1);case 5:return s.useBridgeNetwork&&Ee.network&&!Ee.network.find(function(be){return be.name=="bridge"})&&Ee.network.push({name:"bridge",alise:[],ipV4:""}),s.healthcheck&&s.healthcheck.cmd&&s.healthcheck.cmd!=""&&(Ee.healthcheck=s.healthcheck),we.next=9,(0,ie.$G)(Ee).finally(function(){var be;(be=Ze.current)===null||be===void 0||be.finish()});case 9:return Ue=we.sent,x.onFinish&&x.onFinish(Ue.data.containerId),we.abrupt("return",!0);case 12:case"end":return we.stop()}},X)}));return function(X){return ae.apply(this,arguments)}}(),open:xe,onOpenChange:function(X){var s;Te(X),!X&&((s=w.current)===null||s===void 0||s.resetFields())},children:(0,n.jsxs)(f.Z,{direction:"column",gutter:[0,10],ghost:!0,children:[(0,n.jsxs)(f.Z,{ghost:!0,title:z.format("createTitle"),children:[(0,n.jsx)(j.Z,{hidden:!0,name:"id"}),(0,n.jsx)(d.Z,{name:"siteTitle",label:z.format("createSiteTitle"),placeholder:z.format("createSiteTitleEmpty")}),(0,n.jsxs)(Q.UW,{children:[(0,n.jsx)(d.Z,{width:"md",name:"siteName",label:z.format("createSiteName"),required:!0,rules:[{required:!0}],tooltip:"".concat(Z.format("createParamsDemo",{params:"--name string"})),placeholder:z.format("createSiteNameEmpty")}),(0,n.jsx)(d.Z,{label:"Hostname",name:"hostname",width:"md",tooltip:"".concat(Z.format("createParamsDemo",{params:"--hostname string"}))})]}),(0,n.jsx)($n,{redeploy:(E=w.current)===null||E===void 0?void 0:E.getFieldValue("id"),fromImageId:""})]}),(0,n.jsx)(H.Z,{offsetTop:10,target:function(){return document.querySelector(".createAppWapper .ant-drawer-body")},children:(0,n.jsx)(f.Z,{style:{margin:-20},children:(0,n.jsx)(q.Z,{activeKey:B,onChange:function(X){Oe(X)},items:Z.option("createTabOption",["basic","link","run-command","resource","cap"]).map(function(ae){return{label:ae.label,key:ae.value}})})})}),(0,n.jsxs)(ye.Z,{show:B=="basic",children:[(0,n.jsx)(nn.Z,{ref:Y,showBindHost:!0,showBindIpV6:!0,showBindAll:!0}),(0,n.jsx)(_.Z,{showAddButton:!0,showImportButton:!0,showCodeMode:!0,ref:_e,drawerProps:{title:Z.format("createEnvTitle"),tooltip:"".concat(Z.format("createParamsDemo",{params:"-e, --env list"})),ghost:!0}}),(0,n.jsx)(T.Z,{showDefault:!0,ref:V}),(0,n.jsx)(D.Z,{name:["siteName","useHostNetwork"],children:function(X){var s=X.siteName,pe=X.useHostNetwork;if(!pe)return(0,n.jsx)(Ne,{})}}),(0,n.jsx)(tr.Z,{}),(0,n.jsx)(je.Z,{})]}),(0,n.jsxs)(ye.Z,{show:B=="link",children:[(0,n.jsx)(D.Z,{name:["siteName","useHostNetwork"],children:function(X){var s=X.siteName,pe=X.useHostNetwork;return pe?(0,n.jsx)(f.Z,{children:(0,n.jsx)(g.Z,{showIcon:!0,description:z.format("createNetworkDesc")})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(F,{onAddEnv:function(Ae,fe){var ve;(ve=_e.current)===null||ve===void 0||ve.addEnvItem(Ae,fe)},ref:y}),(0,n.jsx)(te,{showUseBridgeNetwork:!0,siteName:s}),(0,n.jsx)(ze.Z,{})]})}}),(0,n.jsx)(zn,{})]}),(0,n.jsxs)(ye.Z,{show:B=="run-command",children:[(0,n.jsxs)(Q.UW,{children:[(0,n.jsx)(Qn.Z,{ghost:!0,defaultValue:"always",showLabel:!0}),(0,n.jsx)(Ie,{})]}),(0,n.jsx)(qn.Z,{showCommand:!0,showEntrypoint:!0,showWorkDir:!0,showUser:!0}),(0,n.jsx)(Xn.Z,{}),(0,n.jsx)(Tn,{})]}),(0,n.jsxs)(ye.Z,{show:B=="resource",children:[(0,n.jsx)(nr.Z,{}),(0,n.jsx)(Jn.Z,{showShmsize:!0}),(0,n.jsx)(Yn,{})]}),(0,n.jsx)(ye.Z,{show:B=="cap",children:(0,n.jsx)(Zn.Z,{})})]})})})}),sr=or},92067:function(We,le,e){e.d(le,{Z:function(){return ne}});var ue=e(15009),v=e.n(ue),se=e(99289),l=e.n(se),U=e(13822),L=e(64789),C=e(9773),W=e(42075),S=e(83062),R=e(83622),f=e(37413),j=e(5251),d=e(36146),Q=e(67255),D=e(85893);function ne(H){return(0,D.jsx)(C.Z,{columns:[{title:d.FD.format("listContainerName"),dataIndex:"name",render:function(g,a,p,m){return(0,D.jsx)(W.Z,{direction:"vertical",style:{textAlign:"left"},children:a==null?void 0:a.Names.map(function(t){return(0,j.fi)(t,"/")})},a.Id)}},{title:d.FD.format("listPort"),dataIndex:"ports",search:!1,render:function(g,a,p,m){var t=[],b=[];return a!=null&&a.Ports&&a.Ports.map(function(o,c){o.PublicPort?t.push(o):b.push(o)}),(0,D.jsx)(f.Z,{publicPort:t,privatePort:b,domain:[]})}},{title:d.FD.format("listManage"),valueType:"option",key:"option",ellipsis:!0,width:100,render:function(g,a,p,m){return[(0,D.jsx)(S.Z,{title:d.FD.format("listManageUse"),children:(0,D.jsx)(R.ZP,{type:"link",onClick:l()(v()().mark(function t(){var b;return v()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,U.jV)({md5:a.Id});case 2:b=c.sent,H.onSelect&&H.onSelect(b.data.info);case 4:case"end":return c.stop()}},t)})),children:(0,D.jsx)(L.Z,{})},a.Id)},a.Id)]}}],rowKey:"Id",request:function(){var q=l()(v()().mark(function g(a,p,m){var t;return v()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,U.IE)({siteTitle:a.name});case 2:return t=o.sent,o.abrupt("return",{data:t.data.list,success:!0,total:t.data.list.length});case 4:case"end":return o.stop()}},g)}));return function(g,a,p){return q.apply(this,arguments)}}(),pagination:(0,Q.Oh)()})}},16970:function(We,le,e){var ue=e(15009),v=e.n(ue),se=e(99289),l=e.n(se),U=e(5574),L=e.n(U),C=e(3616),W=e(24963),S=e(14946),R=e(36146),f=e(184),j=e(5966),d=e(62370),Q=e(97462),D=e(52688),ne=e(24739),H=e(17186),q=e(83622),g=e(34041),a=e(71230),p=e(15746),m=e(67294),t=e(85893),b=(0,m.forwardRef)(function(o,c){var P,N=(0,m.useState)(!1),u=L()(N,2),k=u[0],h=u[1],re=(0,m.useRef)(),M=(0,m.useContext)(W.Z),K=M.message,n=new R.Uo("components.network");return(0,m.useImperativeHandle)(c,function(){return{}}),(0,t.jsxs)(f.a,{drawerProps:{width:C.R_},name:"createNetwork",title:n.format("createTitle"),open:k,onOpenChange:function(F){h(F)},formRef:re,trigger:(P=o.trigger)!==null&&P!==void 0?P:(0,t.jsx)(q.ZP,{type:"primary",children:n.format("createTitle")}),onFinish:function(){var ee=l()(v()().mark(function F(_){var T,je,$,de,Ie,ie,Se,Ke,Ge,te,nn,ye,ze,Fe;return v()().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return ye={name:_.name,driver:(T=_.driver)!==null&&T!==void 0?T:"bridge",ipSubnet:(je=_.ipSubnet)!==null&&je!==void 0?je:"",ipGateway:($=_.ipGateway)!==null&&$!==void 0?$:"",ipRange:(de=_.ipRange)!==null&&de!==void 0?de:"",ipAux:_.ipAux,enableIpV6:(Ie=_.enableIpV6)!==null&&Ie!==void 0?Ie:!1,ipV6Subnet:(ie=_.ipV6Subnet)!==null&&ie!==void 0?ie:"",ipV6Gateway:(Se=_.ipV6Gateway)!==null&&Se!==void 0?Se:"",ipV6Range:(Ke=_.ipV6Range)!==null&&Ke!==void 0?Ke:"",ipV6Aux:(Ge=_.ipV6Aux)!==null&&Ge!==void 0?Ge:[],driverOption:_.driverOption,internal:(te=_.internal)!==null&&te!==void 0?te:!1,attachable:(nn=_.attachable)!==null&&nn!==void 0?nn:!1},(_.driver=="macvlan"||_.driver=="ipvlan")&&(ye.driverOption||(ye.driverOption=[]),ye.driverOption.push({name:"parent",value:_.macvlanParentCard})),Ne.next=4,(0,S.XY)(ye);case 4:if(ze=Ne.sent,!(ze&&ze.data&&ze.data.id!="")){Ne.next=10;break}return K.success(R.FD.format("finish")),o.onFinish&&o.onFinish(),(Fe=re.current)===null||Fe===void 0||Fe.resetFields(),Ne.abrupt("return",!0);case 10:case"end":return Ne.stop()}},F)}));return function(F){return ee.apply(this,arguments)}}(),children:[(0,t.jsx)(j.Z,{label:n.format("createFormName"),name:"name",required:!0,rules:[{required:!0}],placeholder:n.format("createFormNameEmpty")}),(0,t.jsx)(d.Z,{label:n.format("createFormDriver"),name:"driver",children:(0,t.jsxs)(g.Z,{defaultValue:"bridge",children:[(0,t.jsx)(g.Z.Option,{value:"bridge",children:"bridge"}),(0,t.jsx)(g.Z.Option,{value:"macvlan",children:"macvlan"}),(0,t.jsx)(g.Z.Option,{value:"ipvlan",children:"ipvlan"}),(0,t.jsx)(g.Z.Option,{value:"overlay",children:"overlay"})]})}),(0,t.jsx)(Q.Z,{name:["driver"],children:function(F){var _=F.driver;if(_=="macvlan"||_=="ipvlan")return(0,t.jsx)(j.Z,{required:!0,rules:[{required:!0}],label:n.format("createFormDriverMacvlanParentCard"),name:"macvlanParentCard",tooltip:n.format("createFormDriverMacvlanParentCardTip")})}}),(0,t.jsxs)(a.Z,{children:[(0,t.jsx)(p.Z,{span:8,children:(0,t.jsx)(D.Z,{label:n.format("createFormUserIpV4Subnet"),name:"userIpV4Subnet"})}),(0,t.jsx)(p.Z,{span:8,children:(0,t.jsx)(D.Z,{name:"internal",label:n.format("createFormInternal"),initialValue:!1})}),(0,t.jsx)(p.Z,{span:8,children:(0,t.jsx)(D.Z,{name:"attachable",label:n.format("createFormAttachable"),initialValue:!1})})]}),(0,t.jsx)(Q.Z,{name:["userIpV4Subnet"],children:function(F){var _=F.userIpV4Subnet;if(_)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(ne.UW,{title:n.format("createFormIpTitle"),children:[(0,t.jsx)(j.Z,{label:n.format("createFormIpSubnet"),name:"ipSubnet",width:"md",tooltip:n.format("createFormIpSubnetTip"),placeholder:"192.168.0.0/16"}),(0,t.jsx)(j.Z,{label:n.format("createFormIpGateway"),name:"ipGateway",width:"md",placeholder:"192.168.0.1"}),(0,t.jsx)(j.Z,{label:n.format("createFormIpRange"),name:"ipRange",width:"md",placeholder:"192.168.1.0/24"})]}),(0,t.jsx)(H.u,{name:"ipAux",label:n.format("createFormIpAux"),children:(0,t.jsxs)(ne.UW,{children:[(0,t.jsx)(j.Z,{label:n.format("createFormIpAuxDevice"),name:"device",width:"md"}),(0,t.jsx)(j.Z,{label:n.format("createFormIpAuxAddress"),name:"address",width:"md"})]})})]})}}),(0,t.jsxs)(a.Z,{children:[(0,t.jsx)(p.Z,{span:8,children:(0,t.jsx)(D.Z,{label:n.format("createFormEnableIpV6"),name:"enableIpV6"})}),(0,t.jsx)(p.Z,{children:(0,t.jsx)(D.Z,{label:n.format("createFormUserIpV6Subnet"),name:"userIpV6Subnet",fieldProps:{onChange:function(F,_){if(F){var T;(T=re.current)===null||T===void 0||T.setFieldValue("enableIpV6",!0)}}}})})]}),(0,t.jsx)(Q.Z,{name:["userIpV6Subnet"],children:function(F){var _=F.userIpV6Subnet;if(_)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(ne.UW,{title:n.format("createFormIpV6"),children:[(0,t.jsx)(j.Z,{label:n.format("createFormIpSubnet"),name:"ipV6Subnet",width:"md",placeholder:"2001:db8::/48"}),(0,t.jsx)(j.Z,{label:n.format("createFormIpGateway"),name:"ipV6Gateway",width:"md",placeholder:"2001:db8::1"}),(0,t.jsx)(j.Z,{label:n.format("createFormIpRange"),name:"ipV6Range",width:"md",placeholder:"2001:db8::/64"})]}),(0,t.jsx)(H.u,{name:"ipV6Aux",label:n.format("createFormIpAux"),children:(0,t.jsxs)(ne.UW,{children:[(0,t.jsx)(j.Z,{label:n.format("createFormIpAuxDevice"),name:"device",width:"md"}),(0,t.jsx)(j.Z,{label:n.format("createFormIpAuxAddress"),name:"address",width:"md"})]})})]})}}),(0,t.jsx)(H.u,{name:"driverOption",label:n.format("createFormDriverOption"),children:(0,t.jsxs)(ne.UW,{children:[(0,t.jsx)(j.Z,{label:n.format("createFormDriverOptionName"),name:"name",width:"md"}),(0,t.jsx)(j.Z,{label:n.format("createFormDriverOptionValue"),name:"value",width:"md"})]})})]})});le.Z=b},20743:function(We,le,e){var ue=e(15009),v=e.n(ue),se=e(99289),l=e.n(se),U=e(5574),L=e.n(U),C=e(67294),W=e(14946),S=e(64789),R=e(9773),f=e(83622),j=e(85265),d=e(42075),Q=e(66309),D=e(16970),ne=e(3616),H=e(36146),q=e(67255),g=e(85893),a=(0,C.forwardRef)(function(p,m){(0,C.useImperativeHandle)(m,function(){return{show:function(){c(!0)}}});var t=(0,C.useState)(!1),b=L()(t,2),o=b[0],c=b[1],P=(0,C.useRef)(),N=new H.Uo("components.network");return(0,g.jsxs)(g.Fragment,{children:[p.showTriggerButton&&(0,g.jsx)(f.ZP,{onClick:function(){c(!0)},children:N.format("selectTriggerButton")}),(0,g.jsx)(j.Z,{title:N.format("selectDrawerTitle"),width:ne.R_,footer:!1,open:o,onClose:function(){return c(!1)},extra:(0,g.jsx)(d.Z,{children:(0,g.jsx)(D.Z,{onFinish:function(){var k,h;!((k=P.current)===null||k===void 0)&&k.reloadAndRest&&((h=P.current)===null||h===void 0||h.reloadAndRest())}},"create")}),children:(0,g.jsx)(R.Z,{rowKey:"Name",actionRef:P,columns:[{title:H.FD.format("listTitle"),dataIndex:"Name",render:function(k,h,re,M,K){return h.Name=="none"||h.Name=="bridge"||h.Name=="host"?(0,g.jsxs)(g.Fragment,{children:[h.Name," ",(0,g.jsx)(Q.Z,{color:"blue",children:"System"})]}):(0,g.jsx)(g.Fragment,{children:k})}},{title:H.FD.format("listType"),ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"Driver",ellipsis:!0,width:100,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4",search:!1,width:120,render:function(k,h,re,M,K){return h.IPAM.Config&&h.IPAM.Config[0]&&(0,g.jsxs)(d.Z,{direction:"vertical",children:[h.IPAM.Config[0].Subnet,h.IPAM.Config[0].Gateway]})}},{title:"IPV6",search:!1,render:function(k,h,re,M,K){return h.IPAM.Config&&h.IPAM.Config[1]&&(0,g.jsxs)(d.Z,{direction:"vertical",children:[h.IPAM.Config[1].Subnet,h.IPAM.Config[1].Gateway]})}},{title:H.FD.format("listManage"),width:100,search:!1,render:function(k,h,re,M,K){return[h.Name!="none"&&h.Name!="bridge"&&h.Name!="host"&&(0,g.jsx)(f.ZP,{type:"link",onClick:function(){p.onSelect(h),c(!1)},children:(0,g.jsx)(S.Z,{})},h.Id)]}}],request:function(){var u=l()(v()().mark(function k(h,re,M){var K;return v()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,(0,W.jR)({name:h.Name});case 2:return K=ee.sent,ee.abrupt("return",{data:K.data.list,success:!0,total:K.data.list.length});case 4:case"end":return ee.stop()}},k)}));return function(k,h,re){return u.apply(this,arguments)}}(),pagination:(0,q.Oh)()})})]})});le.Z=a},13822:function(We,le,e){e.d(le,{IE:function(){return R},IW:function(){return W},KK:function(){return ne},LJ:function(){return q},RF:function(){return m},Re:function(){return a},aF:function(){return b},eE:function(){return Q},jV:function(){return j}});var ue=e(5574),v=e.n(ue),se=e(15009),l=e.n(se),U=e(99289),L=e.n(U),C=e(82346);function W(c){return S.apply(this,arguments)}function S(){return S=L()(l()().mark(function c(P){return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,C.request)("/api/app/container/status",{method:"POST",data:P}));case 1:case"end":return u.stop()}},c)})),S.apply(this,arguments)}function R(c){return f.apply(this,arguments)}function f(){return f=L()(l()().mark(function c(P){return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,C.request)("/api/app/container/get-list",{data:P,method:"POST"}));case 1:case"end":return u.stop()}},c)})),f.apply(this,arguments)}function j(c){return d.apply(this,arguments)}function d(){return d=L()(l()().mark(function c(P){return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,C.request)("/api/app/container/get-detail",{data:P,method:"POST"}));case 1:case"end":return u.stop()}},c)})),d.apply(this,arguments)}function Q(c){return D.apply(this,arguments)}function D(){return D=L()(l()().mark(function c(P){return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,C.request)("/api/app/container/update",{data:P,method:"POST"}));case 1:case"end":return u.stop()}},c)})),D.apply(this,arguments)}function ne(){return H.apply(this,arguments)}function H(){return H=L()(l()().mark(function c(){return l()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",(0,C.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return N.stop()}},c)})),H.apply(this,arguments)}function q(c){return g.apply(this,arguments)}function g(){return g=L()(l()().mark(function c(P){return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!P.enableExportToPath){u.next=2;break}return u.abrupt("return",(0,C.request)("/api/app/container/export",{method:"GET",params:P}));case 2:return u.abrupt("return",new Promise(function(k,h){var re=localStorage.getItem("token"),M=new URLSearchParams;M.append("token",re||""),Object.entries(P).forEach(function(ee){var F=v()(ee,2),_=F[0],T=F[1];M.append(_,String(T))});var K="/api/app/container/export?".concat(M.toString()),n=document.createElement("iframe");n.style.display="none",n.src=K,document.body.appendChild(n),setTimeout(function(){n.parentElement&&document.body.removeChild(n)},5e3),k({code:200,data:"success",error:""})}));case 3:case"end":return u.stop()}},c)})),g.apply(this,arguments)}function a(c){return p.apply(this,arguments)}function p(){return p=L()(l()().mark(function c(P){return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,C.request)("/api/app/container/commit",{method:"POST",data:P}));case 1:case"end":return u.stop()}},c)})),p.apply(this,arguments)}function m(c){return t.apply(this,arguments)}function t(){return t=L()(l()().mark(function c(P){return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,C.request)("/api/app/container/upgrade",{method:"POST",data:P}));case 1:case"end":return u.stop()}},c)})),t.apply(this,arguments)}function b(c){return o.apply(this,arguments)}function o(){return o=L()(l()().mark(function c(P){return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,C.request)("/api/app/container/copy",{method:"POST",data:P}));case 1:case"end":return u.stop()}},c)})),o.apply(this,arguments)}},14946:function(We,le,e){e.d(le,{CI:function(){return R},HY:function(){return q},IS:function(){return L},XY:function(){return Q},_3:function(){return a},_x:function(){return j},jR:function(){return W},t9:function(){return ne}});var ue=e(15009),v=e.n(ue),se=e(99289),l=e.n(se),U=e(82346);function L(m){return C.apply(this,arguments)}function C(){return C=l()(v()().mark(function m(t){return v()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,U.request)("/api/app/network/get-detail",{method:"POST",data:t}));case 1:case"end":return o.stop()}},m)})),C.apply(this,arguments)}function W(m){return S.apply(this,arguments)}function S(){return S=l()(v()().mark(function m(t){return v()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,U.request)("/api/app/network/get-list",{method:"POST",data:t}));case 1:case"end":return o.stop()}},m)})),S.apply(this,arguments)}function R(){return f.apply(this,arguments)}function f(){return f=l()(v()().mark(function m(){return v()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,U.request)("/api/app/network/prune",{method:"POST"});case 2:return b.abrupt("return",b.sent);case 3:case"end":return b.stop()}},m)})),f.apply(this,arguments)}function j(m){return d.apply(this,arguments)}function d(){return d=l()(v()().mark(function m(t){return v()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,U.request)("/api/app/network/delete",{method:"POST",data:t});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},m)})),d.apply(this,arguments)}function Q(m){return D.apply(this,arguments)}function D(){return D=l()(v()().mark(function m(t){return v()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,U.request)("/api/app/network/create",{method:"POST",data:t});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},m)})),D.apply(this,arguments)}function ne(m){return H.apply(this,arguments)}function H(){return H=l()(v()().mark(function m(t){return v()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,U.request)("/api/app/network/disconnect",{method:"POST",data:t});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},m)})),H.apply(this,arguments)}function q(m){return g.apply(this,arguments)}function g(){return g=l()(v()().mark(function m(t){return v()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,U.request)("/api/app/network/connect",{method:"POST",data:t});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},m)})),g.apply(this,arguments)}function a(m){return p.apply(this,arguments)}function p(){return p=l()(v()().mark(function m(t){return v()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,U.request)("/api/app/network/get-container-list",{method:"POST",data:t}));case 1:case"end":return o.stop()}},m)})),p.apply(this,arguments)}},77446:function(We,le,e){e.d(le,{V:function(){return L},v:function(){return W}});var ue=e(15009),v=e.n(ue),se=e(99289),l=e.n(se),U=e(82346);function L(R){return C.apply(this,arguments)}function C(){return C=l()(v()().mark(function R(f){return v()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,U.request)("/api/pro/container-rollback/get-list",{data:f,method:"POST"});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},R)})),C.apply(this,arguments)}function W(R){return S.apply(this,arguments)}function S(){return S=l()(v()().mark(function R(f){return v()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,U.request)("/api/pro/container-rollback/restore",{data:f,method:"POST"});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},R)})),S.apply(this,arguments)}},89240:function(We,le,e){e.d(le,{HJ:function(){return D},PD:function(){return H},Rk:function(){return ne},pM:function(){return q},yi:function(){return Q},zY:function(){return g}});var ue=e(64599),v=e.n(ue),se=e(5251),l=e(10531),U=e(43836),L=e(17179),C=e(74911),W=e(17637),S=e(58353),R=/^([1-9]|[1-5]?[0-9]{2,4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$/m;function f(a){return R.test(a)?parseInt(a,10):0}function j(a){typeof a!="string"&&(a=a.toString());var p=l.Z(a,"-",2),m=U.Z(p,f);return m.length==1&&m.push(m[0]),m}function d(a,p){typeof a!="string"&&(a=a.toString());var m=null,t=a.indexOf(":");t>=0&&(m=a.substring(0,t),a=a.substring(t+1)),p=typeof p=="number"?p:f(p);var b=j(a),o=Math.min(b[0],p),c=Math.max(b[1],p);return m?m+":"+o+"-"+c:o+"-"+c}function Q(a){if(!a||!a.HostConfig||!a.HostConfig.PortBindings)return[];var p=[],m=a.HostConfig.PortBindings,t=L.Z(m),b=C.Z(t,function(o){return l.Z(o,"/")[1]});return W.Z(b,function(o,c){var P={},N=v()(o),u;try{for(N.s();!(u=N.n()).done;){var k=u.value,h=v()(m[k]),re;try{for(h.s();!(re=h.n()).done;){var M=re.value;P[M.HostIp]=P[M.HostIp]||[],P[M.HostIp].push(k)}}catch(K){h.e(K)}finally{h.f()}}}catch(K){N.e(K)}finally{N.f()}W.Z(P,function(K,n){var ee=S.Z(K,function(T){return parseInt(l.Z(T,"/")[0],10)}),F=-1,_=-1;W.Z(ee,function(T){var je=l.Z(T,"/"),$=parseInt(je[0],10),de=m[T][0];m[T].shift();var Ie=f(de.HostPort);if(Ie>0){if(p.length>0&&F===Ie-1&&_===$-1){p[p.length-1].host=d(p[p.length-1].host,Ie),p[p.length-1].dest=d(p[p.length-1].dest,$),F=Ie,_=$;return}F=Ie,_=$}else F=-1,_=-1;var ie=de.HostPort.toString();n&&(ie="".concat(n,":").concat(ie)),p.push({host:ie,dest:$.toString(),protocol:c})})})}),p}function D(a){return(0,se.fi)(a,"/")}function ne(a){return a?(0,se.FI)(a):"64M"}function H(a){return a&&a>1e8?a/1e9:0}function q(a){return a?a/1024/1024:0}function g(a){return"".concat(D(a),".pod.dpanel.local")}}}]);
