"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8878],{55809:function(x,m,e){var f=e(87462),_=e(67294),C=e(44805),v=e(84089),h=function(O,g){return _.createElement(v.Z,(0,f.Z)({},O,{ref:g,icon:C.Z}))},r=_.forwardRef(h);m.Z=r},95591:function(x,m,e){e.d(m,{Z:function(){return O}});var f=e(87462),_=e(67294),C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},v=C,h=e(84089),r=function(n,i){return _.createElement(h.Z,(0,f.Z)({},n,{ref:i,icon:v}))},A=_.forwardRef(r),O=A},5966:function(x,m,e){var f=e(97685),_=e(1413),C=e(45987),v=e(21770),h=e(72723),r=e(55241),A=e(97435),O=e(67294),g=e(35510),n=e(85893),i=["fieldProps","proFieldProps"],P=["fieldProps","proFieldProps"],d="text",D=function(s){var a=s.fieldProps,M=s.proFieldProps,c=(0,C.Z)(s,i);return(0,n.jsx)(g.Z,(0,_.Z)({valueType:d,fieldProps:a,filedConfig:{valueType:d},proFieldProps:M},c))},l=function(s){var a=(0,v.Z)(s.open||!1,{value:s.open,onChange:s.onOpenChange}),M=(0,f.Z)(a,2),c=M[0],T=M[1];return(0,n.jsx)(h.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(j){var t,B=j.getFieldValue(s.name||[]);return(0,n.jsx)(r.Z,(0,_.Z)((0,_.Z)({getPopupContainer:function(E){return E&&E.parentNode?E.parentNode:E},onOpenChange:function(E){return T(E)},content:(0,n.jsxs)("div",{style:{padding:"4px 0"},children:[(t=s.statusRender)===null||t===void 0?void 0:t.call(s,B),s.strengthText?(0,n.jsx)("div",{style:{marginTop:10},children:(0,n.jsx)("span",{children:s.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},s.popoverProps),{},{open:c,children:s.children}))}})},u=function(s){var a=s.fieldProps,M=s.proFieldProps,c=(0,C.Z)(s,P),T=(0,O.useState)(!1),I=(0,f.Z)(T,2),j=I[0],t=I[1];return a!=null&&a.statusRender&&c.name?(0,n.jsx)(l,{name:c.name,statusRender:a==null?void 0:a.statusRender,popoverProps:a==null?void 0:a.popoverProps,strengthText:a==null?void 0:a.strengthText,open:j,onOpenChange:t,children:(0,n.jsx)("div",{children:(0,n.jsx)(g.Z,(0,_.Z)({valueType:"password",fieldProps:(0,_.Z)((0,_.Z)({},(0,A.Z)(a,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(R){var E;a==null||(E=a.onBlur)===null||E===void 0||E.call(a,R),t(!1)},onClick:function(R){var E;a==null||(E=a.onClick)===null||E===void 0||E.call(a,R),t(!0)}}),proFieldProps:M,filedConfig:{valueType:d}},c))})}):(0,n.jsx)(g.Z,(0,_.Z)({valueType:"password",fieldProps:a,proFieldProps:M,filedConfig:{valueType:d}},c))},o=D;o.Password=u,o.displayName="ProFormComponent",m.Z=o},1699:function(x,m,e){e.d(m,{u:function(){return g}});var f=e(9783),_=e.n(f),C=e(97857),v=e.n(C),h=e(67294),r=e(82346),A=e(42075),O=e(85893),g=function(i){var P=(0,r.useAccess)(),d=Array.isArray(i.access)?i.access:[i.access],D;return typeof i.children=="function"?D=i.children(d.reduce(function(l,u){return v()(v()({},l),{},_()({},u,P[u]))},{})):d.every(function(l){return P[l]})?D=i.children:D=i.fallback,i.space?(0,O.jsx)(A.Z,v()(v()({},i.space),{},{children:D})):D}},80821:function(x,m,e){e.d(m,{Z:function(){return g}});var f=e(5574),_=e.n(f),C=e(24963),v=e(86738),h=e(28036),r=e(83062),A=e(67294),O=e(85893);function g(n){var i=(0,A.useState)(!1),P=_()(i,2),d=P[0],D=P[1],l=(0,A.useContext)(C.Z),u=l.lang,o=l.notice,p=l.message,s=function(){D(!0);var M=n.action();M instanceof Promise?M.then(function(c){if(D(!1),c){typeof n.onSuccess=="function"&&n.onSuccess(c);var T="";n.messageSuccess?typeof n.messageSuccess=="function"?T=n.messageSuccess(c):T=n.messageSuccess.indexOf("notification.")==0?u(n.messageSuccess):n.messageSuccess:T=u("notification.finish"),n.asynced?p.info(T):p.success(T)}}).catch(function(c){D(!1),typeof n.onError=="function"&&n.onError(c)}):D(!1)};return n.confirm?(0,O.jsx)(v.Z,{style:{width:500},title:n.confirmTitle?n.confirmTitle:u("notification.title.tip"),description:typeof n.confirm=="string"&&n.confirm.indexOf("notification.")==0?u(n.confirm):n.confirm,onConfirm:s,okText:"Yes",cancelText:"No",onOpenChange:n.confirmOnOpenChange,children:(0,O.jsx)(h.ZP,{block:n.block,disabled:n.disabled,icon:!n.children&&d?void 0:n.icon,loading:d,danger:n.danger,type:n.type,children:n.children})}):(0,O.jsx)(r.Z,{title:n.tips,children:(0,O.jsx)(h.ZP,{block:n.block,style:n.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:n.disabled,icon:!n.children&&d?void 0:n.icon,loading:d,onClick:s,danger:n.danger,type:n.type,children:n.children})})}},24963:function(x,m,e){var f=e(67294),_=(0,f.createContext)({});m.Z=_},29798:function(x,m,e){e.r(m),e.d(m,{default:function(){return u}});var f=e(5574),_=e.n(f),C=e(60335),v=e(38345),h=e(82346),r=e(67294),A=e(24963),O=e(50070),g=e(37767),n=e(52031),i=e(14189),P=e(72409),d=e(14245),D=e(1699),l=e(85893);function u(){var o=(0,r.useContext)(A.Z),p=o.message,s=o.notice,a=o.loading,M=o.lang,c=(0,r.useContext)(O.AppDetailContext),T=(0,h.useParams)(),I=(0,r.useState)(),j=_()(I,2),t=j[0],B=j[1],R=(0,r.useState)(1),E=_()(R,2),F=E[0],$=E[1],Z=(0,h.useNavigate)();return(0,r.useEffect)(function(){var K;a.show(),c.reload(),(0,C.jV)({md5:(K=T.id)!==null&&K!==void 0?K:""}).then(function(U){U.data&&(U.data.info.HostConfig.NetworkMode=="host"&&U.data.info.Config.ExposedPorts&&Object.keys(U.data.info.Config.ExposedPorts).map(function(L){U.data.info.NetworkSettings.Ports[L]=[{HostIp:"0.0.0.0",HostPort:L.substring(0,L.indexOf("/"))}]}),B(U.data))}).finally(function(){a.destroy()})},[F]),(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(v.Z,{direction:"column",gutter:[0,10],children:[(t==null?void 0:t.info)&&(0,l.jsx)(i.Z,{data:t.info}),(t==null?void 0:t.info)&&(0,l.jsx)(D.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,l.jsx)(P.Z,{data:t,checkContainerUpgrade:function(){Z("/app/list")}})}),t&&(0,l.jsx)(g.Z,{data:t}),t&&(0,l.jsx)(n.Z,{data:t==null?void 0:t.info}),t&&(0,l.jsx)(d.Z,{data:t.info})]})})}},50070:function(x,m,e){e.r(m),e.d(m,{AppDetailContext:function(){return p},default:function(){return s}});var f=e(15009),_=e.n(f),C=e(99289),v=e.n(C),h=e(5574),r=e.n(h),A=e(1699),O=e(24963),g=e(60335),n=e(55809),i=e(90078),P=e(82346),d=e(25593),D=e(28036),l=e(50136),u=e(67294),o=e(85893),p=(0,u.createContext)({});function s(){var a,M=(0,u.useContext)(O.Z),c=M.lang,T=M.loading,I=M.message,j=(0,P.useParams)(),t=(0,P.useSearchParams)(),B=r()(t,2),R=B[0],E=B[1],F=(a=R.get("tab"))!==null&&a!==void 0?a:"edit",$=(0,u.useState)("edit"),Z=r()($,2),K=Z[0],U=Z[1],L=(0,P.useNavigate)(),Q=(0,u.useState)(1),z=r()(Q,2),V=z[0],X=z[1],G=[{label:(0,o.jsx)(P.Link,{to:"/app/detail/edit/".concat(j.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,o.jsx)(P.Link,{to:"/app/detail/network/".concat(j.id,"?tab=network"),children:"\u7F51\u7EDC\u7BA1\u7406"}),key:"network"},{label:(0,o.jsx)(d.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){I.info(c("app.detail.createExplorerPlugin")),L("/app/detail/file/".concat(j.id,"?tab=file"))}},{label:(0,o.jsx)(d.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){L("/app/detail/log/".concat(j.id,"?tab=log"))}},{label:(0,o.jsx)(d.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){L("/app/detail/stat/".concat(j.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,o.jsx)(n.Z,{}),disabled:!0}],w=(0,u.useState)(G),Y=r()(w,2),q=Y[0],ee=Y[1];(0,u.useEffect)(function(){T.show(),U(F);var y=function(){var k=v()(_()().mark(function J(){var N,H,b;return _()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return N=G,W.prev=1,W.next=4,(0,g.jV)({md5:(H=j.id)!==null&&H!==void 0?H:""});case 4:b=W.sent,N.map(function(S){return S.key=="containerName"&&(S.label=b.data.info.Name),(!b.data.info.State.Running||b.data.info.State.Restarting)&&(S.key=="file"||S.key=="stat")&&(S.disabled=!0),S}),ee(N),W.next=13;break;case 9:return W.prev=9,W.t0=W.catch(1),L("/app/list"),W.abrupt("return");case 13:return W.prev=13,T.destroy(),W.finish(13);case 16:case"end":return W.stop()}},J,null,[[1,9,13,16]])}));return function(){return k.apply(this,arguments)}}();y()},[V,j]);var ne=function(k){U(k.key)};return(0,o.jsx)(p.Provider,{value:{reload:function(){X(V+1)}},children:(0,o.jsxs)(i._z,{header:{extra:[(0,o.jsx)(A.u,{access:"canSeeContainerListManageCreate",children:(0,o.jsx)(P.Link,{to:"/app/create/image",children:(0,o.jsx)(D.ZP,{type:"primary",children:"\u521B\u5EFA\u5BB9\u5668"})})},"create")]},children:[(0,o.jsx)(l.Z,{mode:"horizontal",onClick:ne,selectedKeys:[K],items:q}),(0,o.jsx)(P.Outlet,{})]})})}}}]);
