"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7750],{58638:function(ve,F,e){e.d(F,{Z:function(){return C}});var c=e(87462),s=e(67294),N={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},i=N,T=e(84089),P=function(L,R){return s.createElement(T.Z,(0,c.Z)({},L,{ref:R,icon:i}))},D=s.forwardRef(P),C=D},35995:function(ve,F,e){e.d(F,{Z:function(){return C}});var c=e(87462),s=e(67294),N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M508 624a112 112 0 00112-112c0-3.28-.15-6.53-.43-9.74L498.26 623.57c3.21.28 6.45.43 9.74.43zm370.72-458.44L836 122.88a8 8 0 00-11.31 0L715.37 232.23Q624.91 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.7 119.43 136.55 191.45L112.56 835a8 8 0 000 11.31L155.25 889a8 8 0 0011.31 0l712.16-712.12a8 8 0 000-11.32zM332 512a176 176 0 01258.88-155.28l-48.62 48.62a112.08 112.08 0 00-140.92 140.92l-48.62 48.62A175.09 175.09 0 01332 512z"}},{tag:"path",attrs:{d:"M942.2 486.2Q889.4 375 816.51 304.85L672.37 449A176.08 176.08 0 01445 676.37L322.74 798.63Q407.82 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5z"}}]},name:"eye-invisible",theme:"filled"},i=N,T=e(84089),P=function(L,R){return s.createElement(T.Z,(0,c.Z)({},L,{ref:R,icon:i}))},D=s.forwardRef(P),C=D},36693:function(ve,F,e){var c=e(87462),s=e(67294),N=e(80111),i=e(84089),T=function(C,B){return s.createElement(i.Z,(0,c.Z)({},C,{ref:B,icon:N.Z}))},P=s.forwardRef(T);F.Z=P},64789:function(ve,F,e){e.d(F,{Z:function(){return C}});var c=e(87462),s=e(67294),N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},i=N,T=e(84089),P=function(L,R){return s.createElement(T.Z,(0,c.Z)({},L,{ref:R,icon:i}))},D=s.forwardRef(P),C=D},85577:function(ve,F,e){var c=e(87462),s=e(67294),N=e(11721),i=e(84089),T=function(C,B){return s.createElement(i.Z,(0,c.Z)({},C,{ref:B,icon:N.Z}))},P=s.forwardRef(T);F.Z=P},31199:function(ve,F,e){var c=e(1413),s=e(45987),N=e(67294),i=e(40284),T=e(85893),P=["fieldProps","min","proFieldProps","max"],D=function(L,R){var ae=L.fieldProps,f=L.min,oe=L.proFieldProps,u=L.max,ce=(0,s.Z)(L,P);return(0,T.jsx)(i.Z,(0,c.Z)({valueType:"digit",fieldProps:(0,c.Z)({min:f,max:u},ae),ref:R,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:oe},ce))},C=N.forwardRef(D);F.Z=C},92067:function(ve,F,e){e.d(F,{Z:function(){return ce}});var c=e(15009),s=e.n(c),N=e(99289),i=e.n(N),T=e(13822),P=e(64789),D=e(9773),C=e(42075),B=e(83062),L=e(83622),R=e(37413),ae=e(5251),f=e(36146),oe=e(67255),u=e(85893);function ce($){return(0,u.jsx)(D.Z,{columns:[{title:f.FD.format("listContainerName"),dataIndex:"name",render:function(O,A,re,j){return(0,u.jsx)(C.Z,{direction:"vertical",style:{textAlign:"left"},children:A==null?void 0:A.Names.map(function(Z){return(0,ae.fi)(Z,"/")})},A.Id)}},{title:f.FD.format("listPort"),dataIndex:"ports",search:!1,render:function(O,A,re,j){var Z=[],X=[];return A!=null&&A.Ports&&A.Ports.map(function(W,v){W.PublicPort?Z.push(W):X.push(W)}),(0,u.jsx)(R.Z,{publicPort:Z,privatePort:X,domain:[]})}},{title:f.FD.format("listManage"),valueType:"option",key:"option",ellipsis:!0,width:100,render:function(O,A,re,j){return[(0,u.jsx)(B.Z,{title:f.FD.format("listManageUse"),children:(0,u.jsx)(L.ZP,{type:"link",onClick:i()(s()().mark(function Z(){var X;return s()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,T.jV)({md5:A.Id});case 2:X=v.sent,$.onSelect&&$.onSelect(X.data.info);case 4:case"end":return v.stop()}},Z)})),children:(0,u.jsx)(P.Z,{})},A.Id)},A.Id)]}}],rowKey:"Id",request:function(){var te=i()(s()().mark(function O(A,re,j){var Z;return s()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,(0,T.IE)({siteTitle:A.name});case 2:return Z=W.sent,W.abrupt("return",{data:Z.data.list,success:!0,total:Z.data.list.length});case 4:case"end":return W.stop()}},O)}));return function(O,A,re){return te.apply(this,arguments)}}(),pagination:(0,oe.Oh)()})}},37413:function(ve,F,e){e.d(F,{Z:function(){return oe}});var c=e(19632),s=e.n(c),N=e(36146),i=e(85577),T=e(58638),P=e(36693),D=e(35995),C=e(99611),B=e(38345),L=e(42075),R=e(66309),ae=e(55241),f=e(85893);function oe(u){var ce,$=new N.Uo("components.containerPort"),te=[];u.publicPort&&(te=s()(u.publicPort)),u.privatePort&&(te=[].concat(s()(te),s()(u.privatePort)));var O=(ce=u.serverIp)!==null&&ce!==void 0?ce:"localhost";if(O!=""&&O.indexOf("http")===-1&&O.indexOf(":")>-1&&(O="[".concat(O,"]")),O==""||O=="127.0.0.1"){var A=document.location.protocol+"//"+document.location.hostname;O=A}var re=(0,f.jsxs)(B.Z,{direction:u.layout=="inline"?"row":"column",style:{width:u.layout!="inline"?600:"auto"},ghost:!0,children:[te.length>0&&(0,f.jsx)(B.Z,{title:(0,f.jsx)(i.Z,{}),subTitle:$.format("cardPortTitle"),ghost:u.ghost,bodyStyle:{maxHeight:300,overflow:"auto",margin:"10px 0"},children:te.map(function(j,Z){var X;return O==""&&j.IP&&(O=j.IP),(0,f.jsx)(L.Z,{size:"large",wrap:!0,children:(0,f.jsx)(R.Z,{color:j.PublicPort?"blue":"yellow",icon:j.PublicPort?(0,f.jsx)(T.Z,{}):"",style:{marginBottom:10,marginRight:15},children:j.PublicPort?(0,f.jsx)("a",{href:"".concat(O.indexOf("http")===0?O:"http://"+O,":").concat(j.PublicPort),target:"_blank",children:"".concat(j.PublicPort?((X=j.IP)!==null&&X!==void 0?X:"0.0.0.0")+":"+j.PublicPort+" -> ":"").concat(j.PrivatePort,"/").concat(j.Type)},"link".concat(Z)):"".concat(j.PrivatePort,"/").concat(j.Type)})},"space".concat(Z))})}),u.domain&&u.domain.length>0&&(0,f.jsx)(B.Z,{title:(0,f.jsx)(P.Z,{}),subTitle:$.format("cardDomainTitle"),ghost:u.ghost,children:(0,f.jsx)(L.Z,{wrap:!0,style:{textAlign:"left"},children:u.domain&&u.domain.map(function(j,Z){return(0,f.jsx)(R.Z,{color:"blue",icon:(0,f.jsx)(T.Z,{}),children:(0,f.jsx)("a",{href:j,target:"_blank",children:j})},"domain".concat(Z))})})})]});return u.showInDetail?re:(0,f.jsx)(ae.Z,{placement:"right",content:re,children:(0,f.jsxs)(L.Z,{direction:"vertical",children:[u.privatePort&&u.privatePort.length>0&&(0,f.jsxs)(R.Z,{color:"yellow",icon:(0,f.jsx)(D.Z,{}),children:[$.format("portPrivate"),": ",u.privatePort.length]}),u.publicPort&&u.publicPort.length>0&&(0,f.jsxs)(R.Z,{color:"blue",icon:(0,f.jsx)(C.Z,{}),children:[$.format("protPublic"),": ",u.publicPort.length]}),u.domain&&u.domain.length>0&&(0,f.jsx)(R.Z,{color:"geekblue",icon:(0,f.jsx)(P.Z,{}),children:u.domainTitle?u.domainTitle:"".concat($.format("domain"),": ").concat(u.domain.length)})]})})}},7463:function(ve,F,e){e.r(F),e.d(F,{default:function(){return ue}});var c=e(15009),s=e.n(c),N=e(99289),i=e.n(N),T=e(5574),P=e.n(T),D=e(1699),C=e(66554),B=e(184),L=e(24739),R=e(97462),ae=e(5966),f=e(62370),oe=e(64317),u=e(86615),ce=e(31199),$=e(52688),te=e(11106),O=e(83622),A=e(92398),re=e(84567),j=e(42075),Z=e(66309),X=e(71230),W=e(15746),v=e(40056),y=e(67294),J=e(74026),l=e(3616),Y=e(36146),Oe=e(92067),n=e(85893);function Pe(I){var V=(0,y.useState)(!1),k=P()(V,2),G=k[0],M=k[1],ie=new Y.Uo("components.appDomain");return(0,n.jsx)(B.a,{drawerProps:{width:l.R_},trigger:(0,n.jsx)(O.ZP,{type:"primary",onClick:function(){M(!0)},children:ie.format("createSelectContainer")}),onOpenChange:function(le){M(le)},open:G,children:(0,n.jsx)(Oe.Z,{onSelect:function(le){M(!1),I.onSelect&&I.onSelect(le)}})})}var _e=(0,y.forwardRef)(function(I,V){var k=(0,y.useState)(!1),G=P()(k,2),M=G[0],ie=G[1],b=(0,y.useRef)(),le=(0,y.useState)(),K=P()(le,2),x=K[0],d=K[1],me=(0,y.useState)(1),Q=P()(me,2),z=Q[0],S=Q[1],o=new Y.Uo("components.appDomain");return(0,y.useImperativeHandle)(V,function(){return{showEdit:function(E){return i()(s()().mark(function r(){var g,ee,m;return s()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,(0,C.lQ)({id:E});case 2:ee=w.sent,m=ee.data,(g=b.current)===null||g===void 0||g.setFieldsValue({containerId:m.domain.containerId,serverName:m.domain.serverName,serverNameAlias:m.domain.setting.serverNameAlias,serverAddress:m.domain.setting.serverAddress,serverProtocol:m.domain.setting.serverProtocol,port:m.domain.setting.port,enableBlockCommonExploits:m.domain.setting.enableBlockCommonExploits,enableAssetCache:m.domain.setting.enableAssetCache,enableWs:m.domain.setting.enableWs,extraNginx:m.domain.setting.extraNginx,enableSSL:m.domain.setting.enableSSL,certName:m.domain.setting.certName,vhost:m.vhost,type:m.domain.setting.type,wwwRoot:m.domain.setting.wwwRoot,fpmRoot:m.domain.setting.fpmRoot}),d(m),ie(!0);case 7:case"end":return w.stop()}},r)}))()}}}),(0,n.jsx)(B.a,{drawerProps:{forceRender:!0,width:l.R_},open:M,onOpenChange:function(E){var r;ie(E),!E&&((r=b.current)===null||r===void 0||r.resetFields())},title:o.format("createTitle"),trigger:(0,n.jsx)(O.ZP,{onClick:function(){var E;d(void 0),(E=b.current)===null||E===void 0||E.resetFields()},type:"primary",children:o.format("createTriggerButton")}),formRef:b,onFinish:function(){var q=i()(s()().mark(function E(r){var g,ee,m,ne,w;return s()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!r.vhost){H.next=8;break}return H.next=3,(0,C.Ss)({id:x&&(x==null?void 0:x.domain.id)>0?x.domain.id:0,vhost:r.vhost});case 3:return ee=H.sent,H.next=6,(0,C.hZ)();case 6:H.next=11;break;case 8:return H.next=10,(0,C.Fj)({id:x&&(x==null?void 0:x.domain.id)>0?x.domain.id:0,containerId:r.containerId,serverName:r.serverName,serverNameAlias:r.serverNameAlias,serverAddress:r.serverAddress,serverProtocol:(m=r.protocol)!==null&&m!==void 0?m:"http",port:parseInt((ne=r.port)!==null&&ne!==void 0?ne:"80"),enableBlockCommonExploits:r.enableBlockCommonExploits,enableAssetCache:r.enableAssetCache,enableWs:r.enableWs,enableSSL:r.enableSSL,extraNginx:r.extraNginx,certName:r.certName,wwwRoot:r.wwwRoot,fpmRoot:r.fpmRoot,type:r.type});case 10:w=H.sent;case 11:return(g=b.current)===null||g===void 0||g.resetFields(),I.onFinish(),H.abrupt("return",!0);case 14:case"end":return H.stop()}},E)}));return function(E){return q.apply(this,arguments)}}(),children:(0,n.jsx)(A.Z,{items:[{key:"1",label:o.format("createTabDomain"),destroyOnHidden:!0,children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(L.UW,{children:[(0,n.jsx)(R.Z,{name:["enableSSL"],children:function(E){var r=E.enableSSL;return(0,n.jsx)(ae.Z,{width:"lg",label:o.format("createFormServerName"),tooltip:o.format("createFormServerNameTip"),name:"serverName",placeholder:"www.explame.com, demo.com:8807",rules:[{required:!0}],fieldProps:{addonBefore:r?"https://":"http://"},disabled:x&&x.domain.id>0})}}),(0,n.jsx)(f.Z,{label:" ",valuePropName:"checked",name:"enableSSL",children:(0,n.jsx)(re.Z,{children:"Https?"})})]}),(0,n.jsx)(oe.Z,{label:o.format("createFormServerNameAlises"),name:"serverNameAlias",mode:"tags",placeholder:o.format("createFormServerNameAlisesEmpty")}),(0,n.jsx)(R.Z,{name:["enableSSL","serverName"],children:function(E){var r=E.enableSSL,g=E.serverName;if(r)return(0,n.jsxs)(j.Z.Compact,{children:[(0,n.jsx)(oe.Z,{label:o.format("createFormCertName"),width:"lg",name:"certName",fieldProps:{labelRender:function(m){return m.value}},required:!0,rules:[{required:!0}],request:i()(s()().mark(function ee(){var m;return s()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,(0,C.dZ)();case 2:return m=w.sent,w.abrupt("return",m.data&&m.data.list.map(function(he,H){return{label:(0,n.jsx)(j.Z,{wrap:!0,children:he.domain.map(function(Ee,je){return(0,n.jsx)(Z.Z,{children:Ee})})},H),value:"".concat(he.domain[0])}}));case 4:case"end":return w.stop()}},ee)}))},z),(0,n.jsx)(f.Z,{label:" ",children:(0,n.jsx)(J.Z,{domain:g?[g]:[],onFinish:function(){S(z+1)}})})]})}}),(0,n.jsx)(u.Z.Group,{label:o.format("createFormType"),name:"type",initialValue:"proxy",options:o.option("createFormTypeOption",["proxy","redirect","fpm"]),fieldProps:{onChange:function(E){var r,g;(r=b.current)===null||r===void 0||r.setFieldValue("containerId",""),(g=b.current)===null||g===void 0||g.setFieldValue("serverAddress","")}}}),(0,n.jsxs)(j.Z.Compact,{children:[(0,n.jsx)(oe.Z,{label:o.format("createFormProtocol"),tooltip:o.format("createFormProtocolTip"),initialValue:"http",name:"serverProtocol",fieldProps:{allowClear:!1},valueEnum:{http:"http",https:"https"}}),(0,n.jsx)(R.Z,{name:["containerId","type"],children:function(E){var r=E.containerId,g=E.type;return[(0,n.jsx)(ae.Z,{width:"lg",label:" ",name:"serverAddress",placeholder:o.format("createFormServerAddressEmpty"),required:!0,disabled:r,rules:[{required:!0}]},"serverAddress"),g!="redirect"&&(0,n.jsxs)(j.Z.Compact,{children:[(0,n.jsx)(f.Z,{label:" ",name:"containerId",children:(0,n.jsx)(Pe,{onSelect:function(){var ee=i()(s()().mark(function m(ne){var w,he,H,Ee,je,Ie,Re;return s()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:(w=b.current)===null||w===void 0||w.setFieldValue("serverAddress",ne.Name),(he=b.current)===null||he===void 0||he.setFieldValue("containerId",ne.Id),console.log((H=ne.Config.Labels)===null||H===void 0?void 0:H["com.docker.compose.project"]),g=="fpm"&&(Ee=ne.Config.Labels)!==null&&Ee!==void 0&&Ee["com.docker.compose.project"]&&((je=b.current)===null||je===void 0||je.setFieldValue("wwwRoot","/dpanel/compose/".concat((Ie=ne.Config.Labels)===null||Ie===void 0?void 0:Ie["com.docker.compose.project"],"/wwwroot")),(Re=b.current)===null||Re===void 0||Re.setFieldValue("fpmRoot","/www"));case 4:case"end":return fe.stop()}},m)}));return function(m){return ee.apply(this,arguments)}}()})}),(0,n.jsx)(f.Z,{label:" ",children:(0,n.jsx)(O.ZP,{onClick:function(){var m,ne;(m=b.current)===null||m===void 0||m.setFieldValue("containerId",""),(ne=b.current)===null||ne===void 0||ne.setFieldValue("serverAddress","")},children:o.format("createUser")})})]},"selectContainer")]}})]}),(0,n.jsx)(ce.Z,{label:o.format("createFormPort"),name:"port",placeholder:o.format("createFormPortEmpty")}),(0,n.jsx)(R.Z,{name:["type"],children:function(E){var r=E.type;if(r=="fpm")return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ae.Z,{name:"wwwRoot",label:"\u7F51\u7AD9\u6839\u76EE\u5F55",tooltip:"\u5FC5\u987B\u4F7F\u7528 DPanel \u5BB9\u5668\u5185\u7684\u8DEF\u5F84\u914D\u7F6E\u7F51\u7AD9\u6839\u76EE\u5F55",placeholder:"/dpanel/wwwroot"}),(0,n.jsx)(ae.Z,{name:"fpmRoot",label:"FPM \u6839\u76EE\u5F55",tooltip:"\u76F8\u5BF9\u4E8E FPM \u5BB9\u5668\u4E2D\u7684\u6587\u4EF6\u76EE\u5F55"})]})}}),(0,n.jsx)(R.Z,{name:["type"],children:function(E){var r=E.type;return r!="redirect"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(X.Z,{children:[(0,n.jsx)(W.Z,{span:12,children:(0,n.jsx)($.Z,{label:o.format("createFormEnableBlockCommonExploits"),name:"enableBlockCommonExploits"})}),(0,n.jsx)(W.Z,{children:(0,n.jsx)($.Z,{width:"md",label:o.format("createFormEnableAssetCache"),name:"enableAssetCache"})})]}),(0,n.jsx)(X.Z,{children:(0,n.jsx)(W.Z,{span:12,children:(0,n.jsx)($.Z,{label:o.format("createFormEnableWs"),name:"enableWs",initialValue:!0})})})]})}})]})},{key:"3",label:"vhost.conf",destroyOnHidden:!0,children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.Z,{message:o.format("createVhostTip"),showIcon:!0}),(0,n.jsx)(f.Z,{name:"vhost",label:" ",children:(0,n.jsx)(te.ZP,{height:"600px",theme:"dark",style:{backgroundColor:"#282c34"},onChange:function(){}})})]})}]})})}),ge=_e,be=e(5251),Ce=e(83062),xe=e(38703);function De(I){var V,k=0;if(I.sslCrtCreatedAt&&I.sslCrtRenewAt){var G,M,ie=new Date,b=new Date((G=I.sslCrtRenewAt)!==null&&G!==void 0?G:""),le=new Date((M=I.sslCrtCreatedAt)!==null&&M!==void 0?M:""),K=Math.ceil((b.getTime()-le.getTime())/86400/1e3),x=Math.ceil((ie.getTime()-le.getTime())/86400/1e3);k=Math.min(Math.ceil(x/K*100),100)}return I.certName?(0,n.jsx)(Ce.Z,{placement:"right",title:"".concat(Y.FD.format("listExpireAt"),": ").concat((0,be.NF)((V=I.sslCrtRenewAt)!==null&&V!==void 0?V:"")),children:(0,n.jsx)(Z.Z,{icon:(0,n.jsxs)(j.Z,{children:[(0,n.jsx)(xe.Z,{type:"circle",percent:k,status:k==100?"exception":"active",strokeWidth:20,size:14}),(0,n.jsx)("span",{})]}),children:I.certName})}):"-"}var t=e(80821),a=e(37413),p=e(98510),h=e(86548),_=e(74453),U=e(82346),se=e(96074),de=e(25593),pe=e(50136);function ue(){var I=(0,y.useRef)(),V=(0,y.useRef)(),k=(0,y.useState)({}),G=P()(k,2),M=G[0],ie=G[1],b=(0,U.useAccess)(),le=new Y.Uo("app");return(0,n.jsx)(_._z,{extra:[(0,n.jsx)(D.u,{access:"canSeeContainerDomainManage",children:(0,n.jsx)(ge,{ref:V,onFinish:i()(s()().mark(function K(){var x,d;return s()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return!((x=I.current)===null||x===void 0)&&x.reloadAndRest&&((d=I.current)===null||d===void 0||d.reloadAndRest()),Q.next=3,(0,C.hZ)();case 3:case"end":return Q.stop()}},K)}))},"addDomain")},"addDomain"),(0,n.jsx)(D.u,{access:"canSeeContainerDomainManage",children:(0,n.jsx)(t.Z,{tips:le.format("domainRestartNginxTip"),action:i()(s()().mark(function K(){return s()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,C.hZ)();case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},K)})),children:le.format("domainRestartNginx")},"nginx")},"nginx")],children:(0,n.jsx)(p.C,{rowKey:"id",actionRef:I,columns:[{title:Y.FD.format("listDomain"),dataIndex:"serverName",render:function(x,d,me,Q,z){var S=[];return d.serverName&&S.push(d.setting.enableSSL?"https://"+d.serverName:"http://"+d.serverName),d.setting.serverNameAlias&&d.setting.serverNameAlias.map(function(o){S.push(d.setting.enableSSL?"https://"+o:"http://"+o)}),(0,n.jsx)(a.Z,{domain:S,domainTitle:"".concat(d.serverName," (").concat(S.length,")")})}},{title:Y.FD.format("listTargetAddress"),search:!1,render:function(x,d,me,Q,z){return"".concat(d.setting.serverAddress,":").concat(d.setting.port)}},{title:Y.FD.format("listCert"),search:!0,dataIndex:"certName",width:300,valueEnum:M,render:function(x,d,me,Q,z){return d.setting.enableSSL?(0,n.jsx)(De,{certName:d.setting.certName,sslCrtRenewAt:d.setting.sslCrtRenewAt,sslCrtCreatedAt:d.setting.sslCrtCreatedAt}):"-"}},{title:Y.FD.format("listCreatedAt"),search:!1,width:180,ellipsis:!0,dataIndex:"createdAt",render:function(x,d,me,Q,z){return(0,be.NF)(d.createdAt)}},{title:Y.FD.format("listManage"),key:"option",width:50,search:!1,fixed:"right",hidden:!b.canSeeContainerDomainManage,render:function(x,d,me,Q){return(0,n.jsx)(j.Z,{split:(0,n.jsx)(se.Z,{type:"vertical"}),children:(0,n.jsx)(de.Z.Link,{onClick:function(){var S;return(S=V.current)===null||S===void 0||S.showEdit(d.id),!0},children:(0,n.jsx)(Ce.Z,{title:Y.FD.format("listManageEdit"),children:(0,n.jsx)(h.Z,{})})},"edit")})}}],request:function(){var K=i()(s()().mark(function x(d,me,Q){var z,S,o;return s()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,C.i7)({serverName:d.serverName,certName:d.certName});case 2:return z=E.sent,E.next=5,(0,C.dZ)();case 5:return S=E.sent,o={},z.data.list.map(function(r){r.setting.certName&&typeof r.setting.certName=="string"&&(o[r.setting.certName]=r.setting.certName)}),ie(o),E.abrupt("return",{data:z.data.list&&z.data.list.map(function(r){if(S&&S.data.list){var g,ee;r.setting.sslCrtCreatedAt=(g=S.data.list.find(function(m){return m.domain[0]==r.setting.certName}))===null||g===void 0?void 0:g.createdAt,r.setting.sslCrtRenewAt=(ee=S.data.list.find(function(m){return m.domain[0]==r.setting.certName}))===null||ee===void 0?void 0:ee.renewAt}return r}),success:!0,total:z.data.list.length});case 10:case"end":return E.stop()}},x)}));return function(x,d,me){return K.apply(this,arguments)}}(),rowSelection:b.canSeeContainerDomainManage?{defaultSelectedRowKeys:[],alwaysShowAlert:!0}:void 0,quickToolbarRender:function(x){var d=x.selectedRows,me=x.finish,Q=x.loading;return[(0,n.jsx)(t.Z,{buttonProps:{danger:!0,type:"primary"},confirmProps:{showCommonConfirm:!0},action:i()(s()().mark(function z(){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return Q(),o.abrupt("return",Promise.all([(0,C.dj)({id:d.map(function(q){return q.id})}),(0,C.hZ)()]).finally(function(){me(!0)}));case 2:case"end":return o.stop()}},z)})),onSuccess:function(){var S,o;return!((S=I.current)===null||S===void 0)&&S.reloadAndRest&&((o=I.current)===null||o===void 0||o.reloadAndRest()),!0},onError:function(){var S,o;return!((S=I.current)===null||S===void 0)&&S.reset&&((o=I.current)===null||o===void 0||o.reset()),!0},children:Y.FD.format("listManageDeleteBatch")},"batchDelete")]},tableExtraRender:function(){return(0,n.jsx)(pe.Z,{mode:"horizontal",selectedKeys:["domain"],items:[{label:(0,n.jsx)(U.Link,{to:"/app/domain/list",replace:!0,children:Y.Ob.format("container.domain.list")}),key:"domain"},{label:(0,n.jsx)(U.Link,{to:"/app/domain/cert",replace:!0,children:Y.Ob.format("container.domain.cert")}),key:"cert"}]})}},"domain-list")})}},13822:function(ve,F,e){e.d(F,{IE:function(){return L},IW:function(){return C},KK:function(){return ce},LJ:function(){return te},RF:function(){return j},Re:function(){return A},aF:function(){return X},eE:function(){return oe},jV:function(){return ae}});var c=e(5574),s=e.n(c),N=e(15009),i=e.n(N),T=e(99289),P=e.n(T),D=e(82346);function C(v){return B.apply(this,arguments)}function B(){return B=P()(i()().mark(function v(y){return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,D.request)("/api/app/container/status",{method:"POST",data:y}));case 1:case"end":return l.stop()}},v)})),B.apply(this,arguments)}function L(v){return R.apply(this,arguments)}function R(){return R=P()(i()().mark(function v(y){return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,D.request)("/api/app/container/get-list",{data:y,method:"POST"}));case 1:case"end":return l.stop()}},v)})),R.apply(this,arguments)}function ae(v){return f.apply(this,arguments)}function f(){return f=P()(i()().mark(function v(y){return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,D.request)("/api/app/container/get-detail",{data:y,method:"POST"}));case 1:case"end":return l.stop()}},v)})),f.apply(this,arguments)}function oe(v){return u.apply(this,arguments)}function u(){return u=P()(i()().mark(function v(y){return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,D.request)("/api/app/container/update",{data:y,method:"POST"}));case 1:case"end":return l.stop()}},v)})),u.apply(this,arguments)}function ce(){return $.apply(this,arguments)}function $(){return $=P()(i()().mark(function v(){return i()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.abrupt("return",(0,D.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return J.stop()}},v)})),$.apply(this,arguments)}function te(v){return O.apply(this,arguments)}function O(){return O=P()(i()().mark(function v(y){return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!y.enableExportToPath){l.next=2;break}return l.abrupt("return",(0,D.request)("/api/app/container/export",{method:"GET",params:y}));case 2:return l.abrupt("return",new Promise(function(Y,Oe){var n=localStorage.getItem("token"),Pe=new URLSearchParams;Pe.append("token",n||""),Object.entries(y).forEach(function(be){var Ce=s()(be,2),xe=Ce[0],De=Ce[1];Pe.append(xe,String(De))});var _e="/api/app/container/export?".concat(Pe.toString()),ge=document.createElement("iframe");ge.style.display="none",ge.src=_e,document.body.appendChild(ge),setTimeout(function(){ge.parentElement&&document.body.removeChild(ge)},5e3),Y({code:200,data:"success",error:""})}));case 3:case"end":return l.stop()}},v)})),O.apply(this,arguments)}function A(v){return re.apply(this,arguments)}function re(){return re=P()(i()().mark(function v(y){return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,D.request)("/api/app/container/commit",{method:"POST",data:y}));case 1:case"end":return l.stop()}},v)})),re.apply(this,arguments)}function j(v){return Z.apply(this,arguments)}function Z(){return Z=P()(i()().mark(function v(y){return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,D.request)("/api/app/container/upgrade",{method:"POST",data:y}));case 1:case"end":return l.stop()}},v)})),Z.apply(this,arguments)}function X(v){return W.apply(this,arguments)}function W(){return W=P()(i()().mark(function v(y){return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,D.request)("/api/app/container/copy",{method:"POST",data:y}));case 1:case"end":return l.stop()}},v)})),W.apply(this,arguments)}},40056:function(ve,F,e){e.d(F,{Z:function(){return De}});var c=e(67294),s=e(89739),N=e(4340),i=e(97937),T=e(21640),P=e(78860),D=e(93967),C=e.n(D),B=e(29372),L=e(64217),R=e(42550),ae=e(96159),f=e(53124),oe=e(11568),u=e(14747),ce=e(83559);const $=(t,a,p,h,_)=>({background:t,border:`${(0,oe.bf)(h.lineWidth)} ${h.lineType} ${a}`,[`${_}-icon`]:{color:p}}),te=t=>{const{componentCls:a,motionDurationSlow:p,marginXS:h,marginSM:_,fontSize:U,fontSizeLG:se,lineHeight:de,borderRadiusLG:pe,motionEaseInOutCirc:ue,withDescriptionIconSize:I,colorText:V,colorTextHeading:k,withDescriptionPadding:G,defaultPadding:M}=t;return{[a]:Object.assign(Object.assign({},(0,u.Wf)(t)),{position:"relative",display:"flex",alignItems:"center",padding:M,wordWrap:"break-word",borderRadius:pe,[`&${a}-rtl`]:{direction:"rtl"},[`${a}-content`]:{flex:1,minWidth:0},[`${a}-icon`]:{marginInlineEnd:h,lineHeight:0},"&-description":{display:"none",fontSize:U,lineHeight:de},"&-message":{color:k},[`&${a}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${p} ${ue}, opacity ${p} ${ue},
        padding-top ${p} ${ue}, padding-bottom ${p} ${ue},
        margin-bottom ${p} ${ue}`},[`&${a}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${a}-with-description`]:{alignItems:"flex-start",padding:G,[`${a}-icon`]:{marginInlineEnd:_,fontSize:I,lineHeight:0},[`${a}-message`]:{display:"block",marginBottom:h,color:k,fontSize:se},[`${a}-description`]:{display:"block",color:V}},[`${a}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},O=t=>{const{componentCls:a,colorSuccess:p,colorSuccessBorder:h,colorSuccessBg:_,colorWarning:U,colorWarningBorder:se,colorWarningBg:de,colorError:pe,colorErrorBorder:ue,colorErrorBg:I,colorInfo:V,colorInfoBorder:k,colorInfoBg:G}=t;return{[a]:{"&-success":$(_,h,p,t,a),"&-info":$(G,k,V,t,a),"&-warning":$(de,se,U,t,a),"&-error":Object.assign(Object.assign({},$(I,ue,pe,t,a)),{[`${a}-description > pre`]:{margin:0,padding:0}})}}},A=t=>{const{componentCls:a,iconCls:p,motionDurationMid:h,marginXS:_,fontSizeIcon:U,colorIcon:se,colorIconHover:de}=t;return{[a]:{"&-action":{marginInlineStart:_},[`${a}-close-icon`]:{marginInlineStart:_,padding:0,overflow:"hidden",fontSize:U,lineHeight:(0,oe.bf)(U),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${p}-close`]:{color:se,transition:`color ${h}`,"&:hover":{color:de}}},"&-close-text":{color:se,transition:`color ${h}`,"&:hover":{color:de}}}}},re=t=>({withDescriptionIconSize:t.fontSizeHeading3,defaultPadding:`${t.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${t.paddingMD}px ${t.paddingContentHorizontalLG}px`});var j=(0,ce.I$)("Alert",t=>[te(t),O(t),A(t)],re),Z=function(t,a){var p={};for(var h in t)Object.prototype.hasOwnProperty.call(t,h)&&a.indexOf(h)<0&&(p[h]=t[h]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _=0,h=Object.getOwnPropertySymbols(t);_<h.length;_++)a.indexOf(h[_])<0&&Object.prototype.propertyIsEnumerable.call(t,h[_])&&(p[h[_]]=t[h[_]]);return p};const X={success:s.Z,info:P.Z,error:N.Z,warning:T.Z},W=t=>{const{icon:a,prefixCls:p,type:h}=t,_=X[h]||null;return a?(0,ae.wm)(a,c.createElement("span",{className:`${p}-icon`},a),()=>({className:C()(`${p}-icon`,a.props.className)})):c.createElement(_,{className:`${p}-icon`})},v=t=>{const{isClosable:a,prefixCls:p,closeIcon:h,handleClose:_,ariaProps:U}=t,se=h===!0||h===void 0?c.createElement(i.Z,null):h;return a?c.createElement("button",Object.assign({type:"button",onClick:_,className:`${p}-close-icon`,tabIndex:0},U),se):null};var J=c.forwardRef((t,a)=>{const{description:p,prefixCls:h,message:_,banner:U,className:se,rootClassName:de,style:pe,onMouseEnter:ue,onMouseLeave:I,onClick:V,afterClose:k,showIcon:G,closable:M,closeText:ie,closeIcon:b,action:le,id:K}=t,x=Z(t,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[d,me]=c.useState(!1),Q=c.useRef(null);c.useImperativeHandle(a,()=>({nativeElement:Q.current}));const{getPrefixCls:z,direction:S,closable:o,closeIcon:q,className:E,style:r}=(0,f.dj)("alert"),g=z("alert",h),[ee,m,ne]=j(g),w=fe=>{var ye;me(!0),(ye=t.onClose)===null||ye===void 0||ye.call(t,fe)},he=c.useMemo(()=>t.type!==void 0?t.type:U?"warning":"info",[t.type,U]),H=c.useMemo(()=>typeof M=="object"&&M.closeIcon||ie?!0:typeof M=="boolean"?M:b!==!1&&b!==null&&b!==void 0?!0:!!o,[ie,b,M,o]),Ee=U&&G===void 0?!0:G,je=C()(g,`${g}-${he}`,{[`${g}-with-description`]:!!p,[`${g}-no-icon`]:!Ee,[`${g}-banner`]:!!U,[`${g}-rtl`]:S==="rtl"},E,se,de,ne,m),Ie=(0,L.Z)(x,{aria:!0,data:!0}),Re=c.useMemo(()=>typeof M=="object"&&M.closeIcon?M.closeIcon:ie||(b!==void 0?b:typeof o=="object"&&o.closeIcon?o.closeIcon:q),[b,M,ie,q]),Me=c.useMemo(()=>{const fe=M!=null?M:o;if(typeof fe=="object"){const{closeIcon:ye}=fe;return Z(fe,["closeIcon"])}return{}},[M,o]);return ee(c.createElement(B.ZP,{visible:!d,motionName:`${g}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:fe=>({maxHeight:fe.offsetHeight}),onLeaveEnd:k},({className:fe,style:ye},Se)=>c.createElement("div",Object.assign({id:K,ref:(0,R.sQ)(Q,Se),"data-show":!d,className:C()(je,fe),style:Object.assign(Object.assign(Object.assign({},r),pe),ye),onMouseEnter:ue,onMouseLeave:I,onClick:V,role:"alert"},Ie),Ee?c.createElement(W,{description:p,icon:t.icon,prefixCls:g,type:he}):null,c.createElement("div",{className:`${g}-content`},_?c.createElement("div",{className:`${g}-message`},_):null,p?c.createElement("div",{className:`${g}-description`},p):null),le?c.createElement("div",{className:`${g}-action`},le):null,c.createElement(v,{isClosable:H,prefixCls:g,closeIcon:Re,handleClose:w,ariaProps:Me}))))}),l=e(15671),Y=e(43144),Oe=e(61120),n=e(78814),Pe=e(82963);function _e(t,a,p){return a=(0,Oe.Z)(a),(0,Pe.Z)(t,(0,n.Z)()?Reflect.construct(a,p||[],(0,Oe.Z)(t).constructor):a.apply(t,p))}var ge=e(60136),Ce=function(t){function a(){var p;return(0,l.Z)(this,a),p=_e(this,a,arguments),p.state={error:void 0,info:{componentStack:""}},p}return(0,ge.Z)(a,t),(0,Y.Z)(a,[{key:"componentDidCatch",value:function(h,_){this.setState({error:h,info:_})}},{key:"render",value:function(){const{message:h,description:_,id:U,children:se}=this.props,{error:de,info:pe}=this.state,ue=(pe==null?void 0:pe.componentStack)||null,I=typeof h=="undefined"?(de||"").toString():h,V=typeof _=="undefined"?ue:_;return de?c.createElement(J,{id:U,type:"error",message:I,description:c.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},V)}):se}}])}(c.Component);const xe=J;xe.ErrorBoundary=Ce;var De=xe}}]);
