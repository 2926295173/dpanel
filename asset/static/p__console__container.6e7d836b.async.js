"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9969],{49610:function(w,E,n){var y=n(5574),t=n.n(y),l=n(67294),_=n(52626),u=n(12320),M=n.n(u),h=n(78267),A=n.n(h),v=n(12323),O=n(87662),D=n(82346),b=n(85893),a,o=new u.Terminal(v.Xq),c=new h.FitAddon,P,f=(0,l.forwardRef)(function(j,T){var C,S=(0,l.useState)(),W=t()(S,2),L=W[0],r=W[1],i=(0,l.useState)(""),s=t()(i,2),e=s[0],U=s[1],k=(0,D.useAccess)();(0,l.useImperativeHandle)(T,function(){return{start:function(m,d){R(),d.width=o.cols,d.height=o.rows;var I=d?Object.keys(d).filter(function(g){return d&&d[g]}).map(function(g){if(d&&d[g])return"".concat(g,"=").concat(d[g])}):[];a=new WebSocket((0,_.R)(m+"?"+I.join("&"))),a.addEventListener("message",function(g){var B=JSON.parse(g.data),K=B.type;if(K==m&&(o.write(B.data),B.data.indexOf("exec failed")!=-1)){R();return}}),P=o.onData(function(g){var B={content:{command:g},type:m};a&&a.send(JSON.stringify(B))}),U(m),r(d)},close:function(){R()},fit:function(){return c.fit(),{width:o.cols,height:o.rows}},run:function(m){L&&m&&m.forEach(function(d){var I={content:{command:d+`
`},type:e};a&&a.send(JSON.stringify(I))})},option:function(m){return m&&Object.assign(o.options,m),o.options}}}),(0,l.useEffect)(function(){return o.loadAddon(c),o.open(document.getElementById("terminal-container-console")),c.fit(),(0,O.pe)({groupName:"setting",name:"themeConsoleConfig"}).then(function(p){p.data&&(k.canSeeEnableCe&&Object.assign(p.data,{theme:{}}),Object.assign(o.options,p.data))}),function(){R()}},[]),(0,l.useEffect)(function(){window.addEventListener("resize",function(){c.fit();var p={size:{width:o.cols,height:o.rows},type:e};e&&a&&a.send(JSON.stringify(p))})},[e]);function R(){o.reset(),c.fit(),o.focus(),P&&P.dispose(),a&&(a.close(),a=null)}return(0,b.jsx)("div",{style:{height:(C=j.height)!==null&&C!==void 0?C:"100vh"},id:"terminal-container-console"})});E.Z=f},12323:function(w,E,n){n.d(E,{Xq:function(){return t},nS:function(){return l}});var y=null,t={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},l=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},15563:function(w,E,n){n.r(E),n.d(E,{default:function(){return v}});var y=n(5574),t=n.n(y),l=n(49610),_=n(13822),u=n(5251),M=n(82346),h=n(67294),A=n(85893);function v(){var O=(0,M.useParams)(),D=(0,M.useSearchParams)(),b=t()(D,2),a=b[0],o=b[1],c=(0,h.useRef)();return(0,h.useEffect)(function(){O.id&&(0,_.jV)({md5:O.id}).then(function(P){var f;window.document.title="console - ".concat((0,u.fi)(P.data.info.Name,"/")),O.id&&((f=c.current)===null||f===void 0||f.start("/console/container/".concat(P.data.info.Id),{cmd:a.get("cmd"),workDir:a.get("workDir")}))}),document.body.style.overflow="hidden"},[]),(0,A.jsx)(l.Z,{ref:c})}},13822:function(w,E,n){n.d(E,{IE:function(){return A},IW:function(){return M},KK:function(){return o},LJ:function(){return P},RF:function(){return C},Re:function(){return j},aF:function(){return W},eE:function(){return b},jV:function(){return O}});var y=n(15009),t=n.n(y),l=n(99289),_=n.n(l),u=n(82346);function M(r){return h.apply(this,arguments)}function h(){return h=_()(t()().mark(function r(i){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/app/container/status",{method:"POST",data:i}));case 1:case"end":return e.stop()}},r)})),h.apply(this,arguments)}function A(r){return v.apply(this,arguments)}function v(){return v=_()(t()().mark(function r(i){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/app/container/get-list",{data:i,method:"POST"}));case 1:case"end":return e.stop()}},r)})),v.apply(this,arguments)}function O(r){return D.apply(this,arguments)}function D(){return D=_()(t()().mark(function r(i){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/app/container/get-detail",{data:i,method:"POST"}));case 1:case"end":return e.stop()}},r)})),D.apply(this,arguments)}function b(r){return a.apply(this,arguments)}function a(){return a=_()(t()().mark(function r(i){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/app/container/update",{data:i,method:"POST"}));case 1:case"end":return e.stop()}},r)})),a.apply(this,arguments)}function o(){return c.apply(this,arguments)}function c(){return c=_()(t()().mark(function r(){return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,u.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return s.stop()}},r)})),c.apply(this,arguments)}function P(r){return f.apply(this,arguments)}function f(){return f=_()(t()().mark(function r(i){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/app/container/export",{method:"POST",data:i,responseType:"blob"}));case 1:case"end":return e.stop()}},r)})),f.apply(this,arguments)}function j(r){return T.apply(this,arguments)}function T(){return T=_()(t()().mark(function r(i){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/app/container/commit",{method:"POST",data:i}));case 1:case"end":return e.stop()}},r)})),T.apply(this,arguments)}function C(r){return S.apply(this,arguments)}function S(){return S=_()(t()().mark(function r(i){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/app/container/upgrade",{method:"POST",data:i}));case 1:case"end":return e.stop()}},r)})),S.apply(this,arguments)}function W(r){return L.apply(this,arguments)}function L(){return L=_()(t()().mark(function r(i){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/app/container/copy",{method:"POST",data:i}));case 1:case"end":return e.stop()}},r)})),L.apply(this,arguments)}}}]);
