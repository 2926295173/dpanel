"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1050],{80821:function(X,$,n){n.d($,{Z:function(){return j}});var z=n(5574),P=n.n(z),K=n(24963),s=n(86738),_=n(28036),A=n(83062),R=n(67294),I=n(85893);function j(t){var U=(0,R.useState)(!1),C=P()(U,2),h=C[0],e=C[1],W=(0,R.useContext)(K.Z),x=W.lang,o=W.notice,w=W.message,L=function(){e(!0);var ne=t.action();ne instanceof Promise?ne.then(function(H){if(e(!1),H){typeof t.onSuccess=="function"&&t.onSuccess(H);var N="";t.messageSuccess?typeof t.messageSuccess=="function"?N=t.messageSuccess(H):N=t.messageSuccess.indexOf("notification.")==0?x(t.messageSuccess):t.messageSuccess:N=x("notification.finish"),t.asynced?w.info(N):w.success(N)}}).catch(function(H){e(!1),typeof t.onError=="function"&&t.onError(H)}):e(!1)};return t.confirm?(0,I.jsx)(s.Z,{style:{width:500},title:t.confirmTitle?t.confirmTitle:x("notification.title.tip"),description:typeof t.confirm=="string"&&t.confirm.indexOf("notification.")==0?x(t.confirm):t.confirm,onConfirm:L,okText:"Yes",cancelText:"No",onOpenChange:t.confirmOnOpenChange,children:(0,I.jsx)(_.ZP,{block:t.block,disabled:t.disabled,icon:t.icon,loading:h,danger:t.danger,type:t.type,children:t.children})}):(0,I.jsx)(A.Z,{title:t.tips,children:(0,I.jsx)(_.ZP,{block:t.block,style:t.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:t.disabled,icon:t.icon,loading:h,onClick:L,danger:t.danger,type:t.type,children:t.children})})}},44349:function(X,$,n){var z=n(97857),P=n.n(z),K=n(17186),s=n(5966),_=n(86250),A=n(67294),R=n(85893),I=(0,A.forwardRef)(function(j,t){var U=(0,A.useRef)();(0,A.useImperativeHandle)(t,function(){return{addItem:function(e,W){var x,o=(x=U.current)===null||x===void 0?void 0:x.getList(),w=!1;if(o==null||o.map(function(v){if(v.name==e){w=!0;return}}),!w){var L;(L=U.current)===null||L===void 0||L.add({name:e,value:W})}},clear:function(){var e;(e=U.current)===null||e===void 0||(e=e.getList())===null||e===void 0||e.map(function(W,x){var o;(o=U.current)===null||o===void 0||o.remove(x)})}}});var C={};return j.hideCopyButton===!0&&(C.copyIconProps=!1),j.hideDeleteButton===!0&&(C.deleteIconProps=!1),(0,R.jsx)(K.u,P()(P()({initialValue:j.initialValue,label:j.label,name:j.name,actionRef:U,creatorButtonProps:j.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(j.label?j.label:j.name)}:!1,min:j.min?j.min:0},C),{},{children:function(e,W,x){return(0,R.jsx)(_.Z,{justify:j.justify,gap:j.gap,children:j.items.map(function(o){return o.render?(0,R.jsx)("div",{children:o.render&&o.render(e,W,x)},"".concat(j.name,"-").concat(o.name,"-").concat(e.key)):(0,R.jsx)(s.Z,{width:o.width,name:o.name,label:o.label,required:o.required,rules:[{required:o.required}],disabled:o.disabled,placeholder:o.placeholder},"".concat(j.name,"-").concat(o.name,"-").concat(e.key))})})}}))});$.Z=I},34879:function(X,$,n){n.d($,{Z:function(){return s}});var z=n(97961),P=n(1677),K=n(85893);function s(_){return(0,K.jsx)(K.Fragment,{children:(0,K.jsx)(P.Z,{max:1,title:_.title,label:_.label,required:_.required,rules:[{required:_.required}],fieldProps:{name:"file",accept:_.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(R){return new Promise(function(I){var j;(0,z._2)({path:(j=R.response.data.path)!==null&&j!==void 0?j:""}).then(function(t){I(!0)})})}},name:_.name})})}},24963:function(X,$,n){var z=n(67294),P=(0,z.createContext)({});$.Z=P},78820:function(X,$,n){n.r($),n.d($,{default:function(){return Oe}});var z=n(5574),P=n.n(z),K=n(15009),s=n.n(K),_=n(99289),A=n.n(_),R=n(24963),I=n(87662),j=n(88641),t=n(38345),U=n(97269),C=n(5966),h=n(67294),e=n(85893);function W(){var b=(0,h.useRef)(),E=(0,h.useContext)(R.Z),y=E.message,u=function(){var V=A()(s()().mark(function O(){var l,S,g,B,F,T;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,I.pe)({groupName:"setting",name:"emailServer"});case 2:T=a.sent,T.data.setting.value.emailServer&&((l=b.current)===null||l===void 0||l.setFieldsValue({host:(S=T.data.setting.value.emailServer.host)!==null&&S!==void 0?S:"",port:(g=T.data.setting.value.emailServer.port)!==null&&g!==void 0?g:"",email:(B=T.data.setting.value.emailServer.email)!==null&&B!==void 0?B:"",code:(F=T.data.setting.value.emailServer.code)!==null&&F!==void 0?F:""}));case 4:case"end":return a.stop()}},O)}));return function(){return V.apply(this,arguments)}}();return(0,e.jsx)(t.Z,{direction:"column",gutter:[0,10],ghost:!0,children:(0,e.jsx)(t.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(j.Z,{}),subTitle:"\u90AE\u4EF6\u670D\u52A1",children:(0,e.jsxs)(U.A,{layout:"horizontal",labelAlign:"right",labelCol:{span:5,offset:0},formRef:b,onInit:A()(s()().mark(function V(){return s()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return u(),l.abrupt("return",!0);case 2:case"end":return l.stop()}},V)})),onFinish:function(){var V=A()(s()().mark(function O(l){var S,g;return s()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return g={groupName:"setting",name:"emailServer",value:{emailServer:{host:l.host,port:l.port,email:l.email,code:l.code}}},F.next=3,(0,I.KU)(g);case 3:return(S=b.current)===null||S===void 0||S.resetFields(),u(),y.success("\u4FEE\u6539\u90AE\u4EF6\u914D\u7F6E\u6210\u529F"),F.abrupt("return",!0);case 7:case"end":return F.stop()}},O)}));return function(O){return V.apply(this,arguments)}}(),children:[(0,e.jsx)(C.Z,{label:"SMTP\u670D\u52A1\u5668\u5730\u5740",name:"host",placeholder:"\u4F8B\u5982:smtp.163.com"}),(0,e.jsx)(C.Z,{label:"SMTP\u670D\u52A1\u5668\u7AEF\u53E3",name:"port",placeholder:"\u53D1\u9001\u90AE\u4EF6\u7AEF\u53E3\uFF0C\u901A\u5E38\u4E3A465"}),(0,e.jsx)(C.Z,{label:"\u53D1\u4EF6\u90AE\u7BB1",name:"email",placeholder:"\u53D1\u4EF6\u90AE\u7BB1\u5730\u5740"}),(0,e.jsx)(C.Z,{label:"SMTP\u6388\u6743\u7801",name:"code",placeholder:"SMTP\u6388\u6743\u7801"})]})})})}var x=n(82346);function o(b){return w.apply(this,arguments)}function w(){return w=A()(s()().mark(function b(E){return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,x.request)("/api/pro/two-fa/enable",{method:"POST",data:E}));case 1:case"end":return u.stop()}},b)})),w.apply(this,arguments)}function L(){return v.apply(this,arguments)}function v(){return v=A()(s()().mark(function b(){return s()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,x.request)("/api/pro/two-fa/get-setting",{method:"POST"}));case 1:case"end":return y.stop()}},b)})),v.apply(this,arguments)}var ne=n(29177),H=n(86548),N=n(97937),de=n(12119),q=n(97462),le=n(52688),J=n(62370),re=n(28036),me=n(35930);function fe(){var b=(0,h.useRef)(),E=(0,x.useModel)("@@initialState"),y=E.initialState,u=E.loading,V=E.error,O=E.refresh,l=E.setInitialState,S=(0,h.useContext)(R.Z),g=S.message,B=S.notice,F=S.lang,T=(0,h.useRef)(),D=(0,h.useState)(0),a=P()(D,2),i=a[0],m=a[1],f=(0,x.useAccess)();return(0,h.useEffect)(function(){!f.canSeeEnableCe&&L().then(function(r){var d;(d=T.current)===null||d===void 0||d.setFieldsValue({enable:r.data.enable,email:r.data.email,qrcode:r.data.qrcode})})},[i]),(0,e.jsxs)(t.Z,{direction:"column",gutter:[0,10],ghost:!0,children:[(0,e.jsx)(t.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(ne.Z,{}),subTitle:"\u7BA1\u7406\u5458",children:(0,e.jsxs)(U.A,{layout:"horizontal",labelAlign:"right",labelCol:{span:3,offset:0},formRef:b,onFinish:function(){var r=A()(s()().mark(function d(c){var p,Z;return s()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,(0,I.Jn)({username:c.username,password:c.password,newPassword:c.newPassword});case 2:if(p=M.sent,!(p&&p.data)){M.next=9;break}return(Z=b.current)===null||Z===void 0||Z.resetFields(),g.success("\u4FEE\u6539\u7BA1\u7406\u5458\u7528\u6237\u540D\u548C\u5BC6\u7801\u6210\u529F"),localStorage.removeItem("token"),O(),M.abrupt("return",!0);case 9:case"end":return M.stop()}},d)}));return function(d){return r.apply(this,arguments)}}(),children:[(0,e.jsx)(q.Z,{name:["enableUsername"],children:function(d){var c=d.enableUsername;return(0,e.jsx)(C.Z,{label:"\u7528\u6237\u540D",name:"username",style:{width:"80%"},initialValue:y==null?void 0:y.user.username,disabled:!c,addonAfter:[(0,e.jsx)(re.ZP,{type:"link",hidden:!!c,icon:(0,e.jsx)(H.Z,{}),onClick:function(){var Z;(Z=b.current)===null||Z===void 0||Z.setFieldValue("enableUsername",!0)}},"editBtn"),(0,e.jsx)(re.ZP,{type:"link",hidden:!c,icon:(0,e.jsx)(N.Z,{}),onClick:function(){var Z;(Z=b.current)===null||Z===void 0||Z.setFieldValue("enableUsername",!1)}},"closeBtn")]},"username")}}),(0,e.jsx)(C.Z.Password,{label:"\u5F53\u524D\u5BC6\u7801",name:"password",placeholder:"\u8F93\u5165\u7BA1\u7406\u5458\u5F53\u524D\u5BC6\u7801",rules:[{required:!0}]},"password"),(0,e.jsx)(C.Z.Password,{label:"\u65B0\u5BC6\u7801",name:"newPassword"},"newPasword"),(0,e.jsx)(q.Z,{name:["newPassword"],children:function(d){var c=d.newPassword;return(0,e.jsx)(C.Z.Password,{label:"\u786E\u8BA4\u65B0\u5BC6\u7801",name:"newPassword2",dependencies:["newPassword"],rules:[{required:typeof c!="undefined"&&c!=""},function(p){var Z=p.getFieldValue;return{validator:function(M,ce){return!ce||Z("newPassword")===ce?Promise.resolve():Promise.reject(new Error("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4"))}}}]},"newPasword2")}})]})}),!f.canSeeEnableCe&&(0,e.jsx)(t.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(de.Z,{}),subTitle:"\u767B\u5F55\u53CC\u56E0\u7D20\u914D\u7F6E",children:(0,e.jsxs)(U.A,{onFinish:function(){var r=A()(s()().mark(function d(c){var p,Z;return s()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,o({email:c.email,enable:c.enable});case 2:p=M.sent,p&&p.data.qrcode&&((Z=T.current)===null||Z===void 0||Z.setFieldValue("qrcode",p.data.qrcode)),m(i+1);case 5:case"end":return M.stop()}},d)}));return function(d){return r.apply(this,arguments)}}(),formRef:T,layout:"horizontal",labelAlign:"right",labelCol:{span:3,offset:0},children:[(0,e.jsx)(le.Z,{label:"\u5F00\u542F",name:"enable"}),(0,e.jsx)(C.Z,{label:"\u90AE\u7BB1",name:"email",placeholder:"\u8BF7\u8F93\u5165\u4F60\u7684\u90AE\u7BB1",rules:[{required:!0},{type:"email"}]}),(0,e.jsx)(J.Z,{name:"qrcode",hidden:!0}),(0,e.jsx)(q.Z,{name:["qrcode"],children:function(d){var c=d.qrcode;if(c)return(0,e.jsx)(J.Z,{label:"\u7ED1\u5B9A\u4E8C\u7EF4\u7801",tooltip:"\u4F7F\u7528\u652F\u6301 2fa \u7684\u9A8C\u8BC1 App \u626B\u7801\u8BE5\u4E8C\u7EF4\u7801",children:(0,e.jsx)(me.Z,{style:{border:"#d1d9e0b3 solid 1px",padding:"10px",borderRadius:"10px"},width:200,src:"data:image/png;base64,".concat(c)})})}})]})})]})}var he=n(43215);function ve(){var b=(0,h.useRef)(),E=(0,h.useContext)(R.Z),y=E.message,u=E.notice,V=E.lang,O=function(){var l=A()(s()().mark(function S(){var g,B,F,T;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,I.pe)({groupName:"setting",name:"server"});case 2:F=a.sent,(g=b.current)===null||g===void 0||g.setFieldsValue({serverIp:(B=F.data.setting.value.serverIp)!==null&&B!==void 0?B:""}),F.data.setting.value.requestTimeout&&((T=b.current)===null||T===void 0||T.setFieldsValue({requestTimeout:F.data.setting.value.requestTimeout}));case 5:case"end":return a.stop()}},S)}));return function(){return l.apply(this,arguments)}}();return(0,e.jsx)(t.Z,{direction:"column",gutter:[0,10],ghost:!0,children:(0,e.jsx)(t.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(he.Z,{}),subTitle:"\u670D\u52A1\u5668\u5730\u5740",children:(0,e.jsx)(U.A,{layout:"horizontal",labelAlign:"right",labelCol:{span:6,offset:0},formRef:b,onInit:A()(s()().mark(function l(){return s()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return O(),g.abrupt("return",!0);case 2:case"end":return g.stop()}},l)})),onFinish:function(){var l=A()(s()().mark(function S(g){var B,F,T;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return F={groupName:"setting",name:"server",value:{serverIp:g.serverIp}},g.requestTimeout&&(F.value.requestTimeout=g.requestTimeout),a.next=4,(0,I.KU)(F);case 4:return T=a.sent,(B=b.current)===null||B===void 0||B.resetFields(),O(),y.success("\u4FEE\u6539\u670D\u52A1\u5668\u914D\u7F6E\u6210\u529F"),a.abrupt("return",!0);case 9:case"end":return a.stop()}},S)}));return function(S){return l.apply(this,arguments)}}(),children:(0,e.jsx)(C.Z,{tooltip:"\u8BBE\u7F6E\u5BBF\u4E3B\u673A\u7684Ip\u6216\u662F\u57DF\u540D\uFF0C\u7528\u4E8E\u901A\u8FC7\u7AEF\u53E3\u7684\u5F62\u5F0F\u8BBF\u95EE\u5BB9\u5668\u3002\u652F\u6301IpV4\u53CAIpV6",label:"\u5BB9\u5668\u7AEF\u53E3\u8BBF\u95EE\u5730\u5740",name:"serverIp",placeholder:"\u4F8B\u5982:192.168.1.25\u30012001:db8:1::2\u3001example.com"})})})})}var ge={xs:6,sm:6,md:6,lg:3,xl:3,xxl:3,offset:0},ie=n(43425),ee=n(86615),pe=n(64317),se=n(42075),oe=n(86125),be=n(184),k=n(24739),Ee=n(25054),te=n(31199),je=n(90672),xe=n(51663),Fe=n(9361),Ce=n(21532),Se=n(86250),ue=n(34879),Be=n(44349),ae=n(65451),Y=function(E){return(0,e.jsx)(J.Z,{name:E.name,label:E.label,tooltip:E.tooltip,children:(0,e.jsx)(xe.Z,{showText:function(u){return u.toHexString()},allowClear:!0,presets:[{label:"\u9884\u8BBE\u989C\u8272",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})})},Q={colorPrimary:"",colorTextBase:"",colorLink:"",colorBgContainer:"",colorBorder:"",colorBgElevated:"",colorBorderSecondary:"colorBorder"},Pe=["borderRadius","wireframe"],ye=(0,h.forwardRef)(function(b,E){(0,h.useImperativeHandle)(E,function(){return{show:function(){O(!0)},reset:function(){var a;(a=l.current)===null||a===void 0||a.resetFields(["siteLogo","siteTitle","siteCopyright","siteLink","bgImage","bgSize"])}}});var y=(0,h.useState)(!1),u=P()(y,2),V=u[0],O=u[1],l=(0,h.useRef)(),S=(0,h.useContext)(R.Z),g=S.message,B=S.lang,F=Fe.Z.useToken(),T=F.token;return(0,e.jsx)(Ce.ZP,{children:(0,e.jsxs)(be.a,{drawerProps:{forceRender:!0},submitter:{render:function(a,i){return(0,e.jsx)(se.Z,{children:i[1]})}},title:"\u81EA\u5B9A\u4E49\u4E3B\u9898",formRef:l,open:V,onOpenChange:function(a){var i;(i=l.current)===null||i===void 0||i.resetFields(["bgImageUpload","siteLogoUpload"]),a&&((0,ae.Py)().then(function(m){var f=m.data.config;if(f){var r;if((r=l.current)===null||r===void 0||r.setFieldsValue({siteLogo:f.siteLogo,siteTitle:f.siteTitle,siteCopyright:f.siteCopyright,siteLink:f.siteLink,bgImage:f.bgImage,loginLogo:f.loginLogo}),!f.bgImage||!f.bgImage.width||f.bgImage.width=="100%"){var d;(d=l.current)===null||d===void 0||d.setFieldValue("bgSize","full")}else{var c;(c=l.current)===null||c===void 0||c.setFieldValue("bgSize","default")}}}),Object.keys(Q).map(function(m){var f=m;Q[m]!=""&&(f=Q[m]),l!=null&&l.current&&(l==null||l.current.setFieldValue(m,T[f]))})),O(a)},name:"theme-user",onFinish:function(){var D=A()(s()().mark(function a(i){var m,f,r;return s()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r={token:{},bgImage:i.bgImage,siteLink:i.siteLink,siteTitle:(m=i.siteTitle)!==null&&m!==void 0?m:"",siteCopyright:i.siteCopyright,siteLogo:(f=i.siteLogo)!==null&&f!==void 0?f:"",loginLogo:i.loginLogo},i.siteLogoUpload&&i.siteLogoUpload.length>0&&(r.siteLogo=i.siteLogoUpload[0].response.data.path),r.bgImage||(r.bgImage={}),i.bgImageUpload&&i.bgImageUpload.length>0&&(r.bgImage.src=i.bgImageUpload[0].response.data.path),r.bgImage.width=i.bgSize=="full"?"100%":"",i.loginLogoUpload&&i.loginLogoUpload.length>0&&(r.loginLogo=i.loginLogoUpload[0].response.data.path),Object.keys(Q).map(function(p){r.token||(r.token={});var Z=p;Q[p]!=""&&(Z=Q[p]);var G=l.current&&l.current.getFieldValue(Z);G&&G.toHexString?G.cleared||(r.token[p]=G.toHexString()):r.token[p]=G}),Pe.map(function(p){r.token||(r.token={});var Z=l.current&&l.current.getFieldValue(p);r.token[p]=Z}),c.next=10,(0,ae.Z8)(r);case 10:return b.onFinish&&b.onFinish(),g.success(B("notification.finishTheme")),c.abrupt("return",!0);case 13:case"end":return c.stop()}},a)}));return function(a){return D.apply(this,arguments)}}(),children:[(0,e.jsx)(k.UW,{title:"\u76AE\u80A4\u8272\u7CFB",children:Y({name:"colorPrimary",label:"\u54C1\u724C\u8272",tooltip:"\u54C1\u724C\u8272\u662F\u4F53\u73B0\u4EA7\u54C1\u7279\u6027\u548C\u4F20\u64AD\u7406\u5FF5\u6700\u76F4\u89C2\u7684\u89C6\u89C9\u5143\u7D20\u4E4B\u4E00\u3002\u5728\u4F60\u5B8C\u6210\u54C1\u724C\u4E3B\u8272\u7684\u9009\u53D6\u4E4B\u540E\uFF0C\u4F1A\u81EA\u52A8\u5E2E\u4F60\u751F\u6210\u4E00\u5957\u5B8C\u6574\u7684\u8272\u677F\uFF0C\u5E76\u8D4B\u4E88\u5B83\u4EEC\u6709\u6548\u7684\u8BBE\u8BA1\u8BED\u4E49"})}),(0,e.jsxs)(k.UW,{children:[Y({name:"colorBgContainer",label:"\u4E3B\u7A97\u53E3\u80CC\u666F\u8272\u53CA\u900F\u660E\u5EA6"}),Y({name:"colorBgElevated",label:"\u5F39\u51FA\u7A97\u80CC\u666F\u8272\u53CA\u900F\u660E\u5EA6"})]}),(0,e.jsxs)(k.UW,{children:[Y({name:"colorTextBase",label:"\u57FA\u7840\u6587\u672C"}),Y({name:"colorLink",label:"\u94FE\u63A5\u6587\u672C"}),Y({name:"colorBorder",label:"\u8FB9\u6846\u8272"})]}),(0,e.jsx)(k.UW,{title:"\u98CE\u683C",children:(0,e.jsxs)(Se.Z,{gap:40,children:[(0,e.jsx)(le.Z,{label:"\u7EBF\u6846\u5316",name:"wireframe",initialValue:!1}),(0,e.jsx)(Ee.Z,{min:1,max:16,label:"\u5706\u89D2",initialValue:6,name:"borderRadius"})]})}),(0,e.jsx)(k.UW,{title:"\u9762\u677F"}),(0,e.jsx)(C.Z,{label:"\u6807\u9898",name:"siteTitle",placeholder:"\u5C55\u793A\u5728\u9762\u677F\u5DE6\u4E0A\u89D2\u53CA\u9875\u9762\u6807\u7B7E\uFF0C\u4E3A\u7A7A\u5219\u4E0D\u663E\u793A"}),(0,e.jsxs)(k.UW,{children:[(0,e.jsx)(ue.Z,{label:"Logo",title:"\u4E0A\u4F20 Logo",name:"siteLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(C.Z,{width:"md",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u8FDC\u7A0BUrl",name:"siteLogo"})]}),(0,e.jsxs)(k.UW,{children:[(0,e.jsx)(ue.Z,{label:"\u80CC\u666F\u56FE",title:"\u4E0A\u4F20\u80CC\u666F\u56FE",name:"bgImageUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(C.Z,{width:"md",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u8FDC\u7A0BUrl",name:["bgImage","src"]}),(0,e.jsx)(ee.Z.Group,{name:"bgSize",label:"\u5C3A\u5BF8",initialValue:"full",valueEnum:{full:"\u5168\u5C4F",default:"\u9ED8\u8BA4"}})]}),(0,e.jsx)(k.UW,{children:(0,e.jsx)(q.Z,{name:["bgSize"],children:function(a){var i=a.bgSize;if(i=="default")return(0,e.jsxs)(k.UW,{children:[(0,e.jsx)(te.Z,{width:"xs",name:["bgImage","top"],label:"\u8DDD\u9876\u90E8\u504F\u79FB\u91CF"}),(0,e.jsx)(te.Z,{width:"xs",name:["bgImage","bottom"],label:"\u8DDD\u5E95\u90E8\u504F\u79FB\u91CF"}),(0,e.jsx)(te.Z,{width:"xs",name:["bgImage","left"],label:"\u8DDD\u5DE6\u4FA7\u504F\u79FB\u91CF"}),(0,e.jsx)(te.Z,{width:"xs",name:["bgImage","right"],label:"\u8DDD\u53F3\u4FA7\u504F\u79FB\u91CF"})]})}})}),(0,e.jsx)(Be.Z,{name:"siteLink",label:"\u5E95\u90E8\u94FE\u63A5",showAddButton:!0,hideCopyButton:!0,gap:10,items:[{name:"title",label:"\u6587\u672C"},{name:"href",label:"\u94FE\u63A5"}]}),(0,e.jsx)(je.Z,{label:"\u7248\u6743\u4FE1\u606F",name:"siteCopyright"}),(0,e.jsxs)(k.UW,{title:"\u767B\u5F55\u9875",children:[(0,e.jsx)(ue.Z,{label:"Logo",title:"Logo",name:"loginLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(C.Z,{width:"md",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u8FDC\u7A0BUrl",name:"loginLogo"})]})]})})}),Ae=ye,Ze=n(68602),Te=n(80821);function _e(){var b=(0,h.useRef)(),E=(0,h.useRef)(),y=(0,x.useModel)("@@initialState"),u=y.initialState,V=y.loading,O=y.error,l=y.refresh,S=y.setInitialState,g=(0,x.useAccess)(),B=(0,h.useContext)(R.Z),F=B.message,T=B.lang,D=(0,x.useAntdConfigSetter)();return(0,h.useEffect)(function(){var a,i,m,f,r,d,c,p;(a=b.current)===null||a===void 0||a.setFieldsValue({algorithm:(i=u==null?void 0:u.theme.algorithm)!==null&&i!==void 0?i:"default",mainMenu:(m=u==null?void 0:u.theme.mainMenu)!==null&&m!==void 0?m:"top",compact:(f=u==null?void 0:u.theme.compact)!==null&&f!==void 0?f:"default",fontSize:(r=u==null?void 0:u.theme.fontSize)!==null&&r!==void 0?r:14,fontSizeConsole:(d=u==null?void 0:u.theme.fontSizeConsole)!==null&&d!==void 0?d:12,sideMenu:(c=u==null?void 0:u.theme.sideMenu)!==null&&c!==void 0?c:"default",tablePageSize:(p=u==null?void 0:u.theme.tablePageSize)!==null&&p!==void 0?p:"20"})},[u]),(0,e.jsx)(t.Z,{direction:"column",gutter:[0,10],ghost:!0,children:(0,e.jsxs)(t.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(ie.Z,{}),subTitle:"\u57FA\u672C\u914D\u7F6E",children:[!g.canSeeEnableCe&&(0,e.jsx)(Ae,{ref:E}),(0,e.jsxs)(U.A,{layout:"horizontal",labelAlign:"right",labelCol:ge,formRef:b,submitter:{render:function(i,m){return[m[1]]}},onFinish:function(){var a=A()(s()().mark(function i(m){var f;return s()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(f={algorithm:m.algorithm,mainMenu:m.mainMenu,sideMenu:m.sideMenu,compact:m.compact,fontSizeConsole:m.fontSizeConsole,fontSize:m.fontSize,tablePageSize:m.tablePageSize},m.algorithm==(u==null?void 0:u.theme.algorithm)){d.next=4;break}return d.next=4,(0,ae.H)({clearColor:!0});case 4:return localStorage.setItem("dpanel-theme",m.algorithm),localStorage.setItem("dpanel-compact",m.compact),d.next=8,(0,Ze.Gk)(f);case 8:F.success(T("notification.finishTheme"));case 9:case"end":return d.stop()}},i)}));return function(i){return a.apply(this,arguments)}}(),children:[(0,e.jsx)(ee.Z.Group,{name:"algorithm",label:"\u4E3B\u9898\u76AE\u80A4",initialValue:"default",radioType:"button",valueEnum:function(){var i={default:"\u4EAE\u8272",dark:"\u6697\u8272",system:"\u8DDF\u968F\u7CFB\u7EDF"};return i}}),!g.canSeeEnableCe&&(0,e.jsx)(q.Z,{name:["algorithm"],children:function(i){var m=i.algorithm;if(m!="system")return(0,e.jsx)(J.Z,{label:"\u81EA\u5B9A\u4E49\u76AE\u80A4\u914D\u7F6E",children:(0,e.jsxs)(se.Z.Compact,{children:[(0,e.jsx)(re.ZP,{onClick:function(){var r;(r=E.current)===null||r===void 0||r.show()},icon:(0,e.jsx)(ie.Z,{}),children:"\u914D\u7F6E"}),(0,e.jsx)(Te.Z,{action:A()(s()().mark(function f(){var r;return s()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,ae.H)({clearColor:!0,clearSite:!0});case 2:D(function(p){return p.theme={token:{}},p}),(r=E.current)===null||r===void 0||r.reset(),window.location.reload();case 5:case"end":return c.stop()}},f)})),children:"\u6062\u590D\u9ED8\u8BA4"})]})})}}),(0,e.jsx)(ee.Z.Group,{name:"mainMenu",label:"\u4E3B\u83DC\u5355\u4F4D\u7F6E",initialValue:"top",radioType:"button",valueEnum:{top:"\u9876\u90E8",side:"\u4FA7\u9762"}}),(0,e.jsx)(ee.Z.Group,{name:"sideMenu",label:"\u5DE6\u4FA7\u83DC\u5355",initialValue:"default",radioType:"button",valueEnum:{default:"\u9ED8\u8BA4\u5C55\u5F00",collapse:"\u9ED8\u8BA4\u6536\u7F29"}}),(0,e.jsx)(ee.Z.Group,{name:"compact",label:"\u6587\u672C\u5E03\u5C40",initialValue:"default",radioType:"button",valueEnum:{default:"\u9ED8\u8BA4",compact:"\u7D27\u51D1"}}),(0,e.jsx)(J.Z,{name:"fontSize",label:"\u4E3B\u9898\u5B57\u53F7",initialValue:14,children:(0,e.jsx)(oe.Z,{step:2,max:30,min:8,marks:{8:"8",10:"10",12:"12",14:"14",16:"16",20:"20",26:"26",30:"20"}})}),(0,e.jsx)(J.Z,{name:"fontSizeConsole",label:"\u63A7\u5236\u53F0\u5B57\u53F7",initialValue:12,children:(0,e.jsx)(oe.Z,{step:2,max:30,min:8,marks:{8:"8",10:"10",12:"12",14:"14",16:"16",20:"20",26:"26",30:"20"}})}),(0,e.jsx)(pe.Z,{initialValue:"20",label:"\u8868\u683C\u5206\u9875\u6570",name:"tablePageSize",valueEnum:{10:"\u6BCF\u987510\u6761",20:"\u6BCF\u987520\u6761",50:"\u6BCF\u987550\u6761",100:"\u6BCF\u9875100\u6761",all:"\u663E\u793A\u5168\u90E8"}})]})]})})}var Ie=n(90078),we=n(92398);function Oe(){var b=(0,x.useSearchParams)(),E=P()(b,2),y=E[0],u=E[1],V=(0,h.useState)("user"),O=P()(V,2),l=O[0],S=O[1],g=(0,x.useAccess)();return(0,h.useEffect)(function(){var B;S((B=y.get("tab"))!==null&&B!==void 0?B:"user")},[]),(0,e.jsx)(Ie._z,{children:(0,e.jsx)(t.Z,{children:(0,e.jsx)(we.Z,{activeKey:l,onChange:function(F){S(F),u("tab="+F)},items:[{key:"user",label:"\u767B\u5F55\u914D\u7F6E",children:(0,e.jsx)(fe,{})},{key:"theme",label:"\u754C\u9762\u914D\u7F6E",children:(0,e.jsx)(_e,{})},{key:"notice",label:"\u901A\u77E5\u670D\u52A1",children:(0,e.jsx)(W,{})},{key:"other",label:"\u5176\u5B83",children:(0,e.jsx)(ve,{})}].filter(function(B){return!(g.canSeeEnableCe&&B.key=="notice")})})})})}},97961:function(X,$,n){n.d($,{GH:function(){return U},MF:function(){return W},_2:function(){return h},fN:function(){return R},ii:function(){return A},vC:function(){return j}});var z=n(15009),P=n.n(z),K=n(99289),s=n.n(K),_=n(82346),A=[{name:"linux/amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"linux/arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"linux/i386",arch:"386",search:[]},{name:"linux/arm/v6",arch:"arm",search:[]},{name:"linux/arm/v7",arch:"arm",search:[]},{name:"linux/arm/v8",arch:"arm64",search:[]},{name:"linux/ppc64le",arch:"ppc64le",search:[]},{name:"linux/riscv64",arch:"riscv64",search:[]}];function R(o){return I.apply(this,arguments)}function I(){return I=s()(P()().mark(function o(w){return P()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,_.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:w}));case 1:case"end":return v.stop()}},o)})),I.apply(this,arguments)}function j(o){return t.apply(this,arguments)}function t(){return t=s()(P()().mark(function o(w){return P()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,_.request)("/api/app/image/import-by-container-tar",{method:"POST",data:w}));case 1:case"end":return v.stop()}},o)})),t.apply(this,arguments)}function U(o){return C.apply(this,arguments)}function C(){return C=s()(P()().mark(function o(w){return P()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,_.request)("/api/app/image/import-by-image-tar",{method:"POST",data:w}));case 1:case"end":return v.stop()}},o)})),C.apply(this,arguments)}function h(o){return e.apply(this,arguments)}function e(){return e=s()(P()().mark(function o(w){return P()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,_.request)("/api/common/attach/delete",{method:"POST",data:w});case 2:return v.abrupt("return",v.sent);case 3:case"end":return v.stop()}},o)})),e.apply(this,arguments)}function W(){return x.apply(this,arguments)}function x(){return x=s()(P()().mark(function o(){return P()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.abrupt("return",(0,_.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return L.stop()}},o)})),x.apply(this,arguments)}}}]);
