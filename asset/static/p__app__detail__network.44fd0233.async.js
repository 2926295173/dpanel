"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2902],{80821:function(b,c,e){e.d(c,{Z:function(){return d}});var f=e(97857),r=e.n(f),E=e(5574),o=e.n(E),u=e(24963),p=e(36146),P=e(86738),j=e(83062),D=e(96074),g=e(83622),v=e(67294),m=e(85893);function d(n){var M=(0,v.useState)(!1),C=o()(M,2),l=C[0],i=C[1],T=(0,v.useContext)(u.Z),U=T.message,O=new p.Uo,y=function(){i(!0);var a=n.action();a instanceof Promise?a.then(function(_){if(i(!1),_){typeof n.onSuccess=="function"&&n.onSuccess(_);var s="";n.messageSuccess?typeof n.messageSuccess=="function"?s=n.messageSuccess(_):s=n.messageSuccess.indexOf("notification.")==0?O.format(n.messageSuccess):n.messageSuccess:s=O.format("notification.finish"),n.asynced?U.info(s):U.success(s)}}).catch(function(_){i(!1),typeof n.onError=="function"&&n.onError(_)}):i(!1)};return n.confirm?(0,m.jsx)(P.Z,r()(r()({style:{width:500},title:n.confirmTitle?n.confirmTitle:O.format("notification.title.tip"),description:typeof n.confirm=="string"&&n.confirm.indexOf("notification.")==0?O.format(n.confirm):n.confirm,onConfirm:y,okText:"Yes",cancelText:"No",onOpenChange:n.confirmOnOpenChange},n.confirmProps),{},{children:(0,m.jsxs)(j.Z,{title:n.tips,children:[n.showDivider&&(0,m.jsx)(D.Z,{type:"vertical",style:{marginRight:15}}),(0,m.jsx)(g.ZP,{block:n.block,disabled:n.disabled,icon:!n.children&&l?void 0:n.icon,loading:l,danger:n.danger,type:n.type,children:n.children})]})})):(0,m.jsxs)(j.Z,{title:n.tips,children:[n.showDivider&&(0,m.jsx)(D.Z,{type:"vertical",style:{marginRight:15}}),(0,m.jsx)(g.ZP,{block:n.block,style:n.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:n.disabled,icon:!n.children&&l?void 0:n.icon,loading:l,onClick:y,danger:n.danger,type:n.type,children:n.children})]})}},78498:function(b,c,e){e.d(c,{Z:function(){return p}});var f=e(25035),r=e(42075),E=e(83062),o=e(67294),u=e(85893);function p(P){return(0,u.jsxs)(r.Z,{children:[P.title,(0,u.jsx)(E.Z,{title:P.help,children:(0,u.jsx)(f.Z,{})})]})}},3616:function(b,c,e){e.d(c,{Ed:function(){return o},FK:function(){return r},R_:function(){return f},ob:function(){return E}});var f=window.innerWidth<=1024?"90vw":"65vw",r="90vw",E="60vw",o="50vh"},24963:function(b,c,e){var f=e(67294),r=(0,f.createContext)({});c.Z=r},50070:function(b,c,e){e.r(c),e.d(c,{AppDetailContext:function(){return T},default:function(){return U}});var f=e(15009),r=e.n(f),E=e(99289),o=e.n(E),u=e(5574),p=e.n(u),P=e(1699),j=e(24963),D=e(13822),g=e(36146),v=e(55809),m=e(90078),d=e(82346),n=e(25593),M=e(83622),C=e(50136),l=e(67294),i=e(85893),T=(0,l.createContext)({});function U(){var O,y=(0,l.useContext)(j.Z),W=y.loading,a=(0,d.useParams)(),_=(0,d.useSearchParams)(),s=p()(_,2),t=s[0],ee=s[1],G=(O=t.get("tab"))!==null&&O!==void 0?O:"edit",V=(0,l.useState)("edit"),x=p()(V,2),z=x[0],k=x[1],L=(0,d.useNavigate)(),H=(0,l.useState)(1),Z=p()(H,2),$=Z[0],J=Z[1],w=[{label:(0,i.jsx)(d.Link,{to:"/app/detail/edit/".concat(a.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,i.jsx)(d.Link,{to:"/app/detail/network/".concat(a.id,"?tab=network"),children:"\u7F51\u7EDC\u7BA1\u7406"}),key:"network"},{label:(0,i.jsx)(n.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){L("/app/detail/file/".concat(a.id,"?tab=file"))}},{label:(0,i.jsx)(n.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){L("/app/detail/log/".concat(a.id,"?tab=log"))}},{label:(0,i.jsx)(n.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){L("/app/detail/stat/".concat(a.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,i.jsx)(v.Z,{}),disabled:!0}],Y=(0,l.useState)(w),F=p()(Y,2),Q=F[0],X=F[1];(0,l.useEffect)(function(){W.show(),k(G);var R=function(){var B=o()(r()().mark(function N(){var K,S,I;return r()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return K=w,h.prev=1,h.next=4,(0,D.jV)({md5:(S=a.id)!==null&&S!==void 0?S:""});case 4:I=h.sent,K.map(function(A){return A.key=="containerName"&&(A.label=I.data.info.Name),(!I.data.info.State.Running||I.data.info.State.Restarting)&&(A.key=="file"||A.key=="stat")&&(A.disabled=!0),A}),X(K),h.next=13;break;case 9:return h.prev=9,h.t0=h.catch(1),L("/app/list"),h.abrupt("return");case 13:return h.prev=13,W.destroy(),h.finish(13);case 16:case"end":return h.stop()}},N,null,[[1,9,13,16]])}));return function(){return B.apply(this,arguments)}}();R()},[$,a]);var q=function(B){k(B.key)};return(0,i.jsx)(T.Provider,{value:{reload:function(){J($+1)}},children:(0,i.jsxs)(m._z,{header:{extra:[(0,i.jsx)(P.u,{access:"canSeeContainerListManageCreate",children:(0,i.jsx)(d.Link,{to:"/app/create/image",children:(0,i.jsx)(M.ZP,{type:"primary",children:g.Ob.format("container.create")})})},"create")]},children:[(0,i.jsx)(C.Z,{mode:"horizontal",onClick:q,selectedKeys:[z],items:Q}),(0,i.jsx)(d.Outlet,{})]})})}},77812:function(b,c,e){e.r(c),e.d(c,{default:function(){return D}});var f=e(5574),r=e.n(f),E=e(67294),o=e(13822),u=e(82346),p=e(50070),P=e(43831),j=e(85893);function D(){var g=(0,u.useParams)(),v=(0,E.useState)(),m=r()(v,2),d=m[0],n=m[1],M=(0,E.useContext)(p.AppDetailContext);return(0,E.useEffect)(function(){var C;(0,o.jV)({md5:(C=g.id)!==null&&C!==void 0?C:""}).then(function(l){n(l.data.info)}),M.reload()},[]),d&&(0,j.jsx)(P.Z,{containerInfo:d})}},13822:function(b,c,e){e.d(c,{IE:function(){return j},IW:function(){return p},KK:function(){return n},LJ:function(){return C},RF:function(){return U},Re:function(){return i},aF:function(){return y},eE:function(){return m},jV:function(){return g}});var f=e(15009),r=e.n(f),E=e(99289),o=e.n(E),u=e(82346);function p(a){return P.apply(this,arguments)}function P(){return P=o()(r()().mark(function a(_){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/status",{method:"POST",data:_}));case 1:case"end":return t.stop()}},a)})),P.apply(this,arguments)}function j(a){return D.apply(this,arguments)}function D(){return D=o()(r()().mark(function a(_){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/get-list",{data:_,method:"POST"}));case 1:case"end":return t.stop()}},a)})),D.apply(this,arguments)}function g(a){return v.apply(this,arguments)}function v(){return v=o()(r()().mark(function a(_){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/get-detail",{data:_,method:"POST"}));case 1:case"end":return t.stop()}},a)})),v.apply(this,arguments)}function m(a){return d.apply(this,arguments)}function d(){return d=o()(r()().mark(function a(_){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/update",{data:_,method:"POST"}));case 1:case"end":return t.stop()}},a)})),d.apply(this,arguments)}function n(){return M.apply(this,arguments)}function M(){return M=o()(r()().mark(function a(){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,u.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return s.stop()}},a)})),M.apply(this,arguments)}function C(a){return l.apply(this,arguments)}function l(){return l=o()(r()().mark(function a(_){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/export",{method:"POST",data:_,responseType:"blob"}));case 1:case"end":return t.stop()}},a)})),l.apply(this,arguments)}function i(a){return T.apply(this,arguments)}function T(){return T=o()(r()().mark(function a(_){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/commit",{method:"POST",data:_}));case 1:case"end":return t.stop()}},a)})),T.apply(this,arguments)}function U(a){return O.apply(this,arguments)}function O(){return O=o()(r()().mark(function a(_){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/upgrade",{method:"POST",data:_}));case 1:case"end":return t.stop()}},a)})),O.apply(this,arguments)}function y(a){return W.apply(this,arguments)}function W(){return W=o()(r()().mark(function a(_){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/copy",{method:"POST",data:_}));case 1:case"end":return t.stop()}},a)})),W.apply(this,arguments)}}}]);
