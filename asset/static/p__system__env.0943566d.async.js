"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1180],{88484:function(X,T,e){e.d(T,{Z:function(){return p}});var E=e(87462),d=e(67294),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},D=R,M=e(84089),A=function(t,S){return d.createElement(M.Z,(0,E.Z)({},t,{ref:S,icon:D}))},g=d.forwardRef(A),p=g},52688:function(X,T,e){var E=e(1413),d=e(45987),R=e(67294),D=e(1961),M=e(85893),A=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],g=R.forwardRef(function(p,v){var t=p.fieldProps,S=p.unCheckedChildren,Z=p.checkedChildren,L=p.proFieldProps,x=(0,d.Z)(p,A);return(0,M.jsx)(D.Z,(0,E.Z)({valueType:"switch",fieldProps:(0,E.Z)({unCheckedChildren:S,checkedChildren:Z},t),ref:v,valuePropName:"checked",proFieldProps:L,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},x))});T.Z=g},5966:function(X,T,e){var E=e(97685),d=e(1413),R=e(45987),D=e(21770),M=e(72723),A=e(55241),g=e(97435),p=e(67294),v=e(1961),t=e(85893),S=["fieldProps","proFieldProps"],Z=["fieldProps","proFieldProps"],L="text",x=function(u){var n=u.fieldProps,y=u.proFieldProps,m=(0,R.Z)(u,S);return(0,t.jsx)(v.Z,(0,d.Z)({valueType:L,fieldProps:n,filedConfig:{valueType:L},proFieldProps:y},m))},O=function(u){var n=(0,D.Z)(u.open||!1,{value:u.open,onChange:u.onOpenChange}),y=(0,E.Z)(n,2),m=y[0],$=y[1];return(0,t.jsx)(M.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(w){var b,r=w.getFieldValue(u.name||[]);return(0,t.jsx)(A.Z,(0,d.Z)((0,d.Z)({getPopupContainer:function(a){return a&&a.parentNode?a.parentNode:a},onOpenChange:function(a){return $(a)},content:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[(b=u.statusRender)===null||b===void 0?void 0:b.call(u,r),u.strengthText?(0,t.jsx)("div",{style:{marginTop:10},children:(0,t.jsx)("span",{children:u.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},u.popoverProps),{},{open:m,children:u.children}))}})},_=function(u){var n=u.fieldProps,y=u.proFieldProps,m=(0,R.Z)(u,Z),$=(0,p.useState)(!1),V=(0,E.Z)($,2),w=V[0],b=V[1];return n!=null&&n.statusRender&&m.name?(0,t.jsx)(O,{name:m.name,statusRender:n==null?void 0:n.statusRender,popoverProps:n==null?void 0:n.popoverProps,strengthText:n==null?void 0:n.strengthText,open:w,onOpenChange:b,children:(0,t.jsx)("div",{children:(0,t.jsx)(v.Z,(0,d.Z)({valueType:"password",fieldProps:(0,d.Z)((0,d.Z)({},(0,g.Z)(n,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(l){var a;n==null||(a=n.onBlur)===null||a===void 0||a.call(n,l),b(!1)},onClick:function(l){var a;n==null||(a=n.onClick)===null||a===void 0||a.call(n,l),b(!0)}}),proFieldProps:y,filedConfig:{valueType:L}},m))})}):(0,t.jsx)(v.Z,(0,d.Z)({valueType:"password",fieldProps:n,proFieldProps:y,filedConfig:{valueType:L}},m))},W=x;W.Password=_,W.displayName="ProFormComponent",T.Z=W},80821:function(X,T,e){e.d(T,{Z:function(){return v}});var E=e(5574),d=e.n(E),R=e(24963),D=e(86738),M=e(28036),A=e(83062),g=e(67294),p=e(85893);function v(t){var S=(0,g.useState)(!1),Z=d()(S,2),L=Z[0],x=Z[1],O=(0,g.useContext)(R.Z),_=O.lang,W=O.notice,I=O.message,u=function(){x(!0),t.action().then(function(y){if(x(!1),typeof t.onSuccess=="function"&&t.onSuccess(y),t.messageSuccess){var m="";typeof t.messageSuccess=="function"?m=t.messageSuccess(y):m=t.messageSuccess,m=_("notification.".concat(m))+_("notification.title.success"),t.asynced?I.info(m):I.success(m)}}).catch(function(y){x(!1),typeof t.onError=="function"&&t.onError(y)})};return t.confirm?(0,p.jsx)(D.Z,{style:{width:500},title:t.confirmTitle?t.confirmTitle:_("notification.title.tip"),description:t.confirm,onConfirm:u,okText:"Yes",cancelText:"No",children:(0,p.jsx)(M.ZP,{disabled:t.disabled,icon:t.icon,loading:L,danger:t.danger,type:t.type,children:t.children})}):(0,p.jsx)(A.Z,{title:t.tips,children:(0,p.jsx)(M.ZP,{disabled:t.disabled,icon:t.icon,loading:L,onClick:u,danger:t.danger,type:t.type,children:t.children})})}},89063:function(X,T,e){e.d(T,{Z:function(){return p}});var E=e(24963),d=e(88484),R=e(62370),D=e(31418),M=e(28036),A=e(67294),g=e(85893);function p(v){var t=(0,A.useContext)(E.Z),S=t.message,Z=t.notice,L=t.lang,x=(0,A.useRef)(null),O=D.Z.useApp(),_=function(){x.current&&(x.current.click(),x.current.onchange=function(I){if(!I||!I.target)return"";var u=new FileReader;u.onload=function(y){var m,$,V=(m=y.target)===null||m===void 0?void 0:m.result;if(v.onLoad)try{v.onLoad&&v.onLoad(V)}catch(w){Z.error(w);return}typeof v.onImport=="function"&&(S.success("\u6210\u529F\u5BFC\u5165 ".concat(v.title)),v.onImport(V)),($=x.current)!==null&&$!==void 0&&$.value&&(x.current.value="")};var n=I.target;if(n.files)try{u.readAsText(n.files[0])}catch(y){Z.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(R.Z,{children:(0,g.jsx)(M.ZP,{icon:(0,g.jsx)(d.Z,{}),block:!0,onClick:_,children:v.title})}),(0,g.jsx)("input",{style:{display:"none"},type:"file",ref:x,name:"importFileInput"})]})}},24963:function(X,T,e){var E=e(67294),d=(0,E.createContext)({});T.Z=d},53893:function(X,T,e){e.r(T),e.d(T,{default:function(){return o}});var E=e(15009),d=e.n(E),R=e(99289),D=e.n(R),M=e(5574),A=e.n(M),g=e(80821),p=e(184),v=e(5966),t=e(52688),S=e(97462),Z=e(62370),L=e(28036),x=e(86250),O=e(67294),_=e(91845),W=e(87662),I=e(89063),u=e(24963),n=e(85893),y=(0,O.forwardRef)(function(c,Y){var H;(0,O.useImperativeHandle)(Y,function(){return{edit:function(i){var h;(h=f.current)===null||h===void 0||h.setFieldsValue({name:i.name,title:i.title,address:i.address,enableTLS:i.enableTLS,tlsCa:i.tlsCa,tlsCert:i.tlsCert,tlsKey:i.tlsKey,enableComposePath:i.enableComposePath}),U(!0),s(i.name)}}});var N=(0,O.useState)(!1),G=A()(N,2),Q=G[0],U=G[1],f=(0,O.useRef)(),C=(0,O.useState)(""),F=A()(C,2),j=F[0],s=F[1],q=(0,O.useContext)(u.Z),J=q.lang;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(L.ZP,{onClick:function(){var i;s(""),(i=f.current)===null||i===void 0||i.resetFields(),U(!0)},type:"primary",children:"\u6DFB\u52A0Docker\u73AF\u5883"}),(0,n.jsxs)(p.a,{drawerProps:{forceRender:!0},onOpenChange:function(i){U(i)},open:Q,width:800,formRef:f,title:(H=f.current)!==null&&H!==void 0&&H.getFieldValue&&f.current.getFieldValue("name")=="local"?"\u914D\u7F6E\u9ED8\u8BA4Docker\u5BA2\u6237\u7AEF":"\u6DFB\u52A0Docker\u73AF\u5883",onFinish:function(){var z=D()(d()().mark(function i(h){var P,B;return d()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return P={name:h.name,title:h.title,address:h.address,tlsCa:h.tlsCa,tlsCert:h.tlsCert,tlsKey:h.tlsKey,enableTLS:h.enableTLS,enableComposePath:h.enableComposePath,composePath:h.enableComposePath?h.composePath:""},k.next=3,(0,W.ad)(P);case 3:return B=k.sent,c.onFinish&&c.onFinish(),k.abrupt("return",!0);case 6:case"end":return k.stop()}},i)}));return function(i){return z.apply(this,arguments)}}(),children:[(0,n.jsx)(v.Z,{label:"\u540D\u79F0",name:"title",required:!0,rules:[{required:!0}],fieldProps:{onChange:function(i){var h="";if(i.target.value&&!j){var P,B=(0,_.N9)(i.target.value.trim(),{toneType:"none",type:"array"});h=B.join(""),(P=f.current)===null||P===void 0||P.setFieldValue("name",h)}}}}),(0,n.jsx)(v.Z,{label:"\u6807\u8BC6",name:"name",required:!0,disabled:j!="",rules:[{required:!0}],placeholder:"\u6807\u8BC6Docker\u73AF\u5883\uFF0C\u53EA\u5141\u8BB8\u4E3A\u82F1\u6587\u6216\u662F\u6570\u5B57"}),(0,n.jsx)(v.Z,{label:"Docker Api \u5730\u5740",name:"address",tooltip:"\u8FDE\u63A5\u8FDC\u7A0B Docker \u65F6\u8BF7\u5148\u5F00\u542F Api \u5730\u5740\u8BBF\u95EE\u3002",placeholder:"\u4F8B\u5982\uFF1Aunix:///var/run/docker.sock\u3001tcp://192.16.0.5:2375"}),(0,n.jsxs)(x.Z,{gap:80,children:[(0,n.jsx)(t.Z,{label:"\u542F\u7528TLS",name:"enableTLS",tooltip:"\u751F\u6210\u6559\u7A0B\u89C1\uFF1Ahttps://donknap.github.io/dpanel-docs/#/zh-cn/manual/remote"}),(0,n.jsx)(t.Z,{label:J("system.env.createEnableComposePath"),name:"enableComposePath",tooltip:"\u5F00\u542F\u72EC\u7ACBcompose\u76EE\u5F55\u540E\uFF0C\u5207\u6362\u8FDC\u7A0B docker \u5BA2\u6237\u7AEF\u65F6\u5C06\u53EA\u4F1A\u8BFB\u53D6\u8BE5\u76EE\u5F55\u4E0B\u7684 compose.yaml \u6587\u4EF6"})]}),(0,n.jsx)(S.Z,{name:["enableComposePath","name"],children:function(i){var h=i.enableComposePath,P=i.name;if(h)return(0,n.jsx)(v.Z,{label:J("system.env.createComposePath"),name:"composePath",disabled:!0,fieldProps:{value:"/dpanel/compose/compose-".concat(P!=null?P:"")}})}}),(0,n.jsx)(S.Z,{name:["enableTLS"],children:function(i){var h=i.enableTLS;if(h)return(0,n.jsxs)(x.Z,{gap:20,justify:"start",children:[(0,n.jsx)(Z.Z,{name:"tlsCa",label:"\u4E0A\u4F20\u5BA2\u6237\u7AEF\u8BC1\u4E66",children:(0,n.jsx)(I.Z,{title:"\u4E0A\u4F20CA\u8BC1\u4E66 ca.pem",onImport:function(B){var K;return(K=f.current)===null||K===void 0||K.setFieldValue("tlsCa",B),!0},onLoad:function(B){if(B.indexOf("CERTIFICATE")<0)throw new Error("\u5BFC\u5165ca.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})}),(0,n.jsx)(Z.Z,{name:"tlsCert",label:" ",children:(0,n.jsx)(I.Z,{title:"\u4E0A\u4F20\u8BC1\u4E66\u6587\u4EF6 cert.pem",onImport:function(B){var K;return(K=f.current)===null||K===void 0||K.setFieldValue("tlsCert",B),!0},onLoad:function(B){if(B.indexOf("CERTIFICATE")<0)throw new Error("\u5BFC\u5165cert.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})}),(0,n.jsx)(Z.Z,{label:" ",name:"tlsKey",children:(0,n.jsx)(I.Z,{title:"\u4E0A\u4F20\u5BC6\u94A5\u6587\u4EF6 key.pem",onImport:function(B){var K;return(K=f.current)===null||K===void 0||K.setFieldValue("tlsKey",B),!0},onLoad:function(B){if(B.indexOf("PRIVATE")<0)throw new Error("\u5BFC\u5165key.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})})]})}})]})]})}),m=y,$=e(86548),V=e(90078),w=e(10641),b=e(63713),r=e(42075),l=e(96074),a=e(25593);function o(){var c=(0,O.useRef)(),Y=(0,O.useRef)(),H=(0,b.useSearchParams)(),N=A()(H,2),G=N[0],Q=N[1];return(0,n.jsx)(V._z,{header:{extra:[(0,n.jsx)(m,{ref:Y,onFinish:D()(d()().mark(function U(){var f,C,F;return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!G.get("id")){s.next=6;break}return s.next=3,(0,W.vC)({name:(F=G.get("id"))!==null&&F!==void 0?F:"local"});case 3:return Q(""),window.location.href="/dpanel/ui/home",s.abrupt("return");case 6:!((f=c.current)===null||f===void 0)&&f.reloadAndRest&&((C=c.current)===null||C===void 0||C.reloadAndRest());case 7:case"end":return s.stop()}},U)}))},"dockerEnvCreate")]},children:(0,n.jsx)(w.Z,{rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name"},{title:"\u540D\u79F0",dataIndex:"title"},{title:"\u5730\u5740",dataIndex:"address"},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(f,C,F,j,s){return(0,n.jsx)(r.Z,{split:(0,n.jsx)(l.Z,{type:"vertical"}),children:(0,n.jsx)(a.Z.Link,{onClick:function(){var J;(J=Y.current)===null||J===void 0||J.edit(C)},children:(0,n.jsx)($.Z,{})},C.name)})}}],pagination:!1,request:D()(d()().mark(function U(){var f;return d()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,W.Kg)();case 2:return f=F.sent,G.get("id")&&f.data.list.map(function(j){if(j.name==G.get("id")){var s;(s=Y.current)===null||s===void 0||s.edit(j)}}),F.abrupt("return",{data:f.data.list,total:f.data.list.length});case 5:case"end":return F.stop()}},U)})),search:!1,rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0,getCheckboxProps:function(f){return{disabled:f.default}}},actionRef:c,tableAlertOptionRender:function(f){var C=f.selectedRowKeys;return(0,n.jsx)(r.Z,{size:16,children:(0,n.jsx)(g.Z,{danger:!0,type:"primary",action:function(){return(0,W._g)({name:C})},onSuccess:function(){var j,s;return!((j=c.current)===null||j===void 0)&&j.reloadAndRest&&((s=c.current)===null||s===void 0||s.reloadAndRest()),!0},onError:function(){var j,s;return!((j=c.current)===null||j===void 0)&&j.reset&&((s=c.current)===null||s===void 0||s.reset()),!0},messageSuccess:"delete",children:"\u6279\u91CF\u5220\u9664"})})}})})}},86250:function(X,T,e){e.d(T,{Z:function(){return b}});var E=e(67294),d=e(93967),R=e.n(d),D=e(98423),M=e(98065),A=e(53124),g=e(83559),p=e(83262);const v=["wrap","nowrap","wrap-reverse"],t=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],S=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],Z=(r,l)=>{const a=l.wrap===!0?"wrap":l.wrap;return{[`${r}-wrap-${a}`]:a&&v.includes(a)}},L=(r,l)=>{const a={};return S.forEach(o=>{a[`${r}-align-${o}`]=l.align===o}),a[`${r}-align-stretch`]=!l.align&&!!l.vertical,a},x=(r,l)=>{const a={};return t.forEach(o=>{a[`${r}-justify-${o}`]=l.justify===o}),a};function O(r,l){return R()(Object.assign(Object.assign(Object.assign({},Z(r,l)),L(r,l)),x(r,l)))}var _=O;const W=r=>{const{componentCls:l}=r;return{[l]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},I=r=>{const{componentCls:l}=r;return{[l]:{"&-gap-small":{gap:r.flexGapSM},"&-gap-middle":{gap:r.flexGap},"&-gap-large":{gap:r.flexGapLG}}}},u=r=>{const{componentCls:l}=r,a={};return v.forEach(o=>{a[`${l}-wrap-${o}`]={flexWrap:o}}),a},n=r=>{const{componentCls:l}=r,a={};return S.forEach(o=>{a[`${l}-align-${o}`]={alignItems:o}}),a},y=r=>{const{componentCls:l}=r,a={};return t.forEach(o=>{a[`${l}-justify-${o}`]={justifyContent:o}}),a},m=()=>({});var $=(0,g.I$)("Flex",r=>{const{paddingXS:l,padding:a,paddingLG:o}=r,c=(0,p.IX)(r,{flexGapSM:l,flexGap:a,flexGapLG:o});return[W(c),I(c),u(c),n(c),y(c)]},m,{resetStyle:!1}),V=function(r,l){var a={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&l.indexOf(o)<0&&(a[o]=r[o]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(r);c<o.length;c++)l.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(r,o[c])&&(a[o[c]]=r[o[c]]);return a},b=E.forwardRef((r,l)=>{const{prefixCls:a,rootClassName:o,className:c,style:Y,flex:H,gap:N,children:G,vertical:Q=!1,component:U="div"}=r,f=V(r,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:C,direction:F,getPrefixCls:j}=E.useContext(A.E_),s=j("flex",a),[q,J,z]=$(s),i=Q!=null?Q:C==null?void 0:C.vertical,h=R()(c,o,C==null?void 0:C.className,s,J,z,_(s,r),{[`${s}-rtl`]:F==="rtl",[`${s}-gap-${N}`]:(0,M.n)(N),[`${s}-vertical`]:i}),P=Object.assign(Object.assign({},C==null?void 0:C.style),Y);return H&&(P.flex=H),N&&!(0,M.n)(N)&&(P.gap=N),q(E.createElement(U,Object.assign({ref:l,className:h,style:P},(0,D.Z)(f,["justify","wrap","align"])),G))})}}]);
