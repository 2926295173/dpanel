"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3357],{76428:function(X,v,t){t.d(v,{Z:function(){return j}});var f=t(25593),h=t(67294),P=t(85893);function j(x){return(0,P.jsx)(f.Z.Text,{copyable:!0,children:x.title})}},70977:function(X,v,t){t.r(v),t.d(v,{default:function(){return _e}});var f=t(15009),h=t.n(f),P=t(99289),j=t.n(P),x=t(5574),D=t.n(x),r=t(3393),H=t(43425),J=t(58638),A=t(1912),Q=t(87784),O=t(40666),w=t(77171),k=t(48689),C=t(45742),l=t(38345),p=t(97269),L=t(62370),q=t(7529),ee=t(5966),M=t(54006),T=t(42075),ne=t(96074),te=t(65233),U=t(2487),se=t(4393),B=t(66309),W=t(25593),a=t(26412),oe=t(63490),u=t(67294),c=t(80821),ae=t(5251),K=t(93162),fe=t.n(K),ie=t(18148),re=t(96042),le=t(24963),ue=t(76428),n=t(85893);function _e(){var I,R=(0,u.useContext)(le.Z),he=R.message,Pe=R.notice,je=R.lang,de=(0,u.useState)(),S=D()(de,2),e=S[0],ce=S[1],b=(0,M.useParams)(),y=(0,u.useRef)(),Ee=(0,u.useState)(0),F=D()(Ee,2),g=F[0],Z=F[1],me=(0,M.useNavigate)(),$=(0,M.useAccess)(),ve=(0,u.useState)(),G=D()(ve,2),E=G[0],De=G[1],ge=(0,u.useState)(""),z=D()(ge,2),N=z[0],V=z[1];return(0,u.useEffect)(function(){b.id&&(0,r.YU)({md5:b.id}).then(function(s){ce(s.data),$.canSeeImageRemoteTag&&(0,r.cd)({imageName:s.data.info.RepoTags[0]}).then(function(o){De(o.data.list)}).catch(function(o){})})},[g]),(0,n.jsx)("div",{children:(0,n.jsxs)(l.Z,{direction:"column",ghost:!0,gutter:[0,10],children:[(0,n.jsx)(l.Z,{title:(0,n.jsx)(H.Z,{}),subTitle:"\u5E38\u7528\u64CD\u4F5C",headerBordered:!0,bordered:!0,children:(0,n.jsxs)(T.Z,{children:[(0,n.jsx)(c.Z,{icon:(0,n.jsx)(J.Z,{}),action:function(){var o;return(0,r.Rb)({md5:(o=e==null?void 0:e.info.RepoTags)!==null&&o!==void 0?o:[""]})},onSuccess:function(o){var i=new Blob([o],{type:"application/tar"});(0,K.saveAs)(i,(e==null?void 0:e.info.RepoTags.join("-"))+".tar")},messageSuccess:"export",children:"\u5BFC\u51FA"}),(0,n.jsx)(c.Z,{icon:(0,n.jsx)(A.Z,{}),action:function(){var o;return(0,r.Gb)({tag:(o=e==null?void 0:e.info.RepoTags[0])!==null&&o!==void 0?o:"",type:"push",asLatest:!0})},type:"primary",messageSuccess:"imagePush",onSuccess:function(){Z(g+1)},children:"Push As Latest"}),(0,n.jsx)(ne.Z,{}),(0,n.jsx)(c.Z,{icon:(0,n.jsx)(Q.Z,{}),danger:!0,type:"primary",action:function(){var o;return(0,ie.ao)({md5:[(o=e==null?void 0:e.info.Id)!==null&&o!==void 0?o:""],force:!0})},onSuccess:function(){me("/image/list")},confirm:"\u662F\u5426\u8981\u505C\u6B62\u8BE5\u955C\u50CF\u4E0B\u7684\u5BB9\u5668\u5E76\u5F3A\u5236\u5220\u9664\uFF1F",messageSuccess:"delete",children:"\u5F3A\u5236\u5220\u9664"})]})}),$.canSeeImageRemoteTag&&(0,n.jsx)(l.Z,{title:(0,n.jsx)(O.Z,{}),subTitle:"\u8FDC\u7A0B Tag \u5217\u8868",extra:(0,n.jsx)(p.A,{isKeyPressSubmit:!0,submitter:!1,onFinish:function(o){V(o.search)},children:(0,n.jsx)(T.Z.Compact,{children:(0,n.jsx)(L.Z,{style:{margin:0},name:"search",children:(0,n.jsx)(te.Z,{allowClear:!0,addonBefore:"\u641C\u7D22Tag",placeholder:"\u6309\u56DE\u8F66\u67E5\u8BE2",onClear:function(){V("")}})})})},"form"),children:(0,n.jsx)(U.Z,{pagination:{pageSize:36},rowKey:function(o){return"".concat(o)},grid:{gutter:10,xs:3,sm:3,md:4,lg:4,xl:5,xxl:6},dataSource:E&&E.filter(function(s){return!N||s.indexOf(N)!==-1}),loading:!E||(E==null?void 0:E.length)<=0,renderItem:function(o,i){return(0,n.jsx)(U.Z.Item,{children:(0,n.jsx)(se.Z,{style:{height:"60px"},children:(0,n.jsx)("div",{style:{margin:"-10px",wordBreak:"break-word"},children:(0,n.jsx)(ue.Z,{title:o})})})},i)}})}),(0,n.jsx)(l.Z,{bordered:!0,title:(0,n.jsx)(O.Z,{}),subTitle:"Tag \u5217\u8868",children:(0,n.jsx)(q.Rs,{grid:{gutter:40,column:2},headerTitle:!1,metas:{content:{render:function(o,i,_){return(0,n.jsx)(B.Z,{color:"blue",children:(0,n.jsx)(W.Z.Text,{copyable:!0,children:i})},_)}},title:{render:function(o,i,_){return(0,n.jsxs)(T.Z,{children:[(0,n.jsxs)(c.Z,{action:function(){return(0,r.Gb)({tag:i,type:"push"})},messageSuccess:"imagePush",children:[(0,n.jsx)(A.Z,{})," Push"]}),(0,n.jsxs)(c.Z,{action:function(){return(0,r.Gb)({tag:i,type:"pull"})},messageSuccess:"imagePull",children:[(0,n.jsx)(w.Z,{})," Pull"]}),(0,n.jsx)(c.Z,{action:function(){return(0,r.Pn)({tag:i})},onSuccess:function(Y){return Z(g+1),!0},messageSuccess:"imageTagDelete",confirm:"\u662F\u5426\u786E\u8BA4\u5220\u9664\u6807\u7B7E",children:(0,n.jsx)(k.Z,{})})]},_)}}},dataSource:e==null?void 0:e.info.RepoTags})}),(0,n.jsx)(l.Z,{bordered:!0,headerBordered:!0,title:(0,n.jsx)(O.Z,{}),subTitle:"\u65B0\u589E Tag",children:(0,n.jsxs)(p.A,{formRef:y,onFinish:function(){var s=j()(h()().mark(function o(i){var _,d,Y;return h()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,r._U)({md5:(_=e==null?void 0:e.info.Id)!==null&&_!==void 0?_:"",tag:(i.imageRespo?i.imageRespo.serverAddress+"/":"")+i.imageTag});case 2:Y=m.sent,Z(g+1),(d=y.current)===null||d===void 0||d.resetFields();case 5:case"end":return m.stop()}},o)}));return function(o){return s.apply(this,arguments)}}(),children:[(0,n.jsx)(L.Z,{label:"\u955C\u50CF\u4ED3\u5E93",name:"imageRespo",tooltip:(0,n.jsxs)(n.Fragment,{children:["\u63A8\u9001\u524D\u8BF7\u4FDD\u8BC1\u4ED3\u5E93\u4E2D\u6709\u6307\u5B9A\u7684\u547D\u540D\u7A7A\u95F4, \u5982\u6CA1\u6709\u8BF7\u5148 ",(0,n.jsx)("a",{href:"",target:"_blank",children:"\u6DFB\u52A0\u4ED3\u5E93"})]}),children:(0,n.jsx)(re.Z,{})}),(0,n.jsx)(ee.Z,{fieldProps:{min:2,max:255},rules:[{required:!0}],required:!0,placeholder:"\u53EA\u80FD\u4F7F\u7528\u5C0F\u5199\u82F1\u6587\u5B57\u7B26\u3001\u6570\u5B57\u3001_\u3001-\u3001",label:"\u955C\u50CF\u540D\u79F0",name:"imageTag",tooltip:"\u4F8B\u5982: name:tag\u3001namespace/name:tag\u3001registry/namespace/name:tag"})]})}),(0,n.jsx)(l.Z,{bordered:!0,headerBordered:!0,title:(0,n.jsx)(C.Z,{}),subTitle:"\u955C\u50CF\u8BE6\u60C5",children:(0,n.jsxs)(a.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,n.jsx)(a.Z.Item,{label:"ID",children:e==null?void 0:e.info.Id}),(0,n.jsx)(a.Z.Item,{label:"Parent",children:e==null?void 0:e.info.Parent}),(0,n.jsx)(a.Z.Item,{label:"Size",children:(0,ae.FI)((I=e==null?void 0:e.info.Size)!==null&&I!==void 0?I:0)}),(0,n.jsx)(a.Z.Item,{label:"Created",children:e==null?void 0:e.info.Created}),(0,n.jsxs)(a.Z.Item,{label:"Build",children:["Docker ",e==null?void 0:e.info.DockerVersion," ",e==null?void 0:e.info.Os," ",e==null?void 0:e.info.Architecture]}),(0,n.jsx)(a.Z.Item,{label:"Labels",children:(0,n.jsx)(a.Z,{column:1,bordered:!0,children:(e==null?void 0:e.info.Config.Labels)&&Object.keys(e==null?void 0:e.info.Config.Labels).map(function(s){return(0,n.jsx)(a.Z.Item,{label:s,children:(0,n.jsx)(W.Z.Text,{style:{width:"400px"},ellipsis:{tooltip:e==null?void 0:e.info.Config.Labels[s]},children:e==null?void 0:e.info.Config.Labels[s]})},s)})})})]})}),(0,n.jsx)(l.Z,{bordered:!0,headerBordered:!0,title:(0,n.jsx)(C.Z,{}),subTitle:"Dockerfile \u8BE6\u60C5",children:(0,n.jsxs)(a.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,n.jsx)(a.Z.Item,{label:"CMD",children:e==null?void 0:e.info.Config.Cmd}),(0,n.jsx)(a.Z.Item,{label:"ENTRYPOINT",children:e==null?void 0:e.info.Config.Entrypoint}),(0,n.jsx)(a.Z.Item,{label:"EXPOSE",children:(e==null?void 0:e.info.Config.ExposedPorts)&&Object.keys(e==null?void 0:e.info.Config.ExposedPorts).map(function(s){return(0,n.jsx)(B.Z,{color:"gray",children:s},s)})}),(0,n.jsx)(a.Z.Item,{label:"VOLUME",children:(e==null?void 0:e.info.Config.Volumes)&&Object.keys(e==null?void 0:e.info.Config.Volumes).map(function(s){return(0,n.jsx)(B.Z,{color:"gray",children:s},s)})}),(0,n.jsx)(a.Z.Item,{label:"Env",children:(0,n.jsx)(a.Z,{column:1,bordered:!0,children:(e==null?void 0:e.info.Config.Env)&&(e==null?void 0:e.info.Config.Env.map(function(s,o){var i=s.split("=");return(0,n.jsx)(a.Z.Item,{label:i[0],children:i[1]},o)}))})})]})}),(0,n.jsxs)(l.Z,{bordered:!0,headerBordered:!0,title:(0,n.jsx)(C.Z,{}),subTitle:"Layers",children:[(0,n.jsx)(oe.Z,{rowKey:"CreatedBy",dataSource:e==null?void 0:e.layer.reverse(),columns:[{title:"Layer",dataIndex:"CreatedBy",key:"CreatedBy"}]}),";"]})]})})}}}]);
