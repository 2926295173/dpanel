"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9013],{5966:function(L,A,e){var T=e(97685),a=e(1413),v=e(45987),i=e(21770),m=e(72723),O=e(55241),E=e(97435),R=e(67294),p=e(38858),o=e(85893),P=["fieldProps","proFieldProps"],r=["fieldProps","proFieldProps"],h="text",c=function(s){var t=s.fieldProps,g=s.proFieldProps,f=(0,v.Z)(s,P);return(0,o.jsx)(p.Z,(0,a.Z)({valueType:h,fieldProps:t,filedConfig:{valueType:h},proFieldProps:g},f))},d=function(s){var t=(0,i.Z)(s.open||!1,{value:s.open,onChange:s.onOpenChange}),g=(0,T.Z)(t,2),f=g[0],K=g[1];return(0,o.jsx)(m.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function($){var S,D=$.getFieldValue(s.name||[]);return(0,o.jsx)(O.Z,(0,a.Z)((0,a.Z)({getPopupContainer:function(l){return l&&l.parentNode?l.parentNode:l},onOpenChange:function(l){return K(l)},content:(0,o.jsxs)("div",{style:{padding:"4px 0"},children:[(S=s.statusRender)===null||S===void 0?void 0:S.call(s,D),s.strengthText?(0,o.jsx)("div",{style:{marginTop:10},children:(0,o.jsx)("span",{children:s.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},s.popoverProps),{},{open:f,children:s.children}))}})},u=function(s){var t=s.fieldProps,g=s.proFieldProps,f=(0,v.Z)(s,r),K=(0,R.useState)(!1),b=(0,T.Z)(K,2),$=b[0],S=b[1];return t!=null&&t.statusRender&&f.name?(0,o.jsx)(d,{name:f.name,statusRender:t==null?void 0:t.statusRender,popoverProps:t==null?void 0:t.popoverProps,strengthText:t==null?void 0:t.strengthText,open:$,onOpenChange:S,children:(0,o.jsx)("div",{children:(0,o.jsx)(p.Z,(0,a.Z)({valueType:"password",fieldProps:(0,a.Z)((0,a.Z)({},(0,E.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(B){var l;t==null||(l=t.onBlur)===null||l===void 0||l.call(t,B),S(!1)},onClick:function(B){var l;t==null||(l=t.onClick)===null||l===void 0||l.call(t,B),S(!0)}}),proFieldProps:g,filedConfig:{valueType:h}},f))})}):(0,o.jsx)(p.Z,(0,a.Z)({valueType:"password",fieldProps:t,proFieldProps:g,filedConfig:{valueType:h}},f))},n=c;n.Password=u,n.displayName="ProFormComponent",A.Z=n},90672:function(L,A,e){var T=e(1413),a=e(45987),v=e(67294),i=e(38858),m=e(85893),O=["fieldProps","proFieldProps"],E=function(p,o){var P=p.fieldProps,r=p.proFieldProps,h=(0,a.Z)(p,O);return(0,m.jsx)(i.Z,(0,T.Z)({ref:o,valueType:"textarea",fieldProps:P,proFieldProps:r},h))};A.Z=v.forwardRef(E)},80821:function(L,A,e){e.d(A,{Z:function(){return P}});var T=e(5574),a=e.n(T),v=e(93246),i=e(54006),m=e(31418),O=e(86738),E=e(14726),R=e(83062),p=e(67294),o=e(85893);function P(r){var h=(0,p.useState)(!1),c=a()(h,2),d=c[0],u=c[1],n=m.Z.useApp(),U=(0,i.useIntl)(),s=function(){u(!0),r.action().then(function(g){if(u(!1),typeof r.onSuccess=="function"&&r.onSuccess(g),r.messageSuccess){var f="";typeof r.messageSuccess=="function"?f=r.messageSuccess(g):f=r.messageSuccess,f.indexOf(".")>-1&&(f=U.formatMessage({id:f})),r.asynced?(0,v.Rk)(n,f):(0,v.$h)(n,f)}}).catch(function(g){u(!1),typeof r.onError=="function"&&r.onError(g)})};return r.confirm?(0,o.jsx)(O.Z,{style:{width:500},title:"\u63D0\u793A",description:r.confirm,onConfirm:s,okText:"Yes",cancelText:"No",children:(0,o.jsx)(E.ZP,{disabled:r.disabled,icon:r.icon,loading:d,danger:r.danger,type:r.type,children:r.children})}):(0,o.jsx)(R.Z,{title:r.tips,children:(0,o.jsx)(E.ZP,{disabled:r.disabled,icon:r.icon,loading:d,onClick:s,danger:r.danger,type:r.type,children:r.children})})}},24396:function(L,A,e){e.r(A),e.d(A,{default:function(){return S}});var T=e(15009),a=e.n(T),v=e(99289),i=e.n(v),m=e(80821),O=e(5574),E=e.n(O),R=e(75870),p=e(93246),o=e(184),P=e(5966),r=e(90672),h=e(31418),c=e(14726),d=e(67294),u=e(85893),n=(0,d.forwardRef)(function(D,B){var l=(0,d.useState)(!1),x=E()(l,2),y=x[0],I=x[1],M=h.Z.useApp(),_=(0,d.useRef)(),w=(0,d.useState)(0),C=E()(w,2),G=C[0],J=C[1];return(0,d.useImperativeHandle)(B,function(){return{setEditId:function(j){(0,R.t1)({id:j}).then(function(F){var Z;I(!0),J(j),(Z=_.current)===null||Z===void 0||Z.setFieldsValue({title:F.data.info.title,serverAddress:F.data.info.serverAddress,username:F.data.info.setting.username,proxy:F.data.info.setting.proxy.join(`
`)})})}}}),(0,u.jsxs)(o.a,{drawerProps:{forceRender:!0},name:"create",title:"\u6DFB\u52A0/\u7F16\u8F91\u955C\u50CF\u4ED3\u5E93",open:y,onOpenChange:function(j){I(j)},formRef:_,trigger:(0,u.jsx)(c.ZP,{type:"primary",onClick:function(){var j;(j=_.current)===null||j===void 0||j.resetFields(),J(0)},children:"\u6DFB\u52A0\u4ED3\u5E93"}),onFinish:function(){var z=i()(a()().mark(function j(F){var Z,V,N,H;return a()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,(0,R.ZH)({id:G,title:F.title,serverAddress:F.serverAddress,username:(Z=F.username)!==null&&Z!==void 0?Z:"",password:(V=F.password)!==null&&V!==void 0?V:"",proxy:F.proxy?F.proxy.split(`
`):[]});case 2:if(N=W.sent,!(N&&N.data&&N.data.id>0)){W.next=8;break}return(0,p.$h)(M,"\u6DFB\u52A0\u6216\u662F\u7F16\u8F91\u955C\u50CF\u4ED3\u5E93\u6210\u529F"),D.onFinish&&D.onFinish(),(H=_.current)===null||H===void 0||H.resetFields(),W.abrupt("return",!0);case 8:case"end":return W.stop()}},j)}));return function(j){return z.apply(this,arguments)}}(),children:[(0,u.jsx)(P.Z,{label:"\u540D\u79F0",name:"title",placeholder:"\u6307\u5B9A\u4ED3\u5E93\u4E00\u4E2A\u540D\u79F0",disabled:G==-1,required:!0}),(0,u.jsx)(P.Z,{label:"\u4ED3\u5E93\u5730\u5740",tooltip:"\u4F8B\u5982:ccr.ccs.tencentyun.com\uFF0Cdocker.io",name:"serverAddress",placeholder:"\u586B\u5199\u4ED3\u5E93\u5730\u5740\uFF0C\u5B98\u65B9\u9ED8\u8BA4\u7559\u7A7A",disabled:G==-1}),(0,u.jsx)(P.Z,{label:"\u7528\u6237\u540D",name:"username",placeholder:"\u914D\u7F6E\u4ED3\u5E93\u7528\u6237\u540D",tooltip:""},"username"),(0,u.jsx)(P.Z.Password,{label:"\u5BC6\u7801",name:"password",placeholder:"\u914D\u7F6E\u4ED3\u5E93\u5BC6\u7801,\u4E3A\u7A7A\u65F6\u4F7F\u7528\u65E7\u5BC6\u7801"},"password"),(0,u.jsx)(r.Z,{label:"\u52A0\u901F\u5730\u5740",name:"proxy",fieldProps:{autoSize:{minRows:10}},placeholder:`https://docker.1panel.live 
https://docker.m.daocloud.io`,tooltip:"\u914D\u7F6E\u8BE5\u4ED3\u5E93\u7684\u52A0\u901F\u5730\u5740\uFF0C\u591A\u4E2A\u5730\u5740\u7528\u6362\u884C\u5206\u9694\u3002\u591A\u4E2A\u5730\u5740\u91C7\u7528\u8F6E\u8BAD\u7684\u65B9\u5F0F\u4E0B\u8F7D"})]})}),U=n,s=e(67255),t=e(43425),g=e(6110),f=e(10641),K=e(42075),b=e(96074),$=e(83062);function S(){var D=(0,d.useRef)(),B=(0,d.useRef)();return(0,u.jsx)(g._z,{header:{extra:[(0,u.jsx)(U,{onFinish:function(){var x,y;!((x=D.current)===null||x===void 0)&&x.reloadAndRest&&((y=D.current)===null||y===void 0||y.reloadAndRest())},ref:B})]},children:(0,u.jsx)(f.Z,{scroll:{x:"max-content"},rowKey:"id",columns:[{title:"\u540D\u79F0",ellipsis:!0,dataIndex:"title"},{title:"Url",dataIndex:"serverAddress"},{title:"\u7528\u6237",dataIndex:["setting","username"]},{title:"\u64CD\u4F5C",width:100,render:function(x,y,I,M,_){return(0,u.jsx)(K.Z,{split:(0,u.jsx)(b.Z,{type:"vertical"}),children:(0,u.jsx)(c.ZP,{type:"link",onClick:function(){var C;(C=B.current)===null||C===void 0||C.setEditId(y.id)},children:(0,u.jsx)($.Z,{title:"\u7BA1\u7406",children:(0,u.jsx)(t.Z,{})})})})}}],request:function(){var l=i()(a()().mark(function x(y,I,M){var _;return a()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,R.Ot)({title:y.title,serverAddress:y.serverAddress});case 2:return _=C.sent,C.abrupt("return",{data:_.data.list,success:!0,total:_.data.list.length});case 4:case"end":return C.stop()}},x)}));return function(x,y,I){return l.apply(this,arguments)}}(),toolBarRender:function(){return[]},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},pagination:(0,s.O)(),actionRef:D,tableAlertOptionRender:function(x){var y=x.selectedRowKeys;return(0,u.jsx)(K.Z,{size:16,children:(0,u.jsx)(m.Z,{danger:!0,type:"primary",action:function(){return(0,R.ix)({id:y})},onSuccess:function(){var M,_;return!((M=D.current)===null||M===void 0)&&M.reloadAndRest&&((_=D.current)===null||_===void 0||_.reloadAndRest()),!0},onError:function(){var M,_;return!((M=D.current)===null||M===void 0)&&M.reset&&((_=D.current)===null||_===void 0||_.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"})})}})})}},75870:function(L,A,e){e.d(A,{Ot:function(){return O},ZH:function(){return R},ix:function(){return o},t1:function(){return r}});var T=e(15009),a=e.n(T),v=e(99289),i=e.n(v),m=e(54006);function O(c){return E.apply(this,arguments)}function E(){return E=i()(a()().mark(function c(d){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/common/registry/get-list",{method:"POST",data:d}));case 1:case"end":return n.stop()}},c)})),E.apply(this,arguments)}function R(c){return p.apply(this,arguments)}function p(){return p=i()(a()().mark(function c(d){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/common/registry/create",{method:"POST",data:d}));case 1:case"end":return n.stop()}},c)})),p.apply(this,arguments)}function o(c){return P.apply(this,arguments)}function P(){return P=i()(a()().mark(function c(d){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/common/registry/delete",{method:"POST",data:d}));case 1:case"end":return n.stop()}},c)})),P.apply(this,arguments)}function r(c){return h.apply(this,arguments)}function h(){return h=i()(a()().mark(function c(d){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/common/registry/get-detail",{method:"POST",data:d}));case 1:case"end":return n.stop()}},c)})),h.apply(this,arguments)}},67255:function(L,A,e){e.d(A,{O:function(){return T},j:function(){return a}});function T(){var v,i=parseInt((v=localStorage.getItem("dpanel-pagesize"))!==null&&v!==void 0?v:"0");return{showSizeChanger:!0,defaultPageSize:i!=null?i:20}}function a(v){var i="dpanel-table-column-".concat(v),m={};if(localStorage.getItem(i)){var O;m=JSON.parse((O=localStorage.getItem(i))!==null&&O!==void 0?O:"{}")}return{defaultValue:m,onChange:function(R){localStorage.setItem("dpanel-table-column-".concat(v),JSON.stringify(R))}}}}}]);
