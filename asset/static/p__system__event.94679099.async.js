"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5050],{80821:function(x,f,t){t.d(f,{Z:function(){return D}});var g=t(5574),u=t.n(g),c=t(24963),i=t(86738),E=t(28036),m=t(83062),_=t(67294),s=t(85893);function D(e){var R=(0,_.useState)(!1),P=u()(R,2),C=P[0],S=P[1],o=(0,_.useContext)(c.Z),y=o.lang,l=o.notice,r=o.message,a=function(){S(!0),e.action().then(function(v){if(S(!1),typeof e.onSuccess=="function"&&e.onSuccess(v),e.messageSuccess){var d="";typeof e.messageSuccess=="function"?d=e.messageSuccess(v):d=e.messageSuccess,d=y("notification.".concat(d))+y("notification.title.success"),e.asynced?r.info(d):r.success(d)}}).catch(function(v){S(!1),typeof e.onError=="function"&&e.onError(v)})};return e.confirm?(0,s.jsx)(i.Z,{style:{width:500},title:e.confirmTitle?e.confirmTitle:y("notification.title.tip"),description:e.confirm,onConfirm:a,okText:"Yes",cancelText:"No",children:(0,s.jsx)(E.ZP,{disabled:e.disabled,icon:e.icon,loading:C,danger:e.danger,type:e.type,children:e.children})}):(0,s.jsx)(m.Z,{title:e.tips,children:(0,s.jsx)(E.ZP,{disabled:e.disabled,icon:e.icon,loading:C,onClick:a,danger:e.danger,type:e.type,children:e.children})})}},24963:function(x,f,t){var g=t(67294),u=(0,g.createContext)({});f.Z=u},85827:function(x,f,t){t.r(f),t.d(f,{default:function(){return y}});var g=t(15009),u=t.n(g),c=t(99289),i=t.n(c),E=t(80821),m=t(63713);function _(l){return s.apply(this,arguments)}function s(){return s=i()(u()().mark(function l(r){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/common/event/get-list",{method:"POST",data:r}));case 1:case"end":return n.stop()}},l)})),s.apply(this,arguments)}function D(l){return e.apply(this,arguments)}function e(){return e=i()(u()().mark(function l(r){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/common/event/prune",{method:"POST",data:r}));case 1:case"end":return n.stop()}},l)})),e.apply(this,arguments)}var R=t(67255),P=t(90078),C=t(10641),S=t(67294),o=t(85893);function y(){var l=(0,S.useRef)();return(0,o.jsx)(P._z,{header:{extra:[(0,o.jsx)(E.Z,{action:function(){return D()},onSuccess:function(){var a,n;return!((a=l.current)===null||a===void 0)&&a.reloadAndRest&&((n=l.current)===null||n===void 0||n.reloadAndRest()),!0},onError:function(){var a,n;return!((a=l.current)===null||a===void 0)&&a.reset&&((n=l.current)===null||n===void 0||n.reset()),!0},messageSuccess:"clear",confirm:"\u662F\u5426\u8981\u6E05\u9664\u6389\u6240\u6709\u4E8B\u4EF6\u4FE1\u606F",danger:!0,type:"primary",children:"\u6E05\u9664\u4E8B\u4EF6\u901A\u77E5"})]},children:(0,o.jsx)(C.Z,{scroll:{x:"max-content"},columns:[{title:"\u7C7B\u578B",ellipsis:!0,dataIndex:"type",width:200},{title:"\u8BE6\u60C5",search:!1,render:function(a,n,v,d){return(0,o.jsxs)(o.Fragment,{children:[n.action," ",n.message]})}},{title:"\u65F6\u95F4",ellipsis:!0,search:!1,dataIndex:"createdAt",width:200,render:function(a,n,v,d,O){return new Date(n.createdAt).toLocaleString()}}],rowKey:"id",request:function(){var r=i()(u()().mark(function a(n,v,d){var O,T,M;return u()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,_({page:(O=n.current)!==null&&O!==void 0?O:1,pageSize:(T=n.pageSize)!==null&&T!==void 0?T:10,type:n.type});case 2:return M=h.sent,h.abrupt("return",{data:M.data.list,success:!0,total:M.data.total});case 4:case"end":return h.stop()}},a)}));return function(a,n,v){return r.apply(this,arguments)}}(),pagination:(0,R.O)(),actionRef:l})})}},67255:function(x,f,t){t.d(f,{O:function(){return g},j:function(){return u}});function g(){var c,i=parseInt((c=localStorage.getItem("dpanel-pagesize"))!==null&&c!==void 0?c:"0");return{showSizeChanger:!0,defaultPageSize:i!=null?i:20}}function u(c){var i="dpanel-table-column-".concat(c),E={};if(localStorage.getItem(i)){var m;E=JSON.parse((m=localStorage.getItem(i))!==null&&m!==void 0?m:"{}")}return{defaultValue:E,onChange:function(s){localStorage.setItem("dpanel-table-column-".concat(c),JSON.stringify(s))}}}}}]);
