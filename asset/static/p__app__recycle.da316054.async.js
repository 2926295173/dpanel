"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1610],{80821:function(A,c,n){n.d(c,{Z:function(){return M}});var f=n(5574),u=n.n(f),o=n(24963),s=n(86738),l=n(14726),O=n(83062),E=n(67294),p=n(85893);function M(r){var T=(0,E.useState)(!1),g=u()(T,2),v=g[0],D=g[1],P=(0,E.useContext)(o.Z),y=P.lang,j=P.notice,C=P.message,_=function(){D(!0),r.action().then(function(h){if(D(!1),typeof r.onSuccess=="function"&&r.onSuccess(h),r.messageSuccess){var t="";typeof r.messageSuccess=="function"?t=r.messageSuccess(h):t=r.messageSuccess,t.indexOf(".")>-1&&(t=y(t)),r.asynced?C.info(t):C.success(t)}}).catch(function(h){D(!1),typeof r.onError=="function"&&r.onError(h)})};return r.confirm?(0,p.jsx)(s.Z,{style:{width:500},title:r.confirmTitle?r.confirmTitle:y("notification.title.tip"),description:r.confirm,onConfirm:_,okText:"Yes",cancelText:"No",children:(0,p.jsx)(l.ZP,{disabled:r.disabled,icon:r.icon,loading:v,danger:r.danger,type:r.type,children:r.children})}):(0,p.jsx)(O.Z,{title:r.tips,children:(0,p.jsx)(l.ZP,{disabled:r.disabled,icon:r.icon,loading:v,onClick:_,danger:r.danger,type:r.type,children:r.children})})}},78451:function(A,c,n){n.d(c,{Z:function(){return o}});var f=n(67294),u=n(85893);function o(s){return(0,u.jsx)("span",{style:{wordBreak:"break-word"},children:s.content})}},24963:function(A,c,n){var f=n(67294),u=(0,f.createContext)({});c.Z=u},67108:function(A,c,n){n.r(c),n.d(c,{default:function(){return L}});var f=n(15009),u=n.n(f),o=n(99289),s=n.n(o),l=n(90078),O=n(10641),E=n(62597),p=n(14726),M=n(83062),r=n(42075),T=n(50136),g=n(54006),v=n(43425),D=n(67294),P=n(96974),y=n(80821),j=n(67255),C=n(78451),_=n(85893);function L(){var h=(0,P.UO)(),t=(0,D.useRef)();return(0,D.useEffect)(function(){var a;(a=t.current)===null||a===void 0||a.reload()},[h]),(0,_.jsx)(l._z,{header:{extra:[(0,_.jsx)(p.ZP,{type:"primary",children:(0,_.jsx)(g.Link,{to:"/app/create/image",children:"\u521B\u5EFA\u5BB9\u5668"})},"create")]},children:(0,_.jsx)(O.Z,{scroll:{x:"max-content"},actionRef:t,columns:[{title:"\u540D\u79F0",dataIndex:"siteTitle"},{title:"\u6807\u8BC6",dataIndex:"siteName"},{title:"\u6700\u540E\u9519\u8BEF",dataIndex:"message",width:250,render:function(i,e,R,m,d){return(0,_.jsx)(C.Z,{content:e.message})}},{title:"\u5220\u9664\u65E5\u671F",ellipsis:!0,dataIndex:"deletedAt",search:!1,width:180,render:function(i,e,R,m,d){return new Date(e.deletedAt).toLocaleString()}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:100,render:function(i,e,R,m){return[(0,_.jsx)(g.Link,{to:"/app/create/image?op=update&id="+e.id,type:"link",children:(0,_.jsx)(M.Z,{title:"\u518D\u6B21\u6784\u5EFA",children:(0,_.jsx)(v.Z,{})})},"rebuild")]}}],rowKey:"id",request:function(){var a=s()(u()().mark(function i(e,R,m){var d,B,U;return u()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,E.cl)({pageSize:(d=e.pageSize)!==null&&d!==void 0?d:10,page:(B=e.current)!==null&&B!==void 0?B:1,isDelete:!0,siteTitle:e.siteTitle,siteName:e.siteName});case 2:return U=b.sent,b.abrupt("return",{data:U.data.list,success:!0,total:U.data.total});case 4:case"end":return b.stop()}},i)}));return function(i,e,R){return a.apply(this,arguments)}}(),rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(i){var e=i.selectedRowKeys;return(0,_.jsx)(r.Z,{size:16,children:(0,_.jsx)(y.Z,{danger:!0,type:"primary",action:function(){return(0,E.xb)({id:e})},onSuccess:function(){var m,d;return!((m=t.current)===null||m===void 0)&&m.reloadAndRest&&((d=t.current)===null||d===void 0||d.reloadAndRest()),!0},onError:function(){var m,d;return!((m=t.current)===null||m===void 0)&&m.reset&&((d=t.current)===null||d===void 0||d.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"})})},pagination:(0,j.O)(),search:{collapsed:!1},tableExtraRender:function(){return(0,_.jsx)(T.Z,{mode:"horizontal",selectedKeys:["recycle"],items:[{label:(0,_.jsx)(g.Link,{to:"/app/list",replace:!0,children:"\u5BB9\u5668\u5217\u8868"}),key:"all"},{label:(0,_.jsx)(g.Link,{to:"/app/recycle",replace:!0,children:"\u56DE\u6536\u7AD9"}),key:"recycle"}]})}})})}},62597:function(A,c,n){n.d(c,{$G:function(){return O},Ct:function(){return y},Tb:function(){return r},XH:function(){return g},cl:function(){return p},iE:function(){return D},lK:function(){return L},xb:function(){return C}});var f=n(15009),u=n.n(f),o=n(99289),s=n.n(o),l=n(54006);function O(t){return E.apply(this,arguments)}function E(){return E=s()(u()().mark(function t(a){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/app/site/create-by-image",{method:"POST",data:a}));case 1:case"end":return e.stop()}},t)})),E.apply(this,arguments)}function p(t){return M.apply(this,arguments)}function M(){return M=s()(u()().mark(function t(a){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/app/site/get-list",{method:"POST",data:a}));case 1:case"end":return e.stop()}},t)})),M.apply(this,arguments)}function r(t){return T.apply(this,arguments)}function T(){return T=s()(u()().mark(function t(a){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.download=!1,e.next=3,(0,l.request)("/api/app/log/run",{method:"POST",data:a});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},t)})),T.apply(this,arguments)}function g(t){return v.apply(this,arguments)}function v(){return v=s()(u()().mark(function t(a){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.download=!0,e.next=3,(0,l.request)("/api/app/log/run",{method:"POST",data:a,responseType:"blob"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},t)})),v.apply(this,arguments)}function D(t){return P.apply(this,arguments)}function P(){return P=s()(u()().mark(function t(a){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.request)("/api/app/site/get-detail",{data:a,method:"POST"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)})),P.apply(this,arguments)}function y(t){return j.apply(this,arguments)}function j(){return j=s()(u()().mark(function t(a){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/app/container/delete",{method:"POST",data:a}));case 1:case"end":return e.stop()}},t)})),j.apply(this,arguments)}function C(t){return _.apply(this,arguments)}function _(){return _=s()(u()().mark(function t(a){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/app/site/delete",{method:"POST",data:a}));case 1:case"end":return e.stop()}},t)})),_.apply(this,arguments)}function L(t){return h.apply(this,arguments)}function h(){return h=s()(u()().mark(function t(a){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.request)("/api/app/site/update-title",{method:"POST",data:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)})),h.apply(this,arguments)}},67255:function(A,c,n){n.d(c,{O:function(){return f},j:function(){return u}});function f(){var o,s=parseInt((o=localStorage.getItem("dpanel-pagesize"))!==null&&o!==void 0?o:"0");return{showSizeChanger:!0,defaultPageSize:s!=null?s:20}}function u(o){var s="dpanel-table-column-".concat(o),l={};if(localStorage.getItem(s)){var O;l=JSON.parse((O=localStorage.getItem(s))!==null&&O!==void 0?O:"{}")}return{defaultValue:l,onChange:function(p){localStorage.setItem("dpanel-table-column-".concat(o),JSON.stringify(p))}}}}}]);
