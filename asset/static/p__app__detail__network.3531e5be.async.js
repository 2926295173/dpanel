"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2902],{80821:function(b,o,e){e.d(o,{Z:function(){return v}});var m=e(97857),a=e.n(m),c=e(5574),_=e.n(c),u=e(24963),p=e(86738),E=e(28036),W=e(83062),D=e(67294),C=e(85893);function v(n){var P=(0,D.useState)(!1),j=_()(P,2),O=j[0],l=j[1],s=(0,D.useContext)(u.Z),M=s.lang,T=s.message,g=function(){l(!0);var U=n.action();U instanceof Promise?U.then(function(d){if(l(!1),d){typeof n.onSuccess=="function"&&n.onSuccess(d);var r="";n.messageSuccess?typeof n.messageSuccess=="function"?r=n.messageSuccess(d):r=n.messageSuccess.indexOf("notification.")==0?M(n.messageSuccess):n.messageSuccess:r=M("notification.finish"),n.asynced?T.info(r):T.success(r)}}).catch(function(d){l(!1),typeof n.onError=="function"&&n.onError(d)}):l(!1)};return n.confirm?(0,C.jsx)(p.Z,a()(a()({style:{width:500},title:n.confirmTitle?n.confirmTitle:M("notification.title.tip"),description:typeof n.confirm=="string"&&n.confirm.indexOf("notification.")==0?M(n.confirm):n.confirm,onConfirm:g,okText:"Yes",cancelText:"No",onOpenChange:n.confirmOnOpenChange},n.confirmProps),{},{children:(0,C.jsx)(E.ZP,{block:n.block,disabled:n.disabled,icon:!n.children&&O?void 0:n.icon,loading:O,danger:n.danger,type:n.type,children:n.children})})):(0,C.jsx)(W.Z,{title:n.tips,children:(0,C.jsx)(E.ZP,{block:n.block,style:n.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:n.disabled,icon:!n.children&&O?void 0:n.icon,loading:O,onClick:g,danger:n.danger,type:n.type,children:n.children})})}},78498:function(b,o,e){e.d(o,{Z:function(){return p}});var m=e(25035),a=e(42075),c=e(83062),_=e(67294),u=e(85893);function p(E){return(0,u.jsxs)(a.Z,{children:[E.title,(0,u.jsx)(c.Z,{title:E.help,children:(0,u.jsx)(m.Z,{})})]})}},78451:function(b,o,e){e.d(o,{Z:function(){return c}});var m=e(67294),a=e(85893);function c(_){return(0,a.jsx)("span",{style:{width:_.width?_.width:"auto",wordBreak:"break-word"},children:_.content})}},3616:function(b,o,e){e.d(o,{Ed:function(){return _},FK:function(){return a},R_:function(){return m},ob:function(){return c}});var m=window.innerWidth<=1024?"90vw":"65vw",a="90vw",c="60vw",_="50vh"},24963:function(b,o,e){var m=e(67294),a=(0,m.createContext)({});o.Z=a},50070:function(b,o,e){e.r(o),e.d(o,{AppDetailContext:function(){return M},default:function(){return T}});var m=e(15009),a=e.n(m),c=e(99289),_=e.n(c),u=e(5574),p=e.n(u),E=e(1699),W=e(24963),D=e(13822),C=e(55809),v=e(90078),n=e(82346),P=e(25593),j=e(28036),O=e(50136),l=e(67294),s=e(85893),M=(0,l.createContext)({});function T(){var g,A=(0,l.useContext)(W.Z),U=A.loading,d=(0,n.useParams)(),r=(0,n.useSearchParams)(),i=p()(r,2),f=i[0],t=i[1],G=(g=f.get("tab"))!==null&&g!==void 0?g:"edit",V=(0,l.useState)("edit"),x=p()(V,2),z=x[0],k=x[1],R=(0,n.useNavigate)(),H=(0,l.useState)(1),Z=p()(H,2),w=Z[0],J=Z[1],$=[{label:(0,s.jsx)(n.Link,{to:"/app/detail/edit/".concat(d.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,s.jsx)(n.Link,{to:"/app/detail/network/".concat(d.id,"?tab=network"),children:"\u7F51\u7EDC\u7BA1\u7406"}),key:"network"},{label:(0,s.jsx)(P.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){R("/app/detail/file/".concat(d.id,"?tab=file"))}},{label:(0,s.jsx)(P.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){R("/app/detail/log/".concat(d.id,"?tab=log"))}},{label:(0,s.jsx)(P.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){R("/app/detail/stat/".concat(d.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,s.jsx)(C.Z,{}),disabled:!0}],Y=(0,l.useState)($),F=p()(Y,2),Q=F[0],X=F[1];(0,l.useEffect)(function(){U.show(),k(G);var y=function(){var I=_()(a()().mark(function N(){var K,S,L;return a()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return K=$,h.prev=1,h.next=4,(0,D.jV)({md5:(S=d.id)!==null&&S!==void 0?S:""});case 4:L=h.sent,K.map(function(B){return B.key=="containerName"&&(B.label=L.data.info.Name),(!L.data.info.State.Running||L.data.info.State.Restarting)&&(B.key=="file"||B.key=="stat")&&(B.disabled=!0),B}),X(K),h.next=13;break;case 9:return h.prev=9,h.t0=h.catch(1),R("/app/list"),h.abrupt("return");case 13:return h.prev=13,U.destroy(),h.finish(13);case 16:case"end":return h.stop()}},N,null,[[1,9,13,16]])}));return function(){return I.apply(this,arguments)}}();y()},[w,d]);var q=function(I){k(I.key)};return(0,s.jsx)(M.Provider,{value:{reload:function(){J(w+1)}},children:(0,s.jsxs)(v._z,{header:{extra:[(0,s.jsx)(E.u,{access:"canSeeContainerListManageCreate",children:(0,s.jsx)(n.Link,{to:"/app/create/image",children:(0,s.jsx)(j.ZP,{type:"primary",children:"\u521B\u5EFA\u5BB9\u5668"})})},"create")]},children:[(0,s.jsx)(O.Z,{mode:"horizontal",onClick:q,selectedKeys:[z],items:Q}),(0,s.jsx)(n.Outlet,{})]})})}},77812:function(b,o,e){e.r(o),e.d(o,{default:function(){return D}});var m=e(5574),a=e.n(m),c=e(67294),_=e(13822),u=e(82346),p=e(50070),E=e(43831),W=e(85893);function D(){var C=(0,u.useParams)(),v=(0,c.useState)(),n=a()(v,2),P=n[0],j=n[1],O=(0,c.useContext)(p.AppDetailContext);return(0,c.useEffect)(function(){var l;(0,_.jV)({md5:(l=C.id)!==null&&l!==void 0?l:""}).then(function(s){j(s.data.info)}),O.reload()},[]),P&&(0,W.jsx)(E.Z,{containerInfo:P})}},13822:function(b,o,e){e.d(o,{IE:function(){return W},IW:function(){return p},KK:function(){return j},LJ:function(){return l},RF:function(){return g},Re:function(){return M},aF:function(){return U},eE:function(){return n},jV:function(){return C}});var m=e(15009),a=e.n(m),c=e(99289),_=e.n(c),u=e(82346);function p(r){return E.apply(this,arguments)}function E(){return E=_()(a()().mark(function r(i){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/status",{method:"POST",data:i}));case 1:case"end":return t.stop()}},r)})),E.apply(this,arguments)}function W(r){return D.apply(this,arguments)}function D(){return D=_()(a()().mark(function r(i){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/get-list",{data:i,method:"POST"}));case 1:case"end":return t.stop()}},r)})),D.apply(this,arguments)}function C(r){return v.apply(this,arguments)}function v(){return v=_()(a()().mark(function r(i){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/get-detail",{data:i,method:"POST"}));case 1:case"end":return t.stop()}},r)})),v.apply(this,arguments)}function n(r){return P.apply(this,arguments)}function P(){return P=_()(a()().mark(function r(i){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/update",{data:i,method:"POST"}));case 1:case"end":return t.stop()}},r)})),P.apply(this,arguments)}function j(){return O.apply(this,arguments)}function O(){return O=_()(a()().mark(function r(){return a()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,u.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return f.stop()}},r)})),O.apply(this,arguments)}function l(r){return s.apply(this,arguments)}function s(){return s=_()(a()().mark(function r(i){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/export",{method:"POST",data:i,responseType:"blob"}));case 1:case"end":return t.stop()}},r)})),s.apply(this,arguments)}function M(r){return T.apply(this,arguments)}function T(){return T=_()(a()().mark(function r(i){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/commit",{method:"POST",data:i}));case 1:case"end":return t.stop()}},r)})),T.apply(this,arguments)}function g(r){return A.apply(this,arguments)}function A(){return A=_()(a()().mark(function r(i){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/upgrade",{method:"POST",data:i}));case 1:case"end":return t.stop()}},r)})),A.apply(this,arguments)}function U(r){return d.apply(this,arguments)}function d(){return d=_()(a()().mark(function r(i){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,u.request)("/api/app/container/copy",{method:"POST",data:i}));case 1:case"end":return t.stop()}},r)})),d.apply(this,arguments)}}}]);
