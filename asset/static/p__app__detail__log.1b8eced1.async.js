(self.webpackChunk=self.webpackChunk||[]).push([[8615,5947],{55809:function(I,R,e){"use strict";var T=e(87462),o=e(67294),A=e(44805),c=e(84089),E=function(d,C){return o.createElement(c.Z,(0,T.Z)({},d,{ref:C,icon:A.Z}))},M=o.forwardRef(E);R.Z=M},23430:function(I,R,e){"use strict";e.d(R,{Z:function(){return d}});var T=e(87462),o=e(67294),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},c=A,E=e(84089),M=function(t,i){return o.createElement(E.Z,(0,T.Z)({},t,{ref:i,icon:c}))},v=o.forwardRef(M),d=v},1699:function(I,R,e){"use strict";e.d(R,{u:function(){return t}});var T=e(9783),o=e.n(T),A=e(97857),c=e.n(A),E=e(67294),M=e(82346),v=e(40411),d=e(42075),C=e(85893),t=function(n){var f=(0,M.useAccess)(),s=Array.isArray(n.access)?n.access:[n.access],a,u=n.fallback;return typeof n.children=="function"?(a=n.children(s.reduce(function(h,l){return c()(c()({},h),{},o()({},l,f[l]))},{})),a||(a=u)):s.every(function(h){return f[h]})?a=n.children:a=u,!u&&a&&n.showProTips&&f.canSeeEnableCe&&(a=(0,C.jsx)(v.Z,{offset:n.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:a})),!u&&a&&n.showProRibbonTips&&f.canSeeEnableCe&&(a=(0,C.jsx)(v.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:a})),n.space?(0,C.jsx)(d.Z,c()(c()({},n.space),{},{children:a})):a}},80821:function(I,R,e){"use strict";e.d(R,{Z:function(){return C}});var T=e(5574),o=e.n(T),A=e(24963),c=e(86738),E=e(28036),M=e(83062),v=e(67294),d=e(85893);function C(t){var i=(0,v.useState)(!1),n=o()(i,2),f=n[0],s=n[1],a=(0,v.useContext)(A.Z),u=a.lang,h=a.notice,l=a.message,O=function(){s(!0);var j=t.action();j instanceof Promise?j.then(function(p){if(s(!1),p){typeof t.onSuccess=="function"&&t.onSuccess(p);var _="";t.messageSuccess?typeof t.messageSuccess=="function"?_=t.messageSuccess(p):_=t.messageSuccess.indexOf("notification.")==0?u(t.messageSuccess):t.messageSuccess:_=u("notification.finish"),t.asynced?l.info(_):l.success(_)}}).catch(function(p){s(!1),typeof t.onError=="function"&&t.onError(p)}):s(!1)};return t.confirm?(0,d.jsx)(c.Z,{style:{width:500},title:t.confirmTitle?t.confirmTitle:u("notification.title.tip"),description:typeof t.confirm=="string"&&t.confirm.indexOf("notification.")==0?u(t.confirm):t.confirm,onConfirm:O,okText:"Yes",cancelText:"No",onOpenChange:t.confirmOnOpenChange,children:(0,d.jsx)(E.ZP,{block:t.block,disabled:t.disabled,icon:!t.children&&f?void 0:t.icon,loading:f,danger:t.danger,type:t.type,children:t.children})}):(0,d.jsx)(M.Z,{title:t.tips,children:(0,d.jsx)(E.ZP,{block:t.block,style:t.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:t.disabled,icon:!t.children&&f?void 0:t.icon,loading:f,onClick:O,danger:t.danger,type:t.type,children:t.children})})}},81146:function(I,R,e){"use strict";var T=e(15009),o=e.n(T),A=e(99289),c=e.n(A),E=e(97857),M=e.n(E),v=e(67294),d=e(97269),C=e(62370),t=e(5966),i=e(97462),n=e(82346),f=e(71230),s=e(15746),a=e(34041),u=e(28036),h=e(84567),l=e(42075),O=e(40365),g=e(80821),j=e(23430),p=e(93162),_=e.n(p),D=e(12320),P=e.n(D),r=e(78267),X=e.n(r),$=e(75458),ne=e.n($),m=e(85893),K=new D.Terminal(M()(M()({},O.a),{},{fontSize:12})),S=new r.FitAddon,V=new $.SearchAddon,H=(0,v.forwardRef)(function(y,Y){(0,v.useImperativeHandle)(Y,function(){return{fit:function(){K.clear(),S.fit()},start:function(){return c()(o()().mark(function W(){return o()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,G({lineTotal:500});case 2:case"end":return B.stop()}},W)}))()},close:function(){F.progress.close(y.id)}}});var Z=(0,v.useRef)(),F=(0,n.useModel)("subscriber");F.addDataHandler(y.id,function(U){K.write(U.data.replaceAll(`
`,`

`))});var G=function(){var U=c()(o()().mark(function W(L){return o()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return K.clear(),L.download=!1,w.next=4,y.request(L);case 4:case"end":return w.stop()}},W)}));return function(L){return U.apply(this,arguments)}}();return(0,v.useEffect)(function(){return window.addEventListener("resize",function(){S.fit()}),K.loadAddon(S),K.open(document.getElementById("terminal-container-log")),S.fit(),function(){K.clear(),K.reset(),F.progress.close(y.id)}},[]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d.A,{submitter:!1,layout:"horizontal",onValuesChange:function(W,L){G({id:y.id,lineTotal:parseInt(L.lineTotal),showTime:L.showTime})},formRef:Z,children:(0,m.jsxs)(f.Z,{gutter:[10,0],children:[(0,m.jsx)(s.Z,{span:8,children:(0,m.jsx)(C.Z,{name:"lineTotal",initialValue:"500",label:"\u83B7\u53D6\u65E5\u5FD7\u6761\u6570",children:(0,m.jsxs)(a.Z,{defaultValue:"500",children:[(0,m.jsx)(a.Z.Option,{value:"100",children:"100\u6761\u65E5\u5FD7\u6570\u636E"}),(0,m.jsx)(a.Z.Option,{value:"200",children:"200\u6761\u65E5\u5FD7\u6570\u636E"}),(0,m.jsx)(a.Z.Option,{value:"500",children:"500\u6761\u65E5\u5FD7\u6570\u636E"}),(0,m.jsx)(a.Z.Option,{value:"1000",children:"1000\u6761\u65E5\u5FD7\u6570\u636E"}),(0,m.jsx)(a.Z.Option,{value:"-1",children:"\u5168\u90E8\uFF08\u4E0B\u8F7D\u53EF\u89C1\uFF09"})]})})}),(0,m.jsx)(s.Z,{children:(0,m.jsx)(u.ZP,{onClick:function(){K.clear()},children:"\u6E05\u5C4F"})}),(0,m.jsx)(s.Z,{children:(0,m.jsx)(C.Z,{name:"showTime",valuePropName:"checked",children:(0,m.jsx)(h.Z,{children:"\u663E\u793A\u65F6\u95F4"})})}),(0,m.jsx)(s.Z,{children:(0,m.jsx)(t.Z,{label:"\u67E5\u627E",name:"keywork"})}),(0,m.jsx)(s.Z,{children:(0,m.jsx)(i.Z,{name:["keywork"],children:function(W){var L=W.keywork;return(0,m.jsxs)(l.Z,{size:10,children:[(0,m.jsx)(u.ZP,{onClick:function(){V.findNext(L)},children:"\u4E0B\u4E00\u4E2A"},"next"),(0,m.jsx)(u.ZP,{onClick:function(){V.findPrevious(L)},children:"\u4E0A\u4E00\u4E2A"},"prev")]})}})}),(0,m.jsx)(s.Z,{children:(0,m.jsx)(g.Z,{icon:(0,m.jsx)(j.Z,{}),action:c()(o()().mark(function U(){var W,L,B;return o()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!y.download){x.next=5;break}return x.next=3,y.download({lineTotal:parseInt((W=Z.current)===null||W===void 0?void 0:W.getFieldValue("lineTotal")),showTime:(L=Z.current)===null||L===void 0?void 0:L.getFieldValue("showTime")});case 3:B=x.sent,(0,p.saveAs)(B.data,B.name);case 5:case"end":return x.stop()}},U)})),children:"\u4E0B\u8F7D\u65E5\u5FD7"})})]})}),(0,m.jsx)("div",{style:{marginTop:"20px",height:y.showInDrawer?"75vh":"580px"},id:"terminal-container-log"})]})});R.Z=H},50070:function(I,R,e){"use strict";e.r(R),e.d(R,{AppDetailContext:function(){return l},default:function(){return O}});var T=e(15009),o=e.n(T),A=e(99289),c=e.n(A),E=e(5574),M=e.n(E),v=e(1699),d=e(24963),C=e(60335),t=e(55809),i=e(90078),n=e(82346),f=e(25593),s=e(28036),a=e(50136),u=e(67294),h=e(85893),l=(0,u.createContext)({});function O(){var g,j=(0,u.useContext)(d.Z),p=j.lang,_=j.loading,D=j.message,P=(0,n.useParams)(),r=(0,n.useSearchParams)(),X=M()(r,2),$=X[0],ne=X[1],m=(g=$.get("tab"))!==null&&g!==void 0?g:"edit",K=(0,u.useState)("edit"),S=M()(K,2),V=S[0],H=S[1],y=(0,n.useNavigate)(),Y=(0,u.useState)(1),Z=M()(Y,2),F=Z[0],G=Z[1],U=[{label:(0,h.jsx)(n.Link,{to:"/app/detail/edit/".concat(P.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,h.jsx)(n.Link,{to:"/app/detail/network/".concat(P.id,"?tab=network"),children:"\u7F51\u7EDC\u7BA1\u7406"}),key:"network"},{label:(0,h.jsx)(f.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){D.info(p("app.detail.createExplorerPlugin")),y("/app/detail/file/".concat(P.id,"?tab=file"))}},{label:(0,h.jsx)(f.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){y("/app/detail/log/".concat(P.id,"?tab=log"))}},{label:(0,h.jsx)(f.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){y("/app/detail/stat/".concat(P.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,h.jsx)(t.Z,{}),disabled:!0}],W=(0,u.useState)(U),L=M()(W,2),B=L[0],w=L[1];(0,u.useEffect)(function(){_.show(),H(m);var k=function(){var J=c()(o()().mark(function ee(){var Q,q,z;return o()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return Q=U,b.prev=1,b.next=4,(0,C.jV)({md5:(q=P.id)!==null&&q!==void 0?q:""});case 4:z=b.sent,Q.map(function(N){return N.key=="containerName"&&(N.label=z.data.info.Name),(!z.data.info.State.Running||z.data.info.State.Restarting)&&(N.key=="file"||N.key=="stat")&&(N.disabled=!0),N}),w(Q),b.next=13;break;case 9:return b.prev=9,b.t0=b.catch(1),y("/app/list"),b.abrupt("return");case 13:return b.prev=13,_.destroy(),b.finish(13);case 16:case"end":return b.stop()}},ee,null,[[1,9,13,16]])}));return function(){return J.apply(this,arguments)}}();k()},[F,P]);var x=function(J){H(J.key)};return(0,h.jsx)(l.Provider,{value:{reload:function(){G(F+1)}},children:(0,h.jsxs)(i._z,{header:{extra:[(0,h.jsx)(v.u,{access:"canSeeContainerListManageCreate",children:(0,h.jsx)(n.Link,{to:"/app/create/image",children:(0,h.jsx)(s.ZP,{type:"primary",children:"\u521B\u5EFA\u5BB9\u5668"})})},"create")]},children:[(0,h.jsx)(a.Z,{mode:"horizontal",onClick:x,selectedKeys:[V],items:B}),(0,h.jsx)(n.Outlet,{})]})})}},88685:function(I,R,e){"use strict";e.r(R),e.d(R,{default:function(){return s}});var T=e(15009),o=e.n(T),A=e(99289),c=e.n(A),E=e(38345),M=e(82346),v=e(81146),d=e(67294),C=e(50070),t=e(62597),i=e(60335),n=e(85893);function f(a){var u=function(l){if(a.check&&a.check(l)){l.preventDefault();return}if(l.target&&l.target.className&&l.target.className.indexOf(a.targetClassName)!==-1){l.preventDefault();return}};return(0,d.useEffect)(function(){return window.addEventListener("wheel",u,{passive:!1}),function(){window.removeEventListener("wheel",u)}},[]),(0,n.jsx)(n.Fragment,{children:a.children})}function s(){var a=(0,M.useParams)(),u=(0,d.useRef)(),h=(0,d.useContext)(C.AppDetailContext);return(0,d.useEffect)(function(){return h.reload(),setTimeout(function(){if(a.id){var l,O;(l=u.current)===null||l===void 0||l.start(),(O=u.current)===null||O===void 0||O.fit()}},1e3),function(){var l;(l=u.current)===null||l===void 0||l.close()}},[]),(0,n.jsx)(E.Z,{direction:"column",gutter:[0,10],children:a.id&&(0,n.jsx)(f,{check:function(O){return!!(O&&O.target&&O.target.parentNode.parentNode.className&&O.target.parentNode.parentNode.className.indexOf("xterm")!==-1)},children:(0,n.jsx)(v.Z,{id:"container:log:".concat(a.id),ref:u,request:function(){var l=c()(o()().mark(function O(g){return o()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,t.Tb)({id:a.id,lineTotal:g.lineTotal,download:g.download,showTime:g.showTime});case 2:case"end":return p.stop()}},O)}));return function(O){return l.apply(this,arguments)}}(),download:function(){var l=c()(o()().mark(function O(g){var j,p,_;return o()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,t.XH)({id:a.id,lineTotal:g.lineTotal,showTime:g.showTime});case 2:return p=P.sent,P.next=5,(0,i.jV)({md5:(j=a.id)!==null&&j!==void 0?j:""});case 5:return _=P.sent,P.abrupt("return",{data:new Blob([p],{type:"text/plain"}),name:_.data.info.Name.replaceAll("/","")+"_"+new Date().toLocaleDateString()+".log"});case 7:case"end":return P.stop()}},O)}));return function(O){return l.apply(this,arguments)}}()})})})}},62597:function(I,R,e){"use strict";e.d(R,{$G:function(){return M},Ct:function(){return h},Tb:function(){return i},XH:function(){return f},cl:function(){return C},fp:function(){return d},iE:function(){return a},xb:function(){return O},ze:function(){return j}});var T=e(15009),o=e.n(T),A=e(99289),c=e.n(A),E=e(82346);function M(_){return v.apply(this,arguments)}function v(){return v=c()(o()().mark(function _(D){return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,E.request)("/api/app/site/create-by-image",{method:"POST",data:D}));case 1:case"end":return r.stop()}},_)})),v.apply(this,arguments)}var d={EnvValueRuleRequired:1,EnvValueRuleDisabled:2,EnvValueTypeNumber:1024,EnvValueTypeText:2048,EnvValueTypeSelect:4096};function C(_){return t.apply(this,arguments)}function t(){return t=c()(o()().mark(function _(D){return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,E.request)("/api/app/site/get-list",{method:"POST",data:D}));case 1:case"end":return r.stop()}},_)})),t.apply(this,arguments)}function i(_){return n.apply(this,arguments)}function n(){return n=c()(o()().mark(function _(D){return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return D.download=!1,r.next=3,(0,E.request)("/api/app/log/run",{method:"POST",data:D});case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}},_)})),n.apply(this,arguments)}function f(_){return s.apply(this,arguments)}function s(){return s=c()(o()().mark(function _(D){return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return D.download=!0,r.next=3,(0,E.request)("/api/app/log/run",{method:"POST",data:D,responseType:"blob"});case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}},_)})),s.apply(this,arguments)}function a(_){return u.apply(this,arguments)}function u(){return u=c()(o()().mark(function _(D){return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return D.id=String(D.id),r.next=3,(0,E.request)("/api/app/site/get-detail",{data:D,method:"POST"});case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}},_)})),u.apply(this,arguments)}function h(_){return l.apply(this,arguments)}function l(){return l=c()(o()().mark(function _(D){return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,E.request)("/api/app/container/delete",{method:"POST",data:D}));case 1:case"end":return r.stop()}},_)})),l.apply(this,arguments)}function O(_){return g.apply(this,arguments)}function g(){return g=c()(o()().mark(function _(D){return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,E.request)("/api/app/site/delete",{method:"POST",data:D}));case 1:case"end":return r.stop()}},_)})),g.apply(this,arguments)}function j(_){return p.apply(this,arguments)}function p(){return p=c()(o()().mark(function _(D){return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,E.request)("/api/app/container/ignore",{method:"POST",data:D}));case 1:case"end":return r.stop()}},_)})),p.apply(this,arguments)}},93162:function(I,R,e){var T,o,A;(function(c,E){o=[],T=E,A=typeof T=="function"?T.apply(R,o):T,A!==void 0&&(I.exports=A)})(this,function(){"use strict";function c(i,n){return typeof n=="undefined"?n={autoBom:!1}:typeof n!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}function E(i,n,f){var s=new XMLHttpRequest;s.open("GET",i),s.responseType="blob",s.onload=function(){t(s.response,n,f)},s.onerror=function(){console.error("could not download file")},s.send()}function M(i){var n=new XMLHttpRequest;n.open("HEAD",i,!1);try{n.send()}catch(f){}return 200<=n.status&&299>=n.status}function v(i){try{i.dispatchEvent(new MouseEvent("click"))}catch(f){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(n)}}var d=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof e.g=="object"&&e.g.global===e.g?e.g:void 0,C=d.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),t=d.saveAs||(typeof window!="object"||window!==d?function(){}:"download"in HTMLAnchorElement.prototype&&!C?function(i,n,f){var s=d.URL||d.webkitURL,a=document.createElement("a");n=n||i.name||"download",a.download=n,a.rel="noopener",typeof i=="string"?(a.href=i,a.origin===location.origin?v(a):M(a.href)?E(i,n,f):v(a,a.target="_blank")):(a.href=s.createObjectURL(i),setTimeout(function(){s.revokeObjectURL(a.href)},4e4),setTimeout(function(){v(a)},0))}:"msSaveOrOpenBlob"in navigator?function(i,n,f){if(n=n||i.name||"download",typeof i!="string")navigator.msSaveOrOpenBlob(c(i,f),n);else if(M(i))E(i,n,f);else{var s=document.createElement("a");s.href=i,s.target="_blank",setTimeout(function(){v(s)})}}:function(i,n,f,s){if(s=s||open("","_blank"),s&&(s.document.title=s.document.body.innerText="downloading..."),typeof i=="string")return E(i,n,f);var a=i.type==="application/octet-stream",u=/constructor/i.test(d.HTMLElement)||d.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||a&&u||C)&&typeof FileReader!="undefined"){var l=new FileReader;l.onloadend=function(){var j=l.result;j=h?j:j.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=j:location=j,s=null},l.readAsDataURL(i)}else{var O=d.URL||d.webkitURL,g=O.createObjectURL(i);s?s.location=g:location.href=g,s=null,setTimeout(function(){O.revokeObjectURL(g)},4e4)}});d.saveAs=t.saveAs=t,I.exports=t})}}]);
