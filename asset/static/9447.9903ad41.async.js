"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9447],{37767:function(ee,K,e){e.d(K,{Z:function(){return P}});var F=e(15009),i=e.n(F),W=e(99289),E=e.n(W),p=e(5574),y=e.n(p),l=e(45605),M=e(38345),C=e(97269),c=e(26412),R=e(42075),I=e(96074),h=e(25593),x=e(2487),s=e(67294),_=e(76428),d=e(78498),k=e(44771),t=e(13822),V=e(24963),m=e(37413),oe=e(5251),J=e(82346),j=e(87662),S=e(36146),n=e(85893);function P(r){var ae,ne,w,de,ue,ce,le,_e,q,a,Y=new S.Uo("components.appDetail.appDetailContainer"),Ie=(0,s.useState)(""),ge=y()(Ie,2),Ee=ge[0],pe=ge[1],Me=(0,J.useAccess)(),je=(0,s.useContext)(V.Z),me=je.message,fe=(0,s.useRef)(),Pe=[],ve=[],De=[],Ce=(0,s.useState)(""),Oe=y()(Ce,2),Re=Oe[0],xe=Oe[1];return(0,s.useEffect)(function(){r.data&&((0,j.K3)().then(function(Z){var o;xe((o=Z.data.serverUrl)!==null&&o!==void 0?o:"")}),pe(r.data.info.Name))},[r.data]),(0,s.useEffect)(function(){var Z;(Z=fe.current)===null||Z===void 0||Z.setFieldValue("restart",{name:r.data.info.HostConfig.RestartPolicy.Name,maxAccept:r.data.info.HostConfig.RestartPolicy.MaximumRetryCount})},[fe.current,r.data]),r.data&&r.data.domain&&r.data.domain.map(function(Z){De.push(Z.setting.enableSSL?"https://"+Z.serverName:"http://"+Z.serverName)}),r.data.info.NetworkSettings.Ports&&Object.entries(r.data.info.NetworkSettings.Ports).forEach(function(Z){var o=y()(Z,2),$=o[0],L=o[1];if(L){var U=$.split("/"),T=y()(U,2),B=T[0],g=T[1];L.forEach(function(H){H.HostPort?Pe.push({PrivatePort:B,Type:g,IP:H.HostIp,PublicPort:H.HostPort}):ve.push({PrivatePort:B,Type:g,IP:"",PublicPort:""})})}}),(0,n.jsxs)(n.Fragment,{children:[r.data&&r.data.info.State.Running&&(0,n.jsx)(m.Z,{publicPort:Pe,privatePort:ve,domain:De,serverIp:Re,showInDetail:!0,ghost:r.ghost,layout:"inline"}),(0,n.jsx)(M.Z,{title:(0,n.jsx)(l.Z,{}),subTitle:Y.format("cardTitle"),ghost:r.ghost,children:(0,n.jsxs)(c.Z,{column:1,bordered:!0,children:[(0,n.jsx)(c.Z.Item,{label:"Hostname",children:(0,n.jsx)(R.Z,{split:(0,n.jsx)(I.Z,{type:"vertical"}),children:(0,n.jsx)(_.Z,{title:(ae=r.data.info)===null||ae===void 0?void 0:ae.Config.Hostname})})}),(0,n.jsx)(c.Z.Item,{label:Y.format("containerName"),children:(0,n.jsxs)(R.Z,{split:(0,n.jsx)(I.Z,{type:"vertical"}),children:[(0,n.jsx)(_.Z,{title:(ne=r.data.info)===null||ne===void 0?void 0:ne.Id.substring(0,12)}),(0,n.jsx)(h.Z.Text,{copyable:!0,editable:{tooltip:Y.format("containerNameEditTip"),onChange:function(){var Z=E()(i()().mark(function $(L){var U,T;return i()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if((U=r.data.info)!==null&&U!==void 0&&U.Id){g.next=2;break}return g.abrupt("return");case 2:return g.next=4,(0,t.eE)({md5:r.data.info.Id,name:L});case 4:T=g.sent,pe(L),me.success(S.FD.format("finish"));case 7:case"end":return g.stop()}},$)}));function o($){return Z.apply(this,arguments)}return o}()},children:(0,oe.fi)(Ee,"/")})]})}),(0,n.jsx)(c.Z.Item,{label:(0,n.jsx)(d.Z,{title:Y.format("network"),help:Y.format("networkHelp")}),children:((w=r.data.info)===null||w===void 0?void 0:w.State.Running)&&(0,n.jsxs)(c.Z,{column:1,bordered:!0,children:[r.data.info.NetworkSettings.Networks&&Object.keys(r.data.info.NetworkSettings.Networks).map(function(Z,o){var $,L,U;return(0,n.jsx)(c.Z.Item,{label:Z,children:Z=="host"?Y.format("networkUseHost"):(0,n.jsxs)(R.Z,{direction:"vertical",children:[(0,n.jsx)(_.Z,{title:($=r.data.info)===null||$===void 0?void 0:$.NetworkSettings.Networks[Z].IPAddress}),(L=r.data.info)===null||L===void 0?void 0:L.NetworkSettings.Networks[Z].Gateway,(U=r.data.info)===null||U===void 0?void 0:U.NetworkSettings.Networks[Z].MacAddress]})},o)}),r.data.info.HostConfig.ExtraHosts&&(0,n.jsx)(c.Z.Item,{label:Y.format("networkExtra"),children:(0,n.jsx)(R.Z,{direction:"vertical",children:r.data.info.HostConfig.ExtraHosts.map(function(Z,o){if(Z.indexOf(":")>-1){var $=Z.split(":");return"".concat($[0]," - ").concat($.slice(1).join(":"))}})})},"host")]})}),(0,n.jsx)(c.Z.Item,{label:Y.format("runTime"),children:Y.format("runTimeValue",{create:new Date((de=(ue=r.data.info)===null||ue===void 0?void 0:ue.Created)!==null&&de!==void 0?de:"").toLocaleString(),upgrade:new Date((ce=(le=r.data.info)===null||le===void 0?void 0:le.State.StartedAt)!==null&&ce!==void 0?ce:"").toLocaleString()})}),Me.canSeeContainerListManage&&(0,n.jsx)(c.Z.Item,{label:Y.format("restartPolicy"),children:(0,n.jsx)(C.A,{name:"container-restart",submitter:!1,onValuesChange:function(){var Z=E()(i()().mark(function o($,L){var U,T;return i()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if((U=r.data.info)!==null&&U!==void 0&&U.Id){g.next=2;break}return g.abrupt("return");case 2:return g.next=4,(0,t.eE)({md5:r.data.info.Id,restart:L.restart});case 4:return T=g.sent,me.success(S.FD.format("finish")),g.abrupt("return");case 7:case"end":return g.stop()}},o)}));return function(o,$){return Z.apply(this,arguments)}}(),layout:"inline",formRef:fe,children:(0,n.jsx)(k.Z,{ghost:!0,defaultValue:(_e=r.data.info)===null||_e===void 0?void 0:_e.HostConfig.RestartPolicy.Name})})}),(0,n.jsx)(c.Z.Item,{label:Y.format("env"),children:(0,n.jsx)(x.Z,{dataSource:(q=(a=r.data.info)===null||a===void 0?void 0:a.Config.Env)!==null&&q!==void 0?q:[],renderItem:function(o){var $=o.split("=");return(0,n.jsxs)(x.Z.Item,{children:[(0,n.jsx)(h.Z.Text,{code:!0,children:$[0]})," = ",(0,n.jsx)(h.Z.Text,{copyable:!0,children:$.slice(1).join("=")})]})}})})]})})]})}},14245:function(ee,K,e){e.d(K,{Z:function(){return R}});var F=e(5574),i=e.n(F),W=e(3393),E=e(36146),p=e(60433),y=e(38345),l=e(26412),M=e(25593),C=e(67294),c=e(85893);function R(I){var h=new E.Uo("components.appDetail.appDetailQuickImage"),x=(0,C.useState)(),s=i()(x,2),_=s[0],d=s[1];return(0,C.useEffect)(function(){(0,W.YU)({md5:I.data.Image}).then(function(k){d(k.data)})},[I.data]),(0,c.jsx)(y.Z,{ghost:I.ghost,title:(0,c.jsx)(p.Z,{}),subTitle:h.format("cardTitle"),children:(0,c.jsxs)(l.Z,{styles:{label:{width:200}},column:1,bordered:!0,children:[(0,c.jsx)(l.Z.Item,{label:"Image Tag",children:(0,c.jsx)(M.Z.Text,{copyable:!0,children:I.data.Config.Image})}),(0,c.jsx)(l.Z.Item,{label:"Image",children:I.data.Image}),(0,c.jsx)(l.Z.Item,{label:"CMD",children:(_==null?void 0:_.info.Config.Cmd)&&(_==null?void 0:_.info.Config.Cmd.join(" "))}),(0,c.jsx)(l.Z.Item,{label:"ENTRYPOINT",children:_==null?void 0:_.info.Config.Entrypoint}),(0,c.jsx)(l.Z.Item,{label:"Labels",children:(0,c.jsx)(l.Z,{column:1,bordered:!0,children:(_==null?void 0:_.info.Config.Labels)&&Object.entries(_==null?void 0:_.info.Config.Labels).map(function(k){var t=i()(k,2),V=t[0],m=t[1];return(0,c.jsx)(l.Z.Item,{label:V,children:m},V)})})})]})})}},53399:function(ee,K,e){e.d(K,{Z:function(){return Z}});var F=e(15009),i=e.n(F),W=e(99289),E=e.n(W),p=e(5574),y=e.n(p),l=e(67294),M=e(80821),C=e(62597),c=e(13822),R=e(43425),I=e(58638),h=e(60219),x=e(86548),s=e(57132),_=e(87784),d=e(25035),k=e(38345),t=e(97269),V=e(62370),m=e(5966),oe=e(52688),J=e(82346),j=e(42075),S=e(25278),n=e(96074),P=e(83622),r=e(25593),ae=e(85418),ne=e(40411),w=e(84567),de=e(83062),ue=e(93162),ce=e(24739),le=e(97462),_e=e(70146),q=e(36146),a=e(85893);function Y(o){var $=(0,l.useRef)(),L=new q.Uo("components.appDetail");return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(M.Z,{icon:(0,a.jsx)(h.Z,{}),action:E()(i()().mark(function U(){var T,B,g,H;return i()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,(0,_e.yB)({id:o.container.Name,enableImage:(T=$.current)===null||T===void 0?void 0:T.getFieldValue("enableImage"),volume:Object.keys((B=(g=$.current)===null||g===void 0?void 0:g.getFieldValue("volume"))!==null&&B!==void 0?B:{}).filter(function(he){return he}),enableCommitImage:(H=$.current)===null||H===void 0?void 0:H.getFieldValue("enableCommitImage")});case 2:case"end":return te.stop()}},U)})),confirmOnOpenChange:function(T){var B,g;!((B=$.current)===null||B===void 0)&&B.resetFields&&((g=$.current)===null||g===void 0||g.resetFields())},confirm:(0,a.jsxs)(j.Z,{style:{width:650,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,a.jsx)(r.Z.Text,{children:(0,a.jsx)("ul",{children:L.prefix("backupVolumeTip",4).map(function(U,T){return(0,a.jsxs)("li",{children:[U," ",T==3&&(0,a.jsx)(J.Link,{to:"/app/backup",children:q.Ob.format("container.backup")})]},T)})})}),(0,a.jsxs)(t.A,{layout:"horizontal",formRef:$,submitter:!1,children:[(0,a.jsxs)(ce.UW,{children:[(0,a.jsx)(V.Z,{valuePropName:"checked",name:"enableSelectVolume",children:(0,a.jsx)(w.Z,{disabled:!o.container.Mounts||o.container.Mounts.length==0,children:L.format("backupVolumeEnableSelectVolume")})}),(0,a.jsx)(V.Z,{valuePropName:"checked",name:"enableImage",children:(0,a.jsx)(w.Z,{children:L.format("backupVolumeEnableImage")})}),(0,a.jsx)(le.Z,{name:["enableImage"],children:function(T){var B=T.enableImage;if(B)return(0,a.jsx)(V.Z,{valuePropName:"checked",name:"enableCommitImage",children:(0,a.jsx)(w.Z,{children:L.format("backupVolumeEnableCommitImage")})})}})]}),(0,a.jsx)(le.Z,{name:["enableSelectVolume"],children:function(T){var B=T.enableSelectVolume;return B&&(0,a.jsx)(j.Z,{wrap:!0,children:o.container.Mounts&&o.container.Mounts.map(function(g,H){return(0,a.jsx)(V.Z,{valuePropName:"checked",name:["volume",g.Destination],children:(0,a.jsx)(w.Z,{children:g.Destination})},"volume-".concat(H))})})}})]})]}),children:L.format("backupVolumeButton")})})}var Ie=e(24963),ge=e(99861),Ee=e(3393),pe=e(50888),Me=e(16596),je=e(1699),me=e(5251),fe=e(29453),Pe=e(71965),ve=e(77446),De=e(86615),Ce=e(40056),Oe=e(89240);function Re(o){var $=(0,J.useAccess)(),L=(0,l.useState)(),U=y()(L,2),T=U[0],B=U[1],g=(0,l.useRef)(),H=new q.Uo("components.appDetail.appDetailQuickManage");return(0,l.useEffect)(function(){$.canSeeEnableCe||(0,ve.V)({siteName:(0,Oe.HJ)(o.detail.Name)}).then(function(ie){B(ie.data.list)})},[o.detail]),(0,a.jsx)(je.u,{access:["canSeeEnableCe"],showProTips:!0,children:function(te){var he=te.canSeeEnableCe;return(0,a.jsx)(M.Z,{showDivider:!0,action:function(){var G;return(0,ve.v)({id:(G=g.current)===null||G===void 0?void 0:G.getFieldValue("id"),enableForce:!0})},icon:(0,a.jsx)(Pe.Z,{}),disabled:he,onSuccess:function(){var G;(G=g.current)===null||G===void 0||G.resetFields(),o.onFinish&&o.onFinish()},confirmOnOpenChange:function(){var G;!((G=g.current)===null||G===void 0)&&G.resetFields&&g.current.resetFields()},confirm:(0,a.jsx)(t.A,{formRef:g,submitter:!1,children:(0,a.jsxs)(j.Z,{direction:"vertical",style:{width:500},size:[0,15],children:[(0,a.jsx)(r.Z.Text,{children:H.format("rollbackTip")}),T&&T.length>0?(0,a.jsx)(De.Z.Group,{fieldProps:{style:{display:"flex",flexDirection:"column",gap:8}},name:"id",label:"",options:T&&T.map(function(re){return{label:"id: ".concat(re.id," ").concat(q.FD.format("listDeletedAt"),": ").concat((0,me.NF)(re.deletedAt)),value:re.id}})}):(0,a.jsx)(Ce.Z,{message:H.format("rollbackEmptyTip"),style:{marginBottom:10}})]})}),children:q.FD.format("listManageRollback")})}})}var xe=(0,l.forwardRef)(function(o,$){var L;(0,l.useImperativeHandle)($,function(){return{}});var U=(0,l.useRef)(),T=(0,l.useRef)(),B=(0,l.useRef)(),g=(0,l.useContext)(Ie.Z),H=g.loading,ie=(0,l.useRef)(),te=(0,l.useRef)(),he=(0,l.useState)({status:0,error:""}),re=y()(he,2),G=re[0],se=re[1],b=new q.Uo("components.appDetail.appDetailQuickManage");function Ze(A){return Te.apply(this,arguments)}function Te(){return Te=E()(i()().mark(function A(u){var f,D,v;return i()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(D=-2,!u.ignore){O.next=6;break}if(!(u.ignore.indexOf("".concat(u.info.Name,"@*"))>-1)){O.next=4;break}return O.abrupt("return",{status:-2,error:""});case 4:if(!(u.ignore.indexOf("".concat(u.info.Name,"@").concat(u.info.Image))>-1)){O.next=6;break}return O.abrupt("return",{status:-2,error:""});case 6:return O.next=8,(0,Ee.ZQ)({tag:(f=u.info.Config.Image)!==null&&f!==void 0?f:"",md5:u.info.Image,cacheTime:3600}).catch(function(z){D=-1});case 8:if(v=O.sent,!(v&&v.data.error&&v.data.error!="")){O.next=11;break}return O.abrupt("return",{status:-1,error:v.data.error});case 11:return v&&(v.data.digestLocal&&v.data.digestLocal.length>0?D=v.data.upgrade?1:2:v.data.error&&v.data.error!=""?D=-1:D=-2),O.abrupt("return",{status:D,error:""});case 13:case"end":return O.stop()}},A)})),Te.apply(this,arguments)}return(0,l.useEffect)(function(){o.checkContainerUpgrade&&(se({status:0}),Ze(o.data).then(function(A){se(A)}))},[o.data]),(0,a.jsx)(k.Z,{ghost:o.ghost,title:(0,a.jsx)(R.Z,{}),subTitle:b.format("cardTitle"),children:(0,a.jsxs)(j.Z,{wrap:!0,children:[(0,a.jsx)(M.Z,{icon:(0,a.jsx)(I.Z,{}),action:function(){var u,f;return(0,c.LJ)({md5:(u=(f=o.data)===null||f===void 0?void 0:f.info.Id)!==null&&u!==void 0?u:""})},confirm:b.format("exportConfirm"),onSuccess:function(u){var f,D=new Blob([u],{type:"application/tar"});(0,ue.saveAs)(D,(0,me.fi)((f=o.data)===null||f===void 0?void 0:f.info.Name,"/")+".tar")},children:b.format("exportButton")}),(0,a.jsx)(M.Z,{icon:(0,a.jsx)(h.Z,{}),action:function(){var u,f,D,v,N;return(0,c.Re)({md5:(u=(f=o.data)===null||f===void 0?void 0:f.info.Id)!==null&&u!==void 0?u:"",name:(D=(v=T.current)===null||v===void 0?void 0:v.getFieldValue("saveImageName"))!==null&&D!==void 0?D:(N=o.data)===null||N===void 0?void 0:N.info.Name})},confirmOnOpenChange:function(){var u;return[((u=T.current)===null||u===void 0?void 0:u.resetFields)&&T.current.resetFields()]},confirmTitle:b.format("commitConfirmTitle"),confirm:(0,a.jsx)(j.Z,{style:{width:400,marginTop:"10px",paddingRight:"10px"},direction:"vertical",children:(0,a.jsx)(t.A,{formRef:T,submitter:!1,children:(0,a.jsx)(V.Z,{name:"saveImageName",children:(0,a.jsx)(S.Z,{addonBefore:b.format("commitConfirmSaveImageName")})})})}),children:b.format("commitButton")}),o.data&&(0,a.jsx)(je.u,{access:"canSeeContainerBackup",children:(0,a.jsx)(Y,{container:o.data.info})}),(0,a.jsx)(n.Z,{type:"vertical"}),(0,a.jsx)(J.Link,{to:"/app/create/image?id=".concat((L=o.data)===null||L===void 0?void 0:L.info.Id,"&op=update"),children:(0,a.jsx)(P.ZP,{type:"primary",icon:(0,a.jsx)(x.Z,{}),children:b.format("editButton")})}),(0,a.jsx)(M.Z,{icon:(0,a.jsx)(s.Z,{}),action:E()(i()().mark(function A(){var u,f,D,v,N,O;return i()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,(0,c.aF)({md5:(u=(f=o.data)===null||f===void 0?void 0:f.info.Id)!==null&&u!==void 0?u:"",copyName:(D=(v=B.current)===null||v===void 0?void 0:v.getFieldValue("copyName"))!==null&&D!==void 0?D:"",enableRandomPort:(N=(O=B.current)===null||O===void 0?void 0:O.getFieldValue("enableRandomPort"))!==null&&N!==void 0?N:!1});case 2:return Q.abrupt("return",Q.sent);case 3:case"end":return Q.stop()}},A)})),confirm:(0,a.jsxs)(j.Z,{style:{width:400,paddingRight:"10px"},direction:"vertical",children:[(0,a.jsx)(r.Z.Text,{children:b.format("copyConfirmTip")}),(0,a.jsxs)(t.A,{formRef:B,submitter:!1,layout:"horizontal",children:[(0,a.jsx)("br",{}),(0,a.jsx)(m.Z,{label:b.format("copyCopyName"),name:"copyName"}),(0,a.jsx)(oe.Z,{label:b.format("copyEnableRandomPort"),name:"enableRandomPort"})]})]}),onSuccess:function(u){var f;(f=B.current)===null||f===void 0||f.resetFields()},children:b.format("copyButton")}),(0,a.jsx)(Re,{detail:o.data.info,onFinish:function(){H.destroy(),o.checkContainerUpgrade&&o.checkContainerUpgrade()}}),o.data&&(0,a.jsxs)(a.Fragment,{children:[o.data.info.Config.Image&&(0,a.jsx)(ge.Z,{image:[o.data.info.Config.Image],ref:ie}),(0,a.jsx)(ae.Z,{placement:"bottomLeft",menu:{items:[{key:"1",label:(0,a.jsx)(M.Z,{action:E()(i()().mark(function A(){var u,f,D,v,N,O;return i()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,(0,C.ze)({md5:(u=(f=o.data.info)===null||f===void 0?void 0:f.Name)!==null&&u!==void 0?u:"",imageId:""});case 2:return se({status:0}),Q.next=5,(0,Ee.ZQ)({tag:(D=(v=o.data.info)===null||v===void 0?void 0:v.Config.Image)!==null&&D!==void 0?D:"",md5:(N=(O=o.data.info)===null||O===void 0?void 0:O.Image)!==null&&N!==void 0?N:"",cacheTime:0}).then(function(X){X.data.error&&X.data.error!=""?se({status:-1,error:X.data.error}):X.data.digestLocal&&X.data.digestLocal.length>0?se({status:X.data.upgrade?1:2}):se({status:-2})}).catch(function(X){se({status:-1})});case 5:return Q.abrupt("return",Q.sent);case 6:case"end":return Q.stop()}},A)})),type:"link",children:b.format("upgradeCheckUpgrade")})},{key:"2",label:(0,a.jsx)(M.Z,{action:E()(i()().mark(function A(){var u,f,D,v;return i()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,C.ze)({md5:(u=(f=o.data.info)===null||f===void 0?void 0:f.Name)!==null&&u!==void 0?u:"",imageId:(D=(v=o.data.info)===null||v===void 0?void 0:v.Image)!==null&&D!==void 0?D:""});case 2:return O.abrupt("return",O.sent);case 3:case"end":return O.stop()}},A)})),type:"link",children:b.format("upgradeCheckUpgradeIgnoreOnce")})},{key:"3",label:(0,a.jsx)(M.Z,{action:E()(i()().mark(function A(){var u,f;return i()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,C.ze)({md5:(u=(f=o.data.info)===null||f===void 0?void 0:f.Name)!==null&&u!==void 0?u:"",imageId:"*"});case 2:return v.abrupt("return",v.sent);case 3:case"end":return v.stop()}},A)})),type:"link",children:b.format("upgradeCheckUpgradeIgnore")})}]},children:(0,a.jsx)(ne.Z,{title:G.error,count:b.format("checkImageUpgrade."+G.status),color:b.format("checkImageUpgradeColor."+G.status),children:(0,a.jsx)(M.Z,{disabled:G.status===0,icon:G.status===0?(0,a.jsx)(pe.Z,{}):(0,a.jsx)(Me.Z,{}),action:E()(i()().mark(function A(){var u,f,D,v,N;return i()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,(u=ie.current)===null||u===void 0?void 0:u.start();case 2:return H.show(),(f=ie.current)===null||f===void 0||f.finish(),z.next=6,(0,c.RF)({md5:(D=o.data.info.Id)!==null&&D!==void 0?D:"",imageTag:"",enableBak:(v=(N=te.current)===null||N===void 0?void 0:N.getFieldValue("enableBak"))!==null&&v!==void 0?v:!1});case 6:return z.abrupt("return",z.sent);case 7:case"end":return z.stop()}},A)})),confirm:(0,a.jsxs)(j.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,a.jsx)(r.Z.Text,{children:b.format("upgradeConfirm")}),(0,a.jsxs)(t.A,{formRef:te,submitter:!1,layout:"inline",children:[(0,a.jsx)(V.Z,{name:"enableBak",valuePropName:"checked",children:(0,a.jsx)(w.Z,{children:b.format("upgradeConfirmEnableBak")})}),(0,a.jsx)(V.Z,{name:"enableForcePull",valuePropName:"checked",children:(0,a.jsx)(w.Z,{children:b.format("upgradeConfirmEnableFourcePull")})})]})]}),onSuccess:function(u){H.destroy(),o.checkContainerUpgrade&&o.checkContainerUpgrade()},children:b.format("upgradeButton")})})})]}),(0,a.jsx)(n.Z,{type:"vertical"}),o.data&&(0,a.jsx)(M.Z,{action:E()(i()().mark(function A(){var u,f,D,v,N,O,z;return i()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,(0,C.Ct)({md5:(u=(f=o.data)===null||f===void 0?void 0:f.info.Id)!==null&&u!==void 0?u:"",deleteImage:(D=(v=U.current)===null||v===void 0?void 0:v.getFieldValue("deleteImage"))!==null&&D!==void 0?D:!1,deleteVolume:(N=(O=U.current)===null||O===void 0?void 0:O.getFieldValue("deleteVolume"))!==null&&N!==void 0?N:!1});case 2:return X.abrupt("return",(0,fe.rn)({name:(z=o.data)===null||z===void 0?void 0:z.info.Name}));case 3:case"end":return X.stop()}},A)})),danger:!0,type:"primary",icon:(0,a.jsx)(_.Z,{}),onSuccess:function(){H.destroy(),o.checkContainerUpgrade&&o.checkContainerUpgrade()},confirm:(0,a.jsxs)(j.Z,{style:{width:200},direction:"vertical",children:[(0,a.jsx)(r.Z.Text,{children:q.FD.format("confirm.title")}),(0,a.jsxs)(t.A,{formRef:U,layout:"inline",submitter:!1,children:[(0,a.jsx)(V.Z,{addonAfter:(0,a.jsx)(de.Z,{title:b.format("deleteConfirmTip"),children:(0,a.jsx)(d.Z,{})}),name:"deleteVolume",valuePropName:"checked",children:(0,a.jsx)(w.Z,{children:b.format("deleteConfirmDeleteVolume")})}),(0,a.jsx)(V.Z,{name:"deleteImage",valuePropName:"checked",children:(0,a.jsx)(w.Z,{children:b.format("deleteConfirmDeleteImage")})})]})]}),children:b.format("deleteButton")})]})})}),Z=xe},14189:function(ee,K,e){var F=e(43425),i=e(74842),W=e(87784),E=e(33160),p=e(30159),y=e(89035),l=e(38345),M=e(42075),C=e(96074),c=e(83622),R=e(67294),I=e(94359),h=e(80821),x=e(13822),s=e(99922),_=e(36146),d=e(96486),k=e.n(d),t=e(85893),V=(0,R.forwardRef)(function(m,oe){(0,R.useImperativeHandle)(oe,function(){return{showConsole:S}});var J=new _.Uo("components.appDetail.appDetailQuickOperation"),j=(0,R.useRef)();function S(n){var P;(P=j.current)===null||P===void 0||P.show({url:"/console/container/".concat(m.data.Id),title:m.data.Name,workDir:n})}return(0,t.jsx)(l.Z,{title:(0,t.jsx)(F.Z,{}),ghost:m.ghost,subTitle:(0,t.jsxs)(M.Z,{children:[J.format("cardTitle")," - ",function(n){if(n){var P=n.State.Status,r=n.State.Status;if(n.State.Health&&n.State.Health.Status=="unhealthy"){var ae,ne;P=n.State.Health.Status,r=(ae=(ne=k().last(n.State.Health.Log))===null||ne===void 0?void 0:ne.Output)!==null&&ae!==void 0?ae:P}return(0,t.jsx)(I.Z,{status:"container.".concat(P),tip:r})}}(m.data)]}),children:(0,t.jsxs)(M.Z,{wrap:!0,children:[(0,t.jsx)(h.Z,{icon:(0,t.jsx)(i.Z,{}),action:function(){var P,r;return(0,x.IW)({md5:(P=(r=m.data)===null||r===void 0?void 0:r.Id)!==null&&P!==void 0?P:"",operate:"start"})},onSuccess:function(){return m.onFinish&&m.onFinish()},disabled:m.data&&m.data.State.Running||m.data&&m.data.State.Paused,children:J.format("start")}),(0,t.jsx)(h.Z,{action:function(){var P,r;return(0,x.IW)({md5:(P=(r=m.data)===null||r===void 0?void 0:r.Id)!==null&&P!==void 0?P:"",operate:"stop"})},icon:(0,t.jsx)(W.Z,{}),onSuccess:function(){return m.onFinish&&m.onFinish()},disabled:m.data&&m.data.State.Dead,children:J.format("stop")}),(0,t.jsx)(h.Z,{action:function(){var P,r;return(0,x.IW)({md5:(P=(r=m.data)===null||r===void 0?void 0:r.Id)!==null&&P!==void 0?P:"",operate:"restart"})},onSuccess:function(){return m.onFinish&&m.onFinish()},icon:(0,t.jsx)(E.Z,{}),children:J.format("restart")}),(0,t.jsx)(h.Z,{action:function(){var P,r;return(0,x.IW)({md5:(P=(r=m.data)===null||r===void 0?void 0:r.Id)!==null&&P!==void 0?P:"",operate:"pause"})},onSuccess:function(){return m.onFinish&&m.onFinish()},icon:(0,t.jsx)(p.Z,{}),disabled:m.data&&m.data&&!m.data.State.Running,children:J.format("pause")}),(0,t.jsx)(h.Z,{action:function(){var P,r;return(0,x.IW)({md5:(P=(r=m.data)===null||r===void 0?void 0:r.Id)!==null&&P!==void 0?P:"",operate:"unpause"})},onSuccess:function(){return m.onFinish&&m.onFinish()},icon:(0,t.jsx)(i.Z,{}),disabled:m.data&&!m.data.State.Paused,children:J.format("unpause")}),(0,t.jsx)(C.Z,{type:"vertical"}),m.data&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Z,{showFileExplorer:!0,ref:j}),(0,t.jsx)(c.ZP,{type:"dashed",onClick:function(){m.data&&S(m.data.Config.WorkingDir)},icon:(0,t.jsx)(y.Z,{}),children:"Console"})]}),(0,t.jsx)(C.Z,{type:"vertical"}),m.extra&&m.extra.map(function(n,P){return(0,t.jsx)("span",{children:n},P)})]})})});K.Z=V},52031:function(ee,K,e){e.d(K,{Z:function(){return y}});var F=e(31574),i=e(38345),W=e(26412),E=e(36146),p=e(85893);function y(l){var M,C=new E.Uo("components.appDetail.appDetailVolume");return l.data&&l.data.Mounts&&l.data.Mounts.length>0&&(0,p.jsx)(i.Z,{ghost:l.ghost,title:(0,p.jsx)(F.Z,{}),subTitle:C.format("cardTitle"),children:(0,p.jsx)(W.Z,{column:1,bordered:!0,children:(M=l.data)===null||M===void 0?void 0:M.Mounts.map(function(c,R){return(0,p.jsx)(W.Z.Item,{styles:{label:{width:"50%",wordBreak:"break-word"},content:{width:"50%",wordBreak:"break-word"}},label:c.Type=="volume"?c.Name:c.Source,children:c.Destination},R)})})})}},94359:function(ee,K,e){e.d(K,{Z:function(){return _}});var F=e(5574),i=e.n(F),W=e(3089),E=e(98165),p=e(18429),y=e(8751),l=e(66212),M=e(14313),C=e(30159),c=e(87740),R=e(50888),I=e(66309),h=e(83062),x=e(36146),s=e(85893);function _(d){var k,t,V=new x.Uo("components.containerStatus"),m=d.status.split("."),oe=i()(m,2),J=oe[0],j=oe[1],S="";S=V.format(d.status,(k=d.statusValue)!==null&&k!==void 0?k:{});var n=(0,s.jsx)(s.Fragment,{});return j=="0"&&(n=(0,s.jsx)(I.Z,{icon:(0,s.jsx)(W.Z,{}),color:"default",children:S})),j=="10"&&(n=(0,s.jsx)(I.Z,{icon:(0,s.jsx)(E.Z,{spin:!0}),color:"processing",children:S})),j=="20"&&(n=(0,s.jsx)(I.Z,{icon:(0,s.jsx)(p.Z,{}),color:"error",children:S})),j=="30"&&(n=(0,s.jsx)(I.Z,{icon:(0,s.jsx)(y.Z,{}),color:"success",children:S})),j=="new"&&(n=(0,s.jsx)(I.Z,{icon:(0,s.jsx)(l.Z,{}),children:S})),(j=="running"||j=="healthy"||j=="active"||j=="ready")&&(n=(0,s.jsx)(I.Z,{icon:(0,s.jsx)(M.Z,{}),color:"success",children:S})),(j=="paused"||j=="pause"||j=="rollback_paused")&&(n=(0,s.jsx)(I.Z,{icon:(0,s.jsx)(C.Z,{}),color:"warning",children:S})),(j=="waiting"||j=="starting"||j=="accepted")&&(n=(0,s.jsx)(I.Z,{icon:(0,s.jsx)(c.Z,{}),children:S})),["deploying","pending","allocated","accepted","assigned","preparing","updating","rollback_started"].includes(j)&&(n=(0,s.jsx)(I.Z,{icon:(0,s.jsx)(R.Z,{}),color:"processing",children:S})),(j=="error"||j=="down"||j=="failed")&&(n=(0,s.jsx)(I.Z,{icon:(0,s.jsx)(p.Z,{}),color:"error",children:S})),["complete","completed","rollback_completed"].includes(j)&&(n=(0,s.jsx)(I.Z,{icon:(0,s.jsx)(y.Z,{}),color:"success",children:S})),["exited","dead","removing","restarting","unhealthy","created","drain","unreachable","shutdown","rejected","remove","orphaned"].includes(j)&&(n=(0,s.jsx)(I.Z,{icon:(0,s.jsx)(p.Z,{}),color:"warning",children:S})),(0,s.jsx)(h.Z,{placement:"top",title:(t=d.tip)!==null&&t!==void 0?t:"",children:n})}},76428:function(ee,K,e){e.d(K,{Z:function(){return E}});var F=e(25593),i=e(67294),W=e(85893);function E(p){return(0,W.jsx)(F.Z.Text,{copyable:!0,children:p.title})}},78498:function(ee,K,e){e.d(K,{Z:function(){return y}});var F=e(25035),i=e(42075),W=e(83062),E=e(67294),p=e(85893);function y(l){return(0,p.jsxs)(i.Z,{children:[l.title,(0,p.jsx)(W.Z,{title:l.help,children:(0,p.jsx)(F.Z,{})})]})}},70146:function(ee,K,e){e.d(K,{SR:function(){return I},VE:function(){return c},Zy:function(){return M},iD:function(){return x},yB:function(){return y}});var F=e(15009),i=e.n(F),W=e(99289),E=e.n(W),p=e(82346);function y(_){return l.apply(this,arguments)}function l(){return l=E()(i()().mark(function _(d){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,p.request)("/api/app/container-backup/create",{data:d,method:"POST"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},_)})),l.apply(this,arguments)}function M(_){return C.apply(this,arguments)}function C(){return C=E()(i()().mark(function _(d){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,p.request)("/api/app/container-backup/get-list",{method:"POST",data:d}));case 1:case"end":return t.stop()}},_)})),C.apply(this,arguments)}function c(_){return R.apply(this,arguments)}function R(){return R=E()(i()().mark(function _(d){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,p.request)("/api/app/container-backup/delete",{method:"POST",data:d}));case 1:case"end":return t.stop()}},_)})),R.apply(this,arguments)}function I(_){return h.apply(this,arguments)}function h(){return h=E()(i()().mark(function _(d){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,p.request)("/api/app/container-backup/restore",{method:"POST",data:d}));case 1:case"end":return t.stop()}},_)})),h.apply(this,arguments)}function x(_){return s.apply(this,arguments)}function s(){return s=E()(i()().mark(function _(d){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,p.request)("/api/app/container-backup/get-detail",{method:"POST",data:d}));case 1:case"end":return t.stop()}},_)})),s.apply(this,arguments)}},29453:function(ee,K,e){e.d(K,{A9:function(){return y},R3:function(){return I},e1:function(){return M},rn:function(){return c}});var F=e(15009),i=e.n(F),W=e(99289),E=e.n(W),p=e(82346);function y(x){return l.apply(this,arguments)}function l(){return l=E()(i()().mark(function x(s){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,p.request)("/api/common/tag/create",{method:"POST",data:s});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},x)})),l.apply(this,arguments)}function M(x){return C.apply(this,arguments)}function C(){return C=E()(i()().mark(function x(s){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,p.request)("/api/common/tag/get-list",{method:"POST",data:s});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},x)})),C.apply(this,arguments)}function c(x){return R.apply(this,arguments)}function R(){return R=E()(i()().mark(function x(s){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,p.request)("/api/common/tag/delete",{method:"POST",data:s});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},x)})),R.apply(this,arguments)}function I(x){return h.apply(this,arguments)}function h(){return h=E()(i()().mark(function x(s){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,p.request)("/api/pro/tag/get-url-detail",{method:"POST",data:s});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},x)})),h.apply(this,arguments)}},77446:function(ee,K,e){e.d(K,{V:function(){return y},v:function(){return M}});var F=e(15009),i=e.n(F),W=e(99289),E=e.n(W),p=e(82346);function y(c){return l.apply(this,arguments)}function l(){return l=E()(i()().mark(function c(R){return i()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,p.request)("/api/pro/container-rollback/get-list",{data:R,method:"POST"});case 2:return h.abrupt("return",h.sent);case 3:case"end":return h.stop()}},c)})),l.apply(this,arguments)}function M(c){return C.apply(this,arguments)}function C(){return C=E()(i()().mark(function c(R){return i()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,p.request)("/api/pro/container-rollback/restore",{data:R,method:"POST"});case 2:return h.abrupt("return",h.sent);case 3:case"end":return h.stop()}},c)})),C.apply(this,arguments)}}}]);
