"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4250],{6812:function(ae,A,t){t.r(A),t.d(A,{default:function(){return q}});var $=t(15009),C=t.n($),Z=t(99289),S=t.n(Z),b=t(5574),M=t.n(b),F=t(1699),y=t(22191),O=t(80821),D=t(83727),l=t(36146),z=t(67255),N=t(43425),G=t(90078),c=t(38345),H=t(56729),J=t(95213),L=t(11106),Q=t(82346),R=t(42075),V=t(66309),I=t(96074),X=t(83622),Y=t(25593),k=t(40411),w=t(86250),g=t(53531),E=t(67294),r=t(85893);function q(){var h,p,f=(0,Q.useParams)(),ee=(0,E.useState)(),U=M()(ee,2),a=U[0],j=U[1],d=(0,E.useRef)(),ne=(0,E.useState)(),W=M()(ne,2),o=W[0],te=W[1],x=(0,E.useRef)(),re=(0,E.useState)(0),B=M()(re,2),P=B[0],T=B[1];return(0,E.useEffect)(function(){var s;(0,D.Ih)({id:parseInt((s=f.id)!==null&&s!==void 0?s:"")}).then(function(e){te(e.data.detail)})},[P]),(0,r.jsx)(G._z,{children:(0,r.jsxs)(c.Z,{ghost:!0,direction:"column",gutter:[0,10],children:[(0,r.jsx)(c.Z,{title:(0,r.jsx)(N.Z,{}),subTitle:o==null?void 0:o.title,extra:(0,r.jsxs)(R.Z,{children:[(0,r.jsxs)("span",{children:[l.FD.format("listNextAt"),":"]}),o&&o.setting.nextRunTime&&o.setting.nextRunTime.map(function(s,e){return(0,r.jsx)(V.Z,{children:new Date(s).toLocaleString()},"runNextTime-".concat(e))})]}),children:(0,r.jsxs)(R.Z,{children:[(0,r.jsx)(O.Z,{action:function(){var e;return(0,D.yh)({id:parseInt((e=f.id)!==null&&e!==void 0?e:"")})},onSuccess:function(){var e,n;return!((e=d.current)===null||e===void 0)&&e.reloadAndRest&&((n=d.current)===null||n===void 0||n.reloadAndRest()),!0},onError:function(){var e,n;return!((e=d.current)===null||e===void 0)&&e.reloadAndRest&&((n=d.current)===null||n===void 0||n.reloadAndRest()),!0},type:"primary",children:l.FD.format("listManageStart")},"runOnce"),o&&(0,r.jsx)(O.Z,{action:function(){var e,n,u,v,_,i,K={id:o.id,title:o.title,expression:(e=o.setting.expression)!==null&&e!==void 0?e:[],containerName:(n=o.setting.containerName)!==null&&n!==void 0?n:"",script:(u=o.setting.script)!==null&&u!==void 0?u:"",enableRunBlock:(v=o.setting.enableRunBlock)!==null&&v!==void 0?v:!1,environment:(_=o.setting.environment)!==null&&_!==void 0?_:[],keepLogTotal:(i=o.setting.keepLogTotal)!==null&&i!==void 0?i:10,disable:!o.setting.disable};return(0,D.FS)(K)},onSuccess:function(){return T(P+1),!0},onError:function(){return T(P+1),!0},children:o.setting.disable?l.FD.format("listManageUnpause"):l.FD.format("listManagePause")},"pause"),(0,r.jsx)(I.Z,{type:"vertical"}),(0,r.jsx)(O.Z,{action:function(){var e;return j({}),(0,D.wb)({id:parseInt((e=f.id)!==null&&e!==void 0?e:"")})},onSuccess:function(){var e,n;return!((e=d.current)===null||e===void 0)&&e.reloadAndRest&&((n=d.current)===null||n===void 0||n.reloadAndRest()),!0},onError:function(){var e,n;return!((e=d.current)===null||e===void 0)&&e.reloadAndRest&&((n=d.current)===null||n===void 0||n.reloadAndRest()),!0},type:"primary",confirm:"notification.confirm.title",danger:!0,children:l.FD.format("listManageClear")},"clear"),(0,r.jsx)(I.Z,{type:"vertical"}),(0,r.jsx)(y.Z,{ref:x,onFinish:function(){T(P+1)}},"create"),(0,r.jsx)(F.u,{access:"canSeeContainerCronManage",children:(0,r.jsx)(X.ZP,{onClick:function(){var e;!((e=x.current)===null||e===void 0)&&e.edit&&o&&x.current.edit(o)},children:l.FD.format("listManageEdit")})})]})}),(0,r.jsxs)(c.Z,{split:"vertical",children:[(0,r.jsx)(c.Z,{ghost:!0,colSpan:"30%",children:(0,r.jsx)(H.Z,{actionRef:d,rowKey:"id",pagination:(0,z.Oh)(),columns:[{title:"Id",dataIndex:"id",render:function(e,n,u,v,_){return(0,r.jsxs)(R.Z,{children:[(0,r.jsx)(Y.Z.Link,{onClick:function(){j(n)},children:n.id}),a!=null&&a.id&&a.id==n.id?(0,r.jsx)(k.Z,{status:"processing"}):""]})}},{title:l.FD.format("listCreatedAt"),render:function(e,n,u,v,_){return new Date(n.value.runTime).toLocaleString()}},{title:l.FD.format("listUseTime"),render:function(e,n,u,v,_){return"".concat(n.value.useTime?n.value.useTime.toFixed(2)+"s":"-")}}],search:!1,request:function(){var s=S()(C()().mark(function e(n,u,v){var _,i;return C()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,D.bk)({id:parseInt((_=f.id)!==null&&_!==void 0?_:""),page:n.current,pageSize:n.pageSize});case 2:return i=m.sent,i.data.list&&i.data.list.length>0&&j(i.data.list[0]),m.abrupt("return",{data:i.data.list,success:!0,total:i.data.total});case 5:case"end":return m.stop()}},e)}));return function(e,n,u){return s.apply(this,arguments)}}()})}),(0,r.jsxs)(c.Z,{ghost:!0,colSpan:"70%",split:"horizontal",children:[(0,r.jsx)(c.Z,{children:(0,r.jsxs)(w.Z,{gap:50,align:"center",justify:"space-evenly",children:[(0,r.jsx)(g.Z,{title:"Id",value:(a==null?void 0:a.id)&&(a==null?void 0:a.id)}),(0,r.jsx)(g.Z,{title:l.FD.format("listCreatedAt"),value:(a==null?void 0:a.value)&&new Date((h=a==null?void 0:a.value.runTime)!==null&&h!==void 0?h:"").toLocaleString()}),(0,r.jsx)(g.Z,{title:l.FD.format("listUseTime"),value:(a==null?void 0:a.value)&&"".concat(a!=null&&a.value.useTime?a.value.useTime.toFixed(2)+"s":"-")})]})}),(0,r.jsx)(c.Z,{children:(0,r.jsx)(L.ZP,{theme:"dark",height:"100vh",value:(a==null?void 0:a.value)&&((p=a.value.message)!==null&&p!==void 0?p:a==null?void 0:a.value.error),extensions:[J.RI.shell(),L.tk.lineWrapping]})})]})]})]})})}}}]);
