(self.webpackChunk=self.webpackChunk||[]).push([[8022],{23430:function(I,C,n){"use strict";n.d(C,{Z:function(){return h}});var y=n(87462),i=n(67294),v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},m=v,d=n(84089),O=function(s,u){return i.createElement(d.Z,(0,y.Z)({},s,{ref:u,icon:m}))},j=i.forwardRef(O),h=j},80821:function(I,C,n){"use strict";n.d(C,{Z:function(){return _}});var y=n(5574),i=n.n(y),v=n(24963),m=n(86738),d=n(28036),O=n(83062),j=n(67294),h=n(85893);function _(s){var u=(0,j.useState)(!1),r=i()(u,2),g=r[0],a=r[1],c=(0,j.useContext)(v.Z),w=c.lang,x=c.notice,P=c.message,T=function(){a(!0),s.action().then(function(p){if(a(!1),p){typeof s.onSuccess=="function"&&s.onSuccess(p);var S="";s.messageSuccess?typeof s.messageSuccess=="function"?S=s.messageSuccess(p):S=s.messageSuccess.indexOf("notification.")==0?w(s.messageSuccess):s.messageSuccess:S=w("notification.finish"),s.asynced?P.info(S):P.success(S)}}).catch(function(p){a(!1),typeof s.onError=="function"&&s.onError(p)})};return s.confirm?(0,h.jsx)(m.Z,{style:{width:500},title:s.confirmTitle?s.confirmTitle:w("notification.title.tip"),description:typeof s.confirm=="string"&&s.confirm.indexOf("notification.")==0?w(s.confirm):s.confirm,onConfirm:T,okText:"Yes",cancelText:"No",children:(0,h.jsx)(d.ZP,{disabled:s.disabled,icon:s.icon,loading:g,danger:s.danger,type:s.type,children:s.children})}):(0,h.jsx)(O.Z,{title:s.tips,children:(0,h.jsx)(d.ZP,{style:s.ghost?{padding:0,height:"auto"}:{},disabled:s.disabled,icon:s.icon,loading:g,onClick:T,danger:s.danger,type:s.type,children:s.children})})}},94359:function(I,C,n){"use strict";n.d(C,{Z:function(){return g}});var y=n(67294),i=n(3089),v=n(98165),m=n(18429),d=n(8751),O=n(14313),j=n(30159),h=n(87740),_=n(66309),s=n(83062),u=n(63713),r=n(85893);function g(a){var c=(0,r.jsx)(r.Fragment,{});if(a.status=="0"&&(c=(0,r.jsx)(_.Z,{icon:(0,r.jsx)(i.Z,{}),color:"default",children:"waiting"})),a.status=="10"&&(c=(0,r.jsx)(_.Z,{icon:(0,r.jsx)(v.Z,{spin:!0}),color:"processing",children:"processing"})),a.status=="20"&&(c=(0,r.jsx)(_.Z,{icon:(0,r.jsx)(m.Z,{}),color:"error",children:"error"})),a.status=="30"&&(c=(0,r.jsx)(_.Z,{icon:(0,r.jsx)(d.Z,{}),color:"success",children:"success"})),a.status=="running"||a.status=="healthy"){var w,x;c=(0,r.jsx)(_.Z,{icon:(0,r.jsx)(O.Z,{}),color:"success",children:(w=a.message)!==null&&w!==void 0&&w.showInTag?(x=a.message)===null||x===void 0?void 0:x.content:a.status})}if(a.status=="paused"){var P,T;c=(0,r.jsx)(_.Z,{icon:(0,r.jsx)(j.Z,{}),children:(P=a.message)!==null&&P!==void 0&&P.showInTag?(T=a.message)===null||T===void 0?void 0:T.content:a.status})}if(a.status=="waiting"||a.status=="starting"){var L,p;c=(0,r.jsx)(_.Z,{icon:(0,r.jsx)(h.Z,{}),children:(L=a.message)!==null&&L!==void 0&&L.showInTag?(p=a.message)===null||p===void 0?void 0:p.content:a.status})}if(a.status=="exited"||a.status=="dead"||a.status=="removing"||a.status=="restarting"||a.status=="unhealthy"||a.status=="created"){var S,B;c=(0,r.jsx)(_.Z,{icon:(0,r.jsx)(m.Z,{}),color:"warning",children:(S=a.message)!==null&&S!==void 0&&S.showInTag?(B=a.message)===null||B===void 0?void 0:B.content:a.status})}if(a.link&&(c=(0,r.jsx)(u.Link,{to:a.link,children:c})),a.message){var M;c=(0,r.jsx)(s.Z,{placement:(M=a.message.placement)!==null&&M!==void 0?M:"top",title:a.message.content,children:c})}return(0,r.jsx)(r.Fragment,{children:c})}},24963:function(I,C,n){"use strict";var y=n(67294),i=(0,y.createContext)({});C.Z=i},96781:function(I,C,n){"use strict";var y=n(67294),i=(0,y.createContext)({});C.Z=i},83536:function(I,C,n){"use strict";n.r(C),n.d(C,{default:function(){return F}});var y=n(15009),i=n.n(y),v=n(99289),m=n.n(v),d=n(80821),O=n(90098),j=n(43425),h=n(86548),_=n(23430),s=n(90078),u=n(10641),r=n(63713),g=n(28036),a=n(25593),c=n(42075),w=n(96074),x=n(83062),P=n(67294),T=n(96781),L=n(94359),p=n(67255),S=n(93162),B=n(24963),M=n(66309),l=n(85893);function H(D){var b=(0,r.useIntl)(),K=(0,P.useContext)(B.Z),A=K.lang,Z;if(!D.type)Z=(0,l.jsx)(M.Z,{children:A("compose.type.default")});else switch(D.type){case"remoteUrl":Z=(0,l.jsx)(M.Z,{color:"cyan",children:A("compose.type.".concat(D.type))});break;case"serverPath":Z=(0,l.jsx)(M.Z,{color:"blue",children:A("compose.type.".concat(D.type))});break;case"storagePath":Z=(0,l.jsx)(M.Z,{color:"geekblue",children:A("compose.type.".concat(D.type))});break;case"outPath":Z=(0,l.jsx)(M.Z,{color:"yellow",children:A("compose.type.".concat(D.type))});break;case"store":Z=(0,l.jsx)(M.Z,{color:"green",children:A("compose.type.".concat(D.type))});break;case"dangling":Z=(0,l.jsx)(M.Z,{color:"error",children:A("compose.type.".concat(D.type))});break;default:Z=(0,l.jsx)(M.Z,{children:A("compose.type.".concat(D.type))})}return(0,l.jsx)(x.Z,{title:D.tootip,children:Z})}function F(){var D=(0,P.useContext)(T.Z),b=D.listTableRef,K=(0,P.useContext)(B.Z),A=K.lang,Z=K.notice;return(0,l.jsx)(s._z,{header:{extra:[(0,l.jsx)(r.Link,{to:"/compose/create",reloadDocument:location.search.length>0,children:(0,l.jsx)(g.ZP,{type:"primary",children:"\u521B\u5EFA\u4EFB\u52A1"},"createCompose")},"create")]},children:(0,l.jsx)(u.Z,{scroll:{x:"max-content"},request:function(){var R=m()(i()().mark(function o(t){var f;return i()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,O.pm)({title:t.title,name:t.name});case 2:return f=E.sent,E.abrupt("return",{data:f.data.list,success:!0,total:f.data.list.length});case 4:case"end":return E.stop()}},o)}));return function(o){return R.apply(this,arguments)}}(),rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name",width:200,render:function(o,t,f,e,E){return t.setting.type=="dangling"?(0,l.jsx)(a.Z.Link,{onClick:function(){Z.info("\u65E0\u6CD5\u627E\u5230\u8BE5\u4EFB\u52A1\u7684 compose.yaml \u6587\u4EF6\uFF0C\u8BF7\u6302\u8F7D\u76F8\u5E94\u7684 compose \u6587\u4EF6\u6216\u662F\u5728\u9762\u677F\u7684 compose \u76EE\u5F55\u6DFB\u52A0\u540C\u6807\u8BC6\u7684\u4EFB\u52A1\u76EE\u5F55\u53CA compose.yaml \u6587\u4EF6")},children:t.name}):(0,l.jsx)(r.Link,{to:"/compose/deploy/"+(t.id||t.name),children:t.name},f)},sorter:function(o,t){return o.name.localeCompare(t.name)},sortDirections:["descend","ascend"]},{title:"\u9879\u76EE\u540D\u79F0",dataIndex:"title",width:200},{title:"\u7C7B\u578B",width:150,search:!1,render:function(o,t,f,e,E){var U;return(0,l.jsx)(H,{tootip:(U=t.setting.uri)!==null&&U!==void 0?U:"",type:t.setting&&t.setting.type?t.setting.type:""})}},{title:"\u5BB9\u5668\u72B6\u6001",dataIndex:"status",search:!1,width:300,render:function(o,t,f,e,E){return(0,l.jsx)(c.Z,{children:t.setting.status.split(", ").map(function(U,z){var W="running",G=U.indexOf("(");return G>-1?W=U.slice(0,G):W=U,(0,l.jsx)(L.Z,{status:W,message:{content:A("compose.status.".concat(W),{count:U.slice(G+1,U.length-1)}),placement:"top",showInTag:!0}},z)})})}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"",search:!1,width:150,render:function(o,t,f,e,E){return t.setting.createdAt?new Date(t.setting.createdAt).toLocaleString():"-"}},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"",search:!1,width:150,render:function(o,t,f,e,E){return t.setting.updatedAt?new Date(t.setting.updatedAt).toLocaleString():"-"}},{title:"\u64CD\u4F5C",width:80,valueType:"option",key:"option",render:function(o,t,f,e,E){return t.setting.type!="dangling"&&(0,l.jsxs)(c.Z,{split:(0,l.jsx)(w.Z,{type:"vertical"}),children:[(0,l.jsx)(r.Link,{to:"/compose/deploy/"+(t.id||t.name),children:(0,l.jsx)(x.Z,{title:"\u90E8\u7F72",children:(0,l.jsx)(j.Z,{})})},"3"),(0,l.jsx)(r.Link,{to:"/compose/create?id="+(t.id||t.name),children:(0,l.jsx)(x.Z,{title:"\u7F16\u8F91",children:(0,l.jsx)(h.Z,{})})},"4"),(0,l.jsx)(a.Z.Link,{onClick:m()(i()().mark(function U(){var z,W;return i()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,O.tw)({id:t.id||t.name});case 2:z=k.sent,W=new Blob([z],{type:"application/zip"}),(0,S.saveAs)(W,"compose-"+t.name+".zip");case 5:case"end":return k.stop()}},U)})),children:(0,l.jsx)(x.Z,{title:"\u4E0B\u8F7D",children:(0,l.jsx)(_.Z,{})})},"2")]})}}],rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0,getCheckboxProps:function(o){return{disabled:o.setting.type=="dangling"||o.setting.type=="outPath"}}},tableAlertOptionRender:function(o){var t=o.selectedRows;return(0,l.jsx)(c.Z,{size:16,children:(0,l.jsx)(d.Z,{danger:!0,type:"primary",action:function(){return(0,O.ik)({id:t.map(function(e){return e.id})})},onSuccess:function(){var e,E;return!((e=b.current)===null||e===void 0)&&e.reloadAndRest&&((E=b.current)===null||E===void 0||E.reloadAndRest()),!0},onError:function(){var e,E;return!((e=b.current)===null||e===void 0)&&e.reset&&((E=b.current)===null||E===void 0||E.reset()),!0},confirm:"notification.confirm.title",children:"\u6279\u91CF\u5220\u9664"})})},pagination:(0,p.O)(),search:{collapsed:!1},actionRef:b,columnsState:(0,p.j)("compose-list")})})}},90098:function(I,C,n){"use strict";n.d(C,{CT:function(){return r},GG:function(){return L},MG:function(){return H},Oh:function(){return w},Pn:function(){return s},U_:function(){return M},VN:function(){return S},iE:function(){return K},ik:function(){return a},im:function(){return O},mg:function(){return P},pm:function(){return h},tw:function(){return Z},xC:function(){return D}});var y=n(15009),i=n.n(y),v=n(99289),m=n.n(v),d=n(63713);function O(o){return j.apply(this,arguments)}function j(){return j=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/app/compose/create",{method:"POST",data:t}));case 1:case"end":return e.stop()}},o)})),j.apply(this,arguments)}function h(o){return _.apply(this,arguments)}function _(){return _=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/app/compose/get-list",{method:"POST",data:t}));case 1:case"end":return e.stop()}},o)})),_.apply(this,arguments)}function s(o){return u.apply(this,arguments)}function u(){return u=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.id=String(t.id),e.abrupt("return",(0,d.request)("/api/app/compose/get-task",{method:"POST",data:t}));case 2:case"end":return e.stop()}},o)})),u.apply(this,arguments)}function r(o){return g.apply(this,arguments)}function g(){return g=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.id=String(t.id),e.abrupt("return",(0,d.request)("/api/app/compose/get-detail",{method:"POST",data:t}));case 2:case"end":return e.stop()}},o)})),g.apply(this,arguments)}function a(o){return c.apply(this,arguments)}function c(){return c=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/app/compose/delete",{method:"POST",data:t}));case 1:case"end":return e.stop()}},o)})),c.apply(this,arguments)}function w(o){return x.apply(this,arguments)}function x(){return x=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.id=String(t.id),e.abrupt("return",(0,d.request)("/api/app/compose/container-deploy",{method:"POST",data:t}));case 2:case"end":return e.stop()}},o)})),x.apply(this,arguments)}function P(o){return T.apply(this,arguments)}function T(){return T=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.id=String(t.id),e.abrupt("return",(0,d.request)("/api/app/compose/container-destroy",{method:"POST",data:t}));case 2:case"end":return e.stop()}},o)})),T.apply(this,arguments)}function L(o){return p.apply(this,arguments)}function p(){return p=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.id=String(t.id),e.abrupt("return",(0,d.request)("/api/app/compose/container-ctrl",{method:"POST",data:t}));case 2:case"end":return e.stop()}},o)})),p.apply(this,arguments)}function S(o){return B.apply(this,arguments)}function B(){return B=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.id=String(t.id),e.abrupt("return",(0,d.request)("/api/app/compose/container-log",{method:"POST",data:t}));case 2:case"end":return e.stop()}},o)})),B.apply(this,arguments)}function M(o){return l.apply(this,arguments)}function l(){return l=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/app/compose/container-process-kill",{method:"POST",data:t}));case 1:case"end":return e.stop()}},o)})),l.apply(this,arguments)}function H(o){return F.apply(this,arguments)}function F(){return F=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/app/compose/get-from-uri",{method:"POST",data:t}));case 1:case"end":return e.stop()}},o)})),F.apply(this,arguments)}function D(o){return b.apply(this,arguments)}function b(){return b=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/app/compose/parse",{method:"POST",data:t}));case 1:case"end":return e.stop()}},o)})),b.apply(this,arguments)}function K(o){return A.apply(this,arguments)}function A(){return A=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/common/store/deploy",{method:"POST",data:t}));case 1:case"end":return e.stop()}},o)})),A.apply(this,arguments)}function Z(o){return R.apply(this,arguments)}function R(){return R=m()(i()().mark(function o(t){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.id=String(t.id),e.abrupt("return",(0,d.request)("/api/app/compose/download",{method:"POST",data:t,responseType:"blob"}));case 2:case"end":return e.stop()}},o)})),R.apply(this,arguments)}},67255:function(I,C,n){"use strict";n.d(C,{O:function(){return y},j:function(){return i}});function y(){var v=localStorage.getItem("dpanel-pagesize");return v=="all"?!1:{showSizeChanger:!0,defaultPageSize:parseInt(v!=null?v:"20")}}function i(v){var m="dpanel-table-column-".concat(v),d={};if(localStorage.getItem(m)){var O;d=JSON.parse((O=localStorage.getItem(m))!==null&&O!==void 0?O:"{}")}return{defaultValue:d,onChange:function(h){localStorage.setItem("dpanel-table-column-".concat(v),JSON.stringify(h))}}}},93162:function(I,C,n){var y,i,v;(function(m,d){i=[],y=d,v=typeof y=="function"?y.apply(C,i):y,v!==void 0&&(I.exports=v)})(this,function(){"use strict";function m(u,r){return typeof r=="undefined"?r={autoBom:!1}:typeof r!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function d(u,r,g){var a=new XMLHttpRequest;a.open("GET",u),a.responseType="blob",a.onload=function(){s(a.response,r,g)},a.onerror=function(){console.error("could not download file")},a.send()}function O(u){var r=new XMLHttpRequest;r.open("HEAD",u,!1);try{r.send()}catch(g){}return 200<=r.status&&299>=r.status}function j(u){try{u.dispatchEvent(new MouseEvent("click"))}catch(g){var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(r)}}var h=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof n.g=="object"&&n.g.global===n.g?n.g:void 0,_=h.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=h.saveAs||(typeof window!="object"||window!==h?function(){}:"download"in HTMLAnchorElement.prototype&&!_?function(u,r,g){var a=h.URL||h.webkitURL,c=document.createElement("a");r=r||u.name||"download",c.download=r,c.rel="noopener",typeof u=="string"?(c.href=u,c.origin===location.origin?j(c):O(c.href)?d(u,r,g):j(c,c.target="_blank")):(c.href=a.createObjectURL(u),setTimeout(function(){a.revokeObjectURL(c.href)},4e4),setTimeout(function(){j(c)},0))}:"msSaveOrOpenBlob"in navigator?function(u,r,g){if(r=r||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(m(u,g),r);else if(O(u))d(u,r,g);else{var a=document.createElement("a");a.href=u,a.target="_blank",setTimeout(function(){j(a)})}}:function(u,r,g,a){if(a=a||open("","_blank"),a&&(a.document.title=a.document.body.innerText="downloading..."),typeof u=="string")return d(u,r,g);var c=u.type==="application/octet-stream",w=/constructor/i.test(h.HTMLElement)||h.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||c&&w||_)&&typeof FileReader!="undefined"){var P=new FileReader;P.onloadend=function(){var p=P.result;p=x?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=p:location=p,a=null},P.readAsDataURL(u)}else{var T=h.URL||h.webkitURL,L=T.createObjectURL(u);a?a.location=L:location.href=L,a=null,setTimeout(function(){T.revokeObjectURL(L)},4e4)}});h.saveAs=s.saveAs=s,I.exports=s})}}]);
