"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5139],{78914:function(ie,M,t){t.d(M,{Z:function(){return De}});var V=t(5574),x=t.n(V),y=t(15009),i=t.n(y),b=t(99289),v=t.n(b),H=t(80271),U=t(65913),E=t(3393),oe=t(95591),le=t(40666),se=t(1912),ue=t(77171),de=t(48689),J=t(45742),$=t(38345),ce=t(91708),fe=t(82346),ve=t(85265),Q=t(42075),ge=t(96074),Y=t(28036),X=t(66309),W=t(25593),l=t(26412),me=t(60940),s=t(67294),k=t(80821),ne=t(5251),he=t(18148),te=t(184),xe=t(97269),ae=t(62370),je=t(65233),re=t(2487),Ze=t(4393),q=t(3616),K=t(36146),n=t(85893),Se=(0,s.forwardRef)(function(I,D){(0,s.useImperativeHandle)(D,function(){return{show:function(c){return v()(i()().mark(function A(){var w,p;return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return F(!0),(w=g.current)===null||w===void 0||w.show(),a.prev=2,a.next=5,(0,E.cd)({imageName:c}).finally(function(){var o;(o=g.current)===null||o===void 0||o.destroy()});case 5:p=a.sent,T(p.data.list),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),F(!1);case 12:case"end":return a.stop()}},A,null,[[2,9]])}))()}}});var R=(0,s.useState)(),j=x()(R,2),m=j[0],T=j[1],e=(0,s.useState)(""),P=x()(e,2),Z=P[0],S=P[1],O=(0,s.useState)(!1),C=x()(O,2),z=C[0],F=C[1],g=(0,s.useRef)(),L=new K.Uo("image");return(0,n.jsx)(te.a,{open:z,onOpenChange:function(c){F(c),!c&&T(void 0)},title:L.format("remoteTagTitle"),isKeyPressSubmit:!0,submitter:!1,drawerProps:{width:q.R_,extra:(0,n.jsx)(xe.A,{isKeyPressSubmit:!0,onFinish:function(c){S(c.search)},submitter:!1,children:(0,n.jsx)(Q.Z.Compact,{children:(0,n.jsx)(ae.Z,{style:{margin:0},name:"search",children:(0,n.jsx)(je.Z,{allowClear:!0,addonBefore:L.format("remoteSearch"),placeholder:L.format("remoteSearchEmpty"),onClear:function(){S("")}})})})})},children:(0,n.jsx)(U.Z,{ref:g,children:(0,n.jsx)(re.Z,{rowKey:function(c){return"".concat(c)},pagination:{pageSize:50},grid:{gutter:10,column:2},dataSource:m&&m.filter(function(h){return!Z||h.toLocaleLowerCase().indexOf(Z.toLocaleLowerCase())!==-1}),loading:!m||(m==null?void 0:m.length)<=0,renderItem:function(c,A){return(0,n.jsx)(re.Z.Item,{children:(0,n.jsx)(Ze.Z,{style:{height:"80px"},children:(0,n.jsx)(W.Z.Text,{copyable:!0,children:c})})},A)}})})},"form")}),Ce=Se,pe=t(64789),ye=t(5966),Te=t(83062),Ie=t(2205);function Re(I){var D=(0,s.useRef)(),R=(0,s.useState)(!1),j=x()(R,2),m=j[0],T=j[1],e=new K.Uo("image");return(0,n.jsxs)(te.a,{drawerProps:{width:q.R_},open:m,title:e.format("tagTitle"),onOpenChange:function(Z){T(Z)},formRef:D,onFinish:function(){var P=v()(i()().mark(function Z(S){var O,C,z;return i()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,E._U)({md5:(O=I.imageInfo.info.Id)!==null&&O!==void 0?O:"",tag:(S.imageRespo?S.imageRespo.serverAddress+"/":"")+S.imageTag});case 2:z=g.sent,T(!1),(C=D.current)===null||C===void 0||C.resetFields(),I.onFinish&&I.onFinish();case 6:case"end":return g.stop()}},Z)}));return function(Z){return P.apply(this,arguments)}}(),trigger:(0,n.jsx)(Te.Z,{title:e.format("tagTitle"),children:(0,n.jsx)(Y.ZP,{type:"link",icon:(0,n.jsx)(pe.Z,{})})}),children:[(0,n.jsx)(ae.Z,{label:e.format("tagRegistry"),name:"imageRespo",tooltip:e.format("tagRegistryTip"),children:(0,n.jsx)(Ie.Z,{})}),(0,n.jsx)(ye.Z,{fieldProps:{min:2,max:255},rules:[{required:!0}],required:!0,placeholder:e.format("tagImageTagEmpty"),label:e.format("tagImageTag"),name:"imageTag",tooltip:e.format("tagImageTagTip")})]})}var Pe=t(24963),_=t(1699),Oe=t(78451),Ee=(0,s.forwardRef)(function(I,D){var R;(0,s.useImperativeHandle)(D,function(){return{show:function(o){return v()(i()().mark(function r(){return i()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return C(!0),u.next=3,B(o);case 3:case"end":return u.stop()}},r)}))()}}});var j=(0,s.useRef)(),m=(0,s.useState)(),T=x()(m,2),e=T[0],P=T[1],Z=(0,s.useState)(!1),S=x()(Z,2),O=S[0],C=S[1],z=(0,s.useContext)(Pe.Z),F=z.message,g=(0,s.useState)(0),L=x()(g,2),h=L[0],c=L[1],A=(0,fe.useAccess)(),w=(0,s.useRef)(),p=new K.Uo("components.image"),B=function(){var a=v()(i()().mark(function o(r){var f,u;return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return(f=j.current)===null||f===void 0||f.show(),d.next=3,(0,E.YU)({md5:r,showLayer:!0}).finally(function(){var G;(G=j.current)===null||G===void 0||G.destroy()});case 3:u=d.sent,P(u.data);case 5:case"end":return d.stop()}},o)}));return function(r){return a.apply(this,arguments)}}();return(0,s.useEffect)(function(){e&&B(e==null?void 0:e.info.Id)},[h]),(0,n.jsx)(ve.Z,{title:p.format("quickTitle"),open:O,onClose:function(){C(!1),I.onClose&&I.onClose()},width:q.R_,extra:(0,n.jsxs)(Q.Z,{split:(0,n.jsx)(ge.Z,{type:"vertical"}),children:[(e==null?void 0:e.info)&&(0,n.jsx)(_.u,{access:"canSeeEnableCe",showProTips:!0,children:function(o){var r=o.canSeeEnableCe;return(0,n.jsx)(H.Z,{trigger:(0,n.jsx)(Y.ZP,{type:"link",disabled:r,icon:(0,n.jsx)(oe.Z,{})}),imageId:e.info.Id})}}),(e==null?void 0:e.info)&&(0,n.jsx)(Re,{imageInfo:e,onFinish:function(){B(e.info.Id)}})]}),children:(0,n.jsxs)(U.Z,{ref:j,children:[!A.canSeeEnableCe&&(0,n.jsx)(Ce,{ref:w}),(0,n.jsxs)($.Z,{direction:"column",ghost:!0,gutter:[0,10],children:[(0,n.jsx)($.Z,{title:(0,n.jsx)(le.Z,{}),subTitle:p.format("quickTagTitle"),ghost:!0,children:(0,n.jsx)(ce.Rs,{grid:{gutter:40,column:2},headerTitle:!1,metas:{content:{render:function(o,r,f){return(0,n.jsx)(X.Z,{color:"blue",children:(0,n.jsx)(W.Z.Text,{copyable:!0,children:r})},f)}},title:{render:function(o,r,f){return(0,n.jsxs)(Q.Z,{children:[(0,n.jsxs)(k.Z,{action:function(){return(0,E.Gb)({tag:r,type:"push"})},children:[(0,n.jsx)(se.Z,{})," Push"]}),(0,n.jsxs)(k.Z,{action:function(){return(0,E.Gb)({tag:r,type:"pull"})},children:[(0,n.jsx)(ue.Z,{})," Pull"]}),(0,n.jsx)(_.u,{access:"canSeeEnableCe",showProTips:!0,showProTipsOffset:[-15,9],children:function(N){var d=N.canSeeEnableCe;return(0,n.jsx)(Y.ZP,{disabled:d,onClick:function(){var ee;(ee=w.current)===null||ee===void 0||ee.show(r)},children:p.format("quickRemoteTagButton")})}}),(0,n.jsx)(_.u,{access:"canSeeImageListManage",children:(0,n.jsx)(k.Z,{action:function(){return(0,E.Pn)({tag:r})},danger:!0,onSuccess:function(N){return c(h+1),!0},confirm:"notification.confirm.title",children:(0,n.jsx)(de.Z,{})})})]},f)}}},dataSource:e==null?void 0:e.info.RepoTags})}),e&&(0,n.jsx)($.Z,{title:(0,n.jsx)(J.Z,{}),subTitle:p.format("quickDetail"),ghost:!0,children:(0,n.jsxs)(l.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,n.jsx)(l.Z.Item,{label:"ID",children:(0,n.jsx)(W.Z.Text,{editable:{tooltip:p.format("quickDetailManageEditNameTip"),onChange:function(){var a=v()(i()().mark(function r(f){var u;return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,he.Fj)({tag:e==null?void 0:e.info.RepoTags[0],title:f});case 2:u=d.sent,B(e.info.Id),F.success(K.FD.format("finish"));case 5:case"end":return d.stop()}},r)}));function o(r){return a.apply(this,arguments)}return o}()},children:e==null?void 0:e.info.Id})}),(0,n.jsx)(l.Z.Item,{label:"Parent",children:e==null?void 0:e.info.Parent}),(0,n.jsx)(l.Z.Item,{label:"Size",children:(0,ne.FI)((R=e==null?void 0:e.info.Size)!==null&&R!==void 0?R:0)}),(0,n.jsx)(l.Z.Item,{label:"Created",children:e==null?void 0:e.info.Created}),(0,n.jsxs)(l.Z.Item,{label:"Build",children:["Docker ",e==null?void 0:e.info.DockerVersion," ",e==null?void 0:e.info.Os," ",e==null?void 0:e.info.Architecture]}),(0,n.jsx)(l.Z.Item,{label:"Labels",children:(0,n.jsx)(l.Z,{column:1,bordered:!0,children:(e==null?void 0:e.info.Config.Labels)&&Object.keys(e==null?void 0:e.info.Config.Labels).map(function(a){return(0,n.jsx)(l.Z.Item,{label:a,children:e==null?void 0:e.info.Config.Labels[a]},a)})})})]})}),(0,n.jsx)($.Z,{title:(0,n.jsx)(J.Z,{}),subTitle:p.format("quickDockerfileTitle"),ghost:!0,children:(0,n.jsxs)(l.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,n.jsx)(l.Z.Item,{label:"CMD",children:e==null?void 0:e.info.Config.Cmd}),(0,n.jsx)(l.Z.Item,{label:"ENTRYPOINT",children:e==null?void 0:e.info.Config.Entrypoint}),(0,n.jsx)(l.Z.Item,{label:"EXPOSE",children:(e==null?void 0:e.info.Config.ExposedPorts)&&Object.keys(e==null?void 0:e.info.Config.ExposedPorts).map(function(a){return(0,n.jsx)(X.Z,{color:"gray",children:a},a)})}),(0,n.jsx)(l.Z.Item,{label:"VOLUME",children:(e==null?void 0:e.info.Config.Volumes)&&Object.keys(e==null?void 0:e.info.Config.Volumes).map(function(a){return(0,n.jsx)(X.Z,{color:"gray",children:a},a)})}),(0,n.jsx)(l.Z.Item,{label:"Env",children:(0,n.jsx)(l.Z,{column:1,bordered:!0,children:(e==null?void 0:e.info.Config.Env)&&(e==null?void 0:e.info.Config.Env.map(function(a,o){var r=a.split("=");return(0,n.jsx)(l.Z.Item,{label:r[0],children:r[1]},o)}))})})]})}),(e==null?void 0:e.layer)&&(0,n.jsx)($.Z,{title:(0,n.jsx)(J.Z,{}),subTitle:"Layers",ghost:!0,children:(0,n.jsx)(me.Z,{rowKey:"CreatedBy",dataSource:e.layer.reverse(),columns:[{title:"Size",key:"size",render:function(o,r,f){return(0,ne.FI)(r.Size)}},{title:"Layer",dataIndex:"CreatedBy",key:"CreatedBy",render:function(o,r,f){return(0,n.jsx)(Oe.Z,{content:r.CreatedBy})}}]})})]})]})})}),De=Ee},67255:function(ie,M,t){t.d(M,{O:function(){return V},j:function(){return x}});function V(y){var i=localStorage.getItem("dpanel-pagesize");return i=="all"?!1:{defaultCurrent:y==null?void 0:y.page,showSizeChanger:!0,defaultPageSize:parseInt(i!=null?i:"20"),onChange:function(v,H){localStorage.setItem("dpanel-page-"+location.pathname.split("/").slice(-2).join("-"),"".concat(v))}}}function x(y){var i="dpanel-table-column-".concat(y),b={};if(localStorage.getItem(i)){var v;b=JSON.parse((v=localStorage.getItem(i))!==null&&v!==void 0?v:"{}")}return{defaultValue:b,onChange:function(U){localStorage.setItem("dpanel-table-column-".concat(y),JSON.stringify(U))}}}}}]);
