"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[236],{52688:function(Q,b,n){var I=n(1413),m=n(45987),v=n(67294),p=n(35510),x=n(85893),j=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],B=v.forwardRef(function(f,Z){var M=f.fieldProps,d=f.unCheckedChildren,y=f.checkedChildren,P=f.proFieldProps,g=(0,m.Z)(f,j);return(0,x.jsx)(p.Z,(0,I.Z)({valueType:"switch",fieldProps:(0,I.Z)({unCheckedChildren:d,checkedChildren:y},M),ref:Z,valuePropName:"checked",proFieldProps:P,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},g))});b.Z=B},51672:function(Q,b,n){n.r(b),n.d(b,{default:function(){return se}});var I=n(15009),m=n.n(I),v=n(99289),p=n.n(v),x=n(80821),j=n(5574),B=n.n(j),f=n(24963),Z=n(14946),M=n(184),d=n(5966),y=n(62370),P=n(97462),g=n(52688),R=n(24739),$=n(17186),k=n(28036),E=n(34041),q=n(71230),S=n(15746),F=n(67294),e=n(85893),_=(0,F.forwardRef)(function(s,w){var h=(0,F.useState)(!1),l=B()(h,2),r=l[0],o=l[1],t=(0,F.useRef)(),a=(0,F.useContext)(f.Z),N=a.message;return(0,F.useImperativeHandle)(w,function(){return{}}),(0,e.jsxs)(M.a,{name:"create",title:"\u521B\u5EFA\u7F51\u7EDC",open:r,onOpenChange:function(c){o(c)},formRef:t,trigger:(0,e.jsx)(k.ZP,{type:"primary",children:"\u521B\u5EFA\u7F51\u7EDC"}),onFinish:function(){var i=p()(m()().mark(function c(u){var C,T,G,W,U,K,L,z,J,H,X,V,O,Y;return m()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return V={name:u.name,driver:(C=u.driver)!==null&&C!==void 0?C:"bridge",ipSubnet:(T=u.ipSubnet)!==null&&T!==void 0?T:"",ipGateway:(G=u.ipGateway)!==null&&G!==void 0?G:"",ipRange:(W=u.ipRange)!==null&&W!==void 0?W:"",ipAux:u.ipAux,enableIpV6:(U=u.enableIpV6)!==null&&U!==void 0?U:!1,ipV6Subnet:(K=u.ipV6Subnet)!==null&&K!==void 0?K:"",ipV6Gateway:(L=u.ipV6Gateway)!==null&&L!==void 0?L:"",ipV6Range:(z=u.ipV6Range)!==null&&z!==void 0?z:"",ipV6Aux:(J=u.ipV6Aux)!==null&&J!==void 0?J:[],driverOption:u.driverOption,internal:(H=u.internal)!==null&&H!==void 0?H:!1,attachable:(X=u.attachable)!==null&&X!==void 0?X:!1},(u.driver=="macvlan"||u.driver=="ipvlan")&&(V.driverOption||(V.driverOption=[]),V.driverOption.push({name:"parent",value:u.macvlanParentCard})),A.next=4,(0,Z.XY)(V);case 4:if(O=A.sent,!(O&&O.data&&O.data.id!="")){A.next=10;break}return N.success("\u521B\u5EFA\u7F51\u7EDC\u6210\u529F"),s.onFinish&&s.onFinish(),(Y=t.current)===null||Y===void 0||Y.resetFields(),A.abrupt("return",!0);case 10:case"end":return A.stop()}},c)}));return function(c){return i.apply(this,arguments)}}(),children:[(0,e.jsx)(d.Z,{label:"\u540D\u79F0",tooltip:"\u4E0D\u914D\u7F6E\u5B50\u7F51\u65F6\uFF0C\u4F1A\u81EA\u52A8\u751F\u6210",name:"name",required:!0,rules:[{required:!0}],placeholder:"\u6307\u5B9A\u552F\u4E00\u7684\u7F51\u7EDC\u540D\u79F0"}),(0,e.jsx)(y.Z,{label:"\u7C7B\u578B",name:"driver",children:(0,e.jsxs)(E.Z,{defaultValue:"bridge",children:[(0,e.jsx)(E.Z.Option,{value:"bridge",children:"bridge"}),(0,e.jsx)(E.Z.Option,{value:"macvlan",children:"macvlan"}),(0,e.jsx)(E.Z.Option,{value:"ipvlan",children:"ipvlan"}),(0,e.jsx)(E.Z.Option,{value:"overlay",children:"overlay"})]})}),(0,e.jsx)(P.Z,{name:["driver"],children:function(c){var u=c.driver;if(u=="macvlan"||u=="ipvlan")return(0,e.jsx)(d.Z,{required:!0,rules:[{required:!0}],label:"\u7236\u7F51\u5361",name:"macvlanParentCard",tooltip:"\u6307\u5B9A\u8981\u6865\u63A5\u7684\u5BBF\u4E3B\u673A\u7F51\u5361\u540D\u79F0"})}}),(0,e.jsxs)(q.Z,{children:[(0,e.jsx)(S.Z,{span:8,children:(0,e.jsx)(g.Z,{label:"\u81EA\u5B9AIPV4\u5B50\u7F51",name:"userIpV4Subnet"})}),(0,e.jsx)(S.Z,{span:8,children:(0,e.jsx)(g.Z,{name:"internal",label:"\u9694\u79BB\u5916\u90E8\u8BBF\u95EE",initialValue:!1})}),(0,e.jsx)(S.Z,{span:8,children:(0,e.jsx)(g.Z,{name:"attachable",label:"\u5141\u8BB8\u624B\u52A8\u9644\u52A0\u5BB9\u5668",initialValue:!1})})]}),(0,e.jsx)(P.Z,{name:["userIpV4Subnet"],children:function(c){var u=c.userIpV4Subnet;if(u)return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(R.UW,{title:"IPV4\u914D\u7F6E",children:[(0,e.jsx)(d.Z,{label:"\u5B50\u7F51",name:"ipSubnet",width:"md",tooltip:"\u683C\u5F0F\u4E3A: \u5B50\u7F51\u8D77\u59CB\u5730\u5740/\u63A9\u7801\u3002\u5E38\u89C1\u7684\u683C\u5F0F\u6709 10.0.0.0/8, 172.20.0.0/16, 192.168.1.0/24",placeholder:"192.168.0.0/16"}),(0,e.jsx)(d.Z,{label:"\u7F51\u5173",name:"ipGateway",width:"md",placeholder:"192.168.0.1"}),(0,e.jsx)(d.Z,{label:"\u6307\u5B9AIp\u8303\u56F4",name:"ipRange",width:"md",placeholder:"192.168.1.0/24"})]}),(0,e.jsx)($.u,{name:"ipAux",label:"\u6392\u9664Ip",children:(0,e.jsxs)(R.UW,{children:[(0,e.jsx)(d.Z,{label:"\u8BBE\u5907\u540D\u79F0",name:"device",width:"md"}),(0,e.jsx)(d.Z,{label:"Ip\u5730\u5740",name:"address",width:"md"})]})})]})}}),(0,e.jsxs)(q.Z,{children:[(0,e.jsx)(S.Z,{span:8,children:(0,e.jsx)(g.Z,{label:"\u542F\u7528IPV6",name:"enableIpV6"})}),(0,e.jsx)(S.Z,{children:(0,e.jsx)(g.Z,{label:"\u81EA\u5B9AIPV6\u5B50\u7F51",name:"userIpV6Subnet",fieldProps:{onChange:function(c,u){if(c){var C;(C=t.current)===null||C===void 0||C.setFieldValue("enableIpV6",!0)}}}})})]}),(0,e.jsx)(P.Z,{name:["userIpV6Subnet"],children:function(c){var u=c.userIpV6Subnet;if(u)return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(R.UW,{title:"IPV6\u914D\u7F6E",children:[(0,e.jsx)(d.Z,{label:"\u5B50\u7F51",name:"ipV6Subnet",width:"md",placeholder:"2001:db8::/48"}),(0,e.jsx)(d.Z,{label:"\u7F51\u5173",name:"ipV6Gateway",width:"md",placeholder:"2001:db8::1"}),(0,e.jsx)(d.Z,{label:"Ip\u8303\u56F4",name:"ipV6Range",width:"md",placeholder:"2001:db8::/64"})]}),(0,e.jsx)($.u,{name:"ipV6Aux",label:"\u6392\u9664Ip",children:(0,e.jsxs)(R.UW,{children:[(0,e.jsx)(d.Z,{label:"\u8BBE\u5907\u540D\u79F0",name:"device",width:"md"}),(0,e.jsx)(d.Z,{label:"Ip\u5730\u5740",name:"address",width:"md"})]})})]})}}),(0,e.jsx)($.u,{name:"driverOption",label:"\u81EA\u5B9A\u4E49\u9A71\u52A8\u914D\u7F6E",children:(0,e.jsxs)(R.UW,{children:[(0,e.jsx)(d.Z,{label:"\u540D\u79F0",name:"name",width:"md"}),(0,e.jsx)(d.Z,{label:"\u503C",name:"value",width:"md"})]})})]})}),ee=_,ne=n(10032),re=n(67255),ae=n(43425),te=n(90078),ue=n(10641),le=n(66309),D=n(42075),ie=n(96074),de=n(83062);function se(){var s=(0,F.useRef)(),w=(0,F.useRef)();return(0,e.jsxs)(te._z,{header:{extra:[(0,e.jsx)(ee,{onFinish:function(){var l,r;!((l=s.current)===null||l===void 0)&&l.reloadAndRest&&((r=s.current)===null||r===void 0||r.reloadAndRest())}},"create")]},children:[(0,e.jsx)(ne.Z,{ref:w}),(0,e.jsx)(ue.Z,{scroll:{x:"max-content"},rowKey:"Name",columns:[{title:"\u540D\u79F0",ellipsis:!0,dataIndex:"Name",render:function(l,r,o,t,a){return r.Name=="none"||r.Name=="bridge"||r.Name=="host"?(0,e.jsxs)(e.Fragment,{children:[r.Name," ",(0,e.jsx)(le.Z,{color:"blue",children:"System"})]}):(0,e.jsx)(e.Fragment,{children:l})}},{title:"\u7C7B\u578B",ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"IPAM Driver",ellipsis:!0,width:120,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4",ellipsis:!0,width:150,search:!1,render:function(l,r,o,t,a){return r.IPAM.Config&&r.IPAM.Config[0]?(0,e.jsxs)(D.Z,{direction:"vertical",children:[(0,e.jsx)("div",{children:r.IPAM.Config&&r.IPAM.Config[0].Subnet}),(0,e.jsx)("div",{children:r.IPAM.Config&&r.IPAM.Config[0].Gateway})]}):"-"}},{title:"IPV6",ellipsis:!0,width:150,search:!1,render:function(l,r,o,t,a){return r.IPAM.Config&&r.IPAM.Config[1]?(0,e.jsxs)(D.Z,{direction:"vertical",children:[(0,e.jsx)("div",{children:r.IPAM.Config&&r.IPAM.Config[1].Subnet}),(0,e.jsx)("div",{children:r.IPAM.Config&&r.IPAM.Config[1].Gateway})]}):"-"}},{title:"\u521B\u5EFA\u65F6\u95F4",ellipsis:!0,width:180,search:!1,dataIndex:"Created",render:function(l,r,o,t,a){return new Date(r.Created).toLocaleString()}},{title:"\u64CD\u4F5C",width:100,search:!1,fixed:"right",render:function(l,r,o,t,a){return(0,e.jsx)(D.Z,{split:(0,e.jsx)(ie.Z,{type:"vertical"}),children:(0,e.jsx)(k.ZP,{type:"link",onClick:function(){var i;(i=w.current)===null||i===void 0||i.show(r.Name)},children:(0,e.jsx)(de.Z,{title:"\u7BA1\u7406",children:(0,e.jsx)(ae.Z,{})})})})}}],request:function(){var h=p()(m()().mark(function l(r,o,t){var a;return m()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,Z.jR)({name:r.Name});case 2:return a=i.sent,i.abrupt("return",{data:a.data.list,success:!0,total:a.data.list.length});case 4:case"end":return i.stop()}},l)}));return function(l,r,o){return h.apply(this,arguments)}}(),rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},actionRef:s,tableAlertOptionRender:function(l){var r=l.selectedRowKeys;return(0,e.jsxs)(D.Z,{size:16,children:[(0,e.jsx)(x.Z,{danger:!0,type:"primary",action:function(){return(0,Z._x)({name:r})},onSuccess:function(){var t,a;return!((t=s.current)===null||t===void 0)&&t.reloadAndRest&&((a=s.current)===null||a===void 0||a.reloadAndRest()),!0},onError:function(){var t,a;return!((t=s.current)===null||t===void 0)&&t.reset&&((a=s.current)===null||a===void 0||a.reset()),!0},confirm:"notification.confirm.title",children:"\u6279\u91CF\u5220\u9664"},"delete"),(0,e.jsx)(x.Z,{action:function(){return(0,Z.CI)()},onSuccess:function(){var t,a;return!((t=s.current)===null||t===void 0)&&t.reloadAndRest&&((a=s.current)===null||a===void 0||a.reloadAndRest()),!0},onError:function(){var t,a;return!((t=s.current)===null||t===void 0)&&t.reset&&((a=s.current)===null||a===void 0||a.reset()),!0},confirm:"notification.confirm.title",children:"\u6E05\u7406\u672A\u4F7F\u7528\u7F51\u7EDC"},"clearNotUse")]})},pagination:(0,re.O)()})]})}},67255:function(Q,b,n){n.d(b,{O:function(){return I},j:function(){return m}});function I(){var v=localStorage.getItem("dpanel-pagesize");return v=="all"?!1:{showSizeChanger:!0,defaultPageSize:parseInt(v!=null?v:"20")}}function m(v){var p="dpanel-table-column-".concat(v),x={};if(localStorage.getItem(p)){var j;x=JSON.parse((j=localStorage.getItem(p))!==null&&j!==void 0?j:"{}")}return{defaultValue:x,onChange:function(f){localStorage.setItem("dpanel-table-column-".concat(v),JSON.stringify(f))}}}}}]);
