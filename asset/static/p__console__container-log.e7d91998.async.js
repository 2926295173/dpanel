!(function(){var le=Object.defineProperty,ce=Object.defineProperties;var ue=Object.getOwnPropertyDescriptors;var te=Object.getOwnPropertySymbols;var _e=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var ne=(S,M,e)=>M in S?le(S,M,{enumerable:!0,configurable:!0,writable:!0,value:e}):S[M]=e,re=(S,M)=>{for(var e in M||(M={}))_e.call(M,e)&&ne(S,e,M[e]);if(te)for(var e of te(M))de.call(M,e)&&ne(S,e,M[e]);return S},se=(S,M)=>ce(S,ue(M));(self.webpackChunk=self.webpackChunk||[]).push([[3428],{23430:function(S,M,e){"use strict";e.d(M,{Z:function(){return R}});var T=e(87462),c=e(67294),j={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},u=j,d=e(84089),p=function(t,i){return c.createElement(d.Z,(0,T.Z)({},t,{ref:i,icon:u}))},C=c.forwardRef(p),R=C},5966:function(S,M,e){"use strict";var T=e(97685),c=e(1413),j=e(45987),u=e(21770),d=e(72723),p=e(55241),C=e(97435),R=e(67294),n=e(35510),t=e(85893),i=["fieldProps","proFieldProps"],s=["fieldProps","proFieldProps"],r="text",a=function(E){var f=E.fieldProps,w=E.proFieldProps,A=(0,j.Z)(E,i);return(0,t.jsx)(n.Z,(0,c.Z)({valueType:r,fieldProps:f,filedConfig:{valueType:r},proFieldProps:w},A))},o=function(E){var f=(0,u.Z)(E.open||!1,{value:E.open,onChange:E.onOpenChange}),w=(0,T.Z)(f,2),A=w[0],m=w[1];return(0,t.jsx)(d.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(g){var l,O=g.getFieldValue(E.name||[]);return(0,t.jsx)(p.Z,(0,c.Z)((0,c.Z)({getPopupContainer:function(b){return b&&b.parentNode?b.parentNode:b},onOpenChange:function(b){return m(b)},content:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[(l=E.statusRender)===null||l===void 0?void 0:l.call(E,O),E.strengthText?(0,t.jsx)("div",{style:{marginTop:10},children:(0,t.jsx)("span",{children:E.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},E.popoverProps),{},{open:A,children:E.children}))}})},_=function(E){var f=E.fieldProps,w=E.proFieldProps,A=(0,j.Z)(E,s),m=(0,R.useState)(!1),h=(0,T.Z)(m,2),g=h[0],l=h[1];return f!=null&&f.statusRender&&A.name?(0,t.jsx)(o,{name:A.name,statusRender:f==null?void 0:f.statusRender,popoverProps:f==null?void 0:f.popoverProps,strengthText:f==null?void 0:f.strengthText,open:g,onOpenChange:l,children:(0,t.jsx)("div",{children:(0,t.jsx)(n.Z,(0,c.Z)({valueType:"password",fieldProps:(0,c.Z)((0,c.Z)({},(0,C.Z)(f,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(D){var b;f==null||(b=f.onBlur)===null||b===void 0||b.call(f,D),l(!1)},onClick:function(D){var b;f==null||(b=f.onClick)===null||b===void 0||b.call(f,D),l(!0)}}),proFieldProps:w,filedConfig:{valueType:r}},A))})}):(0,t.jsx)(n.Z,(0,c.Z)({valueType:"password",fieldProps:f,proFieldProps:w,filedConfig:{valueType:r}},A))},v=a;v.Password=_,v.displayName="ProFormComponent",M.Z=v},80821:function(S,M,e){"use strict";e.d(M,{Z:function(){return s}});var T=e(97857),c=e.n(T),j=e(5574),u=e.n(j),d=e(24963),p=e(36146),C=e(86738),R=e(83062),n=e(28036),t=e(67294),i=e(85893);function s(r){var a=(0,t.useState)(!1),o=u()(a,2),_=o[0],v=o[1],y=(0,t.useContext)(d.Z),E=y.message,f=new p.Uo,w=function(){v(!0);var m=r.action();m instanceof Promise?m.then(function(h){if(v(!1),h){typeof r.onSuccess=="function"&&r.onSuccess(h);var g="";r.messageSuccess?typeof r.messageSuccess=="function"?g=r.messageSuccess(h):g=r.messageSuccess.indexOf("notification.")==0?f.format(r.messageSuccess):r.messageSuccess:g=f.format("notification.finish"),r.asynced?E.info(g):E.success(g)}}).catch(function(h){v(!1),typeof r.onError=="function"&&r.onError(h)}):v(!1)};return r.confirm?(0,i.jsx)(C.Z,c()(c()({style:{width:500},title:r.confirmTitle?r.confirmTitle:f.format("notification.title.tip"),description:typeof r.confirm=="string"&&r.confirm.indexOf("notification.")==0?f.format(r.confirm):r.confirm,onConfirm:w,okText:"Yes",cancelText:"No",onOpenChange:r.confirmOnOpenChange},r.confirmProps),{},{children:(0,i.jsx)(R.Z,{title:r.tips,children:(0,i.jsx)(n.ZP,{block:r.block,disabled:r.disabled,icon:!r.children&&_?void 0:r.icon,loading:_,danger:r.danger,type:r.type,children:r.children})})})):(0,i.jsx)(R.Z,{title:r.tips,children:(0,i.jsx)(n.ZP,{block:r.block,style:r.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:r.disabled,icon:!r.children&&_?void 0:r.icon,loading:_,onClick:w,danger:r.danger,type:r.type,children:r.children})})}},81146:function(S,M,e){"use strict";var T=e(97857),c=e.n(T),j=e(15009),u=e.n(j),d=e(99289),p=e.n(d),C=e(67294),R=e(97269),n=e(62370),t=e(5966),i=e(97462),s=e(82346),r=e(71230),a=e(15746),o=e(34041),_=e(28036),v=e(84567),y=e(42075),E=e(80821),f=e(23430),w=e(93162),A=e.n(w),m=e(78267),h=e.n(m),g=e(75458),l=e.n(g),O=e(12323),D=e(4244),b=e.n(D),B=e(24078),L=e(36146),P=e(85893),U,F,$,N={decorations:{matchBackground:"",matchBorder:"#FFFF00",activeMatchBackground:"#FFFF0066",matchOverviewRuler:"",activeMatchColorOverviewRuler:""}},X=(0,C.forwardRef)(function(k,J){var z=(0,C.useRef)(),Q=(0,s.useModel)("subscriber"),K=new L.Uo("components.containerLog");(0,C.useImperativeHandle)(J,function(){return{fit:function(){U.clear(),$.fit()},start:function(){return p()(u()().mark(function x(){return u()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,q({lineTotal:500});case 2:case"end":return Z.stop()}},x)}))()},close:function(){Q.progress.close(k.id)}}});function q(W){return V.apply(this,arguments)}function V(){return V=p()(u()().mark(function W(x){return u()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:U.clear(),x.download=!1,k.request(x);case 3:case"end":return Z.stop()}},W)})),V.apply(this,arguments)}return(0,C.useEffect)(function(){return window.addEventListener("resize",function(){$.fit()}),U=new D.Terminal(c()(c()({},O.X),{},{fontSize:12,lineHeight:1.2,allowProposedApi:!0})),$=new m.FitAddon,F=new g.SearchAddon({}),U.loadAddon($),U.loadAddon(F),U.open(document.getElementById("terminal-container-log")),$.fit(),Q.addDataHandler(k.id,function(W){U.write(W.data)}),function(){U.clear(),U.reset(),Q.progress.close(k.id)}},[]),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(R.A,{submitter:!1,layout:"horizontal",onFinish:function(x){var I;q({id:k.id,lineTotal:parseInt(x.lineTotal),showTime:(I=x.showTime)!==null&&I!==void 0?I:!1})},formRef:z,children:(0,P.jsxs)(r.Z,{gutter:[10,0],children:[(0,P.jsx)(a.Z,{span:8,children:(0,P.jsx)(n.Z,{name:"lineTotal",initialValue:"500",label:K.format("formLineTotal"),children:(0,P.jsxs)(o.Z,{defaultValue:"500",onChange:function(x){var I;(I=z.current)===null||I===void 0||I.submit()},children:[(0,P.jsx)(o.Z.Option,{value:"100",children:K.format("formLineTotalOption",{number:"100"})}),(0,P.jsx)(o.Z.Option,{value:"200",children:K.format("formLineTotalOption",{number:"200"})}),(0,P.jsx)(o.Z.Option,{value:"500",children:K.format("formLineTotalOption",{number:"500"})}),(0,P.jsx)(o.Z.Option,{value:"1000",children:K.format("formLineTotalOption",{number:"1000"})}),(0,P.jsx)(o.Z.Option,{value:"-1",children:K.format("formLineTotalOptionAll")})]})})}),(0,P.jsx)(a.Z,{children:(0,P.jsx)(_.ZP,{onClick:function(){U.clear()},children:K.format("clearButton")})}),(0,P.jsx)(a.Z,{children:(0,P.jsx)(n.Z,{name:"showTime",valuePropName:"checked",children:(0,P.jsx)(v.Z,{onChange:function(x){var I;(I=z.current)===null||I===void 0||I.submit()},children:K.format("formShowTime")})})}),(0,P.jsx)(a.Z,{children:(0,P.jsx)(t.Z,{label:K.format("formKeywork"),name:"keywork",fieldProps:{onPressEnter:function(){var x;F.findNext((x=z.current)===null||x===void 0?void 0:x.getFieldValue("keywork"),N)},onChange:function(x){F.findNext(x.target.value,N)}},placeholder:K.format("formKeyworkEmpty")})}),(0,P.jsx)(a.Z,{children:(0,P.jsx)(i.Z,{name:["keywork"],children:function(x){var I=x.keywork;return(0,P.jsxs)(y.Z,{size:10,children:[(0,P.jsx)(_.ZP,{onClick:function(){F.findNext(I,N)},children:K.format("formKeyworkNext")},"next"),(0,P.jsx)(_.ZP,{onClick:function(){F.findPrevious(I,N)},children:K.format("formKeyworkPrev")},"prev")]})}})}),(0,P.jsx)(a.Z,{children:(0,P.jsx)(E.Z,{icon:(0,P.jsx)(f.Z,{}),action:p()(u()().mark(function W(){var x,I,Z;return u()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(!k.download){G.next=5;break}return G.next=3,k.download({lineTotal:parseInt((x=z.current)===null||x===void 0?void 0:x.getFieldValue("lineTotal")),showTime:(I=z.current)===null||I===void 0?void 0:I.getFieldValue("showTime")});case 3:Z=G.sent,(0,w.saveAs)(Z.data,Z.name);case 5:case"end":return G.stop()}},W)})),children:K.format("downloadButton")})})]})}),(0,P.jsx)("div",{style:{marginTop:"20px",height:k.showInDrawer?"75vh":"85vh"},id:"terminal-container-log"})]})});M.Z=X},12323:function(S,M,e){"use strict";e.d(M,{X:function(){return T},n:function(){return c}});var T={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},c=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},24963:function(S,M,e){"use strict";var T=e(67294),c=(0,T.createContext)({});M.Z=c},15141:function(S,M,e){"use strict";e.r(M),e.d(M,{default:function(){return r}});var T=e(15009),c=e.n(T),j=e(99289),u=e.n(j),d=e(81146),p=e(13822),C=e(62597),R=e(5251),n=e(38345),t=e(82346),i=e(67294),s=e(85893);function r(){var a=(0,t.useParams)(),o=(0,i.useRef)();return(0,i.useEffect)(function(){var _;return setTimeout(function(){if(a.id){var v,y;(v=o.current)===null||v===void 0||v.start(),(y=o.current)===null||y===void 0||y.fit()}},1e3),window.document.title="".concat((0,R.fi)((_=a.id)!==null&&_!==void 0?_:"","/")," - log"),function(){var v;(v=o.current)===null||v===void 0||v.close()}},[]),a.id&&(0,s.jsx)(n.Z,{children:(0,s.jsx)(d.Z,{id:"container:log:".concat(a.id),ref:o,request:function(){var _=u()(c()().mark(function v(y){return c()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,C.Tb)({id:a.id,lineTotal:y.lineTotal,download:y.download,showTime:y.showTime});case 2:case"end":return f.stop()}},v)}));return function(v){return _.apply(this,arguments)}}(),download:function(){var _=u()(c()().mark(function v(y){var E,f,w;return c()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,C.XH)({id:a.id,lineTotal:y.lineTotal,showTime:y.showTime});case 2:return f=m.sent,m.next=5,(0,p.jV)({md5:(E=a.id)!==null&&E!==void 0?E:""});case 5:return w=m.sent,m.abrupt("return",{data:new Blob([f],{type:"text/plain"}),name:w.data.info.Name.replaceAll("/","")+"_"+new Date().toLocaleDateString()+".log"});case 7:case"end":return m.stop()}},v)}));return function(v){return _.apply(this,arguments)}}()})})}},13822:function(S,M,e){"use strict";e.d(M,{IE:function(){return R},IW:function(){return p},KK:function(){return a},LJ:function(){return _},RF:function(){return f},Re:function(){return y},aF:function(){return A},eE:function(){return s},jV:function(){return t}});var T=e(15009),c=e.n(T),j=e(99289),u=e.n(j),d=e(82346);function p(h){return C.apply(this,arguments)}function C(){return C=u()(c()().mark(function h(g){return c()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,d.request)("/api/app/container/status",{method:"POST",data:g}));case 1:case"end":return O.stop()}},h)})),C.apply(this,arguments)}function R(h){return n.apply(this,arguments)}function n(){return n=u()(c()().mark(function h(g){return c()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,d.request)("/api/app/container/get-list",{data:g,method:"POST"}));case 1:case"end":return O.stop()}},h)})),n.apply(this,arguments)}function t(h){return i.apply(this,arguments)}function i(){return i=u()(c()().mark(function h(g){return c()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,d.request)("/api/app/container/get-detail",{data:g,method:"POST"}));case 1:case"end":return O.stop()}},h)})),i.apply(this,arguments)}function s(h){return r.apply(this,arguments)}function r(){return r=u()(c()().mark(function h(g){return c()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,d.request)("/api/app/container/update",{data:g,method:"POST"}));case 1:case"end":return O.stop()}},h)})),r.apply(this,arguments)}function a(){return o.apply(this,arguments)}function o(){return o=u()(c()().mark(function h(){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,d.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return l.stop()}},h)})),o.apply(this,arguments)}function _(h){return v.apply(this,arguments)}function v(){return v=u()(c()().mark(function h(g){return c()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,d.request)("/api/app/container/export",{method:"POST",data:g,responseType:"blob"}));case 1:case"end":return O.stop()}},h)})),v.apply(this,arguments)}function y(h){return E.apply(this,arguments)}function E(){return E=u()(c()().mark(function h(g){return c()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,d.request)("/api/app/container/commit",{method:"POST",data:g}));case 1:case"end":return O.stop()}},h)})),E.apply(this,arguments)}function f(h){return w.apply(this,arguments)}function w(){return w=u()(c()().mark(function h(g){return c()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,d.request)("/api/app/container/upgrade",{method:"POST",data:g}));case 1:case"end":return O.stop()}},h)})),w.apply(this,arguments)}function A(h){return m.apply(this,arguments)}function m(){return m=u()(c()().mark(function h(g){return c()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,d.request)("/api/app/container/copy",{method:"POST",data:g}));case 1:case"end":return O.stop()}},h)})),m.apply(this,arguments)}},62597:function(S,M,e){"use strict";e.d(M,{$G:function(){return p},Ct:function(){return v},Tb:function(){return i},XH:function(){return r},cl:function(){return n},fp:function(){return R},iE:function(){return o},xb:function(){return E},ze:function(){return w}});var T=e(15009),c=e.n(T),j=e(99289),u=e.n(j),d=e(82346);function p(m){return C.apply(this,arguments)}function C(){return C=u()(c()().mark(function m(h){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,d.request)("/api/app/site/create-by-image",{method:"POST",data:h}));case 1:case"end":return l.stop()}},m)})),C.apply(this,arguments)}var R={EnvValueRuleRequired:1,EnvValueRuleDisabled:2,EnvValueTypeNumber:1024,EnvValueTypeText:2048,EnvValueTypeSelect:4096,EnvValueTypeSelectMultiple:8192};function n(m){return t.apply(this,arguments)}function t(){return t=u()(c()().mark(function m(h){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,d.request)("/api/app/site/get-list",{method:"POST",data:h}));case 1:case"end":return l.stop()}},m)})),t.apply(this,arguments)}function i(m){return s.apply(this,arguments)}function s(){return s=u()(c()().mark(function m(h){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return h.download=!1,l.next=3,(0,d.request)("/api/app/log/run",{method:"POST",data:h});case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},m)})),s.apply(this,arguments)}function r(m){return a.apply(this,arguments)}function a(){return a=u()(c()().mark(function m(h){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return h.download=!0,l.next=3,(0,d.request)("/api/app/log/run",{method:"POST",data:h,responseType:"blob"});case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},m)})),a.apply(this,arguments)}function o(m){return _.apply(this,arguments)}function _(){return _=u()(c()().mark(function m(h){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return h.id=String(h.id),l.next=3,(0,d.request)("/api/app/site/get-detail",{data:h,method:"POST"});case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},m)})),_.apply(this,arguments)}function v(m){return y.apply(this,arguments)}function y(){return y=u()(c()().mark(function m(h){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,d.request)("/api/app/container/delete",{method:"POST",data:h}));case 1:case"end":return l.stop()}},m)})),y.apply(this,arguments)}function E(m){return f.apply(this,arguments)}function f(){return f=u()(c()().mark(function m(h){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,d.request)("/api/app/site/delete",{method:"POST",data:h}));case 1:case"end":return l.stop()}},m)})),f.apply(this,arguments)}function w(m){return A.apply(this,arguments)}function A(){return A=u()(c()().mark(function m(h){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,d.request)("/api/app/container/ignore",{method:"POST",data:h}));case 1:case"end":return l.stop()}},m)})),A.apply(this,arguments)}},75458:function(S){(function(M,e){S.exports=e()})(self,()=>(()=>{"use strict";var M={345:(j,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.runAndSubscribe=u.forwardEvent=u.EventEmitter=void 0,u.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=d=>(this._listeners.push(d),{dispose:()=>{if(!this._disposed){for(let p=0;p<this._listeners.length;p++)if(this._listeners[p]===d)return void this._listeners.splice(p,1)}}})),this._event}fire(d,p){const C=[];for(let R=0;R<this._listeners.length;R++)C.push(this._listeners[R]);for(let R=0;R<C.length;R++)C[R].call(void 0,d,p)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},u.forwardEvent=function(d,p){return d(C=>p.fire(C))},u.runAndSubscribe=function(d,p){return p(void 0),d(C=>p(C))}},859:(j,u)=>{function d(p){for(const C of p)C.dispose();p.length=0}Object.defineProperty(u,"__esModule",{value:!0}),u.getDisposeArrayDisposable=u.disposeArray=u.toDisposable=u.MutableDisposable=u.Disposable=void 0,u.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const p of this._disposables)p.dispose();this._disposables.length=0}register(p){return this._disposables.push(p),p}unregister(p){const C=this._disposables.indexOf(p);C!==-1&&this._disposables.splice(C,1)}},u.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(p){var C;this._isDisposed||p===this._value||((C=this._value)==null||C.dispose(),this._value=p)}clear(){this.value=void 0}dispose(){var p;this._isDisposed=!0,(p=this._value)==null||p.dispose(),this._value=void 0}},u.toDisposable=function(p){return{dispose:p}},u.disposeArray=d,u.getDisposeArrayDisposable=function(p){return{dispose:()=>d(p)}}}},e={};function T(j){var u=e[j];if(u!==void 0)return u.exports;var d=e[j]={exports:{}};return M[j](d,d.exports,T),d.exports}var c={};return(()=>{var j=c;Object.defineProperty(j,"__esModule",{value:!0}),j.SearchAddon=void 0;const u=T(345),d=T(859),p=" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?";class C extends d.Disposable{constructor(n){var t;super(),this._highlightedLines=new Set,this._highlightDecorations=[],this._selectedDecoration=this.register(new d.MutableDisposable),this._linesCacheTimeoutId=0,this._linesCacheDisposables=new d.MutableDisposable,this._onDidChangeResults=this.register(new u.EventEmitter),this.onDidChangeResults=this._onDidChangeResults.event,this._highlightLimit=(t=n==null?void 0:n.highlightLimit)!=null?t:1e3}activate(n){this._terminal=n,this.register(this._terminal.onWriteParsed(()=>this._updateMatches())),this.register(this._terminal.onResize(()=>this._updateMatches())),this.register((0,d.toDisposable)(()=>this.clearDecorations()))}_updateMatches(){var n;this._highlightTimeout&&window.clearTimeout(this._highlightTimeout),this._cachedSearchTerm&&((n=this._lastSearchOptions)!=null&&n.decorations)&&(this._highlightTimeout=setTimeout(()=>{const t=this._cachedSearchTerm;this._cachedSearchTerm=void 0,this.findPrevious(t,se(re({},this._lastSearchOptions),{incremental:!0,noScroll:!0}))},200))}clearDecorations(n){this._selectedDecoration.clear(),(0,d.disposeArray)(this._highlightDecorations),this._highlightDecorations=[],this._highlightedLines.clear(),n||(this._cachedSearchTerm=void 0)}clearActiveDecoration(){this._selectedDecoration.clear()}findNext(n,t){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");const i=!this._lastSearchOptions||this._didOptionsChange(this._lastSearchOptions,t);this._lastSearchOptions=t,t!=null&&t.decorations&&(this._cachedSearchTerm===void 0||n!==this._cachedSearchTerm||i)&&this._highlightAllMatches(n,t);const s=this._findNextAndSelect(n,t);return this._fireResults(t),this._cachedSearchTerm=n,s}_highlightAllMatches(n,t){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!n||n.length===0)return void this.clearDecorations();t=t||{},this.clearDecorations(!0);const i=[];let s,r=this._find(n,0,0,t);for(;r&&((s==null?void 0:s.row)!==r.row||(s==null?void 0:s.col)!==r.col)&&!(i.length>=this._highlightLimit);)s=r,i.push(s),r=this._find(n,s.col+s.term.length>=this._terminal.cols?s.row+1:s.row,s.col+s.term.length>=this._terminal.cols?0:s.col+1,t);for(const a of i){const o=this._createResultDecoration(a,t.decorations);o&&(this._highlightedLines.add(o.marker.line),this._highlightDecorations.push({decoration:o,match:a,dispose(){o.dispose()}}))}}_find(n,t,i,s){var o;if(!this._terminal||!n||n.length===0)return(o=this._terminal)==null||o.clearSelection(),void this.clearDecorations();if(i>this._terminal.cols)throw new Error(`Invalid col: ${i} to search in terminal of ${this._terminal.cols} cols`);let r;this._initLinesCache();const a={startRow:t,startCol:i};if(r=this._findInLine(n,a,s),!r)for(let _=t+1;_<this._terminal.buffer.active.baseY+this._terminal.rows&&(a.startRow=_,a.startCol=0,r=this._findInLine(n,a,s),!r);_++);return r}_findNextAndSelect(n,t){var _;if(!this._terminal||!n||n.length===0)return(_=this._terminal)==null||_.clearSelection(),this.clearDecorations(),!1;const i=this._terminal.getSelectionPosition();this._terminal.clearSelection();let s=0,r=0;i&&(this._cachedSearchTerm===n?(s=i.end.x,r=i.end.y):(s=i.start.x,r=i.start.y)),this._initLinesCache();const a={startRow:r,startCol:s};let o=this._findInLine(n,a,t);if(!o)for(let v=r+1;v<this._terminal.buffer.active.baseY+this._terminal.rows&&(a.startRow=v,a.startCol=0,o=this._findInLine(n,a,t),!o);v++);if(!o&&r!==0)for(let v=0;v<r&&(a.startRow=v,a.startCol=0,o=this._findInLine(n,a,t),!o);v++);return!o&&i&&(a.startRow=i.start.y,a.startCol=0,o=this._findInLine(n,a,t)),this._selectResult(o,t==null?void 0:t.decorations,t==null?void 0:t.noScroll)}findPrevious(n,t){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");const i=!this._lastSearchOptions||this._didOptionsChange(this._lastSearchOptions,t);this._lastSearchOptions=t,t!=null&&t.decorations&&(this._cachedSearchTerm===void 0||n!==this._cachedSearchTerm||i)&&this._highlightAllMatches(n,t);const s=this._findPreviousAndSelect(n,t);return this._fireResults(t),this._cachedSearchTerm=n,s}_didOptionsChange(n,t){return!!t&&(n.caseSensitive!==t.caseSensitive||n.regex!==t.regex||n.wholeWord!==t.wholeWord)}_fireResults(n){if(n!=null&&n.decorations){let t=-1;if(this._selectedDecoration.value){const i=this._selectedDecoration.value.match;for(let s=0;s<this._highlightDecorations.length;s++){const r=this._highlightDecorations[s].match;if(r.row===i.row&&r.col===i.col&&r.size===i.size){t=s;break}}}this._onDidChangeResults.fire({resultIndex:t,resultCount:this._highlightDecorations.length})}}_findPreviousAndSelect(n,t){var v;if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!this._terminal||!n||n.length===0)return(v=this._terminal)==null||v.clearSelection(),this.clearDecorations(),!1;const i=this._terminal.getSelectionPosition();this._terminal.clearSelection();let s=this._terminal.buffer.active.baseY+this._terminal.rows-1,r=this._terminal.cols;const a=!0;this._initLinesCache();const o={startRow:s,startCol:r};let _;if(i&&(o.startRow=s=i.start.y,o.startCol=r=i.start.x,this._cachedSearchTerm!==n&&(_=this._findInLine(n,o,t,!1),_||(o.startRow=s=i.end.y,o.startCol=r=i.end.x))),_||(_=this._findInLine(n,o,t,a)),!_){o.startCol=Math.max(o.startCol,this._terminal.cols);for(let y=s-1;y>=0&&(o.startRow=y,_=this._findInLine(n,o,t,a),!_);y--);}if(!_&&s!==this._terminal.buffer.active.baseY+this._terminal.rows-1)for(let y=this._terminal.buffer.active.baseY+this._terminal.rows-1;y>=s&&(o.startRow=y,_=this._findInLine(n,o,t,a),!_);y--);return this._selectResult(_,t==null?void 0:t.decorations,t==null?void 0:t.noScroll)}_initLinesCache(){const n=this._terminal;this._linesCache||(this._linesCache=new Array(n.buffer.active.length),this._linesCacheDisposables.value=(0,d.getDisposeArrayDisposable)([n.onLineFeed(()=>this._destroyLinesCache()),n.onCursorMove(()=>this._destroyLinesCache()),n.onResize(()=>this._destroyLinesCache())])),window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=window.setTimeout(()=>this._destroyLinesCache(),15e3)}_destroyLinesCache(){this._linesCache=void 0,this._linesCacheDisposables.clear(),this._linesCacheTimeoutId&&(window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=0)}_isWholeWord(n,t,i){return(n===0||p.includes(t[n-1]))&&(n+i.length===t.length||p.includes(t[n+i.length]))}_findInLine(n,t,i={},s=!1){var h;const r=this._terminal,a=t.startRow,o=t.startCol,_=r.buffer.active.getLine(a);if(_!=null&&_.isWrapped)return s?void(t.startCol+=r.cols):(t.startRow--,t.startCol+=r.cols,this._findInLine(n,t,i));let v=(h=this._linesCache)==null?void 0:h[a];v||(v=this._translateBufferLineToStringWithWrap(a,!0),this._linesCache&&(this._linesCache[a]=v));const[y,E]=v,f=this._bufferColsToStringOffset(a,o),w=i.caseSensitive?n:n.toLowerCase(),A=i.caseSensitive?y:y.toLowerCase();let m=-1;if(i.regex){const g=RegExp(w,"g");let l;if(s)for(;l=g.exec(A.slice(0,f));)m=g.lastIndex-l[0].length,n=l[0],g.lastIndex-=n.length-1;else l=g.exec(A.slice(f)),l&&l[0].length>0&&(m=f+(g.lastIndex-l[0].length),n=l[0])}else s?f-w.length>=0&&(m=A.lastIndexOf(w,f-w.length)):m=A.indexOf(w,f);if(m>=0){if(i.wholeWord&&!this._isWholeWord(m,A,n))return;let g=0;for(;g<E.length-1&&m>=E[g+1];)g++;let l=g;for(;l<E.length-1&&m+n.length>=E[l+1];)l++;const O=m-E[g],D=m+n.length-E[l],b=this._stringLengthToBufferSize(a+g,O);return{term:n,col:b,row:a+g,size:this._stringLengthToBufferSize(a+l,D)-b+r.cols*(l-g)}}}_stringLengthToBufferSize(n,t){const i=this._terminal.buffer.active.getLine(n);if(!i)return 0;for(let s=0;s<t;s++){const r=i.getCell(s);if(!r)break;const a=r.getChars();a.length>1&&(t-=a.length-1);const o=i.getCell(s+1);o&&o.getWidth()===0&&t++}return t}_bufferColsToStringOffset(n,t){const i=this._terminal;let s=n,r=0,a=i.buffer.active.getLine(s);for(;t>0&&a;){for(let o=0;o<t&&o<i.cols;o++){const _=a.getCell(o);if(!_)break;_.getWidth()&&(r+=_.getCode()===0?1:_.getChars().length)}if(s++,a=i.buffer.active.getLine(s),a&&!a.isWrapped)break;t-=i.cols}return r}_translateBufferLineToStringWithWrap(n,t){var o;const i=this._terminal,s=[],r=[0];let a=i.buffer.active.getLine(n);for(;a;){const _=i.buffer.active.getLine(n+1),v=!!_&&_.isWrapped;let y=a.translateToString(!v&&t);if(v&&_){const E=a.getCell(a.length-1);E&&E.getCode()===0&&E.getWidth()===1&&((o=_.getCell(0))==null?void 0:o.getWidth())===2&&(y=y.slice(0,-1))}if(s.push(y),!v)break;r.push(r[r.length-1]+y.length),n++,a=_}return[s.join(""),r]}_selectResult(n,t,i){const s=this._terminal;if(this._selectedDecoration.clear(),!n)return s.clearSelection(),!1;if(s.select(n.col,n.row,n.size),t){const r=s.registerMarker(-s.buffer.active.baseY-s.buffer.active.cursorY+n.row);if(r){const a=s.registerDecoration({marker:r,x:n.col,width:n.size,backgroundColor:t.activeMatchBackground,layer:"top",overviewRulerOptions:{color:t.activeMatchColorOverviewRuler}});if(a){const o=[];o.push(r),o.push(a.onRender(_=>this._applyStyles(_,t.activeMatchBorder,!0))),o.push(a.onDispose(()=>(0,d.disposeArray)(o))),this._selectedDecoration.value={decoration:a,match:n,dispose(){a.dispose()}}}}}if(!i&&(n.row>=s.buffer.active.viewportY+s.rows||n.row<s.buffer.active.viewportY)){let r=n.row-s.buffer.active.viewportY;r-=Math.floor(s.rows/2),s.scrollLines(r)}return!0}_applyStyles(n,t,i){n.classList.contains("xterm-find-result-decoration")||(n.classList.add("xterm-find-result-decoration"),t&&(n.style.outline=`1px solid ${t}`)),i&&n.classList.add("xterm-find-active-result-decoration")}_createResultDecoration(n,t){const i=this._terminal,s=i.registerMarker(-i.buffer.active.baseY-i.buffer.active.cursorY+n.row);if(!s)return;const r=i.registerDecoration({marker:s,x:n.col,width:n.size,backgroundColor:t.matchBackground,overviewRulerOptions:this._highlightedLines.has(s.line)?void 0:{color:t.matchOverviewRuler,position:"center"}});if(r){const a=[];a.push(s),a.push(r.onRender(o=>this._applyStyles(o,t.matchBorder,!1))),a.push(r.onDispose(()=>(0,d.disposeArray)(a)))}return r}}j.SearchAddon=C})(),c})())},86738:function(S,M,e){"use strict";e.d(M,{Z:function(){return O}});var T=e(67294),c=e(21640),j=e(93967),u=e.n(j),d=e(21770),p=e(98423),C=e(53124),R=e(55241),n=e(86743),t=e(81643),i=e(28036),s=e(33671),r=e(10110),a=e(24457),o=e(66330),_=e(83559);const v=D=>{const{componentCls:b,iconCls:B,antCls:L,zIndexPopup:P,colorText:U,colorWarning:F,marginXXS:$,marginXS:N,fontSize:X,fontWeightStrong:k,colorTextHeading:J}=D;return{[b]:{zIndex:P,[`&${L}-popover`]:{fontSize:X},[`${b}-message`]:{marginBottom:N,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${b}-message-icon ${B}`]:{color:F,fontSize:X,lineHeight:1,marginInlineEnd:N},[`${b}-title`]:{fontWeight:k,color:J,"&:only-child":{fontWeight:"normal"}},[`${b}-description`]:{marginTop:$,color:U}},[`${b}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:N}}}}},y=D=>{const{zIndexPopupBase:b}=D;return{zIndexPopup:b+60}};var E=(0,_.I$)("Popconfirm",D=>v(D),y,{resetStyle:!1}),f=function(D,b){var B={};for(var L in D)Object.prototype.hasOwnProperty.call(D,L)&&b.indexOf(L)<0&&(B[L]=D[L]);if(D!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,L=Object.getOwnPropertySymbols(D);P<L.length;P++)b.indexOf(L[P])<0&&Object.prototype.propertyIsEnumerable.call(D,L[P])&&(B[L[P]]=D[L[P]]);return B};const w=D=>{const{prefixCls:b,okButtonProps:B,cancelButtonProps:L,title:P,description:U,cancelText:F,okText:$,okType:N="primary",icon:X=T.createElement(c.Z,null),showCancel:k=!0,close:J,onConfirm:z,onCancel:Q,onPopupClick:K}=D,{getPrefixCls:q}=T.useContext(C.E_),[V]=(0,r.Z)("Popconfirm",a.Z.Popconfirm),W=(0,t.Z)(P),x=(0,t.Z)(U);return T.createElement("div",{className:`${b}-inner-content`,onClick:K},T.createElement("div",{className:`${b}-message`},X&&T.createElement("span",{className:`${b}-message-icon`},X),T.createElement("div",{className:`${b}-message-text`},W&&T.createElement("div",{className:`${b}-title`},W),x&&T.createElement("div",{className:`${b}-description`},x))),T.createElement("div",{className:`${b}-buttons`},k&&T.createElement(i.ZP,Object.assign({onClick:Q,size:"small"},L),F||(V==null?void 0:V.cancelText)),T.createElement(n.Z,{buttonProps:Object.assign(Object.assign({size:"small"},(0,s.nx)(N)),B),actionFn:z,close:J,prefixCls:q("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},$||(V==null?void 0:V.okText))))};var m=D=>{const{prefixCls:b,placement:B,className:L,style:P}=D,U=f(D,["prefixCls","placement","className","style"]),{getPrefixCls:F}=T.useContext(C.E_),$=F("popconfirm",b),[N]=E($);return N(T.createElement(o.ZP,{placement:B,className:u()($,L),style:P,content:T.createElement(w,Object.assign({prefixCls:$},U))}))},h=function(D,b){var B={};for(var L in D)Object.prototype.hasOwnProperty.call(D,L)&&b.indexOf(L)<0&&(B[L]=D[L]);if(D!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,L=Object.getOwnPropertySymbols(D);P<L.length;P++)b.indexOf(L[P])<0&&Object.prototype.propertyIsEnumerable.call(D,L[P])&&(B[L[P]]=D[L[P]]);return B};const l=T.forwardRef((D,b)=>{var B,L;const{prefixCls:P,placement:U="top",trigger:F="click",okType:$="primary",icon:N=T.createElement(c.Z,null),children:X,overlayClassName:k,onOpenChange:J,onVisibleChange:z}=D,Q=h(D,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),{getPrefixCls:K}=T.useContext(C.E_),[q,V]=(0,d.Z)(!1,{value:(B=D.open)!==null&&B!==void 0?B:D.visible,defaultValue:(L=D.defaultOpen)!==null&&L!==void 0?L:D.defaultVisible}),W=(Y,H)=>{V(Y,!0),z==null||z(Y),J==null||J(Y,H)},x=Y=>{W(!1,Y)},I=Y=>{var H;return(H=D.onConfirm)===null||H===void 0?void 0:H.call(void 0,Y)},Z=Y=>{var H;W(!1,Y),(H=D.onCancel)===null||H===void 0||H.call(void 0,Y)},ee=(Y,H)=>{const{disabled:oe=!1}=D;oe||W(Y,H)},G=K("popconfirm",P),ie=u()(G,k),[ae]=E(G);return ae(T.createElement(R.Z,Object.assign({},(0,p.Z)(Q,["title"]),{trigger:F,placement:U,onOpenChange:ee,open:q,ref:b,overlayClassName:ie,content:T.createElement(w,Object.assign({okType:$,icon:N},D,{prefixCls:G,close:x,onConfirm:I,onCancel:Z})),"data-popover-inject":!0}),X))});l._InternalPanelDoNotUseOrYouWillBeFired=m;var O=l},93162:function(S,M,e){var T,c,j;(function(u,d){c=[],T=d,j=typeof T=="function"?T.apply(M,c):T,j!==void 0&&(S.exports=j)})(this,function(){"use strict";function u(i,s){return typeof s=="undefined"?s={autoBom:!1}:typeof s!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}function d(i,s,r){var a=new XMLHttpRequest;a.open("GET",i),a.responseType="blob",a.onload=function(){t(a.response,s,r)},a.onerror=function(){console.error("could not download file")},a.send()}function p(i){var s=new XMLHttpRequest;s.open("HEAD",i,!1);try{s.send()}catch(r){}return 200<=s.status&&299>=s.status}function C(i){try{i.dispatchEvent(new MouseEvent("click"))}catch(r){var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(s)}}var R=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof e.g=="object"&&e.g.global===e.g?e.g:void 0,n=R.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),t=R.saveAs||(typeof window!="object"||window!==R?function(){}:"download"in HTMLAnchorElement.prototype&&!n?function(i,s,r){var a=R.URL||R.webkitURL,o=document.createElement("a");s=s||i.name||"download",o.download=s,o.rel="noopener",typeof i=="string"?(o.href=i,o.origin===location.origin?C(o):p(o.href)?d(i,s,r):C(o,o.target="_blank")):(o.href=a.createObjectURL(i),setTimeout(function(){a.revokeObjectURL(o.href)},4e4),setTimeout(function(){C(o)},0))}:"msSaveOrOpenBlob"in navigator?function(i,s,r){if(s=s||i.name||"download",typeof i!="string")navigator.msSaveOrOpenBlob(u(i,r),s);else if(p(i))d(i,s,r);else{var a=document.createElement("a");a.href=i,a.target="_blank",setTimeout(function(){C(a)})}}:function(i,s,r,a){if(a=a||open("","_blank"),a&&(a.document.title=a.document.body.innerText="downloading..."),typeof i=="string")return d(i,s,r);var o=i.type==="application/octet-stream",_=/constructor/i.test(R.HTMLElement)||R.safari,v=/CriOS\/[\d]+/.test(navigator.userAgent);if((v||o&&_||n)&&typeof FileReader!="undefined"){var y=new FileReader;y.onloadend=function(){var w=y.result;w=v?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=w:location=w,a=null},y.readAsDataURL(i)}else{var E=R.URL||R.webkitURL,f=E.createObjectURL(i);a?a.location=f:location.href=f,a=null,setTimeout(function(){E.revokeObjectURL(f)},4e4)}});R.saveAs=t.saveAs=t,S.exports=t})}}]);
}());