"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4214],{1699:function(ee,A,n){n.d(A,{u:function(){return L}});var O=n(9783),h=n.n(O),E=n(97857),u=n.n(E),D=n(67294),l=n(82346),M=n(42075),j=n(85893),L=function(p){var P=(0,l.useAccess)(),U=Array.isArray(p.access)?p.access:[p.access],y;return typeof p.children=="function"?y=p.children(U.reduce(function(Z,K){return u()(u()({},Z),{},h()({},K,P[K]))},{})):U.every(function(Z){return P[Z]})?y=p.children:y=p.fallback,p.space?(0,j.jsx)(M.Z,u()(u()({},p.space),{},{children:y})):y}},80821:function(ee,A,n){n.d(A,{Z:function(){return L}});var O=n(5574),h=n.n(O),E=n(24963),u=n(86738),D=n(28036),l=n(83062),M=n(67294),j=n(85893);function L(a){var p=(0,M.useState)(!1),P=h()(p,2),U=P[0],y=P[1],Z=(0,M.useContext)(E.Z),K=Z.lang,S=Z.notice,T=Z.message,R=function(){y(!0);var te=a.action();te instanceof Promise?te.then(function(v){if(y(!1),v){typeof a.onSuccess=="function"&&a.onSuccess(v);var i="";a.messageSuccess?typeof a.messageSuccess=="function"?i=a.messageSuccess(v):i=a.messageSuccess.indexOf("notification.")==0?K(a.messageSuccess):a.messageSuccess:i=K("notification.finish"),a.asynced?T.info(i):T.success(i)}}).catch(function(v){y(!1),typeof a.onError=="function"&&a.onError(v)}):y(!1)};return a.confirm?(0,j.jsx)(u.Z,{style:{width:500},title:a.confirmTitle?a.confirmTitle:K("notification.title.tip"),description:typeof a.confirm=="string"&&a.confirm.indexOf("notification.")==0?K(a.confirm):a.confirm,onConfirm:R,okText:"Yes",cancelText:"No",onOpenChange:a.confirmOnOpenChange,children:(0,j.jsx)(D.ZP,{block:a.block,disabled:a.disabled,icon:!a.children&&U?void 0:a.icon,loading:U,danger:a.danger,type:a.type,children:a.children})}):(0,j.jsx)(l.Z,{title:a.tips,children:(0,j.jsx)(D.ZP,{block:a.block,style:a.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:a.disabled,icon:!a.children&&U?void 0:a.icon,loading:U,onClick:R,danger:a.danger,type:a.type,children:a.children})})}},34879:function(ee,A,n){n.d(A,{Z:function(){return D}});var O=n(97961),h=n(91604),E=n(1677),u=n(85893);function D(l){return l.showDragger?(0,u.jsx)(h.Z,{max:l.max?l.max:1,title:l.title,label:l.label,required:l.required,rules:[{required:l.required}],fieldProps:{multiple:!!(l.max&&l.max>1),name:"file",accept:l.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(j){return new Promise(function(L){var a;(0,O._2)({path:(a=j.response.data.path)!==null&&a!==void 0?a:""}).then(function(p){L(!0)})})}},name:l.name}):(0,u.jsx)(E.Z,{max:l.max?l.max:1,title:l.title,label:l.label,required:l.required,rules:[{required:l.required}],fieldProps:{multiple:!!(l.max&&l.max>1),name:"file",accept:l.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(j){return new Promise(function(L){var a;(0,O._2)({path:(a=j.response.data.path)!==null&&a!==void 0?a:""}).then(function(p){L(!0)})})}},name:l.name})}},92754:function(ee,A,n){var O=n(5574),h=n.n(O),E=n(67294),u=n(82346),D=n(38703),l=n(85893),M=(0,E.forwardRef)(function(j,L){var a=(0,E.useState)(""),p=h()(a,2),P=p[0],U=p[1];(0,E.useImperativeHandle)(L,function(){return{setFinish:function(){T({finish:{downloading:100,extracting:100}})},setStart:function(ne){ne&&U(ne),T({start:{downloading:0,extracting:0}})},close:function(){y.progress.close("image:pull:"+P),T({start:{downloading:0,extracting:0}})}}});var y=(0,u.useModel)("subscriber");y.addDataHandler("image:pull:"+P,function(R){T(R.data)});var Z=(0,E.useState)(),K=h()(Z,2),S=K[0],T=K[1];return(0,E.useEffect)(function(){return T({start:{downloading:0,extracting:0}}),function(){y.progress.close("image:pull:"+P)}},[]),(0,l.jsx)(l.Fragment,{children:S&&Object.keys(S).map(function(R){return(0,l.jsx)(D.Z,{percent:S[R].downloading,success:{percent:S[R].extracting}},R)})})});A.Z=M},78451:function(ee,A,n){n.d(A,{Z:function(){return E}});var O=n(67294),h=n(85893);function E(u){return(0,h.jsx)("span",{style:{width:u.width?u.width:"auto",wordBreak:"break-word"},children:u.content})}},24963:function(ee,A,n){var O=n(67294),h=(0,O.createContext)({});A.Z=h},65913:function(ee,A,n){var O=n(5574),h=n.n(O),E=n(74330),u=n(67294),D=n(85893),l=(0,u.forwardRef)(function(M,j){(0,u.useImperativeHandle)(j,function(){return{show:function(){P(!0)},destroy:function(){P(!1)}}});var L=(0,u.useState)(!1),a=h()(L,2),p=a[0],P=a[1];return(0,D.jsx)(E.Z,{spinning:p,size:"default",children:M.children})});A.Z=l},23537:function(ee,A,n){n.r(A),n.d(A,{default:function(){return Ne}});var O=n(19632),h=n.n(O),E=n(15009),u=n.n(E),D=n(99289),l=n.n(D),M=n(5574),j=n.n(M),L=n(90078),a=n(78099),p=n(97269),P=n(62370),U=n(37476),y=n(5966),Z=n(28036),K=n(96074),S=n(25593),T=n(42075),R=n(66309),ne=n(83062),te=n(84567),v=n(50136),i=n(67294),$=n(82346),c=n(18148),oe=n(5251),ie=n(80821),je=n(43425),me=n(64789),Ce=n(58638),he=n(1912),pe=n(28307),ve=n(96042),ge=n(67255),_e=n(24963),ae=n(3393),Fe=n(93162),De=n(80271),xe=n(65913),Re=n(40666),Ae=n(77171),Pe=n(48689),ce=n(45742),le=n(38345),Te=n(91708),Ie=n(85265),W=n(26412),Oe=n(60940),de=n(184),ye=n(65233),Ee=n(2487),Ze=n(4393),e=n(85893),Se=(0,i.forwardRef)(function(z,re){(0,i.useImperativeHandle)(re,function(){return{show:function(_){return l()(u()().mark(function s(){var o,F;return u()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return m(!0),(o=r.current)===null||o===void 0||o.show(),d.prev=2,d.next=5,(0,ae.cd)({imageName:_}).finally(function(){var I;(I=r.current)===null||I===void 0||I.destroy()});case 5:F=d.sent,t(F.data.list),d.next=12;break;case 9:d.prev=9,d.t0=d.catch(2),m(!1);case 12:case"end":return d.stop()}},s,null,[[2,9]])}))()}}});var J=(0,$.useAccess)(),H=(0,i.useState)(),Q=j()(H,2),f=Q[0],t=Q[1],G=(0,i.useState)(""),X=j()(G,2),b=X[0],w=X[1],V=(0,i.useState)(!1),q=j()(V,2),C=q[0],m=q[1],r=(0,i.useRef)();return(0,e.jsx)(de.a,{open:C,onOpenChange:function(_){m(_),!_&&t(void 0)},title:"\u8FDC\u7A0B Tag \u5217\u8868",isKeyPressSubmit:!0,submitter:!1,drawerProps:{extra:(0,e.jsx)(p.A,{isKeyPressSubmit:!0,onFinish:function(_){w(_.search)},submitter:!1,children:(0,e.jsx)(T.Z.Compact,{children:(0,e.jsx)(P.Z,{style:{margin:0},name:"search",children:(0,e.jsx)(ye.Z,{allowClear:!0,addonBefore:"\u641C\u7D22Tag",placeholder:"\u6309\u56DE\u8F66\u67E5\u8BE2",onClear:function(){w("")}})})})})},children:(0,e.jsx)(xe.Z,{ref:r,children:(0,e.jsx)(Ee.Z,{rowKey:function(_){return"".concat(_)},pagination:{pageSize:50},grid:{gutter:10,column:2},dataSource:f&&f.filter(function(g){return!b||g.toLocaleLowerCase().indexOf(b.toLocaleLowerCase())!==-1}),loading:!f||(f==null?void 0:f.length)<=0,renderItem:function(_,s){return(0,e.jsx)(Ee.Z.Item,{children:(0,e.jsx)(Ze.Z,{style:{height:"80px"},children:(0,e.jsx)(S.Z.Text,{copyable:!0,children:_})})},s)}})})},"form")}),be=Se;function Be(z){var re=(0,i.useRef)(),J=(0,i.useState)(!1),H=j()(J,2),Q=H[0],f=H[1];return(0,e.jsxs)(de.a,{open:Q,title:"\u589E\u52A0\u955C\u50CF Tag",onOpenChange:function(G){f(G)},formRef:re,onFinish:function(){var t=l()(u()().mark(function G(X){var b,w,V;return u()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,ae._U)({md5:(b=z.imageInfo.info.Id)!==null&&b!==void 0?b:"",tag:(X.imageRespo?X.imageRespo.serverAddress+"/":"")+X.imageTag});case 2:V=C.sent,f(!1),(w=re.current)===null||w===void 0||w.resetFields(),z.onFinish&&z.onFinish();case 6:case"end":return C.stop()}},G)}));return function(G){return t.apply(this,arguments)}}(),trigger:(0,e.jsx)(ne.Z,{title:"\u589E\u52A0\u955C\u50CFTag",children:(0,e.jsx)(Z.ZP,{type:"link",icon:(0,e.jsx)(me.Z,{})})}),children:[(0,e.jsx)(P.Z,{label:"\u955C\u50CF\u4ED3\u5E93",name:"imageRespo",tooltip:(0,e.jsxs)(e.Fragment,{children:["\u63A8\u9001\u524D\u8BF7\u4FDD\u8BC1\u4ED3\u5E93\u4E2D\u6709\u6307\u5B9A\u7684\u547D\u540D\u7A7A\u95F4, \u5982\u6CA1\u6709\u8BF7\u5148 ",(0,e.jsx)("a",{href:"",target:"_blank",children:"\u6DFB\u52A0\u4ED3\u5E93"})]}),children:(0,e.jsx)(ve.Z,{})}),(0,e.jsx)(y.Z,{fieldProps:{min:2,max:255},rules:[{required:!0}],required:!0,placeholder:"\u53EA\u80FD\u4F7F\u7528\u5C0F\u5199\u82F1\u6587\u5B57\u7B26\u3001\u6570\u5B57\u3001_\u3001-\u3001",label:"\u955C\u50CF\u540D\u79F0",name:"imageTag",tooltip:"\u4F8B\u5982: name:tag\u3001namespace/name:tag\u3001registry/namespace/name:tag"})]})}var ue=n(1699),Me=n(78451),Le=(0,i.forwardRef)(function(z,re){var J;(0,i.useImperativeHandle)(re,function(){return{show:function(I){return l()(u()().mark(function x(){return u()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return V(!0),N.next=3,B(I);case 3:case"end":return N.stop()}},x)}))()}}});var H=(0,i.useRef)(),Q=(0,i.useState)(),f=j()(Q,2),t=f[0],G=f[1],X=(0,i.useState)(!1),b=j()(X,2),w=b[0],V=b[1],q=(0,i.useContext)(_e.Z),C=q.message,m=(0,i.useState)(0),r=j()(m,2),g=r[0],_=r[1],s=(0,$.useNavigate)(),o=(0,$.useAccess)(),F=(0,i.useRef)(),B=function(){var d=l()(u()().mark(function I(x){var Y,N;return u()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return(Y=H.current)===null||Y===void 0||Y.show(),k.next=3,(0,ae.YU)({md5:x,showLayer:!0}).finally(function(){var fe;(fe=H.current)===null||fe===void 0||fe.destroy()});case 3:N=k.sent,G(N.data);case 5:case"end":return k.stop()}},I)}));return function(x){return d.apply(this,arguments)}}();return(0,i.useEffect)(function(){t&&B(t==null?void 0:t.info.Id)},[g]),(0,e.jsx)(Ie.Z,{title:"\u5FEB\u6377\u67E5\u770B\u955C\u50CF",open:w,onClose:function(){V(!1),z.onClose&&z.onClose()},width:800,extra:(0,e.jsxs)(T.Z,{split:(0,e.jsx)(K.Z,{type:"vertical"}),children:[(t==null?void 0:t.info)&&!o.canSeeEnableCe&&(0,e.jsx)(De.Z,{imageId:t.info.Id}),(t==null?void 0:t.info)&&(0,e.jsx)(Be,{imageInfo:t,onFinish:function(){B(t.info.Id)}})]}),children:(0,e.jsxs)(xe.Z,{ref:H,children:[!o.canSeeEnableCe&&(0,e.jsx)(be,{ref:F}),(0,e.jsxs)(le.Z,{direction:"column",ghost:!0,gutter:[0,10],children:[(0,e.jsx)(le.Z,{title:(0,e.jsx)(Re.Z,{}),subTitle:"Tag \u5217\u8868",ghost:!0,children:(0,e.jsx)(Te.Rs,{grid:{gutter:40,column:2},headerTitle:!1,metas:{content:{render:function(I,x,Y){return(0,e.jsx)(R.Z,{color:"blue",children:(0,e.jsx)(S.Z.Text,{copyable:!0,children:x})},Y)}},title:{render:function(I,x,Y){return(0,e.jsxs)(T.Z,{children:[(0,e.jsxs)(ie.Z,{action:function(){return(0,ae.Gb)({tag:x,type:"push"})},children:[(0,e.jsx)(he.Z,{})," Push"]}),(0,e.jsxs)(ie.Z,{action:function(){return(0,ae.Gb)({tag:x,type:"pull"})},children:[(0,e.jsx)(Ae.Z,{})," Pull"]}),!o.canSeeEnableCe&&(0,e.jsx)(Z.ZP,{onClick:function(){var se;(se=F.current)===null||se===void 0||se.show(x)},children:"\u8FDC\u7A0BTag"}),(0,e.jsx)(ue.u,{access:"canSeeImageListManage",children:(0,e.jsx)(ie.Z,{action:function(){return(0,ae.Pn)({tag:x})},danger:!0,onSuccess:function(se){return _(g+1),!0},confirm:"notification.confirm.title",children:(0,e.jsx)(Pe.Z,{})})})]},Y)}}},dataSource:t==null?void 0:t.info.RepoTags})}),t&&(0,e.jsx)(le.Z,{title:(0,e.jsx)(ce.Z,{}),subTitle:"\u955C\u50CF\u8BE6\u60C5",ghost:!0,children:(0,e.jsxs)(W.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,e.jsx)(W.Z.Item,{label:"ID",children:(0,e.jsx)(S.Z.Text,{editable:{tooltip:"\u4FEE\u6539\u955C\u50CF\u5907\u6CE8\u540D\u79F0",onChange:function(){var d=l()(u()().mark(function x(Y){var N;return u()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,c.Fj)({tag:t==null?void 0:t.info.RepoTags[0],title:Y});case 2:N=k.sent,B(t.info.Id),C.success("\u4FEE\u6539\u955C\u50CF\u540D\u79F0\u6210\u529F");case 5:case"end":return k.stop()}},x)}));function I(x){return d.apply(this,arguments)}return I}()},children:t==null?void 0:t.info.Id})}),(0,e.jsx)(W.Z.Item,{label:"Parent",children:t==null?void 0:t.info.Parent}),(0,e.jsx)(W.Z.Item,{label:"Size",children:(0,oe.FI)((J=t==null?void 0:t.info.Size)!==null&&J!==void 0?J:0)}),(0,e.jsx)(W.Z.Item,{label:"Created",children:t==null?void 0:t.info.Created}),(0,e.jsxs)(W.Z.Item,{label:"Build",children:["Docker ",t==null?void 0:t.info.DockerVersion," ",t==null?void 0:t.info.Os," ",t==null?void 0:t.info.Architecture]}),(0,e.jsx)(W.Z.Item,{label:"Labels",children:(0,e.jsx)(W.Z,{column:1,bordered:!0,children:(t==null?void 0:t.info.Config.Labels)&&Object.keys(t==null?void 0:t.info.Config.Labels).map(function(d){return(0,e.jsx)(W.Z.Item,{label:d,children:t==null?void 0:t.info.Config.Labels[d]},d)})})})]})}),(0,e.jsx)(le.Z,{title:(0,e.jsx)(ce.Z,{}),subTitle:"Dockerfile \u8BE6\u60C5",ghost:!0,children:(0,e.jsxs)(W.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,e.jsx)(W.Z.Item,{label:"CMD",children:t==null?void 0:t.info.Config.Cmd}),(0,e.jsx)(W.Z.Item,{label:"ENTRYPOINT",children:t==null?void 0:t.info.Config.Entrypoint}),(0,e.jsx)(W.Z.Item,{label:"EXPOSE",children:(t==null?void 0:t.info.Config.ExposedPorts)&&Object.keys(t==null?void 0:t.info.Config.ExposedPorts).map(function(d){return(0,e.jsx)(R.Z,{color:"gray",children:d},d)})}),(0,e.jsx)(W.Z.Item,{label:"VOLUME",children:(t==null?void 0:t.info.Config.Volumes)&&Object.keys(t==null?void 0:t.info.Config.Volumes).map(function(d){return(0,e.jsx)(R.Z,{color:"gray",children:d},d)})}),(0,e.jsx)(W.Z.Item,{label:"Env",children:(0,e.jsx)(W.Z,{column:1,bordered:!0,children:(t==null?void 0:t.info.Config.Env)&&(t==null?void 0:t.info.Config.Env.map(function(d,I){var x=d.split("=");return(0,e.jsx)(W.Z.Item,{label:x[0],children:x[1]},I)}))})})]})}),(t==null?void 0:t.layer)&&(0,e.jsx)(le.Z,{title:(0,e.jsx)(ce.Z,{}),subTitle:"Layers",ghost:!0,children:(0,e.jsx)(Oe.Z,{rowKey:"CreatedBy",dataSource:t.layer.reverse(),columns:[{title:"\u5927\u5C0F",key:"size",render:function(I,x,Y){return(0,oe.FI)(x.Size)}},{title:"Layer",dataIndex:"CreatedBy",key:"CreatedBy",render:function(I,x,Y){return(0,e.jsx)(Me.Z,{content:x.CreatedBy})}}]})})]})]})})}),Ue=Le,We=n(34879),Ke=n(44349),$e=n(97961),we=(0,i.forwardRef)(function(z,re){(0,i.useImperativeHandle)(re,function(){return{}});var J=(0,i.useRef)();return(0,e.jsxs)(de.a,{title:"\u5BFC\u5165\u955C\u50CF",trigger:(0,e.jsx)(Z.ZP,{children:"\u5BFC\u5165\u955C\u50CF"},"create"),formRef:J,onFinish:function(){var H=l()(u()().mark(function Q(f){var t,G;return u()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,$e.GH)({localUrl:f.imageTarUpload?f.imageTarUpload.map(function(w){return w.response.data.path}):[],remoteUrl:f.remoteUrl?f.remoteUrl.map(function(w){return w.url}):[]});case 2:return G=b.sent,!((t=J.current)===null||t===void 0)&&t.resetFields&&J.current.resetFields(),z.onFinish&&z.onFinish(),b.abrupt("return",!0);case 6:case"end":return b.stop()}},Q)}));return function(Q){return H.apply(this,arguments)}}(),children:[(0,e.jsx)(We.Z,{label:"\u672C\u5730\u955C\u50CF",showDragger:!0,max:10,title:"\u5BFC\u5165\u955C\u50CF\u5305, \u6700\u591A\u4E0A\u4F20\u652F\u6301 10 \u4E2A\u3002\uFF08\u53EA\u5141\u8BB8\u4E0A\u4F20 .tar \u6587\u4EF6\uFF0C\u901A\u8FC7\u5BFC\u51FA\u955C\u50CF\u751F\u6210\uFF09",name:"imageTarUpload",accept:".tar"}),(0,e.jsx)(Ke.Z,{label:"\u8FDC\u7A0B\u5730\u5740",name:"remoteUrl",showAddButton:!0,hideCopyButton:!0,min:1,items:[{width:"lg",name:"url",placeholder:"\u6307\u5B9A\u8FDC\u7A0B\u5730\u5740 http \u6216\u662F https \u5F00\u5934"}]})]})}),ze=we;function Ne(){var z=(0,i.useContext)(_e.Z),re=z.message,J=z.notice,H=z.lang,Q=(0,$.useAccess)(),f=(0,i.useRef)(),t=(0,i.useState)({force:!1}),G=j()(t,2),X=G[0],b=G[1],w=(0,i.useRef)(),V=(0,i.useRef)(),q=(0,i.useRef)();return(0,e.jsxs)(L._z,{header:{extra:[(0,e.jsx)(ue.u,{access:"canSeeImageListManageCreate",children:(0,e.jsx)($.Link,{to:"/image/create",children:(0,e.jsx)(Z.ZP,{type:"primary",children:"\u521B\u5EFA\u955C\u50CF"},"create")},"create")},"create"),(0,e.jsxs)(ue.u,{access:"canSeeImageListManageCreate",children:[(0,e.jsx)(K.Z,{type:"vertical"}),(0,e.jsx)(ze,{onFinish:function(){var m;!((m=f.current)===null||m===void 0)&&m.reloadAndRest&&f.current.reloadAndRest()}})]},"import"),(0,e.jsx)(ue.u,{access:"canSeeImageListPull",children:(0,e.jsx)(pe.Z,{onFinish:function(){var m,r;!((m=f.current)===null||m===void 0)&&m.reloadAndRest&&((r=f.current)===null||r===void 0||r.reloadAndRest())}},"remote")},"remote")]},children:[(0,e.jsx)(Ue,{ref:V,onClose:function(){var m,r;!((m=f.current)===null||m===void 0)&&m.reloadAndRest&&((r=f.current)===null||r===void 0||r.reloadAndRest())}}),(0,e.jsx)(a.Z,{scroll:{x:"max-content"},rowKey:"Id",columns:[{title:"\u540D\u79F0",dataIndex:"title",render:function(m,r,g,_,s){var o=r.Id.substring(7,19);return r.Title&&(o=r.Title),(0,e.jsx)(S.Z.Link,{onClick:function(){var B;!((B=V.current)===null||B===void 0)&&B.show&&V.current.show(r.Id)},children:o},"title-".concat(g))}},{title:"Tag",dataIndex:"tag",render:function(m,r,g,_){return(0,e.jsx)(T.Z,{direction:"vertical",style:{textAlign:"left"},children:r.RepoTags.map(function(s,o){return(0,e.jsxs)(T.Z,{children:[(0,e.jsx)(R.Z,{color:"#2db7f5",children:(0,e.jsx)(S.Z.Text,{copyable:!0,title:s,style:{color:"#ffffff"},children:s},"tag-"+o)},"tag-".concat(o)),r.Containers>0&&(0,e.jsx)(R.Z,{color:"cyan",children:"\u4F7F\u7528\u4E2D"},"use-".concat(o))]},o)})},r.Id)}},{title:"Digest",tooltip:"\u8BE5\u955C\u50CF\u5728\u4ED3\u5E93\u4E2D\u7684\u6807\u8BC6\uFF0C\u4E0D\u5305\u542B\u6B64\u503C\u7684\u955C\u50CF\u65E0\u6CD5\u68C0\u6D4B\u66F4\u65B0",render:function(m,r,g,_,s){return r.RepoDigests.map(function(o){return o.substring(o.indexOf("@")+8).substring(0,12)})}},{title:"\u67B6\u6784",width:80,search:!1,render:function(m,r,g,_,s){if(r.Labels&&r.Labels["com.dpanel.image.arch"])return(0,e.jsx)(R.Z,{children:r.Labels["com.dpanel.image.arch"]},"arch"+r.Id)}},{title:"\u5927\u5C0F",dataIndex:"size",ellipsis:!0,width:"120px",search:!1,sorter:function(m,r){return parseFloat(m.Size)-parseFloat(r.Size)},render:function(m,r,g,_){return(0,e.jsx)("div",{children:(0,oe.FI)(parseFloat(r.Size))},r.Id)}},{title:"\u521B\u5EFA\u65E5\u671F",dataIndex:"Created",ellipsis:!0,search:!1,width:"180px",render:function(m,r,g,_){return(0,e.jsx)("div",{children:(0,oe.ZM)(r.Created*1e3)},r.Id)},sorter:function(m,r){return m.Created-r.Created}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:100,fixed:"right",hidden:!Q.canSeeImageListManage,render:function(m,r,g,_){return(0,e.jsxs)(T.Z,{split:(0,e.jsx)(K.Z,{type:"vertical"}),children:[(0,e.jsx)(S.Z.Link,{onClick:function(){var o;!((o=V.current)===null||o===void 0)&&o.show&&V.current.show(r.Id)},children:(0,e.jsx)(ne.Z,{title:"\u7BA1\u7406",children:(0,e.jsx)(je.Z,{})})},"edit"),(0,e.jsx)($.Link,{to:"/app/create/image?imageId="+r.RepoTags[0],children:(0,e.jsx)(ne.Z,{title:"\u521B\u5EFA\u5BB9\u5668",children:(0,e.jsx)(me.Z,{})})},"create")]})}}],request:function(){var C=l()(u()().mark(function m(r,g,_){var s;return u()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,c.KG)({tag:r.tag,title:r.title,use:r.use?r.use=="1"?1:2:0});case 2:if(s=F.sent,!(!s||!s.data||!s.data.list)){F.next=5;break}return F.abrupt("return",{data:[],success:!0,total:0});case 5:return s.data.list.map(function(B){var d="";B.RepoTags.map(function(I){s.data.title[I]&&(d=s.data.title[I])}),B.Title=d}),F.abrupt("return",{data:s.data.list,success:!0,total:s.data.list.length});case 7:case"end":return F.stop()}},m)}));return function(m,r,g){return C.apply(this,arguments)}}(),pagination:(0,ge.O)(),search:{collapsed:!1},rowSelection:Q.canSeeImageListManage?{defaultSelectedRowKeys:[],alwaysShowAlert:!0}:void 0,actionRef:f,tableAlertOptionRender:function(m){var r=m.selectedRowKeys,g=m.selectedRows;return(0,e.jsxs)(T.Z,{size:16,children:[(0,e.jsx)(ie.Z,{icon:(0,e.jsx)(Ce.Z,{}),confirm:(0,e.jsxs)(T.Z,{style:{width:500,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,e.jsx)(S.Z.Text,{children:(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:"\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5BFC\u51FA\u955C\u50CF\u540E\u4F1A\u81EA\u52A8\u901A\u8FC7\u6D4F\u89C8\u5668\u4E0B\u8F7D\u81F3\u672C\u5730"}),(0,e.jsx)("li",{children:"\u5F53\u914D\u7F6E\u3010\u5BFC\u51FA\u5230\u9762\u677F\u5BB9\u5668\u76EE\u5F55\u3011\u540E\u5C06\u4FDD\u5B58\u81F3 /dpanel/storage \u76EE\u5F55"}),(0,e.jsx)("li",{children:"\u6D4F\u89C8\u5668\u4E0B\u8F7D\u5931\u8D25\u65F6\uFF0C\u8BF7\u68C0\u67E5\u662F\u5426\u5B89\u88C5\u4E86\u76F8\u5173\u4E0B\u8F7D\u63D2\u4EF6"})]})}),(0,e.jsx)(p.A,{layout:"horizontal",formRef:q,submitter:!1,children:(0,e.jsx)(P.Z,{valuePropName:"checked",name:"enableExportToPath",children:(0,e.jsx)(te.Z,{children:"\u5BFC\u51FA\u5230\u9762\u677F\u5BB9\u5668\u76EE\u5F55"})},"enableExportToPath")})]}),confirmOnOpenChange:function(){var s;!((s=q.current)===null||s===void 0)&&s.resetFields&&q.current.resetFields()},action:function(){var s,o=[];return g.map(function(F){o.push.apply(o,h()(F.RepoTags))}),(0,ae.Rb)({md5:o,enableExportToPath:(s=q.current)===null||s===void 0?void 0:s.getFieldValue("enableExportToPath")})},onSuccess:function(s){var o,F=g.map(function(d){return d.RepoTags[0]});if(s.size>29){var B=new Blob([s],{type:"application/tar"});(0,Fe.saveAs)(B,F.join("-")+".tar")}!((o=f.current)===null||o===void 0)&&o.reset&&f.current.reset()},children:"\u5BFC\u51FA"}),(0,e.jsxs)(U.Y,{formRef:w,title:"\u6279\u91CF\u63A8\u9001\u955C\u50CF",trigger:(0,e.jsx)(Z.ZP,{icon:(0,e.jsx)(he.Z,{}),children:"\u540C\u6B65\u81F3\u5176\u5B83\u4ED3\u5E93"}),onFinish:function(){var _=l()(u()().mark(function s(o){var F,B,d;return u()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,c.KX)({md5:r,registryId:o.registryId,newNamespace:o.newNamespace});case 2:return d=x.sent,(F=f.current)===null||F===void 0||F.reload(),!((B=f.current)===null||B===void 0)&&B.clearSelected&&f.current.clearSelected(),x.abrupt("return",!0);case 6:case"end":return x.stop()}},s)}));return function(s){return _.apply(this,arguments)}}(),children:[(0,e.jsx)(P.Z,{name:"registryId",hidden:!0}),(0,e.jsx)(P.Z,{label:"\u955C\u50CF\u4ED3\u5E93",name:"imageRespo",tooltip:(0,e.jsxs)(e.Fragment,{children:["\u63A8\u9001\u524D\u8BF7\u4FDD\u8BC1\u4ED3\u5E93\u4E2D\u6709\u6307\u5B9A\u7684\u547D\u540D\u7A7A\u95F4, \u5982\u6CA1\u6709\u8BF7\u5148 ",(0,e.jsx)("a",{href:"",target:"_blank",children:"\u6DFB\u52A0\u4ED3\u5E93"})]}),children:(0,e.jsx)(ve.Z,{multiple:!0,top:!0,onChangeList:function(s){var o;(o=w.current)===null||o===void 0||o.setFieldValue("registryId",s.map(function(F){return F.id}))}})}),(0,e.jsx)(y.Z,{tooltip:"\u53EF\u4EE5\u901A\u8FC7\u6B64\u9879\u91CD\u65B0\u5B9A\u4E49\u547D\u540D\u7A7A\u95F4\uFF0Cdocker hub \u4E0D\u53D7\u8BE5\u914D\u7F6E\u7684\u5F71\u54CD\u3002 \u914D\u7F6E\u6B64\u9879\u540E mysql:latest \u4F1A\u63A8\u9001\u81F3 {\u547D\u540D\u7A7A\u95F4}/mysql:latest\uFF0C dpanel/dpanel:latest \u4F1A\u63A8\u9001\u81F3 {\u547D\u540D\u7A7A\u95F4}/dpanel:latest",label:"\u91CD\u5199\u4ED3\u5E93\u547D\u540D\u7A7A\u95F4",name:"newNamespace"})]}),(0,e.jsx)(ue.u,{access:"canSeeImageListManageDelete",children:(0,e.jsx)(ie.Z,{danger:!0,type:"primary",action:function(){return(0,c.ao)({md5:r,force:X.force})},onSuccess:function(){var s,o;return!((s=f.current)===null||s===void 0)&&s.reloadAndRest&&((o=f.current)===null||o===void 0||o.reloadAndRest()),!0},onError:function(){var s,o;return!((s=f.current)===null||s===void 0)&&s.reset&&((o=f.current)===null||o===void 0||o.reset()),!0},confirm:(0,e.jsxs)(T.Z,{style:{width:280},direction:"vertical",children:[(0,e.jsx)(S.Z.Text,{children:H("notification.confirm.title")}),(0,e.jsx)(te.Z,{name:"deleteVolume",onChange:function(s){return b({force:s.target.checked})},children:"\u5F3A\u5236\u5220\u9664\uFF1F"})]}),children:"\u6279\u91CF\u5220\u9664"})})]})},tableExtraRender:function(){return(0,e.jsx)(ue.u,{access:"canSeeImageListManageCreate",children:(0,e.jsx)(v.Z,{mode:"horizontal",selectedKeys:["all"],items:[{label:(0,e.jsx)($.Link,{to:"/image/list",replace:!0,children:"\u5168\u90E8\u955C\u50CF"}),key:"all"},{label:(0,e.jsx)($.Link,{to:"/image/list/recycle",replace:!0,children:"\u6784\u5EFA\u4EFB\u52A1"}),key:"build"}]})})},toolBarRender:function(){return[(0,e.jsx)(ue.u,{access:"canSeeImageListManageDelete",children:(0,e.jsx)(ie.Z,{action:function(){return(0,c.c7)()},onSuccess:function(){var r,g;return!((r=f.current)===null||r===void 0)&&r.reloadAndRest&&((g=f.current)===null||g===void 0||g.reloadAndRest()),!0},onError:function(){var r,g;return!((r=f.current)===null||r===void 0)&&r.reset&&((g=f.current)===null||g===void 0||g.reset()),!0},confirm:"notification.confirm.title",children:"\u6E05\u7406\u672A\u4F7F\u7528\u955C\u50CF"})},"prune")]},columnsState:(0,ge.j)("image-list")})]})}},3393:function(ee,A,n){n.d(A,{Gb:function(){return j},Pn:function(){return P},Rb:function(){return y},YU:function(){return l},ZQ:function(){return T},_U:function(){return a},cD:function(){return ne},cd:function(){return K}});var O=n(15009),h=n.n(O),E=n(99289),u=n.n(E),D=n(82346);function l(v){return M.apply(this,arguments)}function M(){return M=u()(h()().mark(function v(i){return h()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,D.request)("/api/app/image/get-detail",{method:"POST",data:i}));case 1:case"end":return c.stop()}},v)})),M.apply(this,arguments)}function j(v){return L.apply(this,arguments)}function L(){return L=u()(h()().mark(function v(i){return h()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,D.request)("/api/app/image/tag-remote",{method:"POST",data:i}));case 1:case"end":return c.stop()}},v)})),L.apply(this,arguments)}function a(v){return p.apply(this,arguments)}function p(){return p=u()(h()().mark(function v(i){return h()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,D.request)("/api/app/image/tag-add",{method:"POST",data:i}));case 1:case"end":return c.stop()}},v)})),p.apply(this,arguments)}function P(v){return U.apply(this,arguments)}function U(){return U=u()(h()().mark(function v(i){return h()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,D.request)("/api/app/image/tag-delete",{method:"POST",data:i}));case 1:case"end":return c.stop()}},v)})),U.apply(this,arguments)}function y(v){return Z.apply(this,arguments)}function Z(){return Z=u()(h()().mark(function v(i){return h()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,D.request)("/api/app/image/export",{method:"POST",data:i,responseType:"blob"}));case 1:case"end":return c.stop()}},v)})),Z.apply(this,arguments)}function K(v){return S.apply(this,arguments)}function S(){return S=u()(h()().mark(function v(i){return h()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,D.request)("/api/pro/image/get-remote-tag",{method:"POST",data:i}));case 1:case"end":return c.stop()}},v)})),S.apply(this,arguments)}function T(v){return R.apply(this,arguments)}function R(){return R=u()(h()().mark(function v(i){return h()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,D.request)("/api/app/image/check-upgrade",{method:"POST",data:i}));case 1:case"end":return c.stop()}},v)})),R.apply(this,arguments)}function ne(v){return te.apply(this,arguments)}function te(){return te=u()(h()().mark(function v(i){return h()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,D.request)("/api/app/image/get-rootfs",{method:"POST",data:i}));case 1:case"end":return c.stop()}},v)})),te.apply(this,arguments)}},67255:function(ee,A,n){n.d(A,{O:function(){return O},j:function(){return h}});function O(){var E=localStorage.getItem("dpanel-pagesize");return E=="all"?!1:{showSizeChanger:!0,defaultPageSize:parseInt(E!=null?E:"20")}}function h(E){var u="dpanel-table-column-".concat(E),D={};if(localStorage.getItem(u)){var l;D=JSON.parse((l=localStorage.getItem(u))!==null&&l!==void 0?l:"{}")}return{defaultValue:D,onChange:function(j){localStorage.setItem("dpanel-table-column-".concat(E),JSON.stringify(j))}}}}}]);
