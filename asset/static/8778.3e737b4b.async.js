"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8778],{91058:function(L,O,e){var f=e(5574),_=e.n(f),g=e(89035),P=e(38345),v=e(17186),M=e(24739),h=e(5966),A=e(42075),a=e(14726),j=e(85576),c=e(67294),E=e(95089),T=e(89063),r=e(85893),I="docker-image",D=(0,c.forwardRef)(function(l,u){var n=(0,c.useState)(I),o=_()(n,2),t=o[0],i=o[1],s=(0,c.useRef)(),d=(0,c.useState)(""),p=_()(d,2),B=p[0],F=p[1],K=function(){t!="code"?i("code"):i(I)};(0,c.useImperativeHandle)(u,function(){return{addEnvItem:function(m,x){var W,U=(W=s.current)===null||W===void 0?void 0:W.getList(),b=!1;if(U==null||U.map(function(w){if(w.name==m){b=!0;return}}),!b){var y;(y=s.current)===null||y===void 0||y.add({name:m,value:x})}},clear:function(){var m;(m=s.current)===null||m===void 0||(m=m.getList())===null||m===void 0||m.map(function(x,W){var U;(U=s.current)===null||U===void 0||U.remove(W)})}}});function R(C){try{for(var m,x,W=(m=(x=s.current)===null||x===void 0||(x=x.getList())===null||x===void 0?void 0:x.length)!==null&&m!==void 0?m:0,U=W;U>=0;U--){var b;(b=s.current)===null||b===void 0||b.remove(U)}var y=C.split(`
`),w=0;y.map(function(S){var V,H=S.split("=");H.length<2||((V=s.current)===null||V===void 0||V.add({name:H[0],value:H.slice(1).join("=")},w),w++)})}catch(S){console.log(S)}}function Z(){if(s){var C,m=(C=s.current)===null||C===void 0?void 0:C.getList();if(m){var x=[];return m.map(function(W){x.push("".concat(W.name,"=").concat(W.value))}),x.join(`
`)}else return""}else return""}return(0,r.jsxs)(P.Z,{title:"\u73AF\u5883\u53D8\u91CF",headerBordered:!0,extra:(0,r.jsxs)(A.Z,{children:[(0,r.jsx)("div",{style:{marginBottom:"-25px"},children:(0,r.jsx)(T.Z,{title:"\u5BFC\u5165 env \u6587\u4EF6",onImport:function(m){return R(m),!0},onLoad:function(m){if(m.indexOf("=")<0)throw new Error("\u5BFC\u5165env\u6587\u4EF6\u9519\u8BEF");return!0}})}),(0,r.jsx)(a.ZP,{icon:(0,r.jsx)(g.Z,{}),type:t=="code"?"primary":"default",onClick:K,children:"\u4EE3\u7801\u6A21\u5F0F"},"code")]}),children:[(0,r.jsx)(v.u,{name:"environment",actionRef:s,creatorButtonProps:l.showAddButton?{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u73AF\u5883\u53D8\u91CF"}:!1,copyIconProps:!1,min:0,children:(0,r.jsxs)(M.UW,{children:[(0,r.jsx)(h.Z,{width:l.showInDrawer?"sm":"md",name:"name",label:"\u53D8\u91CF\u540D",required:!0,rules:[{required:!0}],disabled:l.showDisableName,placeholder:"\u8F93\u5165\u53D8\u91CF\u540D\u79F0"}),(0,r.jsx)(h.Z,{width:"md",name:"value",label:"\u53D8\u91CF\u503C",rules:[{required:!!l.requireValue}],placeholder:"\u8F93\u5165\u53D8\u91CF\u503C\uFF0C\u53EF\u4EE5\u4E3A\u7A7A"})]})}),(0,r.jsx)(j.Z,{width:"800px",open:t=="code",onCancel:function(){return i("docker-image")},onOk:function(){R(B),i("docker-image")},children:(0,r.jsx)(E.ZP,{onChange:function(m){return F(m)},value:Z(),height:"680px",theme:"light"})})]})});O.Z=D},82034:function(L,O,e){var f=e(5574),_=e.n(f),g=e(35880),P=e(38345),v=e(52688),M=e(97462),h=e(17186),A=e(24739),a=e(5966),j=e(42075),c=e(67294),E=e(85893),T=(0,c.forwardRef)(function(r,I){var D=(0,c.useState)(""),l=_()(D,2),u=l[0],n=l[1],o=(0,c.useRef)(),t=(0,c.useContext)(g.Z),i=t.createFormRef;return(0,c.useImperativeHandle)(I,function(){return{setExposePort:function(d){if(d){var p,B,F=(p=(B=o.current)===null||B===void 0?void 0:B.getList())!==null&&p!==void 0?p:[];Object.keys(d).map(function(K){var R=!1;if(F.map(function(C){C.dest==K&&(R=!0)}),!R){var Z;(Z=o.current)===null||Z===void 0||Z.add({host:"",dest:K})}})}},setHostname:function(d){n(d)},addPortItem:function(d,p){var B,F=(B=o.current)===null||B===void 0?void 0:B.getList(),K=!1;if(F==null||F.map(function(Z){if(Z.host==d){K=!0;return}}),!K){var R;(R=o.current)===null||R===void 0||R.add({host:String(d),dest:String(p)})}}}}),(0,E.jsx)(P.Z,{title:"\u7ED1\u5B9A\u7AEF\u53E3",tooltip:"\u8BBF\u95EE\u7AEF\u53E3\u7559\u7A7A\u65F6\u968F\u673A\u751F\u6210\u7AEF\u53E3\uFF0C\u5168\u90E8\u5220\u9664\u5219\u8868\u793A\u4E0D\u66B4\u9732\u7AEF\u53E3",headerBordered:!0,extra:(0,E.jsxs)(j.Z,{children:[r.showBindHost&&(0,E.jsx)(v.Z,{name:"useHostNetwork",fieldProps:{checkedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",unCheckedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",onChange:function(d){if(d){var p;(p=i.current)===null||p===void 0||p.setFieldsValue({bindIpV6:!1,publishAllPorts:!1})}}}}),r.showBindIpV6&&(0,E.jsx)(M.Z,{name:["siteName","useHostNetwork"],children:function(d){var p=d.useHostNetwork;return(0,E.jsx)(v.Z,{name:"publishAllPorts",fieldProps:{checkedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3",unCheckedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3"},disabled:p},"publishAllPorts")}}),r.showBindIpV6&&(0,E.jsx)(M.Z,{name:["siteName","useHostNetwork"],children:function(d){var p=d.useHostNetwork;return(0,E.jsx)(v.Z,{name:"bindIpV6",fieldProps:{checkedChildren:"IpV6",unCheckedChildren:"IpV6"},disabled:p},"bindIpV6")}})]}),children:(0,E.jsx)(M.Z,{name:["useHostNetwork","bindIpV6","publishAllPorts"],children:function(d){var p=d.useHostNetwork,B=d.bindIpV6,F=d.publishAllPorts;if(!p&&!F)return(0,E.jsx)(h.u,{name:"ports",actionRef:o,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BF9\u5916\u90E8\u8BBF\u95EE"},min:0,copyIconProps:!1,children:(0,E.jsxs)(A.UW,{children:[(0,E.jsx)(a.Z,{width:r.showInDrawer?"sm":"md",name:"host",label:"\u5916\u90E8\u8BBF\u95EE\u7AEF\u53E3",tooltip:"\u5BF9\u5916\u8BBF\u95EE\u53EF\u4EE5\u901A\u8FC7\u6DFB\u52A0\u8BBF\u95EE\u7AEF\u53E3\u6216\u662F\u521B\u5EFA\u5B8C\u6210\u540E\u5BF9\u5BB9\u5668\u7ED1\u5B9A\u57DF\u540D",placeholder:"\u7559\u7A7A\u5C06\u4F7F\u7528\u968F\u673A\u7AEF\u53E3\uFF0C\u7ED1\u5B9AIpV6\u5FC5\u586B",required:B,rules:[{required:B}]}),(0,E.jsx)(a.Z,{label:"\u5BB9\u5668\u5185\u7AEF\u53E3",width:r.showInDrawer?"sm":"md",name:"dest",placeholder:"\u6784\u5EFA\u65F6 Expose \u6307\u5B9A\u7684\u7AEF\u53E3",required:!0,rules:[{required:!0}]})]})})}})})});O.Z=T},10523:function(L,O,e){var f=e(38345),_=e(17186),g=e(5966),P=e(86615),v=e(24739),M=e(64317),h=e(42075),A=e(67294),a=e(85893),j=(0,A.forwardRef)(function(c,E){var T=(0,A.useRef)(),r=(0,A.useRef)();return(0,A.useImperativeHandle)(E,function(){return{setDefaultDestPath:function(D){var l,u,n=(l=(u=T.current)===null||u===void 0?void 0:u.getList())!==null&&l!==void 0?l:[];D.length!=0&&D.filter(function(o){return o!=""}).map(function(o){var t=!1;if(n.map(function(s){if(s.dest==o){t=!0;return}}),!t){var i;(i=T.current)===null||i===void 0||i.add({dest:o,permission:"write",inImage:!0,edit:!1})}})},addUserVolumeItem:function(D,l){var u,n=(u=r.current)===null||u===void 0?void 0:u.getList(),o=!1;if(n==null||n.map(function(i){if(i.dest==l){o=!0;return}}),!o){var t;(t=r.current)===null||t===void 0||t.add({host:D,dest:l})}}}}),(0,a.jsxs)(a.Fragment,{children:[c.showDefault&&(0,a.jsx)(f.Z,{title:"\u9ED8\u8BA4\u5B58\u50A8\uFF08Volume\uFF09",subTitle:"\u9ED8\u8BA4\u5B58\u50A8\u4E0E\u7AD9\u70B9\u6807\u8BC6\u4FDD\u6301\u4E00\u81F4",headerBordered:!0,children:(0,a.jsx)(_.u,{name:"volumesDefault",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u76EE\u5F55\u5230\u9ED8\u8BA4\u5B58\u50A8"},actionRef:T,copyIconProps:!1,min:0,children:function(D,l,u){var n=u.getCurrentRowData();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.Z,{width:"lg",name:"dest",label:"\u5BB9\u5668\u5185\u8DEF\u5F84",required:!0,rules:[{required:!0}],disabled:n.inImage}),(0,a.jsx)(P.Z.Group,{hidden:!0,name:"inImage",label:"\u955C\u50CF\u5185\u6302\u8F7D",valueEnum:{1:"\u662F",0:"\u5426"}})]})}})}),(0,a.jsx)(f.Z,{title:"\u81EA\u5B9A\u4E49\u6302\u8F7D\u6216\u662F\u5B58\u50A8\u5377",tooltip:"\u6302\u8F7D\u53EF\u4EE5\u662F\u5BBF\u4E3B\u673A\u7684\u76EE\u5F55\u6216\u662F\u6587\u4EF6\uFF0C\u4E5F\u53EF\u4EE5\u6307\u5B9A\u5B58\u50A8\u5377\u540D\uFF08\u81EA\u52A8\u65B0\u5EFA\uFF09\u3002",headerBordered:!0,direction:"column",children:(0,a.jsx)(_.u,{actionRef:r,name:"volumes",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u6620\u5C04\u76EE\u5F55"},copyIconProps:!1,min:0,children:(0,a.jsxs)(v.UW,{children:[(0,a.jsxs)(h.Z.Compact,{children:[(0,a.jsx)(g.Z,{label:"\u5BBF\u4E3B\u673A\u6587\u4EF6\u3001\u76EE\u5F55\u6216\u5B58\u50A8\u5377",name:"host",width:c.showInDrawer?"sm":"md",required:!0,rules:[{required:!0}]}),(0,a.jsx)(M.Z,{label:" ",valueEnum:{write:"\u8BFB\u5199",readonly:"\u53EA\u8BFB"},initialValue:"write",name:"permission"})]}),(0,a.jsx)(g.Z,{label:"\u5BB9\u5668\u5185\u8DEF\u5F84",name:"dest",width:c.showInDrawer?"sm":"md",required:!0,rules:[{required:!0}],disabled:c.disabledUserVolumeDest})]})})})]})});O.Z=j},92067:function(L,O,e){e.d(O,{Z:function(){return I}});var f=e(15009),_=e.n(f),g=e(99289),P=e.n(g),v=e(60335),M=e(27496),h=e(64789),A=e(10641),a=e(42075),j=e(66309),c=e(60922),E=e(14726),T=e(67294),r=e(85893);function I(D){return(0,r.jsx)(A.Z,{columns:[{title:"\u5BB9\u5668\u540D\u79F0",dataIndex:"names",render:function(u,n,o,t){return(0,r.jsx)(a.Z,{direction:"vertical",style:{textAlign:"left"},children:n==null?void 0:n.Names.map(function(i){return i})},n.Id)}},{title:"\u7AEF\u53E3",dataIndex:"ports",search:!1,render:function(u,n,o,t){return n!=null&&n.Ports?(0,r.jsx)(a.Z,{direction:"vertical",style:{textAlign:"left"},children:n==null?void 0:n.Ports.map(function(i,s){return(0,r.jsx)(j.Z,{color:"#2db7f5",icon:i.PublicPort?(0,r.jsx)(M.Z,{}):"",children:"".concat(i.PublicPort?i.IP+":"+i.PublicPort+"->":"").concat(i.PrivatePort,"/").concat(i.Type)},s)})},n.Id):(0,r.jsx)(r.Fragment,{})}},{title:"\u8FD0\u884C\u5BB9\u5668",search:!1,render:function(u,n,o,t){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(c.Z.Text,{ellipsis:{tooltip:n.Image},children:n.Image},n.Id)})}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",ellipsis:!0,width:100,render:function(u,n,o,t){return[(0,r.jsx)(E.ZP,{type:"link",onClick:function(){(0,v.jV)({md5:n.Id}).then(function(s){return D.onSelect&&D.onSelect(s.data.info),!0})},children:(0,r.jsx)(h.Z,{})},n.Id)]}}],rowKey:"Id",request:function(){var l=P()(_()().mark(function u(n,o,t){return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",new Promise(function(d,p){(0,v.IE)({tag:n.names}).then(function(B){var F={data:B.data.list,success:!0,total:B.data.list.length};d(F)})}));case 1:case"end":return s.stop()}},u)}));return function(u,n,o){return l.apply(this,arguments)}}(),pagination:{pageSize:5}})}},89063:function(L,O,e){e.d(O,{Z:function(){return A}});var f=e(24963),_=e(88484),g=e(31418),P=e(72723),v=e(14726),M=e(67294),h=e(85893);function A(a){var j=(0,M.useContext)(f.Z),c=j.message,E=j.notice,T=j.lang,r=(0,M.useRef)(null),I=g.Z.useApp(),D=function(){r.current&&(r.current.click(),r.current.onchange=function(u){if(!u||!u.target)return"";var n=new FileReader;n.onload=function(t){var i,s,d=(i=t.target)===null||i===void 0?void 0:i.result;if(a.onLoad)try{a.onLoad&&a.onLoad(d)}catch(p){E.error(p);return}typeof a.onImport=="function"&&a.onImport(d),(s=r.current)!==null&&s!==void 0&&s.value&&(r.current.value="")};var o=u.target;if(o.files)try{n.readAsText(o.files[0])}catch(t){E.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(P.Z.Item,{name:"importFile",label:a.label,children:(0,h.jsx)(v.ZP,{icon:(0,h.jsx)(_.Z,{}),block:!0,onClick:D,children:a.title})}),(0,h.jsx)("input",{style:{display:"none"},type:"file",ref:r,name:"importFileInput"})]})}},24963:function(L,O,e){var f=e(67294),_=(0,f.createContext)({});O.Z=_},35880:function(L,O,e){var f=e(67294),_=(0,f.createContext)({});O.Z=_},60335:function(L,O,e){e.d(O,{IE:function(){return A},IW:function(){return M},KK:function(){return r},LJ:function(){return D},eE:function(){return E},jV:function(){return j}});var f=e(15009),_=e.n(f),g=e(99289),P=e.n(g),v=e(54006);function M(u){return h.apply(this,arguments)}function h(){return h=P()(_()().mark(function u(n){return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.request)("/api/app/container/status",{method:"POST",data:n}));case 1:case"end":return t.stop()}},u)})),h.apply(this,arguments)}function A(u){return a.apply(this,arguments)}function a(){return a=P()(_()().mark(function u(n){return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.request)("/api/app/container/get-list",{data:n,method:"POST"}));case 1:case"end":return t.stop()}},u)})),a.apply(this,arguments)}function j(u){return c.apply(this,arguments)}function c(){return c=P()(_()().mark(function u(n){return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.request)("/api/app/container/get-detail",{data:n,method:"POST"}));case 1:case"end":return t.stop()}},u)})),c.apply(this,arguments)}function E(u){return T.apply(this,arguments)}function T(){return T=P()(_()().mark(function u(n){return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.request)("/api/app/container/update",{data:n,method:"POST"}));case 1:case"end":return t.stop()}},u)})),T.apply(this,arguments)}function r(){return I.apply(this,arguments)}function I(){return I=P()(_()().mark(function u(){return _()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,v.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return o.stop()}},u)})),I.apply(this,arguments)}function D(u){return l.apply(this,arguments)}function l(){return l=P()(_()().mark(function u(n){return _()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.request)("/api/app/container/export",{method:"POST",data:n,responseType:"blob"}));case 1:case"end":return t.stop()}},u)})),l.apply(this,arguments)}}}]);
