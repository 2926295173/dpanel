"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3158],{91058:function(A,B,e){var L=e(5574),i=e.n(L),y=e(89035),f=e(38345),d=e(17186),p=e(24739),s=e(5966),T=e(42075),o=e(14726),u=e(85576),c=e(67294),g=e(95089),j=e(89063),t=e(85893),E="docker-image",m=(0,c.forwardRef)(function(n,C){var P=(0,c.useState)(E),W=i()(P,2),D=W[0],r=W[1],_=(0,c.useRef)(),v=(0,c.useState)(""),a=i()(v,2),F=a[0],V=a[1],k=function(){D!="code"?r("code"):r(E)};(0,c.useImperativeHandle)(C,function(){return{addEnvItem:function(l,M){var I,O=(I=_.current)===null||I===void 0?void 0:I.getList(),U=!1;if(O==null||O.map(function(b){if(b.name==l){U=!0;return}}),!U){var R;(R=_.current)===null||R===void 0||R.add({name:l,value:M})}},clear:function(){var l;(l=_.current)===null||l===void 0||(l=l.getList())===null||l===void 0||l.map(function(M,I){var O;(O=_.current)===null||O===void 0||O.remove(I)})}}});function Z(h){try{var l,M;h==""&&(h=w());for(var I=(l=(M=_.current)===null||M===void 0||(M=M.getList())===null||M===void 0?void 0:M.length)!==null&&l!==void 0?l:0,O=I;O>=0;O--){var U;(U=_.current)===null||U===void 0||U.remove(O)}var R=h.split(`
`),b=0;R.map(function(K){var x,S=K.split("=");S.length<2||((x=_.current)===null||x===void 0||x.add({name:S[0],value:S.slice(1).join("=")},b),b++)})}catch(K){console.log(K)}}function w(){if(_&&_.current&&_.current.getList){var h,l=(h=_.current)===null||h===void 0?void 0:h.getList();if(l){var M=[];return l.map(function(I){M.push("".concat(I.name,"=").concat(I.value))}),M.join(`
`)}else return""}else return""}return(0,t.jsxs)(f.Z,{ghost:n.showCardGhost,title:n.label?n.label:null,headerBordered:!0,extra:(n.showCodeMode||n.showImportButton)&&(0,t.jsxs)(T.Z,{children:[n.showImportButton&&(0,t.jsx)("div",{style:{marginBottom:"-25px"},children:(0,t.jsx)(j.Z,{title:"\u5BFC\u5165 env \u6587\u4EF6",onImport:function(l){return Z(l),!0},onLoad:function(l){if(l.indexOf("=")<0)throw new Error("\u5BFC\u5165env\u6587\u4EF6\u9519\u8BEF");return!0}})}),n.showCodeMode?(0,t.jsx)(o.ZP,{icon:(0,t.jsx)(y.Z,{}),type:D=="code"?"primary":"default",onClick:k,children:"\u4EE3\u7801\u6A21\u5F0F"},"code"):""]}),children:[(0,t.jsx)(d.u,{name:n.name?n.name:"environment",actionRef:_,creatorButtonProps:n.showAddButton?{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u73AF\u5883\u53D8\u91CF"}:!1,copyIconProps:!1,min:100,label:n.listLabel,children:function(l,M,I){var O=I.getCurrentRowData();return(0,t.jsxs)(p.UW,{children:[(0,t.jsx)(s.Z,{width:n.showInDrawer?"sm":"md",name:"name",label:"\u53D8\u91CF\u540D",required:!0,rules:[{required:!0}],disabled:n.showDisableName,placeholder:"\u8F93\u5165\u53D8\u91CF\u540D\u79F0"}),(0,t.jsx)(s.Z,{width:n.showInDrawer?"sm":"md",name:"value",label:"\u53D8\u91CF\u503C",rules:[{required:!!n.requireValue}],disabled:n.showDisableValue,placeholder:O&&O.label?O.label:"\u8F93\u5165\u53D8\u91CF\u503C"})]})}}),(0,t.jsx)(u.Z,{width:"800px",open:D=="code",onCancel:function(){return r("docker-image")},onOk:function(){Z(F),r("docker-image")},children:(0,t.jsx)(g.ZP,{onChange:function(l){return V(l)},value:w(),height:"680px",theme:"light"})})]})});B.Z=m},80821:function(A,B,e){e.d(B,{Z:function(){return o}});var L=e(5574),i=e.n(L),y=e(24963),f=e(86738),d=e(14726),p=e(83062),s=e(67294),T=e(85893);function o(u){var c=(0,s.useState)(!1),g=i()(c,2),j=g[0],t=g[1],E=(0,s.useContext)(y.Z),m=E.lang,n=E.notice,C=E.message,P=function(){t(!0),u.action().then(function(D){if(t(!1),typeof u.onSuccess=="function"&&u.onSuccess(D),u.messageSuccess){var r="";typeof u.messageSuccess=="function"?r=u.messageSuccess(D):r=u.messageSuccess,r=m("notification.".concat(r))+m("notification.title.success"),u.asynced?C.info(r):C.success(r)}}).catch(function(D){t(!1),typeof u.onError=="function"&&u.onError(D)})};return u.confirm?(0,T.jsx)(f.Z,{style:{width:500},title:u.confirmTitle?u.confirmTitle:m("notification.title.tip"),description:u.confirm,onConfirm:P,okText:"Yes",cancelText:"No",children:(0,T.jsx)(d.ZP,{disabled:u.disabled,icon:u.icon,loading:j,danger:u.danger,type:u.type,children:u.children})}):(0,T.jsx)(p.Z,{title:u.tips,children:(0,T.jsx)(d.ZP,{disabled:u.disabled,icon:u.icon,loading:j,onClick:P,danger:u.danger,type:u.type,children:u.children})})}},44349:function(A,B,e){var L=e(97857),i=e.n(L),y=e(17186),f=e(5966),d=e(86250),p=e(67294),s=e(85893),T=(0,p.forwardRef)(function(o,u){var c=(0,p.useRef)();(0,p.useImperativeHandle)(u,function(){return{addItem:function(t,E){var m,n=(m=c.current)===null||m===void 0?void 0:m.getList(),C=!1;if(n==null||n.map(function(W){if(W.name==t){C=!0;return}}),!C){var P;(P=c.current)===null||P===void 0||P.add({name:t,value:E})}},clear:function(){var t;(t=c.current)===null||t===void 0||(t=t.getList())===null||t===void 0||t.map(function(E,m){var n;(n=c.current)===null||n===void 0||n.remove(m)})}}});var g={};return o.hideCopyButton===!0&&(g.copyIconProps=!1),o.hideDeleteButton===!0&&(g.deleteIconProps=!1),(0,s.jsx)(y.u,i()(i()({initialValue:o.initialValue,label:o.label,name:o.name,actionRef:c,creatorButtonProps:o.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(o.label?o.label:o.name)}:!1,min:o.min?o.min:0},g),{},{children:function(t,E,m){return(0,s.jsx)(d.Z,{justify:o.justify,gap:o.gap,children:o.items.map(function(n){return n.render?(0,s.jsx)("div",{children:n.render&&n.render(t,E,m)},"".concat(o.name,"-").concat(n.name,"-").concat(t.key)):(0,s.jsx)(f.Z,{width:n.width,name:n.name,label:n.label,required:n.required,rules:[{required:n.required}],disabled:n.disabled,placeholder:n.placeholder},"".concat(o.name,"-").concat(n.name,"-").concat(t.key))})})}}))});B.Z=T},89063:function(A,B,e){e.d(B,{Z:function(){return T}});var L=e(24963),i=e(88484),y=e(62370),f=e(31418),d=e(14726),p=e(67294),s=e(85893);function T(o){var u=(0,p.useContext)(L.Z),c=u.message,g=u.notice,j=u.lang,t=(0,p.useRef)(null),E=f.Z.useApp(),m=function(){t.current&&(t.current.click(),t.current.onchange=function(C){if(!C||!C.target)return"";var P=new FileReader;P.onload=function(D){var r,_,v=(r=D.target)===null||r===void 0?void 0:r.result;if(o.onLoad)try{o.onLoad&&o.onLoad(v)}catch(a){g.error(a);return}typeof o.onImport=="function"&&(c.success("\u6210\u529F\u5BFC\u5165 ".concat(o.title)),o.onImport(v)),(_=t.current)!==null&&_!==void 0&&_.value&&(t.current.value="")};var W=C.target;if(W.files)try{P.readAsText(W.files[0])}catch(D){g.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.Z,{children:(0,s.jsx)(d.ZP,{icon:(0,s.jsx)(i.Z,{}),block:!0,onClick:m,children:o.title})}),(0,s.jsx)("input",{style:{display:"none"},type:"file",ref:t,name:"importFileInput"})]})}},24963:function(A,B,e){var L=e(67294),i=(0,L.createContext)({});B.Z=i},60335:function(A,B,e){e.d(B,{IE:function(){return T},IW:function(){return p},KK:function(){return t},LJ:function(){return m},RF:function(){return W},Re:function(){return C},eE:function(){return g},jV:function(){return u}});var L=e(15009),i=e.n(L),y=e(99289),f=e.n(y),d=e(54006);function p(r){return s.apply(this,arguments)}function s(){return s=f()(i()().mark(function r(_){return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/container/status",{method:"POST",data:_}));case 1:case"end":return a.stop()}},r)})),s.apply(this,arguments)}function T(r){return o.apply(this,arguments)}function o(){return o=f()(i()().mark(function r(_){return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/container/get-list",{data:_,method:"POST"}));case 1:case"end":return a.stop()}},r)})),o.apply(this,arguments)}function u(r){return c.apply(this,arguments)}function c(){return c=f()(i()().mark(function r(_){return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/container/get-detail",{data:_,method:"POST"}));case 1:case"end":return a.stop()}},r)})),c.apply(this,arguments)}function g(r){return j.apply(this,arguments)}function j(){return j=f()(i()().mark(function r(_){return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/container/update",{data:_,method:"POST"}));case 1:case"end":return a.stop()}},r)})),j.apply(this,arguments)}function t(){return E.apply(this,arguments)}function E(){return E=f()(i()().mark(function r(){return i()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,d.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return v.stop()}},r)})),E.apply(this,arguments)}function m(r){return n.apply(this,arguments)}function n(){return n=f()(i()().mark(function r(_){return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/container/export",{method:"POST",data:_,responseType:"blob"}));case 1:case"end":return a.stop()}},r)})),n.apply(this,arguments)}function C(r){return P.apply(this,arguments)}function P(){return P=f()(i()().mark(function r(_){return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/container/commit",{method:"POST",data:_}));case 1:case"end":return a.stop()}},r)})),P.apply(this,arguments)}function W(r){return D.apply(this,arguments)}function D(){return D=f()(i()().mark(function r(_){return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/container/upgrade",{method:"POST",data:_}));case 1:case"end":return a.stop()}},r)})),D.apply(this,arguments)}}}]);
