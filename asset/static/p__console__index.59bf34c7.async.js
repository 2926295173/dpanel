"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3805],{49610:function(R,v,e){var D=e(67294),r=e(54964),T=e(52626),s=e(12320),_=e.n(s),g=e(78267),c=e.n(g),y=e(85893),l,d=new s.Terminal(r.a),f=new g.FitAddon,O=(0,D.forwardRef)(function(u,C){var o,h=function(){d.reset(),o&&o.dispose(),l&&(l.close(),l=null)},a=function(){d.reset(),f.fit(),d.focus(),o&&o.dispose(),o=d.onData(function(m){var E={content:{command:m},type:"console"};l&&l.send(JSON.stringify(E))})};return(0,D.useImperativeHandle)(C,function(){return{start:function(m,E){var W=E?Object.keys(E).map(function(M){if(E&&E[M])return"".concat(M,"=").concat(E[M])}):[];l=new WebSocket((0,T.R)("/console/"+m+"?"+W.join("&"))),l.addEventListener("message",function(M){var P=JSON.parse(M.data),t=P.type;if(t=="console:"+m&&(d.write(P.data),P.data.indexOf("exec failed")!=-1)){h();return}}),a()},close:function(){h()},fit:function(){f.fit()}}}),(0,D.useEffect)(function(){return d.loadAddon(f),d.open(document.getElementById("terminal-container-console")),f.fit(),function(){h()}},[]),(0,y.jsx)("div",{style:{height:u.showInDrawer?"75vh":"100vh"},id:"terminal-container-console"})});v.Z=O},54964:function(R,v,e){e.d(v,{a:function(){return O}});var D=e(5574),r=e.n(D),T=e(78267),s=e.n(T),_=e(75458),g=e.n(_),c=e(67294),y=e(12320),l=e.n(y),d=e(89629),f=e(85893),O={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,cursorStyle:"block",cursorBlink:!0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},u=new y.Terminal(O),C=new _.SearchAddon,o=new T.FitAddon,h=(0,c.forwardRef)(function(a,A){var m,E=(0,c.useState)(!0),W=r()(E,2),M=W[0],P=W[1];return(0,c.useEffect)(function(){return window.addEventListener("resize",function(){a.showInModal||o.fit()}),a.style&&a.style.fontSize&&(u.options.fontSize=a.style.fontSize),u.loadAddon(o),u.loadAddon(C),u.open(document.getElementById(a.id?a.id:"terminal-container")),a.showInModal||o.fit(),function(){u.reset(),P(!0)}},[]),(0,c.useImperativeHandle)(A,function(){return{write:function(i){M&&(o.fit(),P(!1)),u.write(i)},clear:function(){u.clear()},getTerminal:function(){return u},findNext:function(i){C.findNext(i)},findPrev:function(i){C.findPrevious(i)},fit:function(){o.fit()},onData:function(i){return u.onData(i)}}}),(0,f.jsx)("div",{id:a.id?a.id:"terminal-container",style:{width:a.width?a.width:"100%",height:a.height?a.height:"500px",marginTop:(m=a.style)===null||m===void 0?void 0:m.marginTop}})});v.Z=h},33345:function(R,v,e){e.r(v),e.d(v,{default:function(){return l}});var D=e(5574),r=e.n(D),T=e(49610),s=e(60335),_=e(5251),g=e(82346),c=e(67294),y=e(85893);function l(){var d=(0,g.useParams)(),f=(0,g.useSearchParams)(),O=r()(f,2),u=O[0],C=O[1],o=(0,c.useRef)();return(0,c.useEffect)(function(){d.id&&(0,s.jV)({md5:d.id}).then(function(h){var a;window.document.title="console - ".concat((0,_.fi)(h.data.info.Name,"/")),d.id&&((a=o.current)===null||a===void 0||a.start(h.data.info.Id,{width:u.get("width"),height:u.get("height"),cmd:u.get("cmd"),workDir:u.get("workDir")}))}),document.body.style.overflow="hidden"},[]),(0,y.jsx)(T.Z,{ref:o})}},60335:function(R,v,e){e.d(v,{IE:function(){return y},IW:function(){return g},KK:function(){return C},LJ:function(){return h},RF:function(){return E},Re:function(){return A},aF:function(){return M},eE:function(){return O},jV:function(){return d}});var D=e(15009),r=e.n(D),T=e(99289),s=e.n(T),_=e(82346);function g(t){return c.apply(this,arguments)}function c(){return c=s()(r()().mark(function t(i){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,_.request)("/api/app/container/status",{method:"POST",data:i}));case 1:case"end":return n.stop()}},t)})),c.apply(this,arguments)}function y(t){return l.apply(this,arguments)}function l(){return l=s()(r()().mark(function t(i){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,_.request)("/api/app/container/get-list",{data:i,method:"POST"}));case 1:case"end":return n.stop()}},t)})),l.apply(this,arguments)}function d(t){return f.apply(this,arguments)}function f(){return f=s()(r()().mark(function t(i){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,_.request)("/api/app/container/get-detail",{data:i,method:"POST"}));case 1:case"end":return n.stop()}},t)})),f.apply(this,arguments)}function O(t){return u.apply(this,arguments)}function u(){return u=s()(r()().mark(function t(i){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,_.request)("/api/app/container/update",{data:i,method:"POST"}));case 1:case"end":return n.stop()}},t)})),u.apply(this,arguments)}function C(){return o.apply(this,arguments)}function o(){return o=s()(r()().mark(function t(){return r()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,_.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return p.stop()}},t)})),o.apply(this,arguments)}function h(t){return a.apply(this,arguments)}function a(){return a=s()(r()().mark(function t(i){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,_.request)("/api/app/container/export",{method:"POST",data:i,responseType:"blob"}));case 1:case"end":return n.stop()}},t)})),a.apply(this,arguments)}function A(t){return m.apply(this,arguments)}function m(){return m=s()(r()().mark(function t(i){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,_.request)("/api/app/container/commit",{method:"POST",data:i}));case 1:case"end":return n.stop()}},t)})),m.apply(this,arguments)}function E(t){return W.apply(this,arguments)}function W(){return W=s()(r()().mark(function t(i){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,_.request)("/api/app/container/upgrade",{method:"POST",data:i}));case 1:case"end":return n.stop()}},t)})),W.apply(this,arguments)}function M(t){return P.apply(this,arguments)}function P(){return P=s()(r()().mark(function t(i){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,_.request)("/api/app/container/copy",{method:"POST",data:i}));case 1:case"end":return n.stop()}},t)})),P.apply(this,arguments)}}}]);
