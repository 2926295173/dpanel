"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6357],{8287:function(he,X,e){var S=e(5574),_=e.n(S),Y=e(15009),u=e.n(Y),N=e(99289),h=e.n(N),i=e(13822),v=e(25593),U=e(83062),g=e(85265),D=e(42075),x=e(67294),f=e(81146),c=e(45742),p=e(58638),F=e(62597),s=e(3616),C=e(82346),R=e(85893),le=(0,x.forwardRef)(function(oe,ve){(0,x.useImperativeHandle)(ve,function(){return{show:function(P){return h()(u()().mark(function y(){var K;return u()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,i.jV)({md5:P});case 2:K=A.sent,K.data&&w(K.data.info),t(!0);case 5:case"end":return A.stop()}},y)}))()}}});var I=(0,x.useState)(!1),o=_()(I,2),n=o[0],t=o[1],a=(0,x.useState)(),Ee=_()(a,2),ne=Ee[0],w=Ee[1],m=(0,x.useRef)();return(0,R.jsxs)(R.Fragment,{children:[oe.showTriggerButton&&(0,R.jsx)(v.Z.Link,{onClick:h()(u()().mark(function B(){return u()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:w(oe.containerInfo),t(!0);case 2:case"end":return y.stop()}},B)})),children:(0,R.jsx)(U.Z,{title:"\u8FD0\u884C\u65E5\u5FD7",children:(0,R.jsx)(c.Z,{})})},"log"),(0,R.jsx)(g.Z,{title:"\u5BB9\u5668\u65E5\u5FD7",open:n,forceRender:!0,onClose:function(){t(!1)},afterOpenChange:function(P){if(P)setTimeout(function(){var K,G;(K=m.current)===null||K===void 0||K.start(),(G=m.current)===null||G===void 0||G.fit()},1e3);else{var y;(y=m.current)===null||y===void 0||y.close()}},width:s.FK,extra:(0,R.jsx)(D.Z,{children:(0,R.jsx)(C.Link,{to:"/container/log/".concat(ne==null?void 0:ne.Name),target:"_blank",onClick:function(){var P;(P=m.current)===null||P===void 0||P.close(),t(!1)},children:(0,R.jsx)(U.Z,{title:"\u65B0\u7A97\u53E3\u6253\u5F00",children:(0,R.jsx)(p.Z,{})})})}),children:ne&&n&&(0,R.jsx)(f.Z,{ref:m,showInDrawer:!0,id:"container:log:".concat(ne==null?void 0:ne.Id),request:function(){var B=h()(u()().mark(function P(y){var K;return u()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,F.Tb)({id:(K=ne.Id)!==null&&K!==void 0?K:"",lineTotal:y.lineTotal,download:y.download,showTime:y.showTime});case 2:case"end":return A.stop()}},P)}));return function(P){return B.apply(this,arguments)}}(),download:function(){var B=h()(u()().mark(function P(y){var K,G,A,pe;return u()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(0,F.XH)({id:(K=ne.Id)!==null&&K!==void 0?K:"",lineTotal:y.lineTotal,showTime:y.showTime});case 2:return A=q.sent,q.next=5,(0,i.jV)({md5:(G=ne.Id)!==null&&G!==void 0?G:""});case 5:return pe=q.sent,q.abrupt("return",{data:new Blob([A],{type:"text/plain"}),name:pe.data.info.Name.replaceAll("/","")+"_"+new Date().toLocaleDateString()+".log"});case 7:case"end":return q.stop()}},P)}));return function(P){return B.apply(this,arguments)}}()})})]})});X.Z=le},46357:function(he,X,e){e.d(X,{Z:function(){return T}});var S=e(5574),_=e.n(S),Y=e(15009),u=e.n(Y),N=e(99289),h=e.n(N),i=e(67294),v=e(37767),U=e(13822),g=e(82346),D=e(95591),x=e(60433),f=e(85265),c=e(96074),p=e(25593),F=e(86250),s=e(26412),C=e(52031),R=e(14189),le=e(72409),oe=e(93362),ve=e(184),I=e(43831),o=e(5251),n=e(52209),t=e(3616),a=e(85893),Ee=(0,i.forwardRef)(function(O,b){(0,i.useImperativeHandle)(b,function(){return{}});var d=(0,i.useState)(!1),$=_()(d,2),J=$[0],me=$[1];return(0,a.jsx)(ve.a,{submitter:!1,title:(0,o.fi)(O.containerInfo.Name,"/")+" - \u7F51\u7EDC\u7BA1\u7406",onOpenChange:function(r){me(r)},drawerProps:{width:t.R_},open:J,trigger:(0,a.jsx)(p.Z.Link,{children:(0,a.jsx)(n.Z,{})},"file"),children:(0,a.jsx)(I.Z,{ghost:!0,containerInfo:O.containerInfo})})}),ne=Ee,w=e(8287),m=e(65913),B=e(14245),P=e(1699),y=e(40666),K=e(64789),G=e(38345),A=e(42075),pe=e(66309),ce=e(90127),q=e(29453);function ge(O){var b=(0,i.useState)(0),d=_()(b,2),$=d[0],J=d[1],me=(0,i.useState)(),de=_()(me,2),r=de[0],H=de[1];return(0,i.useEffect)(function(){H([]),(0,q.e1)().then(function(re){H(re.data.list)})},[$,O.data.info.Name]),(0,a.jsx)(G.Z,{ghost:!0,title:(0,a.jsx)(y.Z,{}),subTitle:"\u5BB9\u5668\u6807\u7B7E",extra:(0,a.jsx)(ce.Z,{trigger:(0,a.jsx)(p.Z.Link,{children:(0,a.jsx)(K.Z,{})}),containerDetail:O.data,onFinish:function(){J($+1)}}),children:(0,a.jsx)(A.Z,{wrap:!0,children:r&&(r==null?void 0:r.filter(function(re){return re.item&&re.item.find(function(Pe){return Pe.name==O.data.info.Name})}).map(function(re,Pe){return(0,a.jsx)(pe.Z,{color:re.tagColor,closable:!0,style:{height:35,display:"flex",borderRadius:20,justifyContent:"center",alignItems:"center"},onClose:h()(u()().mark(function je(){return u()().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return Me.next=2,(0,q.rn)({name:O.data.info.Name,tag:re.tag});case 2:J($+1);case 3:case"end":return Me.stop()}},je)})),children:(0,a.jsx)("span",{style:{paddingLeft:10,paddingRight:3},children:re.tag})},Pe)}))})})}var De=e(19632),l=e.n(De),M=e(12122),W=e(83062),ee=e(60940),Oe=e(27619),ie=e(84410),z=e(24963),L={total:0,memory:{usage:[{name:"use",data:[]},{name:"all",show:!1,data:[]}],source:{usage:0,limit:0}},cpu:{usage:[{name:"use",data:[]}],source:{usage:0,limit:0}},network:{usage:[{name:"rx",data:[]},{name:"tx",data:[]}],source:{usageIn:0,usageOut:0}},io:{usage:[{name:"read",data:[]},{name:"write",data:[]}],source:{usageRead:0,usageWrite:0}}},E=function(b,d){switch(d.type){case"clear":return L;case"update":var $=new Date(d.payload.read).toLocaleTimeString(),J=JSON.parse(JSON.stringify(b));if(d.payload.memory_stats&&d.payload.memory_stats.limit&&d.payload.memory_stats.usage&&(J.memory.usage=[{name:"use",data:[].concat(l()(b.memory.usage[0].data.slice(-20)),[{date:$,value:Math.round(d.payload.memory_stats.usage)}])},{name:"all",show:!1,data:[].concat(l()(b.memory.usage[1].data.slice(-20)),[{date:$,value:Math.round(d.payload.memory_stats.limit)}])}],J.memory.source={usage:d.payload.memory_stats.usage,limit:d.payload.memory_stats.limit}),d.payload&&d.payload.cpu_stats){var me=d.payload.cpu_stats.cpu_usage.total_usage-d.payload.precpu_stats.cpu_usage.total_usage,de=d.payload.cpu_stats.system_cpu_usage-d.payload.precpu_stats.system_cpu_usage;J.cpu.usage=[{name:"use",data:[].concat(l()(b.cpu.usage[0].data.slice(-20)),[{date:$,value:(me/de*d.payload.cpu_stats.online_cpus*100).toFixed(2)}])}],J.cpu.source={usage:me/de*d.payload.cpu_stats.online_cpus*100,limit:de*d.payload.cpu_stats.online_cpus*100}}return d.payload.networks&&(J.network.source={usageIn:parseFloat(d.payload.networks.eth0.rx_bytes.toFixed(2)),usageOut:parseFloat(d.payload.networks.eth0.tx_bytes.toFixed(2))},J.network.usage=[{name:"rx",data:[].concat(l()(b.network.usage[0].data.slice(-20)),[{date:$,value:parseFloat(d.payload.networks.eth0.rx_bytes.toFixed(2))}])},{name:"tx",data:[].concat(l()(b.network.usage[1].data.slice(-20)),[{date:$,value:parseFloat(d.payload.networks.eth0.tx_bytes.toFixed(2))}])}]),d.payload.blkio_stats&&d.payload.blkio_stats.io_service_bytes_recursive&&d.payload.blkio_stats.io_service_bytes_recursive.length>0&&(J.io.source={usageRead:d.payload.blkio_stats.io_service_bytes_recursive[0].value,usageWrite:d.payload.blkio_stats.io_service_bytes_recursive[1].value},J.io.usage=[{name:"read",data:[].concat(l()(b.io.usage[0].data.slice(-20)),[{date:$,value:parseFloat(d.payload.blkio_stats.io_service_bytes_recursive[0].value.toFixed(2))}])},{name:"write",data:[].concat(l()(b.io.usage[1].data.slice(-20)),[{date:$,value:parseFloat(d.payload.blkio_stats.io_service_bytes_recursive[1].value.toFixed(2))}])}]),J}},k=(0,i.forwardRef)(function(O,b){var d=(0,i.useState)(!1),$=_()(d,2),J=$[0],me=$[1],de=(0,i.useReducer)(E,L),r=_()(de,2),H=r[0],re=r[1],Pe=(0,i.useState)(),je=_()(Pe,2),fe=je[0],Me=je[1],Re=(0,i.useContext)(z.Z),Ce=Re.loading,se=(0,g.useModel)("subscriber");(0,i.useImperativeHandle)(b,function(){return{}});function Te(Z){return ae.apply(this,arguments)}function ae(){return ae=h()(u()().mark(function Z(j){var te,ue;return u()().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return Ce.show(),(0,ie.i)({id:j}),xe.next=4,(0,ie.a)({id:j});case 4:te=xe.sent,ue={columns:[],data:[]},te.data.list.Titles.map(function(_e){ue.columns.push({title:_e,label:_e,dataIndex:_e})}),te.data.list.Processes.map(function(_e,ye){ue.data.push({UID:_e[0],PID:_e[1],PPID:_e[2],C:_e[3],STIME:_e[4],TTY:_e[5],TIME:_e[6],CMD:_e[7]})}),Me(ue),Ce.destroy();case 10:case"end":return xe.stop()}},Z)})),ae.apply(this,arguments)}return(0,i.useEffect)(function(){return function(){se.progress.close("container:stat:"+O.containerInfo.Id),re({type:"clear",payload:{}})}},[O.containerInfo]),(0,a.jsxs)(a.Fragment,{children:[O.showTriggerButton&&(0,a.jsx)(p.Z.Link,{onClick:h()(u()().mark(function Z(){return u()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:me(!0);case 1:case"end":return te.stop()}},Z)})),children:(0,a.jsx)(W.Z,{title:"\u8FD0\u884C\u72B6\u6001",children:(0,a.jsx)(M.Z,{})})},"log"),(0,a.jsxs)(f.Z,{title:"\u5BB9\u5668\u65E5\u5FD7",open:J,onClose:function(){me(!1)},afterOpenChange:function(j){j?setTimeout(function(){var te;!((te=O.containerInfo)===null||te===void 0)&&te.Name&&Te(O.containerInfo.Id),se.addDataHandler("container:stat:".concat(O.containerInfo.Id),function(ue){var Ie=JSON.parse(ue.data);re({type:"update",payload:Ie})})},500):(se.progress.close("container:stat:"+O.containerInfo.Id),re({type:"clear",payload:{}}))},width:t.R_,children:[(0,a.jsxs)(G.Z,{ghost:!0,direction:"row",wrap:!0,gutter:[20,20],children:[H.memory&&H.memory.source&&(0,a.jsx)(G.Z,{colSpan:12,title:(0,a.jsx)(M.Z,{}),subTitle:"Memory usage: ".concat((0,o.FI)(H.memory.source.usage)," / ").concat((0,o.FI)(H.memory.source.limit)),headerBordered:!0,bordered:!0,children:(0,a.jsx)(Oe.Z,{name:"container-memory",data:H.memory.usage,yLabelFormatter:function(j){return(0,o.FI)(parseFloat(j))},yValueFormatter:function(j){return(0,o.FI)(parseFloat(j))},yDomainMaxCallback:function(j){return j.min*2}})}),(0,a.jsx)(G.Z,{colSpan:12,title:(0,a.jsx)(M.Z,{}),subTitle:"Cpu usage: ".concat(H.cpu.source.usage.toFixed(2),"%"),headerBordered:!0,bordered:!0,children:(0,a.jsx)(Oe.Z,{name:"container-cpu",data:H.cpu.usage,yDomainMaxCallback:function(j){return j.min*100},yLabelFormatter:function(j){return"".concat(parseFloat(j).toFixed(2),"%")}})}),H.io&&H.io.source&&(0,a.jsx)(G.Z,{colSpan:12,title:(0,a.jsx)(M.Z,{}),subTitle:"I/O: ".concat((0,o.FI)(H.io.source.usageRead)," / ").concat((0,o.FI)(H.io.source.usageWrite)),headerBordered:!0,bordered:!0,children:(0,a.jsx)(Oe.Z,{name:"container-disk",data:H.io.usage,yDomainMaxCallback:function(j){return j.max*2},yLabelFormatter:function(j){return(0,o.FI)(parseFloat(j))}})}),H.network&&H.network.source&&(0,a.jsx)(G.Z,{colSpan:12,title:(0,a.jsx)(M.Z,{}),subTitle:"Network: ".concat((0,o.FI)(H.network.source.usageIn)," / ").concat((0,o.FI)(H.network.source.usageOut)),headerBordered:!0,bordered:!0,children:(0,a.jsx)(Oe.Z,{name:"container-network",data:H.network.usage,yDomainMaxCallback:function(j){return j.max*2},yLabelFormatter:function(j){return(0,o.FI)(parseFloat(j))}})})]}),(0,a.jsx)(G.Z,{title:(0,a.jsx)(x.Z,{}),subTitle:"Progress",children:(0,a.jsx)(ee.Z,{scroll:{x:"max-content"},rowKey:"PID",columns:fe==null?void 0:fe.columns,dataSource:fe==null?void 0:fe.data,pagination:{pageSize:10}})})]})]})}),Q=k,V=(0,i.forwardRef)(function(O,b){var d;(0,i.useImperativeHandle)(b,function(){return{show:function(Te){return h()(u()().mark(function ae(){return u()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return fe(!0),j.next=3,Re(Te);case 3:case"end":return j.stop()}},ae)}))()}}});var $=(0,g.useAccess)(),J=(0,i.useRef)(),me=(0,i.useState)(),de=_()(me,2),r=de[0],H=de[1],re=(0,i.useState)(!1),Pe=_()(re,2),je=Pe[0],fe=Pe[1],Me=(0,i.useRef)();function Re(se){return Ce.apply(this,arguments)}function Ce(){return Ce=h()(u()().mark(function se(Te){var ae,Z;return u()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return(ae=J.current)===null||ae===void 0||ae.show(),te.next=3,(0,U.jV)({md5:Te}).finally(function(){var ue;(ue=J.current)===null||ue===void 0||ue.destroy()});case 3:Z=te.sent,Z.data&&(Z.data.info.HostConfig.NetworkMode=="host"&&Z.data.info.Config.ExposedPorts&&Object.keys(Z.data.info.Config.ExposedPorts).map(function(ue){Z.data.info.NetworkSettings.Ports[ue]=[{HostIp:"0.0.0.0",HostPort:ue.substring(0,ue.indexOf("/"))}]}),H(Z.data));case 5:case"end":return te.stop()}},se)})),Ce.apply(this,arguments)}return(0,a.jsx)(f.Z,{title:"\u5FEB\u6377\u67E5\u770B\u5BB9\u5668 - ".concat((0,o.fi)((d=r==null?void 0:r.info.Name)!==null&&d!==void 0?d:"","/")),open:je,onClose:function(){fe(!1),O.onFinish&&O.onFinish()},width:t.R_,extra:(0,a.jsxs)(P.u,{access:"canSeeContainerList",space:{split:(0,a.jsx)(c.Z,{type:"vertical"})},children:[(r==null?void 0:r.info)&&r.info.State.Running&&(0,a.jsx)(oe.Z,{type:"container",name:r.info.Name,title:(0,o.fi)(r.info.Name,"/"),trigger:(0,a.jsx)(p.Z.Link,{children:(0,a.jsx)(D.Z,{})},"file")}),(r==null?void 0:r.info)&&$.canSeeContainerListManageOp&&(0,a.jsx)(ne,{containerInfo:r.info}),(r==null?void 0:r.info)&&r.info.State.Running&&(0,a.jsx)(w.Z,{containerInfo:r.info,showTriggerButton:!0}),(r==null?void 0:r.info)&&r.info.State.Running&&(0,a.jsx)(Q,{containerInfo:r.info,showTriggerButton:!0})]}),children:(0,a.jsx)(m.Z,{ref:J,children:(0,a.jsxs)(F.Z,{vertical:!0,gap:20,children:[r&&(0,a.jsx)(P.u,{access:"canSeeContainerList",children:(0,a.jsx)(R.Z,{ref:Me,ghost:!0,data:r==null?void 0:r.info,onFinish:h()(u()().mark(function se(){return u()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,Re(r.info.Id);case 2:return ae.t0=ae.sent,ae.abrupt("return",[ae.t0]);case 4:case"end":return ae.stop()}},se)}))})}),r&&(0,a.jsx)(P.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,a.jsx)(le.Z,{ghost:!0,data:r,checkContainerUpgrade:function(){fe(!1),O.onUpgradeFinish&&O.onUpgradeFinish()}})}),r&&(0,a.jsx)(ge,{data:r}),r&&(0,a.jsx)(v.Z,{data:r,ghost:!0}),(0,a.jsx)(C.Z,{data:r==null?void 0:r.info,ghost:!0}),r&&(0,a.jsx)(B.Z,{data:r.info,ghost:!0}),(r==null?void 0:r.info.Config.Labels)&&(0,a.jsx)(G.Z,{title:(0,a.jsx)(x.Z,{}),ghost:!0,subTitle:"\u6807\u7B7E",children:(0,a.jsx)(s.Z,{column:1,bordered:!0,children:(r==null?void 0:r.info.Config.Labels)&&Object.keys(r==null?void 0:r.info.Config.Labels).map(function(se){return(0,a.jsx)(s.Z.Item,{label:se,children:r==null?void 0:r.info.Config.Labels[se]},se)})})})]})})})}),T=V},90127:function(he,X,e){var S=e(15009),_=e.n(S),Y=e(99289),u=e.n(Y),N=e(5574),h=e.n(N),i=e(5251),v=e(184),U=e(62370),g=e(5966),D=e(24739),x=e(64317),f=e(52688),c=e(97462),p=e(40056),F=e(42075),s=e(67294),C=e(1699),R=e(80821),le=e(2808),oe=e(87662),ve=e(52756),I=e(29453),o=e(3616),n=e(85893),t=(0,s.forwardRef)(function(a,Ee){var ne;(0,s.useImperativeHandle)(Ee,function(){return{edit:function(L){Oe(!0),ie(L),w.current&&w.current.setFieldsValue({tag:[L.tag],tagColor:L.tagColor,enableShowGroup:L.enableShowGroup})}}});var w=(0,s.useRef)(),m=(0,s.useState)(0),B=h()(m,2),P=B[0],y=B[1],K=(0,s.useState)([]),G=h()(K,2),A=G[0],pe=G[1],ce=(0,s.useState)(),q=h()(ce,2),ge=q[0],De=q[1],l=(ne=a.containerDetail)===null||ne===void 0?void 0:ne.info,M=(0,s.useState)(!1),W=h()(M,2),ee=W[0],Oe=W[1];function ie(z){w.current&&w.current.setFieldsValue({title:z.title,description:z.description,url:z.url,icon:z.icon,name:z.name})}return(0,s.useEffect)(function(){De([]),(0,I.e1)().then(function(z){De(z.data.list)})},[P]),(0,s.useEffect)(function(){l&&(0,oe.K3)().then(function(z){var L=[];l.NetworkSettings&&l.NetworkSettings.Ports&&Object.keys(l.NetworkSettings.Ports).map(function(E){l.NetworkSettings.Ports[E]&&l.NetworkSettings.Ports[E].map(function(k){k.HostPort&&L.push("http://".concat(z.data.serverUrl,":").concat(k.HostPort))})}),pe(L)})},[a.containerDetail]),(0,n.jsxs)(v.a,{drawerProps:{forceRender:!0,width:o.R_},open:ee,onFinish:function(){var z=u()(_()().mark(function L(E){var k,Q,V,T;return _()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return V="",E.tagColor&&E.tagColor.toHexString?E.tagColor.cleared||(V=E.tagColor.toHexString()):V=E.tagColor,T=(k=E.enableShowGroup)!==null&&k!==void 0?k:a.defaultEnableShowGroup,b.next=5,(0,I.A9)({enableShowGroup:T,tag:E.tag?E.tag[0]:"",tagColor:V,name:(Q=l==null?void 0:l.Name)!==null&&Q!==void 0?Q:E.name,title:T?E.title:"",description:T?E.description:"",url:T?E.url:"",icon:T?E.icon:""});case 5:return y(P+1),a.onFinish&&a.onFinish({tag:E.tag,tagColor:E.tagColor,enableShowGroup:T}),b.abrupt("return",!0);case 8:case"end":return b.stop()}},L)}));return function(L){return z.apply(this,arguments)}}(),formRef:w,title:"\u6DFB\u52A0\u5BB9\u5668\u6807\u7B7E",trigger:a.trigger,onOpenChange:function(L){var E;Oe(L),!L&&(!((E=w.current)===null||E===void 0)&&E.resetFields)&&w.current.resetFields()},children:[a.defaultEnableShowGroup&&(0,n.jsx)(U.Z,{children:(0,n.jsx)(p.Z,{message:(0,ve.getLang)("system.home.tagAddContainerTips")})}),(0,n.jsx)(g.Z,{name:"name",hidden:!0}),(0,n.jsxs)(D.UW,{children:[(0,n.jsx)(x.Z,{width:"lg",label:"\u6807\u7B7E\u6216\u5206\u7EC4",layout:"vertical",required:!0,rules:[{required:!0}],onChange:function(L){var E=ge&&ge.find(function($){return L&&L.length>=1&&$.tag==L[0]});if(E){var k,Q,V,T=E.item.find(function($){return $.name==(l==null?void 0:l.Name)});(k=w.current)===null||k===void 0||k.setFieldsValue({tagColor:E.tagColor,enableShowGroup:E.enableShowGroup}),T&&T.name&&ie({name:(Q=l==null?void 0:l.Name)!==null&&Q!==void 0?Q:"",title:T?T.title:(0,i.fi)((V=l==null?void 0:l.Name)!==null&&V!==void 0?V:"","/"),description:T&&T.description,url:T&&T.url,icon:T&&T.icon})}if(!L||L.length==0){var O,b=(O=w.current)===null||O===void 0?void 0:O.getFieldValue("url");if(!b||b==""){var d;!((d=w.current)===null||d===void 0)&&d.resetFields&&w.current.resetFields()}}},options:ge&&ge.map(function(z){return{lable:z.tag,value:z.tag}}),name:"tag",mode:"tags",fieldProps:{maxCount:1},placeholder:"\u8BF7\u9009\u62E9\u6216\u662F\u8F93\u5165\u6807\u7B7E\u6216\u662F\u5206\u7EC4"},"tagSelect".concat(P)),!a.defaultEnableShowGroup&&(0,n.jsx)(le.Z,{label:"\u6807\u7B7E\u80CC\u666F\u989C\u8272",name:"tagColor"})]}),!a.defaultEnableShowGroup&&(0,n.jsx)(C.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(L){var E=L.canSeeEnableCe;return(0,n.jsx)(f.Z,{label:"\u4EE5\u5206\u7EC4\u7684\u5F62\u5F0F\u5C55\u793A\u9996\u9875\u5361\u7247",name:"enableShowGroup",disabled:E,fieldProps:{onChange:function(Q){if(Q){var V,T;ie({name:(V=l==null?void 0:l.Name)!==null&&V!==void 0?V:"",title:(0,i.fi)((T=l==null?void 0:l.Name)!==null&&T!==void 0?T:"","/")})}}}})}}),(0,n.jsx)(c.Z,{name:["enableShowGroup"],children:function(L){var E=L.enableShowGroup;return(E||a.defaultEnableShowGroup)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(F.Z.Compact,{children:[a.containerDetail&&(0,n.jsx)(x.Z,{label:"\u9009\u62E9\u7AEF\u53E3",width:"sm",name:"selectUrl",options:A.map(function(k){return{label:k,value:k}}),onChange:function(Q){var V;!((V=w.current)===null||V===void 0)&&V.setFieldValue&&w.current.setFieldValue("url",Q)}}),(0,n.jsx)(g.Z,{label:"\u8BBF\u95EE\u5730\u5740",name:"url",width:"md"}),(0,n.jsx)(U.Z,{label:" ",children:(0,n.jsx)(R.Z,{action:function(){var Q;return(0,I.R3)({url:(Q=w.current)===null||Q===void 0?void 0:Q.getFieldValue("url")})},onSuccess:function(Q){var V,T,O;(V=w.current)===null||V===void 0||V.setFieldValue("icon",Q.data.icon),(T=w.current)===null||T===void 0||T.setFieldValue("title",Q.data.title),(O=w.current)===null||O===void 0||O.setFieldValue("description",Q.data.description)},children:"\u83B7\u53D6\u4FE1\u606F"})})]}),(0,n.jsxs)(D.UW,{children:[(0,n.jsx)(g.Z,{label:"\u6807\u9898",name:"title"}),(0,n.jsx)(g.Z,{label:"\u63CF\u8FF0",name:"description"})]}),(0,n.jsx)(D.UW,{children:(0,n.jsx)(g.Z,{width:"lg",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u56FE\u6807\u8FDC\u7A0B\u5730\u5740",name:"icon"})})]})}})]})});X.Z=t},81146:function(he,X,e){var S=e(97857),_=e.n(S),Y=e(15009),u=e.n(Y),N=e(99289),h=e.n(N),i=e(67294),v=e(97269),U=e(62370),g=e(5966),D=e(97462),x=e(82346),f=e(71230),c=e(15746),p=e(34041),F=e(28036),s=e(84567),C=e(42075),R=e(80821),le=e(23430),oe=e(93162),ve=e.n(oe),I=e(78267),o=e.n(I),n=e(75458),t=e.n(n),a=e(12323),Ee=e(4244),ne=e.n(Ee),w=e(24078),m=e(85893),B,P,y,K={decorations:{matchBackground:"",matchBorder:"#FFFF00",activeMatchBackground:"#FFFF0066",matchOverviewRuler:"",activeMatchColorOverviewRuler:""}},G=(0,i.forwardRef)(function(A,pe){var ce=(0,i.useRef)(),q=(0,x.useModel)("subscriber");(0,i.useImperativeHandle)(pe,function(){return{fit:function(){B.clear(),y.fit()},start:function(){return h()(u()().mark(function M(){return u()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,ge({lineTotal:500});case 2:case"end":return ee.stop()}},M)}))()},close:function(){q.progress.close(A.id)}}});function ge(l){return De.apply(this,arguments)}function De(){return De=h()(u()().mark(function l(M){return u()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:B.clear(),M.download=!1,A.request(M);case 3:case"end":return ee.stop()}},l)})),De.apply(this,arguments)}return(0,i.useEffect)(function(){return window.addEventListener("resize",function(){y.fit()}),B=new Ee.Terminal(_()(_()({},a.X),{},{fontSize:12,lineHeight:1.2,allowProposedApi:!0})),y=new I.FitAddon,P=new n.SearchAddon({}),B.loadAddon(y),B.loadAddon(P),B.open(document.getElementById("terminal-container-log")),y.fit(),q.addDataHandler(A.id,function(l){B.write(l.data)}),function(){B.clear(),B.reset(),q.progress.close(A.id)}},[]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(v.A,{submitter:!1,layout:"horizontal",onFinish:function(M){var W;ge({id:A.id,lineTotal:parseInt(M.lineTotal),showTime:(W=M.showTime)!==null&&W!==void 0?W:!1})},formRef:ce,children:(0,m.jsxs)(f.Z,{gutter:[10,0],children:[(0,m.jsx)(c.Z,{span:8,children:(0,m.jsx)(U.Z,{name:"lineTotal",initialValue:"500",label:"\u83B7\u53D6\u65E5\u5FD7\u6761\u6570",children:(0,m.jsxs)(p.Z,{defaultValue:"500",onChange:function(M){var W;(W=ce.current)===null||W===void 0||W.submit()},children:[(0,m.jsx)(p.Z.Option,{value:"100",children:"100\u6761\u65E5\u5FD7\u6570\u636E"}),(0,m.jsx)(p.Z.Option,{value:"200",children:"200\u6761\u65E5\u5FD7\u6570\u636E"}),(0,m.jsx)(p.Z.Option,{value:"500",children:"500\u6761\u65E5\u5FD7\u6570\u636E"}),(0,m.jsx)(p.Z.Option,{value:"1000",children:"1000\u6761\u65E5\u5FD7\u6570\u636E"}),(0,m.jsx)(p.Z.Option,{value:"-1",children:"\u5168\u90E8\uFF08\u4E0B\u8F7D\u53EF\u89C1\uFF09"})]})})}),(0,m.jsx)(c.Z,{children:(0,m.jsx)(F.ZP,{onClick:function(){B.clear()},children:"\u6E05\u5C4F"})}),(0,m.jsx)(c.Z,{children:(0,m.jsx)(U.Z,{name:"showTime",valuePropName:"checked",children:(0,m.jsx)(s.Z,{onChange:function(M){var W;(W=ce.current)===null||W===void 0||W.submit()},children:"\u663E\u793A\u65F6\u95F4"})})}),(0,m.jsx)(c.Z,{children:(0,m.jsx)(g.Z,{label:"\u67E5\u627E",name:"keywork",fieldProps:{onPressEnter:function(){var M;P.findNext((M=ce.current)===null||M===void 0?void 0:M.getFieldValue("keywork"),K)},onChange:function(M){P.findNext(M.target.value,K)}},placeholder:"\u8F93\u5165\u5173\u952E\u5B57\u56DE\u8F66\u67E5\u627E"})}),(0,m.jsx)(c.Z,{children:(0,m.jsx)(D.Z,{name:["keywork"],children:function(M){var W=M.keywork;return(0,m.jsxs)(C.Z,{size:10,children:[(0,m.jsx)(F.ZP,{onClick:function(){P.findNext(W,K)},children:"\u4E0B\u4E00\u4E2A"},"next"),(0,m.jsx)(F.ZP,{onClick:function(){P.findPrevious(W,K)},children:"\u4E0A\u4E00\u4E2A"},"prev")]})}})}),(0,m.jsx)(c.Z,{children:(0,m.jsx)(R.Z,{icon:(0,m.jsx)(le.Z,{}),action:h()(u()().mark(function l(){var M,W,ee;return u()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(!A.download){ie.next=5;break}return ie.next=3,A.download({lineTotal:parseInt((M=ce.current)===null||M===void 0?void 0:M.getFieldValue("lineTotal")),showTime:(W=ce.current)===null||W===void 0?void 0:W.getFieldValue("showTime")});case 3:ee=ie.sent,(0,oe.saveAs)(ee.data,ee.name);case 5:case"end":return ie.stop()}},l)})),children:"\u4E0B\u8F7D\u65E5\u5FD7"})})]})}),(0,m.jsx)("div",{style:{marginTop:"20px",height:A.showInDrawer?"75vh":"85vh"},id:"terminal-container-log"})]})});X.Z=G},27619:function(he,X,e){e.d(X,{Z:function(){return i}});var S=e(5574),_=e.n(S),Y=e(82346),u=e(67294),N=e(64389),h=e(85893);function i(v){var U=(0,Y.useModel)("@@initialState"),g=U.initialState,D="chart-area-".concat(v.name),x=(0,u.useState)(),f=_()(x,2),c=f[0],p=f[1],F={};v.data.forEach(function(C){C.show===!1?F[C.name]=!1:F[C.name]=!0});var s={tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},valueFormatter:function(R){return v.yValueFormatter?v.yValueFormatter(R):R}},legend:{selected:F},grid:{left:"0",right:"0",bottom:"0",top:"30",containLabel:!0},xAxis:{type:"category",data:v.data[0].data.map(function(C){return C.date}),boundaryGap:!1,axisLabel:{rotate:20}},yAxis:{type:"value",axisLabel:{formatter:v.yLabelFormatter},max:function(R){if(v.yDomainMaxCallback)return v.yDomainMaxCallback(R)}},series:[]};return(0,u.useEffect)(function(){var C="",R=window.matchMedia("(prefers-color-scheme: dark)");(g==null?void 0:g.theme.algorithm)=="dark"||R.matches?C="dark":C="",c&&!c.isDisposed()&&c.dispose();var le=document.getElementById(D),oe=N.S1(le,C);oe.setOption(s);var ve=new ResizeObserver(function(){oe.resize()});le&&ve.observe(le),p(oe)},[g]),(0,u.useEffect)(function(){c&&!c.isDisposed()&&c.setOption({legend:{data:v.data.map(function(C){return C.name})},xAxis:{data:v.data[0].data.map(function(C){return C.date})},series:v.data.map(function(C){return{name:C.name,type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:C.data.map(function(R){return R.value})}})})},[v.data]),(0,h.jsx)("div",{style:{height:200},id:D})}},2808:function(he,X,e){e.d(X,{Z:function(){return i}});var S=e(97857),_=e.n(S),Y=e(62370),u=e(51663),N=e(67294),h=e(85893);function i(v){return(0,h.jsx)(Y.Z,_()(_()({},v),{},{children:(0,h.jsx)(u.Z,{showText:function(g){return g.toHexString()},allowClear:!0,presets:[{label:"\u9884\u8BBE\u989C\u8272",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},52756:function(he,X,e){e.r(X),e.d(X,{default:function(){return g},getLang:function(){return U}});var S=e(82346),_=e(31418),Y=e(26058),u=e(85137),N=e(24963),h=e(65913),i=e(67294),v=e(85893);function U(D,x,f){var c=(0,S.getLocale)();f!=null&&f.XK&&(c="zh-XK");var p=(0,S.getIntl)(c).formatMessage({id:D},x);return p}function g(){var D=(0,i.useRef)(),x=(0,S.useIntl)(),f=function(o){for(var n=arguments.length,t=new Array(n>1?n-1:0),a=1;a<n;a++)t[a-1]=arguments[a];p.notification[o]({message:x.formatMessage({id:"notification.title."+o}),description:t.join(" "),placement:"topRight"})},c=function(o){for(var n=arguments.length,t=new Array(n>1?n-1:0),a=1;a<n;a++)t[a-1]=arguments[a];p.message[o](t.join(" "))},p=_.Z.useApp(),F=(0,S.useModel)("@@initialState"),s=F.initialState,C=F.loading,R=F.error,le=F.refresh,oe=F.setInitialState,ve=(0,S.useModel)("subscriber");return s!=null&&s.user.username&&ve.addDataHandler("user:permission:".concat(s==null?void 0:s.user.username),function(I){le()}),(0,v.jsx)(Y.Z,{children:(0,v.jsx)(N.Z.Provider,{value:{notice:{success:function(){for(var o=arguments.length,n=new Array(o),t=0;t<o;t++)n[t]=arguments[t];f.apply(void 0,["success"].concat(n))},error:function(){for(var o=arguments.length,n=new Array(o),t=0;t<o;t++)n[t]=arguments[t];f.apply(void 0,["error"].concat(n))},warning:function(){for(var o=arguments.length,n=new Array(o),t=0;t<o;t++)n[t]=arguments[t];f.apply(void 0,["warning"].concat(n))},info:function(){for(var o=arguments.length,n=new Array(o),t=0;t<o;t++)n[t]=arguments[t];f.apply(void 0,["info"].concat(n))},destroy:function(){p.notification.destroy()}},message:{success:function(){for(var o=arguments.length,n=new Array(o),t=0;t<o;t++)n[t]=arguments[t];c.apply(void 0,["success"].concat(n))},error:function(){for(var o=arguments.length,n=new Array(o),t=0;t<o;t++)n[t]=arguments[t];c.apply(void 0,["error"].concat(n))},warning:function(){for(var o=arguments.length,n=new Array(o),t=0;t<o;t++)n[t]=arguments[t];c.apply(void 0,["warning"].concat(n))},info:function(){for(var o=arguments.length,n=new Array(o),t=0;t<o;t++)n[t]=arguments[t];c.apply(void 0,["info"].concat(n))},loading:function(){for(var o=arguments.length,n=new Array(o),t=0;t<o;t++)n[t]=arguments[t];c.apply(void 0,["loading"].concat(n))},destroy:function(){p.message.destroy()}},loading:{show:function(){D.current&&D.current.show()},destroy:function(){D.current&&D.current.destroy()}},lang:function(o,n){return x.formatMessage({id:o},n)}},children:(0,v.jsxs)(h.Z,{ref:D,children:[(0,v.jsx)(S.Outlet,{}),(0,v.jsx)(u.Z.BackTop,{duration:10,style:{bottom:100}})]})},C?"1":"2")})}},65913:function(he,X,e){var S=e(5574),_=e.n(S),Y=e(74330),u=e(67294),N=e(85893),h=(0,u.forwardRef)(function(i,v){(0,u.useImperativeHandle)(v,function(){return{show:function(){x(!0)},destroy:function(){x(!1)}}});var U=(0,u.useState)(!1),g=_()(U,2),D=g[0],x=g[1];return(0,N.jsx)(Y.Z,{spinning:D,size:"default",children:i.children})});X.Z=h},84410:function(he,X,e){e.d(X,{a:function(){return v},i:function(){return h}});var S=e(15009),_=e.n(S),Y=e(99289),u=e.n(Y),N=e(82346);function h(g){return i.apply(this,arguments)}function i(){return i=u()(_()().mark(function g(D){return _()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,N.request)("/api/app/container/get-stat-info",{method:"POST",data:D}));case 1:case"end":return f.stop()}},g)})),i.apply(this,arguments)}function v(g){return U.apply(this,arguments)}function U(){return U=u()(_()().mark(function g(D){return _()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,N.request)("/api/app/container/get-process-info",{method:"POST",data:D}));case 1:case"end":return f.stop()}},g)})),U.apply(this,arguments)}},29453:function(he,X,e){e.d(X,{A9:function(){return h},R3:function(){return x},e1:function(){return v},rn:function(){return g}});var S=e(15009),_=e.n(S),Y=e(99289),u=e.n(Y),N=e(82346);function h(c){return i.apply(this,arguments)}function i(){return i=u()(_()().mark(function c(p){return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,N.request)("/api/common/tag/create",{method:"POST",data:p});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},c)})),i.apply(this,arguments)}function v(c){return U.apply(this,arguments)}function U(){return U=u()(_()().mark(function c(p){return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,N.request)("/api/common/tag/get-list",{method:"POST",data:p});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},c)})),U.apply(this,arguments)}function g(c){return D.apply(this,arguments)}function D(){return D=u()(_()().mark(function c(p){return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,N.request)("/api/common/tag/delete",{method:"POST",data:p});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},c)})),D.apply(this,arguments)}function x(c){return f.apply(this,arguments)}function f(){return f=u()(_()().mark(function c(p){return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,N.request)("/api/pro/tag/get-url-detail",{method:"POST",data:p});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},c)})),f.apply(this,arguments)}}}]);
