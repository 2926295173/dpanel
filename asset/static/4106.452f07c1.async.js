"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4106],{91058:function(R,D,a){var T=a(5574),t=a.n(T),y=a(89035),o=a(38345),s=a(17186),C=a(24739),m=a(5966),O=a(42075),d=a(28036),E=a(85576),f=a(67294),b=a(95089),U=a(12491),i=a(85893),w="docker-image",W=(0,f.forwardRef)(function(l,I){var P=(0,f.useState)(w),j=t()(P,2),v=j[0],g=j[1],_=(0,f.useRef)(),B=(0,f.useState)(""),M=t()(B,2),k=M[0],L=M[1],F=function(){v!="code"?g("code"):g(w)};(0,f.useImperativeHandle)(I,function(){return{addEnvItem:function(u,h){var r,n=(r=_.current)===null||r===void 0?void 0:r.getList(),p=!1;if(n==null||n.map(function(K){if(K.name==u){p=!0;return}}),!p){var e;(e=_.current)===null||e===void 0||e.add({name:u,value:h})}},clear:function(){var u;(u=_.current)===null||u===void 0||(u=u.getList())===null||u===void 0||u.map(function(h,r){var n;(n=_.current)===null||n===void 0||n.remove(r)})}}});function A(c){try{var u,h;c==""&&(c=S());for(var r=(u=(h=_.current)===null||h===void 0||(h=h.getList())===null||h===void 0?void 0:h.length)!==null&&u!==void 0?u:0,n=r;n>=0;n--){var p;(p=_.current)===null||p===void 0||p.remove(n)}var e=c.split(`
`),K=0;e.map(function(x){var Z,G=x.split("=");G.length<2||((Z=_.current)===null||Z===void 0||Z.add({name:G[0],value:G.slice(1).join("=")},K),K++)})}catch(x){console.log(x)}}function S(){if(_&&_.current&&_.current.getList){var c,u=(c=_.current)===null||c===void 0?void 0:c.getList();if(u){var h=[];return u.map(function(r){h.push("".concat(r.name,"=").concat(r.value))}),h.join(`
`)}else return""}else return""}return(0,i.jsxs)(o.Z,{ghost:l.showCardGhost,title:l.label?l.label:null,headerBordered:!0,extra:(l.showCodeMode||l.showImportButton)&&(0,i.jsxs)(O.Z,{children:[l.showImportButton&&(0,i.jsx)("div",{style:{marginBottom:"-25px"},children:(0,i.jsx)(U.Z,{title:"\u5BFC\u5165 env \u6587\u4EF6",onImport:function(u){return A(u),!0},onLoad:function(u){if(u.indexOf("=")<0)throw new Error("\u5BFC\u5165env\u6587\u4EF6\u9519\u8BEF");return!0}})}),l.showCodeMode?(0,i.jsx)(d.ZP,{icon:(0,i.jsx)(y.Z,{}),type:v=="code"?"primary":"default",onClick:F,children:"\u4EE3\u7801\u6A21\u5F0F"},"code"):""]}),children:[(0,i.jsx)(s.u,{name:l.name?l.name:"environment",actionRef:_,creatorButtonProps:l.showAddButton?{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u73AF\u5883\u53D8\u91CF"}:!1,copyIconProps:!1,min:100,label:l.listLabel,children:function(u,h,r){var n=r.getCurrentRowData();return(0,i.jsxs)(C.UW,{children:[(0,i.jsx)(m.Z,{width:l.showInDrawer?"sm":"md",name:"name",label:"\u53D8\u91CF\u540D",required:!0,rules:[{required:!0}],disabled:l.showDisableName,placeholder:"\u8F93\u5165\u53D8\u91CF\u540D\u79F0"}),(0,i.jsx)(m.Z,{width:l.showInDrawer?"sm":"md",name:"value",label:"\u53D8\u91CF\u503C",rules:[{required:!!l.requireValue}],disabled:l.showDisableValue,placeholder:n&&n.label?n.label:"\u8F93\u5165\u53D8\u91CF\u503C"})]})}}),(0,i.jsx)(E.Z,{width:"800px",open:v=="code",onCancel:function(){return g("docker-image")},onOk:function(){A(k),g("docker-image")},children:(0,i.jsx)(b.ZP,{onChange:function(u){return L(u)},value:S(),height:"680px",theme:"light"})})]})});D.Z=W},12491:function(R,D,a){a.d(D,{Z:function(){return O}});var T=a(24963),t=a(88484),y=a(62370),o=a(31418),s=a(28036),C=a(67294),m=a(85893);function O(d){var E=(0,C.useContext)(T.Z),f=E.message,b=E.notice,U=E.lang,i=(0,C.useRef)(null),w=o.Z.useApp(),W=function(){i.current&&(i.current.click(),i.current.onchange=function(I){if(!I||!I.target)return"";var P=new FileReader;P.onload=function(v){var g,_,B=(g=v.target)===null||g===void 0?void 0:g.result;if(d.onLoad)try{d.onLoad&&d.onLoad(B)}catch(M){b.error(M);return}typeof d.onImport=="function"&&(f.success("\u6210\u529F\u5BFC\u5165 ".concat(d.title)),d.onImport(B)),(_=i.current)!==null&&_!==void 0&&_.value&&(i.current.value="")};var j=I.target;if(j.files)try{P.readAsText(j.files[0])}catch(v){b.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(y.Z,{children:(0,m.jsx)(s.ZP,{icon:(0,m.jsx)(t.Z,{}),block:!0,onClick:W,children:d.title})}),(0,m.jsx)("input",{style:{display:"none"},type:"file",ref:i,name:"importFileInput"})]})}},90098:function(R,D,a){a.d(D,{CT:function(){return b},GG:function(){return j},MG:function(){return k},Oh:function(){return W},Pn:function(){return E},U_:function(){return B},VN:function(){return g},iE:function(){return S},ik:function(){return i},im:function(){return C},mg:function(){return I},pm:function(){return O},tw:function(){return u},xC:function(){return F}});var T=a(15009),t=a.n(T),y=a(99289),o=a.n(y),s=a(82346);function C(r){return m.apply(this,arguments)}function m(){return m=o()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/app/compose/create",{method:"POST",data:n}));case 1:case"end":return e.stop()}},r)})),m.apply(this,arguments)}function O(r){return d.apply(this,arguments)}function d(){return d=o()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/app/compose/get-list",{method:"POST",data:n}));case 1:case"end":return e.stop()}},r)})),d.apply(this,arguments)}function E(r){return f.apply(this,arguments)}function f(){return f=o()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,s.request)("/api/app/compose/get-task",{method:"POST",data:n}));case 2:case"end":return e.stop()}},r)})),f.apply(this,arguments)}function b(r){return U.apply(this,arguments)}function U(){return U=o()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,s.request)("/api/app/compose/get-detail",{method:"POST",data:n}));case 2:case"end":return e.stop()}},r)})),U.apply(this,arguments)}function i(r){return w.apply(this,arguments)}function w(){return w=o()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/app/compose/delete",{method:"POST",data:n}));case 1:case"end":return e.stop()}},r)})),w.apply(this,arguments)}function W(r){return l.apply(this,arguments)}function l(){return l=o()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,s.request)("/api/app/compose/container-deploy",{method:"POST",data:n}));case 2:case"end":return e.stop()}},r)})),l.apply(this,arguments)}function I(r){return P.apply(this,arguments)}function P(){return P=o()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,s.request)("/api/app/compose/container-destroy",{method:"POST",data:n}));case 2:case"end":return e.stop()}},r)})),P.apply(this,arguments)}function j(r){return v.apply(this,arguments)}function v(){return v=o()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,s.request)("/api/app/compose/container-ctrl",{method:"POST",data:n}));case 2:case"end":return e.stop()}},r)})),v.apply(this,arguments)}function g(r){return _.apply(this,arguments)}function _(){return _=o()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,s.request)("/api/app/compose/container-log",{method:"POST",data:n}));case 2:case"end":return e.stop()}},r)})),_.apply(this,arguments)}function B(r){return M.apply(this,arguments)}function M(){return M=o()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/app/compose/container-process-kill",{method:"POST",data:n}));case 1:case"end":return e.stop()}},r)})),M.apply(this,arguments)}function k(r){return L.apply(this,arguments)}function L(){return L=o()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/app/compose/get-from-uri",{method:"POST",data:n}));case 1:case"end":return e.stop()}},r)})),L.apply(this,arguments)}function F(r){return A.apply(this,arguments)}function A(){return A=o()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/app/compose/parse",{method:"POST",data:n}));case 1:case"end":return e.stop()}},r)})),A.apply(this,arguments)}function S(r){return c.apply(this,arguments)}function c(){return c=o()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/common/store/deploy",{method:"POST",data:n}));case 1:case"end":return e.stop()}},r)})),c.apply(this,arguments)}function u(r){return h.apply(this,arguments)}function h(){return h=o()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,s.request)("/api/app/compose/download",{method:"POST",data:n,responseType:"blob"}));case 2:case"end":return e.stop()}},r)})),h.apply(this,arguments)}},79245:function(R,D,a){a.d(D,{m:function(){return y}});var T=a(64599),t=a.n(T);function y(o){var s=[];if(!o||o=="")return s;var C=o.matchAll(/\$\{(\w+)[:-?=]*(.*?)\}/g),m=t()(C),O;try{for(m.s();!(O=m.n()).done;){var d=O.value;s.push({name:d[1],value:d[2]?d[2].indexOf("-")==0?d[2].substring(1):d[2]:""})}}catch(E){m.e(E)}finally{m.f()}return s}}}]);
