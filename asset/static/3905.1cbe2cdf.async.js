"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3905],{8287:function(Fe,Ce,n){var Re=n(5574),I=n.n(Re),Me=n(15009),a=n.n(Me),de=n(99289),P=n.n(de),r=n(13822),q=n(83622),N=n(85265),B=n(42075),A=n(83062),D=n(67294),oe=n(81146),y=n(1883),O=n(58638),_e=n(62597),c=n(3616),R=n(82346),C=n(36146),ve=n(85893),ee=(0,D.forwardRef)(function(xe,Le){(0,D.useImperativeHandle)(Le,function(){return{show:function(X){return P()(a()().mark(function Z(){var re;return a()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,(0,r.jV)({md5:X});case 2:re=J.sent,re.data&&we(re.data.info),ge(!0);case 5:case"end":return J.stop()}},Z)}))()}}});var s=(0,D.useState)(!1),e=I()(s,2),he=e[0],ge=e[1],Te=(0,D.useState)(),E=I()(Te,2),Q=E[0],we=E[1],S=(0,D.useRef)(),pe=new C.Uo("components.appDetail");return(0,ve.jsxs)(ve.Fragment,{children:[xe.showTriggerButton&&(0,ve.jsx)(q.ZP,{icon:(0,ve.jsx)(y.Z,{}),onClick:P()(a()().mark(function ue(){return a()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:we(xe.containerInfo),ge(!0);case 2:case"end":return Z.stop()}},ue)})),children:C.FD.format("listManageLog")},"log"),(0,ve.jsx)(N.Z,{title:pe.format("titleLog"),open:he,forceRender:!0,onClose:function(){ge(!1)},afterOpenChange:function(X){if(X)setTimeout(function(){var re,ne;(re=S.current)===null||re===void 0||re.start(),(ne=S.current)===null||ne===void 0||ne.fit()},1e3);else{var Z;(Z=S.current)===null||Z===void 0||Z.close()}},width:c.FK,extra:(0,ve.jsx)(B.Z,{children:(0,ve.jsx)(R.Link,{to:"/container/log/".concat(Q==null?void 0:Q.Name),target:"_blank",onClick:function(){var X;(X=S.current)===null||X===void 0||X.close(),ge(!1)},children:(0,ve.jsx)(A.Z,{title:C.FD.format("listManageOpenNewWindow"),children:(0,ve.jsx)(O.Z,{})})})}),children:Q&&he&&(0,ve.jsx)(oe.Z,{ref:S,showInDrawer:!0,id:"container:log:".concat(Q==null?void 0:Q.Id),request:function(){var ue=P()(a()().mark(function X(Z){var re;return a()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,(0,_e.Tb)({id:(re=Q.Id)!==null&&re!==void 0?re:"",lineTotal:Z.lineTotal,download:Z.download,showTime:Z.showTime});case 2:case"end":return J.stop()}},X)}));return function(X){return ue.apply(this,arguments)}}(),download:function(){var ue=P()(a()().mark(function X(Z){var re,ne,J,be;return a()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,(0,_e.XH)({id:(re=Q.Id)!==null&&re!==void 0?re:"",lineTotal:Z.lineTotal,showTime:Z.showTime});case 2:return J=w.sent,w.next=5,(0,r.jV)({md5:(ne=Q.Id)!==null&&ne!==void 0?ne:""});case 5:return be=w.sent,w.abrupt("return",{data:new Blob([J],{type:"text/plain"}),name:be.data.info.Name.replaceAll("/","")+"_"+new Date().toLocaleDateString()+".log"});case 7:case"end":return w.stop()}},X)}));return function(X){return ue.apply(this,arguments)}}()})})]})});Ce.Z=ee},3905:function(Fe,Ce,n){n.d(Ce,{Z:function(){return ot}});var Re=n(5574),I=n.n(Re),Me=n(15009),a=n.n(Me),de=n(99289),P=n.n(de),r=n(67294),q=n(45605),N=n(38345),B=n(97269),A=n(26412),D=n(42075),oe=n(96074),y=n(25593),O=n(2487),_e=n(76428),c=n(44771),R=n(13822),C=n(24963),ve=n(37413),ee=n(5251),xe=n(82346),Le=n(87662),s=n(36146),e=n(85893);function he(t){var M,i,o,g,U,j,l,p,_,x,d,m=new s.Uo("components.appDetail"),ie=(0,r.useState)(""),V=I()(ie,2),ae=V[0],F=V[1],$=(0,xe.useAccess)(),L=(0,r.useContext)(C.Z),Ie=L.message,De=(0,r.useRef)(),f=[],je=[],Ae=[],ke=(0,r.useState)(""),K=I()(ke,2),v=K[0],b=K[1];return(0,r.useEffect)(function(){t.data&&((0,Le.K3)().then(function(u){var h;b((h=u.data.serverUrl)!==null&&h!==void 0?h:"")}),F(t.data.info.Name))},[t.data]),(0,r.useEffect)(function(){var u,h,W;(u=De.current)===null||u===void 0||u.setFieldValue("restart",{name:(h=t.data.info.HostConfig)===null||h===void 0?void 0:h.RestartPolicy.Name,maxAccept:(W=t.data.info.HostConfig)===null||W===void 0?void 0:W.RestartPolicy.MaximumRetryCount})},[De.current,t.data]),t.data&&t.data.domain&&t.data.domain.map(function(u){Ae.push(u.setting.enableSSL?"https://"+u.serverName:"http://"+u.serverName)}),t.data.info.NetworkSettings.Ports&&Object.entries(t.data.info.NetworkSettings.Ports).forEach(function(u){var h=I()(u,2),W=h[0],T=h[1];if(T){var Ee=W.split("/"),se=I()(Ee,2),le=se[0],Ue=se[1];T.forEach(function(an){an.HostPort?f.push({PrivatePort:le,Type:Ue,IP:an.HostIp,PublicPort:an.HostPort}):je.push({PrivatePort:le,Type:Ue,IP:"",PublicPort:""})})}}),(0,e.jsxs)(e.Fragment,{children:[t.data&&t.data.info.State.Running&&(0,e.jsx)(ve.Z,{publicPort:f,privatePort:je,domain:Ae,serverIp:v,showInDetail:!0,ghost:t.ghost,layout:"inline"}),(0,e.jsx)(N.Z,{title:(0,e.jsx)(q.Z,{}),subTitle:m.format("titleBasic"),ghost:t.ghost,children:(0,e.jsxs)(A.Z,{column:1,bordered:!0,children:[(0,e.jsx)(A.Z.Item,{label:"Hostname",children:(0,e.jsx)(D.Z,{split:(0,e.jsx)(oe.Z,{type:"vertical"}),children:(0,e.jsx)(_e.Z,{title:(M=t.data.info)===null||M===void 0?void 0:M.Config.Hostname})})}),(0,e.jsx)(A.Z.Item,{label:s.FD.format("listName"),children:(0,e.jsxs)(D.Z,{split:(0,e.jsx)(oe.Z,{type:"vertical"}),children:[(0,e.jsx)(_e.Z,{title:(i=t.data.info)===null||i===void 0?void 0:i.Id.substring(0,12)}),(0,e.jsx)(y.Z.Text,{copyable:!0,editable:{tooltip:s.FD.format("listManageEdit"),onChange:function(){var u=P()(a()().mark(function W(T){var Ee;return a()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if((Ee=t.data.info)!==null&&Ee!==void 0&&Ee.Id){le.next=2;break}return le.abrupt("return");case 2:return le.next=4,(0,R.eE)({md5:t.data.info.Id,name:T});case 4:F(T),Ie.success(s.FD.format("finish"));case 6:case"end":return le.stop()}},W)}));function h(W){return u.apply(this,arguments)}return h}()},children:(0,ee.fi)(ae,"/")})]})}),(0,e.jsx)(A.Z.Item,{label:s.FD.format("listNetwork"),children:((o=t.data.info)===null||o===void 0?void 0:o.State.Running)&&(0,e.jsxs)(A.Z,{column:1,bordered:!0,children:[t.data.info.NetworkSettings.Networks&&Object.keys(t.data.info.NetworkSettings.Networks).map(function(u,h){var W,T,Ee;return(0,e.jsx)(A.Z.Item,{label:u,children:u=="host"?s.FD.format("listNetworkUseHost"):(0,e.jsxs)(D.Z,{direction:"vertical",children:[(0,e.jsx)(_e.Z,{title:(W=t.data.info)===null||W===void 0?void 0:W.NetworkSettings.Networks[u].IPAddress}),(T=t.data.info)===null||T===void 0?void 0:T.NetworkSettings.Networks[u].Gateway,(Ee=t.data.info)===null||Ee===void 0?void 0:Ee.NetworkSettings.Networks[u].MacAddress]})},h)}),((g=t.data.info.HostConfig)===null||g===void 0?void 0:g.ExtraHosts)&&(0,e.jsx)(A.Z.Item,{label:s.FD.format("listNetworkUseHost"),children:(0,e.jsx)(D.Z,{direction:"vertical",children:t.data.info.HostConfig.ExtraHosts.map(function(u,h){if(u.indexOf(":")>-1){var W=u.split(":");return"".concat(W[0]," - ").concat(W.slice(1).join(":"))}})})},"host")]})}),(0,e.jsx)(A.Z.Item,{label:s.FD.format("listRunTime"),children:m.format("runTimeValue",{create:new Date((U=(j=t.data.info)===null||j===void 0?void 0:j.Created)!==null&&U!==void 0?U:"").toLocaleString(),upgrade:new Date((l=(p=t.data.info)===null||p===void 0?void 0:p.State.StartedAt)!==null&&l!==void 0?l:"").toLocaleString()})}),$.canSeeContainerListManage&&(0,e.jsx)(A.Z.Item,{label:s.FD.format("listRestartPolicy"),children:(0,e.jsx)(B.A,{name:"container-restart",submitter:!1,onValuesChange:function(){var u=P()(a()().mark(function h(W,T){var Ee,se;return a()().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:if((Ee=t.data.info)!==null&&Ee!==void 0&&Ee.Id){Ue.next=2;break}return Ue.abrupt("return");case 2:return Ue.next=4,(0,R.eE)({md5:t.data.info.Id,restart:T.restart});case 4:return se=Ue.sent,Ie.success(s.FD.format("finish")),Ue.abrupt("return");case 7:case"end":return Ue.stop()}},h)}));return function(h,W){return u.apply(this,arguments)}}(),layout:"inline",formRef:De,children:(0,e.jsx)(c.Z,{ghost:!0,defaultValue:(_=t.data.info)===null||_===void 0||(_=_.HostConfig)===null||_===void 0?void 0:_.RestartPolicy.Name})})}),(0,e.jsx)(A.Z.Item,{label:s.FD.format("listEnv"),children:(0,e.jsx)(O.Z,{dataSource:(x=(d=t.data.info)===null||d===void 0?void 0:d.Config.Env)!==null&&x!==void 0?x:[],renderItem:function(h){var W=h.split("=");return(0,e.jsxs)(O.Z.Item,{children:[(0,e.jsx)(y.Z.Text,{code:!0,children:W[0]})," = ",(0,e.jsx)(y.Z.Text,{copyable:!0,children:W.slice(1).join("=")})]})}})})]})})]})}var ge=n(60433),Te=n(85265),E=n(86250),Q=n(31574);function we(t){var M,i=new s.Uo("components.appDetail");return t.data&&t.data.Mounts&&t.data.Mounts.length>0&&(0,e.jsx)(N.Z,{ghost:t.ghost,title:(0,e.jsx)(Q.Z,{}),subTitle:i.format("titleVolume"),children:(0,e.jsx)(A.Z,{column:1,bordered:!0,children:(M=t.data)===null||M===void 0?void 0:M.Mounts.map(function(o,g){return(0,e.jsx)(A.Z.Item,{styles:{label:{width:"50%",wordBreak:"break-word"},content:{width:"50%",wordBreak:"break-word"}},label:o.Type=="volume"?o.Name:o.Source,children:o.Destination},g)})})})}var S=n(43425),pe=n(74842),ue=n(33160),X=n(87784),Z=n(30159),re=n(89035),ne=n(95591),J=n(83622),be=n(94359),G=n(80821),w=n(99922),z=n(96486),Ne=n.n(z),ye=n(29463),ce=n(8287),me=n(19632),H=n.n(me),Be=n(3616),Y=n(12122),fe=n(60940),k=n(27619);function Ze(t){return Pe.apply(this,arguments)}function Pe(){return Pe=P()(a()().mark(function t(M){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,xe.request)("/api/app/container/get-stat-info",{method:"POST",data:M}));case 1:case"end":return o.stop()}},t)})),Pe.apply(this,arguments)}function Oe(t){return te.apply(this,arguments)}function te(){return te=P()(a()().mark(function t(M){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,xe.request)("/api/app/container/get-process-info",{method:"POST",data:M}));case 1:case"end":return o.stop()}},t)})),te.apply(this,arguments)}var Se={total:0,memory:{usage:[{name:"use",data:[]},{name:"all",show:!1,data:[]}],source:{usage:0,limit:0}},cpu:{usage:[{name:"use",data:[]}],source:{usage:0,limit:0}},network:{usage:[{name:"rx",data:[]},{name:"tx",data:[]}],source:{usageIn:0,usageOut:0}},io:{usage:[{name:"read",data:[]},{name:"write",data:[]}],source:{usageRead:0,usageWrite:0}}},$e=function(M,i){var o,g,U;switch(i.type){case"clear":return Se;case"update":var j=new Date().toLocaleTimeString(),l=JSON.parse(JSON.stringify(Se));return(o=i.payload)!==null&&o!==void 0&&o.memory&&(l.memory.usage=[{name:"use",data:[].concat(H()(M.memory.usage[0].data.slice(-20)),[{date:j,value:Math.round(i.payload.memory.in)}])},{name:"all",show:!1,data:[].concat(H()(M.memory.usage[1].data.slice(-20)),[{date:j,value:Math.round(i.payload.memory.out)}])}],l.memory.source={usage:i.payload.memory.in,limit:i.payload.memory.out},l.cpu.usage=[{name:"use",data:[].concat(H()(M.cpu.usage[0].data.slice(-20)),[{date:j,value:i.payload.cpu.toFixed(2)}])}],l.cpu.source={usage:i.payload.cpu,limit:100}),(g=i.payload)!==null&&g!==void 0&&g.networkIO&&(l.network.source={usageIn:parseFloat(i.payload.networkIO.in.toFixed(2)),usageOut:parseFloat(i.payload.networkIO.out.toFixed(2))},l.network.usage=[{name:"rx",data:[].concat(H()(M.network.usage[0].data.slice(-20)),[{date:j,value:i.payload.networkIO.out.toFixed(2)}])},{name:"tx",data:[].concat(H()(M.network.usage[1].data.slice(-20)),[{date:j,value:i.payload.networkIO.in.toFixed(2)}])}]),(U=i.payload)!==null&&U!==void 0&&U.blockIO&&(l.io.source={usageRead:parseFloat(i.payload.blockIO.out.toFixed(2)),usageWrite:parseFloat(i.payload.blockIO.in.toFixed(2))},l.io.usage=[{name:"read",data:[].concat(H()(M.io.usage[0].data.slice(-20)),[{date:j,value:i.payload.blockIO.out.toFixed(2)}])},{name:"write",data:[].concat(H()(M.io.usage[1].data.slice(-20)),[{date:j,value:i.payload.blockIO.in.toFixed(2)}])}]),l}},Ve=(0,r.forwardRef)(function(t,M){var i=(0,r.useState)(!1),o=I()(i,2),g=o[0],U=o[1],j=(0,r.useReducer)($e,Se),l=I()(j,2),p=l[0],_=l[1],x=(0,r.useState)(),d=I()(x,2),m=d[0],ie=d[1],V=(0,r.useContext)(C.Z),ae=V.loading,F=(0,xe.useModel)("subscriber"),$=new s.Uo("components.appDetail");(0,r.useImperativeHandle)(M,function(){return{}});function L(De){return Ie.apply(this,arguments)}function Ie(){return Ie=P()(a()().mark(function De(f){var je,Ae;return a()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return ae.show(),Ze({id:f}),K.next=4,Oe({id:f});case 4:je=K.sent,Ae={columns:[],data:[]},je.data.list.Titles.map(function(v){Ae.columns.push({title:v,label:v,dataIndex:v})}),je.data.list.Processes.map(function(v,b){Ae.data.push({UID:v[0],PID:v[1],PPID:v[2],C:v[3],STIME:v[4],TTY:v[5],TIME:v[6],CMD:v[7]})}),ie(Ae),ae.destroy();case 10:case"end":return K.stop()}},De)})),Ie.apply(this,arguments)}return(0,r.useEffect)(function(){return function(){F.progress.close("container:stat:"+t.containerInfo.Id),_({type:"clear",payload:{}})}},[t.containerInfo]),(0,e.jsxs)(e.Fragment,{children:[t.showTriggerButton&&(0,e.jsx)(J.ZP,{onClick:P()(a()().mark(function De(){return a()().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:U(!0);case 1:case"end":return je.stop()}},De)})),icon:(0,e.jsx)(Y.Z,{}),children:s.FD.format("listManageStat")},"log"),(0,e.jsxs)(Te.Z,{title:$.format("titleStat"),open:g,onClose:function(){U(!1)},afterOpenChange:function(f){f?setTimeout(function(){var je;!((je=t.containerInfo)===null||je===void 0)&&je.Name&&L(t.containerInfo.Id),F.addDataHandler("container:stat:".concat(t.containerInfo.Id),function(Ae){_({type:"update",payload:Ae.data})})},500):(F.progress.close("container:stat:"+t.containerInfo.Id),_({type:"clear"}))},width:Be.R_,children:[(0,e.jsxs)(N.Z,{ghost:!0,direction:"row",wrap:!0,gutter:[20,20],children:[p.memory&&p.memory.source&&(0,e.jsx)(N.Z,{colSpan:12,title:(0,e.jsx)(Y.Z,{}),subTitle:"Memory usage: ".concat((0,ee.FI)(p.memory.source.usage)," / ").concat((0,ee.FI)(p.memory.source.limit)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(k.Z,{name:"container-memory",data:p.memory.usage,yLabelFormatter:function(f){return(0,ee.FI)(parseFloat(f))},yValueFormatter:function(f){return(0,ee.FI)(parseFloat(f))},yDomainMaxCallback:function(f){return f.min*2}})}),(0,e.jsx)(N.Z,{colSpan:12,title:(0,e.jsx)(Y.Z,{}),subTitle:"Cpu usage: ".concat(p.cpu.source.usage.toFixed(2),"%"),headerBordered:!0,bordered:!0,children:(0,e.jsx)(k.Z,{name:"container-cpu",data:p.cpu.usage,yDomainMaxCallback:function(f){return f.min*100},yLabelFormatter:function(f){return"".concat(parseFloat(f).toFixed(2),"%")}})}),p.io&&p.io.source&&(0,e.jsx)(N.Z,{colSpan:12,title:(0,e.jsx)(Y.Z,{}),subTitle:"I/O: ".concat((0,ee.FI)(p.io.source.usageRead)," / ").concat((0,ee.FI)(p.io.source.usageWrite)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(k.Z,{name:"container-disk",data:p.io.usage,yDomainMaxCallback:function(f){return f.max*2},yLabelFormatter:function(f){return(0,ee.FI)(parseFloat(f))}})}),p.network&&p.network.source&&(0,e.jsx)(N.Z,{colSpan:12,title:(0,e.jsx)(Y.Z,{}),subTitle:"Network: ".concat((0,ee.FI)(p.network.source.usageIn)," / ").concat((0,ee.FI)(p.network.source.usageOut)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(k.Z,{name:"container-network",data:p.network.usage,yDomainMaxCallback:function(f){return f.max*2},yLabelFormatter:function(f){return(0,ee.FI)(parseFloat(f))}})})]}),(0,e.jsx)(N.Z,{title:(0,e.jsx)(ge.Z,{}),subTitle:"Progress",children:(0,e.jsx)(fe.Z,{scroll:{x:"max-content"},rowKey:"PID",columns:m==null?void 0:m.columns,dataSource:m==null?void 0:m.data,pagination:{pageSize:10}})})]})]})}),He=Ve,dn=(0,r.createContext)({}),Je=dn,un=(0,r.forwardRef)(function(t,M){(0,r.useImperativeHandle)(M,function(){return{showConsole:l}});var i=new s.Uo("components.appDetail"),o=(0,r.useRef)(),g=(0,r.useContext)(Je),U=g.reload,j=g.loadingRef;function l(p){var _;(_=o.current)===null||_===void 0||_.show({url:"/console/container/".concat(t.data.Id),title:t.data.Name,workDir:p})}return(0,e.jsx)(N.Z,{title:(0,e.jsx)(S.Z,{}),ghost:t.ghost,subTitle:(0,e.jsxs)(D.Z,{children:[i.format("titleOp")," - ",function(p){if(p){var _=p.State.Status,x=p.State.Status;if(p.State.Health&&p.State.Health.Status=="unhealthy"){var d,m;_=p.State.Health.Status,x=(d=(m=Ne().last(p.State.Health.Log))===null||m===void 0?void 0:m.Output)!==null&&d!==void 0?d:_}return(0,e.jsx)(be.Z,{status:"container.".concat(_),tip:x})}}(t.data)]}),children:(0,e.jsxs)(D.Z,{wrap:!0,children:[(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(pe.Z,{}),disabled:t.data&&t.data.State.Running||t.data&&t.data.State.Paused},action:function(){var _,x,d;return(_=j.current)===null||_===void 0||_.show(),(0,R.IW)({md5:(x=(d=t.data)===null||d===void 0?void 0:d.Id)!==null&&x!==void 0?x:"",operate:"start"}).finally(function(){var m;(m=j.current)===null||m===void 0||m.destroy()})},onSuccess:function(){return U()},children:s.FD.format("listManageStart")}),(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(ue.Z,{})},action:function(){var _,x,d;return(_=j.current)===null||_===void 0||_.show(),(0,R.IW)({md5:(x=(d=t.data)===null||d===void 0?void 0:d.Id)!==null&&x!==void 0?x:"",operate:"restart"}).finally(function(){var m;(m=j.current)===null||m===void 0||m.destroy()})},onSuccess:function(){return U()},children:s.FD.format("listManageRestart")}),(0,e.jsx)(G.Z,{action:function(){var _,x,d;return(_=j.current)===null||_===void 0||_.show(),(0,R.IW)({md5:(x=(d=t.data)===null||d===void 0?void 0:d.Id)!==null&&x!==void 0?x:"",operate:"stop"}).finally(function(){var m;(m=j.current)===null||m===void 0||m.destroy()})},buttonProps:{danger:!0,icon:(0,e.jsx)(X.Z,{}),disabled:t.data&&t.data.State.Dead},onSuccess:function(){return U()},children:s.FD.format("listManageStop")}),(0,e.jsx)(G.Z,{action:function(){var _,x,d;return(_=j.current)===null||_===void 0||_.show(),(0,R.IW)({md5:(x=(d=t.data)===null||d===void 0?void 0:d.Id)!==null&&x!==void 0?x:"",operate:"pause"}).finally(function(){var m;(m=j.current)===null||m===void 0||m.destroy()})},onSuccess:function(){return U()},buttonProps:{icon:(0,e.jsx)(Z.Z,{}),disabled:t.data&&t.data&&t.data.State.Paused},children:s.FD.format("listManagePause")}),(0,e.jsx)(G.Z,{action:function(){var _,x,d;return(_=j.current)===null||_===void 0||_.show(),(0,R.IW)({md5:(x=(d=t.data)===null||d===void 0?void 0:d.Id)!==null&&x!==void 0?x:"",operate:"unpause"}).finally(function(){var m;(m=j.current)===null||m===void 0||m.destroy()})},onSuccess:function(){return U()},buttonProps:{icon:(0,e.jsx)(pe.Z,{}),disabled:t.data&&!t.data.State.Paused},children:s.FD.format("listManageUnpause")}),(0,e.jsx)(oe.Z,{type:"vertical"}),t.data&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(w.Z,{showFileExplorer:!0,ref:o}),(0,e.jsx)(J.ZP,{type:"primary",onClick:function(){t.data&&l(t.data.Config.WorkingDir)},icon:(0,e.jsx)(re.Z,{}),children:s.FD.format("listManageConsole")})]}),t.data&&t.data.State.Running&&(0,e.jsx)(ye.Z,{showConsole:!0,type:"container",name:(0,ee.fi)(t.data.Name,"/"),title:(0,ee.fi)(t.data.Name,"/"),trigger:(0,e.jsx)(J.ZP,{icon:(0,e.jsx)(ne.Z,{}),children:s.FD.format("listManageFilePath")})}),t.data&&t.data.State.Running&&(0,e.jsx)(ce.Z,{containerInfo:t.data,showTriggerButton:!0}),t.data&&t.data.State.Running&&(0,e.jsx)(He,{containerInfo:t.data,showTriggerButton:!0})]})})}),cn=un,Ge=n(62597),mn=n(58638),rn=n(60219),on=n(82061),sn=n(25035),fn=n(57132),_n=n(86548),We=n(62370),vn=n(5966),hn=n(52688),Ke=n(84567),gn=n(25278),Ye=n(83062),pn=n(85418),jn=n(40411),En=n(24739),ln=n(97462),xn=n(70146);function Pn(t){var M=(0,r.useRef)(),i=new s.Uo("components.appDetail");return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(rn.Z,{})},confirmProps:{onOpenChange:function(g,U){var j,l;!((j=M.current)===null||j===void 0)&&j.resetFields&&((l=M.current)===null||l===void 0||l.resetFields())},description:(0,e.jsxs)(D.Z,{style:{width:650,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,e.jsx)(y.Z.Text,{children:(0,e.jsx)("ul",{children:i.prefix("backupVolumeTipOption",4).map(function(o,g){return(0,e.jsxs)("li",{children:[o," ",g==3&&(0,e.jsx)(xe.Link,{to:"/app/backup",children:s.Ob.format("container.backup")})]},g)})})}),(0,e.jsxs)(B.A,{layout:"horizontal",formRef:M,submitter:!1,children:[(0,e.jsxs)(En.UW,{children:[(0,e.jsx)(We.Z,{valuePropName:"checked",name:"enableSelectVolume",children:(0,e.jsx)(Ke.Z,{disabled:!t.container.Mounts||t.container.Mounts.length==0,children:i.format("backupVolumeEnableSelectVolume")})}),(0,e.jsx)(We.Z,{valuePropName:"checked",name:"enableImage",children:(0,e.jsx)(Ke.Z,{children:i.format("backupVolumeEnableImage")})}),(0,e.jsx)(ln.Z,{name:["enableImage"],children:function(g){var U=g.enableImage;if(U)return(0,e.jsx)(We.Z,{valuePropName:"checked",name:"enableCommitImage",children:(0,e.jsx)(Ke.Z,{children:i.format("backupVolumeEnableCommitImage")})})}})]}),(0,e.jsx)(ln.Z,{name:["enableSelectVolume"],children:function(g){var U=g.enableSelectVolume;return U&&(0,e.jsx)(D.Z,{wrap:!0,children:t.container.Mounts&&t.container.Mounts.map(function(j,l){return(0,e.jsx)(We.Z,{valuePropName:"checked",name:["volume",j.Destination],children:(0,e.jsx)(Ke.Z,{children:j.Destination})},"volume-".concat(l))})})}})]})]})},action:P()(a()().mark(function o(){var g,U,j,l;return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,xn.yB)({id:t.container.Name,enableImage:(g=M.current)===null||g===void 0?void 0:g.getFieldValue("enableImage"),volume:Object.keys((U=(j=M.current)===null||j===void 0?void 0:j.getFieldValue("volume"))!==null&&U!==void 0?U:{}).filter(function(x){return x}),enableCommitImage:(l=M.current)===null||l===void 0?void 0:l.getFieldValue("enableCommitImage")});case 2:case"end":return _.stop()}},o)})),children:i.format("backupVolumeButton")})})}var Dn=n(99861),Xe=n(73813),On=n(50888),In=n(16596),ze=n(1699),qe=n(29453),Cn=n(71965);function Rn(t){return en.apply(this,arguments)}function en(){return en=P()(a()().mark(function t(M){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,xe.request)("/api/pro/container-rollback/get-list",{data:M,method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},t)})),en.apply(this,arguments)}function Mn(t){return nn.apply(this,arguments)}function nn(){return nn=P()(a()().mark(function t(M){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,xe.request)("/api/pro/container-rollback/restore",{data:M,method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},t)})),nn.apply(this,arguments)}var yn=n(86615),bn=n(40056),Zn=n(89240);function Tn(t){var M=(0,xe.useAccess)(),i=(0,r.useState)(),o=I()(i,2),g=o[0],U=o[1],j=(0,r.useRef)(),l=new s.Uo("components.appDetail");return(0,r.useEffect)(function(){M.canSeeEnableCe||Rn({siteName:(0,Zn.HJ)(t.detail.Name)}).then(function(p){U(p.data.list)})},[t.detail]),(0,e.jsx)(ze.u,{access:["canSeeEnableCe"],showProTips:!0,children:function(_){var x=_.canSeeEnableCe;return(0,e.jsx)(G.Z,{action:function(){var m;return Mn({id:(m=j.current)===null||m===void 0?void 0:m.getFieldValue("id"),enableForce:!0})},buttonProps:{icon:(0,e.jsx)(Cn.Z,{}),disabled:x},confirmProps:{onOpenChange:function(m,ie){var V;!((V=j.current)===null||V===void 0)&&V.resetFields&&j.current.resetFields()},description:(0,e.jsx)(B.A,{formRef:j,submitter:!1,children:(0,e.jsxs)(D.Z,{direction:"vertical",style:{width:500},size:[0,15],children:[(0,e.jsx)(y.Z.Text,{children:l.format("rollbackTip")}),g&&g.length>0?(0,e.jsx)(yn.Z.Group,{fieldProps:{style:{display:"flex",flexDirection:"column",gap:8}},name:"id",label:"",options:g&&g.map(function(d){return{label:"id: ".concat(d.id," ").concat(s.FD.format("listDeletedAt"),": ").concat((0,ee.NF)(d.deletedAt)),value:d.id}})}):(0,e.jsx)(bn.Z,{message:l.format("rollbackEmptyTip"),style:{marginBottom:10}})]})})},onSuccess:function(){var m;(m=j.current)===null||m===void 0||m.resetFields(),t.onFinish&&t.onFinish()},children:s.FD.format("listManageRollback")})}})}var Sn=n(184),tn=n(14946),Ln=n(9773);function An(t){return(0,e.jsxs)(D.Z,{children:[t.title,(0,e.jsx)(Ye.Z,{title:t.help,children:(0,e.jsx)(sn.Z,{})})]})}var Un=n(55943),Fn=n(16970),wn=n(20743),$n=n(78451),Wn=(0,r.forwardRef)(function(t,M){var i;(0,r.useImperativeHandle)(M,function(){return{}});var o=(0,r.useRef)(),g=(0,r.useRef)(),U=(0,r.useState)(),j=I()(U,2),l=j[0],p=j[1];return(0,r.useEffect)(function(){var _,x;p(t.containerInfo),!((_=o.current)===null||_===void 0)&&_.reloadAndRest&&((x=o.current)===null||x===void 0||x.reloadAndRest())},[t.containerInfo]),(0,e.jsxs)(N.Z,{ghost:t.ghost,children:[(0,e.jsx)(Un.Z,{ref:g}),(0,e.jsx)(Ln.Z,{scroll:{x:"max-content"},rowKey:"key",actionRef:o,pagination:!1,ghost:!0,columns:[{title:s.FD.format("listContainerNetworkName"),key:"name",dataIndex:"networkName"},{title:s.FD.format("listContainerName"),key:"containerName",dataIndex:"containerName",width:100,render:function(x,d,m,ie,V){return(0,e.jsx)($n.Z,{content:(0,ee.fi)(d.containerName,"/")})}},{title:(0,e.jsx)(An,{title:"hostname",help:s.FD.format("listHostnameTip")}),key:"hostName",render:function(x,d,m){return d.hostName?(0,e.jsx)(D.Z,{direction:"vertical",children:d.hostName.map(function(ie,V){if(ie)return(0,e.jsx)(y.Z.Text,{copyable:!0,keyboard:!0,children:ie},V)})}):(0,e.jsx)(e.Fragment,{})}},{title:"Ip",key:"ip",render:function(x,d,m,ie,V){return(0,e.jsxs)(D.Z,{direction:"vertical",children:[(0,e.jsx)("span",{children:d.networkInfo.IPv4Address}),d.networkInfo.IPv6Address&&(0,e.jsx)("span",{children:d.networkInfo.IPv6Address})]})}},{title:s.FD.format("listManage"),key:"option",width:50,fixed:"right",render:function(x,d,m,ie,V){return(0,e.jsxs)(D.Z,{children:[d.networkName!=""&&(0,e.jsx)(y.Z.Link,{onClick:function(){var F;(F=g.current)===null||F===void 0||F.show(d.networkName)},children:(0,e.jsx)(Ye.Z,{title:s.FD.format("listManageDetail"),children:(0,e.jsx)(S.Z,{})})}),d.key!="bridge"&&d.key!="none"&&d.key!="host"&&d.networkName!=""&&(0,e.jsx)(G.Z,{buttonProps:{type:"link",danger:!0},confirmProps:{description:"notification.confirm.title"},action:function(){return(0,tn.t9)({name:d.networkName,containerName:t.containerInfo.Name})},onSuccess:function(){var F,$;!((F=o.current)===null||F===void 0)&&F.reloadAndRest&&(($=o.current)===null||$===void 0||$.reloadAndRest())},tips:s.FD.format("listManageExit"),children:(0,e.jsx)(on.Z,{})})]})}}],request:function(){var _=P()(a()().mark(function x(d,m,ie){var V,ae;return a()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,R.jV)({md5:t.containerInfo.Name});case 2:return V=$.sent,p(V.data.info),$.next=6,(0,tn._3)({name:Object.keys(V.data.info.NetworkSettings.Networks)});case 6:return ae=$.sent,$.abrupt("return",{data:ae.data.list,success:!0,total:ae.data.list.length});case 8:case"end":return $.stop()}},x)}));return function(x,d,m){return _.apply(this,arguments)}}(),toolBarRender:function(){return[(0,e.jsx)(wn.Z,{showTriggerButton:!0,onSelect:function(){var x=P()(a()().mark(function d(m){var ie,V;return a()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,tn.HY)({name:m.Name,containerName:t.containerInfo.Name,ipV4:""});case 2:V=F.sent,!((ie=o.current)===null||ie===void 0)&&ie.reloadAndRest&&o.current.reloadAndRest();case 4:case"end":return F.stop()}},d)}));return function(d){return x.apply(this,arguments)}}()},"joinNetwork"),(0,e.jsx)(Fn.Z,{onFinish:function(){var d,m;!((d=o.current)===null||d===void 0)&&d.reloadAndRest&&((m=o.current)===null||m===void 0||m.reloadAndRest())}},"create")]},search:!1,expandable:{expandRowByClick:!1,expandedRowKeys:Object.keys((i=l==null?void 0:l.NetworkSettings.Networks)!==null&&i!==void 0?i:{bridge:[]})}})]})}),Bn=Wn,Kn=n(26522),Nn=(0,r.forwardRef)(function(t,M){(0,r.useImperativeHandle)(M,function(){return{}});var i=(0,r.useState)(!1),o=I()(i,2),g=o[0],U=o[1],j=new s.Uo("components.appDetail");return(0,e.jsx)(Sn.a,{submitter:!1,title:j.format("titleNetwork"),onOpenChange:function(p){U(p)},drawerProps:{width:Be.R_},open:g,trigger:(0,e.jsx)(J.ZP,{icon:(0,e.jsx)(Kn.Z,{}),children:s.Ob.format("docker.network")}),children:(0,e.jsx)(Bn,{ghost:!0,containerInfo:t.containerInfo})})}),kn=Nn,Vn=n(84941),Hn=(0,r.forwardRef)(function(t,M){var i=new s.Uo("components.appDetail"),o=(0,r.useContext)(Je),g=o.reload,U=o.loadingRef,j=o.close,l=o.redirect,p=(0,r.useRef)(),_=(0,r.useRef)(),x=(0,r.useRef)(),d=(0,r.useRef)(),m=(0,r.useRef)(),ie=(0,r.useRef)(),V=(0,r.useRef)(),ae=(0,r.useState)({status:0,error:""}),F=I()(ae,2),$=F[0],L=F[1],Ie=(0,r.useState)(),De=I()(Ie,2),f=De[0],je=De[1];(0,r.useImperativeHandle)(M,function(){return{}});function Ae(K){return ke.apply(this,arguments)}function ke(){return ke=P()(a()().mark(function K(v){var b,u,h;return a()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(u=-2,!v.ignore){T.next=6;break}if(!(v.ignore.indexOf("".concat(v.info.Name,"@*"))>-1)){T.next=4;break}return T.abrupt("return",{status:-2,error:""});case 4:if(!(v.ignore.indexOf("".concat(v.info.Name,"@").concat(v.info.Image))>-1)){T.next=6;break}return T.abrupt("return",{status:-2,error:""});case 6:return T.next=8,(0,Xe.ZQ)({tag:(b=v.info.Config.Image)!==null&&b!==void 0?b:"",md5:v.info.Image,cacheTime:3600}).catch(function(Ee){u=-1});case 8:if(h=T.sent,!(h&&h.data.error&&h.data.error!="")){T.next=11;break}return T.abrupt("return",{status:-1,error:h.data.error});case 11:return h&&(h.data.digestLocal&&h.data.digestLocal.length>0?u=h.data.upgrade?1:2:h.data.error&&h.data.error!=""?u=-1:h.data.digestLocal.length==0?u=-3:u=-2),T.abrupt("return",{status:u,error:""});case 13:case"end":return T.stop()}},K)})),ke.apply(this,arguments)}return(0,r.useEffect)(function(){L({status:0}),Ae(t.data).then(function(K){L(K)}),je(t.data)},[t.data]),(0,e.jsxs)(N.Z,{ghost:t.ghost,title:(0,e.jsx)(S.Z,{}),subTitle:i.format("titleManage"),children:[(0,e.jsx)(Vn.Z,{onFinish:function(){var K=P()(a()().mark(function v(b){return a()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:b&&l(b);case 1:case"end":return h.stop()}},v)}));return function(v){return K.apply(this,arguments)}}(),ref:p},"createByImage"),(0,e.jsxs)(D.Z,{wrap:!0,children:[(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(mn.Z,{})},confirmProps:{onOpenChange:function(v,b){var u;!((u=_.current)===null||u===void 0)&&u.resetFields&&_.current.resetFields()},description:(0,e.jsxs)(D.Z,{style:{width:500,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,e.jsx)(y.Z.Text,{children:i.format("exportConfirm")}),(0,e.jsx)(B.A,{layout:"horizontal",formRef:_,submitter:!1,children:(0,e.jsx)(We.Z,{valuePropName:"checked",name:"enableExportToPath",children:(0,e.jsx)(Ke.Z,{children:i.format("exportEnableExportToPath")})},"enableExportToPath")})]})},action:function(){var v,b,u;return(0,R.LJ)({md5:(v=f==null?void 0:f.info.Id)!==null&&v!==void 0?v:"",enableExportToPath:(b=(u=_.current)===null||u===void 0?void 0:u.getFieldValue("enableExportToPath"))!==null&&b!==void 0?b:!1})},children:i.format("exportButton")}),(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(rn.Z,{})},confirmProps:{onOpenChange:function(v,b){var u;!((u=d.current)===null||u===void 0)&&u.resetFields&&d.current.resetFields()},title:i.format("commitConfirmTitle"),description:(0,e.jsx)(D.Z,{style:{width:400,marginTop:"10px",paddingRight:"10px"},direction:"vertical",children:(0,e.jsx)(B.A,{formRef:d,submitter:!1,children:(0,e.jsx)(We.Z,{name:"saveImageName",children:(0,e.jsx)(gn.Z,{addonBefore:i.format("commitConfirmSaveImageName")})})})})},action:function(){var v,b,u;return(0,R.Re)({md5:(v=f==null?void 0:f.info.Id)!==null&&v!==void 0?v:"",name:(b=(u=d.current)===null||u===void 0?void 0:u.getFieldValue("saveImageName"))!==null&&b!==void 0?b:f==null?void 0:f.info.Name})},children:i.format("commitButton")}),f&&(0,e.jsx)(ze.u,{access:"canSeeContainerBackup",children:(0,e.jsx)(Pn,{container:f.info})}),(0,e.jsx)(oe.Z,{type:"vertical"}),f&&(0,e.jsx)(G.Z,{action:P()(a()().mark(function K(){var v,b,u,h,W,T;return a()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return(v=U.current)===null||v===void 0||v.show(),se.abrupt("return",Promise.all([(0,Ge.Ct)({md5:(b=f==null?void 0:f.info.Id)!==null&&b!==void 0?b:"",deleteImage:(u=(h=x.current)===null||h===void 0?void 0:h.getFieldValue("deleteImage"))!==null&&u!==void 0?u:!1,deleteVolume:(W=(T=x.current)===null||T===void 0?void 0:T.getFieldValue("deleteVolume"))!==null&&W!==void 0?W:!1}),(0,qe.rn)({name:f==null?void 0:f.info.Name})]).finally(function(){var le;(le=U.current)===null||le===void 0||le.destroy()}));case 2:case"end":return se.stop()}},K)})),buttonProps:{danger:!0,type:"primary",icon:(0,e.jsx)(on.Z,{})},confirmProps:{description:(0,e.jsxs)(D.Z,{style:{width:200},direction:"vertical",children:[(0,e.jsx)(y.Z.Text,{children:s.FD.format("confirm.title")}),(0,e.jsxs)(B.A,{formRef:x,layout:"inline",submitter:!1,children:[(0,e.jsx)(We.Z,{addonAfter:(0,e.jsx)(Ye.Z,{title:i.format("deleteConfirmTip"),children:(0,e.jsx)(sn.Z,{})}),name:"deleteVolume",valuePropName:"checked",children:(0,e.jsx)(Ke.Z,{children:i.format("deleteConfirmDeleteVolume")})}),(0,e.jsx)(We.Z,{name:"deleteImage",valuePropName:"checked",children:(0,e.jsx)(Ke.Z,{children:i.format("deleteConfirmDeleteImage")})})]})]})},onSuccess:function(){j()},children:i.format("deleteButton")}),(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(fn.Z,{})},confirmProps:{description:(0,e.jsxs)(D.Z,{style:{width:400,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(y.Z.Text,{children:i.format("copyConfirmTip")}),(0,e.jsxs)(B.A,{formRef:m,submitter:!1,layout:"horizontal",children:[(0,e.jsx)("br",{}),(0,e.jsx)(vn.Z,{label:i.format("copyCopyName"),name:"copyName"}),(0,e.jsx)(hn.Z,{label:i.format("copyEnableRandomPort"),name:"enableRandomPort"})]})]})},action:P()(a()().mark(function K(){var v,b,u,h,W;return a()().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,(0,R.aF)({md5:(v=f==null?void 0:f.info.Id)!==null&&v!==void 0?v:"",copyName:(b=(u=m.current)===null||u===void 0?void 0:u.getFieldValue("copyName"))!==null&&b!==void 0?b:"",enableRandomPort:(h=(W=m.current)===null||W===void 0?void 0:W.getFieldValue("enableRandomPort"))!==null&&h!==void 0?h:!1});case 2:return Ee.abrupt("return",Ee.sent);case 3:case"end":return Ee.stop()}},K)})),onSuccess:function(v){var b;(b=m.current)===null||b===void 0||b.resetFields()},children:i.format("copyButton")}),(0,e.jsx)(J.ZP,{onClick:function(){var v;(v=p.current)===null||v===void 0||v.show(t.data.info.Id)},type:"primary",icon:(0,e.jsx)(_n.Z,{}),children:s.FD.format("listManageEdit")}),f&&(0,e.jsx)(Tn,{detail:f.info,onFinish:function(){j()}}),(0,e.jsx)(oe.Z,{type:"vertical"}),f&&(0,e.jsxs)(e.Fragment,{children:[f.info.Config.Image&&(0,e.jsx)(Dn.Z,{image:[f.info.Config.Image],ref:ie}),(0,e.jsx)(pn.Z,{placement:"bottomLeft",menu:{items:[{key:"1",label:(0,e.jsx)(G.Z,{action:P()(a()().mark(function K(){var v,b,u,h,W,T;return a()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,(0,Ge.ze)({md5:(v=(b=f.info)===null||b===void 0?void 0:b.Name)!==null&&v!==void 0?v:"",imageId:""});case 2:return L({status:0}),se.next=5,(0,Xe.ZQ)({tag:(u=(h=f.info)===null||h===void 0?void 0:h.Config.Image)!==null&&u!==void 0?u:"",md5:(W=(T=f.info)===null||T===void 0?void 0:T.Image)!==null&&W!==void 0?W:"",cacheTime:0}).then(function(le){le.data.error&&le.data.error!=""?L({status:-1,error:le.data.error}):le.data.digestLocal&&le.data.digestLocal.length>0?L({status:le.data.upgrade?1:2}):L({status:-2})}).catch(function(le){L({status:-1})});case 5:return se.abrupt("return",se.sent);case 6:case"end":return se.stop()}},K)})),buttonProps:{type:"link"},children:i.format("upgradeCheckUpgrade")})},{key:"2",label:(0,e.jsx)(G.Z,{action:P()(a()().mark(function K(){var v,b,u,h;return a()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,(0,Ge.ze)({md5:(v=(b=f.info)===null||b===void 0?void 0:b.Name)!==null&&v!==void 0?v:"",imageId:(u=(h=f.info)===null||h===void 0?void 0:h.Image)!==null&&u!==void 0?u:""});case 2:return T.abrupt("return",T.sent);case 3:case"end":return T.stop()}},K)})),buttonProps:{type:"link"},children:i.format("upgradeCheckUpgradeIgnoreOnce")})},{key:"3",label:(0,e.jsx)(G.Z,{action:P()(a()().mark(function K(){var v,b;return a()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,Ge.ze)({md5:(v=(b=f.info)===null||b===void 0?void 0:b.Name)!==null&&v!==void 0?v:"",imageId:"*"});case 2:return h.abrupt("return",h.sent);case 3:case"end":return h.stop()}},K)})),buttonProps:{type:"link"},children:i.format("upgradeCheckUpgradeIgnore")})}]},children:(0,e.jsx)(jn.Z,{title:$.error,count:i.format("checkImageUpgradeOption."+$.status),color:i.format("checkImageUpgradeColorOption."+$.status),children:(0,e.jsx)(G.Z,{buttonProps:{disabled:$.status===0,icon:$.status===0?(0,e.jsx)(On.Z,{}):(0,e.jsx)(In.Z,{})},confirmProps:{description:(0,e.jsxs)(D.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(y.Z.Text,{children:i.format("upgradeConfirm")}),(0,e.jsx)(B.A,{formRef:V,submitter:!1,layout:"inline",children:(0,e.jsx)(We.Z,{name:"enableBak",valuePropName:"checked",children:(0,e.jsx)(Ke.Z,{children:i.format("upgradeConfirmEnableBak")})})})]})},action:P()(a()().mark(function K(){var v,b,u,h,W,T;return a()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,(v=ie.current)===null||v===void 0?void 0:v.start();case 2:return(b=U.current)===null||b===void 0||b.show(),(u=ie.current)===null||u===void 0||u.finish(),se.next=6,(0,R.RF)({md5:(h=f.info.Id)!==null&&h!==void 0?h:"",imageTag:"",enableBak:(W=(T=V.current)===null||T===void 0?void 0:T.getFieldValue("enableBak"))!==null&&W!==void 0?W:!1}).finally(function(){var le;(le=U.current)===null||le===void 0||le.destroy()});case 6:return se.abrupt("return",se.sent);case 7:case"end":return se.stop()}},K)})),onSuccess:function(v){j()},children:i.format("upgradeButton")})})})]}),(0,e.jsx)(oe.Z,{type:"vertical"}),f&&(0,e.jsx)(kn,{containerInfo:f.info}),(0,e.jsx)(J.ZP,{icon:(0,e.jsx)(ue.Z,{}),onClick:function(){g()},children:s.FD.format("listManageRefresh")})]})]})}),Gn=Hn,zn=n(65913);function Qn(t){var M=new s.Uo("components.appDetail"),i=(0,r.useState)(),o=I()(i,2),g=o[0],U=o[1];return(0,r.useEffect)(function(){(0,Xe.YU)({md5:t.data.Image}).then(function(j){U(j.data)})},[t.data]),(0,e.jsx)(N.Z,{ghost:t.ghost,title:(0,e.jsx)(ge.Z,{}),subTitle:M.format("titleImage"),children:(0,e.jsxs)(A.Z,{styles:{label:{width:200}},column:1,bordered:!0,children:[(0,e.jsx)(A.Z.Item,{label:"Image Tag",children:(0,e.jsx)(y.Z.Text,{copyable:!0,children:t.data.Config.Image})}),(0,e.jsx)(A.Z.Item,{label:"Image",children:t.data.Image}),(0,e.jsx)(A.Z.Item,{label:"CMD",children:(g==null?void 0:g.info.Config.Cmd)&&(g==null?void 0:g.info.Config.Cmd.join(" "))}),(0,e.jsx)(A.Z.Item,{label:"ENTRYPOINT",children:g==null?void 0:g.info.Config.Entrypoint}),(0,e.jsx)(A.Z.Item,{label:"Labels",children:(0,e.jsx)(A.Z,{column:1,bordered:!0,children:(g==null?void 0:g.info.Config.Labels)&&Object.entries(g==null?void 0:g.info.Config.Labels).map(function(j){var l=I()(j,2),p=l[0],_=l[1];return(0,e.jsx)(A.Z.Item,{label:p,children:_},p)})})})]})})}var Jn=n(97857),Qe=n.n(Jn),Yn=n(40666),Xn=n(64789),qn=n(97937),et=n(66309),nt=n(86738),tt=n(90127);function at(t){var M=(0,r.useState)(0),i=I()(M,2),o=i[0],g=i[1],U=(0,r.useState)(),j=I()(U,2),l=j[0],p=j[1],_=new s.Uo("components.appDetail"),x=(0,r.useState)(),d=I()(x,2),m=d[0],ie=d[1];return(0,r.useEffect)(function(){p([]),(0,qe.e1)().then(function(V){p(V.data.list)})},[o,t.data.info.Name]),(0,e.jsx)(N.Z,{ghost:!0,title:(0,e.jsx)(Yn.Z,{}),subTitle:_.format("titleTag"),extra:(0,e.jsx)(tt.Z,{trigger:(0,e.jsx)(y.Z.Link,{children:(0,e.jsx)(Xn.Z,{})}),containerDetail:t.data,onFinish:function(){g(o+1)}}),children:(0,e.jsx)(D.Z,{wrap:!0,children:l&&(l==null?void 0:l.filter(function(V){return V.item&&V.item.find(function(ae){return ae.name==t.data.info.Name})}).map(function(V,ae){return(0,e.jsx)(et.Z,{color:V.tagColor,closable:{closeIcon:(0,e.jsx)(nt.Z,{title:s.FD.format("confirm.title"),open:m&&m[ae],onOpenChange:function($){ie(Qe()(Qe()({},m),{index:$}))},onConfirm:P()(a()().mark(function F(){return a()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,qe.rn)({name:t.data.info.Name,tag:V.tag});case 2:g(o+1);case 3:case"end":return L.stop()}},F)})),children:(0,e.jsx)(qn.Z,{})})},style:{height:35,display:"flex",borderRadius:20,justifyContent:"center",alignItems:"center"},onClose:P()(a()().mark(function F(){return a()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:ie(Qe()(Qe()({},m),{index:!0}));case 1:case"end":return L.stop()}},F)})),children:(0,e.jsx)("span",{style:{paddingLeft:10,paddingRight:3},children:V.tag})},ae)}))})})}var rt=(0,r.forwardRef)(function(t,M){var i;(0,r.useImperativeHandle)(M,function(){return{show:function(F){return P()(a()().mark(function $(){return a()().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return m(!0),Ie.next=3,ie(F);case 3:case"end":return Ie.stop()}},$)}))()}}});var o=new s.Uo("components.appDetail"),g=(0,r.useRef)(),U=(0,r.useState)(),j=I()(U,2),l=j[0],p=j[1],_=(0,r.useState)(!1),x=I()(_,2),d=x[0],m=x[1];function ie(ae){return V.apply(this,arguments)}function V(){return V=P()(a()().mark(function ae(F){var $,L,Ie;return a()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return($=g.current)===null||$===void 0||$.show(),f.next=3,(0,R.jV)({md5:F}).finally(function(){var je;(je=g.current)===null||je===void 0||je.destroy()});case 3:L=f.sent,L.data&&(((Ie=L.data.info.HostConfig)===null||Ie===void 0?void 0:Ie.NetworkMode)=="host"&&L.data.info.Config.ExposedPorts&&Object.keys(L.data.info.Config.ExposedPorts).map(function(je){L.data.info.NetworkSettings.Ports||(L.data.info.NetworkSettings.Ports={}),L.data.info.NetworkSettings.Ports[je]=[{HostIp:"0.0.0.0",HostPort:je.substring(0,je.indexOf("/"))}]}),p(L.data));case 5:case"end":return f.stop()}},ae)})),V.apply(this,arguments)}return(0,e.jsx)(Je.Provider,{value:{loadingRef:g,reload:function(){return P()(a()().mark(function F(){return a()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(!l){L.next=3;break}return L.next=3,ie(l.info.Id);case 3:case"end":return L.stop()}},F)}))()},close:function(){return P()(a()().mark(function F(){return a()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:m(!1),t.onFinish&&t.onFinish();case 2:case"end":return L.stop()}},F)}))()},redirect:function(F){return P()(a()().mark(function $(){return a()().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,ie(F);case 2:case"end":return Ie.stop()}},$)}))()}},children:(0,e.jsx)(Te.Z,{title:o.format("drawerTitle",{name:(0,ee.fi)((i=l==null?void 0:l.info.Name)!==null&&i!==void 0?i:"","/")}),open:d,onClose:function(){m(!1),t.onFinish&&t.onFinish()},width:Be.R_,children:(0,e.jsx)(zn.Z,{ref:g,children:(0,e.jsxs)(E.Z,{vertical:!0,gap:20,children:[l&&(0,e.jsx)(ze.u,{access:"canSeeContainerList",children:(0,e.jsx)(cn,{ghost:!0,data:l==null?void 0:l.info})}),l&&(0,e.jsx)(ze.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,e.jsx)(Gn,{ghost:!0,data:l})}),l&&(0,e.jsx)(at,{data:l}),l&&(0,e.jsx)(he,{data:l,ghost:!0}),(0,e.jsx)(we,{data:l==null?void 0:l.info,ghost:!0}),l&&(0,e.jsx)(Qn,{data:l.info,ghost:!0}),(l==null?void 0:l.info.Config.Labels)&&(0,e.jsx)(N.Z,{title:(0,e.jsx)(ge.Z,{}),ghost:!0,subTitle:o.format("titleLabel"),children:(0,e.jsx)(A.Z,{column:1,bordered:!0,children:l.info.Config.Labels&&Object.entries(l.info.Config.Labels).map(function(ae){var F=I()(ae,2),$=F[0],L=F[1];return(0,e.jsx)(A.Z.Item,{label:$,children:L},$)})})})]})})})})}),ot=rt},90127:function(Fe,Ce,n){var Re=n(15009),I=n.n(Re),Me=n(99289),a=n.n(Me),de=n(5574),P=n.n(de),r=n(5251),q=n(184),N=n(62370),B=n(5966),A=n(24739),D=n(64317),oe=n(52688),y=n(97462),O=n(40056),_e=n(42075),c=n(67294),R=n(1699),C=n(80821),ve=n(2808),ee=n(87662),xe=n(29453),Le=n(3616),s=n(36146),e=n(85893),he=(0,c.forwardRef)(function(ge,Te){var E;(0,c.useImperativeHandle)(Te,function(){return{edit:function(fe){me(!0),Be(fe),Q.current&&Q.current.setFieldsValue({tag:[fe.tag],tagColor:fe.tagColor,enableShowGroup:fe.enableShowGroup})}}});var Q=(0,c.useRef)(),we=(0,c.useState)(0),S=P()(we,2),pe=S[0],ue=S[1],X=(0,c.useState)([]),Z=P()(X,2),re=Z[0],ne=Z[1],J=(0,c.useState)(),be=P()(J,2),G=be[0],w=be[1],z=(E=ge.containerDetail)===null||E===void 0?void 0:E.info,Ne=(0,c.useState)(!1),ye=P()(Ne,2),ce=ye[0],me=ye[1],H=new s.Uo("components.appDetail");function Be(Y){Q.current&&Q.current.setFieldsValue({title:Y.title,description:Y.description,url:Y.url,icon:Y.icon,name:Y.name})}return(0,c.useEffect)(function(){w([]),(0,xe.e1)().then(function(Y){w(Y.data.list)})},[pe]),(0,c.useEffect)(function(){z&&(0,ee.K3)().then(function(Y){var fe=[];z.NetworkSettings&&z.NetworkSettings.Ports&&Object.keys(z.NetworkSettings.Ports).map(function(k){z.NetworkSettings.Ports&&z.NetworkSettings.Ports[k]&&z.NetworkSettings.Ports[k].map(function(Ze){Ze.HostPort&&fe.push("http://".concat(Y.data.serverUrl,":").concat(Ze.HostPort))})}),ne(fe)})},[ge.containerDetail]),(0,e.jsxs)(q.a,{drawerProps:{forceRender:!0,width:Le.R_},open:ce,onFinish:function(){var Y=a()(I()().mark(function fe(k){var Ze,Pe,Oe,te;return I()().wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return Oe="",k.tagColor&&k.tagColor.toHexString?k.tagColor.cleared||(Oe=k.tagColor.toHexString()):Oe=k.tagColor,te=(Ze=k.enableShowGroup)!==null&&Ze!==void 0?Ze:ge.defaultEnableShowGroup,$e.next=5,(0,xe.A9)({enableShowGroup:te,tag:k.tag?k.tag[0]:"",tagColor:Oe,name:(Pe=z==null?void 0:z.Name)!==null&&Pe!==void 0?Pe:k.name,title:te?k.title:"",description:te?k.description:"",url:te?k.url:"",icon:te?k.icon:""});case 5:return ue(pe+1),ge.onFinish&&ge.onFinish({tag:k.tag,tagColor:k.tagColor,enableShowGroup:te}),$e.abrupt("return",!0);case 8:case"end":return $e.stop()}},fe)}));return function(fe){return Y.apply(this,arguments)}}(),formRef:Q,title:H.format("tagCreateTitle"),trigger:ge.trigger,onOpenChange:function(fe){var k;me(fe),!fe&&(!((k=Q.current)===null||k===void 0)&&k.resetFields)&&Q.current.resetFields()},children:[ge.defaultEnableShowGroup&&(0,e.jsx)(N.Z,{children:(0,e.jsx)(O.Z,{message:new s.Uo("system.home.tag").format("emptyTip")})}),(0,e.jsx)(B.Z,{name:"name",hidden:!0}),(0,e.jsxs)(A.UW,{children:[(0,e.jsx)(D.Z,{width:"lg",label:H.format("tagFormTag"),layout:"vertical",required:!0,rules:[{required:!0}],onChange:function(fe){var k=G&&G.find(function(He){return fe&&fe.length>=1&&He.tag==fe[0]});if(k){var Ze,Pe,Oe,te=k.item.find(function(He){return He.name==(z==null?void 0:z.Name)});(Ze=Q.current)===null||Ze===void 0||Ze.setFieldsValue({tagColor:k.tagColor,enableShowGroup:k.enableShowGroup}),te&&te.name&&Be({name:(Pe=z==null?void 0:z.Name)!==null&&Pe!==void 0?Pe:"",title:te?te.title:(0,r.fi)((Oe=z==null?void 0:z.Name)!==null&&Oe!==void 0?Oe:"","/"),description:te&&te.description,url:te&&te.url,icon:te&&te.icon})}if(!fe||fe.length==0){var Se,$e=(Se=Q.current)===null||Se===void 0?void 0:Se.getFieldValue("url");if(!$e||$e==""){var Ve;!((Ve=Q.current)===null||Ve===void 0)&&Ve.resetFields&&Q.current.resetFields()}}},options:G&&G.map(function(Y){return{lable:Y.tag,value:Y.tag}}),name:"tag",mode:"tags",fieldProps:{maxCount:1},placeholder:H.format("tagFormTagEmpty")},"tagSelect".concat(pe)),!ge.defaultEnableShowGroup&&(0,e.jsx)(ve.Z,{label:H.format("tagFormTagColor"),name:"tagColor"})]}),!ge.defaultEnableShowGroup&&(0,e.jsx)(R.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(fe){var k=fe.canSeeEnableCe;return(0,e.jsx)(oe.Z,{label:H.format("tagFormEnableShowGroup"),name:"enableShowGroup",disabled:k,fieldProps:{onChange:function(Pe){if(Pe){var Oe,te;Be({name:(Oe=z==null?void 0:z.Name)!==null&&Oe!==void 0?Oe:"",title:(0,r.fi)((te=z==null?void 0:z.Name)!==null&&te!==void 0?te:"","/")})}}}})}}),(0,e.jsx)(y.Z,{name:["enableShowGroup"],children:function(fe){var k=fe.enableShowGroup;return(k||ge.defaultEnableShowGroup)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(_e.Z.Compact,{children:[ge.containerDetail&&(0,e.jsx)(D.Z,{label:H.format("tagFormSelectUrl"),width:"sm",name:"selectUrl",options:re.map(function(Ze){return{label:Ze,value:Ze}}),onChange:function(Pe){var Oe;!((Oe=Q.current)===null||Oe===void 0)&&Oe.setFieldValue&&Q.current.setFieldValue("url",Pe)}}),(0,e.jsx)(B.Z,{label:H.format("tagFormUrl"),name:"url",width:"md"}),(0,e.jsx)(N.Z,{label:" ",children:(0,e.jsx)(C.Z,{action:function(){var Pe;return(0,xe.R3)({url:(Pe=Q.current)===null||Pe===void 0?void 0:Pe.getFieldValue("url")})},onSuccess:function(Pe){var Oe,te,Se;(Oe=Q.current)===null||Oe===void 0||Oe.setFieldValue("icon",Pe.data.icon),(te=Q.current)===null||te===void 0||te.setFieldValue("title",Pe.data.title),(Se=Q.current)===null||Se===void 0||Se.setFieldValue("description",Pe.data.description)},children:H.format("tagGetUrlDetailButton")})})]}),(0,e.jsxs)(A.UW,{children:[(0,e.jsx)(B.Z,{label:H.format("tagFormTitle"),name:"title"}),(0,e.jsx)(B.Z,{label:H.format("tagFormDescription"),name:"description"})]}),(0,e.jsx)(A.UW,{children:(0,e.jsx)(B.Z,{width:"lg",placeholder:H.format("tagFormIconEmpty"),label:H.format("tagFormIcon"),name:"icon"})})]})}})]})});Ce.Z=he},81146:function(Fe,Ce,n){var Re=n(97857),I=n.n(Re),Me=n(15009),a=n.n(Me),de=n(99289),P=n.n(de),r=n(67294),q=n(97269),N=n(62370),B=n(5966),A=n(97462),D=n(82346),oe=n(71230),y=n(15746),O=n(34041),_e=n(83622),c=n(84567),R=n(42075),C=n(80821),ve=n(23430),ee=n(93162),xe=n.n(ee),Le=n(78267),s=n.n(Le),e=n(75458),he=n.n(e),ge=n(12323),Te=n(4244),E=n.n(Te),Q=n(24078),we=n(36146),S=n(85893),pe,ue,X,Z={decorations:{matchBackground:"",matchBorder:"#FFFF00",activeMatchBackground:"#FFFF0066",matchOverviewRuler:"",activeMatchColorOverviewRuler:""}},re=(0,r.forwardRef)(function(ne,J){var be=(0,r.useRef)(),G=(0,D.useModel)("subscriber"),w=new we.Uo("components.containerLog");(0,r.useImperativeHandle)(J,function(){return{fit:function(){pe.clear(),X.fit()},start:function(){return P()(a()().mark(function ce(){return a()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,z({lineTotal:500});case 2:case"end":return H.stop()}},ce)}))()},close:function(){G.progress.close(ne.id)}}});function z(ye){return Ne.apply(this,arguments)}function Ne(){return Ne=P()(a()().mark(function ye(ce){return a()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:G.progress.close(ne.id),pe.clear(),ce.download=!1,ne.request(ce);case 4:case"end":return H.stop()}},ye)})),Ne.apply(this,arguments)}return(0,r.useEffect)(function(){return window.addEventListener("resize",function(){X.fit()}),pe=new Te.Terminal(I()(I()({},ge.X),{},{fontSize:12,lineHeight:1.2,allowProposedApi:!0})),X=new Le.FitAddon,ue=new e.SearchAddon({}),pe.loadAddon(X),pe.loadAddon(ue),pe.open(document.getElementById("terminal-container-log")),X.fit(),G.addDataHandler(ne.id,function(ye){pe.write(ye.data)}),function(){pe.clear(),pe.reset(),G.progress.close(ne.id)}},[]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(q.A,{submitter:!1,layout:"horizontal",onFinish:function(ce){var me;z({id:ne.id,lineTotal:parseInt(ce.lineTotal),showTime:(me=ce.showTime)!==null&&me!==void 0?me:!1})},formRef:be,children:(0,S.jsxs)(oe.Z,{gutter:[10,0],children:[(0,S.jsx)(y.Z,{span:8,children:(0,S.jsx)(N.Z,{name:"lineTotal",initialValue:"500",label:w.format("formLineTotal"),children:(0,S.jsxs)(O.Z,{defaultValue:"500",onChange:function(ce){var me;(me=be.current)===null||me===void 0||me.submit()},children:[(0,S.jsx)(O.Z.Option,{value:"100",children:w.format("formLineTotalOption",{number:"100"})}),(0,S.jsx)(O.Z.Option,{value:"200",children:w.format("formLineTotalOption",{number:"200"})}),(0,S.jsx)(O.Z.Option,{value:"500",children:w.format("formLineTotalOption",{number:"500"})}),(0,S.jsx)(O.Z.Option,{value:"1000",children:w.format("formLineTotalOption",{number:"1000"})}),(0,S.jsx)(O.Z.Option,{value:"-1",children:w.format("formLineTotalOptionAll")})]})})}),(0,S.jsx)(y.Z,{children:(0,S.jsx)(_e.ZP,{onClick:function(){pe.clear()},children:w.format("clearButton")})}),(0,S.jsx)(y.Z,{children:(0,S.jsx)(N.Z,{name:"showTime",valuePropName:"checked",children:(0,S.jsx)(c.Z,{onChange:function(ce){var me;(me=be.current)===null||me===void 0||me.submit()},children:w.format("formShowTime")})})}),(0,S.jsx)(y.Z,{children:(0,S.jsx)(B.Z,{label:w.format("formKeywork"),name:"keywork",fieldProps:{onPressEnter:function(){var ce;ue.findNext((ce=be.current)===null||ce===void 0?void 0:ce.getFieldValue("keywork"),Z)},onChange:function(ce){ue.findNext(ce.target.value,Z)}},placeholder:w.format("formKeyworkEmpty")})}),(0,S.jsx)(y.Z,{children:(0,S.jsx)(A.Z,{name:["keywork"],children:function(ce){var me=ce.keywork;return(0,S.jsxs)(R.Z,{size:10,children:[(0,S.jsx)(_e.ZP,{onClick:function(){ue.findNext(me,Z)},children:w.format("formKeyworkNext")},"next"),(0,S.jsx)(_e.ZP,{onClick:function(){ue.findPrevious(me,Z)},children:w.format("formKeyworkPrev")},"prev")]})}})}),(0,S.jsx)(y.Z,{children:(0,S.jsx)(C.Z,{buttonProps:{icon:(0,S.jsx)(ve.Z,{})},action:P()(a()().mark(function ye(){var ce,me,H;return a()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(!ne.download){Y.next=5;break}return Y.next=3,ne.download({lineTotal:parseInt((ce=be.current)===null||ce===void 0?void 0:ce.getFieldValue("lineTotal")),showTime:(me=be.current)===null||me===void 0?void 0:me.getFieldValue("showTime")});case 3:H=Y.sent,(0,ee.saveAs)(H.data,H.name);case 5:case"end":return Y.stop()}},ye)})),children:w.format("downloadButton")})})]})}),(0,S.jsx)("div",{style:{marginTop:"20px",height:ne.showInDrawer?"75vh":"85vh"},id:"terminal-container-log"})]})});Ce.Z=re},27619:function(Fe,Ce,n){n.d(Ce,{Z:function(){return r}});var Re=n(5574),I=n.n(Re),Me=n(82346),a=n(67294),de=n(64389),P=n(85893);function r(q){var N=(0,Me.useModel)("@@initialState"),B=N.initialState,A="chart-area-".concat(q.name),D=(0,a.useState)(),oe=I()(D,2),y=oe[0],O=oe[1],_e={};q.data.forEach(function(R){R.show===!1?_e[R.name]=!1:_e[R.name]=!0});var c={tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},valueFormatter:function(C){return q.yValueFormatter?q.yValueFormatter(C):C}},legend:{selected:_e},grid:{left:"0",right:"0",bottom:"0",top:"30",containLabel:!0},xAxis:{type:"category",data:q.data[0].data.map(function(R){return R.date}),boundaryGap:!1,axisLabel:{rotate:20}},yAxis:{type:"value",axisLabel:{formatter:q.yLabelFormatter},max:function(C){if(q.yDomainMaxCallback)return q.yDomainMaxCallback(C)}},series:[]};return(0,a.useEffect)(function(){var R="",C=window.matchMedia("(prefers-color-scheme: dark)");(B==null?void 0:B.theme.algorithm)=="dark"||C.matches?R="dark":R="",y&&!y.isDisposed()&&y.dispose();var ve=document.getElementById(A),ee=de.S1(ve,R);ee.setOption(c);var xe=new ResizeObserver(function(){ee.resize()});ve&&xe.observe(ve),O(ee)},[B]),(0,a.useEffect)(function(){y&&!y.isDisposed()&&y.setOption({legend:{data:q.data.map(function(R){return R.name})},xAxis:{data:q.data[0].data.map(function(R){return R.date})},series:q.data.map(function(R){return{name:R.name,type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:R.data.map(function(C){return C.value})}})})},[q.data]),(0,P.jsx)("div",{style:{height:200},id:A})}},94359:function(Fe,Ce,n){n.d(Ce,{Z:function(){return _e}});var Re=n(5574),I=n.n(Re),Me=n(3089),a=n(98165),de=n(18429),P=n(8751),r=n(66212),q=n(14313),N=n(30159),B=n(87740),A=n(50888),D=n(66309),oe=n(83062),y=n(36146),O=n(85893);function _e(c){var R,C,ve=new y.Uo("components.containerStatus"),ee=c.status.split("."),xe=I()(ee,2),Le=xe[0],s=xe[1],e="";e=ve.format(c.status,(R=c.statusValue)!==null&&R!==void 0?R:{});var he=(0,O.jsx)(O.Fragment,{});return s=="0"&&(he=(0,O.jsx)(D.Z,{icon:(0,O.jsx)(Me.Z,{}),color:"default",children:e})),s=="10"&&(he=(0,O.jsx)(D.Z,{icon:(0,O.jsx)(a.Z,{spin:!0}),color:"processing",children:e})),s=="20"&&(he=(0,O.jsx)(D.Z,{icon:(0,O.jsx)(de.Z,{}),color:"error",children:e})),s=="30"&&(he=(0,O.jsx)(D.Z,{icon:(0,O.jsx)(P.Z,{}),color:"success",children:e})),s=="new"&&(he=(0,O.jsx)(D.Z,{icon:(0,O.jsx)(r.Z,{}),children:e})),(s=="running"||s=="healthy"||s=="active"||s=="ready")&&(he=(0,O.jsx)(D.Z,{icon:(0,O.jsx)(q.Z,{}),color:"success",children:e})),(s=="paused"||s=="pause"||s=="rollback_paused")&&(he=(0,O.jsx)(D.Z,{icon:(0,O.jsx)(N.Z,{}),color:"warning",children:e})),(s=="waiting"||s=="starting"||s=="accepted")&&(he=(0,O.jsx)(D.Z,{icon:(0,O.jsx)(B.Z,{}),children:e})),["deploying","pending","allocated","accepted","assigned","preparing","updating","rollback_started"].includes(s)&&(he=(0,O.jsx)(D.Z,{icon:(0,O.jsx)(A.Z,{}),color:"processing",children:e})),(s=="error"||s=="down"||s=="failed")&&(he=(0,O.jsx)(D.Z,{icon:(0,O.jsx)(de.Z,{}),color:"error",children:e})),["complete","completed","rollback_completed"].includes(s)&&(he=(0,O.jsx)(D.Z,{icon:(0,O.jsx)(P.Z,{}),color:"success",children:e})),["exited","dead","removing","restarting","unhealthy","created","drain","unreachable","shutdown","rejected","remove","orphaned"].includes(s)&&(he=(0,O.jsx)(D.Z,{icon:(0,O.jsx)(de.Z,{}),color:"warning",children:e})),(0,O.jsx)(oe.Z,{placement:"top",title:(C=c.tip)!==null&&C!==void 0?C:"",children:he})}},55943:function(Fe,Ce,n){var Re=n(5574),I=n.n(Re),Me=n(15009),a=n.n(Me),de=n(99289),P=n.n(de),r=n(80821),q=n(3616),N=n(14946),B=n(36146),A=n(82061),D=n(184),oe=n(38345),y=n(60940),O=n(42075),_e=n(96074),c=n(26412),R=n(67294),C=n(85893),ve=(0,R.forwardRef)(function(ee,xe){(0,R.useImperativeHandle)(xe,function(){return{show:function(re){return P()(a()().mark(function ne(){var J,be;return a()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,(0,N.IS)({name:re});case 2:J=w.sent,J.data.info.Containers?(be=[],Object.keys(J.data.info.Containers).map(function(z){J.data.info.Containers[z].Id=z,be.push(J.data.info.Containers[z])}),ue(be)):ue([]),Q(J.data.info),he(!0);case 6:case"end":return w.stop()}},ne)}))()}}});var Le=(0,R.useState)(!1),s=I()(Le,2),e=s[0],he=s[1],ge=(0,R.useState)(),Te=I()(ge,2),E=Te[0],Q=Te[1],we=(0,R.useState)(),S=I()(we,2),pe=S[0],ue=S[1],X=new B.Uo("components.network");return(0,C.jsx)(D.a,{drawerProps:{width:q.R_},title:X.format("detailTitle"),open:e,onOpenChange:function(re){he(re)},submitter:!1,children:(0,C.jsxs)(oe.Z,{ghost:!0,direction:"column",gutter:[10,0],children:[(0,C.jsx)(oe.Z,{title:X.format("detailContainer"),ghost:!0,children:(0,C.jsx)(y.Z,{rowKey:"Name",columns:[{title:B.FD.format("listContainerName"),dataIndex:"Name"},{title:"IPV4",dataIndex:"IPv4Address"},{title:"IPV6",dataIndex:"IPv6Address"},{title:"MacAddress",dataIndex:"MacAddress"},{title:B.FD.format("listManage"),render:function(re,ne,J){return(0,C.jsx)(O.Z,{split:(0,C.jsx)(_e.Z,{type:"vertical"}),children:(0,C.jsx)(r.Z,{buttonProps:{type:"text",icon:(0,C.jsx)(A.Z,{}),danger:!0},confirmProps:{showCommonConfirm:!0},action:function(){var G,w;return(0,N.t9)({name:(G=E==null?void 0:E.Id)!==null&&G!==void 0?G:"",containerName:(w=ne.Id)!==null&&w!==void 0?w:""})},tips:B.FD.format("listManageExit"),onSuccess:function(){var G=pe==null?void 0:pe.filter(function(w){return w.Id!=ne.Id});ue(G)}},"delete")})}}],dataSource:pe,pagination:!1})}),(0,C.jsx)(oe.Z,{ghost:!0,title:X.format("detailBasic"),children:(0,C.jsxs)(c.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:[(0,C.jsx)(c.Z.Item,{label:X.format("detailName"),children:E==null?void 0:E.Name}),(0,C.jsx)(c.Z.Item,{label:"Id",children:E==null?void 0:E.Id}),(0,C.jsx)(c.Z.Item,{label:"Driver",children:E==null?void 0:E.Driver}),(0,C.jsx)(c.Z.Item,{label:"Scope",children:E==null?void 0:E.Scope}),(0,C.jsx)(c.Z.Item,{label:"Attachable",children:X.yesNo(E==null?void 0:E.Attachable)}),(0,C.jsx)(c.Z.Item,{label:"Internal",children:X.yesNo(E==null?void 0:E.Internal)}),(E==null?void 0:E.IPAM.Config)&&(E==null?void 0:E.IPAM.Config.map(function(Z,re){return(0,C.jsx)(c.Z.Item,{label:Z.Gateway&&Z.Gateway.includes(":")?"IPV6":"IPV4",children:(0,C.jsxs)(c.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:[(0,C.jsx)(c.Z.Item,{label:"Subnet",children:Z.Subnet}),(0,C.jsx)(c.Z.Item,{label:"Gateway",children:Z.Gateway}),(0,C.jsx)(c.Z.Item,{label:"IP Range ",children:Z.IPRange}),(0,C.jsx)(c.Z.Item,{label:"Excluded IPs",children:Z.AuxiliaryAddresses&&Object.keys(Z.AuxiliaryAddresses).map(function(ne){return Z.AuxiliaryAddresses[ne]+" ,"})})]})},re)})),(E==null?void 0:E.Options)&&Object.keys(E==null?void 0:E.Options).length>0&&(0,C.jsx)(c.Z.Item,{label:"Options",children:(0,C.jsx)(c.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:Object.keys(E==null?void 0:E.Options).map(function(Z){return(0,C.jsx)(c.Z.Item,{label:Z,children:E.Options[Z]},Z)})})}),(E==null?void 0:E.Labels)&&Object.keys(E==null?void 0:E.Labels).length>0&&(0,C.jsx)(c.Z.Item,{label:"Lables",children:(0,C.jsx)(c.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:Object.keys(E==null?void 0:E.Labels).map(function(Z){return(0,C.jsx)(c.Z.Item,{label:Z,children:E.Labels[Z]},Z)})})})]})})]})})});Ce.Z=ve},2808:function(Fe,Ce,n){n.d(Ce,{Z:function(){return r}});var Re=n(97857),I=n.n(Re),Me=n(62370),a=n(51663),de=n(67294),P=n(85893);function r(q){return(0,P.jsx)(Me.Z,I()(I()({},q),{},{children:(0,P.jsx)(a.Z,{showText:function(B){return B.toHexString()},allowClear:!0,presets:[{label:"Color",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},76428:function(Fe,Ce,n){n.d(Ce,{Z:function(){return a}});var Re=n(25593),I=n(67294),Me=n(85893);function a(de){return(0,Me.jsx)(Re.Z.Text,{copyable:!0,children:de.title})}},65913:function(Fe,Ce,n){var Re=n(5574),I=n.n(Re),Me=n(74330),a=n(67294),de=n(85893),P=(0,a.forwardRef)(function(r,q){(0,a.useImperativeHandle)(q,function(){return{show:function(){D(!0)},destroy:function(){D(!1)}}});var N=(0,a.useState)(!1),B=I()(N,2),A=B[0],D=B[1];return(0,de.jsx)(Me.Z,{spinning:A,size:"default",children:r.children})});Ce.Z=P},29453:function(Fe,Ce,n){n.d(Ce,{A9:function(){return P},R3:function(){return D},e1:function(){return q},rn:function(){return B}});var Re=n(15009),I=n.n(Re),Me=n(99289),a=n.n(Me),de=n(82346);function P(y){return r.apply(this,arguments)}function r(){return r=a()(I()().mark(function y(O){return I()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,de.request)("/api/common/tag/create",{method:"POST",data:O});case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},y)})),r.apply(this,arguments)}function q(y){return N.apply(this,arguments)}function N(){return N=a()(I()().mark(function y(O){return I()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,de.request)("/api/common/tag/get-list",{method:"POST",data:O});case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},y)})),N.apply(this,arguments)}function B(y){return A.apply(this,arguments)}function A(){return A=a()(I()().mark(function y(O){return I()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,de.request)("/api/common/tag/delete",{method:"POST",data:O});case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},y)})),A.apply(this,arguments)}function D(y){return oe.apply(this,arguments)}function oe(){return oe=a()(I()().mark(function y(O){return I()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,de.request)("/api/pro/tag/get-url-detail",{method:"POST",data:O});case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},y)})),oe.apply(this,arguments)}}}]);
