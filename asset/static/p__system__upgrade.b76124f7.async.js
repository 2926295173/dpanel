"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[992],{60933:function(te,W,e){e.r(W),e.d(W,{default:function(){return a}});var l=e(15009),f=e.n(l),H=e(99289),P=e.n(H),D=e(5574),z=e.n(D),M=e(2831),h=e(36146),b=e(89035),F=e(90078),y=e(38345),k=e(40056),E=e(25593),p=e(67294),o=e(85893);function a(){var R=(0,p.useState)([]),J=z()(R,2),w=J[0],Y=J[1],j=new h.Uo("system.upgrade");(0,p.useEffect)(function(){q({})},[]);function q(S){return L.apply(this,arguments)}function L(){return L=P()(f()().mark(function S(oe){var c,N,G,V,X;return f()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,M.d6)();case 2:c=x.sent,c.data.info&&c.data.info.HostConfig&&c.data.info.Config&&(N="",c.data.info.Mounts.map(function(_){_.Type=="volume"&&(N=_.Name)}),G=Object.keys(c.data.info.HostConfig.PortBindings).map(function(_){return c.data.info&&c.data.info.HostConfig.PortBindings[_].map(function(ne){return"-p ".concat(ne.HostPort,":").concat(String(parseInt(_)))})}),V=!1,X=c.data.info.HostConfig.Binds.map(function(_){return _.indexOf(":/dpanel")>-1&&(V=!0),"-v ".concat(_)}),V||(N="",c.data.info.Mounts.map(function(_){_.Type=="volume"&&(N=_.Name)}),X.push("-v "+N+":/dpanel")),Y(["sudo docker stop ".concat(c.data.info.Name," && sudo docker rm ").concat(c.data.info.Name),"sudo docker pull ".concat(c.data.info.Config.Image),"sudo docker run -it -d --name ".concat(c.data.info.Name," --restart=always ").concat(G.join(" ")," ").concat(X.join(" ")," ").concat(c.data.info.Config.Image)+(c.data.info.NetworkSettings.Networks["dpanel-local"]?" && docker network connect dpanel-local ".concat(c.data.info.Name):"")]));case 4:case"end":return x.stop()}},S)})),L.apply(this,arguments)}return(0,o.jsx)(F._z,{children:(0,o.jsxs)(y.Z,{direction:"column",children:[(0,o.jsx)(k.Z,{message:j.format("alertTitle"),showIcon:!0,description:(0,o.jsxs)("ol",{style:{marginLeft:"-20px"},children:[(0,o.jsx)("li",{children:j.format("alertContent1")}),(0,o.jsx)("li",{children:j.format("alertContent2")}),(0,o.jsx)("li",{children:j.format("alertContent3")}),(0,o.jsx)("li",{children:(0,o.jsx)(E.Z.Text,{type:"danger",children:j.format("alertContent4")})})]}),type:"warning",style:{marginBottom:"20px"}}),(0,o.jsxs)(y.Z,{ghost:!0,style:{paddingBottom:50},direction:"column",gutter:[10,50],children:[(0,o.jsx)(y.Z,{bordered:!0,headerBordered:!0,title:(0,o.jsx)(b.Z,{}),bodyStyle:{padding:"10px",background:"#24292f"},subTitle:(0,o.jsxs)(o.Fragment,{children:[j.format("shellRootLessTitle")," ",(0,o.jsx)("a",{href:"https://dpanel.cc/#/zh-cn/install/shell",target:"_blank",children:h.FD.format("help")})]}),children:(0,o.jsx)(E.Z.Text,{copyable:!0,style:{color:"#ffffff"},children:"sudo curl -sSL https://dpanel.cc/quick.sh -o quick.sh && sudo bash quick.sh"})}),(0,o.jsx)(y.Z,{bordered:!0,headerBordered:!0,title:(0,o.jsx)(b.Z,{}),bodyStyle:{padding:"10px",background:"#24292f"},subTitle:(0,o.jsxs)(o.Fragment,{children:[j.format("shellRootTitle")," ",(0,o.jsx)("a",{href:"https://dpanel.cc/#/zh-cn/install/shell",target:"_blank",children:h.FD.format("help")})]}),children:(0,o.jsx)(E.Z.Text,{copyable:!0,style:{color:"#ffffff"},children:"curl -sSL https://dpanel.cc/quick.sh -o quick.sh && bash quick.sh"})}),(0,o.jsx)(y.Z,{bordered:!0,headerBordered:!0,title:(0,o.jsx)(b.Z,{}),bodyStyle:{padding:"10px",background:"#24292f"},subTitle:(0,o.jsxs)(o.Fragment,{children:[j.format("dockerrunTitle")," ",(0,o.jsx)("a",{href:"https://dpanel.cc/#/zh-cn/manual/setting/upgrade",target:"_blank",children:h.FD.format("help")})]}),children:w&&w.length>0?w.map(function(S){return(0,o.jsx)(E.Z.Paragraph,{copyable:!0,style:{color:"#ffffff"},children:S},S)}):(0,o.jsx)("span",{style:{color:"#ffffff"},children:h.FD.format("systemUpgradeDPanelNotFound")})})]})]})})}},2831:function(te,W,e){e.d(W,{Ll:function(){return F},aF:function(){return z},d6:function(){return k},u5:function(){return h}});var l=e(15009),f=e.n(l),H=e(99289),P=e.n(H),D=e(82346);function z(){return M.apply(this,arguments)}function M(){return M=P()(f()().mark(function p(){return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,D.request)("/api/common/home/info",{method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},p)})),M.apply(this,arguments)}function h(){return b.apply(this,arguments)}function b(){return b=P()(f()().mark(function p(){return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,D.request)("/api/common/home/check-new-version",{method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},p)})),b.apply(this,arguments)}function F(){return y.apply(this,arguments)}function y(){return y=P()(f()().mark(function p(){return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,D.request)("/api/common/home/usage",{method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},p)})),y.apply(this,arguments)}function k(){return E.apply(this,arguments)}function E(){return E=P()(f()().mark(function p(){return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,D.request)("/api/common/home/upgrade-script",{method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},p)})),E.apply(this,arguments)}},40056:function(te,W,e){e.d(W,{Z:function(){return pe}});var l=e(67294),f=e(89739),H=e(4340),P=e(97937),D=e(21640),z=e(78860),M=e(93967),h=e.n(M),b=e(29372),F=e(64217),y=e(42550),k=e(96159),E=e(53124),p=e(11568),o=e(14747),a=e(83559);const R=(n,t,r,s,i)=>({background:n,border:`${(0,p.bf)(s.lineWidth)} ${s.lineType} ${t}`,[`${i}-icon`]:{color:r}}),J=n=>{const{componentCls:t,motionDurationSlow:r,marginXS:s,marginSM:i,fontSize:d,fontSizeLG:g,lineHeight:v,borderRadiusLG:I,motionEaseInOutCirc:C,withDescriptionIconSize:$,colorText:T,colorTextHeading:A,withDescriptionPadding:Z,defaultPadding:u}=n;return{[t]:Object.assign(Object.assign({},(0,o.Wf)(n)),{position:"relative",display:"flex",alignItems:"center",padding:u,wordWrap:"break-word",borderRadius:I,[`&${t}-rtl`]:{direction:"rtl"},[`${t}-content`]:{flex:1,minWidth:0},[`${t}-icon`]:{marginInlineEnd:s,lineHeight:0},"&-description":{display:"none",fontSize:d,lineHeight:v},"&-message":{color:A},[`&${t}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${r} ${C}, opacity ${r} ${C},
        padding-top ${r} ${C}, padding-bottom ${r} ${C},
        margin-bottom ${r} ${C}`},[`&${t}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${t}-with-description`]:{alignItems:"flex-start",padding:Z,[`${t}-icon`]:{marginInlineEnd:i,fontSize:$,lineHeight:0},[`${t}-message`]:{display:"block",marginBottom:s,color:A,fontSize:g},[`${t}-description`]:{display:"block",color:T}},[`${t}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},w=n=>{const{componentCls:t,colorSuccess:r,colorSuccessBorder:s,colorSuccessBg:i,colorWarning:d,colorWarningBorder:g,colorWarningBg:v,colorError:I,colorErrorBorder:C,colorErrorBg:$,colorInfo:T,colorInfoBorder:A,colorInfoBg:Z}=n;return{[t]:{"&-success":R(i,s,r,n,t),"&-info":R(Z,A,T,n,t),"&-warning":R(v,g,d,n,t),"&-error":Object.assign(Object.assign({},R($,C,I,n,t)),{[`${t}-description > pre`]:{margin:0,padding:0}})}}},Y=n=>{const{componentCls:t,iconCls:r,motionDurationMid:s,marginXS:i,fontSizeIcon:d,colorIcon:g,colorIconHover:v}=n;return{[t]:{"&-action":{marginInlineStart:i},[`${t}-close-icon`]:{marginInlineStart:i,padding:0,overflow:"hidden",fontSize:d,lineHeight:(0,p.bf)(d),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${r}-close`]:{color:g,transition:`color ${s}`,"&:hover":{color:v}}},"&-close-text":{color:g,transition:`color ${s}`,"&:hover":{color:v}}}}},j=n=>({withDescriptionIconSize:n.fontSizeHeading3,defaultPadding:`${n.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${n.paddingMD}px ${n.paddingContentHorizontalLG}px`});var q=(0,a.I$)("Alert",n=>[J(n),w(n),Y(n)],j),L=function(n,t){var r={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&t.indexOf(s)<0&&(r[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(r[s[i]]=n[s[i]]);return r};const S={success:f.Z,info:z.Z,error:H.Z,warning:D.Z},oe=n=>{const{icon:t,prefixCls:r,type:s}=n,i=S[s]||null;return t?(0,k.wm)(t,l.createElement("span",{className:`${r}-icon`},t),()=>({className:h()(`${r}-icon`,t.props.className)})):l.createElement(i,{className:`${r}-icon`})},c=n=>{const{isClosable:t,prefixCls:r,closeIcon:s,handleClose:i,ariaProps:d}=n,g=s===!0||s===void 0?l.createElement(P.Z,null):s;return t?l.createElement("button",Object.assign({type:"button",onClick:i,className:`${r}-close-icon`,tabIndex:0},d),g):null};var G=l.forwardRef((n,t)=>{const{description:r,prefixCls:s,message:i,banner:d,className:g,rootClassName:v,style:I,onMouseEnter:C,onMouseLeave:$,onClick:T,afterClose:A,showIcon:Z,closable:u,closeText:Q,closeIcon:B,action:se,id:_e}=n,ge=L(n,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[ae,he]=l.useState(!1),le=l.useRef(null);l.useImperativeHandle(t,()=>({nativeElement:le.current}));const{getPrefixCls:ye,direction:ve,closable:U,closeIcon:ie,className:Ce,style:Ee}=(0,E.dj)("alert"),m=ye("alert",s),[je,be,Ie]=q(m),Oe=O=>{var K;he(!0),(K=n.onClose)===null||K===void 0||K.call(n,O)},ce=l.useMemo(()=>n.type!==void 0?n.type:d?"warning":"info",[n.type,d]),Pe=l.useMemo(()=>typeof u=="object"&&u.closeIcon||Q?!0:typeof u=="boolean"?u:B!==!1&&B!==null&&B!==void 0?!0:!!U,[Q,B,u,U]),de=d&&Z===void 0?!0:Z,De=h()(m,`${m}-${ce}`,{[`${m}-with-description`]:!!r,[`${m}-no-icon`]:!de,[`${m}-banner`]:!!d,[`${m}-rtl`]:ve==="rtl"},Ce,g,v,Ie,be),Me=(0,F.Z)(ge,{aria:!0,data:!0}),Se=l.useMemo(()=>typeof u=="object"&&u.closeIcon?u.closeIcon:Q||(B!==void 0?B:typeof U=="object"&&U.closeIcon?U.closeIcon:ie),[B,u,Q,ie]),xe=l.useMemo(()=>{const O=u!=null?u:U;if(typeof O=="object"){const{closeIcon:K}=O;return L(O,["closeIcon"])}return{}},[u,U]);return je(l.createElement(b.ZP,{visible:!ae,motionName:`${m}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:O=>({maxHeight:O.offsetHeight}),onLeaveEnd:A},({className:O,style:K},ue)=>l.createElement("div",Object.assign({id:_e,ref:(0,y.sQ)(le,ue),"data-show":!ae,className:h()(De,O),style:Object.assign(Object.assign(Object.assign({},Ee),I),K),onMouseEnter:C,onMouseLeave:$,onClick:T,role:"alert"},Me),de?l.createElement(oe,{description:r,icon:n.icon,prefixCls:m,type:ce}):null,l.createElement("div",{className:`${m}-content`},i?l.createElement("div",{className:`${m}-message`},i):null,r?l.createElement("div",{className:`${m}-description`},r):null),se?l.createElement("div",{className:`${m}-action`},se):null,l.createElement(c,{isClosable:Pe,prefixCls:m,closeIcon:Se,handleClose:Oe,ariaProps:xe}))))}),V=e(15671),X=e(43144),ee=e(61120),x=e(78814),_=e(82963);function ne(n,t,r){return t=(0,ee.Z)(t),(0,_.Z)(n,(0,x.Z)()?Reflect.construct(t,r||[],(0,ee.Z)(n).constructor):t.apply(n,r))}var me=e(60136),fe=function(n){function t(){var r;return(0,V.Z)(this,t),r=ne(this,t,arguments),r.state={error:void 0,info:{componentStack:""}},r}return(0,me.Z)(t,n),(0,X.Z)(t,[{key:"componentDidCatch",value:function(s,i){this.setState({error:s,info:i})}},{key:"render",value:function(){const{message:s,description:i,id:d,children:g}=this.props,{error:v,info:I}=this.state,C=(I==null?void 0:I.componentStack)||null,$=typeof s=="undefined"?(v||"").toString():s,T=typeof i=="undefined"?C:i;return v?l.createElement(G,{id:d,type:"error",message:$,description:l.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},T)}):g}}])}(l.Component);const re=G;re.ErrorBoundary=fe;var pe=re}}]);
