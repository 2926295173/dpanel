"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9969],{49610:function(w,h,n){var P=n(5574),r=n.n(P),l=n(67294),i=n(52626),o=n(78267),C=n.n(o),E=n(12323),T=n(87662),O=n(4244),D=n.n(O),M=n(24078),y=n(85893),a,d,s,g,p=(0,l.forwardRef)(function(L,b){var W,j=(0,l.useState)(),A=r()(j,2),R=A[0],t=A[1],u=(0,l.useState)(""),_=r()(u,2),e=_[0],B=_[1];(0,l.useImperativeHandle)(b,function(){return{start:function(v,c){I(),c.width=a.cols,c.height=a.rows;var S=c?Object.keys(c).filter(function(f){return c&&c[f]}).map(function(f){if(c&&c[f])return"".concat(f,"=").concat(c[f])}):[];s=new WebSocket((0,i.R)(v+"?"+S.join("&"))),s.addEventListener("message",function(f){var U=JSON.parse(f.data),K=U.type;if(K==v&&(a.write(U.data),U.data.indexOf("exec failed")!=-1)){I();return}}),g=a.onData(function(f){var U={content:{command:f},type:v};s&&s.send(JSON.stringify(U))}),B(v),t(c)},close:function(){I()},fit:function(){return d.fit(),{width:a.cols,height:a.rows}},run:function(v){R&&v&&v.forEach(function(c){var S={content:{command:c+`
`},type:e};s&&s.send(JSON.stringify(S))})}}}),(0,l.useEffect)(function(){return a=new O.Terminal(E.X),d=new o.FitAddon,a.loadAddon(d),a.open(document.getElementById("terminal-container-console")),d.fit(),(0,T.pe)({groupName:"setting",name:"themeConsoleConfig"}).then(function(m){m.data&&m.data.fontSize&&Object.assign(a.options,m.data)}),function(){I()}},[]),(0,l.useEffect)(function(){window.addEventListener("resize",function(){d.fit();var m={size:{width:a.cols,height:a.rows},type:e};e&&s&&s.send(JSON.stringify(m))})},[e]);function I(){a.reset(),d.fit(),a.focus(),g&&g.dispose(),s&&(s.close(),s=null)}return(0,y.jsx)("div",{style:{height:(W=L.height)!==null&&W!==void 0?W:"100vh"},id:"terminal-container-console"})});h.Z=p},12323:function(w,h,n){n.d(h,{X:function(){return P},n:function(){return r}});var P={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},r=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},15563:function(w,h,n){n.r(h),n.d(h,{default:function(){return O}});var P=n(5574),r=n.n(P),l=n(49610),i=n(13822),o=n(5251),C=n(82346),E=n(67294),T=n(85893);function O(){var D=(0,C.useParams)(),M=(0,C.useSearchParams)(),y=r()(M,2),a=y[0],d=y[1],s=(0,E.useRef)();return(0,E.useEffect)(function(){D.id&&(0,i.jV)({md5:D.id}).then(function(g){var p;window.document.title="console - ".concat((0,o.fi)(g.data.info.Name,"/")),D.id&&((p=s.current)===null||p===void 0||p.start("/console/container/".concat(g.data.info.Id),{cmd:a.get("cmd"),workDir:a.get("workDir")}))}),document.body.style.overflow="hidden"},[]),(0,T.jsx)(l.Z,{ref:s})}},13822:function(w,h,n){n.d(h,{IE:function(){return T},IW:function(){return C},KK:function(){return d},LJ:function(){return g},RF:function(){return W},Re:function(){return L},aF:function(){return A},eE:function(){return y},jV:function(){return D}});var P=n(15009),r=n.n(P),l=n(99289),i=n.n(l),o=n(82346);function C(t){return E.apply(this,arguments)}function E(){return E=i()(r()().mark(function t(u){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/api/app/container/status",{method:"POST",data:u}));case 1:case"end":return e.stop()}},t)})),E.apply(this,arguments)}function T(t){return O.apply(this,arguments)}function O(){return O=i()(r()().mark(function t(u){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/api/app/container/get-list",{data:u,method:"POST"}));case 1:case"end":return e.stop()}},t)})),O.apply(this,arguments)}function D(t){return M.apply(this,arguments)}function M(){return M=i()(r()().mark(function t(u){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/api/app/container/get-detail",{data:u,method:"POST"}));case 1:case"end":return e.stop()}},t)})),M.apply(this,arguments)}function y(t){return a.apply(this,arguments)}function a(){return a=i()(r()().mark(function t(u){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/api/app/container/update",{data:u,method:"POST"}));case 1:case"end":return e.stop()}},t)})),a.apply(this,arguments)}function d(){return s.apply(this,arguments)}function s(){return s=i()(r()().mark(function t(){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,o.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return _.stop()}},t)})),s.apply(this,arguments)}function g(t){return p.apply(this,arguments)}function p(){return p=i()(r()().mark(function t(u){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/api/app/container/export",{method:"POST",data:u,responseType:"blob"}));case 1:case"end":return e.stop()}},t)})),p.apply(this,arguments)}function L(t){return b.apply(this,arguments)}function b(){return b=i()(r()().mark(function t(u){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/api/app/container/commit",{method:"POST",data:u}));case 1:case"end":return e.stop()}},t)})),b.apply(this,arguments)}function W(t){return j.apply(this,arguments)}function j(){return j=i()(r()().mark(function t(u){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/api/app/container/upgrade",{method:"POST",data:u}));case 1:case"end":return e.stop()}},t)})),j.apply(this,arguments)}function A(t){return R.apply(this,arguments)}function R(){return R=i()(r()().mark(function t(u){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/api/app/container/copy",{method:"POST",data:u}));case 1:case"end":return e.stop()}},t)})),R.apply(this,arguments)}}}]);
