"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3587],{73587:function(tn,de,t){t.d(de,{Z:function(){return _e}});var me=t(19632),ve=t.n(me),fe=t(5574),Q=t.n(fe),he=t(15009),d=t.n(he),Fe=t(99289),B=t.n(Fe),s=t(67294),Y=t(80821),D=t(90098),ge=t(86548),re=t(43425),ae=t(74842),ie=t(48689),pe=t(33160),xe=t(87784),je=t(30159),ye=t(25035),b=t(38345),_=t(97269),k=t(62370),W=t(82346),se=t(85265),H=t(42075),ee=t(96074),X=t(83062),Ce=t(38925),K=t(25593),M=t(84567),Ze=t(28036),Se=t(99861),Re=t(91058),De=t(79245),Ee=t(60940),$e=t(55241),we=t(78451),Pe=t(37413),Be=t(94359),ne=t(24963),Le=t(91806),Ie=t(60433),le=t(89035),Ae=t(57716),Oe=t(78272),Te=t(87662),Ve=t(5251),e=t(85893);function Ne(r){var U=(0,s.useState)(""),A=Q()(U,2),E=A[0],L=A[1],p=(0,s.useContext)(ne.Z),j=p.loading,N=p.lang,m=p.notice,h=p.message,n=(0,s.useRef)(),$=(0,s.useRef)(),I=(0,s.useState)(!1),x=Q()(I,2),F=x[0],y=x[1];return(0,s.useEffect)(function(){(0,Te.EH)().then(function(o){L(o.data.ip)}),y(!1)},[r.containerList]),r.containerList&&(0,e.jsxs)(b.Z,{ghost:!0,title:(0,e.jsx)(Le.Z,{}),subTitle:"\u5BB9\u5668\u5217\u8868",extra:r.enableSelectService&&(0,e.jsx)(M.Z,{onChange:function(O){y(O.target.checked)},children:"\u81EA\u5B9A\u4E49\u90E8\u7F72\u5BB9\u5668\u670D\u52A1\uFF1F"},"selectService"),children:[(0,e.jsx)(Ae.Z,{ref:n}),(0,e.jsx)(Oe.Z,{ref:$}),(0,e.jsx)(Ee.Z,{scroll:{x:"max-content"},rowKey:"service",pagination:!1,columns:[{title:"\u5BB9\u5668\u540D\u79F0",dataIndex:"name",width:200,render:function(O,l,z){return(0,e.jsx)(X.Z,{title:l.service,children:(0,e.jsx)(we.Z,{content:l.name?(0,Ve.fi)(l.name,"/"):l.service})})}},{title:"\u7AEF\u53E3",render:function(O,l,z){var C=[],w=[];return l.publishers&&l.publishers.map(function(T){T.publishedPort?C.push({PrivatePort:T.targetPort,Type:T.protocol,IP:T.url,PublicPort:T.publishedPort}):T.publishedPort&&w.push({PrivatePort:T.targetPort,Type:T.protocol,IP:T.url,PublicPort:T.publishedPort})}),(0,e.jsx)(Pe.Z,{publicPort:C,privatePort:w,domain:[],serverIp:E})}},{title:"\u72B6\u6001",render:function(O,l,z){return(0,e.jsx)(Be.Z,{status:l.state,message:{content:N("container.status.".concat(l.state)),placement:"top",showInTag:!0}},l.name)}},{title:"\u64CD\u4F5C",fixed:"right",render:function(O,l,z){return(0,e.jsxs)(H.Z,{split:(0,e.jsx)(ee.Z,{type:"vertical"}),children:[l.name==""&&(0,e.jsx)($e.Z,{placement:"left",content:(0,e.jsx)(b.Z,{ghost:!0,title:"\u5BB9\u5668\u5185\u73AF\u5883\u53D8\u91CF",children:(0,e.jsx)(H.Z,{direction:"vertical",children:l.environment&&Object.keys(l.environment).map(function(C){if(l.environment&&l.environment[C])return(0,e.jsx)(K.Z.Text,{code:!0,children:"".concat(C,"=").concat(l.environment[C])},C)})})}),children:(0,e.jsx)(Ie.Z,{})}),l.name!=""&&(0,e.jsx)(K.Z.Link,{onClick:function(){var w;(w=$.current)===null||w===void 0||w.show(l.name)},children:(0,e.jsx)(re.Z,{})},"container"),l.state=="running"&&(0,e.jsx)(K.Z.Link,{onClick:function(){var w;(w=n.current)===null||w===void 0||w.show(l.name)},children:(0,e.jsx)(le.Z,{})},"console")]})}}],dataSource:r.containerList,rowSelection:F&&r.containerList?{defaultSelectedRowKeys:r.containerList.map(function(o){return o.service}),onChange:function(O,l,z){r.selectServiceFinish&&r.selectServiceFinish(O)}}:void 0})]})}var Ge=t(81146),ke=t(45742),Ue=(0,s.forwardRef)(function(r,U){(0,s.useImperativeHandle)(U,function(){return{show:function(I){return B()(d()().mark(function x(){return d()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:h(r.composeItem),p(!0);case 2:case"end":return y.stop()}},x)}))()}}});var A=(0,s.useState)(!1),E=Q()(A,2),L=E[0],p=E[1],j=(0,s.useState)(),N=Q()(j,2),m=N[0],h=N[1],n=(0,s.useRef)();return(0,e.jsxs)(e.Fragment,{children:[r.showTriggerButton&&(0,e.jsx)(K.Z.Link,{onClick:B()(d()().mark(function $(){return d()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:h(r.composeItem),p(!0);case 2:case"end":return x.stop()}},$)})),children:(0,e.jsx)(X.Z,{title:"\u8FD0\u884C\u65E5\u5FD7",children:(0,e.jsx)(ke.Z,{})})},"log"),(0,e.jsx)(se.Z,{title:"\u4EFB\u52A1\u65E5\u5FD7",open:L,forceRender:!0,onClose:function(){p(!1)},afterOpenChange:function(I){if(I)setTimeout(function(){var F,y;(F=n.current)===null||F===void 0||F.start(),(y=n.current)===null||y===void 0||y.fit()},1e3);else{var x;(x=n.current)===null||x===void 0||x.close()}},width:800,children:m&&L&&(0,e.jsx)(Ge.Z,{ref:n,showInDrawer:!0,id:"compose:log:".concat(String(m.id||m.name)),request:function(){var $=B()(d()().mark(function I(x){var F;return d()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,D.Yz)({id:m.id||m.name,lineTotal:x.lineTotal,download:(F=x.download)!==null&&F!==void 0?F:!1,showTime:x.showTime});case 2:case"end":return o.stop()}},I)}));return function(I){return $.apply(this,arguments)}}(),download:function(){var $=B()(d()().mark(function I(x){var F;return d()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,D.vf)({id:m.id||m.name,lineTotal:x.lineTotal,showTime:x.showTime,download:!0});case 2:return F=o.sent,o.abrupt("return",{data:new Blob([F],{type:"text/plain"}),name:r.composeItem.name+"_"+new Date().toLocaleDateString()+".log"});case 4:case"end":return o.stop()}},I)}));return function(I){return $.apply(this,arguments)}}()})})]})}),Qe=Ue,Ye=t(184),He=t(95213),Me=t(95089),ze=t(92398);function be(r){var U=(0,s.useContext)(ne.Z),A=U.message,E=(0,s.useRef)();return r.composeItem.yamlList&&(0,e.jsx)(Ye.a,{title:"\u7F16\u8F91\u4EFB\u52A1 Yaml",formRef:E,trigger:(0,e.jsx)(K.Z.Link,{children:(0,e.jsx)(X.Z,{title:"Yaml",children:"Yaml"})}),onFinish:function(){var L=B()(d()().mark(function p(j){return d()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,D.im)({id:String(r.composeItem.id?r.composeItem.id:r.composeItem.name),name:r.composeItem.name,type:r.composeItem.setting.type,yaml:j.yaml,yamlOverride:j.yamlOverride});case 2:return m.next=4,(0,D.xC)({yaml:[j.yaml,j.yamlOverride],environment:r.composeItem.setting.environment,id:r.composeItem.id||r.composeItem.name});case 4:return r.onFinish&&r.onFinish(),m.abrupt("return",!0);case 6:case"end":return m.stop()}},p)}));return function(p){return L.apply(this,arguments)}}(),children:(0,e.jsx)(b.Z,{ghost:!0,children:(0,e.jsx)(ze.Z,{items:r.composeItem.yamlList.map(function(L,p){var j=[{label:"Yaml \u6587\u4EF6",key:"yaml"},{label:"\u8986\u76D6 Yaml \u6587\u4EF6",key:"yamlOverride"}];return{label:j[p].label,key:j[p].key,children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(k.Z,{hidden:!0,name:j[p].key}),(0,e.jsx)(k.Z,{shouldUpdate:!0,children:function(m){return(0,e.jsx)(Me.ZP,{onFocus:function(){if(j[p].key=="yaml"&&r.composeItem.setting.type=="remoteUrl"){A.error("\u8FDC\u7A0Byaml\u6587\u4EF6\u65E0\u6CD5\u4FEE\u6539\uFF0C\u8BF7\u901A\u8FC7\u3010\u8986\u76D6 yaml \u6587\u4EF6\u3011\u7684\u65B9\u5F0F\u4FEE\u6539\u5185\u5BB9\u3002");return}},readOnly:j[p].key=="yaml"&&r.composeItem.setting.type=="remoteUrl",theme:"dark",minHeight:"550px",value:L,onChange:function(n){m.setFieldValue(j[p].key,n)},extensions:[He.RI.yaml()]})}})]})}})})})})}var Ke=t(54964),Je=(0,s.forwardRef)(function(r,U){(0,s.useImperativeHandle)(U,function(){return{show:function(){var h;N(!0),(h=E.current)===null||h===void 0||h.clear(),setTimeout(function(){var n;(n=E.current)===null||n===void 0||n.fit()},1e3)},close:function(){var h;N(!1),(h=E.current)===null||h===void 0||h.clear()}}});var A=(0,W.useModel)("subscriber"),E=(0,s.useRef)(),L=(0,s.useState)(!1),p=Q()(L,2),j=p[0],N=p[1];return A.addDataHandler("compose:"+r.id,function(m){var h;(h=E.current)===null||h===void 0||h.write(m.data)}),(0,e.jsx)(b.Z,{hidden:!j,ghost:!0,title:(0,e.jsx)(le.Z,{}),subTitle:"\u63A7\u5236\u53F0",extra:(0,e.jsx)(H.Z,{children:(0,e.jsx)(Y.Z,{action:function(){var h;return(h=E.current)===null||h===void 0||h.clear(),(0,D.U_)({})},icon:(0,e.jsx)(ie.Z,{}),danger:!0,onSuccess:function(){},children:"\u4E2D\u6B62\u6267\u884C"},"kill")}),children:(0,e.jsx)(Ke.Z,{height:"200px",style:{fontSize:12},ref:E})})}),We=Je,Xe=t(65913),te=t(1699),qe=(0,s.forwardRef)(function(r,U){var A;(0,s.useImperativeHandle)(U,function(){return{show:function(a){return B()(d()().mark(function f(){var g;return d()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return(g=C.current)===null||g===void 0||g.close(),j(!0),i.prev=2,i.next=5,oe(a);case 5:i.next=12;break;case 7:i.prev=7,i.t0=i.catch(2),j(!1),$(void 0),r.onClose&&r.onClose();case 12:case"end":return i.stop()}},f,null,[[2,7]])}))()}}});var E=(0,s.useState)(!1),L=Q()(E,2),p=L[0],j=L[1],N=(0,W.useNavigate)(),m=(0,s.useState)(),h=Q()(m,2),n=h[0],$=h[1],I=(0,s.useState)(0),x=Q()(I,2),F=x[0],y=x[1],o=(0,s.useRef)(),O=(0,s.useRef)(),l=(0,s.useRef)(),z=(0,s.useRef)(),C=(0,s.useRef)(),w=(0,s.useRef)(),T=(0,s.useContext)(ne.Z),en=T.message,q=(0,W.useAccess)(),nn=function(){var v=B()(d()().mark(function a(f){var g,R,i,u;return d()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if((g=C.current)===null||g===void 0||g.show(),!f.pullImageUseDPanel){c.next=5;break}return c.next=4,(R=z.current)===null||R===void 0?void 0:R.start();case 4:(i=z.current)===null||i===void 0||i.finish();case 5:return c.prev=5,c.next=8,(0,D.Oh)(f);case 8:(u=C.current)===null||u===void 0||u.close(),r.onDeployFinish&&r.onDeployFinish(),c.next=15;break;case 12:c.prev=12,c.t0=c.catch(5),r.onDeployFailed&&r.onDeployFailed(n);case 15:y(F+1);case 16:case"end":return c.stop()}},a,null,[[5,12]])}));return function(f){return v.apply(this,arguments)}}(),oe=function(){var v=B()(d()().mark(function a(f){var g,R,i,u,Z,c,G;return d()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return(g=w.current)===null||g===void 0||g.show(),(R=o.current)===null||R===void 0||R.resetFields(),S.next=4,(0,D.Pn)({id:f}).finally(B()(d()().mark(function V(){var P;return d()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:(P=w.current)===null||P===void 0||P.destroy();case 1:case"end":return ue.stop()}},V)}))).catch(function(V){throw V});case 4:i=S.sent,u=i.data.detail,u.setting.status&&u.setting.status.indexOf("running")>-1&&(u.isRunning=!0),u.setting.status&&u.setting.status.indexOf("paused")>-1&&(u.isPaused=!0),u.setting.status&&u.setting.status.indexOf("exited")>-1&&(u.isExited=!0),u.setting.status&&u.setting.status=="waiting"?u.isDeploy=!1:u.isDeploy=!0,u.setting.status&&u.setting.status.indexOf("created")>-1&&(u.isCreated=!0,u.isDeploy=!1),Z=i.data.project,Z&&(u.imageList=ve()(new Set(Object.keys(Z.services).map(function(V){var P;return(P=Z.services[V].image)!==null&&P!==void 0?P:""})))),u.containerList=i.data.containerList,(!u.containerList||u.containerList.length==0)&&Z&&Z.services&&(u.containerList=Object.keys(Z.services).map(function(V){return{name:"",service:V,publishers:Z.services[V].ports?Z.services[V].ports.map(function(P){var J;return{url:"",targetPort:P.target,publishedPort:parseInt(P.published),protocol:(J=P.protocol)!==null&&J!==void 0?J:""}}):[],state:"waiting",status:"",environment:Z.services[V].environment}})),u.containerList&&((c=o.current)===null||c===void 0||c.setFieldValue("deployServiceName",i.data.detail.setting.deployServiceName)),u.yamlList=i.data.yaml,$(u),i.data.yaml&&i.data.yaml.map(function(V){(0,De.m)(V).map(function(P){u.setting.environment&&!u.setting.environment.find(function(J){return J.name==P.name})&&u.setting.environment.push(P)})}),i.data.detail.setting.environment&&((G=o.current)===null||G===void 0||G.setFieldValue("environment",i.data.detail.setting.environment));case 20:case"end":return S.stop()}},a)}));return function(f){return v.apply(this,arguments)}}();return(0,s.useEffect)(function(){F>0&&n&&oe(n.id||n.name).catch(function(v){j(!1)})},[F]),(0,e.jsx)(se.Z,{width:800,forceRender:!0,extra:n&&n.setting.type!="dangling"&&(0,e.jsxs)(H.Z,{split:(0,e.jsx)(ee.Z,{type:"vertical"}),children:[n.isDeploy&&(0,e.jsx)(Qe,{composeItem:n,showTriggerButton:!0}),q.canSeeComposeListManage&&(0,e.jsx)(be,{composeItem:n,onFinish:B()(d()().mark(function v(){return d()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:en.info("\u4FEE\u6539 Yaml \u540E\u8BF7\u66F4\u65B0\u8BE5\u4EFB\u52A1\uFF0C\u5982\u679C\u5305\u542B\u73AF\u5883\u53D8\u91CF\u6539\u52A8\uFF0C\u8BF7\u91CD\u65B0\u90E8\u7F72"),y(F+1);case 2:case"end":return f.stop()}},v)}))}),q.canSeeComposeListManageCreate&&(0,e.jsx)(W.Link,{to:"/compose/create?id="+(n.id||n.name),children:(0,e.jsx)(X.Z,{title:"\u7F16\u8F91\u4EFB\u52A1",children:(0,e.jsx)(ge.Z,{})})})]}),title:(0,e.jsxs)(H.Z,{children:["\u5FEB\u6377\u67E5\u770B\u4EFB\u52A1 - ",(A=n==null?void 0:n.name)!==null&&A!==void 0?A:""]}),open:p,onClose:function(){j(!1),$(void 0),r.onClose&&r.onClose()},children:(0,e.jsx)(Xe.Z,{ref:w,children:(0,e.jsxs)(b.Z,{direction:"column",ghost:!0,gutter:[10,10],children:[(0,e.jsxs)(b.Z,{title:(0,e.jsx)(re.Z,{}),subTitle:"\u7BA1\u7406\u4EFB\u52A1",ghost:!0,extra:(0,e.jsx)(e.Fragment,{children:n&&n.imageList&&n.imageList.length>0&&(0,e.jsx)(Se.Z,{ref:z,image:n.imageList})}),children:[n&&n.setting.type=="dangling"&&(0,e.jsx)(Ce.Z,{type:"warning",showIcon:!0,description:(0,e.jsxs)("div",{children:["\u65E0\u6CD5\u627E\u5230\u8BE5\u4EFB\u52A1\u7684 yaml \u6587\u4EF6\uFF0C \u8BF7\u5728\u9762\u677F\u7684 /dpanel/compose \u76EE\u5F55\u4E2D\u6DFB\u52A0 ",n.name," \u76EE\u5F55, \u5728\u76EE\u5F55\u4E2D\u653E\u7F6E compose.yaml \u6587\u4EF6 ",(0,e.jsx)("a",{href:"https://dpanel.cc/#/zh-cn/manual/compose/external",target:"_blank",children:"\u5982\u4F55\u6DFB\u52A0\uFF1F"})]})}),n&&n.setting.type!="dangling"&&(0,e.jsxs)(H.Z,{wrap:!0,split:(0,e.jsx)(ee.Z,{type:"vertical"}),children:[(0,e.jsx)(te.u,{access:"canSeeComposeList",children:(0,e.jsx)(Y.Z,{icon:(0,e.jsx)(ae.Z,{}),type:"primary",confirm:(0,e.jsxs)(H.Z,{style:{width:300},direction:"vertical",children:[(0,e.jsx)(K.Z.Text,{children:"\u91CD\u65B0\u521B\u5EFA\u8BE5\u4EFB\u52A1\u4E0B\u7684\u5BB9\u5668\uFF1F"}),(0,e.jsxs)(_.A,{name:"createForm",formRef:l,layout:"inline",submitter:!1,children:[(0,e.jsx)(k.Z,{initialValue:!1,name:"pullImageUseCommand",valuePropName:"checked",children:(0,e.jsx)(M.Z,{children:"\u4F7F\u7528\u547D\u4EE4\u62C9\u53D6\u955C\u50CF\uFF08\u9700\u914D\u7F6E\u547D\u4EE4\u4EE3\u7406\uFF09\uFF1F"})}),(0,e.jsx)(k.Z,{initialValue:!0,name:"pullImageUseDPanel",valuePropName:"checked",children:(0,e.jsx)(M.Z,{defaultChecked:!0,children:"\u4F7F\u7528\u9762\u677F\u62C9\u53D6\u955C\u50CF\uFF08\u9700\u914D\u7F6E\u4ED3\u5E93\u52A0\u901F\uFF09\uFF1F"})}),(0,e.jsx)(k.Z,{initialValue:!0,name:"createPath",valuePropName:"checked",children:(0,e.jsx)(M.Z,{defaultChecked:!0,children:"\u521B\u5EFA\u6302\u8F7D\u76EE\u5F55\uFF08\u4EC5\u9762\u677F\u975E\u5BB9\u5668\u90E8\u7F72\u751F\u6548\uFF09\uFF1F"})}),(0,e.jsx)(k.Z,{initialValue:!0,name:"removeOrphans",valuePropName:"checked",children:(0,e.jsx)(M.Z,{defaultChecked:!0,children:"\u6E05\u9664\u5DF2\u91CD\u547D\u540D\u6216\u662F\u88AB\u5220\u9664\u7684\u670D\u52A1\uFF1F"})})]})]}),action:B()(d()().mark(function v(){var a,f,g,R,i,u,Z,c,G;return d()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(c={id:n.id||n.name},(a=l.current)!==null&&a!==void 0&&a.getFieldValue&&l.current.getFieldValue("pullImageUseDPanel")&&(c.pullImageUseDPanel=!0),c.environment=(f=o.current)===null||f===void 0?void 0:f.getFieldValue("environment"),c.deployServiceName=(g=o.current)===null||g===void 0?void 0:g.getFieldValue("deployServiceName"),c.createPath=(R=(i=l.current)===null||i===void 0?void 0:i.getFieldValue("createPath"))!==null&&R!==void 0?R:!0,c.removeOrphans=(u=(Z=l.current)===null||Z===void 0?void 0:Z.getFieldValue("removeOrphans"))!==null&&u!==void 0?u:!0,!(n!=null&&n.isDeploy)){S.next=10;break}if(!((G=l.current)!==null&&G!==void 0&&G.getFieldValue("pullImageUseCommand"))){S.next=10;break}return S.next=10,(0,D.GG)({id:n.id||n.name,op:"pull"});case 10:return S.abrupt("return",nn(c));case 11:case"end":return S.stop()}},v)})),children:n.isDeploy?"\u66F4\u65B0":"\u542F\u52A8"},"create")}),(n.isDeploy||n.isCreated)&&q.canSeeComposeListManage&&(0,e.jsx)(Y.Z,{action:function(){var a;return(a=C.current)===null||a===void 0||a.show(),(0,D.mg)({id:n.id||n.name,deleteImage:!1,deleteData:!1,deleteVolume:!1,deletePath:!1})},onSuccess:function(){y(F+1)},type:"primary",danger:!0,confirm:"notification.confirm.title",icon:(0,e.jsx)(ie.Z,{}),children:"\u5220\u9664\u5BB9\u5668"}),n.isDeploy&&(0,e.jsxs)(te.u,{access:"canSeeComposeList",space:{direction:"horizontal"},children:[(0,e.jsx)(Y.Z,{icon:(0,e.jsx)(pe.Z,{}),action:B()(d()().mark(function v(){var a;return d()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return(a=C.current)===null||a===void 0||a.show(),g.abrupt("return",(0,D.GG)({id:n.id||n.name,op:"restart"}));case 2:case"end":return g.stop()}},v)})),onSuccess:function(){y(F+1)},children:"\u91CD\u542F"},"restart"),(0,e.jsx)(Y.Z,{action:function(){var a;return(a=C.current)===null||a===void 0||a.show(),(0,D.GG)({id:n.id||n.name,op:"stop"})},icon:(0,e.jsx)(xe.Z,{}),disabled:n.isExited,onSuccess:function(){y(F+1)},children:"\u505C\u6B62"}),n.isPaused&&(0,e.jsx)(Y.Z,{action:function(){var a;return(a=C.current)===null||a===void 0||a.show(),(0,D.GG)({id:n.id||n.name,op:"unpause"})},onSuccess:function(){y(F+1)},icon:(0,e.jsx)(ae.Z,{}),children:"\u6062\u590D"}),!n.isPaused&&(0,e.jsx)(Y.Z,{action:function(){var a;return(a=C.current)===null||a===void 0||a.show(),(0,D.GG)({id:n.id||n.name,op:"pause"})},onSuccess:function(){y(F+1)},icon:(0,e.jsx)(je.Z,{}),disabled:!n.isRunning,children:"\u6682\u505C"})]}),n.id>0&&q.canSeeComposeListManageDelete&&(0,e.jsx)(Y.Z,{type:"primary",action:B()(d()().mark(function v(){var a,f,g,R,i,u,Z,c,G;return d()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return(a=C.current)===null||a===void 0||a.show(),S.next=3,(0,D.mg)({id:(f=n==null?void 0:n.id)!==null&&f!==void 0?f:n.name,deleteImage:(g=(R=O.current)===null||R===void 0?void 0:R.getFieldValue("deleteImage"))!==null&&g!==void 0?g:!1,deleteVolume:(i=(u=O.current)===null||u===void 0?void 0:u.getFieldValue("deleteVolume"))!==null&&i!==void 0?i:!1,deletePath:(Z=(c=O.current)===null||c===void 0?void 0:c.getFieldValue("deletePath"))!==null&&Z!==void 0?Z:!1});case 3:return S.next=5,(0,D.ik)({id:[(G=n.id)!==null&&G!==void 0?G:0]});case 5:y(F+1);case 6:case"end":return S.stop()}},v)})),danger:!0,onSuccess:function(){N("/compose/list")},confirm:(0,e.jsxs)(H.Z,{style:{width:240},direction:"vertical",children:[(0,e.jsx)(K.Z.Text,{children:"\u4F1A\u540C\u65F6\u5220\u9664\u5BB9\u5668\u53CA\u90E8\u7F72\u76F8\u5173\u6570\u636E\uFF0C\u672A\u52FE\u9009\u5220\u9664 compose \u6587\u4EF6\u65F6 yaml \u6587\u4EF6\u5C06\u4F1A\u4FDD\u7559\uFF0C\u786E\u8BA4\u5417\uFF1F"}),(0,e.jsxs)(_.A,{formRef:O,layout:"inline",submitter:!1,children:[(0,e.jsx)(k.Z,{initialValue:!1,name:"deleteImage",valuePropName:"checked",children:(0,e.jsx)(M.Z,{children:"\u5220\u9664\u955C\u50CF\uFF1F"})}),(0,e.jsx)(k.Z,{addonAfter:(0,e.jsx)(X.Z,{title:"\u672A\u6302\u8F7D\u955C\u50CF\u5185\u58F0\u660E\u7684\u76EE\u5F55\u5E76\u7531 docker \u81EA\u52A8\u521B\u5EFA\u7684\u5B58\u50A8\u5377",children:(0,e.jsx)(ye.Z,{})}),initialValue:!1,name:"deleteVolume",valuePropName:"checked",children:(0,e.jsx)(M.Z,{children:"\u5220\u9664\u533F\u540D\u5B58\u50A8\u5377\uFF1F"})}),(0,e.jsx)(k.Z,{initialValue:!1,name:"deletePath",valuePropName:"checked",children:(0,e.jsx)(M.Z,{children:"\u5220\u9664 Compose \u6587\u4EF6\u548C\u4EFB\u52A1\u76EE\u5F55\uFF1F"})})]})]}),children:"\u5220\u9664\u4EFB\u52A1"}),r.showBackListButton&&(0,e.jsx)(W.Link,{to:"/compose/list",children:(0,e.jsx)(Ze.ZP,{children:"\u4EFB\u52A1\u5217\u8868"})})]})]},"operator"),n&&(0,e.jsx)(We,{ref:C,id:n.id||n.name}),n&&(0,e.jsx)(Ne,{containerList:n.containerList,enableSelectService:!n.isDeploy,selectServiceFinish:function(a){var f;(f=o.current)===null||f===void 0||f.setFieldValue("deployServiceName",a)}}),(0,e.jsx)(te.u,{access:"canSeeComposeListManage",children:(0,e.jsxs)(_.A,{submitter:!1,formRef:o,children:[(0,e.jsx)(k.Z,{name:"deployServiceName",hidden:!0}),n&&n.setting.type!="dangling"&&(0,e.jsx)(b.Z,{title:"\u73AF\u5883\u53D8\u91CF",subTitle:"\u73AF\u5883\u53D8\u91CF\u4F1A\u8986\u76D6 .env \u6587\u4EF6",tooltip:"\u66B4\u9732\u73AF\u5883\u53D8\u91CF\u9700\u8981\u5728 yaml \u4E2D\u914D\u7F6E\u73AF\u5883\u53D8\u91CF",ghost:!0,children:(0,e.jsx)(Re.Z,{showCardGhost:!0,name:"environment",showDisableName:!0,requireValue:!0,showDeleteButton:!1})})]})})]})})})}),_e=qe}}]);
