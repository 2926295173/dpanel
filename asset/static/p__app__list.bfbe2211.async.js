"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4316],{36435:function(Ue,re,r){var se=r(15009),d=r.n(se),le=r(64599),p=r.n(le),$=r(99289),ie=r.n($),X=r(9783),j=r.n(X),ae=r(5574),T=r.n(ae),H=r(67294),ue=r(184),fe=r(38345),oe=r(97269),pe=r(97321),ne=r(97462),G=r(64317),B=r(5966),Oe=r(86615),N=r(68602),Q=r(83622),I=r(83403),De=r(24963),K=r(1699),g=r(29177),O=r(1883),z=r(43425),l=r(44349),Ce=r(3616),be=r(36146),M=r(85893),We=(0,H.forwardRef)(function(V,q){var Y=(0,H.useState)(!1),A=T()(Y,2),de=A[0],he=A[1],J=(0,H.useRef)(),te=(0,H.useContext)(De.Z),t=te.message,Ze=(0,H.useState)([]),Te=T()(Ze,2),ye=Te[0],Pe=Te[1],U=new be.Uo("components.permissionButton"),Le=j()(j()(j()(j()(j()({},I.W6.CONTAINER,"Id"),I.W6.APPSTORE,"name"),I.W6.COMPOSE,"name"),I.W6.REGISTRY,"serverAddress"),I.W6.DOCKER_ENV,"name"),$e=j()(j()(j()(j()(j()({},I.W6.CONTAINER,"name"),I.W6.APPSTORE,"name"),I.W6.COMPOSE,"name"),I.W6.REGISTRY,"title"),I.W6.DOCKER_ENV,"title"),Ae=Le[V.type],Fe=$e[V.type],Be=V.selected.map(function(D){return D[Le[V.type]]});return H.useEffect(function(){if(de){if(!V.selected||V.selected.length==0){t.error(be.FD.format("message.noDataSelect")),he(!1);return}(0,N.dP)({permission:{uri:V.type,key:Ae,value:Be}}).then(function(D){var E;(E=J.current)===null||E===void 0||E.setFieldValue("list",Object.keys(D.data.list).map(function(b){return{name:b,type:D.data.list[b].type,users:D.data.list[b].users}}))}),(0,N.lE)().then(function(D){var E,b=(E=D.data)===null||E===void 0||(E=E.list)===null||E===void 0?void 0:E.map(function(y){return{label:y.username,value:y.username}});Pe(b)})}},[de]),(0,M.jsx)(K.u,{access:["canSeeEnableEe","canSeeFounder","canSeeManage"],children:(0,M.jsxs)(ue.a,{name:"create",title:U.format("drawerTitle"),open:de,onOpenChange:function(E){if(!E){var b;(b=J.current)===null||b===void 0||b.resetFields()}he(E)},drawerProps:{forceRender:!0,width:Ce.R_},formRef:J,trigger:(0,M.jsx)(Q.ZP,{icon:(0,M.jsx)(g.Z,{}),children:U.format("drawerTriggerButton")}),onFinish:function(){var D=ie()(d()().mark(function E(b){var y,C,u;return d()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:y=p()(b.list),R.prev=1,y.s();case 3:if((C=y.n()).done){R.next=9;break}return u=C.value,R.next=7,(0,N.Db)({usernames:u.users,permissionType:u.type,permission:{uri:V.type,key:Ae,showKey:Fe,value:[u.name]}});case 7:R.next=3;break;case 9:R.next=14;break;case 11:R.prev=11,R.t0=R.catch(1),y.e(R.t0);case 14:return R.prev=14,y.f(),R.finish(14);case 17:t.success(be.FD.format("finish")),he(!1),V.onSuccess();case 20:case"end":return R.stop()}},E,null,[[1,11,14,17]])}));return function(E){return D.apply(this,arguments)}}(),children:[(0,M.jsxs)(fe.Z,{ghost:!0,title:(0,M.jsx)(O.Z,{}),subTitle:U.format("batchTitle"),children:[(0,M.jsx)(oe.A.Item,{name:"type",style:{marginBottom:0},children:(0,M.jsx)(pe.Z.Group,{defaultValue:"admin",onChange:function(E){var b,y,C=(b=J.current)===null||b===void 0?void 0:b.getFieldValue("list");C.forEach(function(u){u.type=E,u.users=[]}),(y=J.current)===null||y===void 0||y.setFieldValue("list",C)},children:["admin","restricted","public"].map(function(D){return(0,M.jsx)(pe.Z,{style:{width:240},title:U.format("dataTypeOption.".concat(D)),description:U.format("dataTypeOptionDesc.".concat(D)),value:D},D)})})}),(0,M.jsx)(ne.Z,{name:["type"],children:function(E){var b=E.type;if(b==="restricted")return(0,M.jsx)(G.Z,{mode:"multiple",name:"usernames",label:U.format("formUsernames"),onChange:function(C){var u,k,R=(u=J.current)===null||u===void 0?void 0:u.getFieldValue("list");R.forEach(function(w){w.users=C}),(k=J.current)===null||k===void 0||k.setFieldValue("list",R)},rules:[{required:!0}],request:ie()(d()().mark(function y(){var C,u,k;return d()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(!(ye.length>0)){w.next=2;break}return w.abrupt("return",ye);case 2:return w.next=4,(0,N.lE)();case 4:return u=w.sent,k=(C=u.data)===null||C===void 0||(C=C.list)===null||C===void 0?void 0:C.map(function(L){return{label:L.username,value:L.username}}),Pe(k),w.abrupt("return",k);case 8:case"end":return w.stop()}},y)}))})}})]}),(0,M.jsx)(fe.Z,{ghost:!0,title:(0,M.jsx)(z.Z,{}),subTitle:U.format("dataTitle"),children:(0,M.jsx)(l.Z,{name:"list",hideCopyButton:!0,gap:10,items:[{name:"name",label:U.format("dataName"),render:function(E,b,y){var C=y.getCurrentRowData();return(0,M.jsx)(B.Z,{disabled:!0,label:U.format("dataName"),width:"sm",name:"name"})}},{name:"type",label:U.format("dataType"),render:function(E,b,y){var C=y.getCurrentRowData();return(0,M.jsx)(Oe.Z.Group,{label:U.format("dataType"),name:"type",radioType:"button",options:["admin","public","restricted"].map(function(u){return{label:U.format("dataTypeOption.".concat(u)),value:u}})})}},{name:"users",label:U.format("dataUsers"),render:function(E,b,y){return(0,M.jsx)(ne.Z,{name:["type"],children:function(u){var k=u.type;if(k=="restricted")return(0,M.jsx)(G.Z,{width:"sm",mode:"tags",name:"users",label:U.format("dataUsers"),options:ye})}})}}]})})]})})});re.Z=We},14668:function(Ue,re,r){r.r(re),r.d(re,{default:function(){return w}});var se=r(64599),d=r.n(se),le=r(15009),p=r.n(le),$=r(19632),ie=r.n($),X=r(99289),j=r.n(X),ae=r(5574),T=r.n(ae),H=r(90078),ue=r(83622),fe=r(34041),oe=r(56729),pe=r(97269),ne=r(62370),G=r(42075),B=r(25593),Oe=r(40411),N=r(96074),Q=r(83062),I=r(84567),De=r(50136),K=r(82346),g=r(1883),O=r(89035),z=r(95591),l=r(86548),Ce=r(74842),be=r(87784),M=r(33160),We=r(30159),V=r(94359),q=r(13822),Y=r(80821),A=r(67294),de=r(62597),he=r(87662),J=r(16165),te=r(5251),t=r(85893),Ze=function(){return(0,t.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18403",children:(0,t.jsx)("path",{d:"M224 192v64H96v576h128v64h64v-64h64v64h64v-64h64v64h64v-64h64v64h64v-64h64v64h64v-64h128V256h-128V192h-64v64h-64V192h-64v64h-64V192h-64v64h-64V192h-64v64H288V192z m-64 128h704v448H160z m96 64c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32zM256 512c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m512 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32zM256 640c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z","p-id":"18404"})})},Te=function(){return(0,t.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18546",children:(0,t.jsx)("path",{d:"M64 224v576h416v-32c0-17.76 14.24-32 32-32 17.76 0 32 14.24 32 32v32h416V224z m64 64h768v288H128z m64 64v160h192v-160z m224 0v160h192v-160z m224 0v160h192v-160zM256 416h64v32H256z m224 0h64v32h-64z m224 0h64v32h-64zM128 640h768v96h-300.992c-14.144-35.52-42.752-64-83.008-64-40.256 0-68.864 28.48-83.008 64H128z","p-id":"18547"})})};function ye(L){var ce,Se,ve,h,Me,_e;return(0,t.jsx)(t.Fragment,{children:L.value&&L.value.memory&&L.value.memory.out>0?(0,t.jsxs)(G.Z,{children:[(0,t.jsxs)(Q.Z,{title:"Cpu: ".concat((ce=L.value)===null||ce===void 0?void 0:ce.cpu.toFixed(2),"%"),children:[(0,t.jsx)(J.Z,{component:Ze,style:{width:15,lineHeight:20}})," ","".concat((Se=L.value)===null||Se===void 0?void 0:Se.cpu.toFixed(2),"%")]}),(0,t.jsxs)(Q.Z,{title:"Memory: ".concat((0,te.FI)((ve=L.value)===null||ve===void 0?void 0:ve.memory.in)," / ").concat((0,te.FI)((h=L.value)===null||h===void 0?void 0:h.memory.out)),children:[(0,t.jsx)(J.Z,{component:Te,style:{width:15,lineHeight:20}})," ","".concat((((Me=L.value)===null||Me===void 0?void 0:Me.memory.in)/((_e=L.value)===null||_e===void 0?void 0:_e.memory.out)*100).toFixed(2),"%")]})]}):""})}var Pe=r(67255),U=r(37413),Le=r(46357),$e=r(99922),Ae=r(83403),Fe=r(20578),Be=r(99861),D=r(78914),E=r(29453),b=r(8287),y=r(93362),C=r(78451),u=r(36146),k=r(36435),R=r(1699);function w(){var L,ce,Se=(0,K.useLocation)(),ve=(0,K.useAccess)(),h=(0,A.useRef)(),Me=(0,A.useState)(""),_e=T()(Me,2),tr=_e[0],sr=_e[1],lr=(0,A.useState)(1),Ne=T()(lr,2),ir=Ne[0],ur=Ne[1],or=(0,A.useState)([]),ze=T()(or,2),ge=ze[0],dr=ze[1],cr=(0,A.useState)(),Ve=T()(cr,2),Ee=Ve[0],vr=Ve[1],mr=(0,A.useState)([]),He=T()(mr,2),Ge=He[0],fr=He[1],Qe=(0,A.useRef)(),Ye=(0,A.useRef)(),Je=(0,A.useRef)(),Xe=(0,A.useRef)(),qe=(0,A.useRef)(),Ke=(0,A.useRef)(),er=(0,A.useRef)(),rr=new u.Uo("components.appDetail.appDetailQuickManage");return(0,A.useEffect)(function(){(0,he.K3)().then(function(P){var o;sr((o=P.data.serverUrl)!==null&&o!==void 0?o:"")}),!ve.canSeeEnableCe&&(0,Fe.q)().then(function(P){vr(P.data)})},[]),(0,t.jsxs)(H._z,{header:{extra:[(0,t.jsx)(R.u,{access:"canSeeContainerListManageCreate",children:(0,t.jsx)(K.Link,{to:"/app/create/image",children:(0,t.jsx)(ue.ZP,{type:"primary",children:u.Ob.format("container.create")})})},"create")]},children:[(0,t.jsx)(Le.Z,{ref:Qe,onFinish:function(){var o,s;!((o=h.current)===null||o===void 0)&&o.reloadAndRest&&((s=h.current)===null||s===void 0||s.reloadAndRest())},onUpgradeFinish:function(){var o,s;!((o=h.current)===null||o===void 0)&&o.reloadAndRest&&((s=h.current)===null||s===void 0||s.reloadAndRest())}}),(0,t.jsx)($e.Z,{showFileExplorer:!0,ref:Ye}),(0,t.jsx)(b.Z,{ref:Je}),(0,t.jsx)(Be.Z,{ref:Ke,finishAutoHide:!0}),(0,t.jsx)(D.Z,{ref:er}),(0,t.jsx)(y.Z,{showConsole:!0,ref:Xe}),(0,t.jsx)(oe.Z,{actionRef:h,scroll:{x:"max-content"},columns:[{key:"title",title:u.FD.format("listTitle"),width:300,dataIndex:"siteTitle",sorter:function(o,s){return o.Names[0].localeCompare(s.Names[0])},sortDirections:["descend","ascend"],render:function(o,s,_,m,a){var n=(0,te.fi)(s.Names[0],"/");return(0,t.jsxs)(G.Z,{direction:"vertical",children:[(0,t.jsx)(B.Z.Link,{onClick:function(){var c;(c=Qe.current)===null||c===void 0||c.show(s.Id)},children:(0,t.jsx)(C.Z,{content:n})}),!ve.canSeeEnableCe&&Ee&&Ee.container&&Ee.container.find(function(i){return i.id==s.Id})&&(0,t.jsx)(Oe.Z,{count:"new"})]})}},{title:u.FD.format("listTag"),hidden:!0,dataIndex:"tag",renderFormItem:function(o,s,_,m){return(0,t.jsx)(fe.Z,{onSelect:function(n){_.submit()},onDeselect:function(){_.submit()},mode:"multiple",popupMatchSelectWidth:!1,options:Ge&&Object.entries(Ge.reduce(function(a,n){var i=n.group||"tag";return a[i]||(a[i]=[]),a[i].push(n),a},{})).map(function(a){var n=T()(a,2),i=n[0],c=n[1];return{label:i,title:i,options:c.map(function(S){return{label:S.tag,value:S.tag}})}})})}},{key:"ports",title:u.FD.format("listAccess"),tooltip:u.FD.format("listAccessTip"),width:150,dataIndex:"ports",search:!1,render:function(o,s,_,m){var a,n=[],i=[];return s!=null&&s.Ports&&s.Ports.map(function(c,S){c.PublicPort?n.push(c):i.push(c)}),(0,t.jsx)(U.Z,{publicPort:n,privatePort:i,domain:(a=s.DPExtend)===null||a===void 0?void 0:a.domainList,serverIp:tr})}},{title:u.FD.format("listUsage"),width:200,search:!1,key:"usage",sorter:function(o,s){var _={},m={};if(ge){var a,n;_=(a=ge.find(function(i){return o.Id.startsWith(i.container)}))!==null&&a!==void 0?a:{},m=(n=ge.find(function(i){return s.Id.startsWith(i.container)}))!==null&&n!==void 0?n:{}}return JSON.stringify(_).localeCompare(JSON.stringify(m))},render:function(o,s,_,m,a){if(!ge||ge.length<=0)return"";var n={};return ge.filter(function(i){s.Id.indexOf(i.container)==0&&(n=i)}),(0,t.jsx)(ye,{value:n})}},{title:u.FD.format("listRunStatus"),key:"status",dataIndex:["container","status"],search:!1,width:130,render:function(o,s,_,m){var a="",n={};if(s.State.includes("(")){var i=s.State.indexOf("(");i>-1&&(a="compose.".concat(s.State.slice(0,i))),n={count:s.State.slice(i+1,s.State.length-1)}}else a="container.".concat(s.State),s.Status.indexOf("(healthy)")>-1?a="container.healthy":s.Status.indexOf("(unhealthy)")>-1&&(a="container.unhealthy");return(0,t.jsx)(V.Z,{statusValue:n,status:a,tip:"".concat(s.State," ").concat(s.Status)})}},{title:u.FD.format("listImageName"),key:"image",search:!1,width:150,render:function(o,s,_,m){return(0,t.jsx)("span",{style:{wordBreak:"break-word"},children:(0,t.jsx)(B.Z.Link,{onClick:function(){var n;(n=er.current)===null||n===void 0||n.show(s.Image)},children:s.Image})})}},{title:u.FD.format("listCreatedAt"),width:170,dataIndex:["Created"],render:function(o,s,_,m,a){return(0,te.ZM)(s.Created*1e3)},sorter:function(o,s){return new Date(o.Created*1e3).toISOString().localeCompare(new Date(s.Created*1e3).toISOString())},search:!1,sortDirections:["descend","ascend"]},{title:u.FD.format("listManage"),valueType:"option",key:"option",width:200,fixed:"right",hidden:!ve.canSeeContainerListManage,render:function(o,s,_,m){return(0,t.jsxs)(G.Z,{split:(0,t.jsx)(N.Z,{type:"vertical"}),children:[(0,t.jsx)(B.Z.Link,{onClick:function(){var n;(n=Je.current)===null||n===void 0||n.show(s.Id)},children:(0,t.jsx)(Q.Z,{title:u.FD.format("listManageLog"),children:(0,t.jsx)(g.Z,{})})},"log"),(s.State=="running"||s.State=="healthy"||s.State=="unhealthy")&&(0,t.jsx)(B.Z.Link,{onClick:function(){var n;(n=Ye.current)===null||n===void 0||n.show({url:"/console/container/".concat(s.Id),title:(0,te.fi)(s.Names[0],"/")})},children:(0,t.jsx)(Q.Z,{title:u.FD.format("listManageConsole"),children:(0,t.jsx)(O.Z,{})})},"console"),(s.State=="running"||s.State=="healthy"||s.State=="unhealthy")&&(0,t.jsx)(B.Z.Link,{onClick:function(){var n;(n=Xe.current)===null||n===void 0||n.showContainer(s.Names[0])},children:(0,t.jsx)(Q.Z,{title:u.FD.format("listManageFileExplorer"),children:(0,t.jsx)(z.Z,{})})},"file"),(0,t.jsx)(K.Link,{to:"/app/create/image?id="+s.Id,children:(0,t.jsx)(Q.Z,{title:u.FD.format("listManageEdit"),children:(0,t.jsx)(l.Z,{})})},"edit")]})}}],rowKey:"Id",request:function(){var P=j()(p()().mark(function o(s,_,m){var a,n,i,c,S,e;return p()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,q.IE)({tag:s.title,siteTitle:s.title,md5:s.Id});case 2:return n=F.sent,i="",c=[],F.next=7,(0,E.e1)({showCompose:!0,showSwarm:!0});case 7:return S=F.sent,fr(S.data.list),e=[],e=n.data.list.map(function(v){var Z=n.data.siteList.find(function(W){return W.containerInfo&&W.containerInfo.Id==v.Id&&W.siteTitle!=""});if(Z&&v.Names.unshift(Z.siteTitle),v.Labels&&v.Labels[de.fu]&&v.Names.unshift(v.Labels[de.fu]),v.DPExtend={domainList:n.data.domainList.filter(function(W,je){return v.Names.includes(W.containerId)}).map(function(W){return W.setting.enableSSL?"https://"+W.serverName:"http://"+W.serverName}),tag:[]},v.Labels&&v.Labels["com.docker.compose.project"]){var x;(x=v.DPExtend.tag)===null||x===void 0||x.push((0,te.fi)(v.Labels["com.docker.compose.project"],"dpanel-c-"))}if(v.Labels&&v.Labels["com.docker.swarm.service.name"]){var ee;(ee=v.DPExtend.tag)===null||ee===void 0||ee.push(v.Labels["com.docker.swarm.service.name"])}return S.data.list.forEach(function(W){W.item&&W.item.forEach(function(je){if(v.Names.includes(je.name)&&v.DPExtend){var me;(me=v.DPExtend.tag)===null||me===void 0||me.push(W.tag)}})}),v}),s.tag&&e.forEach(function(v){var Z;!((Z=v.DPExtend)===null||Z===void 0)&&Z.tag&&v.DPExtend.tag.forEach(function(x){s.tag.includes(x)&&c.push.apply(c,ie()(v.Names))})}),i!=""?e=e.filter(function(v){var Z=!1;return v.Names.forEach(function(x){x.startsWith("/"+i)&&(Z=!0)}),Z}):c&&c.length>0&&(e=e.filter(function(v){var Z=!1;return v.Names.forEach(function(x){c.includes(x)&&(Z=!0)}),Z})),ur(ir+1),(0,he.Cz)({follow:!1}).then(function(v){dr(v.data.list)}),F.abrupt("return",{data:(a=e)!==null&&a!==void 0?a:[],success:!0,total:n.data.list.length});case 16:case"end":return F.stop()}},o)}));return function(o,s,_){return P.apply(this,arguments)}}(),rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(o){var s=o.selectedRowKeys,_=o.selectedRows;return(0,t.jsxs)(G.Z,{size:16,wrap:!0,children:[(0,t.jsx)(k.Z,{type:Ae.W6.CONTAINER,selected:_!=null?_:[],onSuccess:function(){var a,n;return!((a=h.current)===null||a===void 0)&&a.reloadAndRest&&((n=h.current)===null||n===void 0||n.reloadAndRest()),!0}},"dataPermission"),(0,t.jsxs)(R.u,{access:"canSeeContainerList",space:{size:16,wrap:!0},children:[(0,t.jsx)(Y.Z,{icon:(0,t.jsx)(Ce.Z,{}),action:j()(p()().mark(function m(){var a,n,i,c;return p()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=d()(s),e.prev=1,a.s();case 3:if((n=a.n()).done){e.next=10;break}return i=n.value,e.next=7,(0,q.IW)({md5:i,operate:"start"});case 7:c=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),a.e(e.t0);case 15:return e.prev=15,a.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},m,null,[[1,12,15,18]])})),onSuccess:function(){var a,n;return!((a=h.current)===null||a===void 0)&&a.reloadAndRest&&((n=h.current)===null||n===void 0||n.reloadAndRest()),!0},children:u.FD.format("listManageStart")}),(0,t.jsx)(Y.Z,{action:j()(p()().mark(function m(){var a,n,i,c;return p()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=d()(s),e.prev=1,a.s();case 3:if((n=a.n()).done){e.next=10;break}return i=n.value,e.next=7,(0,q.IW)({md5:i,operate:"stop"});case 7:c=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),a.e(e.t0);case 15:return e.prev=15,a.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},m,null,[[1,12,15,18]])})),icon:(0,t.jsx)(be.Z,{}),onSuccess:function(){var a,n;return!((a=h.current)===null||a===void 0)&&a.reloadAndRest&&((n=h.current)===null||n===void 0||n.reloadAndRest()),!0},children:u.FD.format("listManageStop")}),(0,t.jsx)(Y.Z,{action:j()(p()().mark(function m(){var a,n,i,c;return p()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=d()(s),e.prev=1,a.s();case 3:if((n=a.n()).done){e.next=10;break}return i=n.value,e.next=7,(0,q.IW)({md5:i,operate:"restart"});case 7:c=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),a.e(e.t0);case 15:return e.prev=15,a.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},m,null,[[1,12,15,18]])})),onSuccess:function(){var a,n;return!((a=h.current)===null||a===void 0)&&a.reloadAndRest&&((n=h.current)===null||n===void 0||n.reloadAndRest()),!0},icon:(0,t.jsx)(M.Z,{}),children:u.FD.format("listManageRestart")}),(0,t.jsx)(Y.Z,{action:j()(p()().mark(function m(){var a,n,i,c;return p()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=d()(s),e.prev=1,a.s();case 3:if((n=a.n()).done){e.next=10;break}return i=n.value,e.next=7,(0,q.IW)({md5:i,operate:"pause"});case 7:c=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),a.e(e.t0);case 15:return e.prev=15,a.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},m,null,[[1,12,15,18]])})),onSuccess:function(){var a,n;return!((a=h.current)===null||a===void 0)&&a.reloadAndRest&&((n=h.current)===null||n===void 0||n.reloadAndRest()),!0},icon:(0,t.jsx)(We.Z,{}),children:u.FD.format("listManagePause")}),(0,t.jsx)(Y.Z,{action:j()(p()().mark(function m(){var a,n,i,c;return p()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=d()(s),e.prev=1,a.s();case 3:if((n=a.n()).done){e.next=10;break}return i=n.value,e.next=7,(0,q.IW)({md5:i,operate:"unpause"});case 7:c=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),a.e(e.t0);case 15:return e.prev=15,a.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},m,null,[[1,12,15,18]])})),onSuccess:function(){var a,n;return!((a=h.current)===null||a===void 0)&&a.reloadAndRest&&((n=h.current)===null||n===void 0||n.reloadAndRest()),!0},icon:(0,t.jsx)(Ce.Z,{}),children:u.FD.format("listManageUnpause")})]}),(0,t.jsx)(N.Z,{}),(0,t.jsx)(R.u,{showProTips:!0,access:["canSeeEnableCe","canSeeContainerListManageOp"],children:function(a){var n=a.canSeeEnableCe,i=a.canSeeContainerListManageOp;return i&&(0,t.jsx)(Y.Z,{disabled:n,type:"primary",action:j()(p()().mark(function c(){var S,e,Re,F,v,Z,x,ee,W,je,me,ke,ar;return p()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(_){f.next=2;break}return f.abrupt("return",!1);case 2:Re=[],F=d()(_),f.prev=4,Z=p()().mark(function pr(){var we,nr,Ie;return p()().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:nr=v.value,Ie=Ee==null||(we=Ee.container)===null||we===void 0?void 0:we.find(function(hr){return hr.id==nr.Id}),Ie&&!Re.includes(Ie.image)&&Re.push(Ie.image);case 3:case"end":return xe.stop()}},pr)}),F.s();case 7:if((v=F.n()).done){f.next=11;break}return f.delegateYield(Z(),"t0",9);case 9:f.next=7;break;case 11:f.next=16;break;case 13:f.prev=13,f.t1=f.catch(4),F.e(f.t1);case 16:return f.prev=16,F.f(),f.finish(16);case 19:if(Re){f.next=21;break}return f.abrupt("return",!1);case 21:return f.next=23,(S=Ke.current)===null||S===void 0?void 0:S.pull(Re);case 23:(e=Ke.current)===null||e===void 0||e.finish(),ee=d()(_),f.prev=25,ee.s();case 27:if((W=ee.n()).done){f.next=34;break}return ar=W.value,f.next=31,(0,q.RF)({md5:(je=ar.Id)!==null&&je!==void 0?je:"",imageTag:"",enableBak:(me=(ke=qe.current)===null||ke===void 0?void 0:ke.getFieldValue("enableBak"))!==null&&me!==void 0?me:!1});case 31:x=f.sent;case 32:f.next=27;break;case 34:f.next=39;break;case 36:f.prev=36,f.t2=f.catch(25),ee.e(f.t2);case 39:return f.prev=39,ee.f(),f.finish(39);case 42:return f.abrupt("return",x);case 43:case"end":return f.stop()}},c,null,[[4,13,16,19],[25,36,39,42]])})),onSuccess:function(){var S,e;return!((S=h.current)===null||S===void 0)&&S.reloadAndRest&&((e=h.current)===null||e===void 0||e.reloadAndRest()),!0},confirm:(0,t.jsxs)(G.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,t.jsx)(B.Z.Text,{children:rr.format("upgradeConfirm")}),(0,t.jsx)(pe.A,{formRef:qe,submitter:!1,layout:"inline",children:(0,t.jsx)(ne.Z,{name:"enableBak",valuePropName:"checked",children:(0,t.jsx)(I.Z,{children:rr.format("upgradeConfirmEnableBak")})})})]}),children:u.FD.format("listManageUpgradeBatch")})}}),(0,t.jsx)(R.u,{access:"canSeeContainerListManageDelete",children:(0,t.jsx)(Y.Z,{danger:!0,type:"primary",action:j()(p()().mark(function m(){var a,n,i,c;return p()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=d()(s),e.prev=1,n.s();case 3:if((i=n.n()).done){e.next=12;break}return c=i.value,e.next=7,(0,de.Ct)({md5:c,deleteImage:!1,deleteVolume:!1});case 7:return a=e.sent,e.next=10,(0,E.rn)({name:c});case 10:e.next=3;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),n.e(e.t0);case 17:return e.prev=17,n.f(),e.finish(17);case 20:return e.abrupt("return",a);case 21:case"end":return e.stop()}},m,null,[[1,14,17,20]])})),onSuccess:function(){var a,n;return!((a=h.current)===null||a===void 0)&&a.reloadAndRest&&((n=h.current)===null||n===void 0||n.reloadAndRest()),!0},onError:function(){var a,n;return!((a=h.current)===null||a===void 0)&&a.reset&&((n=h.current)===null||n===void 0||n.reset()),!0},confirm:"notification.confirm.title",children:u.FD.format("listManageDeleteBatch")})})]})},pagination:(0,Pe.O)({page:(L=(ce=Se.state)===null||ce===void 0?void 0:ce.page)!==null&&L!==void 0?L:void 0}),search:{collapsed:!1},tableExtraRender:function(){return(0,t.jsx)(De.Z,{mode:"horizontal",selectedKeys:["list"],items:[{label:(0,t.jsx)(K.Link,{to:"/app/list",replace:!0,children:u.Ob.format("container.list")}),key:"list"},{label:(0,t.jsx)(K.Link,{to:"/app/list/recycle",replace:!0,children:u.Ob.format("container.list.recycle")}),key:"recycle"}]})},toolBarRender:function(){return[(0,t.jsx)(R.u,{access:"canSeeContainerListManageDelete",children:(0,t.jsx)(Y.Z,{action:function(){return(0,q.KK)()},onSuccess:function(){var s,_;return!((s=h.current)===null||s===void 0)&&s.reloadAndRest&&((_=h.current)===null||_===void 0||_.reloadAndRest()),!0},onError:function(){var s,_;return!((s=h.current)===null||s===void 0)&&s.reset&&((_=h.current)===null||_===void 0||_.reset()),!0},tips:u.FD.format("listManagePruneTip"),confirm:"notification.confirm.title",children:u.FD.format("listManagePrune")})},"clear")]},columnsState:(0,Pe.j)("app-list")})]})}},62597:function(Ue,re,r){r.d(re,{$G:function(){return j},Ct:function(){return Oe},Tb:function(){return fe},XH:function(){return pe},cl:function(){return H},fp:function(){return T},fu:function(){return X},iE:function(){return G},xb:function(){return Q},ze:function(){return De}});var se=r(15009),d=r.n(se),le=r(99289),p=r.n(le),$=r(82346),ie="com.dpanel.container.description",X="com.dpanel.container.title";function j(g){return ae.apply(this,arguments)}function ae(){return ae=p()(d()().mark(function g(O){return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,$.request)("/api/app/site/create-by-image",{method:"POST",data:O}));case 1:case"end":return l.stop()}},g)})),ae.apply(this,arguments)}var T={EnvValueRuleRequired:1,EnvValueRuleDisabled:2,EnvValueTypeNumber:1024,EnvValueTypeText:2048,EnvValueTypeSelect:4096,EnvValueTypeSelectMultiple:8192};function H(g){return ue.apply(this,arguments)}function ue(){return ue=p()(d()().mark(function g(O){return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,$.request)("/api/app/site/get-list",{method:"POST",data:O}));case 1:case"end":return l.stop()}},g)})),ue.apply(this,arguments)}function fe(g){return oe.apply(this,arguments)}function oe(){return oe=p()(d()().mark(function g(O){return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return O.download=!1,l.next=3,(0,$.request)("/api/app/log/run",{method:"POST",data:O});case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},g)})),oe.apply(this,arguments)}function pe(g){return ne.apply(this,arguments)}function ne(){return ne=p()(d()().mark(function g(O){return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return O.download=!0,l.next=3,(0,$.request)("/api/app/log/run",{method:"POST",data:O,responseType:"blob"});case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},g)})),ne.apply(this,arguments)}function G(g){return B.apply(this,arguments)}function B(){return B=p()(d()().mark(function g(O){return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return O.id=String(O.id),l.next=3,(0,$.request)("/api/app/site/get-detail",{data:O,method:"POST"});case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},g)})),B.apply(this,arguments)}function Oe(g){return N.apply(this,arguments)}function N(){return N=p()(d()().mark(function g(O){return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,$.request)("/api/app/container/delete",{method:"POST",data:O}));case 1:case"end":return l.stop()}},g)})),N.apply(this,arguments)}function Q(g){return I.apply(this,arguments)}function I(){return I=p()(d()().mark(function g(O){return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,$.request)("/api/app/site/delete",{method:"POST",data:O}));case 1:case"end":return l.stop()}},g)})),I.apply(this,arguments)}function De(g){return K.apply(this,arguments)}function K(){return K=p()(d()().mark(function g(O){return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,$.request)("/api/app/container/ignore",{method:"POST",data:O}));case 1:case"end":return l.stop()}},g)})),K.apply(this,arguments)}},20578:function(Ue,re,r){r.d(re,{q:function(){return ie}});var se=r(15009),d=r.n(se),le=r(99289),p=r.n(le),$=r(82346);function ie(){return X.apply(this,arguments)}function X(){return X=p()(d()().mark(function j(){return d()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,(0,$.request)("/api/pro/container-upgrade/get-all-list",{method:"POST"});case 2:return T.abrupt("return",T.sent);case 3:case"end":return T.stop()}},j)})),X.apply(this,arguments)}}}]);
