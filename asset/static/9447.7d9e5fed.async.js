"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9447],{37767:function(w,W,e){e.d(W,{Z:function(){return Oe}});var K=e(15009),o=e.n(K),B=e(99289),E=e.n(B),p=e(5574),y=e.n(p),l=e(45605),M=e(38345),x=e(97269),u=e(26412),R=e(42075),D=e(96074),h=e(25593),T=e(2487),s=e(67294),_=e(76428),t=e(78498),N=e(44771),n=e(13822),k=e(24963),Q=e(37413),q=e(5251),ee=e(82346),d=e(87662),c=e(36146),r=e(85893);function Oe(g){var ie,se,Y,le,de,ue,oe,ce,X,a,z=new c.Uo("components.appDetail.appDetailContainer"),Ie=(0,s.useState)(""),ve=y()(Ie,2),he=ve[0],ge=ve[1],Me=(0,ee.useAccess)(),Ee=(0,s.useContext)(k.Z),_e=Ee.message,pe=(0,s.useRef)(),je=[],me=[],Pe=[],Ce=(0,s.useState)(""),De=y()(Ce,2),xe=De[0],Re=De[1];return(0,s.useEffect)(function(){if(g.data){var Z;(Z=pe.current)===null||Z===void 0||Z.setFieldValue("restart",{name:g.data.info.HostConfig.RestartPolicy.Name,maxAccepts:g.data.info.HostConfig.RestartPolicy.MaximumRetryCount}),(0,d.K3)().then(function(i){var O;Re((O=i.data.serverUrl)!==null&&O!==void 0?O:"")}),ge(g.data.info.Name)}},[g.data]),g.data&&g.data.domain&&g.data.domain.map(function(Z){Pe.push(Z.setting.enableSSL?"https://"+Z.serverName:"http://"+Z.serverName)}),g.data.info.NetworkSettings.Ports&&Object.entries(g.data.info.NetworkSettings.Ports).map(function(Z){var i=y()(Z,2),O=i[0],b=i[1],$=O.split("/"),U=y()($,2),I=U[0],C=U[1];b.forEach(function(V){V.HostPort?je.push({PrivatePort:I,Type:C,IP:V.HostIp,PublicPort:V.HostPort}):me.push({PrivatePort:I,Type:C,IP:"",PublicPort:""})})}),(0,r.jsxs)(r.Fragment,{children:[g.data&&g.data.info.State.Running&&(0,r.jsx)(Q.Z,{publicPort:je,privatePort:me,domain:Pe,serverIp:xe,showInDetail:!0,ghost:g.ghost,layout:"inline"}),(0,r.jsx)(M.Z,{title:(0,r.jsx)(l.Z,{}),subTitle:z.format("cardTitle"),ghost:g.ghost,children:(0,r.jsxs)(u.Z,{column:1,bordered:!0,children:[(0,r.jsx)(u.Z.Item,{label:"Hostname",children:(0,r.jsx)(R.Z,{split:(0,r.jsx)(D.Z,{type:"vertical"}),children:(0,r.jsx)(_.Z,{title:(ie=g.data.info)===null||ie===void 0?void 0:ie.Config.Hostname})})}),(0,r.jsx)(u.Z.Item,{label:z.format("containerName"),children:(0,r.jsxs)(R.Z,{split:(0,r.jsx)(D.Z,{type:"vertical"}),children:[(0,r.jsx)(_.Z,{title:(se=g.data.info)===null||se===void 0?void 0:se.Id.substring(0,12)}),(0,r.jsx)(h.Z.Text,{copyable:!0,editable:{tooltip:z.format("containerNameEditTip"),onChange:function(){var Z=E()(o()().mark(function O(b){var $,U;return o()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(($=g.data.info)!==null&&$!==void 0&&$.Id){C.next=2;break}return C.abrupt("return");case 2:return C.next=4,(0,n.eE)({md5:g.data.info.Id,name:b});case 4:U=C.sent,ge(b),_e.success(c.FD.format("finish"));case 7:case"end":return C.stop()}},O)}));function i(O){return Z.apply(this,arguments)}return i}()},children:(0,q.fi)(he,"/")})]})}),(0,r.jsx)(u.Z.Item,{label:(0,r.jsx)(t.Z,{title:z.format("network"),help:z.format("networkHelp")}),children:((Y=g.data.info)===null||Y===void 0?void 0:Y.State.Running)&&(0,r.jsxs)(u.Z,{column:1,bordered:!0,children:[g.data.info.NetworkSettings.Networks&&Object.keys(g.data.info.NetworkSettings.Networks).map(function(Z,i){var O,b,$;return(0,r.jsx)(u.Z.Item,{label:Z,children:Z=="host"?z.format("networkUseHost"):(0,r.jsxs)(R.Z,{direction:"vertical",children:[(0,r.jsx)(_.Z,{title:(O=g.data.info)===null||O===void 0?void 0:O.NetworkSettings.Networks[Z].IPAddress}),(b=g.data.info)===null||b===void 0?void 0:b.NetworkSettings.Networks[Z].Gateway,($=g.data.info)===null||$===void 0?void 0:$.NetworkSettings.Networks[Z].MacAddress]})},i)}),g.data.info.HostConfig.ExtraHosts&&(0,r.jsx)(u.Z.Item,{label:z.format("networkExtra"),children:(0,r.jsx)(R.Z,{direction:"vertical",children:g.data.info.HostConfig.ExtraHosts.map(function(Z,i){if(Z.indexOf(":")>-1){var O=Z.split(":");return"".concat(O[0]," - ").concat(O.slice(1).join(":"))}})})},"host")]})}),(0,r.jsx)(u.Z.Item,{label:z.format("runTime"),children:z.format("runTimeValue",{create:new Date((le=(de=g.data.info)===null||de===void 0?void 0:de.Created)!==null&&le!==void 0?le:"").toLocaleString(),upgrade:new Date((ue=(oe=g.data.info)===null||oe===void 0?void 0:oe.State.StartedAt)!==null&&ue!==void 0?ue:"").toLocaleString()})}),Me.canSeeContainerListManage&&(0,r.jsx)(u.Z.Item,{label:z.format("restartPolicy"),children:(0,r.jsx)(x.A,{name:"container-restart",submitter:!1,onValuesChange:function(){var Z=E()(o()().mark(function i(O){var b,$;return o()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if((b=g.data.info)!==null&&b!==void 0&&b.Id){I.next=2;break}return I.abrupt("return");case 2:return I.next=4,(0,n.eE)({md5:g.data.info.Id,restart:O.restart});case 4:return $=I.sent,_e.success(c.FD.format("finish")),I.abrupt("return");case 7:case"end":return I.stop()}},i)}));return function(i){return Z.apply(this,arguments)}}(),layout:"inline",formRef:pe,children:(0,r.jsx)(N.Z,{ghost:!0,defaultValue:(ce=g.data.info)===null||ce===void 0?void 0:ce.HostConfig.RestartPolicy.Name})})}),(0,r.jsx)(u.Z.Item,{label:z.format("env"),children:(0,r.jsx)(T.Z,{dataSource:(X=(a=g.data.info)===null||a===void 0?void 0:a.Config.Env)!==null&&X!==void 0?X:[],renderItem:function(i){var O=i.split("=");return(0,r.jsxs)(T.Z.Item,{children:[(0,r.jsx)(h.Z.Text,{code:!0,children:O[0]})," = ",(0,r.jsx)(h.Z.Text,{copyable:!0,children:O.slice(1).join("=")})]})}})})]})})]})}},14245:function(w,W,e){e.d(W,{Z:function(){return R}});var K=e(5574),o=e.n(K),B=e(3393),E=e(36146),p=e(60433),y=e(38345),l=e(26412),M=e(25593),x=e(67294),u=e(85893);function R(D){var h=new E.Uo("components.appDetail.appDetailQuickImage"),T=(0,x.useState)(),s=o()(T,2),_=s[0],t=s[1];return(0,x.useEffect)(function(){(0,B.YU)({md5:D.data.Image}).then(function(N){t(N.data)})},[D.data]),(0,u.jsx)(y.Z,{ghost:D.ghost,title:(0,u.jsx)(p.Z,{}),subTitle:h.format("cardTitle"),children:(0,u.jsxs)(l.Z,{styles:{label:{width:200}},column:1,bordered:!0,children:[(0,u.jsx)(l.Z.Item,{label:"Image Tag",children:(0,u.jsx)(M.Z.Text,{copyable:!0,children:D.data.Config.Image})}),(0,u.jsx)(l.Z.Item,{label:"Image",children:D.data.Image}),(0,u.jsx)(l.Z.Item,{label:"CMD",children:(_==null?void 0:_.info.Config.Cmd)&&(_==null?void 0:_.info.Config.Cmd.join(" "))}),(0,u.jsx)(l.Z.Item,{label:"ENTRYPOINT",children:_==null?void 0:_.info.Config.Entrypoint}),(0,u.jsx)(l.Z.Item,{label:"Labels",children:(0,u.jsx)(l.Z,{column:1,bordered:!0,children:(_==null?void 0:_.info.Config.Labels)&&Object.entries(_==null?void 0:_.info.Config.Labels).map(function(N){var n=o()(N,2),k=n[0],Q=n[1];return(0,u.jsx)(l.Z.Item,{label:k,children:Q},k)})})})]})})}},53399:function(w,W,e){e.d(W,{Z:function(){return Z}});var K=e(15009),o=e.n(K),B=e(99289),E=e.n(B),p=e(5574),y=e.n(p),l=e(67294),M=e(80821),x=e(62597),u=e(13822),R=e(43425),D=e(58638),h=e(60219),T=e(86548),s=e(57132),_=e(87784),t=e(25035),N=e(38345),n=e(97269),k=e(62370),Q=e(5966),q=e(52688),ee=e(82346),d=e(42075),c=e(25278),r=e(96074),Oe=e(83622),g=e(25593),ie=e(85418),se=e(40411),Y=e(84567),le=e(83062),de=e(93162),ue=e(24739),oe=e(97462),ce=e(70146),X=e(36146),a=e(85893);function z(i){var O=(0,l.useRef)(),b=new X.Uo("components.appDetail");return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(M.Z,{icon:(0,a.jsx)(h.Z,{}),action:E()(o()().mark(function $(){var U,I,C,V;return o()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,(0,ce.yB)({id:i.container.Name,enableImage:(U=O.current)===null||U===void 0?void 0:U.getFieldValue("enableImage"),volume:Object.keys((I=(C=O.current)===null||C===void 0?void 0:C.getFieldValue("volume"))!==null&&I!==void 0?I:{}).filter(function(fe){return fe}),enableCommitImage:(V=O.current)===null||V===void 0?void 0:V.getFieldValue("enableCommitImage")});case 2:case"end":return ae.stop()}},$)})),confirmOnOpenChange:function(U){var I,C;!((I=O.current)===null||I===void 0)&&I.resetFields&&((C=O.current)===null||C===void 0||C.resetFields())},confirm:(0,a.jsxs)(d.Z,{style:{width:650,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,a.jsx)(g.Z.Text,{children:(0,a.jsx)("ul",{children:b.prefix("backupVolumeTip",4).map(function($,U){return(0,a.jsxs)("li",{children:[$," ",U==3&&(0,a.jsx)(ee.Link,{to:"/app/backup",children:X.Ob.format("container.backup")})]},U)})})}),(0,a.jsxs)(n.A,{layout:"horizontal",formRef:O,submitter:!1,children:[(0,a.jsxs)(ue.UW,{children:[(0,a.jsx)(k.Z,{valuePropName:"checked",name:"enableSelectVolume",children:(0,a.jsx)(Y.Z,{disabled:!i.container.Mounts||i.container.Mounts.length==0,children:b.format("backupVolumeEnableSelectVolume")})}),(0,a.jsx)(k.Z,{valuePropName:"checked",name:"enableImage",children:(0,a.jsx)(Y.Z,{children:b.format("backupVolumeEnableImage")})}),(0,a.jsx)(oe.Z,{name:["enableImage"],children:function(U){var I=U.enableImage;if(I)return(0,a.jsx)(k.Z,{valuePropName:"checked",name:"enableCommitImage",children:(0,a.jsx)(Y.Z,{children:b.format("backupVolumeEnableCommitImage")})})}})]}),(0,a.jsx)(oe.Z,{name:["enableSelectVolume"],children:function(U){var I=U.enableSelectVolume;return I&&(0,a.jsx)(d.Z,{wrap:!0,children:i.container.Mounts&&i.container.Mounts.map(function(C,V){return(0,a.jsx)(k.Z,{valuePropName:"checked",name:["volume",C.Destination],children:(0,a.jsx)(Y.Z,{children:C.Destination})},"volume-".concat(V))})})}})]})]}),children:b.format("backupVolumeButton")})})}var Ie=e(24963),ve=e(99861),he=e(3393),ge=e(50888),Me=e(16596),Ee=e(1699),_e=e(5251),pe=e(29453),je=e(71965),me=e(77446),Pe=e(86615),Ce=e(40056),De=e(89240);function xe(i){var O=(0,ee.useAccess)(),b=(0,l.useState)(),$=y()(b,2),U=$[0],I=$[1],C=(0,l.useRef)(),V=new X.Uo("components.appDetail.appDetailQuickManage");return(0,l.useEffect)(function(){O.canSeeEnableCe||(0,me.V)({siteName:(0,De.HJ)(i.detail.Name)}).then(function(te){I(te.data.list)})},[i.detail]),(0,a.jsx)(Ee.u,{access:["canSeeEnableCe"],showProTips:!0,children:function(ae){var fe=ae.canSeeEnableCe;return(0,a.jsx)(M.Z,{showDivider:!0,action:function(){var H;return(0,me.v)({id:(H=C.current)===null||H===void 0?void 0:H.getFieldValue("id"),enableForce:!0})},icon:(0,a.jsx)(je.Z,{}),disabled:fe,onSuccess:function(){var H;(H=C.current)===null||H===void 0||H.resetFields(),i.onFinish&&i.onFinish()},confirmOnOpenChange:function(){var H;!((H=C.current)===null||H===void 0)&&H.resetFields&&C.current.resetFields()},confirm:(0,a.jsx)(n.A,{formRef:C,submitter:!1,children:(0,a.jsxs)(d.Z,{direction:"vertical",style:{width:500},size:[0,15],children:[(0,a.jsx)(g.Z.Text,{children:V.format("rollbackTip")}),U&&U.length>0?(0,a.jsx)(Pe.Z.Group,{fieldProps:{style:{display:"flex",flexDirection:"column",gap:8}},name:"id",label:"",options:U&&U.map(function(ne){return{label:"id: ".concat(ne.id," ").concat(X.FD.format("listDeletedAt"),": ").concat((0,_e.NF)(ne.deletedAt)),value:ne.id}})}):(0,a.jsx)(Ce.Z,{message:V.format("rollbackEmptyTip"),style:{marginBottom:10}})]})}),children:X.FD.format("listManageRollback")})}})}var Re=(0,l.forwardRef)(function(i,O){var b;(0,l.useImperativeHandle)(O,function(){return{}});var $=(0,l.useRef)(),U=(0,l.useRef)(),I=(0,l.useRef)(),C=(0,l.useContext)(Ie.Z),V=C.loading,te=(0,l.useRef)(),ae=(0,l.useRef)(),fe=(0,l.useState)({status:0,error:""}),ne=y()(fe,2),H=ne[0],re=ne[1],L=new X.Uo("components.appDetail.appDetailQuickManage");function Ze(A){return Te.apply(this,arguments)}function Te(){return Te=E()(o()().mark(function A(m){var f,P,v;return o()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(P=-2,!m.ignore){j.next=6;break}if(!(m.ignore.indexOf("".concat(m.info.Name,"@*"))>-1)){j.next=4;break}return j.abrupt("return",{status:-2,error:""});case 4:if(!(m.ignore.indexOf("".concat(m.info.Name,"@").concat(m.info.Image))>-1)){j.next=6;break}return j.abrupt("return",{status:-2,error:""});case 6:return j.next=8,(0,he.ZQ)({tag:(f=m.info.Config.Image)!==null&&f!==void 0?f:"",md5:m.info.Image,cacheTime:3600}).catch(function(F){P=-1});case 8:if(v=j.sent,!(v&&v.data.error&&v.data.error!="")){j.next=11;break}return j.abrupt("return",{status:-1,error:v.data.error});case 11:return v&&(v.data.digestLocal&&v.data.digestLocal.length>0?P=v.data.upgrade?1:2:v.data.error&&v.data.error!=""?P=-1:P=-2),j.abrupt("return",{status:P,error:""});case 13:case"end":return j.stop()}},A)})),Te.apply(this,arguments)}return(0,l.useEffect)(function(){i.checkContainerUpgrade&&(re({status:0}),Ze(i.data).then(function(A){re(A)}))},[i.data]),(0,a.jsx)(N.Z,{ghost:i.ghost,title:(0,a.jsx)(R.Z,{}),subTitle:L.format("cardTitle"),children:(0,a.jsxs)(d.Z,{wrap:!0,children:[(0,a.jsx)(M.Z,{icon:(0,a.jsx)(D.Z,{}),action:function(){var m,f;return(0,u.LJ)({md5:(m=(f=i.data)===null||f===void 0?void 0:f.info.Id)!==null&&m!==void 0?m:""})},confirm:L.format("exportConfirm"),onSuccess:function(m){var f,P=new Blob([m],{type:"application/tar"});(0,de.saveAs)(P,(0,_e.fi)((f=i.data)===null||f===void 0?void 0:f.info.Name,"/")+".tar")},children:L.format("exportButton")}),(0,a.jsx)(M.Z,{icon:(0,a.jsx)(h.Z,{}),action:E()(o()().mark(function A(){var m,f,P,v,S;return o()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,u.Re)({md5:(m=(f=i.data)===null||f===void 0?void 0:f.info.Id)!==null&&m!==void 0?m:"",name:(P=(v=U.current)===null||v===void 0?void 0:v.getFieldValue("saveImageName"))!==null&&P!==void 0?P:(S=i.data)===null||S===void 0?void 0:S.info.Name});case 2:case"end":return F.stop()}},A)})),confirmTitle:L.format("commitConfirmTitle"),confirm:(0,a.jsx)(d.Z,{style:{width:400,marginTop:"10px",paddingRight:"10px"},direction:"vertical",children:(0,a.jsx)(n.A,{formRef:U,submitter:!1,children:(0,a.jsx)(k.Z,{name:"saveImageName",children:(0,a.jsx)(c.Z,{addonBefore:L.format("commitConfirmSaveImageName")})})})}),children:L.format("commitButton")}),i.data&&(0,a.jsx)(Ee.u,{access:"canSeeContainerBackup",children:(0,a.jsx)(z,{container:i.data.info})}),(0,a.jsx)(r.Z,{type:"vertical"}),(0,a.jsx)(ee.Link,{to:"/app/create/image?id=".concat((b=i.data)===null||b===void 0?void 0:b.info.Id,"&op=update"),children:(0,a.jsx)(Oe.ZP,{type:"primary",icon:(0,a.jsx)(T.Z,{}),children:L.format("editButton")})}),(0,a.jsx)(M.Z,{icon:(0,a.jsx)(s.Z,{}),action:E()(o()().mark(function A(){var m,f,P,v,S,j;return o()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,(0,u.aF)({md5:(m=(f=i.data)===null||f===void 0?void 0:f.info.Id)!==null&&m!==void 0?m:"",copyName:(P=(v=I.current)===null||v===void 0?void 0:v.getFieldValue("copyName"))!==null&&P!==void 0?P:"",enableRandomPort:(S=(j=I.current)===null||j===void 0?void 0:j.getFieldValue("enableRandomPort"))!==null&&S!==void 0?S:!1});case 2:return G.abrupt("return",G.sent);case 3:case"end":return G.stop()}},A)})),confirm:(0,a.jsxs)(d.Z,{style:{width:400,paddingRight:"10px"},direction:"vertical",children:[(0,a.jsx)(g.Z.Text,{children:L.format("copyConfirmTip")}),(0,a.jsxs)(n.A,{formRef:I,submitter:!1,layout:"horizontal",children:[(0,a.jsx)("br",{}),(0,a.jsx)(Q.Z,{label:L.format("copyCopyName"),name:"copyName"}),(0,a.jsx)(q.Z,{label:L.format("copyEnableRandomPort"),name:"enableRandomPort"})]})]}),onSuccess:function(m){var f;(f=I.current)===null||f===void 0||f.resetFields()},children:L.format("copyButton")}),(0,a.jsx)(xe,{detail:i.data.info,onFinish:function(){V.destroy(),i.checkContainerUpgrade&&i.checkContainerUpgrade()}}),i.data&&(0,a.jsxs)(a.Fragment,{children:[i.data.info.Config.Image&&(0,a.jsx)(ve.Z,{image:[i.data.info.Config.Image],ref:te}),(0,a.jsx)(ie.Z,{placement:"bottomLeft",menu:{items:[{key:"1",label:(0,a.jsx)(M.Z,{action:E()(o()().mark(function A(){var m,f,P,v,S,j;return o()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,(0,x.ze)({md5:(m=(f=i.data.info)===null||f===void 0?void 0:f.Name)!==null&&m!==void 0?m:"",imageId:""});case 2:return re({status:0}),G.next=5,(0,he.ZQ)({tag:(P=(v=i.data.info)===null||v===void 0?void 0:v.Config.Image)!==null&&P!==void 0?P:"",md5:(S=(j=i.data.info)===null||j===void 0?void 0:j.Image)!==null&&S!==void 0?S:"",cacheTime:0}).then(function(J){J.data.error&&J.data.error!=""?re({status:-1,error:J.data.error}):J.data.digestLocal&&J.data.digestLocal.length>0?re({status:J.data.upgrade?1:2}):re({status:-2})}).catch(function(J){re({status:-1})});case 5:return G.abrupt("return",G.sent);case 6:case"end":return G.stop()}},A)})),type:"link",children:L.format("upgradeCheckUpgrade")})},{key:"2",label:(0,a.jsx)(M.Z,{action:E()(o()().mark(function A(){var m,f,P,v;return o()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,x.ze)({md5:(m=(f=i.data.info)===null||f===void 0?void 0:f.Name)!==null&&m!==void 0?m:"",imageId:(P=(v=i.data.info)===null||v===void 0?void 0:v.Image)!==null&&P!==void 0?P:""});case 2:return j.abrupt("return",j.sent);case 3:case"end":return j.stop()}},A)})),type:"link",children:L.format("upgradeCheckUpgradeIgnoreOnce")})},{key:"3",label:(0,a.jsx)(M.Z,{action:E()(o()().mark(function A(){var m,f;return o()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,x.ze)({md5:(m=(f=i.data.info)===null||f===void 0?void 0:f.Name)!==null&&m!==void 0?m:"",imageId:"*"});case 2:return v.abrupt("return",v.sent);case 3:case"end":return v.stop()}},A)})),type:"link",children:L.format("upgradeCheckUpgradeIgnore")})}]},children:(0,a.jsx)(se.Z,{title:H.error,count:L.format("checkImageUpgrade."+H.status),color:L.format("checkImageUpgradeColor."+H.status),children:(0,a.jsx)(M.Z,{disabled:H.status===0,icon:H.status===0?(0,a.jsx)(ge.Z,{}):(0,a.jsx)(Me.Z,{}),action:E()(o()().mark(function A(){var m,f,P,v,S;return o()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(m=te.current)===null||m===void 0?void 0:m.start();case 2:return V.show(),(f=te.current)===null||f===void 0||f.finish(),F.next=6,(0,u.RF)({md5:(P=i.data.info.Id)!==null&&P!==void 0?P:"",imageTag:"",enableBak:(v=(S=ae.current)===null||S===void 0?void 0:S.getFieldValue("enableBak"))!==null&&v!==void 0?v:!1});case 6:return F.abrupt("return",F.sent);case 7:case"end":return F.stop()}},A)})),confirm:(0,a.jsxs)(d.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,a.jsx)(g.Z.Text,{children:L.format("upgradeConfirm")}),(0,a.jsx)(n.A,{formRef:ae,submitter:!1,layout:"inline",children:(0,a.jsx)(k.Z,{name:"enableBak",valuePropName:"checked",children:(0,a.jsx)(Y.Z,{children:L.format("upgradeConfirmEnableBak")})})})]}),onSuccess:function(m){V.destroy(),i.checkContainerUpgrade&&i.checkContainerUpgrade()},children:L.format("upgradeButton")})})})]}),(0,a.jsx)(r.Z,{type:"vertical"}),i.data&&(0,a.jsx)(M.Z,{action:E()(o()().mark(function A(){var m,f,P,v,S,j,F;return o()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,(0,x.Ct)({md5:(m=(f=i.data)===null||f===void 0?void 0:f.info.Id)!==null&&m!==void 0?m:"",deleteImage:(P=(v=$.current)===null||v===void 0?void 0:v.getFieldValue("deleteImage"))!==null&&P!==void 0?P:!1,deleteVolume:(S=(j=$.current)===null||j===void 0?void 0:j.getFieldValue("deleteVolume"))!==null&&S!==void 0?S:!1});case 2:return J.abrupt("return",(0,pe.rn)({name:(F=i.data)===null||F===void 0?void 0:F.info.Name}));case 3:case"end":return J.stop()}},A)})),danger:!0,type:"primary",icon:(0,a.jsx)(_.Z,{}),onSuccess:function(){V.destroy(),i.checkContainerUpgrade&&i.checkContainerUpgrade()},confirm:(0,a.jsxs)(d.Z,{style:{width:200},direction:"vertical",children:[(0,a.jsx)(g.Z.Text,{children:X.FD.format("confirm.title")}),(0,a.jsxs)(n.A,{formRef:$,layout:"inline",submitter:!1,children:[(0,a.jsx)(k.Z,{addonAfter:(0,a.jsx)(le.Z,{title:L.format("deleteConfirmTip"),children:(0,a.jsx)(t.Z,{})}),name:"deleteVolume",valuePropName:"checked",children:(0,a.jsx)(Y.Z,{children:L.format("deleteConfirmDeleteVolume")})}),(0,a.jsx)(k.Z,{name:"deleteImage",valuePropName:"checked",children:(0,a.jsx)(Y.Z,{children:L.format("deleteConfirmDeleteImage")})})]})]}),children:L.format("deleteButton")})]})})}),Z=Re},14189:function(w,W,e){var K=e(43425),o=e(74842),B=e(87784),E=e(33160),p=e(30159),y=e(89035),l=e(38345),M=e(42075),x=e(96074),u=e(83622),R=e(67294),D=e(94359),h=e(80821),T=e(13822),s=e(99922),_=e(36146),t=e(85893),N=(0,R.forwardRef)(function(n,k){(0,R.useImperativeHandle)(k,function(){return{showConsole:ee}});var Q=new _.Uo("components.appDetail.appDetailQuickOperation"),q=(0,R.useRef)();function ee(d){var c;(c=q.current)===null||c===void 0||c.show({url:"/console/container/".concat(n.data.Id),title:n.data.Name,workDir:d})}return(0,t.jsx)(l.Z,{title:(0,t.jsx)(K.Z,{}),ghost:n.ghost,subTitle:(0,t.jsxs)(M.Z,{children:[Q.format("cardTitle")," - ",n.data&&(0,t.jsx)(D.Z,{status:"container.".concat(n.data.State.Status),tip:n.data.State.Status})]}),children:(0,t.jsxs)(M.Z,{wrap:!0,children:[(0,t.jsx)(h.Z,{icon:(0,t.jsx)(o.Z,{}),action:function(){var c,r;return(0,T.IW)({md5:(c=(r=n.data)===null||r===void 0?void 0:r.Id)!==null&&c!==void 0?c:"",operate:"start"})},onSuccess:function(){return n.onFinish&&n.onFinish()},disabled:n.data&&n.data.State.Running||n.data&&n.data.State.Paused,children:Q.format("start")}),(0,t.jsx)(h.Z,{action:function(){var c,r;return(0,T.IW)({md5:(c=(r=n.data)===null||r===void 0?void 0:r.Id)!==null&&c!==void 0?c:"",operate:"stop"})},icon:(0,t.jsx)(B.Z,{}),onSuccess:function(){return n.onFinish&&n.onFinish()},disabled:n.data&&n.data.State.Dead,children:Q.format("stop")}),(0,t.jsx)(h.Z,{action:function(){var c,r;return(0,T.IW)({md5:(c=(r=n.data)===null||r===void 0?void 0:r.Id)!==null&&c!==void 0?c:"",operate:"restart"})},onSuccess:function(){return n.onFinish&&n.onFinish()},icon:(0,t.jsx)(E.Z,{}),children:Q.format("restart")}),(0,t.jsx)(h.Z,{action:function(){var c,r;return(0,T.IW)({md5:(c=(r=n.data)===null||r===void 0?void 0:r.Id)!==null&&c!==void 0?c:"",operate:"pause"})},onSuccess:function(){return n.onFinish&&n.onFinish()},icon:(0,t.jsx)(p.Z,{}),disabled:n.data&&n.data&&!n.data.State.Running,children:Q.format("pause")}),(0,t.jsx)(h.Z,{action:function(){var c,r;return(0,T.IW)({md5:(c=(r=n.data)===null||r===void 0?void 0:r.Id)!==null&&c!==void 0?c:"",operate:"unpause"})},onSuccess:function(){return n.onFinish&&n.onFinish()},icon:(0,t.jsx)(o.Z,{}),disabled:n.data&&!n.data.State.Paused,children:Q.format("unpause")}),(0,t.jsx)(x.Z,{type:"vertical"}),n.data&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Z,{showFileExplorer:!0,ref:q}),(0,t.jsx)(u.ZP,{type:"dashed",onClick:function(){n.data&&ee(n.data.Config.WorkingDir)},icon:(0,t.jsx)(y.Z,{}),children:"Console"})]}),(0,t.jsx)(x.Z,{type:"vertical"}),n.extra&&n.extra.map(function(d,c){return(0,t.jsx)("span",{children:d},c)})]})})});W.Z=N},52031:function(w,W,e){e.d(W,{Z:function(){return y}});var K=e(31574),o=e(38345),B=e(26412),E=e(36146),p=e(85893);function y(l){var M,x=new E.Uo("components.appDetail.appDetailVolume");return l.data&&l.data.Mounts&&l.data.Mounts.length>0&&(0,p.jsx)(o.Z,{ghost:l.ghost,title:(0,p.jsx)(K.Z,{}),subTitle:x.format("cardTitle"),children:(0,p.jsx)(B.Z,{column:1,bordered:!0,children:(M=l.data)===null||M===void 0?void 0:M.Mounts.map(function(u,R){return(0,p.jsx)(B.Z.Item,{styles:{label:{width:"50%",wordBreak:"break-word"},content:{width:"50%",wordBreak:"break-word"}},label:u.Type=="volume"?u.Name:u.Source,children:u.Destination},R)})})})}},94359:function(w,W,e){e.d(W,{Z:function(){return _}});var K=e(5574),o=e.n(K),B=e(3089),E=e(98165),p=e(18429),y=e(8751),l=e(66212),M=e(14313),x=e(30159),u=e(87740),R=e(50888),D=e(66309),h=e(83062),T=e(36146),s=e(85893);function _(t){var N,n,k=new T.Uo("components.containerStatus"),Q=t.status.split("."),q=o()(Q,2),ee=q[0],d=q[1],c="";c=k.format(t.status,(N=t.statusValue)!==null&&N!==void 0?N:{});var r=(0,s.jsx)(s.Fragment,{});return d=="0"&&(r=(0,s.jsx)(D.Z,{icon:(0,s.jsx)(B.Z,{}),color:"default",children:c})),d=="10"&&(r=(0,s.jsx)(D.Z,{icon:(0,s.jsx)(E.Z,{spin:!0}),color:"processing",children:c})),d=="20"&&(r=(0,s.jsx)(D.Z,{icon:(0,s.jsx)(p.Z,{}),color:"error",children:c})),d=="30"&&(r=(0,s.jsx)(D.Z,{icon:(0,s.jsx)(y.Z,{}),color:"success",children:c})),d=="new"&&(r=(0,s.jsx)(D.Z,{icon:(0,s.jsx)(l.Z,{}),children:c})),(d=="running"||d=="healthy"||d=="active"||d=="ready")&&(r=(0,s.jsx)(D.Z,{icon:(0,s.jsx)(M.Z,{}),color:"success",children:c})),(d=="paused"||d=="pause"||d=="rollback_paused")&&(r=(0,s.jsx)(D.Z,{icon:(0,s.jsx)(x.Z,{}),children:c})),(d=="waiting"||d=="starting"||d=="accepted")&&(r=(0,s.jsx)(D.Z,{icon:(0,s.jsx)(u.Z,{}),children:c})),["deploying","pending","allocated","accepted","assigned","preparing","updating","rollback_started"].includes(d)&&(r=(0,s.jsx)(D.Z,{icon:(0,s.jsx)(R.Z,{}),color:"processing",children:c})),(d=="error"||d=="down"||d=="failed")&&(r=(0,s.jsx)(D.Z,{icon:(0,s.jsx)(p.Z,{}),color:"error",children:c})),["complete","completed","rollback_completed"].includes(d)&&(r=(0,s.jsx)(D.Z,{icon:(0,s.jsx)(y.Z,{}),color:"success",children:c})),["exited","dead","removing","restarting","unhealthy","created","drain","unreachable","shutdown","rejected","remove","orphaned"].includes(d)&&(r=(0,s.jsx)(D.Z,{icon:(0,s.jsx)(p.Z,{}),color:"warning",children:c})),(0,s.jsx)(h.Z,{placement:"top",title:(n=t.tip)!==null&&n!==void 0?n:"",children:r})}},76428:function(w,W,e){e.d(W,{Z:function(){return E}});var K=e(25593),o=e(67294),B=e(85893);function E(p){return(0,B.jsx)(K.Z.Text,{copyable:!0,children:p.title})}},78498:function(w,W,e){e.d(W,{Z:function(){return y}});var K=e(25035),o=e(42075),B=e(83062),E=e(67294),p=e(85893);function y(l){return(0,p.jsxs)(o.Z,{children:[l.title,(0,p.jsx)(B.Z,{title:l.help,children:(0,p.jsx)(K.Z,{})})]})}},70146:function(w,W,e){e.d(W,{SR:function(){return D},VE:function(){return u},Zy:function(){return M},iD:function(){return T},yB:function(){return y}});var K=e(15009),o=e.n(K),B=e(99289),E=e.n(B),p=e(82346);function y(_){return l.apply(this,arguments)}function l(){return l=E()(o()().mark(function _(t){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,p.request)("/api/app/container-backup/create",{data:t,method:"POST"});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},_)})),l.apply(this,arguments)}function M(_){return x.apply(this,arguments)}function x(){return x=E()(o()().mark(function _(t){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.request)("/api/app/container-backup/get-list",{method:"POST",data:t}));case 1:case"end":return n.stop()}},_)})),x.apply(this,arguments)}function u(_){return R.apply(this,arguments)}function R(){return R=E()(o()().mark(function _(t){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.request)("/api/app/container-backup/delete",{method:"POST",data:t}));case 1:case"end":return n.stop()}},_)})),R.apply(this,arguments)}function D(_){return h.apply(this,arguments)}function h(){return h=E()(o()().mark(function _(t){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.request)("/api/app/container-backup/restore",{method:"POST",data:t}));case 1:case"end":return n.stop()}},_)})),h.apply(this,arguments)}function T(_){return s.apply(this,arguments)}function s(){return s=E()(o()().mark(function _(t){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.request)("/api/app/container-backup/get-detail",{method:"POST",data:t}));case 1:case"end":return n.stop()}},_)})),s.apply(this,arguments)}},29453:function(w,W,e){e.d(W,{A9:function(){return y},R3:function(){return D},e1:function(){return M},rn:function(){return u}});var K=e(15009),o=e.n(K),B=e(99289),E=e.n(B),p=e(82346);function y(T){return l.apply(this,arguments)}function l(){return l=E()(o()().mark(function T(s){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,p.request)("/api/common/tag/create",{method:"POST",data:s});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},T)})),l.apply(this,arguments)}function M(T){return x.apply(this,arguments)}function x(){return x=E()(o()().mark(function T(s){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,p.request)("/api/common/tag/get-list",{method:"POST",data:s});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},T)})),x.apply(this,arguments)}function u(T){return R.apply(this,arguments)}function R(){return R=E()(o()().mark(function T(s){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,p.request)("/api/common/tag/delete",{method:"POST",data:s});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},T)})),R.apply(this,arguments)}function D(T){return h.apply(this,arguments)}function h(){return h=E()(o()().mark(function T(s){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,p.request)("/api/pro/tag/get-url-detail",{method:"POST",data:s});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},T)})),h.apply(this,arguments)}},77446:function(w,W,e){e.d(W,{V:function(){return y},v:function(){return M}});var K=e(15009),o=e.n(K),B=e(99289),E=e.n(B),p=e(82346);function y(u){return l.apply(this,arguments)}function l(){return l=E()(o()().mark(function u(R){return o()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,p.request)("/api/pro/container-rollback/get-list",{data:R,method:"POST"});case 2:return h.abrupt("return",h.sent);case 3:case"end":return h.stop()}},u)})),l.apply(this,arguments)}function M(u){return x.apply(this,arguments)}function x(){return x=E()(o()().mark(function u(R){return o()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,p.request)("/api/pro/container-rollback/restore",{data:R,method:"POST"});case 2:return h.abrupt("return",h.sent);case 3:case"end":return h.stop()}},u)})),x.apply(this,arguments)}}}]);
