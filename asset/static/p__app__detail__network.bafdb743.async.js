"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2902],{4798:function(H,D,e){var A=e(15009),r=e.n(A),B=e(99289),d=e.n(B),_=e(5574),M=e.n(_),E=e(24963),b=e(14946),y=e(64789),s=e(38345),v=e(17186),L=e(24739),f=e(5966),p=e(62370),O=e(10641),W=e(31418),j=e(25593),U=e(85576),I=e(66309),w=e(42075),P=e(28036),u=e(67294),o=e(85893),t=(0,u.forwardRef)(function(n,g){var i=(0,u.useContext)(E.Z),K=i.notice,x=(0,u.useState)(!1),$=M()(x,2),F=$[0],k=$[1],T=(0,u.useRef)(),N=W.Z.useApp();(0,u.useImperativeHandle)(g,function(){return{}});var G=function(c){var a,l,R=!1,C=(a=(l=T.current)===null||l===void 0?void 0:l.getList())!==null&&a!==void 0?a:[];if(C.map(function(m){m.name==c.name&&(R=!0)}),!R){var S;(S=T.current)===null||S===void 0||S.add(c)}};return(0,o.jsxs)(s.Z,{title:"\u5173\u8054\u7F51\u7EDC",headerBordered:!0,children:[(0,o.jsx)(v.u,{name:"network",actionRef:T,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u7F51\u7EDC"},actionGuard:{beforeAddRow:function(c,a){return!n.siteName||n.siteName==""||typeof n.siteName=="undefined"?(K.error("\u8BF7\u8F93\u5165\u7AD9\u70B9\u6807\u8BC6"),!1):(k(!0),!1)}},copyIconProps:!1,min:0,itemRender:function(c,a){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(L.UW,{children:[(0,o.jsx)(f.Z,{label:"\u7F51\u7EDC\u540D\u79F0",name:"name",width:"md",disabled:!0,fieldProps:{value:a.record.name}}),(0,o.jsx)(p.Z,{label:"\u8BBF\u95EEHostname",name:"alise",children:a.record.alise!=""&&(0,o.jsx)(j.Z.Text,{code:!0,copyable:!0,children:a.record.alise})}),(0,o.jsx)(p.Z,{label:" ",children:c.action})]}),(0,o.jsx)(L.UW,{children:(0,o.jsx)(f.Z,{label:"\u6307\u5B9AIpV4",name:"ipV4",width:"md",fieldProps:{addonAfter:a.record.subnet}})})]})}}),(0,o.jsx)(U.Z,{title:"\u9009\u62E9\u7F51\u7EDC",width:1024,footer:!1,open:F,onCancel:function(){return k(!1)},children:(0,o.jsx)(O.Z,{rowKey:"Name",toolBarRender:!1,columns:[{title:"\u540D\u79F0",dataIndex:"Name",render:function(c,a,l,R,C){return a.Name=="none"||a.Name=="bridge"||a.Name=="host"?(0,o.jsxs)(o.Fragment,{children:[a.Name," ",(0,o.jsx)(I.Z,{color:"blue",children:"System"})]}):(0,o.jsx)(o.Fragment,{children:c})}},{title:"\u7C7B\u578B",ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"IPAM Driver",ellipsis:!0,width:120,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4 IPAM Network",search:!1,dataIndex:["IPAM","Config",0,"Subnet"],render:function(c,a,l,R,C){return(0,o.jsxs)(w.Z,{children:[a.IPAM.Config&&a.IPAM.Config[0]&&"".concat(a.IPAM.Config[0].Subnet," - ").concat(a.IPAM.Config[0].Gateway),a.IPAM.Config&&a.IPAM.Config[1]&&"".concat(a.IPAM.Config[1].Subnet," - ").concat(a.IPAM.Config[1].Gateway)]})}},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(c,a,l,R,C){return[(0,o.jsx)(P.ZP,{type:"link",onClick:function(){G({name:a.Name,alise:[""],subnet:a.IPAM.Config[0].Subnet}),k(!1)},children:(0,o.jsx)(y.Z,{})},a.Id)]}}],request:function(){var h=d()(r()().mark(function c(a,l,R){var C;return r()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,b.jR)({name:a.Name});case 2:return C=m.sent,m.abrupt("return",{data:C.data.list,success:!0,total:C.data.list.length});case 4:case"end":return m.stop()}},c)}));return function(c,a,l){return h.apply(this,arguments)}}(),pagination:{pageSize:10}})})]})});D.Z=t},80821:function(H,D,e){e.d(D,{Z:function(){return y}});var A=e(5574),r=e.n(A),B=e(24963),d=e(86738),_=e(28036),M=e(83062),E=e(67294),b=e(85893);function y(s){var v=(0,E.useState)(!1),L=r()(v,2),f=L[0],p=L[1],O=(0,E.useContext)(B.Z),W=O.lang,j=O.notice,U=O.message,I=function(){p(!0),s.action().then(function(P){if(p(!1),P){typeof s.onSuccess=="function"&&s.onSuccess(P);var u="";s.messageSuccess?typeof s.messageSuccess=="function"?u=s.messageSuccess(P):u=s.messageSuccess.indexOf("notification.")==0?W(s.messageSuccess):s.messageSuccess:u=W("notification.finish"),s.asynced?U.info(u):U.success(u)}}).catch(function(P){p(!1),typeof s.onError=="function"&&s.onError(P)})};return s.confirm?(0,b.jsx)(d.Z,{style:{width:500},title:s.confirmTitle?s.confirmTitle:W("notification.title.tip"),description:typeof s.confirm=="string"&&s.confirm.indexOf("notification.")==0?W(s.confirm):s.confirm,onConfirm:I,okText:"Yes",cancelText:"No",children:(0,b.jsx)(_.ZP,{disabled:s.disabled,icon:s.icon,loading:f,danger:s.danger,type:s.type,children:s.children})}):(0,b.jsx)(M.Z,{title:s.tips,children:(0,b.jsx)(_.ZP,{style:s.ghost?{padding:0,height:"auto"}:{},disabled:s.disabled,icon:s.icon,loading:f,onClick:I,danger:s.danger,type:s.type,children:s.children})})}},78498:function(H,D,e){e.d(D,{Z:function(){return M}});var A=e(25035),r=e(42075),B=e(83062),d=e(67294),_=e(85893);function M(E){return(0,_.jsxs)(r.Z,{children:[E.title,(0,_.jsx)(B.Z,{title:E.help,children:(0,_.jsx)(A.Z,{})})]})}},24963:function(H,D,e){var A=e(67294),r=(0,A.createContext)({});D.Z=r},50070:function(H,D,e){e.r(D),e.d(D,{AppDetailContext:function(){return O},default:function(){return W}});var A=e(15009),r=e.n(A),B=e(99289),d=e.n(B),_=e(5574),M=e.n(_),E=e(24963),b=e(60335),y=e(55809),s=e(63713),v=e(25593),L=e(50136),f=e(67294),p=e(85893),O=(0,f.createContext)({});function W(){var j,U=(0,f.useContext)(E.Z),I=U.lang,w=U.loading,P=U.message,u=(0,s.useParams)(),o=(0,s.useSearchParams)(),t=M()(o,2),n=t[0],g=t[1],i=(j=n.get("tab"))!==null&&j!==void 0?j:"edit",K=(0,f.useState)("edit"),x=M()(K,2),$=x[0],F=x[1],k=(0,s.useNavigate)(),T=(0,f.useState)(1),N=M()(T,2),G=N[0],h=N[1],c=[{label:(0,p.jsx)(s.Link,{to:"/app/detail/edit/".concat(u.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,p.jsx)(s.Link,{to:"/app/detail/network/".concat(u.id,"?tab=network"),children:"\u7F51\u7EDC\u7BA1\u7406"}),key:"network"},{label:(0,p.jsx)(v.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){P.info(I("app.detail.createExplorerPlugin")),k("/app/detail/file/".concat(u.id,"?tab=file"))}},{label:(0,p.jsx)(v.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){k("/app/detail/log/".concat(u.id,"?tab=log"))}},{label:(0,p.jsx)(v.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){k("/app/detail/stat/".concat(u.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,p.jsx)(y.Z,{}),disabled:!0}],a=(0,f.useState)(c),l=M()(a,2),R=l[0],C=l[1];(0,f.useEffect)(function(){w.show(),F(i);var m=function(){var V=d()(r()().mark(function Z(){var X,Q,J;return r()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Q=c,z.next=3,(0,b.jV)({md5:(X=u.id)!==null&&X!==void 0?X:""});case 3:J=z.sent,Q.map(function(Y){return Y.key=="containerName"&&(Y.label=J.data.info.Name),(!J.data.info.State.Running||J.data.info.State.Restarting)&&(Y.key=="file"||Y.key=="stat")&&(Y.disabled=!0),Y}),C(Q),w.destroy();case 7:case"end":return z.stop()}},Z)}));return function(){return V.apply(this,arguments)}}();m()},[G]);var S=function(V){F(V.key)};return(0,p.jsxs)(O.Provider,{value:{reload:function(){h(G+1)}},children:[(0,p.jsx)(L.Z,{mode:"horizontal",onClick:S,selectedKeys:[$],items:R}),(0,p.jsx)(s.Outlet,{})]})}},85422:function(H,D,e){e.r(D),e.d(D,{default:function(){return i}});var A=e(15009),r=e.n(A),B=e(99289),d=e.n(B),_=e(5574),M=e.n(_),E=e(14946),b=e(48689),y=e(38345),s=e(10641),v=e(42075),L=e(25593),f=e(67294),p=e(60335),O=e(78498),W=e(80821),j=e(63713),U=e(64599),I=e.n(U),w=e(40717),P=e(184),u=e(28036),o=e(4798),t=e(85893);function n(K){var x=(0,f.useRef)();return[(0,t.jsx)(P.a,{trigger:(0,t.jsx)(u.ZP,{type:"primary",icon:(0,t.jsx)(w.Z,{}),children:"\u52A0\u5165\u7F51\u7EDC"},"button"),width:800,formRef:x,title:"\u914D\u7F6E\u7F51\u7EDC",onFinish:function(){var $=d()(r()().mark(function F(k){var T,N,G,h,c;return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!k.network){l.next=19;break}N=I()(k.network),l.prev=2,N.s();case 4:if((G=N.n()).done){l.next=11;break}return h=G.value,l.next=8,(0,E.HY)({name:h.name,containerName:K.containerName,containerAlise:h.alise,ipV4:h.ipV4});case 8:c=l.sent;case 9:l.next=4;break;case 11:l.next=16;break;case 13:l.prev=13,l.t0=l.catch(2),N.e(l.t0);case 16:return l.prev=16,N.f(),l.finish(16);case 19:return!((T=x.current)===null||T===void 0)&&T.resetFields&&x.current.resetFields(),K.onSuccess&&K.onSuccess(),l.abrupt("return",!0);case 22:case"end":return l.stop()}},F,null,[[2,13,16,19]])}));return function(F){return $.apply(this,arguments)}}(),children:(0,t.jsx)(o.Z,{siteName:K.containerName})},"form")]}var g=e(50070);function i(){var K,x=(0,f.useRef)(),$=(0,j.useParams)(),F=(0,f.useState)(),k=M()(F,2),T=k[0],N=k[1],G=(0,f.useContext)(g.AppDetailContext);return(0,f.useEffect)(function(){G.reload()},[]),(0,t.jsx)(y.Z,{children:(0,t.jsx)(s.Z,{scroll:{x:"max-content"},rowKey:"key",actionRef:x,pagination:!1,columns:[{title:"\u6240\u5C5E\u7F51\u7EDC",key:"name",dataIndex:"networkName",width:300},{title:"\u5BB9\u5668\u540D\u79F0",key:"containerName",dataIndex:"containerName"},{title:(0,t.jsx)(O.Z,{title:"hostname",help:"\u63D0\u4F9B\u5BB9\u5668\u5185\u90E8\u8BBF\u95EE"}),key:"hostName",render:function(c,a,l){return a.hostName?(0,t.jsx)(v.Z,{direction:"vertical",children:a.hostName.map(function(R){if(R)return(0,t.jsx)(L.Z.Text,{copyable:!0,keyboard:!0,children:R},R)})}):(0,t.jsx)(t.Fragment,{})}},{title:"Ip",key:"ip",render:function(c,a,l,R,C){return(0,t.jsxs)(v.Z,{direction:"vertical",children:[(0,t.jsx)("span",{children:a.networkInfo.IPv4Address}),a.networkInfo.IPv6Address&&(0,t.jsx)("span",{children:a.networkInfo.IPv6Address})]})}},{title:"MacAddress",key:"mac",render:function(c,a,l,R,C){return a.networkInfo.MacAddress}},{title:"\u64CD\u4F5C",key:"option",width:100,render:function(c,a,l,R,C){return(0,t.jsx)(v.Z,{children:a.key!="bridge"&&a.key!="none"&&a.key!="host"&&a.networkName!=""&&(0,t.jsx)(W.Z,{type:"link",action:function(){var m;return(0,E.t9)({name:a.networkName,containerName:(m=$.id)!==null&&m!==void 0?m:""})},onSuccess:function(){var m,V;!((m=x.current)===null||m===void 0)&&m.reloadAndRest&&((V=x.current)===null||V===void 0||V.reloadAndRest())},tips:"\u9000\u51FA\u8BE5\u7F51\u7EDC",children:(0,t.jsx)(b.Z,{})})})}}],request:function(){var h=d()(r()().mark(function c(a,l,R){var C,S,m;return r()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,p.jV)({md5:(C=$.id)!==null&&C!==void 0?C:""});case 2:return S=Z.sent,N(S.data.info),Z.next=6,(0,E._3)({name:Object.keys(S.data.info.NetworkSettings.Networks)});case 6:return m=Z.sent,Z.abrupt("return",{data:m.data.list,success:!0,total:m.data.list.length});case 8:case"end":return Z.stop()}},c)}));return function(c,a,l){return h.apply(this,arguments)}}(),toolBarRender:function(){var c;return[(0,t.jsx)(n,{onSuccess:function(){var l;(l=x.current)===null||l===void 0||l.reload()},containerName:(c=T==null?void 0:T.Name)!==null&&c!==void 0?c:""},"joinNetwork")]},search:!1,expandable:{expandRowByClick:!1,expandedRowKeys:Object.keys((K=T==null?void 0:T.NetworkSettings.Networks)!==null&&K!==void 0?K:{bridge:[]})}})})}},14946:function(H,D,e){e.d(D,{CI:function(){return s},HY:function(){return U},IS:function(){return M},XY:function(){return p},_3:function(){return w},_x:function(){return L},jR:function(){return b},t9:function(){return W}});var A=e(15009),r=e.n(A),B=e(99289),d=e.n(B),_=e(63713);function M(u){return E.apply(this,arguments)}function E(){return E=d()(r()().mark(function u(o){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,_.request)("/api/app/network/get-detail",{method:"POST",data:o}));case 1:case"end":return n.stop()}},u)})),E.apply(this,arguments)}function b(u){return y.apply(this,arguments)}function y(){return y=d()(r()().mark(function u(o){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,_.request)("/api/app/network/get-list",{method:"POST",data:o}));case 1:case"end":return n.stop()}},u)})),y.apply(this,arguments)}function s(){return v.apply(this,arguments)}function v(){return v=d()(r()().mark(function u(){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,_.request)("/api/app/network/prune",{method:"POST"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},u)})),v.apply(this,arguments)}function L(u){return f.apply(this,arguments)}function f(){return f=d()(r()().mark(function u(o){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,_.request)("/api/app/network/delete",{method:"POST",data:o});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},u)})),f.apply(this,arguments)}function p(u){return O.apply(this,arguments)}function O(){return O=d()(r()().mark(function u(o){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,_.request)("/api/app/network/create",{method:"POST",data:o});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},u)})),O.apply(this,arguments)}function W(u){return j.apply(this,arguments)}function j(){return j=d()(r()().mark(function u(o){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,_.request)("/api/app/network/disconnect",{method:"POST",data:o});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},u)})),j.apply(this,arguments)}function U(u){return I.apply(this,arguments)}function I(){return I=d()(r()().mark(function u(o){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,_.request)("/api/app/network/connect",{method:"POST",data:o});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},u)})),I.apply(this,arguments)}function w(u){return P.apply(this,arguments)}function P(){return P=d()(r()().mark(function u(o){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,_.request)("/api/app/network/get-container-list",{method:"POST",data:o}));case 1:case"end":return n.stop()}},u)})),P.apply(this,arguments)}},60335:function(H,D,e){e.d(D,{IE:function(){return b},IW:function(){return M},KK:function(){return p},LJ:function(){return W},RF:function(){return w},Re:function(){return U},aF:function(){return u},eE:function(){return L},jV:function(){return s}});var A=e(15009),r=e.n(A),B=e(99289),d=e.n(B),_=e(63713);function M(t){return E.apply(this,arguments)}function E(){return E=d()(r()().mark(function t(n){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,_.request)("/api/app/container/status",{method:"POST",data:n}));case 1:case"end":return i.stop()}},t)})),E.apply(this,arguments)}function b(t){return y.apply(this,arguments)}function y(){return y=d()(r()().mark(function t(n){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,_.request)("/api/app/container/get-list",{data:n,method:"POST"}));case 1:case"end":return i.stop()}},t)})),y.apply(this,arguments)}function s(t){return v.apply(this,arguments)}function v(){return v=d()(r()().mark(function t(n){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,_.request)("/api/app/container/get-detail",{data:n,method:"POST"}));case 1:case"end":return i.stop()}},t)})),v.apply(this,arguments)}function L(t){return f.apply(this,arguments)}function f(){return f=d()(r()().mark(function t(n){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,_.request)("/api/app/container/update",{data:n,method:"POST"}));case 1:case"end":return i.stop()}},t)})),f.apply(this,arguments)}function p(){return O.apply(this,arguments)}function O(){return O=d()(r()().mark(function t(){return r()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,_.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return g.stop()}},t)})),O.apply(this,arguments)}function W(t){return j.apply(this,arguments)}function j(){return j=d()(r()().mark(function t(n){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,_.request)("/api/app/container/export",{method:"POST",data:n,responseType:"blob"}));case 1:case"end":return i.stop()}},t)})),j.apply(this,arguments)}function U(t){return I.apply(this,arguments)}function I(){return I=d()(r()().mark(function t(n){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,_.request)("/api/app/container/commit",{method:"POST",data:n}));case 1:case"end":return i.stop()}},t)})),I.apply(this,arguments)}function w(t){return P.apply(this,arguments)}function P(){return P=d()(r()().mark(function t(n){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,_.request)("/api/app/container/upgrade",{method:"POST",data:n}));case 1:case"end":return i.stop()}},t)})),P.apply(this,arguments)}function u(t){return o.apply(this,arguments)}function o(){return o=d()(r()().mark(function t(n){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,_.request)("/api/app/container/copy",{method:"POST",data:n}));case 1:case"end":return i.stop()}},t)})),o.apply(this,arguments)}}}]);
