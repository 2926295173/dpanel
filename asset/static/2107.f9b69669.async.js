"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2107],{43831:function(q,L,e){var Z=e(15009),P=e.n(Z),K=e(99289),D=e.n(K),N=e(5574),g=e.n(N),o=e(67294),x=e(14946),S=e(43425),w=e(48689),p=e(38345),k=e(10641),O=e(42075),U=e(25593),y=e(83062),i=e(60335),F=e(78498),B=e(80821),b=e(10032),$=e(5251),A=e(28230),T=e(46442),R=e(78451),s=e(85893),r=(0,o.forwardRef)(function(d,a){var M;(0,o.useImperativeHandle)(a,function(){return{}});var h=(0,o.useRef)(),j=(0,o.useRef)(),H=(0,o.useState)(),I=g()(H,2),G=I[0],Y=I[1];return(0,o.useEffect)(function(){Y(d.containerInfo)},[]),(0,s.jsxs)(p.Z,{ghost:d.ghost,children:[(0,s.jsx)(b.Z,{ref:j}),(0,s.jsx)(k.Z,{scroll:{x:"max-content"},rowKey:"key",actionRef:h,pagination:!1,columns:[{title:"\u6240\u5C5E\u7F51\u7EDC",key:"name",dataIndex:"networkName"},{title:"\u5BB9\u5668\u540D\u79F0",key:"containerName",dataIndex:"containerName",width:100,render:function(m,t,_,u,v){return(0,s.jsx)(R.Z,{content:(0,$.fi)(t.containerName,"/")})}},{title:(0,s.jsx)(F.Z,{title:"hostname",help:"\u63D0\u4F9B\u5BB9\u5668\u5185\u90E8\u8BBF\u95EE"}),key:"hostName",render:function(m,t,_){return t.hostName?(0,s.jsx)(O.Z,{direction:"vertical",children:t.hostName.map(function(u){if(u)return(0,s.jsx)(U.Z.Text,{copyable:!0,keyboard:!0,children:u},u)})}):(0,s.jsx)(s.Fragment,{})}},{title:"Ip",key:"ip",render:function(m,t,_,u,v){return(0,s.jsxs)(O.Z,{direction:"vertical",children:[(0,s.jsx)("span",{children:t.networkInfo.IPv4Address}),t.networkInfo.IPv6Address&&(0,s.jsx)("span",{children:t.networkInfo.IPv6Address})]})}},{title:"\u64CD\u4F5C",key:"option",width:50,fixed:"right",render:function(m,t,_,u,v){return(0,s.jsxs)(O.Z,{children:[t.networkName!=""&&(0,s.jsx)(U.Z.Link,{onClick:function(){var l;(l=j.current)===null||l===void 0||l.show(t.networkName)},children:(0,s.jsx)(y.Z,{title:"\u7BA1\u7406",children:(0,s.jsx)(S.Z,{})})}),t.key!="bridge"&&t.key!="none"&&t.key!="host"&&t.networkName!=""&&(0,s.jsx)(B.Z,{type:"link",action:function(){return(0,x.t9)({name:t.networkName,containerName:d.containerInfo.Name})},onSuccess:function(){var l,f;!((l=h.current)===null||l===void 0)&&l.reloadAndRest&&((f=h.current)===null||f===void 0||f.reloadAndRest())},tips:"\u9000\u51FA\u8BE5\u7F51\u7EDC",children:(0,s.jsx)(w.Z,{})})]})}}],request:function(){var c=D()(P()().mark(function m(t,_,u){var v,n;return P()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,i.jV)({md5:d.containerInfo.Name});case 2:return v=f.sent,Y(v.data.info),f.next=6,(0,x._3)({name:Object.keys(v.data.info.NetworkSettings.Networks)});case 6:return n=f.sent,f.abrupt("return",{data:n.data.list,success:!0,total:n.data.list.length});case 8:case"end":return f.stop()}},m)}));return function(m,t,_){return c.apply(this,arguments)}}(),toolBarRender:function(){return[(0,s.jsx)(T.Z,{showTriggerButton:!0,onSelect:function(){var m=D()(P()().mark(function t(_){var u,v;return P()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,x.HY)({name:_.Name,containerName:d.containerInfo.Name,ipV4:""});case 2:v=l.sent,!((u=h.current)===null||u===void 0)&&u.reloadAndRest&&h.current.reloadAndRest();case 4:case"end":return l.stop()}},t)}));return function(t){return m.apply(this,arguments)}}()},"joinNetwork"),(0,s.jsx)(A.Z,{onFinish:function(){var t,_;!((t=h.current)===null||t===void 0)&&t.reloadAndRest&&((_=h.current)===null||_===void 0||_.reloadAndRest())}},"create")]},search:!1,expandable:{expandRowByClick:!1,expandedRowKeys:Object.keys((M=G==null?void 0:G.NetworkSettings.Networks)!==null&&M!==void 0?M:{bridge:[]})}})]})});L.Z=r},62107:function(q,L,e){e.d(L,{Z:function(){return Y}});var Z=e(5574),P=e.n(Z),K=e(15009),D=e.n(K),N=e(99289),g=e.n(N),o=e(67294),x=e(37767),S=e(60335),w=e(82346),p=e(58638),k=e(85265),O=e(42075),U=e(96074),y=e(83062),i=e(86250),F=e(52031),B=e(14189),b=e(27813),$=e(46934),A=e(184),T=e(25593),R=e(95591),s=e(5251),r=e(85893),d=(0,o.forwardRef)(function(c,m){var t,_=(0,o.useState)(!1),u=P()(_,2),v=u[0],n=u[1];return(0,o.useImperativeHandle)(m,function(){return{}}),(0,r.jsx)(A.a,{submitter:!1,title:(0,s.fi)(c.containerInfo.Name,"/")+" - \u6587\u4EF6\u7BA1\u7406",onOpenChange:function(f){n(f)},trigger:(0,r.jsx)(T.Z.Link,{children:(0,r.jsx)(R.Z,{})},"file"),children:v&&(0,r.jsx)($.Z,{md5:c.containerInfo.Id,initPath:(t=c.containerInfo.Config.WorkingDir)!==null&&t!==void 0?t:"/"})})}),a=d,M=e(24963),h=e(43831),j=e(52209),H=(0,o.forwardRef)(function(c,m){(0,o.useImperativeHandle)(m,function(){return{}});var t=(0,o.useState)(!1),_=P()(t,2),u=_[0],v=_[1];return(0,r.jsx)(A.a,{submitter:!1,title:(0,s.fi)(c.containerInfo.Name,"/")+" - \u7F51\u7EDC\u7BA1\u7406",onOpenChange:function(l){v(l)},open:u,trigger:(0,r.jsx)(T.Z.Link,{children:(0,r.jsx)(j.Z,{})},"file"),children:(0,r.jsx)(h.Z,{ghost:!0,containerInfo:c.containerInfo})})}),I=H,G=(0,o.forwardRef)(function(c,m){(0,o.useImperativeHandle)(m,function(){return{show:function(V){return g()(D()().mark(function E(){return D()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return J(!0),Q.next=3,ne(V);case 3:case"end":return Q.stop()}},E)}))()}}});var t=(0,o.useContext)(M.Z),_=t.loading,u=(0,o.useState)(),v=P()(u,2),n=v[0],l=v[1],f=(0,o.useState)(!1),ee=P()(f,2),te=ee[0],J=ee[1],ne=function(){var W=g()(D()().mark(function V(E){var C;return D()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,(0,S.jV)({md5:E});case 2:C=z.sent,C.data&&(C.data.info.HostConfig.NetworkMode=="host"&&C.data.info.Config.ExposedPorts&&Object.keys(C.data.info.Config.ExposedPorts).map(function(X){C.data.info.NetworkSettings.Ports[X]=[{HostIp:"0.0.0.0",HostPort:X.substring(0,X.indexOf("/"))}]}),l(C.data));case 4:case"end":return z.stop()}},V)}));return function(E){return W.apply(this,arguments)}}();return(0,r.jsx)(k.Z,{loading:!n,title:"\u5FEB\u6377\u67E5\u770B\u5BB9\u5668",open:te,onClose:function(){J(!1)},width:800,extra:(0,r.jsxs)(O.Z,{split:(0,r.jsx)(U.Z,{type:"vertical"}),children:[(n==null?void 0:n.info)&&(0,r.jsx)(a,{containerInfo:n.info}),(n==null?void 0:n.info)&&(0,r.jsx)(I,{containerInfo:n.info}),(0,r.jsx)(y.Z,{title:"\u67E5\u770B\u5B8C\u6574\u4FE1\u606F",children:(0,r.jsx)(w.Link,{to:"/app/detail/edit/"+(n==null?void 0:n.info.Id),children:(0,r.jsx)(p.Z,{})},"detail")})]}),children:(0,r.jsxs)(i.Z,{vertical:!0,gap:20,children:[n&&(0,r.jsx)(B.Z,{ghost:!0,data:n==null?void 0:n.info,onFinish:g()(D()().mark(function W(){return D()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,ne(n.info.Id);case 2:return E.t0=E.sent,E.abrupt("return",[E.t0]);case 4:case"end":return E.stop()}},W)}))}),n&&(0,r.jsx)(b.Z,{ghost:!0,data:n,checkContainerUpgrade:function(){J(!1),c.onUpgradeFinish&&c.onUpgradeFinish()}}),n&&(0,r.jsx)(x.Z,{data:n,ghost:!0}),(0,r.jsx)(F.Z,{data:n==null?void 0:n.info,ghost:!0})]})})}),Y=G},46442:function(q,L,e){var Z=e(15009),P=e.n(Z),K=e(99289),D=e.n(K),N=e(5574),g=e.n(N),o=e(67294),x=e(14946),S=e(64789),w=e(10641),p=e(28036),k=e(85265),O=e(42075),U=e(66309),y=e(28230),i=e(85893),F=(0,o.forwardRef)(function(B,b){(0,o.useImperativeHandle)(b,function(){return{show:function(){R(!0)}}});var $=(0,o.useState)(!1),A=g()($,2),T=A[0],R=A[1],s=(0,o.useRef)();return(0,i.jsxs)(i.Fragment,{children:[B.showTriggerButton&&(0,i.jsx)(p.ZP,{onClick:function(){R(!0)},children:"\u52A0\u5165\u7F51\u7EDC"}),(0,i.jsx)(k.Z,{title:"\u9009\u62E9\u7F51\u7EDC",width:800,footer:!1,open:T,onClose:function(){return R(!1)},extra:(0,i.jsx)(O.Z,{children:(0,i.jsx)(y.Z,{onFinish:function(){var d,a;!((d=s.current)===null||d===void 0)&&d.reloadAndRest&&((a=s.current)===null||a===void 0||a.reloadAndRest())}},"create")}),children:(0,i.jsx)(w.Z,{rowKey:"Name",toolBarRender:!1,actionRef:s,columns:[{title:"\u540D\u79F0",dataIndex:"Name",render:function(d,a,M,h,j){return a.Name=="none"||a.Name=="bridge"||a.Name=="host"?(0,i.jsxs)(i.Fragment,{children:[a.Name," ",(0,i.jsx)(U.Z,{color:"blue",children:"System"})]}):(0,i.jsx)(i.Fragment,{children:d})}},{title:"\u7C7B\u578B",ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"IPAM Driver",ellipsis:!0,width:120,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4 IPAM Network",search:!1,dataIndex:["IPAM","Config",0,"Subnet"],render:function(d,a,M,h,j){return(0,i.jsxs)(O.Z,{children:[a.IPAM.Config&&a.IPAM.Config[0]&&"".concat(a.IPAM.Config[0].Subnet," - ").concat(a.IPAM.Config[0].Gateway),a.IPAM.Config&&a.IPAM.Config[1]&&"".concat(a.IPAM.Config[1].Subnet," - ").concat(a.IPAM.Config[1].Gateway)]})}},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(d,a,M,h,j){return[a.Name!="none"&&a.Name!="bridge"&&a.Name!="host"&&(0,i.jsx)(p.ZP,{type:"link",onClick:function(){B.onSelect(a),R(!1)},children:(0,i.jsx)(S.Z,{})},a.Id)]}}],request:function(){var r=D()(P()().mark(function d(a,M,h){var j;return P()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,(0,x.jR)({name:a.Name});case 2:return j=I.sent,I.abrupt("return",{data:j.data.list,success:!0,total:j.data.list.length});case 4:case"end":return I.stop()}},d)}));return function(d,a,M){return r.apply(this,arguments)}}(),pagination:{pageSize:10}})})]})});L.Z=F}}]);
