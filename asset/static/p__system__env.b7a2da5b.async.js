"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1180],{88484:function(X,j,e){e.d(j,{Z:function(){return p}});var P=e(87462),i=e(67294),T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},A=T,R=e(84089),O=function(t,D){return i.createElement(R.Z,(0,P.Z)({},t,{ref:D,icon:A}))},E=i.forwardRef(O),p=E},52688:function(X,j,e){var P=e(1413),i=e(45987),T=e(67294),A=e(1961),R=e(85893),O=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],E=T.forwardRef(function(p,c){var t=p.fieldProps,D=p.unCheckedChildren,M=p.checkedChildren,I=p.proFieldProps,g=(0,i.Z)(p,O);return(0,R.jsx)(A.Z,(0,P.Z)({valueType:"switch",fieldProps:(0,P.Z)({unCheckedChildren:D,checkedChildren:M},t),ref:c,valuePropName:"checked",proFieldProps:I,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},g))});j.Z=E},5966:function(X,j,e){var P=e(97685),i=e(1413),T=e(45987),A=e(21770),R=e(72723),O=e(55241),E=e(97435),p=e(67294),c=e(1961),t=e(85893),D=["fieldProps","proFieldProps"],M=["fieldProps","proFieldProps"],I="text",g=function(u){var n=u.fieldProps,x=u.proFieldProps,m=(0,T.Z)(u,D);return(0,t.jsx)(c.Z,(0,i.Z)({valueType:I,fieldProps:n,filedConfig:{valueType:I},proFieldProps:x},m))},F=function(u){var n=(0,A.Z)(u.open||!1,{value:u.open,onChange:u.onOpenChange}),x=(0,P.Z)(n,2),m=x[0],$=x[1];return(0,t.jsx)(R.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(H){var b,a=H.getFieldValue(u.name||[]);return(0,t.jsx)(O.Z,(0,i.Z)((0,i.Z)({getPopupContainer:function(l){return l&&l.parentNode?l.parentNode:l},onOpenChange:function(l){return $(l)},content:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[(b=u.statusRender)===null||b===void 0?void 0:b.call(u,a),u.strengthText?(0,t.jsx)("div",{style:{marginTop:10},children:(0,t.jsx)("span",{children:u.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},u.popoverProps),{},{open:m,children:u.children}))}})},K=function(u){var n=u.fieldProps,x=u.proFieldProps,m=(0,T.Z)(u,M),$=(0,p.useState)(!1),N=(0,P.Z)($,2),H=N[0],b=N[1];return n!=null&&n.statusRender&&m.name?(0,t.jsx)(F,{name:m.name,statusRender:n==null?void 0:n.statusRender,popoverProps:n==null?void 0:n.popoverProps,strengthText:n==null?void 0:n.strengthText,open:H,onOpenChange:b,children:(0,t.jsx)("div",{children:(0,t.jsx)(c.Z,(0,i.Z)({valueType:"password",fieldProps:(0,i.Z)((0,i.Z)({},(0,E.Z)(n,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(o){var l;n==null||(l=n.onBlur)===null||l===void 0||l.call(n,o),b(!1)},onClick:function(o){var l;n==null||(l=n.onClick)===null||l===void 0||l.call(n,o),b(!0)}}),proFieldProps:x,filedConfig:{valueType:I}},m))})}):(0,t.jsx)(c.Z,(0,i.Z)({valueType:"password",fieldProps:n,proFieldProps:x,filedConfig:{valueType:I}},m))},_=g;_.Password=K,_.displayName="ProFormComponent",j.Z=_},80821:function(X,j,e){e.d(j,{Z:function(){return c}});var P=e(5574),i=e.n(P),T=e(24963),A=e(86738),R=e(28036),O=e(83062),E=e(67294),p=e(85893);function c(t){var D=(0,E.useState)(!1),M=i()(D,2),I=M[0],g=M[1],F=(0,E.useContext)(T.Z),K=F.lang,_=F.notice,S=F.message,u=function(){g(!0),t.action().then(function(x){if(g(!1),typeof t.onSuccess=="function"&&t.onSuccess(x),t.messageSuccess){var m="";typeof t.messageSuccess=="function"?m=t.messageSuccess(x):m=t.messageSuccess,m=K("notification.".concat(m))+K("notification.title.success"),t.asynced?S.info(m):S.success(m)}}).catch(function(x){g(!1),typeof t.onError=="function"&&t.onError(x)})};return t.confirm?(0,p.jsx)(A.Z,{style:{width:500},title:t.confirmTitle?t.confirmTitle:K("notification.title.tip"),description:t.confirm,onConfirm:u,okText:"Yes",cancelText:"No",children:(0,p.jsx)(R.ZP,{disabled:t.disabled,icon:t.icon,loading:I,danger:t.danger,type:t.type,children:t.children})}):(0,p.jsx)(O.Z,{title:t.tips,children:(0,p.jsx)(R.ZP,{disabled:t.disabled,icon:t.icon,loading:I,onClick:u,danger:t.danger,type:t.type,children:t.children})})}},89063:function(X,j,e){e.d(j,{Z:function(){return p}});var P=e(24963),i=e(88484),T=e(62370),A=e(31418),R=e(28036),O=e(67294),E=e(85893);function p(c){var t=(0,O.useContext)(P.Z),D=t.message,M=t.notice,I=t.lang,g=(0,O.useRef)(null),F=A.Z.useApp(),K=function(){g.current&&(g.current.click(),g.current.onchange=function(S){if(!S||!S.target)return"";var u=new FileReader;u.onload=function(x){var m,$,N=(m=x.target)===null||m===void 0?void 0:m.result;if(c.onLoad)try{c.onLoad&&c.onLoad(N)}catch(H){M.error(H);return}typeof c.onImport=="function"&&(D.success("\u6210\u529F\u5BFC\u5165 ".concat(c.title)),c.onImport(N)),($=g.current)!==null&&$!==void 0&&$.value&&(g.current.value="")};var n=S.target;if(n.files)try{u.readAsText(n.files[0])}catch(x){M.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(T.Z,{children:(0,E.jsx)(R.ZP,{icon:(0,E.jsx)(i.Z,{}),block:!0,onClick:K,children:c.title})}),(0,E.jsx)("input",{style:{display:"none"},type:"file",ref:g,name:"importFileInput"})]})}},24963:function(X,j,e){var P=e(67294),i=(0,P.createContext)({});j.Z=i},53893:function(X,j,e){e.r(j),e.d(j,{default:function(){return s}});var P=e(15009),i=e.n(P),T=e(99289),A=e.n(T),R=e(5574),O=e.n(R),E=e(80821),p=e(184),c=e(5966),t=e(52688),D=e(97462),M=e(62370),I=e(28036),g=e(86250),F=e(67294),K=e(91845),_=e(87662),S=e(89063),u=e(24963),n=e(85893),x=(0,F.forwardRef)(function(d,Y){var J;(0,F.useImperativeHandle)(Y,function(){return{edit:function(r){var h;(h=B.current)===null||h===void 0||h.setFieldsValue({name:r.name,title:r.title,address:r.address,enableTLS:r.enableTLS,tlsCa:r.tlsCa,tlsCert:r.tlsCert,tlsKey:r.tlsKey,enableComposePath:r.enableComposePath}),Q(!0),f(r.name)}}});var G=(0,F.useState)(!1),z=O()(G,2),w=z[0],Q=z[1],B=(0,F.useRef)(),L=(0,F.useState)(""),k=O()(L,2),V=k[0],f=k[1],W=(0,F.useContext)(u.Z),y=W.lang;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(I.ZP,{onClick:function(){var r;f(""),(r=B.current)===null||r===void 0||r.resetFields(),Q(!0)},type:"primary",children:"\u6DFB\u52A0Docker\u73AF\u5883"}),(0,n.jsxs)(p.a,{drawerProps:{forceRender:!0},onOpenChange:function(r){Q(r)},open:w,width:800,formRef:B,title:(J=B.current)!==null&&J!==void 0&&J.getFieldValue&&B.current.getFieldValue("name")=="local"?"\u914D\u7F6E\u9ED8\u8BA4Docker\u5BA2\u6237\u7AEF":"\u6DFB\u52A0Docker\u73AF\u5883",onFinish:function(){var C=A()(i()().mark(function r(h){var v,Z;return i()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return v={name:h.name,title:h.title,address:h.address,tlsCa:h.tlsCa,tlsCert:h.tlsCert,tlsKey:h.tlsKey,enableTLS:h.enableTLS,enableComposePath:h.enableComposePath,composePath:h.composePath},q.next=3,(0,_.ad)(v);case 3:return Z=q.sent,d.onFinish&&d.onFinish(),q.abrupt("return",!0);case 6:case"end":return q.stop()}},r)}));return function(r){return C.apply(this,arguments)}}(),children:[(0,n.jsx)(c.Z,{label:"\u540D\u79F0",name:"title",required:!0,rules:[{required:!0}],fieldProps:{onChange:function(r){var h="";if(r.target.value&&!V){var v,Z=(0,K.N9)(r.target.value.trim(),{toneType:"none",type:"array"});h=Z.join(""),(v=B.current)===null||v===void 0||v.setFieldValue("name",h)}}}}),(0,n.jsx)(c.Z,{label:"\u6807\u8BC6",name:"name",required:!0,disabled:V!="",rules:[{required:!0}],placeholder:"\u6807\u8BC6Docker\u73AF\u5883\uFF0C\u53EA\u5141\u8BB8\u4E3A\u82F1\u6587\u6216\u662F\u6570\u5B57"}),(0,n.jsx)(c.Z,{label:"Docker Api \u5730\u5740",name:"address",tooltip:"\u8FDE\u63A5\u8FDC\u7A0B Docker \u65F6\u8BF7\u5148\u5F00\u542F Api \u5730\u5740\u8BBF\u95EE\u3002",placeholder:"\u4F8B\u5982\uFF1Aunix:///var/run/docker.sock\u3001tcp://192.16.0.5:2375"}),(0,n.jsxs)(g.Z,{gap:80,children:[(0,n.jsx)(t.Z,{label:"\u542F\u7528TLS",name:"enableTLS",tooltip:"\u751F\u6210\u6559\u7A0B\u89C1\uFF1Ahttps://donknap.github.io/dpanel-docs/#/zh-cn/manual/remote"}),(0,n.jsx)(t.Z,{label:y("system.env.createEnableComposePath"),name:"enableComposePath",tooltip:"\u5F00\u542F\u72EC\u7ACBcompose\u76EE\u5F55\u540E\uFF0C\u5207\u6362\u8FDC\u7A0B docker \u5BA2\u6237\u7AEF\u65F6\u5C06\u53EA\u4F1A\u8BFB\u53D6\u8BE5\u76EE\u5F55\u4E0B\u7684 compose.yaml \u6587\u4EF6"})]}),(0,n.jsx)(D.Z,{name:["enableComposePath","name"],children:function(r){var h=r.enableComposePath,v=r.name;if(h)return(0,n.jsx)(c.Z,{label:y("system.env.createComposePath"),name:"composePath",disabled:!0,fieldProps:{value:"/dpanel/compose/compose-".concat(v!=null?v:"")}})}}),(0,n.jsx)(D.Z,{name:["enableTLS"],children:function(r){var h=r.enableTLS;if(h)return(0,n.jsxs)(g.Z,{gap:20,justify:"start",children:[(0,n.jsx)(M.Z,{name:"tlsCa",label:"\u4E0A\u4F20\u5BA2\u6237\u7AEF\u8BC1\u4E66",children:(0,n.jsx)(S.Z,{title:"\u4E0A\u4F20CA\u8BC1\u4E66 ca.pem",onImport:function(Z){var U;return(U=B.current)===null||U===void 0||U.setFieldValue("tlsCa",Z),!0},onLoad:function(Z){if(Z.indexOf("CERTIFICATE")<0)throw new Error("\u5BFC\u5165ca.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})}),(0,n.jsx)(M.Z,{name:"tlsCert",label:" ",children:(0,n.jsx)(S.Z,{title:"\u4E0A\u4F20\u8BC1\u4E66\u6587\u4EF6 cert.pem",onImport:function(Z){var U;return(U=B.current)===null||U===void 0||U.setFieldValue("tlsCert",Z),!0},onLoad:function(Z){if(Z.indexOf("CERTIFICATE")<0)throw new Error("\u5BFC\u5165cert.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})}),(0,n.jsx)(M.Z,{label:" ",name:"tlsKey",children:(0,n.jsx)(S.Z,{title:"\u4E0A\u4F20\u5BC6\u94A5\u6587\u4EF6 key.pem",onImport:function(Z){var U;return(U=B.current)===null||U===void 0||U.setFieldValue("tlsKey",Z),!0},onLoad:function(Z){if(Z.indexOf("PRIVATE")<0)throw new Error("\u5BFC\u5165key.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})})]})}})]})]})}),m=x,$=e(86548),N=e(90078),H=e(10641),b=e(63713),a=e(42075),o=e(96074),l=e(25593);function s(){var d=(0,F.useRef)(),Y=(0,F.useRef)(),J=(0,b.useSearchParams)(),G=O()(J,2),z=G[0],w=G[1],Q=(0,F.useState)(""),B=O()(Q,2),L=B[0],k=B[1];return(0,n.jsx)(N._z,{header:{extra:[(0,n.jsx)(m,{ref:Y,onFinish:A()(i()().mark(function V(){var f,W,y;return i()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!z.get("id")){r.next=6;break}return r.next=3,(0,_.vC)({name:(y=z.get("id"))!==null&&y!==void 0?y:"local"});case 3:return w(""),window.location.href="/dpanel/ui/home",r.abrupt("return");case 6:!((f=d.current)===null||f===void 0)&&f.reloadAndRest&&((W=d.current)===null||W===void 0||W.reloadAndRest());case 7:case"end":return r.stop()}},V)}))},"dockerEnvCreate")]},children:(0,n.jsx)(H.Z,{rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name"},{title:"\u540D\u79F0",dataIndex:"title"},{title:"\u5730\u5740",dataIndex:"address"},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(f,W,y,C,r){return(0,n.jsx)(a.Z,{split:(0,n.jsx)(o.Z,{type:"vertical"}),children:(0,n.jsx)(l.Z.Link,{onClick:function(){var v;W.name==L?w("id="+L):w(""),(v=Y.current)===null||v===void 0||v.edit(W)},children:(0,n.jsx)($.Z,{})},W.name)})}}],pagination:!1,request:A()(i()().mark(function V(){var f;return i()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,_.Kg)();case 2:return f=y.sent,z.get("id")&&f.data.list.map(function(C){if(C.name==z.get("id")){var r;(r=Y.current)===null||r===void 0||r.edit(C)}}),k(f.data.currentName),y.abrupt("return",{data:f.data.list,total:f.data.list.length});case 6:case"end":return y.stop()}},V)})),search:!1,rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0,getCheckboxProps:function(f){return{disabled:f.default}}},actionRef:d,tableAlertOptionRender:function(f){var W=f.selectedRowKeys;return(0,n.jsx)(a.Z,{size:16,children:(0,n.jsx)(E.Z,{danger:!0,type:"primary",action:function(){return(0,_._g)({name:W})},onSuccess:function(){var C,r;return!((C=d.current)===null||C===void 0)&&C.reloadAndRest&&((r=d.current)===null||r===void 0||r.reloadAndRest()),!0},onError:function(){var C,r;return!((C=d.current)===null||C===void 0)&&C.reset&&((r=d.current)===null||r===void 0||r.reset()),!0},messageSuccess:"delete",children:"\u6279\u91CF\u5220\u9664"})})}})})}},86250:function(X,j,e){e.d(j,{Z:function(){return b}});var P=e(67294),i=e(93967),T=e.n(i),A=e(98423),R=e(98065),O=e(53124),E=e(83559),p=e(83262);const c=["wrap","nowrap","wrap-reverse"],t=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],D=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],M=(a,o)=>{const l=o.wrap===!0?"wrap":o.wrap;return{[`${a}-wrap-${l}`]:l&&c.includes(l)}},I=(a,o)=>{const l={};return D.forEach(s=>{l[`${a}-align-${s}`]=o.align===s}),l[`${a}-align-stretch`]=!o.align&&!!o.vertical,l},g=(a,o)=>{const l={};return t.forEach(s=>{l[`${a}-justify-${s}`]=o.justify===s}),l};function F(a,o){return T()(Object.assign(Object.assign(Object.assign({},M(a,o)),I(a,o)),g(a,o)))}var K=F;const _=a=>{const{componentCls:o}=a;return{[o]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},S=a=>{const{componentCls:o}=a;return{[o]:{"&-gap-small":{gap:a.flexGapSM},"&-gap-middle":{gap:a.flexGap},"&-gap-large":{gap:a.flexGapLG}}}},u=a=>{const{componentCls:o}=a,l={};return c.forEach(s=>{l[`${o}-wrap-${s}`]={flexWrap:s}}),l},n=a=>{const{componentCls:o}=a,l={};return D.forEach(s=>{l[`${o}-align-${s}`]={alignItems:s}}),l},x=a=>{const{componentCls:o}=a,l={};return t.forEach(s=>{l[`${o}-justify-${s}`]={justifyContent:s}}),l},m=()=>({});var $=(0,E.I$)("Flex",a=>{const{paddingXS:o,padding:l,paddingLG:s}=a,d=(0,p.IX)(a,{flexGapSM:o,flexGap:l,flexGapLG:s});return[_(d),S(d),u(d),n(d),x(d)]},m,{resetStyle:!1}),N=function(a,o){var l={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&o.indexOf(s)<0&&(l[s]=a[s]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,s=Object.getOwnPropertySymbols(a);d<s.length;d++)o.indexOf(s[d])<0&&Object.prototype.propertyIsEnumerable.call(a,s[d])&&(l[s[d]]=a[s[d]]);return l},b=P.forwardRef((a,o)=>{const{prefixCls:l,rootClassName:s,className:d,style:Y,flex:J,gap:G,children:z,vertical:w=!1,component:Q="div"}=a,B=N(a,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:L,direction:k,getPrefixCls:V}=P.useContext(O.E_),f=V("flex",l),[W,y,C]=$(f),r=w!=null?w:L==null?void 0:L.vertical,h=T()(d,s,L==null?void 0:L.className,f,y,C,K(f,a),{[`${f}-rtl`]:k==="rtl",[`${f}-gap-${G}`]:(0,R.n)(G),[`${f}-vertical`]:r}),v=Object.assign(Object.assign({},L==null?void 0:L.style),Y);return J&&(v.flex=J),G&&!(0,R.n)(G)&&(v.gap=G),W(P.createElement(Q,Object.assign({ref:o,className:h,style:v},(0,A.Z)(B,["justify","wrap","align"])),z))})}}]);
