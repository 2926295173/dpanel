(self.webpackChunk=self.webpackChunk||[]).push([[8615],{23430:function(w,R,e){"use strict";e.d(R,{Z:function(){return u}});var s=e(87462),a=e(67294),C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},d=C,c=e(84089),b=function(g,r){return a.createElement(c.Z,(0,s.Z)({},g,{ref:r,icon:d}))},m=a.forwardRef(b),u=m},52688:function(w,R,e){"use strict";var s=e(1413),a=e(45987),C=e(67294),d=e(73406),c=e(85893),b=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],m=C.forwardRef(function(u,D){var g=u.fieldProps,r=u.unCheckedChildren,n=u.checkedChildren,_=u.proFieldProps,l=(0,a.Z)(u,b);return(0,c.jsx)(d.Z,(0,s.Z)({valueType:"switch",fieldProps:(0,s.Z)({unCheckedChildren:r,checkedChildren:n},g),ref:D,valuePropName:"checked",proFieldProps:_,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},l))});R.Z=m},80821:function(w,R,e){"use strict";e.d(R,{Z:function(){return r}});var s=e(5574),a=e.n(s),C=e(93246),d=e(54006),c=e(31418),b=e(86738),m=e(14726),u=e(83062),D=e(67294),g=e(85893);function r(n){var _=(0,D.useState)(!1),l=a()(_,2),E=l[0],M=l[1],A=c.Z.useApp(),h=(0,d.useIntl)(),O=function(){M(!0),n.action().then(function(t){if(M(!1),typeof n.onSuccess=="function"&&n.onSuccess(t),n.messageSuccess){var p="";typeof n.messageSuccess=="function"?p=n.messageSuccess(t):p=n.messageSuccess,p.indexOf(".")>-1&&(p=h.formatMessage({id:p})),n.asynced?(0,C.Rk)(A,p):(0,C.$h)(A,p)}}).catch(function(t){M(!1),typeof n.onError=="function"&&n.onError(t)})};return n.confirm?(0,g.jsx)(b.Z,{style:{width:500},title:"\u63D0\u793A",description:n.confirm,onConfirm:O,okText:"Yes",cancelText:"No",children:(0,g.jsx)(m.ZP,{disabled:n.disabled,icon:n.icon,loading:E,danger:n.danger,type:n.type,children:n.children})}):(0,g.jsx)(u.Z,{title:n.tips,children:(0,g.jsx)(m.ZP,{disabled:n.disabled,icon:n.icon,loading:E,onClick:O,danger:n.danger,type:n.type,children:n.children})})}},71890:function(w,R,e){"use strict";var s=e(15009),a=e.n(s),C=e(99289),d=e.n(C),c=e(67294);function b(m){var u=m.reqFunction,D=m.interval,g=m.maxPolling,r=m.pollingStatus,n=m.inPath,_=(0,c.useRef)(null),l=0,E=function A(){_.current=window.setTimeout(d()(a()().mark(function h(){var O;return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(l++>=g)){t.next=3;break}return M(),t.abrupt("return");case 3:if(t.prev=3,!(n&&window.location.href.indexOf(n)==-1)){t.next=7;break}return M(),t.abrupt("return");case 7:return t.next=9,u();case 9:O=t.sent,A(),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),M(),console.error("\u8F6E\u8BE2\u53D1\u751F\u9519\u8BEF\uFF1A",t.t0);case 17:case"end":return t.stop()}},h,null,[[3,13]])})),D)},M=function(){console.log("end polling"),_.current&&window.clearTimeout(_.current)};return(0,c.useEffect)(function(){return console.log((r?"start":"waiting")+" polling, max "+g),r&&E(),function(){M()}},[D,g,r]),{endPolling:M}}R.Z=b},54964:function(w,R,e){"use strict";var s=e(78267),a=e.n(s),C=e(67294),d=e(12320),c=e.n(d),b=e(89629),m=e(85893),u=new d.Terminal({convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,cursorStyle:"block",cursorBlink:!0,theme:{foreground:"#dddddd",cursor:"gray"}}),D=new s.FitAddon,g=(0,C.forwardRef)(function(r,n){return(0,C.useEffect)(function(){u.loadAddon(D),u.open(document.getElementById("terminal-container")),D.fit()},[]),(0,C.useImperativeHandle)(n,function(){return{write:function(l){u.write(l)},clear:function(){u.clear()},getTerminal:function(){return u}}}),(0,m.jsx)("div",{id:"terminal-container",style:{width:r.width?r.width:"100%",height:r.height?r.height:"500px"}})});R.Z=g},2742:function(w,R,e){"use strict";e.r(R),e.d(R,{default:function(){return Y}});var s=e(15009),a=e.n(s),C=e(99289),d=e.n(C),c=e(5574),b=e.n(c),m=e(62597),u=e(38345),D=e(97269),g=e(62370),r=e(52688),n=e(54006),_=e(67294),l=e(71230),E=e(15746),M=e(34041),A=e(54964),h=e(80821),O=e(23430),y=e(93162),t=e.n(y),p=e(60335),j=e(71890),P=e(85893),o;function Y(){var J=(0,_.useState)("100"),i=b()(J,2),v=i[0],L=i[1],f=(0,_.useState)(!1),T=b()(f,2),F=T[0],N=T[1],U=(0,n.useParams)(),I=(0,_.useRef)(),$=function(){var S=d()(a()().mark(function W(){var B,V,z,x,H;return a()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(!U.id){G.next=7;break}return G.next=3,(0,m.Tb)({md5:(B=U.id)!==null&&B!==void 0?B:"",lineTotal:parseInt(v)});case 3:H=G.sent,(V=I.current)===null||V===void 0||V.clear(),(z=I.current)===null||z===void 0||z.write(H.data.log),(x=I.current)===null||x===void 0||x.getTerminal().scrollLines(999999);case 7:case"end":return G.stop()}},W)}));return function(){return S.apply(this,arguments)}}(),k=(0,j.Z)({reqFunction:function(){$()},interval:1e3,maxPolling:999,pollingStatus:F,inPath:"tab=log"});return(0,_.useEffect)(function(){$()},[v]),(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)(u.Z,{direction:"column",gutter:[0,10],children:[(0,P.jsx)(D.A,{submitter:!1,layout:"horizontal",onValuesChange:function(W,B){L(B.lineTotal),N(B.autoPull)},children:(0,P.jsxs)(l.Z,{gutter:[20,0],children:[(0,P.jsx)(E.Z,{span:8,children:(0,P.jsx)(g.Z,{name:"lineTotal",initialValue:"100",label:"\u83B7\u53D6\u65E5\u5FD7\u6761\u6570",children:(0,P.jsxs)(M.Z,{defaultValue:"100",children:[(0,P.jsx)(M.Z.Option,{value:"50",children:"50\u6761\u65E5\u5FD7\u6570\u636E"}),(0,P.jsx)(M.Z.Option,{value:"100",children:"100\u6761\u65E5\u5FD7\u6570\u636E"}),(0,P.jsx)(M.Z.Option,{value:"200",children:"200\u6761\u65E5\u5FD7\u6570\u636E"}),(0,P.jsx)(M.Z.Option,{value:"500",children:"500\u6761\u65E5\u5FD7\u6570\u636E"}),(0,P.jsx)(M.Z.Option,{value:"1000",children:"1000\u6761\u65E5\u5FD7\u6570\u636E"})]})})}),(0,P.jsx)(E.Z,{children:(0,P.jsx)(r.Z,{label:"\u81EA\u52A8\u5237\u65B0",name:"autoPull"})}),(0,P.jsx)(E.Z,{children:(0,P.jsx)(h.Z,{icon:(0,P.jsx)(O.Z,{}),action:function(){var W;return(0,m.XH)({md5:(W=U.id)!==null&&W!==void 0?W:"",lineTotal:parseInt(v)})},onSuccess:function(W){var B;(0,p.jV)({md5:(B=U.id)!==null&&B!==void 0?B:""}).then(function(V){var z=new Blob([W],{type:"text/plain"});(0,y.saveAs)(z,V.data.info.Name.replaceAll("/","")+"_"+new Date().toLocaleDateString()+".log")})},messageSuccess:"\u5BFC\u51FA\u6210\u529F",children:"\u4E0B\u8F7D\u65E5\u5FD7"})})]})}),(0,P.jsx)(A.Z,{ref:I,height:"580px"})]})})}},62597:function(w,R,e){"use strict";e.d(R,{$G:function(){return b},Ct:function(){return M},Tb:function(){return g},XH:function(){return n},cl:function(){return u},iE:function(){return l},lK:function(){return y},xb:function(){return h}});var s=e(15009),a=e.n(s),C=e(99289),d=e.n(C),c=e(54006);function b(p){return m.apply(this,arguments)}function m(){return m=d()(a()().mark(function p(j){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,c.request)("/api/app/site/create-by-image",{method:"POST",data:j}));case 1:case"end":return o.stop()}},p)})),m.apply(this,arguments)}function u(p){return D.apply(this,arguments)}function D(){return D=d()(a()().mark(function p(j){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,c.request)("/api/app/site/get-list",{method:"POST",data:j}));case 1:case"end":return o.stop()}},p)})),D.apply(this,arguments)}function g(p){return r.apply(this,arguments)}function r(){return r=d()(a()().mark(function p(j){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return j.download=!1,o.next=3,(0,c.request)("/api/app/log/run",{method:"POST",data:j});case 3:return o.abrupt("return",o.sent);case 4:case"end":return o.stop()}},p)})),r.apply(this,arguments)}function n(p){return _.apply(this,arguments)}function _(){return _=d()(a()().mark(function p(j){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return j.download=!0,o.next=3,(0,c.request)("/api/app/log/run",{method:"POST",data:j,responseType:"blob"});case 3:return o.abrupt("return",o.sent);case 4:case"end":return o.stop()}},p)})),_.apply(this,arguments)}function l(p){return E.apply(this,arguments)}function E(){return E=d()(a()().mark(function p(j){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,c.request)("/api/app/site/get-detail",{data:j,method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},p)})),E.apply(this,arguments)}function M(p){return A.apply(this,arguments)}function A(){return A=d()(a()().mark(function p(j){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,c.request)("/api/app/container/delete",{method:"POST",data:j}));case 1:case"end":return o.stop()}},p)})),A.apply(this,arguments)}function h(p){return O.apply(this,arguments)}function O(){return O=d()(a()().mark(function p(j){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,c.request)("/api/app/site/delete",{method:"POST",data:j}));case 1:case"end":return o.stop()}},p)})),O.apply(this,arguments)}function y(p){return t.apply(this,arguments)}function t(){return t=d()(a()().mark(function p(j){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,c.request)("/api/app/site/update-title",{method:"POST",data:j});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},p)})),t.apply(this,arguments)}},60335:function(w,R,e){"use strict";e.d(R,{IE:function(){return u},IW:function(){return b},KK:function(){return l},LJ:function(){return M},eE:function(){return n},jV:function(){return g}});var s=e(15009),a=e.n(s),C=e(99289),d=e.n(C),c=e(54006);function b(h){return m.apply(this,arguments)}function m(){return m=d()(a()().mark(function h(O){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.request)("/api/app/container/status",{method:"POST",data:O}));case 1:case"end":return t.stop()}},h)})),m.apply(this,arguments)}function u(h){return D.apply(this,arguments)}function D(){return D=d()(a()().mark(function h(O){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.request)("/api/app/container/get-list",{data:O,method:"POST"}));case 1:case"end":return t.stop()}},h)})),D.apply(this,arguments)}function g(h){return r.apply(this,arguments)}function r(){return r=d()(a()().mark(function h(O){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.request)("/api/app/container/get-detail",{data:O,method:"POST"}));case 1:case"end":return t.stop()}},h)})),r.apply(this,arguments)}function n(h){return _.apply(this,arguments)}function _(){return _=d()(a()().mark(function h(O){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.request)("/api/app/container/update",{data:O,method:"POST"}));case 1:case"end":return t.stop()}},h)})),_.apply(this,arguments)}function l(){return E.apply(this,arguments)}function E(){return E=d()(a()().mark(function h(){return a()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,c.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return y.stop()}},h)})),E.apply(this,arguments)}function M(h){return A.apply(this,arguments)}function A(){return A=d()(a()().mark(function h(O){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.request)("/api/app/container/export",{method:"POST",data:O,responseType:"blob"}));case 1:case"end":return t.stop()}},h)})),A.apply(this,arguments)}},86738:function(w,R,e){"use strict";e.d(R,{Z:function(){return J}});var s=e(67294),a=e(21640),C=e(93967),d=e.n(C),c=e(21770),b=e(98423),m=e(53124),u=e(55241),D=e(86743),g=e(81643),r=e(14726),n=e(33671),_=e(10110),l=e(24457),E=e(66330),M=e(83559);const A=i=>{const{componentCls:v,iconCls:L,antCls:f,zIndexPopup:T,colorText:F,colorWarning:N,marginXXS:U,marginXS:I,fontSize:$,fontWeightStrong:k,colorTextHeading:S}=i;return{[v]:{zIndex:T,[`&${f}-popover`]:{fontSize:$},[`${v}-message`]:{marginBottom:I,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${v}-message-icon ${L}`]:{color:N,fontSize:$,lineHeight:1,marginInlineEnd:I},[`${v}-title`]:{fontWeight:k,color:S,"&:only-child":{fontWeight:"normal"}},[`${v}-description`]:{marginTop:U,color:F}},[`${v}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:I}}}}},h=i=>{const{zIndexPopupBase:v}=i;return{zIndexPopup:v+60}};var O=(0,M.I$)("Popconfirm",i=>A(i),h,{resetStyle:!1}),y=function(i,v){var L={};for(var f in i)Object.prototype.hasOwnProperty.call(i,f)&&v.indexOf(f)<0&&(L[f]=i[f]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var T=0,f=Object.getOwnPropertySymbols(i);T<f.length;T++)v.indexOf(f[T])<0&&Object.prototype.propertyIsEnumerable.call(i,f[T])&&(L[f[T]]=i[f[T]]);return L};const t=i=>{const{prefixCls:v,okButtonProps:L,cancelButtonProps:f,title:T,description:F,cancelText:N,okText:U,okType:I="primary",icon:$=s.createElement(a.Z,null),showCancel:k=!0,close:S,onConfirm:W,onCancel:B,onPopupClick:V}=i,{getPrefixCls:z}=s.useContext(m.E_),[x]=(0,_.Z)("Popconfirm",l.Z.Popconfirm),H=(0,g.Z)(T),X=(0,g.Z)(F);return s.createElement("div",{className:`${v}-inner-content`,onClick:V},s.createElement("div",{className:`${v}-message`},$&&s.createElement("span",{className:`${v}-message-icon`},$),s.createElement("div",{className:`${v}-message-text`},H&&s.createElement("div",{className:`${v}-title`},H),X&&s.createElement("div",{className:`${v}-description`},X))),s.createElement("div",{className:`${v}-buttons`},k&&s.createElement(r.ZP,Object.assign({onClick:B,size:"small"},f),N||(x==null?void 0:x.cancelText)),s.createElement(D.Z,{buttonProps:Object.assign(Object.assign({size:"small"},(0,n.nx)(I)),L),actionFn:W,close:S,prefixCls:z("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},U||(x==null?void 0:x.okText))))};var j=i=>{const{prefixCls:v,placement:L,className:f,style:T}=i,F=y(i,["prefixCls","placement","className","style"]),{getPrefixCls:N}=s.useContext(m.E_),U=N("popconfirm",v),[I]=O(U);return I(s.createElement(E.ZP,{placement:L,className:d()(U,f),style:T,content:s.createElement(t,Object.assign({prefixCls:U},F))}))},P=function(i,v){var L={};for(var f in i)Object.prototype.hasOwnProperty.call(i,f)&&v.indexOf(f)<0&&(L[f]=i[f]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var T=0,f=Object.getOwnPropertySymbols(i);T<f.length;T++)v.indexOf(f[T])<0&&Object.prototype.propertyIsEnumerable.call(i,f[T])&&(L[f[T]]=i[f[T]]);return L};const Y=s.forwardRef((i,v)=>{var L,f;const{prefixCls:T,placement:F="top",trigger:N="click",okType:U="primary",icon:I=s.createElement(a.Z,null),children:$,overlayClassName:k,onOpenChange:S,onVisibleChange:W}=i,B=P(i,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),{getPrefixCls:V}=s.useContext(m.E_),[z,x]=(0,c.Z)(!1,{value:(L=i.open)!==null&&L!==void 0?L:i.visible,defaultValue:(f=i.defaultOpen)!==null&&f!==void 0?f:i.defaultVisible}),H=(K,Z)=>{x(K,!0),W==null||W(K),S==null||S(K,Z)},X=K=>{H(!1,K)},G=K=>{var Z;return(Z=i.onConfirm)===null||Z===void 0?void 0:Z.call(void 0,K)},q=K=>{var Z;H(!1,K),(Z=i.onCancel)===null||Z===void 0||Z.call(void 0,K)},ee=(K,Z)=>{const{disabled:re=!1}=i;re||H(K,Z)},Q=V("popconfirm",T),ne=d()(Q,k),[te]=O(Q);return te(s.createElement(u.Z,Object.assign({},(0,b.Z)(B,["title"]),{trigger:N,placement:F,onOpenChange:ee,open:z,ref:v,overlayClassName:ne,content:s.createElement(t,Object.assign({okType:U,icon:I},i,{prefixCls:Q,close:X,onConfirm:G,onCancel:q})),"data-popover-inject":!0}),$))});Y._InternalPanelDoNotUseOrYouWillBeFired=j;var J=Y},93162:function(w,R,e){var s,a,C;(function(d,c){a=[],s=c,C=typeof s=="function"?s.apply(R,a):s,C!==void 0&&(w.exports=C)})(this,function(){"use strict";function d(r,n){return typeof n=="undefined"?n={autoBom:!1}:typeof n!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r}function c(r,n,_){var l=new XMLHttpRequest;l.open("GET",r),l.responseType="blob",l.onload=function(){g(l.response,n,_)},l.onerror=function(){console.error("could not download file")},l.send()}function b(r){var n=new XMLHttpRequest;n.open("HEAD",r,!1);try{n.send()}catch(_){}return 200<=n.status&&299>=n.status}function m(r){try{r.dispatchEvent(new MouseEvent("click"))}catch(_){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(n)}}var u=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof e.g=="object"&&e.g.global===e.g?e.g:void 0,D=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=u.saveAs||(typeof window!="object"||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!D?function(r,n,_){var l=u.URL||u.webkitURL,E=document.createElement("a");n=n||r.name||"download",E.download=n,E.rel="noopener",typeof r=="string"?(E.href=r,E.origin===location.origin?m(E):b(E.href)?c(r,n,_):m(E,E.target="_blank")):(E.href=l.createObjectURL(r),setTimeout(function(){l.revokeObjectURL(E.href)},4e4),setTimeout(function(){m(E)},0))}:"msSaveOrOpenBlob"in navigator?function(r,n,_){if(n=n||r.name||"download",typeof r!="string")navigator.msSaveOrOpenBlob(d(r,_),n);else if(b(r))c(r,n,_);else{var l=document.createElement("a");l.href=r,l.target="_blank",setTimeout(function(){m(l)})}}:function(r,n,_,l){if(l=l||open("","_blank"),l&&(l.document.title=l.document.body.innerText="downloading..."),typeof r=="string")return c(r,n,_);var E=r.type==="application/octet-stream",M=/constructor/i.test(u.HTMLElement)||u.safari,A=/CriOS\/[\d]+/.test(navigator.userAgent);if((A||E&&M||D)&&typeof FileReader!="undefined"){var h=new FileReader;h.onloadend=function(){var t=h.result;t=A?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),l?l.location.href=t:location=t,l=null},h.readAsDataURL(r)}else{var O=u.URL||u.webkitURL,y=O.createObjectURL(r);l?l.location=y:location.href=y,l=null,setTimeout(function(){O.revokeObjectURL(y)},4e4)}});u.saveAs=g.saveAs=g,w.exports=g})}}]);
