!(function(){var ne=Object.defineProperty,re=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var Q=(j,T,i)=>T in j?ne(j,T,{enumerable:!0,configurable:!0,writable:!0,value:i}):j[T]=i,q=(j,T)=>{for(var i in T||(T={}))se.call(T,i)&&Q(j,i,T[i]);if(J)for(var i of J(T))ae.call(T,i)&&Q(j,i,T[i]);return j},ee=(j,T)=>re(j,ie(T));(self.webpackChunk=self.webpackChunk||[]).push([[3428],{23430:function(j,T,i){"use strict";i.d(T,{Z:function(){return w}});var R=i(87462),l=i(67294),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},d=L,h=i(84089),m=function(n,s){return l.createElement(h.Z,(0,R.Z)({},n,{ref:s,icon:d}))},P=l.forwardRef(m),w=P},5966:function(j,T,i){"use strict";var R=i(97685),l=i(1413),L=i(45987),d=i(21770),h=i(21054),m=i(55241),P=i(98423),w=i(67294),t=i(40284),n=i(85893),s=["fieldProps","proFieldProps"],r=["fieldProps","proFieldProps"],o="text",e=function(g){var v=g.fieldProps,M=g.proFieldProps,y=(0,L.Z)(g,s);return(0,n.jsx)(t.Z,(0,l.Z)({valueType:o,fieldProps:v,filedConfig:{valueType:o},proFieldProps:M},y))},a=function(g){var v=(0,d.Z)(g.open||!1,{value:g.open,onChange:g.onOpenChange}),M=(0,R.Z)(v,2),y=M[0],C=M[1];return(0,n.jsx)(h.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(E){var c,u=E.getFieldValue(g.name||[]);return(0,n.jsx)(m.Z,(0,l.Z)((0,l.Z)({getPopupContainer:function(_){return _&&_.parentNode?_.parentNode:_},onOpenChange:function(_){return C(_)},content:(0,n.jsxs)("div",{style:{padding:"4px 0"},children:[(c=g.statusRender)===null||c===void 0?void 0:c.call(g,u),g.strengthText?(0,n.jsx)("div",{style:{marginTop:10},children:(0,n.jsx)("span",{children:g.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},g.popoverProps),{},{open:y,children:g.children}))}})},f=function(g){var v=g.fieldProps,M=g.proFieldProps,y=(0,L.Z)(g,r),C=(0,w.useState)(!1),O=(0,R.Z)(C,2),E=O[0],c=O[1];return v!=null&&v.statusRender&&y.name?(0,n.jsx)(a,{name:y.name,statusRender:v==null?void 0:v.statusRender,popoverProps:v==null?void 0:v.popoverProps,strengthText:v==null?void 0:v.strengthText,open:E,onOpenChange:c,children:(0,n.jsx)("div",{children:(0,n.jsx)(t.Z,(0,l.Z)({valueType:"password",fieldProps:(0,l.Z)((0,l.Z)({},(0,P.Z)(v,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(A){var _;v==null||(_=v.onBlur)===null||_===void 0||_.call(v,A),c(!1)},onClick:function(A){var _;v==null||(_=v.onClick)===null||_===void 0||_.call(v,A),c(!0)}}),proFieldProps:M,filedConfig:{valueType:o}},y))})}):(0,n.jsx)(t.Z,(0,l.Z)({valueType:"password",fieldProps:v,proFieldProps:M,filedConfig:{valueType:o}},y))},p=e;p.Password=f,p.displayName="ProFormComponent",T.Z=p},80821:function(j,T,i){"use strict";i.d(T,{Z:function(){return o}});var R=i(97857),l=i.n(R),L=i(5574),d=i.n(L),h=i(24963),m=i(36146),P=i(86738),w=i(83062),t=i(96074),n=i(83622),s=i(67294),r=i(85893);function o(e){var a=(0,s.useState)(!1),f=d()(a,2),p=f[0],D=f[1],g=(0,s.useContext)(h.Z),v=g.message,M=function(){D(!0);var F=e.action();F instanceof Promise?F.then(function(N){if(D(!1),N){typeof e.onSuccess=="function"&&e.onSuccess(N);var K=m.FD.format("finish");v.success(K)}}).catch(function(N){D(!1),typeof e.onError=="function"&&e.onError(N)}):D(!1)};if(e.confirmProps){var y,C,O,E,c,u,A,_=e.confirmProps.description;return e.confirmProps.showCommonConfirm&&(_=m.FD.format("confirm.title")),e.confirmProps.showCommonDisabled&&(_=m.FD.format("confirm.disable")),(0,r.jsx)(P.Z,l()(l()({},e.confirmProps),{},{style:{width:500},title:(y=e.confirmProps)!==null&&y!==void 0&&y.title?(C=e.confirmProps)===null||C===void 0?void 0:C.title:m.FD.format("title.tip"),description:_,onConfirm:M,okText:"Yes",cancelText:"No",children:(0,r.jsxs)(w.Z,{title:e.tips,children:[e.showDivider&&(0,r.jsx)(t.Z,{type:"vertical",style:{marginRight:15}}),(0,r.jsx)(n.ZP,l()(l()({},e.buttonProps),{},{ghost:((O=e.buttonProps)===null||O===void 0?void 0:O.ghost)&&((E=e.buttonProps)===null||E===void 0?void 0:E.type)!=="link",style:(c=e.buttonProps)!==null&&c!==void 0&&c.ghost?l()(l()({},e.buttonProps.style),{},{padding:0,width:"auto"}):l()({},(u=e.buttonProps)===null||u===void 0?void 0:u.style),icon:!e.children&&p||(A=e.buttonProps)===null||A===void 0?void 0:A.icon,loading:p,children:e.children}))]})}))}else{var H,Y,b,B,Z;return(0,r.jsxs)(w.Z,{title:e.tips,children:[e.showDivider&&(0,r.jsx)(t.Z,{type:"vertical",style:{marginRight:15}}),(0,r.jsx)(n.ZP,l()(l()({},e.buttonProps),{},{ghost:((H=e.buttonProps)===null||H===void 0?void 0:H.ghost)&&((Y=e.buttonProps)===null||Y===void 0?void 0:Y.type)!=="link",style:(b=e.buttonProps)!==null&&b!==void 0&&b.ghost?l()(l()({},e.buttonProps.style),{},{padding:0,width:"auto"}):l()({},(B=e.buttonProps)===null||B===void 0?void 0:B.style),icon:!e.children&&p||(Z=e.buttonProps)===null||Z===void 0?void 0:Z.icon,loading:p,onClick:M,children:e.children}))]})}}},81146:function(j,T,i){"use strict";var R=i(97857),l=i.n(R),L=i(15009),d=i.n(L),h=i(99289),m=i.n(h),P=i(67294),w=i(97269),t=i(62370),n=i(5966),s=i(97462),r=i(82346),o=i(71230),e=i(15746),a=i(34041),f=i(83622),p=i(84567),D=i(42075),g=i(80821),v=i(23430),M=i(93162),y=i.n(M),C=i(78267),O=i.n(C),E=i(75458),c=i.n(E),u=i(12323),A=i(4244),_=i.n(A),H=i(24078),Y=i(36146),b=i(85893),B,Z,k,F={decorations:{matchBackground:"",matchBorder:"#FFFF00",activeMatchBackground:"#FFFF0066",matchOverviewRuler:"",activeMatchColorOverviewRuler:""}},N=(0,P.forwardRef)(function(K,te){var z=(0,P.useRef)(),G=(0,r.useModel)("subscriber"),x=new Y.Uo("components.containerLog");(0,P.useImperativeHandle)(te,function(){return{fit:function(){B.clear(),k.fit()},start:function(){return m()(d()().mark(function W(){return d()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,X({lineTotal:500});case 2:case"end":return U.stop()}},W)}))()},close:function(){G.progress.close(K.id)}}});function X(S){return $.apply(this,arguments)}function $(){return $=m()(d()().mark(function S(W){return d()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:G.progress.close(K.id),B.clear(),W.download=!1,K.request(W);case 4:case"end":return U.stop()}},S)})),$.apply(this,arguments)}return(0,P.useEffect)(function(){return window.addEventListener("resize",function(){k.fit()}),B=new A.Terminal(l()(l()({},u.X),{},{fontSize:12,lineHeight:1.2,allowProposedApi:!0})),k=new C.FitAddon,Z=new E.SearchAddon({}),B.loadAddon(k),B.loadAddon(Z),B.open(document.getElementById("terminal-container-log")),k.fit(),G.addDataHandler(K.id,function(S){B.write(S.data)}),function(){B.clear(),B.reset(),G.progress.close(K.id)}},[]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w.A,{submitter:!1,layout:"horizontal",onFinish:function(W){var I;X({id:K.id,lineTotal:parseInt(W.lineTotal),showTime:(I=W.showTime)!==null&&I!==void 0?I:!1})},formRef:z,children:(0,b.jsxs)(o.Z,{gutter:[10,0],children:[(0,b.jsx)(e.Z,{span:8,children:(0,b.jsx)(t.Z,{name:"lineTotal",initialValue:"500",label:x.format("formLineTotal"),children:(0,b.jsxs)(a.Z,{defaultValue:"500",onChange:function(W){var I;(I=z.current)===null||I===void 0||I.submit()},children:[(0,b.jsx)(a.Z.Option,{value:"100",children:x.format("formLineTotalOption",{number:"100"})}),(0,b.jsx)(a.Z.Option,{value:"200",children:x.format("formLineTotalOption",{number:"200"})}),(0,b.jsx)(a.Z.Option,{value:"500",children:x.format("formLineTotalOption",{number:"500"})}),(0,b.jsx)(a.Z.Option,{value:"1000",children:x.format("formLineTotalOption",{number:"1000"})}),(0,b.jsx)(a.Z.Option,{value:"-1",children:x.format("formLineTotalOptionAll")})]})})}),(0,b.jsx)(e.Z,{children:(0,b.jsx)(f.ZP,{onClick:function(){B.clear()},children:x.format("clearButton")})}),(0,b.jsx)(e.Z,{children:(0,b.jsx)(t.Z,{name:"showTime",valuePropName:"checked",children:(0,b.jsx)(p.Z,{onChange:function(W){var I;(I=z.current)===null||I===void 0||I.submit()},children:x.format("formShowTime")})})}),(0,b.jsx)(e.Z,{children:(0,b.jsx)(n.Z,{label:x.format("formKeywork"),name:"keywork",fieldProps:{onPressEnter:function(){var W;Z.findNext((W=z.current)===null||W===void 0?void 0:W.getFieldValue("keywork"),F)},onChange:function(W){Z.findNext(W.target.value,F)}},placeholder:x.format("formKeyworkEmpty")})}),(0,b.jsx)(e.Z,{children:(0,b.jsx)(s.Z,{name:["keywork"],children:function(W){var I=W.keywork;return(0,b.jsxs)(D.Z,{size:10,children:[(0,b.jsx)(f.ZP,{onClick:function(){Z.findNext(I,F)},children:x.format("formKeyworkNext")},"next"),(0,b.jsx)(f.ZP,{onClick:function(){Z.findPrevious(I,F)},children:x.format("formKeyworkPrev")},"prev")]})}})}),(0,b.jsx)(e.Z,{children:(0,b.jsx)(g.Z,{buttonProps:{icon:(0,b.jsx)(v.Z,{})},action:m()(d()().mark(function S(){var W,I,U;return d()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(!K.download){V.next=5;break}return V.next=3,K.download({lineTotal:parseInt((W=z.current)===null||W===void 0?void 0:W.getFieldValue("lineTotal")),showTime:(I=z.current)===null||I===void 0?void 0:I.getFieldValue("showTime")});case 3:U=V.sent,(0,M.saveAs)(U.data,U.name);case 5:case"end":return V.stop()}},S)})),children:x.format("downloadButton")})})]})}),(0,b.jsx)("div",{style:{marginTop:"20px",height:K.showInDrawer?"75vh":"85vh"},id:"terminal-container-log"})]})});T.Z=N},12323:function(j,T,i){"use strict";i.d(T,{X:function(){return R},n:function(){return l}});var R={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},l=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},24963:function(j,T,i){"use strict";var R=i(67294),l=(0,R.createContext)({});T.Z=l},15141:function(j,T,i){"use strict";i.r(T),i.d(T,{default:function(){return o}});var R=i(15009),l=i.n(R),L=i(99289),d=i.n(L),h=i(81146),m=i(13822),P=i(62597),w=i(5251),t=i(38345),n=i(82346),s=i(67294),r=i(85893);function o(){var e=(0,n.useParams)(),a=(0,s.useRef)();return(0,s.useEffect)(function(){var f;return setTimeout(function(){if(e.id){var p,D;(p=a.current)===null||p===void 0||p.start(),(D=a.current)===null||D===void 0||D.fit()}},1e3),window.document.title="".concat((0,w.fi)((f=e.id)!==null&&f!==void 0?f:"","/")," - log"),function(){var p;(p=a.current)===null||p===void 0||p.close()}},[]),e.id&&(0,r.jsx)(t.Z,{children:(0,r.jsx)(h.Z,{id:"container:log:".concat(e.id),ref:a,request:function(){var f=d()(l()().mark(function p(D){return l()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,P.Tb)({id:e.id,lineTotal:D.lineTotal,download:D.download,showTime:D.showTime});case 2:case"end":return v.stop()}},p)}));return function(p){return f.apply(this,arguments)}}(),download:function(){var f=d()(l()().mark(function p(D){var g,v,M;return l()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,P.XH)({id:e.id,lineTotal:D.lineTotal,showTime:D.showTime});case 2:return v=C.sent,C.next=5,(0,m.jV)({md5:(g=e.id)!==null&&g!==void 0?g:""});case 5:return M=C.sent,C.abrupt("return",{data:new Blob([v],{type:"text/plain"}),name:M.data.info.Name.replaceAll("/","")+"_"+new Date().toLocaleDateString()+".log"});case 7:case"end":return C.stop()}},p)}));return function(p){return f.apply(this,arguments)}}()})})}},13822:function(j,T,i){"use strict";i.d(T,{IE:function(){return w},IW:function(){return m},KK:function(){return e},LJ:function(){return f},RF:function(){return v},Re:function(){return D},aF:function(){return y},eE:function(){return r},jV:function(){return n}});var R=i(15009),l=i.n(R),L=i(99289),d=i.n(L),h=i(82346);function m(O){return P.apply(this,arguments)}function P(){return P=d()(l()().mark(function O(E){return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,h.request)("/api/app/container/status",{method:"POST",data:E}));case 1:case"end":return u.stop()}},O)})),P.apply(this,arguments)}function w(O){return t.apply(this,arguments)}function t(){return t=d()(l()().mark(function O(E){return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,h.request)("/api/app/container/get-list",{data:E,method:"POST"}));case 1:case"end":return u.stop()}},O)})),t.apply(this,arguments)}function n(O){return s.apply(this,arguments)}function s(){return s=d()(l()().mark(function O(E){return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,h.request)("/api/app/container/get-detail",{data:E,method:"POST"}));case 1:case"end":return u.stop()}},O)})),s.apply(this,arguments)}function r(O){return o.apply(this,arguments)}function o(){return o=d()(l()().mark(function O(E){return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,h.request)("/api/app/container/update",{data:E,method:"POST"}));case 1:case"end":return u.stop()}},O)})),o.apply(this,arguments)}function e(){return a.apply(this,arguments)}function a(){return a=d()(l()().mark(function O(){return l()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,h.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return c.stop()}},O)})),a.apply(this,arguments)}function f(O){return p.apply(this,arguments)}function p(){return p=d()(l()().mark(function O(E){return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,h.request)("/api/app/container/export",{method:"POST",data:E,responseType:"blob"}));case 1:case"end":return u.stop()}},O)})),p.apply(this,arguments)}function D(O){return g.apply(this,arguments)}function g(){return g=d()(l()().mark(function O(E){return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,h.request)("/api/app/container/commit",{method:"POST",data:E}));case 1:case"end":return u.stop()}},O)})),g.apply(this,arguments)}function v(O){return M.apply(this,arguments)}function M(){return M=d()(l()().mark(function O(E){return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,h.request)("/api/app/container/upgrade",{method:"POST",data:E}));case 1:case"end":return u.stop()}},O)})),M.apply(this,arguments)}function y(O){return C.apply(this,arguments)}function C(){return C=d()(l()().mark(function O(E){return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,h.request)("/api/app/container/copy",{method:"POST",data:E}));case 1:case"end":return u.stop()}},O)})),C.apply(this,arguments)}},62597:function(j,T,i){"use strict";i.d(T,{$G:function(){return t},Ct:function(){return v},Tb:function(){return e},XH:function(){return f},cl:function(){return r},fp:function(){return s},fu:function(){return P},iE:function(){return D},nL:function(){return w},xb:function(){return y},ze:function(){return O}});var R=i(15009),l=i.n(R),L=i(99289),d=i.n(L),h=i(82346),m="com.dpanel.container.description",P="com.dpanel.container.title",w={Nanosecond:1,Microsecond:1e3,Millisecond:1e3*1e3,Second:1e3*1e3*1e3,Minute:60*1e3*1e3*1e3,Hour:3600*1e3*1e3*1e3};function t(c){return n.apply(this,arguments)}function n(){return n=d()(l()().mark(function c(u){return l()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,h.request)("/api/app/site/create-by-image",{method:"POST",data:u}));case 1:case"end":return _.stop()}},c)})),n.apply(this,arguments)}var s={EnvValueRuleRequired:1,EnvValueRuleDisabled:2,EnvValueRuleInEnvFile:4,EnvValueTypeNumber:1024,EnvValueTypeText:2048,EnvValueTypeSelect:4096,EnvValueTypeSelectMultiple:8192,EnvValueTypeOnePanel:16384};function r(c){return o.apply(this,arguments)}function o(){return o=d()(l()().mark(function c(u){return l()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,h.request)("/api/app/site/get-list",{method:"POST",data:u}));case 1:case"end":return _.stop()}},c)})),o.apply(this,arguments)}function e(c){return a.apply(this,arguments)}function a(){return a=d()(l()().mark(function c(u){return l()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return u.download=!1,_.next=3,(0,h.request)("/api/app/log/run",{method:"POST",data:u});case 3:return _.abrupt("return",_.sent);case 4:case"end":return _.stop()}},c)})),a.apply(this,arguments)}function f(c){return p.apply(this,arguments)}function p(){return p=d()(l()().mark(function c(u){return l()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return u.download=!0,_.next=3,(0,h.request)("/api/app/log/run",{method:"POST",data:u,responseType:"blob"});case 3:return _.abrupt("return",_.sent);case 4:case"end":return _.stop()}},c)})),p.apply(this,arguments)}function D(c){return g.apply(this,arguments)}function g(){return g=d()(l()().mark(function c(u){return l()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return u.id=String(u.id),_.next=3,(0,h.request)("/api/app/site/get-detail",{data:u,method:"POST"});case 3:return _.abrupt("return",_.sent);case 4:case"end":return _.stop()}},c)})),g.apply(this,arguments)}function v(c){return M.apply(this,arguments)}function M(){return M=d()(l()().mark(function c(u){return l()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,h.request)("/api/app/container/delete",{method:"POST",data:u}));case 1:case"end":return _.stop()}},c)})),M.apply(this,arguments)}function y(c){return C.apply(this,arguments)}function C(){return C=d()(l()().mark(function c(u){return l()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,h.request)("/api/app/site/delete",{method:"POST",data:u}));case 1:case"end":return _.stop()}},c)})),C.apply(this,arguments)}function O(c){return E.apply(this,arguments)}function E(){return E=d()(l()().mark(function c(u){return l()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,h.request)("/api/app/container/ignore",{method:"POST",data:u}));case 1:case"end":return _.stop()}},c)})),E.apply(this,arguments)}},75458:function(j){(function(T,i){j.exports=i()})(self,()=>(()=>{"use strict";var T={345:(L,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.runAndSubscribe=d.forwardEvent=d.EventEmitter=void 0,d.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=h=>(this._listeners.push(h),{dispose:()=>{if(!this._disposed){for(let m=0;m<this._listeners.length;m++)if(this._listeners[m]===h)return void this._listeners.splice(m,1)}}})),this._event}fire(h,m){const P=[];for(let w=0;w<this._listeners.length;w++)P.push(this._listeners[w]);for(let w=0;w<P.length;w++)P[w].call(void 0,h,m)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},d.forwardEvent=function(h,m){return h(P=>m.fire(P))},d.runAndSubscribe=function(h,m){return m(void 0),h(P=>m(P))}},859:(L,d)=>{function h(m){for(const P of m)P.dispose();m.length=0}Object.defineProperty(d,"__esModule",{value:!0}),d.getDisposeArrayDisposable=d.disposeArray=d.toDisposable=d.MutableDisposable=d.Disposable=void 0,d.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const m of this._disposables)m.dispose();this._disposables.length=0}register(m){return this._disposables.push(m),m}unregister(m){const P=this._disposables.indexOf(m);P!==-1&&this._disposables.splice(P,1)}},d.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(m){var P;this._isDisposed||m===this._value||((P=this._value)==null||P.dispose(),this._value=m)}clear(){this.value=void 0}dispose(){var m;this._isDisposed=!0,(m=this._value)==null||m.dispose(),this._value=void 0}},d.toDisposable=function(m){return{dispose:m}},d.disposeArray=h,d.getDisposeArrayDisposable=function(m){return{dispose:()=>h(m)}}}},i={};function R(L){var d=i[L];if(d!==void 0)return d.exports;var h=i[L]={exports:{}};return T[L](h,h.exports,R),h.exports}var l={};return(()=>{var L=l;Object.defineProperty(L,"__esModule",{value:!0}),L.SearchAddon=void 0;const d=R(345),h=R(859),m=" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?";class P extends h.Disposable{constructor(t){var n;super(),this._highlightedLines=new Set,this._highlightDecorations=[],this._selectedDecoration=this.register(new h.MutableDisposable),this._linesCacheTimeoutId=0,this._linesCacheDisposables=new h.MutableDisposable,this._onDidChangeResults=this.register(new d.EventEmitter),this.onDidChangeResults=this._onDidChangeResults.event,this._highlightLimit=(n=t==null?void 0:t.highlightLimit)!=null?n:1e3}activate(t){this._terminal=t,this.register(this._terminal.onWriteParsed(()=>this._updateMatches())),this.register(this._terminal.onResize(()=>this._updateMatches())),this.register((0,h.toDisposable)(()=>this.clearDecorations()))}_updateMatches(){var t;this._highlightTimeout&&window.clearTimeout(this._highlightTimeout),this._cachedSearchTerm&&((t=this._lastSearchOptions)!=null&&t.decorations)&&(this._highlightTimeout=setTimeout(()=>{const n=this._cachedSearchTerm;this._cachedSearchTerm=void 0,this.findPrevious(n,ee(q({},this._lastSearchOptions),{incremental:!0,noScroll:!0}))},200))}clearDecorations(t){this._selectedDecoration.clear(),(0,h.disposeArray)(this._highlightDecorations),this._highlightDecorations=[],this._highlightedLines.clear(),t||(this._cachedSearchTerm=void 0)}clearActiveDecoration(){this._selectedDecoration.clear()}findNext(t,n){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");const s=!this._lastSearchOptions||this._didOptionsChange(this._lastSearchOptions,n);this._lastSearchOptions=n,n!=null&&n.decorations&&(this._cachedSearchTerm===void 0||t!==this._cachedSearchTerm||s)&&this._highlightAllMatches(t,n);const r=this._findNextAndSelect(t,n);return this._fireResults(n),this._cachedSearchTerm=t,r}_highlightAllMatches(t,n){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!t||t.length===0)return void this.clearDecorations();n=n||{},this.clearDecorations(!0);const s=[];let r,o=this._find(t,0,0,n);for(;o&&((r==null?void 0:r.row)!==o.row||(r==null?void 0:r.col)!==o.col)&&!(s.length>=this._highlightLimit);)r=o,s.push(r),o=this._find(t,r.col+r.term.length>=this._terminal.cols?r.row+1:r.row,r.col+r.term.length>=this._terminal.cols?0:r.col+1,n);for(const e of s){const a=this._createResultDecoration(e,n.decorations);a&&(this._highlightedLines.add(a.marker.line),this._highlightDecorations.push({decoration:a,match:e,dispose(){a.dispose()}}))}}_find(t,n,s,r){var a;if(!this._terminal||!t||t.length===0)return(a=this._terminal)==null||a.clearSelection(),void this.clearDecorations();if(s>this._terminal.cols)throw new Error(`Invalid col: ${s} to search in terminal of ${this._terminal.cols} cols`);let o;this._initLinesCache();const e={startRow:n,startCol:s};if(o=this._findInLine(t,e,r),!o)for(let f=n+1;f<this._terminal.buffer.active.baseY+this._terminal.rows&&(e.startRow=f,e.startCol=0,o=this._findInLine(t,e,r),!o);f++);return o}_findNextAndSelect(t,n){var f;if(!this._terminal||!t||t.length===0)return(f=this._terminal)==null||f.clearSelection(),this.clearDecorations(),!1;const s=this._terminal.getSelectionPosition();this._terminal.clearSelection();let r=0,o=0;s&&(this._cachedSearchTerm===t?(r=s.end.x,o=s.end.y):(r=s.start.x,o=s.start.y)),this._initLinesCache();const e={startRow:o,startCol:r};let a=this._findInLine(t,e,n);if(!a)for(let p=o+1;p<this._terminal.buffer.active.baseY+this._terminal.rows&&(e.startRow=p,e.startCol=0,a=this._findInLine(t,e,n),!a);p++);if(!a&&o!==0)for(let p=0;p<o&&(e.startRow=p,e.startCol=0,a=this._findInLine(t,e,n),!a);p++);return!a&&s&&(e.startRow=s.start.y,e.startCol=0,a=this._findInLine(t,e,n)),this._selectResult(a,n==null?void 0:n.decorations,n==null?void 0:n.noScroll)}findPrevious(t,n){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");const s=!this._lastSearchOptions||this._didOptionsChange(this._lastSearchOptions,n);this._lastSearchOptions=n,n!=null&&n.decorations&&(this._cachedSearchTerm===void 0||t!==this._cachedSearchTerm||s)&&this._highlightAllMatches(t,n);const r=this._findPreviousAndSelect(t,n);return this._fireResults(n),this._cachedSearchTerm=t,r}_didOptionsChange(t,n){return!!n&&(t.caseSensitive!==n.caseSensitive||t.regex!==n.regex||t.wholeWord!==n.wholeWord)}_fireResults(t){if(t!=null&&t.decorations){let n=-1;if(this._selectedDecoration.value){const s=this._selectedDecoration.value.match;for(let r=0;r<this._highlightDecorations.length;r++){const o=this._highlightDecorations[r].match;if(o.row===s.row&&o.col===s.col&&o.size===s.size){n=r;break}}}this._onDidChangeResults.fire({resultIndex:n,resultCount:this._highlightDecorations.length})}}_findPreviousAndSelect(t,n){var p;if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!this._terminal||!t||t.length===0)return(p=this._terminal)==null||p.clearSelection(),this.clearDecorations(),!1;const s=this._terminal.getSelectionPosition();this._terminal.clearSelection();let r=this._terminal.buffer.active.baseY+this._terminal.rows-1,o=this._terminal.cols;const e=!0;this._initLinesCache();const a={startRow:r,startCol:o};let f;if(s&&(a.startRow=r=s.start.y,a.startCol=o=s.start.x,this._cachedSearchTerm!==t&&(f=this._findInLine(t,a,n,!1),f||(a.startRow=r=s.end.y,a.startCol=o=s.end.x))),f||(f=this._findInLine(t,a,n,e)),!f){a.startCol=Math.max(a.startCol,this._terminal.cols);for(let D=r-1;D>=0&&(a.startRow=D,f=this._findInLine(t,a,n,e),!f);D--);}if(!f&&r!==this._terminal.buffer.active.baseY+this._terminal.rows-1)for(let D=this._terminal.buffer.active.baseY+this._terminal.rows-1;D>=r&&(a.startRow=D,f=this._findInLine(t,a,n,e),!f);D--);return this._selectResult(f,n==null?void 0:n.decorations,n==null?void 0:n.noScroll)}_initLinesCache(){const t=this._terminal;this._linesCache||(this._linesCache=new Array(t.buffer.active.length),this._linesCacheDisposables.value=(0,h.getDisposeArrayDisposable)([t.onLineFeed(()=>this._destroyLinesCache()),t.onCursorMove(()=>this._destroyLinesCache()),t.onResize(()=>this._destroyLinesCache())])),window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=window.setTimeout(()=>this._destroyLinesCache(),15e3)}_destroyLinesCache(){this._linesCache=void 0,this._linesCacheDisposables.clear(),this._linesCacheTimeoutId&&(window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=0)}_isWholeWord(t,n,s){return(t===0||m.includes(n[t-1]))&&(t+s.length===n.length||m.includes(n[t+s.length]))}_findInLine(t,n,s={},r=!1){var O;const o=this._terminal,e=n.startRow,a=n.startCol,f=o.buffer.active.getLine(e);if(f!=null&&f.isWrapped)return r?void(n.startCol+=o.cols):(n.startRow--,n.startCol+=o.cols,this._findInLine(t,n,s));let p=(O=this._linesCache)==null?void 0:O[e];p||(p=this._translateBufferLineToStringWithWrap(e,!0),this._linesCache&&(this._linesCache[e]=p));const[D,g]=p,v=this._bufferColsToStringOffset(e,a),M=s.caseSensitive?t:t.toLowerCase(),y=s.caseSensitive?D:D.toLowerCase();let C=-1;if(s.regex){const E=RegExp(M,"g");let c;if(r)for(;c=E.exec(y.slice(0,v));)C=E.lastIndex-c[0].length,t=c[0],E.lastIndex-=t.length-1;else c=E.exec(y.slice(v)),c&&c[0].length>0&&(C=v+(E.lastIndex-c[0].length),t=c[0])}else r?v-M.length>=0&&(C=y.lastIndexOf(M,v-M.length)):C=y.indexOf(M,v);if(C>=0){if(s.wholeWord&&!this._isWholeWord(C,y,t))return;let E=0;for(;E<g.length-1&&C>=g[E+1];)E++;let c=E;for(;c<g.length-1&&C+t.length>=g[c+1];)c++;const u=C-g[E],A=C+t.length-g[c],_=this._stringLengthToBufferSize(e+E,u);return{term:t,col:_,row:e+E,size:this._stringLengthToBufferSize(e+c,A)-_+o.cols*(c-E)}}}_stringLengthToBufferSize(t,n){const s=this._terminal.buffer.active.getLine(t);if(!s)return 0;for(let r=0;r<n;r++){const o=s.getCell(r);if(!o)break;const e=o.getChars();e.length>1&&(n-=e.length-1);const a=s.getCell(r+1);a&&a.getWidth()===0&&n++}return n}_bufferColsToStringOffset(t,n){const s=this._terminal;let r=t,o=0,e=s.buffer.active.getLine(r);for(;n>0&&e;){for(let a=0;a<n&&a<s.cols;a++){const f=e.getCell(a);if(!f)break;f.getWidth()&&(o+=f.getCode()===0?1:f.getChars().length)}if(r++,e=s.buffer.active.getLine(r),e&&!e.isWrapped)break;n-=s.cols}return o}_translateBufferLineToStringWithWrap(t,n){var a;const s=this._terminal,r=[],o=[0];let e=s.buffer.active.getLine(t);for(;e;){const f=s.buffer.active.getLine(t+1),p=!!f&&f.isWrapped;let D=e.translateToString(!p&&n);if(p&&f){const g=e.getCell(e.length-1);g&&g.getCode()===0&&g.getWidth()===1&&((a=f.getCell(0))==null?void 0:a.getWidth())===2&&(D=D.slice(0,-1))}if(r.push(D),!p)break;o.push(o[o.length-1]+D.length),t++,e=f}return[r.join(""),o]}_selectResult(t,n,s){const r=this._terminal;if(this._selectedDecoration.clear(),!t)return r.clearSelection(),!1;if(r.select(t.col,t.row,t.size),n){const o=r.registerMarker(-r.buffer.active.baseY-r.buffer.active.cursorY+t.row);if(o){const e=r.registerDecoration({marker:o,x:t.col,width:t.size,backgroundColor:n.activeMatchBackground,layer:"top",overviewRulerOptions:{color:n.activeMatchColorOverviewRuler}});if(e){const a=[];a.push(o),a.push(e.onRender(f=>this._applyStyles(f,n.activeMatchBorder,!0))),a.push(e.onDispose(()=>(0,h.disposeArray)(a))),this._selectedDecoration.value={decoration:e,match:t,dispose(){e.dispose()}}}}}if(!s&&(t.row>=r.buffer.active.viewportY+r.rows||t.row<r.buffer.active.viewportY)){let o=t.row-r.buffer.active.viewportY;o-=Math.floor(r.rows/2),r.scrollLines(o)}return!0}_applyStyles(t,n,s){t.classList.contains("xterm-find-result-decoration")||(t.classList.add("xterm-find-result-decoration"),n&&(t.style.outline=`1px solid ${n}`)),s&&t.classList.add("xterm-find-active-result-decoration")}_createResultDecoration(t,n){const s=this._terminal,r=s.registerMarker(-s.buffer.active.baseY-s.buffer.active.cursorY+t.row);if(!r)return;const o=s.registerDecoration({marker:r,x:t.col,width:t.size,backgroundColor:n.matchBackground,overviewRulerOptions:this._highlightedLines.has(r.line)?void 0:{color:n.matchOverviewRuler,position:"center"}});if(o){const e=[];e.push(r),e.push(o.onRender(a=>this._applyStyles(a,n.matchBorder,!1))),e.push(o.onDispose(()=>(0,h.disposeArray)(e)))}return o}}L.SearchAddon=P})(),l})())},93162:function(j,T,i){var R,l,L;(function(d,h){l=[],R=h,L=typeof R=="function"?R.apply(T,l):R,L!==void 0&&(j.exports=L)})(this,function(){"use strict";function d(s,r){return typeof r=="undefined"?r={autoBom:!1}:typeof r!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}function h(s,r,o){var e=new XMLHttpRequest;e.open("GET",s),e.responseType="blob",e.onload=function(){n(e.response,r,o)},e.onerror=function(){console.error("could not download file")},e.send()}function m(s){var r=new XMLHttpRequest;r.open("HEAD",s,!1);try{r.send()}catch(o){}return 200<=r.status&&299>=r.status}function P(s){try{s.dispatchEvent(new MouseEvent("click"))}catch(o){var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(r)}}var w=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof i.g=="object"&&i.g.global===i.g?i.g:void 0,t=w.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),n=w.saveAs||(typeof window!="object"||window!==w?function(){}:"download"in HTMLAnchorElement.prototype&&!t?function(s,r,o){var e=w.URL||w.webkitURL,a=document.createElement("a");r=r||s.name||"download",a.download=r,a.rel="noopener",typeof s=="string"?(a.href=s,a.origin===location.origin?P(a):m(a.href)?h(s,r,o):P(a,a.target="_blank")):(a.href=e.createObjectURL(s),setTimeout(function(){e.revokeObjectURL(a.href)},4e4),setTimeout(function(){P(a)},0))}:"msSaveOrOpenBlob"in navigator?function(s,r,o){if(r=r||s.name||"download",typeof s!="string")navigator.msSaveOrOpenBlob(d(s,o),r);else if(m(s))h(s,r,o);else{var e=document.createElement("a");e.href=s,e.target="_blank",setTimeout(function(){P(e)})}}:function(s,r,o,e){if(e=e||open("","_blank"),e&&(e.document.title=e.document.body.innerText="downloading..."),typeof s=="string")return h(s,r,o);var a=s.type==="application/octet-stream",f=/constructor/i.test(w.HTMLElement)||w.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||a&&f||t)&&typeof FileReader!="undefined"){var D=new FileReader;D.onloadend=function(){var M=D.result;M=p?M:M.replace(/^data:[^;]*;/,"data:attachment/file;"),e?e.location.href=M:location=M,e=null},D.readAsDataURL(s)}else{var g=w.URL||w.webkitURL,v=g.createObjectURL(s);e?e.location=v:location.href=v,e=null,setTimeout(function(){g.revokeObjectURL(v)},4e4)}});w.saveAs=n.saveAs=n,j.exports=n})}}]);
}());