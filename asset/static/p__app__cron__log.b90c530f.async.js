"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4250],{1699:function(Q,h,e){e.d(h,{u:function(){return i}});var T=e(9783),d=e.n(T),x=e(97857),M=e.n(x),S=e(67294),m=e(82346),C=e(40411),A=e(42075),E=e(85893),i=function(s){var v=(0,m.useAccess)(),n=Array.isArray(s.access)?s.access:[s.access],o,f=s.fallback;if(typeof s.children=="function"?(o=s.children(n.reduce(function(O,g){return M()(M()({},O),{},d()({},g,v[g]))},{})),o||(o=f)):n.every(function(O){return v[O]})?o=s.children:o=f,!f&&o&&s.showProTips&&v.canSeeEnableCe){if(v.canSeeEnableHiddenProTips)return null;o=(0,E.jsx)(C.Z,{offset:s.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:o})}if(!f&&o&&s.showProRibbonTips&&v.canSeeEnableCe){if(v.canSeeEnableHiddenProTips)return null;o=(0,E.jsx)(C.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:o})}return s.space?(0,E.jsx)(A.Z,M()(M()({},s.space),{},{children:o})):o}},80821:function(Q,h,e){e.d(h,{Z:function(){return v}});var T=e(97857),d=e.n(T),x=e(5574),M=e.n(x),S=e(24963),m=e(36146),C=e(86738),A=e(83062),E=e(96074),i=e(83622),a=e(67294),s=e(85893);function v(n){var o=(0,a.useState)(!1),f=M()(o,2),O=f[0],g=f[1],V=(0,a.useContext)(S.Z),F=V.message,X=function(){g(!0);var l=n.action();l instanceof Promise?l.then(function(U){if(g(!1),U){typeof n.onSuccess=="function"&&n.onSuccess(U);var D=m.FD.format("finish");F.success(D)}}).catch(function(U){g(!1),typeof n.onError=="function"&&n.onError(U)}):g(!1)};if(n.confirmProps){var y,z,$,N,G,I,j,_=n.confirmProps.description;return n.confirmProps.showCommonConfirm&&(_=m.FD.format("confirm.title")),n.confirmProps.showCommonDisabled&&(_=m.FD.format("confirm.disable")),(0,s.jsx)(C.Z,d()(d()({},n.confirmProps),{},{style:{width:500},title:(y=n.confirmProps)!==null&&y!==void 0&&y.title?(z=n.confirmProps)===null||z===void 0?void 0:z.title:m.FD.format("title.tip"),description:_,onConfirm:X,okText:"Yes",cancelText:"No",children:(0,s.jsxs)(A.Z,{title:n.tips,children:[n.showDivider&&(0,s.jsx)(E.Z,{type:"vertical",style:{marginRight:15}}),(0,s.jsx)(i.ZP,d()(d()({},n.buttonProps),{},{ghost:(($=n.buttonProps)===null||$===void 0?void 0:$.ghost)&&((N=n.buttonProps)===null||N===void 0?void 0:N.type)!=="link",style:(G=n.buttonProps)!==null&&G!==void 0&&G.ghost?d()(d()({},n.buttonProps.style),{},{padding:0,width:"auto"}):d()({},(I=n.buttonProps)===null||I===void 0?void 0:I.style),icon:!n.children&&O||(j=n.buttonProps)===null||j===void 0?void 0:j.icon,loading:O,children:n.children}))]})}))}else{var H,b,B,W,J;return(0,s.jsxs)(A.Z,{title:n.tips,children:[n.showDivider&&(0,s.jsx)(E.Z,{type:"vertical",style:{marginRight:15}}),(0,s.jsx)(i.ZP,d()(d()({},n.buttonProps),{},{ghost:((H=n.buttonProps)===null||H===void 0?void 0:H.ghost)&&((b=n.buttonProps)===null||b===void 0?void 0:b.type)!=="link",style:(B=n.buttonProps)!==null&&B!==void 0&&B.ghost?d()(d()({},n.buttonProps.style),{},{padding:0,width:"auto"}):d()({},(W=n.buttonProps)===null||W===void 0?void 0:W.style),icon:!n.children&&O||(J=n.buttonProps)===null||J===void 0?void 0:J.icon,loading:O,onClick:X,children:n.children}))]})}}},24963:function(Q,h,e){var T=e(67294),d=(0,T.createContext)({});h.Z=d},6812:function(Q,h,e){e.r(h),e.d(h,{default:function(){return H}});var T=e(15009),d=e.n(T),x=e(99289),M=e.n(x),S=e(5574),m=e.n(S),C=e(1699),A=e(22191),E=e(80821),i=e(83727),a=e(36146),s=e(67255),v=e(43425),n=e(74453),o=e(38345),f=e(9773),O=e(95213),g=e(11106),V=e(82346),F=e(42075),X=e(66309),y=e(96074),z=e(83622),$=e(25593),N=e(40411),G=e(86250),I=e(53531),j=e(67294),_=e(85893);function H(){var b,B,W=(0,V.useParams)(),J=(0,j.useState)(),k=m()(J,2),l=k[0],U=k[1],D=(0,j.useRef)(),te=(0,j.useState)(),q=m()(te,2),c=q[0],ae=q[1],w=(0,j.useRef)(),_e=(0,j.useState)(0),ee=m()(_e,2),Y=ee[0],p=ee[1];return(0,j.useEffect)(function(){var u;(0,i.Ih)({id:parseInt((u=W.id)!==null&&u!==void 0?u:"")}).then(function(t){ae(t.data.detail)})},[Y]),(0,_.jsx)(n._z,{children:(0,_.jsxs)(o.Z,{ghost:!0,direction:"column",gutter:[0,10],children:[(0,_.jsx)(o.Z,{title:(0,_.jsx)(v.Z,{}),subTitle:c==null?void 0:c.title,extra:(0,_.jsxs)(F.Z,{children:[(0,_.jsxs)("span",{children:[a.FD.format("listNextAt"),":"]}),c&&c.setting.nextRunTime&&c.setting.nextRunTime.map(function(u,t){return(0,_.jsx)(X.Z,{children:new Date(u).toLocaleString()},"runNextTime-".concat(t))})]}),children:(0,_.jsxs)(F.Z,{children:[(0,_.jsx)(E.Z,{action:function(){var t;return(0,i.yh)({id:parseInt((t=W.id)!==null&&t!==void 0?t:"")})},onSuccess:function(){var t,r;return!((t=D.current)===null||t===void 0)&&t.reloadAndRest&&((r=D.current)===null||r===void 0||r.reloadAndRest()),!0},onError:function(){var t,r;return!((t=D.current)===null||t===void 0)&&t.reloadAndRest&&((r=D.current)===null||r===void 0||r.reloadAndRest()),!0},buttonProps:{type:"primary"},children:a.FD.format("listManageStart")},"runOnce"),c&&(0,_.jsx)(E.Z,{action:function(){var t,r,L,K,R,P,ne={id:c.id,title:c.title,expression:(t=c.setting.expression)!==null&&t!==void 0?t:[],containerName:(r=c.setting.containerName)!==null&&r!==void 0?r:"",script:(L=c.setting.script)!==null&&L!==void 0?L:"",enableRunBlock:(K=c.setting.enableRunBlock)!==null&&K!==void 0?K:!1,environment:(R=c.setting.environment)!==null&&R!==void 0?R:[],keepLogTotal:(P=c.setting.keepLogTotal)!==null&&P!==void 0?P:10,disable:!c.setting.disable};return(0,i.FS)(ne)},onSuccess:function(){return p(Y+1),!0},onError:function(){return p(Y+1),!0},children:c.setting.disable?a.FD.format("listManageUnpause"):a.FD.format("listManagePause")},"pause"),(0,_.jsx)(y.Z,{type:"vertical"}),(0,_.jsx)(E.Z,{action:function(){var t;return U({}),(0,i.wb)({id:parseInt((t=W.id)!==null&&t!==void 0?t:"")})},onSuccess:function(){var t,r;return!((t=D.current)===null||t===void 0)&&t.reloadAndRest&&((r=D.current)===null||r===void 0||r.reloadAndRest()),!0},onError:function(){var t,r;return!((t=D.current)===null||t===void 0)&&t.reloadAndRest&&((r=D.current)===null||r===void 0||r.reloadAndRest()),!0},buttonProps:{type:"primary",danger:!0},confirmProps:{showCommonConfirm:!0},children:a.FD.format("listManageClear")},"clear"),(0,_.jsx)(y.Z,{type:"vertical"}),(0,_.jsx)(A.Z,{ref:w,onFinish:function(){p(Y+1)}},"create"),(0,_.jsx)(C.u,{access:"canSeeContainerCronManage",children:(0,_.jsx)(z.ZP,{onClick:function(){var t;!((t=w.current)===null||t===void 0)&&t.edit&&c&&w.current.edit(c)},children:a.FD.format("listManageEdit")})})]})}),(0,_.jsxs)(o.Z,{split:"vertical",children:[(0,_.jsx)(o.Z,{ghost:!0,colSpan:"30%",children:(0,_.jsx)(f.Z,{actionRef:D,rowKey:"id",pagination:(0,s.Oh)(),columns:[{title:"Id",dataIndex:"id",render:function(t,r,L,K,R){return(0,_.jsxs)(F.Z,{children:[(0,_.jsx)($.Z.Link,{onClick:function(){U(r)},children:r.id}),l!=null&&l.id&&l.id==r.id?(0,_.jsx)(N.Z,{status:"processing"}):""]})}},{title:a.FD.format("listCreatedAt"),render:function(t,r,L,K,R){return new Date(r.value.runTime).toLocaleString()}},{title:a.FD.format("listUseTime"),render:function(t,r,L,K,R){return"".concat(r.value.useTime?r.value.useTime.toFixed(2)+"s":"-")}}],search:!1,request:function(){var u=M()(d()().mark(function t(r,L,K){var R,P;return d()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,i.bk)({id:parseInt((R=W.id)!==null&&R!==void 0?R:""),page:r.current,pageSize:r.pageSize});case 2:return P=Z.sent,P.data.list&&P.data.list.length>0&&U(P.data.list[0]),Z.abrupt("return",{data:P.data.list,success:!0,total:P.data.total});case 5:case"end":return Z.stop()}},t)}));return function(t,r,L){return u.apply(this,arguments)}}()})}),(0,_.jsxs)(o.Z,{ghost:!0,colSpan:"70%",split:"horizontal",children:[(0,_.jsx)(o.Z,{children:(0,_.jsxs)(G.Z,{gap:50,align:"center",justify:"space-evenly",children:[(0,_.jsx)(I.Z,{title:"Id",value:(l==null?void 0:l.id)&&(l==null?void 0:l.id)}),(0,_.jsx)(I.Z,{title:a.FD.format("listCreatedAt"),value:(l==null?void 0:l.value)&&new Date((b=l==null?void 0:l.value.runTime)!==null&&b!==void 0?b:"").toLocaleString()}),(0,_.jsx)(I.Z,{title:a.FD.format("listUseTime"),value:(l==null?void 0:l.value)&&"".concat(l!=null&&l.value.useTime?l.value.useTime.toFixed(2)+"s":"-")})]})}),(0,_.jsx)(o.Z,{children:(0,_.jsx)(g.ZP,{theme:"dark",height:"100vh",value:(l==null?void 0:l.value)&&((B=l.value.message)!==null&&B!==void 0?B:l==null?void 0:l.value.error),extensions:[O.RI.shell(),g.tk.lineWrapping]})})]})]})]})})}},67255:function(Q,h,e){e.d(h,{G$:function(){return S},LX:function(){return E},MJ:function(){return M},Oh:function(){return x},h5:function(){return C},j_:function(){return m},rj:function(){return A}});var T=e(5574),d=e.n(T);function x(i){var a=localStorage.getItem("dpanel-pagesize");return a=="all"?!1:{defaultCurrent:i==null?void 0:i.page,showSizeChanger:!0,defaultPageSize:parseInt(a!=null?a:"20"),showQuickJumper:!0}}function M(i,a){a?localStorage.setItem("dpanel-page-"+i,"".concat(a)):localStorage.removeItem("dpanel-page-"+i)}function S(i,a){var s=a?Math.ceil((a==null?void 0:a.total)/(a==null?void 0:a.pageSize)):void 0,v=localStorage.getItem("dpanel-page-"+i),n=1;return v&&(n=parseInt(v)),s&&n>s?1:n}function m(i){return{persistenceKey:i,persistenceType:"localStorage"}}var C=["descend","ascend"];function A(i,a){var s=localStorage.getItem("dpanel-table-sort-".concat(i));if(s){var v=s.split("|"),n=d()(v,2),o=n[0],f=n[1];if(o==a)return f}}function E(i,a,s){!a||!s?localStorage.removeItem("dpanel-table-sort-".concat(i)):localStorage.setItem("dpanel-table-sort-".concat(i),"".concat(a,"|").concat(s))}}}]);
