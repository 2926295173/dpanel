(self.webpackChunk=self.webpackChunk||[]).push([[8022],{23430:function(I,M,n){"use strict";n.d(M,{Z:function(){return _}});var O=n(87462),i=n(67294),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},u=c,l=n(84089),D=function(P,r){return i.createElement(l.Z,(0,O.Z)({},P,{ref:r,icon:u}))},h=i.forwardRef(D),_=h},80821:function(I,M,n){"use strict";n.d(M,{Z:function(){return r}});var O=n(5574),i=n.n(O),c=n(93246),u=n(54006),l=n(31418),D=n(86738),h=n(14726),_=n(83062),f=n(67294),P=n(85893);function r(e){var E=(0,f.useState)(!1),t=i()(E,2),o=t[0],R=t[1],j=l.Z.useApp(),p=(0,u.useIntl)(),g=function(){R(!0),e.action().then(function(v){if(R(!1),typeof e.onSuccess=="function"&&e.onSuccess(v),e.messageSuccess){var a="";typeof e.messageSuccess=="function"?a=e.messageSuccess(v):a=e.messageSuccess,a.indexOf(".")>-1&&(a=p.formatMessage({id:a})),e.asynced?(0,c.Rk)(j,a):(0,c.$h)(j,a)}}).catch(function(v){R(!1),typeof e.onError=="function"&&e.onError(v)})};return e.confirm?(0,P.jsx)(D.Z,{style:{width:500},title:"\u63D0\u793A",description:e.confirm,onConfirm:g,okText:"Yes",cancelText:"No",children:(0,P.jsx)(h.ZP,{disabled:e.disabled,icon:e.icon,loading:o,danger:e.danger,type:e.type,children:e.children})}):(0,P.jsx)(_.Z,{title:e.tips,children:(0,P.jsx)(h.ZP,{disabled:e.disabled,icon:e.icon,loading:o,onClick:g,danger:e.danger,type:e.type,children:e.children})})}},94359:function(I,M,n){"use strict";n.d(M,{Z:function(){return E}});var O=n(67294),i=n(3089),c=n(98165),u=n(18429),l=n(8751),D=n(14313),h=n(30159),_=n(87740),f=n(66309),P=n(83062),r=n(54006),e=n(85893);function E(t){var o=(0,e.jsx)(e.Fragment,{});if(t.status=="0"&&(o=(0,e.jsx)(f.Z,{icon:(0,e.jsx)(i.Z,{}),color:"default",children:"waiting"})),t.status=="10"&&(o=(0,e.jsx)(f.Z,{icon:(0,e.jsx)(c.Z,{spin:!0}),color:"processing",children:"processing"})),t.status=="20"&&(o=(0,e.jsx)(f.Z,{icon:(0,e.jsx)(u.Z,{}),color:"error",children:"error"})),t.status=="30"&&(o=(0,e.jsx)(f.Z,{icon:(0,e.jsx)(l.Z,{}),color:"success",children:"success"})),t.status=="running"){var R,j;o=(0,e.jsx)(f.Z,{icon:(0,e.jsx)(D.Z,{}),color:"success",children:(R=t.message)!==null&&R!==void 0&&R.showInTag?(j=t.message)===null||j===void 0?void 0:j.content:t.status})}if(t.status=="paused"){var p,g;o=(0,e.jsx)(f.Z,{icon:(0,e.jsx)(h.Z,{}),children:(p=t.message)!==null&&p!==void 0&&p.showInTag?(g=t.message)===null||g===void 0?void 0:g.content:t.status})}if(t.status=="restarting"||t.status=="waiting"){var A,v;o=(0,e.jsx)(f.Z,{icon:(0,e.jsx)(_.Z,{}),children:(A=t.message)!==null&&A!==void 0&&A.showInTag?(v=t.message)===null||v===void 0?void 0:v.content:t.status})}if(t.status=="exited"||t.status=="dead"||t.status=="removing"){var a,d;o=(0,e.jsx)(f.Z,{icon:(0,e.jsx)(u.Z,{}),color:"warning",children:(a=t.message)!==null&&a!==void 0&&a.showInTag?(d=t.message)===null||d===void 0?void 0:d.content:t.status})}return t.link&&(o=(0,e.jsx)(r.Link,{to:t.link,children:o})),t.message&&(o=(0,e.jsx)(P.Z,{placement:t.message.placement,title:t.message.content,children:o})),(0,e.jsx)(e.Fragment,{children:o})}},96781:function(I,M,n){"use strict";var O=n(67294),i=(0,O.createContext)({});M.Z=i},92922:function(I,M,n){"use strict";n.r(M),n.d(M,{default:function(){return d}});var O=n(15009),i=n.n(O),c=n(99289),u=n.n(c),l=n(80821),D=n(24910),h=n(43425),_=n(86548),f=n(23430),P=n(88717),r=n(54006),e=n(42075),E=n(96074),t=n(83062),o=n(22015),R=n(67294),j=n(96781),p=n(94359),g=n(67255),A=n(93162),v=n.n(A),a=n(85893);function d(){var B=(0,R.useContext)(j.Z),s=B.listTableRef;return(0,a.jsx)(P.Z,{scroll:{x:"max-content"},request:function(){var y=u()(i()().mark(function x(m){var U,C,T;return i()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,D.pm)({title:m.title,name:m.name,pageSize:(U=m.pageSize)!==null&&U!==void 0?U:10,page:(C=m.current)!==null&&C!==void 0?C:1});case 2:return T=L.sent,L.abrupt("return",{data:T.data.list,success:!0,total:T.data.list.length});case 4:case"end":return L.stop()}},x)}));return function(x){return y.apply(this,arguments)}}(),rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name",width:200,render:function(x,m,U,C,T){return(0,a.jsx)(r.Link,{to:"/compose/deploy/"+m.name,children:m.name},U)}},{title:"\u9879\u76EE\u540D\u79F0",dataIndex:"title",width:200},{title:"\u5BB9\u5668\u72B6\u6001",dataIndex:"status",search:!1,render:function(x,m,U,C,T){var W="running",L=m.setting.status.indexOf("(");return L>-1?W=m.setting.status.slice(0,L):W=m.setting.status,(0,a.jsx)(p.Z,{status:W,message:{content:m.setting.status,placement:"top",showInTag:!0}})}},{title:"\u64CD\u4F5C",width:80,valueType:"option",key:"option",render:function(x,m,U,C,T){return(0,a.jsxs)(e.Z,{split:(0,a.jsx)(E.Z,{type:"vertical"}),children:[(0,a.jsx)(r.Link,{to:"/compose/deploy/"+m.name,children:(0,a.jsx)(t.Z,{title:"\u7BA1\u7406",children:(0,a.jsx)(h.Z,{})})},"3"),m.yaml&&(0,a.jsx)(r.Link,{to:"/compose/create?id="+m.id,children:(0,a.jsx)(t.Z,{title:"\u7F16\u8F91",children:(0,a.jsx)(_.Z,{})})},"4"),m.yaml&&(0,a.jsx)(o.Z.Link,{onClick:function(){var L=new Blob([m.yaml],{type:"text/plain"});(0,A.saveAs)(L,m.name+".yaml")},children:(0,a.jsx)(t.Z,{title:"\u4E0B\u8F7D",children:(0,a.jsx)(f.Z,{})})},"2")]})}}],rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0,getCheckboxProps:function(x){return{disabled:!x.yaml}}},tableAlertOptionRender:function(x){var m=x.selectedRows;return(0,a.jsx)(e.Z,{size:16,children:(0,a.jsx)(l.Z,{danger:!0,type:"primary",action:function(){return(0,D.ik)({id:m.map(function(C){return C.id})})},onSuccess:function(){var C,T;return!((C=s.current)===null||C===void 0)&&C.reloadAndRest&&((T=s.current)===null||T===void 0||T.reloadAndRest()),!0},onError:function(){var C,T;return!((C=s.current)===null||C===void 0)&&C.reset&&((T=s.current)===null||T===void 0||T.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",confirm:(0,a.jsx)(e.Z,{style:{width:280},direction:"vertical",children:(0,a.jsx)(o.Z.Text,{children:"\u5220\u9664\u524D\u8BF7\u5148\u9500\u6BC1\u76F8\u5173\u5BB9\u5668\uFF0C\u786E\u8BA4\u5417\uFF1F"})}),children:"\u6279\u91CF\u5220\u9664"})})},pagination:(0,g.O)(),search:{collapsed:!1},actionRef:s,columnsState:(0,g.j)("compose-list")})}},24910:function(I,M,n){"use strict";n.d(M,{GG:function(){return p},Oh:function(){return t},U_:function(){return A},YZ:function(){return P},ik:function(){return e},im:function(){return D},mg:function(){return R},pm:function(){return _}});var O=n(15009),i=n.n(O),c=n(99289),u=n.n(c),l=n(54006);function D(a){return h.apply(this,arguments)}function h(){return h=u()(i()().mark(function a(d){return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,l.request)("/api/app/compose/create",{method:"POST",data:d}));case 1:case"end":return s.stop()}},a)})),h.apply(this,arguments)}function _(a){return f.apply(this,arguments)}function f(){return f=u()(i()().mark(function a(d){return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,l.request)("/api/app/compose/get-list",{method:"POST",data:d}));case 1:case"end":return s.stop()}},a)})),f.apply(this,arguments)}function P(a){return r.apply(this,arguments)}function r(){return r=u()(i()().mark(function a(d){return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,l.request)("/api/app/compose/get-detail",{method:"POST",data:d}));case 1:case"end":return s.stop()}},a)})),r.apply(this,arguments)}function e(a){return E.apply(this,arguments)}function E(){return E=u()(i()().mark(function a(d){return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,l.request)("/api/app/compose/delete",{method:"POST",data:d}));case 1:case"end":return s.stop()}},a)})),E.apply(this,arguments)}function t(a){return o.apply(this,arguments)}function o(){return o=u()(i()().mark(function a(d){return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,l.request)("/api/app/compose/container-deploy",{method:"POST",data:d}));case 1:case"end":return s.stop()}},a)})),o.apply(this,arguments)}function R(a){return j.apply(this,arguments)}function j(){return j=u()(i()().mark(function a(d){return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,l.request)("/api/app/compose/container-destroy",{method:"POST",data:d}));case 1:case"end":return s.stop()}},a)})),j.apply(this,arguments)}function p(a){return g.apply(this,arguments)}function g(){return g=u()(i()().mark(function a(d){return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,l.request)("/api/app/compose/container-ctrl",{method:"POST",data:d}));case 1:case"end":return s.stop()}},a)})),g.apply(this,arguments)}function A(a){return v.apply(this,arguments)}function v(){return v=u()(i()().mark(function a(d){return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,l.request)("/api/app/compose/container-process-kill",{method:"POST",data:d}));case 1:case"end":return s.stop()}},a)})),v.apply(this,arguments)}},67255:function(I,M,n){"use strict";n.d(M,{O:function(){return O},j:function(){return i}});function O(){var c,u=parseInt((c=localStorage.getItem("dpanel-pagesize"))!==null&&c!==void 0?c:"0");return{showSizeChanger:!0,defaultPageSize:u!=null?u:20}}function i(c){var u="dpanel-table-column-".concat(c),l={};if(localStorage.getItem(u)){var D;l=JSON.parse((D=localStorage.getItem(u))!==null&&D!==void 0?D:"{}")}return{defaultValue:l,onChange:function(_){localStorage.setItem("dpanel-table-column-".concat(c),JSON.stringify(_))}}}},93162:function(I,M,n){var O,i,c;(function(u,l){i=[],O=l,c=typeof O=="function"?O.apply(M,i):O,c!==void 0&&(I.exports=c)})(this,function(){"use strict";function u(r,e){return typeof e=="undefined"?e={autoBom:!1}:typeof e!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r}function l(r,e,E){var t=new XMLHttpRequest;t.open("GET",r),t.responseType="blob",t.onload=function(){P(t.response,e,E)},t.onerror=function(){console.error("could not download file")},t.send()}function D(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch(E){}return 200<=e.status&&299>=e.status}function h(r){try{r.dispatchEvent(new MouseEvent("click"))}catch(E){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var _=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof n.g=="object"&&n.g.global===n.g?n.g:void 0,f=_.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),P=_.saveAs||(typeof window!="object"||window!==_?function(){}:"download"in HTMLAnchorElement.prototype&&!f?function(r,e,E){var t=_.URL||_.webkitURL,o=document.createElement("a");e=e||r.name||"download",o.download=e,o.rel="noopener",typeof r=="string"?(o.href=r,o.origin===location.origin?h(o):D(o.href)?l(r,e,E):h(o,o.target="_blank")):(o.href=t.createObjectURL(r),setTimeout(function(){t.revokeObjectURL(o.href)},4e4),setTimeout(function(){h(o)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,E){if(e=e||r.name||"download",typeof r!="string")navigator.msSaveOrOpenBlob(u(r,E),e);else if(D(r))l(r,e,E);else{var t=document.createElement("a");t.href=r,t.target="_blank",setTimeout(function(){h(t)})}}:function(r,e,E,t){if(t=t||open("","_blank"),t&&(t.document.title=t.document.body.innerText="downloading..."),typeof r=="string")return l(r,e,E);var o=r.type==="application/octet-stream",R=/constructor/i.test(_.HTMLElement)||_.safari,j=/CriOS\/[\d]+/.test(navigator.userAgent);if((j||o&&R||f)&&typeof FileReader!="undefined"){var p=new FileReader;p.onloadend=function(){var v=p.result;v=j?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),t?t.location.href=v:location=v,t=null},p.readAsDataURL(r)}else{var g=_.URL||_.webkitURL,A=g.createObjectURL(r);t?t.location=A:location.href=A,t=null,setTimeout(function(){g.revokeObjectURL(A)},4e4)}});_.saveAs=P.saveAs=P,I.exports=P})}}]);
