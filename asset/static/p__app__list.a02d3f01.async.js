"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4316],{52645:function(Pe,V,e){e.d(V,{Z:function(){return m}});var J=e(87462),Z=e(67294),Y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},c=Y,X=e(84089),k=function(P,F){return Z.createElement(X.Z,(0,J.Z)({},P,{ref:F,icon:c}))},N=Z.forwardRef(k),m=N},36435:function(Pe,V,e){var J=e(15009),Z=e.n(J),Y=e(64599),c=e.n(Y),X=e(99289),k=e.n(X),N=e(9783),m=e.n(N),ce=e(5574),P=e.n(ce),F=e(67294),Se=e(184),Ee=e(38345),Ie=e(97269),q=e(97321),A=e(97462),Ce=e(64317),be=e(5966),H=e(86615),le=e(68602),Te=e(83622),L=e(83403),_e=e(24963),je=e(1699),Le=e(29177),xe=e(1883),Ze=e(43425),Ue=e(44349),We=e(3616),me=e(36146),R=e(85893),Fe=(0,F.forwardRef)(function(W,Qe){var $=(0,F.useState)(!1),ie=P()($,2),O=ie[0],ee=ie[1],B=(0,F.useRef)(),De=(0,F.useContext)(_e.Z),K=De.message,a=(0,F.useState)([]),Re=P()(a,2),fe=Re[0],Oe=Re[1],_=new me.Uo("components.permissionButton"),ye=m()(m()(m()(m()(m()({},L.W6.CONTAINER,"Id"),L.W6.APPSTORE,"name"),L.W6.COMPOSE,"name"),L.W6.REGISTRY,"serverAddress"),L.W6.DOCKER_ENV,"name"),Ae=m()(m()(m()(m()(m()({},L.W6.CONTAINER,"name"),L.W6.APPSTORE,"name"),L.W6.COMPOSE,"name"),L.W6.REGISTRY,"title"),L.W6.DOCKER_ENV,"title"),Me=ye[W.type],Be=Ae[W.type],Ke=W.selected.map(function(E){return E[ye[W.type]]});return F.useEffect(function(){if(O){if(!W.selected||W.selected.length==0){K.error(me.FD.format("title.noDataSelect")),ee(!1);return}(0,le.dP)({permission:{uri:W.type,key:Me,value:Ke}}).then(function(E){var v;(v=B.current)===null||v===void 0||v.setFieldValue("list",Object.keys(E.data.list).map(function(g){return{name:g,type:E.data.list[g].type,users:E.data.list[g].users}}))}),(0,le.lE)().then(function(E){var v,g=(v=E.data)===null||v===void 0||(v=v.list)===null||v===void 0?void 0:v.map(function(C){return{label:C.username,value:C.username}});Oe(g)})}},[O]),(0,R.jsx)(je.u,{access:["canSeeEnableEe","canSeeFounder","canSeeManage"],children:(0,R.jsxs)(Se.a,{name:"create",title:_.format("drawerTitle"),open:O,onOpenChange:function(v){if(!v){var g;(g=B.current)===null||g===void 0||g.resetFields()}ee(v)},drawerProps:{forceRender:!0,width:We.R_},formRef:B,trigger:(0,R.jsx)(Te.ZP,{icon:(0,R.jsx)(Le.Z,{}),children:_.format("drawerTriggerButton")}),onFinish:function(){var E=k()(Z()().mark(function v(g){var C,M,j;return Z()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:C=c()(g.list),y.prev=1,C.s();case 3:if((M=C.n()).done){y.next=9;break}return j=M.value,y.next=7,(0,le.Db)({usernames:j.users,permissionType:j.type,permission:{uri:W.type,key:Me,showKey:Be,value:[j.name]}});case 7:y.next=3;break;case 9:y.next=14;break;case 11:y.prev=11,y.t0=y.catch(1),C.e(y.t0);case 14:return y.prev=14,C.f(),y.finish(14);case 17:K.success(me.FD.format("finish")),ee(!1),W.onSuccess();case 20:case"end":return y.stop()}},v,null,[[1,11,14,17]])}));return function(v){return E.apply(this,arguments)}}(),children:[(0,R.jsxs)(Ee.Z,{ghost:!0,title:(0,R.jsx)(xe.Z,{}),subTitle:_.format("batchTitle"),children:[(0,R.jsx)(Ie.A.Item,{name:"type",style:{marginBottom:0},children:(0,R.jsx)(q.Z.Group,{defaultValue:"admin",onChange:function(v){var g,C,M=(g=B.current)===null||g===void 0?void 0:g.getFieldValue("list");M.forEach(function(j){j.type=v,j.users=[]}),(C=B.current)===null||C===void 0||C.setFieldValue("list",M)},children:["admin","restricted","public"].map(function(E){return(0,R.jsx)(q.Z,{style:{width:240},title:_.format("dataTypeOption.".concat(E)),description:_.format("dataTypeDescOption.".concat(E)),value:E},E)})})}),(0,R.jsx)(A.Z,{name:["type"],children:function(v){var g=v.type;if(g==="restricted")return(0,R.jsx)(Ce.Z,{mode:"multiple",name:"usernames",label:_.format("formUsernames"),onChange:function(M){var j,o,y=(j=B.current)===null||j===void 0?void 0:j.getFieldValue("list");y.forEach(function(b){b.users=M}),(o=B.current)===null||o===void 0||o.setFieldValue("list",y)},rules:[{required:!0}],request:k()(Z()().mark(function C(){var M,j,o;return Z()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(fe.length>0)){b.next=2;break}return b.abrupt("return",fe);case 2:return b.next=4,(0,le.lE)();case 4:return j=b.sent,o=(M=j.data)===null||M===void 0||(M=M.list)===null||M===void 0?void 0:M.map(function(te){return{label:te.username,value:te.username}}),Oe(o),b.abrupt("return",o);case 8:case"end":return b.stop()}},C)}))})}})]}),(0,R.jsx)(Ee.Z,{ghost:!0,title:(0,R.jsx)(Ze.Z,{}),subTitle:_.format("dataTitle"),children:(0,R.jsx)(Ue.Z,{name:"list",hideCopyButton:!0,gap:10,items:[{name:"name",label:_.format("dataName"),render:function(v,g,C){var M=C.getCurrentRowData();return(0,R.jsx)(be.Z,{disabled:!0,label:_.format("dataName"),width:"sm",name:"name"})}},{name:"type",label:_.format("dataType"),render:function(v,g,C){var M=C.getCurrentRowData();return(0,R.jsx)(H.Z.Group,{label:_.format("dataType"),name:"type",radioType:"button",options:["admin","public","restricted"].map(function(j){return{label:_.format("dataTypeOption.".concat(j)),value:j}})})}},{name:"users",label:_.format("dataUsers"),render:function(v,g,C){return(0,R.jsx)(A.Z,{name:["type"],children:function(j){var o=j.type;if(o=="restricted")return(0,R.jsx)(Ce.Z,{width:"sm",mode:"tags",name:"users",label:_.format("dataUsers"),options:fe})}})}}]})})]})})});V.Z=Fe},14668:function(Pe,V,e){e.r(V),e.d(V,{default:function(){return rt}});var J=e(64599),Z=e.n(J),Y=e(15009),c=e.n(Y),X=e(19632),k=e.n(X),N=e(99289),m=e.n(N),ce=e(5574),P=e.n(ce),F=e(74453),Se=e(34041),Ee=e(97269),Ie=e(62370),q=e(42075),A=e(25593),Ce=e(40411),be=e(96074),H=e(83062),le=e(84567),Te=e(82346),L=e(1883),_e=e(89035),je=e(95591),Le=e(86548),xe=e(16596),Ze=e(52645),Ue=e(82061),We=e(33160),me=e(87784),R=e(30159),Fe=e(74842),W=e(99611),Qe=e(94359),$=e(13822),ie=e(80821),O=e(67294),ee=e(62597),B=e(87662),De=e(16165),K=e(5251),a=e(85893),Re=function(){return(0,a.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18403",children:(0,a.jsx)("path",{d:"M224 192v64H96v576h128v64h64v-64h64v64h64v-64h64v64h64v-64h64v64h64v-64h64v64h64v-64h128V256h-128V192h-64v64h-64V192h-64v64h-64V192h-64v64h-64V192h-64v64H288V192z m-64 128h704v448H160z m96 64c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32zM256 512c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m512 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32zM256 640c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z","p-id":"18404"})})},fe=function(){return(0,a.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18546",children:(0,a.jsx)("path",{d:"M64 224v576h416v-32c0-17.76 14.24-32 32-32 17.76 0 32 14.24 32 32v32h416V224z m64 64h768v288H128z m64 64v160h192v-160z m224 0v160h192v-160z m224 0v160h192v-160zM256 416h64v32H256z m224 0h64v32h-64z m224 0h64v32h-64zM128 640h768v96h-300.992c-14.144-35.52-42.752-64-83.008-64-40.256 0-68.864 28.48-83.008 64H128z","p-id":"18547"})})};function Oe(T){var ve,Q,he,oe,pe,ge;return(0,a.jsx)(a.Fragment,{children:T.value&&T.value.memory&&T.value.memory.out>0?(0,a.jsxs)(q.Z,{children:[(0,a.jsxs)(H.Z,{title:"Cpu: ".concat((ve=T.value)===null||ve===void 0?void 0:ve.cpu.toFixed(2),"%"),children:[(0,a.jsx)(De.Z,{component:Re,style:{width:15,lineHeight:20}})," ","".concat((Q=T.value)===null||Q===void 0?void 0:Q.cpu.toFixed(2),"%")]}),(0,a.jsxs)(H.Z,{title:"Memory: ".concat((0,K.FI)((he=T.value)===null||he===void 0?void 0:he.memory.in)," / ").concat((0,K.FI)((oe=T.value)===null||oe===void 0?void 0:oe.memory.out)),children:[(0,a.jsx)(De.Z,{component:fe,style:{width:15,lineHeight:20}})," ","".concat((((pe=T.value)===null||pe===void 0?void 0:pe.memory.in)/((ge=T.value)===null||ge===void 0?void 0:ge.memory.out)*100).toFixed(2),"%")]})]}):""})}var _=e(67255),ye=e(37413),Ae=e(67007),Me=e(99922),Be=e(83403),Ke=e(20578),E=e(99861),v=e(78914),g=e(29453),C=e(8287),M=e(29463),j=e(78451),o=e(36146),y=e(36435),b=e(1699),te=e(55375),z=e(59683),nt=e(84941);function rt(){var T=new o.Uo("components.appDetail"),ve=new o.Uo("app"),Q=(0,Te.useAccess)(),he=(0,O.useState)(""),oe=P()(he,2),pe=oe[0],ge=oe[1],st=(0,O.useState)(1),Ge=P()(st,2),G=Ge[0],ae=Ge[1],lt=(0,O.useState)([]),Je=P()(lt,2),ue=Je[0],it=Je[1],ot=(0,O.useState)(),Ye=P()(ot,2),we=Ye[0],ut=Ye[1],dt=(0,O.useState)([]),Xe=P()(dt,2),qe=Xe[0],ct=Xe[1],ne=(0,O.useRef)(),Ne=(0,O.useRef)(),$e=(0,O.useRef)(),ze=(0,O.useRef)(),Ve=(0,O.useRef)(),et=(0,O.useRef)(),ke=(0,O.useRef)(),tt=(0,O.useRef)(),at=(0,O.useRef)();return(0,O.useEffect)(function(){(0,B.K3)().then(function(h){var s;ge((s=h.data.serverUrl)!==null&&s!==void 0?s:"")}),!Q.canSeeEnableCe&&(0,Ke.q)().then(function(h){ut(h.data)})},[]),(0,O.useEffect)(function(){var h;!((h=ne.current)===null||h===void 0)&&h.reload&&ne.current.reload(!1)},[G]),(0,a.jsxs)(F._z,{header:{extra:[(0,a.jsx)(nt.Z,{onFinish:function(){ae(G+1)},ref:at},"createByImage")]},children:[(0,a.jsx)(Ae.Z,{ref:Ne,onFinish:function(){ae(G+1)},onUpgradeFinish:function(){ae(G+1)}}),(0,a.jsx)(Me.Z,{showFileExplorer:!0,ref:$e}),(0,a.jsx)(C.Z,{ref:ze}),(0,a.jsx)(E.Z,{ref:ke,finishAutoHide:!0}),(0,a.jsx)(v.Z,{ref:tt}),(0,a.jsx)(M.Z,{showConsole:!0,ref:Ve}),(0,a.jsx)(z.C,{actionRef:ne,tableKey:te.Dc,columns:[{key:"title",title:o.FD.format("listTitle"),width:300,dataIndex:"siteTitle",sorter:function(s,t){return s.Names[0].localeCompare(t.Names[0])},defaultSortOrder:(0,_.rj)(te.Dc,"title"),sortDirections:_.h5,render:function(s,t,u,i,n){var r=(0,K.fi)(t.Names[0],"/");return(0,a.jsxs)(q.Z,{direction:"vertical",children:[(0,a.jsx)(A.Z.Link,{onClick:function(){var p;(p=Ne.current)===null||p===void 0||p.show(t.Id)},children:(0,a.jsx)(j.Z,{content:r})}),!Q.canSeeEnableCe&&we&&we.container&&we.container.find(function(l){return l.id==t.Id})&&(0,a.jsx)(Ce.Z,{count:"new"})]})}},{title:o.FD.format("listTag"),hidden:!0,dataIndex:"tag",renderFormItem:function(s,t,u,i){return(0,a.jsx)(Se.Z,{onSelect:function(r){u.submit()},onDeselect:function(){u.submit()},onClear:function(){u.submit()},allowClear:!0,popupMatchSelectWidth:!1,options:qe&&Object.entries(qe.reduce(function(n,r){var l=r.group||"tag";return n[l]||(n[l]=[]),n[l].push(r),n},{})).map(function(n){var r=P()(n,2),l=r[0],p=r[1];return{label:l,title:l,options:p.map(function(x){return{label:x.tag,value:x.tag}})}})})}},{key:"ports",title:o.FD.format("listAccess"),tooltip:o.FD.format("listAccessTip"),width:150,dataIndex:"ports",search:!1,render:function(s,t,u,i){var n,r=[],l=[];return t!=null&&t.Ports&&t.Ports.map(function(p,x){p.PublicPort?r.push(p):l.push(p)}),(0,a.jsx)(ye.Z,{publicPort:r,privatePort:l,domain:(n=t.DPExtend)===null||n===void 0?void 0:n.domainList,serverIp:pe})}},{title:o.FD.format("listUsage"),width:200,search:!1,key:"usage",sorter:function(s,t){var u={},i={};if(ue){var n,r;u=(n=ue.find(function(l){return s.Id.startsWith(l.container)}))!==null&&n!==void 0?n:{},i=(r=ue.find(function(l){return t.Id.startsWith(l.container)}))!==null&&r!==void 0?r:{}}return JSON.stringify(u).localeCompare(JSON.stringify(i))},defaultSortOrder:(0,_.rj)(te.Dc,"usage"),sortDirections:_.h5,render:function(s,t,u,i,n){if(!ue||ue.length<=0)return"";var r={};return ue.filter(function(l){t.Id.indexOf(l.container)==0&&(r=l)}),(0,a.jsx)(Oe,{value:r})}},{title:o.FD.format("listRunStatus"),key:"status",dataIndex:["container","status"],search:!1,width:130,render:function(s,t,u,i){var n="",r={};if(t.State.includes("(")){var l=t.State.indexOf("(");l>-1&&(n="compose.".concat(t.State.slice(0,l))),r={count:t.State.slice(l+1,t.State.length-1)}}else n="container.".concat(t.State),t.Status.indexOf("(healthy)")>-1?n="container.healthy":t.Status.indexOf("(unhealthy)")>-1&&(n="container.unhealthy");return(0,a.jsx)(Qe.Z,{statusValue:r,status:n,tip:"".concat(t.State," ").concat(t.Status)})}},{title:o.FD.format("listImageName"),key:"image",width:150,dataIndex:"image",render:function(s,t,u,i){return(0,a.jsx)("span",{style:{wordBreak:"break-word"},children:(0,a.jsx)(A.Z.Link,{onClick:function(){var r;(r=tt.current)===null||r===void 0||r.show(t.Image)},children:t.Image.includes("sha256:")?t.Image.substring(7,19):t.Image})})}},{key:"created",search:!1,title:o.FD.format("listCreatedAt"),width:170,dataIndex:["Created"],render:function(s,t,u,i,n){return(0,K.ZM)(t.Created*1e3)},sorter:function(s,t){return new Date(s.Created*1e3).toISOString().localeCompare(new Date(t.Created*1e3).toISOString())},defaultSortOrder:(0,_.rj)(te.Dc,"created"),sortDirections:_.h5},{title:o.FD.format("listManage"),valueType:"option",key:"option",width:200,fixed:"right",hidden:!Q.canSeeContainerListManage,render:function(s,t,u,i){return(0,a.jsxs)(q.Z,{split:(0,a.jsx)(be.Z,{type:"vertical"}),children:[(0,a.jsx)(A.Z.Link,{onClick:function(){var r;(r=ze.current)===null||r===void 0||r.show(t.Id)},children:(0,a.jsx)(H.Z,{title:o.FD.format("listManageLog"),children:(0,a.jsx)(L.Z,{})})},"log"),(t.State=="running"||t.State=="healthy"||t.State=="unhealthy")&&(0,a.jsx)(A.Z.Link,{onClick:function(){var r;(r=$e.current)===null||r===void 0||r.show({url:"/console/container/".concat(t.Id),title:(0,K.fi)(t.Names[0],"/")})},children:(0,a.jsx)(H.Z,{title:o.FD.format("listManageConsole"),children:(0,a.jsx)(_e.Z,{})})},"console"),(t.State=="running"||t.State=="healthy"||t.State=="unhealthy")&&(0,a.jsx)(A.Z.Link,{onClick:function(){var r,l=t.Names.find(function(p){if(p.indexOf("/")===0)return p});(r=Ve.current)===null||r===void 0||r.showContainer(l!=null?l:t.Names[0])},children:(0,a.jsx)(H.Z,{title:o.FD.format("listManageFileExplorer"),children:(0,a.jsx)(je.Z,{})})},"file"),(0,a.jsx)(A.Z.Link,{onClick:function(){var r;(r=at.current)===null||r===void 0||r.show(t.Id)},children:(0,a.jsx)(H.Z,{title:o.FD.format("listManageEdit"),children:(0,a.jsx)(Le.Z,{})})},"edit")]})}}],rowKey:"Id",request:function(){var h=m()(c()().mark(function s(t,u,i){var n,r,l,p,x,S;return c()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,$.IE)({siteTitle:t.title,image:t.image});case 2:return r=f.sent,l="",p=[],f.next=7,(0,g.e1)({showCompose:!0,showSwarm:!0});case 7:if(x=f.sent,ct(x.data.list),S=[],S=r.data.list.map(function(d){var I=r.data.siteList.find(function(D){return D.containerInfo&&D.containerInfo.Id==d.Id&&D.siteTitle!=""});if(I&&d.Names.unshift(I.siteTitle),d.Labels&&d.Labels[ee.fu]&&d.Names.unshift(d.Labels[ee.fu]),d.DPExtend={domainList:r.data.domainList.filter(function(D,de){return d.Names.includes(D.containerId)}).map(function(D){return D.setting.enableSSL?"https://"+D.serverName:"http://"+D.serverName}),tag:[]},d.Labels&&d.Labels["com.docker.compose.project"]){var w;(w=d.DPExtend.tag)===null||w===void 0||w.push((0,K.fi)(d.Labels["com.docker.compose.project"],"dpanel-c-"))}if(d.Labels&&d.Labels["com.docker.swarm.service.name"]){var U;(U=d.DPExtend.tag)===null||U===void 0||U.push(d.Labels["com.docker.swarm.service.name"])}return x.data.list.forEach(function(D){D.item&&D.item.forEach(function(de){if(d.Names.includes(de.name)&&d.DPExtend){var se;(se=d.DPExtend.tag)===null||se===void 0||se.push(D.tag)}})}),d}),!t.tag){f.next=15;break}if(S.forEach(function(d){var I;!((I=d.DPExtend)===null||I===void 0)&&I.tag&&d.DPExtend.tag.forEach(function(w){t.tag.includes(w)&&p.push.apply(p,k()(d.Names))})}),p.length!=0){f.next=15;break}return f.abrupt("return",{data:[],success:!0,total:0});case 15:return l!=""?S=S.filter(function(d){var I=!1;return d.Names.forEach(function(w){w.startsWith("/"+l)&&(I=!0)}),I}):p&&p.length>0&&(S=S.filter(function(d){var I=!1;return d.Names.forEach(function(w){p.includes(w)&&(I=!0)}),I})),(0,B.Cz)({follow:!1}).then(function(d){it(d.data.list)}),f.abrupt("return",{data:(n=S)!==null&&n!==void 0?n:[],success:!0,total:r.data.list.length});case 18:case"end":return f.stop()}},s)}));return function(s,t,u){return h.apply(this,arguments)}}(),rowSelection:Q.canSeeContainerListManage&&{defaultSelectedRowKeys:[],alwaysShowAlert:!0},quickToolbarRender:function(s){var t=s.selectedRows,u=s.loading,i=s.finish;return[(0,a.jsx)(y.Z,{type:Be.W6.CONTAINER,selected:t!=null?t:[],onSuccess:function(){return ae(G+1),!0}},"dataPermission"),(0,a.jsx)(b.u,{showProTips:!0,access:["canSeeEnableCe","canSeeContainerListManageOp"],children:function(r){var l=r.canSeeEnableCe,p=r.canSeeContainerListManageOp;return p&&(0,a.jsx)(ie.Z,{buttonProps:{disabled:l,type:"primary",icon:(0,a.jsx)(xe.Z,{})},action:m()(c()().mark(function x(){var S,re,f,d,I;return c()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(t){U.next=2;break}return U.abrupt("return",!1);case 2:u(),S=[],re=Z()(t);try{for(re.s();!(f=re.n()).done;)d=f.value,d&&!S.includes(d.Image)&&S.push(d.Image)}catch(D){re.e(D)}finally{re.f()}if(!S){U.next=9;break}return U.next=9,(I=ke.current)===null||I===void 0?void 0:I.pull(S).finally(function(){var D;(D=ke.current)===null||D===void 0||D.finish()});case 9:return U.abrupt("return",Promise.all(t.map(function(D){var de,se,He;return(0,$.RF)({md5:(de=D.Id)!==null&&de!==void 0?de:"",imageTag:"",enableBak:(se=(He=et.current)===null||He===void 0?void 0:He.getFieldValue("enableBak"))!==null&&se!==void 0?se:!1}).finally(function(){i(!0)})})));case 10:case"end":return U.stop()}},x)})),onSuccess:function(){return ae(G+1),!0},confirmProps:{description:(0,a.jsxs)(q.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,a.jsx)(A.Z.Text,{children:T.format("upgradeConfirm")}),(0,a.jsx)(Ee.A,{formRef:et,submitter:!1,layout:"inline",children:(0,a.jsx)(Ie.Z,{name:"enableBak",valuePropName:"checked",children:(0,a.jsx)(le.Z,{children:T.format("upgradeConfirmEnableBak")})})})]})},children:o.FD.format("listManageUpgradeBatch")})}},"batchUpgrade"),(0,a.jsx)(b.u,{access:"canSeeContainerListManageDelete",children:(0,a.jsx)(ie.Z,{action:function(){return(0,$.KK)()},buttonProps:{icon:(0,a.jsx)(Ze.Z,{})},onSuccess:function(){return ae(G+1),!0},onError:function(){var r,l;return!((r=ne.current)===null||r===void 0)&&r.reloadAndRest&&((l=ne.current)===null||l===void 0||l.reloadAndRest()),!0},confirmProps:{description:ve.format("listManagePruneTip")},children:o.FD.format("listManagePrune")})},"clear"),(0,a.jsx)(b.u,{access:"canSeeContainerListManageDelete",children:(0,a.jsx)(ie.Z,{buttonProps:{danger:!0,type:"primary",icon:(0,a.jsx)(Ue.Z,{})},action:m()(c()().mark(function n(){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Promise.all(t.map(function(){var p=m()(c()().mark(function x(S){return c()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,ee.Ct)({md5:S.Id,deleteImage:!1,deleteVolume:!1});case 2:return f.t0=f.sent,f.next=5,(0,g.rn)({name:S.Names[0]});case 5:return f.t1=f.sent,f.abrupt("return",[f.t0,f.t1]);case 7:case"end":return f.stop()}},x)}));return function(x){return p.apply(this,arguments)}}())));case 1:case"end":return l.stop()}},n)})),onSuccess:function(){return ae(G+1),!0},onError:function(){var r,l;return!((r=ne.current)===null||r===void 0)&&r.reloadAndRest&&((l=ne.current)===null||l===void 0||l.reloadAndRest()),!0},confirmProps:{showCommonConfirm:!0},children:o.FD.format("listManageDeleteBatch")})},"batchDelete")]},contextMenu:function(s){return{items:[{type:"group",label:o.FD.format("listManageManage"),key:"manage",children:[{access:"canSeeContainerList",label:(0,a.jsx)(z.C.ContextMenuItem,{buttonProps:{icon:(0,a.jsx)(We.Z,{})},action:m()(c()().mark(function t(){return c()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return s.loading(),i.abrupt("return",Promise.all(s.selectedRows.map(function(n){return(0,$.IW)({md5:n.Id,operate:"restart"})})).finally(function(){s.finish(!0)}));case 2:case"end":return i.stop()}},t)})),children:o.FD.format("listManageRestart")}),key:"restart"},{label:(0,a.jsx)(z.C.ContextMenuItem,{action:m()(c()().mark(function t(){return c()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return s.loading(),i.abrupt("return",Promise.all(s.selectedRows.map(function(n){return(0,$.IW)({md5:n.Id,operate:"stop"})})).finally(function(){s.finish(!0)}));case 2:case"end":return i.stop()}},t)})),buttonProps:{icon:(0,a.jsx)(me.Z,{})},children:o.FD.format("listManageStop")}),key:"stop"},{label:(0,a.jsx)(z.C.ContextMenuItem,{action:m()(c()().mark(function t(){return c()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return s.loading(),i.abrupt("return",Promise.all(s.selectedRows.map(function(n){return(0,$.IW)({md5:n.Id,operate:"pause"})})).finally(function(){s.finish(!0)}));case 2:case"end":return i.stop()}},t)})),buttonProps:{icon:(0,a.jsx)(R.Z,{})},children:o.FD.format("listManagePause")}),key:"pause"},{label:(0,a.jsx)(z.C.ContextMenuItem,{action:m()(c()().mark(function t(){return c()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return s.loading(),i.abrupt("return",Promise.all(s.selectedRows.map(function(n){return(0,$.IW)({md5:n.Id,operate:"unpause"})})).finally(function(){s.finish(!0)}));case 2:case"end":return i.stop()}},t)})),buttonProps:{icon:(0,a.jsx)(Fe.Z,{})},children:o.FD.format("listManageUnpause")}),key:"unpause"}]},{type:"group",label:o.FD.format("listManage"),key:"operator",children:[{label:(0,a.jsx)(z.C.ContextMenuItem,{buttonProps:{icon:(0,a.jsx)(W.Z,{}),disabled:s.isMultiple()},action:m()(c()().mark(function t(){var u;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:s.finish(!0),s.selectedRow&&((u=Ne.current)===null||u===void 0||u.show(s.selectedRow.Id));case 2:case"end":return n.stop()}},t)})),children:o.FD.format("listManageView")}),key:"view"},{label:(0,a.jsx)(z.C.ContextMenuItem,{buttonProps:{icon:(0,a.jsx)(L.Z,{}),disabled:s.isMultiple()},action:m()(c()().mark(function t(){var u;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:s.selectedRow&&((u=ze.current)===null||u===void 0||u.show(s.selectedRow.Id)),s.finish(!0);case 2:case"end":return n.stop()}},t)})),children:o.FD.format("listManageLog")}),key:"log"},{label:(0,a.jsx)(z.C.ContextMenuItem,{buttonProps:{icon:(0,a.jsx)(_e.Z,{}),disabled:s.isMultiple()||s.selectedRow&&!["running","healthy","unhealthy"].includes(s.selectedRow.State)},action:m()(c()().mark(function t(){var u;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:s.selectedRow&&((u=$e.current)===null||u===void 0||u.show({url:"/console/container/".concat(s.selectedRow.Id),title:(0,K.fi)(s.selectedRow.Names[0],"/")})),s.finish(!0);case 2:case"end":return n.stop()}},t)})),children:o.FD.format("listManageConsole")}),key:"console"},{label:(0,a.jsx)(z.C.ContextMenuItem,{buttonProps:{icon:(0,a.jsx)(je.Z,{}),disabled:s.isMultiple()||s.selectedRow&&!["running","healthy","unhealthy"].includes(s.selectedRow.State)},action:m()(c()().mark(function t(){var u,i;return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(s.selectedRow){r.next=2;break}return r.abrupt("return");case 2:i=s.selectedRow.Names.find(function(l){if(l.indexOf("/")===0)return l}),(u=Ve.current)===null||u===void 0||u.showContainer(i!=null?i:s.selectedRow.Names[0]),s.finish(!0);case 5:case"end":return r.stop()}},t)})),children:o.FD.format("listManageFilePath")}),key:"file"}]}]}}},"app-list")]})}},20578:function(Pe,V,e){e.d(V,{q:function(){return k}});var J=e(15009),Z=e.n(J),Y=e(99289),c=e.n(Y),X=e(82346);function k(){return N.apply(this,arguments)}function N(){return N=c()(Z()().mark(function m(){return Z()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,X.request)("/api/pro/container-upgrade/get-all-list",{method:"POST"});case 2:return P.abrupt("return",P.sent);case 3:case"end":return P.stop()}},m)})),N.apply(this,arguments)}}}]);
