"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1050],{80821:function(X,W,t){t.d(W,{Z:function(){return p}});var z=t(5574),B=t.n(z),k=t(24963),D=t(86738),T=t(28036),d=t(83062),$=t(67294),x=t(85893);function p(r){var K=(0,$.useState)(!1),A=B()(K,2),L=A[0],s=A[1],V=(0,$.useContext)(k.Z),c=V.lang,i=V.notice,O=V.message,w=function(){s(!0);var te=r.action();te instanceof Promise?te.then(function(U){if(s(!1),U){typeof r.onSuccess=="function"&&r.onSuccess(U);var N="";r.messageSuccess?typeof r.messageSuccess=="function"?N=r.messageSuccess(U):N=r.messageSuccess.indexOf("notification.")==0?c(r.messageSuccess):r.messageSuccess:N=c("notification.finish"),r.asynced?O.info(N):O.success(N)}}).catch(function(U){s(!1),typeof r.onError=="function"&&r.onError(U)}):s(!1)};return r.confirm?(0,x.jsx)(D.Z,{style:{width:500},title:r.confirmTitle?r.confirmTitle:c("notification.title.tip"),description:typeof r.confirm=="string"&&r.confirm.indexOf("notification.")==0?c(r.confirm):r.confirm,onConfirm:w,okText:"Yes",cancelText:"No",onOpenChange:r.confirmOnOpenChange,children:(0,x.jsx)(T.ZP,{block:r.block,disabled:r.disabled,icon:!r.children&&L?void 0:r.icon,loading:L,danger:r.danger,type:r.type,children:r.children})}):(0,x.jsx)(d.Z,{title:r.tips,children:(0,x.jsx)(T.ZP,{block:r.block,style:r.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:r.disabled,icon:!r.children&&L?void 0:r.icon,loading:L,onClick:w,danger:r.danger,type:r.type,children:r.children})})}},44349:function(X,W,t){var z=t(97857),B=t.n(z),k=t(17186),D=t(5966),T=t(86250),d=t(67294),$=t(85893),x=(0,d.forwardRef)(function(p,r){var K=(0,d.useRef)();(0,d.useImperativeHandle)(r,function(){return{addItem:function(s,V){var c,i=(c=K.current)===null||c===void 0?void 0:c.getList(),O=!1;if(i==null||i.map(function(e){if(e.name==s){O=!0;return}}),!O){var w;(w=K.current)===null||w===void 0||w.add({name:s,value:V})}},clear:function(){var s;(s=K.current)===null||s===void 0||(s=s.getList())===null||s===void 0||s.map(function(V,c){var i;(i=K.current)===null||i===void 0||i.remove(c)})}}});var A={};return p.hideCopyButton===!0&&(A.copyIconProps=!1),p.hideDeleteButton===!0&&(A.deleteIconProps=!1),(0,$.jsx)(k.u,B()(B()({initialValue:p.initialValue,label:p.label,name:p.name,actionRef:K,creatorButtonProps:p.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(p.label?p.label:p.name)}:!1,min:p.min?p.min:0},A),{},{children:function(s,V,c){return(0,$.jsx)(T.Z,{justify:p.justify,gap:p.gap,children:p.items.map(function(i){return i.render?(0,$.jsx)("div",{children:i.render&&i.render(s,V,c)},"".concat(p.name,"-").concat(i.name,"-").concat(s.key)):(0,$.jsx)(D.Z,{width:i.width,name:i.name,label:i.label,required:i.required,rules:[{required:i.required}],disabled:i.disabled,placeholder:i.placeholder},"".concat(p.name,"-").concat(i.name,"-").concat(s.key))})})}}))});W.Z=x},34879:function(X,W,t){t.d(W,{Z:function(){return D}});var z=t(97961),B=t(1677),k=t(85893);function D(T){return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(B.Z,{max:1,title:T.title,label:T.label,required:T.required,rules:[{required:T.required}],fieldProps:{name:"file",accept:T.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function($){return new Promise(function(x){var p;(0,z._2)({path:(p=$.response.data.path)!==null&&p!==void 0?p:""}).then(function(r){x(!0)})})}},name:T.name})})}},24963:function(X,W,t){var z=t(67294),B=(0,z.createContext)({});W.Z=B},78820:function(X,W,t){t.r(W),t.d(W,{default:function(){return _e}});var z=t(5574),B=t.n(z),k=t(19632),D=t.n(k),T=t(15009),d=t.n(T),$=t(99289),x=t.n($),p=t(24963),r=t(87662),K=t(88641),A=t(38345),L=t(97269),s=t(5966),V=t(63434),c=t(67294),i=t(42075),O=t(80821),w=t(68602),e=t(85893);function te(){var E=(0,c.useRef)(),F=(0,c.useContext)(p.Z),P=F.message,u=function(){var M=x()(d()().mark(function I(){var l,C,h,S,f,R,Z;return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,r.pe)({groupName:"setting",name:"emailServer"});case 2:Z=n.sent,Z.data.setting.value.emailServer&&((l=E.current)===null||l===void 0||l.setFieldsValue({host:(C=Z.data.setting.value.emailServer.host)!==null&&C!==void 0?C:"",port:(h=Z.data.setting.value.emailServer.port)!==null&&h!==void 0?h:"",email:(S=Z.data.setting.value.emailServer.email)!==null&&S!==void 0?S:"",code:(f=Z.data.setting.value.emailServer.code)!==null&&f!==void 0?f:"",status:(R=Z.data.setting.value.emailServer.status)!==null&&R!==void 0?R:[]}));case 4:case"end":return n.stop()}},I)}));return function(){return M.apply(this,arguments)}}();return(0,e.jsx)(A.Z,{direction:"column",gutter:[0,10],ghost:!0,children:(0,e.jsx)(A.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(K.Z,{}),subTitle:"\u90AE\u4EF6\u670D\u52A1",children:(0,e.jsxs)(L.A,{layout:"horizontal",labelAlign:"right",labelCol:{span:3,offset:0},formRef:E,onInit:x()(d()().mark(function M(){return d()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return u(),l.abrupt("return",!0);case 2:case"end":return l.stop()}},M)})),submitter:{render:function(I,l){return[].concat(D()(l),[(0,e.jsx)(O.Z,{messageSuccess:"\u6D4B\u8BD5\u90AE\u4EF6\u5DF2\u53D1\u9001\u81F3\u53D1\u4EF6\u90AE\u7BB1\uFF0C\u5982\u672A\u6536\u5230\uFF0C\u8BF7\u68C0\u67E5\u90AE\u7BB1\u914D\u7F6E\u662F\u5426\u6B63\u786E",action:x()(d()().mark(function C(){var h;return d()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,w.jC)((h=E.current)===null||h===void 0?void 0:h.getFieldsValue());case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},C)})),children:"\u6D4B\u8BD5"},"testEmail")])}},onFinish:function(){var M=x()(d()().mark(function I(l){var C,h;return d()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return h={groupName:"setting",name:"emailServer",value:{emailServer:{host:l.host,port:l.port,email:l.email,code:l.code}}},f.next=3,(0,r.KU)(h);case 3:return(C=E.current)===null||C===void 0||C.resetFields(),u(),P.success("\u4FEE\u6539\u90AE\u4EF6\u914D\u7F6E\u6210\u529F"),f.abrupt("return",!0);case 7:case"end":return f.stop()}},I)}));return function(I){return M.apply(this,arguments)}}(),children:[(0,e.jsx)(s.Z,{label:"SMTP\u670D\u52A1\u5668\u5730\u5740",name:"host",placeholder:"\u4F8B\u5982:smtp.163.com",required:!0,rules:[{required:!0}]}),(0,e.jsx)(s.Z,{label:"SMTP\u670D\u52A1\u5668\u7AEF\u53E3",name:"port",placeholder:"\u53D1\u9001\u90AE\u4EF6\u7AEF\u53E3\uFF0C\u901A\u5E38\u4E3A465",required:!0,rules:[{required:!0}]}),(0,e.jsx)(s.Z,{label:"SMTP\u6388\u6743\u7801",name:"code",width:"lg",placeholder:"SMTP\u6388\u6743\u7801",required:!0,rules:[{required:!0}],addonAfter:(0,e.jsxs)(i.Z,{children:[(0,e.jsx)("a",{target:"_blank",href:"https://service.mail.qq.com/detail/0/75",children:"QQ\u90AE\u7BB1\u6388\u6743\u7801"}),(0,e.jsx)("a",{target:"_blank",href:"https://help.mail.163.com/faqDetail.do?code=d7a5dc8471cd0c0e8b4b8f4f8e49998b374173cfe9171305fa1ce630d7f67ac286624f309a1a7089",children:"163\u90AE\u7BB1\u6388\u6743\u7801"})]})}),(0,e.jsx)(s.Z,{label:"\u53D1\u4EF6\u90AE\u7BB1",name:"email",placeholder:"\u53D1\u4EF6\u90AE\u7BB1\u5730\u5740",required:!0,rules:[{required:!0}]}),(0,e.jsx)(s.Z,{label:"\u90AE\u4EF6\u6807\u9898",name:"subject",placeholder:"\u90AE\u4EF6\u6807\u9898",required:!0,rules:[{required:!0}]}),(0,e.jsx)(V.Z.Group,{name:"status",label:"\u5F00\u542F\u529F\u80FD",options:[{label:"\u6CE8\u518C",value:"register"}]})]})})})}var U=t(82346);function N(E){return ae.apply(this,arguments)}function ae(){return ae=x()(d()().mark(function E(F){return d()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,U.request)("/api/pro/two-fa/enable",{method:"POST",data:F}));case 1:case"end":return u.stop()}},E)})),ae.apply(this,arguments)}function me(){return ue.apply(this,arguments)}function ue(){return ue=x()(d()().mark(function E(){return d()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,U.request)("/api/pro/two-fa/get-setting",{method:"POST"}));case 1:case"end":return P.stop()}},E)})),ue.apply(this,arguments)}var fe=t(29177),he=t(86548),ve=t(97937),ge=t(12119),q=t(97462),se=t(52688),Q=t(62370),le=t(28036),pe=t(35930);function be(){var E=(0,c.useRef)(),F=(0,U.useModel)("@@initialState"),P=F.initialState,u=F.loading,M=F.error,I=F.refresh,l=F.setInitialState,C=(0,c.useContext)(p.Z),h=C.message,S=C.notice,f=C.lang,R=(0,c.useRef)(),Z=(0,c.useState)(0),o=B()(Z,2),n=o[0],v=o[1],b=(0,U.useAccess)();return(0,c.useEffect)(function(){!b.canSeeEnableCe&&me().then(function(a){var g;(g=R.current)===null||g===void 0||g.setFieldsValue({enable:a.data.enable,email:a.data.email,qrcode:a.data.qrcode})})},[n]),(0,e.jsxs)(A.Z,{direction:"column",gutter:[0,10],ghost:!0,children:[(0,e.jsx)(A.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(fe.Z,{}),subTitle:"\u7BA1\u7406\u5458",children:(0,e.jsxs)(L.A,{layout:"horizontal",labelAlign:"right",labelCol:{span:3,offset:0},formRef:E,onFinish:function(){var a=x()(d()().mark(function g(m){var j,y;return d()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,r.Jn)({username:m.username,password:m.password,newPassword:m.newPassword});case 2:if(j=_.sent,!(j&&j.data)){_.next=9;break}return(y=E.current)===null||y===void 0||y.resetFields(),h.success("\u4FEE\u6539\u7BA1\u7406\u5458\u7528\u6237\u540D\u548C\u5BC6\u7801\u6210\u529F"),localStorage.removeItem("token"),I(),_.abrupt("return",!0);case 9:case"end":return _.stop()}},g)}));return function(g){return a.apply(this,arguments)}}(),children:[(0,e.jsx)(q.Z,{name:["enableUsername"],children:function(g){var m=g.enableUsername;return(0,e.jsx)(s.Z,{label:"\u7528\u6237\u540D",name:"username",style:{width:"80%"},initialValue:P==null?void 0:P.user.username,disabled:!m,addonAfter:[(0,e.jsx)(le.ZP,{type:"link",hidden:!!m,icon:(0,e.jsx)(he.Z,{}),onClick:function(){var y;(y=E.current)===null||y===void 0||y.setFieldValue("enableUsername",!0)}},"editBtn"),(0,e.jsx)(le.ZP,{type:"link",hidden:!m,icon:(0,e.jsx)(ve.Z,{}),onClick:function(){var y;(y=E.current)===null||y===void 0||y.setFieldValue("enableUsername",!1)}},"closeBtn")]},"username")}}),(0,e.jsx)(s.Z.Password,{label:"\u5F53\u524D\u5BC6\u7801",name:"password",placeholder:"\u8F93\u5165\u7BA1\u7406\u5458\u5F53\u524D\u5BC6\u7801",rules:[{required:!0}]},"password"),(0,e.jsx)(s.Z.Password,{label:"\u65B0\u5BC6\u7801",name:"newPassword"},"newPasword"),(0,e.jsx)(q.Z,{name:["newPassword"],children:function(g){var m=g.newPassword;return(0,e.jsx)(s.Z.Password,{label:"\u786E\u8BA4\u65B0\u5BC6\u7801",name:"newPassword2",dependencies:["newPassword"],rules:[{required:typeof m!="undefined"&&m!=""},function(j){var y=j.getFieldValue;return{validator:function(_,ce){return!ce||y("newPassword")===ce?Promise.resolve():Promise.reject(new Error("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4"))}}}]},"newPasword2")}})]})}),!b.canSeeEnableCe&&(0,e.jsx)(A.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(ge.Z,{}),subTitle:"\u767B\u5F55\u53CC\u56E0\u7D20\u914D\u7F6E",children:(0,e.jsxs)(L.A,{onFinish:function(){var a=x()(d()().mark(function g(m){var j,y;return d()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,N({email:m.email,enable:m.enable});case 2:j=_.sent,j&&j.data.qrcode&&((y=R.current)===null||y===void 0||y.setFieldValue("qrcode",j.data.qrcode)),v(n+1);case 5:case"end":return _.stop()}},g)}));return function(g){return a.apply(this,arguments)}}(),formRef:R,layout:"horizontal",labelAlign:"right",labelCol:{span:3,offset:0},children:[(0,e.jsx)(se.Z,{label:"\u5F00\u542F",name:"enable"}),(0,e.jsx)(s.Z,{label:"\u90AE\u7BB1",name:"email",placeholder:"\u8BF7\u8F93\u5165\u4F60\u7684\u90AE\u7BB1",rules:[{required:!0},{type:"email"}]}),(0,e.jsx)(Q.Z,{name:"qrcode",hidden:!0}),(0,e.jsx)(q.Z,{name:["qrcode"],children:function(g){var m=g.qrcode;if(m)return(0,e.jsx)(Q.Z,{label:"\u7ED1\u5B9A\u4E8C\u7EF4\u7801",tooltip:"\u4F7F\u7528\u652F\u6301 2fa \u7684\u9A8C\u8BC1 App \u626B\u7801\u8BE5\u4E8C\u7EF4\u7801",children:(0,e.jsx)(pe.Z,{style:{border:"#d1d9e0b3 solid 1px",padding:"10px",borderRadius:"10px"},width:200,src:"data:image/png;base64,".concat(m)})})}})]})})]})}var Ee=t(43215);function je(){var E=(0,c.useRef)(),F=(0,c.useContext)(p.Z),P=F.message,u=F.notice,M=F.lang,I=function(){var l=x()(d()().mark(function C(){var h,S,f,R;return d()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,r.pe)({groupName:"setting",name:"server"});case 2:f=o.sent,(h=E.current)===null||h===void 0||h.setFieldsValue({serverIp:(S=f.data.setting.value.serverIp)!==null&&S!==void 0?S:""}),f.data.setting.value.requestTimeout&&((R=E.current)===null||R===void 0||R.setFieldsValue({requestTimeout:f.data.setting.value.requestTimeout}));case 5:case"end":return o.stop()}},C)}));return function(){return l.apply(this,arguments)}}();return(0,e.jsx)(A.Z,{direction:"column",gutter:[0,10],ghost:!0,children:(0,e.jsx)(A.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(Ee.Z,{}),subTitle:"\u670D\u52A1\u5668\u5730\u5740",children:(0,e.jsx)(L.A,{layout:"horizontal",labelAlign:"right",labelCol:{span:3,offset:0},formRef:E,onInit:x()(d()().mark(function l(){return d()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return I(),h.abrupt("return",!0);case 2:case"end":return h.stop()}},l)})),onFinish:function(){var l=x()(d()().mark(function C(h){var S,f,R;return d()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return f={groupName:"setting",name:"server",value:{serverIp:h.serverIp}},h.requestTimeout&&(f.value.requestTimeout=h.requestTimeout),o.next=4,(0,r.KU)(f);case 4:return R=o.sent,(S=E.current)===null||S===void 0||S.resetFields(),I(),P.success("\u4FEE\u6539\u670D\u52A1\u5668\u914D\u7F6E\u6210\u529F"),o.abrupt("return",!0);case 9:case"end":return o.stop()}},C)}));return function(C){return l.apply(this,arguments)}}(),children:(0,e.jsx)(s.Z,{tooltip:"\u8BBE\u7F6E\u5BBF\u4E3B\u673A\u7684Ip\u6216\u662F\u57DF\u540D\uFF0C\u7528\u4E8E\u901A\u8FC7\u7AEF\u53E3\u7684\u5F62\u5F0F\u8BBF\u95EE\u5BB9\u5668\u3002\u652F\u6301IpV4\u53CAIpV6",label:"\u5BB9\u5668\u7AEF\u53E3\u8BBF\u95EE\u5730\u5740",name:"serverIp",placeholder:"\u4F8B\u5982:192.168.1.25\u30012001:db8:1::2\u3001example.com"})})})})}var xe={xs:6,sm:6,md:6,lg:3,xl:3,xxl:3,offset:0},oe=t(43425),ee=t(86615),Fe=t(64317),de=t(86125),Ce=t(184),G=t(24739),Se=t(25054),re=t(31199),Be=t(90672),Pe=t(51663),ye=t(9361),Ae=t(21532),Ze=t(86250),ie=t(34879),Te=t(44349),ne=t(65451),J=function(F){return(0,e.jsx)(Q.Z,{name:F.name,label:F.label,tooltip:F.tooltip,children:(0,e.jsx)(Pe.Z,{showText:function(u){return u.toHexString()},allowClear:!0,presets:[{label:"\u9884\u8BBE\u989C\u8272",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})})},Y={colorPrimary:"",colorTextBase:"",colorLink:"",colorBgContainer:"",colorBorder:"",colorBgElevated:"",colorBorderSecondary:"colorBorder"},Ie=["borderRadius","wireframe"],we=(0,c.forwardRef)(function(E,F){(0,c.useImperativeHandle)(F,function(){return{show:function(){I(!0)},reset:function(){var o;(o=l.current)===null||o===void 0||o.resetFields(["siteLogo","siteTitle","siteCopyright","siteLink","bgImage","bgSize"])}}});var P=(0,c.useState)(!1),u=B()(P,2),M=u[0],I=u[1],l=(0,c.useRef)(),C=(0,c.useContext)(p.Z),h=C.message,S=C.lang,f=ye.Z.useToken(),R=f.token;return(0,e.jsx)(Ae.ZP,{children:(0,e.jsxs)(Ce.a,{drawerProps:{forceRender:!0},submitter:{render:function(o,n){return(0,e.jsx)(i.Z,{children:n[1]})}},title:"\u81EA\u5B9A\u4E49\u4E3B\u9898",formRef:l,open:M,onOpenChange:function(o){var n;(n=l.current)===null||n===void 0||n.resetFields(["bgImageUpload","siteLogoUpload"]),o&&((0,ne.Py)().then(function(v){var b=v.data.config;if(b){var a;if((a=l.current)===null||a===void 0||a.setFieldsValue({siteLogo:b.siteLogo,siteTitle:b.siteTitle,siteCopyright:b.siteCopyright,siteLink:b.siteLink,bgImage:b.bgImage,loginLogo:b.loginLogo}),!b.bgImage||!b.bgImage.width||b.bgImage.width=="100%"){var g;(g=l.current)===null||g===void 0||g.setFieldValue("bgSize","full")}else{var m;(m=l.current)===null||m===void 0||m.setFieldValue("bgSize","default")}}}),Object.keys(Y).map(function(v){var b=v;Y[v]!=""&&(b=Y[v]),l!=null&&l.current&&(l==null||l.current.setFieldValue(v,R[b]))})),I(o)},name:"theme-user",onFinish:function(){var Z=x()(d()().mark(function o(n){var v,b,a;return d()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return a={token:{},bgImage:n.bgImage,siteLink:n.siteLink,siteTitle:(v=n.siteTitle)!==null&&v!==void 0?v:"",siteCopyright:n.siteCopyright,siteLogo:(b=n.siteLogo)!==null&&b!==void 0?b:"",loginLogo:n.loginLogo},n.siteLogoUpload&&n.siteLogoUpload.length>0&&(a.siteLogo=n.siteLogoUpload[0].response.data.path),a.bgImage||(a.bgImage={}),n.bgImageUpload&&n.bgImageUpload.length>0&&(a.bgImage.src=n.bgImageUpload[0].response.data.path),a.bgImage.width=n.bgSize=="full"?"100%":"",n.loginLogoUpload&&n.loginLogoUpload.length>0&&(a.loginLogo=n.loginLogoUpload[0].response.data.path),Object.keys(Y).map(function(j){a.token||(a.token={});var y=j;Y[j]!=""&&(y=Y[j]);var H=l.current&&l.current.getFieldValue(y);H&&H.toHexString?H.cleared||(a.token[j]=H.toHexString()):a.token[j]=H}),Ie.map(function(j){a.token||(a.token={});var y=l.current&&l.current.getFieldValue(j);a.token[j]=y}),m.next=10,(0,ne.Z8)(a);case 10:return E.onFinish&&E.onFinish(),h.success(S("notification.finishTheme")),m.abrupt("return",!0);case 13:case"end":return m.stop()}},o)}));return function(o){return Z.apply(this,arguments)}}(),children:[(0,e.jsx)(G.UW,{title:"\u76AE\u80A4\u8272\u7CFB",children:J({name:"colorPrimary",label:"\u54C1\u724C\u8272",tooltip:"\u54C1\u724C\u8272\u662F\u4F53\u73B0\u4EA7\u54C1\u7279\u6027\u548C\u4F20\u64AD\u7406\u5FF5\u6700\u76F4\u89C2\u7684\u89C6\u89C9\u5143\u7D20\u4E4B\u4E00\u3002\u5728\u4F60\u5B8C\u6210\u54C1\u724C\u4E3B\u8272\u7684\u9009\u53D6\u4E4B\u540E\uFF0C\u4F1A\u81EA\u52A8\u5E2E\u4F60\u751F\u6210\u4E00\u5957\u5B8C\u6574\u7684\u8272\u677F\uFF0C\u5E76\u8D4B\u4E88\u5B83\u4EEC\u6709\u6548\u7684\u8BBE\u8BA1\u8BED\u4E49"})}),(0,e.jsxs)(G.UW,{children:[J({name:"colorBgContainer",label:"\u4E3B\u7A97\u53E3\u80CC\u666F\u8272\u53CA\u900F\u660E\u5EA6"}),J({name:"colorBgElevated",label:"\u5F39\u51FA\u7A97\u80CC\u666F\u8272\u53CA\u900F\u660E\u5EA6"})]}),(0,e.jsxs)(G.UW,{children:[J({name:"colorTextBase",label:"\u57FA\u7840\u6587\u672C"}),J({name:"colorLink",label:"\u94FE\u63A5\u6587\u672C"}),J({name:"colorBorder",label:"\u8FB9\u6846\u8272"})]}),(0,e.jsx)(G.UW,{title:"\u98CE\u683C",children:(0,e.jsxs)(Ze.Z,{gap:40,children:[(0,e.jsx)(se.Z,{label:"\u7EBF\u6846\u5316",name:"wireframe",initialValue:!1}),(0,e.jsx)(Se.Z,{min:1,max:16,label:"\u5706\u89D2",initialValue:6,name:"borderRadius"})]})}),(0,e.jsx)(G.UW,{title:"\u9762\u677F"}),(0,e.jsx)(s.Z,{label:"\u6807\u9898",name:"siteTitle",placeholder:"\u5C55\u793A\u5728\u9762\u677F\u5DE6\u4E0A\u89D2\u53CA\u9875\u9762\u6807\u7B7E\uFF0C\u4E3A\u7A7A\u5219\u4E0D\u663E\u793A"}),(0,e.jsxs)(G.UW,{children:[(0,e.jsx)(ie.Z,{label:"Logo",title:"\u4E0A\u4F20 Logo",name:"siteLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(s.Z,{width:"md",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u8FDC\u7A0BUrl",name:"siteLogo"})]}),(0,e.jsxs)(G.UW,{children:[(0,e.jsx)(ie.Z,{label:"\u80CC\u666F\u56FE",title:"\u4E0A\u4F20\u80CC\u666F\u56FE",name:"bgImageUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(s.Z,{width:"md",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u8FDC\u7A0BUrl",name:["bgImage","src"]}),(0,e.jsx)(ee.Z.Group,{name:"bgSize",label:"\u5C3A\u5BF8",initialValue:"full",valueEnum:{full:"\u5168\u5C4F",default:"\u9ED8\u8BA4"}})]}),(0,e.jsx)(G.UW,{children:(0,e.jsx)(q.Z,{name:["bgSize"],children:function(o){var n=o.bgSize;if(n=="default")return(0,e.jsxs)(G.UW,{children:[(0,e.jsx)(re.Z,{width:"xs",name:["bgImage","top"],label:"\u8DDD\u9876\u90E8\u504F\u79FB\u91CF"}),(0,e.jsx)(re.Z,{width:"xs",name:["bgImage","bottom"],label:"\u8DDD\u5E95\u90E8\u504F\u79FB\u91CF"}),(0,e.jsx)(re.Z,{width:"xs",name:["bgImage","left"],label:"\u8DDD\u5DE6\u4FA7\u504F\u79FB\u91CF"}),(0,e.jsx)(re.Z,{width:"xs",name:["bgImage","right"],label:"\u8DDD\u53F3\u4FA7\u504F\u79FB\u91CF"})]})}})}),(0,e.jsx)(Te.Z,{name:"siteLink",label:"\u5E95\u90E8\u94FE\u63A5",showAddButton:!0,hideCopyButton:!0,gap:10,items:[{name:"title",label:"\u6587\u672C"},{name:"href",label:"\u94FE\u63A5"}]}),(0,e.jsx)(Be.Z,{label:"\u7248\u6743\u4FE1\u606F",name:"siteCopyright"}),(0,e.jsxs)(G.UW,{title:"\u767B\u5F55\u9875",children:[(0,e.jsx)(ie.Z,{label:"Logo",title:"Logo",name:"loginLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(s.Z,{width:"md",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u8FDC\u7A0BUrl",name:"loginLogo"})]})]})})}),Oe=we;function Re(){var E=(0,c.useRef)(),F=(0,c.useRef)(),P=(0,U.useModel)("@@initialState"),u=P.initialState,M=P.loading,I=P.error,l=P.refresh,C=P.setInitialState,h=(0,U.useAccess)(),S=(0,c.useContext)(p.Z),f=S.message,R=S.lang,Z=(0,U.useAntdConfigSetter)();return(0,c.useEffect)(function(){var o,n,v,b,a,g,m,j;(o=E.current)===null||o===void 0||o.setFieldsValue({algorithm:(n=u==null?void 0:u.theme.algorithm)!==null&&n!==void 0?n:"default",mainMenu:(v=u==null?void 0:u.theme.mainMenu)!==null&&v!==void 0?v:"top",compact:(b=u==null?void 0:u.theme.compact)!==null&&b!==void 0?b:"default",fontSize:(a=u==null?void 0:u.theme.fontSize)!==null&&a!==void 0?a:14,fontSizeConsole:(g=u==null?void 0:u.theme.fontSizeConsole)!==null&&g!==void 0?g:12,sideMenu:(m=u==null?void 0:u.theme.sideMenu)!==null&&m!==void 0?m:"default",tablePageSize:(j=u==null?void 0:u.theme.tablePageSize)!==null&&j!==void 0?j:"20"})},[u]),(0,e.jsx)(A.Z,{direction:"column",gutter:[0,10],ghost:!0,children:(0,e.jsxs)(A.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(oe.Z,{}),subTitle:"\u57FA\u672C\u914D\u7F6E",children:[!h.canSeeEnableCe&&(0,e.jsx)(Oe,{ref:F}),(0,e.jsxs)(L.A,{layout:"horizontal",labelAlign:"right",labelCol:xe,formRef:E,submitter:{render:function(n,v){return[v[1]]}},onFinish:function(){var o=x()(d()().mark(function n(v){var b;return d()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(b={algorithm:v.algorithm,mainMenu:v.mainMenu,sideMenu:v.sideMenu,compact:v.compact,fontSizeConsole:v.fontSizeConsole,fontSize:v.fontSize,tablePageSize:v.tablePageSize},v.algorithm==(u==null?void 0:u.theme.algorithm)){g.next=4;break}return g.next=4,(0,ne.H)({clearColor:!0});case 4:return localStorage.setItem("dpanel-theme",v.algorithm),localStorage.setItem("dpanel-compact",v.compact),localStorage.setItem("dpanel-pagesize",v.tablePageSize),g.next=9,(0,w.Gk)(b);case 9:f.success(R("notification.finishTheme"));case 10:case"end":return g.stop()}},n)}));return function(n){return o.apply(this,arguments)}}(),children:[(0,e.jsx)(ee.Z.Group,{name:"algorithm",label:"\u4E3B\u9898\u76AE\u80A4",initialValue:"default",radioType:"button",valueEnum:function(){var n={default:"\u4EAE\u8272",dark:"\u6697\u8272",system:"\u8DDF\u968F\u7CFB\u7EDF"};return n}}),!h.canSeeEnableCe&&(0,e.jsx)(q.Z,{name:["algorithm"],children:function(n){var v=n.algorithm;if(v!="system")return(0,e.jsx)(Q.Z,{label:"\u81EA\u5B9A\u4E49\u76AE\u80A4\u914D\u7F6E",children:(0,e.jsxs)(i.Z.Compact,{children:[(0,e.jsx)(le.ZP,{onClick:function(){var a;(a=F.current)===null||a===void 0||a.show()},icon:(0,e.jsx)(oe.Z,{}),children:"\u914D\u7F6E"}),(0,e.jsx)(O.Z,{action:x()(d()().mark(function b(){var a;return d()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,ne.H)({clearColor:!0,clearSite:!0});case 2:Z(function(j){return j.theme={token:{}},j}),(a=F.current)===null||a===void 0||a.reset(),window.location.reload();case 5:case"end":return m.stop()}},b)})),children:"\u6062\u590D\u9ED8\u8BA4"})]})})}}),(0,e.jsx)(ee.Z.Group,{name:"mainMenu",label:"\u4E3B\u83DC\u5355\u4F4D\u7F6E",initialValue:"top",radioType:"button",valueEnum:{top:"\u9876\u90E8",side:"\u4FA7\u9762"}}),(0,e.jsx)(ee.Z.Group,{name:"sideMenu",label:"\u5DE6\u4FA7\u83DC\u5355",initialValue:"default",radioType:"button",valueEnum:{default:"\u9ED8\u8BA4\u5C55\u5F00",collapse:"\u9ED8\u8BA4\u6536\u7F29"}}),(0,e.jsx)(ee.Z.Group,{name:"compact",label:"\u6587\u672C\u5E03\u5C40",initialValue:"default",radioType:"button",valueEnum:{default:"\u9ED8\u8BA4",compact:"\u7D27\u51D1"}}),(0,e.jsx)(Q.Z,{name:"fontSize",label:"\u4E3B\u9898\u5B57\u53F7",initialValue:14,children:(0,e.jsx)(de.Z,{step:2,max:30,min:8,marks:{8:"8",10:"10",12:"12",14:"14",16:"16",20:"20",26:"26",30:"20"}})}),(0,e.jsx)(Q.Z,{name:"fontSizeConsole",label:"\u63A7\u5236\u53F0\u5B57\u53F7",initialValue:12,children:(0,e.jsx)(de.Z,{step:2,max:30,min:8,marks:{8:"8",10:"10",12:"12",14:"14",16:"16",20:"20",26:"26",30:"20"}})}),(0,e.jsx)(Fe.Z,{initialValue:"20",label:"\u8868\u683C\u5206\u9875\u6570",name:"tablePageSize",valueEnum:{10:"\u6BCF\u987510\u6761",20:"\u6BCF\u987520\u6761",50:"\u6BCF\u987550\u6761",100:"\u6BCF\u9875100\u6761",all:"\u663E\u793A\u5168\u90E8"}})]})]})})}var Le=t(90078),Ue=t(92398);function _e(){var E=(0,U.useSearchParams)(),F=B()(E,2),P=F[0],u=F[1],M=(0,c.useState)("user"),I=B()(M,2),l=I[0],C=I[1],h=(0,U.useAccess)();return(0,c.useEffect)(function(){var S;C((S=P.get("tab"))!==null&&S!==void 0?S:"user")},[]),(0,e.jsx)(Le._z,{children:(0,e.jsx)(A.Z,{children:(0,e.jsx)(Ue.Z,{activeKey:l,onChange:function(f){C(f),u("tab="+f)},items:[{key:"user",label:"\u767B\u5F55\u914D\u7F6E",children:(0,e.jsx)(be,{})},{key:"theme",label:"\u754C\u9762\u914D\u7F6E",children:(0,e.jsx)(Re,{})},{key:"notice",label:"\u901A\u77E5\u670D\u52A1",children:(0,e.jsx)(te,{})},{key:"other",label:"\u5176\u5B83",children:(0,e.jsx)(je,{})}].filter(function(S){return!(h.canSeeEnableCe&&S.key=="notice")})})})})}},97961:function(X,W,t){t.d(W,{GH:function(){return K},MF:function(){return V},_2:function(){return L},fN:function(){return $},ii:function(){return d},vC:function(){return p}});var z=t(15009),B=t.n(z),k=t(99289),D=t.n(k),T=t(82346),d=[{name:"linux/amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"linux/arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"linux/i386",arch:"386",search:[]},{name:"linux/arm/v6",arch:"arm",search:[]},{name:"linux/arm/v7",arch:"arm",search:[]},{name:"linux/arm/v8",arch:"arm64",search:[]},{name:"linux/ppc64le",arch:"ppc64le",search:[]},{name:"linux/riscv64",arch:"riscv64",search:[]}];function $(i){return x.apply(this,arguments)}function x(){return x=D()(B()().mark(function i(O){return B()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,T.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:O}));case 1:case"end":return e.stop()}},i)})),x.apply(this,arguments)}function p(i){return r.apply(this,arguments)}function r(){return r=D()(B()().mark(function i(O){return B()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,T.request)("/api/app/image/import-by-container-tar",{method:"POST",data:O}));case 1:case"end":return e.stop()}},i)})),r.apply(this,arguments)}function K(i){return A.apply(this,arguments)}function A(){return A=D()(B()().mark(function i(O){return B()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,T.request)("/api/app/image/import-by-image-tar",{method:"POST",data:O}));case 1:case"end":return e.stop()}},i)})),A.apply(this,arguments)}function L(i){return s.apply(this,arguments)}function s(){return s=D()(B()().mark(function i(O){return B()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.request)("/api/common/attach/delete",{method:"POST",data:O});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},i)})),s.apply(this,arguments)}function V(){return c.apply(this,arguments)}function c(){return c=D()(B()().mark(function i(){return B()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",(0,T.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return w.stop()}},i)})),c.apply(this,arguments)}}}]);
