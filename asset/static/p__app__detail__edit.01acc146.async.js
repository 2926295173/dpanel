"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8878],{16596:function(C,o,e){e.d(o,{Z:function(){return l}});var u=e(87462),a=e(67294),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"},_=c,r=e(84089),s=function(P,O){return a.createElement(r.Z,(0,u.Z)({},P,{ref:O,icon:_}))},E=a.forwardRef(s),l=E},55809:function(C,o,e){var u=e(87462),a=e(67294),c=e(44805),_=e(84089),r=function(l,m){return a.createElement(_.Z,(0,u.Z)({},l,{ref:m,icon:c.Z}))},s=a.forwardRef(r);o.Z=s},35995:function(C,o,e){e.d(o,{Z:function(){return l}});var u=e(87462),a=e(67294),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M508 624a112 112 0 00112-112c0-3.28-.15-6.53-.43-9.74L498.26 623.57c3.21.28 6.45.43 9.74.43zm370.72-458.44L836 122.88a8 8 0 00-11.31 0L715.37 232.23Q624.91 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.7 119.43 136.55 191.45L112.56 835a8 8 0 000 11.31L155.25 889a8 8 0 0011.31 0l712.16-712.12a8 8 0 000-11.32zM332 512a176 176 0 01258.88-155.28l-48.62 48.62a112.08 112.08 0 00-140.92 140.92l-48.62 48.62A175.09 175.09 0 01332 512z"}},{tag:"path",attrs:{d:"M942.2 486.2Q889.4 375 816.51 304.85L672.37 449A176.08 176.08 0 01445 676.37L322.74 798.63Q407.82 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5z"}}]},name:"eye-invisible",theme:"filled"},_=c,r=e(84089),s=function(P,O){return a.createElement(r.Z,(0,u.Z)({},P,{ref:O,icon:_}))},E=a.forwardRef(s),l=E},31574:function(C,o,e){var u=e(87462),a=e(67294),c=e(97211),_=e(84089),r=function(l,m){return a.createElement(_.Z,(0,u.Z)({},l,{ref:m,icon:c.Z}))},s=a.forwardRef(r);o.Z=s},74842:function(C,o,e){e.d(o,{Z:function(){return l}});var u=e(87462),a=e(67294),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},_=c,r=e(84089),s=function(P,O){return a.createElement(r.Z,(0,u.Z)({},P,{ref:O,icon:_}))},E=a.forwardRef(s),l=E},60219:function(C,o,e){e.d(o,{Z:function(){return l}});var u=e(87462),a=e(67294),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},_=c,r=e(84089),s=function(P,O){return a.createElement(r.Z,(0,u.Z)({},P,{ref:O,icon:_}))},E=a.forwardRef(s),l=E},85577:function(C,o,e){var u=e(87462),a=e(67294),c=e(11721),_=e(84089),r=function(l,m){return a.createElement(_.Z,(0,u.Z)({},l,{ref:m,icon:c.Z}))},s=a.forwardRef(r);o.Z=s},60433:function(C,o,e){var u=e(87462),a=e(67294),c=e(69782),_=e(84089),r=function(l,m){return a.createElement(_.Z,(0,u.Z)({},l,{ref:m,icon:c.Z}))},s=a.forwardRef(r);o.Z=s},52688:function(C,o,e){var u=e(1413),a=e(45987),c=e(67294),_=e(35510),r=e(85893),s=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],E=c.forwardRef(function(l,m){var P=l.fieldProps,O=l.unCheckedChildren,v=l.checkedChildren,p=l.proFieldProps,h=(0,a.Z)(l,s);return(0,r.jsx)(_.Z,(0,u.Z)({valueType:"switch",fieldProps:(0,u.Z)({unCheckedChildren:O,checkedChildren:v},P),ref:m,valuePropName:"checked",proFieldProps:p,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},h))});o.Z=E},1699:function(C,o,e){e.d(o,{u:function(){return P}});var u=e(9783),a=e.n(u),c=e(97857),_=e.n(c),r=e(67294),s=e(82346),E=e(40411),l=e(42075),m=e(85893),P=function(v){var p=(0,s.useAccess)(),h=Array.isArray(v.access)?v.access:[v.access],d,g=v.fallback;if(typeof v.children=="function"?(d=v.children(h.reduce(function(M,f){return _()(_()({},M),{},a()({},f,p[f]))},{})),d||(d=g)):h.every(function(M){return p[M]})?d=v.children:d=g,!g&&d&&v.showProTips&&p.canSeeEnableCe){if(p.canSeeEnableHiddenProTips)return null;d=(0,m.jsx)(E.Z,{offset:v.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:d})}if(!g&&d&&v.showProRibbonTips&&p.canSeeEnableCe){if(p.canSeeEnableHiddenProTips)return null;d=(0,m.jsx)(E.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:d})}return v.space?(0,m.jsx)(l.Z,_()(_()({},v.space),{},{children:d})):d}},29798:function(C,o,e){e.r(o),e.d(o,{default:function(){return g}});var u=e(5574),a=e.n(u),c=e(13822),_=e(38345),r=e(82346),s=e(67294),E=e(24963),l=e(50070),m=e(37767),P=e(52031),O=e(14189),v=e(72409),p=e(14245),h=e(1699),d=e(85893);function g(){var M=(0,s.useContext)(E.Z),f=M.loading,A=(0,s.useContext)(l.AppDetailContext),L=(0,r.useParams)(),U=(0,s.useState)(),I=a()(U,2),t=I[0],i=I[1],R=(0,s.useState)(1),n=a()(R,2),S=n[0],Q=n[1],Z=(0,r.useNavigate)();return(0,s.useEffect)(function(){var W;f.show(),A.reload(),(0,c.jV)({md5:(W=L.id)!==null&&W!==void 0?W:""}).then(function(T){T.data&&(T.data.info.HostConfig.NetworkMode=="host"&&T.data.info.Config.ExposedPorts&&Object.keys(T.data.info.Config.ExposedPorts).map(function(B){T.data.info.NetworkSettings.Ports[B]=[{HostIp:"0.0.0.0",HostPort:B.substring(0,B.indexOf("/"))}]}),i(T.data))}).finally(function(){f.destroy()})},[S]),(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(_.Z,{direction:"column",gutter:[0,10],children:[(t==null?void 0:t.info)&&(0,d.jsx)(O.Z,{data:t.info}),(t==null?void 0:t.info)&&(0,d.jsx)(h.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,d.jsx)(v.Z,{data:t,checkContainerUpgrade:function(){Z("/app/list",{state:{page:localStorage.getItem("dpanel-page-compose-list")}})}})}),t&&(0,d.jsx)(m.Z,{data:t}),t&&(0,d.jsx)(P.Z,{data:t==null?void 0:t.info}),t&&(0,d.jsx)(p.Z,{data:t.info})]})})}},50070:function(C,o,e){e.r(o),e.d(o,{AppDetailContext:function(){return A},default:function(){return L}});var u=e(15009),a=e.n(u),c=e(99289),_=e.n(c),r=e(5574),s=e.n(r),E=e(1699),l=e(24963),m=e(13822),P=e(36146),O=e(55809),v=e(90078),p=e(82346),h=e(25593),d=e(28036),g=e(50136),M=e(67294),f=e(85893),A=(0,M.createContext)({});function L(){var U,I=(0,M.useContext)(l.Z),t=I.loading,i=(0,p.useParams)(),R=(0,p.useSearchParams)(),n=s()(R,2),S=n[0],Q=n[1],Z=(U=S.get("tab"))!==null&&U!==void 0?U:"edit",W=(0,M.useState)("edit"),T=s()(W,2),B=T[0],k=T[1],y=(0,p.useNavigate)(),X=(0,M.useState)(1),H=s()(X,2),V=H[0],J=H[1],$=[{label:(0,f.jsx)(p.Link,{to:"/app/detail/edit/".concat(i.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,f.jsx)(p.Link,{to:"/app/detail/network/".concat(i.id,"?tab=network"),children:"\u7F51\u7EDC\u7BA1\u7406"}),key:"network"},{label:(0,f.jsx)(h.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){y("/app/detail/file/".concat(i.id,"?tab=file"))}},{label:(0,f.jsx)(h.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){y("/app/detail/log/".concat(i.id,"?tab=log"))}},{label:(0,f.jsx)(h.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){y("/app/detail/stat/".concat(i.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,f.jsx)(O.Z,{}),disabled:!0}],Y=(0,M.useState)($),N=s()(Y,2),w=N[0],q=N[1];(0,M.useEffect)(function(){t.show(),k(Z);var j=function(){var x=_()(a()().mark(function G(){var z,F,K;return a()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return z=$,D.prev=1,D.next=4,(0,m.jV)({md5:(F=i.id)!==null&&F!==void 0?F:""});case 4:K=D.sent,z.map(function(b){return b.key=="containerName"&&(b.label=K.data.info.Name),(!K.data.info.State.Running||K.data.info.State.Restarting)&&(b.key=="file"||b.key=="stat")&&(b.disabled=!0),b}),q(z),D.next=13;break;case 9:return D.prev=9,D.t0=D.catch(1),y("/app/list"),D.abrupt("return");case 13:return D.prev=13,t.destroy(),D.finish(13);case 16:case"end":return D.stop()}},G,null,[[1,9,13,16]])}));return function(){return x.apply(this,arguments)}}();j()},[V,i]);var ee=function(x){k(x.key)};return(0,f.jsx)(A.Provider,{value:{reload:function(){J(V+1)}},children:(0,f.jsxs)(v._z,{header:{extra:[(0,f.jsx)(E.u,{access:"canSeeContainerListManageCreate",children:(0,f.jsx)(p.Link,{to:"/app/create/image",children:(0,f.jsx)(d.ZP,{type:"primary",children:P.Ob.format("container.create")})})},"create")]},children:[(0,f.jsx)(g.Z,{mode:"horizontal",onClick:ee,selectedKeys:[B],items:w}),(0,f.jsx)(p.Outlet,{})]})})}},62597:function(C,o,e){e.d(o,{$G:function(){return s},Ct:function(){return M},Tb:function(){return O},XH:function(){return p},cl:function(){return m},fp:function(){return l},iE:function(){return d},xb:function(){return A},ze:function(){return U}});var u=e(15009),a=e.n(u),c=e(99289),_=e.n(c),r=e(82346);function s(t){return E.apply(this,arguments)}function E(){return E=_()(a()().mark(function t(i){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,r.request)("/api/app/site/create-by-image",{method:"POST",data:i}));case 1:case"end":return n.stop()}},t)})),E.apply(this,arguments)}var l={EnvValueRuleRequired:1,EnvValueRuleDisabled:2,EnvValueTypeNumber:1024,EnvValueTypeText:2048,EnvValueTypeSelect:4096,EnvValueTypeSelectMultiple:8192};function m(t){return P.apply(this,arguments)}function P(){return P=_()(a()().mark(function t(i){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,r.request)("/api/app/site/get-list",{method:"POST",data:i}));case 1:case"end":return n.stop()}},t)})),P.apply(this,arguments)}function O(t){return v.apply(this,arguments)}function v(){return v=_()(a()().mark(function t(i){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i.download=!1,n.next=3,(0,r.request)("/api/app/log/run",{method:"POST",data:i});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},t)})),v.apply(this,arguments)}function p(t){return h.apply(this,arguments)}function h(){return h=_()(a()().mark(function t(i){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i.download=!0,n.next=3,(0,r.request)("/api/app/log/run",{method:"POST",data:i,responseType:"blob"});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},t)})),h.apply(this,arguments)}function d(t){return g.apply(this,arguments)}function g(){return g=_()(a()().mark(function t(i){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i.id=String(i.id),n.next=3,(0,r.request)("/api/app/site/get-detail",{data:i,method:"POST"});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},t)})),g.apply(this,arguments)}function M(t){return f.apply(this,arguments)}function f(){return f=_()(a()().mark(function t(i){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,r.request)("/api/app/container/delete",{method:"POST",data:i}));case 1:case"end":return n.stop()}},t)})),f.apply(this,arguments)}function A(t){return L.apply(this,arguments)}function L(){return L=_()(a()().mark(function t(i){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,r.request)("/api/app/site/delete",{method:"POST",data:i}));case 1:case"end":return n.stop()}},t)})),L.apply(this,arguments)}function U(t){return I.apply(this,arguments)}function I(){return I=_()(a()().mark(function t(i){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,r.request)("/api/app/container/ignore",{method:"POST",data:i}));case 1:case"end":return n.stop()}},t)})),I.apply(this,arguments)}}}]);
