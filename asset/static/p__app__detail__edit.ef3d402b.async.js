"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8878],{76428:function(Be,U,n){n.d(U,{Z:function(){return D}});var Y=n(25593),m=n(67294),z=n(85893);function D(W){return(0,z.jsx)(Y.Z.Text,{copyable:!0,children:W.title})}},78498:function(Be,U,n){n.d(U,{Z:function(){return I}});var Y=n(25035),m=n(42075),z=n(83062),D=n(67294),W=n(85893);function I(V){return(0,W.jsxs)(m.Z,{children:[V.title,(0,W.jsx)(z.Z,{title:V.help,children:(0,W.jsx)(Y.Z,{})})]})}},50479:function(Be,U,n){n.r(U),n.d(U,{default:function(){return st}});var Y=n(15009),m=n.n(Y),z=n(99289),D=n.n(z),W=n(5574),I=n.n(W),V=n(14946),de=n(29158),Ze=n(48689),k=n(38345),H=n(10641),g=n(42075),R=n(25593),De=n(83062),s=n(67294),c=n(80821),x=n(60335),ce=n(78498),e=n(85893),me=(0,s.forwardRef)(function(y,T){var B=(0,s.useRef)();return(0,s.useImperativeHandle)(T,function(){return{reload:function(){var p;!((p=B.current)===null||p===void 0)&&p.reloadAndRest&&B.current.reloadAndRest()}}}),(0,e.jsx)(k.Z,{title:(0,e.jsx)(de.Z,{}),subTitle:"\u5BB9\u5668\u5173\u8054\u4FE1\u606F",ghost:!0,children:(0,e.jsx)(H.Z,{scroll:{x:"max-content"},rowKey:"key",actionRef:B,pagination:!1,options:!1,columns:[{title:"\u6240\u5C5E\u7F51\u7EDC",key:"name",dataIndex:"networkName",width:300},{title:"\u5BB9\u5668\u540D\u79F0",key:"containerName",dataIndex:"containerName"},{title:(0,e.jsx)(ce.Z,{title:"hostname",help:"\u63D0\u4F9B\u5BB9\u5668\u5185\u90E8\u8BBF\u95EE"}),key:"hostName",render:function(p,f,j){return f.hostName?(0,e.jsx)(g.Z,{direction:"vertical",children:f.hostName.map(function(h){if(h)return(0,e.jsx)(R.Z.Text,{copyable:!0,keyboard:!0,children:h},h)})}):(0,e.jsx)(e.Fragment,{})}},{title:"Ip",key:"ip",render:function(p,f,j,h,S){return(0,e.jsxs)(g.Z,{direction:"vertical",children:[(0,e.jsx)("span",{children:f.networkInfo.IPv4Address}),f.networkInfo.IPv6Address&&(0,e.jsx)("span",{children:f.networkInfo.IPv6Address})]})}},{title:"\u64CD\u4F5C",key:"option",width:100,render:function(p,f,j,h,S){return(0,e.jsx)(g.Z,{children:f.key!="bridge"&&f.key!="none"&&f.key!="host"&&f.networkName!=""&&(0,e.jsx)(De.Z,{title:"\u9000\u51FA\u7F51\u7EDC",children:(0,e.jsx)(c.Z,{confirm:"\u786E\u8BA4\u9000\u51FA\u8BE5\u7F51\u7EDC\uFF1F",type:"link",action:function(){var Z;return(0,V.t9)({name:f.networkName,containerName:(Z=y.containerName)!==null&&Z!==void 0?Z:""})},messageSuccess:"leave",onSuccess:function(){var Z,r;!((Z=B.current)===null||Z===void 0)&&Z.reloadAndRest&&((r=B.current)===null||r===void 0||r.reloadAndRest())},children:(0,e.jsx)(Ze.Z,{})})})})}}],request:function(){var E=D()(m()().mark(function p(f,j,h){var S,A;return m()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,x.jV)({md5:y.containerName});case 2:return S=r.sent,r.next=5,(0,V._3)({name:Object.keys(S.data.info.NetworkSettings.Networks)});case 5:return A=r.sent,r.abrupt("return",{data:A.data.list,success:!0,total:A.data.list.length});case 7:case"end":return r.stop()}},p)}));return function(p,f,j){return E.apply(this,arguments)}}(),search:!1,expandable:{defaultExpandAllRows:!0,expandRowByClick:!1,defaultExpandedRowKeys:["bridge"]}})})}),ve=me,fe=n(44771),b=n(76428),ye=n(62597),ae=n(43425),he=n(74842),Se=n(87784),Pe=n(33160),Re=n(30159),pe=n(58638),ge=n(60219),ue=n(86548),Q=n(57132),Ae=n(50888),xe=n(16596),je=n(45605),be=n(238),Te=n(32319),re=n(16664),X=n(97269),q=n(62370),G=n(54006),J=n(96074),_=n(84567),N=n(65233),L=n(14726),Fe=n(85418),le=n(40411),l=n(26412),ie=n(66309),ee=n(93162),Oe=n(87662),K=n(75516),F=n(28031),Ve=n(85576),Ge=n(63490),we=n(37476),Ye=n(86615),ze=n(97462),Je=n(5966),Qe=n(2831);function Xe(y){var T=Ve.Z.useModal(),B=I()(T,2),E=B[0],p=B[1],f=(0,s.useState)(),j=I()(f,2),h=j[0],S=j[1],A=(0,s.useRef)(),Z="";return(0,s.useEffect)(function(){var r,t;(0,Qe.aF)().then(function(O){S(O.data.dpanel.containerInfo)}),Z=(r=localStorage.getItem("backupPath"))!==null&&r!==void 0?r:"",(t=A.current)===null||t===void 0||t.setFieldValue("backupPath",Z)},[]),(0,e.jsxs)(e.Fragment,{children:[p,(0,e.jsxs)(we.Y,{modalProps:{forceRender:!0},formRef:A,title:"\u5907\u4EFD\u5BB9\u5668\u5B58\u50A8\u5377",trigger:(0,e.jsxs)(L.ZP,{children:[(0,e.jsx)(ge.Z,{})," \u5907\u4EFD\u5B58\u50A8"]}),onFinish:function(){var r=D()(m()().mark(function t(O){var te,ne;return m()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return O.backupPath&&localStorage.setItem("backupPath",O.backupPath),te={containerMd5:y.container.Id,backupTargetType:O.backupTargetType,backupPath:O.backupPath},O.backupTargetType=="dpanel"&&h&&h.Mounts&&h.Mounts.map(function(M){M.Destination=="/dpanel"&&(te.backupPath=M.Type=="volume"?M.Name:te.backupPath=M.Source)}),P.next=5,(0,F.vp)(te);case 5:return ne=P.sent,E.info({title:"\u6B63\u5728\u5907\u4EFD\u5B58\u50A8\u4E2D",content:(0,e.jsx)(k.Z,{ghost:!0,style:{paddingTop:30},children:(0,e.jsx)(Ge.Z,{columns:[{title:"\u5907\u4EFD\u6587\u4EF6",key:"backup",dataIndex:"backup",width:300,render:function(Ee,se,Ce){return(0,e.jsx)(R.Z.Paragraph,{ellipsis:{rows:5,expandable:!0},children:se.backupTar})}},{title:"\u5907\u4EFD\u76EE\u5F55",key:"pathList",dataIndex:"pathList",render:function(Ee,se,Ce){return se.pathList.map(function($,oe){return(0,e.jsx)("div",{children:$},oe)})}}],dataSource:[{key:1,backupTar:ne.data.backupTar,pathList:ne.data.pathList}],rowKey:"key",pagination:!1})}),closable:!0,width:800}),P.abrupt("return",!0);case 8:case"end":return P.stop()}},t)}));return function(t){return r.apply(this,arguments)}}(),children:[(0,e.jsx)(Ye.Z.Group,{label:"\u5907\u4EFD\u76EE\u6807\u4F4D\u7F6E",name:"backupTargetType",initialValue:"dpanel",fieldProps:{defaultValue:"dpanel"},options:[{label:"DPanel \u5907\u4EFD\u76EE\u5F55\u4E2D",value:"dpanel"},{label:"\u5BBF\u4E3B\u673A\u76EE\u5F55\u4E2D",value:"host"}]}),(0,e.jsx)(ze.Z,{name:["backupTargetType"],children:function(t){var O=t.backupTargetType;return O=="host"?(0,e.jsx)(Je.Z,{label:"\u6307\u5B9A\u5BBF\u4E3B\u673A\u76EE\u5F55",tooltip:"\u8BF7\u586B\u5199\u5BBF\u4E3B\u673A\u76EE\u5F55\uFF0C\u4E0D\u5B58\u65F6\u4F1A\u65B0\u5EFA",name:"backupPath",placeholder:"/home/backup",initialValue:"/home/backup"}):(0,e.jsxs)(e.Fragment,{children:["\u5907\u4EFD\u4F4D\u4E8E DPanel \u5BB9\u5668\u4E2D\u7684 /dpanel/backup \u8DEF\u5F84 ",(0,e.jsx)(G.Link,{target:"_blank",to:"/app/detail/file/".concat(h==null?void 0:h.Id,"?tab=file&path=").concat(encodeURIComponent("/dpanel/backup")),children:"\u67E5\u770B"})]})}})]})]})}var ke=n(78451),qe=n(24963),_e=n(50070),et=n(64599),tt=n.n(et),nt=n(40717),at=n(184),ut=n(4798);function rt(y){var T=(0,s.useRef)();return[(0,e.jsx)(at.a,{trigger:(0,e.jsx)(L.ZP,{icon:(0,e.jsx)(nt.Z,{}),children:"\u52A0\u5165\u5DF2\u6709\u7F51\u7EDC"},"button"),width:800,formRef:T,title:"\u914D\u7F6E\u7F51\u7EDC",onFinish:function(){var B=D()(m()().mark(function E(p){var f,j,h,S,A;return m()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!p.network){r.next=19;break}j=tt()(p.network),r.prev=2,j.s();case 4:if((h=j.n()).done){r.next=11;break}return S=h.value,r.next=8,(0,V.HY)({name:S.name,containerName:y.containerName,containerAlise:S.alise,ipV4:S.ipV4});case 8:A=r.sent;case 9:r.next=4;break;case 11:r.next=16;break;case 13:r.prev=13,r.t0=r.catch(2),j.e(r.t0);case 16:return r.prev=16,j.f(),r.finish(16);case 19:return!((f=T.current)===null||f===void 0)&&f.resetFields&&T.current.resetFields(),y.onSuccess&&y.onSuccess(),r.abrupt("return",!0);case 22:case"end":return r.stop()}},E,null,[[2,13,16,19]])}));return function(E){return B.apply(this,arguments)}}(),children:(0,e.jsx)(ut.Z,{siteName:y.containerName})},"form")]}var lt=n(99861),it=n(3393);function st(){var y,T,B,E=(0,s.useContext)(qe.Z),p=E.message,f=E.notice,j=E.loading,h=E.lang,S=(0,s.useContext)(_e.AppDetailContext),A=(0,G.useParams)(),Z=(0,s.useState)(),r=I()(Z,2),t=r[0],O=r[1],te=(0,s.useState)(1),ne=I()(te,2),w=ne[0],P=ne[1],M=(0,G.useNavigate)(),Ee=(0,s.useRef)(),se=(0,s.useState)({deleteImage:!1,deleteVolume:!1,deleteLink:!1}),Ce=I()(se,2),$=Ce[0],oe=Ce[1],ot=(0,s.useState)(""),Ne=I()(ot,2),dt=Ne[0],ct=Ne[1],Le=(0,s.useRef)(),Me=(0,s.useRef)(),$e=(0,s.useRef)(),Ue=(0,s.useRef)(),We=(0,s.useRef)(),mt=(0,s.useState)(0),He=I()(mt,2),Ie=He[0],Ke=He[1];return(0,s.useEffect)(function(){var u;j.show(),S.reload(),(0,x.jV)({md5:(u=A.id)!==null&&u!==void 0?u:""}).then(function(a){var o;if(a.data){var i;a.data.info.HostConfig.NetworkMode=="host"&&a.data.info.Config.ExposedPorts&&Object.keys(a.data.info.Config.ExposedPorts).map(function(d){a.data.info.NetworkSettings.Ports[d]=[{HostIp:"0.0.0.0",HostPort:d.substring(0,d.indexOf("/"))}]}),(0,it.ZQ)({tag:(i=a.data.info.Config.Image)!==null&&i!==void 0?i:"",md5:a.data.info.Image,cacheKey:a.data.info.Name}).then(function(d){Ke(d.data.upgrade?1:2)}).catch(function(d){Ke(-1)}),O(a.data.info)}(o=Ee.current)===null||o===void 0||o.setFieldValue("restart",a.data.info.HostConfig.RestartPolicy.Name)}).finally(function(){j.destroy()}),(0,Oe.EH)().then(function(a){ct(a.data.ip)})},[w]),(0,e.jsxs)(e.Fragment,{children:[t&&(0,e.jsx)(lt.Z,{image:[t.Config.Image],ref:We}),(0,e.jsxs)(k.Z,{direction:"column",gutter:[0,10],children:[(0,e.jsx)(k.Z,{title:(0,e.jsx)(ae.Z,{}),subTitle:"\u72B6\u6001\u7BA1\u7406",ghost:!0,children:(0,e.jsxs)(g.Z,{wrap:!0,children:[(0,e.jsx)(c.Z,{icon:(0,e.jsx)(he.Z,{}),action:function(){var a;return(0,x.IW)({md5:(a=t==null?void 0:t.Id)!==null&&a!==void 0?a:"",operate:"start"})},messageSuccess:"start",onSuccess:function(){return P(w+1)},disabled:t&&t.State.Running||t&&t.State.Paused,children:"\u542F\u52A8"}),(0,e.jsx)(c.Z,{action:function(){var a;return(0,x.IW)({md5:(a=t==null?void 0:t.Id)!==null&&a!==void 0?a:"",operate:"stop"})},messageSuccess:"stop",icon:(0,e.jsx)(Se.Z,{}),onSuccess:function(){return P(w+1)},disabled:t&&t.State.Dead,children:"\u505C\u6B62"}),(0,e.jsx)(c.Z,{action:function(){var a;return(0,x.IW)({md5:(a=t==null?void 0:t.Id)!==null&&a!==void 0?a:"",operate:"restart"})},messageSuccess:"restart",onSuccess:function(){return P(w+1)},icon:(0,e.jsx)(Pe.Z,{}),children:"\u91CD\u542F"}),(0,e.jsx)(c.Z,{action:function(){var a;return(0,x.IW)({md5:(a=t==null?void 0:t.Id)!==null&&a!==void 0?a:"",operate:"pause"})},messageSuccess:"pause",onSuccess:function(){return P(w+1)},icon:(0,e.jsx)(Re.Z,{}),disabled:t&&!t.State.Running,children:"\u6682\u505C"}),(0,e.jsx)(c.Z,{action:function(){var a;return(0,x.IW)({md5:(a=t==null?void 0:t.Id)!==null&&a!==void 0?a:"",operate:"unpause"})},messageSuccess:"resume",onSuccess:function(){return P(w+1)},icon:(0,e.jsx)(he.Z,{}),disabled:t&&!t.State.Paused,children:"\u6062\u590D"}),(0,e.jsx)(J.Z,{type:"vertical"}),t&&(0,e.jsx)(K.Z,{container:t}),(0,e.jsx)(J.Z,{type:"vertical"}),t&&(!t.Config.Labels||!t.Config.Labels["com.docker.compose.project"])&&(0,e.jsx)(c.Z,{action:function(){var a;return(0,ye.Ct)({md5:(a=t==null?void 0:t.Id)!==null&&a!==void 0?a:"",deleteImage:$.deleteImage,deleteVolume:$.deleteVolume})},messageSuccess:"delete",danger:!0,type:"primary",icon:(0,e.jsx)(Se.Z,{}),onSuccess:function(){return M("/app/list")},confirm:(0,e.jsxs)(g.Z,{style:{width:280},direction:"vertical",children:[(0,e.jsx)(R.Z.Text,{children:"\u5220\u9664\u5BB9\u5668\u540E\u65E0\u6CD5\u6062\u590D,\u786E\u8BA4\u5417\uFF1F"}),(0,e.jsx)(_.Z,{name:"deleteVolume",onChange:function(a){return oe({deleteImage:$.deleteImage,deleteVolume:a.target.checked,deleteLink:$.deleteLink})},children:"\u5220\u9664\u5B58\u50A8\uFF1F"}),(0,e.jsx)(_.Z,{name:"deleteImage",onChange:function(a){return oe({deleteImage:a.target.checked,deleteVolume:$.deleteVolume,deleteLink:$.deleteLink})},children:"\u5220\u9664\u955C\u50CF\uFF1F"}),(0,e.jsx)(_.Z,{name:"deleteLink",onChange:function(a){return oe({deleteImage:$.deleteVolume,deleteVolume:$.deleteVolume,deleteLink:a.target.checked})},children:"\u5220\u9664\u5173\u8054\u5BB9\u5668\uFF1F"})]}),children:"\u5220\u9664"})]})}),(0,e.jsx)(k.Z,{title:(0,e.jsx)(ae.Z,{}),subTitle:"\u5BB9\u5668\u7BA1\u7406",ghost:!0,children:(0,e.jsxs)(g.Z,{wrap:!0,children:[(0,e.jsx)(c.Z,{icon:(0,e.jsx)(pe.Z,{}),action:function(){var a;return(0,x.LJ)({md5:(a=t==null?void 0:t.Id)!==null&&a!==void 0?a:""})},confirm:"\u5BFC\u51FA\u5BB9\u5668 Tar \u5305\u4E0D\u5305\u542B\u6302\u8F7D\u76EE\u5F55\u7684\u6570\u636E\uFF0C\u786E\u5B9A\u5417\uFF1F",onSuccess:function(a){var o=new Blob([a],{type:"application/tar"});(0,ee.saveAs)(o,(t==null?void 0:t.Id)+".tar")},messageSuccess:"export",children:"\u5BFC\u51FA\u5BB9\u5668"}),(0,e.jsx)(c.Z,{icon:(0,e.jsx)(ge.Z,{}),action:D()(m()().mark(function u(){var a,o,i;return m()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,x.Re)({md5:(a=t==null?void 0:t.Id)!==null&&a!==void 0?a:"",name:(o=(i=Le.current)===null||i===void 0?void 0:i.getFieldValue("saveImageName"))!==null&&o!==void 0?o:t==null?void 0:t.Name});case 2:case"end":return v.stop()}},u)})),confirmTitle:"\u5C06\u5F53\u524D\u5BB9\u5668\u4FDD\u5B58\u4E3A\u955C\u50CF",confirm:(0,e.jsx)(g.Z,{style:{width:400,marginTop:"10px",paddingRight:"10px"},direction:"vertical",children:(0,e.jsx)(X.A,{formRef:Le,submitter:!1,children:(0,e.jsx)(q.Z,{name:"saveImageName",children:(0,e.jsx)(N.Z,{addonBefore:"\u955C\u50CF\u540D\u79F0"})})})}),messageSuccess:"save",children:"\u53E6\u5B58\u4E3A\u955C\u50CF"}),t&&(0,e.jsx)(Xe,{container:t}),(0,e.jsx)(J.Z,{type:"vertical"}),(0,e.jsx)(G.Link,{to:"/app/create/image?containerId=".concat(t==null?void 0:t.Id,"&op=update"),children:(0,e.jsx)(L.ZP,{type:"primary",icon:(0,e.jsx)(ue.Z,{}),children:"\u7F16\u8F91\u5BB9\u5668"})}),(0,e.jsx)(c.Z,{icon:(0,e.jsx)(Q.Z,{}),action:D()(m()().mark(function u(){var a,o,i;return m()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,x.aF)({md5:(a=t==null?void 0:t.Id)!==null&&a!==void 0?a:"",copyName:(o=(i=Me.current)===null||i===void 0?void 0:i.getFieldValue("copyName"))!==null&&o!==void 0?o:""});case 2:return v.abrupt("return",v.sent);case 3:case"end":return v.stop()}},u)})),confirm:(0,e.jsxs)(g.Z,{style:{width:400,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(R.Z.Text,{children:"\u590D\u5236\u51FA\u7684\u5BB9\u5668\u4E0E\u5F53\u524D\u5BB9\u5668\u5177\u6709\u76F8\u540C\u7684\u914D\u7F6E\uFF0C\u8BF7\u4E8C\u6B21\u7F16\u8F91\u540E\u542F\u52A8\u5BB9\u5668\u3002\u786E\u5B9A\u5417\uFF1F"}),(0,e.jsx)(X.A,{formRef:Me,submitter:!1,children:(0,e.jsx)(q.Z,{name:"copyName",children:(0,e.jsx)(N.Z,{addonBefore:"\u590D\u5236\u5BB9\u5668\u540D\u79F0"})})})]}),onSuccess:function(a){M("/app/list")},messageSuccess:"copy",children:"\u590D\u5236\u5BB9\u5668"}),(0,e.jsx)(Fe.Z,{placement:"bottomLeft",menu:{items:[{key:"1",label:(0,e.jsx)(c.Z,{type:"link",children:"\u7ACB\u5373\u68C0\u6D4B"})},{key:"2",label:(0,e.jsx)(c.Z,{type:"link",children:"\u5FFD\u7565\u672C\u6B21"})},{key:"3",label:(0,e.jsx)(c.Z,{type:"link",children:"\u6C38\u4E45\u5FFD\u7565"})}]},children:(0,e.jsx)(le.Z,{count:h("app.detail.checkImageUpgrade."+Ie),color:h("app.detail.checkImageUpgradeColor."+Ie),children:(0,e.jsx)(c.Z,{disabled:Ie===0,icon:Ie===0?(0,e.jsx)(Ae.Z,{}):(0,e.jsx)(xe.Z,{}),action:D()(m()().mark(function u(){var a,o,i,d;return m()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(a=We.current)===null||a===void 0?void 0:a.start();case 2:return C.next=4,(0,x.RF)({md5:(o=t==null?void 0:t.Id)!==null&&o!==void 0?o:"",imageTag:"",enableBak:(i=(d=$e.current)===null||d===void 0?void 0:d.getFieldValue("enableBak"))!==null&&i!==void 0?i:!0});case 4:return C.abrupt("return",C.sent);case 5:case"end":return C.stop()}},u)})),confirm:(0,e.jsxs)(g.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(R.Z.Text,{children:"\u66F4\u65B0\u5BB9\u5668\u524D\u8BF7\u786E\u4FDD\u8FDC\u7A0B Docker \u7248\u672C\u4E0E\u9762\u677F\u73AF\u5883\u4E00\u81F4\u3002\u6B64\u64CD\u4F5C\u5C06\u4F1A\u91CD\u65B0\u62C9\u53D6\u955C\u50CF\u5E76\u91CD\u5EFA\u5BB9\u5668\u3002\u786E\u5B9A\u5417\uFF1F"}),(0,e.jsx)(X.A,{formRef:$e,submitter:!1,layout:"inline",children:(0,e.jsx)(q.Z,{name:"enableBak",initialValue:!0,valuePropName:"checked",children:(0,e.jsx)(_.Z,{children:"\u5907\u4EFD\u65E7\u5BB9\u5668\uFF1F"})})})]}),onSuccess:function(a){M("/app/list")},messageSuccess:"upgrade",children:"\u5FEB\u901F\u5347\u7EA7\u5BB9\u5668"})})}),(0,e.jsx)(J.Z,{type:"vertical"}),t&&(0,e.jsx)(rt,{onSuccess:function(){var a;(a=Ue.current)===null||a===void 0||a.reload()},containerName:t.Name})]})}),(0,e.jsx)(k.Z,{title:(0,e.jsx)(je.Z,{}),subTitle:"\u5BB9\u5668\u72B6\u6001",ghost:!0,children:(0,e.jsxs)(l.Z,{column:1,bordered:!0,children:[(0,e.jsx)(l.Z.Item,{label:"ID",children:(0,e.jsx)(b.Z,{title:t==null?void 0:t.Id})}),(0,e.jsx)(l.Z.Item,{label:"\u5BB9\u5668\u540D\u79F0",children:(0,e.jsx)(R.Z.Text,{editable:{tooltip:"\u4FEE\u6539\u5BB9\u5668\u540D\u79F0",onChange:function(){var u=D()(m()().mark(function o(i){var d;return m()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(t!=null&&t.Id){C.next=2;break}return C.abrupt("return");case 2:return C.next=4,(0,x.eE)({md5:t.Id,name:i});case 4:d=C.sent,P(w+1),p.success("\u4FEE\u6539\u5BB9\u5668\u540D\u79F0");case 7:case"end":return C.stop()}},o)}));function a(o){return u.apply(this,arguments)}return a}()},children:t&&t.Name})}),(0,e.jsx)(l.Z.Item,{label:(0,e.jsx)(ce.Z,{title:"\u7F51\u7EDC",help:"\u9ED8\u8BA4\u7F51\u7EDC\u53EA\u652F\u6301\u901A\u8FC7ip\u8BBF\u95EE,ip\u4F1A\u968F\u7740\u5BB9\u5668\u542F\u52A8\u505C\u6B62\u6539\u53D8.\u5982\u679C\u9700\u8981\u5728\u5BB9\u5668\u5185\u4E92\u8054,\u8BF7\u901A\u8FC7\u3010\u7F16\u8F91\u7AD9\u70B9\u3011-\u3010\u6DFB\u52A0\u5173\u8054\u3011"}),children:(t==null?void 0:t.State.Running)&&(0,e.jsxs)(l.Z,{column:1,bordered:!0,children:[t.NetworkSettings.Networks&&Object.keys(t.NetworkSettings.Networks).map(function(u,a){return(0,e.jsx)(l.Z.Item,{label:u,children:u=="host"?" Host \u7F51\u7EDC\uFF0C\u4E0E\u5BBF\u4E3B\u673A\u5171\u7528\u540C\u4E00\u7F51\u7EDC":(0,e.jsxs)(g.Z,{direction:"vertical",children:[(0,e.jsx)(b.Z,{title:t==null?void 0:t.NetworkSettings.Networks[u].IPAddress}),t==null?void 0:t.NetworkSettings.Networks[u].Gateway,t==null?void 0:t.NetworkSettings.Networks[u].MacAddress]})},"1")}),t.HostConfig.ExtraHosts&&(0,e.jsx)(l.Z.Item,{label:"\u5BBF\u4E3B\u673A\u7F51\u7EDC",children:(0,e.jsx)(g.Z,{direction:"vertical",children:t.HostConfig.ExtraHosts.map(function(u){if(u.indexOf(":")>-1){var a=u.split(":");return(0,e.jsxs)(g.Z,{children:[(0,e.jsx)(b.Z,{title:a[0]})," - ",a[1]]})}})})},"1")]})}),(0,e.jsx)(l.Z.Item,{label:"\u72B6\u6001",children:t==null?void 0:t.State.Status}),(0,e.jsx)(l.Z.Item,{label:"\u521B\u5EFA\u65F6\u95F4",children:new Date((y=t==null?void 0:t.Created)!==null&&y!==void 0?y:"").toLocaleString()}),(0,e.jsx)(l.Z.Item,{label:"\u542F\u52A8\u65F6\u95F4",children:new Date((T=t==null?void 0:t.State.StartedAt)!==null&&T!==void 0?T:"").toLocaleString()}),(0,e.jsx)(l.Z.Item,{label:"\u91CD\u542F\u7B56\u7565",children:(0,e.jsx)(X.A,{onFinish:function(){var u=D()(m()().mark(function a(o){var i;return m()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(t!=null&&t.Id){v.next=2;break}return v.abrupt("return");case 2:return v.next=4,(0,x.eE)({md5:t.Id,restart:o.restart});case 4:return i=v.sent,p.success("\u4FEE\u6539\u91CD\u542F\u7B56\u7565\u6210\u529F"),v.abrupt("return");case 7:case"end":return v.stop()}},a)}));return function(a){return u.apply(this,arguments)}}(),formRef:Ee,children:(0,e.jsx)(fe.Z,{defaultValue:t==null?void 0:t.HostConfig.RestartPolicy.Name})})})]})}),t&&t.Mounts&&t.Mounts.length>0&&(0,e.jsx)(k.Z,{title:(0,e.jsx)(be.Z,{}),subTitle:"\u6301\u4E45\u5B58\u50A8\u8BE6\u60C5",ghost:!0,children:(0,e.jsx)(l.Z,{column:1,bordered:!0,children:t==null?void 0:t.Mounts.map(function(u,a){return(0,e.jsx)(l.Z.Item,{labelStyle:{width:"30%"},label:u.Type=="volume"?(0,e.jsx)(ke.Z,{content:u.Name}):u.Source,children:(0,e.jsxs)(G.Link,{target:"_blank",to:"/app/detail/file/".concat(t.Id,"?tab=file&path=").concat(encodeURIComponent(u.Destination)),children:[u.Destination," ",(0,e.jsx)(Te.Z,{})]})},a)})})}),(0,e.jsx)(k.Z,{title:(0,e.jsx)(re.Z,{}),subTitle:"\u955C\u50CF\u8BE6\u60C5",ghost:!0,children:(0,e.jsxs)(l.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,e.jsx)(l.Z.Item,{label:"Image Tag",children:(0,e.jsx)(G.Link,{target:"_blank",to:"/image/detail/"+(t==null?void 0:t.Image),children:t==null?void 0:t.Config.Image})}),(0,e.jsx)(l.Z.Item,{label:"Image",children:t==null?void 0:t.Image}),(0,e.jsx)(l.Z.Item,{label:"Port",children:(0,e.jsx)(g.Z,{direction:"vertical",children:(t==null?void 0:t.NetworkSettings.Ports)&&Object.keys(t.NetworkSettings.Ports).map(function(u){var a,o=(a=t==null?void 0:t.NetworkSettings.Ports[u])!==null&&a!==void 0?a:[{HostPort:null,HostIp:""}];return o.map(function(i){var d=dt;return d!=""&&d.indexOf(":")>-1&&(d="[".concat(d,"]")),d==""&&i.HostIp=="::"&&(d="[::1]"),d==""&&i.HostIp=="0.0.0.0"&&(d="127.0.0.1"),d==""&&(d=i.HostIp),(0,e.jsxs)(g.Z.Compact,{children:[(0,e.jsxs)(ie.Z,{color:i.HostPort?"success":"",children:[i.HostPort?"".concat(i.HostIp,":").concat(i.HostPort," ->"):"",u]},u),i.HostPort?(0,e.jsx)("a",{href:"http://".concat(d,":").concat(i.HostPort),target:"_blank",children:(0,e.jsx)(de.Z,{})}):""]})})})})}),(0,e.jsx)(l.Z.Item,{label:"CMD",children:(t==null?void 0:t.Config.Cmd)&&(t==null?void 0:t.Config.Cmd.join(" "))}),(0,e.jsx)(l.Z.Item,{label:"ENTRYPOINT",children:t==null?void 0:t.Config.Entrypoint}),(0,e.jsx)(l.Z.Item,{label:"ENV",children:(0,e.jsx)(l.Z,{column:1,bordered:!0,children:(t==null?void 0:t.Config.Env)&&t.Config.Env.map(function(u,a){var o=u.split("=");return(0,e.jsx)(l.Z.Item,{label:o[0],children:(0,e.jsx)(ke.Z,{content:o.slice(1).join("=")})},a)})})}),(0,e.jsx)(l.Z.Item,{label:"Labels",children:(0,e.jsx)(l.Z,{column:1,bordered:!0,children:t&&Object.keys(t.Config.Labels).map(function(u){return(0,e.jsx)(l.Z.Item,{label:u,children:(0,e.jsx)(R.Z.Text,{style:{width:"400px"},ellipsis:{tooltip:t.Config.Labels[u]},children:t.Config.Labels[u]})},u)})})})]})}),(t==null?void 0:t.Name)&&(0,e.jsx)(ve,{containerName:(B=t==null?void 0:t.Name)!==null&&B!==void 0?B:"",ref:Ue})]})]})}},50070:function(Be,U,n){n.r(U),n.d(U,{AppDetailContext:function(){return x},default:function(){return ce}});var Y=n(15009),m=n.n(Y),z=n(99289),D=n.n(z),W=n(5574),I=n.n(W),V=n(24963),de=n(2831),Ze=n(60335),k=n(41123),H=n(54006),g=n(86738),R=n(25593),De=n(50136),s=n(67294),c=n(85893),x=(0,s.createContext)({});function ce(){var e,me=(0,s.useContext)(V.Z),ve=me.lang,fe=me.loading,b=(0,H.useParams)(),ye=(0,H.useSearchParams)(),ae=I()(ye,2),he=ae[0],Se=ae[1],Pe=(e=he.get("tab"))!==null&&e!==void 0?e:"edit",Re=(0,s.useState)("edit"),pe=I()(Re,2),ge=pe[0],ue=pe[1],Q=(0,H.useNavigate)(),Ae=(0,s.useState)(1),xe=I()(Ae,2),je=xe[0],be=xe[1],Te=(0,H.useAccess)(),re=[{label:(0,c.jsx)(H.Link,{to:"/app/detail/edit/".concat(b.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,c.jsx)(H.Link,{to:"/app/detail/domain/".concat(b.id,"?tab=domain"),children:"\u57DF\u540D\u7BA1\u7406"}),key:"domain"},{label:(0,c.jsx)(g.Z,{style:{width:500},title:ve("notification.title.tip"),description:ve("app.detail.createExplorerPlugin"),onConfirm:function(){Q("/app/detail/file/".concat(b.id,"?tab=file")),J(re.filter(function(L){return L.key!="fileConfirm"})),ue("file")},okText:"Yes",cancelText:"No",children:(0,c.jsx)(R.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"})}),key:"fileConfirm"},{label:(0,c.jsx)(R.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){Q("/app/detail/file/".concat(b.id,"?tab=file"))}},{label:(0,c.jsx)(R.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){Q("/app/detail/log/".concat(b.id,"?tab=log"))}},{label:(0,c.jsx)(R.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){Q("/app/detail/stat/".concat(b.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,c.jsx)(k.Z,{}),disabled:!0}],X=(0,s.useState)(re),q=I()(X,2),G=q[0],J=q[1];(0,s.useEffect)(function(){fe.show(),ue(Pe);var N=function(){var L=D()(m()().mark(function Fe(){var le,l,ie,ee;return m()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return l=re,K.next=3,(0,de.aF)();case 3:return ie=K.sent,Te.canSeeContainerDomain||(l=l.filter(function(F){return F.key!="domain"})),ie.data.plugin.explorer.isCreated||(l=l.filter(function(F){return F.key!="file"})),ie.data.plugin.explorer.isCreated&&(l=l.filter(function(F){return F.key!="fileConfirm"})),K.next=9,(0,Ze.jV)({md5:(le=b.id)!==null&&le!==void 0?le:""});case 9:ee=K.sent,l.map(function(F){return F.key=="containerName"&&(F.label=ee.data.info.Name),(!ee.data.info.State.Running||ee.data.info.State.Restarting)&&(F.key=="file"||F.key=="fileConfirm"||F.key=="stat")&&(F.disabled=!0),F}),J(l),fe.destroy();case 13:case"end":return K.stop()}},Fe)}));return function(){return L.apply(this,arguments)}}();N()},[je]);var _=function(L){L.key!="fileConfirm"&&ue(L.key)};return(0,c.jsxs)(x.Provider,{value:{reload:function(){be(je+1)}},children:[(0,c.jsx)(De.Z,{mode:"horizontal",onClick:_,selectedKeys:[ge],items:G}),(0,c.jsx)(H.Outlet,{})]})}}}]);
