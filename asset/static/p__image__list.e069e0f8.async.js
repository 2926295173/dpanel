"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4214],{1699:function($,T,e){e.d(T,{u:function(){return t}});var I=e(9783),a=e.n(I),F=e(97857),l=e.n(F),p=e(67294),s=e(82346),B=e(40411),D=e(42075),P=e(85893),t=function(f){var x=(0,s.useAccess)(),O=Array.isArray(f.access)?f.access:[f.access],d,R=f.fallback;return typeof f.children=="function"?(d=f.children(O.reduce(function(h,g){return l()(l()({},h),{},a()({},g,x[g]))},{})),d||(d=R)):O.every(function(h){return x[h]})?d=f.children:d=R,!R&&d&&f.showProTips&&x.canSeeEnableCe&&(d=(0,P.jsx)(B.Z,{offset:f.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:d})),!R&&d&&f.showProRibbonTips&&x.canSeeEnableCe&&(d=(0,P.jsx)(B.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:d})),f.space?(0,P.jsx)(D.Z,l()(l()({},f.space),{},{children:d})):d}},28307:function($,T,e){var I=e(15009),a=e.n(I),F=e(99289),l=e.n(F),p=e(5574),s=e.n(p),B=e(38345),D=e(97269),P=e(62370),t=e(5966),v=e(64317),f=e(28036),x=e(85265),O=e(42075),d=e(67294),R=e(3393),h=e(97961),g=e(92754),o=e(82346),E=e(96042),C=e(85893),_=(0,d.forwardRef)(function(u,y){var i=(0,d.useState)(!1),H=s()(i,2),ne=H[0],Q=H[1],V=(0,d.useRef)(),G=(0,d.useRef)(),fe=(0,d.useState)(!1),le=s()(fe,2),oe=le[0],te=le[1];return(0,d.useImperativeHandle)(y,function(){return{upgradeImage:function(A){var b;return Q(!0),(b=V.current)===null||b===void 0||b.setFieldValue("imageUrl",A),(0,R.Gb)({tag:A,type:"pull"})},setImageName:function(A){var b;Q(!0),(b=V.current)===null||b===void 0||b.setFieldValue("imageUrl",A)}}}),[(0,C.jsx)(f.ZP,{type:u.buttonType?u.buttonType:"default",onClick:function(){var A,b;u.onClick&&u.onClick(),Q(!0),(A=V.current)===null||A===void 0||A.resetFields(),(b=G.current)===null||b===void 0||b.setStart("")},children:"\u62C9\u53D6\u955C\u50CF"},"remoteBtn"),(0,C.jsxs)(x.Z,{forceRender:!0,open:ne,title:"\u62C9\u53D6\u8FDC\u7A0B\u955C\u50CF",width:800,onClose:function(){var A;Q(!1),(A=G.current)===null||A===void 0||A.close()},footer:!1,children:[(0,C.jsx)(B.Z,{children:(0,C.jsxs)(O.Z,{direction:"vertical",size:"middle",children:[(0,C.jsxs)("div",{children:["1\u3001\u955C\u50CF\u540D\u79F0\u4E2D\u4E0D\u5305\u542B\u4ED3\u5E93\u5730\u5740\u65F6\uFF0C \u9ED8\u8BA4\u4ECE ",(0,C.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:"docker hub"})," \u4E2D\u4E0B\u8F7D\uFF0C \u4F60\u53EF\u4EE5",(0,C.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:"\u3010\u67E5\u627E\u3011"})," \u9700\u8981\u7684\u955C\u50CF"]}),(0,C.jsx)("div",{children:"2\u3001\u62C9\u53D6\u975E docker hub \u955C\u50CF\u65F6\uFF0C\u8BF7\u586B\u5199\u5B8C\u6574\u7684\u955C\u50CF\u5730\u5740\u3002"}),(0,C.jsxs)("div",{children:["3\u3001\u76EE\u6807\u4ED3\u5E93\u6709\u6743\u9650\u9A8C\u8BC1\u65F6\uFF0C\u8BF7",(0,C.jsx)(o.Link,{to:"/image/registry",children:"\u3010\u6DFB\u52A0\u3011"}),"\u8BE5\u4ED3\u5E93\uFF0C\u5E76\u914D\u7F6E\u7528\u6237\u540D\u548C\u5BC6\u7801\u6743\u9650"]}),(0,C.jsxs)("div",{children:["4\u3001\u65E0\u6CD5\u6B63\u5E38\u62C9\u53D6\u955C\u50CF\u65F6\u8BF7\u5728 ",(0,C.jsx)(o.Link,{to:"/image/registry",children:"\u3010\u4ED3\u5E93\u7BA1\u7406\u3011"}),"\u4E2D\u914D\u7F6E\u955C\u50CF\u7684\u52A0\u901F\u5730\u5740"]})]})}),(0,C.jsx)(B.Z,{title:"\u62C9\u53D6\u955C\u50CF",headerBordered:!0,children:(0,C.jsxs)(D.A,{formRef:V,submitter:!1,isKeyPressSubmit:!0,onFinish:function(){var K=l()(a()().mark(function A(b){var z,w,re,ae,Y,ce;return a()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return Y=(z=b.imageUrl)!==null&&z!==void 0?z:"",b.registry&&(Y=b.registry.serverAddress+"/"+Y),te(!0),(w=G.current)===null||w===void 0||w.setStart(Y),N.next=6,(0,R.Gb)({tag:Y,type:"pull",platform:(re=b.platform)!==null&&re!==void 0?re:""}).finally(function(){te(!1)});case 6:return ce=N.sent,(ae=G.current)===null||ae===void 0||ae.setFinish(),Q(!1),u.onFinish&&u.onFinish(ce.data.tag),N.abrupt("return",!0);case 11:case"end":return N.stop()}},A)}));return function(A){return K.apply(this,arguments)}}(),children:[(0,C.jsxs)(O.Z.Compact,{children:[(0,C.jsx)(P.Z,{name:"registry",children:(0,C.jsx)(E.Z,{width:"150px"})}),(0,C.jsx)(t.Z,{disabled:oe,width:270,name:"imageUrl",placeholder:"\u8BF7\u8F93\u5165\u955C\u50CF\u5730\u5740",required:!0,rules:[{required:!0}]}),(0,C.jsx)(v.Z,{name:"platform",style:{width:100},placeholder:"\u9ED8\u8BA4\u5F53\u524D\u67B6\u6784",options:h.ii.map(function(K){return{label:K.name,value:K.name}})}),(0,C.jsx)(f.ZP,{loading:oe,onClick:l()(a()().mark(function K(){var A;return a()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:(A=V.current)===null||A===void 0||A.submit();case 1:case"end":return z.stop()}},K)})),children:"\u62C9\u53D6\u955C\u50CF"}),(0,C.jsx)(f.ZP,{danger:!0,onClick:function(){var A;(A=G.current)===null||A===void 0||A.close()},children:"\u4E2D\u6B62\u6267\u884C"})]}),(0,C.jsx)(P.Z,{label:"\u62C9\u53D6\u8FDB\u5EA6",children:(0,C.jsx)(g.Z,{ref:G})})]})})]},"remoteDrawer")]});T.Z=_},80821:function($,T,e){e.d(T,{Z:function(){return P}});var I=e(5574),a=e.n(I),F=e(24963),l=e(86738),p=e(28036),s=e(83062),B=e(67294),D=e(85893);function P(t){var v=(0,B.useState)(!1),f=a()(v,2),x=f[0],O=f[1],d=(0,B.useContext)(F.Z),R=d.lang,h=d.notice,g=d.message,o=function(){O(!0);var C=t.action();C instanceof Promise?C.then(function(_){if(O(!1),_){typeof t.onSuccess=="function"&&t.onSuccess(_);var u="";t.messageSuccess?typeof t.messageSuccess=="function"?u=t.messageSuccess(_):u=t.messageSuccess.indexOf("notification.")==0?R(t.messageSuccess):t.messageSuccess:u=R("notification.finish"),t.asynced?g.info(u):g.success(u)}}).catch(function(_){O(!1),typeof t.onError=="function"&&t.onError(_)}):O(!1)};return t.confirm?(0,D.jsx)(l.Z,{style:{width:500},title:t.confirmTitle?t.confirmTitle:R("notification.title.tip"),description:typeof t.confirm=="string"&&t.confirm.indexOf("notification.")==0?R(t.confirm):t.confirm,onConfirm:o,okText:"Yes",cancelText:"No",onOpenChange:t.confirmOnOpenChange,children:(0,D.jsx)(p.ZP,{block:t.block,disabled:t.disabled,icon:!t.children&&x?void 0:t.icon,loading:x,danger:t.danger,type:t.type,children:t.children})}):(0,D.jsx)(s.Z,{title:t.tips,children:(0,D.jsx)(p.ZP,{block:t.block,style:t.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:t.disabled,icon:!t.children&&x?void 0:t.icon,loading:x,onClick:o,danger:t.danger,type:t.type,children:t.children})})}},81366:function($,T,e){var I=e(19632),a=e.n(I),F=e(5574),l=e.n(F),p=e(27254),s=e(42075),B=e(28036),D=e(25593),P=e(67294),t=e(31112),v=e(85893),f=(0,P.forwardRef)(function(x,O){var d=(0,P.useContext)(t.Z),R=d.showPath,h=(0,P.useState)([{title:"\u6839\u76EE\u5F55",path:"/"}]),g=l()(h,2),o=g[0],E=g[1];(0,P.useImperativeHandle)(O,function(){return{addHistory:function(u,y){E([].concat(a()(o),[{title:u,path:y}]))},initHistory:function(u){E([{title:"\u6839\u76EE\u5F55",path:"/"}].concat(a()(u)))}}});var C=function(u){R?R(o[u].title,o[u].path):x.showPath&&x.showPath(o[u].title,o[u].path);var y=o.filter(function(i,H){return H<=u});E(a()(y))};return(0,v.jsxs)(s.Z,{children:[(0,v.jsx)(s.Z.Compact,{children:o.map(function(_,u){return(0,v.jsx)(B.ZP,{icon:(0,v.jsx)(p.Z,{}),type:"dashed",onClick:function(){C(u)},children:_.title},u)})}),o.length>=2&&(0,v.jsx)(D.Z.Text,{copyable:{text:o[o.length-1].path}})]})});T.Z=f},31112:function($,T,e){var I=e(67294),a=(0,I.createContext)({});T.Z=a},68536:function($,T,e){e.d(T,{Z:function(){return t}});var I=e(24963),a=e(93613),F=e(36693),l=e(2741),p=e(25593),s=e(42075),B=e(67294),D=e(85893),P=0;function t(v){var f=(0,B.useContext)(I.Z),x=f.message;return v.isDir?(0,D.jsx)(p.Z.Link,{onClick:function(){v.onClick&&v.onClick()},children:(0,D.jsxs)(s.Z,{children:[(0,D.jsx)(a.Z,{}),v.showName]})}):v.isLink?(0,D.jsx)(p.Z.Link,{onClick:function(){v.onClick&&v.onClick()},children:(0,D.jsxs)(s.Z,{children:[(0,D.jsx)(F.Z,{}),v.showName]})}):(0,D.jsx)(p.Z.Text,{onClick:function(){if(P++,P==2){P=0,v.onClick&&v.onClick();return}setTimeout(function(){P==1&&x.info("\u53CC\u51FB\u67E5\u770B\u6587\u4EF6\u5185\u5BB9"),P=0},400)},style:{cursor:"pointer"},children:(0,D.jsxs)(s.Z,{children:[(0,D.jsx)(l.Z,{}),v.showName]})})}},34879:function($,T,e){e.d(T,{Z:function(){return p}});var I=e(97961),a=e(91604),F=e(1677),l=e(85893);function p(s){return s.showDragger?(0,l.jsx)(a.Z,{max:s.max?s.max:1,title:s.title,label:s.label,required:s.required,rules:[{required:s.required}],fieldProps:{multiple:!!(s.max&&s.max>1),name:"file",accept:s.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(D){return new Promise(function(P){var t;(0,I._2)({path:(t=D.response.data.path)!==null&&t!==void 0?t:""}).then(function(v){P(!0)})})}},name:s.name}):(0,l.jsx)(F.Z,{max:s.max?s.max:1,title:s.title,label:s.label,required:s.required,rules:[{required:s.required}],fieldProps:{multiple:!!(s.max&&s.max>1),name:"file",accept:s.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(D){return new Promise(function(P){var t;(0,I._2)({path:(t=D.response.data.path)!==null&&t!==void 0?t:""}).then(function(v){P(!0)})})}},name:s.name})}},92754:function($,T,e){var I=e(5574),a=e.n(I),F=e(67294),l=e(82346),p=e(38703),s=e(85893),B=(0,F.forwardRef)(function(D,P){var t=(0,F.useState)(""),v=a()(t,2),f=v[0],x=v[1];(0,F.useImperativeHandle)(P,function(){return{setFinish:function(){g({finish:{downloading:100,extracting:100}})},setStart:function(E){E&&x(E),g({start:{downloading:0,extracting:0}})},close:function(){O.progress.close("image:pull:"+f),g({start:{downloading:0,extracting:0}})}}});var O=(0,l.useModel)("subscriber");O.addDataHandler("image:pull:"+f,function(o){g(o.data)});var d=(0,F.useState)(),R=a()(d,2),h=R[0],g=R[1];return(0,F.useEffect)(function(){return g({start:{downloading:0,extracting:0}}),function(){O.progress.close("image:pull:"+f)}},[]),(0,s.jsx)(s.Fragment,{children:h&&Object.keys(h).map(function(o){return(0,s.jsx)(p.Z,{percent:h[o].downloading,success:{percent:h[o].extracting}},o)})})});T.Z=B},78451:function($,T,e){e.d(T,{Z:function(){return F}});var I=e(67294),a=e(85893);function F(l){return(0,a.jsx)("span",{style:{width:l.width?l.width:"auto",wordBreak:"break-word"},children:l.content})}},17550:function($,T,e){e.r(T),e.d(T,{default:function(){return De}});var I=e(19632),a=e.n(I),F=e(15009),l=e.n(F),p=e(99289),s=e.n(p),B=e(5574),D=e.n(B),P=e(90078),t=e(41482),v=e(97269),f=e(62370),x=e(37476),O=e(5966),d=e(28036),R=e(96074),h=e(25593),g=e(42075),o=e(66309),E=e(83062),C=e(84567),_=e(50136),u=e(67294),y=e(82346),i=e(18148),H=e(5251),ne=e(80821),Q=e(43425),V=e(64789),G=e(58638),fe=e(1912),le=e(28307),oe=e(96042),te=e(67255),K=e(24963),A=e(3393),b=e(93162),z=e(78914),w=e(1699),re=e(184),ae=e(34879),Y=e(44349),ce=e(97961),n=e(85893),N=(0,u.forwardRef)(function(X,ve){(0,u.useImperativeHandle)(ve,function(){return{}});var de=(0,u.useRef)();return(0,n.jsxs)(re.a,{title:"\u5BFC\u5165\u955C\u50CF",trigger:(0,n.jsx)(d.ZP,{children:"\u5BFC\u5165\u955C\u50CF"},"create"),formRef:de,onFinish:function(){var he=s()(l()().mark(function ue(M){var se,_e;return l()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,ce.GH)({localUrl:M.imageTarUpload?M.imageTarUpload.map(function(J){return J.response.data.path}):[],remoteUrl:M.remoteUrl?M.remoteUrl.map(function(J){return J.url}):[]});case 2:return _e=k.sent,!((se=de.current)===null||se===void 0)&&se.resetFields&&de.current.resetFields(),X.onFinish&&X.onFinish(),k.abrupt("return",!0);case 6:case"end":return k.stop()}},ue)}));return function(ue){return he.apply(this,arguments)}}(),children:[(0,n.jsx)(ae.Z,{label:"\u672C\u5730\u955C\u50CF",showDragger:!0,max:10,title:"\u5BFC\u5165\u955C\u50CF\u5305, \u6700\u591A\u4E0A\u4F20\u652F\u6301 10 \u4E2A\u3002\uFF08\u53EA\u5141\u8BB8\u4E0A\u4F20 .tar \u6587\u4EF6\uFF0C\u901A\u8FC7\u5BFC\u51FA\u955C\u50CF\u751F\u6210\uFF09",name:"imageTarUpload",accept:".tar"}),(0,n.jsx)(Y.Z,{label:"\u8FDC\u7A0B\u5730\u5740",name:"remoteUrl",showAddButton:!0,hideCopyButton:!0,min:1,items:[{width:"lg",name:"url",placeholder:"\u6307\u5B9A\u8FDC\u7A0B\u5730\u5740 http \u6216\u662F https \u5F00\u5934"}]})]})}),Ce=N;function De(){var X=(0,u.useContext)(K.Z),ve=X.message,de=X.notice,he=X.lang,ue=(0,y.useAccess)(),M=(0,u.useRef)(),se=(0,u.useState)({force:!1}),_e=D()(se,2),ge=_e[0],k=_e[1],J=(0,u.useRef)(),ie=(0,u.useRef)(),me=(0,u.useRef)();return(0,n.jsxs)(P._z,{header:{extra:[(0,n.jsx)(w.u,{access:"canSeeImageListManageCreate",children:(0,n.jsx)(y.Link,{to:"/image/create",children:(0,n.jsx)(d.ZP,{type:"primary",children:"\u521B\u5EFA\u955C\u50CF"},"create")},"create")},"create"),(0,n.jsxs)(w.u,{access:"canSeeImageListManageCreate",children:[(0,n.jsx)(R.Z,{type:"vertical"}),(0,n.jsx)(Ce,{onFinish:function(){var j;!((j=M.current)===null||j===void 0)&&j.reloadAndRest&&M.current.reloadAndRest()}})]},"import"),(0,n.jsx)(w.u,{access:"canSeeImageListPull",children:(0,n.jsx)(le.Z,{onFinish:function(){var j,r;!((j=M.current)===null||j===void 0)&&j.reloadAndRest&&((r=M.current)===null||r===void 0||r.reloadAndRest())}},"remote")},"remote")]},children:[(0,n.jsx)(z.Z,{ref:ie,onClose:function(){var j,r;!((j=M.current)===null||j===void 0)&&j.reloadAndRest&&((r=M.current)===null||r===void 0||r.reloadAndRest())}}),(0,n.jsx)(t.Z,{scroll:{x:"max-content"},rowKey:"Id",columns:[{title:"Id",dataIndex:"title",search:!1,render:function(j,r,U,W,c){var m=r.Id.substring(7,19);return r.Title&&(m=r.Title),(0,n.jsx)(h.Z.Link,{onClick:function(){var S;!((S=ie.current)===null||S===void 0)&&S.show&&ie.current.show(r.Id)},children:m},"title-".concat(U))}},{title:"\u540D\u79F0",dataIndex:"tag",render:function(j,r,U,W){return(0,n.jsx)(g.Z,{direction:"vertical",style:{textAlign:"left"},children:r.RepoTags.map(function(c,m){return(0,n.jsxs)(g.Z,{children:[(0,n.jsx)(o.Z,{color:"#2db7f5",children:(0,n.jsx)(h.Z.Text,{copyable:!0,title:c,style:{color:"#ffffff"},children:c},"tag-"+m)},"tag-".concat(m)),r.Containers>0&&(0,n.jsx)(o.Z,{color:"cyan",children:"\u4F7F\u7528\u4E2D"},"use-".concat(m))]},m)})},r.Id)}},{title:"Digest",search:!1,tooltip:"\u8BE5\u955C\u50CF\u5728\u4ED3\u5E93\u4E2D\u7684\u6807\u8BC6\uFF0C\u4E0D\u5305\u542B\u6B64\u503C\u7684\u955C\u50CF\u65E0\u6CD5\u68C0\u6D4B\u66F4\u65B0",render:function(j,r,U,W,c){return(0,n.jsx)(g.Z,{direction:"vertical",children:r.RepoDigests&&r.RepoDigests.map(function(m){return m.substring(m.indexOf("@")+8).substring(0,12)})})}},{title:"\u67B6\u6784",width:80,search:!1,render:function(j,r,U,W,c){if(r.Labels&&r.Labels["com.dpanel.image.arch"])return(0,n.jsx)(o.Z,{children:r.Labels["com.dpanel.image.arch"]},"arch"+r.Id)}},{title:"\u5927\u5C0F",dataIndex:"size",ellipsis:!0,width:"120px",search:!1,sorter:function(j,r){return parseFloat(j.Size)-parseFloat(r.Size)},render:function(j,r,U,W){return(0,n.jsx)("div",{children:(0,H.FI)(parseFloat(r.Size))},r.Id)}},{title:"\u521B\u5EFA\u65E5\u671F",dataIndex:"Created",ellipsis:!0,search:!1,width:"180px",render:function(j,r,U,W){return(0,n.jsx)("div",{children:(0,H.ZM)(r.Created*1e3)},r.Id)},sorter:function(j,r){return j.Created-r.Created}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:100,fixed:"right",hidden:!ue.canSeeImageListManage,render:function(j,r,U,W){return(0,n.jsxs)(g.Z,{split:(0,n.jsx)(R.Z,{type:"vertical"}),children:[(0,n.jsx)(h.Z.Link,{onClick:function(){var m;!((m=ie.current)===null||m===void 0)&&m.show&&ie.current.show(r.Id)},children:(0,n.jsx)(E.Z,{title:"\u7BA1\u7406",children:(0,n.jsx)(Q.Z,{})})},"edit"),(0,n.jsx)(y.Link,{to:"/app/create/image?imageId="+r.RepoTags[0],children:(0,n.jsx)(E.Z,{title:"\u521B\u5EFA\u5BB9\u5668",children:(0,n.jsx)(V.Z,{})})},"create")]})}}],request:function(){var Z=s()(l()().mark(function j(r,U,W){var c;return l()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,i.KG)({tag:r.tag,title:r.title,use:r.use?r.use=="1"?1:2:0});case 2:if(c=L.sent,!(!c||!c.data||!c.data.list)){L.next=5;break}return L.abrupt("return",{data:[],success:!0,total:0});case 5:return c.data.list.map(function(S){var q="";S.RepoTags.map(function(Ee){c.data.title[Ee]&&(q=c.data.title[Ee])}),S.Title=q}),L.abrupt("return",{data:c.data.list,success:!0,total:c.data.list.length});case 7:case"end":return L.stop()}},j)}));return function(j,r,U){return Z.apply(this,arguments)}}(),pagination:(0,te.O)(),search:{collapsed:!1},rowSelection:ue.canSeeImageListManage?{defaultSelectedRowKeys:[],alwaysShowAlert:!0}:void 0,actionRef:M,tableAlertOptionRender:function(j){var r=j.selectedRowKeys,U=j.selectedRows;return(0,n.jsxs)(g.Z,{size:16,children:[(0,n.jsx)(ne.Z,{icon:(0,n.jsx)(G.Z,{}),confirm:(0,n.jsxs)(g.Z,{style:{width:500,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,n.jsx)(h.Z.Text,{children:(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{children:"\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5BFC\u51FA\u955C\u50CF\u540E\u4F1A\u81EA\u52A8\u901A\u8FC7\u6D4F\u89C8\u5668\u4E0B\u8F7D\u81F3\u672C\u5730"}),(0,n.jsx)("li",{children:"\u5F53\u914D\u7F6E\u3010\u5BFC\u51FA\u5230\u9762\u677F\u5BB9\u5668\u76EE\u5F55\u3011\u540E\u5C06\u4FDD\u5B58\u81F3 /dpanel/storage \u76EE\u5F55"}),(0,n.jsx)("li",{children:"\u6D4F\u89C8\u5668\u4E0B\u8F7D\u5931\u8D25\u65F6\uFF0C\u8BF7\u68C0\u67E5\u662F\u5426\u5B89\u88C5\u4E86\u76F8\u5173\u4E0B\u8F7D\u63D2\u4EF6"})]})}),(0,n.jsx)(v.A,{layout:"horizontal",formRef:me,submitter:!1,children:(0,n.jsx)(f.Z,{valuePropName:"checked",name:"enableExportToPath",children:(0,n.jsx)(C.Z,{children:"\u5BFC\u51FA\u5230\u9762\u677F\u5BB9\u5668\u76EE\u5F55"})},"enableExportToPath")})]}),confirmOnOpenChange:function(){var c;!((c=me.current)===null||c===void 0)&&c.resetFields&&me.current.resetFields()},action:function(){var c,m=[];return U.map(function(L){m.push.apply(m,a()(L.RepoTags))}),(0,A.Rb)({md5:m,enableExportToPath:(c=me.current)===null||c===void 0?void 0:c.getFieldValue("enableExportToPath")})},onSuccess:function(c){var m,L=U.map(function(q){return q.RepoTags[0]});if(c.size>29){var S=new Blob([c],{type:"application/tar"});(0,b.saveAs)(S,L.join("-")+".tar")}!((m=M.current)===null||m===void 0)&&m.reset&&M.current.reset()},children:"\u5BFC\u51FA"}),(0,n.jsxs)(x.Y,{formRef:J,title:"\u6279\u91CF\u63A8\u9001\u955C\u50CF",trigger:(0,n.jsx)(d.ZP,{icon:(0,n.jsx)(fe.Z,{}),children:"\u540C\u6B65\u81F3\u5176\u5B83\u4ED3\u5E93"}),onFinish:function(){var W=s()(l()().mark(function c(m){var L,S,q;return l()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,(0,i.KX)({md5:r,registryId:m.registryId,newNamespace:m.newNamespace});case 2:return q=ee.sent,(L=M.current)===null||L===void 0||L.reload(),!((S=M.current)===null||S===void 0)&&S.clearSelected&&M.current.clearSelected(),ee.abrupt("return",!0);case 6:case"end":return ee.stop()}},c)}));return function(c){return W.apply(this,arguments)}}(),children:[(0,n.jsx)(f.Z,{name:"registryId",hidden:!0}),(0,n.jsx)(f.Z,{label:"\u955C\u50CF\u4ED3\u5E93",name:"imageRespo",tooltip:(0,n.jsxs)(n.Fragment,{children:["\u63A8\u9001\u524D\u8BF7\u4FDD\u8BC1\u4ED3\u5E93\u4E2D\u6709\u6307\u5B9A\u7684\u547D\u540D\u7A7A\u95F4, \u5982\u6CA1\u6709\u8BF7\u5148 ",(0,n.jsx)("a",{href:"",target:"_blank",children:"\u6DFB\u52A0\u4ED3\u5E93"})]}),children:(0,n.jsx)(oe.Z,{multiple:!0,top:!0,onChangeList:function(c){var m;(m=J.current)===null||m===void 0||m.setFieldValue("registryId",c.map(function(L){return L.id}))}})}),(0,n.jsx)(O.Z,{tooltip:"\u53EF\u4EE5\u901A\u8FC7\u6B64\u9879\u91CD\u65B0\u5B9A\u4E49\u547D\u540D\u7A7A\u95F4\uFF0Cdocker hub \u4E0D\u53D7\u8BE5\u914D\u7F6E\u7684\u5F71\u54CD\u3002 \u914D\u7F6E\u6B64\u9879\u540E mysql:latest \u4F1A\u63A8\u9001\u81F3 {\u547D\u540D\u7A7A\u95F4}/mysql:latest\uFF0C dpanel/dpanel:latest \u4F1A\u63A8\u9001\u81F3 {\u547D\u540D\u7A7A\u95F4}/dpanel:latest",label:"\u91CD\u5199\u4ED3\u5E93\u547D\u540D\u7A7A\u95F4",name:"newNamespace"})]}),(0,n.jsx)(w.u,{access:"canSeeImageListManageDelete",children:(0,n.jsx)(ne.Z,{danger:!0,type:"primary",action:function(){return(0,i.ao)({md5:r,force:ge.force})},onSuccess:function(){var c,m;return!((c=M.current)===null||c===void 0)&&c.reloadAndRest&&((m=M.current)===null||m===void 0||m.reloadAndRest()),!0},onError:function(){var c,m;return!((c=M.current)===null||c===void 0)&&c.reset&&((m=M.current)===null||m===void 0||m.reset()),!0},confirm:(0,n.jsxs)(g.Z,{style:{width:280},direction:"vertical",children:[(0,n.jsx)(h.Z.Text,{children:he("notification.confirm.title")}),(0,n.jsx)(C.Z,{name:"deleteVolume",onChange:function(c){return k({force:c.target.checked})},children:"\u5F3A\u5236\u5220\u9664\uFF1F"})]}),children:"\u6279\u91CF\u5220\u9664"})})]})},tableExtraRender:function(){return(0,n.jsx)(w.u,{access:"canSeeImageListManageCreate",children:(0,n.jsx)(_.Z,{mode:"horizontal",selectedKeys:["all"],items:[{label:(0,n.jsx)(y.Link,{to:"/image/list",replace:!0,children:"\u5168\u90E8\u955C\u50CF"}),key:"all"},{label:(0,n.jsx)(y.Link,{to:"/image/list/recycle",replace:!0,children:"\u6784\u5EFA\u4EFB\u52A1"}),key:"build"}]})})},toolBarRender:function(){return[(0,n.jsx)(w.u,{access:"canSeeImageListManageDelete",children:(0,n.jsx)(ne.Z,{action:function(){return(0,i.c7)()},onSuccess:function(){var r,U;return!((r=M.current)===null||r===void 0)&&r.reloadAndRest&&((U=M.current)===null||U===void 0||U.reloadAndRest()),!0},onError:function(){var r,U;return!((r=M.current)===null||r===void 0)&&r.reset&&((U=M.current)===null||U===void 0||U.reset()),!0},confirm:"notification.confirm.title",children:"\u6E05\u7406\u672A\u4F7F\u7528\u955C\u50CF"})},"prune")]},columnsState:(0,te.j)("image-list")})]})}},97961:function($,T,e){e.d(T,{GH:function(){return v},MF:function(){return d},_2:function(){return x},fN:function(){return B},ii:function(){return s},vC:function(){return P}});var I=e(15009),a=e.n(I),F=e(99289),l=e.n(F),p=e(82346),s=[{name:"linux/amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"linux/arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"linux/i386",arch:"386",search:[]},{name:"linux/arm/v6",arch:"arm",search:[]},{name:"linux/arm/v7",arch:"arm",search:[]},{name:"linux/arm/v8",arch:"arm64",search:[]},{name:"linux/ppc64le",arch:"ppc64le",search:[]},{name:"linux/riscv64",arch:"riscv64",search:[]}];function B(h){return D.apply(this,arguments)}function D(){return D=l()(a()().mark(function h(g){return a()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",(0,p.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:g}));case 1:case"end":return E.stop()}},h)})),D.apply(this,arguments)}function P(h){return t.apply(this,arguments)}function t(){return t=l()(a()().mark(function h(g){return a()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",(0,p.request)("/api/app/image/import-by-container-tar",{method:"POST",data:g}));case 1:case"end":return E.stop()}},h)})),t.apply(this,arguments)}function v(h){return f.apply(this,arguments)}function f(){return f=l()(a()().mark(function h(g){return a()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",(0,p.request)("/api/app/image/import-by-image-tar",{method:"POST",data:g}));case 1:case"end":return E.stop()}},h)})),f.apply(this,arguments)}function x(h){return O.apply(this,arguments)}function O(){return O=l()(a()().mark(function h(g){return a()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,p.request)("/api/common/attach/delete",{method:"POST",data:g});case 2:return E.abrupt("return",E.sent);case 3:case"end":return E.stop()}},h)})),O.apply(this,arguments)}function d(){return R.apply(this,arguments)}function R(){return R=l()(a()().mark(function h(){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,p.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return o.stop()}},h)})),R.apply(this,arguments)}},3393:function($,T,e){e.d(T,{Gb:function(){return D},Pn:function(){return f},Rb:function(){return O},YU:function(){return s},ZQ:function(){return g},_U:function(){return t},cD:function(){return E},cd:function(){return R}});var I=e(15009),a=e.n(I),F=e(99289),l=e.n(F),p=e(82346);function s(_){return B.apply(this,arguments)}function B(){return B=l()(a()().mark(function _(u){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,p.request)("/api/app/image/get-detail",{method:"POST",data:u}));case 1:case"end":return i.stop()}},_)})),B.apply(this,arguments)}function D(_){return P.apply(this,arguments)}function P(){return P=l()(a()().mark(function _(u){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,p.request)("/api/app/image/tag-remote",{method:"POST",data:u}));case 1:case"end":return i.stop()}},_)})),P.apply(this,arguments)}function t(_){return v.apply(this,arguments)}function v(){return v=l()(a()().mark(function _(u){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,p.request)("/api/app/image/tag-add",{method:"POST",data:u}));case 1:case"end":return i.stop()}},_)})),v.apply(this,arguments)}function f(_){return x.apply(this,arguments)}function x(){return x=l()(a()().mark(function _(u){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,p.request)("/api/app/image/tag-delete",{method:"POST",data:u}));case 1:case"end":return i.stop()}},_)})),x.apply(this,arguments)}function O(_){return d.apply(this,arguments)}function d(){return d=l()(a()().mark(function _(u){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,p.request)("/api/app/image/export",{method:"POST",data:u,responseType:"blob"}));case 1:case"end":return i.stop()}},_)})),d.apply(this,arguments)}function R(_){return h.apply(this,arguments)}function h(){return h=l()(a()().mark(function _(u){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,p.request)("/api/pro/image/get-remote-tag",{method:"POST",data:u}));case 1:case"end":return i.stop()}},_)})),h.apply(this,arguments)}function g(_){return o.apply(this,arguments)}function o(){return o=l()(a()().mark(function _(u){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,p.request)("/api/app/image/check-upgrade",{method:"POST",data:u}));case 1:case"end":return i.stop()}},_)})),o.apply(this,arguments)}function E(_){return C.apply(this,arguments)}function C(){return C=l()(a()().mark(function _(u){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,p.request)("/api/app/image/get-rootfs",{method:"POST",data:u}));case 1:case"end":return i.stop()}},_)})),C.apply(this,arguments)}}}]);
