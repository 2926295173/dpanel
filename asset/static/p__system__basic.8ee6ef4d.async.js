"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1050],{1699:function(q,N,n){n.d(N,{u:function(){return O}});var K=n(9783),p=n.n(K),H=n(97857),D=n.n(H),z=n(67294),T=n(82346),G=n(40411),g=n(42075),L=n(85893),O=function(w){var Q=(0,T.useAccess)(),t=Array.isArray(w.access)?w.access:[w.access],R,m=w.fallback;if(typeof w.children=="function"?(R=w.children(t.reduce(function(M,E){return D()(D()({},M),{},p()({},E,Q[E]))},{})),R||(R=m)):t.every(function(M){return Q[M]})?R=w.children:R=m,!m&&R&&w.showProTips&&Q.canSeeEnableCe){if(Q.canSeeEnableHiddenProTips)return null;R=(0,L.jsx)(G.Z,{offset:w.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:R})}if(!m&&R&&w.showProRibbonTips&&Q.canSeeEnableCe){if(Q.canSeeEnableHiddenProTips)return null;R=(0,L.jsx)(G.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:R})}return w.space?(0,L.jsx)(g.Z,D()(D()({},w.space),{},{children:R})):R}},80821:function(q,N,n){n.d(N,{Z:function(){return Q}});var K=n(97857),p=n.n(K),H=n(5574),D=n.n(H),z=n(24963),T=n(36146),G=n(86738),g=n(83062),L=n(96074),O=n(83622),e=n(67294),w=n(85893);function Q(t){var R=(0,e.useState)(!1),m=D()(R,2),M=m[0],E=m[1],B=(0,e.useContext)(z.Z),F=B.message,I=new T.Uo,y=function(){E(!0);var P=t.action();P instanceof Promise?P.then(function(A){if(E(!1),A){typeof t.onSuccess=="function"&&t.onSuccess(A);var $="";t.messageSuccess?typeof t.messageSuccess=="function"?$=t.messageSuccess(A):$=t.messageSuccess.indexOf("notification.")==0?I.format(t.messageSuccess):t.messageSuccess:$=I.format("notification.finish"),t.asynced?F.info($):F.success($)}}).catch(function(A){E(!1),typeof t.onError=="function"&&t.onError(A)}):E(!1)};return t.confirm?(0,w.jsx)(G.Z,p()(p()({style:{width:500},title:t.confirmTitle?t.confirmTitle:I.format("notification.title.tip"),description:typeof t.confirm=="string"&&t.confirm.indexOf("notification.")==0?I.format(t.confirm):t.confirm,onConfirm:y,okText:"Yes",cancelText:"No",onOpenChange:t.confirmOnOpenChange},t.confirmProps),{},{children:(0,w.jsxs)(g.Z,{title:t.tips,children:[t.showDivider&&(0,w.jsx)(L.Z,{type:"vertical",style:{marginRight:15}}),(0,w.jsx)(O.ZP,{block:t.block,disabled:t.disabled,icon:!t.children&&M?void 0:t.icon,loading:M,danger:t.danger,type:t.type,children:t.children})]})})):(0,w.jsxs)(g.Z,{title:t.tips,children:[t.showDivider&&(0,w.jsx)(L.Z,{type:"vertical",style:{marginRight:15}}),(0,w.jsx)(O.ZP,{block:t.block,style:t.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:t.disabled,icon:!t.children&&M?void 0:t.icon,loading:M,onClick:y,danger:t.danger,type:t.type,children:t.children})]})}},44349:function(q,N,n){var K=n(97857),p=n.n(K),H=n(15009),D=n.n(H),z=n(99289),T=n.n(z),G=n(74763),g=n(17186),L=n(5966),O=n(86250),e=n(67294),w=n(85893),Q=(0,e.forwardRef)(function(t,R){var m=(0,e.useRef)();(0,e.useImperativeHandle)(R,function(){return{addItem:function(E){function B(F,I,y){return E.apply(this,arguments)}return B.toString=function(){return E.toString()},B}(function(E,B,F){var I,y=(I=m.current)===null||I===void 0?void 0:I.getList(),W;if(y==null||y.forEach(function($,oe){$[E]==B[E]&&(W=oe)}),!(0,G.k)(W)&&F){var P;(P=m.current)===null||P===void 0||P.remove(W),W=void 0}if(!W){var A;(A=m.current)===null||A===void 0||A.add(B)}}),removeItemByKey:function(B,F){return T()(D()().mark(function I(){var y,W;return D()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return W=(y=m.current)===null||y===void 0?void 0:y.getList(),W==null||W.forEach(function($,oe){if($[B]==F){var J;(J=m.current)===null||J===void 0||J.remove(oe);return}}),A.abrupt("return");case 3:case"end":return A.stop()}},I)}))()},clear:function(B){if(!B){var F;B=(F=m.current)===null||F===void 0||(F=F.getList())===null||F===void 0?void 0:F.map(function(y,W){return W})}if(B){var I;(I=m.current)===null||I===void 0||I.remove(B)}},getList:function(){var B;return(B=m.current)===null||B===void 0?void 0:B.getList()}}});var M={};return t.hideCopyButton===!0&&(M.copyIconProps=!1),t.hideDeleteButton===!0&&(M.deleteIconProps=!1),(0,w.jsx)(g.u,p()(p()({initialValue:t.initialValue,label:t.label,name:t.name,actionRef:m,creatorButtonProps:t.showAddButton?{creatorButtonText:t.label?t.label:t.showAddButtonLabel?t.showAddButtonLabel:t.name}:!1,min:t.min?t.min:0},M),{},{children:function(B,F,I){return(0,w.jsx)(O.Z,{justify:t.justify,gap:t.gap,children:t.items.map(function(y){return y.render?(0,w.jsx)("div",{children:y.render&&y.render(B,F,I)},"".concat(t.name,"-").concat(y.name,"-").concat(B.key)):(0,w.jsx)(L.Z,{width:y.width,name:y.name,label:y.label,required:y.required,rules:[{required:y.required}],disabled:y.disabled,placeholder:y.placeholder},"".concat(t.name,"-").concat(y.name,"-").concat(B.key))})})}}))});N.Z=Q},2808:function(q,N,n){n.d(N,{Z:function(){return G}});var K=n(97857),p=n.n(K),H=n(62370),D=n(51663),z=n(67294),T=n(85893);function G(g){return(0,T.jsx)(H.Z,p()(p()({},g),{},{children:(0,T.jsx)(D.Z,{showText:function(O){return O.toHexString()},allowClear:!0,presets:[{label:"Color",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},51100:function(q,N,n){n.d(N,{Z:function(){return z}});var K=n(97961),p=n(91604),H=n(1677),D=n(85893);function z(T){return T.showDragger?(0,D.jsx)(p.Z,{max:T.max?T.max:1,title:T.title,label:T.label,required:T.required,rules:[{required:T.required}],fieldProps:{multiple:!!(T.max&&T.max>1),name:"file",accept:T.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(g){return new Promise(function(L){var O;(0,K._2)({path:(O=g.response.data.path)!==null&&O!==void 0?O:""}).then(function(e){L(!0)})})}},name:T.name}):(0,D.jsx)(H.Z,{max:T.max?T.max:1,title:T.title,label:T.label,required:T.required,rules:[{required:T.required}],fieldProps:{multiple:!!(T.max&&T.max>1),name:"file",accept:T.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(g){return new Promise(function(L){var O;(0,K._2)({path:(O=g.response.data.path)!==null&&O!==void 0?O:""}).then(function(e){L(!0)})})}},name:T.name})}},3616:function(q,N,n){n.d(N,{Ed:function(){return D},FK:function(){return p},R_:function(){return K},ob:function(){return H}});var K=window.innerWidth<=1024?"90vw":"65vw",p="90vw",H="60vw",D="50vh"},12323:function(q,N,n){n.d(N,{X:function(){return K},n:function(){return p}});var K={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},p=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},24963:function(q,N,n){var K=n(67294),p=(0,K.createContext)({});N.Z=p},74219:function(q,N,n){n.r(N),n.d(N,{default:function(){return qe}});var K=n(5574),p=n.n(K),H=n(62370),D=n(97462),z=n(42075),T=n(25593),G=n(80821),g=n(36146),L=n(1699),O=n(82346),e=n(85893);function w(s){var a=(0,O.useAccess)(),u=(0,e.jsxs)(z.Z,{style:{display:"block",marginTop:40},direction:"vertical",children:[(0,e.jsx)(H.Z,{name:s.name,hidden:!0}),(0,e.jsx)(D.Z,{name:[s.name],children:function(U){var Z,f=U[s.name];return(0,e.jsxs)(H.Z,{label:s.label,children:[(0,e.jsxs)(z.Z.Compact,{children:[s.disable&&(0,e.jsx)(G.Z,{confirm:g.FD.format("confirm.disable"),action:function(){return s.onDisable()},danger:s.disable(f),type:s.disable(f)?"primary":"default",onSuccess:function(){s.onFinish&&s.onFinish()},children:(Z=s.disableLabel)!==null&&Z!==void 0?Z:g.FD.format("listManageDisable")}),s.settingComponent&&(0,e.jsx)(s.settingComponent,{data:f,onFinish:s.onFinish})]}),(0,e.jsx)(T.Z.Text,{type:"secondary",style:{marginLeft:30},children:s.tip})]})}})]});return s.isPe?(0,e.jsx)(L.u,{access:["canSeeEnableCe"],showProRibbonTips:!0,children:function(U){var Z=U.canSeeEnableCe;return u}}):u}var Q=n(15009),t=n.n(Q),R=n(99289),m=n.n(R),M=n(24963),E=n(87662),B=n(86548),F=n(97937),I=n(184),y=n(5966),W=n(83622),P=n(67294),A=n(3616),$=function(a){var u=(0,P.useRef)(),d=(0,O.useModel)("@@initialState"),U=d.refresh,Z=(0,P.useContext)(M.Z),f=Z.message,S=new g.Uo("components.systemBasic"),V=(0,P.useState)(!1),v=p()(V,2),_=v[0],i=v[1];return(0,e.jsxs)(I.a,{trigger:(0,e.jsx)(W.ZP,{type:"primary",children:g.FD.format("listManageSetting")}),onOpenChange:function(l){var r;i(l),l&&((r=u.current)===null||r===void 0||r.setFieldValue("username",a.data.username))},open:_,drawerProps:{width:A.R_,forceRender:!0},title:S.format("founderTitle"),formRef:u,onFinish:function(){var o=m()(t()().mark(function l(r){var c,C;return t()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,E.Jn)({username:r.username,password:r.password,newPassword:r.newPassword});case 2:if(c=j.sent,!(c&&c.data)){j.next=9;break}return(C=u.current)===null||C===void 0||C.resetFields(),f.success(g.FD.format("finish")),localStorage.removeItem("token"),U(),j.abrupt("return",!0);case 9:case"end":return j.stop()}},l)}));return function(l){return o.apply(this,arguments)}}(),children:[(0,e.jsx)(D.Z,{name:["enableUsername"],children:function(l){var r=l.enableUsername;return(0,e.jsx)(y.Z,{label:S.format("founderUsername"),name:"username",width:"lg",disabled:!r,addonAfter:[(0,e.jsx)(W.ZP,{type:"link",hidden:!!r,icon:(0,e.jsx)(B.Z,{}),onClick:function(){var C;(C=u.current)===null||C===void 0||C.setFieldValue("enableUsername",!0)}},"editBtn"),(0,e.jsx)(W.ZP,{type:"link",hidden:!r,icon:(0,e.jsx)(F.Z,{}),onClick:function(){var C;(C=u.current)===null||C===void 0||C.setFieldValue("enableUsername",!1)}},"closeBtn")]},"username")}}),(0,e.jsx)(y.Z.Password,{label:S.format("founderPassword"),name:"password",placeholder:S.format("founderPasswordEmpty"),rules:[{required:!0}]},"password"),(0,e.jsx)(y.Z.Password,{label:S.format("founderNewPassword"),name:"newPassword"},"newPasword"),(0,e.jsx)(D.Z,{name:["newPassword"],children:function(l){var r=l.newPassword;return(0,e.jsx)(y.Z.Password,{label:S.format("founderNewPassword2"),name:"newPassword2",dependencies:["newPassword"],rules:[{required:typeof r!="undefined"&&r!=""},function(c){var C=c.getFieldValue;return{validator:function(j,x){return!x||C("newPassword")===x?Promise.resolve():Promise.reject(new Error(S.format("founderMessagePasswordNotMatch")))}}}]},"newPasword2")}})]},"drawer")},oe=$,J=n(38345),ie=n(64317),te=n(52688),ae=n(86615),ve=n(90672),_e=n(40056),Se=function(a){var u,d,U=(0,P.useContext)(M.Z),Z=U.message,f=(0,P.useRef)(),S=new g.Uo("components.systemBasic"),V=(0,P.useState)(!1),v=p()(V,2),_=v[0],i=v[1];return(0,P.useEffect)(function(){if(f.current&&a.data){var o,l;(o=f.current)===null||o===void 0||o.setFieldsValue({loginFailedEnable:a.data.failedEnable,loginFailedTotal:a.data.failedTotal===0?5:a.data.failedTotal,loginFailedLockTime:a.data.failedLockTime?a.data.failedLockTime.toString():"900",loginNoPasswordEnable:a.data.noPasswordEnable,loginNoPasswordUrl:a.data.noPasswordUrl,loginNoPassworkUserAgent:a.data.noPasswordUserAgent,loginNoPasswordIpList:a.data.noPasswordIpList,loginDefaultRedirect:(l=a.data.defaultRedirect)!==null&&l!==void 0?l:"/home/overview"})}},[f.current]),(0,e.jsxs)(I.a,{drawerProps:{width:A.R_,destroyOnHidden:!0},trigger:(0,e.jsx)(W.ZP,{type:(u=a.data)!==null&&u!==void 0&&u.failedEnable?"primary":"default",children:(d=a.data)!==null&&d!==void 0&&d.failedEnable?g.FD.format("listManageSetting"):g.FD.format("listManageEnable")}),onOpenChange:function(l){var r;i(l),!l&&((r=f.current)===null||r===void 0||r.resetFields())},open:_,title:S.format("loginTitle"),onFinish:function(){var o=m()(t()().mark(function l(r){var c;return t()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return c={failedEnable:r.loginFailedEnable,noPasswordEnable:r.loginNoPasswordEnable,defaultRedirect:r.loginDefaultRedirect},c.failedEnable&&(c.failedTotal=parseInt(r.loginFailedTotal),c.failedLockTime=parseInt(r.loginFailedLockTime)),c.noPasswordEnable&&(c=Object.assign(c,{noPasswordUrl:r.loginNoPasswordUrl,noPasswordUserAgent:r.loginNoPasswordUserAgent,noPasswordIplist:r.loginNoPasswordIplist})),b.next=5,(0,E.bv)({login:c,saveCache:!0});case 5:i(!1),Z.success(g.FD.format("finish")),a.onFinish&&a.onFinish();case 8:case"end":return b.stop()}},l)}));return function(l){return o.apply(this,arguments)}}(),formRef:f,children:[(0,e.jsx)(J.Z,{title:S.format("loginBasicTitle"),ghost:!0,children:(0,e.jsx)(L.u,{access:["canSeeEnableCe"],showProRibbonTips:!0,children:function(l){var r=l.canSeeEnableCe;return(0,e.jsx)(ie.Z,{disabled:r,label:S.format("loginBasicDefaultRedirect"),name:"loginDefaultRedirect",options:S.option("loginBasicDefaultRedirectOption",["/home/overview","/home/tag","/app/list","/compose/list","/swarm/service"])})}})}),(0,e.jsxs)(J.Z,{title:S.format("loginFailedTitle"),ghost:!0,children:[(0,e.jsx)(te.Z,{name:"loginFailedEnable"}),(0,e.jsx)(y.Z,{name:"loginFailedTotal",label:S.format("loginFailedTotal"),fieldProps:{addonAfter:g.FD.format("unitTimes")}}),(0,e.jsx)(ae.Z.Group,{name:"loginFailedLockTime",label:S.format("loginFailedLockTime"),options:S.option("loginFailedLockTimeOption",["300","900","3600","18000","-1"])})]}),(0,e.jsxs)(J.Z,{title:S.format("loginNoPasswordTitle"),hidden:!0,ghost:!0,children:[(0,e.jsx)(_e.Z,{message:"\u5F00\u542F\u514D\u5BC6\u767B\u5F55\u540E\uFF0C\u9762\u677F\u540E\u53F0\u5C06\u4E0D\u9700\u8981\u767B\u5F55\u3002\u6B64\u529F\u80FD\u4EC5\u9650\u4E8E\u5728\u672C\u5730\u6216\u662F\u5185\u7F51\u4E2D\u4F7F\u7528\uFF0C\u8BF7\u8C28\u614E\u5F00\u542F\u3002",type:"warning",style:{marginBottom:15}}),(0,e.jsx)(te.Z,{name:"loginNoPasswordEnable"}),(0,e.jsx)(L.u,{access:["canSeeEnableCe"],showProRibbonTips:!0,children:function(l){var r=l.canSeeEnableCe;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(y.Z,{disabled:r,label:"\u514D\u5BC6\u767B\u5F55\u5730\u5740",name:"loginNoPasswordUrl"}),(0,e.jsx)(y.Z,{disabled:r,label:"\u514D\u5BC6\u767B\u5F55 User-Agent",name:"loginNoPasswordUserAgent"}),(0,e.jsx)(ve.Z,{disabled:r,label:"\u514D\u5BC6\u767B\u5F55 IP \u767D\u540D\u5355",name:"loginNoPasswordIpWhitelist"})]})}})]})]})},xe=Se;function be(s){return de.apply(this,arguments)}function de(){return de=m()(t()().mark(function s(a){return t()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,O.request)("/api/pro/two-fa/enable",{method:"POST",data:a}));case 1:case"end":return d.stop()}},s)})),de.apply(this,arguments)}var ye=n(29104),Pe=function(a){var u,d,U=new g.Uo("components.systemBasic"),Z=(0,O.useAccess)(),f=(0,P.useRef)(),S=(0,P.useContext)(M.Z),V=S.message,v=(0,P.useState)(!1),_=p()(v,2),i=_[0],o=_[1],l=(0,O.useModel)("@@initialState"),r=l.initialState;return(0,P.useEffect)(function(){if(f.current&&!Z.canSeeEnableCe&&r){var c;if(!a.data||!a.data.enable)var C=be({email:r==null?void 0:r.user.username,enable:!1}).then(function(x){var h,k;(h=f.current)===null||h===void 0||h.setFieldValue("twoFaEmail",r.user.username),(k=f.current)===null||k===void 0||k.setFieldValue("towFaQrcode",x.data.qrCode)});else{var b,j;(b=f.current)===null||b===void 0||b.setFieldValue("twoFaEmail",a.data.email),(j=f.current)===null||j===void 0||j.setFieldValue("towFaQrcode",a.data.qrCode)}(c=f.current)===null||c===void 0||c.setFieldValue("twoFaCode","")}},[f.current]),(0,e.jsx)(I.a,{drawerProps:{width:A.R_,destroyOnHidden:!0},trigger:(0,e.jsx)(W.ZP,{disabled:Z.canSeeEnableCe,style:{width:90},type:(u=a.data)!==null&&u!==void 0&&u.enable?"primary":"default",children:(d=a.data)!==null&&d!==void 0&&d.enable?g.FD.format("listManageSetting"):g.FD.format("listManageEnable")}),onOpenChange:function(){var c=m()(t()().mark(function C(b){var j;return t()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:o(b),!b&&((j=f.current)===null||j===void 0||j.resetFields());case 2:case"end":return h.stop()}},C)}));return function(C){return c.apply(this,arguments)}}(),open:i,title:U.format("twoFaTitle"),onFinish:function(){var c=m()(t()().mark(function C(b){var j;return t()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(Z.canSeeEnableCe){h.next=4;break}return h.next=3,be({email:b.twoFaEmail,enable:!0,code:b.twoFaCode});case 3:j=h.sent;case 4:V.success(g.FD.format("finish")),o(!1),a.onFinish&&a.onFinish();case 7:case"end":return h.stop()}},C)}));return function(C){return c.apply(this,arguments)}}(),formRef:f,children:(0,e.jsx)(L.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(C){var b=C.canSeeEnableCe;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(y.Z,{label:U.format("twoFaEmail"),name:"twoFaEmail",disabled:!0,placeholder:U.format("twoFaEmailEmpty")}),(0,e.jsx)(y.Z,{label:"\u9A8C\u8BC1\u7801",name:"twoFaCode",required:!0,disabled:b,rules:[{required:!0}]}),(0,e.jsx)(H.Z,{label:U.format("twoFaQrcode"),tooltip:U.format("twoFaQrcodeTip"),shouldUpdate:!0,children:function(x){var h=x.getFieldValue("towFaQrcode");return h&&(0,e.jsx)(ye.Z,{style:{border:"#d1d9e0b3 solid 1px",padding:"10px",borderRadius:"10px"},width:200,src:"data:image/png;base64,".concat(h)})}})]})}})})},Te=Pe,Fe=n(29177),Ue=n(90078),we=n(97269),Oe=n(86125);function Me(s){var a=(0,O.useModel)("@@initialState"),u=a.initialState,d=(0,O.useAccess)(),U=(0,P.useContext)(M.Z),Z=U.message,f=(0,O.useAntdConfigSetter)(),S=new g.Uo("components.systemBasic"),V=(0,P.useState)(!1),v=p()(V,2),_=v[0],i=v[1],o=(0,P.useRef)();return(0,P.useEffect)(function(){if(o.current){var l,r,c,C,b,j,x,h;(l=o.current)===null||l===void 0||l.setFieldsValue({algorithm:(r=u==null?void 0:u.theme.algorithm)!==null&&r!==void 0?r:"default",mainMenu:(c=u==null?void 0:u.theme.mainMenu)!==null&&c!==void 0?c:"top",compact:(C=u==null?void 0:u.theme.compact)!==null&&C!==void 0?C:"default",fontSize:(b=u==null?void 0:u.theme.fontSize)!==null&&b!==void 0?b:14,fontSizeConsole:(j=u==null?void 0:u.theme.fontSizeConsole)!==null&&j!==void 0?j:12,sideMenu:(x=u==null?void 0:u.theme.sideMenu)!==null&&x!==void 0?x:"default",tablePageSize:(h=u==null?void 0:u.theme.tablePageSize)!==null&&h!==void 0?h:"20"})}},[u,o.current]),(0,e.jsxs)(I.a,{formRef:o,drawerProps:{width:A.R_,destroyOnHidden:!0},onOpenChange:function(r){var c;i(r),!r&&((c=o.current)===null||c===void 0||c.resetFields())},open:_,trigger:(0,e.jsx)(W.ZP,{type:"primary",children:g.FD.format("listManageSetting")}),onFinish:function(){var l=m()(t()().mark(function r(c){var C;return t()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(C={algorithm:c.algorithm,mainMenu:c.mainMenu,sideMenu:c.sideMenu,compact:c.compact,fontSizeConsole:c.fontSizeConsole,fontSize:c.fontSize,tablePageSize:c.tablePageSize},!(c.algorithm!=(u==null?void 0:u.theme.algorithm)&&!d.canSeeEnableCe)){j.next=4;break}return j.next=4,(0,E.GV)({groupName:"setting",name:"themeUserConfig"});case 4:return localStorage.setItem("dpanel-theme",c.algorithm),localStorage.setItem("dpanel-compact",c.compact),localStorage.setItem("dpanel-pagesize",c.tablePageSize),j.next=9,(0,E.bv)({theme:C});case 9:Z.success(g.FD.format("finishTheme")),i(!1),s.onFinish&&s.onFinish();case 12:case"end":return j.stop()}},r)}));return function(r){return l.apply(this,arguments)}}(),children:[(0,e.jsx)(ae.Z.Group,{name:"algorithm",label:S.format("themeConfigAlgorithm"),initialValue:"default",radioType:"button",options:S.option("themeConfigAlgorithmOption",["default","dark","system"]),fieldProps:{onChange:function(r){r.target.value=="system"&&Z.warning("\u4E3B\u9898\u76AE\u80A4\u914D\u7F6E\u4E3A\u8DDF\u968F\u7CFB\u7EDF\u540E\uFF0C\u5C06\u4F1A\u6E05\u7A7A\u81EA\u5B9A\u4E49\u4E3B\u9898\u98CE\u683C")}}}),(0,e.jsx)(ae.Z.Group,{name:"mainMenu",label:S.format("themeConfigMainMenu"),initialValue:"top",radioType:"button",options:S.option("themeConfigMainMenuOption",["top","side"])}),(0,e.jsx)(ae.Z.Group,{name:"sideMenu",label:S.format("themeConfigSideMenu"),initialValue:"default",radioType:"button",options:S.option("themeConfigSideMenuOption",["default","collapse"])}),(0,e.jsx)(ae.Z.Group,{name:"compact",label:S.format("themeConfigCompact"),initialValue:"default",radioType:"button",options:S.option("themeConfigCompactOption",["default","compact"])}),(0,e.jsx)(H.Z,{name:"fontSize",label:S.format("themeConfigFontSize"),initialValue:14,children:(0,e.jsx)(Oe.Z,{step:2,max:30,min:8,marks:{8:"8",10:"10",12:"12",14:"14",16:"16",20:"20",26:"26"}})}),(0,e.jsx)(ie.Z,{initialValue:"20",label:S.format("themeConfigTablePageSize"),name:"tablePageSize",options:S.option("themeConfigTablePageSizeOption",["5","10","20","50","100","all"])})]})}var Y=n(24739),De=n(25054),ne=n(31199),Be=n(21532),ce=n(86250),Ze=n(44349);function Le(s){return me.apply(this,arguments)}function me(){return me=m()(t()().mark(function s(a){return t()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,O.request)("/api/pro/theme/save-theme-user-config",{method:"POST",data:a});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},s)})),me.apply(this,arguments)}var Ie=n(2808),fe=n(51100),Re=n(96486),We=n.n(Re),re={colorPrimary:"",colorTextBase:"",colorLink:"",colorBgContainer:"",colorBorder:"",colorBgElevated:"",colorBorderSecondary:"colorBorder"},pe=["borderRadius","wireframe"],Ae=function(a){var u=(0,O.useAccess)(),d=(0,P.useRef)(),U=(0,P.useContext)(M.Z),Z=U.message,f=new g.Uo("components.systemBasic"),S=(0,P.useState)(!1),V=p()(S,2),v=V[0],_=V[1],i=function(l){return(0,e.jsx)(Ie.Z,{name:l.name,label:f.format("themeUserConfig.".concat(l.name)),tooltip:l.tooltip})};return(0,P.useEffect)(function(){if(!u.canSeeEnableCe&&d.current&&a.data){var o,l;if((o=d.current)===null||o===void 0||o.resetFields(["bgImageUpload","siteLogoUpload"]),pe.forEach(function(C){if(a.data&&a.data.token&&a.data.token[C]){var b,j;(b=d.current)===null||b===void 0||b.setFieldValue("enableStyle",!0),(j=d.current)===null||j===void 0||j.setFieldValue(C,a.data.token[C])}}),(l=d.current)===null||l===void 0||l.setFieldsValue({siteLogo:a.data.siteLogo,siteTitle:a.data.siteTitle,siteCopyright:a.data.siteCopyright,siteLink:a.data.siteLink,bgImage:a.data.bgImage,loginLogo:a.data.loginLogo}),!a.data.bgImage||!a.data.bgImage.width||a.data.bgImage.width=="100%"){var r;(r=d.current)===null||r===void 0||r.setFieldValue("bgSize","full")}else{var c;(c=d.current)===null||c===void 0||c.setFieldValue("bgSize","default")}Object.keys(re).map(function(C){var b=C;re[C]!=""&&(b=re[C]),d!=null&&d.current&&a.data&&a.data.token&&!We().isEmpty(a.data.token)&&(d==null||d.current.setFieldValue("enableColor",!0),d==null||d.current.setFieldValue(C,a.data.token[b]))})}},[d.current]),(0,e.jsx)(Be.ZP,{children:(0,e.jsxs)(I.a,{trigger:(0,e.jsx)(W.ZP,{disabled:u.canSeeEnableCe,type:"primary",children:g.FD.format("listManageSetting")}),drawerProps:{width:A.R_},onOpenChange:function(l){var r;_(l),!l&&((r=d.current)===null||r===void 0||r.resetFields())},open:v,title:f.format("themeUserConfigTitle"),formRef:d,onFinish:function(){var o=m()(t()().mark(function l(r){var c,C,b;return t()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!u.canSeeEnableCe){x.next=2;break}return x.abrupt("return",!1);case 2:return b={token:{},bgImage:r.bgImage,siteLink:r.siteLink,siteTitle:(c=r.siteTitle)!==null&&c!==void 0?c:"",siteCopyright:r.siteCopyright,siteLogo:(C=r.siteLogo)!==null&&C!==void 0?C:"",loginLogo:r.loginLogo},r.siteLogoUpload&&r.siteLogoUpload.length>0&&(b.siteLogo=r.siteLogoUpload[0].response.data.path),b.bgImage||(b.bgImage={}),r.bgImageUpload&&r.bgImageUpload.length>0&&(b.bgImage.src=r.bgImageUpload[0].response.data.path),b.bgImage.width=r.bgSize=="full"?"100%":"",r.loginLogoUpload&&r.loginLogoUpload.length>0&&(b.loginLogo=r.loginLogoUpload[0].response.data.path),Object.keys(re).map(function(h){b.token||(b.token={});var k=h;re[h]!=""&&(k=re[h]);var X=d.current&&d.current.getFieldValue(k);X&&X.toHexString?X.cleared||(b.token[h]=X.toHexString()):b.token[h]=X}),pe.map(function(h){b.token||(b.token={});var k=d.current&&d.current.getFieldValue(h);b.token[h]=k}),x.next=12,Le(b);case 12:return a.onFinish&&a.onFinish(),Z.success(g.FD.format("finishTheme")),x.abrupt("return",!0);case 15:case"end":return x.stop()}},l)}));return function(l){return o.apply(this,arguments)}}(),children:[(0,e.jsx)(Y.UW,{title:f.format("themeUserConfigColorTitle"),extra:(0,e.jsx)(te.Z,{name:"enableColor"})}),(0,e.jsx)(D.Z,{name:["enableColor"],children:function(l){var r=l.enableColor;return r&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Y.UW,{children:i({name:"colorPrimary",tooltip:f.format("themeUserConfigColorPrimaryTip")})}),(0,e.jsxs)(Y.UW,{children:[i({name:"colorBgContainer"}),i({name:"colorBgElevated"})]}),(0,e.jsxs)(Y.UW,{children:[i({name:"colorTextBase"}),i({name:"colorLink"}),i({name:"colorBorder"})]})]})}}),(0,e.jsx)(Y.UW,{title:"\u98CE\u683C",extra:(0,e.jsx)(te.Z,{name:"enableStyle"})}),(0,e.jsx)(D.Z,{name:["enableStyle"],children:function(l){var r=l.enableStyle;return r&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Y.UW,{children:(0,e.jsxs)(ce.Z,{gap:40,children:[(0,e.jsx)(te.Z,{label:f.format("themeUserConfigWireframe"),name:"wireframe"}),(0,e.jsx)(De.Z,{min:1,max:16,label:f.format("themeUserConfigBorderRadius"),name:"borderRadius"})]})})})}}),(0,e.jsx)(Y.UW,{title:f.format("themeUserConfigUiTitle")}),(0,e.jsx)(y.Z,{label:f.format("themeUserConfigSiteTitle"),name:"siteTitle",placeholder:f.format("themeUserConfigSiteTitleEmpty")}),(0,e.jsxs)(Y.UW,{children:[(0,e.jsx)(fe.Z,{label:"Logo",title:f.format("themeUserConfigSiteLogoUploadTitle"),name:"siteLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(y.Z,{width:"md",placeholder:f.format("themeUserConfigSiteLogoEmpty"),label:f.format("themeUserConfigSiteLogo"),name:"siteLogo"})]}),(0,e.jsxs)(Y.UW,{children:[(0,e.jsx)(fe.Z,{label:f.format("themeUserConfigBgImageUpload"),title:f.format("themeUserConfigBgImageUploadTitle"),name:"bgImageUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(y.Z,{width:"md",placeholder:f.format("themeUserConfigSiteLogoEmpty"),label:f.format("themeUserConfigBgImageSrc"),name:["bgImage","src"]}),(0,e.jsx)(ae.Z.Group,{name:"bgSize",label:f.format("themeUserConfigBgImageBgSize"),initialValue:"full",options:f.option("themeUserConfigBgImageBgSizeOption",["full","default"])})]}),(0,e.jsx)(Y.UW,{children:(0,e.jsx)(D.Z,{name:["bgSize"],children:function(l){var r=l.bgSize;if(r=="default")return(0,e.jsxs)(Y.UW,{children:[(0,e.jsx)(ne.Z,{width:"xs",name:["bgImage","top"],label:f.format("themeUserConfigBgImageTop")}),(0,e.jsx)(ne.Z,{width:"xs",name:["bgImage","bottom"],label:f.format("themeUserConfigBgImageBottom")}),(0,e.jsx)(ne.Z,{width:"xs",name:["bgImage","left"],label:f.format("themeUserConfigBgImageLeft")}),(0,e.jsx)(ne.Z,{width:"xs",name:["bgImage","right"],label:f.format("themeUserConfigBgImageRight")})]})}})}),(0,e.jsx)(Ze.Z,{name:"siteLink",label:f.format("themeUserConfigSiteLink"),showAddButton:!0,hideCopyButton:!0,gap:10,items:f.option("themeUserConfigSiteLinkOption",["title","href"]).map(function(o){return{name:o.value,label:o.label}})}),(0,e.jsx)(ve.Z,{label:f.format("themeUserConfigSiteCopyright"),name:"siteCopyright"}),(0,e.jsxs)(Y.UW,{title:f.format("themeUserConfigUiLoginTitle"),children:[(0,e.jsx)(fe.Z,{label:"Logo",title:"Logo",name:"loginLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(y.Z,{width:"md",placeholder:f.format("themeUserConfigSiteLogoEmpty"),label:f.format("themeUserConfigLoginLogo"),name:"loginLogo"})]})]})})},ke=Ae,Ne=n(19400),Ce=n(2487),Ke=n(4393),Ve=n(71230),ze=n(15746),He=n(40411),je=n(12323),Ge=n(64304),se=n.n(Ge);function Qe(s){var a=new g.Uo("components.systemBasic"),u=(0,O.useAccess)(),d=(0,P.useContext)(M.Z),U=d.message,Z=(0,P.useState)(),f=p()(Z,2),S=f[0],V=f[1],v=(0,P.useState)(),_=p()(v,2),i=_[0],o=_[1],l=(0,P.useRef)(),r=(0,P.useState)(!1),c=p()(r,2),C=c[0],b=c[1];return(0,P.useEffect)(function(){if(l.current&&s.data){var j,x,h=je.X;s.data&&Object.assign(h,s.data),!u.canSeeEnableCe&&s.data&&(j=s.data)!==null&&j!==void 0&&j.themeName&&s.data.themeName!=""&&Object.keys(se()).forEach(function(k,X){s.data&&k==s.data.themeName&&(o(Math.ceil((X+1)/36)),V(s.data.themeName))}),(x=l.current)===null||x===void 0||x.setFieldsValue({fontSize:h.fontSize,lineHeight:h.lineHeight,letterSpacing:h.letterSpacing,fontWeight:h.fontWeight,cursorStyle:h.cursorStyle,cursorInactiveStyle:h.cursorInactiveStyle,cursorBlink:h.cursorBlink})}},[l.current,s.data]),(0,e.jsxs)(I.a,{onOpenChange:function(x){var h;b(x),!x&&((h=l.current)===null||h===void 0||h.resetFields())},open:C,title:a.format("themeConsoleTitle"),formRef:l,drawerProps:{width:A.R_,destroyOnHidden:!0},trigger:(0,e.jsx)(W.ZP,{type:"primary",children:g.FD.format("listManageSetting")}),onFinish:function(){var j=m()(t()().mark(function x(h){var k;return t()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return k={fontSize:h.fontSize,lineHeight:h.lineHeight,letterSpacing:h.letterSpacing,fontWeight:h.fontWeight,cursorStyle:h.cursorStyle,cursorInactiveStyle:h.cursorInactiveStyle,cursorBlink:h.cursorBlink,theme:{},themeName:""},S!=""&&!u.canSeeEnableCe&&(k.theme=se()[S],k.themeName=S),ee.next=4,(0,E.bv)({console:k});case 4:return U.success(g.FD.format("finishTheme")),b(!1),s.onFinish&&s.onFinish(),ee.abrupt("return",!0);case 8:case"end":return ee.stop()}},x)}));return function(x){return j.apply(this,arguments)}}(),children:[(0,e.jsx)(Y.UW,{title:a.format("themeConsoleFont"),children:(0,e.jsxs)(ce.Z,{gap:50,children:[(0,e.jsx)(ne.Z,{label:a.format("themeConsoleFontSize"),name:"fontSize",tooltip:a.format("themeConsoleFontSizeTip"),fieldProps:{addonAfter:"px"}}),(0,e.jsx)(ne.Z,{label:a.format("themeConsoleLineHeight"),name:"lineHeight",tooltip:a.format("themeConsoleLineHeightTip"),fieldProps:{addonAfter:a.format("themeConsoleLineHeightUnit")}}),(0,e.jsx)(ne.Z,{label:a.format("themeConsoleLetterSpacing"),name:"letterSpacing",fieldProps:{addonAfter:"px"},tooltip:a.format("themeConsoleLetterSpacingTip")}),(0,e.jsx)(ie.Z,{label:a.format("themeConsoleFontWeight"),name:"fontWeight",options:[{label:"normal",value:"normal"},{label:"bold",value:"bold"},{label:"100",value:"100"},{label:"200",value:"200"},{label:"300",value:"300"},{label:"400",value:"400"},{label:"500",value:"500"},{label:"600",value:"600"},{label:"700",value:"700"},{label:"800",value:"800"},{label:"900",value:"900"}]})]})}),(0,e.jsx)(Y.UW,{title:a.format("themeConsoleCursorStyleTitle"),children:(0,e.jsxs)(ce.Z,{gap:50,children:[(0,e.jsx)(ie.Z,{label:a.format("themeConsoleCursorStyle"),name:"cursorStyle",width:"sm",options:a.option("themeConsoleCursorStyleOption",["bar","underline","block"])}),(0,e.jsx)(ie.Z,{label:a.format("themeConsoleCursorInactiveStyle"),name:"cursorInactiveStyle",width:"sm",options:a.option("themeConsoleCursorStyleOption",["bar","underline","block","outline"])}),(0,e.jsx)(te.Z,{label:a.format("themeConsoleCursorBlink"),name:"cursorBlink"})]})}),(0,e.jsx)(L.u,{showProRibbonTips:!0,access:"canSeeEnableCe",children:function(x){var h=x.canSeeEnableCe;return(0,e.jsx)(J.Z,{ghost:!0,title:(0,e.jsx)(Ne.Z,{}),subTitle:a.format("themeConsoleTheme"),children:(0,e.jsx)(Ce.Z,{split:!0,style:{overflow:"hidden"},grid:{column:6},pagination:{pageSize:36,current:i,onChange:function(X,ee){o(X)}},dataSource:Object.keys(se()).map(function(k){return{label:k,value:k,data:se()[k]}}),renderItem:function(X,ee){var ue=X.data,Ee=(0,e.jsxs)(Ke.Z,{style:{backgroundColor:ue.background,color:ue.foreground,textAlign:"center",cursor:h?"not-allowed":"pointer",borderRadius:0},onClick:function(){if(!h){var ge;(ge=l.current)===null||ge===void 0||ge.setFieldValue("theme",X.data),V(X.label)}},hoverable:!0,children:[(0,e.jsx)(Ve.Z,{wrap:!0,gutter:[2,2],justify:"center",align:"middle",children:je.n.filter(function(le){return ue[le]!=""}).map(function(le){return(0,e.jsx)(ze.Z,{style:{backgroundColor:ue[le],padding:8}},le)})}),(0,e.jsx)("div",{style:{paddingTop:5},children:X.label})]});return(0,e.jsx)(Ce.Z.Item,{style:{margin:0},children:S==X.label?(0,e.jsx)(He.Z.Ribbon,{text:"Checked",children:Ee}):Ee},ee)}})})}})]})}var Xe=n(63434);function Ye(s){var a=new g.Uo("components.systemBasic"),u=(0,P.useRef)(),d=(0,P.useState)(!1),U=p()(d,2),Z=U[0],f=U[1],S=(0,P.useContext)(M.Z),V=S.message;return(0,P.useEffect)(function(){if(u.current&&s.data){var v;(v=u.current)===null||v===void 0||v.setFieldsValue(s.data)}},[u.current,s.data]),(0,e.jsxs)(I.a,{drawerProps:{width:A.R_,destroyOnHidden:!0},trigger:(0,e.jsx)(W.ZP,{style:{width:150},type:"primary",children:g.FD.format("listManageSetting")}),onOpenChange:function(_){var i;f(_),!_&&((i=u.current)===null||i===void 0||i.resetFields())},open:Z,title:a.format("notificationTitle"),onFinish:function(){var v=m()(t()().mark(function _(i){return t()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,E.bv)({notification:{emailServer:i.emailServer}});case 2:f(!1),V.success(g.FD.format("finish")),s.onFinish&&s.onFinish();case 5:case"end":return l.stop()}},_)}));return function(_){return v.apply(this,arguments)}}(),formRef:u,children:[(0,e.jsx)(Y.UW,{title:a.format("notificationEmailTitle")}),(0,e.jsx)(y.Z,{label:a.format("notificationEmailHost"),name:["emailServer","host"],tooltip:a.format("notificationEmailHostTip"),required:!0,rules:[{required:!0}]}),(0,e.jsx)(ne.Z,{label:a.format("notificationEmailPort"),name:["emailServer","port"],required:!0,rules:[{required:!0}],initialValue:465}),(0,e.jsx)(y.Z,{label:a.format("notificationEmailCode"),name:["emailServer","code"],width:"lg",placeholder:a.format("notificationEmailCodeTip"),required:!0,rules:[{required:!0}],addonAfter:(0,e.jsxs)(z.Z,{children:[(0,e.jsx)("a",{target:"_blank",href:"https://service.mail.qq.com/detail/0/75",children:a.format("notificationEmailCodeHelp.qq")}),(0,e.jsx)("a",{target:"_blank",href:"https://help.mail.163.com/faqDetail.do?code=d7a5dc8471cd0c0e8b4b8f4f8e49998b374173cfe9171305fa1ce630d7f67ac286624f309a1a7089",children:a.format("notificationEmailCodeHelp.163")})]})}),(0,e.jsx)(y.Z,{label:a.format("notificationEmailEmail"),name:["emailServer","email"],required:!0,rules:[{required:!0}],width:"lg",addonAfter:(0,e.jsx)(G.Z,{tips:a.format("notificationEmailTestTip"),type:"primary",action:m()(t()().mark(function v(){var _;return t()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,E.FB)({emailServer:(_=u.current)===null||_===void 0?void 0:_.getFieldValue("emailServer"),subject:a.format("notificationEmailTestSubject"),content:a.format("notificationEmailTestContent",{time:new Date().toISOString()})});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},v)})),children:a.format("notificationEmailTestButton")},"testEmail")}),(0,e.jsx)(L.u,{access:"canSeeEnableEe",children:(0,e.jsx)(Xe.Z.Group,{name:"status",label:a.format("notificationEmailStatus"),options:a.option("notificationEmailStatusOption",["register"])})})]})}var Je=n(2831),he=n(89035);function $e(){var s=(0,P.useState)([]),a=p()(s,2),u=a[0],d=a[1],U=new g.Uo("components.systemBasic");return(0,P.useEffect)(function(){(function(){var Z=m()(t()().mark(function f(S){var V,v,_,i,o,l,r,c,C;return t()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,Je.d6)();case 2:i=j.sent,!((V=i.data.info)===null||V===void 0)&&V.Mounts&&i.data.info.Mounts.forEach(function(x){x.Type=="volume"&&x.Name&&(o=x.Name)}),l=((v=i.data.info)===null||v===void 0||(v=v.HostConfig)===null||v===void 0?void 0:v.PortBindings)&&Object.entries(i.data.info.HostConfig.PortBindings).map(function(x){var h=p()(x,2),k=h[0],X=h[1];return X.map(function(ee){return"-p ".concat(ee.HostPort,":").concat(String(parseInt(k)))})}),r=!1,c=((_=i.data.info)===null||_===void 0?void 0:_.HostConfig.Binds)&&i.data.info.HostConfig.Binds.map(function(x){return x.indexOf(":/dpanel")>-1&&(r=!0),"-v ".concat(x)}),r||(o="",!((C=i.data.info)===null||C===void 0)&&C.Mounts&&i.data.info.Mounts.forEach(function(x){x.Type=="volume"&&x.Name&&(o=x.Name)}),c||(c=[]),c.push("-v "+o+":/dpanel")),i.data.info&&d(["docker stop ".concat(i.data.info.Name," && docker rm ").concat(i.data.info.Name),"docker pull ".concat(i.data.info.Config.Image),"docker run -d --name ".concat(i.data.info.Name," --restart=always ").concat(l&&l.join(" ")," ").concat(c&&c.join(" ")," ").concat(i.data.info.Config.Image),i.data.info.NetworkSettings.Networks["dpanel-local"]?"docker network connect dpanel-local ".concat(i.data.info.Name):""]);case 9:case"end":return j.stop()}},f)}));return function(f){return Z.apply(this,arguments)}})()({})},[]),(0,e.jsx)(I.a,{drawerProps:{width:A.R_,destroyOnHidden:!0},title:U.format("upgradeTitle"),trigger:(0,e.jsx)(W.ZP,{style:{width:150},children:g.FD.format("listManageView")}),children:(0,e.jsxs)(J.Z,{direction:"column",ghost:!0,children:[(0,e.jsx)(_e.Z,{message:U.format("upgradeAlertTitle"),showIcon:!0,description:(0,e.jsxs)("ol",{style:{marginLeft:"-20px"},children:[(0,e.jsx)("li",{children:U.format("upgradeAlertContent1")}),(0,e.jsx)("li",{children:U.format("upgradeAlertContent2")}),(0,e.jsx)("li",{children:U.format("upgradeAlertContent3")}),(0,e.jsx)("li",{children:(0,e.jsx)(T.Z.Text,{type:"danger",children:U.format("upgradeAlertContent4")})})]}),type:"warning",style:{marginBottom:"20px"}}),(0,e.jsxs)(J.Z,{ghost:!0,style:{paddingBottom:50},direction:"column",gutter:[10,50],children:[(0,e.jsx)(J.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(he.Z,{}),bodyStyle:{padding:"10px",background:"#24292f"},subTitle:(0,e.jsxs)(e.Fragment,{children:[U.format("upgradeShellRootLessTitle")," ",(0,e.jsx)("a",{href:"https://dpanel.cc/install/shell",target:"_blank",children:g.FD.format("help")})]}),children:(0,e.jsx)(T.Z.Text,{copyable:!0,style:{color:"#ffffff"},children:"sudo curl -sSL https://dpanel.cc/quick.sh -o quick.sh && sudo bash quick.sh"})}),(0,e.jsx)(J.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(he.Z,{}),bodyStyle:{padding:"10px",background:"#24292f"},subTitle:(0,e.jsxs)(e.Fragment,{children:[U.format("upgradeShellRootTitle")," ",(0,e.jsx)("a",{href:"https://dpanel.cc/install/shell",target:"_blank",children:g.FD.format("help")})]}),children:(0,e.jsx)(T.Z.Text,{copyable:!0,style:{color:"#ffffff"},children:"curl -sSL https://dpanel.cc/quick.sh -o quick.sh && bash quick.sh"})}),(0,e.jsx)(J.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(he.Z,{}),bodyStyle:{padding:"10px",background:"#24292f"},subTitle:(0,e.jsxs)(e.Fragment,{children:[U.format("upgradeDockerrunTitle")," ",(0,e.jsx)("a",{href:"https://dpanel.cc/manual/system-dpanel-upgrade",target:"_blank",children:g.FD.format("help")})]}),children:u&&u.length>0?(0,e.jsx)(T.Z.Paragraph,{copyable:!0,style:{color:"#ffffff"},children:'sudo sh -c "'.concat(u.join(" && "),'"')}):(0,e.jsx)("span",{style:{color:"#ffffff"},children:g.FD.format("systemUpgradeDPanelNotFound")})})]})]})})}function qe(){var s=new g.Uo("components.systemBasic"),a=(0,P.useState)(0),u=p()(a,2),d=u[0],U=u[1],Z=(0,P.useRef)(),f=(0,P.useContext)(M.Z),S=f.loading,V=(0,O.useAccess)();return(0,P.useEffect)(function(){var v;S.show(),(v=Z.current)===null||v===void 0||v.resetFields(),Promise.all([(0,E.pe)({groupName:"user",name:"founder"}).then(function(_){var i;(i=Z.current)===null||i===void 0||i.setFieldsValue({founder:_.data})}),(0,E.pe)({groupName:"setting",name:"login"}).then(function(_){var i,o;(i=Z.current)===null||i===void 0||i.setFieldsValue({login:(o=_.data)!==null&&o!==void 0?o:{}})}),!V.canSeeEnableCe&&(0,E.pe)({groupName:"setting",name:"twoFa"}).then(function(_){var i,o;(i=Z.current)===null||i===void 0||i.setFieldsValue({twoFa:(o=_.data)!==null&&o!==void 0?o:{}})}),!V.canSeeEnableCe&&(0,E.pe)({groupName:"setting",name:"themeUserConfig"}).then(function(_){var i,o;(i=Z.current)===null||i===void 0||i.setFieldsValue({themeUserConfig:(o=_.data)!==null&&o!==void 0?o:{}})}),(0,E.pe)({groupName:"setting",name:"themeConsoleConfig"}).then(function(_){var i,o;(i=Z.current)===null||i===void 0||i.setFieldsValue({themeConsoleConfig:(o=_.data)!==null&&o!==void 0?o:{}})}),(0,E.pe)({groupName:"setting",name:"themeConfig"}).then(function(_){var i,o;(i=Z.current)===null||i===void 0||i.setFieldsValue({themeConfig:(o=_.data)!==null&&o!==void 0?o:{}})}),(0,E.pe)({groupName:"setting",name:"notification"}).then(function(_){var i,o;(i=Z.current)===null||i===void 0||i.setFieldsValue({notification:(o=_.data)!==null&&o!==void 0?o:{}})})]).finally(function(){S.destroy()})},[d]),(0,e.jsx)(Ue._z,{children:(0,e.jsx)(J.Z,{children:(0,e.jsxs)(we.A,{layout:"horizontal",labelAlign:"left",labelCol:{xs:7,sm:6,md:5,lg:5,xl:4,xxl:3,offset:0},submitter:!1,formRef:Z,children:[(0,e.jsx)(D.Z,{name:["founder"],children:function(_){var i=_.founder;return i&&(0,e.jsx)(y.Z,{label:s.format("founderTitle"),disabled:!0,width:"md",fieldProps:{prefix:(0,e.jsx)(Fe.Z,{}),value:i.username},addonAfter:(0,e.jsx)(oe,{data:i,onFinish:function(){U(d+1)}}),name:"adminUsername"})}}),(0,e.jsx)(w,{label:s.format("loginTitle"),name:"login",disable:function(_){return!1},disableLabel:g.FD.format("listManageDefault"),onDisable:function(){return(0,E.GV)({groupName:"setting",name:"login"})},settingComponent:xe,onFinish:function(){U(d+1)},tip:s.format("loginTip")}),(0,e.jsx)(w,{isPe:!0,label:s.format("twoFaTitle"),name:"twoFa",disable:function(_){return!(_!=null&&_.enable)},onDisable:function(){return(0,E.GV)({groupName:"setting",name:"twoFa"})},settingComponent:Te,onFinish:function(){U(d+1)},tip:s.format("twoFaTip")}),(0,e.jsx)(w,{label:s.format("themeConfigTitle"),name:"themeConfig",disable:function(_){return!1},disableLabel:g.FD.format("listManageDefault"),onDisable:function(){return localStorage.removeItem("dpanel-theme"),localStorage.removeItem("dpanel-compact"),localStorage.removeItem("dpanel-pagesize"),(0,E.GV)({groupName:"setting",name:"themeConfig"})},settingComponent:Me,onFinish:function(){window.location.reload(),U(d+1)},tip:s.format("themeConfigTip")}),(0,e.jsx)(w,{isPe:!0,label:s.format("themeUserConfigTitle"),name:"themeUserConfig",disable:function(_){return!1},disableLabel:g.FD.format("listManageDefault"),onDisable:function(){return(0,E.GV)({groupName:"setting",name:"themeUserConfig"})},settingComponent:ke,onFinish:function(){window.location.reload(),U(d+1)},tip:s.format("themeUserConfigTip")}),(0,e.jsx)(w,{label:s.format("themeConsoleTitle"),name:"themeConsoleConfig",disable:function(_){return!1},disableLabel:g.FD.format("listManageDefault"),onDisable:function(){return(0,E.GV)({groupName:"setting",name:"themeConsoleConfig"})},settingComponent:Qe,onFinish:function(){U(d+1)},tip:s.format("themeConsoleTip")}),(0,e.jsx)(w,{label:s.format("notificationTitle"),name:"notification",onDisable:function(){return(0,E.GV)({groupName:"setting",name:"themeConsoleConfig"})},settingComponent:Ye,onFinish:function(){U(d+1)},tip:s.format("notificationTip")}),(0,e.jsx)(w,{label:s.format("upgradeTitle"),name:"upgrade",onDisable:function(){return new Promise(function(){})},settingComponent:$e,tip:s.format("upgradeTip")})]})})})}},2831:function(q,N,n){n.d(N,{Ll:function(){return O},aF:function(){return T},d6:function(){return w},u5:function(){return g}});var K=n(15009),p=n.n(K),H=n(99289),D=n.n(H),z=n(82346);function T(){return G.apply(this,arguments)}function G(){return G=D()(p()().mark(function t(){return p()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,z.request)("/api/common/home/info",{method:"POST"});case 2:return m.abrupt("return",m.sent);case 3:case"end":return m.stop()}},t)})),G.apply(this,arguments)}function g(){return L.apply(this,arguments)}function L(){return L=D()(p()().mark(function t(){return p()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,z.request)("/api/common/home/check-new-version",{method:"POST"});case 2:return m.abrupt("return",m.sent);case 3:case"end":return m.stop()}},t)})),L.apply(this,arguments)}function O(){return e.apply(this,arguments)}function e(){return e=D()(p()().mark(function t(){return p()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,z.request)("/api/common/home/usage",{method:"POST"});case 2:return m.abrupt("return",m.sent);case 3:case"end":return m.stop()}},t)})),e.apply(this,arguments)}function w(){return Q.apply(this,arguments)}function Q(){return Q=D()(p()().mark(function t(){return p()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,z.request)("/api/common/home/upgrade-script",{method:"POST"});case 2:return m.abrupt("return",m.sent);case 3:case"end":return m.stop()}},t)})),Q.apply(this,arguments)}},97961:function(q,N,n){n.d(N,{GH:function(){return e},_2:function(){return Q},fN:function(){return G},ii:function(){return T},vC:function(){return L}});var K=n(15009),p=n.n(K),H=n(99289),D=n.n(H),z=n(82346),T=[{name:"amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"i386",arch:"386",search:[]},{name:"arm/v6",arch:"arm",search:[]},{name:"arm/v7",arch:"arm",search:[]},{name:"arm/v8",arch:"arm64",search:[]},{name:"ppc64le",arch:"ppc64le",search:[]},{name:"riscv64",arch:"riscv64",search:[]}];function G(M){return g.apply(this,arguments)}function g(){return g=D()(p()().mark(function M(E){return p()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt("return",(0,z.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:E}));case 1:case"end":return F.stop()}},M)})),g.apply(this,arguments)}function L(M){return O.apply(this,arguments)}function O(){return O=D()(p()().mark(function M(E){return p()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt("return",(0,z.request)("/api/app/image/import-by-container-tar",{method:"POST",data:E}));case 1:case"end":return F.stop()}},M)})),O.apply(this,arguments)}function e(M){return w.apply(this,arguments)}function w(){return w=D()(p()().mark(function M(E){return p()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt("return",(0,z.request)("/api/app/image/import-by-image-tar",{method:"POST",data:E}));case 1:case"end":return F.stop()}},M)})),w.apply(this,arguments)}function Q(M){return t.apply(this,arguments)}function t(){return t=D()(p()().mark(function M(E){return p()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,z.request)("/api/common/attach/delete",{method:"POST",data:E});case 2:return F.abrupt("return",F.sent);case 3:case"end":return F.stop()}},M)})),t.apply(this,arguments)}function R(){return m.apply(this,arguments)}function m(){return m=_asyncToGenerator(_regeneratorRuntime().mark(function M(){return _regeneratorRuntime().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",request("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return B.stop()}},M)})),m.apply(this,arguments)}}}]);
