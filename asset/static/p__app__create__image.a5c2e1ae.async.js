"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3985],{85060:function(Pe,U,e){e.d(U,{Z:function(){return p}});var D=e(87462),s=e(67294),Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},d=Z,v=e(84089),A=function(_,g){return s.createElement(v.Z,(0,D.Z)({},_,{ref:g,icon:d}))},P=s.forwardRef(A),p=P},2741:function(Pe,U,e){e.d(U,{Z:function(){return p}});var D=e(87462),s=e(67294),Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.7c6 6 9.4 14.1 9.4 22.6V928c0 17.7-14.3 32-32 32H192c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32h424.7c8.5 0 16.7 3.4 22.7 9.4l215.2 215.3zM790.2 326L602 137.8V326h188.2z"}}]},name:"file",theme:"filled"},d=Z,v=e(84089),A=function(_,g){return s.createElement(v.Z,(0,D.Z)({},_,{ref:g,icon:d}))},P=s.forwardRef(A),p=P},93613:function(Pe,U,e){e.d(U,{Z:function(){return p}});var D=e(87462),s=e(67294),Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32z"}}]},name:"folder",theme:"filled"},d=Z,v=e(84089),A=function(_,g){return s.createElement(v.Z,(0,D.Z)({},_,{ref:g,icon:d}))},P=s.forwardRef(A),p=P},27254:function(Pe,U,e){e.d(U,{Z:function(){return p}});var D=e(87462),s=e(67294),Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zm-180 0H238c-13 0-24.8 7.9-29.7 20L136 643.2V256h188.5l119.6 114.4H748V444z"}}]},name:"folder-open",theme:"filled"},d=Z,v=e(84089),A=function(_,g){return s.createElement(v.Z,(0,D.Z)({},_,{ref:g,icon:d}))},P=s.forwardRef(A),p=P},64789:function(Pe,U,e){e.d(U,{Z:function(){return p}});var D=e(87462),s=e(67294),Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},d=Z,v=e(84089),A=function(_,g){return s.createElement(v.Z,(0,D.Z)({},_,{ref:g,icon:d}))},P=s.forwardRef(A),p=P},63434:function(Pe,U,e){var D=e(1413),s=e(45987),Z=e(22270),d=e(84567),v=e(67294),A=e(90789),P=e(40284),p=e(85893),x=["options","fieldProps","proFieldProps","valueEnum"],_=v.forwardRef(function(M,I){var f=M.options,c=M.fieldProps,h=M.proFieldProps,u=M.valueEnum,l=(0,s.Z)(M,x);return(0,p.jsx)(P.Z,(0,D.Z)({ref:I,valueType:"checkbox",valueEnum:(0,Z.h)(u,void 0),fieldProps:(0,D.Z)({options:f},c),lightProps:(0,D.Z)({labelFormatter:function(){return(0,p.jsx)(P.Z,(0,D.Z)({ref:I,valueType:"checkbox",mode:"read",valueEnum:(0,Z.h)(u,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,D.Z)({options:f},c),proFieldProps:h},l))}},l.lightProps),proFieldProps:h},l))}),g=v.forwardRef(function(M,I){var f=M.fieldProps,c=M.children;return(0,p.jsx)(d.Z,(0,D.Z)((0,D.Z)({ref:I},f),{},{children:c}))}),m=(0,A.G)(g,{valuePropName:"checked"}),w=m;w.Group=_,U.Z=w},92067:function(Pe,U,e){e.d(U,{Z:function(){return f}});var D=e(15009),s=e.n(D),Z=e(99289),d=e.n(Z),v=e(13822),A=e(64789),P=e(56729),p=e(42075),x=e(83062),_=e(83622),g=e(37413),m=e(5251),w=e(36146),M=e(67255),I=e(85893);function f(c){return(0,I.jsx)(P.Z,{columns:[{title:w.FD.format("listContainerName"),dataIndex:"name",render:function(u,l,re,y){return(0,I.jsx)(p.Z,{direction:"vertical",style:{textAlign:"left"},children:l==null?void 0:l.Names.map(function(L){return(0,m.fi)(L,"/")})},l.Id)}},{title:w.FD.format("listPort"),dataIndex:"ports",search:!1,render:function(u,l,re,y){var L=[],t=[];return l!=null&&l.Ports&&l.Ports.map(function(C,j){C.PublicPort?L.push(C):t.push(C)}),(0,I.jsx)(g.Z,{publicPort:L,privatePort:t,domain:[]})}},{title:w.FD.format("listManage"),valueType:"option",key:"option",ellipsis:!0,width:100,render:function(u,l,re,y){return[(0,I.jsx)(x.Z,{title:w.FD.format("listManageUse"),children:(0,I.jsx)(_.ZP,{type:"link",onClick:d()(s()().mark(function L(){var t;return s()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,v.jV)({md5:l.Id});case 2:t=j.sent,c.onSelect&&c.onSelect(t.data.info);case 4:case"end":return j.stop()}},L)})),children:(0,I.jsx)(A.Z,{})},l.Id)},l.Id)]}}],rowKey:"Id",request:function(){var h=d()(s()().mark(function u(l,re,y){var L;return s()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,v.IE)({siteTitle:l.name});case 2:return L=C.sent,C.abrupt("return",{data:L.data.list,success:!0,total:L.data.list.length});case 4:case"end":return C.stop()}},u)}));return function(u,l,re){return h.apply(this,arguments)}}(),pagination:(0,M.Oh)()})}},81366:function(Pe,U,e){var D=e(97857),s=e.n(D),Z=e(19632),d=e.n(Z),v=e(5574),A=e.n(v),P=e(27254),p=e(42075),x=e(85418),_=e(25593),g=e(83622),m=e(67294),w=e(31112),M=e(85893),I={title:"/",path:"/"},f=(0,m.forwardRef)(function(c,h){var u=(0,m.useContext)(w.Z),l=u.showPath,re=u.redirectPath,y=(0,m.useState)([I]),L=A()(y,2),t=L[0],C=L[1];(0,m.useImperativeHandle)(h,function(){return{addHistory:function(G,b){b=="/"?C([I]):C([].concat(d()(t),[{title:G,path:b}]))},initHistory:function(G,b){C([s()(s()({},I),{},{children:b})].concat(d()(G)))}}});var j=function(G){l?l(t[G].title,t[G].path):c.showPath&&c.showPath(t[G].title,t[G].path);var b=t.filter(function(J,E){return E<=G});C(d()(b))};return(0,M.jsxs)(p.Z,{children:[(0,M.jsx)(p.Z.Compact,{children:t.map(function(o,G){return o.children?(0,M.jsxs)(x.Z.Button,{menu:{items:o.children.map(function(b,J){return{key:J,label:(0,M.jsx)(_.Z.Link,{onClick:function(){re(b)},children:b},J)}})},type:"dashed",onClick:function(J){j(G)},children:[(0,M.jsx)(P.Z,{})," ",o.title]},G):(0,M.jsx)(g.ZP,{icon:(0,M.jsx)(P.Z,{}),type:"dashed",onClick:function(){j(G)},children:o.title},G)})}),t.length>=2&&(0,M.jsx)(_.Z.Text,{copyable:{text:t[t.length-1].path}})]})});U.Z=f},31112:function(Pe,U,e){var D=e(67294),s=(0,D.createContext)({});U.Z=s},68536:function(Pe,U,e){e.d(U,{Z:function(){return g}});var D=e(24963),s=e(36146),Z=e(93613),d=e(36693),v=e(2741),A=e(25593),P=e(42075),p=e(67294),x=e(85893),_=0;function g(m){var w=(0,p.useContext)(D.Z),M=w.message,I=new s.Uo("components.explorer");return m.isDir?(0,x.jsx)(A.Z.Link,{onClick:function(){m.onClick&&m.onClick()},children:(0,x.jsxs)(P.Z,{children:[(0,x.jsx)(Z.Z,{}),m.showName]})}):m.isLink?(0,x.jsx)(A.Z.Link,{onClick:function(){m.onClick&&m.onClick()},children:(0,x.jsxs)(P.Z,{children:[(0,x.jsx)(d.Z,{}),m.showName]})}):(0,x.jsx)(A.Z.Text,{onClick:function(){if(_++,_==2){_=0,m.onClick&&m.onClick();return}setTimeout(function(){_==1&&M.info(I.format("fileNameMessageViewDetail")),_=0},400)},style:{cursor:"pointer"},children:(0,x.jsxs)(P.Z,{children:[(0,x.jsx)(v.Z,{}),m.showName]})})}},47248:function(Pe,U,e){var D=e(15009),s=e.n(D),Z=e(99289),d=e.n(Z),v=e(5574),A=e.n(v),P=e(38345),p=e(97269),x=e(62370),_=e(5966),g=e(64317),m=e(83622),w=e(85265),M=e(25593),I=e(42075),f=e(67294),c=e(3393),h=e(97961),u=e(92754),l=e(82346),re=e(2205),y=e(3616),L=e(36146),t=e(85893),C=(0,f.forwardRef)(function(j,o){var G=(0,f.useState)(!1),b=A()(G,2),J=b[0],E=b[1],oe=(0,f.useRef)(),ie=(0,f.useRef)(),ae=(0,f.useState)(!1),B=A()(ae,2),F=B[0],n=B[1],pe=new L.Uo("components.imagePull");return(0,f.useImperativeHandle)(o,function(){return{upgradeImage:function(N){var Q;return E(!0),(Q=oe.current)===null||Q===void 0||Q.setFieldValue("imageUrl",N),(0,c.Gb)({tag:N,type:"pull"})},setImageName:function(N){var Q;E(!0),(Q=oe.current)===null||Q===void 0||Q.setFieldValue("imageUrl",N)}}}),[(0,t.jsx)(m.ZP,{type:j.buttonType?j.buttonType:"default",onClick:function(){var N,Q;E(!0),(N=oe.current)===null||N===void 0||N.resetFields(),(Q=ie.current)===null||Q===void 0||Q.setStart("")},children:pe.format("triggerButton")},"remoteBtn"),(0,t.jsxs)(w.Z,{forceRender:!0,open:J,title:pe.format("drawerTitle"),width:y.R_,onClose:function(){var N;E(!1),(N=ie.current)===null||N===void 0||N.close()},footer:!1,children:[(0,t.jsx)(P.Z,{children:(0,t.jsx)(M.Z.Text,{children:(0,t.jsxs)("ul",{style:{lineHeight:"30px"},children:[(0,t.jsxs)("li",{children:[pe.format("tip.1")," ",(0,t.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:L.FD.format("help")})]}),(0,t.jsxs)("li",{children:[pe.format("tip.2")," ",(0,t.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:L.FD.format("help")})]}),(0,t.jsxs)("li",{children:[pe.format("tip.3")," "]}),(0,t.jsxs)("li",{children:[pe.format("tip.4")," ",(0,t.jsx)(l.Link,{to:"/image/registry",children:L.Ob.format("image.registry.create")})]}),(0,t.jsxs)("li",{children:[pe.format("tip.5")," ",(0,t.jsx)(l.Link,{to:"/image/registry",children:L.Ob.format("image.registry")})]})]})})}),(0,t.jsx)(P.Z,{title:pe.format("triggerButton"),headerBordered:!0,children:(0,t.jsxs)(p.A,{formRef:oe,submitter:!1,isKeyPressSubmit:!0,onFinish:function(){var Ce=d()(s()().mark(function N(Q){var Ue,Le,we,Ke,be,Fe;return s()().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return be=(Ue=Q.imageUrl)!==null&&Ue!==void 0?Ue:"",Q.registry&&(be=Q.registry.serverAddress+"/"+be),n(!0),(Le=ie.current)===null||Le===void 0||Le.setStart(be),Ze.next=6,(0,c.Gb)({tag:be,type:"pull",platform:(we=Q.platform)!==null&&we!==void 0?we:""}).finally(function(){n(!1)});case 6:return Fe=Ze.sent,(Ke=ie.current)===null||Ke===void 0||Ke.setFinish(),E(!1),j.onFinish&&j.onFinish(Fe.data.tag),Ze.abrupt("return",!0);case 11:case"end":return Ze.stop()}},N)}));return function(N){return Ce.apply(this,arguments)}}(),children:[(0,t.jsxs)(I.Z.Compact,{children:[(0,t.jsx)(x.Z,{name:"registry",children:(0,t.jsx)(re.Z,{width:"150px"})}),(0,t.jsx)(_.Z,{disabled:F,width:270,name:"imageUrl",placeholder:pe.format("imageUrlEmpty"),required:!0,rules:[{required:!0}]}),(0,t.jsx)(g.Z,{name:"platform",style:{width:100},placeholder:pe.format("imagePlatformEmpty"),options:h.ii.map(function(Ce){return{label:Ce.name,value:Ce.name}})}),(0,t.jsx)(m.ZP,{loading:F,onClick:d()(s()().mark(function Ce(){var N;return s()().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:(N=oe.current)===null||N===void 0||N.submit();case 1:case"end":return Ue.stop()}},Ce)})),children:pe.format("triggerButton")}),(0,t.jsx)(m.ZP,{danger:!0,onClick:function(){var N;(N=ie.current)===null||N===void 0||N.close()},children:L.FD.format("listManageKill")})]}),(0,t.jsx)(x.Z,{label:pe.format("progressTitle"),children:(0,t.jsx)(u.Z,{ref:ie})})]})})]},"remoteDrawer")]});U.Z=C},80271:function(Pe,U,e){var D=e(15009),s=e.n(D),Z=e(99289),d=e.n(Z),v=e(5574),A=e.n(v),P=e(184),p=e(56729),x=e(83062),_=e(67294),g=e(3393),m=e(68536),w=e(5251),M=e(81366),I=e(3616),f=e(36146),c=e(85893),h=(0,_.forwardRef)(function(u,l){(0,_.useImperativeHandle)(l,function(){return{show:function(){}}});var re=(0,_.useState)(""),y=A()(re,2),L=y[0],t=y[1],C=(0,_.useState)(!1),j=A()(C,2),o=j[0],G=j[1],b=(0,_.useRef)(),J=(0,_.useRef)(),E=function(B,F){t(F)},oe=new f.Uo("components.explorer"),ie=new f.Uo("image");return(0,c.jsx)(P.a,{drawerProps:{width:I.R_},open:o,submitter:!1,title:ie.format("fileTitle"),onOpenChange:function(B){G(B),t(B?"/":"")},trigger:(0,c.jsx)(x.Z,{title:ie.format("fileTitle"),children:u.trigger}),children:(0,c.jsx)(p.Z,{headerTitle:(0,c.jsx)(M.Z,{ref:J,showPath:E}),scroll:{x:"max-content"},search:!1,rowKey:"name",pagination:{pageSize:500,position:["topRight","bottomRight"]},actionRef:b,request:d()(s()().mark(function ae(){var B;return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(L!=""){n.next=2;break}return n.abrupt("return",{data:[],total:0,success:!0});case 2:return n.next=4,(0,g.cD)({md5:u.imageId,path:L});case 4:return B=n.sent,n.abrupt("return",{data:B.data.info,total:B.data.info.length,success:!0});case 6:case"end":return n.stop()}},ae)})),columns:[{title:oe.format("listName"),dataIndex:"showName",key:"name",render:function(N,F,n,pe,Ce){var N,Q=F.name.replace(L,"");return F.isDir?N=(0,c.jsx)(m.Z,{isDir:!0,onClick:function(){return E(Q,F.path)},showName:Q}):F.isSymlink?N=(0,c.jsx)(m.Z,{isLink:!0,showName:Q}):N=(0,c.jsx)(m.Z,{showName:Q}),N}},{title:oe.format("listModStr"),dataIndex:"modStr",key:"modStr"},{title:oe.format("listUser"),dataIndex:"user"},{title:oe.format("listGroup"),dataIndex:"group"},{title:oe.format("listSize"),dataIndex:"size",key:"size",render:function(B,F,n,pe,Ce){return(0,w.FI)(F.size)}},{title:oe.format("listModTime"),dataIndex:"modTime",key:"modTime",render:function(B,F,n,pe,Ce){return(0,w.NF)(F.modTime)},sorter:function(B,F){return new Date(B.modTime).getTime()-new Date(F.modTime).getTime()}}],cardProps:{ghost:!0}},"".concat(u.imageId,"-").concat(L))})});U.Z=h},20743:function(Pe,U,e){var D=e(15009),s=e.n(D),Z=e(99289),d=e.n(Z),v=e(5574),A=e.n(v),P=e(67294),p=e(14946),x=e(64789),_=e(56729),g=e(83622),m=e(85265),w=e(42075),M=e(66309),I=e(16970),f=e(3616),c=e(36146),h=e(67255),u=e(85893),l=(0,P.forwardRef)(function(re,y){(0,P.useImperativeHandle)(y,function(){return{show:function(){j(!0)}}});var L=(0,P.useState)(!1),t=A()(L,2),C=t[0],j=t[1],o=(0,P.useRef)(),G=new c.Uo("components.network");return(0,u.jsxs)(u.Fragment,{children:[re.showTriggerButton&&(0,u.jsx)(g.ZP,{onClick:function(){j(!0)},children:G.format("selectTriggerButton")}),(0,u.jsx)(m.Z,{title:G.format("selectDrawerTitle"),width:f.R_,footer:!1,open:C,onClose:function(){return j(!1)},extra:(0,u.jsx)(w.Z,{children:(0,u.jsx)(I.Z,{onFinish:function(){var J,E;!((J=o.current)===null||J===void 0)&&J.reloadAndRest&&((E=o.current)===null||E===void 0||E.reloadAndRest())}},"create")}),children:(0,u.jsx)(_.Z,{rowKey:"Name",actionRef:o,columns:[{title:c.FD.format("listTitle"),dataIndex:"Name",render:function(J,E,oe,ie,ae){return E.Name=="none"||E.Name=="bridge"||E.Name=="host"?(0,u.jsxs)(u.Fragment,{children:[E.Name," ",(0,u.jsx)(M.Z,{color:"blue",children:"System"})]}):(0,u.jsx)(u.Fragment,{children:J})}},{title:c.FD.format("listType"),ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"Driver",ellipsis:!0,width:100,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4",search:!1,width:120,render:function(J,E,oe,ie,ae){return E.IPAM.Config&&E.IPAM.Config[0]&&(0,u.jsxs)(w.Z,{direction:"vertical",children:[E.IPAM.Config[0].Subnet,E.IPAM.Config[0].Gateway]})}},{title:"IPV6",search:!1,render:function(J,E,oe,ie,ae){return E.IPAM.Config&&E.IPAM.Config[1]&&(0,u.jsxs)(w.Z,{direction:"vertical",children:[E.IPAM.Config[1].Subnet,E.IPAM.Config[1].Gateway]})}},{title:c.FD.format("listManage"),width:100,search:!1,render:function(J,E,oe,ie,ae){return[E.Name!="none"&&E.Name!="bridge"&&E.Name!="host"&&(0,u.jsx)(g.ZP,{type:"link",onClick:function(){re.onSelect(E),j(!1)},children:(0,u.jsx)(x.Z,{})},E.Id)]}}],request:function(){var b=d()(s()().mark(function J(E,oe,ie){var ae;return s()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,p.jR)({name:E.Name});case 2:return ae=F.sent,F.abrupt("return",{data:ae.data.list,success:!0,total:ae.data.list.length});case 4:case"end":return F.stop()}},J)}));return function(J,E,oe){return b.apply(this,arguments)}}(),pagination:(0,h.Oh)()})})]})});U.Z=l},2205:function(Pe,U,e){e.d(U,{Z:function(){return _}});var D=e(97857),s=e.n(D),Z=e(5574),d=e.n(Z),v=e(75870),A=e(36146),P=e(34041),p=e(67294),x=e(85893);function _(g){var m=(0,p.useState)([]),w=d()(m,2),M=w[0],I=w[1],f=new A.Uo("components.selectRegistry");(0,p.useEffect)(function(){(0,v.Ot)().then(function(h){h&&I(h.data.list)})},[]);var c={};return g.multiple&&(c.mode="multiple"),g.top&&(c.placement="topLeft"),(0,x.jsx)(P.Z,s()({popupMatchSelectWidth:!g.width,style:g.width?{width:g.width}:{},onChange:function(u){if(u)if(Array.isArray(u)){var l=u.map(function(re){return M[re]});g.onChangeList&&g.onChangeList(l)}else g.onChange&&g.onChange(M[u])},placeholder:f.format("nameEmpty"),options:M.map(function(h,u){return{value:u,label:h.title+"("+h.serverAddress+")"}}),allowClear:!0},c))}},47131:function(Pe,U,e){e.r(U),e.d(U,{default:function(){return zn}});var D=e(97857),s=e.n(D),Z=e(15009),d=e.n(Z),v=e(19632),A=e.n(v),P=e(99289),p=e.n(P),x=e(5574),_=e.n(x),g=e(90078),m=e(38345),w=e(97269),M=e(2236),I=e(62370),f=e(5966),c=e(24739),h=e(97462),u=e(30291),l=e(92398),re=e(40056),y=e(67294),L=e(42963),t=e(51042),C=e(63434),j=e(17186),o=e(71230),G=e(15746),b=e(42075),J=e(25593),E=e(85265),oe=e(92067),ie=e(5251),ae=e(3616),B=e(36146),F=e(89240),n=e(85893),pe=(0,y.forwardRef)(function(S,De){var T=(0,y.useState)(!1),me=_()(T,2),X=me[0],le=me[1],se=(0,y.useRef)(),V=new B.Uo("components.appForm"),q=function(K){return(0,n.jsxs)(m.Z,{bordered:!0,extra:K.action,style:{marginBottom:10},children:[(0,n.jsx)(m.Z,{title:V.format("createLinkItemTitle"),ghost:!0,children:(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(G.Z,{span:6,children:(0,n.jsx)(f.Z,{label:V.format("createLinkItemName"),name:"name",width:"md",readonly:!0})}),(0,n.jsxs)(G.Z,{span:14,children:[(0,n.jsx)(f.Z,{label:V.format("createLinkItemAlise"),name:"alise",width:"md",readonly:!0,tooltip:V.format("createLinkItemAliseTip"),hidden:!0}),(0,n.jsx)(I.Z,{label:V.format("createLinkItemAlise"),tooltip:V.format("createLinkItemAliseTip"),children:(0,n.jsx)(b.Z,{direction:"vertical",children:[K.name,K.record.alise].map(function($){return(0,n.jsx)(J.Z.Text,{copyable:!0,children:$})})})})]}),(0,n.jsx)(G.Z,{span:4,children:(0,n.jsx)(C.Z,{label:V.format("createLinkItemVolume"),name:"volume"})})]})}),(0,n.jsx)(m.Z,{ghost:!0,title:V.format("createLinkItemEnv"),children:(0,n.jsx)(b.Z,{direction:"vertical",children:K.record.env&&(0,ie.oZ)(K.record.env).map(function($,Y){return(0,n.jsx)(J.Z.Text,{copyable:{icon:(0,n.jsx)(t.Z,{}),onCopy:function(){S.onAddEnv($.name,$.value)},tooltips:[V.format("createLinkAddToEnv"),"success"]},code:!0,ellipsis:{tooltip:"".concat($.name,"=").concat($.value)},children:"".concat($.name,"=").concat($.value)},Y)})},"linkEnv")})]})},Me=function(K){var $,Y,k=!1,W=($=(Y=se.current)===null||Y===void 0?void 0:Y.getList())!==null&&$!==void 0?$:[];if(W.map(function(je){je.name==K.name&&(k=!0)}),!k){var te;(te=se.current)===null||te===void 0||te.add(K)}};return(0,y.useImperativeHandle)(De,function(){return{setDefaultLink:function(K){K&&K.map(function($){$.name!=""&&Me($)})}}}),(0,n.jsxs)(m.Z,{title:V.format("createLinkTitle"),headerBordered:!0,children:[(0,n.jsx)(j.u,{name:"links",actionRef:se,creatorButtonProps:{creatorButtonText:V.format("createLinkAddButton")},actionGuard:{beforeAddRow:function(K,$){return le(!0),!1}},copyIconProps:!1,min:0,itemRender:function(K,$){return(0,n.jsx)(q,{action:K.action,name:$.record.name,record:$.record})}}),(0,n.jsx)(E.Z,{title:V.format("createLinkSelectContainer"),width:ae.R_,footer:!1,open:X,onClose:function(){return le(!1)},children:(0,n.jsx)(oe.Z,{onSelect:function(K){Me({name:(0,ie.fi)(K.Name,"/"),volume:!1,env:K.Config.Env,alise:(0,F.zY)(K.Name)}),le(!1)}})})]})}),Ce=pe,N=e(91058),Q=e(10523),Ue=e(24796),Le=e(52688),we=e(24963);function Ke(){var S=(0,y.useContext)(we.Z),De=S.message,T=new B.Uo("components.appForm");return(0,n.jsx)(m.Z,{children:(0,n.jsxs)(c.UW,{children:[(0,n.jsx)(Le.Z,{fieldProps:{onChange:function(X){X&&De.warning(T.format("createAdvRunCommandPrivilegedNotice"))}},name:"privileged",tooltip:"--privileged",label:T.format("createAdvRunCommandPrivileged"),initialValue:!1}),(0,n.jsx)(Le.Z,{name:"autoRemove",tooltip:"--rm",label:T.format("createAdvRunCommandAutoRemove"),initialValue:!1}),(0,n.jsx)(Le.Z,{fieldProps:{onChange:function(X){X&&De.warning(T.format("createAdvRunCommandHostPidNotice"))}},tooltip:"--pid host",name:"hostPid",label:T.format("createAdvRunCommandHostPid"),initialValue:!1})]})})}var be=e(91845),Fe=e(62597),Ge=e(82346),Ze=e(20743),fn=(0,y.forwardRef)(function(S,De){var T=(0,y.useRef)(),me=(0,y.useRef)(),X=new B.Uo("components.appForm");(0,y.useImperativeHandle)(De,function(){return{}});var le=function(V){var q,Me,de=!1,K=(q=(Me=T.current)===null||Me===void 0?void 0:Me.getList())!==null&&q!==void 0?q:[];if(K.map(function(Y){Y.name==V.name&&(de=!0)}),!de){var $;($=T.current)===null||$===void 0||$.add(V)}};return(0,n.jsxs)(m.Z,{title:X.format("createNetworkTitle"),headerBordered:!0,extra:(0,n.jsx)(b.Z,{children:S.showUseBridgeNetwork&&(0,n.jsx)(Le.Z,{name:"useBridgeNetwork",fieldProps:{checkedChildren:X.format("createNetworkUseBridgeNetwork"),unCheckedChildren:X.format("createNetworkUseBridgeNetwork")}},"useBridgeNetwork")}),children:[(0,n.jsx)(j.u,{name:"network",actionRef:T,creatorButtonProps:{creatorButtonText:X.format("createNetworkAddButton")},actionGuard:{beforeAddRow:function(V,q){var Me;return(Me=me.current)===null||Me===void 0||Me.show(),!1}},copyIconProps:!1,min:0,itemRender:function(V,q){return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(c.UW,{children:[(0,n.jsx)(f.Z,{label:X.format("createNetworkName"),name:"name",width:"md",disabled:!0,fieldProps:{value:q.record.name}}),(0,n.jsx)(f.Z,{label:X.format("createNetworkAlise"),name:"alise",tooltip:X.format("createNetworkAliseTip"),placeholder:X.format("createNetworkAliseEmpty"),disabled:q.record.name=="bridge"}),(0,n.jsx)(f.Z,{label:"IpV4",name:"ipV4",width:"md",disabled:q.record.name=="bridge",fieldProps:{addonAfter:q.record.subnet}}),q.record.subnetV6&&(0,n.jsx)(f.Z,{label:"IpV6",name:"ipV6",width:"md",disabled:q.record.name=="bridge",fieldProps:{addonAfter:q.record.subnetV6}}),(0,n.jsx)(I.Z,{label:" ",children:V.action})]})})}}),(0,n.jsx)(Ze.Z,{ref:me,onSelect:function(V){le({name:V.Name,alise:[""],subnet:V.IPAM.Config[0].Subnet,subnetV6:V.IPAM.Config[1]&&V.IPAM.Config[1].Subnet})}})]})}),vn=fn,hn=e(82034),ke=e(52255),pn=e(59252),rn=e(3393),gn=e(64412),En=function(De){var T=new B.Uo("components.appForm");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(m.Z,{title:T.format("createSelfNetworkTitle"),children:[(0,n.jsxs)(c.UW,{children:[(0,n.jsx)(f.Z,{label:T.format("createSelfNetworkIp",{ip:"ipv4"}),name:["ipV4","address"],width:"md",tooltip:T.format("createSelfNetworkIpTip",{ip:"ipv4",example:"192.168.1.5"}),placeholder:"192.168.1.5"}),(0,n.jsx)(h.Z,{name:["ipV4"],children:function(X){var le=X.ipV4;return(0,n.jsx)(f.Z,{label:T.format("createSelfNetworkIpSubnet",{ip:"ipv4"}),name:["ipV4","subnet"],width:"md",required:le&&le.address,tooltip:T.format("createSelfNetworkIpSubnetTip",{ip:"ipv4",example:"192.168.1.0/24"}),placeholder:"192.168.1.0/24",rules:[{required:le&&le.address}]})}}),(0,n.jsx)(f.Z,{label:T.format("createSelfNetworkIpGateway",{ip:"ipv4"}),name:["ipV4","gateway"],width:"md",tooltip:T.format("createSelfNetworkIpGatewayTip",{ip:"ipv4",example:"192.168.1.1"}),placeholder:"192.168.1.1"}),(0,n.jsx)(Le.Z,{label:T.format("createSelfNetworkIpV6Enable"),name:"enableIpV6Address"})]}),(0,n.jsx)(h.Z,{name:["enableIpV6Address"],children:function(X){var le=X.enableIpV6Address;if(le)return(0,n.jsxs)(c.UW,{children:[(0,n.jsx)(f.Z,{label:T.format("createSelfNetworkIp",{ip:"ipv6"}),name:["ipV6","address"],width:"md",tooltip:T.format("createSelfNetworkIpTip",{ip:"ipv6",example:"2001:db8::5"}),placeholder:"2001:db8::5"}),(0,n.jsx)(h.Z,{name:["ipV6"],children:function(V){var q=V.ipV6;return(0,n.jsx)(f.Z,{label:T.format("createSelfNetworkIpSubnet",{ip:"ipv6"}),name:["ipV6","subnet"],width:"md",required:q&&q.address,tooltip:T.format("createSelfNetworkIpSubnetTip",{ip:"ipv6",example:"2001:db8::/48"}),placeholder:"2001:db8::/48",rules:[{required:q&&q.address}]})}}),(0,n.jsx)(f.Z,{label:T.format("createSelfNetworkIpGateway",{ip:"ipv6"}),name:["ipV6","gateway"],width:"md",tooltip:T.format("createSelfNetworkIpGatewayTip",{ip:"ipv6",example:"2001:db8::1"}),placeholder:"2001:db8::1"})]})}})]}),(0,n.jsx)(gn.Z,{})]})},Pn=En,Cn=e(90672);function jn(){var S=new B.Uo("components.appForm");return(0,n.jsx)(m.Z,{title:S.format("createHookTitle"),headerBordered:!0,subTitle:"",children:(0,n.jsx)(Cn.Z,{label:S.format("createHookContainerCreate"),name:["hook","containerCreate"],tooltip:S.format("createHookContainerCreateTip")})})}var Dn=e(93529),Mn=e(56729),In=e(66309),On=e(96074),ze=e(83622),Rn=e(83062),xn=e(18148),Tn=e(64789),An=e(85060),tn=e(78451),yn=e(99861),Un=e(80821),Ln=e(1699),Zn=e(80271),bn=e(47248),an=e(67255);function Bn(S){var De=(0,y.useState)(!1),T=_()(De,2),me=T[0],X=T[1],le=(0,y.useContext)(L.Z),se=le.createFormRef,V=le.volumeListRef,q=le.createEnvRef,Me=le.domainRef,de=new B.Uo("components.appForm");function K(Y){return $.apply(this,arguments)}function $(){return $=p()(d()().mark(function Y(k){var W,te,je,z,Oe,xe,fe,H,a,ue,ge,ve;return d()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,(0,rn.YU)({md5:k});case 2:return z=ee.sent,S.redeploy||(H=(Oe=se.current)===null||Oe===void 0?void 0:Oe.getFieldsValue(),(xe=se.current)===null||xe===void 0||xe.resetFields(),(fe=se.current)===null||fe===void 0||fe.setFieldsValue({siteName:H.siteName,siteTitle:H.siteTitle,useBridgeNetwork:H.useBridgeNetwork})),z.data.info.Config.Env&&z.data.info.Config.Env.map(function(ye){var he,Ee=ye.split("=");(he=q.current)===null||he===void 0||he.addEnvItem(Ee[0],Ee.slice(1).join("="))}),(W=se.current)===null||W===void 0||W.setFieldValue("imageName",k),(te=se.current)===null||te===void 0||te.setFieldValue("workDir",z.data.info.Config.WorkingDir),(je=Me.current)===null||je===void 0||je.setExposePort(z.data.info.Config.ExposedPorts),S.redeploy||(z.data.info.Config.Volumes?(ge=[],Object.keys(z.data.info.Config.Volumes).map(function(ye,he){ge.push(ye)}),(ue=V.current)===null||ue===void 0||ue.setDefaultDestPath(ge)):(ve=V.current)===null||ve===void 0||ve.setDefaultDestPath([]),(a=se.current)===null||a===void 0||a.setFieldsValue({workDir:{value:"",useDefault:!0,default:z.data.info.Config.WorkingDir},user:{value:"",useDefault:!0,default:z.data.info.Config.User},command:{value:"",useDefault:!0,default:z.data.info.Config.Cmd&&z.data.info.Config.Cmd.join(" ")},entrypoint:{value:"",useDefault:!0,default:z.data.info.Config.Entrypoint&&z.data.info.Config.Entrypoint.join(" ")}})),ee.abrupt("return",!0);case 10:case"end":return ee.stop()}},Y)})),$.apply(this,arguments)}return(0,y.useEffect)(function(){S.fromImageId&&K(S.fromImageId)},[S.fromImageId]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E.Z,{destroyOnHidden:!0,open:me,width:ae.R_,title:de.format("dockerImageTitle"),footer:!1,onClose:function(){X(!1)},children:(0,n.jsx)(Mn.Z,{scroll:{x:"max-content"},columns:[{title:"Id",dataIndex:"Id",search:!1,width:120,render:function(k,W,te,je,z){return(0,n.jsx)(tn.Z,{content:W.Id.slice(7,19)})}},{title:B.FD.format("listImageName"),dataIndex:"tag",render:function(k,W,te,je){return(0,n.jsx)(tn.Z,{content:W.RepoTags[0]})}},{title:"Digest",width:120,render:function(k,W,te,je,z){var Oe=W.RepoDigests&&W.RepoDigests[0];return Oe?Oe.substring(Oe.indexOf("@")+8).substring(0,12):(0,n.jsx)(In.Z,{color:"warning",children:new B.Uo("components.appDetail.appDetailQuickManage").format("checkImageUpgrade.-3")})}},{title:B.FD.format("listCreatedAt"),dataIndex:"Created",search:!1,width:180,render:function(k,W,te,je){return(0,n.jsx)("div",{children:(0,ie.ZM)(W.Created*1e3)},W.Id)},sorter:function(k,W){return k.Created-W.Created}},{title:B.FD.format("listManage"),valueType:"option",key:"option",width:50,render:function(k,W,te,je){return(0,n.jsx)(b.Z,{split:(0,n.jsx)(On.Z,{type:"vertical"}),children:(0,n.jsx)(Un.Z,{icon:(0,n.jsx)(Tn.Z,{}),tips:B.FD.format("listManageUse"),action:function(){return K(W.RepoTags[0])},type:"link",onSuccess:function(){X(!1)}},"addImage")})}}],request:function(){var Y=p()(d()().mark(function k(W,te,je){var z,Oe,xe;return d()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return S.redeploy,H.next=3,(0,xn.KG)({tag:W.tag});case 3:return z=H.sent,Oe=0,xe=[],z.data.list&&(xe=z.data.list.flatMap(function(a){return a.RepoTags.map(function(ue){var ge,ve=(ge=a.RepoDigests)===null||ge===void 0?void 0:ge.find(function(Te){var ee=Te.split("@"),ye=_()(ee,2),he=ye[0],Ee=ye[1];return ue.includes(he)});return{Key:Oe++,Id:a.Id,Created:a.Created,RepoTags:[ue],RepoDigests:[ve]}})})),H.abrupt("return",{data:xe,success:!0,total:xe.length});case 8:case"end":return H.stop()}},k)}));return function(k,W,te){return Y.apply(this,arguments)}}(),rowKey:"Key",pagination:(0,an.Oh)()})},"imageTableList"),(0,n.jsxs)(b.Z.Compact,{children:[(0,n.jsx)(f.Z,{width:"lg",label:de.format("dockerImageImageName"),name:"imageName",disabled:!0,placeholder:de.format("dockerImageImageNameEmpty"),rules:[{required:!0}],required:!0}),(0,n.jsx)(I.Z,{label:" ",children:(0,n.jsx)(ze.ZP,{type:"primary",onClick:function(){return X(!0)},children:de.format("dockerImageTitle")},"showBtn")}),(0,n.jsx)(h.Z,{name:["imageName"],children:function(k){var W=k.imageName;if(W)return(0,n.jsx)(I.Z,{label:" ",children:(0,n.jsx)(yn.Z,{finishAutoHide:!0,image:W?[W]:[],trigger:(0,n.jsx)(Rn.Z,{title:de.format("dockerImageUpgradeImageTip"),children:(0,n.jsx)(ze.ZP,{icon:(0,n.jsx)(An.Z,{}),children:de.format("dockerImageUpgradeImageButton")})})})})}}),(0,n.jsx)(I.Z,{label:" ",children:(0,n.jsx)(bn.Z,{onFinish:function(k){K(k)}},"remote")}),(0,n.jsx)(I.Z,{label:" ",children:(0,n.jsx)(h.Z,{name:["imageName"],children:function(k){var W=k.imageName;if(W)return(0,n.jsx)(Ln.u,{access:"canSeeEnableCe",showProTips:!0,children:function(je){var z=je.canSeeEnableCe;return(0,n.jsx)(Zn.Z,{imageId:W,trigger:(0,n.jsx)(ze.ZP,{disabled:z,children:de.format("dockerImageFileExplorer")})})}})}})})]})]})}var Wn=e(44349);function wn(){var S=new B.Uo("components.appForm");return(0,n.jsx)(m.Z,{children:(0,n.jsx)(Wn.Z,{name:"device",label:S.format("createDevice"),hideCopyButton:!0,showAddButton:!0,gap:10,items:[{label:S.format("createDeviceHost"),name:"host",width:"md",placeholder:"/dev/tty0"},{label:S.format("createDeviceDest"),name:"dest",width:"md",placeholder:"/dev/tty0"}]})})}var sn=e(64317);function Nn(){var S=new B.Uo("components.appForm");return(0,n.jsxs)(m.Z,{children:[(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(G.Z,{span:4,children:(0,n.jsx)(Le.Z,{label:S.format("createGpus"),name:["gpus","enable"]})}),(0,n.jsx)(G.Z,{span:20,children:(0,n.jsx)(h.Z,{name:["gpus"],children:function(T){var me=T.gpus;if(me&&me.enable)return(0,n.jsx)(sn.Z,{mode:"tags",label:S.format("createGpusDevice"),name:["gpus","device"],placeholder:S.format("createGpusDeviceEmpty")})}})})]}),(0,n.jsx)(h.Z,{name:["gpus"],children:function(T){var me=T.gpus;if(me&&me.enable)return(0,n.jsx)(sn.Z,{label:S.format("createGpusCap"),name:["gpus","capabilities"],mode:"multiple",fieldProps:{allowClear:!0},options:S.option("createGpusCapOption",["compute","compat32","graphics","utility","video","display"])})}})]})}var Sn=e(55730),Kn=e(27323),Fn=e(44771),kn=e(33879),Hn=e(96486),Ye=e.n(Hn),Vn=e(73396),on=e(14946),$n=e(13822),Gn=e(55375);function zn(){var S,De=(0,y.useContext)(we.Z),T=De.loading,me=De.notice,X=(0,Ge.useSearchParams)(),le=_()(X,2),se=le[0],V=le[1],q=(0,Ge.useNavigate)(),Me=(0,y.useState)("basic"),de=_()(Me,2),K=de[0],$=de[1],Y=(S=se.get("imageId"))!==null&&S!==void 0?S:"",k=new B.Uo("app"),W=new B.Uo("components.appForm"),te=(0,y.useRef)(),je=(0,y.useRef)(),z=(0,y.useRef)(),Oe=(0,y.useRef)(),xe=(0,y.useRef)();return(0,y.useEffect)(function(){var fe,H,a=se.get("id");(fe=te.current)===null||fe===void 0||fe.resetFields(),(H=te.current)===null||H===void 0||H.setFieldValue("useBridgeNetwork",!0),a&&(T.show(),(0,Fe.iE)({id:a}).then(function(){var ue=p()(d()().mark(function ge(ve){var Te,ee,ye,he,Ee,Qe,Xe,r,Ie,ln,Ne,dn,un,Se,cn;return d()().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(r=(Te=ve.data.containerInfo)===null||Te===void 0?void 0:Te.Info,Ie={info:{}},!r){ce.next=12;break}return ce.prev=3,ce.next=6,(0,rn.YU)({md5:r.Image});case 6:ln=ce.sent,Ie=ln.data,ce.next=12;break;case 10:ce.prev=10,ce.t0=ce.catch(3);case 12:return Ne=[],ce.prev=13,ce.next=16,(0,on.jR)();case 16:dn=ce.sent,Ne=dn.data.list,ce.next=22;break;case 20:ce.prev=20,ce.t1=ce.catch(13);case 22:return un=function(i){if(!i)return{};var O=i[ve.data.siteName];if(!O)return{};var R=Ne&&Ne.find(function(ne){return ne.Id==O.NetworkID});return{ipV4:{address:O.IPAddress,gateway:O.Gateway,subnet:R&&R.IPAM.Config&&R.IPAM.Config[0]&&R.IPAM.Config[0].Subnet},ipV6:{address:O.GlobalIPv6Address,gateway:O.IPv6Gateway,subnet:R&&R.IPAM.Config&&R.IPAM.Config[1]&&R.IPAM.Config[1].Subnet},enableIpV6Address:R&&R.IPAM.Config&&R.IPAM.Config[1],bindIpV6:!!(R&&R.IPAM.Config&&R.IPAM.Config[1])}}(r==null?void 0:r.NetworkSettings.Networks),Se=[],ce.next=26,function(){var i=p()(d()().mark(function O(R,ne){var Ae;return d()().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:if(!(!(ne!=null&&ne.NetworkSettings)||!(ne!=null&&ne.NetworkSettings.Networks)||!(ne!=null&&ne.NetworkSettings.Networks[R]))){_e.next=2;break}return _e.abrupt("return",[]);case 2:return _e.next=4,(0,on.IS)({name:R});case 4:if(Ae=_e.sent,_e.t0=Ae.data.info.Containers,!_e.t0){_e.next=10;break}return _e.next=9,Promise.all(Object.entries(Ae.data.info.Containers).filter(function(Je){var He=_()(Je,2),mn=He[0],Ve=He[1];return Ve.Name!=R}).map(function(){var Je=p()(d()().mark(function He(mn){var Ve,Yn,$e,qe,_n,Be,en;return d()().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(Ve=_()(mn,2),Yn=Ve[0],$e=Ve[1],$e.Name==R){We.next=9;break}return We.next=4,(0,$n.jV)({md5:$e.Name});case 4:return _n=We.sent,Be=_n.data.info,en=(qe=ne.HostConfig.VolumesFrom)===null||qe===void 0?void 0:qe.includes($e.Name),en&&Be.Mounts&&Se.push.apply(Se,A()(Be.Mounts.map(function(Qn){var nn;return(nn=Qn.Destination)!==null&&nn!==void 0?nn:""}))),We.abrupt("return",{name:$e.Name,alise:Be&&(0,F.zY)(Be.Name),env:Be&&Be.Config.Env,volume:en});case 9:case"end":return We.stop()}},He)}));return function(He){return Je.apply(this,arguments)}}()));case 9:_e.t0=_e.sent;case 10:return _e.abrupt("return",_e.t0);case 11:case"end":return _e.stop()}},O)}));return function(O,R){return i.apply(this,arguments)}}()(ve.data.siteName,r);case 26:cn=ce.sent,(ee=te.current)===null||ee===void 0||ee.setFieldsValue(s()({id:r==null?void 0:r.Id,siteTitle:ve.data.siteTitle,siteName:ve.data.siteName,hook:ve.data.env.hook,imageName:r==null?void 0:r.Config.Image,hostname:r==null?void 0:r.Config.Hostname,privileged:r==null?void 0:r.HostConfig.Privileged,useHostNetwork:(r==null?void 0:r.HostConfig.NetworkMode)=="host",publishAllPorts:r==null?void 0:r.HostConfig.PublishAllPorts,workDir:{value:r==null?void 0:r.Config.WorkingDir,useDefault:Ie.info.Config.WorkingDir==(r==null?void 0:r.Config.WorkingDir),default:Ie&&Ie.info.Config&&Ie.info.Config.WorkingDir},user:{value:r==null?void 0:r.Config.User,useDefault:Ie.info.Config.User==(r==null?void 0:r.Config.User),default:Ie.info.Config.User},command:{value:r==null||(ye=r.Config.Cmd)===null||ye===void 0?void 0:ye.join(" "),useDefault:Ye().isEqual(Ie.info.Config.Cmd,r==null?void 0:r.Config.Cmd),default:((he=Ie.info.Config)===null||he===void 0?void 0:he.Cmd)&&Ie.info.Config.Cmd.join(" ")},entrypoint:{value:r==null?void 0:r.Config.Entrypoint,useDefault:Ye().isEqual(Ie.info.Config.Entrypoint,r==null?void 0:r.Config.Entrypoint),default:((Ee=Ie.info)===null||Ee===void 0||(Ee=Ee.Config)===null||Ee===void 0?void 0:Ee.Entrypoint)&&Ie.info.Config.Entrypoint.join(" ")},shmsize:(0,F.Rk)(r==null?void 0:r.HostConfig.ShmSize),cpus:(0,F.PD)(r==null?void 0:r.HostConfig.NanoCpus),memory:(0,F.pM)(r==null?void 0:r.HostConfig.Memory),environment:(r==null?void 0:r.Config.Env)&&(0,ie.oZ)(r.Config.Env,"="),label:function(i){return i&&Object.entries(i).map(function(O){var R=_()(O,2),ne=R[0],Ae=R[1];return{name:ne,value:Ae}})}(r==null?void 0:r.Config.Labels),volumes:function(i){return i==null?void 0:i.filter(function(O){var R;return!Se||Se.length==0||!Se.includes((R=O.Destination)!==null&&R!==void 0?R:"")}).map(function(O){return{host:O.Type=="bind"?O.Source:O.Name,dest:O.Destination,type:O.Type,permission:O.RW?"write":"readonly"}})}(r==null?void 0:r.Mounts),ports:(0,F.yi)(r),links:cn,network:function(i){return i&&Object.entries(i).map(function(O){var R=_()(O,2),ne=R[0],Ae=R[1],Re=Ne&&Ne.find(function(_e){return _e.Name==ne});return{name:ne,alise:"",ipV4:Ae.IPAddress,subnet:"".concat(Re&&Re.IPAM.Config&&Re!==null&&Re!==void 0&&Re.IPAM.Config[0]?Re==null?void 0:Re.IPAM.Config[0].Subnet:"-","/").concat(Ae.IPPrefixLen)}})}(r==null?void 0:r.NetworkSettings.Networks),restart:function(i){return i?{name:i==null?void 0:i.Name,maxAttempt:i==null?void 0:i.MaximumRetryCount}:{name:"no"}}(r==null?void 0:r.HostConfig.RestartPolicy),extraHosts:(0,ie.oZ)(r==null?void 0:r.HostConfig.ExtraHosts,":"),autoRemove:r==null?void 0:r.HostConfig.AutoRemove,log:function(i,O){return{driver:(O=i==null?void 0:i.Type)!==null&&O!==void 0?O:"json-file",maxFile:(i==null?void 0:i.Config)&&i.Config["max-file"],maxSize:(i==null?void 0:i.Config)&&i.Config["max-size"]}}(r==null?void 0:r.HostConfig.LogConfig),dns:r==null||(Qe=r.HostConfig.Dns)===null||Qe===void 0?void 0:Qe.join(`
`),gpus:function(i){var O=i==null?void 0:i.find(function(ne){return ne.Driver=="nvidia"});if(!O)return{enable:!1};var R=O.Capabilities&&O.Capabilities[0];return{device:O.DeviceIDs,capabilities:R&&R.includes("gpu")?[]:R,enable:!0}}(r==null?void 0:r.HostConfig.DeviceRequests),device:function(i){return i==null?void 0:i.map(function(O){return{host:O.PathOnHost,dest:O.PathInContainer}})}(r==null?void 0:r.HostConfig.Devices),hostPid:(r==null?void 0:r.HostConfig.PidMode)=="host",capAdd:r==null?void 0:r.HostConfig.CapAdd,healthcheck:function(i,O,R,ne,Ae,Re){if(!i)return{};var _e=i!=null&&(O=i.Test)!==null&&O!==void 0&&O.includes("CMD-SHELL")?"CMD-SHELL":"CMD";return{interval:(R=i==null?void 0:i.Interval)!==null&&R!==void 0?R:30,timeout:(ne=i==null?void 0:i.Timeout)!==null&&ne!==void 0?ne:10,retries:(Ae=i==null?void 0:i.Retries)!==null&&Ae!==void 0?Ae:3,cmd:i!=null&&i.Test?i==null||(Re=i.Test)===null||Re===void 0?void 0:Re.join(" "):"",shellType:_e}}(r==null?void 0:r.Config.Healthcheck),useBridgeNetwork:function(i){return!!(i&&i.bridge)}(r==null?void 0:r.NetworkSettings.Networks),enableBindHost:r==null||(Xe=r.HostConfig.ExtraHosts)===null||Xe===void 0?void 0:Xe.some(function(i){return i.includes(":host-gateway")})},un));case 28:case"end":return ce.stop()}},ge,null,[[3,10],[13,20]])}));return function(ge){return ue.apply(this,arguments)}}()).finally(function(){T.destroy()}))},[se]),(0,n.jsx)(L.Z.Provider,{value:{createFormRef:te,volumeListRef:je,domainRef:z,createEnvRef:xe,createLinkRef:Oe},children:(0,n.jsx)(g._z,{children:(0,n.jsx)(m.Z,{direction:"column",gutter:[0,10],children:(0,n.jsxs)(w.A,{submitter:{render:function(H,a){return(0,n.jsx)(M.S,{children:a})}},formRef:te,onFinish:function(){var fe=p()(d()().mark(function H(a){var ue,ge,ve,Te,ee;return d()().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(ee={id:a.id,siteTitle:a.siteTitle,siteName:a.siteName,hostname:a.hostname,imageName:a.imageName,environment:a.environment,links:a.links,ports:a.ports,volumes:a.volumes,network:a.network&&a.network.map(function(Ee){return Ye().isArray(Ee.alise)||(Ee.alise=[Ee.alise]),Ee}),privileged:(ue=a.privileged)!==null&&ue!==void 0?ue:!1,autoRemove:(ge=a.autoRemove)!==null&&ge!==void 0?ge:!1,restartPolicy:a.restart,cpus:a.cpus,memory:a.memory,shmsize:(ve=a.shmsize)!==null&&ve!==void 0?ve:0,workDir:a.workDir&&!a.workDir.useDefault?a.workDir.value:"",user:a.user&&!a.user.useDefault?a.user.value:"",command:a.command&&!a.command.useDefault?a.command.value:"",entrypoint:a.entrypoint&&!a.entrypoint.useDefault?a.entrypoint.value:"",useHostNetwork:a.useHostNetwork,bindIpV6:a.bindIpV6,log:a.log,dns:a.dns,label:a.label,publishAllPorts:a.publishAllPorts,extraHosts:a.extraHosts,ipV4:a.ipV4,ipV6:a.ipV6,device:a.device,gpus:a.gpus,hook:a.hook,hostPid:a.hostPid,capAdd:a.capAdd,useBridgeNetwork:(Te=a.useBridgeNetwork)!==null&&Te!==void 0?Te:!0},!(!a.useBridgeNetwork&&!a.useHostNetwork&&(!a.network||a.network.length==0))){he.next=4;break}return me.error(k.format("createMessageNoBridgeNetworkMustHasUseNetwork")),he.abrupt("return",!1);case 4:return a.useBridgeNetwork&&ee.network&&!ee.network.find(function(Ee){return Ee.name=="bridge"})&&ee.network.push({name:"bridge",alise:[],ipV4:""}),a.healthcheck&&a.healthcheck.cmd&&a.healthcheck.cmd!=""&&(ee.healthcheck=a.healthcheck),he.next=8,(0,Fe.$G)(ee);case 8:return q("/app/list",{state:{page:(0,an.G$)(Gn.Dc)}}),he.abrupt("return",!0);case 10:case"end":return he.stop()}},H)}));return function(H){return fe.apply(this,arguments)}}(),children:[(0,n.jsxs)(m.Z,{title:k.format("createTitle"),headerBordered:!0,children:[(0,n.jsx)(I.Z,{hidden:!0,name:"id"}),(0,n.jsx)(f.Z,{name:"siteTitle",label:k.format("createSiteTitle"),fieldProps:{onChange:function(H){var a="";if(H.target.value&&!se.get("id")){var ue,ge=(0,be.N9)(H.target.value.trim(),{toneType:"none",type:"array"});a=ge.join(""),(ue=te.current)===null||ue===void 0||ue.setFieldValue("siteName",a)}}},placeholder:k.format("createSiteTitleEmpty")}),(0,n.jsxs)(c.UW,{children:[(0,n.jsx)(f.Z,{width:"lg",name:"siteName",label:k.format("createSiteName"),required:!0,rules:[{required:!0}],placeholder:k.format("createSiteNameEmpty")}),(0,n.jsx)(f.Z,{label:"Hostname",name:"hostname",width:"md"})]}),(0,n.jsx)(Bn,{redeploy:!!se.get("id"),fromImageId:Y})]}),(0,n.jsx)(u.Z,{offsetTop:50,children:(0,n.jsx)(m.Z,{style:{marginBottom:-20},children:(0,n.jsx)(l.Z,{activeKey:K,onChange:function(H){$(H),window.scrollTo(0,450)},items:W.option("createTabOption",["basic","link","run-command","resource","cap"]).map(function(fe){return{label:fe.label,key:fe.value}})})})}),(0,n.jsxs)(ke.Z,{show:K=="basic",children:[(0,n.jsx)(hn.Z,{ref:z,showBindHost:!0,showBindIpV6:!0,showBindAll:!0}),(0,n.jsx)(N.Z,{showAddButton:!0,showImportButton:!0,showCodeMode:!0,label:W.format("createEnvTitle"),ref:xe}),(0,n.jsx)(Q.Z,{showDefault:!0,ref:je}),(0,n.jsx)(h.Z,{name:["siteName","useHostNetwork"],children:function(H){var a=H.siteName,ue=H.useHostNetwork;if(!ue)return(0,n.jsx)(Pn,{})}})]}),(0,n.jsxs)(ke.Z,{show:K=="link",children:[(0,n.jsx)(h.Z,{name:["siteName","useHostNetwork"],children:function(H){var a=H.siteName,ue=H.useHostNetwork;return ue?(0,n.jsx)(m.Z,{children:(0,n.jsx)(re.Z,{showIcon:!0,description:k.format("createNetworkDesc")})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Ce,{onAddEnv:function(ve,Te){var ee;(ee=xe.current)===null||ee===void 0||ee.addEnvItem(ve,Te)},ref:Oe}),(0,n.jsx)(vn,{showUseBridgeNetwork:!0,siteName:a}),(0,n.jsx)(pn.Z,{})]})}}),(0,n.jsx)(wn,{})]}),(0,n.jsxs)(ke.Z,{show:K=="run-command",children:[(0,n.jsx)(Fn.Z,{defaultValue:"always",showLabel:!0}),(0,n.jsx)(Ke,{}),(0,n.jsx)(kn.Z,{showCommand:!0,showEntrypoint:!0,showWorkDir:!0,showUser:!0}),(0,n.jsx)(Vn.Z,{}),(0,n.jsx)(Kn.Z,{}),(0,n.jsx)(jn,{}),(0,n.jsx)(Ue.Z,{})]}),(0,n.jsxs)(ke.Z,{show:K=="resource",children:[(0,n.jsx)(Sn.Z,{showShmsize:!0}),(0,n.jsx)(Nn,{})]}),(0,n.jsx)(ke.Z,{show:K=="cap",children:(0,n.jsx)(Dn.Z,{})})]},"form")})})})}},97961:function(Pe,U,e){e.d(U,{GH:function(){return g},_2:function(){return w},fN:function(){return P},ii:function(){return A},vC:function(){return x}});var D=e(15009),s=e.n(D),Z=e(99289),d=e.n(Z),v=e(82346),A=[{name:"amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"i386",arch:"386",search:[]},{name:"arm/v6",arch:"arm",search:[]},{name:"arm/v7",arch:"arm",search:[]},{name:"arm/v8",arch:"arm64",search:[]},{name:"ppc64le",arch:"ppc64le",search:[]},{name:"riscv64",arch:"riscv64",search:[]}];function P(c){return p.apply(this,arguments)}function p(){return p=d()(s()().mark(function c(h){return s()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,v.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:h}));case 1:case"end":return l.stop()}},c)})),p.apply(this,arguments)}function x(c){return _.apply(this,arguments)}function _(){return _=d()(s()().mark(function c(h){return s()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,v.request)("/api/app/image/import-by-container-tar",{method:"POST",data:h}));case 1:case"end":return l.stop()}},c)})),_.apply(this,arguments)}function g(c){return m.apply(this,arguments)}function m(){return m=d()(s()().mark(function c(h){return s()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,v.request)("/api/app/image/import-by-image-tar",{method:"POST",data:h}));case 1:case"end":return l.stop()}},c)})),m.apply(this,arguments)}function w(c){return M.apply(this,arguments)}function M(){return M=d()(s()().mark(function c(h){return s()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,v.request)("/api/common/attach/delete",{method:"POST",data:h});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},c)})),M.apply(this,arguments)}function I(){return f.apply(this,arguments)}function f(){return f=_asyncToGenerator(_regeneratorRuntime().mark(function c(){return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return u.stop()}},c)})),f.apply(this,arguments)}},18148:function(Pe,U,e){e.d(U,{$q:function(){return m},Fj:function(){return l},KG:function(){return A},KX:function(){return y},T8:function(){return _},Xn:function(){return p},ao:function(){return M},c5:function(){return h},c7:function(){return f}});var D=e(15009),s=e.n(D),Z=e(99289),d=e.n(Z),v=e(82346);function A(t){return P.apply(this,arguments)}function P(){return P=d()(s()().mark(function t(C){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,v.request)("/api/app/image/get-list",{method:"POST",data:C}));case 1:case"end":return o.stop()}},t)})),P.apply(this,arguments)}function p(t){return x.apply(this,arguments)}function x(){return x=d()(s()().mark(function t(C){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,v.request)("/api/app/image/get-list-build",{method:"POST",data:C}));case 1:case"end":return o.stop()}},t)})),x.apply(this,arguments)}function _(t){return g.apply(this,arguments)}function g(){return g=d()(s()().mark(function t(C){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,v.request)("/api/app/image/get-build-task",{method:"POST",data:C});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},t)})),g.apply(this,arguments)}function m(t){return w.apply(this,arguments)}function w(){return w=d()(s()().mark(function t(C){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,v.request)("/api/app/image/delete-build-task",{method:"POST",data:C});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},t)})),w.apply(this,arguments)}function M(t){return I.apply(this,arguments)}function I(){return I=d()(s()().mark(function t(C){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,v.request)("/api/app/image/image-delete",{method:"POST",data:C});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},t)})),I.apply(this,arguments)}function f(t){return c.apply(this,arguments)}function c(){return c=d()(s()().mark(function t(C){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,v.request)("/api/app/image/image-prune",{method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},t)})),c.apply(this,arguments)}function h(){return u.apply(this,arguments)}function u(){return u=d()(s()().mark(function t(){return s()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,v.request)("/api/app/image/build-prune",{method:"POST"});case 2:return j.abrupt("return",j.sent);case 3:case"end":return j.stop()}},t)})),u.apply(this,arguments)}function l(t){return re.apply(this,arguments)}function re(){return re=d()(s()().mark(function t(C){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,v.request)("/api/app/image/update-title",{method:"POST",data:C});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},t)})),re.apply(this,arguments)}function y(t){return L.apply(this,arguments)}function L(){return L=d()(s()().mark(function t(C){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,v.request)("/api/app/image/tag-sync",{method:"POST",data:C}));case 1:case"end":return o.stop()}},t)})),L.apply(this,arguments)}}}]);
