"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8878],{55809:function(K,u,e){var D=e(87462),i=e(67294),O=e(44805),d=e(84089),f=function(v,c){return i.createElement(d.Z,(0,D.Z)({},v,{ref:c,icon:O.Z}))},s=i.forwardRef(f);u.Z=s},1699:function(K,u,e){e.d(u,{u:function(){return T}});var D=e(9783),i=e.n(D),O=e(97857),d=e.n(O),f=e(67294),s=e(82346),M=e(40411),v=e(42075),c=e(85893),T=function(a){var l=(0,s.useAccess)(),C=Array.isArray(a.access)?a.access:[a.access],_,o=a.fallback;if(typeof a.children=="function"?(_=a.children(C.reduce(function(n,p){return d()(d()({},n),{},i()({},p,l[p]))},{})),_||(_=o)):C.every(function(n){return l[n]})?_=a.children:_=o,!o&&_&&a.showProTips&&l.canSeeEnableCe){if(l.canSeeEnableHiddenProTips)return null;_=(0,c.jsx)(M.Z,{offset:a.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:_})}if(!o&&_&&a.showProRibbonTips&&l.canSeeEnableCe){if(l.canSeeEnableHiddenProTips)return null;_=(0,c.jsx)(M.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:_})}return a.space?(0,c.jsx)(v.Z,d()(d()({},a.space),{},{children:_})):_}},29798:function(K,u,e){e.r(u),e.d(u,{default:function(){return o}});var D=e(5574),i=e.n(D),O=e(13822),d=e(38345),f=e(82346),s=e(67294),M=e(24963),v=e(50070),c=e(37767),T=e(52031),R=e(14189),a=e(72409),l=e(14245),C=e(1699),_=e(85893);function o(){var n=(0,s.useContext)(M.Z),p=n.message,F=n.notice,h=n.loading,N=n.lang,L=(0,s.useContext)(v.AppDetailContext),E=(0,f.useParams)(),x=(0,s.useState)(),U=i()(x,2),t=U[0],H=U[1],y=(0,s.useState)(1),B=i()(y,2),I=B[0],$=B[1],g=(0,f.useNavigate)();return(0,s.useEffect)(function(){var m;h.show(),L.reload(),(0,O.jV)({md5:(m=E.id)!==null&&m!==void 0?m:""}).then(function(P){P.data&&(P.data.info.HostConfig.NetworkMode=="host"&&P.data.info.Config.ExposedPorts&&Object.keys(P.data.info.Config.ExposedPorts).map(function(j){P.data.info.NetworkSettings.Ports[j]=[{HostIp:"0.0.0.0",HostPort:j.substring(0,j.indexOf("/"))}]}),H(P.data))}).finally(function(){h.destroy()})},[I]),(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(d.Z,{direction:"column",gutter:[0,10],children:[(t==null?void 0:t.info)&&(0,_.jsx)(R.Z,{data:t.info}),(t==null?void 0:t.info)&&(0,_.jsx)(C.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,_.jsx)(a.Z,{data:t,checkContainerUpgrade:function(){g("/app/list",{state:{page:localStorage.getItem("dpanel-page-compose-list")}})}})}),t&&(0,_.jsx)(c.Z,{data:t}),t&&(0,_.jsx)(T.Z,{data:t==null?void 0:t.info}),t&&(0,_.jsx)(l.Z,{data:t.info})]})})}},50070:function(K,u,e){e.r(u),e.d(u,{AppDetailContext:function(){return p},default:function(){return F}});var D=e(15009),i=e.n(D),O=e(99289),d=e.n(O),f=e(5574),s=e.n(f),M=e(1699),v=e(24963),c=e(13822),T=e(55809),R=e(90078),a=e(82346),l=e(25593),C=e(28036),_=e(50136),o=e(67294),n=e(85893),p=(0,o.createContext)({});function F(){var h,N=(0,o.useContext)(v.Z),L=N.loading,E=(0,a.useParams)(),x=(0,a.useSearchParams)(),U=s()(x,2),t=U[0],H=U[1],y=(h=t.get("tab"))!==null&&h!==void 0?h:"edit",B=(0,o.useState)("edit"),I=s()(B,2),$=I[0],g=I[1],m=(0,a.useNavigate)(),P=(0,o.useState)(1),j=s()(P,2),z=j[0],Q=j[1],G=[{label:(0,n.jsx)(a.Link,{to:"/app/detail/edit/".concat(E.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,n.jsx)(a.Link,{to:"/app/detail/network/".concat(E.id,"?tab=network"),children:"\u7F51\u7EDC\u7BA1\u7406"}),key:"network"},{label:(0,n.jsx)(l.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){m("/app/detail/file/".concat(E.id,"?tab=file"))}},{label:(0,n.jsx)(l.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){m("/app/detail/log/".concat(E.id,"?tab=log"))}},{label:(0,n.jsx)(l.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){m("/app/detail/stat/".concat(E.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,n.jsx)(T.Z,{}),disabled:!0}],X=(0,o.useState)(G),V=s()(X,2),Y=V[0],w=V[1];(0,o.useEffect)(function(){L.show(),g(y);var A=function(){var S=d()(i()().mark(function J(){var Z,k,b;return i()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return Z=G,r.prev=1,r.next=4,(0,c.jV)({md5:(k=E.id)!==null&&k!==void 0?k:""});case 4:b=r.sent,Z.map(function(W){return W.key=="containerName"&&(W.label=b.data.info.Name),(!b.data.info.State.Running||b.data.info.State.Restarting)&&(W.key=="file"||W.key=="stat")&&(W.disabled=!0),W}),w(Z),r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(1),m("/app/list"),r.abrupt("return");case 13:return r.prev=13,L.destroy(),r.finish(13);case 16:case"end":return r.stop()}},J,null,[[1,9,13,16]])}));return function(){return S.apply(this,arguments)}}();A()},[z,E]);var q=function(S){g(S.key)};return(0,n.jsx)(p.Provider,{value:{reload:function(){Q(z+1)}},children:(0,n.jsxs)(R._z,{header:{extra:[(0,n.jsx)(M.u,{access:"canSeeContainerListManageCreate",children:(0,n.jsx)(a.Link,{to:"/app/create/image",children:(0,n.jsx)(C.ZP,{type:"primary",children:"\u521B\u5EFA\u5BB9\u5668"})})},"create")]},children:[(0,n.jsx)(_.Z,{mode:"horizontal",onClick:q,selectedKeys:[$],items:Y}),(0,n.jsx)(a.Outlet,{})]})})}}}]);
