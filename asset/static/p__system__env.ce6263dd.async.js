"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1180],{88484:function(Y,M,e){e.d(M,{Z:function(){return m}});var R=e(87462),a=e(67294),B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},h=B,S=e(84089),I=function(u,f){return a.createElement(S.Z,(0,R.Z)({},u,{ref:f,icon:h}))},C=a.forwardRef(I),m=C},5966:function(Y,M,e){var R=e(97685),a=e(1413),B=e(45987),h=e(21770),S=e(72723),I=e(55241),C=e(97435),m=e(67294),r=e(35510),u=e(85893),f=["fieldProps","proFieldProps"],n=["fieldProps","proFieldProps"],D="text",d=function(l){var t=l.fieldProps,F=l.proFieldProps,o=(0,B.Z)(l,f);return(0,u.jsx)(r.Z,(0,a.Z)({valueType:D,fieldProps:t,filedConfig:{valueType:D},proFieldProps:F},o))},s=function(l){var t=(0,h.Z)(l.open||!1,{value:l.open,onChange:l.onOpenChange}),F=(0,R.Z)(t,2),o=F[0],K=F[1];return(0,u.jsx)(S.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(J){var N,Q=J.getFieldValue(l.name||[]);return(0,u.jsx)(I.Z,(0,a.Z)((0,a.Z)({getPopupContainer:function(p){return p&&p.parentNode?p.parentNode:p},onOpenChange:function(p){return K(p)},content:(0,u.jsxs)("div",{style:{padding:"4px 0"},children:[(N=l.statusRender)===null||N===void 0?void 0:N.call(l,Q),l.strengthText?(0,u.jsx)("div",{style:{marginTop:10},children:(0,u.jsx)("span",{children:l.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},l.popoverProps),{},{open:o,children:l.children}))}})},i=function(l){var t=l.fieldProps,F=l.proFieldProps,o=(0,B.Z)(l,n),K=(0,m.useState)(!1),A=(0,R.Z)(K,2),J=A[0],N=A[1];return t!=null&&t.statusRender&&o.name?(0,u.jsx)(s,{name:o.name,statusRender:t==null?void 0:t.statusRender,popoverProps:t==null?void 0:t.popoverProps,strengthText:t==null?void 0:t.strengthText,open:J,onOpenChange:N,children:(0,u.jsx)("div",{children:(0,u.jsx)(r.Z,(0,a.Z)({valueType:"password",fieldProps:(0,a.Z)((0,a.Z)({},(0,C.Z)(t,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(G){var p;t==null||(p=t.onBlur)===null||p===void 0||p.call(t,G),N(!1)},onClick:function(G){var p;t==null||(p=t.onClick)===null||p===void 0||p.call(t,G),N(!0)}}),proFieldProps:F,filedConfig:{valueType:D}},o))})}):(0,u.jsx)(r.Z,(0,a.Z)({valueType:"password",fieldProps:t,proFieldProps:F,filedConfig:{valueType:D}},o))},_=d;_.Password=i,_.displayName="ProFormComponent",M.Z=_},1699:function(Y,M,e){e.d(M,{u:function(){return u}});var R=e(9783),a=e.n(R),B=e(97857),h=e.n(B),S=e(67294),I=e(82346),C=e(40411),m=e(42075),r=e(85893),u=function(n){var D=(0,I.useAccess)(),d=Array.isArray(n.access)?n.access:[n.access],s,i=n.fallback;return typeof n.children=="function"?(s=n.children(d.reduce(function(_,T){return h()(h()({},_),{},a()({},T,D[T]))},{})),s||(s=i)):d.every(function(_){return D[_]})?s=n.children:s=i,!i&&s&&n.showProTips&&D.canSeeEnableCe&&(s=(0,r.jsx)(C.Z,{offset:n.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:s})),!i&&s&&n.showProRibbonTips&&D.canSeeEnableCe&&(s=(0,r.jsx)(C.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:s})),n.space?(0,r.jsx)(m.Z,h()(h()({},n.space),{},{children:s})):s}},80821:function(Y,M,e){e.d(M,{Z:function(){return f}});var R=e(97857),a=e.n(R),B=e(5574),h=e.n(B),S=e(24963),I=e(86738),C=e(28036),m=e(83062),r=e(67294),u=e(85893);function f(n){var D=(0,r.useState)(!1),d=h()(D,2),s=d[0],i=d[1],_=(0,r.useContext)(S.Z),T=_.lang,l=_.message,t=function(){i(!0);var o=n.action();o instanceof Promise?o.then(function(K){if(i(!1),K){typeof n.onSuccess=="function"&&n.onSuccess(K);var A="";n.messageSuccess?typeof n.messageSuccess=="function"?A=n.messageSuccess(K):A=n.messageSuccess.indexOf("notification.")==0?T(n.messageSuccess):n.messageSuccess:A=T("notification.finish"),n.asynced?l.info(A):l.success(A)}}).catch(function(K){i(!1),typeof n.onError=="function"&&n.onError(K)}):i(!1)};return n.confirm?(0,u.jsx)(I.Z,a()(a()({style:{width:500},title:n.confirmTitle?n.confirmTitle:T("notification.title.tip"),description:typeof n.confirm=="string"&&n.confirm.indexOf("notification.")==0?T(n.confirm):n.confirm,onConfirm:t,okText:"Yes",cancelText:"No",onOpenChange:n.confirmOnOpenChange},n.confirmProps),{},{children:(0,u.jsx)(C.ZP,{block:n.block,disabled:n.disabled,icon:!n.children&&s?void 0:n.icon,loading:s,danger:n.danger,type:n.type,children:n.children})})):(0,u.jsx)(m.Z,{title:n.tips,children:(0,u.jsx)(C.ZP,{block:n.block,style:n.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:n.disabled,icon:!n.children&&s?void 0:n.icon,loading:s,onClick:t,danger:n.danger,type:n.type,children:n.children})})}},44349:function(Y,M,e){var R=e(97857),a=e.n(R),B=e(17186),h=e(5966),S=e(86250),I=e(67294),C=e(85893),m=(0,I.forwardRef)(function(r,u){var f=(0,I.useRef)();(0,I.useImperativeHandle)(u,function(){return{addItem:function(d,s){var i,_=(i=f.current)===null||i===void 0?void 0:i.getList(),T=!1;if(_==null||_.map(function(t){if(t.name==d){T=!0;return}}),!T){var l;(l=f.current)===null||l===void 0||l.add({name:d,value:s})}},clear:function(){var d;(d=f.current)===null||d===void 0||(d=d.getList())===null||d===void 0||d.map(function(s,i){var _;(_=f.current)===null||_===void 0||_.remove(i)})}}});var n={};return r.hideCopyButton===!0&&(n.copyIconProps=!1),r.hideDeleteButton===!0&&(n.deleteIconProps=!1),(0,C.jsx)(B.u,a()(a()({initialValue:r.initialValue,label:r.label,name:r.name,actionRef:f,creatorButtonProps:r.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(r.label?r.label:r.name)}:!1,min:r.min?r.min:0},n),{},{children:function(d,s,i){return(0,C.jsx)(S.Z,{justify:r.justify,gap:r.gap,children:r.items.map(function(_){return _.render?(0,C.jsx)("div",{children:_.render&&_.render(d,s,i)},"".concat(r.name,"-").concat(_.name,"-").concat(d.key)):(0,C.jsx)(h.Z,{width:_.width,name:_.name,label:_.label,required:_.required,rules:[{required:_.required}],disabled:_.disabled,placeholder:_.placeholder},"".concat(r.name,"-").concat(_.name,"-").concat(d.key))})})}}))});M.Z=m},8680:function(Y,M,e){var R=e(15009),a=e.n(R),B=e(64599),h=e.n(B),S=e(99289),I=e.n(S),C=e(9783),m=e.n(C),r=e(5574),u=e.n(r),f=e(67294),n=e(184),D=e(38345),d=e(97269),s=e(97321),i=e(97462),_=e(64317),T=e(5966),l=e(86615),t=e(68602),F=e(28036),o=e(83403),K=e(24963),A=e(1699),J=e(29177),N=e(45742),Q=e(43425),G=e(44349),p=e(3616),v=e(85893),w=(0,f.forwardRef)(function($,q){var V=(0,f.useState)(!1),j=u()(V,2),y=j[0],U=j[1],Z=(0,f.useRef)(),c=(0,f.useContext)(K.Z),x=c.message,X=(0,f.useState)([]),ee=u()(X,2),k=ee[0],ne=ee[1],te=m()(m()(m()(m()(m()({},o.W6.CONTAINER,"Id"),o.W6.APPSTORE,"name"),o.W6.COMPOSE,"name"),o.W6.REGISTRY,"serverAddress"),o.W6.DOCKER_ENV,"name"),re=m()(m()(m()(m()(m()({},o.W6.CONTAINER,"name"),o.W6.APPSTORE,"name"),o.W6.COMPOSE,"name"),o.W6.REGISTRY,"title"),o.W6.DOCKER_ENV,"title"),_e=te[$.type],se=re[$.type],le=$.selected.map(function(L){return L[te[$.type]]});return f.useEffect(function(){y&&((0,t.dP)({permission:{uri:$.type,key:_e,value:le}}).then(function(L){var E;(E=Z.current)===null||E===void 0||E.setFieldValue("list",Object.keys(L.data.list).map(function(P){return{name:P,type:L.data.list[P].type,users:L.data.list[P].users}}))}),(0,t.lE)().then(function(L){var E,P=(E=L.data)===null||E===void 0||(E=E.list)===null||E===void 0?void 0:E.map(function(O){return{label:O.username,value:O.username}});ne(P)}))},[y]),(0,v.jsx)(A.u,{access:["canSeeEnableEe","canSeeFounder","canSeeManage"],children:(0,v.jsxs)(n.a,{name:"create",title:"\u6570\u636E\u6743\u9650\u8BBE\u7F6E",open:y,onOpenChange:function(E){if(!E){var P;(P=Z.current)===null||P===void 0||P.resetFields()}U(E)},drawerProps:{forceRender:!0,width:p.R_},formRef:Z,trigger:(0,v.jsx)(F.ZP,{icon:(0,v.jsx)(J.Z,{}),children:"\u6570\u636E\u6743\u9650"}),onFinish:function(){var L=I()(a()().mark(function E(P){var O,g,b;return a()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:O=h()(P.list),W.prev=1,O.s();case 3:if((g=O.n()).done){W.next=9;break}return b=g.value,W.next=7,(0,t.Db)({usernames:b.users,permissionType:b.type,permission:{uri:$.type,key:_e,showKey:se,value:[b.name]}});case 7:W.next=3;break;case 9:W.next=14;break;case 11:W.prev=11,W.t0=W.catch(1),O.e(W.t0);case 14:return W.prev=14,O.f(),W.finish(14);case 17:x.success("\u6743\u9650\u8BBE\u7F6E\u6210\u529F"),U(!1),$.onSuccess();case 20:case"end":return W.stop()}},E,null,[[1,11,14,17]])}));return function(E){return L.apply(this,arguments)}}(),children:[(0,v.jsxs)(D.Z,{ghost:!0,title:(0,v.jsx)(N.Z,{}),subTitle:"\u6279\u91CF\u8BBE\u7F6E",children:[(0,v.jsx)(d.A.Item,{name:"type",style:{marginBottom:0},children:(0,v.jsxs)(s.Z.Group,{defaultValue:"admin",onChange:function(E){var P,O,g=(P=Z.current)===null||P===void 0?void 0:P.getFieldValue("list");g.forEach(function(b){b.type=E,b.users=[]}),(O=Z.current)===null||O===void 0||O.setFieldValue("list",g)},children:[(0,v.jsx)(s.Z,{style:{width:240},title:"\u7BA1\u7406\u5458",description:"\u4EC5\u7BA1\u7406\u5458\u53EF\u89C1",value:"admin"}),(0,v.jsx)(s.Z,{style:{width:240},title:"\u6307\u5B9A\u7528\u6237",description:"\u4EC5\u9009\u4E2D\u7528\u6237\u53EF\u89C1",value:"restricted"}),(0,v.jsx)(s.Z,{style:{width:240},title:"\u516C\u5171",description:"\u6240\u6709\u4EBA\u53EF\u89C1",value:"public"})]})}),(0,v.jsx)(i.Z,{name:["type"],children:function(E){var P=E.type;if(P==="restricted")return(0,v.jsx)(_.Z,{mode:"multiple",name:"usernames",label:"\u9009\u62E9\u7528\u6237",onChange:function(g){var b,H,W=(b=Z.current)===null||b===void 0?void 0:b.getFieldValue("list");W.forEach(function(z){z.users=g}),(H=Z.current)===null||H===void 0||H.setFieldValue("list",W)},rules:[{required:!0}],request:I()(a()().mark(function O(){var g,b,H;return a()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!(k.length>0)){z.next=2;break}return z.abrupt("return",k);case 2:return z.next=4,(0,t.lE)();case 4:return b=z.sent,H=(g=b.data)===null||g===void 0||(g=g.list)===null||g===void 0?void 0:g.map(function(ae){return{label:ae.username,value:ae.username}}),ne(H),z.abrupt("return",H);case 8:case"end":return z.stop()}},O)}))})}})]}),(0,v.jsx)(D.Z,{ghost:!0,title:(0,v.jsx)(Q.Z,{}),subTitle:"\u6570\u636E\u6743\u9650\u8BBE\u7F6E",children:(0,v.jsx)(G.Z,{name:"list",hideCopyButton:!0,gap:10,items:[{name:"name",label:"\u540D\u79F0",render:function(E,P,O){var g=O.getCurrentRowData();return(0,v.jsx)(T.Z,{disabled:!0,label:"\u540D\u79F0",width:"sm",name:"name"})}},{name:"type",label:"\u6743\u9650\u7C7B\u578B",render:function(E,P,O){var g=O.getCurrentRowData();return(0,v.jsx)(l.Z.Group,{label:"\u6743\u9650\u7C7B\u578B",name:"type",radioType:"button",options:[{label:"\u7BA1\u7406\u5458",value:"admin"},{label:"\u516C\u5171",value:"public"},{label:"\u6307\u5B9A\u7528\u6237",value:"restricted"}]})}},{name:"users",label:"\u5173\u8054\u7528\u6237",render:function(E,P,O){return(0,v.jsx)(i.Z,{name:["type"],children:function(b){var H=b.type;if(H=="restricted")return(0,v.jsx)(_.Z,{width:"sm",mode:"tags",name:"users",label:"\u5173\u8054\u7528\u6237",options:k})}})}}]})})]})})});M.Z=w},3616:function(Y,M,e){e.d(M,{Ed:function(){return h},FK:function(){return a},R_:function(){return R},ob:function(){return B}});var R=window.innerWidth<=1024?"90vw":"65vw",a="90vw",B="60vw",h="50vh"},24963:function(Y,M,e){var R=e(67294),a=(0,R.createContext)({});M.Z=a},98163:function(Y,M,e){e.r(M),e.d(M,{default:function(){return F}});var R=e(15009),a=e.n(R),B=e(99289),h=e.n(B),S=e(80821),I=e(77273),C=e(8680),m=e(83403),r=e(24963),u=e(87662),f=e(86548),n=e(90078),D=e(41482),d=e(82346),s=e(28036),i=e(42075),_=e(96074),T=e(25593),l=e(67294),t=e(85893);function F(){var o=(0,l.useRef)(),K=(0,l.useRef)(),A=(0,d.useModel)("@@initialState"),J=A.initialState,N=A.loading,Q=A.error,G=A.refresh,p=A.setInitialState,v=(0,l.useContext)(r.Z),w=v.message,$=(0,d.useLocation)(),q=(0,d.useNavigate)();return(0,l.useEffect)(function(){var V=$.state;if(V&&V.item){var j;(j=K.current)===null||j===void 0||j.edit(V.item)}},[$.state]),(0,t.jsx)(n._z,{header:{extra:[(0,t.jsx)(I.Z,{trigger:(0,t.jsx)(s.ZP,{type:"primary",children:"\u6DFB\u52A0\u670D\u52A1\u7AEF"}),ref:K,onFinish:h()(a()().mark(function V(){var j,y,U;return a()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(U=$.state,!(U&&U.item)){c.next=6;break}return c.next=4,(0,u.vC)({name:U.item.name});case 4:return q($.pathname,{replace:!0,state:null}),c.abrupt("return");case 6:G(),!((j=o.current)===null||j===void 0)&&j.reloadAndRest&&((y=o.current)===null||y===void 0||y.reloadAndRest());case 8:case"end":return c.stop()}},V)}))},"dockerEnvCreate")]},children:(0,t.jsx)(D.Z,{rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name"},{title:"\u540D\u79F0",dataIndex:"title"},{title:"\u5730\u5740",dataIndex:"address"},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(j,y,U,Z,c){return(0,t.jsx)(i.Z,{split:(0,t.jsx)(_.Z,{type:"vertical"}),children:(0,t.jsx)(T.Z.Link,{onClick:function(){var X;(X=K.current)===null||X===void 0||X.edit(y)},children:(0,t.jsx)(f.Z,{})},y.name)})}}],pagination:!1,request:h()(a()().mark(function V(){var j;return a()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,u.Kg)();case 2:return j=U.sent,U.abrupt("return",{data:j.data.list,total:j.data.list.length});case 4:case"end":return U.stop()}},V)})),search:!1,rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},actionRef:o,tableAlertOptionRender:function(j){var y=j.selectedRows,U=j.selectedRowKeys;return(0,t.jsxs)(i.Z,{size:16,children:[(0,t.jsx)(C.Z,{type:m.W6.DOCKER_ENV,selected:y,onSuccess:function(){var c,x;return!((c=o.current)===null||c===void 0)&&c.reloadAndRest&&((x=o.current)===null||x===void 0||x.reloadAndRest()),!0}}),(0,t.jsx)(S.Z,{danger:!0,type:"primary",action:function(){return y.find(function(c){return c.default})?(w.warning("\u9ED8\u8BA4\u73AF\u5883\u4E0D\u80FD\u5220\u9664"),!1):(0,u._g)({name:U})},onSuccess:function(){var c,x;return G(),!((c=o.current)===null||c===void 0)&&c.reloadAndRest&&((x=o.current)===null||x===void 0||x.reloadAndRest()),!0},onError:function(){var c,x;return!((c=o.current)===null||c===void 0)&&c.reset&&((x=o.current)===null||x===void 0||x.reset()),!0},confirm:"notification.confirm.title",children:"\u6279\u91CF\u5220\u9664"})]})}})})}}}]);
