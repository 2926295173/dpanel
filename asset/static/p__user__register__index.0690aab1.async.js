"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9907],{88641:function(J,y,e){e.d(y,{Z:function(){return O}});var j=e(87462),i=e(67294),I={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"},U=I,p=e(84089),x=function(c,d){return i.createElement(p.Z,(0,j.Z)({},c,{ref:d,icon:U}))},R=i.forwardRef(x),O=R},67719:function(J,y,e){e.r(y),e.d(y,{default:function(){return A}});var j=e(15009),i=e.n(j),I=e(99289),U=e.n(I),p=e(5574),x=e.n(p),R=e(68262),O=e(9361),Z=e(86250),c=e(45360),d=e(67294),m=e(36146),C=e(88360),L=e(29177),S=e(88641),w=e(94149),g=e(5966),W=e(97462),B=e(92398),r=e(85893);function b(f){var u=new m.Uo("user");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(B.Z,{centered:!0,activeKey:"register",items:[{icon:(0,r.jsx)(C.Z,{}),key:"register",label:u.format("registerUserTitle")}]}),(0,r.jsx)(g.Z,{name:"username",fieldProps:{size:"large",prefix:(0,r.jsx)(L.Z,{className:"prefixIcon"}),disabled:!0,defaultValue:f.username}}),(0,r.jsx)(g.Z,{name:"email",fieldProps:{size:"large",prefix:(0,r.jsx)(S.Z,{className:"prefixIcon"}),disabled:!!f.email||!1,defaultValue:f.email},placeholder:u.format("formEmailEmpty"),rules:f.email?[]:[{required:!0,message:u.format("formEmailEmpty")},{type:"email"}]}),(0,r.jsx)(g.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,r.jsx)(w.Z,{className:"prefixIcon"})},placeholder:u.format("formPasswordEmpty"),rules:f.securityPassword?[{required:!0,message:u.format("formPasswordEmpty")},{min:8,message:u.format("formPasswordRule1")},{pattern:/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,message:u.format("formPasswordRule2")}]:[]},"password"),(0,r.jsx)(W.Z,{name:["password"],children:function(){return(0,r.jsx)(g.Z.Password,{fieldProps:{size:"large",prefix:(0,r.jsx)(w.Z,{className:"prefixIcon"})},placeholder:u.format("formConfirmPasswordEmpty"),name:"confirmPassword",dependencies:["password"],rules:[{required:!0,message:u.format("formConfirmPasswordEmpty")},function(t){var s=t.getFieldValue;return{validator:function(n,a){return!a||s("password")===a?Promise.resolve():Promise.reject(new Error(u.format("formMessagePasswordNotMatch")))}}}]},"confirmPassword")}}),f.token&&(0,r.jsx)("input",{type:"hidden",name:"token",value:f.token})]})}var K=e(68602),z=e(82346),A=function(){var f=O.Z.useToken(),u=f.token,N=(0,z.useSearchParams)(),t=x()(N,1),s=t[0],l=Q(s.get("token")||""),n=(0,d.useState)(),a=x()(n,2),o=a[0],E=a[1],v=l.securityPassword,T=(0,d.useState)({token:s.get("token")||"",username:l.username||"",email:l.email||""}),h=x()(T,1),P=h[0],G=new m.Uo("user");(0,d.useEffect)(function(){window.document.title=G.format("documentTitle")},[]);function Q(V){try{var D=V.split(".");if(D.length!==3)throw new Error(G.format("jwtMessageIncorrectFormat"));var F=D[1],$=F.replace(/-/g,"+").replace(/_/g,"/"),M=decodeURIComponent(atob($).split("").map(function(H){return"%"+("00"+H.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(M)}catch(H){return console.error(G.format("jwtMessageInvalid"),H),null}}return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(Z.Z,{justify:"center",align:"center",style:{height:"100vh",background:o&&o.themeUserConfig&&o.themeUserConfig.bgImage&&o.themeUserConfig.bgImage.src?"url(".concat(o.themeUserConfig.bgImage.src,")"):"".concat(u.colorBgElevated,"dd")},children:(0,r.jsx)(R.U,{onFinish:function(){var V=U()(i()().mark(function D(F){return i()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,(0,K.MS)({password:F.password,confirmPassword:F.confirmPassword,email:F.email||P.email,token:P.token});case 2:c.ZP.success(m.FD.format("title.successRegister")),z.history.replace("/user/login");case 4:case"end":return M.stop()}},D)}));return function(D){return V.apply(this,arguments)}}(),containerStyle:{background:"transparent",height:"auto"},logo:"",title:(0,r.jsx)("a",{href:"https://dpanel.cc",target:"_blank",children:(0,r.jsx)("img",{src:o&&o.themeUserConfig&&o.themeUserConfig.loginLogo?o.themeUserConfig.loginLogo:"/dpanel/static/asset/logo.png",width:"350"})}),subTitle:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsx)("br",{})]}),children:(0,r.jsx)(b,{securityPassword:v,token:P.token,username:P.username,email:P.email})})})})}},45360:function(J,y,e){var j=e(74902),i=e(67294),I=e(66968),U=e(53124),p=e(21532),x=e(69711),R=e(66277),O=e(16474),Z=e(84926);let c=null,d=t=>t(),m=[],C={};function L(){const{getContainer:t,duration:s,rtl:l,maxCount:n,top:a}=C,o=(t==null?void 0:t())||document.body;return{getContainer:()=>o,duration:s,rtl:l,maxCount:n,top:a}}const S=i.forwardRef((t,s)=>{const{messageConfig:l,sync:n}=t,{getPrefixCls:a}=(0,i.useContext)(U.E_),o=C.prefixCls||a("message"),E=(0,i.useContext)(I.J),[v,T]=(0,O.K)(Object.assign(Object.assign(Object.assign({},l),{prefixCls:o}),E.message));return i.useImperativeHandle(s,()=>{const h=Object.assign({},v);return Object.keys(h).forEach(P=>{h[P]=function(){return n(),v[P].apply(v,arguments)}}),{instance:h,sync:n}}),T}),w=i.forwardRef((t,s)=>{const[l,n]=i.useState(L),a=()=>{n(L)};i.useEffect(a,[]);const o=(0,p.w6)(),E=o.getRootPrefixCls(),v=o.getIconPrefixCls(),T=o.getTheme(),h=i.createElement(S,{ref:s,sync:a,messageConfig:l});return i.createElement(p.ZP,{prefixCls:E,iconPrefixCls:v,theme:T},o.holderRender?o.holderRender(h):h)});function g(){if(!c){const t=document.createDocumentFragment(),s={fragment:t};c=s,d(()=>{(0,x.x)()(i.createElement(w,{ref:n=>{const{instance:a,sync:o}=n||{};Promise.resolve().then(()=>{!s.instance&&a&&(s.instance=a,s.sync=o,g())})}}),t)});return}c.instance&&(m.forEach(t=>{const{type:s,skipped:l}=t;if(!l)switch(s){case"open":{d(()=>{const n=c.instance.open(Object.assign(Object.assign({},C),t.config));n==null||n.then(t.resolve),t.setCloseFn(n)});break}case"destroy":d(()=>{c==null||c.instance.destroy(t.key)});break;default:d(()=>{var n;const a=(n=c.instance)[s].apply(n,(0,j.Z)(t.args));a==null||a.then(t.resolve),t.setCloseFn(a)})}}),m=[])}function W(t){C=Object.assign(Object.assign({},C),t),d(()=>{var s;(s=c==null?void 0:c.sync)===null||s===void 0||s.call(c)})}function B(t){const s=(0,Z.J)(l=>{let n;const a={type:"open",config:t,resolve:l,setCloseFn:o=>{n=o}};return m.push(a),()=>{n?d(()=>{n()}):a.skipped=!0}});return g(),s}function r(t,s){const l=(0,p.w6)(),n=(0,Z.J)(a=>{let o;const E={type:t,args:s,resolve:a,setCloseFn:v=>{o=v}};return m.push(E),()=>{o?d(()=>{o()}):E.skipped=!0}});return g(),n}const b=t=>{m.push({type:"destroy",key:t}),g()},K=["success","info","warning","error","loading"],A={open:B,destroy:b,config:W,useMessage:O.Z,_InternalPanelDoNotUseOrYouWillBeFired:R.ZP};K.forEach(t=>{A[t]=function(){for(var s=arguments.length,l=new Array(s),n=0;n<s;n++)l[n]=arguments[n];return r(t,l)}});const f=()=>{};let u=null,N=null;y.ZP=A}}]);
