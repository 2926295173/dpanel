"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4202],{45742:function(y,g,e){e.d(g,{Z:function(){return I}});var T=e(87462),u=e(67294),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656zM492 400h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 144h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 144h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zM340 368a40 40 0 1080 0 40 40 0 10-80 0zm0 144a40 40 0 1080 0 40 40 0 10-80 0zm0 144a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"profile",theme:"outlined"},_=f,E=e(84089),P=function(A,L){return u.createElement(E.Z,(0,T.Z)({},A,{ref:L,icon:_}))},O=u.forwardRef(P),I=O},80821:function(y,g,e){e.d(g,{Z:function(){return L}});var T=e(97857),u=e.n(T),f=e(5574),_=e.n(f),E=e(24963),P=e(86738),O=e(28036),I=e(83062),m=e(67294),A=e(85893);function L(n){var D=(0,m.useState)(!1),r=_()(D,2),l=r[0],j=r[1],o=(0,m.useContext)(E.Z),C=o.lang,R=o.message,W=function(){j(!0);var M=n.action();M instanceof Promise?M.then(function(d){if(j(!1),d){typeof n.onSuccess=="function"&&n.onSuccess(d);var a="";n.messageSuccess?typeof n.messageSuccess=="function"?a=n.messageSuccess(d):a=n.messageSuccess.indexOf("notification.")==0?C(n.messageSuccess):n.messageSuccess:a=C("notification.finish"),n.asynced?R.info(a):R.success(a)}}).catch(function(d){j(!1),typeof n.onError=="function"&&n.onError(d)}):j(!1)};return n.confirm?(0,A.jsx)(P.Z,u()(u()({style:{width:500},title:n.confirmTitle?n.confirmTitle:C("notification.title.tip"),description:typeof n.confirm=="string"&&n.confirm.indexOf("notification.")==0?C(n.confirm):n.confirm,onConfirm:W,okText:"Yes",cancelText:"No",onOpenChange:n.confirmOnOpenChange},n.confirmProps),{},{children:(0,A.jsx)(O.ZP,{block:n.block,disabled:n.disabled,icon:!n.children&&l?void 0:n.icon,loading:l,danger:n.danger,type:n.type,children:n.children})})):(0,A.jsx)(I.Z,{title:n.tips,children:(0,A.jsx)(O.ZP,{block:n.block,style:n.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:n.disabled,icon:!n.children&&l?void 0:n.icon,loading:l,onClick:W,danger:n.danger,type:n.type,children:n.children})})}},94359:function(y,g,e){e.d(g,{Z:function(){return D}});var T=e(3089),u=e(98165),f=e(18429),_=e(8751),E=e(14313),P=e(30159),O=e(87740),I=e(50888),m=e(66309),A=e(83062),L=e(82346),n=e(85893);function D(r){var l=(0,n.jsx)(n.Fragment,{});if(r.status=="0"&&(l=(0,n.jsx)(m.Z,{icon:(0,n.jsx)(T.Z,{}),color:"default",children:"waiting"})),r.status=="10"&&(l=(0,n.jsx)(m.Z,{icon:(0,n.jsx)(u.Z,{spin:!0}),color:"processing",children:"processing"})),r.status=="20"&&(l=(0,n.jsx)(m.Z,{icon:(0,n.jsx)(f.Z,{}),color:"error",children:"error"})),r.status=="30"&&(l=(0,n.jsx)(m.Z,{icon:(0,n.jsx)(_.Z,{}),color:"success",children:"success"})),r.status=="running"||r.status=="healthy"){var j,o;l=(0,n.jsx)(m.Z,{icon:(0,n.jsx)(E.Z,{}),color:"success",children:(j=r.message)!==null&&j!==void 0&&j.showInTag?(o=r.message)===null||o===void 0?void 0:o.content:r.status})}if(r.status=="paused"){var C,R;l=(0,n.jsx)(m.Z,{icon:(0,n.jsx)(P.Z,{}),children:(C=r.message)!==null&&C!==void 0&&C.showInTag?(R=r.message)===null||R===void 0?void 0:R.content:r.status})}if(r.status=="waiting"||r.status=="starting"){var W,B;l=(0,n.jsx)(m.Z,{icon:(0,n.jsx)(O.Z,{}),children:(W=r.message)!==null&&W!==void 0&&W.showInTag?(B=r.message)===null||B===void 0?void 0:B.content:r.status})}if(r.status=="deploying"){var M,d;l=(0,n.jsx)(m.Z,{icon:(0,n.jsx)(I.Z,{}),color:"processing",children:(M=r.message)!==null&&M!==void 0&&M.showInTag?(d=r.message)===null||d===void 0?void 0:d.content:r.status})}if(r.status=="error"){var a,c;l=(0,n.jsx)(m.Z,{icon:(0,n.jsx)(f.Z,{}),color:"error",children:(a=r.message)!==null&&a!==void 0&&a.showInTag?(c=r.message)===null||c===void 0?void 0:c.content:r.status})}if(r.status=="exited"||r.status=="dead"||r.status=="removing"||r.status=="restarting"||r.status=="unhealthy"||r.status=="created"){var i,v;l=(0,n.jsx)(m.Z,{icon:(0,n.jsx)(f.Z,{}),color:"warning",children:(i=r.message)!==null&&i!==void 0&&i.showInTag?(v=r.message)===null||v===void 0?void 0:v.content:r.status})}if(r.link)return(0,n.jsx)(L.Link,{to:r.link,children:l});if(r.message){var s,t;return(0,n.jsx)(A.Z,{placement:(s=r.message.placement)!==null&&s!==void 0?s:"top",title:(t=r.message.title)!==null&&t!==void 0?t:r.message.content,children:l})}return l}},74344:function(y,g,e){var T=e(5574),u=e.n(T),f=e(37476),_=e(38345),E=e(82346),P=e(67294),O=e(54964),I=e(3616),m=e(85893),A=(0,P.forwardRef)(function(L,n){(0,P.useImperativeHandle)(n,function(){return{start:function(){for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];W(c.join(":")),j(!0)},reset:function(){var a;(a=M.current)===null||a===void 0||a.clear(),j(!1)},show:function(a){var c,i;(c=M.current)===null||c===void 0||c.clear(),(i=M.current)===null||i===void 0||i.write(a),j(!0)}}});var D=(0,P.useState)(!1),r=u()(D,2),l=r[0],j=r[1],o=(0,P.useState)(""),C=u()(o,2),R=C[0],W=C[1],B=(0,E.useModel)("subscriber"),M=(0,P.useRef)();return B.addDataHandler("image:"+R,function(d){var a;(a=M.current)===null||a===void 0||a.write(d.data)}),(0,P.useEffect)(function(){var d;(d=M.current)===null||d===void 0||d.fit()},[]),(0,m.jsx)(f.Y,{modalProps:{forceRender:!0,width:I.ob},title:"\u6784\u5EFA\u65E5\u5FD7",submitter:!1,width:1e3,onOpenChange:function(a){if(j(a),a){var c,i;(c=M.current)===null||c===void 0||c.clear(),(i=M.current)===null||i===void 0||i.fit()}},open:l,children:(0,m.jsx)(_.Z,{ghost:!0,children:(0,m.jsx)(O.Z,{showInModal:!0,width:"960px",height:"500px",ref:M})})})});g.Z=A},78451:function(y,g,e){e.d(g,{Z:function(){return f}});var T=e(67294),u=e(85893);function f(_){return(0,u.jsx)("span",{style:{width:_.width?_.width:"auto",wordBreak:"break-word"},children:_.content})}},54964:function(y,g,e){e.d(g,{a:function(){return n}});var T=e(5574),u=e.n(T),f=e(78267),_=e.n(f),E=e(75458),P=e.n(E),O=e(67294),I=e(12320),m=e.n(I),A=e(89629),L=e(85893),n={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,cursorStyle:"block",cursorBlink:!0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},D=new I.Terminal(n),r=new E.SearchAddon,l=new f.FitAddon,j=(0,O.forwardRef)(function(o,C){var R,W=(0,O.useState)(!0),B=u()(W,2),M=B[0],d=B[1];return(0,O.useEffect)(function(){return window.addEventListener("resize",function(){o.showInModal||l.fit()}),o.style&&o.style.fontSize&&(D.options.fontSize=o.style.fontSize),D.loadAddon(l),D.loadAddon(r),D.open(document.getElementById(o.id?o.id:"terminal-container")),o.showInModal||l.fit(),function(){D.reset(),d(!0)}},[]),(0,O.useImperativeHandle)(C,function(){return{write:function(c){M&&(l.fit(),d(!1)),D.write(c)},clear:function(){D.clear()},getTerminal:function(){return D},findNext:function(c){r.findNext(c)},findPrev:function(c){r.findPrevious(c)},fit:function(){l.fit()},onData:function(c){return D.onData(c)}}}),(0,L.jsx)("div",{id:o.id?o.id:"terminal-container",style:{width:o.width?o.width:"100%",height:o.height?o.height:"500px",marginTop:(R=o.style)===null||R===void 0?void 0:R.marginTop}})});g.Z=j},3616:function(y,g,e){e.d(g,{Ed:function(){return _},FK:function(){return u},R_:function(){return T},ob:function(){return f}});var T=window.innerWidth<=1024?"90vw":"65vw",u="90vw",f="60vw",_="50vh"},24963:function(y,g,e){var T=e(67294),u=(0,T.createContext)({});g.Z=u},52548:function(y,g,e){e.r(g),e.d(g,{default:function(){return c}});var T=e(15009),u=e.n(T),f=e(99289),_=e.n(f),E=e(90078),P=e(41482),O=e(28036),I=e(42075),m=e(66309),A=e(96074),L=e(83062),n=e(25593),D=e(50136),r=e(82346),l=e(18148),j=e(94359),o=e(43425),C=e(45742),R=e(80821),W=e(67294),B=e(67255),M=e(78451),d=e(74344),a=e(85893);function c(){var i=(0,W.useRef)(),v=(0,W.useRef)();return(0,a.jsxs)(E._z,{header:{extra:[(0,a.jsx)(O.ZP,{type:"primary",children:(0,a.jsx)(r.Link,{to:"/image/create",children:"\u521B\u5EFA\u955C\u50CF"})},"create"),(0,a.jsx)(O.ZP,{children:"\u62C9\u53D6\u955C\u50CF"},"pull")]},children:[(0,a.jsx)(P.Z,{scroll:{x:"max-content"},actionRef:i,rowKey:"id",columns:[{title:"\u540D\u79F0",render:function(t,h,K,x){return(0,a.jsx)(I.Z,{direction:"vertical",style:{textAlign:"left"},children:h.title},h.id)}},{title:"\u6700\u65B0Tag",dataIndex:"tag",search:!1,render:function(t,h,K,x){return h.imageInfo?h.imageInfo.info.Id==""?(0,a.jsx)(m.Z,{children:"none"},"none"):(0,a.jsx)(I.Z,{direction:"vertical",style:{textAlign:"left"},children:h.imageInfo.info.RepoTags.map(function(U,b){return(0,a.jsx)(m.Z,{color:"#2db7f5",children:U},b)})},h.id):(0,a.jsx)(m.Z,{color:"#2db7f5",children:h.tag},h.id)}},{title:"\u955C\u50CFId",search:!1,copyable:!0,width:300,render:function(t,h,K,x,U){return(0,a.jsx)(M.Z,{content:h.imageInfo&&h.imageInfo.info.Id})}},{title:"\u6784\u5EFA\u72B6\u6001",width:150,ellipsis:!0,search:!1,render:function(t,h,K,x){return[(0,a.jsx)("div",{children:(0,a.jsx)(j.Z,{status:h.status},h.id)},h.id)]}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:100,fixed:"right",render:function(t,h,K,x){return(0,a.jsxs)(I.Z,{split:(0,a.jsx)(A.Z,{type:"vertical"}),children:[(0,a.jsx)(r.Link,{to:"/image/create?id="+h.id,type:"link",children:(0,a.jsx)(L.Z,{title:"\u518D\u6B21\u6784\u5EFA",children:(0,a.jsx)(o.Z,{})})},"rebuild"),(0,a.jsx)(n.Z.Link,{onClick:function(){var b;(b=v.current)===null||b===void 0||b.show(h.message)},children:(0,a.jsx)(L.Z,{title:"\u6784\u5EFA\u65E5\u5FD7",children:(0,a.jsx)(C.Z,{})})},"logs")]})}}],request:function(){var s=_()(u()().mark(function t(h,K,x){var U,b,Z;return u()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,l.Xn)({page:(U=h.current)!==null&&U!==void 0?U:1,pageSize:(b=h.pageSize)!==null&&b!==void 0?b:10});case 2:return Z=S.sent,S.abrupt("return",{data:Z.data.list,success:!0,total:Z.data.total});case 4:case"end":return S.stop()}},t)}));return function(t,h,K){return s.apply(this,arguments)}}(),pagination:(0,B.O)(),search:{collapsed:!1},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(t){var h=t.selectedRowKeys;return(0,a.jsx)(I.Z,{size:16,children:(0,a.jsx)(R.Z,{danger:!0,type:"primary",action:function(){return(0,l.$q)({id:h})},onSuccess:function(){var x,U;return!((x=i.current)===null||x===void 0)&&x.reloadAndRest&&((U=i.current)===null||U===void 0||U.reloadAndRest()),!0},onError:function(){var x,U;return!((x=i.current)===null||x===void 0)&&x.reset&&((U=i.current)===null||U===void 0||U.reset()),!0},confirm:"notification.confirm.title",children:"\u6279\u91CF\u5220\u9664"})})},tableExtraRender:function(){return(0,a.jsx)(D.Z,{mode:"horizontal",selectedKeys:["build"],items:[{label:(0,a.jsx)(r.Link,{to:"/image/list",replace:!0,children:"\u5168\u90E8\u955C\u50CF"}),key:"all"},{label:(0,a.jsx)(r.Link,{to:"/image/list/recycle",replace:!0,children:"\u6784\u5EFA\u4EFB\u52A1"}),key:"build"}]})}}),(0,a.jsx)(d.Z,{ref:v})]})}},18148:function(y,g,e){e.d(g,{$q:function(){return r},Fj:function(){return M},KG:function(){return P},KX:function(){return a},T8:function(){return n},Xn:function(){return A},ao:function(){return j},c5:function(){return W},c7:function(){return C}});var T=e(15009),u=e.n(T),f=e(99289),_=e.n(f),E=e(82346);function P(i){return O.apply(this,arguments)}function O(){return O=_()(u()().mark(function i(v){return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/app/image/get-list",{method:"POST",data:v}));case 1:case"end":return t.stop()}},i)})),O.apply(this,arguments)}function I(i){return m.apply(this,arguments)}function m(){return m=_asyncToGenerator(_regeneratorRuntime().mark(function i(v){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,request("/api/app/log/image-build",{method:"POST",data:v});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},i)})),m.apply(this,arguments)}function A(i){return L.apply(this,arguments)}function L(){return L=_()(u()().mark(function i(v){return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/app/image/get-list-build",{method:"POST",data:v}));case 1:case"end":return t.stop()}},i)})),L.apply(this,arguments)}function n(i){return D.apply(this,arguments)}function D(){return D=_()(u()().mark(function i(v){return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,E.request)("/api/app/image/get-build-task",{method:"POST",data:v});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},i)})),D.apply(this,arguments)}function r(i){return l.apply(this,arguments)}function l(){return l=_()(u()().mark(function i(v){return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,E.request)("/api/app/image/delete-build-task",{method:"POST",data:v});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},i)})),l.apply(this,arguments)}function j(i){return o.apply(this,arguments)}function o(){return o=_()(u()().mark(function i(v){return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,E.request)("/api/app/image/image-delete",{method:"POST",data:v});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},i)})),o.apply(this,arguments)}function C(){return R.apply(this,arguments)}function R(){return R=_()(u()().mark(function i(){return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,E.request)("/api/app/image/image-prune",{method:"POST"});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},i)})),R.apply(this,arguments)}function W(){return B.apply(this,arguments)}function B(){return B=_()(u()().mark(function i(){return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,E.request)("/api/app/image/build-prune",{method:"POST"});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},i)})),B.apply(this,arguments)}function M(i){return d.apply(this,arguments)}function d(){return d=_()(u()().mark(function i(v){return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,E.request)("/api/app/image/update-title",{method:"POST",data:v});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},i)})),d.apply(this,arguments)}function a(i){return c.apply(this,arguments)}function c(){return c=_()(u()().mark(function i(v){return u()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/app/image/tag-sync",{method:"POST",data:v}));case 1:case"end":return t.stop()}},i)})),c.apply(this,arguments)}},67255:function(y,g,e){e.d(g,{O:function(){return T},j:function(){return u}});function T(f){var _=localStorage.getItem("dpanel-pagesize");return _=="all"?!1:{current:f==null?void 0:f.page,showSizeChanger:!0,defaultPageSize:parseInt(_!=null?_:"20"),onChange:function(P,O){localStorage.setItem("dpanel-page-"+location.pathname.split("/").slice(-2).join("-"),"".concat(P))}}}function u(f){var _="dpanel-table-column-".concat(f),E={};if(localStorage.getItem(_)){var P;E=JSON.parse((P=localStorage.getItem(_))!==null&&P!==void 0?P:"{}")}return{defaultValue:E,onChange:function(I){localStorage.setItem("dpanel-table-column-".concat(f),JSON.stringify(I))}}}}}]);
