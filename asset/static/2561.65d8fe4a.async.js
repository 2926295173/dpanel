"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2561],{99861:function(I,D,r){var T=r(15009),n=r.n(T),E=r(64599),u=r.n(E),i=r(99289),M=r.n(i),O=r(5574),C=r.n(O),P=r(42119),b=r(83062),h=r(67294),R=r(92754),l=r(3393),U=r(184),s=r(38345),f=r(85893),g=(0,h.forwardRef)(function(p,d){(0,h.useImperativeHandle)(d,function(){return{start:function(){return B(!0),Z()},finish:function(){B(!1)}}});var c=(0,h.useState)(0),o=C()(c,2),v=o[0],a=o[1],t=(0,h.useRef)(),_=(0,h.useState)(!1),m=C()(_,2),e=m[0],B=m[1],Z=function(){var y=M()(n()().mark(function w(){var A,L,W,$,K,S,k;return n()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:L=0,W=u()(p.image),j.prev=2,W.s();case 4:if(($=W.n()).done){j.next=14;break}return S=$.value,a(L),(K=t.current)===null||K===void 0||K.setStart(S),j.next=10,(0,l.Gb)({tag:S,type:"pull"});case 10:k=j.sent,L++;case 12:j.next=4;break;case 14:j.next=19;break;case 16:j.prev=16,j.t0=j.catch(2),W.e(j.t0);case 19:return j.prev=19,W.f(),j.finish(19);case 22:(A=t.current)===null||A===void 0||A.setFinish(),a(L);case 24:case"end":return j.stop()}},w,null,[[2,16,19,22]])}));return function(){return y.apply(this,arguments)}}();return(0,f.jsxs)(U.a,{trigger:p.trigger,width:800,open:e,submitter:!1,title:"\u4E00\u952E\u62C9\u53D6\u955C\u50CF",onOpenChange:function(){var y=M()(n()().mark(function w(A){return n()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:B(A),A&&p.trigger&&Z();case 2:case"end":return W.stop()}},w)}));return function(w){return y.apply(this,arguments)}}(),drawerProps:{forceRender:!0},children:[(0,f.jsx)(s.Z,{children:(0,f.jsx)(P.Z,{current:v,items:p.image.map(function(y,w){return{title:(0,f.jsx)(b.Z,{title:y,children:y.length>15?y.substring(0,6)+" ... "+y.substring(y.length-6):y}),key:w}})})}),(0,f.jsx)(s.Z,{children:(0,f.jsx)(R.Z,{ref:t})})]})});D.Z=g},44771:function(I,D,r){r.d(D,{Z:function(){return u}});var T=r(64317),n=r(67294),E=r(85893);function u(i){return(0,E.jsx)(T.Z,{label:i.label,name:"restart",width:"sm",initialValue:i.defaultValue?i.defaultValue:"on-failure",options:[{value:"no",label:"\u4E0D\u91CD\u542F"},{value:"on-failure",label:"\u5931\u8D25\u540E\u91CD\u542F\uFF08\u9ED8\u8BA45\u6B21\uFF09"},{value:"unless-stopped",label:"\u672A\u624B\u52A8\u505C\u6B62\u5219\u91CD\u542F"},{value:"always",label:"\u4E00\u76F4\u91CD\u542F"}]})}},37413:function(I,D,r){r.d(D,{Z:function(){return U}});var T=r(19632),n=r.n(T),E=r(27496),u=r(58638),i=r(36693),M=r(35995),O=r(99611),C=r(38345),P=r(42075),b=r(66309),h=r(55241),R=r(67294),l=r(85893);function U(s){var f=[];s.publicPort&&(f=n()(s.publicPort)),s.privatePort&&(f=[].concat(n()(f),n()(s.privatePort)));var g=(0,l.jsxs)(C.Z,{direction:s.layout=="inline"?"row":"column",style:{width:s.layout!="inline"?500:"auto"},ghost:!0,children:[f.length>0&&(0,l.jsx)(C.Z,{title:(0,l.jsx)(E.Z,{}),subTitle:"\u7ED1\u5B9A\u7AEF\u53E3",ghost:s.ghost,children:f.map(function(p,d){var c,o=(c=s.serverIp)!==null&&c!==void 0?c:"localhost";if(o!=""&&o.indexOf("http")===-1&&o.indexOf(":")>-1&&(o="[".concat(o,"]")),o==""){var v=document.location.protocol+"//"+document.location.hostname;o=v}return o==""&&(o=p.IP),(0,l.jsx)(P.Z,{size:"large",wrap:!0,children:(0,l.jsx)(b.Z,{color:p.PublicPort?"#2db7f5":"warning",icon:p.PublicPort?(0,l.jsx)(u.Z,{}):"",style:{marginBottom:5,width:210},children:p.PublicPort?(0,l.jsx)("a",{href:"".concat(o.indexOf("http")===0?o:"http://"+o,":").concat(p.PublicPort),target:"_blank",children:"".concat(p.PublicPort?p.IP+":"+p.PublicPort+" -> ":"").concat(p.PrivatePort,"/").concat(p.Type)},"link".concat(d)):"".concat(p.PrivatePort,"/").concat(p.Type)})},"space".concat(d))})}),s.domain&&s.domain.length>0&&(0,l.jsx)(C.Z,{title:(0,l.jsx)(i.Z,{}),subTitle:"\u7ED1\u5B9A\u57DF\u540D",ghost:s.ghost,children:(0,l.jsx)(P.Z,{wrap:!0,style:{textAlign:"left"},children:s.domain&&s.domain.map(function(p,d){return(0,l.jsx)(b.Z,{color:"blue",icon:(0,l.jsx)(u.Z,{}),children:(0,l.jsx)("a",{href:p,target:"_blank",children:p})},"domain".concat(d))})})})]});return s.showInDetail?g:(0,l.jsx)(h.Z,{placement:"right",content:g,children:(0,l.jsxs)(P.Z,{direction:"vertical",children:[s.privatePort&&s.privatePort.length>0&&(0,l.jsxs)(b.Z,{color:"warning",icon:(0,l.jsx)(M.Z,{}),children:["\u5185\u90E8\u7AEF\u53E3: ",s.privatePort.length]}),s.publicPort&&s.publicPort.length>0&&(0,l.jsxs)(b.Z,{color:"#2db7f5",icon:(0,l.jsx)(O.Z,{}),children:["\u5BF9\u5916\u7AEF\u53E3: ",s.publicPort.length]}),s.domain&&s.domain.length>0&&(0,l.jsx)(b.Z,{color:"blue",icon:(0,l.jsx)(i.Z,{}),children:s.domainTitle?s.domainTitle:"\u7ED1\u5B9A\u57DF\u540D: ".concat(s.domain.length)})]})})}},92754:function(I,D,r){var T=r(5574),n=r.n(T),E=r(67294),u=r(82346),i=r(38703),M=r(85893),O=(0,E.forwardRef)(function(C,P){var b=(0,E.useState)(""),h=n()(b,2),R=h[0],l=h[1];(0,E.useImperativeHandle)(P,function(){return{setFinish:function(){p({finish:{downloading:100,extracting:100}})},setStart:function(c){c&&l(c),p({start:{downloading:0,extracting:0}})}}});var U=(0,u.useModel)("subscriber");U.addDataHandler("image:pull:"+R,function(d){p(d.data)});var s=(0,E.useState)(),f=n()(s,2),g=f[0],p=f[1];return(0,E.useEffect)(function(){p({start:{downloading:0,extracting:0}})},[]),(0,M.jsx)(M.Fragment,{children:g&&Object.keys(g).map(function(d){return(0,M.jsx)(i.Z,{percent:g[d].downloading,success:{percent:g[d].extracting}},d)})})});D.Z=O},78451:function(I,D,r){r.d(D,{Z:function(){return E}});var T=r(67294),n=r(85893);function E(u){return(0,n.jsx)("span",{style:{width:u.width?u.width:"auto",wordBreak:"break-word"},children:u.content})}},62597:function(I,D,r){r.d(D,{$G:function(){return M},Ct:function(){return f},Tb:function(){return b},XH:function(){return R},cl:function(){return C},iE:function(){return U},xb:function(){return p},ze:function(){return v}});var T=r(15009),n=r.n(T),E=r(99289),u=r.n(E),i=r(82346);function M(t){return O.apply(this,arguments)}function O(){return O=u()(n()().mark(function t(_){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/site/create-by-image",{method:"POST",data:_}));case 1:case"end":return e.stop()}},t)})),O.apply(this,arguments)}function C(t){return P.apply(this,arguments)}function P(){return P=u()(n()().mark(function t(_){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/site/get-list",{method:"POST",data:_}));case 1:case"end":return e.stop()}},t)})),P.apply(this,arguments)}function b(t){return h.apply(this,arguments)}function h(){return h=u()(n()().mark(function t(_){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _.download=!1,e.next=3,(0,i.request)("/api/app/log/run",{method:"POST",data:_});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},t)})),h.apply(this,arguments)}function R(t){return l.apply(this,arguments)}function l(){return l=u()(n()().mark(function t(_){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _.download=!0,e.next=3,(0,i.request)("/api/app/log/run",{method:"POST",data:_,responseType:"blob"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},t)})),l.apply(this,arguments)}function U(t){return s.apply(this,arguments)}function s(){return s=u()(n()().mark(function t(_){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.request)("/api/app/site/get-detail",{data:_,method:"POST"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)})),s.apply(this,arguments)}function f(t){return g.apply(this,arguments)}function g(){return g=u()(n()().mark(function t(_){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/container/delete",{method:"POST",data:_}));case 1:case"end":return e.stop()}},t)})),g.apply(this,arguments)}function p(t){return d.apply(this,arguments)}function d(){return d=u()(n()().mark(function t(_){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/site/delete",{method:"POST",data:_}));case 1:case"end":return e.stop()}},t)})),d.apply(this,arguments)}function c(t){return o.apply(this,arguments)}function o(){return o=_asyncToGenerator(_regeneratorRuntime().mark(function t(_){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request("/api/app/site/update-title",{method:"POST",data:_});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)})),o.apply(this,arguments)}function v(t){return a.apply(this,arguments)}function a(){return a=u()(n()().mark(function t(_){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/container/ignore",{method:"POST",data:_}));case 1:case"end":return e.stop()}},t)})),a.apply(this,arguments)}},60335:function(I,D,r){r.d(D,{IE:function(){return C},IW:function(){return M},KK:function(){return U},LJ:function(){return f},RF:function(){return c},Re:function(){return p},aF:function(){return v},eE:function(){return R},jV:function(){return b}});var T=r(15009),n=r.n(T),E=r(99289),u=r.n(E),i=r(82346);function M(t){return O.apply(this,arguments)}function O(){return O=u()(n()().mark(function t(_){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/container/status",{method:"POST",data:_}));case 1:case"end":return e.stop()}},t)})),O.apply(this,arguments)}function C(t){return P.apply(this,arguments)}function P(){return P=u()(n()().mark(function t(_){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/container/get-list",{data:_,method:"POST"}));case 1:case"end":return e.stop()}},t)})),P.apply(this,arguments)}function b(t){return h.apply(this,arguments)}function h(){return h=u()(n()().mark(function t(_){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/container/get-detail",{data:_,method:"POST"}));case 1:case"end":return e.stop()}},t)})),h.apply(this,arguments)}function R(t){return l.apply(this,arguments)}function l(){return l=u()(n()().mark(function t(_){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/container/update",{data:_,method:"POST"}));case 1:case"end":return e.stop()}},t)})),l.apply(this,arguments)}function U(){return s.apply(this,arguments)}function s(){return s=u()(n()().mark(function t(){return n()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,i.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return m.stop()}},t)})),s.apply(this,arguments)}function f(t){return g.apply(this,arguments)}function g(){return g=u()(n()().mark(function t(_){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/container/export",{method:"POST",data:_,responseType:"blob"}));case 1:case"end":return e.stop()}},t)})),g.apply(this,arguments)}function p(t){return d.apply(this,arguments)}function d(){return d=u()(n()().mark(function t(_){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/container/commit",{method:"POST",data:_}));case 1:case"end":return e.stop()}},t)})),d.apply(this,arguments)}function c(t){return o.apply(this,arguments)}function o(){return o=u()(n()().mark(function t(_){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/container/upgrade",{method:"POST",data:_}));case 1:case"end":return e.stop()}},t)})),o.apply(this,arguments)}function v(t){return a.apply(this,arguments)}function a(){return a=u()(n()().mark(function t(_){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/container/copy",{method:"POST",data:_}));case 1:case"end":return e.stop()}},t)})),a.apply(this,arguments)}},3393:function(I,D,r){r.d(D,{Gb:function(){return C},Pn:function(){return R},Rb:function(){return U},YU:function(){return M},ZQ:function(){return p},_U:function(){return b},cd:function(){return f}});var T=r(15009),n=r.n(T),E=r(99289),u=r.n(E),i=r(82346);function M(c){return O.apply(this,arguments)}function O(){return O=u()(n()().mark(function c(o){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("/api/app/image/get-detail",{method:"POST",data:o}));case 1:case"end":return a.stop()}},c)})),O.apply(this,arguments)}function C(c){return P.apply(this,arguments)}function P(){return P=u()(n()().mark(function c(o){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("/api/app/image/tag-remote",{method:"POST",data:o}));case 1:case"end":return a.stop()}},c)})),P.apply(this,arguments)}function b(c){return h.apply(this,arguments)}function h(){return h=u()(n()().mark(function c(o){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("/api/app/image/tag-add",{method:"POST",data:o}));case 1:case"end":return a.stop()}},c)})),h.apply(this,arguments)}function R(c){return l.apply(this,arguments)}function l(){return l=u()(n()().mark(function c(o){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("/api/app/image/tag-delete",{method:"POST",data:o}));case 1:case"end":return a.stop()}},c)})),l.apply(this,arguments)}function U(c){return s.apply(this,arguments)}function s(){return s=u()(n()().mark(function c(o){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("/api/app/image/export",{method:"POST",data:o,responseType:"blob"}));case 1:case"end":return a.stop()}},c)})),s.apply(this,arguments)}function f(c){return g.apply(this,arguments)}function g(){return g=u()(n()().mark(function c(o){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("/api/pro/image/get-remote-tag",{method:"POST",data:o}));case 1:case"end":return a.stop()}},c)})),g.apply(this,arguments)}function p(c){return d.apply(this,arguments)}function d(){return d=u()(n()().mark(function c(o){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("/api/app/image/check-upgrade",{method:"POST",data:o}));case 1:case"end":return a.stop()}},c)})),d.apply(this,arguments)}}}]);
