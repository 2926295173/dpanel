"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4106],{91058:function(S,v,t){var E=t(5574),a=t.n(E),D=t(89035),u=t(38345),s=t(17186),C=t(24739),p=t(5966),O=t(42075),d=t(28036),g=t(85576),m=t(67294),j=t(95089),w=t(89063),i=t(85893),T="docker-image",A=(0,m.forwardRef)(function(l,y){var P=(0,m.useState)(T),I=a()(P,2),h=I[0],f=I[1],_=(0,m.useRef)(),U=(0,m.useState)(""),M=a()(U,2),k=M[0],W=M[1],x=function(){h!="code"?f("code"):f(T)};(0,m.useImperativeHandle)(y,function(){return{addEnvItem:function(n,r){var o,e=(o=_.current)===null||o===void 0?void 0:o.getList(),b=!1;if(e==null||e.map(function(R){if(R.name==n){b=!0;return}}),!b){var L;(L=_.current)===null||L===void 0||L.add({name:n,value:r})}},clear:function(){var n;(n=_.current)===null||n===void 0||(n=n.getList())===null||n===void 0||n.map(function(r,o){var e;(e=_.current)===null||e===void 0||e.remove(o)})}}});function B(c){try{var n,r;c==""&&(c=K());for(var o=(n=(r=_.current)===null||r===void 0||(r=r.getList())===null||r===void 0?void 0:r.length)!==null&&n!==void 0?n:0,e=o;e>=0;e--){var b;(b=_.current)===null||b===void 0||b.remove(e)}var L=c.split(`
`),R=0;L.map(function(F){var Z,G=F.split("=");G.length<2||((Z=_.current)===null||Z===void 0||Z.add({name:G[0],value:G.slice(1).join("=")},R),R++)})}catch(F){console.log(F)}}function K(){if(_&&_.current&&_.current.getList){var c,n=(c=_.current)===null||c===void 0?void 0:c.getList();if(n){var r=[];return n.map(function(o){r.push("".concat(o.name,"=").concat(o.value))}),r.join(`
`)}else return""}else return""}return(0,i.jsxs)(u.Z,{ghost:l.showCardGhost,title:l.label?l.label:null,headerBordered:!0,extra:(l.showCodeMode||l.showImportButton)&&(0,i.jsxs)(O.Z,{children:[l.showImportButton&&(0,i.jsx)("div",{style:{marginBottom:"-25px"},children:(0,i.jsx)(w.Z,{title:"\u5BFC\u5165 env \u6587\u4EF6",onImport:function(n){return B(n),!0},onLoad:function(n){if(n.indexOf("=")<0)throw new Error("\u5BFC\u5165env\u6587\u4EF6\u9519\u8BEF");return!0}})}),l.showCodeMode?(0,i.jsx)(d.ZP,{icon:(0,i.jsx)(D.Z,{}),type:h=="code"?"primary":"default",onClick:x,children:"\u4EE3\u7801\u6A21\u5F0F"},"code"):""]}),children:[(0,i.jsx)(s.u,{name:l.name?l.name:"environment",actionRef:_,creatorButtonProps:l.showAddButton?{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u73AF\u5883\u53D8\u91CF"}:!1,copyIconProps:!1,min:100,label:l.listLabel,children:function(n,r,o){var e=o.getCurrentRowData();return(0,i.jsxs)(C.UW,{children:[(0,i.jsx)(p.Z,{width:l.showInDrawer?"sm":"md",name:"name",label:"\u53D8\u91CF\u540D",required:!0,rules:[{required:!0}],disabled:l.showDisableName,placeholder:"\u8F93\u5165\u53D8\u91CF\u540D\u79F0"}),(0,i.jsx)(p.Z,{width:l.showInDrawer?"sm":"md",name:"value",label:"\u53D8\u91CF\u503C",rules:[{required:!!l.requireValue}],disabled:l.showDisableValue,placeholder:e&&e.label?e.label:"\u8F93\u5165\u53D8\u91CF\u503C"})]})}}),(0,i.jsx)(g.Z,{width:"800px",open:h=="code",onCancel:function(){return f("docker-image")},onOk:function(){B(k),f("docker-image")},children:(0,i.jsx)(j.ZP,{onChange:function(n){return W(n)},value:K(),height:"680px",theme:"light"})})]})});v.Z=A},89063:function(S,v,t){t.d(v,{Z:function(){return O}});var E=t(24963),a=t(88484),D=t(62370),u=t(31418),s=t(28036),C=t(67294),p=t(85893);function O(d){var g=(0,C.useContext)(E.Z),m=g.message,j=g.notice,w=g.lang,i=(0,C.useRef)(null),T=u.Z.useApp(),A=function(){i.current&&(i.current.click(),i.current.onchange=function(y){if(!y||!y.target)return"";var P=new FileReader;P.onload=function(h){var f,_,U=(f=h.target)===null||f===void 0?void 0:f.result;if(d.onLoad)try{d.onLoad&&d.onLoad(U)}catch(M){j.error(M);return}typeof d.onImport=="function"&&(m.success("\u6210\u529F\u5BFC\u5165 ".concat(d.title)),d.onImport(U)),(_=i.current)!==null&&_!==void 0&&_.value&&(i.current.value="")};var I=y.target;if(I.files)try{P.readAsText(I.files[0])}catch(h){j.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(D.Z,{children:(0,p.jsx)(s.ZP,{icon:(0,p.jsx)(a.Z,{}),block:!0,onClick:A,children:d.title})}),(0,p.jsx)("input",{style:{display:"none"},type:"file",ref:i,name:"importFileInput"})]})}},24963:function(S,v,t){var E=t(67294),a=(0,E.createContext)({});v.Z=a},90098:function(S,v,t){t.d(v,{CT:function(){return j},GG:function(){return I},MG:function(){return k},Oh:function(){return A},Pn:function(){return g},U_:function(){return U},VN:function(){return f},iE:function(){return K},ik:function(){return i},im:function(){return C},mg:function(){return y},pm:function(){return O},xC:function(){return x}});var E=t(15009),a=t.n(E),D=t(99289),u=t.n(D),s=t(63713);function C(n){return p.apply(this,arguments)}function p(){return p=u()(a()().mark(function n(r){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/app/compose/create",{method:"POST",data:r}));case 1:case"end":return e.stop()}},n)})),p.apply(this,arguments)}function O(n){return d.apply(this,arguments)}function d(){return d=u()(a()().mark(function n(r){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/app/compose/get-list",{method:"POST",data:r}));case 1:case"end":return e.stop()}},n)})),d.apply(this,arguments)}function g(n){return m.apply(this,arguments)}function m(){return m=u()(a()().mark(function n(r){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.id=String(r.id),e.abrupt("return",(0,s.request)("/api/app/compose/get-task",{method:"POST",data:r}));case 2:case"end":return e.stop()}},n)})),m.apply(this,arguments)}function j(n){return w.apply(this,arguments)}function w(){return w=u()(a()().mark(function n(r){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.id=String(r.id),e.abrupt("return",(0,s.request)("/api/app/compose/get-detail",{method:"POST",data:r}));case 2:case"end":return e.stop()}},n)})),w.apply(this,arguments)}function i(n){return T.apply(this,arguments)}function T(){return T=u()(a()().mark(function n(r){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/app/compose/delete",{method:"POST",data:r}));case 1:case"end":return e.stop()}},n)})),T.apply(this,arguments)}function A(n){return l.apply(this,arguments)}function l(){return l=u()(a()().mark(function n(r){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.id=String(r.id),e.abrupt("return",(0,s.request)("/api/app/compose/container-deploy",{method:"POST",data:r}));case 2:case"end":return e.stop()}},n)})),l.apply(this,arguments)}function y(n){return P.apply(this,arguments)}function P(){return P=u()(a()().mark(function n(r){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.id=String(r.id),e.abrupt("return",(0,s.request)("/api/app/compose/container-destroy",{method:"POST",data:r}));case 2:case"end":return e.stop()}},n)})),P.apply(this,arguments)}function I(n){return h.apply(this,arguments)}function h(){return h=u()(a()().mark(function n(r){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.id=String(r.id),e.abrupt("return",(0,s.request)("/api/app/compose/container-ctrl",{method:"POST",data:r}));case 2:case"end":return e.stop()}},n)})),h.apply(this,arguments)}function f(n){return _.apply(this,arguments)}function _(){return _=u()(a()().mark(function n(r){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.id=String(r.id),e.abrupt("return",(0,s.request)("/api/app/compose/container-log",{method:"POST",data:r}));case 2:case"end":return e.stop()}},n)})),_.apply(this,arguments)}function U(n){return M.apply(this,arguments)}function M(){return M=u()(a()().mark(function n(r){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/app/compose/container-process-kill",{method:"POST",data:r}));case 1:case"end":return e.stop()}},n)})),M.apply(this,arguments)}function k(n){return W.apply(this,arguments)}function W(){return W=u()(a()().mark(function n(r){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/app/compose/get-from-uri",{method:"POST",data:r}));case 1:case"end":return e.stop()}},n)})),W.apply(this,arguments)}function x(n){return B.apply(this,arguments)}function B(){return B=u()(a()().mark(function n(r){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/app/compose/parse",{method:"POST",data:r}));case 1:case"end":return e.stop()}},n)})),B.apply(this,arguments)}function K(n){return c.apply(this,arguments)}function c(){return c=u()(a()().mark(function n(r){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/api/common/store/deploy",{method:"POST",data:r}));case 1:case"end":return e.stop()}},n)})),c.apply(this,arguments)}},79245:function(S,v,t){t.d(v,{m:function(){return D}});var E=t(64599),a=t.n(E);function D(u){var s=[];if(!u||u=="")return s;var C=u.matchAll(/\$\{(\w+)[:-]?(.*)\}/g),p=a()(C),O;try{for(p.s();!(O=p.n()).done;){var d=O.value;s.push({name:d[1],value:d[2]?d[2].indexOf("-")==0?d[2].substring(1):d[2]:""})}}catch(g){p.e(g)}finally{p.f()}return s}}}]);
