"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4316],{36435:function(Be,te,r){var oe=r(15009),c=r.n(oe),de=r(64599),p=r.n(de),F=r(99289),ce=r.n(F),re=r(9783),D=r.n(re),se=r(5574),T=r.n(se),Q=r(67294),me=r(184),ge=r(38345),fe=r(97269),_e=r(97321),ie=r(97462),J=r(64317),$=r(5966),Pe=r(86615),z=r(68602),Y=r(83622),I=r(83403),Se=r(24963),k=r(1699),_=r(29177),O=r(1883),V=r(43425),l=r(44349),Ie=r(3616),Me=r(36146),S=r(85893),Ke=(0,Q.forwardRef)(function(G,ae){var X=(0,Q.useState)(!1),C=T()(X,2),ve=C[0],Ee=C[1],q=(0,Q.useRef)(),le=(0,Q.useContext)(Se.Z),a=le.message,$e=(0,Q.useState)([]),Ue=T()($e,2),Ce=Ue[0],A=Ue[1],U=new Me.Uo("components.permissionButton"),We=D()(D()(D()(D()(D()({},I.W6.CONTAINER,"Id"),I.W6.APPSTORE,"name"),I.W6.COMPOSE,"name"),I.W6.REGISTRY,"serverAddress"),I.W6.DOCKER_ENV,"name"),ke=D()(D()(D()(D()(D()({},I.W6.CONTAINER,"name"),I.W6.APPSTORE,"name"),I.W6.COMPOSE,"name"),I.W6.REGISTRY,"title"),I.W6.DOCKER_ENV,"title"),Ae=We[G.type],xe=ke[G.type],we=G.selected.map(function(y){return y[We[G.type]]});return Q.useEffect(function(){if(ve){if(!G.selected||G.selected.length==0){a.error(Me.FD.format("message.noDataSelect")),Ee(!1);return}(0,z.dP)({permission:{uri:G.type,key:Ae,value:we}}).then(function(y){var E;(E=q.current)===null||E===void 0||E.setFieldValue("list",Object.keys(y.data.list).map(function(R){return{name:R,type:y.data.list[R].type,users:y.data.list[R].users}}))}),(0,z.lE)().then(function(y){var E,R=(E=y.data)===null||E===void 0||(E=E.list)===null||E===void 0?void 0:E.map(function(P){return{label:P.username,value:P.username}});A(R)})}},[ve]),(0,S.jsx)(k.u,{access:["canSeeEnableEe","canSeeFounder","canSeeManage"],children:(0,S.jsxs)(me.a,{name:"create",title:U.format("drawerTitle"),open:ve,onOpenChange:function(E){if(!E){var R;(R=q.current)===null||R===void 0||R.resetFields()}Ee(E)},drawerProps:{forceRender:!0,width:Ie.R_},formRef:q,trigger:(0,S.jsx)(Y.ZP,{icon:(0,S.jsx)(_.Z,{}),children:U.format("drawerTriggerButton")}),onFinish:function(){var y=ce()(c()().mark(function E(R){var P,b,u;return c()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:P=p()(R.list),j.prev=1,P.s();case 3:if((b=P.n()).done){j.next=9;break}return u=b.value,j.next=7,(0,z.Db)({usernames:u.users,permissionType:u.type,permission:{uri:G.type,key:Ae,showKey:xe,value:[u.name]}});case 7:j.next=3;break;case 9:j.next=14;break;case 11:j.prev=11,j.t0=j.catch(1),P.e(j.t0);case 14:return j.prev=14,P.f(),j.finish(14);case 17:a.success(Me.FD.format("finish")),Ee(!1),G.onSuccess();case 20:case"end":return j.stop()}},E,null,[[1,11,14,17]])}));return function(E){return y.apply(this,arguments)}}(),children:[(0,S.jsxs)(ge.Z,{ghost:!0,title:(0,S.jsx)(O.Z,{}),subTitle:U.format("batchTitle"),children:[(0,S.jsx)(fe.A.Item,{name:"type",style:{marginBottom:0},children:(0,S.jsx)(_e.Z.Group,{defaultValue:"admin",onChange:function(E){var R,P,b=(R=q.current)===null||R===void 0?void 0:R.getFieldValue("list");b.forEach(function(u){u.type=E,u.users=[]}),(P=q.current)===null||P===void 0||P.setFieldValue("list",b)},children:["admin","restricted","public"].map(function(y){return(0,S.jsx)(_e.Z,{style:{width:240},title:U.format("dataTypeOption.".concat(y)),description:U.format("dataTypeOptionDesc.".concat(y)),value:y},y)})})}),(0,S.jsx)(ie.Z,{name:["type"],children:function(E){var R=E.type;if(R==="restricted")return(0,S.jsx)(J.Z,{mode:"multiple",name:"usernames",label:U.format("formUsernames"),onChange:function(b){var u,x,j=(u=q.current)===null||u===void 0?void 0:u.getFieldValue("list");j.forEach(function(w){w.users=b}),(x=q.current)===null||x===void 0||x.setFieldValue("list",j)},rules:[{required:!0}],request:ce()(c()().mark(function P(){var b,u,x;return c()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(!(Ce.length>0)){w.next=2;break}return w.abrupt("return",Ce);case 2:return w.next=4,(0,z.lE)();case 4:return u=w.sent,x=(b=u.data)===null||b===void 0||(b=b.list)===null||b===void 0?void 0:b.map(function(Ze){return{label:Ze.username,value:Ze.username}}),A(x),w.abrupt("return",x);case 8:case"end":return w.stop()}},P)}))})}})]}),(0,S.jsx)(ge.Z,{ghost:!0,title:(0,S.jsx)(V.Z,{}),subTitle:U.format("dataTitle"),children:(0,S.jsx)(l.Z,{name:"list",hideCopyButton:!0,gap:10,items:[{name:"name",label:U.format("dataName"),render:function(E,R,P){var b=P.getCurrentRowData();return(0,S.jsx)($.Z,{disabled:!0,label:U.format("dataName"),width:"sm",name:"name"})}},{name:"type",label:U.format("dataType"),render:function(E,R,P){var b=P.getCurrentRowData();return(0,S.jsx)(Pe.Z.Group,{label:U.format("dataType"),name:"type",radioType:"button",options:["admin","public","restricted"].map(function(u){return{label:U.format("dataTypeOption.".concat(u)),value:u}})})}},{name:"users",label:U.format("dataUsers"),render:function(E,R,P){return(0,S.jsx)(ie.Z,{name:["type"],children:function(u){var x=u.type;if(x=="restricted")return(0,S.jsx)(J.Z,{width:"sm",mode:"tags",name:"users",label:U.format("dataUsers"),options:Ce})}})}}]})})]})})});te.Z=Ke},14668:function(Be,te,r){r.r(te),r.d(te,{default:function(){return ur}});var oe=r(64599),c=r.n(oe),de=r(15009),p=r.n(de),F=r(19632),ce=r.n(F),re=r(99289),D=r.n(re),se=r(5574),T=r.n(se),Q=r(90078),me=r(83622),ge=r(34041),fe=r(56729),_e=r(97269),ie=r(62370),J=r(42075),$=r(25593),Pe=r(40411),z=r(96074),Y=r(83062),I=r(84567),Se=r(50136),k=r(82346),_=r(1883),O=r(89035),V=r(95591),l=r(86548),Ie=r(74842),Me=r(87784),S=r(33160),Ke=r(30159),G=r(94359),ae=r(13822),X=r(80821),C=r(67294),ve=r(62597),Ee=r(87662),q=r(16165),le=r(5251),a=r(85893),$e=function(){return(0,a.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18403",children:(0,a.jsx)("path",{d:"M224 192v64H96v576h128v64h64v-64h64v64h64v-64h64v64h64v-64h64v64h64v-64h64v64h64v-64h128V256h-128V192h-64v64h-64V192h-64v64h-64V192h-64v64h-64V192h-64v64H288V192z m-64 128h704v448H160z m96 64c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32zM256 512c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m512 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32zM256 640c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z","p-id":"18404"})})},Ue=function(){return(0,a.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18546",children:(0,a.jsx)("path",{d:"M64 224v576h416v-32c0-17.76 14.24-32 32-32 17.76 0 32 14.24 32 32v32h416V224z m64 64h768v288H128z m64 64v160h192v-160z m224 0v160h192v-160z m224 0v160h192v-160zM256 416h64v32H256z m224 0h64v32h-64z m224 0h64v32h-64zM128 640h768v96h-300.992c-14.144-35.52-42.752-64-83.008-64-40.256 0-68.864 28.48-83.008 64H128z","p-id":"18547"})})};function Ce(B){var pe,M,be,je,Te,Le;return(0,a.jsx)(a.Fragment,{children:B.value&&B.value.memory&&B.value.memory.out>0?(0,a.jsxs)(J.Z,{children:[(0,a.jsxs)(Y.Z,{title:"Cpu: ".concat((pe=B.value)===null||pe===void 0?void 0:pe.cpu.toFixed(2),"%"),children:[(0,a.jsx)(q.Z,{component:$e,style:{width:15,lineHeight:20}})," ","".concat((M=B.value)===null||M===void 0?void 0:M.cpu.toFixed(2),"%")]}),(0,a.jsxs)(Y.Z,{title:"Memory: ".concat((0,le.FI)((be=B.value)===null||be===void 0?void 0:be.memory.in)," / ").concat((0,le.FI)((je=B.value)===null||je===void 0?void 0:je.memory.out)),children:[(0,a.jsx)(q.Z,{component:Ue,style:{width:15,lineHeight:20}})," ","".concat((((Te=B.value)===null||Te===void 0?void 0:Te.memory.in)/((Le=B.value)===null||Le===void 0?void 0:Le.memory.out)*100).toFixed(2),"%")]})]}):""})}var A=r(67255),U=r(37413),We=r(46357),ke=r(99922),Ae=r(83403),xe=r(20578),we=r(99861),y=r(78914),E=r(29453),R=r(8287),P=r(93362),b=r(78451),u=r(36146),x=r(36435),j=r(1699),w=r(96486),Ze=r.n(w),ue=r(55375);function ur(){var B=(0,k.useLocation)(),pe=(0,k.useAccess)(),M=(0,C.useRef)(),be=(0,C.useState)(""),je=T()(be,2),Te=je[0],Le=je[1],or=(0,C.useState)(1),He=T()(or,2),H=He[0],ee=He[1],dr=(0,C.useState)([]),Qe=T()(dr,2),De=Qe[0],cr=Qe[1],mr=(0,C.useState)(),Je=T()(mr,2),Oe=Je[0],fr=Je[1],vr=(0,C.useState)([]),Ye=T()(vr,2),Xe=Ye[0],pr=Ye[1],qe=(0,C.useRef)(),er=(0,C.useRef)(),rr=(0,C.useRef)(),ar=(0,C.useRef)(),nr=(0,C.useRef)(),Ne=(0,C.useRef)(),tr=(0,C.useRef)(),sr=new u.Uo("components.appDetail.appDetailQuickManage");return(0,C.useEffect)(function(){(0,Ee.K3)().then(function(h){var o;Le((o=h.data.serverUrl)!==null&&o!==void 0?o:"")}),!pe.canSeeEnableCe&&(0,xe.q)().then(function(h){fr(h.data)})},[]),(0,C.useEffect)(function(){var h;!((h=M.current)===null||h===void 0)&&h.reloadAndRest&&M.current.reloadAndRest().then(function(){var o,s;!((o=M.current)===null||o===void 0)&&o.setPageInfo&&M.current.setPageInfo({current:(0,A.G$)(ue.Dc,(s=M.current)===null||s===void 0?void 0:s.pageInfo)})})},[H]),(0,C.useEffect)(function(){var h,o;B.state&&!((h=M.current)===null||h===void 0)&&h.setPageInfo&&M.current.setPageInfo({current:(0,A.G$)(ue.Dc,(o=M.current)===null||o===void 0?void 0:o.pageInfo)})},[B.state,M.current]),(0,a.jsxs)(Q._z,{header:{extra:[(0,a.jsx)(j.u,{access:"canSeeContainerListManageCreate",children:(0,a.jsx)(k.Link,{to:"/app/create/image",children:(0,a.jsx)(me.ZP,{type:"primary",children:u.Ob.format("container.create")})})},"create")]},children:[(0,a.jsx)(We.Z,{ref:qe,onFinish:function(){ee(H+1)},onUpgradeFinish:function(){ee(H+1)}}),(0,a.jsx)(ke.Z,{showFileExplorer:!0,ref:er}),(0,a.jsx)(R.Z,{ref:rr}),(0,a.jsx)(we.Z,{ref:Ne,finishAutoHide:!0}),(0,a.jsx)(y.Z,{ref:tr}),(0,a.jsx)(P.Z,{showConsole:!0,ref:ar}),(0,a.jsx)(fe.Z,{actionRef:M,scroll:{x:"max-content"},onChange:function(o,s,g){!Ze().isArray(g)&&(0,A.LX)(ue.Dc,g.columnKey,g.order),(0,A.MJ)(ue.Dc,o.current)},columns:[{key:"title",title:u.FD.format("listTitle"),width:300,dataIndex:"siteTitle",sorter:function(o,s){return o.Names[0].localeCompare(s.Names[0])},defaultSortOrder:(0,A.rj)(ue.Dc,"title"),sortDirections:A.h5,render:function(o,s,g,f,n){var t=(0,le.fi)(s.Names[0],"/");return(0,a.jsxs)(J.Z,{direction:"vertical",children:[(0,a.jsx)($.Z.Link,{onClick:function(){var d;(d=qe.current)===null||d===void 0||d.show(s.Id)},children:(0,a.jsx)(b.Z,{content:t})}),!pe.canSeeEnableCe&&Oe&&Oe.container&&Oe.container.find(function(i){return i.id==s.Id})&&(0,a.jsx)(Pe.Z,{count:"new"})]})}},{title:u.FD.format("listTag"),hidden:!0,dataIndex:"tag",renderFormItem:function(o,s,g,f){return(0,a.jsx)(ge.Z,{onSelect:function(t){g.submit()},onDeselect:function(){g.submit()},mode:"multiple",popupMatchSelectWidth:!1,options:Xe&&Object.entries(Xe.reduce(function(n,t){var i=t.group||"tag";return n[i]||(n[i]=[]),n[i].push(t),n},{})).map(function(n){var t=T()(n,2),i=t[0],d=t[1];return{label:i,title:i,options:d.map(function(L){return{label:L.tag,value:L.tag}})}})})}},{key:"ports",title:u.FD.format("listAccess"),tooltip:u.FD.format("listAccessTip"),width:150,dataIndex:"ports",search:!1,render:function(o,s,g,f){var n,t=[],i=[];return s!=null&&s.Ports&&s.Ports.map(function(d,L){d.PublicPort?t.push(d):i.push(d)}),(0,a.jsx)(U.Z,{publicPort:t,privatePort:i,domain:(n=s.DPExtend)===null||n===void 0?void 0:n.domainList,serverIp:Te})}},{title:u.FD.format("listUsage"),width:200,search:!1,key:"usage",sorter:function(o,s){var g={},f={};if(De){var n,t;g=(n=De.find(function(i){return o.Id.startsWith(i.container)}))!==null&&n!==void 0?n:{},f=(t=De.find(function(i){return s.Id.startsWith(i.container)}))!==null&&t!==void 0?t:{}}return JSON.stringify(g).localeCompare(JSON.stringify(f))},defaultSortOrder:(0,A.rj)(ue.Dc,"usage"),sortDirections:A.h5,render:function(o,s,g,f,n){if(!De||De.length<=0)return"";var t={};return De.filter(function(i){s.Id.indexOf(i.container)==0&&(t=i)}),(0,a.jsx)(Ce,{value:t})}},{title:u.FD.format("listRunStatus"),key:"status",dataIndex:["container","status"],search:!1,width:130,render:function(o,s,g,f){var n="",t={};if(s.State.includes("(")){var i=s.State.indexOf("(");i>-1&&(n="compose.".concat(s.State.slice(0,i))),t={count:s.State.slice(i+1,s.State.length-1)}}else n="container.".concat(s.State),s.Status.indexOf("(healthy)")>-1?n="container.healthy":s.Status.indexOf("(unhealthy)")>-1&&(n="container.unhealthy");return(0,a.jsx)(G.Z,{statusValue:t,status:n,tip:"".concat(s.State," ").concat(s.Status)})}},{title:u.FD.format("listImageName"),key:"image",search:!1,width:150,render:function(o,s,g,f){return(0,a.jsx)("span",{style:{wordBreak:"break-word"},children:(0,a.jsx)($.Z.Link,{onClick:function(){var t;(t=tr.current)===null||t===void 0||t.show(s.Image)},children:s.Image})})}},{key:"created",search:!1,title:u.FD.format("listCreatedAt"),width:170,dataIndex:["Created"],render:function(o,s,g,f,n){return(0,le.ZM)(s.Created*1e3)},sorter:function(o,s){return new Date(o.Created*1e3).toISOString().localeCompare(new Date(s.Created*1e3).toISOString())},defaultSortOrder:(0,A.rj)(ue.Dc,"created"),sortDirections:A.h5},{title:u.FD.format("listManage"),valueType:"option",key:"option",width:200,fixed:"right",hidden:!pe.canSeeContainerListManage,render:function(o,s,g,f){return(0,a.jsxs)(J.Z,{split:(0,a.jsx)(z.Z,{type:"vertical"}),children:[(0,a.jsx)($.Z.Link,{onClick:function(){var t;(t=rr.current)===null||t===void 0||t.show(s.Id)},children:(0,a.jsx)(Y.Z,{title:u.FD.format("listManageLog"),children:(0,a.jsx)(_.Z,{})})},"log"),(s.State=="running"||s.State=="healthy"||s.State=="unhealthy")&&(0,a.jsx)($.Z.Link,{onClick:function(){var t;(t=er.current)===null||t===void 0||t.show({url:"/console/container/".concat(s.Id),title:(0,le.fi)(s.Names[0],"/")})},children:(0,a.jsx)(Y.Z,{title:u.FD.format("listManageConsole"),children:(0,a.jsx)(O.Z,{})})},"console"),(s.State=="running"||s.State=="healthy"||s.State=="unhealthy")&&(0,a.jsx)($.Z.Link,{onClick:function(){var t,i=s.Names.find(function(d){if(d.indexOf("/")===0)return d});(t=ar.current)===null||t===void 0||t.showContainer(i!=null?i:s.Names[0])},children:(0,a.jsx)(Y.Z,{title:u.FD.format("listManageFileExplorer"),children:(0,a.jsx)(V.Z,{})})},"file"),(0,a.jsx)(k.Link,{to:"/app/create/image?id="+s.Id,children:(0,a.jsx)(Y.Z,{title:u.FD.format("listManageEdit"),children:(0,a.jsx)(l.Z,{})})},"edit")]})}}],rowKey:"Id",request:function(){var h=D()(p()().mark(function o(s,g,f){var n,t,i,d,L,e;return p()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,ae.IE)({tag:s.title,siteTitle:s.title,md5:s.Id});case 2:return t=K.sent,i="",d=[],K.next=7,(0,E.e1)({showCompose:!0,showSwarm:!0});case 7:return L=K.sent,pr(L.data.list),e=[],e=t.data.list.map(function(m){var Z=t.data.siteList.find(function(W){return W.containerInfo&&W.containerInfo.Id==m.Id&&W.siteTitle!=""});if(Z&&m.Names.unshift(Z.siteTitle),m.Labels&&m.Labels[ve.fu]&&m.Names.unshift(m.Labels[ve.fu]),m.DPExtend={domainList:t.data.domainList.filter(function(W,Re){return m.Names.includes(W.containerId)}).map(function(W){return W.setting.enableSSL?"https://"+W.serverName:"http://"+W.serverName}),tag:[]},m.Labels&&m.Labels["com.docker.compose.project"]){var N;(N=m.DPExtend.tag)===null||N===void 0||N.push((0,le.fi)(m.Labels["com.docker.compose.project"],"dpanel-c-"))}if(m.Labels&&m.Labels["com.docker.swarm.service.name"]){var ne;(ne=m.DPExtend.tag)===null||ne===void 0||ne.push(m.Labels["com.docker.swarm.service.name"])}return L.data.list.forEach(function(W){W.item&&W.item.forEach(function(Re){if(m.Names.includes(Re.name)&&m.DPExtend){var he;(he=m.DPExtend.tag)===null||he===void 0||he.push(W.tag)}})}),m}),s.tag&&e.forEach(function(m){var Z;!((Z=m.DPExtend)===null||Z===void 0)&&Z.tag&&m.DPExtend.tag.forEach(function(N){s.tag.includes(N)&&d.push.apply(d,ce()(m.Names))})}),i!=""?e=e.filter(function(m){var Z=!1;return m.Names.forEach(function(N){N.startsWith("/"+i)&&(Z=!0)}),Z}):d&&d.length>0&&(e=e.filter(function(m){var Z=!1;return m.Names.forEach(function(N){d.includes(N)&&(Z=!0)}),Z})),(0,Ee.Cz)({follow:!1}).then(function(m){cr(m.data.list)}),K.abrupt("return",{data:(n=e)!==null&&n!==void 0?n:[],success:!0,total:t.data.list.length});case 15:case"end":return K.stop()}},o)}));return function(o,s,g){return h.apply(this,arguments)}}(),rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(o){var s=o.selectedRowKeys,g=o.selectedRows;return(0,a.jsxs)(J.Z,{size:16,wrap:!0,children:[(0,a.jsx)(x.Z,{type:Ae.W6.CONTAINER,selected:g!=null?g:[],onSuccess:function(){return ee(H+1),!0}},"dataPermission"),(0,a.jsxs)(j.u,{access:"canSeeContainerList",space:{size:16,wrap:!0},children:[(0,a.jsx)(X.Z,{icon:(0,a.jsx)(Ie.Z,{}),action:D()(p()().mark(function f(){var n,t,i,d;return p()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=c()(s),e.prev=1,n.s();case 3:if((t=n.n()).done){e.next=10;break}return i=t.value,e.next=7,(0,ae.IW)({md5:i,operate:"start"});case 7:d=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},f,null,[[1,12,15,18]])})),onSuccess:function(){return ee(H+1),!0},children:u.FD.format("listManageStart")}),(0,a.jsx)(X.Z,{action:D()(p()().mark(function f(){var n,t,i,d;return p()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=c()(s),e.prev=1,n.s();case 3:if((t=n.n()).done){e.next=10;break}return i=t.value,e.next=7,(0,ae.IW)({md5:i,operate:"stop"});case 7:d=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},f,null,[[1,12,15,18]])})),icon:(0,a.jsx)(Me.Z,{}),onSuccess:function(){return ee(H+1),!0},children:u.FD.format("listManageStop")}),(0,a.jsx)(X.Z,{action:D()(p()().mark(function f(){var n,t,i,d;return p()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=c()(s),e.prev=1,n.s();case 3:if((t=n.n()).done){e.next=10;break}return i=t.value,e.next=7,(0,ae.IW)({md5:i,operate:"restart"});case 7:d=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},f,null,[[1,12,15,18]])})),onSuccess:function(){return ee(H+1),!0},icon:(0,a.jsx)(S.Z,{}),children:u.FD.format("listManageRestart")}),(0,a.jsx)(X.Z,{action:D()(p()().mark(function f(){var n,t,i,d;return p()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=c()(s),e.prev=1,n.s();case 3:if((t=n.n()).done){e.next=10;break}return i=t.value,e.next=7,(0,ae.IW)({md5:i,operate:"pause"});case 7:d=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},f,null,[[1,12,15,18]])})),onSuccess:function(){return ee(H+1),!0},icon:(0,a.jsx)(Ke.Z,{}),children:u.FD.format("listManagePause")}),(0,a.jsx)(X.Z,{action:D()(p()().mark(function f(){var n,t,i,d;return p()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=c()(s),e.prev=1,n.s();case 3:if((t=n.n()).done){e.next=10;break}return i=t.value,e.next=7,(0,ae.IW)({md5:i,operate:"unpause"});case 7:d=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},f,null,[[1,12,15,18]])})),onSuccess:function(){return ee(H+1),!0},icon:(0,a.jsx)(Ie.Z,{}),children:u.FD.format("listManageUnpause")})]}),(0,a.jsx)(z.Z,{}),(0,a.jsx)(j.u,{showProTips:!0,access:["canSeeEnableCe","canSeeContainerListManageOp"],children:function(n){var t=n.canSeeEnableCe,i=n.canSeeContainerListManageOp;return i&&(0,a.jsx)(X.Z,{disabled:t,type:"primary",action:D()(p()().mark(function d(){var L,e,ye,K,m,Z,N,ne,W,Re,he,ze,ir;return p()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(g){v.next=2;break}return v.abrupt("return",!1);case 2:ye=[],K=c()(g),v.prev=4,Z=p()().mark(function hr(){var Ve,lr,Fe;return p()().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:lr=m.value,Fe=Oe==null||(Ve=Oe.container)===null||Ve===void 0?void 0:Ve.find(function(gr){return gr.id==lr.Id}),Fe&&!ye.includes(Fe.image)&&ye.push(Fe.image);case 3:case"end":return Ge.stop()}},hr)}),K.s();case 7:if((m=K.n()).done){v.next=11;break}return v.delegateYield(Z(),"t0",9);case 9:v.next=7;break;case 11:v.next=16;break;case 13:v.prev=13,v.t1=v.catch(4),K.e(v.t1);case 16:return v.prev=16,K.f(),v.finish(16);case 19:if(ye){v.next=21;break}return v.abrupt("return",!1);case 21:return v.next=23,(L=Ne.current)===null||L===void 0?void 0:L.pull(ye);case 23:(e=Ne.current)===null||e===void 0||e.finish(),ne=c()(g),v.prev=25,ne.s();case 27:if((W=ne.n()).done){v.next=34;break}return ir=W.value,v.next=31,(0,ae.RF)({md5:(Re=ir.Id)!==null&&Re!==void 0?Re:"",imageTag:"",enableBak:(he=(ze=nr.current)===null||ze===void 0?void 0:ze.getFieldValue("enableBak"))!==null&&he!==void 0?he:!1});case 31:N=v.sent;case 32:v.next=27;break;case 34:v.next=39;break;case 36:v.prev=36,v.t2=v.catch(25),ne.e(v.t2);case 39:return v.prev=39,ne.f(),v.finish(39);case 42:return v.abrupt("return",N);case 43:case"end":return v.stop()}},d,null,[[4,13,16,19],[25,36,39,42]])})),onSuccess:function(){return ee(H+1),!0},confirm:(0,a.jsxs)(J.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,a.jsx)($.Z.Text,{children:sr.format("upgradeConfirm")}),(0,a.jsx)(_e.A,{formRef:nr,submitter:!1,layout:"inline",children:(0,a.jsx)(ie.Z,{name:"enableBak",valuePropName:"checked",children:(0,a.jsx)(I.Z,{children:sr.format("upgradeConfirmEnableBak")})})})]}),children:u.FD.format("listManageUpgradeBatch")})}}),(0,a.jsx)(j.u,{access:"canSeeContainerListManageDelete",children:(0,a.jsx)(X.Z,{danger:!0,type:"primary",action:D()(p()().mark(function f(){var n,t,i,d;return p()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=c()(s),e.prev=1,t.s();case 3:if((i=t.n()).done){e.next=12;break}return d=i.value,e.next=7,(0,ve.Ct)({md5:d,deleteImage:!1,deleteVolume:!1});case 7:return n=e.sent,e.next=10,(0,E.rn)({name:d});case 10:e.next=3;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),t.e(e.t0);case 17:return e.prev=17,t.f(),e.finish(17);case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}},f,null,[[1,14,17,20]])})),onSuccess:function(){var n,t;return!((n=M.current)===null||n===void 0)&&n.reloadAndRest&&((t=M.current)===null||t===void 0||t.reloadAndRest()),!0},onError:function(){var n,t;return!((n=M.current)===null||n===void 0)&&n.reload&&((t=M.current)===null||t===void 0||t.reload()),!0},confirm:"notification.confirm.title",children:u.FD.format("listManageDeleteBatch")})})]})},pagination:(0,A.Oh)(),search:{collapsed:!1},tableExtraRender:function(){return(0,a.jsx)(Se.Z,{mode:"horizontal",selectedKeys:["list"],items:[{label:(0,a.jsx)(k.Link,{to:"/app/list",replace:!0,children:u.Ob.format("container.list")}),key:"list"},{label:(0,a.jsx)(k.Link,{to:"/app/list/recycle",replace:!0,children:u.Ob.format("container.list.recycle")}),key:"recycle"}]})},toolBarRender:function(){return[(0,a.jsx)(j.u,{access:"canSeeContainerListManageDelete",children:(0,a.jsx)(X.Z,{action:function(){return(0,ae.KK)()},onSuccess:function(){return ee(H+1),!0},onError:function(){var s,g;return!((s=M.current)===null||s===void 0)&&s.reset&&((g=M.current)===null||g===void 0||g.reset()),!0},tips:u.FD.format("listManagePruneTip"),confirm:"notification.confirm.title",children:u.FD.format("listManagePrune")})},"clear")]},columnsState:(0,A.j_)(ue.Dc)})]})}},62597:function(Be,te,r){r.d(te,{$G:function(){return D},Ct:function(){return Pe},Tb:function(){return ge},XH:function(){return _e},cl:function(){return Q},fp:function(){return T},fu:function(){return re},iE:function(){return J},xb:function(){return Y},ze:function(){return Se}});var oe=r(15009),c=r.n(oe),de=r(99289),p=r.n(de),F=r(82346),ce="com.dpanel.container.description",re="com.dpanel.container.title";function D(_){return se.apply(this,arguments)}function se(){return se=p()(c()().mark(function _(O){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,F.request)("/api/app/site/create-by-image",{method:"POST",data:O}));case 1:case"end":return l.stop()}},_)})),se.apply(this,arguments)}var T={EnvValueRuleRequired:1,EnvValueRuleDisabled:2,EnvValueTypeNumber:1024,EnvValueTypeText:2048,EnvValueTypeSelect:4096,EnvValueTypeSelectMultiple:8192};function Q(_){return me.apply(this,arguments)}function me(){return me=p()(c()().mark(function _(O){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,F.request)("/api/app/site/get-list",{method:"POST",data:O}));case 1:case"end":return l.stop()}},_)})),me.apply(this,arguments)}function ge(_){return fe.apply(this,arguments)}function fe(){return fe=p()(c()().mark(function _(O){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return O.download=!1,l.next=3,(0,F.request)("/api/app/log/run",{method:"POST",data:O});case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},_)})),fe.apply(this,arguments)}function _e(_){return ie.apply(this,arguments)}function ie(){return ie=p()(c()().mark(function _(O){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return O.download=!0,l.next=3,(0,F.request)("/api/app/log/run",{method:"POST",data:O,responseType:"blob"});case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},_)})),ie.apply(this,arguments)}function J(_){return $.apply(this,arguments)}function $(){return $=p()(c()().mark(function _(O){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return O.id=String(O.id),l.next=3,(0,F.request)("/api/app/site/get-detail",{data:O,method:"POST"});case 3:return l.abrupt("return",l.sent);case 4:case"end":return l.stop()}},_)})),$.apply(this,arguments)}function Pe(_){return z.apply(this,arguments)}function z(){return z=p()(c()().mark(function _(O){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,F.request)("/api/app/container/delete",{method:"POST",data:O}));case 1:case"end":return l.stop()}},_)})),z.apply(this,arguments)}function Y(_){return I.apply(this,arguments)}function I(){return I=p()(c()().mark(function _(O){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,F.request)("/api/app/site/delete",{method:"POST",data:O}));case 1:case"end":return l.stop()}},_)})),I.apply(this,arguments)}function Se(_){return k.apply(this,arguments)}function k(){return k=p()(c()().mark(function _(O){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,F.request)("/api/app/container/ignore",{method:"POST",data:O}));case 1:case"end":return l.stop()}},_)})),k.apply(this,arguments)}},20578:function(Be,te,r){r.d(te,{q:function(){return ce}});var oe=r(15009),c=r.n(oe),de=r(99289),p=r.n(de),F=r(82346);function ce(){return re.apply(this,arguments)}function re(){return re=p()(c()().mark(function D(){return c()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,(0,F.request)("/api/pro/container-upgrade/get-all-list",{method:"POST"});case 2:return T.abrupt("return",T.sent);case 3:case"end":return T.stop()}},D)})),re.apply(this,arguments)}}}]);
