"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1831],{91058:function(S,E,a){var C=a(5574),t=a.n(C),D=a(89035),s=a(38345),i=a(17186),P=a(24739),m=a(5966),M=a(42075),p=a(28036),O=a(85576),f=a(67294),b=a(95089),B=a(12491),l=a(85893),y="docker-image",A=(0,f.forwardRef)(function(u,I){var w=(0,f.useState)(y),j=t()(w,2),v=j[0],g=j[1],_=(0,f.useRef)(),U=(0,f.useState)(""),T=t()(U,2),k=T[0],W=T[1],x=function(){v!="code"?g("code"):g(y)};(0,f.useImperativeHandle)(I,function(){return{addEnvItem:function(o,h){var r,n=(r=_.current)===null||r===void 0?void 0:r.getList(),d=!1;if(n==null||n.map(function(R){if(R.name==o){d=!0;return}}),!d){var e;(e=_.current)===null||e===void 0||e.add({name:o,value:h})}},clear:function(){var o;(o=_.current)===null||o===void 0||(o=o.getList())===null||o===void 0||o.map(function(h,r){var n;(n=_.current)===null||n===void 0||n.remove(r)})}}});function L(c){try{var o,h;c==""&&(c=K());for(var r=(o=(h=_.current)===null||h===void 0||(h=h.getList())===null||h===void 0?void 0:h.length)!==null&&o!==void 0?o:0,n=r;n>=0;n--){var d;(d=_.current)===null||d===void 0||d.remove(n)}var e=c.split(`
`),R=0;e.map(function(F){var Z,G=F.split("=");G.length<2||((Z=_.current)===null||Z===void 0||Z.add({name:G[0],value:G.slice(1).join("=")},R),R++)})}catch(F){console.log(F)}}function K(){if(_&&_.current&&_.current.getList){var c,o=(c=_.current)===null||c===void 0?void 0:c.getList();if(o){var h=[];return o.map(function(r){h.push("".concat(r.name,"=").concat(r.value))}),h.join(`
`)}else return""}else return""}return(0,l.jsxs)(s.Z,{ghost:u.showCardGhost,title:u.label?u.label:null,headerBordered:!0,extra:(u.showCodeMode||u.showImportButton)&&(0,l.jsxs)(M.Z,{children:[u.showImportButton&&(0,l.jsx)("div",{style:{marginBottom:"-25px"},children:(0,l.jsx)(B.Z,{title:"\u5BFC\u5165 env \u6587\u4EF6",onImport:function(o){return L(o),!0},onLoad:function(o){if(o.indexOf("=")<0)throw new Error("\u5BFC\u5165env\u6587\u4EF6\u9519\u8BEF");return!0}})}),u.showCodeMode?(0,l.jsx)(p.ZP,{icon:(0,l.jsx)(D.Z,{}),type:v=="code"?"primary":"default",onClick:x,children:"\u4EE3\u7801\u6A21\u5F0F"},"code"):""]}),children:[(0,l.jsx)(i.u,{name:u.name?u.name:"environment",actionRef:_,creatorButtonProps:u.showAddButton?{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u73AF\u5883\u53D8\u91CF"}:!1,copyIconProps:!1,deleteIconProps:u.showDeleteButton,min:100,label:u.listLabel,children:function(o,h,r){var n=r.getCurrentRowData();return(0,l.jsxs)(P.UW,{children:[(0,l.jsx)(m.Z,{width:u.showInDrawer?"sm":"md",name:"name",label:"\u53D8\u91CF\u540D",required:!0,rules:[{required:!0}],disabled:u.showDisableName,placeholder:"\u8F93\u5165\u53D8\u91CF\u540D\u79F0"}),(0,l.jsx)(m.Z,{width:u.showInDrawer?"sm":"md",name:"value",label:"\u53D8\u91CF\u503C",rules:[{required:!!u.requireValue}],disabled:u.showDisableValue,placeholder:n&&n.label?n.label:"\u8F93\u5165\u53D8\u91CF\u503C"})]})}}),u.showCodeMode&&(0,l.jsx)(O.Z,{width:"800px",open:v=="code",onCancel:function(){return g("docker-image")},onOk:function(){L(k),g("docker-image")},children:(0,l.jsx)(b.ZP,{onChange:function(o){return W(o)},value:K(),height:"680px",theme:"light"})})]})});E.Z=A},12491:function(S,E,a){a.d(E,{Z:function(){return M}});var C=a(24963),t=a(88484),D=a(62370),s=a(31418),i=a(28036),P=a(67294),m=a(85893);function M(p){var O=(0,P.useContext)(C.Z),f=O.message,b=O.notice,B=O.lang,l=(0,P.useRef)(null),y=s.Z.useApp(),A=function(){l.current&&(l.current.click(),l.current.onchange=function(I){if(!I||!I.target)return"";var w=new FileReader;w.onload=function(v){var g,_,U=(g=v.target)===null||g===void 0?void 0:g.result;if(p.onLoad)try{p.onLoad&&p.onLoad(U)}catch(T){b.error(T);return}typeof p.onImport=="function"&&(f.success("\u6210\u529F\u5BFC\u5165 ".concat(p.title)),p.onImport(U)),(_=l.current)!==null&&_!==void 0&&_.value&&(l.current.value="")};var j=I.target;if(j.files)try{w.readAsText(j.files[0])}catch(v){b.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(D.Z,{children:(0,m.jsx)(i.ZP,{icon:(0,m.jsx)(t.Z,{}),block:!0,onClick:A,children:p.title})}),(0,m.jsx)("input",{style:{display:"none"},type:"file",ref:l,name:"importFileInput"})]})}},96781:function(S,E,a){var C=a(67294),t=(0,C.createContext)({});E.Z=t},90098:function(S,E,a){a.d(E,{GG:function(){return I},MG:function(){return k},Oh:function(){return l},Pn:function(){return O},U_:function(){return U},Yz:function(){return j},iE:function(){return K},ik:function(){return b},im:function(){return P},mg:function(){return A},pm:function(){return M},tw:function(){return o},vf:function(){return g},xC:function(){return x}});var C=a(15009),t=a.n(C),D=a(99289),s=a.n(D),i=a(82346);function P(r){return m.apply(this,arguments)}function m(){return m=s()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/compose/create",{method:"POST",data:n}));case 1:case"end":return e.stop()}},r)})),m.apply(this,arguments)}function M(r){return p.apply(this,arguments)}function p(){return p=s()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/compose/get-list",{method:"POST",data:n}));case 1:case"end":return e.stop()}},r)})),p.apply(this,arguments)}function O(r){return f.apply(this,arguments)}function f(){return f=s()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,i.request)("/api/app/compose/get-task",{method:"POST",data:n}));case 2:case"end":return e.stop()}},r)})),f.apply(this,arguments)}function b(r){return B.apply(this,arguments)}function B(){return B=s()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/compose/delete",{method:"POST",data:n}));case 1:case"end":return e.stop()}},r)})),B.apply(this,arguments)}function l(r){return y.apply(this,arguments)}function y(){return y=s()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,i.request)("/api/app/compose/container-deploy",{method:"POST",data:n}));case 2:case"end":return e.stop()}},r)})),y.apply(this,arguments)}function A(r){return u.apply(this,arguments)}function u(){return u=s()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,i.request)("/api/app/compose/container-destroy",{method:"POST",data:n}));case 2:case"end":return e.stop()}},r)})),u.apply(this,arguments)}function I(r){return w.apply(this,arguments)}function w(){return w=s()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,i.request)("/api/app/compose/container-ctrl",{method:"POST",data:n}));case 2:case"end":return e.stop()}},r)})),w.apply(this,arguments)}function j(r){return v.apply(this,arguments)}function v(){return v=s()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,i.request)("/api/app/compose/container-log",{method:"POST",data:n}));case 2:case"end":return e.stop()}},r)})),v.apply(this,arguments)}function g(r){return _.apply(this,arguments)}function _(){return _=s()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.download=!0,n.id=String(n.id),e.next=4,(0,i.request)("/api/app/compose/container-log",{method:"POST",data:n,responseType:"blob"});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},r)})),_.apply(this,arguments)}function U(r){return T.apply(this,arguments)}function T(){return T=s()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/compose/container-process-kill",{method:"POST",data:n}));case 1:case"end":return e.stop()}},r)})),T.apply(this,arguments)}function k(r){return W.apply(this,arguments)}function W(){return W=s()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/compose/get-from-uri",{method:"POST",data:n}));case 1:case"end":return e.stop()}},r)})),W.apply(this,arguments)}function x(r){return L.apply(this,arguments)}function L(){return L=s()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/compose/parse",{method:"POST",data:n}));case 1:case"end":return e.stop()}},r)})),L.apply(this,arguments)}function K(r){return c.apply(this,arguments)}function c(){return c=s()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/common/store/deploy",{method:"POST",data:n}));case 1:case"end":return e.stop()}},r)})),c.apply(this,arguments)}function o(r){return h.apply(this,arguments)}function h(){return h=s()(t()().mark(function r(n){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.id=String(n.id),e.abrupt("return",(0,i.request)("/api/app/compose/download",{method:"POST",data:n,responseType:"blob"}));case 2:case"end":return e.stop()}},r)})),h.apply(this,arguments)}},79245:function(S,E,a){a.d(E,{m:function(){return D}});var C=a(64599),t=a.n(C);function D(s){var i=[];if(!s||s=="")return i;var P=s.matchAll(/\$\{(\w+)[:-?=]*(.*?)\}/g),m=t()(P),M;try{for(m.s();!(M=m.n()).done;){var p=M.value;i.push({name:p[1],value:p[2]?p[2].indexOf("-")==0?p[2].substring(1):p[2]:""})}}catch(O){m.e(O)}finally{m.f()}return i}}}]);
