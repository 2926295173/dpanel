"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7863],{53102:function(T,E,e){e.d(E,{Z:function(){return h}});var f=e(67294),d=e(85893);function h(o){var m=function(a){if(o.check&&o.check(a)){a.preventDefault();return}if(a.target&&a.target.className&&a.target.className.indexOf(o.targetClassName)!==-1){a.preventDefault();return}};return(0,f.useEffect)(function(){return window.addEventListener("wheel",m,{passive:!1}),function(){window.removeEventListener("wheel",m)}},[]),(0,d.jsx)(d.Fragment,{children:o.children})}},53260:function(T,E,e){e.r(E),e.d(E,{default:function(){return F}});var f=e(97857),d=e.n(f),h=e(15009),o=e.n(h),m=e(99289),D=e.n(m),a=e(5574),O=e.n(a),U=e(93362),A=e(90581),L=e(49610),I=e(53102),B=e(77273),K=e(52756),g=e(87662),b=e(43425),x=e(90078),y=e(97269),S=e(38345),Z=e(42075),P=e(28036),N=e(86250),M=e(32983),l=e(67294),_=e(85893);function F(){var u=(0,l.useRef)(),j=(0,l.useRef)(),H=(0,l.useState)(),C=O()(H,2),t=C[0],G=C[1],R=(0,l.useRef)(),$=(0,l.useState)(1),W=O()($,2),p=W[0],k=W[1];return(0,l.useEffect)(function(){(0,g.K3)().then(function(s){G(s.data),setTimeout(function(){var n;(n=u.current)===null||n===void 0||n.start("/console/host/".concat(s.data.name),{})},500)})},[p]),(0,_.jsx)(x._z,{extra:(0,_.jsxs)(Z.Z,{children:[t&&(0,_.jsx)(U.Z,{apiPrefix:"host",name:t.name,title:t.title,trigger:(0,_.jsx)(P.ZP,{type:"primary",children:"\u6587\u4EF6\u7BA1\u7406"})}),(0,_.jsx)(y.A,{layout:"inline",formRef:j,submitter:!1,onValuesChange:function(n,c){if(c.entryCmd){var r;(r=j.current)===null||r===void 0||r.submit()}},onFinish:function(){var s=D()(o()().mark(function n(c){var r,v;return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(t){i.next=2;break}return i.abrupt("return",!1);case 2:return(r=u.current)===null||r===void 0||r.close(),(v=u.current)===null||v===void 0||v.start("/console/host/".concat(t.name),{cmd:c.entryCmd}),i.abrupt("return",!1);case 5:case"end":return i.stop()}},n)}));return function(n){return s.apply(this,arguments)}}(),children:(0,_.jsx)(A.Z,{showInLine:!0,onBatchCommandFinish:function(n){u.current&&u.current.run(n)},onOpenNewWindow:function(n){return t?"/console/host/".concat(t.name)+"?".concat(Object.keys(n).map(function(c){return"".concat(c,"=").concat(encodeURIComponent(n[c]))}).join("&")):""}})})]}),children:(0,_.jsxs)(S.Z,{children:[(!t||!t.enableSSH)&&(0,_.jsx)(N.Z,{justify:"center",style:{height:"58vh"},vertical:!0,children:(0,_.jsx)(M.Z,{image:M.Z.PRESENTED_IMAGE_SIMPLE,description:(0,_.jsxs)(_.Fragment,{children:[(0,K.getLang)("notification.homeWsHostConsoleSshNotSetting")," ",(0,_.jsx)(P.ZP,{icon:(0,_.jsx)(b.Z,{}),type:"link",onClick:function(){var n;t&&((n=R.current)===null||n===void 0||n.edit(d()(d()({},t),{enableSSH:!0})))}})]})})}),t&&t.enableSSH&&(0,_.jsx)(I.Z,{check:function(n){return!!(n&&n.target&&n.target.parentNode.parentNode.className&&n.target.parentNode.parentNode.className.indexOf("xterm")!==-1)},children:(0,_.jsx)(L.Z,{height:"70vh",ref:u})}),(0,_.jsx)(B.Z,{onFinish:function(){k(p+1)},ref:R})]})})}}}]);
