"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3355],{28307:function(B,O,n){var j=n(5574),a=n.n(j),h=n(38345),u=n(97269),r=n(5966),g=n(64317),p=n(62370),D=n(14726),f=n(85265),E=n(42075),d=n(67294),b=n(80821),P=n(3393),M=n(97961),v=n(92754),T=n(54006),t=n(85893),i=(0,d.forwardRef)(function(s,o){var l=(0,d.useState)(!1),I=a()(l,2),R=I[0],y=I[1],C=(0,d.useRef)(),m=(0,d.useRef)();return(0,d.useImperativeHandle)(o,function(){return{upgradeImage:function(_){var e;return y(!0),(e=C.current)===null||e===void 0||e.setFieldValue("imageUrl",_),(0,P.Gb)({tag:_,type:"pull"})},setImageName:function(_){var e;y(!0),(e=C.current)===null||e===void 0||e.setFieldValue("imageUrl",_)}}}),[(0,t.jsx)(D.ZP,{type:s.buttonType?s.buttonType:"default",onClick:function(){var _,e;s.onClick&&s.onClick(),y(!0),(_=C.current)===null||_===void 0||_.resetFields(),(e=m.current)===null||e===void 0||e.setStart("")},children:"\u62C9\u53D6\u955C\u50CF"},"remoteBtn"),(0,t.jsxs)(f.Z,{forceRender:!0,open:R,title:"\u4E0B\u8F7D\u8FDC\u7A0B\u955C\u50CF",width:800,onClose:function(){return y(!1)},footer:!1,children:[(0,t.jsx)(h.Z,{children:(0,t.jsxs)(E.Z,{direction:"vertical",size:"middle",children:[(0,t.jsxs)("div",{children:["1\u3001\u955C\u50CF\u540D\u79F0\u4E2D\u4E0D\u5305\u542B\u4ED3\u5E93\u5730\u5740\u65F6\uFF0C \u9ED8\u8BA4\u4ECE ",(0,t.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:"docker hub"})," \u4E2D\u4E0B\u8F7D\uFF0C \u4F60\u53EF\u4EE5\u5728\u4E0A\u9762",(0,t.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:"\u3010\u67E5\u627E\u3011"}),"\u9700\u8981\u7684\u955C\u50CF"]}),(0,t.jsxs)("div",{children:["2\u3001\u955C\u50CF\u4E2D\u5305\u542B\u4ED3\u5E93\u5730\u5740\u65F6\uFF0C\u8BF7\u786E",(0,t.jsx)(T.Link,{to:"/image/registry",children:"\u3010\u6DFB\u52A0\u3011"}),"\u8FC7\u8BE5\u4ED3\u5E93\uFF0C\u5E76\u6709 Pull \u6743\u9650"]}),(0,t.jsxs)("div",{children:["3\u3001\u53EF\u5728",(0,t.jsx)(T.Link,{to:"/image/registry",children:"\u3010\u4ED3\u5E93\u7BA1\u7406\u3011"}),"\u4E2D\u914D\u7F6E\u955C\u50CF\u7684\u52A0\u901F\u5730\u5740"]})]})}),(0,t.jsx)(h.Z,{title:"\u4E0B\u8F7D\u955C\u50CF",headerBordered:!0,children:(0,t.jsxs)(u.A,{submitter:!1,formRef:C,children:[(0,t.jsxs)(E.Z.Compact,{children:[(0,t.jsx)(r.Z,{width:400,name:"imageUrl",placeholder:"\u8BF7\u8F93\u5165\u955C\u50CF\u5730\u5740"}),(0,t.jsx)(g.Z,{name:"platform",style:{width:150},placeholder:"\u9ED8\u8BA4\u5F53\u524D\u67B6\u6784",options:M.ii.map(function(c){return{label:c.name,value:c.name}})}),(0,t.jsx)(b.Z,{action:function(){var _,e,F,U,w,A=(_=(e=C.current)===null||e===void 0?void 0:e.getFieldValue("imageUrl"))!==null&&_!==void 0?_:"";return(F=m.current)===null||F===void 0||F.setStart(A),(0,P.Gb)({tag:A,type:"pull",platform:(U=(w=C.current)===null||w===void 0?void 0:w.getFieldValue("platform"))!==null&&U!==void 0?U:""})},onSuccess:function(_){var e;(e=m.current)===null||e===void 0||e.setFinish(),y(!1),s.onFinish&&s.onFinish(_.data.tag)},messageSuccess:function(_){var e="\u62C9\u53D6\u6210\u529F";return _.data.proxyUrl&&(e+="\uFF0C\u4F7F\u7528\u4EE3\u7406 "+_.data.proxyUrl),e},children:"\u62C9\u53D6\u955C\u50CF"})]}),(0,t.jsx)(p.Z,{label:"\u4E0B\u8F7D\u8FDB\u5EA6",children:(0,t.jsx)(v.Z,{ref:m})})]})})]},"remoteDrawer")]});O.Z=i},92754:function(B,O,n){var j=n(5574),a=n.n(j),h=n(67294),u=n(54006),r=n(38703),g=n(85893),p=(0,h.forwardRef)(function(D,f){var E=(0,h.useState)(""),d=a()(E,2),b=d[0],P=d[1];(0,h.useImperativeHandle)(f,function(){return{setFinish:function(){i({finish:{downloading:100,extracting:100}})},setStart:function(o){o&&P(o),i({start:{downloading:0,extracting:0}})}}});var M=(0,u.useModel)("subscriber");M.addDataHandler("image:pull:"+b,function(s){i(s.data)});var v=(0,h.useState)(),T=a()(v,2),t=T[0],i=T[1];return(0,h.useEffect)(function(){i({start:{downloading:0,extracting:0}})},[]),(0,g.jsx)(g.Fragment,{children:t&&Object.keys(t).map(function(s){return(0,g.jsx)(r.Z,{percent:t[s].downloading,success:{percent:t[s].extracting}},s)})})});O.Z=p},97961:function(B,O,n){n.d(O,{GH:function(){return d},MF:function(){return v},_2:function(){return P},fN:function(){return p},ii:function(){return g},vC:function(){return f}});var j=n(15009),a=n.n(j),h=n(99289),u=n.n(h),r=n(54006),g=[{name:"linux/amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"linux/arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"linux/i386",arch:"386",search:[]},{name:"linux/arm/v6",arch:"arm",search:[]},{name:"linux/arm/v7",arch:"arm",search:[]},{name:"linux/arm/v8",arch:"arm64",search:[]},{name:"linux/ppc64le",arch:"ppc64le",search:[]},{name:"linux/riscv64",arch:"riscv64",search:[]}];function p(t){return D.apply(this,arguments)}function D(){return D=u()(a()().mark(function t(i){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,r.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:i}));case 1:case"end":return o.stop()}},t)})),D.apply(this,arguments)}function f(t){return E.apply(this,arguments)}function E(){return E=u()(a()().mark(function t(i){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,r.request)("/api/app/image/import-by-container-tar",{method:"POST",data:i}));case 1:case"end":return o.stop()}},t)})),E.apply(this,arguments)}function d(t){return b.apply(this,arguments)}function b(){return b=u()(a()().mark(function t(i){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,r.request)("/api/app/image/import-by-image-tar",{method:"POST",data:i}));case 1:case"end":return o.stop()}},t)})),b.apply(this,arguments)}function P(t){return M.apply(this,arguments)}function M(){return M=u()(a()().mark(function t(i){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,r.request)("/api/common/attach/delete",{method:"POST",data:i});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},t)})),M.apply(this,arguments)}function v(){return T.apply(this,arguments)}function T(){return T=u()(a()().mark(function t(){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,r.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return s.stop()}},t)})),T.apply(this,arguments)}},3393:function(B,O,n){n.d(O,{Gb:function(){return D},Pn:function(){return b},Rb:function(){return M},YU:function(){return g},_U:function(){return E},cd:function(){return T}});var j=n(15009),a=n.n(j),h=n(99289),u=n.n(h),r=n(54006);function g(i){return p.apply(this,arguments)}function p(){return p=u()(a()().mark(function i(s){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,r.request)("/api/app/image/get-detail",{method:"POST",data:s}));case 1:case"end":return l.stop()}},i)})),p.apply(this,arguments)}function D(i){return f.apply(this,arguments)}function f(){return f=u()(a()().mark(function i(s){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,r.request)("/api/app/image/tag-remote",{method:"POST",data:s}));case 1:case"end":return l.stop()}},i)})),f.apply(this,arguments)}function E(i){return d.apply(this,arguments)}function d(){return d=u()(a()().mark(function i(s){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,r.request)("/api/app/image/tag-add",{method:"POST",data:s}));case 1:case"end":return l.stop()}},i)})),d.apply(this,arguments)}function b(i){return P.apply(this,arguments)}function P(){return P=u()(a()().mark(function i(s){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,r.request)("/api/app/image/tag-delete",{method:"POST",data:s}));case 1:case"end":return l.stop()}},i)})),P.apply(this,arguments)}function M(i){return v.apply(this,arguments)}function v(){return v=u()(a()().mark(function i(s){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,r.request)("/api/app/image/export",{method:"POST",data:s,responseType:"blob"}));case 1:case"end":return l.stop()}},i)})),v.apply(this,arguments)}function T(i){return t.apply(this,arguments)}function t(){return t=u()(a()().mark(function i(s){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,r.request)("/api/pro/image/get-remote-tag",{method:"POST",data:s}));case 1:case"end":return l.stop()}},i)})),t.apply(this,arguments)}},18148:function(B,O,n){n.d(O,{$q:function(){return M},Fj:function(){return I},KG:function(){return g},KX:function(){return y},T8:function(){return b},Xn:function(){return E},ao:function(){return T},c5:function(){return o},c7:function(){return i}});var j=n(15009),a=n.n(j),h=n(99289),u=n.n(h),r=n(54006);function g(m){return p.apply(this,arguments)}function p(){return p=u()(a()().mark(function m(c){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,r.request)("/api/app/image/get-list",{method:"POST",data:c}));case 1:case"end":return e.stop()}},m)})),p.apply(this,arguments)}function D(m){return f.apply(this,arguments)}function f(){return f=_asyncToGenerator(_regeneratorRuntime().mark(function m(c){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request("/api/app/log/image-build",{method:"POST",data:c});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},m)})),f.apply(this,arguments)}function E(m){return d.apply(this,arguments)}function d(){return d=u()(a()().mark(function m(c){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,r.request)("/api/app/image/get-list-build",{method:"POST",data:c}));case 1:case"end":return e.stop()}},m)})),d.apply(this,arguments)}function b(m){return P.apply(this,arguments)}function P(){return P=u()(a()().mark(function m(c){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,r.request)("/api/app/image/get-build-task",{method:"POST",data:c});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},m)})),P.apply(this,arguments)}function M(m){return v.apply(this,arguments)}function v(){return v=u()(a()().mark(function m(c){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,r.request)("/api/app/image/delete-build-task",{method:"POST",data:c});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},m)})),v.apply(this,arguments)}function T(m){return t.apply(this,arguments)}function t(){return t=u()(a()().mark(function m(c){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,r.request)("/api/app/image/image-delete",{method:"POST",data:c});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},m)})),t.apply(this,arguments)}function i(){return s.apply(this,arguments)}function s(){return s=u()(a()().mark(function m(){return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,r.request)("/api/app/image/image-prune",{method:"POST"});case 2:return _.abrupt("return",_.sent);case 3:case"end":return _.stop()}},m)})),s.apply(this,arguments)}function o(){return l.apply(this,arguments)}function l(){return l=u()(a()().mark(function m(){return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,r.request)("/api/app/image/build-prune",{method:"POST"});case 2:return _.abrupt("return",_.sent);case 3:case"end":return _.stop()}},m)})),l.apply(this,arguments)}function I(m){return R.apply(this,arguments)}function R(){return R=u()(a()().mark(function m(c){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,r.request)("/api/app/image/update-title",{method:"POST",data:c});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},m)})),R.apply(this,arguments)}function y(m){return C.apply(this,arguments)}function C(){return C=u()(a()().mark(function m(c){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,r.request)("/api/app/image/tag-sync",{method:"POST",data:c}));case 1:case"end":return e.stop()}},m)})),C.apply(this,arguments)}},5251:function(B,O,n){n.d(O,{FI:function(){return a},ZM:function(){return h}});function j(u){return u.trim()}function a(u){var r="";u<.1*1024?r=u.toFixed(2)+"B":u<.1*1024*1024?r=(u/1024).toFixed(2)+"KB":u<1*1024*1024*1024?r=(u/(1024*1024)).toFixed(2)+"MB":r=(u/(1024*1024*1024)).toFixed(2)+"GB";var g=r+"",p=g.indexOf("."),D=g.substring(p+1,p+3);return D=="00"?g.substring(0,p)+g.substr(p+3,2):r}function h(u){if(u){var r=new Date(u),g=r.getFullYear()+"-",p=(r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1)+"-",D=(r.getDate()<10?"0"+r.getDate():r.getDate())+" ",f=(r.getHours()<10?"0"+r.getHours():r.getHours())+":",E=(r.getMinutes()<10?"0"+r.getMinutes():r.getMinutes())+":",d=r.getSeconds()<10?"0"+r.getSeconds():r.getSeconds();return g+p+D+f+E+d}}}}]);
