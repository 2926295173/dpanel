"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7523],{90672:function(q,U,e){var E=e(1413),a=e(45987),b=e(67294),m=e(35510),D=e(85893),i=["fieldProps","proFieldProps"],O=function(C,M){var j=C.fieldProps,d=C.proFieldProps,L=(0,a.Z)(C,i);return(0,D.jsx)(m.Z,(0,E.Z)({ref:M,valueType:"textarea",fieldProps:j,proFieldProps:d},L))};U.Z=b.forwardRef(O)},1677:function(q,U,e){var E=e(1413),a=e(45987),b=e(88484),m=e(31365),D=e(28036),i=e(67294),O=e(9105),r=e(90789),C=e(85893),M=["fieldProps","action","accept","listType","title","max","icon","buttonProps","disabled","proFieldProps"],j=function(s,B){var Z,t=s.fieldProps,h=s.action,v=s.accept,o=s.listType,p=s.title,f=p===void 0?"\u5355\u51FB\u4E0A\u4F20":p,g=s.max,P=s.icon,u=P===void 0?(0,C.jsx)(b.Z,{}):P,_=s.buttonProps,y=s.disabled,A=s.proFieldProps,l=(0,a.Z)(s,M),w=(0,i.useMemo)(function(){var ee;return(ee=l.fileList)!==null&&ee!==void 0?ee:l.value},[l.fileList,l.value]),Y=(0,i.useContext)(O.A),R=(A==null?void 0:A.mode)||Y.mode||"edit",S=(g===void 0||!w||(w==null?void 0:w.length)<g)&&R!=="read",ue=(o!=null?o:t==null?void 0:t.listType)==="picture-card";return(0,C.jsx)(m.Z,(0,E.Z)((0,E.Z)({action:h,accept:v,ref:B,listType:o||"picture",fileList:w},t),{},{name:(Z=t==null?void 0:t.name)!==null&&Z!==void 0?Z:"file",onChange:function(z){var G;t==null||(G=t.onChange)===null||G===void 0||G.call(t,z)},children:S&&(ue?(0,C.jsxs)("span",{children:[u," ",f]}):(0,C.jsxs)(D.ZP,(0,E.Z)((0,E.Z)({disabled:y||(t==null?void 0:t.disabled)},_),{},{children:[u,f]})))}))},d=(0,r.G)(i.forwardRef(j),{getValueFromEvent:function(s){return s.fileList}});U.Z=d},37476:function(q,U,e){e.d(U,{Y:function(){return t}});var E=e(74165),a=e(15861),b=e(1413),m=e(97685),D=e(45987),i=e(73177),O=e(21532),r=e(85576),C=e(55917),M=e(21770),j=e(80334),d=e(67294),L=e(73935),s=e(89671),B=e(85893),Z=["children","trigger","onVisibleChange","onOpenChange","modalProps","onFinish","submitTimeout","title","width","visible","open"];function t(h){var v,o,p=h.children,f=h.trigger,g=h.onVisibleChange,P=h.onOpenChange,u=h.modalProps,_=h.onFinish,y=h.submitTimeout,A=h.title,l=h.width,w=h.visible,Y=h.open,R=(0,D.Z)(h,Z);(0,j.ET)(!R.footer||!(u!=null&&u.footer),"ModalForm \u662F\u4E00\u4E2A ProForm \u7684\u7279\u6B8A\u5E03\u5C40\uFF0C\u5982\u679C\u60F3\u81EA\u5B9A\u4E49\u6309\u94AE\uFF0C\u8BF7\u4F7F\u7528 submit.render \u81EA\u5B9A\u4E49\u3002");var S=(0,d.useContext)(O.ZP.ConfigContext),ue=(0,d.useState)([]),ee=(0,m.Z)(ue,2),z=ee[1],G=(0,d.useState)(!1),k=(0,m.Z)(G,2),x=k[0],ne=k[1],H=(0,M.Z)(!!w,{value:Y||w,onChange:P||g}),W=(0,m.Z)(H,2),X=W[0],K=W[1],N=(0,d.useRef)(null),le=(0,d.useCallback)(function(T){N.current===null&&T&&z([]),N.current=T},[]),te=(0,d.useRef)(),se=(0,d.useCallback)(function(){var T,c,n,F=(T=(c=R.form)!==null&&c!==void 0?c:(n=R.formRef)===null||n===void 0?void 0:n.current)!==null&&T!==void 0?T:te.current;F&&u!==null&&u!==void 0&&u.destroyOnClose&&F.resetFields()},[u==null?void 0:u.destroyOnClose,R.form,R.formRef]);(0,d.useImperativeHandle)(R.formRef,function(){return te.current},[te.current]),(0,d.useEffect)(function(){(Y||w)&&(P==null||P(!0),g==null||g(!0))},[w,Y]);var re=(0,d.useMemo)(function(){return f?d.cloneElement(f,(0,b.Z)((0,b.Z)({key:"trigger"},f.props),{},{onClick:function(){var T=(0,a.Z)((0,E.Z)().mark(function n(F){var $,I;return(0,E.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:K(!X),($=f.props)===null||$===void 0||(I=$.onClick)===null||I===void 0||I.call($,F);case 2:case"end":return V.stop()}},n)}));function c(n){return T.apply(this,arguments)}return c}()})):null},[K,f,X]),Q=(0,d.useMemo)(function(){var T,c,n,F,$,I;return R.submitter===!1?!1:(0,C.Z)({searchConfig:{submitText:(T=(c=u==null?void 0:u.okText)!==null&&c!==void 0?c:(n=S.locale)===null||n===void 0||(n=n.Modal)===null||n===void 0?void 0:n.okText)!==null&&T!==void 0?T:"\u786E\u8BA4",resetText:(F=($=u==null?void 0:u.cancelText)!==null&&$!==void 0?$:(I=S.locale)===null||I===void 0||(I=I.Modal)===null||I===void 0?void 0:I.cancelText)!==null&&F!==void 0?F:"\u53D6\u6D88"},resetButtonProps:{preventDefault:!0,disabled:y?x:void 0,onClick:function(V){var ae;K(!1),u==null||(ae=u.onCancel)===null||ae===void 0||ae.call(u,V)}}},R.submitter)},[(v=S.locale)===null||v===void 0||(v=v.Modal)===null||v===void 0?void 0:v.cancelText,(o=S.locale)===null||o===void 0||(o=o.Modal)===null||o===void 0?void 0:o.okText,u,R.submitter,K,x,y]),de=(0,d.useCallback)(function(T,c){return(0,B.jsxs)(B.Fragment,{children:[T,N.current&&c?(0,B.jsx)(d.Fragment,{children:(0,L.createPortal)(c,N.current)},"submitter"):c]})},[]),ce=(0,d.useCallback)(function(){var T=(0,a.Z)((0,E.Z)().mark(function c(n){var F,$,I;return(0,E.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return F=_==null?void 0:_(n),y&&F instanceof Promise&&(ne(!0),$=setTimeout(function(){return ne(!1)},y),F.finally(function(){clearTimeout($),ne(!1)})),V.next=4,F;case 4:return I=V.sent,I&&K(!1),V.abrupt("return",I);case 7:case"end":return V.stop()}},c)}));return function(c){return T.apply(this,arguments)}}(),[_,K,y]),oe=(0,i.X)(X);return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(r.Z,(0,b.Z)((0,b.Z)((0,b.Z)({title:A,width:l||800},u),oe),{},{onCancel:function(c){var n;y&&x||(K(!1),u==null||(n=u.onCancel)===null||n===void 0||n.call(u,c))},afterClose:function(){var c;se(),X&&K(!1),u==null||(c=u.afterClose)===null||c===void 0||c.call(u)},footer:R.submitter!==!1?(0,B.jsx)("div",{ref:le,style:{display:"flex",justifyContent:"flex-end"}}):null,children:(0,B.jsx)(s.I,(0,b.Z)((0,b.Z)({formComponentType:"ModalForm",layout:"vertical"},R),{},{onInit:function(c,n){var F;R.formRef&&(R.formRef.current=n),R==null||(F=R.onInit)===null||F===void 0||F.call(R,c,n),te.current=n},formRef:te,submitter:Q,onFinish:function(){var T=(0,a.Z)((0,E.Z)().mark(function c(n){var F;return(0,E.Z)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,ce(n);case 2:return F=I.sent,I.abrupt("return",F);case 4:case"end":return I.stop()}},c)}));return function(c){return T.apply(this,arguments)}}(),contentRender:de,children:p}))})),re]})}},34879:function(q,U,e){e.d(U,{Z:function(){return D}});var E=e(97961),a=e(91604),b=e(1677),m=e(85893);function D(i){return i.showDragger?(0,m.jsx)(a.Z,{max:i.max?i.max:1,title:i.title,label:i.label,required:i.required,rules:[{required:i.required}],fieldProps:{multiple:!!(i.max&&i.max>1),name:"file",accept:i.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(r){return new Promise(function(C){var M;(0,E._2)({path:(M=r.response.data.path)!==null&&M!==void 0?M:""}).then(function(j){C(!0)})})}},name:i.name}):(0,m.jsx)(b.Z,{max:i.max?i.max:1,title:i.title,label:i.label,required:i.required,rules:[{required:i.required}],fieldProps:{multiple:!!(i.max&&i.max>1),name:"file",accept:i.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(r){return new Promise(function(C){var M;(0,E._2)({path:(M=r.response.data.path)!==null&&M!==void 0?M:""}).then(function(j){C(!0)})})}},name:i.name})}},74344:function(q,U,e){var E=e(5574),a=e.n(E),b=e(37476),m=e(38345),D=e(82346),i=e(67294),O=e(40365),r=e(85893),C=(0,i.forwardRef)(function(M,j){(0,i.useImperativeHandle)(j,function(){return{start:function(){for(var g=arguments.length,P=new Array(g),u=0;u<g;u++)P[u]=arguments[u];v(P.join(":")),B(!0)},reset:function(){var g;(g=p.current)===null||g===void 0||g.clear(),B(!1)},show:function(g){var P,u;(P=p.current)===null||P===void 0||P.clear(),(u=p.current)===null||u===void 0||u.write(g),B(!0)}}});var d=(0,i.useState)(!1),L=a()(d,2),s=L[0],B=L[1],Z=(0,i.useState)(""),t=a()(Z,2),h=t[0],v=t[1],o=(0,D.useModel)("subscriber"),p=(0,i.useRef)();return o.addDataHandler("image:"+h,function(f){var g;(g=p.current)===null||g===void 0||g.write(f.data)}),(0,i.useEffect)(function(){var f;(f=p.current)===null||f===void 0||f.fit()},[]),(0,r.jsx)(b.Y,{modalProps:{forceRender:!0},title:"\u6784\u5EFA\u65E5\u5FD7",submitter:!1,width:1e3,onOpenChange:function(g){if(B(g),g){var P,u;(P=p.current)===null||P===void 0||P.clear(),(u=p.current)===null||u===void 0||u.fit()}},open:s,children:(0,r.jsx)(m.Z,{ghost:!0,children:(0,r.jsx)(O.Z,{showInModal:!0,width:"960px",height:"500px",ref:p})})})});U.Z=C},12491:function(q,U,e){e.d(U,{Z:function(){return r}});var E=e(24963),a=e(88484),b=e(62370),m=e(31418),D=e(28036),i=e(67294),O=e(85893);function r(C){var M=(0,i.useContext)(E.Z),j=M.message,d=M.notice,L=M.lang,s=(0,i.useRef)(null),B=m.Z.useApp(),Z=function(){s.current&&(s.current.click(),s.current.onchange=function(h){if(!h||!h.target)return"";var v=new FileReader;v.onload=function(p){var f,g,P=(f=p.target)===null||f===void 0?void 0:f.result;if(C.onLoad)try{C.onLoad&&C.onLoad(P)}catch(u){d.error(u);return}typeof C.onImport=="function"&&(j.success("\u6210\u529F\u5BFC\u5165 ".concat(C.title)),C.onImport(P)),(g=s.current)!==null&&g!==void 0&&g.value&&(s.current.value="")};var o=h.target;if(o.files)try{v.readAsText(o.files[0])}catch(p){d.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(b.Z,{children:(0,O.jsx)(D.ZP,{icon:(0,O.jsx)(a.Z,{}),block:!0,onClick:Z,children:C.title})}),(0,O.jsx)("input",{style:{display:"none"},type:"file",ref:s,name:"importFileInput"})]})}},77096:function(q,U,e){e.r(U),e.d(U,{default:function(){return ee}});var E=e(15009),a=e.n(E),b=e(99289),m=e.n(b),D=e(5574),i=e.n(D),O=e(5966),r=e(85893);function C(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(O.Z,{fieldProps:{min:2,max:255},rules:[{required:!0}],required:!0,placeholder:"\u6307\u5B9AGit\u5730\u5740\uFF0C\u79C1\u6709\u4ED3\u5E93\u8BF7\u9644\u52A0\u6743\u9650\u3002\u4EC5\u652F\u6301Master\u5206\u652F",label:"Git\u4ED3\u5E93\u5730\u5740",name:"buildGit"})})}var M=e(34879),j=e(74344),d=e(67294),L=e(95089),s=e(62370),B=e(184),Z=e(86615),t=e(97462),h=e(97961),v=e(28036),o=e(34041);function p(z){var G=(0,d.useState)([]),k=i()(G,2),x=k[0],ne=k[1];return(0,d.useEffect)(function(){(0,h.MF)().then(function(H){var W=Object.keys(H.data).map(function(X){return H.data[X]});ne(W)})},[]),(0,r.jsx)(s.Z,{children:(0,r.jsxs)(B.a,{trigger:(0,r.jsx)(v.ZP,{block:!0,children:"\u4F7F\u7528\u6A21\u677F\u751F\u6210"}),onFinish:function(W){return new Promise(function(X,K){var N=W[W.language+"EnvVersion"].split("|"),le=i()(N,2),te=le[0],se=le[1],re="FROM ".concat(te,`
# \u5E94\u7528\u76EE\u5F55\u4F4D\u4E8E /app
# \u53EF\u901A\u7BA1\u5BB9\u5668 - \u6587\u4EF6\u7BA1\u7406, \u4E0A\u4F20\u4EE3\u7801\u81F3\u6B64\u76EE\u5F55\u5E76\u4FEE\u6539\u6743\u9650

WORKDIR /app
VOLUME [ "/app" ]
EXPOSE 80

# \u81EA\u5B9A\u4E49\u5B89\u88C5\u7EC4\u4EF6\u3001\u6269\u5C55\u6216\u662F\u5E93, \u4F8B\u5982:
# RUN apk add --no-cache --update vim
`);switch(W.language){case"php":re+=`
                
# \u7AD9\u70B9\u76EE\u5F55\u4F4D\u4E8E /app/wwwroot \u53EF\u4E0A\u4F20\u6216\u662F\u4FEE\u6539\u7AD9\u70B9\u6587\u4EF6
# nginx \u914D\u7F6E\u4F4D\u4E8E /app/nginx/ \u53EF\u4FEE\u6539\u589E\u52A0\u81EA\u5B9A\u4E49\u914D\u7F6E
# \u901A\u8FC7\u8BBF\u95EE\u5BB9\u5668\u8FD0\u884C\u6620\u5C04\u7AEF\u53E3\uFF0C\u67E5\u770B\u73AF\u5883\u53CA\u6269\u5C55\u4FE1\u606F

`,W.language=="php"&&W.phpExt&&(re+="RUN apk add --no-cache --update ",W.phpExt.map(function(Q){re+="php".concat(se,"-").concat(Q," ")}));break;case"golang":re+=`
# \u53EF\u4EE5\u4FEE\u6539 RUN_COMMAND \u73AF\u5883\u53D8\u91CF, \u66F4\u6539\u542F\u52A8\u6267\u884C\u547D\u4EE4
ENV RUN_COMMAND="go version"`;break;default:break}z.onFinish(re),X(!0)})},children:[(0,r.jsx)(Z.Z.Group,{radioType:"button",name:"language",label:"\u7A0B\u5E8F\u8BED\u8A00",options:x.map(function(H){return{label:H.name,value:H.name}}),required:!0}),(0,r.jsx)(t.Z,{name:["language"],children:function(W){var X=W.language;return X?(0,r.jsx)(r.Fragment,{children:x.map(function(K){if(K.name==X)return(0,r.jsxs)("div",{children:[(0,r.jsx)(s.Z,{name:"".concat(K.name,"EnvVersion"),label:"\u73AF\u5883\u7248\u672C",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7A0B\u5E8F\u8FD0\u884C\u7684\u73AF\u5883"}],children:(0,r.jsx)(o.Z,{options:K.env.map(function(N){return{label:N.name,value:N.baseImage}}),placeholder:"\u8BF7\u9009\u62E9\u5177\u4F53\u7684\u73AF\u5883\u7248\u672C"},"".concat(K.name,"Select"))},K.name),K.name=="php"&&(0,r.jsx)(s.Z,{label:"php\u6269\u5C55",name:"phpExt",children:(0,r.jsx)(o.Z,{options:K.ext.map(function(N){return{label:N,value:N}}),mode:"multiple",placeholder:"\u8BF7\u9009\u62E9\u8981\u5B89\u88C5\u7684php\u6269\u5C55"},"phpExtSelect")},"phpExt")]},"envSelect")})}):(0,r.jsx)(r.Fragment,{})}})]})})}var f=e(12491);function g(z){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.Z,{title:"\u5BFC\u5165\u672C\u5730Dockerfile\u6587\u4EF6",onImport:function(k){var x;return(x=z.createFormRef.current)===null||x===void 0||x.setFieldValue("buildDockerfile",k),!0},onLoad:function(k){if(k.indexOf("FROM ")<0)throw new Error("\u5BFC\u5165Dockerfile\u6587\u4EF6\u9519\u8BEF");return!0}}),(0,r.jsx)(p,{onFinish:function(k){var x;(x=z.createFormRef.current)===null||x===void 0||x.setFieldValue("buildDockerfile",k)}}),(0,r.jsx)(s.Z,{shouldUpdate:!0,children:function(k){var x=k.getFieldValue;return(0,r.jsx)(s.Z,{name:"buildDockerfile",children:(0,r.jsx)(L.ZP,{value:x("buildDockerfile"),onChange:function(H){var W;(W=z.createFormRef.current)===null||W===void 0||W.setFieldValue("buildDockerfile",H)},height:"600px",theme:"dark",style:{marginBottom:"20px"}})})}})]})}var P=e(24963),u=e(18148),_=e(75870),y=e(38345),A=e(97269),l=e(64317),w=e(90672),Y=e(82346),R=e(42075),S=e(83062),ue=e(91845);function ee(){var z=(0,d.useContext)(P.Z),G=z.loading,k=z.message,x=(0,d.useRef)(),ne=(0,d.useState)([]),H=i()(ne,2),W=H[0],X=H[1],K=(0,Y.useSearchParams)(),N=i()(K,2),le=N[0],te=N[1],se=(0,d.useState)("dockerfile"),re=i()(se,2),Q=re[0],de=re[1],ce=(0,Y.useNavigate)(),oe=(0,d.useRef)();return(0,d.useEffect)(function(){var T,c=(T=le.get("id"))!==null&&T!==void 0?T:0;c&&(G.show(),(0,u.T8)({id:parseInt(c)}).then(function(n){var F;de(n.data.task.buildType),(F=x.current)===null||F===void 0||F.setFieldsValue({title:n.data.task.title,imageTag:n.data.task.tag,imageRegistry:n.data.task.setting.registry,uploadType:n.data.task.buildType,buildRoot:n.data.task.setting.buildRoot,buildGit:n.data.task.setting.buildGit,buildDockerfile:n.data.task.setting.buildDockerfile,platform:n.data.task.setting.platform})}).finally(function(){G.destroy()}))},[]),(0,r.jsxs)(y.Z,{direction:"column",ghost:!0,gutter:[0,10],children:[(0,r.jsx)(y.Z,{bordered:!0,headerBordered:!0,children:(0,r.jsxs)(A.A,{submitter:{render:function(c,n){return(0,r.jsx)(R.Z,{children:n})}},onFinish:function(){var T=m()(a()().mark(function c(n){var F,$,I,ie,V,ae,me,pe,fe,Ee,_e;return a()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(Q!="containerTar"){J.next=8;break}return J.next=3,(0,h.vC)({tag:n.imageTag,registry:n.imageRegistry,tar:(F=n.containerTar[0].response.data.path)!==null&&F!==void 0?F:"",cmd:n.cmd,workDir:n.workDir,expose:n.expose?n.expose.split(`
`):[],env:n.env?n.env.split(`
`):[],volume:n.volume?n.volume.split(`
`):[]});case 3:return $=J.sent,ce("/image/list"),J.abrupt("return",!0);case 8:return V=(I=le.get("id"))!==null&&I!==void 0?I:"0",ae=W&&W[0]?W[0].fileName:"",me={name:"",arch:""},h.ii.map(function(ve){ve.name==n.platform&&(me=ve)}),pe={id:parseInt(V),tag:n.imageTag,title:n.title,registry:n.imageRegistry,buildRoot:n.buildRoot,buildDockerfile:n.buildDockerfile,buildZip:ae!=null?ae:"",buildGit:n.buildGit,buildType:Q,platform:me.name,PlatformArch:me.arch},n.buildZip&&n.buildZip.length>0&&(pe.buildZip=(fe=n.buildZip[0].response.data.path)!==null&&fe!==void 0?fe:""),(ie=oe.current)===null||ie===void 0||ie.start("build",V),J.next=17,(0,h.fN)(pe);case 17:if(Ee=J.sent,!Ee){J.next=22;break}return(_e=oe.current)===null||_e===void 0||_e.reset(),ce("/image/list/recycle"),J.abrupt("return",!0);case 22:case"end":return J.stop()}},c)}));return function(c){return T.apply(this,arguments)}}(),formRef:x,children:[(0,r.jsx)(O.Z,{label:"\u4EFB\u52A1\u540D\u79F0",name:"title",fieldProps:{onChange:function(c){var n="";if(c.target.value){var F,$=(0,ue.N9)(c.target.value.trim(),{toneType:"none",type:"array"});n=$.join(""),(F=x.current)===null||F===void 0||F.setFieldValue("imageTag",n)}}}}),(0,r.jsxs)(R.Z.Compact,{children:[(0,r.jsx)(l.Z,{width:"md",label:"\u955C\u50CF\u4ED3\u5E93",tooltip:(0,r.jsxs)(r.Fragment,{children:["\u63A8\u9001\u524D\u8BF7\u4FDD\u8BC1\u4ED3\u5E93\u4E2D\u6709\u6307\u5B9A\u7684\u547D\u540D\u7A7A\u95F4, \u5982\u6CA1\u6709\u8BF7\u5148 ",(0,r.jsx)("a",{href:"",target:"_blank",children:"\u6DFB\u52A0\u4ED3\u5E93"})]}),name:"imageRegistry",request:m()(a()().mark(function T(){var c;return a()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,_.Ot)();case 2:return c=F.sent,F.abrupt("return",c.data.list.map(function($){return{value:$.serverAddress,label:$.title+"("+$.serverAddress+")"}}));case 4:case"end":return F.stop()}},T)}))}),(0,r.jsx)(O.Z,{rules:[{required:!0}],width:"lg",required:!0,tooltip:"\u4F8B\u5982: name:tag\u3001namespace/name:tag\u3001registry/namespace/name:tag",placeholder:"\u53EA\u80FD\u4F7F\u7528\u5C0F\u5199\u82F1\u6587\u5B57\u7B26\u3001\u6570\u5B57\u3001_\u3001-\u3001",label:"\u955C\u50CFTag",name:"imageTag"})]}),(0,r.jsx)(Z.Z.Group,{name:"uploadType",label:"\u6784\u5EFA\u65B9\u5F0F",initialValue:Q,options:[{label:(0,r.jsx)(S.Z,{title:"\u901A\u8FC7 Dockerfile \u6587\u4EF6\u5FEB\u901F\u6784\u5EFA\u955C\u50CF",children:"Dockerfile"}),value:"dockerfile"},{label:(0,r.jsx)(S.Z,{title:"\u5C06 Dockerfile \u6587\u4EF6\u4E0E\u6784\u5EFA\u955C\u50CF\u7528\u5230\u7684\u8D44\u6E90\uFF0C\u901A\u8FC7\u4E0A\u4F20 Zip \u5305\u7684\u5F62\u5F0F\u6784\u5EFA\u955C\u50CF",children:"Zip\u5305"}),value:"zip"},{label:(0,r.jsx)(S.Z,{title:"\u5C06 Dockerfile \u6587\u4EF6\u4E0E\u6784\u5EFA\u955C\u50CF\u7528\u5230\u7684\u8D44\u6E90\u653E\u7F6E\u5230 Git \u4ED3\u5E93\u4E2D\uFF0C\u53EF\u4EE5\u6301\u7EED\u6027\u7684\u6784\u5EFA\u955C\u50CF",children:"Git\u6E90\u7801\u4ED3\u5E93"}),value:"git"},{label:(0,r.jsx)(S.Z,{title:"\u4E0A\u4F20\u5BB9\u5668\u5BFC\u51FA\u7684 Tar \u5305\uFF0C\u5E76\u81EA\u5B9A\u4E49\u53C2\u6570\u6784\u5EFA\u955C\u50CF\u3002\u5982\u679C\u4F60\u4E0D\u9700\u8981\u4FEE\u6539\u5BB9\u5668\u539F\u59CB\u914D\u7F6E\uFF0C\u53EF\u4EE5\u5728\u5BB9\u5668\u8BE6\u60C5\u9875\u4F7F\u7528\u3010\u5C06\u5BB9\u5668\u4FDD\u5B58\u4E3A\u955C\u50CF\u3011\u529F\u80FD",children:"\u5BFC\u5165\u5BB9\u5668Tar\u5305"}),value:"containerTar"}],fieldProps:{onChange:function(c){de(c.target.value)}}}),(0,r.jsx)(t.Z,{name:["uploadType"],children:function(c){var n=c.uploadType;if(n=="containerTar")return[(0,r.jsx)(O.Z,{tooltip:"\u6307\u5B9A\u5BFC\u5165\u540E\u7684\u955C\u50CF\u5DE5\u4F5C\u76EE\u5F55\uFF0C\u4E00\u822C\u6307\u5411\u4EE3\u7801\u7684\u6240\u5728\u76EE\u5F55",label:"\u5DE5\u4F5C\u76EE\u5F55",name:"workDir",placeholder:"\u9ED8\u8BA4\u4E3A / \u76EE\u5F55"},"workDir"),(0,r.jsx)(O.Z,{required:!0,tooltip:"\u901A\u8FC7\u5BB9\u5668\u5BFC\u5165\u955C\u50CF\u65F6\uFF0C\u5FC5\u987B\u6307\u5B9A\u542F\u52A8\u547D\u4EE4\uFF0C\u5426\u5219\u518D\u521B\u5EFA\u65F6\u65E0\u6CD5\u542F\u52A8",rules:[{required:!0}],label:"CMD",name:"cmd"},"cmd"),(0,r.jsx)(w.Z,{tooltip:"\u6307\u5B9A\u5BFC\u5165\u540E\u7684\u955C\u50CF\u5BF9\u5916\u66B4\u9732\u7684\u7AEF\u53E3\uFF0C\u4E00\u884C\u6307\u5B9A\u4E00\u4E2A\u7AEF\u53E3",label:"\u66B4\u9732\u7AEF\u53E3",name:"expose",placeholder:`80 
9000`},"expose"),(0,r.jsx)(w.Z,{tooltip:"\u6307\u5B9A\u5BFC\u5165\u540E\u7684\u955C\u50CF\u9700\u8981\u914D\u7F6E\u7684\u73AF\u5883\u53D8\u91CF\uFF0C\u4E00\u884C\u6307\u5B9A\u4E00\u4E2A\u73AF\u5883\u53D8\u91CF",label:"\u73AF\u5883\u53D8\u91CF",name:"env",placeholder:`TEST_VALUE=123 
TEST_NO_VALUE=`},"env"),(0,r.jsx)(w.Z,{tooltip:"\u6307\u5B9A\u5BFC\u5165\u540E\u7684\u955C\u50CF\u9700\u8981\u6301\u4E45\u5316\u7684\u76EE\u5F55\uFF0C\u4E00\u884C\u6307\u5B9A\u4E00\u4E2A\u76EE\u5F55",label:"\u5B58\u50A8\u5377\u76EE\u5F55",name:"volume",placeholder:`/app 
/home`},"volume")];if(n=="zip"||n=="git")return(0,r.jsx)(O.Z,{name:"buildRoot",label:"Dockerfile\u6587\u4EF6\u4F4D\u7F6E",tooltip:"\u6307\u5B9ADockerfile\u6240\u5728\u7684\u76EE\u5F55",fieldProps:{addonBefore:"\u9ED8\u8BA4\u4EE5\u5305\u6216\u662F\u4ED3\u5E93\u76EE\u5F55\u5F00\u59CB\uFF08/\uFF09"},placeholder:"/Dockerfile"})}}),Q=="zip"&&(0,r.jsx)(M.Z,{required:!0,label:"\u4E0A\u4F20\u6784\u5EFA\u5305 (\u53EA\u5141\u8BB8\u4E0A\u4F20 .zip \u6587\u4EF6\uFF0C\u4E14\u4E0E\u5305\u4E2D\u7684 Dockerfile \u6307\u5B9A\u7684\u76EE\u5F55\u4FDD\u6301\u4E00\u81F4)",name:"buildZip",accept:".zip"}),Q=="containerTar"&&(0,r.jsx)(M.Z,{required:!0,label:"\u5BFC\u5165\u5BB9\u5668\u5305\uFF08\u53EA\u5141\u8BB8\u4E0A\u4F20 .tar \u6587\u4EF6\uFF0C\u901A\u8FC7\u5BFC\u51FA\u5BB9\u5668\u751F\u6210\uFF09",name:"containerTar",accept:".tar"}),Q=="git"&&(0,r.jsx)(C,{}),Q=="dockerfile"&&(0,r.jsx)(g,{createFormRef:x})]})}),(0,r.jsx)(j.Z,{ref:oe})]})}},97961:function(q,U,e){e.d(U,{GH:function(){return j},MF:function(){return B},_2:function(){return L},fN:function(){return O},ii:function(){return i},vC:function(){return C}});var E=e(15009),a=e.n(E),b=e(99289),m=e.n(b),D=e(82346),i=[{name:"linux/amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"linux/arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"linux/i386",arch:"386",search:[]},{name:"linux/arm/v6",arch:"arm",search:[]},{name:"linux/arm/v7",arch:"arm",search:[]},{name:"linux/arm/v8",arch:"arm64",search:[]},{name:"linux/ppc64le",arch:"ppc64le",search:[]},{name:"linux/riscv64",arch:"riscv64",search:[]}];function O(t){return r.apply(this,arguments)}function r(){return r=m()(a()().mark(function t(h){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,D.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:h}));case 1:case"end":return o.stop()}},t)})),r.apply(this,arguments)}function C(t){return M.apply(this,arguments)}function M(){return M=m()(a()().mark(function t(h){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,D.request)("/api/app/image/import-by-container-tar",{method:"POST",data:h}));case 1:case"end":return o.stop()}},t)})),M.apply(this,arguments)}function j(t){return d.apply(this,arguments)}function d(){return d=m()(a()().mark(function t(h){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,D.request)("/api/app/image/import-by-image-tar",{method:"POST",data:h}));case 1:case"end":return o.stop()}},t)})),d.apply(this,arguments)}function L(t){return s.apply(this,arguments)}function s(){return s=m()(a()().mark(function t(h){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,D.request)("/api/common/attach/delete",{method:"POST",data:h});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},t)})),s.apply(this,arguments)}function B(){return Z.apply(this,arguments)}function Z(){return Z=m()(a()().mark(function t(){return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,D.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return v.stop()}},t)})),Z.apply(this,arguments)}},18148:function(q,U,e){e.d(U,{$q:function(){return s},Fj:function(){return f},KG:function(){return i},KX:function(){return P},T8:function(){return d},Xn:function(){return M},ao:function(){return Z},c5:function(){return o},c7:function(){return h}});var E=e(15009),a=e.n(E),b=e(99289),m=e.n(b),D=e(82346);function i(_){return O.apply(this,arguments)}function O(){return O=m()(a()().mark(function _(y){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,D.request)("/api/app/image/get-list",{method:"POST",data:y}));case 1:case"end":return l.stop()}},_)})),O.apply(this,arguments)}function r(_){return C.apply(this,arguments)}function C(){return C=_asyncToGenerator(_regeneratorRuntime().mark(function _(y){return _regeneratorRuntime().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,request("/api/app/log/image-build",{method:"POST",data:y});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},_)})),C.apply(this,arguments)}function M(_){return j.apply(this,arguments)}function j(){return j=m()(a()().mark(function _(y){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,D.request)("/api/app/image/get-list-build",{method:"POST",data:y}));case 1:case"end":return l.stop()}},_)})),j.apply(this,arguments)}function d(_){return L.apply(this,arguments)}function L(){return L=m()(a()().mark(function _(y){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,D.request)("/api/app/image/get-build-task",{method:"POST",data:y});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},_)})),L.apply(this,arguments)}function s(_){return B.apply(this,arguments)}function B(){return B=m()(a()().mark(function _(y){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,D.request)("/api/app/image/delete-build-task",{method:"POST",data:y});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},_)})),B.apply(this,arguments)}function Z(_){return t.apply(this,arguments)}function t(){return t=m()(a()().mark(function _(y){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,D.request)("/api/app/image/image-delete",{method:"POST",data:y});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},_)})),t.apply(this,arguments)}function h(){return v.apply(this,arguments)}function v(){return v=m()(a()().mark(function _(){return a()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,D.request)("/api/app/image/image-prune",{method:"POST"});case 2:return A.abrupt("return",A.sent);case 3:case"end":return A.stop()}},_)})),v.apply(this,arguments)}function o(){return p.apply(this,arguments)}function p(){return p=m()(a()().mark(function _(){return a()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,D.request)("/api/app/image/build-prune",{method:"POST"});case 2:return A.abrupt("return",A.sent);case 3:case"end":return A.stop()}},_)})),p.apply(this,arguments)}function f(_){return g.apply(this,arguments)}function g(){return g=m()(a()().mark(function _(y){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,D.request)("/api/app/image/update-title",{method:"POST",data:y});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},_)})),g.apply(this,arguments)}function P(_){return u.apply(this,arguments)}function u(){return u=m()(a()().mark(function _(y){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,D.request)("/api/app/image/tag-sync",{method:"POST",data:y}));case 1:case"end":return l.stop()}},_)})),u.apply(this,arguments)}},75870:function(q,U,e){e.d(U,{Ot:function(){return i},ZH:function(){return r},ix:function(){return M},t1:function(){return d}});var E=e(15009),a=e.n(E),b=e(99289),m=e.n(b),D=e(82346);function i(s){return O.apply(this,arguments)}function O(){return O=m()(a()().mark(function s(B){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,D.request)("/api/common/registry/get-list",{method:"POST",data:B}));case 1:case"end":return t.stop()}},s)})),O.apply(this,arguments)}function r(s){return C.apply(this,arguments)}function C(){return C=m()(a()().mark(function s(B){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,D.request)("/api/common/registry/create",{method:"POST",data:B}));case 1:case"end":return t.stop()}},s)})),C.apply(this,arguments)}function M(s){return j.apply(this,arguments)}function j(){return j=m()(a()().mark(function s(B){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,D.request)("/api/common/registry/delete",{method:"POST",data:B}));case 1:case"end":return t.stop()}},s)})),j.apply(this,arguments)}function d(s){return L.apply(this,arguments)}function L(){return L=m()(a()().mark(function s(B){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,D.request)("/api/common/registry/get-detail",{method:"POST",data:B}));case 1:case"end":return t.stop()}},s)})),L.apply(this,arguments)}},85576:function(q,U,e){e.d(U,{Z:function(){return o}});var E=e(56080),a=e(38657),b=e(56745),m=e(67294),D=e(93967),i=e.n(D),O=e(40974),r=e(8745),C=e(53124),M=e(35792),j=e(32409),d=e(4941),L=e(71194),s=function(p,f){var g={};for(var P in p)Object.prototype.hasOwnProperty.call(p,P)&&f.indexOf(P)<0&&(g[P]=p[P]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,P=Object.getOwnPropertySymbols(p);u<P.length;u++)f.indexOf(P[u])<0&&Object.prototype.propertyIsEnumerable.call(p,P[u])&&(g[P[u]]=p[P[u]]);return g};const B=p=>{const{prefixCls:f,className:g,closeIcon:P,closable:u,type:_,title:y,children:A,footer:l}=p,w=s(p,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:Y}=m.useContext(C.E_),R=Y(),S=f||Y("modal"),ue=(0,M.Z)(R),[ee,z,G]=(0,L.ZP)(S,ue),k=`${S}-confirm`;let x={};return _?x={closable:u!=null?u:!1,title:"",footer:"",children:m.createElement(j.O,Object.assign({},p,{prefixCls:S,confirmPrefixCls:k,rootPrefixCls:R,content:A}))}:x={closable:u!=null?u:!0,title:y,footer:l!==null&&m.createElement(d.$,Object.assign({},p)),children:A},ee(m.createElement(O.s,Object.assign({prefixCls:S,className:i()(z,`${S}-pure-panel`,_&&k,_&&`${k}-${_}`,g,G,ue)},w,{closeIcon:(0,d.b)(S,P),closable:u},x)))};var Z=(0,r.i)(B),t=e(94423);function h(p){return(0,E.ZP)((0,E.uW)(p))}const v=b.Z;v.useModal=t.Z,v.info=function(f){return(0,E.ZP)((0,E.cw)(f))},v.success=function(f){return(0,E.ZP)((0,E.vq)(f))},v.error=function(f){return(0,E.ZP)((0,E.AQ)(f))},v.warning=h,v.warn=h,v.confirm=function(f){return(0,E.ZP)((0,E.Au)(f))},v.destroyAll=function(){for(;a.Z.length;){const f=a.Z.pop();f&&f()}},v.config=E.ai,v._InternalPanelDoNotUseOrYouWillBeFired=Z;var o=v}}]);
