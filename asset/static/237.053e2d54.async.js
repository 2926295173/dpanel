"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[237],{91058:function(L,M,e){var O=e(5574),s=e.n(O),j=e(89035),P=e(38345),h=e(17186),B=e(24739),E=e(5966),I=e(42075),u=e(14726),g=e(85576),i=e(67294),c=e(95089),A=e(89063),t=e(85893),D="docker-image",m=(0,i.forwardRef)(function(r,d){var o=(0,i.useState)(D),a=s()(o,2),l=a[0],_=a[1],n=(0,i.useRef)(),v=(0,i.useState)(""),p=s()(v,2),T=p[0],U=p[1],b=function(){l!="code"?_("code"):_(D)};(0,i.useImperativeHandle)(d,function(){return{addEnvItem:function(f,x){var F,W=(F=n.current)===null||F===void 0?void 0:F.getList(),y=!1;if(W==null||W.map(function(w){if(w.name==f){y=!0;return}}),!y){var Z;(Z=n.current)===null||Z===void 0||Z.add({name:f,value:x})}},clear:function(){var f;(f=n.current)===null||f===void 0||(f=f.getList())===null||f===void 0||f.map(function(x,F){var W;(W=n.current)===null||W===void 0||W.remove(F)})}}});function R(C){try{var f,x;C==""&&(C=K());for(var F=(f=(x=n.current)===null||x===void 0||(x=x.getList())===null||x===void 0?void 0:x.length)!==null&&f!==void 0?f:0,W=F;W>=0;W--){var y;(y=n.current)===null||y===void 0||y.remove(W)}var Z=C.split(`
`),w=0;Z.map(function(S){var V,H=S.split("=");H.length<2||((V=n.current)===null||V===void 0||V.add({name:H[0],value:H.slice(1).join("=")},w),w++)})}catch(S){console.log(S)}}function K(){if(n&&n.current&&n.current.getList){var C,f=(C=n.current)===null||C===void 0?void 0:C.getList();if(f){var x=[];return f.map(function(F){x.push("".concat(F.name,"=").concat(F.value))}),x.join(`
`)}else return""}else return""}return(0,t.jsxs)(P.Z,{ghost:r.showCardGhost,title:"\u73AF\u5883\u53D8\u91CF",headerBordered:!0,extra:(0,t.jsxs)(I.Z,{children:[r.showImportButton&&(0,t.jsx)("div",{style:{marginBottom:"-25px"},children:(0,t.jsx)(A.Z,{title:"\u5BFC\u5165 env \u6587\u4EF6",onImport:function(f){return R(f),!0},onLoad:function(f){if(f.indexOf("=")<0)throw new Error("\u5BFC\u5165env\u6587\u4EF6\u9519\u8BEF");return!0}})}),(0,t.jsx)(u.ZP,{icon:(0,t.jsx)(j.Z,{}),type:l=="code"?"primary":"default",onClick:b,children:"\u4EE3\u7801\u6A21\u5F0F"},"code")]}),children:[(0,t.jsx)(h.u,{name:r.name?r.name:"environment",actionRef:n,creatorButtonProps:r.showAddButton?{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u73AF\u5883\u53D8\u91CF"}:!1,copyIconProps:!1,min:0,children:(0,t.jsxs)(B.UW,{children:[(0,t.jsx)(E.Z,{width:r.showInDrawer?"sm":"md",name:"name",label:"\u53D8\u91CF\u540D",required:!0,rules:[{required:!0}],disabled:r.showDisableName,placeholder:"\u8F93\u5165\u53D8\u91CF\u540D\u79F0"}),(0,t.jsx)(E.Z,{width:r.showInDrawer?"sm":"md",name:"value",label:"\u53D8\u91CF\u503C",rules:[{required:!!r.requireValue}],placeholder:"\u8F93\u5165\u53D8\u91CF\u503C\uFF0C\u53EF\u4EE5\u4E3A\u7A7A"})]})}),(0,t.jsx)(g.Z,{width:"800px",open:l=="code",onCancel:function(){return _("docker-image")},onOk:function(){R(T),_("docker-image")},children:(0,t.jsx)(c.ZP,{onChange:function(f){return U(f)},value:K(),height:"680px",theme:"light"})})]})});M.Z=m},82034:function(L,M,e){var O=e(5574),s=e.n(O),j=e(35880),P=e(38345),h=e(52688),B=e(97462),E=e(17186),I=e(24739),u=e(5966),g=e(42075),i=e(67294),c=e(85893),A=(0,i.forwardRef)(function(t,D){var m=(0,i.useState)(""),r=s()(m,2),d=r[0],o=r[1],a=(0,i.useRef)(),l=(0,i.useContext)(j.Z),_=l.createFormRef;return(0,i.useImperativeHandle)(D,function(){return{setExposePort:function(v){if(v){var p,T,U=(p=(T=a.current)===null||T===void 0?void 0:T.getList())!==null&&p!==void 0?p:[];Object.keys(v).map(function(b){var R=!1;if(U.map(function(C){C.dest==b&&(R=!0)}),!R){var K;(K=a.current)===null||K===void 0||K.add({host:"",dest:b})}})}},setHostname:function(v){o(v)},addPortItem:function(v,p){var T,U=(T=a.current)===null||T===void 0?void 0:T.getList(),b=!1;if(U==null||U.map(function(K){if(K.host==v){b=!0;return}}),!b){var R;(R=a.current)===null||R===void 0||R.add({host:String(v),dest:String(p)})}}}}),(0,c.jsx)(P.Z,{title:"\u7ED1\u5B9A\u7AEF\u53E3",tooltip:"\u8BBF\u95EE\u7AEF\u53E3\u7559\u7A7A\u65F6\u968F\u673A\u751F\u6210\u7AEF\u53E3\uFF0C\u5168\u90E8\u5220\u9664\u5219\u8868\u793A\u4E0D\u66B4\u9732\u7AEF\u53E3",headerBordered:!0,extra:(0,c.jsxs)(g.Z,{children:[t.showBindHost&&(0,c.jsx)(h.Z,{name:"useHostNetwork",fieldProps:{checkedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",unCheckedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",onChange:function(v){if(v){var p;(p=_.current)===null||p===void 0||p.setFieldsValue({bindIpV6:!1,publishAllPorts:!1})}}}}),t.showBindIpV6&&(0,c.jsx)(B.Z,{name:["siteName","useHostNetwork"],children:function(v){var p=v.useHostNetwork;return(0,c.jsx)(h.Z,{name:"publishAllPorts",fieldProps:{checkedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3",unCheckedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3"},disabled:p},"publishAllPorts")}}),t.showBindIpV6&&(0,c.jsx)(B.Z,{name:["siteName","useHostNetwork"],children:function(v){var p=v.useHostNetwork;return(0,c.jsx)(h.Z,{name:"bindIpV6",fieldProps:{checkedChildren:"IpV6",unCheckedChildren:"IpV6"},disabled:p},"bindIpV6")}})]}),children:(0,c.jsx)(B.Z,{name:["useHostNetwork","bindIpV6","publishAllPorts"],children:function(v){var p=v.useHostNetwork,T=v.bindIpV6,U=v.publishAllPorts;if(!p&&!U)return(0,c.jsx)(E.u,{name:"ports",actionRef:a,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BF9\u5916\u90E8\u8BBF\u95EE"},min:0,copyIconProps:!1,children:(0,c.jsxs)(I.UW,{children:[(0,c.jsx)(u.Z,{width:t.showInDrawer?"sm":"md",name:"host",label:"\u5916\u90E8\u8BBF\u95EE\u7AEF\u53E3",tooltip:"\u5BF9\u5916\u8BBF\u95EE\u53EF\u4EE5\u901A\u8FC7\u6DFB\u52A0\u8BBF\u95EE\u7AEF\u53E3\u6216\u662F\u521B\u5EFA\u5B8C\u6210\u540E\u5BF9\u5BB9\u5668\u7ED1\u5B9A\u57DF\u540D",placeholder:"\u7559\u7A7A\u5C06\u4F7F\u7528\u968F\u673A\u7AEF\u53E3\uFF0C\u7ED1\u5B9AIpV6\u5FC5\u586B",required:T,rules:[{required:T}]}),(0,c.jsx)(u.Z,{label:"\u5BB9\u5668\u5185\u7AEF\u53E3",width:t.showInDrawer?"sm":"md",name:"dest",placeholder:"\u6784\u5EFA\u65F6 Expose \u6307\u5B9A\u7684\u7AEF\u53E3",required:!0,rules:[{required:!0}]})]})})}})})});M.Z=A},10523:function(L,M,e){var O=e(38345),s=e(17186),j=e(5966),P=e(86615),h=e(24739),B=e(64317),E=e(42075),I=e(67294),u=e(85893),g=(0,I.forwardRef)(function(i,c){var A=(0,I.useRef)(),t=(0,I.useRef)();return(0,I.useImperativeHandle)(c,function(){return{setDefaultDestPath:function(m){var r,d,o=(r=(d=A.current)===null||d===void 0?void 0:d.getList())!==null&&r!==void 0?r:[];m.length!=0&&m.filter(function(a){return a!=""}).map(function(a){var l=!1;if(o.map(function(n){if(n.dest==a){l=!0;return}}),!l){var _;(_=A.current)===null||_===void 0||_.add({dest:a,permission:"write",inImage:!0,edit:!1})}})},addUserVolumeItem:function(m,r){var d,o=(d=t.current)===null||d===void 0?void 0:d.getList(),a=!1;if(o==null||o.map(function(_){if(_.dest==r){a=!0;return}}),!a){var l;(l=t.current)===null||l===void 0||l.add({host:m,dest:r})}}}}),(0,u.jsxs)(u.Fragment,{children:[i.showDefault&&(0,u.jsx)(O.Z,{title:"\u9ED8\u8BA4\u5B58\u50A8\uFF08Volume\uFF09",subTitle:"\u9ED8\u8BA4\u5B58\u50A8\u4E0E\u7AD9\u70B9\u6807\u8BC6\u4FDD\u6301\u4E00\u81F4",headerBordered:!0,children:(0,u.jsx)(s.u,{name:"volumesDefault",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u76EE\u5F55\u5230\u9ED8\u8BA4\u5B58\u50A8"},actionRef:A,copyIconProps:!1,min:0,children:function(m,r,d){var o=d.getCurrentRowData();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.Z,{width:"lg",name:"dest",label:"\u5BB9\u5668\u5185\u8DEF\u5F84",required:!0,rules:[{required:!0}],disabled:o.inImage}),(0,u.jsx)(P.Z.Group,{hidden:!0,name:"inImage",label:"\u955C\u50CF\u5185\u6302\u8F7D",valueEnum:{1:"\u662F",0:"\u5426"}})]})}})}),(0,u.jsx)(O.Z,{title:"\u81EA\u5B9A\u4E49\u6302\u8F7D\u6216\u662F\u5B58\u50A8\u5377",tooltip:"\u6302\u8F7D\u53EF\u4EE5\u662F\u5BBF\u4E3B\u673A\u7684\u76EE\u5F55\u6216\u662F\u6587\u4EF6\uFF0C\u4E5F\u53EF\u4EE5\u6307\u5B9A\u5B58\u50A8\u5377\u540D\uFF08\u81EA\u52A8\u65B0\u5EFA\uFF09\u3002",headerBordered:!0,direction:"column",children:(0,u.jsx)(s.u,{actionRef:t,name:"volumes",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u6620\u5C04\u76EE\u5F55"},copyIconProps:!1,min:0,children:(0,u.jsxs)(h.UW,{children:[(0,u.jsxs)(E.Z.Compact,{children:[(0,u.jsx)(j.Z,{label:"\u5BBF\u4E3B\u673A\u6587\u4EF6\u3001\u76EE\u5F55\u6216\u5B58\u50A8\u5377",name:"host",width:i.showInDrawer?"sm":"md",required:!0,rules:[{required:!0}]}),(0,u.jsx)(B.Z,{label:" ",valueEnum:{write:"\u8BFB\u5199",readonly:"\u53EA\u8BFB"},initialValue:"write",name:"permission"})]}),(0,u.jsx)(j.Z,{label:"\u5BB9\u5668\u5185\u8DEF\u5F84",name:"dest",width:i.showInDrawer?"sm":"md",required:!0,rules:[{required:!0}],disabled:i.disabledUserVolumeDest})]})})})]})});M.Z=g},92067:function(L,M,e){e.d(M,{Z:function(){return D}});var O=e(15009),s=e.n(O),j=e(99289),P=e.n(j),h=e(60335),B=e(27496),E=e(64789),I=e(10641),u=e(42075),g=e(66309),i=e(25593),c=e(14726),A=e(67294),t=e(85893);function D(m){return(0,t.jsx)(I.Z,{columns:[{title:"\u5BB9\u5668\u540D\u79F0",dataIndex:"names",render:function(d,o,a,l){return(0,t.jsx)(u.Z,{direction:"vertical",style:{textAlign:"left"},children:o==null?void 0:o.Names.map(function(_){return _})},o.Id)}},{title:"\u7AEF\u53E3",dataIndex:"ports",search:!1,render:function(d,o,a,l){return o!=null&&o.Ports?(0,t.jsx)(u.Z,{direction:"vertical",style:{textAlign:"left"},children:o==null?void 0:o.Ports.map(function(_,n){return(0,t.jsx)(g.Z,{color:"#2db7f5",icon:_.PublicPort?(0,t.jsx)(B.Z,{}):"",children:"".concat(_.PublicPort?_.IP+":"+_.PublicPort+"->":"").concat(_.PrivatePort,"/").concat(_.Type)},n)})},o.Id):(0,t.jsx)(t.Fragment,{})}},{title:"\u8FD0\u884C\u5BB9\u5668",search:!1,render:function(d,o,a,l){return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.Z.Text,{ellipsis:{tooltip:o.Image},children:o.Image},o.Id)})}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",ellipsis:!0,width:100,render:function(d,o,a,l){return[(0,t.jsx)(c.ZP,{type:"link",onClick:function(){(0,h.jV)({md5:o.Id}).then(function(n){return m.onSelect&&m.onSelect(n.data.info),!0})},children:(0,t.jsx)(E.Z,{})},o.Id)]}}],rowKey:"Id",request:function(){var r=P()(s()().mark(function d(o,a,l){return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(v,p){(0,h.IE)({tag:o.names}).then(function(T){var U={data:T.data.list,success:!0,total:T.data.list.length};v(U)})}));case 1:case"end":return n.stop()}},d)}));return function(d,o,a){return r.apply(this,arguments)}}(),pagination:{pageSize:5}})}},44349:function(L,M,e){var O=e(97857),s=e.n(O),j=e(17186),P=e(24739),h=e(5966),B=e(67294),E=e(85893),I=(0,B.forwardRef)(function(u,g){var i=(0,B.useRef)();(0,B.useImperativeHandle)(g,function(){return{addItem:function(t,D){var m,r=(m=i.current)===null||m===void 0?void 0:m.getList(),d=!1;if(r==null||r.map(function(a){if(a.name==t){d=!0;return}}),!d){var o;(o=i.current)===null||o===void 0||o.add({name:t,value:D})}},clear:function(){var t;(t=i.current)===null||t===void 0||(t=t.getList())===null||t===void 0||t.map(function(D,m){var r;(r=i.current)===null||r===void 0||r.remove(m)})}}});var c={};return u.hideCopyButton===!0&&(c.copyIconProps=!1),u.hideDeleteButton===!0&&(c.deleteIconProps=!1),(0,E.jsx)(j.u,s()(s()({label:u.label,name:u.name,actionRef:i,creatorButtonProps:u.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(u.label?u.label:u.name)}:!1,min:u.min?u.min:0},c),{},{children:function(t,D,m){return(0,E.jsx)(P.UW,{children:u.items.map(function(r){return r.render?(0,E.jsx)("div",{children:r.render&&r.render(t,D,m)},"".concat(u.name,"-").concat(r.name,"-").concat(t.key)):(0,E.jsx)(h.Z,{width:r.width,name:r.name,label:r.label,required:r.required,rules:[{required:r.required}],disabled:r.disabled,placeholder:r.placeholder},"".concat(u.name,"-").concat(r.name,"-").concat(t.key))})})}}))});M.Z=I},89063:function(L,M,e){e.d(M,{Z:function(){return I}});var O=e(24963),s=e(88484),j=e(31418),P=e(72723),h=e(14726),B=e(67294),E=e(85893);function I(u){var g=(0,B.useContext)(O.Z),i=g.message,c=g.notice,A=g.lang,t=(0,B.useRef)(null),D=j.Z.useApp(),m=function(){t.current&&(t.current.click(),t.current.onchange=function(d){if(!d||!d.target)return"";var o=new FileReader;o.onload=function(l){var _,n,v=(_=l.target)===null||_===void 0?void 0:_.result;if(u.onLoad)try{u.onLoad&&u.onLoad(v)}catch(p){c.error(p);return}typeof u.onImport=="function"&&u.onImport(v),(n=t.current)!==null&&n!==void 0&&n.value&&(t.current.value="")};var a=d.target;if(a.files)try{o.readAsText(a.files[0])}catch(l){c.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(P.Z.Item,{name:"importFile",label:u.label,children:(0,E.jsx)(h.ZP,{icon:(0,E.jsx)(s.Z,{}),block:!0,onClick:m,children:u.title})}),(0,E.jsx)("input",{style:{display:"none"},type:"file",ref:t,name:"importFileInput"})]})}},24963:function(L,M,e){var O=e(67294),s=(0,O.createContext)({});M.Z=s},35880:function(L,M,e){var O=e(67294),s=(0,O.createContext)({});M.Z=s},60335:function(L,M,e){e.d(M,{IE:function(){return I},IW:function(){return B},KK:function(){return t},LJ:function(){return m},Re:function(){return d},eE:function(){return c},jV:function(){return g}});var O=e(15009),s=e.n(O),j=e(99289),P=e.n(j),h=e(54006);function B(a){return E.apply(this,arguments)}function E(){return E=P()(s()().mark(function a(l){return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,h.request)("/api/app/container/status",{method:"POST",data:l}));case 1:case"end":return n.stop()}},a)})),E.apply(this,arguments)}function I(a){return u.apply(this,arguments)}function u(){return u=P()(s()().mark(function a(l){return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,h.request)("/api/app/container/get-list",{data:l,method:"POST"}));case 1:case"end":return n.stop()}},a)})),u.apply(this,arguments)}function g(a){return i.apply(this,arguments)}function i(){return i=P()(s()().mark(function a(l){return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,h.request)("/api/app/container/get-detail",{data:l,method:"POST"}));case 1:case"end":return n.stop()}},a)})),i.apply(this,arguments)}function c(a){return A.apply(this,arguments)}function A(){return A=P()(s()().mark(function a(l){return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,h.request)("/api/app/container/update",{data:l,method:"POST"}));case 1:case"end":return n.stop()}},a)})),A.apply(this,arguments)}function t(){return D.apply(this,arguments)}function D(){return D=P()(s()().mark(function a(){return s()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,h.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return _.stop()}},a)})),D.apply(this,arguments)}function m(a){return r.apply(this,arguments)}function r(){return r=P()(s()().mark(function a(l){return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,h.request)("/api/app/container/export",{method:"POST",data:l,responseType:"blob"}));case 1:case"end":return n.stop()}},a)})),r.apply(this,arguments)}function d(a){return o.apply(this,arguments)}function o(){return o=P()(s()().mark(function a(l){return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,h.request)("/api/app/container/commit",{method:"POST",data:l}));case 1:case"end":return n.stop()}},a)})),o.apply(this,arguments)}}}]);
