!(function(){var k=Object.defineProperty,x=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var A=(P,m,h)=>m in P?k(P,m,{enumerable:!0,configurable:!0,writable:!0,value:h}):P[m]=h,W=(P,m)=>{for(var h in m||(m={}))U.call(m,h)&&A(P,h,m[h]);if(I)for(var h of I(m))K.call(m,h)&&A(P,h,m[h]);return P},B=(P,m)=>x(P,j(m));(self.webpackChunk=self.webpackChunk||[]).push([[3079],{74344:function(P,m,h){"use strict";var M=h(5574),p=h.n(M),E=h(37476),c=h(38345),f=h(82346),u=h(67294),b=h(35887),O=h(3616),e=h(85893),t=(0,u.forwardRef)(function(n,i){(0,u.useImperativeHandle)(i,function(){return{start:function(){for(var D=arguments.length,g=new Array(D),o=0;o<D;o++)g[o]=arguments[o];R(g.join(":")),_(!0)},reset:function(){var D;(D=L.current)===null||D===void 0||D.clear(),_(!1)},show:function(D){var g,o;(g=L.current)===null||g===void 0||g.clear(),(o=L.current)===null||o===void 0||o.write(D),_(!0)}}});var r=(0,u.useState)(!1),s=p()(r,2),a=s[0],_=s[1],d=(0,u.useState)(""),C=p()(d,2),T=C[0],R=C[1],y=(0,f.useModel)("subscriber"),L=(0,u.useRef)();return y.addDataHandler("image:"+T,function(v){var D;(D=L.current)===null||D===void 0||D.write(v.data)}),(0,u.useEffect)(function(){var v;(v=L.current)===null||v===void 0||v.fit()},[]),(0,e.jsx)(E.Y,{modalProps:{forceRender:!0,width:O.ob},title:"\u6784\u5EFA\u65E5\u5FD7",submitter:!1,width:1e3,onOpenChange:function(D){if(_(D),D){var g,o;(g=L.current)===null||g===void 0||g.clear(),(o=L.current)===null||o===void 0||o.fit()}},open:a,children:(0,e.jsx)(c.Z,{ghost:!0,children:(0,e.jsx)(b.Z,{showInModal:!0,width:"960px",height:"500px",ref:L})})})});m.Z=t},35887:function(P,m,h){"use strict";var M=h(5574),p=h.n(M),E=h(12323),c=h(78267),f=h.n(c),u=h(75458),b=h.n(u),O=h(67294),e=h(12320),t=h.n(e),n=h(89629),i=h(85893),r=new e.Terminal(E.Xq),s=new u.SearchAddon,a=new c.FitAddon,_=(0,O.forwardRef)(function(d,C){var T,R=(0,O.useState)(!0),y=p()(R,2),L=y[0],v=y[1];return(0,O.useEffect)(function(){return window.addEventListener("resize",function(){d.showInModal||a.fit()}),d.style&&d.style.fontSize&&(r.options.fontSize=d.style.fontSize),r.loadAddon(a),r.loadAddon(s),r.open(document.getElementById(d.id?d.id:"terminal-container")),d.showInModal||a.fit(),function(){r.reset(),v(!0)}},[]),(0,O.useImperativeHandle)(C,function(){return{write:function(g){L&&(a.fit(),v(!1)),r.write(g)},clear:function(){r.clear()},getTerminal:function(){return r},findNext:function(g){s.findNext(g)},findPrev:function(g){s.findPrevious(g)},fit:function(){a.fit()},onData:function(g){return r.onData(g)}}}),(0,i.jsx)("div",{id:d.id?d.id:"terminal-container",style:{width:d.width?d.width:"100%",height:d.height?d.height:"500px",marginTop:(T=d.style)===null||T===void 0?void 0:T.marginTop}})});m.Z=_},3616:function(P,m,h){"use strict";h.d(m,{Ed:function(){return c},FK:function(){return p},R_:function(){return M},ob:function(){return E}});var M=window.innerWidth<=1024?"90vw":"65vw",p="90vw",E="60vw",c="50vh"},12323:function(P,m,h){"use strict";h.d(m,{Xq:function(){return p},nS:function(){return E}});var M=null,p={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},E=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},24963:function(P,m,h){"use strict";var M=h(67294),p=(0,M.createContext)({});m.Z=p},18148:function(P,m,h){"use strict";h.d(m,{$q:function(){return s},Fj:function(){return L},KG:function(){return u},KX:function(){return D},T8:function(){return i},Xn:function(){return t},ao:function(){return _},c5:function(){return R},c7:function(){return C}});var M=h(15009),p=h.n(M),E=h(99289),c=h.n(E),f=h(82346);function u(o){return b.apply(this,arguments)}function b(){return b=c()(p()().mark(function o(S){return p()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,f.request)("/api/app/image/get-list",{method:"POST",data:S}));case 1:case"end":return l.stop()}},o)})),b.apply(this,arguments)}function O(o){return e.apply(this,arguments)}function e(){return e=_asyncToGenerator(_regeneratorRuntime().mark(function o(S){return _regeneratorRuntime().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,request("/api/app/log/image-build",{method:"POST",data:S});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},o)})),e.apply(this,arguments)}function t(o){return n.apply(this,arguments)}function n(){return n=c()(p()().mark(function o(S){return p()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,f.request)("/api/app/image/get-list-build",{method:"POST",data:S}));case 1:case"end":return l.stop()}},o)})),n.apply(this,arguments)}function i(o){return r.apply(this,arguments)}function r(){return r=c()(p()().mark(function o(S){return p()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,f.request)("/api/app/image/get-build-task",{method:"POST",data:S});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},o)})),r.apply(this,arguments)}function s(o){return a.apply(this,arguments)}function a(){return a=c()(p()().mark(function o(S){return p()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,f.request)("/api/app/image/delete-build-task",{method:"POST",data:S});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},o)})),a.apply(this,arguments)}function _(o){return d.apply(this,arguments)}function d(){return d=c()(p()().mark(function o(S){return p()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,f.request)("/api/app/image/image-delete",{method:"POST",data:S});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},o)})),d.apply(this,arguments)}function C(){return T.apply(this,arguments)}function T(){return T=c()(p()().mark(function o(){return p()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,(0,f.request)("/api/app/image/image-prune",{method:"POST"});case 2:return w.abrupt("return",w.sent);case 3:case"end":return w.stop()}},o)})),T.apply(this,arguments)}function R(){return y.apply(this,arguments)}function y(){return y=c()(p()().mark(function o(){return p()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,(0,f.request)("/api/app/image/build-prune",{method:"POST"});case 2:return w.abrupt("return",w.sent);case 3:case"end":return w.stop()}},o)})),y.apply(this,arguments)}function L(o){return v.apply(this,arguments)}function v(){return v=c()(p()().mark(function o(S){return p()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,f.request)("/api/app/image/update-title",{method:"POST",data:S});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},o)})),v.apply(this,arguments)}function D(o){return g.apply(this,arguments)}function g(){return g=c()(p()().mark(function o(S){return p()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,f.request)("/api/app/image/tag-sync",{method:"POST",data:S}));case 1:case"end":return l.stop()}},o)})),g.apply(this,arguments)}},89629:function(){"use strict"},75458:function(P){(function(m,h){P.exports=h()})(self,()=>(()=>{"use strict";var m={345:(E,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.runAndSubscribe=c.forwardEvent=c.EventEmitter=void 0,c.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=f=>(this._listeners.push(f),{dispose:()=>{if(!this._disposed){for(let u=0;u<this._listeners.length;u++)if(this._listeners[u]===f)return void this._listeners.splice(u,1)}}})),this._event}fire(f,u){const b=[];for(let O=0;O<this._listeners.length;O++)b.push(this._listeners[O]);for(let O=0;O<b.length;O++)b[O].call(void 0,f,u)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},c.forwardEvent=function(f,u){return f(b=>u.fire(b))},c.runAndSubscribe=function(f,u){return u(void 0),f(b=>u(b))}},859:(E,c)=>{function f(u){for(const b of u)b.dispose();u.length=0}Object.defineProperty(c,"__esModule",{value:!0}),c.getDisposeArrayDisposable=c.disposeArray=c.toDisposable=c.MutableDisposable=c.Disposable=void 0,c.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const u of this._disposables)u.dispose();this._disposables.length=0}register(u){return this._disposables.push(u),u}unregister(u){const b=this._disposables.indexOf(u);b!==-1&&this._disposables.splice(b,1)}},c.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(u){var b;this._isDisposed||u===this._value||((b=this._value)==null||b.dispose(),this._value=u)}clear(){this.value=void 0}dispose(){var u;this._isDisposed=!0,(u=this._value)==null||u.dispose(),this._value=void 0}},c.toDisposable=function(u){return{dispose:u}},c.disposeArray=f,c.getDisposeArrayDisposable=function(u){return{dispose:()=>f(u)}}}},h={};function M(E){var c=h[E];if(c!==void 0)return c.exports;var f=h[E]={exports:{}};return m[E](f,f.exports,M),f.exports}var p={};return(()=>{var E=p;Object.defineProperty(E,"__esModule",{value:!0}),E.SearchAddon=void 0;const c=M(345),f=M(859),u=" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?";class b extends f.Disposable{constructor(e){var t;super(),this._highlightedLines=new Set,this._highlightDecorations=[],this._selectedDecoration=this.register(new f.MutableDisposable),this._linesCacheTimeoutId=0,this._linesCacheDisposables=new f.MutableDisposable,this._onDidChangeResults=this.register(new c.EventEmitter),this.onDidChangeResults=this._onDidChangeResults.event,this._highlightLimit=(t=e==null?void 0:e.highlightLimit)!=null?t:1e3}activate(e){this._terminal=e,this.register(this._terminal.onWriteParsed(()=>this._updateMatches())),this.register(this._terminal.onResize(()=>this._updateMatches())),this.register((0,f.toDisposable)(()=>this.clearDecorations()))}_updateMatches(){var e;this._highlightTimeout&&window.clearTimeout(this._highlightTimeout),this._cachedSearchTerm&&((e=this._lastSearchOptions)!=null&&e.decorations)&&(this._highlightTimeout=setTimeout(()=>{const t=this._cachedSearchTerm;this._cachedSearchTerm=void 0,this.findPrevious(t,B(W({},this._lastSearchOptions),{incremental:!0,noScroll:!0}))},200))}clearDecorations(e){this._selectedDecoration.clear(),(0,f.disposeArray)(this._highlightDecorations),this._highlightDecorations=[],this._highlightedLines.clear(),e||(this._cachedSearchTerm=void 0)}clearActiveDecoration(){this._selectedDecoration.clear()}findNext(e,t){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");const n=!this._lastSearchOptions||this._didOptionsChange(this._lastSearchOptions,t);this._lastSearchOptions=t,t!=null&&t.decorations&&(this._cachedSearchTerm===void 0||e!==this._cachedSearchTerm||n)&&this._highlightAllMatches(e,t);const i=this._findNextAndSelect(e,t);return this._fireResults(t),this._cachedSearchTerm=e,i}_highlightAllMatches(e,t){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!e||e.length===0)return void this.clearDecorations();t=t||{},this.clearDecorations(!0);const n=[];let i,r=this._find(e,0,0,t);for(;r&&((i==null?void 0:i.row)!==r.row||(i==null?void 0:i.col)!==r.col)&&!(n.length>=this._highlightLimit);)i=r,n.push(i),r=this._find(e,i.col+i.term.length>=this._terminal.cols?i.row+1:i.row,i.col+i.term.length>=this._terminal.cols?0:i.col+1,t);for(const s of n){const a=this._createResultDecoration(s,t.decorations);a&&(this._highlightedLines.add(a.marker.line),this._highlightDecorations.push({decoration:a,match:s,dispose(){a.dispose()}}))}}_find(e,t,n,i){var a;if(!this._terminal||!e||e.length===0)return(a=this._terminal)==null||a.clearSelection(),void this.clearDecorations();if(n>this._terminal.cols)throw new Error(`Invalid col: ${n} to search in terminal of ${this._terminal.cols} cols`);let r;this._initLinesCache();const s={startRow:t,startCol:n};if(r=this._findInLine(e,s,i),!r)for(let _=t+1;_<this._terminal.buffer.active.baseY+this._terminal.rows&&(s.startRow=_,s.startCol=0,r=this._findInLine(e,s,i),!r);_++);return r}_findNextAndSelect(e,t){var _;if(!this._terminal||!e||e.length===0)return(_=this._terminal)==null||_.clearSelection(),this.clearDecorations(),!1;const n=this._terminal.getSelectionPosition();this._terminal.clearSelection();let i=0,r=0;n&&(this._cachedSearchTerm===e?(i=n.end.x,r=n.end.y):(i=n.start.x,r=n.start.y)),this._initLinesCache();const s={startRow:r,startCol:i};let a=this._findInLine(e,s,t);if(!a)for(let d=r+1;d<this._terminal.buffer.active.baseY+this._terminal.rows&&(s.startRow=d,s.startCol=0,a=this._findInLine(e,s,t),!a);d++);if(!a&&r!==0)for(let d=0;d<r&&(s.startRow=d,s.startCol=0,a=this._findInLine(e,s,t),!a);d++);return!a&&n&&(s.startRow=n.start.y,s.startCol=0,a=this._findInLine(e,s,t)),this._selectResult(a,t==null?void 0:t.decorations,t==null?void 0:t.noScroll)}findPrevious(e,t){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");const n=!this._lastSearchOptions||this._didOptionsChange(this._lastSearchOptions,t);this._lastSearchOptions=t,t!=null&&t.decorations&&(this._cachedSearchTerm===void 0||e!==this._cachedSearchTerm||n)&&this._highlightAllMatches(e,t);const i=this._findPreviousAndSelect(e,t);return this._fireResults(t),this._cachedSearchTerm=e,i}_didOptionsChange(e,t){return!!t&&(e.caseSensitive!==t.caseSensitive||e.regex!==t.regex||e.wholeWord!==t.wholeWord)}_fireResults(e){if(e!=null&&e.decorations){let t=-1;if(this._selectedDecoration.value){const n=this._selectedDecoration.value.match;for(let i=0;i<this._highlightDecorations.length;i++){const r=this._highlightDecorations[i].match;if(r.row===n.row&&r.col===n.col&&r.size===n.size){t=i;break}}}this._onDidChangeResults.fire({resultIndex:t,resultCount:this._highlightDecorations.length})}}_findPreviousAndSelect(e,t){var d;if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!this._terminal||!e||e.length===0)return(d=this._terminal)==null||d.clearSelection(),this.clearDecorations(),!1;const n=this._terminal.getSelectionPosition();this._terminal.clearSelection();let i=this._terminal.buffer.active.baseY+this._terminal.rows-1,r=this._terminal.cols;const s=!0;this._initLinesCache();const a={startRow:i,startCol:r};let _;if(n&&(a.startRow=i=n.start.y,a.startCol=r=n.start.x,this._cachedSearchTerm!==e&&(_=this._findInLine(e,a,t,!1),_||(a.startRow=i=n.end.y,a.startCol=r=n.end.x))),_||(_=this._findInLine(e,a,t,s)),!_){a.startCol=Math.max(a.startCol,this._terminal.cols);for(let C=i-1;C>=0&&(a.startRow=C,_=this._findInLine(e,a,t,s),!_);C--);}if(!_&&i!==this._terminal.buffer.active.baseY+this._terminal.rows-1)for(let C=this._terminal.buffer.active.baseY+this._terminal.rows-1;C>=i&&(a.startRow=C,_=this._findInLine(e,a,t,s),!_);C--);return this._selectResult(_,t==null?void 0:t.decorations,t==null?void 0:t.noScroll)}_initLinesCache(){const e=this._terminal;this._linesCache||(this._linesCache=new Array(e.buffer.active.length),this._linesCacheDisposables.value=(0,f.getDisposeArrayDisposable)([e.onLineFeed(()=>this._destroyLinesCache()),e.onCursorMove(()=>this._destroyLinesCache()),e.onResize(()=>this._destroyLinesCache())])),window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=window.setTimeout(()=>this._destroyLinesCache(),15e3)}_destroyLinesCache(){this._linesCache=void 0,this._linesCacheDisposables.clear(),this._linesCacheTimeoutId&&(window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=0)}_isWholeWord(e,t,n){return(e===0||u.includes(t[e-1]))&&(e+n.length===t.length||u.includes(t[e+n.length]))}_findInLine(e,t,n={},i=!1){var D;const r=this._terminal,s=t.startRow,a=t.startCol,_=r.buffer.active.getLine(s);if(_!=null&&_.isWrapped)return i?void(t.startCol+=r.cols):(t.startRow--,t.startCol+=r.cols,this._findInLine(e,t,n));let d=(D=this._linesCache)==null?void 0:D[s];d||(d=this._translateBufferLineToStringWithWrap(s,!0),this._linesCache&&(this._linesCache[s]=d));const[C,T]=d,R=this._bufferColsToStringOffset(s,a),y=n.caseSensitive?e:e.toLowerCase(),L=n.caseSensitive?C:C.toLowerCase();let v=-1;if(n.regex){const g=RegExp(y,"g");let o;if(i)for(;o=g.exec(L.slice(0,R));)v=g.lastIndex-o[0].length,e=o[0],g.lastIndex-=e.length-1;else o=g.exec(L.slice(R)),o&&o[0].length>0&&(v=R+(g.lastIndex-o[0].length),e=o[0])}else i?R-y.length>=0&&(v=L.lastIndexOf(y,R-y.length)):v=L.indexOf(y,R);if(v>=0){if(n.wholeWord&&!this._isWholeWord(v,L,e))return;let g=0;for(;g<T.length-1&&v>=T[g+1];)g++;let o=g;for(;o<T.length-1&&v+e.length>=T[o+1];)o++;const S=v-T[g],w=v+e.length-T[o],l=this._stringLengthToBufferSize(s+g,S);return{term:e,col:l,row:s+g,size:this._stringLengthToBufferSize(s+o,w)-l+r.cols*(o-g)}}}_stringLengthToBufferSize(e,t){const n=this._terminal.buffer.active.getLine(e);if(!n)return 0;for(let i=0;i<t;i++){const r=n.getCell(i);if(!r)break;const s=r.getChars();s.length>1&&(t-=s.length-1);const a=n.getCell(i+1);a&&a.getWidth()===0&&t++}return t}_bufferColsToStringOffset(e,t){const n=this._terminal;let i=e,r=0,s=n.buffer.active.getLine(i);for(;t>0&&s;){for(let a=0;a<t&&a<n.cols;a++){const _=s.getCell(a);if(!_)break;_.getWidth()&&(r+=_.getCode()===0?1:_.getChars().length)}if(i++,s=n.buffer.active.getLine(i),s&&!s.isWrapped)break;t-=n.cols}return r}_translateBufferLineToStringWithWrap(e,t){var a;const n=this._terminal,i=[],r=[0];let s=n.buffer.active.getLine(e);for(;s;){const _=n.buffer.active.getLine(e+1),d=!!_&&_.isWrapped;let C=s.translateToString(!d&&t);if(d&&_){const T=s.getCell(s.length-1);T&&T.getCode()===0&&T.getWidth()===1&&((a=_.getCell(0))==null?void 0:a.getWidth())===2&&(C=C.slice(0,-1))}if(i.push(C),!d)break;r.push(r[r.length-1]+C.length),e++,s=_}return[i.join(""),r]}_selectResult(e,t,n){const i=this._terminal;if(this._selectedDecoration.clear(),!e)return i.clearSelection(),!1;if(i.select(e.col,e.row,e.size),t){const r=i.registerMarker(-i.buffer.active.baseY-i.buffer.active.cursorY+e.row);if(r){const s=i.registerDecoration({marker:r,x:e.col,width:e.size,backgroundColor:t.activeMatchBackground,layer:"top",overviewRulerOptions:{color:t.activeMatchColorOverviewRuler}});if(s){const a=[];a.push(r),a.push(s.onRender(_=>this._applyStyles(_,t.activeMatchBorder,!0))),a.push(s.onDispose(()=>(0,f.disposeArray)(a))),this._selectedDecoration.value={decoration:s,match:e,dispose(){s.dispose()}}}}}if(!n&&(e.row>=i.buffer.active.viewportY+i.rows||e.row<i.buffer.active.viewportY)){let r=e.row-i.buffer.active.viewportY;r-=Math.floor(i.rows/2),i.scrollLines(r)}return!0}_applyStyles(e,t,n){e.classList.contains("xterm-find-result-decoration")||(e.classList.add("xterm-find-result-decoration"),t&&(e.style.outline=`1px solid ${t}`)),n&&e.classList.add("xterm-find-active-result-decoration")}_createResultDecoration(e,t){const n=this._terminal,i=n.registerMarker(-n.buffer.active.baseY-n.buffer.active.cursorY+e.row);if(!i)return;const r=n.registerDecoration({marker:i,x:e.col,width:e.size,backgroundColor:t.matchBackground,overviewRulerOptions:this._highlightedLines.has(i.line)?void 0:{color:t.matchOverviewRuler,position:"center"}});if(r){const s=[];s.push(i),s.push(r.onRender(a=>this._applyStyles(a,t.matchBorder,!1))),s.push(r.onDispose(()=>(0,f.disposeArray)(s)))}return r}}E.SearchAddon=b})(),p})())}}]);
}());