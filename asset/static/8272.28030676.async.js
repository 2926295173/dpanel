"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8272],{43831:function(le,H,e){var V=e(15009),f=e.n(V),G=e(99289),d=e.n(G),z=e(5574),R=e.n(z),s=e(67294),F=e(14946),Z=e(43425),$=e(48689),b=e(38345),N=e(10641),w=e(42075),L=e(25593),U=e(83062),m=e(60335),q=e(78498),Y=e(80821),ee=e(10032),ne=e(5251),Q=e(28230),k=e(46442),X=e(78451),i=e(85893),n=(0,s.forwardRef)(function(h,_){var W;(0,s.useImperativeHandle)(_,function(){return{}});var C=(0,s.useRef)(),t=(0,s.useRef)(),x=(0,s.useState)(),A=R()(x,2),J=A[0],re=A[1];return(0,s.useEffect)(function(){var D,j;re(h.containerInfo),!((D=C.current)===null||D===void 0)&&D.reloadAndRest&&((j=C.current)===null||j===void 0||j.reloadAndRest())},[h.containerInfo]),(0,i.jsxs)(b.Z,{ghost:h.ghost,children:[(0,i.jsx)(ee.Z,{ref:t}),(0,i.jsx)(N.Z,{scroll:{x:"max-content"},rowKey:"key",actionRef:C,pagination:!1,columns:[{title:"\u6240\u5C5E\u7F51\u7EDC",key:"name",dataIndex:"networkName"},{title:"\u5BB9\u5668\u540D\u79F0",key:"containerName",dataIndex:"containerName",width:100,render:function(j,u,M,g,o){return(0,i.jsx)(X.Z,{content:(0,ne.fi)(u.containerName,"/")})}},{title:(0,i.jsx)(q.Z,{title:"hostname",help:"\u63D0\u4F9B\u5BB9\u5668\u5185\u90E8\u8BBF\u95EE"}),key:"hostName",render:function(j,u,M){return u.hostName?(0,i.jsx)(w.Z,{direction:"vertical",children:u.hostName.map(function(g){if(g)return(0,i.jsx)(L.Z.Text,{copyable:!0,keyboard:!0,children:g},g)})}):(0,i.jsx)(i.Fragment,{})}},{title:"Ip",key:"ip",render:function(j,u,M,g,o){return(0,i.jsxs)(w.Z,{direction:"vertical",children:[(0,i.jsx)("span",{children:u.networkInfo.IPv4Address}),u.networkInfo.IPv6Address&&(0,i.jsx)("span",{children:u.networkInfo.IPv6Address})]})}},{title:"\u64CD\u4F5C",key:"option",width:50,fixed:"right",render:function(j,u,M,g,o){return(0,i.jsxs)(w.Z,{children:[u.networkName!=""&&(0,i.jsx)(L.Z.Link,{onClick:function(){var r;(r=t.current)===null||r===void 0||r.show(u.networkName)},children:(0,i.jsx)(U.Z,{title:"\u7BA1\u7406",children:(0,i.jsx)(Z.Z,{})})}),u.key!="bridge"&&u.key!="none"&&u.key!="host"&&u.networkName!=""&&(0,i.jsx)(Y.Z,{type:"link",action:function(){return(0,F.t9)({name:u.networkName,containerName:h.containerInfo.Name})},onSuccess:function(){var r,a;!((r=C.current)===null||r===void 0)&&r.reloadAndRest&&((a=C.current)===null||a===void 0||a.reloadAndRest())},tips:"\u9000\u51FA\u8BE5\u7F51\u7EDC",children:(0,i.jsx)($.Z,{})})]})}}],request:function(){var D=d()(f()().mark(function j(u,M,g){var o,c;return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,m.jV)({md5:h.containerInfo.Name});case 2:return o=a.sent,re(o.data.info),a.next=6,(0,F._3)({name:Object.keys(o.data.info.NetworkSettings.Networks)});case 6:return c=a.sent,a.abrupt("return",{data:c.data.list,success:!0,total:c.data.list.length});case 8:case"end":return a.stop()}},j)}));return function(j,u,M){return D.apply(this,arguments)}}(),toolBarRender:function(){return[(0,i.jsx)(k.Z,{showTriggerButton:!0,onSelect:function(){var j=d()(f()().mark(function u(M){var g,o;return f()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,F.HY)({name:M.Name,containerName:h.containerInfo.Name,ipV4:""});case 2:o=r.sent,!((g=C.current)===null||g===void 0)&&g.reloadAndRest&&C.current.reloadAndRest();case 4:case"end":return r.stop()}},u)}));return function(u){return j.apply(this,arguments)}}()},"joinNetwork"),(0,i.jsx)(Q.Z,{onFinish:function(){var u,M;!((u=C.current)===null||u===void 0)&&u.reloadAndRest&&((M=C.current)===null||M===void 0||M.reloadAndRest())}},"create")]},search:!1,expandable:{expandRowByClick:!1,expandedRowKeys:Object.keys((W=J==null?void 0:J.NetworkSettings.Networks)!==null&&W!==void 0?W:{bridge:[]})}})]})});H.Z=n},78272:function(le,H,e){e.d(H,{Z:function(){return g}});var V=e(5574),f=e.n(V),G=e(15009),d=e.n(G),z=e(99289),R=e.n(z),s=e(67294),F=e(37767),Z=e(60335),$=e(82346),b=e(58638),N=e(85265),w=e(42075),L=e(96074),U=e(83062),m=e(86250),q=e(52031),Y=e(14189),ee=e(27813),ne=e(46934),Q=e(184),k=e(25593),X=e(95591),i=e(5251),n=e(85893),h=(0,s.forwardRef)(function(o,c){var r,a=(0,s.useState)(!1),p=f()(a,2),I=p[0],l=p[1];return(0,s.useImperativeHandle)(c,function(){return{}}),(0,n.jsx)(Q.a,{submitter:!1,title:(0,i.fi)(o.containerInfo.Name,"/")+" - \u6587\u4EF6\u7BA1\u7406",onOpenChange:function(y){l(y)},trigger:(0,n.jsx)(k.Z.Link,{children:(0,n.jsx)(X.Z,{})},"file"),children:I&&(0,n.jsx)(ne.Z,{md5:o.containerInfo.Id,initPath:(r=o.containerInfo.Config.WorkingDir)!==null&&r!==void 0?r:"/"})})}),_=h,W=e(43831),C=e(52209),t=(0,s.forwardRef)(function(o,c){(0,s.useImperativeHandle)(c,function(){return{}});var r=(0,s.useState)(!1),a=f()(r,2),p=a[0],I=a[1];return(0,n.jsx)(Q.a,{submitter:!1,title:(0,i.fi)(o.containerInfo.Name,"/")+" - \u7F51\u7EDC\u7BA1\u7406",onOpenChange:function(te){I(te)},open:p,trigger:(0,n.jsx)(k.Z.Link,{children:(0,n.jsx)(C.Z,{})},"file"),children:(0,n.jsx)(W.Z,{ghost:!0,containerInfo:o.containerInfo})})}),x=t,A=e(81146),J=e(45742),re=e(62597),D=(0,s.forwardRef)(function(o,c){(0,s.useImperativeHandle)(c,function(){return{show:function(K){return R()(d()().mark(function v(){var P;return d()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,Z.jV)({md5:K});case 2:P=O.sent,P.data&&oe(P.data.info),I(!0);case 5:case"end":return O.stop()}},v)}))()}}});var r=(0,s.useState)(!1),a=f()(r,2),p=a[0],I=a[1],l=(0,s.useState)(),te=f()(l,2),y=te[0],oe=te[1],se=(0,s.useRef)();return(0,n.jsxs)(n.Fragment,{children:[o.showTriggerButton&&(0,n.jsx)(k.Z.Link,{onClick:R()(d()().mark(function S(){return d()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:oe(o.containerInfo),I(!0);case 2:case"end":return v.stop()}},S)})),children:(0,n.jsx)(U.Z,{title:"\u8FD0\u884C\u65E5\u5FD7",children:(0,n.jsx)(J.Z,{})})},"log"),(0,n.jsx)(N.Z,{title:"\u5BB9\u5668\u65E5\u5FD7",open:p,forceRender:!0,onClose:function(){I(!1)},afterOpenChange:function(K){if(K)setTimeout(function(){var P,E;(P=se.current)===null||P===void 0||P.start(),(E=se.current)===null||E===void 0||E.fit()},1e3);else{var v;(v=se.current)===null||v===void 0||v.close()}},width:800,children:y&&p&&(0,n.jsx)(A.Z,{ref:se,showInDrawer:!0,id:"container:log:".concat(y==null?void 0:y.Id),request:function(){var S=R()(d()().mark(function K(v){var P;return d()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,re.Tb)({id:(P=y.Id)!==null&&P!==void 0?P:"",lineTotal:v.lineTotal,download:v.download,showTime:v.showTime});case 2:case"end":return O.stop()}},K)}));return function(K){return S.apply(this,arguments)}}(),download:function(){var S=R()(d()().mark(function K(v){var P,E,O,T;return d()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,(0,re.XH)({id:(P=y.Id)!==null&&P!==void 0?P:"",lineTotal:v.lineTotal,showTime:v.showTime});case 2:return O=B.sent,B.next=5,(0,Z.jV)({md5:(E=y.Id)!==null&&E!==void 0?E:""});case 5:return T=B.sent,B.abrupt("return",{data:new Blob([O],{type:"text/plain"}),name:T.data.info.Name.replaceAll("/","")+"_"+new Date().toLocaleDateString()+".log"});case 7:case"end":return B.stop()}},K)}));return function(K){return S.apply(this,arguments)}}()})})]})}),j=D,u=e(65913),M=(0,s.forwardRef)(function(o,c){var r;(0,s.useImperativeHandle)(c,function(){return{show:function(P){return R()(d()().mark(function E(){return d()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return S(!0),T.next=3,K(P);case 3:case"end":return T.stop()}},E)}))()}}});var a=(0,s.useRef)(),p=(0,s.useState)(),I=f()(p,2),l=I[0],te=I[1],y=(0,s.useState)(!1),oe=f()(y,2),se=oe[0],S=oe[1],K=function(){var v=R()(d()().mark(function P(E){var O,T;return d()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return(O=a.current)===null||O===void 0||O.show(),B.next=3,(0,Z.jV)({md5:E}).finally(function(){var ae;(ae=a.current)===null||ae===void 0||ae.destroy()});case 3:T=B.sent,T.data&&(T.data.info.HostConfig.NetworkMode=="host"&&T.data.info.Config.ExposedPorts&&Object.keys(T.data.info.Config.ExposedPorts).map(function(ae){T.data.info.NetworkSettings.Ports[ae]=[{HostIp:"0.0.0.0",HostPort:ae.substring(0,ae.indexOf("/"))}]}),te(T.data));case 5:case"end":return B.stop()}},P)}));return function(E){return v.apply(this,arguments)}}();return(0,n.jsx)(N.Z,{title:"\u5FEB\u6377\u67E5\u770B\u5BB9\u5668 - ".concat((0,i.fi)((r=l==null?void 0:l.info.Name)!==null&&r!==void 0?r:"","/")),open:se,onClose:function(){S(!1),o.onFinish&&o.onFinish()},width:800,extra:(0,n.jsxs)(w.Z,{split:(0,n.jsx)(L.Z,{type:"vertical"}),children:[(l==null?void 0:l.info)&&(0,n.jsx)(_,{containerInfo:l.info}),(l==null?void 0:l.info)&&(0,n.jsx)(x,{containerInfo:l.info}),(l==null?void 0:l.info)&&(0,n.jsx)(j,{containerInfo:l.info,showTriggerButton:!0}),(0,n.jsx)(U.Z,{title:"\u67E5\u770B\u5B8C\u6574\u4FE1\u606F",children:(0,n.jsx)($.Link,{to:"/app/detail/edit/"+(l==null?void 0:l.info.Id),children:(0,n.jsx)(b.Z,{})},"detail")})]}),children:(0,n.jsx)(u.Z,{ref:a,children:(0,n.jsxs)(m.Z,{vertical:!0,gap:20,children:[l&&(0,n.jsx)(Y.Z,{ghost:!0,data:l==null?void 0:l.info,onFinish:R()(d()().mark(function v(){return d()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,K(l.info.Id);case 2:return E.t0=E.sent,E.abrupt("return",[E.t0]);case 4:case"end":return E.stop()}},v)}))}),l&&(0,n.jsx)(ee.Z,{ghost:!0,data:l,checkContainerUpgrade:function(){S(!1),o.onUpgradeFinish&&o.onUpgradeFinish()}}),l&&(0,n.jsx)(F.Z,{data:l,ghost:!0}),(0,n.jsx)(q.Z,{data:l==null?void 0:l.info,ghost:!0})]})})})}),g=M},81146:function(le,H,e){var V=e(15009),f=e.n(V),G=e(99289),d=e.n(G),z=e(97857),R=e.n(z),s=e(67294),F=e(97269),Z=e(62370),$=e(5966),b=e(97462),N=e(82346),w=e(71230),L=e(15746),U=e(34041),m=e(28036),q=e(84567),Y=e(42075),ee=e(54964),ne=e(80821),Q=e(23430),k=e(93162),X=e.n(k),i=e(12320),n=e.n(i),h=e(78267),_=e.n(h),W=e(75458),C=e.n(W),t=e(85893),x=new i.Terminal(R()(R()({},ee.a),{},{fontSize:12})),A=new h.FitAddon,J=new W.SearchAddon,re=(0,s.forwardRef)(function(D,j){(0,s.useImperativeHandle)(j,function(){return{fit:function(){x.clear(),A.fit()},start:function(){return d()(f()().mark(function c(){return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g({lineTotal:500});case 2:case"end":return a.stop()}},c)}))()},close:function(){M.progress.close(D.id)}}});var u=(0,s.useRef)(),M=(0,N.useModel)("subscriber");M.addDataHandler(D.id,function(o){x.write(o.data.replaceAll(`
`,`

`))});var g=function(){var o=d()(f()().mark(function c(r){return f()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return x.clear(),r.download=!1,p.next=4,D.request(r);case 4:case"end":return p.stop()}},c)}));return function(r){return o.apply(this,arguments)}}();return(0,s.useEffect)(function(){return window.addEventListener("resize",function(){A.fit()}),x.loadAddon(A),x.open(document.getElementById("terminal-container-log")),A.fit(),function(){x.clear(),x.reset(),M.progress.close(D.id)}},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(F.A,{submitter:!1,layout:"horizontal",onValuesChange:function(c,r){g({md5:D.id,lineTotal:parseInt(r.lineTotal),showTime:r.showTime})},formRef:u,children:(0,t.jsxs)(w.Z,{gutter:[10,0],children:[(0,t.jsx)(L.Z,{span:8,children:(0,t.jsx)(Z.Z,{name:"lineTotal",initialValue:"500",label:"\u83B7\u53D6\u65E5\u5FD7\u6761\u6570",children:(0,t.jsxs)(U.Z,{defaultValue:"500",children:[(0,t.jsx)(U.Z.Option,{value:"100",children:"100\u6761\u65E5\u5FD7\u6570\u636E"}),(0,t.jsx)(U.Z.Option,{value:"200",children:"200\u6761\u65E5\u5FD7\u6570\u636E"}),(0,t.jsx)(U.Z.Option,{value:"500",children:"500\u6761\u65E5\u5FD7\u6570\u636E"}),(0,t.jsx)(U.Z.Option,{value:"1000",children:"1000\u6761\u65E5\u5FD7\u6570\u636E"}),(0,t.jsx)(U.Z.Option,{value:"-1",children:"\u5168\u90E8\uFF08\u4E0B\u8F7D\u53EF\u89C1\uFF09"})]})})}),(0,t.jsx)(L.Z,{children:(0,t.jsx)(m.ZP,{onClick:function(){x.clear()},children:"\u6E05\u5C4F"})}),(0,t.jsx)(L.Z,{children:(0,t.jsx)(Z.Z,{name:"showTime",valuePropName:"checked",children:(0,t.jsx)(q.Z,{children:"\u663E\u793A\u65F6\u95F4"})})}),(0,t.jsx)(L.Z,{children:(0,t.jsx)($.Z,{label:"\u67E5\u627E",name:"keywork"})}),(0,t.jsx)(L.Z,{children:(0,t.jsx)(b.Z,{name:["keywork"],children:function(c){var r=c.keywork;return(0,t.jsxs)(Y.Z,{size:10,children:[(0,t.jsx)(m.ZP,{onClick:function(){J.findNext(r)},children:"\u4E0B\u4E00\u4E2A"},"next"),(0,t.jsx)(m.ZP,{onClick:function(){J.findPrevious(r)},children:"\u4E0A\u4E00\u4E2A"},"prev")]})}})}),(0,t.jsx)(L.Z,{children:(0,t.jsx)(ne.Z,{icon:(0,t.jsx)(Q.Z,{}),action:d()(f()().mark(function o(){var c,r,a;return f()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!D.download){I.next=5;break}return I.next=3,D.download({lineTotal:parseInt((c=u.current)===null||c===void 0?void 0:c.getFieldValue("lineTotal")),showTime:(r=u.current)===null||r===void 0?void 0:r.getFieldValue("showTime")});case 3:a=I.sent,(0,k.saveAs)(a.data,a.name);case 5:case"end":return I.stop()}},o)})),children:"\u4E0B\u8F7D\u65E5\u5FD7"})})]})}),(0,t.jsx)("div",{style:{marginTop:"20px",height:D.showInDrawer?"75vh":"580px"},id:"terminal-container-log"})]})});H.Z=re},46442:function(le,H,e){var V=e(15009),f=e.n(V),G=e(99289),d=e.n(G),z=e(5574),R=e.n(z),s=e(67294),F=e(14946),Z=e(64789),$=e(10641),b=e(28036),N=e(85265),w=e(42075),L=e(66309),U=e(28230),m=e(85893),q=(0,s.forwardRef)(function(Y,ee){(0,s.useImperativeHandle)(ee,function(){return{show:function(){X(!0)}}});var ne=(0,s.useState)(!1),Q=R()(ne,2),k=Q[0],X=Q[1],i=(0,s.useRef)();return(0,m.jsxs)(m.Fragment,{children:[Y.showTriggerButton&&(0,m.jsx)(b.ZP,{onClick:function(){X(!0)},children:"\u52A0\u5165\u7F51\u7EDC"}),(0,m.jsx)(N.Z,{title:"\u9009\u62E9\u7F51\u7EDC",width:800,footer:!1,open:k,onClose:function(){return X(!1)},extra:(0,m.jsx)(w.Z,{children:(0,m.jsx)(U.Z,{onFinish:function(){var h,_;!((h=i.current)===null||h===void 0)&&h.reloadAndRest&&((_=i.current)===null||_===void 0||_.reloadAndRest())}},"create")}),children:(0,m.jsx)($.Z,{rowKey:"Name",toolBarRender:!1,actionRef:i,columns:[{title:"\u540D\u79F0",dataIndex:"Name",render:function(h,_,W,C,t){return _.Name=="none"||_.Name=="bridge"||_.Name=="host"?(0,m.jsxs)(m.Fragment,{children:[_.Name," ",(0,m.jsx)(L.Z,{color:"blue",children:"System"})]}):(0,m.jsx)(m.Fragment,{children:h})}},{title:"\u7C7B\u578B",ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"IPAM Driver",ellipsis:!0,width:120,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4 IPAM Network",search:!1,dataIndex:["IPAM","Config",0,"Subnet"],render:function(h,_,W,C,t){return(0,m.jsxs)(w.Z,{children:[_.IPAM.Config&&_.IPAM.Config[0]&&"".concat(_.IPAM.Config[0].Subnet," - ").concat(_.IPAM.Config[0].Gateway),_.IPAM.Config&&_.IPAM.Config[1]&&"".concat(_.IPAM.Config[1].Subnet," - ").concat(_.IPAM.Config[1].Gateway)]})}},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(h,_,W,C,t){return[_.Name!="none"&&_.Name!="bridge"&&_.Name!="host"&&(0,m.jsx)(b.ZP,{type:"link",onClick:function(){Y.onSelect(_),X(!1)},children:(0,m.jsx)(Z.Z,{})},_.Id)]}}],request:function(){var n=d()(f()().mark(function h(_,W,C){var t;return f()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,F.jR)({name:_.Name});case 2:return t=A.sent,A.abrupt("return",{data:t.data.list,success:!0,total:t.data.list.length});case 4:case"end":return A.stop()}},h)}));return function(h,_,W){return n.apply(this,arguments)}}(),pagination:{pageSize:10}})})]})});H.Z=q},65913:function(le,H,e){var V=e(5574),f=e.n(V),G=e(74330),d=e(67294),z=e(85893),R=(0,d.forwardRef)(function(s,F){(0,d.useImperativeHandle)(F,function(){return{show:function(){N(!0)},destroy:function(){N(!1)}}});var Z=(0,d.useState)(!1),$=f()(Z,2),b=$[0],N=$[1];return(0,z.jsx)(G.Z,{spinning:b,size:"default",children:s.children})});H.Z=R}}]);
