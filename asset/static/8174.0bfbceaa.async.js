"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8174],{28307:function(U,h,e){var f=e(15009),t=e.n(f),j=e(99289),E=e.n(j),P=e(5574),O=e.n(P),T=e(38345),i=e(97269),o=e(62370),v=e(5966),u=e(64317),n=e(28036),R=e(85265),D=e(42075),C=e(67294),M=e(3393),l=e(97961),c=e(92754),d=e(82346),_=e(96042),A=e(3616),a=e(85893),g=(0,C.forwardRef)(function(r,W){var k=(0,C.useState)(!1),K=O()(k,2),G=K[0],L=K[1],x=(0,C.useRef)(),b=(0,C.useRef)(),V=(0,C.useState)(!1),$=O()(V,2),w=$[0],H=$[1];return(0,C.useImperativeHandle)(W,function(){return{upgradeImage:function(s){var m;return L(!0),(m=x.current)===null||m===void 0||m.setFieldValue("imageUrl",s),(0,M.Gb)({tag:s,type:"pull"})},setImageName:function(s){var m;L(!0),(m=x.current)===null||m===void 0||m.setFieldValue("imageUrl",s)}}}),[(0,a.jsx)(n.ZP,{type:r.buttonType?r.buttonType:"default",onClick:function(){var s,m;r.onClick&&r.onClick(),L(!0),(s=x.current)===null||s===void 0||s.resetFields(),(m=b.current)===null||m===void 0||m.setStart("")},children:"\u62C9\u53D6\u955C\u50CF"},"remoteBtn"),(0,a.jsxs)(R.Z,{forceRender:!0,open:G,title:"\u62C9\u53D6\u8FDC\u7A0B\u955C\u50CF",width:A.R_,onClose:function(){var s;L(!1),(s=b.current)===null||s===void 0||s.close()},footer:!1,children:[(0,a.jsx)(T.Z,{children:(0,a.jsxs)(D.Z,{direction:"vertical",size:"middle",children:[(0,a.jsxs)("div",{children:["1\u3001\u955C\u50CF\u540D\u79F0\u4E2D\u4E0D\u5305\u542B\u4ED3\u5E93\u5730\u5740\u65F6\uFF0C \u9ED8\u8BA4\u4ECE ",(0,a.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:"docker hub"})," \u4E2D\u4E0B\u8F7D\uFF0C \u4F60\u53EF\u4EE5",(0,a.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:"\u3010\u67E5\u627E\u3011"})," \u9700\u8981\u7684\u955C\u50CF"]}),(0,a.jsx)("div",{children:"2\u3001\u62C9\u53D6\u975E docker hub \u955C\u50CF\u65F6\uFF0C\u8BF7\u586B\u5199\u5B8C\u6574\u7684\u955C\u50CF\u5730\u5740\u3002"}),(0,a.jsxs)("div",{children:["3\u3001\u76EE\u6807\u4ED3\u5E93\u6709\u6743\u9650\u9A8C\u8BC1\u65F6\uFF0C\u8BF7",(0,a.jsx)(d.Link,{to:"/image/registry",children:"\u3010\u6DFB\u52A0\u3011"}),"\u8BE5\u4ED3\u5E93\uFF0C\u5E76\u914D\u7F6E\u7528\u6237\u540D\u548C\u5BC6\u7801\u6743\u9650"]}),(0,a.jsxs)("div",{children:["4\u3001\u65E0\u6CD5\u6B63\u5E38\u62C9\u53D6\u955C\u50CF\u65F6\u8BF7\u5728 ",(0,a.jsx)(d.Link,{to:"/image/registry",children:"\u3010\u4ED3\u5E93\u7BA1\u7406\u3011"}),"\u4E2D\u914D\u7F6E\u955C\u50CF\u7684\u52A0\u901F\u5730\u5740"]})]})}),(0,a.jsx)(T.Z,{title:"\u62C9\u53D6\u955C\u50CF",headerBordered:!0,children:(0,a.jsxs)(i.A,{formRef:x,submitter:!1,isKeyPressSubmit:!0,onFinish:function(){var B=E()(t()().mark(function s(m){var I,F,Z,S,p,N;return t()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return p=(I=m.imageUrl)!==null&&I!==void 0?I:"",m.registry&&(p=m.registry.serverAddress+"/"+p),H(!0),(F=b.current)===null||F===void 0||F.setStart(p),y.next=6,(0,M.Gb)({tag:p,type:"pull",platform:(Z=m.platform)!==null&&Z!==void 0?Z:""}).finally(function(){H(!1)});case 6:return N=y.sent,(S=b.current)===null||S===void 0||S.setFinish(),L(!1),r.onFinish&&r.onFinish(N.data.tag),y.abrupt("return",!0);case 11:case"end":return y.stop()}},s)}));return function(s){return B.apply(this,arguments)}}(),children:[(0,a.jsxs)(D.Z.Compact,{children:[(0,a.jsx)(o.Z,{name:"registry",children:(0,a.jsx)(_.Z,{width:"150px"})}),(0,a.jsx)(v.Z,{disabled:w,width:270,name:"imageUrl",placeholder:"\u8BF7\u8F93\u5165\u955C\u50CF\u5730\u5740",required:!0,rules:[{required:!0}]}),(0,a.jsx)(u.Z,{name:"platform",style:{width:100},placeholder:"\u9ED8\u8BA4\u5F53\u524D\u67B6\u6784",options:l.ii.map(function(B){return{label:B.name,value:B.name}})}),(0,a.jsx)(n.ZP,{loading:w,onClick:E()(t()().mark(function B(){var s;return t()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:(s=x.current)===null||s===void 0||s.submit();case 1:case"end":return I.stop()}},B)})),children:"\u62C9\u53D6\u955C\u50CF"}),(0,a.jsx)(n.ZP,{danger:!0,onClick:function(){var s;(s=b.current)===null||s===void 0||s.close()},children:"\u4E2D\u6B62\u6267\u884C"})]}),(0,a.jsx)(o.Z,{label:"\u62C9\u53D6\u8FDB\u5EA6",children:(0,a.jsx)(c.Z,{ref:b})})]})})]},"remoteDrawer")]});h.Z=g},80821:function(U,h,e){e.d(h,{Z:function(){return u}});var f=e(97857),t=e.n(f),j=e(5574),E=e.n(j),P=e(24963),O=e(86738),T=e(28036),i=e(83062),o=e(67294),v=e(85893);function u(n){var R=(0,o.useState)(!1),D=E()(R,2),C=D[0],M=D[1],l=(0,o.useContext)(P.Z),c=l.lang,d=l.message,_=function(){M(!0);var a=n.action();a instanceof Promise?a.then(function(g){if(M(!1),g){typeof n.onSuccess=="function"&&n.onSuccess(g);var r="";n.messageSuccess?typeof n.messageSuccess=="function"?r=n.messageSuccess(g):r=n.messageSuccess.indexOf("notification.")==0?c(n.messageSuccess):n.messageSuccess:r=c("notification.finish"),n.asynced?d.info(r):d.success(r)}}).catch(function(g){M(!1),typeof n.onError=="function"&&n.onError(g)}):M(!1)};return n.confirm?(0,v.jsx)(O.Z,t()(t()({style:{width:500},title:n.confirmTitle?n.confirmTitle:c("notification.title.tip"),description:typeof n.confirm=="string"&&n.confirm.indexOf("notification.")==0?c(n.confirm):n.confirm,onConfirm:_,okText:"Yes",cancelText:"No",onOpenChange:n.confirmOnOpenChange},n.confirmProps),{},{children:(0,v.jsx)(T.ZP,{block:n.block,disabled:n.disabled,icon:!n.children&&C?void 0:n.icon,loading:C,danger:n.danger,type:n.type,children:n.children})})):(0,v.jsx)(i.Z,{title:n.tips,children:(0,v.jsx)(T.ZP,{block:n.block,style:n.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:n.disabled,icon:!n.children&&C?void 0:n.icon,loading:C,onClick:_,danger:n.danger,type:n.type,children:n.children})})}},81366:function(U,h,e){var f=e(19632),t=e.n(f),j=e(5574),E=e.n(j),P=e(27254),O=e(42075),T=e(28036),i=e(25593),o=e(67294),v=e(31112),u=e(85893),n={title:"ROOT",path:"/"},R=(0,o.forwardRef)(function(D,C){var M=(0,o.useContext)(v.Z),l=M.showPath,c=(0,o.useState)([n]),d=E()(c,2),_=d[0],A=d[1];(0,o.useImperativeHandle)(C,function(){return{addHistory:function(r,W){W=="/"?A([n]):A([].concat(t()(_),[{title:r,path:W}]))},initHistory:function(r){A([n].concat(t()(r)))}}});var a=function(r){l?l(_[r].title,_[r].path):D.showPath&&D.showPath(_[r].title,_[r].path);var W=_.filter(function(k,K){return K<=r});A(t()(W))};return(0,u.jsxs)(O.Z,{children:[(0,u.jsx)(O.Z.Compact,{children:_.map(function(g,r){return(0,u.jsx)(T.ZP,{icon:(0,u.jsx)(P.Z,{}),type:"dashed",onClick:function(){a(r)},children:g.title},r)})}),_.length>=2&&(0,u.jsx)(i.Z.Text,{copyable:{text:_[_.length-1].path}})]})});h.Z=R},31112:function(U,h,e){var f=e(67294),t=(0,f.createContext)({});h.Z=t},68536:function(U,h,e){e.d(h,{Z:function(){return v}});var f=e(24963),t=e(93613),j=e(36693),E=e(2741),P=e(25593),O=e(42075),T=e(67294),i=e(85893),o=0;function v(u){var n=(0,T.useContext)(f.Z),R=n.message;return u.isDir?(0,i.jsx)(P.Z.Link,{onClick:function(){u.onClick&&u.onClick()},children:(0,i.jsxs)(O.Z,{children:[(0,i.jsx)(t.Z,{}),u.showName]})}):u.isLink?(0,i.jsx)(P.Z.Link,{onClick:function(){u.onClick&&u.onClick()},children:(0,i.jsxs)(O.Z,{children:[(0,i.jsx)(j.Z,{}),u.showName]})}):(0,i.jsx)(P.Z.Text,{onClick:function(){if(o++,o==2){o=0,u.onClick&&u.onClick();return}setTimeout(function(){o==1&&R.info("\u53CC\u51FB\u67E5\u770B\u6587\u4EF6\u5185\u5BB9"),o=0},400)},style:{cursor:"pointer"},children:(0,i.jsxs)(O.Z,{children:[(0,i.jsx)(E.Z,{}),u.showName]})})}},3616:function(U,h,e){e.d(h,{Ed:function(){return E},FK:function(){return t},R_:function(){return f},ob:function(){return j}});var f=window.innerWidth<=1024?"90vw":"65vw",t="90vw",j="60vw",E="50vh"},24963:function(U,h,e){var f=e(67294),t=(0,f.createContext)({});h.Z=t},97961:function(U,h,e){e.d(h,{GH:function(){return u},MF:function(){return C},_2:function(){return R},fN:function(){return T},ii:function(){return O},vC:function(){return o}});var f=e(15009),t=e.n(f),j=e(99289),E=e.n(j),P=e(82346),O=[{name:"linux/amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"linux/arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"linux/i386",arch:"386",search:[]},{name:"linux/arm/v6",arch:"arm",search:[]},{name:"linux/arm/v7",arch:"arm",search:[]},{name:"linux/arm/v8",arch:"arm64",search:[]},{name:"linux/ppc64le",arch:"ppc64le",search:[]},{name:"linux/riscv64",arch:"riscv64",search:[]}];function T(l){return i.apply(this,arguments)}function i(){return i=E()(t()().mark(function l(c){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,P.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:c}));case 1:case"end":return _.stop()}},l)})),i.apply(this,arguments)}function o(l){return v.apply(this,arguments)}function v(){return v=E()(t()().mark(function l(c){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,P.request)("/api/app/image/import-by-container-tar",{method:"POST",data:c}));case 1:case"end":return _.stop()}},l)})),v.apply(this,arguments)}function u(l){return n.apply(this,arguments)}function n(){return n=E()(t()().mark(function l(c){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,P.request)("/api/app/image/import-by-image-tar",{method:"POST",data:c}));case 1:case"end":return _.stop()}},l)})),n.apply(this,arguments)}function R(l){return D.apply(this,arguments)}function D(){return D=E()(t()().mark(function l(c){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,P.request)("/api/common/attach/delete",{method:"POST",data:c});case 2:return _.abrupt("return",_.sent);case 3:case"end":return _.stop()}},l)})),D.apply(this,arguments)}function C(){return M.apply(this,arguments)}function M(){return M=E()(t()().mark(function l(){return t()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,P.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return d.stop()}},l)})),M.apply(this,arguments)}}}]);
