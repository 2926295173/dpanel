"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1180],{80821:function(k,y,e){e.d(y,{Z:function(){return c}});var Z=e(5574),h=e.n(Z),P=e(93246),O=e(54006),I=e(31418),K=e(86738),g=e(14726),L=e(83062),A=e(67294),E=e(85893);function c(n){var D=(0,A.useState)(!1),t=h()(D,2),S=t[0],F=t[1],B=I.Z.useApp(),U=(0,O.useIntl)(),M=function(){F(!0),n.action().then(function(v){if(F(!1),typeof n.onSuccess=="function"&&n.onSuccess(v),n.messageSuccess){var f="";typeof n.messageSuccess=="function"?f=n.messageSuccess(v):f=n.messageSuccess,f.indexOf(".")>-1&&(f=U.formatMessage({id:f})),n.asynced?(0,P.Rk)(B,f):(0,P.$h)(B,f)}}).catch(function(v){F(!1),typeof n.onError=="function"&&n.onError(v)})};return n.confirm?(0,E.jsx)(K.Z,{style:{width:500},title:"\u63D0\u793A",description:n.confirm,onConfirm:M,okText:"Yes",cancelText:"No",children:(0,E.jsx)(g.ZP,{disabled:n.disabled,icon:n.icon,loading:S,danger:n.danger,type:n.type,children:n.children})}):(0,E.jsx)(L.Z,{title:n.tips,children:(0,E.jsx)(g.ZP,{disabled:n.disabled,icon:n.icon,loading:S,onClick:M,danger:n.danger,type:n.type,children:n.children})})}},53893:function(k,y,e){e.r(y),e.d(y,{default:function(){return z}});var Z=e(15009),h=e.n(Z),P=e(99289),O=e.n(P),I=e(80821),K=e(5574),g=e.n(K),L=e(184),A=e(5966),E=e(14726),c=e(67294),n=e(91845),D=e(87662),t=e(85893),S=(0,c.forwardRef)(function(d,T){(0,c.useImperativeHandle)(T,function(){return{edit:function(r){var o;(o=s.current)===null||o===void 0||o.setFieldsValue({name:r.name,title:r.title,address:r.address}),u(!0),b(r.name)}}});var m=(0,c.useState)(!1),a=g()(m,2),l=a[0],u=a[1],s=(0,c.useRef)(),i=(0,c.useState)(""),W=g()(i,2),R=W[0],b=W[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(E.ZP,{onClick:function(){var r;b(""),(r=s.current)===null||r===void 0||r.resetFields(),u(!0)},type:"primary",children:"\u6DFB\u52A0Docker\u73AF\u5883"}),(0,t.jsxs)(L.a,{drawerProps:{forceRender:!0},onOpenChange:function(r){u(r)},open:l,width:800,formRef:s,title:"\u6DFB\u52A0Docker\u73AF\u5883",onFinish:function(){var j=O()(h()().mark(function r(o){var x;return h()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,D.ad)({name:o.name,title:o.title,address:o.address});case 2:return x=C.sent,d.onFinish&&d.onFinish(),C.abrupt("return",!0);case 5:case"end":return C.stop()}},r)}));return function(r){return j.apply(this,arguments)}}(),children:[(0,t.jsx)(A.Z,{label:"\u540D\u79F0",name:"title",required:!0,rules:[{required:!0}],fieldProps:{onChange:function(r){var o="";if(r.target.value&&!R){var x,N=(0,n.N9)(r.target.value.trim(),{toneType:"none",type:"array"});o=N.join(""),(x=s.current)===null||x===void 0||x.setFieldValue("name",o)}}}}),(0,t.jsx)(A.Z,{label:"\u6807\u8BC6",name:"name",required:!0,disabled:R!="",rules:[{required:!0}],placeholder:"\u6807\u8BC6Docker\u73AF\u5883\uFF0C\u53EA\u5141\u8BB8\u4E3A\u82F1\u6587\u6216\u662F\u6570\u5B57"}),(0,t.jsx)(A.Z,{label:"Docker Api \u5730\u5740",name:"address",tooltip:"\u8FDE\u63A5\u8FDC\u7A0B Docker \u65F6\u8BF7\u5148\u5F00\u542F Api \u5730\u5740\u8BBF\u95EE\u3002",placeholder:"\u4F8B\u5982\uFF1Aunix:///var/run/docker.sock\u3001tcp://192.16.0.5:2375"})]})]})}),F=S,B=e(43425),U=e(6110),M=e(88717),$=e(54006),v=e(78957),f=e(96074);function z(){var d=(0,c.useRef)(),T=(0,c.useRef)();return(0,t.jsx)(U._z,{header:{extra:[(0,t.jsx)(F,{ref:T,onFinish:function(){var a,l;!((a=d.current)===null||a===void 0)&&a.reloadAndRest&&((l=d.current)===null||l===void 0||l.reloadAndRest())}},"dockerEnvCreate")]},children:(0,t.jsx)(M.Z,{rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name"},{title:"\u540D\u79F0",dataIndex:"title"},{title:"\u5730\u5740",dataIndex:"address"},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(a,l,u,s,i){return(0,t.jsx)(v.Z,{split:(0,t.jsx)(f.Z,{type:"vertical"}),children:!l.default&&(0,t.jsx)($.Link,{to:"###",onClick:function(){var R;(R=T.current)===null||R===void 0||R.edit(l)},children:(0,t.jsx)(B.Z,{})},l.name)})}}],pagination:!1,request:O()(h()().mark(function m(){var a;return h()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,D.Kg)();case 2:return a=u.sent,u.abrupt("return",{data:a.data.list,total:a.data.list.length});case 4:case"end":return u.stop()}},m)})),search:!1,rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0,getCheckboxProps:function(a){return{disabled:a.default}}},actionRef:d,tableAlertOptionRender:function(a){var l=a.selectedRowKeys;return(0,t.jsx)(v.Z,{size:16,children:(0,t.jsx)(I.Z,{danger:!0,type:"primary",action:function(){return(0,D._g)({name:l})},onSuccess:function(){var s,i;return!((s=d.current)===null||s===void 0)&&s.reloadAndRest&&((i=d.current)===null||i===void 0||i.reloadAndRest()),!0},onError:function(){var s,i;return!((s=d.current)===null||s===void 0)&&s.reset&&((i=d.current)===null||i===void 0||i.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"})})}})})}}}]);
