"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9170],{37767:function(en,S,n){n.d(S,{Z:function(){return an}});var K=n(15009),r=n.n(K),I=n(99289),C=n.n(I),E=n(5574),W=n.n(E),l=n(45605),M=n(38345),g=n(97269),O=n(26412),y=n(42075),o=n(96074),$=n(25593),a=n(2487),B=n(67294),i=n(76428),U=n(78498),t=n(44771),d=n(13822),b=n(24963),q=n(37413),R=n(5251),f=n(82346),h=n(87662),c=n(85893);function an(s){var z,nn,sn,J,cn,vn,mn,dn,fn,e,gn=(0,B.useState)(""),En=W()(gn,2),Dn=En[0],_n=En[1],jn=(0,f.useAccess)(),on=(0,B.useContext)(b.Z),hn=on.message,Pn=on.notice,Fn=on.loading,Cn=on.lang,_=(0,B.useRef)(),Y=[],un=[],X=[],G=(0,B.useState)(""),L=W()(G,2),N=L[0],tn=L[1];return(0,B.useEffect)(function(){if(s.data){var x;(x=_.current)===null||x===void 0||x.setFieldValue("restart",s.data.info.HostConfig.RestartPolicy.Name),(0,h.K3)().then(function(Z){var P;tn((P=Z.data.serverUrl)!==null&&P!==void 0?P:"")}),_n(s.data.info.Name)}},[s.data]),s.data&&s.data.domain&&s.data.domain.map(function(x){X.push(x.setting.enableSSL?"https://"+x.serverName:"http://"+x.serverName)}),s.data&&s.data.info.NetworkSettings&&s.data.info.NetworkSettings.Ports&&Object.keys(s.data.info.NetworkSettings.Ports).map(function(x){var Z,P,V=(Z=(P=s.data.info)===null||P===void 0?void 0:P.NetworkSettings.Ports[x])!==null&&Z!==void 0?Z:[{HostPort:null,HostIp:""}],Q=x.split("/"),rn=W()(Q,2),k=rn[0],H=rn[1];V.map(function(w){w.HostPort?Y.push({PrivatePort:k,Type:H,IP:w.HostIp,PublicPort:w.HostPort}):un.push({PrivatePort:k,Type:H,IP:"",PublicPort:""})})}),(0,c.jsxs)(c.Fragment,{children:[s.data&&s.data.info.State.Running&&(0,c.jsx)(q.Z,{publicPort:Y,privatePort:un,domain:X,serverIp:N,showInDetail:!0,ghost:s.ghost,layout:"inline"}),(0,c.jsx)(M.Z,{title:(0,c.jsx)(l.Z,{}),subTitle:"\u5BB9\u5668\u72B6\u6001",ghost:s.ghost,children:(0,c.jsxs)(O.Z,{column:1,bordered:!0,children:[(0,c.jsx)(O.Z.Item,{label:"Hostname",children:(0,c.jsx)(y.Z,{split:(0,c.jsx)(o.Z,{type:"vertical"}),children:(0,c.jsx)(i.Z,{title:(z=s.data.info)===null||z===void 0?void 0:z.Config.Hostname})})}),(0,c.jsx)(O.Z.Item,{label:"\u5BB9\u5668\u540D\u79F0",children:(0,c.jsxs)(y.Z,{split:(0,c.jsx)(o.Z,{type:"vertical"}),children:[(0,c.jsx)(i.Z,{title:(nn=s.data.info)===null||nn===void 0?void 0:nn.Id.substring(0,12)}),(0,c.jsx)($.Z.Text,{copyable:!0,editable:{tooltip:"\u4FEE\u6539\u5BB9\u5668\u540D\u79F0",onChange:function(){var x=C()(r()().mark(function P(V){var Q,rn;return r()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if((Q=s.data.info)!==null&&Q!==void 0&&Q.Id){H.next=2;break}return H.abrupt("return");case 2:return H.next=4,(0,d.eE)({md5:s.data.info.Id,name:V});case 4:rn=H.sent,_n(V),hn.success(Cn("notification.finish"));case 7:case"end":return H.stop()}},P)}));function Z(P){return x.apply(this,arguments)}return Z}()},children:(0,R.fi)(Dn,"/")})]})}),(0,c.jsx)(O.Z.Item,{label:(0,c.jsx)(U.Z,{title:"\u7F51\u7EDC",help:"\u9ED8\u8BA4\u7F51\u7EDC\u53EA\u652F\u6301\u901A\u8FC7ip\u8BBF\u95EE,ip\u4F1A\u968F\u7740\u5BB9\u5668\u542F\u52A8\u505C\u6B62\u6539\u53D8.\u5982\u679C\u9700\u8981\u5728\u5BB9\u5668\u5185\u4E92\u8054,\u8BF7\u901A\u8FC7\u3010\u7F16\u8F91\u7AD9\u70B9\u3011-\u3010\u6DFB\u52A0\u5173\u8054\u3011"}),children:((sn=s.data.info)===null||sn===void 0?void 0:sn.State.Running)&&(0,c.jsxs)(O.Z,{column:1,bordered:!0,children:[s.data.info.NetworkSettings.Networks&&Object.keys(s.data.info.NetworkSettings.Networks).map(function(x,Z){var P,V,Q;return(0,c.jsx)(O.Z.Item,{label:x,children:x=="host"?" Host \u7F51\u7EDC\uFF0C\u4E0E\u5BBF\u4E3B\u673A\u5171\u7528\u540C\u4E00\u7F51\u7EDC":(0,c.jsxs)(y.Z,{direction:"vertical",children:[(0,c.jsx)(i.Z,{title:(P=s.data.info)===null||P===void 0?void 0:P.NetworkSettings.Networks[x].IPAddress}),(V=s.data.info)===null||V===void 0?void 0:V.NetworkSettings.Networks[x].Gateway,(Q=s.data.info)===null||Q===void 0?void 0:Q.NetworkSettings.Networks[x].MacAddress]})},Z)}),s.data.info.HostConfig.ExtraHosts&&(0,c.jsx)(O.Z.Item,{label:"\u5BBF\u4E3B\u673A\u7F51\u7EDC",children:(0,c.jsx)(y.Z,{direction:"vertical",children:s.data.info.HostConfig.ExtraHosts.map(function(x,Z){if(x.indexOf(":")>-1){var P=x.split(":");return"".concat(P[0]," - ").concat(P.slice(1).join(":"))}})})},"host")]})}),(0,c.jsxs)(O.Z.Item,{label:"\u8FD0\u884C\u65F6\u95F4",children:["\u521B\u5EFA\u4E8E: ",new Date((J=(cn=s.data.info)===null||cn===void 0?void 0:cn.Created)!==null&&J!==void 0?J:"").toLocaleString()," / \u66F4\u65B0\u4E8E: ",new Date((vn=(mn=s.data.info)===null||mn===void 0?void 0:mn.State.StartedAt)!==null&&vn!==void 0?vn:"").toLocaleString()]}),jn.canSeeContainerListManage&&(0,c.jsx)(O.Z.Item,{label:"\u91CD\u542F\u7B56\u7565",children:(0,c.jsx)(g.A,{name:"container-restart",submitter:!1,onValuesChange:function(){var x=C()(r()().mark(function Z(P){var V,Q;return r()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if((V=s.data.info)!==null&&V!==void 0&&V.Id){k.next=2;break}return k.abrupt("return");case 2:return k.next=4,(0,d.eE)({md5:s.data.info.Id,restart:P.restart});case 4:return Q=k.sent,hn.success("\u4FEE\u6539\u91CD\u542F\u7B56\u7565\u6210\u529F"),k.abrupt("return");case 7:case"end":return k.stop()}},Z)}));return function(Z){return x.apply(this,arguments)}}(),layout:"inline",formRef:_,children:(0,c.jsx)(t.Z,{defaultValue:(dn=s.data.info)===null||dn===void 0?void 0:dn.HostConfig.RestartPolicy.Name})})}),(0,c.jsx)(O.Z.Item,{label:"\u73AF\u5883\u53D8\u91CF",children:(0,c.jsx)(a.Z,{dataSource:(fn=(e=s.data.info)===null||e===void 0?void 0:e.Config.Env)!==null&&fn!==void 0?fn:[],renderItem:function(Z){var P=Z.split("=");return(0,c.jsxs)(a.Z.Item,{children:[(0,c.jsx)($.Z.Text,{code:!0,children:P[0]})," = ",(0,c.jsx)($.Z.Text,{copyable:!0,children:P.slice(1).join("=")})]})}})})]})})]})}},14245:function(en,S,n){n.d(S,{Z:function(){return W}});var K=n(60433),r=n(38345),I=n(26412),C=n(25593),E=n(85893);function W(l){return(0,E.jsx)(r.Z,{ghost:l.ghost,title:(0,E.jsx)(K.Z,{}),subTitle:"\u955C\u50CF\u8BE6\u60C5",children:(0,E.jsxs)(I.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,E.jsx)(I.Z.Item,{label:"Image Tag",children:(0,E.jsx)(C.Z.Text,{copyable:!0,children:l.data.Config.Image})}),(0,E.jsx)(I.Z.Item,{label:"Image",children:l.data.Image}),(0,E.jsx)(I.Z.Item,{label:"CMD",children:l.data.Config.Cmd&&l.data.Config.Cmd.join(" ")}),(0,E.jsx)(I.Z.Item,{label:"ENTRYPOINT",children:l.data.Config.Entrypoint}),(0,E.jsx)(I.Z.Item,{label:"Labels",children:(0,E.jsx)(I.Z,{column:1,bordered:!0,children:l.data&&Object.keys(l.data.Config.Labels).map(function(M){return(0,E.jsx)(I.Z.Item,{label:M,children:l.data.Config.Labels[M]},M)})})})]})})}},72409:function(en,S,n){n.d(S,{Z:function(){return Cn}});var K=n(15009),r=n.n(K),I=n(99289),C=n.n(I),E=n(5574),W=n.n(E),l=n(67294),M=n(80821),g=n(62597),O=n(13822),y=n(43425),o=n(58638),$=n(60219),a=n(86548),B=n(57132),i=n(87784),U=n(25035),t=n(38345),d=n(97269),b=n(62370),q=n(5966),R=n(52688),f=n(82346),h=n(42075),c=n(65233),an=n(96074),s=n(28036),z=n(25593),nn=n(85418),sn=n(40411),J=n(84567),cn=n(83062),vn=n(93162),mn=n(24739),dn=n(97462),fn=n(70146),e=n(85893);function gn(_){var Y=(0,l.useRef)(),un=(0,f.useAccess)();return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(M.Z,{icon:(0,e.jsx)($.Z,{}),action:C()(r()().mark(function X(){var G,L,N,tn;return r()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,fn.yB)({id:_.container.Name,enableImage:(G=Y.current)===null||G===void 0?void 0:G.getFieldValue("enableImage"),volume:Object.keys((L=(N=Y.current)===null||N===void 0?void 0:N.getFieldValue("volume"))!==null&&L!==void 0?L:{}).filter(function(P){return P}),enableCommitImage:(tn=Y.current)===null||tn===void 0?void 0:tn.getFieldValue("enableCommitImage")});case 2:case"end":return Z.stop()}},X)})),confirmOnOpenChange:function(G){var L,N;!((L=Y.current)===null||L===void 0)&&L.resetFields&&((N=Y.current)===null||N===void 0||N.resetFields())},confirm:(0,e.jsxs)(h.Z,{style:{width:650,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,e.jsx)(z.Z.Text,{children:(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:"\u5FEB\u7167\u529F\u80FD\u4F1A\u5C06\u3010\u5FEB\u7167\u6570\u636E\u3011\u4FDD\u5B58\u81F3 /dpanel/backup \u76EE\u5F55\u3002"}),(0,e.jsx)("li",{children:"\u5FEB\u7167\u540C\u65F6\u5907\u4EFD\u5BB9\u5668\u955C\u50CF\u5728\u6062\u590D\u540E\u65E0\u6CD5\u68C0\u6D4B\u66F4\u65B0\uFF0C\u5426\u5219\u6062\u590D\u65F6\u4F1A\u5148\u5C1D\u8BD5\u62C9\u53D6\u955C\u50CF"}),(0,e.jsx)("li",{children:"\u6062\u590D\u5FEB\u7167\u65F6\uFF0C\u5982\u679C\u76EE\u6807\u5BB9\u5668\u5DF2\u5B58\u5728\u5219\u53EA\u6062\u590D\u5BB9\u5668\u6570\u636E\u3002"}),(0,e.jsxs)("li",{children:["\u8BE5\u64CD\u4F5C\u53EF\u80FD\u4F1A\u6D88\u8017\u8F83\u957F\u65F6\u95F4\uFF0C\u8BF7\u5728 ",(0,e.jsx)(f.Link,{to:"/app/backup",children:"\u5BB9\u5668\u5FEB\u7167"})," \u67E5\u770B\u5FEB\u7167\u7ED3\u679C\u3002"]})]})}),(0,e.jsxs)(d.A,{layout:"horizontal",formRef:Y,submitter:!1,children:[(0,e.jsxs)(mn.UW,{children:[(0,e.jsx)(b.Z,{valuePropName:"checked",name:"enableSelectVolume",children:(0,e.jsx)(J.Z,{disabled:!_.container.Mounts||_.container.Mounts.length==0,children:"\u9009\u62E9\u5907\u4EFD\u76EE\u5F55\uFF1F"})}),(0,e.jsx)(b.Z,{valuePropName:"checked",name:"enableImage",children:(0,e.jsx)(J.Z,{children:"\u5907\u4EFD\u5BB9\u5668\u955C\u50CF\uFF1F"})}),(0,e.jsx)(dn.Z,{name:["enableImage"],children:function(G){var L=G.enableImage;if(L)return(0,e.jsx)(b.Z,{valuePropName:"checked",name:"enableCommitImage",children:(0,e.jsx)(J.Z,{children:"\u4FDD\u5B58\u5F53\u524D\u5BB9\u5668\u4E3A\u65B0\u955C\u50CF (docker commit)\uFF1F"})})}})]}),(0,e.jsx)(dn.Z,{name:["enableSelectVolume"],children:function(G){var L=G.enableSelectVolume;return L&&(0,e.jsx)(h.Z,{wrap:!0,children:_.container.Mounts.map(function(N,tn){return(0,e.jsx)(b.Z,{valuePropName:"checked",name:["volume",N.Destination],children:(0,e.jsx)(J.Z,{children:N.Destination})},"volume-".concat(tn))})})}})]})]}),children:"\u5BB9\u5668\u5FEB\u7167"})})}var En=n(24963),Dn=n(99861),_n=n(3393),jn=n(50888),on=n(16596),hn=n(1699),Pn=n(5251),Fn=(0,l.forwardRef)(function(_,Y){var un;(0,l.useImperativeHandle)(Y,function(){return{}});var X=(0,l.useRef)(),G=(0,l.useRef)(),L=(0,l.useRef)(),N=(0,l.useContext)(En.Z),tn=N.message,x=N.notice,Z=N.loading,P=N.lang,V=(0,l.useRef)(),Q=(0,l.useRef)(),rn=(0,l.useState)({status:0,error:""}),k=W()(rn,2),H=k[0],w=k[1],Bn=function(){var A=C()(r()().mark(function v(u){var j,m,D;return r()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(m=-2,!u.ignore){F.next=6;break}if(!(u.ignore.indexOf("".concat(u.info.Name,"@*"))>-1)){F.next=4;break}return F.abrupt("return",{status:-2,error:""});case 4:if(!(u.ignore.indexOf("".concat(u.info.Name,"@").concat(u.info.Image))>-1)){F.next=6;break}return F.abrupt("return",{status:-2,error:""});case 6:return F.next=8,(0,_n.ZQ)({tag:(j=u.info.Config.Image)!==null&&j!==void 0?j:"",md5:u.info.Image,cacheTime:3600}).catch(function(p){m=-1});case 8:if(D=F.sent,!(D&&D.data.error&&D.data.error!="")){F.next=11;break}return F.abrupt("return",{status:-1,error:D.data.error});case 11:return D&&(D.data.digestLocal&&D.data.digestLocal.length>0?m=D.data.upgrade?1:2:D.data.error!=""?m=-1:m=-2),F.abrupt("return",{status:m,error:""});case 13:case"end":return F.stop()}},v)}));return function(u){return A.apply(this,arguments)}}();return(0,l.useEffect)(function(){_.checkContainerUpgrade&&(w({status:0}),Bn(_.data).then(function(A){w(A)}))},[_.data]),(0,e.jsx)(t.Z,{ghost:_.ghost,title:(0,e.jsx)(y.Z,{}),subTitle:"\u5BB9\u5668\u7BA1\u7406",children:(0,e.jsxs)(h.Z,{wrap:!0,children:[(0,e.jsx)(M.Z,{icon:(0,e.jsx)(o.Z,{}),action:function(){var v,u;return(0,O.LJ)({md5:(v=(u=_.data)===null||u===void 0?void 0:u.info.Id)!==null&&v!==void 0?v:""})},confirm:"\u5BFC\u51FA\u5BB9\u5668\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u4E0D\u5305\u542B\u6302\u8F7D\u76EE\u5F55\u7684\u6570\u636E\uFF0C\u786E\u5B9A\u5417\uFF1F",onSuccess:function(v){var u,j=new Blob([v],{type:"application/tar"});(0,vn.saveAs)(j,(0,Pn.fi)((u=_.data)===null||u===void 0?void 0:u.info.Name,"/")+".tar")},children:"\u5BFC\u51FA\u5BB9\u5668"}),(0,e.jsx)(M.Z,{icon:(0,e.jsx)($.Z,{}),action:C()(r()().mark(function A(){var v,u,j,m,D;return r()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,O.Re)({md5:(v=(u=_.data)===null||u===void 0?void 0:u.info.Id)!==null&&v!==void 0?v:"",name:(j=(m=G.current)===null||m===void 0?void 0:m.getFieldValue("saveImageName"))!==null&&j!==void 0?j:(D=_.data)===null||D===void 0?void 0:D.info.Name});case 2:case"end":return F.stop()}},A)})),confirmTitle:"\u5C06\u5F53\u524D\u5BB9\u5668\u4FDD\u5B58\u4E3A\u955C\u50CF",confirm:(0,e.jsx)(h.Z,{style:{width:400,marginTop:"10px",paddingRight:"10px"},direction:"vertical",children:(0,e.jsx)(d.A,{formRef:G,submitter:!1,children:(0,e.jsx)(b.Z,{name:"saveImageName",children:(0,e.jsx)(c.Z,{addonBefore:"\u955C\u50CF\u540D\u79F0"})})})}),children:"\u53E6\u5B58\u4E3A\u955C\u50CF"}),_.data&&(0,e.jsx)(hn.u,{access:"canSeeContainerBackup",children:(0,e.jsx)(gn,{container:_.data.info})}),(0,e.jsx)(an.Z,{type:"vertical"}),(0,e.jsx)(f.Link,{to:"/app/create/image?id=".concat((un=_.data)===null||un===void 0?void 0:un.info.Id,"&op=update"),children:(0,e.jsx)(s.ZP,{type:"primary",icon:(0,e.jsx)(a.Z,{}),children:"\u7F16\u8F91\u5BB9\u5668"})}),(0,e.jsx)(M.Z,{icon:(0,e.jsx)(B.Z,{}),action:C()(r()().mark(function A(){var v,u,j,m,D,T;return r()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,O.aF)({md5:(v=(u=_.data)===null||u===void 0?void 0:u.info.Id)!==null&&v!==void 0?v:"",copyName:(j=(m=L.current)===null||m===void 0?void 0:m.getFieldValue("copyName"))!==null&&j!==void 0?j:"",enableRandomPort:(D=(T=L.current)===null||T===void 0?void 0:T.getFieldValue("enableRandomPort"))!==null&&D!==void 0?D:!1});case 2:return p.abrupt("return",p.sent);case 3:case"end":return p.stop()}},A)})),confirm:(0,e.jsxs)(h.Z,{style:{width:400,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(z.Z.Text,{children:"\u9ED8\u8BA4\u60C5\u51B5\u4E0B, \u590D\u5236\u7684\u76EE\u6807\u5BB9\u5668\u4E0E\u5F53\u524D\u5BB9\u5668\u5177\u6709\u76F8\u540C\u7684\u914D\u7F6E\u65E0\u6CD5\u542F\u52A8\u3002 \u5982\u679C\u4F60\u5E0C\u671B\u76EE\u6807\u5BB9\u5668\u6B63\u5E38\u8FD0\u884C\uFF0C\u8BF7\u5F00\u542F\u3010\u7ED1\u5B9A\u968F\u673A\u7AEF\u53E3\u3011"}),(0,e.jsxs)(d.A,{formRef:L,submitter:!1,layout:"horizontal",children:[(0,e.jsx)("br",{}),(0,e.jsx)(q.Z,{label:"\u590D\u5236\u5BB9\u5668\u540D\u79F0",name:"copyName"}),(0,e.jsx)(R.Z,{label:"\u7ED1\u5B9A\u968F\u673A\u7AEF\u53E3",name:"enableRandomPort"})]})]}),onSuccess:function(v){var u;(u=L.current)===null||u===void 0||u.resetFields()},children:"\u590D\u5236\u5BB9\u5668"}),_.data&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Dn.Z,{image:[_.data.info.Config.Image],ref:V}),(0,e.jsx)(nn.Z,{placement:"bottomLeft",menu:{items:[{key:"1",label:(0,e.jsx)(M.Z,{action:C()(r()().mark(function A(){var v,u,j,m,D,T;return r()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,g.ze)({md5:(v=(u=_.data.info)===null||u===void 0?void 0:u.Name)!==null&&v!==void 0?v:"",imageId:""});case 2:return w({status:0}),p.next=5,(0,_n.ZQ)({tag:(j=(m=_.data.info)===null||m===void 0?void 0:m.Config.Image)!==null&&j!==void 0?j:"",md5:(D=(T=_.data.info)===null||T===void 0?void 0:T.Image)!==null&&D!==void 0?D:"",cacheTime:0}).then(function(ln){ln.data.error&&ln.data.error!=""?w({status:-1,error:ln.data.error}):ln.data.digestLocal&&ln.data.digestLocal.length>0?w({status:ln.data.upgrade?1:2}):w({status:-2})}).catch(function(ln){w({status:-1})});case 5:return p.abrupt("return",p.sent);case 6:case"end":return p.stop()}},A)})),type:"link",children:"\u81EA\u52A8\u68C0\u6D4B"})},{key:"2",label:(0,e.jsx)(M.Z,{action:C()(r()().mark(function A(){var v,u,j,m;return r()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,(0,g.ze)({md5:(v=(u=_.data.info)===null||u===void 0?void 0:u.Name)!==null&&v!==void 0?v:"",imageId:(j=(m=_.data.info)===null||m===void 0?void 0:m.Image)!==null&&j!==void 0?j:""});case 2:return T.abrupt("return",T.sent);case 3:case"end":return T.stop()}},A)})),type:"link",children:"\u5FFD\u7565\u672C\u6B21"})},{key:"3",label:(0,e.jsx)(M.Z,{action:C()(r()().mark(function A(){var v,u;return r()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,g.ze)({md5:(v=(u=_.data.info)===null||u===void 0?void 0:u.Name)!==null&&v!==void 0?v:"",imageId:"*"});case 2:return m.abrupt("return",m.sent);case 3:case"end":return m.stop()}},A)})),type:"link",children:"\u6C38\u4E45\u5FFD\u7565"})}]},children:(0,e.jsx)(sn.Z,{title:H.error,count:P("app.detail.checkImageUpgrade."+H.status),color:P("app.detail.checkImageUpgradeColor."+H.status),children:(0,e.jsx)(M.Z,{disabled:H.status===0,icon:H.status===0?(0,e.jsx)(jn.Z,{}):(0,e.jsx)(on.Z,{}),action:C()(r()().mark(function A(){var v,u,j,m,D;return r()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(v=V.current)===null||v===void 0?void 0:v.start();case 2:return Z.show(),(u=V.current)===null||u===void 0||u.finish(),F.next=6,(0,O.RF)({md5:(j=_.data.info.Id)!==null&&j!==void 0?j:"",imageTag:"",enableBak:(m=(D=Q.current)===null||D===void 0?void 0:D.getFieldValue("enableBak"))!==null&&m!==void 0?m:!1});case 6:return F.abrupt("return",F.sent);case 7:case"end":return F.stop()}},A)})),confirm:(0,e.jsxs)(h.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(z.Z.Text,{children:P("app.detail.upgradeConfirm")}),(0,e.jsx)(d.A,{formRef:Q,submitter:!1,layout:"inline",children:(0,e.jsx)(b.Z,{name:"enableBak",valuePropName:"checked",children:(0,e.jsx)(J.Z,{children:"\u5907\u4EFD\u65E7\u5BB9\u5668\uFF1F"})})})]}),onSuccess:function(v){Z.destroy(),_.checkContainerUpgrade&&_.checkContainerUpgrade()},children:"\u5FEB\u901F\u5347\u7EA7\u5BB9\u5668"})})})]}),(0,e.jsx)(an.Z,{type:"vertical"}),_.data&&(0,e.jsx)(M.Z,{action:function(){var v,u,j,m,D,T;return(0,g.Ct)({md5:(v=(u=_.data)===null||u===void 0?void 0:u.info.Id)!==null&&v!==void 0?v:"",deleteImage:(j=(m=X.current)===null||m===void 0?void 0:m.getFieldValue("deleteImage"))!==null&&j!==void 0?j:!1,deleteVolume:(D=(T=X.current)===null||T===void 0?void 0:T.getFieldValue("deleteVolume"))!==null&&D!==void 0?D:!1})},danger:!0,type:"primary",icon:(0,e.jsx)(i.Z,{}),onSuccess:function(){Z.destroy(),_.checkContainerUpgrade&&_.checkContainerUpgrade()},confirm:(0,e.jsxs)(h.Z,{style:{width:200},direction:"vertical",children:[(0,e.jsx)(z.Z.Text,{children:P("notification.confirm.title")}),(0,e.jsxs)(d.A,{formRef:X,layout:"inline",submitter:!1,children:[(0,e.jsx)(b.Z,{addonAfter:(0,e.jsx)(cn.Z,{title:"\u672A\u6302\u8F7D\u955C\u50CF\u5185\u58F0\u660E\u7684\u76EE\u5F55\u5E76\u7531 docker \u81EA\u52A8\u521B\u5EFA\u7684\u5B58\u50A8\u5377",children:(0,e.jsx)(U.Z,{})}),name:"deleteVolume",valuePropName:"checked",children:(0,e.jsx)(J.Z,{children:"\u5220\u9664\u533F\u540D\u5B58\u50A8\u5377\uFF1F"})}),(0,e.jsx)(b.Z,{name:"deleteImage",valuePropName:"checked",children:(0,e.jsx)(J.Z,{children:"\u5220\u9664\u955C\u50CF\uFF1F"})})]})]}),children:"\u5220\u9664"})]})})}),Cn=Fn},14189:function(en,S,n){var K=n(43425),r=n(74842),I=n(87784),C=n(33160),E=n(30159),W=n(89035),l=n(38345),M=n(42075),g=n(96074),O=n(28036),y=n(67294),o=n(94359),$=n(80821),a=n(13822),B=n(99922),i=n(85893),U=(0,y.forwardRef)(function(t,d){(0,y.useImperativeHandle)(d,function(){return{showConsole:q}});var b=(0,y.useRef)();function q(R){var f;(f=b.current)===null||f===void 0||f.show({url:"/console/container/".concat(t.data.Id),title:t.data.Name,workDir:R})}return(0,i.jsx)(l.Z,{title:(0,i.jsx)(K.Z,{}),ghost:t.ghost,subTitle:(0,i.jsxs)(M.Z,{children:["\u72B6\u6001\u7BA1\u7406 - ",t.data&&(0,i.jsx)(o.Z,{status:t.data.State.Status,message:{content:t.data.State.Status,placement:"top"}})]}),children:(0,i.jsxs)(M.Z,{wrap:!0,children:[(0,i.jsx)($.Z,{icon:(0,i.jsx)(r.Z,{}),action:function(){var f,h;return(0,a.IW)({md5:(f=(h=t.data)===null||h===void 0?void 0:h.Id)!==null&&f!==void 0?f:"",operate:"start"})},onSuccess:function(){return t.onFinish&&t.onFinish()},disabled:t.data&&t.data.State.Running||t.data&&t.data.State.Paused,children:"\u542F\u52A8"}),(0,i.jsx)($.Z,{action:function(){var f,h;return(0,a.IW)({md5:(f=(h=t.data)===null||h===void 0?void 0:h.Id)!==null&&f!==void 0?f:"",operate:"stop"})},icon:(0,i.jsx)(I.Z,{}),onSuccess:function(){return t.onFinish&&t.onFinish()},disabled:t.data&&t.data.State.Dead,children:"\u505C\u6B62"}),(0,i.jsx)($.Z,{action:function(){var f,h;return(0,a.IW)({md5:(f=(h=t.data)===null||h===void 0?void 0:h.Id)!==null&&f!==void 0?f:"",operate:"restart"})},onSuccess:function(){return t.onFinish&&t.onFinish()},icon:(0,i.jsx)(C.Z,{}),children:"\u91CD\u542F"}),(0,i.jsx)($.Z,{action:function(){var f,h;return(0,a.IW)({md5:(f=(h=t.data)===null||h===void 0?void 0:h.Id)!==null&&f!==void 0?f:"",operate:"pause"})},onSuccess:function(){return t.onFinish&&t.onFinish()},icon:(0,i.jsx)(E.Z,{}),disabled:t.data&&t.data&&!t.data.State.Running,children:"\u6682\u505C"}),(0,i.jsx)($.Z,{action:function(){var f,h;return(0,a.IW)({md5:(f=(h=t.data)===null||h===void 0?void 0:h.Id)!==null&&f!==void 0?f:"",operate:"unpause"})},onSuccess:function(){return t.onFinish&&t.onFinish()},icon:(0,i.jsx)(r.Z,{}),disabled:t.data&&!t.data.State.Paused,children:"\u6062\u590D"}),(0,i.jsx)(g.Z,{type:"vertical"}),t.data&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(B.Z,{ref:b}),(0,i.jsx)(O.ZP,{type:"dashed",onClick:function(){t.data&&q(t.data.Config.WorkingDir)},icon:(0,i.jsx)(W.Z,{}),children:"Console"})]}),(0,i.jsx)(g.Z,{type:"vertical"}),t.extra&&t.extra.map(function(R,f){return(0,i.jsx)("span",{children:R},f)})]})})});S.Z=U},52031:function(en,S,n){n.d(S,{Z:function(){return M}});var K=n(31574),r=n(95591),I=n(38345),C=n(26412),E=n(78451),W=n(82346),l=n(85893);function M(g){var O,y=(0,W.useAccess)();return g.data&&g.data.Mounts&&g.data.Mounts.length>0&&(0,l.jsx)(I.Z,{ghost:g.ghost,title:(0,l.jsx)(K.Z,{}),subTitle:"\u6302\u8F7D\u76EE\u5F55\u8BE6\u60C5",children:(0,l.jsx)(C.Z,{column:1,bordered:!0,children:(O=g.data)===null||O===void 0?void 0:O.Mounts.map(function(o,$){var a;return(0,l.jsx)(C.Z.Item,{labelStyle:{width:"30%"},label:o.Type=="volume"?(0,l.jsx)(E.Z,{content:o.Name}):o.Source,children:y.canSeeContainerListManage?(0,l.jsxs)(W.Link,{target:"_blank",to:"/app/detail/file/".concat((a=g.data)===null||a===void 0?void 0:a.Id,"?tab=file&path=").concat(encodeURIComponent(o.Destination)),children:[o.Destination," ",(0,l.jsx)(r.Z,{})]}):o.Destination},$)})})})}},94359:function(en,S,n){n.d(S,{Z:function(){return $}});var K=n(3089),r=n(98165),I=n(18429),C=n(8751),E=n(14313),W=n(30159),l=n(87740),M=n(50888),g=n(66309),O=n(83062),y=n(82346),o=n(85893);function $(a){var B=(0,o.jsx)(o.Fragment,{});if(a.status=="0"&&(B=(0,o.jsx)(g.Z,{icon:(0,o.jsx)(K.Z,{}),color:"default",children:"waiting"})),a.status=="10"&&(B=(0,o.jsx)(g.Z,{icon:(0,o.jsx)(r.Z,{spin:!0}),color:"processing",children:"processing"})),a.status=="20"&&(B=(0,o.jsx)(g.Z,{icon:(0,o.jsx)(I.Z,{}),color:"error",children:"error"})),a.status=="30"&&(B=(0,o.jsx)(g.Z,{icon:(0,o.jsx)(C.Z,{}),color:"success",children:"success"})),a.status=="running"||a.status=="healthy"){var i,U;B=(0,o.jsx)(g.Z,{icon:(0,o.jsx)(E.Z,{}),color:"success",children:(i=a.message)!==null&&i!==void 0&&i.showInTag?(U=a.message)===null||U===void 0?void 0:U.content:a.status})}if(a.status=="paused"){var t,d;B=(0,o.jsx)(g.Z,{icon:(0,o.jsx)(W.Z,{}),children:(t=a.message)!==null&&t!==void 0&&t.showInTag?(d=a.message)===null||d===void 0?void 0:d.content:a.status})}if(a.status=="waiting"||a.status=="starting"){var b,q;B=(0,o.jsx)(g.Z,{icon:(0,o.jsx)(l.Z,{}),children:(b=a.message)!==null&&b!==void 0&&b.showInTag?(q=a.message)===null||q===void 0?void 0:q.content:a.status})}if(a.status=="deploying"){var R,f;B=(0,o.jsx)(g.Z,{icon:(0,o.jsx)(M.Z,{}),color:"processing",children:(R=a.message)!==null&&R!==void 0&&R.showInTag?(f=a.message)===null||f===void 0?void 0:f.content:a.status})}if(a.status=="error"){var h,c;B=(0,o.jsx)(g.Z,{icon:(0,o.jsx)(I.Z,{}),color:"error",children:(h=a.message)!==null&&h!==void 0&&h.showInTag?(c=a.message)===null||c===void 0?void 0:c.content:a.status})}if(a.status=="exited"||a.status=="dead"||a.status=="removing"||a.status=="restarting"||a.status=="unhealthy"||a.status=="created"){var an,s;B=(0,o.jsx)(g.Z,{icon:(0,o.jsx)(I.Z,{}),color:"warning",children:(an=a.message)!==null&&an!==void 0&&an.showInTag?(s=a.message)===null||s===void 0?void 0:s.content:a.status})}if(a.link)return(0,o.jsx)(y.Link,{to:a.link,children:B});if(a.message){var z,nn;return(0,o.jsx)(O.Z,{placement:(z=a.message.placement)!==null&&z!==void 0?z:"top",title:(nn=a.message.title)!==null&&nn!==void 0?nn:a.message.content,children:B})}return B}},76428:function(en,S,n){n.d(S,{Z:function(){return C}});var K=n(25593),r=n(67294),I=n(85893);function C(E){return(0,I.jsx)(K.Z.Text,{copyable:!0,children:E.title})}},78498:function(en,S,n){n.d(S,{Z:function(){return W}});var K=n(25035),r=n(42075),I=n(83062),C=n(67294),E=n(85893);function W(l){return(0,E.jsxs)(r.Z,{children:[l.title,(0,E.jsx)(I.Z,{title:l.help,children:(0,E.jsx)(K.Z,{})})]})}},70146:function(en,S,n){n.d(S,{SR:function(){return o},VE:function(){return O},Zy:function(){return M},iD:function(){return a},yB:function(){return W}});var K=n(15009),r=n.n(K),I=n(99289),C=n.n(I),E=n(82346);function W(i){return l.apply(this,arguments)}function l(){return l=C()(r()().mark(function i(U){return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,E.request)("/api/app/container-backup/create",{data:U,method:"POST"});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i)})),l.apply(this,arguments)}function M(i){return g.apply(this,arguments)}function g(){return g=C()(r()().mark(function i(U){return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,E.request)("/api/app/container-backup/get-list",{method:"POST",data:U}));case 1:case"end":return d.stop()}},i)})),g.apply(this,arguments)}function O(i){return y.apply(this,arguments)}function y(){return y=C()(r()().mark(function i(U){return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,E.request)("/api/app/container-backup/delete",{method:"POST",data:U}));case 1:case"end":return d.stop()}},i)})),y.apply(this,arguments)}function o(i){return $.apply(this,arguments)}function $(){return $=C()(r()().mark(function i(U){return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,E.request)("/api/app/container-backup/restore",{method:"POST",data:U}));case 1:case"end":return d.stop()}},i)})),$.apply(this,arguments)}function a(i){return B.apply(this,arguments)}function B(){return B=C()(r()().mark(function i(U){return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,E.request)("/api/app/container-backup/get-detail",{method:"POST",data:U}));case 1:case"end":return d.stop()}},i)})),B.apply(this,arguments)}}}]);
