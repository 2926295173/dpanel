"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3587],{73587:function(an,de,t){t.d(de,{Z:function(){return tn}});var me=t(19632),ve=t.n(me),fe=t(5574),k=t.n(fe),he=t(15009),d=t.n(he),ge=t(99289),A=t.n(ge),l=t(67294),Q=t(80821),E=t(90098),Fe=t(52209),pe=t(86548),ae=t(43425),ie=t(74842),se=t(48689),xe=t(33160),je=t(87784),ye=t(30159),Ce=t(25035),K=t(38345),ee=t(97269),Ze=t(86615),Y=t(62370),X=t(82346),le=t(85265),M=t(42075),ne=t(96074),H=t(25593),b=t(83062),Re=t(38925),J=t(84567),Se=t(28036),De=t(99861),Ee=t(91058),$e=t(79245),we=t(60940),Pe=t(55241),Le=t(78451),Be=t(37413),Ae=t(94359),te=t(24963),Ie=t(91806),Oe=t(60433),oe=t(89035),Te=t(57716),Ve=t(68714),Ge=t(87662),Ne=t(5251),e=t(85893);function Ue(u){var U=(0,l.useState)(""),T=k()(U,2),$=T[0],I=T[1],F=(0,l.useContext)(te.Z),j=F.loading,N=F.lang,v=F.notice,f=F.message,n=(0,l.useRef)(),w=(0,l.useRef)(),O=(0,l.useState)(!1),x=k()(O,2),h=x[0],y=x[1];return(0,l.useEffect)(function(){(0,Ge.K3)().then(function(o){var S;I((S=o.data.serverUrl)!==null&&S!==void 0?S:"")}),y(!1)},[u.containerList]),u.containerList&&(0,e.jsxs)(K.Z,{ghost:!0,title:(0,e.jsx)(Ie.Z,{}),subTitle:"\u5BB9\u5668\u5217\u8868",extra:u.enableSelectService&&(0,e.jsx)(J.Z,{onChange:function(S){y(S.target.checked)},children:"\u81EA\u5B9A\u4E49\u90E8\u7F72\u5BB9\u5668\u670D\u52A1\uFF1F"},"selectService"),children:[(0,e.jsx)(Te.Z,{ref:n}),(0,e.jsx)(Ve.Z,{ref:w}),(0,e.jsx)(we.Z,{scroll:{x:"max-content"},rowKey:"service",pagination:!1,columns:[{title:"\u5BB9\u5668\u540D\u79F0",dataIndex:"name",width:200,render:function(S,i,z){return(0,e.jsx)(b.Z,{title:i.service,children:(0,e.jsx)(Le.Z,{content:i.name?(0,Ne.fi)(i.name,"/"):i.service})})}},{title:"\u7AEF\u53E3",render:function(S,i,z){var C=[],L=[];return i.publishers&&i.publishers.map(function(V){V.publishedPort?C.push({PrivatePort:V.targetPort,Type:V.protocol,IP:V.url,PublicPort:V.publishedPort}):V.publishedPort&&L.push({PrivatePort:V.targetPort,Type:V.protocol,IP:V.url,PublicPort:V.publishedPort})}),(0,e.jsx)(Be.Z,{publicPort:C,privatePort:L,domain:[],serverIp:$})}},{title:"\u72B6\u6001",render:function(S,i,z){return(0,e.jsx)(Ae.Z,{status:i.state,message:{content:N("container.status.".concat(i.state)),placement:"top",showInTag:!0}},i.name)}},{title:"\u64CD\u4F5C",fixed:"right",render:function(S,i,z){return(0,e.jsxs)(M.Z,{split:(0,e.jsx)(ne.Z,{type:"vertical"}),children:[i.name==""&&(0,e.jsx)(Pe.Z,{placement:"left",content:(0,e.jsx)(K.Z,{ghost:!0,title:"\u5BB9\u5668\u5185\u73AF\u5883\u53D8\u91CF",children:(0,e.jsx)(M.Z,{direction:"vertical",children:i.environment&&Object.keys(i.environment).map(function(C){if(i.environment&&i.environment[C])return(0,e.jsx)(H.Z.Text,{code:!0,children:"".concat(C,"=").concat(i.environment[C])},C)})})}),children:(0,e.jsx)(Oe.Z,{})}),i.name!=""&&(0,e.jsx)(H.Z.Link,{onClick:function(){var L;(L=w.current)===null||L===void 0||L.show(i.name)},children:(0,e.jsx)(ae.Z,{})},"container"),i.state=="running"&&(0,e.jsx)(H.Z.Link,{onClick:function(){var L;(L=n.current)===null||L===void 0||L.show(i.name)},children:(0,e.jsx)(oe.Z,{})},"console")]})}}],dataSource:u.containerList,rowSelection:h&&u.containerList?{defaultSelectedRowKeys:u.containerList.map(function(o){return o.service}),onChange:function(S,i,z){u.selectServiceFinish&&u.selectServiceFinish(S)}}:void 0})]})}var ke=t(81146),Qe=t(45742),Ye=(0,l.forwardRef)(function(u,U){(0,l.useImperativeHandle)(U,function(){return{show:function(O){return A()(d()().mark(function x(){return d()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:f(u.composeItem),F(!0);case 2:case"end":return y.stop()}},x)}))()}}});var T=(0,l.useState)(!1),$=k()(T,2),I=$[0],F=$[1],j=(0,l.useState)(),N=k()(j,2),v=N[0],f=N[1],n=(0,l.useRef)();return(0,e.jsxs)(e.Fragment,{children:[u.showTriggerButton&&(0,e.jsx)(H.Z.Link,{onClick:A()(d()().mark(function w(){return d()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:f(u.composeItem),F(!0);case 2:case"end":return x.stop()}},w)})),children:(0,e.jsx)(b.Z,{title:"\u8FD0\u884C\u65E5\u5FD7",children:(0,e.jsx)(Qe.Z,{})})},"log"),(0,e.jsx)(le.Z,{title:"\u4EFB\u52A1\u65E5\u5FD7",open:I,forceRender:!0,onClose:function(){F(!1)},afterOpenChange:function(O){if(O)setTimeout(function(){var h,y;(h=n.current)===null||h===void 0||h.start(),(y=n.current)===null||y===void 0||y.fit()},1e3);else{var x;(x=n.current)===null||x===void 0||x.close()}},width:800,children:v&&I&&(0,e.jsx)(ke.Z,{ref:n,showInDrawer:!0,id:"compose:log:".concat(String(v.id||v.name)),request:function(){var w=A()(d()().mark(function O(x){var h;return d()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,E.Yz)({id:v.id||v.name,lineTotal:x.lineTotal,download:(h=x.download)!==null&&h!==void 0?h:!1,showTime:x.showTime});case 2:case"end":return o.stop()}},O)}));return function(O){return w.apply(this,arguments)}}(),download:function(){var w=A()(d()().mark(function O(x){var h;return d()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,E.vf)({id:v.id||v.name,lineTotal:x.lineTotal,showTime:x.showTime,download:!0});case 2:return h=o.sent,o.abrupt("return",{data:new Blob([h],{type:"text/plain"}),name:u.composeItem.name+"_"+new Date().toLocaleDateString()+".log"});case 4:case"end":return o.stop()}},O)}));return function(O){return w.apply(this,arguments)}}()})})]})}),Me=Ye,He=t(184),ze=t(95213),Ke=t(95089),Je=t(92398);function We(u){var U=(0,l.useContext)(te.Z),T=U.message,$=(0,l.useRef)();return u.composeItem.yamlList&&(0,e.jsx)(He.a,{title:"\u7F16\u8F91\u4EFB\u52A1 Yaml",formRef:$,trigger:(0,e.jsx)(H.Z.Link,{children:(0,e.jsx)(b.Z,{title:"Yaml",children:"Yaml"})}),onFinish:function(){var I=A()(d()().mark(function F(j){return d()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,E.im)({id:String(u.composeItem.id?u.composeItem.id:u.composeItem.name),name:u.composeItem.name,type:u.composeItem.setting.type,yaml:j.yaml,yamlOverride:j.yamlOverride});case 2:return v.next=4,(0,E.xC)({yaml:[j.yaml,j.yamlOverride],environment:u.composeItem.setting.environment,id:u.composeItem.id||u.composeItem.name});case 4:return u.onFinish&&u.onFinish(),v.abrupt("return",!0);case 6:case"end":return v.stop()}},F)}));return function(F){return I.apply(this,arguments)}}(),children:(0,e.jsx)(K.Z,{ghost:!0,children:(0,e.jsx)(Je.Z,{items:u.composeItem.yamlList.map(function(I,F){var j=[{label:"Yaml \u6587\u4EF6",key:"yaml"},{label:"\u8986\u76D6 Yaml \u6587\u4EF6",key:"yamlOverride"}];return{label:j[F].label,key:j[F].key,children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Y.Z,{hidden:!0,name:j[F].key}),(0,e.jsx)(Y.Z,{shouldUpdate:!0,children:function(v){return(0,e.jsx)(Ke.ZP,{onFocus:function(){if(j[F].key=="yaml"&&u.composeItem.setting.type=="remoteUrl"){T.error("\u8FDC\u7A0Byaml\u6587\u4EF6\u65E0\u6CD5\u4FEE\u6539\uFF0C\u8BF7\u901A\u8FC7\u3010\u8986\u76D6 yaml \u6587\u4EF6\u3011\u7684\u65B9\u5F0F\u4FEE\u6539\u5185\u5BB9\u3002");return}},readOnly:j[F].key=="yaml"&&u.composeItem.setting.type=="remoteUrl",theme:"dark",minHeight:"550px",value:I,onChange:function(n){v.setFieldValue(j[F].key,n)},extensions:[ze.RI.yaml()]})}})]})}})})})})}var Xe=t(40365),be=(0,l.forwardRef)(function(u,U){(0,l.useImperativeHandle)(U,function(){return{show:function(){var f;N(!0),(f=$.current)===null||f===void 0||f.clear(),setTimeout(function(){var n;(n=$.current)===null||n===void 0||n.fit()},1e3)},close:function(){var f;N(!1),(f=$.current)===null||f===void 0||f.clear()}}});var T=(0,X.useModel)("subscriber"),$=(0,l.useRef)(),I=(0,l.useState)(!1),F=k()(I,2),j=F[0],N=F[1];return T.addDataHandler("compose:"+u.id,function(v){var f;(f=$.current)===null||f===void 0||f.write(v.data)}),(0,e.jsx)(K.Z,{hidden:!j,ghost:!0,title:(0,e.jsx)(oe.Z,{}),subTitle:"\u63A7\u5236\u53F0",extra:(0,e.jsx)(M.Z,{children:(0,e.jsx)(Q.Z,{action:function(){var f;return(f=$.current)===null||f===void 0||f.clear(),(0,E.U_)({})},icon:(0,e.jsx)(se.Z,{}),danger:!0,onSuccess:function(){},children:"\u4E2D\u6B62\u6267\u884C"},"kill")}),children:(0,e.jsx)(Xe.Z,{height:"200px",style:{fontSize:12},ref:$})})}),qe=be,_e=t(65913),re=t(1699),en=t(28230),nn=(0,l.forwardRef)(function(u,U){var T;(0,l.useImperativeHandle)(U,function(){return{show:function(a){return A()(d()().mark(function c(){var g;return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return(g=C.current)===null||g===void 0||g.close(),j(!0),s.prev=2,s.next=5,ce(a);case 5:s.next=12;break;case 7:s.prev=7,s.t0=s.catch(2),j(!1),w(void 0),u.onClose&&u.onClose();case 12:case"end":return s.stop()}},c,null,[[2,7]])}))()}}});var $=(0,l.useState)(!1),I=k()($,2),F=I[0],j=I[1],N=(0,X.useNavigate)(),v=(0,l.useState)(),f=k()(v,2),n=f[0],w=f[1],O=(0,l.useState)(0),x=k()(O,2),h=x[0],y=x[1],o=(0,l.useRef)(),S=(0,l.useRef)(),i=(0,l.useRef)(),z=(0,l.useRef)(),C=(0,l.useRef)(),L=(0,l.useRef)(),V=(0,l.useContext)(te.Z),rn=V.message,q=(0,X.useAccess)(),un=function(){var m=A()(d()().mark(function a(c){var g,D,s,r;return d()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if((g=C.current)===null||g===void 0||g.show(),!c.pullImageUseDPanel){p.next=5;break}return p.next=4,(D=z.current)===null||D===void 0?void 0:D.start();case 4:(s=z.current)===null||s===void 0||s.finish();case 5:return p.prev=5,p.next=8,(0,E.Oh)(c);case 8:(r=C.current)===null||r===void 0||r.close(),u.onDeployFinish&&u.onDeployFinish(),p.next=15;break;case 12:p.prev=12,p.t0=p.catch(5),u.onDeployFailed&&u.onDeployFailed(n);case 15:y(h+1);case 16:case"end":return p.stop()}},a,null,[[5,12]])}));return function(c){return m.apply(this,arguments)}}(),ce=function(){var m=A()(d()().mark(function a(c){var g,D,s,r,R,p,P;return d()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return(g=L.current)===null||g===void 0||g.show(),(D=o.current)===null||D===void 0||D.resetFields(),G.next=4,(0,E.Pn)({id:c}).finally(A()(d()().mark(function Z(){var B;return d()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:(B=L.current)===null||B===void 0||B.destroy();case 1:case"end":return ue.stop()}},Z)}))).catch(function(Z){throw Z});case 4:s=G.sent,r=s.data.detail,r.setting.status&&r.setting.status.indexOf("running")>-1&&(r.isRunning=!0),r.setting.status&&r.setting.status.indexOf("paused")>-1&&(r.isPaused=!0),r.setting.status&&r.setting.status.indexOf("exited")>-1&&(r.isExited=!0),r.setting.status&&r.setting.status=="waiting"?r.isDeploy=!1:r.isDeploy=!0,r.setting.status&&r.setting.status.indexOf("created")>-1&&(r.isCreated=!0,r.isDeploy=!1),R=s.data.project,R&&(r.imageList=ve()(new Set(Object.keys(R.services).map(function(Z){var B;return(B=R.services[Z].image)!==null&&B!==void 0?B:""})))),r.containerList=s.data.containerList,(!r.containerList||r.containerList.length==0)&&R&&R.services&&(r.containerList=Object.keys(R.services).map(function(Z){return{name:"",service:Z,publishers:R.services[Z].ports?R.services[Z].ports.map(function(B){var W;return{url:"",targetPort:B.target,publishedPort:parseInt(B.published),protocol:(W=B.protocol)!==null&&W!==void 0?W:""}}):[],state:"waiting",status:"",environment:R.services[Z].environment}})),r.containerList&&((p=o.current)===null||p===void 0||p.setFieldValue("deployServiceName",s.data.detail.setting.deployServiceName)),r.yamlList=s.data.yaml,w(r),s.data.yaml&&s.data.yaml.map(function(Z){(0,$e.m)(Z).map(function(B){r.setting.environment&&!r.setting.environment.find(function(W){return W.name==B.name})&&r.setting.environment.push(B)})}),s.data.detail.setting.environment&&((P=o.current)===null||P===void 0||P.setFieldValue("environment",s.data.detail.setting.environment));case 20:case"end":return G.stop()}},a)}));return function(c){return m.apply(this,arguments)}}();return(0,l.useEffect)(function(){h>0&&n&&ce(n.id||n.name).catch(function(m){j(!1)})},[h]),(0,e.jsx)(le.Z,{width:800,forceRender:!0,extra:n&&n.setting.type!="dangling"&&(0,e.jsxs)(M.Z,{split:(0,e.jsx)(ne.Z,{type:"vertical"}),children:[n.isDeploy&&(0,e.jsx)(Me,{composeItem:n,showTriggerButton:!0}),q.canSeeComposeListManage&&(0,e.jsx)(en.Z,{trigger:(0,e.jsx)(H.Z.Link,{children:(0,e.jsx)(Fe.Z,{})},"network")},"network-create"),q.canSeeComposeListManage&&(0,e.jsx)(We,{composeItem:n,onFinish:A()(d()().mark(function m(){return d()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:rn.info("\u4FEE\u6539 Yaml \u540E\u8BF7\u66F4\u65B0\u8BE5\u4EFB\u52A1\uFF0C\u5982\u679C\u5305\u542B\u73AF\u5883\u53D8\u91CF\u6539\u52A8\uFF0C\u8BF7\u91CD\u65B0\u90E8\u7F72"),y(h+1);case 2:case"end":return c.stop()}},m)}))}),q.canSeeComposeListManageCreate&&(0,e.jsx)(X.Link,{to:"/compose/create?id="+(n.id||n.name),children:(0,e.jsx)(b.Z,{title:"\u7F16\u8F91\u4EFB\u52A1",children:(0,e.jsx)(pe.Z,{})})})]}),title:(0,e.jsxs)(M.Z,{children:["\u5FEB\u6377\u67E5\u770B\u4EFB\u52A1 - ",(T=n==null?void 0:n.name)!==null&&T!==void 0?T:""]}),open:F,onClose:function(){j(!1),w(void 0),u.onClose&&u.onClose()},children:(0,e.jsx)(_e.Z,{ref:L,children:(0,e.jsxs)(K.Z,{direction:"column",ghost:!0,gutter:[10,10],children:[(0,e.jsxs)(K.Z,{title:(0,e.jsx)(ae.Z,{}),subTitle:"\u7BA1\u7406\u4EFB\u52A1",ghost:!0,extra:(0,e.jsx)(e.Fragment,{children:n&&n.imageList&&n.imageList.length>0&&(0,e.jsx)(De.Z,{ref:z,image:n.imageList})}),children:[n&&n.setting.type=="dangling"&&(0,e.jsx)(Re.Z,{type:"warning",showIcon:!0,description:(0,e.jsxs)("div",{children:["\u65E0\u6CD5\u627E\u5230\u8BE5\u4EFB\u52A1\u7684 yaml \u6587\u4EF6\uFF0C \u8BF7\u5728\u9762\u677F\u7684 /dpanel/compose \u76EE\u5F55\u4E2D\u6DFB\u52A0 ",n.name," \u76EE\u5F55, \u5728\u76EE\u5F55\u4E2D\u653E\u7F6E compose.yaml \u6587\u4EF6 ",(0,e.jsx)("a",{href:"https://dpanel.cc/#/zh-cn/manual/compose/external",target:"_blank",children:"\u5982\u4F55\u6DFB\u52A0\uFF1F"})]})}),n&&n.setting.type!="dangling"&&(0,e.jsxs)(M.Z,{wrap:!0,split:(0,e.jsx)(ne.Z,{type:"vertical"}),children:[(0,e.jsx)(re.u,{access:"canSeeComposeList",children:(0,e.jsx)(Q.Z,{icon:(0,e.jsx)(ie.Z,{}),type:"primary",confirmOnOpenChange:function(a){var c;a&&(!((c=i.current)===null||c===void 0)&&c.resetFields)&&i.current.resetFields()},confirm:(0,e.jsxs)(M.Z,{style:{width:300},direction:"vertical",children:[(0,e.jsx)(H.Z.Text,{children:"\u91CD\u65B0\u521B\u5EFA\u8BE5\u4EFB\u52A1\u4E0B\u7684\u5BB9\u5668\uFF1F"}),(0,e.jsxs)(ee.A,{name:"createForm",formRef:i,layout:"inline",submitter:!1,children:[(0,e.jsx)(Ze.Z.Group,{name:"pullImageUse",layout:"vertical",fieldProps:{style:{display:"flex",flexDirection:"column",gap:8}},valueEnum:{useCommand:"\u4F7F\u7528\u547D\u4EE4\u62C9\u53D6\u955C\u50CF\uFF08\u9700\u914D\u7F6E\u547D\u4EE4\u4EE3\u7406\uFF09\uFF1F",useDPanel:"\u4F7F\u7528\u9762\u677F\u62C9\u53D6\u955C\u50CF\uFF08\u9700\u914D\u7F6E\u4ED3\u5E93\u52A0\u901F\uFF09\uFF1F"}}),(0,e.jsx)(Y.Z,{initialValue:!0,name:"createPath",valuePropName:"checked",children:(0,e.jsx)(J.Z,{defaultChecked:!0,children:"\u521B\u5EFA\u6302\u8F7D\u76EE\u5F55\uFF08\u4EC5\u9762\u677F\u975E\u5BB9\u5668\u90E8\u7F72\u751F\u6548\uFF09\uFF1F"})}),(0,e.jsx)(Y.Z,{initialValue:!0,name:"removeOrphans",valuePropName:"checked",children:(0,e.jsx)(J.Z,{defaultChecked:!0,children:"\u6E05\u9664\u5DF2\u91CD\u547D\u540D\u6216\u662F\u88AB\u5220\u9664\u7684\u670D\u52A1\uFF1F"})})]})]}),action:A()(d()().mark(function m(){var a,c,g,D,s,r,R,p,P,_;return d()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(P={id:n.id||n.name},(a=i.current)!==null&&a!==void 0&&a.getFieldValue&&((c=i.current)===null||c===void 0?void 0:c.getFieldValue("pullImageUse"))=="useDPanel"&&(P.pullImageUseDPanel=!0),P.environment=(g=o.current)===null||g===void 0?void 0:g.getFieldValue("environment"),P.deployServiceName=(D=o.current)===null||D===void 0?void 0:D.getFieldValue("deployServiceName"),P.createPath=(s=(r=i.current)===null||r===void 0?void 0:r.getFieldValue("createPath"))!==null&&s!==void 0?s:!0,P.removeOrphans=(R=(p=i.current)===null||p===void 0?void 0:p.getFieldValue("removeOrphans"))!==null&&R!==void 0?R:!0,!(n!=null&&n.isDeploy)){Z.next=10;break}if(!((_=i.current)!==null&&_!==void 0&&_.getFieldValue("pullImageUseCommand"))){Z.next=10;break}return Z.next=10,(0,E.GG)({id:n.id||n.name,op:"pull"});case 10:return Z.abrupt("return",un(P));case 11:case"end":return Z.stop()}},m)})),children:n.isDeploy?"\u66F4\u65B0":"\u542F\u52A8"},"create")}),(n.isDeploy||n.isCreated)&&q.canSeeComposeListManage&&(0,e.jsx)(Q.Z,{action:function(){var a;return(a=C.current)===null||a===void 0||a.show(),(0,E.mg)({id:n.id||n.name,deleteImage:!1,deleteData:!1,deleteVolume:!1,deletePath:!1})},onSuccess:function(){y(h+1)},type:"primary",danger:!0,confirm:"notification.confirm.title",icon:(0,e.jsx)(se.Z,{}),children:"\u5220\u9664\u5BB9\u5668"}),n.isDeploy&&(0,e.jsxs)(re.u,{access:"canSeeComposeList",space:{direction:"horizontal"},children:[(0,e.jsx)(Q.Z,{icon:(0,e.jsx)(xe.Z,{}),action:A()(d()().mark(function m(){var a;return d()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return(a=C.current)===null||a===void 0||a.show(),g.abrupt("return",(0,E.GG)({id:n.id||n.name,op:"restart"}));case 2:case"end":return g.stop()}},m)})),onSuccess:function(){y(h+1)},children:"\u91CD\u542F"},"restart"),(0,e.jsx)(Q.Z,{action:function(){var a;return(a=C.current)===null||a===void 0||a.show(),(0,E.GG)({id:n.id||n.name,op:"stop"})},icon:(0,e.jsx)(je.Z,{}),disabled:n.isExited,onSuccess:function(){y(h+1)},children:"\u505C\u6B62"}),n.isPaused&&(0,e.jsx)(Q.Z,{action:function(){var a;return(a=C.current)===null||a===void 0||a.show(),(0,E.GG)({id:n.id||n.name,op:"unpause"})},onSuccess:function(){y(h+1)},icon:(0,e.jsx)(ie.Z,{}),children:"\u6062\u590D"}),!n.isPaused&&(0,e.jsx)(Q.Z,{action:function(){var a;return(a=C.current)===null||a===void 0||a.show(),(0,E.GG)({id:n.id||n.name,op:"pause"})},onSuccess:function(){y(h+1)},icon:(0,e.jsx)(ye.Z,{}),disabled:!n.isRunning,children:"\u6682\u505C"})]}),n.id>0&&q.canSeeComposeListManageDelete&&(0,e.jsx)(Q.Z,{type:"primary",action:A()(d()().mark(function m(){var a,c,g,D,s,r,R,p,P;return d()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return(a=C.current)===null||a===void 0||a.show(),G.next=3,(0,E.mg)({id:(c=n==null?void 0:n.id)!==null&&c!==void 0?c:n.name,deleteImage:(g=(D=S.current)===null||D===void 0?void 0:D.getFieldValue("deleteImage"))!==null&&g!==void 0?g:!1,deleteVolume:(s=(r=S.current)===null||r===void 0?void 0:r.getFieldValue("deleteVolume"))!==null&&s!==void 0?s:!1,deletePath:(R=(p=S.current)===null||p===void 0?void 0:p.getFieldValue("deletePath"))!==null&&R!==void 0?R:!1});case 3:return G.next=5,(0,E.ik)({id:[(P=n.id)!==null&&P!==void 0?P:0]});case 5:y(h+1);case 6:case"end":return G.stop()}},m)})),danger:!0,onSuccess:function(){N("/compose/list")},confirm:(0,e.jsxs)(M.Z,{style:{width:240},direction:"vertical",children:[(0,e.jsx)(H.Z.Text,{children:"\u4F1A\u540C\u65F6\u5220\u9664\u5BB9\u5668\u53CA\u90E8\u7F72\u76F8\u5173\u6570\u636E\uFF0C\u672A\u52FE\u9009\u5220\u9664 compose \u6587\u4EF6\u65F6 yaml \u6587\u4EF6\u5C06\u4F1A\u4FDD\u7559\uFF0C\u786E\u8BA4\u5417\uFF1F"}),(0,e.jsxs)(ee.A,{formRef:S,layout:"inline",submitter:!1,children:[(0,e.jsx)(Y.Z,{initialValue:!1,name:"deleteImage",valuePropName:"checked",children:(0,e.jsx)(J.Z,{children:"\u5220\u9664\u955C\u50CF\uFF1F"})}),(0,e.jsx)(Y.Z,{addonAfter:(0,e.jsx)(b.Z,{title:"\u672A\u6302\u8F7D\u955C\u50CF\u5185\u58F0\u660E\u7684\u76EE\u5F55\u5E76\u7531 docker \u81EA\u52A8\u521B\u5EFA\u7684\u5B58\u50A8\u5377",children:(0,e.jsx)(Ce.Z,{})}),initialValue:!1,name:"deleteVolume",valuePropName:"checked",children:(0,e.jsx)(J.Z,{children:"\u5220\u9664\u533F\u540D\u5B58\u50A8\u5377\uFF1F"})}),(0,e.jsx)(Y.Z,{initialValue:!1,name:"deletePath",valuePropName:"checked",children:(0,e.jsx)(J.Z,{children:"\u5220\u9664 Compose \u6587\u4EF6\u548C\u4EFB\u52A1\u76EE\u5F55\uFF1F"})})]})]}),children:"\u5220\u9664\u4EFB\u52A1"}),u.showBackListButton&&(0,e.jsx)(X.Link,{to:"/compose/list",children:(0,e.jsx)(Se.ZP,{children:"\u4EFB\u52A1\u5217\u8868"})})]})]},"operator"),n&&(0,e.jsx)(qe,{ref:C,id:n.id||n.name}),n&&(0,e.jsx)(Ue,{containerList:n.containerList,enableSelectService:!n.isDeploy,selectServiceFinish:function(a){var c;(c=o.current)===null||c===void 0||c.setFieldValue("deployServiceName",a)}}),(0,e.jsx)(re.u,{access:"canSeeComposeList",children:(0,e.jsxs)(ee.A,{submitter:!1,formRef:o,children:[(0,e.jsx)(Y.Z,{name:"deployServiceName",hidden:!0}),n&&n.setting.type!="dangling"&&(0,e.jsx)(K.Z,{title:"\u73AF\u5883\u53D8\u91CF",subTitle:"\u73AF\u5883\u53D8\u91CF\u4F1A\u8986\u76D6 .env \u6587\u4EF6",tooltip:"\u66B4\u9732\u73AF\u5883\u53D8\u91CF\u9700\u8981\u5728 yaml \u4E2D\u914D\u7F6E\u73AF\u5883\u53D8\u91CF",ghost:!0,children:(0,e.jsx)(Ee.Z,{showCardGhost:!0,name:"environment",showDisableName:!0,requireValue:!0,showDeleteButton:!1})})]})})]})})})}),tn=nn}}]);
