"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6357],{8287:function(Ce,re,e){var oe=e(5574),_=e.n(oe),se=e(15009),r=e.n(se),le=e(99289),c=e.n(le),s=e(13822),D=e(25593),N=e(83062),E=e(85265),H=e(42075),K=e(67294),T=e(81146),G=e(1883),Y=e(58638),z=e(62597),J=e(3616),O=e(82346),q=e(36146),Ee=e(5251),I=e(85893),pe=(0,K.forwardRef)(function(je,Te){var o;(0,K.useImperativeHandle)(Te,function(){return{show:function(x){return c()(r()().mark(function m(){var L;return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,s.jV)({md5:x});case 2:L=u.sent,L.data&&$(L.data.info),a(!0);case 5:case"end":return u.stop()}},m)}))()}}});var Ie=(0,K.useState)(!1),Z=_()(Ie,2),ie=Z[0],a=Z[1],R=(0,K.useState)(),Me=_()(R,2),n=Me[0],$=Me[1],ee=(0,K.useRef)(),ue=new q.Uo("components.appDetail.appDetailQuickLog");return(0,I.jsxs)(I.Fragment,{children:[je.showTriggerButton&&(0,I.jsx)(D.Z.Link,{onClick:c()(r()().mark(function k(){return r()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:$(je.containerInfo),a(!0);case 2:case"end":return m.stop()}},k)})),children:(0,I.jsx)(N.Z,{title:ue.format("drawerTriggerButtonTip"),children:(0,I.jsx)(G.Z,{})})},"log"),(0,I.jsx)(E.Z,{title:ue.format("drawerTitle",{name:(0,Ee.fi)((o=n==null?void 0:n.Name)!==null&&o!==void 0?o:"","/")}),open:ie,forceRender:!0,onClose:function(){a(!1)},afterOpenChange:function(x){if(x)setTimeout(function(){var L,U;(L=ee.current)===null||L===void 0||L.start(),(U=ee.current)===null||U===void 0||U.fit()},1e3);else{var m;(m=ee.current)===null||m===void 0||m.close()}},width:J.FK,extra:(0,I.jsx)(H.Z,{children:(0,I.jsx)(O.Link,{to:"/container/log/".concat(n==null?void 0:n.Name),target:"_blank",onClick:function(){var x;(x=ee.current)===null||x===void 0||x.close(),a(!1)},children:(0,I.jsx)(N.Z,{title:ue.format("openNewWindowButtonTip"),children:(0,I.jsx)(Y.Z,{})})})}),children:n&&ie&&(0,I.jsx)(T.Z,{ref:ee,showInDrawer:!0,id:"container:log:".concat(n==null?void 0:n.Id),request:function(){var k=c()(r()().mark(function x(m){var L;return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,z.Tb)({id:(L=n.Id)!==null&&L!==void 0?L:"",lineTotal:m.lineTotal,download:m.download,showTime:m.showTime});case 2:case"end":return u.stop()}},x)}));return function(x){return k.apply(this,arguments)}}(),download:function(){var k=c()(r()().mark(function x(m){var L,U,u,A;return r()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,(0,z.XH)({id:(L=n.Id)!==null&&L!==void 0?L:"",lineTotal:m.lineTotal,showTime:m.showTime});case 2:return u=ae.sent,ae.next=5,(0,s.jV)({md5:(U=n.Id)!==null&&U!==void 0?U:""});case 5:return A=ae.sent,ae.abrupt("return",{data:new Blob([u],{type:"text/plain"}),name:A.data.info.Name.replaceAll("/","")+"_"+new Date().toLocaleDateString()+".log"});case 7:case"end":return ae.stop()}},x)}));return function(x){return k.apply(this,arguments)}}()})})]})});re.Z=pe},46357:function(Ce,re,e){e.d(re,{Z:function(){return Ae}});var oe=e(5574),_=e.n(oe),se=e(15009),r=e.n(se),le=e(99289),c=e.n(le),s=e(67294),D=e(37767),N=e(13822),E=e(82346),H=e(95591),K=e(60433),T=e(85265),G=e(96074),Y=e(83062),z=e(25593),J=e(86250),O=e(26412),q=e(52031),Ee=e(14189),I=e(53399),pe=e(93362),je=e(184),Te=e(43831),o=e(5251),Ie=e(26522),Z=e(3616),ie=e(36146),a=e(85893),R=(0,s.forwardRef)(function(b,te){(0,s.useImperativeHandle)(te,function(){return{}});var l=(0,s.useState)(!1),V=_()(l,2),F=V[0],ge=V[1],me=new ie.Uo("components.appDetail.appDetailQuickNetwork");return(0,a.jsx)(je.a,{submitter:!1,title:me.format("drawerTitle",{name:(0,o.fi)(b.containerInfo.Name,"/")}),onOpenChange:function(C){ge(C)},drawerProps:{width:Z.R_},open:F,trigger:(0,a.jsx)(Y.Z,{title:ie.Ob.format("container.detail.network"),children:(0,a.jsx)(z.Z.Link,{children:(0,a.jsx)(Ie.Z,{})},"file")}),children:(0,a.jsx)(Te.Z,{ghost:!0,containerInfo:b.containerInfo})})}),Me=R,n=e(8287),$=e(65913),ee=e(14245),ue=e(1699),k=e(97857),x=e.n(k),m=e(40666),L=e(64789),U=e(97937),u=e(38345),A=e(42075),f=e(66309),ae=e(86738),S=e(90127),P=e(29453);function j(b){var te=(0,s.useState)(0),l=_()(te,2),V=l[0],F=l[1],ge=(0,s.useState)(),me=_()(ge,2),t=me[0],C=me[1],xe=new ie.Uo("components.appDetail.appDetailQuickTag"),Re=(0,s.useState)(),ye=_()(Re,2),de=ye[0],Le=ye[1];return(0,s.useEffect)(function(){C([]),(0,P.e1)().then(function(_e){C(_e.data.list)})},[V,b.data.info.Name]),(0,a.jsx)(u.Z,{ghost:!0,title:(0,a.jsx)(m.Z,{}),subTitle:xe.format("cardTitle"),extra:(0,a.jsx)(S.Z,{trigger:(0,a.jsx)(z.Z.Link,{children:(0,a.jsx)(L.Z,{})}),containerDetail:b.data,onFinish:function(){F(V+1)}}),children:(0,a.jsx)(A.Z,{wrap:!0,children:t&&(t==null?void 0:t.filter(function(_e){return _e.item&&_e.item.find(function(Pe){return Pe.name==b.data.info.Name})}).map(function(_e,Pe){return(0,a.jsx)(f.Z,{color:_e.tagColor,closable:{closeIcon:(0,a.jsx)(ae.Z,{title:ie.FD.format("confirm.title"),open:de&&de[Pe],onOpenChange:function(ne){Le(x()(x()({},de),{index:ne}))},onConfirm:c()(r()().mark(function ve(){return r()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,(0,P.rn)({name:b.data.info.Name,tag:_e.tag});case 2:F(V+1);case 3:case"end":return Q.stop()}},ve)})),children:(0,a.jsx)(U.Z,{})})},style:{height:35,display:"flex",borderRadius:20,justifyContent:"center",alignItems:"center"},onClose:c()(r()().mark(function ve(){return r()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:Le(x()(x()({},de),{index:!0}));case 1:case"end":return Q.stop()}},ve)})),children:(0,a.jsx)("span",{style:{paddingLeft:10,paddingRight:3},children:_e.tag})},Pe)}))})})}var v=e(19632),fe=e.n(v),d=e(12122),M=e(60940),i=e(27619),w=e(84410),W=e(24963),y={total:0,memory:{usage:[{name:"use",data:[]},{name:"all",show:!1,data:[]}],source:{usage:0,limit:0}},cpu:{usage:[{name:"use",data:[]}],source:{usage:0,limit:0}},network:{usage:[{name:"rx",data:[]},{name:"tx",data:[]}],source:{usageIn:0,usageOut:0}},io:{usage:[{name:"read",data:[]},{name:"write",data:[]}],source:{usageRead:0,usageWrite:0}}},g=function(te,l){switch(l.type){case"clear":return y;case"update":var V=new Date(l.payload.read).toLocaleTimeString(),F=JSON.parse(JSON.stringify(te));if(l.payload.memory_stats&&l.payload.memory_stats.limit&&l.payload.memory_stats.usage&&(F.memory.usage=[{name:"use",data:[].concat(fe()(te.memory.usage[0].data.slice(-20)),[{date:V,value:Math.round(l.payload.memory_stats.usage)}])},{name:"all",show:!1,data:[].concat(fe()(te.memory.usage[1].data.slice(-20)),[{date:V,value:Math.round(l.payload.memory_stats.limit)}])}],F.memory.source={usage:l.payload.memory_stats.usage,limit:l.payload.memory_stats.limit}),l.payload&&l.payload.cpu_stats){var ge=l.payload.cpu_stats.cpu_usage.total_usage-l.payload.precpu_stats.cpu_usage.total_usage,me=l.payload.cpu_stats.system_cpu_usage-l.payload.precpu_stats.system_cpu_usage;F.cpu.usage=[{name:"use",data:[].concat(fe()(te.cpu.usage[0].data.slice(-20)),[{date:V,value:(ge/me*l.payload.cpu_stats.online_cpus*100).toFixed(2)}])}],F.cpu.source={usage:ge/me*l.payload.cpu_stats.online_cpus*100,limit:me*l.payload.cpu_stats.online_cpus*100}}return l.payload.networks&&(F.network.source={usageIn:parseFloat(l.payload.networks.eth0.rx_bytes.toFixed(2)),usageOut:parseFloat(l.payload.networks.eth0.tx_bytes.toFixed(2))},F.network.usage=[{name:"rx",data:[].concat(fe()(te.network.usage[0].data.slice(-20)),[{date:V,value:parseFloat(l.payload.networks.eth0.rx_bytes.toFixed(2))}])},{name:"tx",data:[].concat(fe()(te.network.usage[1].data.slice(-20)),[{date:V,value:parseFloat(l.payload.networks.eth0.tx_bytes.toFixed(2))}])}]),l.payload.blkio_stats&&l.payload.blkio_stats.io_service_bytes_recursive&&l.payload.blkio_stats.io_service_bytes_recursive.length>0&&(F.io.source={usageRead:l.payload.blkio_stats.io_service_bytes_recursive[0].value,usageWrite:l.payload.blkio_stats.io_service_bytes_recursive[1].value},F.io.usage=[{name:"read",data:[].concat(fe()(te.io.usage[0].data.slice(-20)),[{date:V,value:parseFloat(l.payload.blkio_stats.io_service_bytes_recursive[0].value.toFixed(2))}])},{name:"write",data:[].concat(fe()(te.io.usage[1].data.slice(-20)),[{date:V,value:parseFloat(l.payload.blkio_stats.io_service_bytes_recursive[1].value.toFixed(2))}])}]),F}},Oe=(0,s.forwardRef)(function(b,te){var l=(0,s.useState)(!1),V=_()(l,2),F=V[0],ge=V[1],me=(0,s.useReducer)(g,y),t=_()(me,2),C=t[0],xe=t[1],Re=(0,s.useState)(),ye=_()(Re,2),de=ye[0],Le=ye[1],_e=(0,s.useContext)(W.Z),Pe=_e.loading,ve=(0,E.useModel)("subscriber"),ne=new ie.Uo("components.appDetail.appDetailQuickStat");(0,s.useImperativeHandle)(te,function(){return{}});function Q(p){return B.apply(this,arguments)}function B(){return B=c()(r()().mark(function p(h){var X,ce;return r()().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Pe.show(),(0,w.i)({id:h}),Se.next=4,(0,w.a)({id:h});case 4:X=Se.sent,ce={columns:[],data:[]},X.data.list.Titles.map(function(he){ce.columns.push({title:he,label:he,dataIndex:he})}),X.data.list.Processes.map(function(he,be){ce.data.push({UID:he[0],PID:he[1],PPID:he[2],C:he[3],STIME:he[4],TTY:he[5],TIME:he[6],CMD:he[7]})}),Le(ce),Pe.destroy();case 10:case"end":return Se.stop()}},p)})),B.apply(this,arguments)}return(0,s.useEffect)(function(){return function(){ve.progress.close("container:stat:"+b.containerInfo.Id),xe({type:"clear",payload:{}})}},[b.containerInfo]),(0,a.jsxs)(a.Fragment,{children:[b.showTriggerButton&&(0,a.jsx)(z.Z.Link,{onClick:c()(r()().mark(function p(){return r()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:ge(!0);case 1:case"end":return X.stop()}},p)})),children:(0,a.jsx)(Y.Z,{title:ne.format("drawerTriggerButtonTip"),children:(0,a.jsx)(d.Z,{})})},"log"),(0,a.jsxs)(T.Z,{title:ne.format("drawerTitle"),open:F,onClose:function(){ge(!1)},afterOpenChange:function(h){h?setTimeout(function(){var X;!((X=b.containerInfo)===null||X===void 0)&&X.Name&&Q(b.containerInfo.Id),ve.addDataHandler("container:stat:".concat(b.containerInfo.Id),function(ce){var We=JSON.parse(ce.data);xe({type:"update",payload:We})})},500):(ve.progress.close("container:stat:"+b.containerInfo.Id),xe({type:"clear",payload:{}}))},width:Z.R_,children:[(0,a.jsxs)(u.Z,{ghost:!0,direction:"row",wrap:!0,gutter:[20,20],children:[C.memory&&C.memory.source&&(0,a.jsx)(u.Z,{colSpan:12,title:(0,a.jsx)(d.Z,{}),subTitle:"Memory usage: ".concat((0,o.FI)(C.memory.source.usage)," / ").concat((0,o.FI)(C.memory.source.limit)),headerBordered:!0,bordered:!0,children:(0,a.jsx)(i.Z,{name:"container-memory",data:C.memory.usage,yLabelFormatter:function(h){return(0,o.FI)(parseFloat(h))},yValueFormatter:function(h){return(0,o.FI)(parseFloat(h))},yDomainMaxCallback:function(h){return h.min*2}})}),(0,a.jsx)(u.Z,{colSpan:12,title:(0,a.jsx)(d.Z,{}),subTitle:"Cpu usage: ".concat(C.cpu.source.usage.toFixed(2),"%"),headerBordered:!0,bordered:!0,children:(0,a.jsx)(i.Z,{name:"container-cpu",data:C.cpu.usage,yDomainMaxCallback:function(h){return h.min*100},yLabelFormatter:function(h){return"".concat(parseFloat(h).toFixed(2),"%")}})}),C.io&&C.io.source&&(0,a.jsx)(u.Z,{colSpan:12,title:(0,a.jsx)(d.Z,{}),subTitle:"I/O: ".concat((0,o.FI)(C.io.source.usageRead)," / ").concat((0,o.FI)(C.io.source.usageWrite)),headerBordered:!0,bordered:!0,children:(0,a.jsx)(i.Z,{name:"container-disk",data:C.io.usage,yDomainMaxCallback:function(h){return h.max*2},yLabelFormatter:function(h){return(0,o.FI)(parseFloat(h))}})}),C.network&&C.network.source&&(0,a.jsx)(u.Z,{colSpan:12,title:(0,a.jsx)(d.Z,{}),subTitle:"Network: ".concat((0,o.FI)(C.network.source.usageIn)," / ").concat((0,o.FI)(C.network.source.usageOut)),headerBordered:!0,bordered:!0,children:(0,a.jsx)(i.Z,{name:"container-network",data:C.network.usage,yDomainMaxCallback:function(h){return h.max*2},yLabelFormatter:function(h){return(0,o.FI)(parseFloat(h))}})})]}),(0,a.jsx)(u.Z,{title:(0,a.jsx)(K.Z,{}),subTitle:"Progress",children:(0,a.jsx)(M.Z,{scroll:{x:"max-content"},rowKey:"PID",columns:de==null?void 0:de.columns,dataSource:de==null?void 0:de.data,pagination:{pageSize:10}})})]})]})}),De=Oe,Ue=(0,s.forwardRef)(function(b,te){var l;(0,s.useImperativeHandle)(te,function(){return{show:function(Q){return c()(r()().mark(function B(){return r()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return de(!0),h.next=3,Pe(Q);case 3:case"end":return h.stop()}},B)}))()}}});var V=(0,E.useAccess)(),F=(0,s.useRef)(),ge=(0,s.useState)(),me=_()(ge,2),t=me[0],C=me[1],xe=(0,s.useState)(!1),Re=_()(xe,2),ye=Re[0],de=Re[1],Le=(0,s.useRef)(),_e=new ie.Uo("components.appDetail.appDetailQuick");function Pe(ne){return ve.apply(this,arguments)}function ve(){return ve=c()(r()().mark(function ne(Q){var B,p;return r()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return(B=F.current)===null||B===void 0||B.show(),X.next=3,(0,N.jV)({md5:Q}).finally(function(){var ce;(ce=F.current)===null||ce===void 0||ce.destroy()});case 3:p=X.sent,p.data&&(p.data.info.HostConfig.NetworkMode=="host"&&p.data.info.Config.ExposedPorts&&Object.keys(p.data.info.Config.ExposedPorts).map(function(ce){p.data.info.NetworkSettings.Ports||(p.data.info.NetworkSettings.Ports={}),p.data.info.NetworkSettings.Ports[ce]=[{HostIp:"0.0.0.0",HostPort:ce.substring(0,ce.indexOf("/"))}]}),C(p.data));case 5:case"end":return X.stop()}},ne)})),ve.apply(this,arguments)}return(0,a.jsx)(T.Z,{title:_e.format("drawerTitle",{name:(0,o.fi)((l=t==null?void 0:t.info.Name)!==null&&l!==void 0?l:"","/")}),open:ye,onClose:function(){de(!1),b.onFinish&&b.onFinish()},width:Z.R_,extra:(0,a.jsxs)(ue.u,{access:"canSeeContainerList",space:{split:(0,a.jsx)(G.Z,{type:"vertical"})},children:[(t==null?void 0:t.info)&&t.info.State.Running&&(0,a.jsx)(pe.Z,{showConsole:!0,type:"container",name:(0,o.fi)(t.info.Name,"/"),title:(0,o.fi)(t.info.Name,"/"),trigger:(0,a.jsx)(Y.Z,{title:ie.Ob.format("container.detail.file"),children:(0,a.jsx)(z.Z.Link,{children:(0,a.jsx)(H.Z,{})},"file")})}),(t==null?void 0:t.info)&&V.canSeeContainerListManageOp&&(0,a.jsx)(Me,{containerInfo:t.info}),(t==null?void 0:t.info)&&t.info.State.Running&&(0,a.jsx)(n.Z,{containerInfo:t.info,showTriggerButton:!0}),(t==null?void 0:t.info)&&t.info.State.Running&&(0,a.jsx)(De,{containerInfo:t.info,showTriggerButton:!0})]}),children:(0,a.jsx)($.Z,{ref:F,children:(0,a.jsxs)(J.Z,{vertical:!0,gap:20,children:[t&&(0,a.jsx)(ue.u,{access:"canSeeContainerList",children:(0,a.jsx)(Ee.Z,{ref:Le,ghost:!0,data:t==null?void 0:t.info,onFinish:c()(r()().mark(function ne(){return r()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,Pe(t.info.Id);case 2:return B.t0=B.sent,B.abrupt("return",[B.t0]);case 4:case"end":return B.stop()}},ne)}))})}),t&&(0,a.jsx)(ue.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,a.jsx)(I.Z,{ghost:!0,data:t,checkContainerUpgrade:function(){de(!1),b.onUpgradeFinish&&b.onUpgradeFinish()}})}),t&&(0,a.jsx)(j,{data:t}),t&&(0,a.jsx)(D.Z,{data:t,ghost:!0}),(0,a.jsx)(q.Z,{data:t==null?void 0:t.info,ghost:!0}),t&&(0,a.jsx)(ee.Z,{data:t.info,ghost:!0}),(t==null?void 0:t.info.Config.Labels)&&(0,a.jsx)(u.Z,{title:(0,a.jsx)(K.Z,{}),ghost:!0,subTitle:_e.format("labelTitle"),children:(0,a.jsx)(O.Z,{column:1,bordered:!0,children:t.info.Config.Labels&&Object.entries(t.info.Config.Labels).map(function(ne){var Q=_()(ne,2),B=Q[0],p=Q[1];return(0,a.jsx)(O.Z.Item,{label:B,children:p},B)})})})]})})})}),Ae=Ue},90127:function(Ce,re,e){var oe=e(15009),_=e.n(oe),se=e(99289),r=e.n(se),le=e(5574),c=e.n(le),s=e(5251),D=e(184),N=e(62370),E=e(5966),H=e(24739),K=e(64317),T=e(52688),G=e(97462),Y=e(40056),z=e(42075),J=e(67294),O=e(1699),q=e(80821),Ee=e(2808),I=e(87662),pe=e(29453),je=e(3616),Te=e(36146),o=e(85893),Ie=(0,J.forwardRef)(function(Z,ie){var a;(0,J.useImperativeHandle)(ie,function(){return{edit:function(M){j(!0),fe(M),R.current&&R.current.setFieldsValue({tag:[M.tag],tagColor:M.tagColor,enableShowGroup:M.enableShowGroup})}}});var R=(0,J.useRef)(),Me=(0,J.useState)(0),n=c()(Me,2),$=n[0],ee=n[1],ue=(0,J.useState)([]),k=c()(ue,2),x=k[0],m=k[1],L=(0,J.useState)(),U=c()(L,2),u=U[0],A=U[1],f=(a=Z.containerDetail)===null||a===void 0?void 0:a.info,ae=(0,J.useState)(!1),S=c()(ae,2),P=S[0],j=S[1],v=new Te.Uo("components.appDetail.tagCreate");function fe(d){R.current&&R.current.setFieldsValue({title:d.title,description:d.description,url:d.url,icon:d.icon,name:d.name})}return(0,J.useEffect)(function(){A([]),(0,pe.e1)().then(function(d){A(d.data.list)})},[$]),(0,J.useEffect)(function(){f&&(0,I.K3)().then(function(d){var M=[];f.NetworkSettings&&f.NetworkSettings.Ports&&Object.keys(f.NetworkSettings.Ports).map(function(i){f.NetworkSettings.Ports[i]&&f.NetworkSettings.Ports[i].map(function(w){w.HostPort&&M.push("http://".concat(d.data.serverUrl,":").concat(w.HostPort))})}),m(M)})},[Z.containerDetail]),(0,o.jsxs)(D.a,{drawerProps:{forceRender:!0,width:je.R_},open:P,onFinish:function(){var d=r()(_()().mark(function M(i){var w,W,y,g;return _()().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return y="",i.tagColor&&i.tagColor.toHexString?i.tagColor.cleared||(y=i.tagColor.toHexString()):y=i.tagColor,g=(w=i.enableShowGroup)!==null&&w!==void 0?w:Z.defaultEnableShowGroup,De.next=5,(0,pe.A9)({enableShowGroup:g,tag:i.tag?i.tag[0]:"",tagColor:y,name:(W=f==null?void 0:f.Name)!==null&&W!==void 0?W:i.name,title:g?i.title:"",description:g?i.description:"",url:g?i.url:"",icon:g?i.icon:""});case 5:return ee($+1),Z.onFinish&&Z.onFinish({tag:i.tag,tagColor:i.tagColor,enableShowGroup:g}),De.abrupt("return",!0);case 8:case"end":return De.stop()}},M)}));return function(M){return d.apply(this,arguments)}}(),formRef:R,title:v.format("drawerTitle"),trigger:Z.trigger,onOpenChange:function(M){var i;j(M),!M&&(!((i=R.current)===null||i===void 0)&&i.resetFields)&&R.current.resetFields()},children:[Z.defaultEnableShowGroup&&(0,o.jsx)(N.Z,{children:(0,o.jsx)(Y.Z,{message:new Te.Uo("system.home.tag").format("emptyTip")})}),(0,o.jsx)(E.Z,{name:"name",hidden:!0}),(0,o.jsxs)(H.UW,{children:[(0,o.jsx)(K.Z,{width:"lg",label:v.format("formTag"),layout:"vertical",required:!0,rules:[{required:!0}],onChange:function(M){var i=u&&u.find(function(Ae){return M&&M.length>=1&&Ae.tag==M[0]});if(i){var w,W,y,g=i.item.find(function(Ae){return Ae.name==(f==null?void 0:f.Name)});(w=R.current)===null||w===void 0||w.setFieldsValue({tagColor:i.tagColor,enableShowGroup:i.enableShowGroup}),g&&g.name&&fe({name:(W=f==null?void 0:f.Name)!==null&&W!==void 0?W:"",title:g?g.title:(0,s.fi)((y=f==null?void 0:f.Name)!==null&&y!==void 0?y:"","/"),description:g&&g.description,url:g&&g.url,icon:g&&g.icon})}if(!M||M.length==0){var Oe,De=(Oe=R.current)===null||Oe===void 0?void 0:Oe.getFieldValue("url");if(!De||De==""){var Ue;!((Ue=R.current)===null||Ue===void 0)&&Ue.resetFields&&R.current.resetFields()}}},options:u&&u.map(function(d){return{lable:d.tag,value:d.tag}}),name:"tag",mode:"tags",fieldProps:{maxCount:1},placeholder:v.format("formTagEmpty")},"tagSelect".concat($)),!Z.defaultEnableShowGroup&&(0,o.jsx)(Ee.Z,{label:v.format("formTagColor"),name:"tagColor"})]}),!Z.defaultEnableShowGroup&&(0,o.jsx)(O.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(M){var i=M.canSeeEnableCe;return(0,o.jsx)(T.Z,{label:v.format("formEnableShowGroup"),name:"enableShowGroup",disabled:i,fieldProps:{onChange:function(W){if(W){var y,g;fe({name:(y=f==null?void 0:f.Name)!==null&&y!==void 0?y:"",title:(0,s.fi)((g=f==null?void 0:f.Name)!==null&&g!==void 0?g:"","/")})}}}})}}),(0,o.jsx)(G.Z,{name:["enableShowGroup"],children:function(M){var i=M.enableShowGroup;return(i||Z.defaultEnableShowGroup)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(z.Z.Compact,{children:[Z.containerDetail&&(0,o.jsx)(K.Z,{label:v.format("formSelectUrl"),width:"sm",name:"selectUrl",options:x.map(function(w){return{label:w,value:w}}),onChange:function(W){var y;!((y=R.current)===null||y===void 0)&&y.setFieldValue&&R.current.setFieldValue("url",W)}}),(0,o.jsx)(E.Z,{label:v.format("formUrl"),name:"url",width:"md"}),(0,o.jsx)(N.Z,{label:" ",children:(0,o.jsx)(q.Z,{action:function(){var W;return(0,pe.R3)({url:(W=R.current)===null||W===void 0?void 0:W.getFieldValue("url")})},onSuccess:function(W){var y,g,Oe;(y=R.current)===null||y===void 0||y.setFieldValue("icon",W.data.icon),(g=R.current)===null||g===void 0||g.setFieldValue("title",W.data.title),(Oe=R.current)===null||Oe===void 0||Oe.setFieldValue("description",W.data.description)},children:v.format("getUrlDetailButton")})})]}),(0,o.jsxs)(H.UW,{children:[(0,o.jsx)(E.Z,{label:v.format("formTitle"),name:"title"}),(0,o.jsx)(E.Z,{label:v.format("formDescription"),name:"description"})]}),(0,o.jsx)(H.UW,{children:(0,o.jsx)(E.Z,{width:"lg",placeholder:v.format("formIconEmpty"),label:v.format("formIcon"),name:"icon"})})]})}})]})});re.Z=Ie},81146:function(Ce,re,e){var oe=e(97857),_=e.n(oe),se=e(15009),r=e.n(se),le=e(99289),c=e.n(le),s=e(67294),D=e(97269),N=e(62370),E=e(5966),H=e(97462),K=e(82346),T=e(71230),G=e(15746),Y=e(34041),z=e(83622),J=e(84567),O=e(42075),q=e(80821),Ee=e(23430),I=e(93162),pe=e.n(I),je=e(78267),Te=e.n(je),o=e(75458),Ie=e.n(o),Z=e(12323),ie=e(4244),a=e.n(ie),R=e(24078),Me=e(36146),n=e(85893),$,ee,ue,k={decorations:{matchBackground:"",matchBorder:"#FFFF00",activeMatchBackground:"#FFFF0066",matchOverviewRuler:"",activeMatchColorOverviewRuler:""}},x=(0,s.forwardRef)(function(m,L){var U=(0,s.useRef)(),u=(0,K.useModel)("subscriber"),A=new Me.Uo("components.containerLog");(0,s.useImperativeHandle)(L,function(){return{fit:function(){$.clear(),ue.fit()},start:function(){return c()(r()().mark(function P(){return r()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,f({lineTotal:500});case 2:case"end":return v.stop()}},P)}))()},close:function(){u.progress.close(m.id)}}});function f(S){return ae.apply(this,arguments)}function ae(){return ae=c()(r()().mark(function S(P){return r()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:u.progress.close(m.id),$.clear(),P.download=!1,m.request(P);case 4:case"end":return v.stop()}},S)})),ae.apply(this,arguments)}return(0,s.useEffect)(function(){return window.addEventListener("resize",function(){ue.fit()}),$=new ie.Terminal(_()(_()({},Z.X),{},{fontSize:12,lineHeight:1.2,allowProposedApi:!0})),ue=new je.FitAddon,ee=new o.SearchAddon({}),$.loadAddon(ue),$.loadAddon(ee),$.open(document.getElementById("terminal-container-log")),ue.fit(),u.addDataHandler(m.id,function(S){$.write(S.data)}),function(){$.clear(),$.reset(),u.progress.close(m.id)}},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(D.A,{submitter:!1,layout:"horizontal",onFinish:function(P){var j;f({id:m.id,lineTotal:parseInt(P.lineTotal),showTime:(j=P.showTime)!==null&&j!==void 0?j:!1})},formRef:U,children:(0,n.jsxs)(T.Z,{gutter:[10,0],children:[(0,n.jsx)(G.Z,{span:8,children:(0,n.jsx)(N.Z,{name:"lineTotal",initialValue:"500",label:A.format("formLineTotal"),children:(0,n.jsxs)(Y.Z,{defaultValue:"500",onChange:function(P){var j;(j=U.current)===null||j===void 0||j.submit()},children:[(0,n.jsx)(Y.Z.Option,{value:"100",children:A.format("formLineTotalOption",{number:"100"})}),(0,n.jsx)(Y.Z.Option,{value:"200",children:A.format("formLineTotalOption",{number:"200"})}),(0,n.jsx)(Y.Z.Option,{value:"500",children:A.format("formLineTotalOption",{number:"500"})}),(0,n.jsx)(Y.Z.Option,{value:"1000",children:A.format("formLineTotalOption",{number:"1000"})}),(0,n.jsx)(Y.Z.Option,{value:"-1",children:A.format("formLineTotalOptionAll")})]})})}),(0,n.jsx)(G.Z,{children:(0,n.jsx)(z.ZP,{onClick:function(){$.clear()},children:A.format("clearButton")})}),(0,n.jsx)(G.Z,{children:(0,n.jsx)(N.Z,{name:"showTime",valuePropName:"checked",children:(0,n.jsx)(J.Z,{onChange:function(P){var j;(j=U.current)===null||j===void 0||j.submit()},children:A.format("formShowTime")})})}),(0,n.jsx)(G.Z,{children:(0,n.jsx)(E.Z,{label:A.format("formKeywork"),name:"keywork",fieldProps:{onPressEnter:function(){var P;ee.findNext((P=U.current)===null||P===void 0?void 0:P.getFieldValue("keywork"),k)},onChange:function(P){ee.findNext(P.target.value,k)}},placeholder:A.format("formKeyworkEmpty")})}),(0,n.jsx)(G.Z,{children:(0,n.jsx)(H.Z,{name:["keywork"],children:function(P){var j=P.keywork;return(0,n.jsxs)(O.Z,{size:10,children:[(0,n.jsx)(z.ZP,{onClick:function(){ee.findNext(j,k)},children:A.format("formKeyworkNext")},"next"),(0,n.jsx)(z.ZP,{onClick:function(){ee.findPrevious(j,k)},children:A.format("formKeyworkPrev")},"prev")]})}})}),(0,n.jsx)(G.Z,{children:(0,n.jsx)(q.Z,{icon:(0,n.jsx)(Ee.Z,{}),action:c()(r()().mark(function S(){var P,j,v;return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!m.download){d.next=5;break}return d.next=3,m.download({lineTotal:parseInt((P=U.current)===null||P===void 0?void 0:P.getFieldValue("lineTotal")),showTime:(j=U.current)===null||j===void 0?void 0:j.getFieldValue("showTime")});case 3:v=d.sent,(0,I.saveAs)(v.data,v.name);case 5:case"end":return d.stop()}},S)})),children:A.format("downloadButton")})})]})}),(0,n.jsx)("div",{style:{marginTop:"20px",height:m.showInDrawer?"75vh":"85vh"},id:"terminal-container-log"})]})});re.Z=x},27619:function(Ce,re,e){e.d(re,{Z:function(){return s}});var oe=e(5574),_=e.n(oe),se=e(82346),r=e(67294),le=e(64389),c=e(85893);function s(D){var N=(0,se.useModel)("@@initialState"),E=N.initialState,H="chart-area-".concat(D.name),K=(0,r.useState)(),T=_()(K,2),G=T[0],Y=T[1],z={};D.data.forEach(function(O){O.show===!1?z[O.name]=!1:z[O.name]=!0});var J={tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},valueFormatter:function(q){return D.yValueFormatter?D.yValueFormatter(q):q}},legend:{selected:z},grid:{left:"0",right:"0",bottom:"0",top:"30",containLabel:!0},xAxis:{type:"category",data:D.data[0].data.map(function(O){return O.date}),boundaryGap:!1,axisLabel:{rotate:20}},yAxis:{type:"value",axisLabel:{formatter:D.yLabelFormatter},max:function(q){if(D.yDomainMaxCallback)return D.yDomainMaxCallback(q)}},series:[]};return(0,r.useEffect)(function(){var O="",q=window.matchMedia("(prefers-color-scheme: dark)");(E==null?void 0:E.theme.algorithm)=="dark"||q.matches?O="dark":O="",G&&!G.isDisposed()&&G.dispose();var Ee=document.getElementById(H),I=le.S1(Ee,O);I.setOption(J);var pe=new ResizeObserver(function(){I.resize()});Ee&&pe.observe(Ee),Y(I)},[E]),(0,r.useEffect)(function(){G&&!G.isDisposed()&&G.setOption({legend:{data:D.data.map(function(O){return O.name})},xAxis:{data:D.data[0].data.map(function(O){return O.date})},series:D.data.map(function(O){return{name:O.name,type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:O.data.map(function(q){return q.value})}})})},[D.data]),(0,c.jsx)("div",{style:{height:200},id:H})}},2808:function(Ce,re,e){e.d(re,{Z:function(){return s}});var oe=e(97857),_=e.n(oe),se=e(62370),r=e(51663),le=e(67294),c=e(85893);function s(D){return(0,c.jsx)(se.Z,_()(_()({},D),{},{children:(0,c.jsx)(r.Z,{showText:function(E){return E.toHexString()},allowClear:!0,presets:[{label:"Color",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},65913:function(Ce,re,e){var oe=e(5574),_=e.n(oe),se=e(74330),r=e(67294),le=e(85893),c=(0,r.forwardRef)(function(s,D){(0,r.useImperativeHandle)(D,function(){return{show:function(){K(!0)},destroy:function(){K(!1)}}});var N=(0,r.useState)(!1),E=_()(N,2),H=E[0],K=E[1];return(0,le.jsx)(se.Z,{spinning:H,size:"default",children:s.children})});re.Z=c},84410:function(Ce,re,e){e.d(re,{a:function(){return D},i:function(){return c}});var oe=e(15009),_=e.n(oe),se=e(99289),r=e.n(se),le=e(82346);function c(E){return s.apply(this,arguments)}function s(){return s=r()(_()().mark(function E(H){return _()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.abrupt("return",(0,le.request)("/api/app/container/get-stat-info",{method:"POST",data:H}));case 1:case"end":return T.stop()}},E)})),s.apply(this,arguments)}function D(E){return N.apply(this,arguments)}function N(){return N=r()(_()().mark(function E(H){return _()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.abrupt("return",(0,le.request)("/api/app/container/get-process-info",{method:"POST",data:H}));case 1:case"end":return T.stop()}},E)})),N.apply(this,arguments)}}}]);
