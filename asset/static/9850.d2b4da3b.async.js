"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9850],{27166:function(Z,j,e){var T=e(97857),n=e.n(T),P=e(5574),E=e.n(P),p=e(13769),h=e.n(p),g=e(184),O=e(74330),d=e(67294),l=e(85893),m=["requestLoading"],r=(0,d.forwardRef)(function(D,i){var f,c=D.requestLoading,a=h()(D,m),o=(0,d.useState)(!1),s=E()(o,2),_=s[0],C=s[1];return(0,d.useImperativeHandle)(i,function(){return{loading:function(){C(!0)},finish:function(){C(!1)}}}),(0,l.jsx)(g.a,n()(n()({},a),{},{children:(0,l.jsx)(O.Z,{spinning:(f=D.requestLoading)!==null&&f!==void 0?f:_,size:"default",style:{marginTop:"30%"},children:D.children})}))});j.Z=r},81366:function(Z,j,e){var T=e(97857),n=e.n(T),P=e(19632),E=e.n(P),p=e(5574),h=e.n(p),g=e(27254),O=e(42075),d=e(85418),l=e(25593),m=e(83622),r=e(67294),D=e(31112),i=e(85893),f={title:"/",path:"/"},c=(0,r.forwardRef)(function(a,o){var s=(0,r.useContext)(D.Z),_=s.showPath,C=s.redirectPath,F=(0,r.useState)([f]),y=h()(F,2),R=y[0],t=y[1];(0,r.useImperativeHandle)(o,function(){return{addHistory:function(M,I){I=="/"?t([f]):t([].concat(E()(R),[{title:M,path:I}]))},initHistory:function(M,I){t([n()(n()({},f),{},{children:I})].concat(E()(M)))}}});var $=function(M){_?_(R[M].title,R[M].path):a.showPath&&a.showPath(R[M].title,R[M].path);var I=R.filter(function(S,H){return H<=M});t(E()(I))};return(0,i.jsxs)(O.Z,{children:[(0,i.jsx)(O.Z.Compact,{children:R.map(function(B,M){return B.children?(0,i.jsxs)(d.Z.Button,{menu:{items:B.children.map(function(I,S){return{key:S,label:(0,i.jsx)(l.Z.Link,{onClick:function(){C(I)},children:I},S)}})},type:"dashed",onClick:function(S){$(M)},children:[(0,i.jsx)(g.Z,{})," ",B.title]},M):(0,i.jsx)(m.ZP,{icon:(0,i.jsx)(g.Z,{}),type:"dashed",onClick:function(){$(M)},children:B.title},M)})}),R.length>=2&&(0,i.jsx)(l.Z.Text,{copyable:{text:R[R.length-1].path}})]})});j.Z=c},31112:function(Z,j,e){var T=e(67294),n=(0,T.createContext)({});j.Z=n},68536:function(Z,j,e){e.d(j,{Z:function(){return m}});var T=e(24963),n=e(36146),P=e(93613),E=e(36693),p=e(2741),h=e(25593),g=e(42075),O=e(67294),d=e(85893),l=0;function m(r){var D=(0,O.useContext)(T.Z),i=D.message,f=new n.Uo("components.explorer");return r.isDir?(0,d.jsx)(h.Z.Link,{onClick:function(){r.onClick&&r.onClick()},children:(0,d.jsxs)(g.Z,{children:[(0,d.jsx)(P.Z,{}),r.showName]})}):r.isLink?(0,d.jsx)(h.Z.Link,{onClick:function(){r.onClick&&r.onClick()},children:(0,d.jsxs)(g.Z,{children:[(0,d.jsx)(E.Z,{}),r.showName]})}):(0,d.jsx)(h.Z.Text,{onClick:function(){if(l++,l==2){l=0,r.onClick&&r.onClick();return}setTimeout(function(){l==1&&i.info(f.format("fileNameMessageViewDetail")),l=0},400)},style:{cursor:"pointer"},children:(0,d.jsxs)(g.Z,{children:[(0,d.jsx)(p.Z,{}),r.showName]})})}},92754:function(Z,j,e){var T=e(5574),n=e.n(T),P=e(67294),E=e(82346),p=e(38703),h=e(85893),g=(0,P.forwardRef)(function(O,d){var l=(0,P.useState)(""),m=n()(l,2),r=m[0],D=m[1];(0,P.useImperativeHandle)(d,function(){return{setFinish:function(){o({finish:{downloading:100,extracting:100}})},setStart:function(_){_&&D(_),o({start:{downloading:0,extracting:0}})},close:function(){i.progress.close("image:pull:"+r),o({start:{downloading:0,extracting:0}})}}});var i=(0,E.useModel)("subscriber");i.addDataHandler("image:pull:"+r,function(s){o(s.data)});var f=(0,P.useState)(),c=n()(f,2),a=c[0],o=c[1];return(0,P.useEffect)(function(){return o({start:{downloading:0,extracting:0}}),function(){i.progress.close("image:pull:"+r)}},[]),(0,h.jsx)(h.Fragment,{children:a&&Object.keys(a).map(function(s){return(0,h.jsx)(p.Z,{format:function(C){return"".concat(C,"%")},percent:a[s].downloading,success:{percent:a[s].extracting}},s)})})});j.Z=g},47248:function(Z,j,e){var T=e(15009),n=e.n(T),P=e(99289),E=e.n(P),p=e(5574),h=e.n(p),g=e(38345),O=e(97269),d=e(62370),l=e(5966),m=e(64317),r=e(83622),D=e(85265),i=e(25593),f=e(42075),c=e(67294),a=e(92754),o=e(82346),s=e(2205),_=e(3616),C=e(36146),F=e(23430),y=e(68297),R=e(77342),t=e(85893),$=(0,c.forwardRef)(function(B,M){var I=(0,c.useState)(!1),S=h()(I,2),H=S[0],x=S[1],N=(0,c.useRef)(),L=(0,c.useRef)(),K=(0,c.useState)(!1),W=h()(K,2),b=W[0],G=W[1],A=new C.Uo("components.imagePull");return(0,c.useImperativeHandle)(M,function(){return{upgradeImage:function(u){var v;return x(!0),(v=N.current)===null||v===void 0||v.setFieldValue("imageUrl",u),(0,y.Ze)({tag:u,type:"pull"})},setImageName:function(u){var v;x(!0),(v=N.current)===null||v===void 0||v.setFieldValue("imageUrl",u)}}}),[(0,t.jsx)(r.ZP,{type:B.buttonType?B.buttonType:"default",icon:(0,t.jsx)(F.Z,{}),onClick:function(){var u,v;x(!0),(u=N.current)===null||u===void 0||u.resetFields(),(v=L.current)===null||v===void 0||v.setStart("")},children:A.format("triggerButton")},"remoteBtn"),(0,t.jsxs)(D.Z,{forceRender:!0,open:H,title:A.format("drawerTitle"),width:_.R_,onClose:function(){var u;x(!1),(u=L.current)===null||u===void 0||u.close()},footer:!1,children:[(0,t.jsx)(g.Z,{children:(0,t.jsx)(i.Z.Text,{children:(0,t.jsxs)("ul",{style:{lineHeight:"30px"},children:[(0,t.jsxs)("li",{children:[A.format("tip.1")," ",(0,t.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:C.FD.format("help")})]}),(0,t.jsxs)("li",{children:[A.format("tip.2")," ",(0,t.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:C.FD.format("help")})]}),(0,t.jsxs)("li",{children:[A.format("tip.3")," "]}),(0,t.jsxs)("li",{children:[A.format("tip.4")," ",(0,t.jsx)(o.Link,{to:"/image/registry",children:C.Ob.format("image.registry.create")})]}),(0,t.jsxs)("li",{children:[A.format("tip.5")," ",(0,t.jsx)(o.Link,{to:"/image/registry",children:C.Ob.format("image.registry")})]})]})})}),(0,t.jsx)(g.Z,{title:A.format("triggerButton"),headerBordered:!0,children:(0,t.jsxs)(O.A,{formRef:N,submitter:!1,isKeyPressSubmit:!0,onFinish:function(){var U=E()(n()().mark(function u(v){var w,V,Q,J,z,X;return n()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return z=(w=v.imageUrl)!==null&&w!==void 0?w:"",v.registry&&(z=v.registry.serverAddress+"/"+z),G(!0),(V=L.current)===null||V===void 0||V.setStart(z),k.next=6,(0,y.Ze)({tag:(0,R.Z)(z," "),type:"pull",platform:(Q=v.platform)!==null&&Q!==void 0?Q:""}).finally(function(){G(!1)});case 6:return X=k.sent,(J=L.current)===null||J===void 0||J.setFinish(),x(!1),B.onFinish&&B.onFinish(X.data.tag),k.abrupt("return",!0);case 11:case"end":return k.stop()}},u)}));return function(u){return U.apply(this,arguments)}}(),children:[(0,t.jsxs)(f.Z.Compact,{children:[(0,t.jsx)(d.Z,{name:"registry",children:(0,t.jsx)(s.Z,{width:"150px"})}),(0,t.jsx)(l.Z,{disabled:b,width:270,name:"imageUrl",placeholder:A.format("imageUrlEmpty"),required:!0,rules:[{required:!0}]}),(0,t.jsx)(m.Z,{name:"platform",style:{width:100},placeholder:A.format("imagePlatformEmpty"),options:y.ii.map(function(U){return{label:U.name,value:U.name}})}),(0,t.jsx)(r.ZP,{loading:b,onClick:E()(n()().mark(function U(){var u;return n()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:(u=N.current)===null||u===void 0||u.submit();case 1:case"end":return w.stop()}},U)})),children:A.format("triggerButton")}),(0,t.jsx)(r.ZP,{danger:!0,onClick:function(){var u;(u=L.current)===null||u===void 0||u.close()},children:C.FD.format("listManageKill")})]}),(0,t.jsx)(d.Z,{label:A.format("progressTitle"),children:(0,t.jsx)(a.Z,{ref:L})})]})})]},"remoteDrawer")]});j.Z=$},80271:function(Z,j,e){var T=e(15009),n=e.n(T),P=e(99289),E=e.n(P),p=e(5574),h=e.n(p),g=e(184),O=e(9773),d=e(83062),l=e(67294),m=e(68536),r=e(5251),D=e(81366),i=e(3616),f=e(36146),c=e(73813),a=e(85893),o=(0,l.forwardRef)(function(s,_){(0,l.useImperativeHandle)(_,function(){return{show:function(){}}});var C=(0,l.useState)(""),F=h()(C,2),y=F[0],R=F[1],t=(0,l.useState)(!1),$=h()(t,2),B=$[0],M=$[1],I=(0,l.useRef)(),S=(0,l.useRef)(),H=function(K,W){R(W)},x=new f.Uo("components.explorer"),N=new f.Uo("image");return(0,a.jsx)(g.a,{drawerProps:{width:i.R_},open:B,submitter:!1,title:N.format("fileTitle"),onOpenChange:function(K){M(K),R(K?"/":"")},trigger:(0,a.jsx)(d.Z,{title:N.format("fileTitle"),children:s.trigger}),children:(0,a.jsx)(O.Z,{headerTitle:(0,a.jsx)(D.Z,{ref:S,showPath:H}),scroll:{x:"max-content"},search:!1,rowKey:"name",pagination:{pageSize:500,position:["topRight","bottomRight"]},actionRef:I,request:E()(n()().mark(function L(){var K;return n()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(y!=""){b.next=2;break}return b.abrupt("return",{data:[],total:0,success:!0});case 2:return b.next=4,(0,c.cD)({md5:s.imageId,path:y});case 4:return K=b.sent,b.abrupt("return",{data:K.data.info,total:K.data.info.length,success:!0});case 6:case"end":return b.stop()}},L)})),columns:[{title:x.format("listName"),dataIndex:"showName",key:"name",render:function(U,W,b,G,A){var U,u=W.name.replace(y,"");return W.isDir?U=(0,a.jsx)(m.Z,{isDir:!0,onClick:function(){return H(u,W.path)},showName:u}):W.isSymlink?U=(0,a.jsx)(m.Z,{isLink:!0,showName:u}):U=(0,a.jsx)(m.Z,{showName:u}),U}},{title:x.format("listModStr"),dataIndex:"modStr",key:"modStr"},{title:x.format("listUser"),dataIndex:"user"},{title:x.format("listGroup"),dataIndex:"group"},{title:x.format("listSize"),dataIndex:"size",key:"size",render:function(K,W,b,G,A){return(0,r.FI)(W.size)}},{title:x.format("listModTime"),dataIndex:"modTime",key:"modTime",render:function(K,W,b,G,A){return(0,r.NF)(W.modTime)},sorter:function(K,W){return new Date(K.modTime).getTime()-new Date(W.modTime).getTime()}}],cardProps:{ghost:!0}},"".concat(s.imageId,"-").concat(y))})});j.Z=o},2205:function(Z,j,e){e.d(j,{Z:function(){return l}});var T=e(97857),n=e.n(T),P=e(5574),E=e.n(P),p=e(75870),h=e(36146),g=e(34041),O=e(67294),d=e(85893);function l(m){var r=(0,O.useState)([]),D=E()(r,2),i=D[0],f=D[1],c=new h.Uo("components.selectRegistry");(0,O.useEffect)(function(){(0,p.Ot)().then(function(o){o&&f(o.data.list)})},[]);var a={};return m.multiple&&(a.mode="multiple"),m.top&&(a.placement="topLeft"),(0,d.jsx)(g.Z,n()({popupMatchSelectWidth:!m.width,style:m.width?{width:m.width}:{},onChange:function(s){if(s)if(Array.isArray(s)){var _=s.map(function(C){return i[C]});m.onChangeList&&m.onChangeList(_)}else m.onChange&&m.onChange(i[s])},placeholder:c.format("nameEmpty"),options:i.map(function(o,s){return{value:s,label:o.title+"("+o.serverAddress+")"}}),allowClear:!0},a))}},68297:function(Z,j,e){e.d(j,{Qd:function(){return d},Ze:function(){return g},aw:function(){return f},cV:function(){return m},fy:function(){return D},ii:function(){return h}});var T=e(15009),n=e.n(T),P=e(99289),E=e.n(P),p=e(82346),h=[{name:"amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"i386",arch:"386",search:[]},{name:"arm/v6",arch:"arm",search:[]},{name:"arm/v7",arch:"arm",search:[]},{name:"arm/v8",arch:"arm64",search:[]},{name:"ppc64le",arch:"ppc64le",search:[]},{name:"riscv64",arch:"riscv64",search:[]}];function g(a){return O.apply(this,arguments)}function O(){return O=E()(n()().mark(function a(o){return n()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,p.request)("/api/app/image/tag-sync",{method:"POST",data:o}));case 1:case"end":return _.stop()}},a)})),O.apply(this,arguments)}function d(a){return l.apply(this,arguments)}function l(){return l=E()(n()().mark(function a(o){return n()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,p.request)("/api/app/image/tag-add",{method:"POST",data:o}));case 1:case"end":return _.stop()}},a)})),l.apply(this,arguments)}function m(a){return r.apply(this,arguments)}function r(){return r=E()(n()().mark(function a(o){return n()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,p.request)("/api/app/image/tag-delete",{method:"POST",data:o}));case 1:case"end":return _.stop()}},a)})),r.apply(this,arguments)}function D(a){return i.apply(this,arguments)}function i(){return i=E()(n()().mark(function a(o){return n()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,p.request)("/api/app/image/tag-push-batch",{method:"POST",data:o}));case 1:case"end":return _.stop()}},a)})),i.apply(this,arguments)}function f(a){return c.apply(this,arguments)}function c(){return c=E()(n()().mark(function a(o){return n()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,p.request)("/api/pro/image/get-remote-tag",{method:"POST",data:o}));case 1:case"end":return _.stop()}},a)})),c.apply(this,arguments)}}}]);
