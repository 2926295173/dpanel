"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1102],{85060:function(Ie,ie,t){t.d(ie,{Z:function(){return te}});var me=t(87462),H=t(67294),fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},ce=fe,ve=t(84089),G=function(ne,xe){return H.createElement(ve.Z,(0,me.Z)({},ne,{ref:xe,icon:ce}))},pe=H.forwardRef(G),te=pe},1883:function(Ie,ie,t){var me=t(87462),H=t(67294),fe=t(3936),ce=t(84089),ve=function(te,he){return H.createElement(ce.Z,(0,me.Z)({},te,{ref:he,icon:fe.Z}))},G=H.forwardRef(ve);ie.Z=G},37528:function(Ie,ie,t){t.r(ie),t.d(ie,{default:function(){return Vt}});var me=t(97857),H=t.n(me),fe=t(19632),ce=t.n(fe),ve=t(15009),G=t.n(ve),pe=t(99289),te=t.n(pe),he=t(5574),ne=t.n(he),xe=t(91058),we=t(12491),Ae=t(24963),ge=t(90098),Me=t(79245),Le=t(1883),Ye=t(91806),He=t(85577),Xe=t(87462),l=t(67294),Ge={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 289.1a362.49 362.49 0 00-79.9-115.7 370.83 370.83 0 00-118.2-77.8C610.7 76.6 562.1 67 512 67c-50.1 0-98.7 9.6-144.5 28.5-44.3 18.3-84 44.5-118.2 77.8A363.6 363.6 0 00169.4 289c-19.5 45-29.4 92.8-29.4 142 0 70.6 16.9 140.9 50.1 208.7 26.7 54.5 64 107.6 111 158.1 80.3 86.2 164.5 138.9 188.4 153a43.9 43.9 0 0022.4 6.1c7.8 0 15.5-2 22.4-6.1 23.9-14.1 108.1-66.8 188.4-153 47-50.4 84.3-103.6 111-158.1C867.1 572 884 501.8 884 431.1c0-49.2-9.9-97-29.4-142zM512 880.2c-65.9-41.9-300-207.8-300-449.1 0-77.9 31.1-151.1 87.6-206.3C356.3 169.5 431.7 139 512 139s155.7 30.5 212.4 85.9C780.9 280 812 353.2 812 431.1c0 241.3-234.1 407.2-300 449.1zm0-617.2c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 551c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 439c0-29.9 11.7-58 32.8-79.2C454 338.6 482.1 327 512 327c29.9 0 58 11.6 79.2 32.8C612.4 381 624 409.1 624 439c0 29.9-11.6 58-32.8 79.2z"}}]},name:"environment",theme:"outlined"},We=Ge,Ke=t(84089),Qe=function(i,h){return l.createElement(Ke.Z,(0,Xe.Z)({},i,{ref:h,icon:We}))},Je=l.forwardRef(Qe),ke=Je,qe=t(90078),Ee=t(97269),_e=t(2236),de=t(38345),et=t(52688),le=t(5966),tt=t(86615),Re=t(97462),Ze=t(62370),Te=t(95213),Be=t(11106),De=t(82346),ze=t(83622),nt=t(93967),re=t.n(nt);const rt=(0,l.forwardRef)((e,i)=>{const{prefixCls:h,className:u,children:a,size:P,style:j={}}=e,F=re()(`${h}-panel`,{[`${h}-panel-hidden`]:P===0},u),y=P!==void 0;return l.createElement("div",{ref:i,className:F,style:Object.assign(Object.assign({},j),{flexBasis:y?P:"auto",flexGrow:y?0:1})},a)});var at=()=>null,ot=t(9220),ue=t(66680),st=t(53124),lt=t(35792),it=t(50344),ct=function(e,i){var h={};for(var u in e)Object.prototype.hasOwnProperty.call(e,u)&&i.indexOf(u)<0&&(h[u]=e[u]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,u=Object.getOwnPropertySymbols(e);a<u.length;a++)i.indexOf(u[a])<0&&Object.prototype.propertyIsEnumerable.call(e,u[a])&&(h[u[a]]=e[u[a]]);return h};function dt(e){if(e&&typeof e=="object")return e;const i=!!e;return{start:i,end:i}}function ut(e){return l.useMemo(()=>(0,it.Z)(e).filter(h=>l.isValidElement(h)).map(h=>{const{props:u}=h,{collapsible:a}=u,P=ct(u,["collapsible"]);return Object.assign(Object.assign({},P),{collapsible:dt(a)})}),[e])}var mt=ut;function ft(e,i,h){return l.useMemo(()=>{const u=[];for(let a=0;a<e.length-1;a+=1){const P=e[a],j=e[a+1],F=i[a],y=i[a+1],{resizable:S=!0,min:C,collapsible:Y}=P,{resizable:Z=!0,min:T,collapsible:m}=j,o=S&&Z&&(F!==0||!C)&&(y!==0||!T),B=Y.end&&F>0||m.start&&y===0&&F>0,x=m.start&&y>0||Y.end&&F===0&&y>0;u[a]={resizable:o,startCollapsible:!!(h?x:B),endCollapsible:!!(h?B:x)}}return u},[i,e])}var vt=t(74902);function ye(e){return Number(e.slice(0,-1))/100}function Ce(e){return typeof e=="string"&&e.endsWith("%")}function pt(e,i){const h=e.map(m=>m.size),u=e.length,a=i||0,P=m=>m*a,[j,F]=l.useState(()=>e.map(m=>m.defaultSize)),y=l.useMemo(()=>{var m;const o=[];for(let B=0;B<u;B+=1)o[B]=(m=h[B])!==null&&m!==void 0?m:j[B];return o},[u,j,h]),S=l.useMemo(()=>{let m=[],o=0;for(let x=0;x<u;x+=1){const E=y[x];if(Ce(E))m[x]=ye(E);else if(E||E===0){const _=Number(E);Number.isNaN(_)||(m[x]=_/a)}else o+=1,m[x]=void 0}const B=m.reduce((x,E)=>x+(E||0),0);if(B>1||!o){const x=1/B;m=m.map(E=>E===void 0?0:E*x)}else{const x=(1-B)/o;m=m.map(E=>E===void 0?x:E)}return m},[y,a]),C=l.useMemo(()=>S.map(P),[S,a]),Y=l.useMemo(()=>e.map(m=>Ce(m.min)?ye(m.min):(m.min||0)/a),[e,a]),Z=l.useMemo(()=>e.map(m=>Ce(m.max)?ye(m.max):(m.max||a)/a),[e,a]);return[l.useMemo(()=>i?C:y,[C,i]),C,S,Y,Z,F]}function ht(e,i,h,u,a,P){const j=e.map(z=>[z.min,z.max]),F=u||0,y=z=>z*F;function S(z,V){return typeof z=="string"?y(ye(z)):z!=null?z:V}const[C,Y]=l.useState([]),Z=l.useRef([]),[T,m]=l.useState(null),o=()=>h.map(y);return[z=>{Y(o()),m({index:z,confirmed:!1})},(z,V)=>{var r;let A=null;if((!T||!T.confirmed)&&V!==0){if(V>0)A=z,m({index:z,confirmed:!0});else for(let I=z;I>=0;I-=1)if(C[I]>0&&i[I].resizable){A=I,m({index:I,confirmed:!0});break}}const D=(r=A!=null?A:T==null?void 0:T.index)!==null&&r!==void 0?r:z,M=(0,vt.Z)(C),U=D+1,K=S(j[D][0],0),N=S(j[U][0],0),Q=S(j[D][1],F),J=S(j[U][1],F);let $=V;return M[D]+$<K&&($=K-M[D]),M[U]-$<N&&($=M[U]-N),M[D]+$>Q&&($=Q-M[D]),M[U]-$>J&&($=M[U]-J),M[D]+=$,M[U]-=$,a(M),M},()=>{m(null)},(z,V)=>{const r=o(),A=P?V==="start"?"end":"start":V,D=A==="start"?z:z+1,M=A==="start"?z+1:z,U=r[D],K=r[M];if(U!==0&&K!==0)r[D]=0,r[M]+=U,Z.current[z]=U;else{const N=U+K,Q=S(j[D][0],0),J=S(j[D][1],F),$=S(j[M][0],0),I=S(j[M][1],F),g=Math.max(Q,N-I),ee=Math.min(J,N-$),oe=$||(ee-g)/2,X=Z.current[z],L=N-X;X&&X<=I&&X>=$&&L<=J&&L>=Q?(r[M]=X,r[D]=L):(r[D]-=oe,r[M]+=oe)}return a(r),r},T==null?void 0:T.index]}var gt=t(80882),yt=t(6171),St=t(90814),xt=t(48115);function Oe(e){return typeof e=="number"&&!Number.isNaN(e)?Math.round(e):0}var zt=e=>{const{prefixCls:i,vertical:h,index:u,active:a,ariaNow:P,ariaMin:j,ariaMax:F,resizable:y,startCollapsible:S,endCollapsible:C,onOffsetStart:Y,onOffsetUpdate:Z,onOffsetEnd:T,onCollapse:m,lazy:o,containerSize:B}=e,x=`${i}-bar`,[E,_]=(0,l.useState)(null),[z,V]=(0,l.useState)(0),r=h?0:z,A=h?z:0,D=I=>{y&&I.currentTarget&&(_([I.pageX,I.pageY]),Y(u))},M=I=>{if(y&&I.touches.length===1){const g=I.touches[0];_([g.pageX,g.pageY]),Y(u)}},U=I=>{const g=B*P/100,ee=g+I,oe=Math.max(0,B*j/100),X=Math.min(B,B*F/100);return Math.max(oe,Math.min(X,ee))-g},K=(0,ue.Z)((I,g)=>{const ee=U(h?g:I);V(ee)}),N=(0,ue.Z)(()=>{Z(u,r,A,!0),V(0),T(!0)});l.useLayoutEffect(()=>{if(E){const X={mousemove:L=>{const{pageX:W,pageY:k}=L,se=W-E[0],c=k-E[1];o?K(se,c):Z(u,se,c)},mouseup:()=>{o?N():T(),_(null)},touchmove:L=>{if(L.touches.length===1){const W=L.touches[0],k=W.pageX-E[0],se=W.pageY-E[1];o?K(k,se):Z(u,k,se)}},touchend:()=>{o?N():T(),_(null)}};for(const[L,W]of Object.entries(X))window.addEventListener(L,W);return()=>{for(const[L,W]of Object.entries(X))window.removeEventListener(L,W)}}},[E]);const Q={[`--${x}-preview-offset`]:`${z}px`},J=h?xt.Z:yt.Z,$=h?gt.Z:St.Z;return l.createElement("div",{className:x,role:"separator","aria-valuenow":Oe(P),"aria-valuemin":Oe(j),"aria-valuemax":Oe(F)},o&&l.createElement("div",{className:re()(`${x}-preview`,{[`${x}-preview-active`]:!!z}),style:Q}),l.createElement("div",{className:re()(`${x}-dragger`,{[`${x}-dragger-disabled`]:!y,[`${x}-dragger-active`]:a}),onMouseDown:D,onTouchStart:M}),S&&l.createElement("div",{className:re()(`${x}-collapse-bar`,`${x}-collapse-bar-start`),onClick:()=>m(u,"start")},l.createElement(J,{className:re()(`${x}-collapse-icon`,`${x}-collapse-start`)})),C&&l.createElement("div",{className:re()(`${x}-collapse-bar`,`${x}-collapse-bar-end`),onClick:()=>m(u,"end")},l.createElement($,{className:re()(`${x}-collapse-icon`,`${x}-collapse-end`)})))},Ct=t(14747),Ot=t(83559);const bt=e=>{const{componentCls:i}=e;return{[`&-rtl${i}-horizontal`]:{[`> ${i}-bar`]:{[`${i}-bar-collapse-previous`]:{insetInlineEnd:0,insetInlineStart:"unset"},[`${i}-bar-collapse-next`]:{insetInlineEnd:"unset",insetInlineStart:0}}},[`&-rtl${i}-vertical`]:{[`> ${i}-bar`]:{[`${i}-bar-collapse-previous`]:{insetInlineEnd:"50%",insetInlineStart:"unset"},[`${i}-bar-collapse-next`]:{insetInlineEnd:"50%",insetInlineStart:"unset"}}}}},Se={position:"absolute",top:"50%",left:{_skip_check_:!0,value:"50%"},transform:"translate(-50%, -50%)"},jt=e=>{const{componentCls:i,colorFill:h,splitBarDraggableSize:u,splitBarSize:a,splitTriggerSize:P,controlItemBgHover:j,controlItemBgActive:F,controlItemBgActiveHover:y,prefixCls:S}=e,C=`${i}-bar`,Y=`${i}-mask`,Z=`${i}-panel`,T=e.calc(P).div(2).equal(),m=`${S}-bar-preview-offset`,o={position:"absolute",background:e.colorPrimary,opacity:.2,pointerEvents:"none",transition:"none",zIndex:1,display:"none"};return{[i]:Object.assign(Object.assign(Object.assign({},(0,Ct.Wf)(e)),{display:"flex",width:"100%",height:"100%",alignItems:"stretch",[`> ${C}`]:{flex:"none",position:"relative",userSelect:"none",[`${C}-dragger`]:Object.assign(Object.assign({},Se),{zIndex:1,"&::before":Object.assign({content:'""',background:j},Se),"&::after":Object.assign({content:'""',background:h},Se),[`&:hover:not(${C}-dragger-active)`]:{"&::before":{background:F}},"&-active":{zIndex:2,"&::before":{background:y}},[`&-disabled${C}-dragger`]:{zIndex:0,"&, &:hover, &-active":{cursor:"default","&::before":{background:j}},"&::after":{display:"none"}}}),[`${C}-collapse-bar`]:Object.assign(Object.assign({},Se),{zIndex:e.zIndexPopupBase,background:j,fontSize:e.fontSizeSM,borderRadius:e.borderRadiusXS,color:e.colorText,cursor:"pointer",opacity:0,display:"flex",alignItems:"center",justifyContent:"center","@media(hover:none)":{opacity:1},"&:hover":{background:F},"&:active":{background:y}}),"&:hover, &:active":{[`${C}-collapse-bar`]:{opacity:1}}},[Y]:{position:"fixed",zIndex:e.zIndexPopupBase,inset:0,"&-horizontal":{cursor:"col-resize"},"&-vertical":{cursor:"row-resize"}},"&-horizontal":{flexDirection:"row",[`> ${C}`]:{width:0,[`${C}-preview`]:Object.assign(Object.assign({height:"100%",width:a},o),{[`&${C}-preview-active`]:{display:"block",transform:`translateX(var(--${m}))`}}),[`${C}-dragger`]:{cursor:"col-resize",height:"100%",width:P,"&::before":{height:"100%",width:a},"&::after":{height:u,width:a}},[`${C}-collapse-bar`]:{width:e.fontSizeSM,height:e.controlHeightSM,"&-start":{left:{_skip_check_:!0,value:"auto"},right:{_skip_check_:!0,value:T},transform:"translateY(-50%)"},"&-end":{left:{_skip_check_:!0,value:T},right:{_skip_check_:!0,value:"auto"},transform:"translateY(-50%)"}}}},"&-vertical":{flexDirection:"column",[`> ${C}`]:{height:0,[`${C}-preview`]:Object.assign(Object.assign({height:a,width:"100%"},o),{[`&${C}-preview-active`]:{display:"block",transform:`translateY(var(--${m}))`}}),[`${C}-dragger`]:{cursor:"row-resize",width:"100%",height:P,"&::before":{width:"100%",height:a},"&::after":{width:u,height:a}},[`${C}-collapse-bar`]:{height:e.fontSizeSM,width:e.controlHeightSM,"&-start":{top:"auto",bottom:T,transform:"translateX(-50%)"},"&-end":{top:T,bottom:"auto",transform:"translateX(-50%)"}}}},[Z]:{overflow:"auto",padding:"0 1px",scrollbarWidth:"thin",boxSizing:"border-box","&-hidden":{padding:0,overflow:"hidden"},[`&:has(${i}:only-child)`]:{overflow:"hidden"}}}),bt(e))}},Ft=e=>{var i;const h=e.splitBarSize||2,u=e.splitTriggerSize||6,a=e.resizeSpinnerSize||20,P=(i=e.splitBarDraggableSize)!==null&&i!==void 0?i:a;return{splitBarSize:h,splitTriggerSize:u,splitBarDraggableSize:P,resizeSpinnerSize:a}};var $t=(0,Ot.I$)("Splitter",e=>[jt(e)],Ft),Pt=e=>{const{prefixCls:i,className:h,style:u,layout:a="horizontal",children:P,rootClassName:j,onResizeStart:F,onResize:y,onResizeEnd:S,lazy:C}=e,{getPrefixCls:Y,direction:Z,className:T,style:m}=(0,st.dj)("splitter"),o=Y("splitter",i),B=(0,lt.Z)(o),[x,E,_]=$t(o,B),z=a==="vertical",V=Z==="rtl",r=!z&&V,A=mt(P),[D,M]=(0,l.useState)(),U=O=>{const{offsetWidth:p,offsetHeight:R}=O,w=z?R:p;w!==0&&M(w)},[K,N,Q,J,$,I]=pt(A,D),g=ft(A,N,V),[ee,oe,X,L,W]=ht(A,g,Q,D,I,V),k=(0,ue.Z)(O=>{ee(O),F==null||F(N)}),se=(0,ue.Z)((O,p,R)=>{const w=oe(O,p);R?S==null||S(w):y==null||y(w)}),c=(0,ue.Z)(O=>{X(),O||S==null||S(N)}),s=(0,ue.Z)((O,p)=>{const R=L(O,p);y==null||y(R),S==null||S(R)}),d=re()(o,h,`${o}-${a}`,{[`${o}-rtl`]:V},j,T,_,B,E),b=`${o}-mask`,f=l.useMemo(()=>{const O=[];let p=0;for(let R=0;R<A.length;R+=1)p+=Q[R],O.push(p);return O},[Q]),v=Object.assign(Object.assign({},m),u);return x(l.createElement(ot.Z,{onResize:U},l.createElement("div",{style:v,className:d},A.map((O,p)=>{const R=l.createElement(rt,Object.assign({},O,{prefixCls:o,size:K[p]}));let w=null;const q=g[p];if(q){const Ut=(f[p-1]||0)+J[p],wt=(f[p+1]||100)-$[p+1],At=(f[p-1]||0)+$[p],Lt=(f[p+1]||100)-J[p+1];w=l.createElement(zt,{lazy:C,index:p,active:W===p,prefixCls:o,vertical:z,resizable:q.resizable,ariaNow:f[p]*100,ariaMin:Math.max(Ut,wt)*100,ariaMax:Math.min(At,Lt)*100,startCollapsible:q.startCollapsible,endCollapsible:q.endCollapsible,onOffsetStart:k,onOffsetUpdate:(Yt,Ht,Xt,Gt)=>{let Pe=z?Xt:Ht;r&&(Pe=-Pe),se(Yt,Pe,Gt)},onOffsetEnd:c,onCollapse:s,containerSize:D||0})}return l.createElement(l.Fragment,{key:`split-panel-${p}`},R,w)}),typeof W=="number"&&l.createElement("div",{"aria-hidden":!0,className:re()(b,`${b}-${a}`)}))))};const Ne=Pt;Ne.Panel=at;var be=Ne,je=t(40056),It=t(60940),Ve=t(42075),Mt=t(66309),Et=t(92398),Rt=t(40411),Zt=t(91845),Tt=t(85060),Bt=t(86738),n=t(85893),Dt=(0,l.forwardRef)(function(e,i){(0,l.useImperativeHandle)(i,function(){return{}});var h=(0,l.useRef)(),u=(0,l.useState)(!1),a=ne()(u,2),P=a[0],j=a[1];return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(Bt.Z,{icon:!1,title:!1,description:(0,n.jsx)(Ee.A,{name:"importRemote",layout:"horizontal",submitter:!1,formRef:h,children:(0,n.jsx)(le.Z,{width:"lg",label:"Url",name:"url",placeholder:"https:// or http://"})}),onConfirm:te()(G()().mark(function F(){var y,S,C;return G()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(S=(y=h.current)===null||y===void 0?void 0:y.getFieldValue("url"),S){Z.next=3;break}return Z.abrupt("return");case 3:return j(!0),Z.next=6,(0,ge.MG)({uri:S}).finally(function(){j(!1)});case 6:C=Z.sent,e.onFinish&&e.onFinish(C.data.content,S);case 8:case"end":return Z.stop()}},F)})),children:(0,n.jsx)(ze.ZP,{loading:P,icon:(0,n.jsx)(Tt.Z,{}),block:!0,onClick:function(){var y;(y=h.current)===null||y===void 0||y.resetFields()},children:e.title})})})}),Ue=Dt,ae=t(36146),Fe=t(55375),$e=t(67255),Nt=t(69626);function Vt(){var e,i,h,u,a,P=(0,l.useContext)(Ae.Z),j=P.loading,F=P.notice,y=P.message,S=(0,De.useNavigate)(),C=(0,l.useState)([]),Y=ne()(C,2),Z=Y[0],T=Y[1],m=(0,l.useRef)(),o=(0,l.useRef)(),B=(0,De.useSearchParams)(),x=ne()(B,2),E=x[0],_=x[1],z=(0,l.useState)(),V=ne()(z,2),r=V[0],A=V[1],D=(0,l.useState)(!1),M=ne()(D,2),U=M[0],K=M[1],N=(e=E.get("id"))!==null&&e!==void 0?e:"",Q=(0,l.useState)({yaml:"",yamlOverride:""}),J=ne()(Q,2),$=J[0],I=J[1],g=new ae.Uo("compose"),ee=(0,l.useRef)(),oe=(0,l.useState)(0),X=ne()(oe,2),L=X[0],W=X[1],k=function(){var c=te()(G()().mark(function s(d){var b,f,v;return G()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return se(d),I(d),p.next=4,(0,ge.xC)({id:N,yaml:[d.yaml,(b=d.yamlOverride)!==null&&b!==void 0?b:""],environment:(f=o.current)===null||f===void 0?void 0:f.getFieldValue("environment")});case 4:if(v=p.sent,!(!v||!v.data||!v.data.project)){p.next=8;break}return F.error(v.data.error),p.abrupt("return");case 8:v.data.project&&T(Object.keys(v.data.project.services).map(function(R,w){var q=v.data.project.services[R];return q.name=R,q}));case 9:case"end":return p.stop()}},s)}));return function(d){return c.apply(this,arguments)}}(),se=function(s){var d,b,f,v=[];s.yaml==""&&s.yamlOverride==""||(r&&r.detail.setting.environment?v.push.apply(v,ce()(r.detail.setting.environment)):(d=o.current)!==null&&d!==void 0&&d.getFieldValue("environment")&&v.push.apply(v,ce()(o.current.getFieldValue("environment"))),s.yaml!=""&&(0,Me.m)(s.yaml).map(function(O){v.find(function(p){return p.name==O.name})||v.push(O)}),s.yamlOverride&&s.yamlOverride!=""&&(0,Me.m)(s.yamlOverride).map(function(O){v.find(function(p){return p.name==O.name})||v.push(O)}),(b=o.current)===null||b===void 0||b.resetFields(["environment"]),(f=o.current)===null||f===void 0||f.setFieldValue("environment",v))};return(0,l.useEffect)(function(){N&&(j.show(),(0,ge.Pn)({id:N}).then(function(c){var s,d,b;if(c.data.detail.setting.type==""&&(c.data.detail.setting.type="text"),(s=o.current)===null||s===void 0||s.setFieldsValue({name:c.data.detail.name,title:c.data.detail.title,type:c.data.detail.setting.type,yaml:(d=c.data.yaml[0])!==null&&d!==void 0?d:"",yamlOverride:(b=c.data.yaml[1])!==null&&b!==void 0?b:"",environment:c.data.detail.setting.environment}),c.data.detail.setting.type=="remoteUrl"){var f;(f=o.current)===null||f===void 0||f.setFieldValue("remoteUrl",c.data.detail.setting.remoteUrl)}else if(c.data.detail.setting.type=="storagePath"){var v;(v=o.current)===null||v===void 0||v.setFieldValue("storagePath","/dpanel/compose/"+c.data.detail.setting.uri[0])}A(c.data)}).catch(function(c){S("/compose/list",{state:{page:(0,$e.G$)(Fe.q9)}})}).finally(function(){j.destroy()}))},[L]),(0,l.useEffect)(function(){var c;r&&r.detail&&k({yaml:r.yaml[0],yamlOverride:(c=r.yaml[1])!==null&&c!==void 0?c:""})},[r]),(0,n.jsxs)(qe._z,{header:{extra:[]},children:[(0,n.jsx)(Nt.Z,{ref:ee,onClose:function(){W(L+1)},onDeployFinish:function(){var s;(s=o.current)===null||s===void 0||s.resetFields(),S("/compose/list/",N?{state:{page:(0,$e.G$)(Fe.q9)}}:void 0)}}),(0,n.jsx)(Ee.A,{submitter:{render:function(s,d){return(0,n.jsxs)(_e.S,{children:[(0,n.jsx)(ze.ZP,{onClick:function(){var f;(f=s.form)===null||f===void 0||f.setFieldValue("deployBackground",!0),s.submit()},children:g.format("createFormDeployBackground")}),(0,n.jsx)("span",{children:d[1]},"submit")]})}},formRef:o,onFinishFailed:function(s){K(!1)},onFinish:function(){var c=te()(G()().mark(function s(d){var b,f,v,O,p;return G()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return v={type:d.type,name:d.name,title:d.title,environment:d.environment,remoteUrl:d.remoteUrl,yaml:d.yaml,yamlOverride:d.yamlOverride,deployBackground:(b=d.deployBackground)!==null&&b!==void 0?b:!1},N&&(v.id=N),w.next=4,(0,ge.im)(v);case 4:if(O=w.sent,!d.deployBackground){w.next=8;break}return(p=ee.current)===null||p===void 0||p.show(O.data.id),w.abrupt("return",!0);case 8:return(f=o.current)===null||f===void 0||f.resetFields(),S("/compose/list/",N?{state:{page:(0,$e.G$)(Fe.q9)}}:void 0),w.abrupt("return",!0);case 11:case"end":return w.stop()}},s)}));return function(s){return c.apply(this,arguments)}}(),children:(0,n.jsx)(de.Z,{split:"vertical",children:(0,n.jsxs)(be,{onResize:function(){},children:[(0,n.jsx)(be.Panel,{resizable:!0,size:U?"0%":"45%",children:(0,n.jsxs)(de.Z,{split:"horizontal",children:[(0,n.jsxs)(de.Z,{title:(0,n.jsx)(Le.Z,{}),subTitle:g.format("createCardBasic"),children:[(0,n.jsx)(et.Z,{name:"deployBackground",hidden:!0}),(0,n.jsx)(le.Z,{label:g.format("createFormTitle"),name:"title",disabled:(r==null?void 0:r.detail.setting.type)=="outPath",fieldProps:{onChange:function(s){var d="";if(s.target.value&&!(r!=null&&r.detail)){var b,f=(0,Zt.N9)(s.target.value.trim(),{toneType:"none",type:"array"});d=f.join(""),(b=o.current)===null||b===void 0||b.setFieldValue("name",d)}}}}),(0,n.jsx)(le.Z,{label:g.format("createFormName"),name:"name",required:!0,rules:[{required:!0},{pattern:/^[a-zA-Z0-9_-]+$/,message:g.format("createFormNameRule")}],disabled:!!(r!=null&&r.detail),placeholder:g.format("createFormNameEmpty")}),(0,n.jsx)(tt.Z.Group,{label:g.format("createFormType"),name:"type",initialValue:"text",fieldProps:{defaultValue:"text",onChange:function(){}},options:g.option("createFormTypeOption",["text","remoteUrl","storagePath","store","outPath"]).map(function(c){return{label:c.label,value:c.value,disabled:(r==null?void 0:r.detail)&&(r==null?void 0:r.detail.setting.type)!=c.value}})}),(0,n.jsx)(Re.Z,{name:["type"],children:function(s){var d=s.type;if(d=="text")return[(0,n.jsx)(je.Z,{type:"warning",message:g.format("createFormTypeTextTip"),style:{marginBottom:15}},"yamlTips"),(0,n.jsx)(we.Z,{title:g.format("createFormTypeTextImportFile"),onImport:function(f){var v;return k(H()(H()({},$),{yaml:f})),(v=o.current)===null||v===void 0||v.setFieldValue("yaml",f),!0},onLoad:function(f){if(f.indexOf("services:")<0)throw new Error(ae.FD.format("commonFileIncorrectFormat",{name:"yaml"}));return!0}},"importFile"),(0,n.jsx)(Ue,{title:g.format("createFormTypeTextImportRemote"),onFinish:function(){var b=te()(G()().mark(function f(v){var O;return G()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return k(H()(H()({},$),{yaml:v})),(O=o.current)===null||O===void 0||O.setFieldValue("yaml",v),R.abrupt("return",!0);case 3:case"end":return R.stop()}},f)}));return function(f){return b.apply(this,arguments)}}()},"importRemote")];if(d=="remoteUrl")return[(0,n.jsx)(Ue,{title:g.format("createFormTypeRemoteImportRemote1"),onFinish:function(){var b=te()(G()().mark(function f(v,O){var p,R;return G()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return k(H()(H()({},$),{yaml:v})),(p=o.current)===null||p===void 0||p.setFieldValue("yaml",v),(R=o.current)===null||R===void 0||R.setFieldValue("remoteUrl",O),q.abrupt("return",!0);case 4:case"end":return q.stop()}},f)}));return function(f,v){return b.apply(this,arguments)}}()},"importRemote1"),(0,n.jsx)(Ze.Z,{name:"remoteUrl"},"remoteUrl")];if(d=="storagePath")return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(le.Z,{name:"storagePath",required:!0,readonly:!0,initialValue:r!=null&&r.detail?"".concat(r==null?void 0:r.detail.setting.uri[0]):g.format("createFormTypeStoragePathTip"),rules:[{required:!0,message:g.format("createFormTypeStoragePathTip")}]})});if(d=="store")return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(le.Z,{readonly:!0,name:"store",required:!0,initialValue:r!=null&&r.detail?"".concat(r==null?void 0:r.detail.setting.store):g.format("createFormTypeStoreTip"),rules:[{required:!0,message:g.format("createFormTypeStoreTip")}]})});if(d=="outPath")return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(le.Z,{name:"outPath",required:!0,readonly:!0,initialValue:(r==null?void 0:r.detail)&&"".concat(r==null?void 0:r.detail.setting.uri[0]),rules:[{required:!0,message:g.format("createFormTypeOutPathTip")}]})})}})]}),(0,n.jsx)(de.Z,{title:(0,n.jsx)(Ye.Z,{}),subTitle:g.format("createServiceTitle"),children:(0,n.jsx)(It.Z,{dataSource:Z,rowKey:"name",pagination:!1,columns:[{title:ae.FD.format("listTitle"),dataIndex:"name"},{title:ae.FD.format("listImageName"),dataIndex:"image"},{title:ae.FD.format("listPort"),dataIndex:"ports",render:function(s,d,b){return d.ports&&d.ports.map(function(f,v){return(0,n.jsx)(Ve.Z,{size:"large",wrap:!0,children:(0,n.jsxs)(Mt.Z,{color:"#2db7f5",icon:f.published?(0,n.jsx)(He.Z,{}):"",style:{marginBottom:5},children:[f.published," : ",f.target]})},"space".concat(v))})}},{title:ae.FD.format("listDependsOn"),dataIndex:"dependsOn",width:150,render:function(s,d,b){if(d.depends_on)return(0,n.jsx)(Ve.Z,{wrap:!0,children:Object.keys(d.depends_on).map(function(f){var v=f;return d.external_links&&d.external_links.map(function(O){O.indexOf(":"+f)>-1&&(v=O)}),v})})}}]})}),(0,n.jsxs)(de.Z,{children:[(0,n.jsx)(Re.Z,{name:["environment"],children:function(s){var d=s.environment;if(!d||d.length==0)return(0,n.jsx)(je.Z,{message:(0,n.jsxs)(n.Fragment,{children:[g.format("createEnvTip1")," ","${DB_NAME}",". ",g.format("createEnvTip2")]})})}}),(0,n.jsx)(xe.Z,{drawerProps:{ghost:!0,title:(0,n.jsx)(ke,{}),subTitle:g.format("createEnvTitle")},name:"environment",showInDrawer:!0,showImportButton:!0,showAddButton:!0,showCodeMode:!0,ref:m})]})]})}),(0,n.jsx)(be.Panel,{children:(0,n.jsxs)(de.Z,{children:[(0,n.jsx)(Ze.Z,{name:"yamlOverride",hidden:!0}),(0,n.jsx)(le.Z,{name:"yaml",hidden:!0}),(0,n.jsx)(Et.Z,{tabBarExtraContent:(0,n.jsx)(ze.ZP,{type:"link",onClick:function(){K(!U)},children:ae.FD.format("listManageFullScreen")}),items:[{label:g.format("createYaml"),key:"yaml",children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(Be.ZP,{theme:"dark",minHeight:"550px",onChange:function(s){I(H()(H()({},$),{yaml:s}))},onFocus:function(){var s;((s=o.current)===null||s===void 0?void 0:s.getFieldValue("type"))=="remoteUrl"&&y.info(g.format("createYamlDisableEdit"))},onBlur:function(){var s;(s=o.current)===null||s===void 0||s.setFieldValue("yaml",$.yaml),k($)},readOnly:((i=o.current)===null||i===void 0?void 0:i.getFieldValue("type"))=="remoteUrl",value:(h=o.current)===null||h===void 0?void 0:h.getFieldValue("yaml"),extensions:[Te.RI.yaml()]})})},{label:(0,n.jsx)(Rt.Z,{count:((u=o.current)===null||u===void 0?void 0:u.getFieldValue("yamlOverride"))&&ae.FD.format("listInUse"),offset:[15,-5],children:g.format("createYamlOverride")}),key:"yamlOverride",children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(je.Z,{style:{marginBottom:20},message:(0,n.jsxs)(n.Fragment,{children:[g.format("createYamlOverrideTip"),(0,n.jsx)("a",{href:"https://dpanel.cc/manual/compose-create-override",target:"_blank",children:ae.FD.format("help")})]})}),(0,n.jsx)(Be.ZP,{theme:"dark",minHeight:"550px",onChange:function(s,d){I(H()(H()({},$),{yamlOverride:s}))},value:(a=o.current)===null||a===void 0?void 0:a.getFieldValue("yamlOverride"),extensions:[Te.RI.yaml()],onBlur:function(){var s;(s=o.current)===null||s===void 0||s.setFieldValue("yamlOverride",$.yamlOverride),k($)}})]})}]})]})})]})})},"create")]})}}}]);
