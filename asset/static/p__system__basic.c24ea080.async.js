"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1050],{1699:function(te,A,t){t.d(A,{u:function(){return R}});var D=t(9783),_=t.n(D),G=t(97857),w=t.n(G),Q=t(67294),n=t(82346),X=t(40411),E=t(42075),B=t(85893),R=function(b){var Z=(0,n.useAccess)(),a=Array.isArray(b.access)?b.access:[b.access],K,c=b.fallback;if(typeof b.children=="function"?(K=b.children(a.reduce(function(T,C){return w()(w()({},T),{},_()({},C,Z[C]))},{})),K||(K=c)):a.every(function(T){return Z[T]})?K=b.children:K=c,!c&&K&&b.showProTips&&Z.canSeeEnableCe){if(Z.canSeeEnableHiddenProTips)return null;K=(0,B.jsx)(X.Z,{offset:b.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:K})}if(!c&&K&&b.showProRibbonTips&&Z.canSeeEnableCe){if(Z.canSeeEnableHiddenProTips)return null;K=(0,B.jsx)(X.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:K})}return b.space?(0,B.jsx)(E.Z,w()(w()({},b.space),{},{children:K})):K}},80821:function(te,A,t){t.d(A,{Z:function(){return Z}});var D=t(97857),_=t.n(D),G=t(5574),w=t.n(G),Q=t(24963),n=t(36146),X=t(86738),E=t(83062),B=t(96074),R=t(83622),W=t(67294),b=t(85893);function Z(a){var K=(0,W.useState)(!1),c=w()(K,2),T=c[0],C=c[1],g=(0,W.useContext)(Q.Z),s=g.message,z=new n.Uo,O=function(){C(!0);var e=a.action();e instanceof Promise?e.then(function(H){if(C(!1),H){typeof a.onSuccess=="function"&&a.onSuccess(H);var J="";a.messageSuccess?typeof a.messageSuccess=="function"?J=a.messageSuccess(H):J=a.messageSuccess.indexOf("notification.")==0?z.format(a.messageSuccess):a.messageSuccess:J=z.format("notification.finish"),a.asynced?s.info(J):s.success(J)}}).catch(function(H){C(!1),typeof a.onError=="function"&&a.onError(H)}):C(!1)};return a.confirm?(0,b.jsx)(X.Z,_()(_()({style:{width:500},title:a.confirmTitle?a.confirmTitle:z.format("notification.title.tip"),description:typeof a.confirm=="string"&&a.confirm.indexOf("notification.")==0?z.format(a.confirm):a.confirm,onConfirm:O,okText:"Yes",cancelText:"No",onOpenChange:a.confirmOnOpenChange},a.confirmProps),{},{children:(0,b.jsxs)(E.Z,{title:a.tips,children:[a.showDivider&&(0,b.jsx)(B.Z,{type:"vertical",style:{marginRight:15}}),(0,b.jsx)(R.ZP,{block:a.block,disabled:a.disabled,icon:!a.children&&T?void 0:a.icon,loading:T,danger:a.danger,type:a.type,children:a.children})]})})):(0,b.jsxs)(E.Z,{title:a.tips,children:[a.showDivider&&(0,b.jsx)(B.Z,{type:"vertical",style:{marginRight:15}}),(0,b.jsx)(R.ZP,{block:a.block,style:a.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:a.disabled,icon:!a.children&&T?void 0:a.icon,loading:T,onClick:O,danger:a.danger,type:a.type,children:a.children})]})}},44349:function(te,A,t){var D=t(97857),_=t.n(D),G=t(15009),w=t.n(G),Q=t(99289),n=t.n(Q),X=t(74763),E=t(17186),B=t(5966),R=t(86250),W=t(67294),b=t(85893),Z=(0,W.forwardRef)(function(a,K){var c=(0,W.useRef)();(0,W.useImperativeHandle)(K,function(){return{addItem:function(C){function g(s,z,O){return C.apply(this,arguments)}return g.toString=function(){return C.toString()},g}(function(C,g,s){var z,O=(z=c.current)===null||z===void 0?void 0:z.getList(),U;if(O==null||O.forEach(function(J,ue){J[C]==g[C]&&(U=ue)}),!(0,X.k)(U)&&s){var e;(e=c.current)===null||e===void 0||e.remove(U),U=void 0}if(!U){var H;(H=c.current)===null||H===void 0||H.add(g)}}),removeItemByKey:function(g,s){return n()(w()().mark(function z(){var O,U;return w()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return U=(O=c.current)===null||O===void 0?void 0:O.getList(),U==null||U.forEach(function(J,ue){if(J[g]==s){var re;(re=c.current)===null||re===void 0||re.remove(ue);return}}),H.abrupt("return");case 3:case"end":return H.stop()}},z)}))()},clear:function(g){if(!g){var s;g=(s=c.current)===null||s===void 0||(s=s.getList())===null||s===void 0?void 0:s.map(function(O,U){return U})}if(g){var z;(z=c.current)===null||z===void 0||z.remove(g)}},getList:function(){var g;return(g=c.current)===null||g===void 0?void 0:g.getList()}}});var T={};return a.hideCopyButton===!0&&(T.copyIconProps=!1),a.hideDeleteButton===!0&&(T.deleteIconProps=!1),(0,b.jsx)(E.u,_()(_()({initialValue:a.initialValue,label:a.label,name:a.name,actionRef:c,creatorButtonProps:a.showAddButton?{creatorButtonText:a.label?a.label:a.name}:!1,min:a.min?a.min:0},T),{},{children:function(g,s,z){return(0,b.jsx)(R.Z,{justify:a.justify,gap:a.gap,children:a.items.map(function(O){return O.render?(0,b.jsx)("div",{children:O.render&&O.render(g,s,z)},"".concat(a.name,"-").concat(O.name,"-").concat(g.key)):(0,b.jsx)(B.Z,{width:O.width,name:O.name,label:O.label,required:O.required,rules:[{required:O.required}],disabled:O.disabled,placeholder:O.placeholder},"".concat(a.name,"-").concat(O.name,"-").concat(g.key))})})}}))});A.Z=Z},2808:function(te,A,t){t.d(A,{Z:function(){return X}});var D=t(97857),_=t.n(D),G=t(62370),w=t(51663),Q=t(67294),n=t(85893);function X(E){return(0,n.jsx)(G.Z,_()(_()({},E),{},{children:(0,n.jsx)(w.Z,{showText:function(R){return R.toHexString()},allowClear:!0,presets:[{label:"Color",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},51100:function(te,A,t){t.d(A,{Z:function(){return Q}});var D=t(97961),_=t(91604),G=t(1677),w=t(85893);function Q(n){return n.showDragger?(0,w.jsx)(_.Z,{max:n.max?n.max:1,title:n.title,label:n.label,required:n.required,rules:[{required:n.required}],fieldProps:{multiple:!!(n.max&&n.max>1),name:"file",accept:n.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(E){return new Promise(function(B){var R;(0,D._2)({path:(R=E.response.data.path)!==null&&R!==void 0?R:""}).then(function(W){B(!0)})})}},name:n.name}):(0,w.jsx)(G.Z,{max:n.max?n.max:1,title:n.title,label:n.label,required:n.required,rules:[{required:n.required}],fieldProps:{multiple:!!(n.max&&n.max>1),name:"file",accept:n.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(E){return new Promise(function(B){var R;(0,D._2)({path:(R=E.response.data.path)!==null&&R!==void 0?R:""}).then(function(W){B(!0)})})}},name:n.name})}},3616:function(te,A,t){t.d(A,{Ed:function(){return w},FK:function(){return _},R_:function(){return D},ob:function(){return G}});var D=window.innerWidth<=1024?"90vw":"65vw",_="90vw",G="60vw",w="50vh"},12323:function(te,A,t){t.d(A,{X:function(){return D},n:function(){return _}});var D={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},_=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},24963:function(te,A,t){var D=t(67294),_=(0,D.createContext)({});A.Z=_},56757:function(te,A,t){t.r(A),t.d(A,{default:function(){return Ye}});var D=t(5574),_=t.n(D),G=t(19632),w=t.n(G),Q=t(15009),n=t.n(Q),X=t(99289),E=t.n(X),B=t(87662),R=t(88641),W=t(38345),b=t(97269),Z=t(5966),a=t(31199),K=t(63434),c=t(67294),T=t(42075),C=t(80821),g=t(1699),s=t(82346);function z(I){return O.apply(this,arguments)}function O(){return O=E()(n()().mark(function I(k){return n()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt("return",(0,s.request)("/api/common/home/email-test",{method:"POST",data:k}));case 1:case"end":return F.stop()}},I)})),O.apply(this,arguments)}var U=t(36146),e=t(85893);function H(){var I=(0,c.useRef)(),k=(0,c.useState)(""),$=_()(k,2),F=$[0],j=$[1],y=new U.Uo("components.systemBasic.systemBasicEmail");function S(){return ee.apply(this,arguments)}function ee(){return ee=E()(n()().mark(function q(){var m,M,P,d,r,p,x,l;return n()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,B.pe)({groupName:"setting",name:"emailServer"});case 2:l=h.sent,l.data&&((m=I.current)===null||m===void 0||m.setFieldsValue({host:(M=l.data.host)!==null&&M!==void 0?M:"",port:(P=l.data.port)!==null&&P!==void 0?P:"",email:(d=l.data.email)!==null&&d!==void 0?d:"",code:(r=l.data.code)!==null&&r!==void 0?r:"",status:(p=l.data.status)!==null&&p!==void 0?p:[]})),l.data&&j((x=l.data)===null||x===void 0?void 0:x.email);case 5:case"end":return h.stop()}},q)})),ee.apply(this,arguments)}return(0,e.jsx)(W.Z,{direction:"column",gutter:[0,10],ghost:!0,children:(0,e.jsx)(W.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(R.Z,{}),subTitle:y.format("cardTitle"),children:(0,e.jsxs)(b.A,{layout:"horizontal",labelAlign:"right",labelCol:{span:5,offset:0},formRef:I,onInit:E()(n()().mark(function q(){return n()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return S(),M.abrupt("return",!0);case 2:case"end":return M.stop()}},q)})),submitter:{render:function(m,M){return[].concat(w()(M),[(0,e.jsx)(C.Z,{tips:y.format("testTip",{email:F}),action:E()(n()().mark(function P(){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,z({subject:y.format("testSubject"),content:y.format("testContent",{time:new Date().toISOString()})});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},P)})),children:y.format("testButton")},"testEmail")])}},onFinish:function(){var q=E()(n()().mark(function m(M){var P;return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,B.bv)({emailServer:{host:M.host,port:M.port,email:M.email,code:M.code,status:M.status}});case 2:return(P=I.current)===null||P===void 0||P.resetFields(),S(),r.abrupt("return",!0);case 5:case"end":return r.stop()}},m)}));return function(m){return q.apply(this,arguments)}}(),children:[(0,e.jsx)(Z.Z,{label:y.format("host"),name:"host",placeholder:y.format("hostEmpty"),required:!0,rules:[{required:!0}]}),(0,e.jsx)(a.Z,{label:y.format("port"),name:"port",placeholder:y.format("portEmpty"),required:!0,rules:[{required:!0}]}),(0,e.jsx)(Z.Z,{label:y.format("code"),name:"code",width:"lg",placeholder:y.format("codeEmpty"),required:!0,rules:[{required:!0}],addonAfter:(0,e.jsxs)(T.Z,{children:[(0,e.jsx)("a",{target:"_blank",href:"https://service.mail.qq.com/detail/0/75",children:y.format("codeHelpQQ")}),(0,e.jsx)("a",{target:"_blank",href:"https://help.mail.163.com/faqDetail.do?code=d7a5dc8471cd0c0e8b4b8f4f8e49998b374173cfe9171305fa1ce630d7f67ac286624f309a1a7089",children:y.format("codeHelp163")})]})}),(0,e.jsx)(Z.Z,{label:y.format("email"),name:"email",placeholder:y.format("emailEmpty"),required:!0,rules:[{required:!0}]}),(0,e.jsx)(g.u,{access:"canSeeEnableEe",children:(0,e.jsx)(K.Z.Group,{name:"status",label:y.format("status"),options:y.option("statusOption",["register"])})})]})})})}var J=t(24963);function ue(I){return re.apply(this,arguments)}function re(){return re=E()(n()().mark(function I(k){return n()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt("return",(0,s.request)("/api/pro/two-fa/enable",{method:"POST",data:k}));case 1:case"end":return F.stop()}},I)})),re.apply(this,arguments)}function Se(){return he.apply(this,arguments)}function he(){return he=E()(n()().mark(function I(){return n()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",(0,s.request)("/api/pro/two-fa/get-setting",{method:"POST"}));case 1:case"end":return $.stop()}},I)})),he.apply(this,arguments)}var xe=t(29177),Pe=t(86548),Te=t(97937),Ce=t(12119),ae=t(97462),le=t(52688),de=t(62370),oe=t(86615),ge=t(83622),Oe=t(29104),ve={xs:6,sm:6,md:6,lg:5,xl:5,xxl:5,offset:0};function Me(){var I=(0,c.useRef)(),k=(0,s.useModel)("@@initialState"),$=k.initialState,F=k.refresh,j=(0,c.useContext)(J.Z),y=j.message,S=(0,c.useRef)(),ee=(0,c.useState)(0),q=_()(ee,2),m=q[0],M=q[1],P=(0,s.useAccess)(),d=new U.Uo("components.systemBasic.systemBasicLogin");return(0,c.useEffect)(function(){!P.canSeeEnableCe&&Se().then(function(r){var p;(p=S.current)===null||p===void 0||p.setFieldsValue({enable:r.data.enable,email:r.data.email,qrcode:r.data.qrcode})}),(0,B.pe)({groupName:"setting",name:"login"}).then(function(r){if(r.data){var p;(p=S.current)===null||p===void 0||p.setFieldsValue({loginFailedEnable:r.data.failedEnable,loginFailedTotal:r.data.failedTotal,loginFailedLockTime:r.data.failedLockTime.toString()})}})},[m]),(0,e.jsxs)(W.Z,{direction:"column",gutter:[0,10],ghost:!0,children:[(0,e.jsx)(W.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(xe.Z,{}),subTitle:d.format("adminTitle"),children:(0,e.jsxs)(b.A,{layout:"horizontal",labelAlign:"right",labelCol:ve,formRef:I,onFinish:function(){var r=E()(n()().mark(function p(x){var l,o;return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,B.Jn)({username:x.username,password:x.password,newPassword:x.newPassword});case 2:if(l=u.sent,!(l&&l.data)){u.next=9;break}return(o=I.current)===null||o===void 0||o.resetFields(),y.success(U.FD.format("finish")),localStorage.removeItem("token"),F(),u.abrupt("return",!0);case 9:case"end":return u.stop()}},p)}));return function(p){return r.apply(this,arguments)}}(),children:[(0,e.jsx)(ae.Z,{name:["enableUsername"],children:function(p){var x=p.enableUsername;return(0,e.jsx)(Z.Z,{label:d.format("adminUsername"),name:"username",style:{width:"80%"},initialValue:$==null?void 0:$.user.username,disabled:!x,addonAfter:[(0,e.jsx)(ge.ZP,{type:"link",hidden:!!x,icon:(0,e.jsx)(Pe.Z,{}),onClick:function(){var o;(o=I.current)===null||o===void 0||o.setFieldValue("enableUsername",!0)}},"editBtn"),(0,e.jsx)(ge.ZP,{type:"link",hidden:!x,icon:(0,e.jsx)(Te.Z,{}),onClick:function(){var o;(o=I.current)===null||o===void 0||o.setFieldValue("enableUsername",!1)}},"closeBtn")]},"username")}}),(0,e.jsx)(Z.Z.Password,{label:d.format("adminPassword"),name:"password",placeholder:d.format("adminPasswordEmpty"),rules:[{required:!0}]},"password"),(0,e.jsx)(Z.Z.Password,{label:d.format("adminNewPassword"),name:"newPassword"},"newPasword"),(0,e.jsx)(ae.Z,{name:["newPassword"],children:function(p){var x=p.newPassword;return(0,e.jsx)(Z.Z.Password,{label:d.format("adminNewPassword2"),name:"newPassword2",dependencies:["newPassword"],rules:[{required:typeof x!="undefined"&&x!=""},function(l){var o=l.getFieldValue;return{validator:function(u,i){return!i||o("newPassword")===i?Promise.resolve():Promise.reject(new Error(d.format("adminMessagePasswordNotMatch")))}}}]},"newPasword2")}})]})}),(0,e.jsx)(W.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(Ce.Z,{}),subTitle:d.format("loginTitle"),children:(0,e.jsx)(b.A,{onFinish:function(){var r=E()(n()().mark(function p(x){var l,o;return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(P.canSeeEnableCe){u.next=5;break}return u.next=3,ue({email:x.twoFaEmail,enable:x.twoFaEnable});case 3:l=u.sent,l&&l.data.qrcode&&((o=S.current)===null||o===void 0||o.setFieldValue("towFaQrcode",l.data.qrcode));case 5:return u.next=7,(0,B.bv)({login:{failedEnable:x.loginFailedEnable,failedTotal:parseInt(x.loginFailedTotal),failedLockTime:parseInt(x.loginFailedLockTime)}});case 7:y.success(U.FD.format("finish")),M(m+1);case 9:case"end":return u.stop()}},p)}));return function(p){return r.apply(this,arguments)}}(),formRef:S,layout:"horizontal",labelAlign:"right",labelCol:ve,children:(0,e.jsx)(g.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(p){var x=p.canSeeEnableCe;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(le.Z,{disabled:x,label:d.format("loginTwoFaEnable"),name:"twoFaEnable"}),(0,e.jsx)(ae.Z,{name:["twoFaEnable"],children:function(o){var h=o.twoFaEnable;return(0,e.jsx)(Z.Z,{label:d.format("loginTwoFaEmail"),name:"twoFaEmail",disabled:x,placeholder:d.format("loginTwoFaEmailEmpty"),rules:[{required:h},{type:"email"}]})}}),(0,e.jsx)(de.Z,{name:"towFaQrcode",hidden:!0}),(0,e.jsx)(ae.Z,{name:["towFaQrcode"],children:function(o){var h=o.towFaQrcode;if(h)return(0,e.jsx)(de.Z,{label:d.format("loginTwoFaQrcode"),tooltip:d.format("loginTwoFaQrcodeTip"),children:(0,e.jsx)(Oe.Z,{style:{border:"#d1d9e0b3 solid 1px",padding:"10px",borderRadius:"10px"},width:200,src:"data:image/png;base64,".concat(h)})})}}),(0,e.jsx)(le.Z,{label:d.format("loginFailedEnable"),name:"loginFailedEnable",initialValue:!0}),(0,e.jsx)(Z.Z,{name:"loginFailedTotal",label:d.format("loginFailedTotal"),initialValue:5,fieldProps:{addonAfter:U.FD.format("unitTimes")}}),(0,e.jsx)(oe.Z.Group,{name:"loginFailedLockTime",label:d.format("loginFailedLockTime"),initialValue:"900",options:d.option("loginFailedLockTimeOption",["300","900","3600","18000","-1"])})]})}})})})]})}var Ue=t(43425),Ze=t(19400),ce=t(64317),Y=t(24739),Le=t(47221),Be=t(86125),be=t(86250),pe=t(2487),Ie=t(4393),we=t(71230),Re=t(15746),We=t(40411),Fe=t(184),Ae=t(25054),De=t(90672),Ke=t(21532),$e=t(44349),me=t(65451),ze=t(2808),ke=t(3616),_e=t(51100),ie={colorPrimary:"",colorTextBase:"",colorLink:"",colorBgContainer:"",colorBorder:"",colorBgElevated:"",colorBorderSecondary:"colorBorder"},je=["borderRadius","wireframe"],Ve=(0,c.forwardRef)(function(I,k){(0,c.useImperativeHandle)(k,function(){return{show:function(){y(!0)},reset:function(){var d;(d=S.current)===null||d===void 0||d.resetFields(["siteLogo","siteTitle","siteCopyright","siteLink","bgImage","bgSize"])}}});var $=(0,c.useState)(!1),F=_()($,2),j=F[0],y=F[1],S=(0,c.useRef)(),ee=(0,c.useContext)(J.Z),q=ee.message,m=new U.Uo("components.systemBasic.systemBasicThemeUser"),M=function(d){return(0,e.jsx)(ze.Z,{name:d.name,label:m.format(d.name),tooltip:d.tooltip})};return(0,e.jsx)(Ke.ZP,{children:(0,e.jsxs)(Fe.a,{drawerProps:{forceRender:!0,width:ke.R_},submitter:{render:function(d,r){return(0,e.jsx)(T.Z,{children:r[1]})}},title:m.format("drawerTitle"),formRef:S,open:j,onOpenChange:function(){var P=E()(n()().mark(function d(r){var p,x,l,o,h,u;return n()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if((p=S.current)===null||p===void 0||p.resetFields(["bgImageUpload","siteLogoUpload"]),!r){f.next=8;break}return f.next=4,(0,me.Py)();case 4:x=f.sent,l=x.data.config,l&&(je.forEach(function(L){if(l.token&&l.token[L]){var v,V;(v=S.current)===null||v===void 0||v.setFieldValue("enableStyle",!0),(V=S.current)===null||V===void 0||V.setFieldValue(L,l.token[L])}}),(o=S.current)===null||o===void 0||o.setFieldsValue({siteLogo:l.siteLogo,siteTitle:l.siteTitle,siteCopyright:l.siteCopyright,siteLink:l.siteLink,bgImage:l.bgImage,loginLogo:l.loginLogo}),!l.bgImage||!l.bgImage.width||l.bgImage.width=="100%"?(h=S.current)===null||h===void 0||h.setFieldValue("bgSize","full"):(u=S.current)===null||u===void 0||u.setFieldValue("bgSize","default")),Object.keys(ie).map(function(L){var v=L;ie[L]!=""&&(v=ie[L]),S!=null&&S.current&&l.token&&(S==null||S.current.setFieldValue("enableColor",!0),S==null||S.current.setFieldValue(L,l.token[v]))});case 8:y(r);case 9:case"end":return f.stop()}},d)}));return function(d){return P.apply(this,arguments)}}(),name:"theme-user",onFinish:function(){var P=E()(n()().mark(function d(r){var p,x,l;return n()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return l={token:{},bgImage:r.bgImage,siteLink:r.siteLink,siteTitle:(p=r.siteTitle)!==null&&p!==void 0?p:"",siteCopyright:r.siteCopyright,siteLogo:(x=r.siteLogo)!==null&&x!==void 0?x:"",loginLogo:r.loginLogo},r.siteLogoUpload&&r.siteLogoUpload.length>0&&(l.siteLogo=r.siteLogoUpload[0].response.data.path),l.bgImage||(l.bgImage={}),r.bgImageUpload&&r.bgImageUpload.length>0&&(l.bgImage.src=r.bgImageUpload[0].response.data.path),l.bgImage.width=r.bgSize=="full"?"100%":"",r.loginLogoUpload&&r.loginLogoUpload.length>0&&(l.loginLogo=r.loginLogoUpload[0].response.data.path),Object.keys(ie).map(function(u){l.token||(l.token={});var i=u;ie[u]!=""&&(i=ie[u]);var f=S.current&&S.current.getFieldValue(i);f&&f.toHexString?f.cleared||(l.token[u]=f.toHexString()):l.token[u]=f}),je.map(function(u){l.token||(l.token={});var i=S.current&&S.current.getFieldValue(u);l.token[u]=i}),h.next=10,(0,me.Z8)(l);case 10:return I.onFinish&&I.onFinish(),q.success(U.FD.format("finishTheme")),h.abrupt("return",!0);case 13:case"end":return h.stop()}},d)}));return function(d){return P.apply(this,arguments)}}(),children:[(0,e.jsx)(Y.UW,{title:m.format("colorTitle"),extra:(0,e.jsx)(le.Z,{name:"enableColor"})}),(0,e.jsx)(ae.Z,{name:["enableColor"],children:function(d){var r=d.enableColor;return r&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Y.UW,{children:M({name:"colorPrimary",tooltip:m.format("colorPrimaryTip")})}),(0,e.jsxs)(Y.UW,{children:[M({name:"colorBgContainer"}),M({name:"colorBgElevated"})]}),(0,e.jsxs)(Y.UW,{children:[M({name:"colorTextBase"}),M({name:"colorLink"}),M({name:"colorBorder"})]})]})}}),(0,e.jsx)(Y.UW,{title:"\u98CE\u683C",extra:(0,e.jsx)(le.Z,{name:"enableStyle"})}),(0,e.jsx)(ae.Z,{name:["enableStyle"],children:function(d){var r=d.enableStyle;return r&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Y.UW,{children:(0,e.jsxs)(be.Z,{gap:40,children:[(0,e.jsx)(le.Z,{label:m.format("wireframe"),name:"wireframe"}),(0,e.jsx)(Ae.Z,{min:1,max:16,label:m.format("borderRadius"),name:"borderRadius"})]})})})}}),(0,e.jsx)(Y.UW,{title:m.format("uiTitle")}),(0,e.jsx)(Z.Z,{label:m.format("siteTitle"),name:"siteTitle",placeholder:m.format("siteTitleEmpty")}),(0,e.jsxs)(Y.UW,{children:[(0,e.jsx)(_e.Z,{label:"Logo",title:m.format("siteLogoUploadTitle"),name:"siteLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(Z.Z,{width:"md",placeholder:m.format("siteLogoEmpty"),label:m.format("siteLogo"),name:"siteLogo"})]}),(0,e.jsxs)(Y.UW,{children:[(0,e.jsx)(_e.Z,{label:m.format("bgImageUpload"),title:m.format("bgImageUploadTitle"),name:"bgImageUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(Z.Z,{width:"md",placeholder:m.format("siteLogoEmpty"),label:m.format("bgImageSrc"),name:["bgImage","src"]}),(0,e.jsx)(oe.Z.Group,{name:"bgSize",label:m.format("bgImageBgSize"),initialValue:"full",options:m.option("bgImageBgSizeOption",["full","default"])})]}),(0,e.jsx)(Y.UW,{children:(0,e.jsx)(ae.Z,{name:["bgSize"],children:function(d){var r=d.bgSize;if(r=="default")return(0,e.jsxs)(Y.UW,{children:[(0,e.jsx)(a.Z,{width:"xs",name:["bgImage","top"],label:m.format("bgImageTop")}),(0,e.jsx)(a.Z,{width:"xs",name:["bgImage","bottom"],label:m.format("bgImageBottom")}),(0,e.jsx)(a.Z,{width:"xs",name:["bgImage","left"],label:m.format("bgImageLeft")}),(0,e.jsx)(a.Z,{width:"xs",name:["bgImage","right"],label:m.format("bgImageRight")})]})}})}),(0,e.jsx)($e.Z,{name:"siteLink",label:m.format("siteLink"),showAddButton:!0,hideCopyButton:!0,gap:10,items:m.option("siteLinkOption",["title","href"]).map(function(P){return{name:P.value,label:P.label}})}),(0,e.jsx)(De.Z,{label:m.format("siteCopyright"),name:"siteCopyright"}),(0,e.jsxs)(Y.UW,{title:m.format("uiLoginTitle"),children:[(0,e.jsx)(_e.Z,{label:"Logo",title:"Logo",name:"loginLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(Z.Z,{width:"md",placeholder:m.format("siteLogoEmpty"),label:m.format("loginLogo"),name:"loginLogo"})]})]})})}),He=Ve,Ee=t(12323),Ne=t(64304),fe=t.n(Ne);function Ge(){var I=(0,c.useRef)(),k=(0,c.useRef)(),$=(0,c.useRef)(),F=(0,s.useModel)("@@initialState"),j=F.initialState,y=(0,s.useAccess)(),S=(0,c.useContext)(J.Z),ee=S.message,q=(0,s.useAntdConfigSetter)(),m=(0,c.useState)(),M=_()(m,2),P=M[0],d=M[1],r=(0,c.useState)(),p=_()(r,2),x=p[0],l=p[1],o=new U.Uo("components.systemBasic.systemBasicTheme");return(0,c.useEffect)(function(){var h,u,i,f,L,v,V,N;(h=I.current)===null||h===void 0||h.setFieldsValue({algorithm:(u=j==null?void 0:j.theme.algorithm)!==null&&u!==void 0?u:"default",mainMenu:(i=j==null?void 0:j.theme.mainMenu)!==null&&i!==void 0?i:"top",compact:(f=j==null?void 0:j.theme.compact)!==null&&f!==void 0?f:"default",fontSize:(L=j==null?void 0:j.theme.fontSize)!==null&&L!==void 0?L:14,fontSizeConsole:(v=j==null?void 0:j.theme.fontSizeConsole)!==null&&v!==void 0?v:12,sideMenu:(V=j==null?void 0:j.theme.sideMenu)!==null&&V!==void 0?V:"default",tablePageSize:(N=j==null?void 0:j.theme.tablePageSize)!==null&&N!==void 0?N:"20"})},[j]),(0,e.jsx)(Le.Z,{accordion:!0,defaultActiveKey:"basic",items:[{key:"basic",label:o.format("basicTitle"),children:(0,e.jsxs)(W.Z,{ghost:!0,children:[!y.canSeeEnableCe&&(0,e.jsx)(He,{ref:k}),(0,e.jsxs)(b.A,{layout:"horizontal",labelAlign:"right",labelCol:ve,formRef:I,submitter:{render:function(u,i){return[i[1]]}},onFinish:function(){var h=E()(n()().mark(function u(i){var f;return n()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(f={algorithm:i.algorithm,mainMenu:i.mainMenu,sideMenu:i.sideMenu,compact:i.compact,fontSizeConsole:i.fontSizeConsole,fontSize:i.fontSize,tablePageSize:i.tablePageSize},!(i.algorithm!=(j==null?void 0:j.theme.algorithm)&&!y.canSeeEnableCe)){v.next=4;break}return v.next=4,(0,me.H)({clearColor:!0});case 4:return localStorage.setItem("dpanel-theme",i.algorithm),localStorage.setItem("dpanel-compact",i.compact),localStorage.setItem("dpanel-pagesize",i.tablePageSize),v.next=9,(0,B.bv)({theme:f});case 9:ee.success(U.FD.format("finishTheme"));case 10:case"end":return v.stop()}},u)}));return function(u){return h.apply(this,arguments)}}(),children:[(0,e.jsx)(oe.Z.Group,{name:"algorithm",label:o.format("basicAlgorithm"),initialValue:"default",radioType:"button",options:o.option("basicAlgorithmOption",["default","dark","system"])}),(0,e.jsx)(g.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(u){var i=u.canSeeEnableCe;return(0,e.jsx)(ae.Z,{name:["algorithm"],children:function(L){var v=L.algorithm;return(0,e.jsx)(de.Z,{label:o.format("basicUserTheme"),children:(0,e.jsxs)(T.Z.Compact,{children:[(0,e.jsx)(ge.ZP,{disabled:i||v=="system",onClick:function(){var N;(N=k.current)===null||N===void 0||N.show()},icon:(0,e.jsx)(Ue.Z,{}),children:o.format("basicUserThemeButton")}),(0,e.jsx)(C.Z,{disabled:i||v=="system",action:E()(n()().mark(function V(){var N;return n()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,(0,me.H)({clearColor:!0,clearSite:!0});case 2:q(function(ye){return ye.theme={token:{}},ye}),(N=k.current)===null||N===void 0||N.reset(),window.location.reload();case 5:case"end":return ne.stop()}},V)})),children:o.format("basicUserThemeDefaultButton")})]})})}})}}),(0,e.jsx)(oe.Z.Group,{name:"mainMenu",label:o.format("basicMainMenu"),initialValue:"top",radioType:"button",options:o.option("basicMainMenuOption",["top","side"])}),(0,e.jsx)(oe.Z.Group,{name:"sideMenu",label:o.format("basicSideMenu"),initialValue:"default",radioType:"button",options:o.option("basicSideMenuOption",["default","collapse"])}),(0,e.jsx)(oe.Z.Group,{name:"compact",label:o.format("basicCompact"),initialValue:"default",radioType:"button",options:o.option("basicCompactOption",["default","compact"])}),(0,e.jsx)(de.Z,{name:"fontSize",label:o.format("basicFontSize"),initialValue:14,children:(0,e.jsx)(Be.Z,{step:2,max:30,min:8,marks:{8:"8",10:"10",12:"12",14:"14",16:"16",20:"20",26:"26"}})}),(0,e.jsx)(ce.Z,{initialValue:"20",label:o.format("basicTablePageSize"),name:"tablePageSize",options:o.option("basicTablePageSizeOption",["10","20","50","100","all"])})]})]})},{key:"console",label:o.format("consoleTitle"),children:(0,e.jsx)(W.Z,{ghost:!0,children:(0,e.jsxs)(b.A,{submitter:{render:function(u,i){return[i[1]]}},request:E()(n()().mark(function h(){var u,i,f;return n()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return i=Ee.X,v.next=3,(0,B.pe)({groupName:"setting",name:"themeConsoleConfig"});case 3:return f=v.sent,f.data&&Object.assign(i,f.data),!y.canSeeEnableCe&&f.data&&(u=f.data)!==null&&u!==void 0&&u.themeName&&f.data.themeName!=""&&Object.keys(fe()).forEach(function(V,N){V==f.data.themeName&&(l(Math.ceil((N+1)/36)),d(f.data.themeName))}),v.abrupt("return",{fontSize:i.fontSize,lineHeight:i.lineHeight,letterSpacing:i.letterSpacing,fontWeight:i.fontWeight,cursorStyle:i.cursorStyle,cursorInactiveStyle:i.cursorInactiveStyle,cursorBlink:i.cursorBlink});case 7:case"end":return v.stop()}},h)})),formRef:$,onFinish:function(){var h=E()(n()().mark(function u(i){var f;return n()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return f={fontSize:i.fontSize,lineHeight:i.lineHeight,letterSpacing:i.letterSpacing,fontWeight:i.fontWeight,cursorStyle:i.cursorStyle,cursorInactiveStyle:i.cursorInactiveStyle,cursorBlink:i.cursorBlink,theme:{},themeName:""},P!=""&&!y.canSeeEnableCe&&(f.theme=fe()[P],f.themeName=P),v.next=4,(0,B.bv)({console:f});case 4:return ee.success(U.FD.format("finishTheme")),v.abrupt("return",!1);case 6:case"end":return v.stop()}},u)}));return function(u){return h.apply(this,arguments)}}(),children:[(0,e.jsx)(Y.UW,{title:o.format("consoleFont"),children:(0,e.jsxs)(be.Z,{gap:50,children:[(0,e.jsx)(a.Z,{label:o.format("consoleFontSize"),name:"fontSize",tooltip:o.format("consoleFontSizeTip"),fieldProps:{addonAfter:"px"}}),(0,e.jsx)(a.Z,{label:o.format("consoleLineHeight"),name:"lineHeight",tooltip:o.format("consoleLineHeightTip"),fieldProps:{addonAfter:o.format("consoleLineHeightUnit")}}),(0,e.jsx)(a.Z,{label:o.format("consoleLetterSpacing"),name:"letterSpacing",fieldProps:{addonAfter:"px"},tooltip:o.format("consoleLetterSpacingTip")}),(0,e.jsx)(ce.Z,{label:o.format("consoleFontWeight"),name:"fontWeight",options:[{label:"normal",value:"normal"},{label:"bold",value:"bold"},{label:"100",value:"100"},{label:"200",value:"200"},{label:"300",value:"300"},{label:"400",value:"400"},{label:"500",value:"500"},{label:"600",value:"600"},{label:"700",value:"700"},{label:"800",value:"800"},{label:"900",value:"900"}]})]})}),(0,e.jsx)(Y.UW,{title:o.format("consoleCursorStyleTitle"),children:(0,e.jsxs)(be.Z,{gap:50,children:[(0,e.jsx)(ce.Z,{label:o.format("consoleCursorStyle"),name:"cursorStyle",width:"sm",options:o.option("consoleCursorStyleOption",["bar","underline","block"])}),(0,e.jsx)(ce.Z,{label:o.format("consoleCursorInactiveStyle"),name:"cursorInactiveStyle",width:"sm",options:o.option("consoleCursorStyleOption",["bar","underline","block","outline"])}),(0,e.jsx)(le.Z,{label:o.format("consoleCursorBlink"),name:"cursorBlink"})]})}),(0,e.jsx)(g.u,{showProRibbonTips:!0,access:"canSeeEnableCe",children:function(u){var i=u.canSeeEnableCe;return(0,e.jsx)(W.Z,{ghost:!0,title:(0,e.jsx)(Ze.Z,{}),subTitle:o.format("consoleTheme"),children:(0,e.jsx)(pe.Z,{split:!0,style:{overflow:"hidden"},grid:{column:6},pagination:{pageSize:36,current:x,onChange:function(L,v){l(L)}},dataSource:Object.keys(fe()).map(function(f){return{label:f,value:f,data:fe()[f]}}),renderItem:function(L,v){var V=L.data,N=(0,e.jsxs)(Ie.Z,{style:{backgroundColor:V.background,color:V.foreground,textAlign:"center",cursor:i?"not-allowed":"pointer",borderRadius:0},onClick:function(){if(!i){var ne;(ne=$.current)===null||ne===void 0||ne.setFieldValue("theme",L.data),d(L.label)}},hoverable:!0,children:[(0,e.jsx)(we.Z,{wrap:!0,gutter:[2,2],justify:"center",align:"middle",children:Ee.n.filter(function(se){return V[se]!=""}).map(function(se){return(0,e.jsx)(Re.Z,{style:{backgroundColor:V[se],padding:8}},se)})}),(0,e.jsx)("div",{style:{paddingTop:5},children:L.label})]});return(0,e.jsx)(pe.Z.Item,{style:{margin:0},children:P==L.label?(0,e.jsx)(We.Z.Ribbon,{text:"Checked",children:N}):N},v)}})})}})]})})}]})}var Qe=t(90078),Xe=t(92398);function Ye(){var I=(0,c.useState)("user"),k=_()(I,2),$=k[0],F=k[1],j=(0,s.useAccess)(),y=(0,s.useLocation)();return(0,c.useEffect)(function(){y.state&&F(y.state.tag)},[y.state]),(0,e.jsx)(Qe._z,{children:(0,e.jsx)(W.Z,{children:(0,e.jsx)(Xe.Z,{activeKey:$,onChange:function(ee){F(ee)},items:[{key:"user",label:new U.Uo("components.systemBasic.systemBasicLogin").format("title"),children:(0,e.jsx)(Me,{})},{key:"theme",label:new U.Uo("components.systemBasic.systemBasicTheme").format("title"),children:(0,e.jsx)(Ge,{})},{key:"notice",label:new U.Uo("components.systemBasic.systemBasicEmail").format("title"),children:(0,e.jsx)(H,{}),disabled:j.canSeeEnableCe}]})})})}},97961:function(te,A,t){t.d(A,{GH:function(){return W},_2:function(){return Z},fN:function(){return X},ii:function(){return n},vC:function(){return B}});var D=t(15009),_=t.n(D),G=t(99289),w=t.n(G),Q=t(82346),n=[{name:"amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"i386",arch:"386",search:[]},{name:"arm/v6",arch:"arm",search:[]},{name:"arm/v7",arch:"arm",search:[]},{name:"arm/v8",arch:"arm64",search:[]},{name:"ppc64le",arch:"ppc64le",search:[]},{name:"riscv64",arch:"riscv64",search:[]}];function X(T){return E.apply(this,arguments)}function E(){return E=w()(_()().mark(function T(C){return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,Q.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:C}));case 1:case"end":return s.stop()}},T)})),E.apply(this,arguments)}function B(T){return R.apply(this,arguments)}function R(){return R=w()(_()().mark(function T(C){return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,Q.request)("/api/app/image/import-by-container-tar",{method:"POST",data:C}));case 1:case"end":return s.stop()}},T)})),R.apply(this,arguments)}function W(T){return b.apply(this,arguments)}function b(){return b=w()(_()().mark(function T(C){return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,Q.request)("/api/app/image/import-by-image-tar",{method:"POST",data:C}));case 1:case"end":return s.stop()}},T)})),b.apply(this,arguments)}function Z(T){return a.apply(this,arguments)}function a(){return a=w()(_()().mark(function T(C){return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,Q.request)("/api/common/attach/delete",{method:"POST",data:C});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},T)})),a.apply(this,arguments)}function K(){return c.apply(this,arguments)}function c(){return c=_asyncToGenerator(_regeneratorRuntime().mark(function T(){return _regeneratorRuntime().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",request("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return g.stop()}},T)})),c.apply(this,arguments)}}}]);
