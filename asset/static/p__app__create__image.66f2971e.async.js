"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3985],{91058:function(je,Y,n){var Q=n(5574),a=n.n(Q),te=n(89035),_=n(38345),P=n(17186),b=n(24739),x=n(5966),I=n(42075),p=n(28036),ae=n(85576),c=n(67294),C=n(95089),k=n(12491),o=n(85893),U="docker-image",i=(0,c.forwardRef)(function(r,z){var y=(0,c.useState)(U),L=a()(y,2),A=L[0],d=L[1],s=(0,c.useRef)(),m=(0,c.useState)(""),u=a()(m,2),X=u[0],f=u[1],Te=function(){A!="code"?d("code"):d(U)};(0,c.useImperativeHandle)(z,function(){return{addEnvItem:function(T,ue){var le,ee=(le=s.current)===null||le===void 0?void 0:le.getList(),re=!1;if(ee==null||ee.map(function(B){if(B.name==T){re=!0;return}}),!re){var e;(e=s.current)===null||e===void 0||e.add({name:T,value:ue})}},clear:function(){var T;(T=s.current)===null||T===void 0||(T=T.getList())===null||T===void 0||T.map(function(ue,le){var ee;(ee=s.current)===null||ee===void 0||ee.remove(le)})}}});function Me(q){try{var T,ue;q==""&&(q=Pe());for(var le=(T=(ue=s.current)===null||ue===void 0||(ue=ue.getList())===null||ue===void 0?void 0:ue.length)!==null&&T!==void 0?T:0,ee=le;ee>=0;ee--){var re;(re=s.current)===null||re===void 0||re.remove(ee)}var e=q.split(`
`),B=0;e.map(function(me){var _e,J=me.split("=");J.length<2||((_e=s.current)===null||_e===void 0||_e.add({name:J[0],value:J.slice(1).join("=")},B),B++)})}catch(me){console.log(me)}}function Pe(){if(s&&s.current&&s.current.getList){var q,T=(q=s.current)===null||q===void 0?void 0:q.getList();if(T){var ue=[];return T.map(function(le){ue.push("".concat(le.name,"=").concat(le.value))}),ue.join(`
`)}else return""}else return""}return(0,o.jsxs)(_.Z,{ghost:r.showCardGhost,title:r.label?r.label:null,headerBordered:!0,extra:(r.showCodeMode||r.showImportButton)&&(0,o.jsxs)(I.Z,{children:[r.showImportButton&&(0,o.jsx)("div",{style:{marginBottom:"-25px"},children:(0,o.jsx)(k.Z,{title:"\u5BFC\u5165 env \u6587\u4EF6",onImport:function(T){return Me(T),!0},onLoad:function(T){if(T.indexOf("=")<0)throw new Error("\u5BFC\u5165env\u6587\u4EF6\u9519\u8BEF");return!0}})}),r.showCodeMode?(0,o.jsx)(p.ZP,{icon:(0,o.jsx)(te.Z,{}),type:A=="code"?"primary":"default",onClick:Te,children:"\u4EE3\u7801\u6A21\u5F0F"},"code"):""]}),children:[(0,o.jsx)(P.u,{name:r.name?r.name:"environment",actionRef:s,creatorButtonProps:r.showAddButton?{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u73AF\u5883\u53D8\u91CF"}:!1,copyIconProps:!1,min:100,label:r.listLabel,children:function(T,ue,le){var ee=le.getCurrentRowData();return(0,o.jsxs)(b.UW,{children:[(0,o.jsx)(x.Z,{width:r.showInDrawer?"sm":"md",name:"name",label:"\u53D8\u91CF\u540D",required:!0,rules:[{required:!0}],disabled:r.showDisableName,placeholder:"\u8F93\u5165\u53D8\u91CF\u540D\u79F0"}),(0,o.jsx)(x.Z,{width:r.showInDrawer?"sm":"md",name:"value",label:"\u53D8\u91CF\u503C",rules:[{required:!!r.requireValue}],disabled:r.showDisableValue,placeholder:ee&&ee.label?ee.label:"\u8F93\u5165\u53D8\u91CF\u503C"})]})}}),(0,o.jsx)(ae.Z,{width:"800px",open:A=="code",onCancel:function(){return d("docker-image")},onOk:function(){Me(X),d("docker-image")},children:(0,o.jsx)(C.ZP,{onChange:function(T){return f(T)},value:Pe(),height:"680px",theme:"light"})})]})});Y.Z=i},4798:function(je,Y,n){var Q=n(15009),a=n.n(Q),te=n(99289),_=n.n(te),P=n(5574),b=n.n(P),x=n(24963),I=n(14946),p=n(64789),ae=n(38345),c=n(17186),C=n(24739),k=n(5966),o=n(62370),U=n(10641),i=n(31418),r=n(25593),z=n(85576),y=n(66309),L=n(42075),A=n(28036),d=n(67294),s=n(85893),m=(0,d.forwardRef)(function(u,X){var f=(0,d.useContext)(x.Z),Te=f.notice,Me=(0,d.useState)(!1),Pe=b()(Me,2),q=Pe[0],T=Pe[1],ue=(0,d.useRef)(),le=i.Z.useApp();(0,d.useImperativeHandle)(X,function(){return{}});var ee=function(e){var B,me,_e=!1,J=(B=(me=ue.current)===null||me===void 0?void 0:me.getList())!==null&&B!==void 0?B:[];if(J.map(function(he){he.name==e.name&&(_e=!0)}),!_e){var Fe;(Fe=ue.current)===null||Fe===void 0||Fe.add(e)}};return(0,s.jsxs)(ae.Z,{title:"\u5173\u8054\u7F51\u7EDC",headerBordered:!0,children:[(0,s.jsx)(c.u,{name:"network",actionRef:ue,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u7F51\u7EDC"},actionGuard:{beforeAddRow:function(e,B){return!u.siteName||u.siteName==""||typeof u.siteName=="undefined"?(Te.error("\u8BF7\u8F93\u5165\u7AD9\u70B9\u6807\u8BC6"),!1):(T(!0),!1)}},copyIconProps:!1,min:0,itemRender:function(e,B){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(C.UW,{children:[(0,s.jsx)(k.Z,{label:"\u7F51\u7EDC\u540D\u79F0",name:"name",width:"md",disabled:!0,fieldProps:{value:B.record.name}}),(0,s.jsx)(o.Z,{label:"\u8BBF\u95EEHostname",name:"alise",children:B.record.alise!=""&&(0,s.jsx)(r.Z.Text,{code:!0,copyable:!0,children:B.record.alise})}),(0,s.jsx)(o.Z,{label:" ",children:e.action})]}),(0,s.jsx)(C.UW,{children:(0,s.jsx)(k.Z,{label:"\u6307\u5B9AIpV4",name:"ipV4",width:"md",fieldProps:{addonAfter:B.record.subnet}})})]})}}),(0,s.jsx)(z.Z,{title:"\u9009\u62E9\u7F51\u7EDC",width:1024,footer:!1,open:q,onCancel:function(){return T(!1)},children:(0,s.jsx)(U.Z,{rowKey:"Name",toolBarRender:!1,columns:[{title:"\u540D\u79F0",dataIndex:"Name",render:function(e,B,me,_e,J){return B.Name=="none"||B.Name=="bridge"||B.Name=="host"?(0,s.jsxs)(s.Fragment,{children:[B.Name," ",(0,s.jsx)(y.Z,{color:"blue",children:"System"})]}):(0,s.jsx)(s.Fragment,{children:e})}},{title:"\u7C7B\u578B",ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"IPAM Driver",ellipsis:!0,width:120,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4 IPAM Network",search:!1,dataIndex:["IPAM","Config",0,"Subnet"],render:function(e,B,me,_e,J){return(0,s.jsxs)(L.Z,{children:[B.IPAM.Config&&B.IPAM.Config[0]&&"".concat(B.IPAM.Config[0].Subnet," - ").concat(B.IPAM.Config[0].Gateway),B.IPAM.Config&&B.IPAM.Config[1]&&"".concat(B.IPAM.Config[1].Subnet," - ").concat(B.IPAM.Config[1].Gateway)]})}},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(e,B,me,_e,J){return[(0,s.jsx)(A.ZP,{type:"link",onClick:function(){ee({name:B.Name,alise:[""],subnet:B.IPAM.Config[0].Subnet}),T(!1)},children:(0,s.jsx)(p.Z,{})},B.Id)]}}],request:function(){var re=_()(a()().mark(function e(B,me,_e){var J;return a()().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=2,(0,I.jR)({name:B.Name});case 2:return J=he.sent,he.abrupt("return",{data:J.data.list,success:!0,total:J.data.list.length});case 4:case"end":return he.stop()}},e)}));return function(e,B,me){return re.apply(this,arguments)}}(),pagination:{pageSize:10}})})]})});Y.Z=m},92067:function(je,Y,n){n.d(Y,{Z:function(){return k}});var Q=n(15009),a=n.n(Q),te=n(99289),_=n.n(te),P=n(60335),b=n(64789),x=n(10641),I=n(42075),p=n(28036),ae=n(37413),c=n(5251),C=n(85893);function k(o){return(0,C.jsx)(x.Z,{columns:[{title:"\u5BB9\u5668\u540D\u79F0",dataIndex:"name",render:function(i,r,z,y){return(0,C.jsx)(I.Z,{direction:"vertical",style:{textAlign:"left"},children:r==null?void 0:r.Names.map(function(L){return(0,c.fi)(L,"/")})},r.Id)}},{title:"\u7AEF\u53E3",dataIndex:"ports",search:!1,render:function(i,r,z,y){var L=[],A=[];return r!=null&&r.Ports&&r.Ports.map(function(d,s){d.PublicPort?L.push(d):A.push(d)}),(0,C.jsx)(ae.Z,{publicPort:L,privatePort:A,domain:[]})}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",ellipsis:!0,width:100,render:function(i,r,z,y){return[(0,C.jsx)(p.ZP,{type:"link",onClick:_()(a()().mark(function L(){var A;return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,P.jV)({md5:r.Id});case 2:A=s.sent,o.onSelect&&o.onSelect(A.data.info);case 4:case"end":return s.stop()}},L)})),children:(0,C.jsx)(b.Z,{})},r.Id)]}}],rowKey:"Id",request:function(){var U=_()(a()().mark(function i(r,z,y){var L;return a()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,P.IE)({siteTitle:r.name});case 2:return L=d.sent,d.abrupt("return",{data:L.data.list,success:!0,total:L.data.list.length});case 4:case"end":return d.stop()}},i)}));return function(i,r,z){return U.apply(this,arguments)}}(),pagination:{pageSize:9}})}},52255:function(je,Y,n){n.d(Y,{Z:function(){return te}});var Q=n(67294),a=n(85893);function te(_){return(0,a.jsx)("div",{style:{display:_.show?"block":"none"},children:_.children})}},44349:function(je,Y,n){var Q=n(97857),a=n.n(Q),te=n(17186),_=n(5966),P=n(86250),b=n(67294),x=n(85893),I=(0,b.forwardRef)(function(p,ae){var c=(0,b.useRef)();(0,b.useImperativeHandle)(ae,function(){return{addItem:function(o,U){var i,r=(i=c.current)===null||i===void 0?void 0:i.getList(),z=!1;if(r==null||r.map(function(L){if(L.name==o){z=!0;return}}),!z){var y;(y=c.current)===null||y===void 0||y.add({name:o,value:U})}},clear:function(){var o;(o=c.current)===null||o===void 0||(o=o.getList())===null||o===void 0||o.map(function(U,i){var r;(r=c.current)===null||r===void 0||r.remove(i)})}}});var C={};return p.hideCopyButton===!0&&(C.copyIconProps=!1),p.hideDeleteButton===!0&&(C.deleteIconProps=!1),(0,x.jsx)(te.u,a()(a()({initialValue:p.initialValue,label:p.label,name:p.name,actionRef:c,creatorButtonProps:p.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(p.label?p.label:p.name)}:!1,min:p.min?p.min:0},C),{},{children:function(o,U,i){return(0,x.jsx)(P.Z,{justify:p.justify,gap:p.gap,children:p.items.map(function(r){return r.render?(0,x.jsx)("div",{children:r.render&&r.render(o,U,i)},"".concat(p.name,"-").concat(r.name,"-").concat(o.key)):(0,x.jsx)(_.Z,{width:r.width,name:r.name,label:r.label,required:r.required,rules:[{required:r.required}],disabled:r.disabled,placeholder:r.placeholder},"".concat(p.name,"-").concat(r.name,"-").concat(o.key))})})}}))});Y.Z=I},12491:function(je,Y,n){n.d(Y,{Z:function(){return I}});var Q=n(24963),a=n(88484),te=n(62370),_=n(31418),P=n(28036),b=n(67294),x=n(85893);function I(p){var ae=(0,b.useContext)(Q.Z),c=ae.message,C=ae.notice,k=ae.lang,o=(0,b.useRef)(null),U=_.Z.useApp(),i=function(){o.current&&(o.current.click(),o.current.onchange=function(z){if(!z||!z.target)return"";var y=new FileReader;y.onload=function(A){var d,s,m=(d=A.target)===null||d===void 0?void 0:d.result;if(p.onLoad)try{p.onLoad&&p.onLoad(m)}catch(u){C.error(u);return}typeof p.onImport=="function"&&(c.success("\u6210\u529F\u5BFC\u5165 ".concat(p.title)),p.onImport(m)),(s=o.current)!==null&&s!==void 0&&s.value&&(o.current.value="")};var L=z.target;if(L.files)try{y.readAsText(L.files[0])}catch(A){C.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(te.Z,{children:(0,x.jsx)(P.ZP,{icon:(0,x.jsx)(a.Z,{}),block:!0,onClick:i,children:p.title})}),(0,x.jsx)("input",{style:{display:"none"},type:"file",ref:o,name:"importFileInput"})]})}},35880:function(je,Y,n){var Q=n(67294),a=(0,Q.createContext)({});Y.Z=a},74028:function(je,Y,n){n.r(Y),n.d(Y,{default:function(){return Dn}});var Q=n(15009),a=n.n(Q),te=n(99289),_=n.n(te),P=n(5574),b=n.n(P),x=n(90078),I=n(38345),p=n(97269),ae=n(2236),c=n(5966),C=n(97462),k=n(64218),o=n(92398),U=n(38925),i=n(67294),r=n(35880),z=n(10641),y=n(62370),L=n(85576),A=n(42075),d=n(96074),s=n(25593),m=n(83062),u=n(71230),X=n(15746),f=n(28036),Te=n(3393),Me=n(18148),Pe=n(5251),q=n(64789),T=n(75162),ue=n(85060),le=n(28307),ee=n(78451),re=n(99861),e=n(85893);function B(E){var K=(0,i.useState)(!1),W=b()(K,2),V=W[0],D=W[1],Z=(0,i.useRef)(),g=(0,i.useContext)(r.Z),M=g.createFormRef,H=g.volumeListRef,S=g.createEnvRef,j=g.domainRef,v=(0,i.useRef)(),w=function(){var F=_()(a()().mark(function O(h){var R,ne,ie,N,de,pe,se,be,ve,Ee,Ie,fe;return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return D(!1),l.next=3,(0,Te.YU)({md5:h});case 3:N=l.sent,E.redeploy||(be=(de=M.current)===null||de===void 0?void 0:de.getFieldsValue(),(pe=M.current)===null||pe===void 0||pe.resetFields(),(se=M.current)===null||se===void 0||se.setFieldsValue({siteName:be.siteName,siteTitle:be.siteTitle})),N.data.info.Config.Env&&N.data.info.Config.Env.map(function(t){var ce,Ce=t.split("=");(ce=S.current)===null||ce===void 0||ce.addEnvItem(Ce[0],Ce.slice(1).join("="))}),(R=M.current)===null||R===void 0||R.setFieldValue("imageName",h),(ne=M.current)===null||ne===void 0||ne.setFieldValue("workDir",N.data.info.Config.WorkingDir),(ie=j.current)===null||ie===void 0||ie.setExposePort(N.data.info.Config.ExposedPorts),E.redeploy||(N.data.info.Config.Volumes?(Ie=[],Object.keys(N.data.info.Config.Volumes).map(function(t,ce){Ie.push(t)}),(Ee=H.current)===null||Ee===void 0||Ee.setDefaultDestPath(Ie)):(fe=H.current)===null||fe===void 0||fe.setDefaultDestPath([]),(ve=M.current)===null||ve===void 0||ve.setFieldsValue({workDir:{value:"",useDefault:!0,default:N.data.info.Config.WorkingDir},user:{value:"",useDefault:!0,default:N.data.info.Config.User},command:{value:"",useDefault:!0,default:N.data.info.Config.Cmd&&N.data.info.Config.Cmd.join(" ")},entrypoint:{value:"",useDefault:!0,default:N.data.info.Config.Entrypoint&&N.data.info.Config.Entrypoint.join(" ")}}));case 10:case"end":return l.stop()}},O)}));return function(h){return F.apply(this,arguments)}}();return(0,i.useEffect)(function(){E.fromImageId&&w(E.fromImageId)},[E.fromImageId]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(L.Z,{open:V,width:1024,title:"\u9009\u62E9\u955C\u50CF",footer:!1,onCancel:function(){return D(!1)},children:(0,e.jsx)(z.Z,{scroll:{x:"max-content"},columns:[{title:"Id",dataIndex:"Id",search:!1,width:200,render:function(O,h,R,ne,ie){return(0,e.jsx)(ee.Z,{content:h.Id})}},{title:"\u955C\u50CF\u540D\u79F0",dataIndex:"tag",width:200,render:function(O,h,R,ne){return(0,e.jsx)(ee.Z,{content:h.RepoTags[0]})}},{title:"\u521B\u5EFA\u65E5\u671F",dataIndex:"Created",ellipsis:!0,search:!1,width:"180px",render:function(O,h,R,ne){return(0,e.jsx)("div",{children:(0,Pe.ZM)(h.Created*1e3)},h.Id)},sorter:function(O,h){return O.Created-h.Created}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:80,render:function(O,h,R,ne){return(0,e.jsxs)(A.Z,{split:(0,e.jsx)(d.Z,{type:"vertical"}),children:[(0,e.jsx)(s.Z.Link,{onClick:_()(a()().mark(function ie(){return a()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.abrupt("return",w(h.RepoTags[0]));case 1:case"end":return de.stop()}},ie)})),children:(0,e.jsx)(m.Z,{title:"\u4F7F\u7528\u955C\u50CF",children:(0,e.jsx)(q.Z,{})})},"addImage"),(0,e.jsx)(s.Z.Link,{onClick:_()(a()().mark(function ie(){var N;return a()().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:h.RepoTags[0]&&((N=v.current)===null||N===void 0||N.setImageName(h.RepoTags[0]));case 1:case"end":return pe.stop()}},ie)})),children:(0,e.jsx)(m.Z,{title:"\u66F4\u65B0\u955C\u50CF",children:(0,e.jsx)(T.Z,{})})},"updateImage")]})}}],request:function(){var F=_()(a()().mark(function O(h,R,ne){var ie,N,de,pe,se;return a()().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return E.redeploy&&(N=(ie=M.current)===null||ie===void 0?void 0:ie.getFieldValue("imageName"),h.tag=N?N.split(":")[0]:h.tag),ve.next=3,(0,Me.KG)({tag:h.tag});case 3:return de=ve.sent,pe=0,se=[],de.data.list&&(se=de.data.list.flatMap(function(Ee){return Ee.RepoTags.map(function(Ie){return{Key:pe++,Id:Ee.Id,Created:Ee.Created,RepoTags:[Ie]}})})),ve.abrupt("return",{data:se,success:!0,total:se.length});case 8:case"end":return ve.stop()}},O)}));return function(O,h,R){return F.apply(this,arguments)}}(),toolBarRender:function(){return[(0,e.jsx)(le.Z,{onClick:function(){D(!1)},buttonType:"primary",ref:v,onFinish:function(h){w(h)}},"remote")]},formRef:Z,rowKey:"Key",pagination:{pageSize:5}})},"imageTableList"),(0,e.jsxs)(u.Z,{children:[(0,e.jsx)(X.Z,{span:14,children:(0,e.jsx)(c.Z,{label:"\u955C\u50CF",tooltip:E.redeploy?"\u66F4\u65B0\u5BB9\u5668\u65F6,\u53EA\u53EF\u4EE5\u9009\u62E9\u8BE5\u955C\u50CF\u4E0B\u7684\u4E0D\u540Ctag.\u4E5F\u53EF\u4EE5\u5F3A\u5236\u66F4\u65B0\u5DF2\u90E8\u7F72tag,\u66F4\u6B21\u90E8\u7F72":"\u65B0\u5EFA\u5BB9\u5668\u65F6,\u53EF\u4EE5\u4F7F\u7528\u672C\u5730\u955C\u50CF,\u4E5F\u53EF\u4EE5\u4E0B\u8F7D\u5168\u65B0\u7684\u955C\u50CF\u6216\u662F\u66F4\u65B0\u672C\u5730\u955C\u50CF\u7684tag",name:"imageName",disabled:!0,placeholder:"\u8BF7\u9009\u62E9\u955C\u50CF\uFF0C\u5982\u679C\u662F\u8FDC\u7A0B\u955C\u50CF\u8BF7\u5148\u4E0B\u8F7D",rules:[{required:!0}],required:!0})}),(0,e.jsx)(X.Z,{children:(0,e.jsx)(y.Z,{label:" ",children:(0,e.jsxs)(A.Z.Compact,{children:[(0,e.jsx)(f.ZP,{type:"primary",onClick:function(){return D(!0)},children:E.redeploy?"\u66F4\u6362\u955C\u50CF":"\u9009\u62E9\u955C\u50CF"},"showBtn"),(0,e.jsx)(C.Z,{name:["imageName"],children:function(O){var h=O.imageName;return E.redeploy?(0,e.jsx)(re.Z,{image:[h],trigger:(0,e.jsx)(m.Z,{title:"\u91CD\u65B0\u62C9\u53D6\u5F53\u524D\u955C\u50CF",children:(0,e.jsx)(f.ZP,{icon:(0,e.jsx)(ue.Z,{}),children:"\u62C9\u53D6\u5F53\u524D\u955C\u50CF"})})}):(0,e.jsx)(le.Z,{onClick:function(){D(!1)},ref:v,onFinish:function(ne){w(ne)}},"remote")}})]})})})]})]})}var me=n(60335),_e=n(51042),J=n(24739),Fe=n(63434),he=n(17186),ze=n(85265),Xe=n(92067),Je=(0,i.forwardRef)(function(E,K){var W=(0,i.useState)(!1),V=b()(W,2),D=V[0],Z=V[1],g=(0,i.useRef)(),M=function(j){var v=(0,i.useState)([]),w=b()(v,2),F=w[0],O=w[1];return(0,i.useEffect)(function(){(0,me.jV)({md5:j.name}).then(function(h){var R;return O((R=h.data.info.Config.Env)!==null&&R!==void 0?R:[]),!0})},[]),(0,e.jsxs)(I.Z,{bordered:!0,extra:j.action,style:{marginBottom:10},children:[(0,e.jsx)(I.Z,{title:"\u5173\u8054\u4FE1\u606F",children:(0,e.jsxs)(J.UW,{children:[(0,e.jsx)(c.Z,{label:"\u5BB9\u5668\u540D\u79F0",name:"name",width:"md",readonly:!0}),(0,e.jsx)(c.Z,{label:"\u8BBF\u95EEHostName",name:"alise",width:"md",tooltip:"\u901A\u8FC7\u914D\u7F6E\u6B64\u540D\u79F0\uFF0C\u5728\u5BB9\u5668\u5185\u90E8\u8FDB\u884C\u8BF7\u6C42\u8BBF\u95EE"}),(0,e.jsx)(Fe.Z,{label:"\u5173\u8054\u5B58\u50A8",name:"volume"})]})}),(0,e.jsx)(I.Z,{title:"\u73AF\u5883\u53D8\u91CF",children:(0,e.jsx)(A.Z,{direction:"vertical",children:F&&F.map(function(h,R){return(0,e.jsx)(s.Z.Text,{copyable:{icon:(0,e.jsx)(_e.Z,{}),onCopy:function(){var ie=h.split("=");E.onAddEnv(ie[0],ie[1])},tooltips:["add env","success"]},code:!0,ellipsis:{tooltip:h},style:{width:300},children:h},R)})},"linkEnv")})]})},H=function(j){var v,w,F=!1,O=(v=(w=g.current)===null||w===void 0?void 0:w.getList())!==null&&v!==void 0?v:[];if(O.map(function(R){R.name==j.name&&(F=!0)}),!F){var h;(h=g.current)===null||h===void 0||h.add(j)}};return(0,i.useImperativeHandle)(K,function(){return{setDefaultLink:function(j){j&&j.map(function(v){v.name!=""&&H(v)})}}}),(0,e.jsxs)(I.Z,{title:"\u5173\u8054\u5BB9\u5668",headerBordered:!0,children:[(0,e.jsx)(he.u,{name:"links",actionRef:g,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5173\u8054"},actionGuard:{beforeAddRow:function(j,v){return Z(!0),!1}},copyIconProps:!1,min:0,itemRender:function(j,v){return(0,e.jsx)(M,{action:j.action,name:v.record.name})}}),(0,e.jsx)(ze.Z,{title:"\u9009\u62E9\u5BB9\u5668",width:800,footer:!1,open:D,onClose:function(){return Z(!1)},children:(0,e.jsx)(Xe.Z,{onSelect:function(j){H({name:j.Name,alise:j.Config.Hostname,volume:!1}),Z(!1)}})})]})}),Qe=Je,qe=n(91058),en=n(2831),Ze=n(64317),De=n(52688),Ve=n(86125),nn=n(44349);function tn(E){var K,W=(0,i.useState)(),V=b()(W,2),D=V[0],Z=V[1];return(0,i.useEffect)(function(){(0,en.aF)().then(function(g){return Z(g.data.info)})},[]),(0,e.jsxs)(I.Z,{children:[(0,e.jsx)(c.Z,{label:"\u5171\u4EAB\u5185\u5B58\u5927\u5C0F - /dev/shm",name:"shmsize",initialValue:"64M",tooltip:"0 \u4E3A\u4F7F\u7528\u9ED8\u8BA464M\uFF0C\u914D\u7F6E\u65F6\u8BF7\u9644\u52A0\u5355\u4F4D\uFF0C\u4F8B\u5982\uFF1A1G"}),(0,e.jsx)(y.Z,{label:"\u6700\u5927Cpu\u914D\u989D",name:"cpus",tooltip:"0 \u4E3A\u4E0D\u9650\u5236",children:(0,e.jsx)(Ve.Z,{step:.1,max:D==null?void 0:D.NCPU,marks:{0:"0",.5:"0.5\u6838",1:"1\u6838",1.5:"1.5\u6838",2:"2\u6838",4:"4\u6838",6:"6\u6838",8:"8\u6838"}})}),(0,e.jsx)(y.Z,{label:"\u6700\u5927\u5185\u5B58\u914D\u989D",name:"memory",tooltip:"0 \u4E3A\u4E0D\u9650\u5236",children:(0,e.jsx)(Ve.Z,{step:256,max:Math.round(((K=D==null?void 0:D.MemTotal)!==null&&K!==void 0?K:0)/1024/1024),marks:{0:"0",1024:"1G",2048:"2G",3072:"3G",4096:"4G"}})}),(0,e.jsx)(Ze.Z,{label:"\u65E5\u5FD7\u7C7B\u578B",name:["log","driver"],tooltip:"\u9ED8\u8BA4\u4F7F\u7528 json-file \u9A71\u52A8\u7531 docker \u7EDF\u4E00\u7BA1\u7406\u3002\u91C7\u7528 journal \u65F6\u65E5\u5FD7\u5C06\u6765\u5BBF\u4E3B\u673A\u7BA1\u7406",initialValue:"json-file",valueEnum:{"json-file":"json-file",journald:"journal (\u5BBF\u4E3B\u9700\u8981\u5B89\u88C5journal\u670D\u52A1)"}}),(0,e.jsx)(C.Z,{name:["log"],children:function(M){var H=M.log;if(H.driver=="json-file")return(0,e.jsxs)(J.UW,{children:[(0,e.jsx)(c.Z,{label:"\u65E5\u5FD7\u5207\u5272\u5C3A\u5BF8",name:["log","maxSize"],placeholder:"\u4F8B\u5982\uFF1A10k,5M",tooltip:"\u9ED8\u8BA4 Docker \u5E76\u4E0D\u4F1A\u81EA\u52A8\u5207\u5272\u65E5\u5FD7"}),(0,e.jsx)(c.Z,{tooltip:"\u9ED8\u8BA4 Docker \u5E76\u4E0D\u4F1A\u81EA\u52A8\u6E05\u7406\u65E5\u5FD7\u6587\u4EF6",label:"\u4FDD\u7559\u65E5\u5FD7\u6587\u4EF6\u6570",name:["log","maxFile"],placeholder:"\u4F8B\u5982\uFF1A10"})]})}}),(0,e.jsx)(nn.Z,{name:"device",label:"\u5173\u8054\u8BBE\u5907",hideCopyButton:!0,showAddButton:!0,items:[{label:"\u5BBF\u4E3B\u673A\u8DEF\u5F84",name:"host",width:"md",placeholder:"\u4F8B\u5982\uFF1A/dev/tty0"},{label:"\u5BB9\u5668\u5185\u8DEF\u5F84",name:"dest",width:"md",placeholder:"\u4F8B\u5982\uFF1A/dev/tty0"}]}),(0,e.jsxs)(u.Z,{children:[(0,e.jsx)(X.Z,{span:4,children:(0,e.jsx)(De.Z,{label:"\u4F7F\u7528 Gpu",name:["gpus","enable"]})}),(0,e.jsx)(X.Z,{span:20,children:(0,e.jsx)(C.Z,{name:["gpus"],children:function(M){var H=M.gpus;if(H&&H.enable)return(0,e.jsx)(Ze.Z,{mode:"tags",label:"\u8BBE\u5907\u5217\u8868",name:["gpus","device"],placeholder:"\u914D\u7F6E\u4F7F\u7528\u8BBE\u5907id\u6216\u662Fuuid\uFF0C\u4E0D\u586B\u6240\u4E3A\u6240\u6709\u8BBE\u5907"})}})})]}),(0,e.jsx)(C.Z,{name:["gpus"],children:function(M){var H=M.gpus;if(H&&H.enable)return(0,e.jsx)(Ze.Z,{label:"\u8BA1\u7B97\u80FD\u529B",name:["gpus","capabilities"],mode:"multiple",fieldProps:{allowClear:!0},options:[{label:"compute - \u8BA1\u7B97\u80FD\u529B",value:"compute"},{label:"compat32 - \u517C\u5BB932\u4F4D",value:"compat32"},{label:"graphics - \u56FE\u5F62\u5904\u7406\u80FD\u529B",value:"graphics"},{label:"utility - \u76D1\u63A7\u548C\u7BA1\u7406\u80FD\u529B",value:"utility"},{label:"video - \u89C6\u9891\u5904\u7406\u80FD\u529B",value:"video"},{label:"display - \u663E\u793A\u56FE\u5F62\u754C\u9762\u80FD\u529B",value:"display"}]})}})]})}function an(){return(0,e.jsx)(I.Z,{title:"\u5BB9\u5668\u6807\u7B7E",children:(0,e.jsx)(he.u,{name:"label",label:"",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u6807\u7B7E"},copyIconProps:!1,min:0,children:(0,e.jsxs)(J.UW,{children:[(0,e.jsx)(c.Z,{width:"md",name:"name",label:"\u540D\u79F0",placeholder:""}),(0,e.jsx)(c.Z,{width:"md",name:"value",label:"\u503C",placeholder:""})]})})})}var un=n(44771),rn=n(86615),Bn="default",Pn="user";function sn(E){return(0,e.jsx)(y.Z,{label:E.label,tooltip:E.tooltip,children:(0,e.jsxs)(A.Z.Compact,{block:!0,children:[(0,e.jsx)(rn.Z.Group,{radioType:"button",name:[E.name,"useDefault"],options:[{label:"\u4F7F\u7528\u9ED8\u8BA4",value:!0},{label:"\u81EA\u5B9A\u4E49",value:!1}]}),(0,e.jsx)(C.Z,{name:[E.name],children:function(W){return W[E.name]&&W[E.name].useDefault?(0,e.jsx)(c.Z,{name:[E.name,"default"],disabled:!0,placeholder:"\u672A\u8BBE\u7F6E"}):(0,e.jsx)(c.Z,{name:[E.name,"value"]})}})]})})}var we=sn,Le=n(24963);function on(){var E=(0,i.useContext)(Le.Z),K=E.notice,W=E.lang;return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(I.Z,{children:[(0,e.jsx)(un.Z,{label:"\u91CD\u542F\u7B56\u7565"}),(0,e.jsxs)(J.UW,{children:[(0,e.jsx)(De.Z,{fieldProps:{onChange:function(D){D&&K.warning(W("app.create.privilegedNotice"))}},name:"privileged",label:"\u8D4B\u4E88\u5BB9\u5668Root\u6743\u9650",initialValue:!1}),(0,e.jsx)(De.Z,{name:"autoRemove",label:"\u505C\u6B62\u540E\u81EA\u52A8\u5220\u9664",initialValue:!1}),(0,e.jsx)(De.Z,{fieldProps:{onChange:function(D){D&&K.warning(W("app.create.hostPidNotice"))}},name:"hostPid",label:"\u5173\u8054\u5BBF\u4E3B\u673APid",initialValue:!1})]}),(0,e.jsx)(we,{label:"\u5DE5\u4F5C\u76EE\u5F55",tooltip:"\u9ED8\u8BA4\u4F7F\u7528\u955C\u50CF\u4E2D\u6307\u5B9A\u7684\u5DE5\u4F5C\u76EE\u5F55",name:"workDir"}),(0,e.jsx)(we,{label:"User",tooltip:"\u5728\u5BB9\u5668\u4E2D\u8FD0\u884C\u547D\u4EE4\u7684\u7528\u6237",name:"user"}),(0,e.jsx)(we,{label:"Command",tooltip:"\u542F\u52A8\u5BB9\u5668\u65F6\u8FD0\u884C\u7684\u547D\u4EE4\uFF0C\u4EE5\u7A7A\u683C\u5206\u9694",name:"command"}),(0,e.jsx)(we,{label:"Entrypoint",tooltip:"\u65E0\u6CD5\u8986\u76D6\u955C\u50CF\u4E2D\u5DF2\u7ECF\u6307\u5B9A\u7684 Entrypoint \u547D\u4EE4",name:"entrypoint"})]})})}var ln=n(91845),He=n(62597),$e=n(82346),dn=n(4798),cn=(0,i.forwardRef)(function(E,K){var W=(0,i.useState)(""),V=b()(W,2),D=V[0],Z=V[1],g=(0,i.useRef)(),M=(0,i.useContext)(r.Z),H=M.createFormRef;return(0,i.useImperativeHandle)(K,function(){return{setExposePort:function(j){if(j){var v,w,F=(v=(w=g.current)===null||w===void 0?void 0:w.getList())!==null&&v!==void 0?v:[];Object.keys(j).map(function(O){var h=!1;if(F.map(function(ne){ne.dest==O&&(h=!0)}),!h){var R;(R=g.current)===null||R===void 0||R.add({host:"",dest:O})}})}},setHostname:function(j){Z(j)},addPortItem:function(j,v){var w,F=(w=g.current)===null||w===void 0?void 0:w.getList(),O=!1;if(F==null||F.map(function(R){if(R.host==j){O=!0;return}}),!O){var h;(h=g.current)===null||h===void 0||h.add({host:String(j),dest:String(v)})}}}}),(0,e.jsx)(I.Z,{title:"\u7ED1\u5B9A\u7AEF\u53E3",tooltip:"\u8BBF\u95EE\u7AEF\u53E3\u7559\u7A7A\u65F6\u968F\u673A\u751F\u6210\u7AEF\u53E3\uFF0C\u5168\u90E8\u5220\u9664\u5219\u8868\u793A\u4E0D\u66B4\u9732\u7AEF\u53E3",headerBordered:!0,extra:(0,e.jsxs)(A.Z,{children:[E.showBindHost&&(0,e.jsx)(De.Z,{name:"useHostNetwork",fieldProps:{checkedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",unCheckedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",onChange:function(j){if(j){var v;(v=H.current)===null||v===void 0||v.setFieldsValue({bindIpV6:!1,publishAllPorts:!1})}}}}),E.showBindIpV6&&(0,e.jsx)(C.Z,{name:["siteName","useHostNetwork"],children:function(j){var v=j.useHostNetwork;return(0,e.jsx)(De.Z,{name:"publishAllPorts",fieldProps:{checkedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3",unCheckedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3"},disabled:v},"publishAllPorts")}}),E.showBindIpV6&&(0,e.jsx)(C.Z,{name:["siteName","useHostNetwork"],children:function(j){var v=j.useHostNetwork;return(0,e.jsx)(De.Z,{name:"bindIpV6",fieldProps:{checkedChildren:"IpV6",unCheckedChildren:"IpV6"},disabled:v},"bindIpV6")}})]}),children:(0,e.jsx)(C.Z,{name:["useHostNetwork","bindIpV6","publishAllPorts"],children:function(j){var v=j.useHostNetwork,w=j.bindIpV6,F=j.publishAllPorts;if(!v&&!F)return(0,e.jsx)(he.u,{name:"ports",actionRef:g,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BF9\u5916\u90E8\u8BBF\u95EE"},min:0,copyIconProps:!1,children:(0,e.jsxs)(J.UW,{children:[(0,e.jsx)(c.Z,{width:E.showInDrawer?"sm":"md",name:"host",label:"\u5916\u90E8\u8BBF\u95EE\u7AEF\u53E3",tooltip:"\u5BF9\u5916\u8BBF\u95EE\u53EF\u4EE5\u901A\u8FC7\u6DFB\u52A0\u8BBF\u95EE\u7AEF\u53E3\u6216\u662F\u521B\u5EFA\u5B8C\u6210\u540E\u5BF9\u5BB9\u5668\u7ED1\u5B9A\u57DF\u540D",placeholder:"\u7559\u7A7A\u5C06\u4F7F\u7528\u968F\u673A\u7AEF\u53E3\uFF0C\u7ED1\u5B9AIpV6\u5FC5\u586B",required:w,rules:[{required:w}]}),(0,e.jsx)(c.Z,{label:"\u5BB9\u5668\u5185\u7AEF\u53E3",width:E.showInDrawer?"sm":"md",name:"dest",placeholder:"\u6784\u5EFA\u65F6 Expose \u6307\u5B9A\u7684\u7AEF\u53E3",required:!0,rules:[{required:!0}]})]})})}})})}),mn=cn,xe=n(52255);function fn(){var E=(0,i.useRef)(),K=function(D){var Z,g,M=!1,H=(Z=(g=E.current)===null||g===void 0?void 0:g.getList())!==null&&Z!==void 0?Z:[];if(H.map(function(j){j.name==D.name&&(M=!0)}),!M){var S;(S=E.current)===null||S===void 0||S.add(D)}},W=function(D){var Z,g,M=!1,H=(Z=(g=E.current)===null||g===void 0?void 0:g.getList())!==null&&Z!==void 0?Z:[];H.map(function(S,j){if(S.name==D){var v;(v=E.current)===null||v===void 0||v.remove(j)}})};return(0,e.jsx)(I.Z,{title:"\u5173\u8054\u5BBF\u4E3B\u7F51\u7EDC\u4E3B\u673A",tooltip:"\u5BB9\u5668\u5185\u5982\u679C\u9700\u8981\u8BF7\u6C42\u5BBF\u4E3B\u673A\u6240\u5728\u7684\u7F51\u7EDC\u4E2D\u7684\u4E3B\u673A\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6B64\u914D\u7F6E\u5C06Ip\u6CE8\u5165\u5230\u5BB9\u5668\u4E2D",extra:(0,e.jsx)(A.Z,{children:(0,e.jsx)(De.Z,{name:"enableBindHost",fieldProps:{checkedChildren:"\u7ED1\u5B9A\u5BBF\u4E3B\u673AIp",unCheckedChildren:"\u7ED1\u5B9A\u5BBF\u4E3B\u673AIp",onChange:function(D){D?K({name:"host.dpanel.local",value:"host-gateway"}):W("host.dpanel.local")}}})}),children:(0,e.jsx)(he.u,{name:"extraHosts",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BBF\u4E3B\u673A\u7F51\u7EDC\u5173\u8054"},actionRef:E,copyIconProps:!1,min:0,children:(0,e.jsxs)(J.UW,{children:[(0,e.jsx)(c.Z,{width:"md",name:"name",label:"Hostname",placeholder:""}),(0,e.jsx)(c.Z,{width:"md",name:"value",label:"ip",placeholder:""})]})})})}var Se=n(90672),hn=(0,i.forwardRef)(function(E,K){return(0,i.useImperativeHandle)(K,function(){return{}}),(0,e.jsxs)(I.Z,{title:"\u7F51\u7EDC\u914D\u7F6E",children:[(0,e.jsxs)(J.UW,{children:[(0,e.jsx)(c.Z,{label:"\u914D\u7F6E ipV4 \u5730\u5740",name:["ipV4","address"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u5730\u5740\uFF0C\u4F8B\u5982 192.168.1.5",placeholder:"192.168.1.5"}),(0,e.jsx)(C.Z,{name:["ipV4"],children:function(V){var D=V.ipV4;return(0,e.jsx)(c.Z,{label:"\u914D\u7F6E ipV4 \u5B50\u7F51",name:["ipV4","subnet"],width:"md",required:D&&D.address,tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u6240\u5728\u7684\u5B50\u7F51\uFF0C\u4F8B\u5982 192.168.1.0/24",placeholder:"192.168.1.0/24",rules:[{required:D&&D.address}]})}}),(0,e.jsx)(c.Z,{label:"\u914D\u7F6E ipV4 \u7F51\u5173",name:["ipV4","gateway"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u7684\u7F51\u5173\uFF0C\u4F8B\u5982 192.168.1.1",placeholder:"192.168.1.1"}),(0,e.jsx)(De.Z,{label:"\u81EA\u5B9A\u4E49ipV6",name:"enableIpV6Address"})]}),(0,e.jsx)(C.Z,{name:["enableIpV6Address"],children:function(V){var D=V.enableIpV6Address;if(D)return(0,e.jsxs)(J.UW,{children:[(0,e.jsx)(c.Z,{label:"\u914D\u7F6E ipV6 \u5730\u5740",name:["ipV6","address"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipV6\u5730\u5740\uFF0C\u4F8B\u5982 2001:db8::5",placeholder:"2001:db8::5"}),(0,e.jsx)(C.Z,{name:["ipV6"],children:function(g){var M=g.ipV6;return(0,e.jsx)(c.Z,{label:"\u914D\u7F6E ipV6 \u5B50\u7F51",name:["ipV6","subnet"],width:"md",required:M&&M.address,tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u6240\u5728\u7684\u5B50\u7F51\uFF0C\u4F8B\u5982 2001:db8::/48",placeholder:"2001:db8::/48",rules:[{required:M&&M.address}]})}}),(0,e.jsx)(c.Z,{label:"\u914D\u7F6E ipV6 \u7F51\u5173",name:["ipV6","gateway"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipV6\u7684\u7F51\u5173\uFF0C\u4F8B\u5982 2001:db8::1",placeholder:"2001:db8::1"})]})}}),(0,e.jsx)(Se.Z,{label:"DNS\u914D\u7F6E",name:"dns",placeholder:"\u8BF7\u6307\u5B9Adns\u5730\u5740\uFF0C\u4F8B\u5982\uFF1A8.8.8.8\uFF0C\u4E00\u884C\u6DFB\u4E00\u6761dns\u5730\u5740"})]})}),pn=hn,Ue=n(31199),vn=n(86250);function _n(){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(I.Z,{title:"\u9644\u52A0\u6267\u884C\u811A\u672C",headerBordered:!0,subTitle:"",children:(0,e.jsx)(Se.Z,{label:"\u5BB9\u5668\u521B\u5EFA\u540E\u6267\u884C\u811A\u672C",name:["hook","containerCreate"],placeholder:"\u5BB9\u5668\u5728\u521B\u5EFA\u540E\u6267\u884C\u7684\u811A\u672C\uFF0C\u6B64\u811A\u672C\u5E76\u4E0D\u4F1A\u5F71\u54CD entrypoint \u53CA command\u3002\u4F8B\u5982\uFF1Als -al && touch abc.txt && apt update"})}),(0,e.jsxs)(I.Z,{title:"\u5065\u5EB7\u68C0\u67E5",headerBordered:!0,children:[(0,e.jsxs)(vn.Z,{gap:20,justify:"start",children:[(0,e.jsx)(Ue.Z,{label:"\u91CD\u590D\u95F4\u9694\u65F6\u95F4\uFF08\u79D2\uFF09",name:["healthcheck","interval"],initialValue:30}),(0,e.jsx)(Ue.Z,{label:"\u8D85\u65F6\u5931\u8D25\u65F6\u95F4\uFF08\u79D2\uFF09",name:["healthcheck","timeout"],initialValue:10}),(0,e.jsx)(Ue.Z,{label:"\u5931\u8D25\u91CD\u590D\u6B21\u6570",name:["healthcheck","retries"],initialValue:3}),(0,e.jsx)(Ze.Z,{width:"sm",label:"\u811A\u672C\u6267\u884C\u73AF\u5883",initialValue:"CMD",name:["healthcheck","shellType"],valueEnum:{CMD:"\u5728 Docker \u73AF\u5883\u6267\u884C","CMD-SHELL":"\u5728\u5BB9\u5668\u5185\u6267\u884C"}})]}),(0,e.jsx)(Se.Z,{label:"\u6267\u884C\u811A\u672C",name:["healthcheck","cmd"],placeholder:"\u914D\u7F6E\u5BB9\u5668\u5065\u5EB7\u68C0\u67E5\u811A\u672C\uFF0C\u4F8B\u5982\uFF1Acurl -f http://localhost:8080/ || exit 1"})]})]})}var En=n(74763),Ge=n(2487),Cn=[{name:"ALL"},{name:"AUDIT_CONTROL"},{name:"AUDIT_WRITE",default:!0},{name:"BLOCK_SUSPEND"},{name:"CHOWN",default:!0},{name:"DAC_OVERRIDE",default:!0},{name:"DAC_READ_SEARCH"},{name:"FOWNER",default:!0},{name:"FSETID",default:!0},{name:"IPC_LOCK"},{name:"IPC_OWNER"},{name:"KILL",default:!0},{name:"LEASE"},{name:"LINUX_IMMUTABLE"},{name:"MAC_ADMIN"},{name:"MAC_OVERRIDE"},{name:"MKNOD",default:!0},{name:"NET_ADMIN"},{name:"NET_BIND_SERVICE",default:!0},{name:"NET_BROADCAST"},{name:"NET_RAW",default:!0},{name:"SETFCAP",default:!0},{name:"SETGID",default:!0},{name:"SETPCAP",default:!0},{name:"SETUID",default:!0},{name:"SYSLOG"},{name:"SYS_ADMIN"},{name:"SYS_BOOT"},{name:"SYS_CHROOT",default:!0},{name:"SYS_MODULE"},{name:"SYS_NICE"},{name:"SYS_PACCT"},{name:"SYS_PTRACE"},{name:"SYS_RAWIO"},{name:"SYS_RESOURCE"},{name:"SYS_TIME"},{name:"SYS_TTY_CONFIG"}],gn=(0,i.forwardRef)(function(E,K){var W=(0,i.useContext)(Le.Z),V=W.lang,D=(0,i.useState)(null),Z=b()(D,2),g=Z[0],M=Z[1],H=(0,i.useContext)(r.Z),S=H.createFormRef;return(0,i.useImperativeHandle)(K,function(){return{}}),(0,e.jsx)(I.Z,{children:(0,e.jsx)(Ge.Z,{grid:{gutter:10,xs:3,sm:3,md:4,lg:4,xl:4,xxl:6},dataSource:Cn,renderItem:function(v,w){var F;return(0,e.jsx)(Ge.Z.Item,{children:(0,e.jsx)(De.Z,{fieldProps:{onChange:function(h){v.name=="ALL"&&M(h)}},disabled:v.name!="ALL"&&((0,En.k)(g)?(F=S.current)===null||F===void 0?void 0:F.getFieldValue(["capAdd","ALL"]):g),initialValue:v.default,name:["capAdd",v.name],tooltip:V("app.create.cap."+v.name.toLocaleLowerCase()),label:v.name})},w)}})})}),jn=gn,Re="update",Ye="copy",We="new";function Dn(){var E,K,W,V=(0,i.useContext)(Le.Z),D=V.loading,Z=(0,i.useContext)(r.Z),g=Z.createFormRef,M=Z.volumeListRef,H=Z.domainRef,S=Z.createEnvRef,j=Z.createLinkRef,v=(0,i.useState)(We),w=b()(v,2),F=w[0],O=w[1],h=(0,$e.useSearchParams)(),R=b()(h,2),ne=R[0],ie=R[1],N=(0,$e.useNavigate)(),de=(0,i.useState)("basic"),pe=b()(de,2),se=pe[0],be=pe[1],ve=parseInt((E=ne.get("id"))!==null&&E!==void 0?E:""),Ee=(K=ne.get("containerId"))!==null&&K!==void 0?K:"",Ie=(W=ne.get("imageId"))!==null&&W!==void 0?W:"";return(0,i.useEffect)(function(){if(Ee||ve)D.show(),(0,He.iE)({md5:Ee,id:ve}).then(function(){var oe=_()(a()().mark(function l(t){var ce,Ce,$,Ae,Be,ye,Ne,ke,Ke;return a()().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:if($={info:{},layer:[]},!t.data.env.imageName){ge.next=11;break}return ge.prev=2,ge.next=5,(0,Te.YU)({md5:t.data.env.imageName});case 5:Ae=ge.sent,$=Ae.data,ge.next=11;break;case 9:ge.prev=9,ge.t0=ge.catch(2);case 11:ne.get("op")==Ye?O(Ye):O(Re),t.data.env.network&&t.data.env.network.map(function(G){return!G.alise&&G.name!="bridge"&&(G.alise=[t.data.siteName+".pod.dpanel.local"]),G}),t.data.env.ports&&t.data.env.ports.map(function(G){return G.host=="0"&&(G.host=""),G}),Be=t.data.env.bindIpV6,t.data.containerInfo.Info&&t.data.containerInfo.Info.NetworkSettings.Networks&&Object.keys(t.data.containerInfo.Info.NetworkSettings.Networks).map(function(G){t.data.env.network&&(t.data.env.network=t.data.env.network.map(function(Oe){return G==Oe.name&&(Oe.subnet=t.data.containerInfo.Info.NetworkSettings.Networks[G].IPAddress+"/"+t.data.containerInfo.Info.NetworkSettings.Networks[G].IPPrefixLen),Oe})),t.data.containerInfo.Info.NetworkSettings.Networks[G].IPv6Gateway!=""&&(Be=!0)}),t.data.env.extraHosts&&t.data.env.extraHosts.map(function(G){if(G.value=="host-gateway"){var Oe;(Oe=g.current)===null||Oe===void 0||Oe.setFieldValue("enableBindHost",!0)}}),ye=t.data.env.ports,t.data.env.ports&&(ye=t.data.env.ports.map(function(G){return G.host=(G.hostIp?G.hostIp+":":"")+G.host,G})),(ce=g.current)===null||ce===void 0||ce.setFieldsValue({imageName:t.data.env.imageName,privileged:t.data.env.privileged,bindIpV6:t.data.env.useHostNetwork?!1:Be,useHostNetwork:t.data.env.useHostNetwork,publishAllPorts:t.data.env.useHostNetwork?!1:t.data.env.publishAllPorts,workDir:{value:t.data.env.workDir,useDefault:!t.data.env.workDir,default:$&&$.info.Config&&$.info.Config.WorkingDir},user:{value:t.data.env.user,useDefault:!t.data.env.user,default:$&&$.info.Config&&$.info.Config.User},command:{value:t.data.env.command,useDefault:!t.data.env.command,default:$&&$.info.Config&&$.info.Config.Cmd&&$.info.Config.Cmd.join(" ")},entrypoint:{value:t.data.env.entrypoint,useDefault:!t.data.env.entrypoint,default:$&&$.info.Config&&$.info.Config.Entrypoint&&$.info.Config.Entrypoint.join(" ")},shmsize:(Ce=t.data.env.shmsize)!==null&&Ce!==void 0?Ce:"64M",cpus:t.data.env.cpus,memory:t.data.env.memory,environment:t.data.env.environment,label:t.data.env.label,volumes:t.data.env.volumes,ports:ye,links:t.data.env.links,network:t.data.env.network,restart:t.data.env.restart,extraHosts:t.data.env.extraHosts,autoRemove:t.data.env.autoRemove,log:t.data.env.log,dns:t.data.env.dns&&t.data.env.dns.join(`
`),ipV4:t.data.env.ipV4,ipV6:t.data.env.ipV6,gpus:t.data.env.gpus,device:t.data.env.device,hook:t.data.env.hook,hostPid:t.data.env.hostPid,capAdd:t.data.env.capAdd&&Object.fromEntries(t.data.env.capAdd.map(function(G){return[G,!0]}))}),t.data.env.ipV6&&((Ne=g.current)===null||Ne===void 0||Ne.setFieldValue("enableIpV6Address",!0)),t.data.env.healthcheck&&t.data.env.healthcheck.cmd&&t.data.env.healthcheck.cmd!=""&&((ke=g.current)===null||ke===void 0||ke.setFieldsValue({healthcheck:t.data.env.healthcheck})),ne.get("op")==Re&&((Ke=g.current)===null||Ke===void 0||Ke.setFieldsValue({siteTitle:t.data.siteTitle,siteName:t.data.siteName}));case 23:case"end":return ge.stop()}},l,null,[[2,9]])}));return function(l){return oe.apply(this,arguments)}}()).finally(function(){D.destroy()});else{var fe;O(We),(fe=g.current)===null||fe===void 0||fe.resetFields()}},[ne]),(0,e.jsx)(x._z,{children:(0,e.jsx)(I.Z,{direction:"column",gutter:[0,10],children:(0,e.jsxs)(p.A,{submitter:{render:function(oe,l){return(0,e.jsx)(ae.S,{children:l})}},formRef:g,onFinish:function(){var fe=_()(a()().mark(function oe(l){var t,ce,Ce,$;return a()().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return $={siteTitle:l.siteTitle,siteName:l.siteName,imageName:l.imageName,environment:l.environment,links:l.links,ports:l.ports,volumes:l.volumes,network:l.network,privileged:(t=l.privileged)!==null&&t!==void 0?t:!1,autoRemove:(ce=l.autoRemove)!==null&&ce!==void 0?ce:!1,restart:l.restart,cpus:l.cpus,memory:l.memory,shmsize:(Ce=l.shmsize)!==null&&Ce!==void 0?Ce:0,workDir:l.workDir&&!l.workDir.useDefault?l.workDir.value:"",user:l.user&&!l.user.useDefault?l.user.value:"",command:l.command&&!l.command.useDefault?l.command.value:"",entrypoint:l.entrypoint&&!l.entrypoint.useDefault?l.entrypoint.value:"",useHostNetwork:l.useHostNetwork,bindIpV6:l.bindIpV6,log:l.log,dns:l.dns&&l.dns!=""?l.dns.split(`
`):[],label:l.label,publishAllPorts:l.publishAllPorts,extraHosts:l.extraHosts,ipV4:l.ipV4,ipV6:l.ipV6,device:l.device,gpus:l.gpus,hook:l.hook,hostPid:l.hostPid,capAdd:l.capAdd?Object.keys(l.capAdd).map(function(ye){return ye}):[]},l.healthcheck&&l.healthcheck.cmd&&l.healthcheck.cmd!=""&&($.healthcheck=l.healthcheck),Ee&&F==Re&&($.containerId=Ee),Be.next=5,(0,He.$G)($);case 5:return N("/app/list"),Be.abrupt("return",!0);case 7:case"end":return Be.stop()}},oe)}));return function(oe){return fe.apply(this,arguments)}}(),children:[(0,e.jsxs)(I.Z,{title:"\u57FA\u7840\u4FE1\u606F",headerBordered:!0,children:[(0,e.jsx)(c.Z,{name:"siteTitle",label:"\u5BB9\u5668\u63CF\u8FF0",fieldProps:{onChange:function(oe){var l="";if(oe.target.value&&F!=Re){var t,ce=(0,ln.N9)(oe.target.value.trim(),{toneType:"none",type:"array"});l=ce.join(""),(t=g.current)===null||t===void 0||t.setFieldValue("siteName",l)}}},placeholder:"\u8BF7\u8F93\u5165\u5BB9\u5668\u63CF\u8FF0\u540D\u79F0"}),(0,e.jsx)(c.Z,{name:"siteName",label:"\u5BB9\u5668\u6807\u8BC6",tooltip:"\u5BB9\u5668\u552F\u4E00\u6807\u8BC6\uFF0C\u7528\u4E8E\u6807\u8BC6\u5BB9\u5668\u548C\u5185\u90E8\u8BBF\u95EE",required:!0,disabled:F==Re,rules:[{required:!0}],placeholder:"\u8BF7\u8F93\u5165\u5BB9\u5668\u6807\u8BC6\u540D\u79F0"}),(0,e.jsx)(B,{redeploy:F!=We,fromImageId:Ie})]}),(0,e.jsx)(k.Z,{offsetTop:50,children:(0,e.jsx)(I.Z,{style:{marginBottom:-20},children:(0,e.jsx)(o.Z,{activeKey:se,onChange:function(oe){be(oe),window.scrollTo(0,450)},items:[{label:"\u57FA\u672C\u914D\u7F6E",key:"basic"},{label:"\u5173\u8054\u914D\u7F6E",key:"link"},{label:"\u8FD0\u884C\u914D\u7F6E",key:"run-command"},{label:"\u8D44\u6E90\u914D\u7F6E",key:"resource"},{label:"Hook",key:"hook"},{label:"\u80FD\u529B\u914D\u7F6E",key:"cap"},{label:"\u5176\u5B83",key:"other"}]})})}),(0,e.jsxs)(xe.Z,{show:se=="basic",children:[(0,e.jsx)(mn,{ref:H,showBindHost:!0,showBindIpV6:!0}),(0,e.jsx)(qe.Z,{showAddButton:!0,showImportButton:!0,showCodeMode:!0,label:"\u73AF\u5883\u53D8\u91CF",ref:S}),(0,e.jsx)(C.Z,{name:["siteName","useHostNetwork"],children:function(oe){var l=oe.siteName,t=oe.useHostNetwork;if(!t)return(0,e.jsx)(pn,{})}})]}),(0,e.jsx)(xe.Z,{show:se=="link",children:(0,e.jsx)(C.Z,{name:["siteName","useHostNetwork"],children:function(oe){var l=oe.siteName,t=oe.useHostNetwork;return t?(0,e.jsx)(U.Z,{showIcon:!0,description:"\u7ED1\u5B9A\u5230\u5BBF\u4E3B\u673A\u7F51\u7EDC\u65F6\uFF0C\u65E0\u6CD5\u901A\u8FC7 Docker \u5173\u8054\u5176\u5B83\u5BB9\u5668\u3002\u8BF7\u4F7F\u7528\u5BBF\u4E3B\u673A\u5185\u7F51IP\u6216\u662F127.0.0.1\u4E92\u8054\u5BB9\u5668\u66B4\u9732\u7AEF\u53E3\u3002"}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Qe,{onAddEnv:function(Ce,$){var Ae;(Ae=S.current)===null||Ae===void 0||Ae.addEnvItem(Ce,$)},ref:j}),(0,e.jsx)(dn.Z,{siteName:l}),(0,e.jsx)(fn,{})]})}})}),(0,e.jsx)(xe.Z,{show:se=="run-command",children:(0,e.jsx)(on,{})}),(0,e.jsx)(xe.Z,{show:se=="resource",children:(0,e.jsx)(tn,{})}),(0,e.jsx)(xe.Z,{show:se=="hook",children:(0,e.jsx)(_n,{})}),(0,e.jsx)(xe.Z,{show:se=="other",children:(0,e.jsx)(an,{})}),(0,e.jsx)(xe.Z,{show:se=="cap",children:(0,e.jsx)(jn,{})})]},"form")})})}},2831:function(je,Y,n){n.d(Y,{Ll:function(){return I},aF:function(){return b},d6:function(){return ae}});var Q=n(15009),a=n.n(Q),te=n(99289),_=n.n(te),P=n(82346);function b(){return x.apply(this,arguments)}function x(){return x=_()(a()().mark(function C(){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,P.request)("/api/common/home/info",{method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},C)})),x.apply(this,arguments)}function I(){return p.apply(this,arguments)}function p(){return p=_()(a()().mark(function C(){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,P.request)("/api/common/home/usage",{method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},C)})),p.apply(this,arguments)}function ae(){return c.apply(this,arguments)}function c(){return c=_()(a()().mark(function C(){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,P.request)("/api/common/home/upgrade-script",{method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},C)})),c.apply(this,arguments)}},14946:function(je,Y,n){n.d(Y,{CI:function(){return ae},HY:function(){return z},IS:function(){return b},XY:function(){return o},_3:function(){return L},_x:function(){return C},jR:function(){return I},t9:function(){return i}});var Q=n(15009),a=n.n(Q),te=n(99289),_=n.n(te),P=n(82346);function b(d){return x.apply(this,arguments)}function x(){return x=_()(a()().mark(function d(s){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,P.request)("/api/app/network/get-detail",{method:"POST",data:s}));case 1:case"end":return u.stop()}},d)})),x.apply(this,arguments)}function I(d){return p.apply(this,arguments)}function p(){return p=_()(a()().mark(function d(s){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,P.request)("/api/app/network/get-list",{method:"POST",data:s}));case 1:case"end":return u.stop()}},d)})),p.apply(this,arguments)}function ae(){return c.apply(this,arguments)}function c(){return c=_()(a()().mark(function d(){return a()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,P.request)("/api/app/network/prune",{method:"POST"});case 2:return m.abrupt("return",m.sent);case 3:case"end":return m.stop()}},d)})),c.apply(this,arguments)}function C(d){return k.apply(this,arguments)}function k(){return k=_()(a()().mark(function d(s){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,P.request)("/api/app/network/delete",{method:"POST",data:s});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},d)})),k.apply(this,arguments)}function o(d){return U.apply(this,arguments)}function U(){return U=_()(a()().mark(function d(s){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,P.request)("/api/app/network/create",{method:"POST",data:s});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},d)})),U.apply(this,arguments)}function i(d){return r.apply(this,arguments)}function r(){return r=_()(a()().mark(function d(s){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,P.request)("/api/app/network/disconnect",{method:"POST",data:s});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},d)})),r.apply(this,arguments)}function z(d){return y.apply(this,arguments)}function y(){return y=_()(a()().mark(function d(s){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,P.request)("/api/app/network/connect",{method:"POST",data:s});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},d)})),y.apply(this,arguments)}function L(d){return A.apply(this,arguments)}function A(){return A=_()(a()().mark(function d(s){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,P.request)("/api/app/network/get-container-list",{method:"POST",data:s}));case 1:case"end":return u.stop()}},d)})),A.apply(this,arguments)}},60335:function(je,Y,n){n.d(Y,{IE:function(){return I},IW:function(){return b},KK:function(){return o},LJ:function(){return i},RF:function(){return L},Re:function(){return z},aF:function(){return d},eE:function(){return C},jV:function(){return ae}});var Q=n(15009),a=n.n(Q),te=n(99289),_=n.n(te),P=n(82346);function b(m){return x.apply(this,arguments)}function x(){return x=_()(a()().mark(function m(u){return a()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,P.request)("/api/app/container/status",{method:"POST",data:u}));case 1:case"end":return f.stop()}},m)})),x.apply(this,arguments)}function I(m){return p.apply(this,arguments)}function p(){return p=_()(a()().mark(function m(u){return a()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,P.request)("/api/app/container/get-list",{data:u,method:"POST"}));case 1:case"end":return f.stop()}},m)})),p.apply(this,arguments)}function ae(m){return c.apply(this,arguments)}function c(){return c=_()(a()().mark(function m(u){return a()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,P.request)("/api/app/container/get-detail",{data:u,method:"POST"}));case 1:case"end":return f.stop()}},m)})),c.apply(this,arguments)}function C(m){return k.apply(this,arguments)}function k(){return k=_()(a()().mark(function m(u){return a()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,P.request)("/api/app/container/update",{data:u,method:"POST"}));case 1:case"end":return f.stop()}},m)})),k.apply(this,arguments)}function o(){return U.apply(this,arguments)}function U(){return U=_()(a()().mark(function m(){return a()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.abrupt("return",(0,P.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return X.stop()}},m)})),U.apply(this,arguments)}function i(m){return r.apply(this,arguments)}function r(){return r=_()(a()().mark(function m(u){return a()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,P.request)("/api/app/container/export",{method:"POST",data:u,responseType:"blob"}));case 1:case"end":return f.stop()}},m)})),r.apply(this,arguments)}function z(m){return y.apply(this,arguments)}function y(){return y=_()(a()().mark(function m(u){return a()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,P.request)("/api/app/container/commit",{method:"POST",data:u}));case 1:case"end":return f.stop()}},m)})),y.apply(this,arguments)}function L(m){return A.apply(this,arguments)}function A(){return A=_()(a()().mark(function m(u){return a()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,P.request)("/api/app/container/upgrade",{method:"POST",data:u}));case 1:case"end":return f.stop()}},m)})),A.apply(this,arguments)}function d(m){return s.apply(this,arguments)}function s(){return s=_()(a()().mark(function m(u){return a()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,P.request)("/api/app/container/copy",{method:"POST",data:u}));case 1:case"end":return f.stop()}},m)})),s.apply(this,arguments)}}}]);
