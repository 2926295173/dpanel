"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9170],{37767:function(en,S,n){n.d(S,{Z:function(){return an}});var K=n(15009),r=n.n(K),F=n(99289),D=n.n(F),_=n(5574),y=n.n(_),l=n(45605),M=n(38345),h=n(97269),O=n(26412),W=n(42075),o=n(96074),T=n(25593),a=n(2487),P=n(67294),u=n(76428),U=n(78498),i=n(44771),d=n(60335),b=n(24963),$=n(37413),E=n(5251),j=n(82346),G=n(87662),c=n(85893);function an(s){var J,nn,on,Y,sn,cn,vn,ln,mn,e,gn=(0,P.useState)(""),_n=y()(gn,2),Dn=_n[0],fn=_n[1],jn=(0,j.useAccess)(),dn=(0,P.useContext)(b.Z),En=dn.message,Pn=dn.notice,Fn=dn.loading,Cn=dn.lang,f=(0,P.useRef)(),X=[],un=[],w=[],z=(0,P.useState)(""),L=y()(z,2),N=L[0],tn=L[1];return(0,P.useEffect)(function(){if(s.data){var B;(B=f.current)===null||B===void 0||B.setFieldValue("restart",s.data.info.HostConfig.RestartPolicy.Name),(0,G.K3)().then(function(Z){var C;tn((C=Z.data.serverUrl)!==null&&C!==void 0?C:"")}),fn(s.data.info.Name)}},[s.data]),s.data&&s.data.domain&&s.data.domain.map(function(B){w.push(B.setting.enableSSL?"https://"+B.serverName:"http://"+B.serverName)}),s.data&&s.data.info.NetworkSettings&&s.data.info.NetworkSettings.Ports&&Object.keys(s.data.info.NetworkSettings.Ports).map(function(B){var Z,C,V=(Z=(C=s.data.info)===null||C===void 0?void 0:C.NetworkSettings.Ports[B])!==null&&Z!==void 0?Z:[{HostPort:null,HostIp:""}],Q=B.split("/"),rn=y()(Q,2),H=rn[0],p=rn[1];V.map(function(q){q.HostPort?X.push({PrivatePort:H,Type:p,IP:q.HostIp,PublicPort:q.HostPort}):un.push({PrivatePort:H,Type:p,IP:"",PublicPort:""})})}),(0,c.jsxs)(c.Fragment,{children:[s.data&&s.data.info.State.Running&&(0,c.jsx)($.Z,{publicPort:X,privatePort:un,domain:w,serverIp:N,showInDetail:!0,ghost:s.ghost,layout:"inline"}),(0,c.jsx)(M.Z,{title:(0,c.jsx)(l.Z,{}),subTitle:"\u5BB9\u5668\u72B6\u6001",ghost:s.ghost,children:(0,c.jsxs)(O.Z,{column:1,bordered:!0,children:[(0,c.jsx)(O.Z.Item,{label:"Hostname",children:(0,c.jsx)(W.Z,{split:(0,c.jsx)(o.Z,{type:"vertical"}),children:(0,c.jsx)(u.Z,{title:(J=s.data.info)===null||J===void 0?void 0:J.Config.Hostname})})}),(0,c.jsx)(O.Z.Item,{label:"\u5BB9\u5668\u540D\u79F0",children:(0,c.jsxs)(W.Z,{split:(0,c.jsx)(o.Z,{type:"vertical"}),children:[(0,c.jsx)(u.Z,{title:(nn=s.data.info)===null||nn===void 0?void 0:nn.Id.substring(0,12)}),(0,c.jsx)(T.Z.Text,{copyable:!0,editable:{tooltip:"\u4FEE\u6539\u5BB9\u5668\u540D\u79F0",onChange:function(){var B=D()(r()().mark(function C(V){var Q,rn;return r()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if((Q=s.data.info)!==null&&Q!==void 0&&Q.Id){p.next=2;break}return p.abrupt("return");case 2:return p.next=4,(0,d.eE)({md5:s.data.info.Id,name:V});case 4:rn=p.sent,fn(V),En.success(Cn("notification.finish"));case 7:case"end":return p.stop()}},C)}));function Z(C){return B.apply(this,arguments)}return Z}()},children:(0,E.fi)(Dn,"/")})]})}),(0,c.jsx)(O.Z.Item,{label:(0,c.jsx)(U.Z,{title:"\u7F51\u7EDC",help:"\u9ED8\u8BA4\u7F51\u7EDC\u53EA\u652F\u6301\u901A\u8FC7ip\u8BBF\u95EE,ip\u4F1A\u968F\u7740\u5BB9\u5668\u542F\u52A8\u505C\u6B62\u6539\u53D8.\u5982\u679C\u9700\u8981\u5728\u5BB9\u5668\u5185\u4E92\u8054,\u8BF7\u901A\u8FC7\u3010\u7F16\u8F91\u7AD9\u70B9\u3011-\u3010\u6DFB\u52A0\u5173\u8054\u3011"}),children:((on=s.data.info)===null||on===void 0?void 0:on.State.Running)&&(0,c.jsxs)(O.Z,{column:1,bordered:!0,children:[s.data.info.NetworkSettings.Networks&&Object.keys(s.data.info.NetworkSettings.Networks).map(function(B,Z){var C,V,Q;return(0,c.jsx)(O.Z.Item,{label:B,children:B=="host"?" Host \u7F51\u7EDC\uFF0C\u4E0E\u5BBF\u4E3B\u673A\u5171\u7528\u540C\u4E00\u7F51\u7EDC":(0,c.jsxs)(W.Z,{direction:"vertical",children:[(0,c.jsx)(u.Z,{title:(C=s.data.info)===null||C===void 0?void 0:C.NetworkSettings.Networks[B].IPAddress}),(V=s.data.info)===null||V===void 0?void 0:V.NetworkSettings.Networks[B].Gateway,(Q=s.data.info)===null||Q===void 0?void 0:Q.NetworkSettings.Networks[B].MacAddress]})},Z)}),s.data.info.HostConfig.ExtraHosts&&(0,c.jsx)(O.Z.Item,{label:"\u5BBF\u4E3B\u673A\u7F51\u7EDC",children:(0,c.jsx)(W.Z,{direction:"vertical",children:s.data.info.HostConfig.ExtraHosts.map(function(B,Z){if(B.indexOf(":")>-1){var C=B.split(":");return"".concat(C[0]," - ").concat(C.slice(1).join(":"))}})})},"host")]})}),(0,c.jsxs)(O.Z.Item,{label:"\u8FD0\u884C\u65F6\u95F4",children:["\u521B\u5EFA\u4E8E: ",new Date((Y=(sn=s.data.info)===null||sn===void 0?void 0:sn.Created)!==null&&Y!==void 0?Y:"").toLocaleString()," / \u66F4\u65B0\u4E8E: ",new Date((cn=(vn=s.data.info)===null||vn===void 0?void 0:vn.State.StartedAt)!==null&&cn!==void 0?cn:"").toLocaleString()]}),jn.canSeeContainerListManage&&(0,c.jsx)(O.Z.Item,{label:"\u91CD\u542F\u7B56\u7565",children:(0,c.jsx)(h.A,{name:"container-restart",submitter:!1,onValuesChange:function(){var B=D()(r()().mark(function Z(C){var V,Q;return r()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if((V=s.data.info)!==null&&V!==void 0&&V.Id){H.next=2;break}return H.abrupt("return");case 2:return H.next=4,(0,d.eE)({md5:s.data.info.Id,restart:C.restart});case 4:return Q=H.sent,En.success("\u4FEE\u6539\u91CD\u542F\u7B56\u7565\u6210\u529F"),H.abrupt("return");case 7:case"end":return H.stop()}},Z)}));return function(Z){return B.apply(this,arguments)}}(),layout:"inline",formRef:f,children:(0,c.jsx)(i.Z,{defaultValue:(ln=s.data.info)===null||ln===void 0?void 0:ln.HostConfig.RestartPolicy.Name})})}),(0,c.jsx)(O.Z.Item,{label:"\u73AF\u5883\u53D8\u91CF",children:(0,c.jsx)(a.Z,{dataSource:(mn=(e=s.data.info)===null||e===void 0?void 0:e.Config.Env)!==null&&mn!==void 0?mn:[],renderItem:function(Z){var C=Z.split("=");return(0,c.jsxs)(a.Z.Item,{children:[(0,c.jsx)(T.Z.Text,{code:!0,children:C[0]})," = ",(0,c.jsx)(T.Z.Text,{copyable:!0,children:C.slice(1).join("=")})]})}})})]})})]})}},14245:function(en,S,n){n.d(S,{Z:function(){return y}});var K=n(60433),r=n(38345),F=n(26412),D=n(25593),_=n(85893);function y(l){return(0,_.jsx)(r.Z,{ghost:l.ghost,title:(0,_.jsx)(K.Z,{}),subTitle:"\u955C\u50CF\u8BE6\u60C5",children:(0,_.jsxs)(F.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,_.jsx)(F.Z.Item,{label:"Image Tag",children:(0,_.jsx)(D.Z.Text,{copyable:!0,children:l.data.Config.Image})}),(0,_.jsx)(F.Z.Item,{label:"Image",children:l.data.Image}),(0,_.jsx)(F.Z.Item,{label:"CMD",children:l.data.Config.Cmd&&l.data.Config.Cmd.join(" ")}),(0,_.jsx)(F.Z.Item,{label:"ENTRYPOINT",children:l.data.Config.Entrypoint}),(0,_.jsx)(F.Z.Item,{label:"Labels",children:(0,_.jsx)(F.Z,{column:1,bordered:!0,children:l.data&&Object.keys(l.data.Config.Labels).map(function(M){return(0,_.jsx)(F.Z.Item,{label:M,children:l.data.Config.Labels[M]},M)})})})]})})}},72409:function(en,S,n){n.d(S,{Z:function(){return Cn}});var K=n(15009),r=n.n(K),F=n(99289),D=n.n(F),_=n(5574),y=n.n(_),l=n(67294),M=n(80821),h=n(62597),O=n(60335),W=n(43425),o=n(58638),T=n(60219),a=n(86548),P=n(57132),u=n(87784),U=n(25035),i=n(38345),d=n(97269),b=n(62370),$=n(5966),E=n(52688),j=n(82346),G=n(42075),c=n(65233),an=n(96074),s=n(28036),J=n(25593),nn=n(85418),on=n(40411),Y=n(84567),sn=n(83062),cn=n(93162),vn=n(24739),ln=n(97462),mn=n(70146),e=n(85893);function gn(f){var X=(0,l.useRef)(),un=(0,j.useAccess)();return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(M.Z,{icon:(0,e.jsx)(T.Z,{}),action:D()(r()().mark(function w(){var z,L,N,tn;return r()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,mn.yB)({id:f.container.Name,enableImage:(z=X.current)===null||z===void 0?void 0:z.getFieldValue("enableImage"),volume:Object.keys((L=(N=X.current)===null||N===void 0?void 0:N.getFieldValue("volume"))!==null&&L!==void 0?L:{}).filter(function(C){return C}),enableCommitImage:(tn=X.current)===null||tn===void 0?void 0:tn.getFieldValue("enableCommitImage")});case 2:case"end":return Z.stop()}},w)})),confirmOnOpenChange:function(z){var L,N;!((L=X.current)===null||L===void 0)&&L.resetFields&&((N=X.current)===null||N===void 0||N.resetFields())},confirm:(0,e.jsxs)(G.Z,{style:{width:650,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,e.jsx)(J.Z.Text,{children:(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:"\u5FEB\u7167\u529F\u80FD\u4F1A\u5C06\u3010\u5FEB\u7167\u6570\u636E\u3011\u4FDD\u5B58\u81F3 /dpanel/backup \u76EE\u5F55\u3002"}),(0,e.jsx)("li",{children:"\u5FEB\u7167\u540C\u65F6\u5907\u4EFD\u5BB9\u5668\u955C\u50CF\u5728\u6062\u590D\u540E\u65E0\u6CD5\u68C0\u6D4B\u66F4\u65B0\uFF0C\u5426\u5219\u6062\u590D\u65F6\u4F1A\u5148\u5C1D\u8BD5\u62C9\u53D6\u955C\u50CF"}),(0,e.jsx)("li",{children:"\u6062\u590D\u5FEB\u7167\u65F6\uFF0C\u5982\u679C\u76EE\u6807\u5BB9\u5668\u5DF2\u5B58\u5728\u5219\u53EA\u6062\u590D\u5BB9\u5668\u6570\u636E\u3002"}),(0,e.jsxs)("li",{children:["\u8BE5\u64CD\u4F5C\u53EF\u80FD\u4F1A\u6D88\u8017\u8F83\u957F\u65F6\u95F4\uFF0C\u8BF7\u5728 ",(0,e.jsx)(j.Link,{to:"/app/backup",children:"\u5BB9\u5668\u5FEB\u7167"})," \u67E5\u770B\u5FEB\u7167\u7ED3\u679C\u3002"]})]})}),(0,e.jsxs)(d.A,{layout:"horizontal",formRef:X,submitter:!1,children:[(0,e.jsxs)(vn.UW,{children:[(0,e.jsx)(b.Z,{valuePropName:"checked",name:"enableSelectVolume",children:(0,e.jsx)(Y.Z,{disabled:!f.container.Mounts||f.container.Mounts.length==0,children:"\u9009\u62E9\u5907\u4EFD\u76EE\u5F55\uFF1F"})}),(0,e.jsx)(b.Z,{valuePropName:"checked",name:"enableImage",children:(0,e.jsx)(Y.Z,{children:"\u5907\u4EFD\u5BB9\u5668\u955C\u50CF\uFF1F"})}),(0,e.jsx)(ln.Z,{name:["enableImage"],children:function(z){var L=z.enableImage;if(L)return(0,e.jsx)(b.Z,{valuePropName:"checked",name:"enableCommitImage",children:(0,e.jsx)(Y.Z,{children:"\u4FDD\u5B58\u5F53\u524D\u5BB9\u5668\u4E3A\u65B0\u955C\u50CF (docker commit)\uFF1F"})})}})]}),(0,e.jsx)(ln.Z,{name:["enableSelectVolume"],children:function(z){var L=z.enableSelectVolume;return L&&(0,e.jsx)(G.Z,{wrap:!0,children:f.container.Mounts.map(function(N,tn){return(0,e.jsx)(b.Z,{valuePropName:"checked",name:["volume",N.Destination],children:(0,e.jsx)(Y.Z,{children:N.Destination})},"volume-".concat(tn))})})}})]})]}),children:"\u5BB9\u5668\u5FEB\u7167"})})}var _n=n(24963),Dn=n(99861),fn=n(3393),jn=n(50888),dn=n(16596),En=n(1699),Pn=n(5251),Fn=(0,l.forwardRef)(function(f,X){var un;(0,l.useImperativeHandle)(X,function(){return{}});var w=(0,l.useRef)(),z=(0,l.useRef)(),L=(0,l.useRef)(),N=(0,l.useContext)(_n.Z),tn=N.message,B=N.notice,Z=N.loading,C=N.lang,V=(0,l.useRef)(),Q=(0,l.useRef)(),rn=(0,l.useState)(0),H=y()(rn,2),p=H[0],q=H[1],Bn=function(){var R=D()(r()().mark(function v(t){var g,m,I;return r()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(m=-2,!t.ignore){x.next=6;break}if(!(t.ignore.indexOf("".concat(t.info.Name,"@*"))>-1)){x.next=4;break}return x.abrupt("return",-2);case 4:if(!(t.ignore.indexOf("".concat(t.info.Name,"@").concat(t.info.Image))>-1)){x.next=6;break}return x.abrupt("return",-2);case 6:return x.next=8,(0,fn.ZQ)({tag:(g=t.info.Config.Image)!==null&&g!==void 0?g:"",md5:t.info.Image,cacheTime:3600}).catch(function(k){m=-1});case 8:return I=x.sent,I&&(I.data.digestLocal&&I.data.digestLocal.length>0?m=I.data.upgrade?1:2:m=-2),x.abrupt("return",m);case 11:case"end":return x.stop()}},v)}));return function(t){return R.apply(this,arguments)}}();return(0,l.useEffect)(function(){f.checkContainerUpgrade&&(q(0),Bn(f.data).then(function(R){q(R)}))},[f.data]),(0,e.jsx)(i.Z,{ghost:f.ghost,title:(0,e.jsx)(W.Z,{}),subTitle:"\u5BB9\u5668\u7BA1\u7406",children:(0,e.jsxs)(G.Z,{wrap:!0,children:[(0,e.jsx)(M.Z,{icon:(0,e.jsx)(o.Z,{}),action:function(){var v,t;return(0,O.LJ)({md5:(v=(t=f.data)===null||t===void 0?void 0:t.info.Id)!==null&&v!==void 0?v:""})},confirm:"\u5BFC\u51FA\u5BB9\u5668\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u4E0D\u5305\u542B\u6302\u8F7D\u76EE\u5F55\u7684\u6570\u636E\uFF0C\u786E\u5B9A\u5417\uFF1F",onSuccess:function(v){var t,g=new Blob([v],{type:"application/tar"});(0,cn.saveAs)(g,(0,Pn.fi)((t=f.data)===null||t===void 0?void 0:t.info.Name,"/")+".tar")},children:"\u5BFC\u51FA\u5BB9\u5668"}),(0,e.jsx)(M.Z,{icon:(0,e.jsx)(T.Z,{}),action:D()(r()().mark(function R(){var v,t,g,m,I;return r()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,O.Re)({md5:(v=(t=f.data)===null||t===void 0?void 0:t.info.Id)!==null&&v!==void 0?v:"",name:(g=(m=z.current)===null||m===void 0?void 0:m.getFieldValue("saveImageName"))!==null&&g!==void 0?g:(I=f.data)===null||I===void 0?void 0:I.info.Name});case 2:case"end":return x.stop()}},R)})),confirmTitle:"\u5C06\u5F53\u524D\u5BB9\u5668\u4FDD\u5B58\u4E3A\u955C\u50CF",confirm:(0,e.jsx)(G.Z,{style:{width:400,marginTop:"10px",paddingRight:"10px"},direction:"vertical",children:(0,e.jsx)(d.A,{formRef:z,submitter:!1,children:(0,e.jsx)(b.Z,{name:"saveImageName",children:(0,e.jsx)(c.Z,{addonBefore:"\u955C\u50CF\u540D\u79F0"})})})}),children:"\u53E6\u5B58\u4E3A\u955C\u50CF"}),f.data&&(0,e.jsx)(En.u,{access:"canSeeContainerBackup",children:(0,e.jsx)(gn,{container:f.data.info})}),(0,e.jsx)(an.Z,{type:"vertical"}),(0,e.jsx)(j.Link,{to:"/app/create/image?id=".concat((un=f.data)===null||un===void 0?void 0:un.info.Id,"&op=update"),children:(0,e.jsx)(s.ZP,{type:"primary",icon:(0,e.jsx)(a.Z,{}),children:"\u7F16\u8F91\u5BB9\u5668"})}),(0,e.jsx)(M.Z,{icon:(0,e.jsx)(P.Z,{}),action:D()(r()().mark(function R(){var v,t,g,m,I,A;return r()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,O.aF)({md5:(v=(t=f.data)===null||t===void 0?void 0:t.info.Id)!==null&&v!==void 0?v:"",copyName:(g=(m=L.current)===null||m===void 0?void 0:m.getFieldValue("copyName"))!==null&&g!==void 0?g:"",enableRandomPort:(I=(A=L.current)===null||A===void 0?void 0:A.getFieldValue("enableRandomPort"))!==null&&I!==void 0?I:!1});case 2:return k.abrupt("return",k.sent);case 3:case"end":return k.stop()}},R)})),confirm:(0,e.jsxs)(G.Z,{style:{width:400,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(J.Z.Text,{children:"\u9ED8\u8BA4\u60C5\u51B5\u4E0B, \u590D\u5236\u7684\u76EE\u6807\u5BB9\u5668\u4E0E\u5F53\u524D\u5BB9\u5668\u5177\u6709\u76F8\u540C\u7684\u914D\u7F6E\u65E0\u6CD5\u542F\u52A8\u3002 \u5982\u679C\u4F60\u5E0C\u671B\u76EE\u6807\u5BB9\u5668\u6B63\u5E38\u8FD0\u884C\uFF0C\u8BF7\u5F00\u542F\u3010\u7ED1\u5B9A\u968F\u673A\u7AEF\u53E3\u3011"}),(0,e.jsxs)(d.A,{formRef:L,submitter:!1,layout:"horizontal",children:[(0,e.jsx)("br",{}),(0,e.jsx)($.Z,{label:"\u590D\u5236\u5BB9\u5668\u540D\u79F0",name:"copyName"}),(0,e.jsx)(E.Z,{label:"\u7ED1\u5B9A\u968F\u673A\u7AEF\u53E3",name:"enableRandomPort"})]})]}),onSuccess:function(v){var t;(t=L.current)===null||t===void 0||t.resetFields()},children:"\u590D\u5236\u5BB9\u5668"}),f.data&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Dn.Z,{image:[f.data.info.Config.Image],ref:V}),(0,e.jsx)(nn.Z,{placement:"bottomLeft",menu:{items:[{key:"1",label:(0,e.jsx)(M.Z,{action:D()(r()().mark(function R(){var v,t,g,m,I,A;return r()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,h.ze)({md5:(v=(t=f.data.info)===null||t===void 0?void 0:t.Name)!==null&&v!==void 0?v:"",imageId:""});case 2:return q(0),k.next=5,(0,fn.ZQ)({tag:(g=(m=f.data.info)===null||m===void 0?void 0:m.Config.Image)!==null&&g!==void 0?g:"",md5:(I=(A=f.data.info)===null||A===void 0?void 0:A.Image)!==null&&I!==void 0?I:"",cacheTime:0}).then(function(hn){hn.data.digestLocal&&hn.data.digestLocal.length>0?q(hn.data.upgrade?1:2):q(-2)}).catch(function(hn){q(-1)});case 5:return k.abrupt("return",k.sent);case 6:case"end":return k.stop()}},R)})),type:"link",children:"\u81EA\u52A8\u68C0\u6D4B"})},{key:"2",label:(0,e.jsx)(M.Z,{action:D()(r()().mark(function R(){var v,t,g,m;return r()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,h.ze)({md5:(v=(t=f.data.info)===null||t===void 0?void 0:t.Name)!==null&&v!==void 0?v:"",imageId:(g=(m=f.data.info)===null||m===void 0?void 0:m.Image)!==null&&g!==void 0?g:""});case 2:return A.abrupt("return",A.sent);case 3:case"end":return A.stop()}},R)})),type:"link",children:"\u5FFD\u7565\u672C\u6B21"})},{key:"3",label:(0,e.jsx)(M.Z,{action:D()(r()().mark(function R(){var v,t;return r()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,h.ze)({md5:(v=(t=f.data.info)===null||t===void 0?void 0:t.Name)!==null&&v!==void 0?v:"",imageId:"*"});case 2:return m.abrupt("return",m.sent);case 3:case"end":return m.stop()}},R)})),type:"link",children:"\u6C38\u4E45\u5FFD\u7565"})}]},children:(0,e.jsx)(on.Z,{count:C("app.detail.checkImageUpgrade."+p),color:C("app.detail.checkImageUpgradeColor."+p),children:(0,e.jsx)(M.Z,{disabled:p===0,icon:p===0?(0,e.jsx)(jn.Z,{}):(0,e.jsx)(dn.Z,{}),action:D()(r()().mark(function R(){var v,t,g,m,I;return r()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(v=V.current)===null||v===void 0?void 0:v.start();case 2:return Z.show(),(t=V.current)===null||t===void 0||t.finish(),x.next=6,(0,O.RF)({md5:(g=f.data.info.Id)!==null&&g!==void 0?g:"",imageTag:"",enableBak:(m=(I=Q.current)===null||I===void 0?void 0:I.getFieldValue("enableBak"))!==null&&m!==void 0?m:!1});case 6:return x.abrupt("return",x.sent);case 7:case"end":return x.stop()}},R)})),confirm:(0,e.jsxs)(G.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(J.Z.Text,{children:C("app.detail.upgradeConfirm")}),(0,e.jsx)(d.A,{formRef:Q,submitter:!1,layout:"inline",children:(0,e.jsx)(b.Z,{name:"enableBak",valuePropName:"checked",children:(0,e.jsx)(Y.Z,{children:"\u5907\u4EFD\u65E7\u5BB9\u5668\uFF1F"})})})]}),onSuccess:function(v){Z.destroy(),f.checkContainerUpgrade&&f.checkContainerUpgrade()},children:"\u5FEB\u901F\u5347\u7EA7\u5BB9\u5668"})})})]}),(0,e.jsx)(an.Z,{type:"vertical"}),f.data&&(0,e.jsx)(M.Z,{action:function(){var v,t,g,m,I,A;return(0,h.Ct)({md5:(v=(t=f.data)===null||t===void 0?void 0:t.info.Id)!==null&&v!==void 0?v:"",deleteImage:(g=(m=w.current)===null||m===void 0?void 0:m.getFieldValue("deleteImage"))!==null&&g!==void 0?g:!1,deleteVolume:(I=(A=w.current)===null||A===void 0?void 0:A.getFieldValue("deleteVolume"))!==null&&I!==void 0?I:!1})},danger:!0,type:"primary",icon:(0,e.jsx)(u.Z,{}),onSuccess:function(){Z.destroy(),f.checkContainerUpgrade&&f.checkContainerUpgrade()},confirm:(0,e.jsxs)(G.Z,{style:{width:200},direction:"vertical",children:[(0,e.jsx)(J.Z.Text,{children:C("notification.confirm.title")}),(0,e.jsxs)(d.A,{formRef:w,layout:"inline",submitter:!1,children:[(0,e.jsx)(b.Z,{addonAfter:(0,e.jsx)(sn.Z,{title:"\u672A\u6302\u8F7D\u955C\u50CF\u5185\u58F0\u660E\u7684\u76EE\u5F55\u5E76\u7531 docker \u81EA\u52A8\u521B\u5EFA\u7684\u5B58\u50A8\u5377",children:(0,e.jsx)(U.Z,{})}),name:"deleteVolume",valuePropName:"checked",children:(0,e.jsx)(Y.Z,{children:"\u5220\u9664\u533F\u540D\u5B58\u50A8\u5377\uFF1F"})}),(0,e.jsx)(b.Z,{name:"deleteImage",valuePropName:"checked",children:(0,e.jsx)(Y.Z,{children:"\u5220\u9664\u955C\u50CF\uFF1F"})})]})]}),children:"\u5220\u9664"})]})})}),Cn=Fn},14189:function(en,S,n){var K=n(43425),r=n(74842),F=n(87784),D=n(33160),_=n(30159),y=n(89035),l=n(38345),M=n(42075),h=n(96074),O=n(28036),W=n(67294),o=n(94359),T=n(80821),a=n(60335),P=n(57716),u=n(85893),U=(0,W.forwardRef)(function(i,d){(0,W.useImperativeHandle)(d,function(){return{}});var b=(0,W.useRef)();return(0,u.jsx)(l.Z,{title:(0,u.jsx)(K.Z,{}),ghost:i.ghost,subTitle:(0,u.jsxs)(M.Z,{children:["\u72B6\u6001\u7BA1\u7406 - ",i.data&&(0,u.jsx)(o.Z,{status:i.data.State.Status,message:{content:i.data.State.Status,placement:"top"}})]}),children:(0,u.jsxs)(M.Z,{wrap:!0,children:[(0,u.jsx)(T.Z,{icon:(0,u.jsx)(r.Z,{}),action:function(){var E,j;return(0,a.IW)({md5:(E=(j=i.data)===null||j===void 0?void 0:j.Id)!==null&&E!==void 0?E:"",operate:"start"})},onSuccess:function(){return i.onFinish&&i.onFinish()},disabled:i.data&&i.data.State.Running||i.data&&i.data.State.Paused,children:"\u542F\u52A8"}),(0,u.jsx)(T.Z,{action:function(){var E,j;return(0,a.IW)({md5:(E=(j=i.data)===null||j===void 0?void 0:j.Id)!==null&&E!==void 0?E:"",operate:"stop"})},icon:(0,u.jsx)(F.Z,{}),onSuccess:function(){return i.onFinish&&i.onFinish()},disabled:i.data&&i.data.State.Dead,children:"\u505C\u6B62"}),(0,u.jsx)(T.Z,{action:function(){var E,j;return(0,a.IW)({md5:(E=(j=i.data)===null||j===void 0?void 0:j.Id)!==null&&E!==void 0?E:"",operate:"restart"})},onSuccess:function(){return i.onFinish&&i.onFinish()},icon:(0,u.jsx)(D.Z,{}),children:"\u91CD\u542F"}),(0,u.jsx)(T.Z,{action:function(){var E,j;return(0,a.IW)({md5:(E=(j=i.data)===null||j===void 0?void 0:j.Id)!==null&&E!==void 0?E:"",operate:"pause"})},onSuccess:function(){return i.onFinish&&i.onFinish()},icon:(0,u.jsx)(_.Z,{}),disabled:i.data&&i.data&&!i.data.State.Running,children:"\u6682\u505C"}),(0,u.jsx)(T.Z,{action:function(){var E,j;return(0,a.IW)({md5:(E=(j=i.data)===null||j===void 0?void 0:j.Id)!==null&&E!==void 0?E:"",operate:"unpause"})},onSuccess:function(){return i.onFinish&&i.onFinish()},icon:(0,u.jsx)(r.Z,{}),disabled:i.data&&!i.data.State.Paused,children:"\u6062\u590D"}),(0,u.jsx)(h.Z,{type:"vertical"}),i.data&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(P.Z,{ref:b}),(0,u.jsx)(O.ZP,{type:"dashed",onClick:function(){var E;i.data&&((E=b.current)===null||E===void 0||E.show(i.data.Id))},icon:(0,u.jsx)(y.Z,{}),children:"Console"})]}),(0,u.jsx)(h.Z,{type:"vertical"}),i.extra&&i.extra.map(function($,E){return(0,u.jsx)("span",{children:$},E)})]})})});S.Z=U},52031:function(en,S,n){n.d(S,{Z:function(){return M}});var K=n(31574),r=n(95591),F=n(38345),D=n(26412),_=n(78451),y=n(82346),l=n(85893);function M(h){var O,W=(0,y.useAccess)();return h.data&&h.data.Mounts&&h.data.Mounts.length>0&&(0,l.jsx)(F.Z,{ghost:h.ghost,title:(0,l.jsx)(K.Z,{}),subTitle:"\u6302\u8F7D\u76EE\u5F55\u8BE6\u60C5",children:(0,l.jsx)(D.Z,{column:1,bordered:!0,children:(O=h.data)===null||O===void 0?void 0:O.Mounts.map(function(o,T){var a;return(0,l.jsx)(D.Z.Item,{labelStyle:{width:"30%"},label:o.Type=="volume"?(0,l.jsx)(_.Z,{content:o.Name}):o.Source,children:W.canSeeContainerListManage?(0,l.jsxs)(y.Link,{target:"_blank",to:"/app/detail/file/".concat((a=h.data)===null||a===void 0?void 0:a.Id,"?tab=file&path=").concat(encodeURIComponent(o.Destination)),children:[o.Destination," ",(0,l.jsx)(r.Z,{})]}):o.Destination},T)})})})}},94359:function(en,S,n){n.d(S,{Z:function(){return T}});var K=n(3089),r=n(98165),F=n(18429),D=n(8751),_=n(14313),y=n(30159),l=n(87740),M=n(50888),h=n(66309),O=n(83062),W=n(82346),o=n(85893);function T(a){var P=(0,o.jsx)(o.Fragment,{});if(a.status=="0"&&(P=(0,o.jsx)(h.Z,{icon:(0,o.jsx)(K.Z,{}),color:"default",children:"waiting"})),a.status=="10"&&(P=(0,o.jsx)(h.Z,{icon:(0,o.jsx)(r.Z,{spin:!0}),color:"processing",children:"processing"})),a.status=="20"&&(P=(0,o.jsx)(h.Z,{icon:(0,o.jsx)(F.Z,{}),color:"error",children:"error"})),a.status=="30"&&(P=(0,o.jsx)(h.Z,{icon:(0,o.jsx)(D.Z,{}),color:"success",children:"success"})),a.status=="running"||a.status=="healthy"){var u,U;P=(0,o.jsx)(h.Z,{icon:(0,o.jsx)(_.Z,{}),color:"success",children:(u=a.message)!==null&&u!==void 0&&u.showInTag?(U=a.message)===null||U===void 0?void 0:U.content:a.status})}if(a.status=="paused"){var i,d;P=(0,o.jsx)(h.Z,{icon:(0,o.jsx)(y.Z,{}),children:(i=a.message)!==null&&i!==void 0&&i.showInTag?(d=a.message)===null||d===void 0?void 0:d.content:a.status})}if(a.status=="waiting"||a.status=="starting"){var b,$;P=(0,o.jsx)(h.Z,{icon:(0,o.jsx)(l.Z,{}),children:(b=a.message)!==null&&b!==void 0&&b.showInTag?($=a.message)===null||$===void 0?void 0:$.content:a.status})}if(a.status=="deploying"){var E,j;P=(0,o.jsx)(h.Z,{icon:(0,o.jsx)(M.Z,{}),color:"processing",children:(E=a.message)!==null&&E!==void 0&&E.showInTag?(j=a.message)===null||j===void 0?void 0:j.content:a.status})}if(a.status=="error"){var G,c;P=(0,o.jsx)(h.Z,{icon:(0,o.jsx)(F.Z,{}),color:"error",children:(G=a.message)!==null&&G!==void 0&&G.showInTag?(c=a.message)===null||c===void 0?void 0:c.content:a.status})}if(a.status=="exited"||a.status=="dead"||a.status=="removing"||a.status=="restarting"||a.status=="unhealthy"||a.status=="created"){var an,s;P=(0,o.jsx)(h.Z,{icon:(0,o.jsx)(F.Z,{}),color:"warning",children:(an=a.message)!==null&&an!==void 0&&an.showInTag?(s=a.message)===null||s===void 0?void 0:s.content:a.status})}if(a.link)return(0,o.jsx)(W.Link,{to:a.link,children:P});if(a.message){var J,nn;return(0,o.jsx)(O.Z,{placement:(J=a.message.placement)!==null&&J!==void 0?J:"top",title:(nn=a.message.title)!==null&&nn!==void 0?nn:a.message.content,children:P})}return P}},76428:function(en,S,n){n.d(S,{Z:function(){return D}});var K=n(25593),r=n(67294),F=n(85893);function D(_){return(0,F.jsx)(K.Z.Text,{copyable:!0,children:_.title})}},78498:function(en,S,n){n.d(S,{Z:function(){return y}});var K=n(25035),r=n(42075),F=n(83062),D=n(67294),_=n(85893);function y(l){return(0,_.jsxs)(r.Z,{children:[l.title,(0,_.jsx)(F.Z,{title:l.help,children:(0,_.jsx)(K.Z,{})})]})}},70146:function(en,S,n){n.d(S,{SR:function(){return o},VE:function(){return O},Zy:function(){return M},iD:function(){return a},yB:function(){return y}});var K=n(15009),r=n.n(K),F=n(99289),D=n.n(F),_=n(82346);function y(u){return l.apply(this,arguments)}function l(){return l=D()(r()().mark(function u(U){return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,_.request)("/api/app/container-backup/create",{data:U,method:"POST"});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},u)})),l.apply(this,arguments)}function M(u){return h.apply(this,arguments)}function h(){return h=D()(r()().mark(function u(U){return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,_.request)("/api/app/container-backup/get-list",{method:"POST",data:U}));case 1:case"end":return d.stop()}},u)})),h.apply(this,arguments)}function O(u){return W.apply(this,arguments)}function W(){return W=D()(r()().mark(function u(U){return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,_.request)("/api/app/container-backup/delete",{method:"POST",data:U}));case 1:case"end":return d.stop()}},u)})),W.apply(this,arguments)}function o(u){return T.apply(this,arguments)}function T(){return T=D()(r()().mark(function u(U){return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,_.request)("/api/app/container-backup/restore",{method:"POST",data:U}));case 1:case"end":return d.stop()}},u)})),T.apply(this,arguments)}function a(u){return P.apply(this,arguments)}function P(){return P=D()(r()().mark(function u(U){return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,_.request)("/api/app/container-backup/get-detail",{method:"POST",data:U}));case 1:case"end":return d.stop()}},u)})),P.apply(this,arguments)}}}]);
