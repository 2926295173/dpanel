"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6357],{8287:function(De,ne,e){var te=e(5574),i=e.n(te),re=e(15009),t=e.n(re),H=e(99289),d=e.n(H),l=e(13822),E=e(25593),W=e(83062),f=e(85265),S=e(42075),B=e(67294),P=e(81146),c=e(45742),T=e(58638),q=e(62597),o=e(3616),M=e(82346),se=e(36146),fe=e(5251),K=e(85893),pe=(0,B.forwardRef)(function(ge,z){var m;(0,B.useImperativeHandle)(z,function(){return{show:function(j){return d()(t()().mark(function p(){var N;return t()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,l.jV)({md5:j});case 2:N=y.sent,N.data&&J(N.data.info),ve(!0);case 5:case"end":return y.stop()}},p)}))()}}});var Oe=(0,B.useState)(!1),G=i()(Oe,2),a=G[0],ve=G[1],w=(0,B.useState)(),Pe=i()(w,2),r=Pe[0],J=Pe[1],ee=(0,B.useRef)(),_e=new se.Uo("components.appDetail.appDetailQuickLog");return(0,K.jsxs)(K.Fragment,{children:[ge.showTriggerButton&&(0,K.jsx)(E.Z.Link,{onClick:d()(t()().mark(function X(){return t()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:J(ge.containerInfo),ve(!0);case 2:case"end":return p.stop()}},X)})),children:(0,K.jsx)(W.Z,{title:_e.format("drawerTriggerButtonTip"),children:(0,K.jsx)(c.Z,{})})},"log"),(0,K.jsx)(f.Z,{title:_e.format("drawerTitle",{name:(0,fe.fi)((m=r==null?void 0:r.Name)!==null&&m!==void 0?m:"","/")}),open:a,forceRender:!0,onClose:function(){ve(!1)},afterOpenChange:function(j){if(j)setTimeout(function(){var N,$;(N=ee.current)===null||N===void 0||N.start(),($=ee.current)===null||$===void 0||$.fit()},1e3);else{var p;(p=ee.current)===null||p===void 0||p.close()}},width:o.FK,extra:(0,K.jsx)(S.Z,{children:(0,K.jsx)(M.Link,{to:"/container/log/".concat(r==null?void 0:r.Name),target:"_blank",onClick:function(){var j;(j=ee.current)===null||j===void 0||j.close(),ve(!1)},children:(0,K.jsx)(W.Z,{title:_e.format("openNewWindowButtonTip"),children:(0,K.jsx)(T.Z,{})})})}),children:r&&a&&(0,K.jsx)(P.Z,{ref:ee,showInDrawer:!0,id:"container:log:".concat(r==null?void 0:r.Id),request:function(){var X=d()(t()().mark(function j(p){var N;return t()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,q.Tb)({id:(N=r.Id)!==null&&N!==void 0?N:"",lineTotal:p.lineTotal,download:p.download,showTime:p.showTime});case 2:case"end":return y.stop()}},j)}));return function(j){return X.apply(this,arguments)}}(),download:function(){var X=d()(t()().mark(function j(p){var N,$,y,k;return t()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,q.XH)({id:(N=r.Id)!==null&&N!==void 0?N:"",lineTotal:p.lineTotal,showTime:p.showTime});case 2:return y=Z.sent,Z.next=5,(0,l.jV)({md5:($=r.Id)!==null&&$!==void 0?$:""});case 5:return k=Z.sent,Z.abrupt("return",{data:new Blob([y],{type:"text/plain"}),name:k.data.info.Name.replaceAll("/","")+"_"+new Date().toLocaleDateString()+".log"});case 7:case"end":return Z.stop()}},j)}));return function(j){return X.apply(this,arguments)}}()})})]})});ne.Z=pe},46357:function(De,ne,e){e.d(ne,{Z:function(){return O}});var te=e(5574),i=e.n(te),re=e(15009),t=e.n(re),H=e(99289),d=e.n(H),l=e(67294),E=e(37767),W=e(13822),f=e(82346),S=e(95591),B=e(60433),P=e(85265),c=e(96074),T=e(25593),q=e(86250),o=e(26412),M=e(52031),se=e(14189),fe=e(72409),K=e(93362),pe=e(184),ge=e(43831),z=e(5251),m=e(52209),Oe=e(3616),G=e(36146),a=e(85893),ve=(0,l.forwardRef)(function(h,I){(0,l.useImperativeHandle)(I,function(){return{}});var s=(0,l.useState)(!1),A=i()(s,2),Q=A[0],he=A[1],de=new G.Uo("components.appDetail.appDetailQuickNetwork");return(0,a.jsx)(pe.a,{submitter:!1,title:de.format("drawerTitle",{name:(0,z.fi)(h.containerInfo.Name,"/")}),onOpenChange:function(U){he(U)},drawerProps:{width:Oe.R_},open:Q,trigger:(0,a.jsx)(T.Z.Link,{children:(0,a.jsx)(m.Z,{})},"file"),children:(0,a.jsx)(ge.Z,{ghost:!0,containerInfo:h.containerInfo})})}),w=ve,Pe=e(8287),r=e(65913),J=e(14245),ee=e(1699),_e=e(40666),X=e(64789),j=e(38345),p=e(42075),N=e(66309),$=e(90127),y=e(29453);function k(h){var I=(0,l.useState)(0),s=i()(I,2),A=s[0],Q=s[1],he=(0,l.useState)(),de=i()(he,2),n=de[0],U=de[1],Ce=new G.Uo("components.appDetail.appDetailQuickTag");return(0,l.useEffect)(function(){U([]),(0,y.e1)().then(function(le){U(le.data.list)})},[A,h.data.info.Name]),(0,a.jsx)(j.Z,{ghost:!0,title:(0,a.jsx)(_e.Z,{}),subTitle:Ce.format("cardTitle"),extra:(0,a.jsx)($.Z,{trigger:(0,a.jsx)(T.Z.Link,{children:(0,a.jsx)(X.Z,{})}),containerDetail:h.data,onFinish:function(){Q(A+1)}}),children:(0,a.jsx)(p.Z,{wrap:!0,children:n&&(n==null?void 0:n.filter(function(le){return le.item&&le.item.find(function(je){return je.name==h.data.info.Name})}).map(function(le,je){return(0,a.jsx)(N.Z,{color:le.tagColor,closable:!0,style:{height:35,display:"flex",borderRadius:20,justifyContent:"center",alignItems:"center"},onClose:d()(t()().mark(function ce(){return t()().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,(0,y.rn)({name:h.data.info.Name,tag:le.tag});case 2:Q(A+1);case 3:case"end":return Ee.stop()}},ce)})),children:(0,a.jsx)("span",{style:{paddingLeft:10,paddingRight:3},children:le.tag})},je)}))})})}var v=e(19632),Z=e.n(v),x=e(12122),R=e(83062),L=e(60940),_=e(27619),Me=e(84410),D=e(24963),C={total:0,memory:{usage:[{name:"use",data:[]},{name:"all",show:!1,data:[]}],source:{usage:0,limit:0}},cpu:{usage:[{name:"use",data:[]}],source:{usage:0,limit:0}},network:{usage:[{name:"rx",data:[]},{name:"tx",data:[]}],source:{usageIn:0,usageOut:0}},io:{usage:[{name:"read",data:[]},{name:"write",data:[]}],source:{usageRead:0,usageWrite:0}}},u=function(I,s){switch(s.type){case"clear":return C;case"update":var A=new Date(s.payload.read).toLocaleTimeString(),Q=JSON.parse(JSON.stringify(I));if(s.payload.memory_stats&&s.payload.memory_stats.limit&&s.payload.memory_stats.usage&&(Q.memory.usage=[{name:"use",data:[].concat(Z()(I.memory.usage[0].data.slice(-20)),[{date:A,value:Math.round(s.payload.memory_stats.usage)}])},{name:"all",show:!1,data:[].concat(Z()(I.memory.usage[1].data.slice(-20)),[{date:A,value:Math.round(s.payload.memory_stats.limit)}])}],Q.memory.source={usage:s.payload.memory_stats.usage,limit:s.payload.memory_stats.limit}),s.payload&&s.payload.cpu_stats){var he=s.payload.cpu_stats.cpu_usage.total_usage-s.payload.precpu_stats.cpu_usage.total_usage,de=s.payload.cpu_stats.system_cpu_usage-s.payload.precpu_stats.system_cpu_usage;Q.cpu.usage=[{name:"use",data:[].concat(Z()(I.cpu.usage[0].data.slice(-20)),[{date:A,value:(he/de*s.payload.cpu_stats.online_cpus*100).toFixed(2)}])}],Q.cpu.source={usage:he/de*s.payload.cpu_stats.online_cpus*100,limit:de*s.payload.cpu_stats.online_cpus*100}}return s.payload.networks&&(Q.network.source={usageIn:parseFloat(s.payload.networks.eth0.rx_bytes.toFixed(2)),usageOut:parseFloat(s.payload.networks.eth0.tx_bytes.toFixed(2))},Q.network.usage=[{name:"rx",data:[].concat(Z()(I.network.usage[0].data.slice(-20)),[{date:A,value:parseFloat(s.payload.networks.eth0.rx_bytes.toFixed(2))}])},{name:"tx",data:[].concat(Z()(I.network.usage[1].data.slice(-20)),[{date:A,value:parseFloat(s.payload.networks.eth0.tx_bytes.toFixed(2))}])}]),s.payload.blkio_stats&&s.payload.blkio_stats.io_service_bytes_recursive&&s.payload.blkio_stats.io_service_bytes_recursive.length>0&&(Q.io.source={usageRead:s.payload.blkio_stats.io_service_bytes_recursive[0].value,usageWrite:s.payload.blkio_stats.io_service_bytes_recursive[1].value},Q.io.usage=[{name:"read",data:[].concat(Z()(I.io.usage[0].data.slice(-20)),[{date:A,value:parseFloat(s.payload.blkio_stats.io_service_bytes_recursive[0].value.toFixed(2))}])},{name:"write",data:[].concat(Z()(I.io.usage[1].data.slice(-20)),[{date:A,value:parseFloat(s.payload.blkio_stats.io_service_bytes_recursive[1].value.toFixed(2))}])}]),Q}},Y=(0,l.forwardRef)(function(h,I){var s=(0,l.useState)(!1),A=i()(s,2),Q=A[0],he=A[1],de=(0,l.useReducer)(u,C),n=i()(de,2),U=n[0],Ce=n[1],le=(0,l.useState)(),je=i()(le,2),ce=je[0],Le=je[1],Ee=(0,l.useContext)(D.Z),xe=Ee.loading,Te=(0,f.useModel)("subscriber"),ie=new G.Uo("components.appDetail.appDetailQuickStat");(0,l.useImperativeHandle)(I,function(){return{}});function ye(b){return ae.apply(this,arguments)}function ae(){return ae=d()(t()().mark(function b(g){var oe,ue;return t()().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return xe.show(),(0,Me.i)({id:g}),Re.next=4,(0,Me.a)({id:g});case 4:oe=Re.sent,ue={columns:[],data:[]},oe.data.list.Titles.map(function(me){ue.columns.push({title:me,label:me,dataIndex:me})}),oe.data.list.Processes.map(function(me,Ue){ue.data.push({UID:me[0],PID:me[1],PPID:me[2],C:me[3],STIME:me[4],TTY:me[5],TIME:me[6],CMD:me[7]})}),Le(ue),xe.destroy();case 10:case"end":return Re.stop()}},b)})),ae.apply(this,arguments)}return(0,l.useEffect)(function(){return function(){Te.progress.close("container:stat:"+h.containerInfo.Id),Ce({type:"clear",payload:{}})}},[h.containerInfo]),(0,a.jsxs)(a.Fragment,{children:[h.showTriggerButton&&(0,a.jsx)(T.Z.Link,{onClick:d()(t()().mark(function b(){return t()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:he(!0);case 1:case"end":return oe.stop()}},b)})),children:(0,a.jsx)(R.Z,{title:ie.format("drawerTriggerButtonTip"),children:(0,a.jsx)(x.Z,{})})},"log"),(0,a.jsxs)(P.Z,{title:ie.format("drawerTitle"),open:Q,onClose:function(){he(!1)},afterOpenChange:function(g){g?setTimeout(function(){var oe;!((oe=h.containerInfo)===null||oe===void 0)&&oe.Name&&ye(h.containerInfo.Id),Te.addDataHandler("container:stat:".concat(h.containerInfo.Id),function(ue){var Ie=JSON.parse(ue.data);Ce({type:"update",payload:Ie})})},500):(Te.progress.close("container:stat:"+h.containerInfo.Id),Ce({type:"clear",payload:{}}))},width:Oe.R_,children:[(0,a.jsxs)(j.Z,{ghost:!0,direction:"row",wrap:!0,gutter:[20,20],children:[U.memory&&U.memory.source&&(0,a.jsx)(j.Z,{colSpan:12,title:(0,a.jsx)(x.Z,{}),subTitle:"Memory usage: ".concat((0,z.FI)(U.memory.source.usage)," / ").concat((0,z.FI)(U.memory.source.limit)),headerBordered:!0,bordered:!0,children:(0,a.jsx)(_.Z,{name:"container-memory",data:U.memory.usage,yLabelFormatter:function(g){return(0,z.FI)(parseFloat(g))},yValueFormatter:function(g){return(0,z.FI)(parseFloat(g))},yDomainMaxCallback:function(g){return g.min*2}})}),(0,a.jsx)(j.Z,{colSpan:12,title:(0,a.jsx)(x.Z,{}),subTitle:"Cpu usage: ".concat(U.cpu.source.usage.toFixed(2),"%"),headerBordered:!0,bordered:!0,children:(0,a.jsx)(_.Z,{name:"container-cpu",data:U.cpu.usage,yDomainMaxCallback:function(g){return g.min*100},yLabelFormatter:function(g){return"".concat(parseFloat(g).toFixed(2),"%")}})}),U.io&&U.io.source&&(0,a.jsx)(j.Z,{colSpan:12,title:(0,a.jsx)(x.Z,{}),subTitle:"I/O: ".concat((0,z.FI)(U.io.source.usageRead)," / ").concat((0,z.FI)(U.io.source.usageWrite)),headerBordered:!0,bordered:!0,children:(0,a.jsx)(_.Z,{name:"container-disk",data:U.io.usage,yDomainMaxCallback:function(g){return g.max*2},yLabelFormatter:function(g){return(0,z.FI)(parseFloat(g))}})}),U.network&&U.network.source&&(0,a.jsx)(j.Z,{colSpan:12,title:(0,a.jsx)(x.Z,{}),subTitle:"Network: ".concat((0,z.FI)(U.network.source.usageIn)," / ").concat((0,z.FI)(U.network.source.usageOut)),headerBordered:!0,bordered:!0,children:(0,a.jsx)(_.Z,{name:"container-network",data:U.network.usage,yDomainMaxCallback:function(g){return g.max*2},yLabelFormatter:function(g){return(0,z.FI)(parseFloat(g))}})})]}),(0,a.jsx)(j.Z,{title:(0,a.jsx)(B.Z,{}),subTitle:"Progress",children:(0,a.jsx)(L.Z,{scroll:{x:"max-content"},rowKey:"PID",columns:ce==null?void 0:ce.columns,dataSource:ce==null?void 0:ce.data,pagination:{pageSize:10}})})]})]})}),V=Y,F=(0,l.forwardRef)(function(h,I){var s;(0,l.useImperativeHandle)(I,function(){return{show:function(ye){return d()(t()().mark(function ae(){return t()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return ce(!0),g.next=3,xe(ye);case 3:case"end":return g.stop()}},ae)}))()}}});var A=(0,f.useAccess)(),Q=(0,l.useRef)(),he=(0,l.useState)(),de=i()(he,2),n=de[0],U=de[1],Ce=(0,l.useState)(!1),le=i()(Ce,2),je=le[0],ce=le[1],Le=(0,l.useRef)(),Ee=new G.Uo("components.appDetail.appDetailQuick");function xe(ie){return Te.apply(this,arguments)}function Te(){return Te=d()(t()().mark(function ie(ye){var ae,b;return t()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return(ae=Q.current)===null||ae===void 0||ae.show(),oe.next=3,(0,W.jV)({md5:ye}).finally(function(){var ue;(ue=Q.current)===null||ue===void 0||ue.destroy()});case 3:b=oe.sent,b.data&&(b.data.info.HostConfig.NetworkMode=="host"&&b.data.info.Config.ExposedPorts&&Object.keys(b.data.info.Config.ExposedPorts).map(function(ue){b.data.info.NetworkSettings.Ports[ue]=[{HostIp:"0.0.0.0",HostPort:ue.substring(0,ue.indexOf("/"))}]}),U(b.data));case 5:case"end":return oe.stop()}},ie)})),Te.apply(this,arguments)}return(0,a.jsx)(P.Z,{title:Ee.format("drawerTitle",{name:(0,z.fi)((s=n==null?void 0:n.info.Name)!==null&&s!==void 0?s:"","/")}),open:je,onClose:function(){ce(!1),h.onFinish&&h.onFinish()},width:Oe.R_,extra:(0,a.jsxs)(ee.u,{access:"canSeeContainerList",space:{split:(0,a.jsx)(c.Z,{type:"vertical"})},children:[(n==null?void 0:n.info)&&n.info.State.Running&&(0,a.jsx)(K.Z,{type:"container",name:n.info.Name,title:(0,z.fi)(n.info.Name,"/"),trigger:(0,a.jsx)(T.Z.Link,{children:(0,a.jsx)(S.Z,{})},"file")}),(n==null?void 0:n.info)&&A.canSeeContainerListManageOp&&(0,a.jsx)(w,{containerInfo:n.info}),(n==null?void 0:n.info)&&n.info.State.Running&&(0,a.jsx)(Pe.Z,{containerInfo:n.info,showTriggerButton:!0}),(n==null?void 0:n.info)&&n.info.State.Running&&(0,a.jsx)(V,{containerInfo:n.info,showTriggerButton:!0})]}),children:(0,a.jsx)(r.Z,{ref:Q,children:(0,a.jsxs)(q.Z,{vertical:!0,gap:20,children:[n&&(0,a.jsx)(ee.u,{access:"canSeeContainerList",children:(0,a.jsx)(se.Z,{ref:Le,ghost:!0,data:n==null?void 0:n.info,onFinish:d()(t()().mark(function ie(){return t()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,xe(n.info.Id);case 2:return ae.t0=ae.sent,ae.abrupt("return",[ae.t0]);case 4:case"end":return ae.stop()}},ie)}))})}),n&&(0,a.jsx)(ee.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,a.jsx)(fe.Z,{ghost:!0,data:n,checkContainerUpgrade:function(){ce(!1),h.onUpgradeFinish&&h.onUpgradeFinish()}})}),n&&(0,a.jsx)(k,{data:n}),n&&(0,a.jsx)(E.Z,{data:n,ghost:!0}),(0,a.jsx)(M.Z,{data:n==null?void 0:n.info,ghost:!0}),n&&(0,a.jsx)(J.Z,{data:n.info,ghost:!0}),(n==null?void 0:n.info.Config.Labels)&&(0,a.jsx)(j.Z,{title:(0,a.jsx)(B.Z,{}),ghost:!0,subTitle:Ee.format("labelTitle"),children:(0,a.jsx)(o.Z,{column:1,bordered:!0,children:(n==null?void 0:n.info.Config.Labels)&&Object.keys(n==null?void 0:n.info.Config.Labels).map(function(ie){return(0,a.jsx)(o.Z.Item,{label:ie,children:n==null?void 0:n.info.Config.Labels[ie]},ie)})})})]})})})}),O=F},90127:function(De,ne,e){var te=e(15009),i=e.n(te),re=e(99289),t=e.n(re),H=e(5574),d=e.n(H),l=e(5251),E=e(184),W=e(62370),f=e(5966),S=e(24739),B=e(64317),P=e(52688),c=e(97462),T=e(40056),q=e(42075),o=e(67294),M=e(1699),se=e(80821),fe=e(2808),K=e(87662),pe=e(29453),ge=e(3616),z=e(36146),m=e(85893),Oe=(0,o.forwardRef)(function(G,a){var ve;(0,o.useImperativeHandle)(a,function(){return{edit:function(C){L(!0),Me(C),w.current&&w.current.setFieldsValue({tag:[C.tag],tagColor:C.tagColor,enableShowGroup:C.enableShowGroup})}}});var w=(0,o.useRef)(),Pe=(0,o.useState)(0),r=d()(Pe,2),J=r[0],ee=r[1],_e=(0,o.useState)([]),X=d()(_e,2),j=X[0],p=X[1],N=(0,o.useState)(),$=d()(N,2),y=$[0],k=$[1],v=(ve=G.containerDetail)===null||ve===void 0?void 0:ve.info,Z=(0,o.useState)(!1),x=d()(Z,2),R=x[0],L=x[1],_=new z.Uo("components.appDetail.tagCreate");function Me(D){w.current&&w.current.setFieldsValue({title:D.title,description:D.description,url:D.url,icon:D.icon,name:D.name})}return(0,o.useEffect)(function(){k([]),(0,pe.e1)().then(function(D){k(D.data.list)})},[J]),(0,o.useEffect)(function(){v&&(0,K.K3)().then(function(D){var C=[];v.NetworkSettings&&v.NetworkSettings.Ports&&Object.keys(v.NetworkSettings.Ports).map(function(u){v.NetworkSettings.Ports[u]&&v.NetworkSettings.Ports[u].map(function(Y){Y.HostPort&&C.push("http://".concat(D.data.serverUrl,":").concat(Y.HostPort))})}),p(C)})},[G.containerDetail]),(0,m.jsxs)(E.a,{drawerProps:{forceRender:!0,width:ge.R_},open:R,onFinish:function(){var D=t()(i()().mark(function C(u){var Y,V,F,O;return i()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return F="",u.tagColor&&u.tagColor.toHexString?u.tagColor.cleared||(F=u.tagColor.toHexString()):F=u.tagColor,O=(Y=u.enableShowGroup)!==null&&Y!==void 0?Y:G.defaultEnableShowGroup,I.next=5,(0,pe.A9)({enableShowGroup:O,tag:u.tag?u.tag[0]:"",tagColor:F,name:(V=v==null?void 0:v.Name)!==null&&V!==void 0?V:u.name,title:O?u.title:"",description:O?u.description:"",url:O?u.url:"",icon:O?u.icon:""});case 5:return ee(J+1),G.onFinish&&G.onFinish({tag:u.tag,tagColor:u.tagColor,enableShowGroup:O}),I.abrupt("return",!0);case 8:case"end":return I.stop()}},C)}));return function(C){return D.apply(this,arguments)}}(),formRef:w,title:_.format("drawerTitle"),trigger:G.trigger,onOpenChange:function(C){var u;L(C),!C&&(!((u=w.current)===null||u===void 0)&&u.resetFields)&&w.current.resetFields()},children:[G.defaultEnableShowGroup&&(0,m.jsx)(W.Z,{children:(0,m.jsx)(T.Z,{message:new z.Uo("system.home.tag").format("emptyTip")})}),(0,m.jsx)(f.Z,{name:"name",hidden:!0}),(0,m.jsxs)(S.UW,{children:[(0,m.jsx)(B.Z,{width:"lg",label:_.format("formTag"),layout:"vertical",required:!0,rules:[{required:!0}],onChange:function(C){var u=y&&y.find(function(A){return C&&C.length>=1&&A.tag==C[0]});if(u){var Y,V,F,O=u.item.find(function(A){return A.name==(v==null?void 0:v.Name)});(Y=w.current)===null||Y===void 0||Y.setFieldsValue({tagColor:u.tagColor,enableShowGroup:u.enableShowGroup}),O&&O.name&&Me({name:(V=v==null?void 0:v.Name)!==null&&V!==void 0?V:"",title:O?O.title:(0,l.fi)((F=v==null?void 0:v.Name)!==null&&F!==void 0?F:"","/"),description:O&&O.description,url:O&&O.url,icon:O&&O.icon})}if(!C||C.length==0){var h,I=(h=w.current)===null||h===void 0?void 0:h.getFieldValue("url");if(!I||I==""){var s;!((s=w.current)===null||s===void 0)&&s.resetFields&&w.current.resetFields()}}},options:y&&y.map(function(D){return{lable:D.tag,value:D.tag}}),name:"tag",mode:"tags",fieldProps:{maxCount:1},placeholder:_.format("formTagEmpty")},"tagSelect".concat(J)),!G.defaultEnableShowGroup&&(0,m.jsx)(fe.Z,{label:_.format("formTagColor"),name:"tagColor"})]}),!G.defaultEnableShowGroup&&(0,m.jsx)(M.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(C){var u=C.canSeeEnableCe;return(0,m.jsx)(P.Z,{label:_.format("formEnableShowGroup"),name:"enableShowGroup",disabled:u,fieldProps:{onChange:function(V){if(V){var F,O;Me({name:(F=v==null?void 0:v.Name)!==null&&F!==void 0?F:"",title:(0,l.fi)((O=v==null?void 0:v.Name)!==null&&O!==void 0?O:"","/")})}}}})}}),(0,m.jsx)(c.Z,{name:["enableShowGroup"],children:function(C){var u=C.enableShowGroup;return(u||G.defaultEnableShowGroup)&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(q.Z.Compact,{children:[G.containerDetail&&(0,m.jsx)(B.Z,{label:_.format("formSelectUrl"),width:"sm",name:"selectUrl",options:j.map(function(Y){return{label:Y,value:Y}}),onChange:function(V){var F;!((F=w.current)===null||F===void 0)&&F.setFieldValue&&w.current.setFieldValue("url",V)}}),(0,m.jsx)(f.Z,{label:_.format("formUrl"),name:"url",width:"md"}),(0,m.jsx)(W.Z,{label:" ",children:(0,m.jsx)(se.Z,{action:function(){var V;return(0,pe.R3)({url:(V=w.current)===null||V===void 0?void 0:V.getFieldValue("url")})},onSuccess:function(V){var F,O,h;(F=w.current)===null||F===void 0||F.setFieldValue("icon",V.data.icon),(O=w.current)===null||O===void 0||O.setFieldValue("title",V.data.title),(h=w.current)===null||h===void 0||h.setFieldValue("description",V.data.description)},children:_.format("getUrlDetailButton")})})]}),(0,m.jsxs)(S.UW,{children:[(0,m.jsx)(f.Z,{label:_.format("formTitle"),name:"title"}),(0,m.jsx)(f.Z,{label:_.format("formDescription"),name:"description"})]}),(0,m.jsx)(S.UW,{children:(0,m.jsx)(f.Z,{width:"lg",placeholder:_.format("formIconEmpty"),label:_.format("formIcon"),name:"icon"})})]})}})]})});ne.Z=Oe},81146:function(De,ne,e){var te=e(97857),i=e.n(te),re=e(15009),t=e.n(re),H=e(99289),d=e.n(H),l=e(67294),E=e(97269),W=e(62370),f=e(5966),S=e(97462),B=e(82346),P=e(71230),c=e(15746),T=e(34041),q=e(28036),o=e(84567),M=e(42075),se=e(80821),fe=e(23430),K=e(93162),pe=e.n(K),ge=e(78267),z=e.n(ge),m=e(75458),Oe=e.n(m),G=e(12323),a=e(4244),ve=e.n(a),w=e(24078),Pe=e(36146),r=e(85893),J,ee,_e,X={decorations:{matchBackground:"",matchBorder:"#FFFF00",activeMatchBackground:"#FFFF0066",matchOverviewRuler:"",activeMatchColorOverviewRuler:""}},j=(0,l.forwardRef)(function(p,N){var $=(0,l.useRef)(),y=(0,B.useModel)("subscriber"),k=new Pe.Uo("components.containerLog");(0,l.useImperativeHandle)(N,function(){return{fit:function(){J.clear(),_e.fit()},start:function(){return d()(t()().mark(function R(){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,v({lineTotal:500});case 2:case"end":return _.stop()}},R)}))()},close:function(){y.progress.close(p.id)}}});function v(x){return Z.apply(this,arguments)}function Z(){return Z=d()(t()().mark(function x(R){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:J.clear(),R.download=!1,p.request(R);case 3:case"end":return _.stop()}},x)})),Z.apply(this,arguments)}return(0,l.useEffect)(function(){return window.addEventListener("resize",function(){_e.fit()}),J=new a.Terminal(i()(i()({},G.X),{},{fontSize:12,lineHeight:1.2,allowProposedApi:!0})),_e=new ge.FitAddon,ee=new m.SearchAddon({}),J.loadAddon(_e),J.loadAddon(ee),J.open(document.getElementById("terminal-container-log")),_e.fit(),y.addDataHandler(p.id,function(x){J.write(x.data)}),function(){J.clear(),J.reset(),y.progress.close(p.id)}},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(E.A,{submitter:!1,layout:"horizontal",onFinish:function(R){var L;v({id:p.id,lineTotal:parseInt(R.lineTotal),showTime:(L=R.showTime)!==null&&L!==void 0?L:!1})},formRef:$,children:(0,r.jsxs)(P.Z,{gutter:[10,0],children:[(0,r.jsx)(c.Z,{span:8,children:(0,r.jsx)(W.Z,{name:"lineTotal",initialValue:"500",label:k.format("formLineTotal"),children:(0,r.jsxs)(T.Z,{defaultValue:"500",onChange:function(R){var L;(L=$.current)===null||L===void 0||L.submit()},children:[(0,r.jsx)(T.Z.Option,{value:"100",children:k.format("formLineTotalOption",{number:"100"})}),(0,r.jsx)(T.Z.Option,{value:"200",children:k.format("formLineTotalOption",{number:"200"})}),(0,r.jsx)(T.Z.Option,{value:"500",children:k.format("formLineTotalOption",{number:"500"})}),(0,r.jsx)(T.Z.Option,{value:"1000",children:k.format("formLineTotalOption",{number:"1000"})}),(0,r.jsx)(T.Z.Option,{value:"-1",children:k.format("formLineTotalOptionAll")})]})})}),(0,r.jsx)(c.Z,{children:(0,r.jsx)(q.ZP,{onClick:function(){J.clear()},children:k.format("clearButton")})}),(0,r.jsx)(c.Z,{children:(0,r.jsx)(W.Z,{name:"showTime",valuePropName:"checked",children:(0,r.jsx)(o.Z,{onChange:function(R){var L;(L=$.current)===null||L===void 0||L.submit()},children:k.format("formShowTime")})})}),(0,r.jsx)(c.Z,{children:(0,r.jsx)(f.Z,{label:k.format("formKeywork"),name:"keywork",fieldProps:{onPressEnter:function(){var R;ee.findNext((R=$.current)===null||R===void 0?void 0:R.getFieldValue("keywork"),X)},onChange:function(R){ee.findNext(R.target.value,X)}},placeholder:k.format("formKeyworkEmpty")})}),(0,r.jsx)(c.Z,{children:(0,r.jsx)(S.Z,{name:["keywork"],children:function(R){var L=R.keywork;return(0,r.jsxs)(M.Z,{size:10,children:[(0,r.jsx)(q.ZP,{onClick:function(){ee.findNext(L,X)},children:k.format("formKeyworkNext")},"next"),(0,r.jsx)(q.ZP,{onClick:function(){ee.findPrevious(L,X)},children:k.format("formKeyworkPrev")},"prev")]})}})}),(0,r.jsx)(c.Z,{children:(0,r.jsx)(se.Z,{icon:(0,r.jsx)(fe.Z,{}),action:d()(t()().mark(function x(){var R,L,_;return t()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(!p.download){D.next=5;break}return D.next=3,p.download({lineTotal:parseInt((R=$.current)===null||R===void 0?void 0:R.getFieldValue("lineTotal")),showTime:(L=$.current)===null||L===void 0?void 0:L.getFieldValue("showTime")});case 3:_=D.sent,(0,K.saveAs)(_.data,_.name);case 5:case"end":return D.stop()}},x)})),children:k.format("downloadButton")})})]})}),(0,r.jsx)("div",{style:{marginTop:"20px",height:p.showInDrawer?"75vh":"85vh"},id:"terminal-container-log"})]})});ne.Z=j},27619:function(De,ne,e){e.d(ne,{Z:function(){return l}});var te=e(5574),i=e.n(te),re=e(82346),t=e(67294),H=e(64389),d=e(85893);function l(E){var W=(0,re.useModel)("@@initialState"),f=W.initialState,S="chart-area-".concat(E.name),B=(0,t.useState)(),P=i()(B,2),c=P[0],T=P[1],q={};E.data.forEach(function(M){M.show===!1?q[M.name]=!1:q[M.name]=!0});var o={tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},valueFormatter:function(se){return E.yValueFormatter?E.yValueFormatter(se):se}},legend:{selected:q},grid:{left:"0",right:"0",bottom:"0",top:"30",containLabel:!0},xAxis:{type:"category",data:E.data[0].data.map(function(M){return M.date}),boundaryGap:!1,axisLabel:{rotate:20}},yAxis:{type:"value",axisLabel:{formatter:E.yLabelFormatter},max:function(se){if(E.yDomainMaxCallback)return E.yDomainMaxCallback(se)}},series:[]};return(0,t.useEffect)(function(){var M="",se=window.matchMedia("(prefers-color-scheme: dark)");(f==null?void 0:f.theme.algorithm)=="dark"||se.matches?M="dark":M="",c&&!c.isDisposed()&&c.dispose();var fe=document.getElementById(S),K=H.S1(fe,M);K.setOption(o);var pe=new ResizeObserver(function(){K.resize()});fe&&pe.observe(fe),T(K)},[f]),(0,t.useEffect)(function(){c&&!c.isDisposed()&&c.setOption({legend:{data:E.data.map(function(M){return M.name})},xAxis:{data:E.data[0].data.map(function(M){return M.date})},series:E.data.map(function(M){return{name:M.name,type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:M.data.map(function(se){return se.value})}})})},[E.data]),(0,d.jsx)("div",{style:{height:200},id:S})}},2808:function(De,ne,e){e.d(ne,{Z:function(){return l}});var te=e(97857),i=e.n(te),re=e(62370),t=e(51663),H=e(67294),d=e(85893);function l(E){return(0,d.jsx)(re.Z,i()(i()({},E),{},{children:(0,d.jsx)(t.Z,{showText:function(f){return f.toHexString()},allowClear:!0,presets:[{label:"Color",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},65913:function(De,ne,e){var te=e(5574),i=e.n(te),re=e(74330),t=e(67294),H=e(85893),d=(0,t.forwardRef)(function(l,E){(0,t.useImperativeHandle)(E,function(){return{show:function(){B(!0)},destroy:function(){B(!1)}}});var W=(0,t.useState)(!1),f=i()(W,2),S=f[0],B=f[1];return(0,H.jsx)(re.Z,{spinning:S,size:"default",children:l.children})});ne.Z=d},84410:function(De,ne,e){e.d(ne,{a:function(){return E},i:function(){return d}});var te=e(15009),i=e.n(te),re=e(99289),t=e.n(re),H=e(82346);function d(f){return l.apply(this,arguments)}function l(){return l=t()(i()().mark(function f(S){return i()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,H.request)("/api/app/container/get-stat-info",{method:"POST",data:S}));case 1:case"end":return P.stop()}},f)})),l.apply(this,arguments)}function E(f){return W.apply(this,arguments)}function W(){return W=t()(i()().mark(function f(S){return i()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,H.request)("/api/app/container/get-process-info",{method:"POST",data:S}));case 1:case"end":return P.stop()}},f)})),W.apply(this,arguments)}},29453:function(De,ne,e){e.d(ne,{A9:function(){return d},R3:function(){return B},e1:function(){return E},rn:function(){return f}});var te=e(15009),i=e.n(te),re=e(99289),t=e.n(re),H=e(82346);function d(c){return l.apply(this,arguments)}function l(){return l=t()(i()().mark(function c(T){return i()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,H.request)("/api/common/tag/create",{method:"POST",data:T});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},c)})),l.apply(this,arguments)}function E(c){return W.apply(this,arguments)}function W(){return W=t()(i()().mark(function c(T){return i()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,H.request)("/api/common/tag/get-list",{method:"POST",data:T});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},c)})),W.apply(this,arguments)}function f(c){return S.apply(this,arguments)}function S(){return S=t()(i()().mark(function c(T){return i()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,H.request)("/api/common/tag/delete",{method:"POST",data:T});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},c)})),S.apply(this,arguments)}function B(c){return P.apply(this,arguments)}function P(){return P=t()(i()().mark(function c(T){return i()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,H.request)("/api/pro/tag/get-url-detail",{method:"POST",data:T});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},c)})),P.apply(this,arguments)}}}]);
