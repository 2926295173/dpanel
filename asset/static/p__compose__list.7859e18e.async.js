(self.webpackChunk=self.webpackChunk||[]).push([[8022],{23430:function(B,y,t){"use strict";t.d(y,{Z:function(){return m}});var C=t(87462),r=t(67294),p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},c=p,f=t(84089),O=function(i,o){return r.createElement(f.Z,(0,C.Z)({},i,{ref:o,icon:c}))},j=r.forwardRef(O),m=j},80821:function(B,y,t){"use strict";t.d(y,{Z:function(){return _}});var C=t(5574),r=t.n(C),p=t(24963),c=t(86738),f=t(14726),O=t(83062),j=t(67294),m=t(85893);function _(i){var o=(0,j.useState)(!1),a=r()(o,2),v=a[0],n=a[1],u=(0,j.useContext)(p.Z),M=u.lang,w=u.notice,R=u.message,T=function(){n(!0),i.action().then(function(g){if(n(!1),typeof i.onSuccess=="function"&&i.onSuccess(g),i.messageSuccess){var E="";typeof i.messageSuccess=="function"?E=i.messageSuccess(g):E=i.messageSuccess,E.indexOf(".")>-1&&(E=M(E)),i.asynced?R.info(E):R.success(E)}}).catch(function(g){n(!1),typeof i.onError=="function"&&i.onError(g)})};return i.confirm?(0,m.jsx)(c.Z,{style:{width:500},title:i.confirmTitle?i.confirmTitle:M("notification.title.tip"),description:i.confirm,onConfirm:T,okText:"Yes",cancelText:"No",children:(0,m.jsx)(f.ZP,{disabled:i.disabled,icon:i.icon,loading:v,danger:i.danger,type:i.type,children:i.children})}):(0,m.jsx)(O.Z,{title:i.tips,children:(0,m.jsx)(f.ZP,{disabled:i.disabled,icon:i.icon,loading:v,onClick:T,danger:i.danger,type:i.type,children:i.children})})}},94359:function(B,y,t){"use strict";t.d(y,{Z:function(){return v}});var C=t(67294),r=t(3089),p=t(98165),c=t(18429),f=t(8751),O=t(14313),j=t(30159),m=t(87740),_=t(66309),i=t(83062),o=t(54006),a=t(85893);function v(n){var u=(0,a.jsx)(a.Fragment,{});if(n.status=="0"&&(u=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(r.Z,{}),color:"default",children:"waiting"})),n.status=="10"&&(u=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(p.Z,{spin:!0}),color:"processing",children:"processing"})),n.status=="20"&&(u=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(c.Z,{}),color:"error",children:"error"})),n.status=="30"&&(u=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(f.Z,{}),color:"success",children:"success"})),n.status=="running"||n.status=="healthy"){var M,w;u=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(O.Z,{}),color:"success",children:(M=n.message)!==null&&M!==void 0&&M.showInTag?(w=n.message)===null||w===void 0?void 0:w.content:n.status})}if(n.status=="paused"){var R,T;u=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(j.Z,{}),children:(R=n.message)!==null&&R!==void 0&&R.showInTag?(T=n.message)===null||T===void 0?void 0:T.content:n.status})}if(n.status=="waiting"||n.status=="starting"){var A,g;u=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(m.Z,{}),children:(A=n.message)!==null&&A!==void 0&&A.showInTag?(g=n.message)===null||g===void 0?void 0:g.content:n.status})}if(n.status=="exited"||n.status=="dead"||n.status=="removing"||n.status=="restarting"||n.status=="unhealthy"||n.status=="created"){var E,l;u=(0,a.jsx)(_.Z,{icon:(0,a.jsx)(c.Z,{}),color:"warning",children:(E=n.message)!==null&&E!==void 0&&E.showInTag?(l=n.message)===null||l===void 0?void 0:l.content:n.status})}if(n.link&&(u=(0,a.jsx)(o.Link,{to:n.link,children:u})),n.message){var W;u=(0,a.jsx)(i.Z,{placement:(W=n.message.placement)!==null&&W!==void 0?W:"top",title:n.message.content,children:u})}return(0,a.jsx)(a.Fragment,{children:u})}},24963:function(B,y,t){"use strict";var C=t(67294),r=(0,C.createContext)({});y.Z=r},96781:function(B,y,t){"use strict";var C=t(67294),r=(0,C.createContext)({});y.Z=r},83536:function(B,y,t){"use strict";t.r(y),t.d(y,{default:function(){return F}});var C=t(15009),r=t.n(C),p=t(99289),c=t.n(p),f=t(80821),O=t(90098),j=t(43425),m=t(86548),_=t(23430),i=t(10641),o=t(54006),a=t(42075),v=t(96074),n=t(83062),u=t(25593),M=t(67294),w=t(96781),R=t(94359),T=t(67255),A=t(93162),g=t(24963),E=t(66309),l=t(85893);function W(Z){var I=(0,o.useIntl)(),b=(0,M.useContext)(g.Z),L=b.lang,s;if(!Z.type)s=(0,l.jsx)(E.Z,{children:L("compose.default")});else switch(Z.type){case"remoteUrl":s=(0,l.jsx)(E.Z,{color:"cyan",children:L("compose.".concat(Z.type))});break;case"serverPath":s=(0,l.jsx)(E.Z,{color:"blue",children:L("compose.".concat(Z.type))});break;case"storagePath":s=(0,l.jsx)(E.Z,{color:"blue-inverse",children:L("compose.".concat(Z.type))});break;case"outPath":s=(0,l.jsx)(E.Z,{color:"yellow",children:L("compose.".concat(Z.type))});break;default:s=(0,l.jsx)(E.Z,{children:L("compose.".concat(Z.type))})}return(0,l.jsx)(n.Z,{title:Z.tootip,children:s})}function F(){var Z=(0,M.useContext)(w.Z),I=Z.listTableRef,b=(0,M.useContext)(g.Z),L=b.lang,s=b.notice;return(0,l.jsx)(i.Z,{scroll:{x:"max-content"},request:function(){var d=c()(r()().mark(function h(e){var U,P,D;return r()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,O.pm)({title:e.title,name:e.name,pageSize:(U=e.pageSize)!==null&&U!==void 0?U:10,page:(P=e.current)!==null&&P!==void 0?P:1});case 2:return D=x.sent,x.abrupt("return",{data:D.data.list,success:!0,total:D.data.list.length});case 4:case"end":return x.stop()}},h)}));return function(h){return d.apply(this,arguments)}}(),rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name",width:200,render:function(h,e,U,P,D){return(0,l.jsx)(o.Link,{to:"/compose/deploy/"+e.id,children:e.name},U)}},{title:"\u9879\u76EE\u540D\u79F0",dataIndex:"title",width:200},{title:"\u7C7B\u578B",width:150,search:!1,render:function(h,e,U,P,D){var S;return(0,l.jsx)(W,{tootip:(S=e.setting.uri)!==null&&S!==void 0?S:"",type:e.setting&&e.setting.type?e.setting.type:""})}},{title:"\u5BB9\u5668\u72B6\u6001",dataIndex:"status",search:!1,width:300,render:function(h,e,U,P,D){return(0,l.jsx)(a.Z,{children:e.setting.status.split(", ").map(function(S){var x="running",K=S.indexOf("(");return K>-1?x=S.slice(0,K):x=S,(0,l.jsx)(R.Z,{status:x,message:{content:L("compose.".concat(x),{count:S.slice(K+1,S.length-1)}),placement:"top",showInTag:!0}},e.id)})})}},{title:"\u64CD\u4F5C",width:80,valueType:"option",key:"option",render:function(h,e,U,P,D){return(0,l.jsxs)(a.Z,{split:(0,l.jsx)(v.Z,{type:"vertical"}),children:[(0,l.jsx)(o.Link,{to:"/compose/deploy/"+e.id,children:(0,l.jsx)(n.Z,{title:"\u7BA1\u7406",children:(0,l.jsx)(j.Z,{})})},"3"),e.setting.type!="outPath"&&(0,l.jsx)(o.Link,{to:"/compose/create?id="+e.id,children:(0,l.jsx)(n.Z,{title:"\u7F16\u8F91",children:(0,l.jsx)(m.Z,{})})},"4"),(0,l.jsx)(u.Z.Link,{onClick:c()(r()().mark(function S(){var x,K;return r()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,(0,O.Pn)({id:e.id});case 2:x=z.sent,x&&x.data&&x.data.detail&&(K=new Blob([x.data.detail.yaml],{type:"text/plain"}),(0,A.saveAs)(K,e.name+"-compose.yaml"));case 4:case"end":return z.stop()}},S)})),children:(0,l.jsx)(n.Z,{title:"\u4E0B\u8F7D",children:(0,l.jsx)(_.Z,{})})},"2")]})}}],rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0,getCheckboxProps:function(h){return{disabled:h.setting.type=="storagePath"||h.setting.type=="serverPath"||h.setting.type=="outPath"}}},tableAlertOptionRender:function(h){var e=h.selectedRows;return(0,l.jsx)(a.Z,{size:16,children:(0,l.jsx)(f.Z,{danger:!0,type:"primary",action:function(){return(0,O.ik)({id:e.map(function(P){return P.id})})},onSuccess:function(){var P,D;return!((P=I.current)===null||P===void 0)&&P.reloadAndRest&&((D=I.current)===null||D===void 0||D.reloadAndRest()),!0},onError:function(){var P,D;return!((P=I.current)===null||P===void 0)&&P.reset&&((D=I.current)===null||D===void 0||D.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",confirm:(0,l.jsx)(a.Z,{style:{width:280},direction:"vertical",children:(0,l.jsx)(u.Z.Text,{children:"\u5220\u9664\u524D\u8BF7\u5148\u9500\u6BC1\u76F8\u5173\u5BB9\u5668\uFF0C\u786E\u8BA4\u5417\uFF1F"})}),children:"\u6279\u91CF\u5220\u9664"})})},pagination:(0,T.O)(),search:{collapsed:!1},actionRef:I,columnsState:(0,T.j)("compose-list")})}},90098:function(B,y,t){"use strict";t.d(y,{CT:function(){return a},GG:function(){return A},MG:function(){return Z},Oh:function(){return M},Pn:function(){return i},U_:function(){return W},VN:function(){return E},ik:function(){return n},im:function(){return O},mg:function(){return R},pm:function(){return m},xC:function(){return b}});var C=t(15009),r=t.n(C),p=t(99289),c=t.n(p),f=t(54006);function O(s){return j.apply(this,arguments)}function j(){return j=c()(r()().mark(function s(d){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/api/app/compose/create",{method:"POST",data:d}));case 1:case"end":return e.stop()}},s)})),j.apply(this,arguments)}function m(s){return _.apply(this,arguments)}function _(){return _=c()(r()().mark(function s(d){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/api/app/compose/get-list",{method:"POST",data:d}));case 1:case"end":return e.stop()}},s)})),_.apply(this,arguments)}function i(s){return o.apply(this,arguments)}function o(){return o=c()(r()().mark(function s(d){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/api/app/compose/get-task",{method:"POST",data:d}));case 1:case"end":return e.stop()}},s)})),o.apply(this,arguments)}function a(s){return v.apply(this,arguments)}function v(){return v=c()(r()().mark(function s(d){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/api/app/compose/get-detail",{method:"POST",data:d}));case 1:case"end":return e.stop()}},s)})),v.apply(this,arguments)}function n(s){return u.apply(this,arguments)}function u(){return u=c()(r()().mark(function s(d){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/api/app/compose/delete",{method:"POST",data:d}));case 1:case"end":return e.stop()}},s)})),u.apply(this,arguments)}function M(s){return w.apply(this,arguments)}function w(){return w=c()(r()().mark(function s(d){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/api/app/compose/container-deploy",{method:"POST",data:d}));case 1:case"end":return e.stop()}},s)})),w.apply(this,arguments)}function R(s){return T.apply(this,arguments)}function T(){return T=c()(r()().mark(function s(d){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/api/app/compose/container-destroy",{method:"POST",data:d}));case 1:case"end":return e.stop()}},s)})),T.apply(this,arguments)}function A(s){return g.apply(this,arguments)}function g(){return g=c()(r()().mark(function s(d){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/api/app/compose/container-ctrl",{method:"POST",data:d}));case 1:case"end":return e.stop()}},s)})),g.apply(this,arguments)}function E(s){return l.apply(this,arguments)}function l(){return l=c()(r()().mark(function s(d){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/api/app/compose/container-log",{method:"POST",data:d}));case 1:case"end":return e.stop()}},s)})),l.apply(this,arguments)}function W(s){return F.apply(this,arguments)}function F(){return F=c()(r()().mark(function s(d){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/api/app/compose/container-process-kill",{method:"POST",data:d}));case 1:case"end":return e.stop()}},s)})),F.apply(this,arguments)}function Z(s){return I.apply(this,arguments)}function I(){return I=c()(r()().mark(function s(d){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/api/app/compose/get-from-uri",{method:"POST",data:d}));case 1:case"end":return e.stop()}},s)})),I.apply(this,arguments)}function b(s){return L.apply(this,arguments)}function L(){return L=c()(r()().mark(function s(d){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/api/app/compose/parse",{method:"POST",data:d}));case 1:case"end":return e.stop()}},s)})),L.apply(this,arguments)}},67255:function(B,y,t){"use strict";t.d(y,{O:function(){return C},j:function(){return r}});function C(){var p,c=parseInt((p=localStorage.getItem("dpanel-pagesize"))!==null&&p!==void 0?p:"0");return{showSizeChanger:!0,defaultPageSize:c!=null?c:20}}function r(p){var c="dpanel-table-column-".concat(p),f={};if(localStorage.getItem(c)){var O;f=JSON.parse((O=localStorage.getItem(c))!==null&&O!==void 0?O:"{}")}return{defaultValue:f,onChange:function(m){localStorage.setItem("dpanel-table-column-".concat(p),JSON.stringify(m))}}}},93162:function(B,y,t){var C,r,p;(function(c,f){r=[],C=f,p=typeof C=="function"?C.apply(y,r):C,p!==void 0&&(B.exports=p)})(this,function(){"use strict";function c(o,a){return typeof a=="undefined"?a={autoBom:!1}:typeof a!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}function f(o,a,v){var n=new XMLHttpRequest;n.open("GET",o),n.responseType="blob",n.onload=function(){i(n.response,a,v)},n.onerror=function(){console.error("could not download file")},n.send()}function O(o){var a=new XMLHttpRequest;a.open("HEAD",o,!1);try{a.send()}catch(v){}return 200<=a.status&&299>=a.status}function j(o){try{o.dispatchEvent(new MouseEvent("click"))}catch(v){var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),o.dispatchEvent(a)}}var m=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof t.g=="object"&&t.g.global===t.g?t.g:void 0,_=m.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),i=m.saveAs||(typeof window!="object"||window!==m?function(){}:"download"in HTMLAnchorElement.prototype&&!_?function(o,a,v){var n=m.URL||m.webkitURL,u=document.createElement("a");a=a||o.name||"download",u.download=a,u.rel="noopener",typeof o=="string"?(u.href=o,u.origin===location.origin?j(u):O(u.href)?f(o,a,v):j(u,u.target="_blank")):(u.href=n.createObjectURL(o),setTimeout(function(){n.revokeObjectURL(u.href)},4e4),setTimeout(function(){j(u)},0))}:"msSaveOrOpenBlob"in navigator?function(o,a,v){if(a=a||o.name||"download",typeof o!="string")navigator.msSaveOrOpenBlob(c(o,v),a);else if(O(o))f(o,a,v);else{var n=document.createElement("a");n.href=o,n.target="_blank",setTimeout(function(){j(n)})}}:function(o,a,v,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),typeof o=="string")return f(o,a,v);var u=o.type==="application/octet-stream",M=/constructor/i.test(m.HTMLElement)||m.safari,w=/CriOS\/[\d]+/.test(navigator.userAgent);if((w||u&&M||_)&&typeof FileReader!="undefined"){var R=new FileReader;R.onloadend=function(){var g=R.result;g=w?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=g:location=g,n=null},R.readAsDataURL(o)}else{var T=m.URL||m.webkitURL,A=T.createObjectURL(o);n?n.location=A:location.href=A,n=null,setTimeout(function(){T.revokeObjectURL(A)},4e4)}});m.saveAs=i.saveAs=i,B.exports=i})}}]);
