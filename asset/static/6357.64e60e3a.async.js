"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6357],{8287:function(Te,ce,e){var me=e(5574),_=e.n(me),fe=e(15009),s=e.n(fe),le=e(99289),p=e.n(le),l=e(13822),y=e(25593),G=e(83062),D=e(85265),H=e(42075),F=e(67294),T=e(81146),$=e(1883),ae=e(58638),J=e(62597),X=e(3616),E=e(82346),te=e(36146),ge=e(5251),M=e(85893),xe=(0,F.forwardRef)(function(u,Me){var S;(0,F.useImperativeHandle)(Me,function(){return{show:function(O){return p()(s()().mark(function c(){var Z;return s()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,l.jV)({md5:O});case 2:Z=f.sent,Z.data&&U(Z.data.info),a(!0);case 5:case"end":return f.stop()}},c)}))()}}});var Oe=(0,F.useState)(!1),je=_()(Oe,2),ne=je[0],a=je[1],Se=(0,F.useState)(),B=_()(Se,2),n=B[0],U=B[1],d=(0,F.useRef)(),oe=new te.Uo("components.appDetail.appDetailQuickLog");return(0,M.jsxs)(M.Fragment,{children:[u.showTriggerButton&&(0,M.jsx)(y.Z.Link,{onClick:p()(s()().mark(function V(){return s()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:U(u.containerInfo),a(!0);case 2:case"end":return c.stop()}},V)})),children:(0,M.jsx)(G.Z,{title:oe.format("drawerTriggerButtonTip"),children:(0,M.jsx)($.Z,{})})},"log"),(0,M.jsx)(D.Z,{title:oe.format("drawerTitle",{name:(0,ge.fi)((S=n==null?void 0:n.Name)!==null&&S!==void 0?S:"","/")}),open:ne,forceRender:!0,onClose:function(){a(!1)},afterOpenChange:function(O){if(O)setTimeout(function(){var Z,w;(Z=d.current)===null||Z===void 0||Z.start(),(w=d.current)===null||w===void 0||w.fit()},1e3);else{var c;(c=d.current)===null||c===void 0||c.close()}},width:X.FK,extra:(0,M.jsx)(H.Z,{children:(0,M.jsx)(E.Link,{to:"/container/log/".concat(n==null?void 0:n.Name),target:"_blank",onClick:function(){var O;(O=d.current)===null||O===void 0||O.close(),a(!1)},children:(0,M.jsx)(G.Z,{title:oe.format("openNewWindowButtonTip"),children:(0,M.jsx)(ae.Z,{})})})}),children:n&&ne&&(0,M.jsx)(T.Z,{ref:d,showInDrawer:!0,id:"container:log:".concat(n==null?void 0:n.Id),request:function(){var V=p()(s()().mark(function O(c){var Z;return s()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,J.Tb)({id:(Z=n.Id)!==null&&Z!==void 0?Z:"",lineTotal:c.lineTotal,download:c.download,showTime:c.showTime});case 2:case"end":return f.stop()}},O)}));return function(O){return V.apply(this,arguments)}}(),download:function(){var V=p()(s()().mark(function O(c){var Z,w,f,K;return s()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,(0,J.XH)({id:(Z=n.Id)!==null&&Z!==void 0?Z:"",lineTotal:c.lineTotal,showTime:c.showTime});case 2:return f=Y.sent,Y.next=5,(0,l.jV)({md5:(w=n.Id)!==null&&w!==void 0?w:""});case 5:return K=Y.sent,Y.abrupt("return",{data:new Blob([f],{type:"text/plain"}),name:K.data.info.Name.replaceAll("/","")+"_"+new Date().toLocaleDateString()+".log"});case 7:case"end":return Y.stop()}},O)}));return function(O){return V.apply(this,arguments)}}()})})]})});ce.Z=xe},46357:function(Te,ce,e){e.d(ce,{Z:function(){return h}});var me=e(5574),_=e.n(me),fe=e(15009),s=e.n(fe),le=e(99289),p=e.n(le),l=e(67294),y=e(37767),G=e(13822),D=e(82346),H=e(95591),F=e(60433),T=e(85265),$=e(96074),ae=e(83062),J=e(25593),X=e(86250),E=e(26412),te=e(52031),ge=e(14189),M=e(53399),xe=e(93362),u=e(184),Me=e(43831),S=e(5251),Oe=e(26522),je=e(3616),ne=e(36146),a=e(85893),Se=(0,l.forwardRef)(function(m,C){(0,l.useImperativeHandle)(C,function(){return{}});var o=(0,l.useState)(!1),R=_()(o,2),N=R[0],Ee=R[1],ve=new ne.Uo("components.appDetail.appDetailQuickNetwork");return(0,a.jsx)(u.a,{submitter:!1,title:ve.format("drawerTitle",{name:(0,S.fi)(m.containerInfo.Name,"/")}),onOpenChange:function(P){Ee(P)},drawerProps:{width:je.R_},open:N,trigger:(0,a.jsx)(ae.Z,{title:ne.Ob.format("container.detail.network"),children:(0,a.jsx)(J.Z.Link,{children:(0,a.jsx)(Oe.Z,{})},"file")}),children:(0,a.jsx)(Me.Z,{ghost:!0,containerInfo:m.containerInfo})})}),B=Se,n=e(8287),U=e(65913),d=e(14245),oe=e(1699),V=e(97857),O=e.n(V),c=e(40666),Z=e(64789),w=e(97937),f=e(38345),K=e(42075),Ce=e(66309),Y=e(86738),I=e(46272),j=e(29453);function r(m){var C=(0,l.useState)(0),o=_()(C,2),R=o[0],N=o[1],Ee=(0,l.useState)(),ve=_()(Ee,2),t=ve[0],P=ve[1],ye=new ne.Uo("components.appDetail.appDetailQuickTag"),Re=(0,l.useState)(),Pe=_()(Re,2),se=Pe[0],Le=Pe[1];return(0,l.useEffect)(function(){P([]),(0,j.e1)().then(function(ue){P(ue.data.list)})},[R,m.data.info.Name]),(0,a.jsx)(f.Z,{ghost:!0,title:(0,a.jsx)(c.Z,{}),subTitle:ye.format("cardTitle"),extra:(0,a.jsx)(I.Z,{trigger:(0,a.jsx)(J.Z.Link,{children:(0,a.jsx)(Z.Z,{})}),containerDetail:m.data,onFinish:function(){N(R+1)}}),children:(0,a.jsx)(K.Z,{wrap:!0,children:t&&(t==null?void 0:t.filter(function(ue){return ue.item&&ue.item.find(function(De){return De.name==m.data.info.Name})}).map(function(ue,De){return(0,a.jsx)(Ce.Z,{color:ue.tagColor,closable:{closeIcon:(0,a.jsx)(Y.Z,{title:ne.FD.format("confirm.title"),open:se&&se[De],onOpenChange:function(re){Le(O()(O()({},se),{index:re}))},onConfirm:p()(s()().mark(function _e(){return s()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,(0,j.rn)({name:m.data.info.Name,tag:ue.tag});case 2:N(R+1);case 3:case"end":return z.stop()}},_e)})),children:(0,a.jsx)(w.Z,{})})},style:{height:35,display:"flex",borderRadius:20,justifyContent:"center",alignItems:"center"},onClose:p()(s()().mark(function _e(){return s()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:Le(O()(O()({},se),{index:!0}));case 1:case"end":return z.stop()}},_e)})),children:(0,a.jsx)("span",{style:{paddingLeft:10,paddingRight:3},children:ue.tag})},De)}))})})}var Q=e(19632),pe=e.n(Q),ie=e(12122),Ze=e(60940),q=e(27619),Ie=e(84410),A=e(24963),x={total:0,memory:{usage:[{name:"use",data:[]},{name:"all",show:!1,data:[]}],source:{usage:0,limit:0}},cpu:{usage:[{name:"use",data:[]}],source:{usage:0,limit:0}},network:{usage:[{name:"rx",data:[]},{name:"tx",data:[]}],source:{usageIn:0,usageOut:0}},io:{usage:[{name:"read",data:[]},{name:"write",data:[]}],source:{usageRead:0,usageWrite:0}}},i=function(C,o){switch(o.type){case"clear":return x;case"update":var R=new Date(o.payload.read).toLocaleTimeString(),N=JSON.parse(JSON.stringify(C));if(o.payload.memory_stats&&o.payload.memory_stats.limit&&o.payload.memory_stats.usage&&(N.memory.usage=[{name:"use",data:[].concat(pe()(C.memory.usage[0].data.slice(-20)),[{date:R,value:Math.round(o.payload.memory_stats.usage)}])},{name:"all",show:!1,data:[].concat(pe()(C.memory.usage[1].data.slice(-20)),[{date:R,value:Math.round(o.payload.memory_stats.limit)}])}],N.memory.source={usage:o.payload.memory_stats.usage,limit:o.payload.memory_stats.limit}),o.payload&&o.payload.cpu_stats){var Ee=o.payload.cpu_stats.cpu_usage.total_usage-o.payload.precpu_stats.cpu_usage.total_usage,ve=o.payload.cpu_stats.system_cpu_usage-o.payload.precpu_stats.system_cpu_usage;N.cpu.usage=[{name:"use",data:[].concat(pe()(C.cpu.usage[0].data.slice(-20)),[{date:R,value:(Ee/ve*o.payload.cpu_stats.online_cpus*100).toFixed(2)}])}],N.cpu.source={usage:Ee/ve*o.payload.cpu_stats.online_cpus*100,limit:ve*o.payload.cpu_stats.online_cpus*100}}return o.payload.networks&&(N.network.source={usageIn:parseFloat(o.payload.networks.eth0.rx_bytes.toFixed(2)),usageOut:parseFloat(o.payload.networks.eth0.tx_bytes.toFixed(2))},N.network.usage=[{name:"rx",data:[].concat(pe()(C.network.usage[0].data.slice(-20)),[{date:R,value:parseFloat(o.payload.networks.eth0.rx_bytes.toFixed(2))}])},{name:"tx",data:[].concat(pe()(C.network.usage[1].data.slice(-20)),[{date:R,value:parseFloat(o.payload.networks.eth0.tx_bytes.toFixed(2))}])}]),o.payload.blkio_stats&&o.payload.blkio_stats.io_service_bytes_recursive&&o.payload.blkio_stats.io_service_bytes_recursive.length>0&&(N.io.source={usageRead:o.payload.blkio_stats.io_service_bytes_recursive[0].value,usageWrite:o.payload.blkio_stats.io_service_bytes_recursive[1].value},N.io.usage=[{name:"read",data:[].concat(pe()(C.io.usage[0].data.slice(-20)),[{date:R,value:parseFloat(o.payload.blkio_stats.io_service_bytes_recursive[0].value.toFixed(2))}])},{name:"write",data:[].concat(pe()(C.io.usage[1].data.slice(-20)),[{date:R,value:parseFloat(o.payload.blkio_stats.io_service_bytes_recursive[1].value.toFixed(2))}])}]),N}},k=(0,l.forwardRef)(function(m,C){var o=(0,l.useState)(!1),R=_()(o,2),N=R[0],Ee=R[1],ve=(0,l.useReducer)(i,x),t=_()(ve,2),P=t[0],ye=t[1],Re=(0,l.useState)(),Pe=_()(Re,2),se=Pe[0],Le=Pe[1],ue=(0,l.useContext)(A.Z),De=ue.loading,_e=(0,D.useModel)("subscriber"),re=new ne.Uo("components.appDetail.appDetailQuickStat");(0,l.useImperativeHandle)(C,function(){return{}});function z(g){return W.apply(this,arguments)}function W(){return W=p()(s()().mark(function g(v){var ee,de;return s()().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return De.show(),(0,Ie.i)({id:v}),Ue.next=4,(0,Ie.a)({id:v});case 4:ee=Ue.sent,de={columns:[],data:[]},ee.data.list.Titles.map(function(he){de.columns.push({title:he,label:he,dataIndex:he})}),ee.data.list.Processes.map(function(he,Ae){de.data.push({UID:he[0],PID:he[1],PPID:he[2],C:he[3],STIME:he[4],TTY:he[5],TIME:he[6],CMD:he[7]})}),Le(de),De.destroy();case 10:case"end":return Ue.stop()}},g)})),W.apply(this,arguments)}return(0,l.useEffect)(function(){return function(){_e.progress.close("container:stat:"+m.containerInfo.Id),ye({type:"clear",payload:{}})}},[m.containerInfo]),(0,a.jsxs)(a.Fragment,{children:[m.showTriggerButton&&(0,a.jsx)(J.Z.Link,{onClick:p()(s()().mark(function g(){return s()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:Ee(!0);case 1:case"end":return ee.stop()}},g)})),children:(0,a.jsx)(ae.Z,{title:re.format("drawerTriggerButtonTip"),children:(0,a.jsx)(ie.Z,{})})},"log"),(0,a.jsxs)(T.Z,{title:re.format("drawerTitle"),open:N,onClose:function(){Ee(!1)},afterOpenChange:function(v){v?setTimeout(function(){var ee;!((ee=m.containerInfo)===null||ee===void 0)&&ee.Name&&z(m.containerInfo.Id),_e.addDataHandler("container:stat:".concat(m.containerInfo.Id),function(de){var we=JSON.parse(de.data);ye({type:"update",payload:we})})},500):(_e.progress.close("container:stat:"+m.containerInfo.Id),ye({type:"clear",payload:{}}))},width:je.R_,children:[(0,a.jsxs)(f.Z,{ghost:!0,direction:"row",wrap:!0,gutter:[20,20],children:[P.memory&&P.memory.source&&(0,a.jsx)(f.Z,{colSpan:12,title:(0,a.jsx)(ie.Z,{}),subTitle:"Memory usage: ".concat((0,S.FI)(P.memory.source.usage)," / ").concat((0,S.FI)(P.memory.source.limit)),headerBordered:!0,bordered:!0,children:(0,a.jsx)(q.Z,{name:"container-memory",data:P.memory.usage,yLabelFormatter:function(v){return(0,S.FI)(parseFloat(v))},yValueFormatter:function(v){return(0,S.FI)(parseFloat(v))},yDomainMaxCallback:function(v){return v.min*2}})}),(0,a.jsx)(f.Z,{colSpan:12,title:(0,a.jsx)(ie.Z,{}),subTitle:"Cpu usage: ".concat(P.cpu.source.usage.toFixed(2),"%"),headerBordered:!0,bordered:!0,children:(0,a.jsx)(q.Z,{name:"container-cpu",data:P.cpu.usage,yDomainMaxCallback:function(v){return v.min*100},yLabelFormatter:function(v){return"".concat(parseFloat(v).toFixed(2),"%")}})}),P.io&&P.io.source&&(0,a.jsx)(f.Z,{colSpan:12,title:(0,a.jsx)(ie.Z,{}),subTitle:"I/O: ".concat((0,S.FI)(P.io.source.usageRead)," / ").concat((0,S.FI)(P.io.source.usageWrite)),headerBordered:!0,bordered:!0,children:(0,a.jsx)(q.Z,{name:"container-disk",data:P.io.usage,yDomainMaxCallback:function(v){return v.max*2},yLabelFormatter:function(v){return(0,S.FI)(parseFloat(v))}})}),P.network&&P.network.source&&(0,a.jsx)(f.Z,{colSpan:12,title:(0,a.jsx)(ie.Z,{}),subTitle:"Network: ".concat((0,S.FI)(P.network.source.usageIn)," / ").concat((0,S.FI)(P.network.source.usageOut)),headerBordered:!0,bordered:!0,children:(0,a.jsx)(q.Z,{name:"container-network",data:P.network.usage,yDomainMaxCallback:function(v){return v.max*2},yLabelFormatter:function(v){return(0,S.FI)(parseFloat(v))}})})]}),(0,a.jsx)(f.Z,{title:(0,a.jsx)(F.Z,{}),subTitle:"Progress",children:(0,a.jsx)(Ze.Z,{scroll:{x:"max-content"},rowKey:"PID",columns:se==null?void 0:se.columns,dataSource:se==null?void 0:se.data,pagination:{pageSize:10}})})]})]})}),b=k,L=(0,l.forwardRef)(function(m,C){var o;(0,l.useImperativeHandle)(C,function(){return{show:function(z){return p()(s()().mark(function W(){return s()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return se(!0),v.next=3,De(z);case 3:case"end":return v.stop()}},W)}))()}}});var R=(0,D.useAccess)(),N=(0,l.useRef)(),Ee=(0,l.useState)(),ve=_()(Ee,2),t=ve[0],P=ve[1],ye=(0,l.useState)(!1),Re=_()(ye,2),Pe=Re[0],se=Re[1],Le=(0,l.useRef)(),ue=new ne.Uo("components.appDetail.appDetailQuick");function De(re){return _e.apply(this,arguments)}function _e(){return _e=p()(s()().mark(function re(z){var W,g;return s()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return(W=N.current)===null||W===void 0||W.show(),ee.next=3,(0,G.jV)({md5:z}).finally(function(){var de;(de=N.current)===null||de===void 0||de.destroy()});case 3:g=ee.sent,g.data&&(g.data.info.HostConfig.NetworkMode=="host"&&g.data.info.Config.ExposedPorts&&Object.keys(g.data.info.Config.ExposedPorts).map(function(de){g.data.info.NetworkSettings.Ports||(g.data.info.NetworkSettings.Ports={}),g.data.info.NetworkSettings.Ports[de]=[{HostIp:"0.0.0.0",HostPort:de.substring(0,de.indexOf("/"))}]}),P(g.data));case 5:case"end":return ee.stop()}},re)})),_e.apply(this,arguments)}return(0,a.jsx)(T.Z,{title:ue.format("drawerTitle",{name:(0,S.fi)((o=t==null?void 0:t.info.Name)!==null&&o!==void 0?o:"","/")}),open:Pe,onClose:function(){se(!1),m.onFinish&&m.onFinish()},width:je.R_,extra:(0,a.jsxs)(oe.u,{access:"canSeeContainerList",space:{split:(0,a.jsx)($.Z,{type:"vertical"})},children:[(t==null?void 0:t.info)&&t.info.State.Running&&(0,a.jsx)(xe.Z,{showConsole:!0,type:"container",name:(0,S.fi)(t.info.Name,"/"),title:(0,S.fi)(t.info.Name,"/"),trigger:(0,a.jsx)(ae.Z,{title:ne.Ob.format("container.detail.file"),children:(0,a.jsx)(J.Z.Link,{children:(0,a.jsx)(H.Z,{})},"file")})}),(t==null?void 0:t.info)&&R.canSeeContainerListManageOp&&(0,a.jsx)(B,{containerInfo:t.info}),(t==null?void 0:t.info)&&t.info.State.Running&&(0,a.jsx)(n.Z,{containerInfo:t.info,showTriggerButton:!0}),(t==null?void 0:t.info)&&t.info.State.Running&&(0,a.jsx)(b,{containerInfo:t.info,showTriggerButton:!0})]}),children:(0,a.jsx)(U.Z,{ref:N,children:(0,a.jsxs)(X.Z,{vertical:!0,gap:20,children:[t&&(0,a.jsx)(oe.u,{access:"canSeeContainerList",children:(0,a.jsx)(ge.Z,{ref:Le,ghost:!0,data:t==null?void 0:t.info,onFinish:p()(s()().mark(function re(){return s()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,De(t.info.Id);case 2:return W.t0=W.sent,W.abrupt("return",[W.t0]);case 4:case"end":return W.stop()}},re)}))})}),t&&(0,a.jsx)(oe.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,a.jsx)(M.Z,{ghost:!0,data:t,checkContainerUpgrade:function(){se(!1),m.onUpgradeFinish&&m.onUpgradeFinish()}})}),t&&(0,a.jsx)(r,{data:t}),t&&(0,a.jsx)(y.Z,{data:t,ghost:!0}),(0,a.jsx)(te.Z,{data:t==null?void 0:t.info,ghost:!0}),t&&(0,a.jsx)(d.Z,{data:t.info,ghost:!0}),(t==null?void 0:t.info.Config.Labels)&&(0,a.jsx)(f.Z,{title:(0,a.jsx)(F.Z,{}),ghost:!0,subTitle:ue.format("labelTitle"),children:(0,a.jsx)(E.Z,{column:1,bordered:!0,children:t.info.Config.Labels&&Object.entries(t.info.Config.Labels).map(function(re){var z=_()(re,2),W=z[0],g=z[1];return(0,a.jsx)(E.Z.Item,{label:W,children:g},W)})})})]})})})}),h=L},46272:function(Te,ce,e){e.d(ce,{Z:function(){return Se}});var me=e(15009),_=e.n(me),fe=e(99289),s=e.n(fe),le=e(5574),p=e.n(le),l=e(5251),y=e(184),G=e(62370),D=e(5966),H=e(24739),F=e(64317),T=e(52688),$=e(97462),ae=e(40056),J=e(42075),X=e(67294),E=e(1699),te=e(80821),ge=e(97857),M=e.n(ge),xe=e(51663),u=e(85893);function Me(B){return(0,u.jsx)(G.Z,M()(M()({},B),{},{children:(0,u.jsx)(xe.Z,{showText:function(U){return U.toHexString()},allowClear:!0,presets:[{label:"Color",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}var S=e(87662),Oe=e(29453),je=e(3616),ne=e(36146),a=(0,X.forwardRef)(function(B,n){var U;(0,X.useImperativeHandle)(n,function(){return{edit:function(x){Ze(!0),Ie(x),d.current&&d.current.setFieldsValue({tag:[x.tag],tagColor:x.tagColor,enableShowGroup:x.enableShowGroup})}}});var d=(0,X.useRef)(),oe=(0,X.useState)(0),V=p()(oe,2),O=V[0],c=V[1],Z=(0,X.useState)([]),w=p()(Z,2),f=w[0],K=w[1],Ce=(0,X.useState)(),Y=p()(Ce,2),I=Y[0],j=Y[1],r=(U=B.containerDetail)===null||U===void 0?void 0:U.info,Q=(0,X.useState)(!1),pe=p()(Q,2),ie=pe[0],Ze=pe[1],q=new ne.Uo("components.appDetail.tagCreate");function Ie(A){d.current&&d.current.setFieldsValue({title:A.title,description:A.description,url:A.url,icon:A.icon,name:A.name})}return(0,X.useEffect)(function(){j([]),(0,Oe.e1)().then(function(A){j(A.data.list)})},[O]),(0,X.useEffect)(function(){r&&(0,S.K3)().then(function(A){var x=[];r.NetworkSettings&&r.NetworkSettings.Ports&&Object.keys(r.NetworkSettings.Ports).map(function(i){r.NetworkSettings.Ports[i]&&r.NetworkSettings.Ports[i].map(function(k){k.HostPort&&x.push("http://".concat(A.data.serverUrl,":").concat(k.HostPort))})}),K(x)})},[B.containerDetail]),(0,u.jsxs)(y.a,{drawerProps:{forceRender:!0,width:je.R_},open:ie,onFinish:function(){var A=s()(_()().mark(function x(i){var k,b,L,h;return _()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return L="",i.tagColor&&i.tagColor.toHexString?i.tagColor.cleared||(L=i.tagColor.toHexString()):L=i.tagColor,h=(k=i.enableShowGroup)!==null&&k!==void 0?k:B.defaultEnableShowGroup,C.next=5,(0,Oe.A9)({enableShowGroup:h,tag:i.tag?i.tag[0]:"",tagColor:L,name:(b=r==null?void 0:r.Name)!==null&&b!==void 0?b:i.name,title:h?i.title:"",description:h?i.description:"",url:h?i.url:"",icon:h?i.icon:""});case 5:return c(O+1),B.onFinish&&B.onFinish({tag:i.tag,tagColor:i.tagColor,enableShowGroup:h}),C.abrupt("return",!0);case 8:case"end":return C.stop()}},x)}));return function(x){return A.apply(this,arguments)}}(),formRef:d,title:q.format("drawerTitle"),trigger:B.trigger,onOpenChange:function(x){var i;Ze(x),!x&&(!((i=d.current)===null||i===void 0)&&i.resetFields)&&d.current.resetFields()},children:[B.defaultEnableShowGroup&&(0,u.jsx)(G.Z,{children:(0,u.jsx)(ae.Z,{message:new ne.Uo("system.home.tag").format("emptyTip")})}),(0,u.jsx)(D.Z,{name:"name",hidden:!0}),(0,u.jsxs)(H.UW,{children:[(0,u.jsx)(F.Z,{width:"lg",label:q.format("formTag"),layout:"vertical",required:!0,rules:[{required:!0}],onChange:function(x){var i=I&&I.find(function(R){return x&&x.length>=1&&R.tag==x[0]});if(i){var k,b,L,h=i.item.find(function(R){return R.name==(r==null?void 0:r.Name)});(k=d.current)===null||k===void 0||k.setFieldsValue({tagColor:i.tagColor,enableShowGroup:i.enableShowGroup}),h&&h.name&&Ie({name:(b=r==null?void 0:r.Name)!==null&&b!==void 0?b:"",title:h?h.title:(0,l.fi)((L=r==null?void 0:r.Name)!==null&&L!==void 0?L:"","/"),description:h&&h.description,url:h&&h.url,icon:h&&h.icon})}if(!x||x.length==0){var m,C=(m=d.current)===null||m===void 0?void 0:m.getFieldValue("url");if(!C||C==""){var o;!((o=d.current)===null||o===void 0)&&o.resetFields&&d.current.resetFields()}}},options:I&&I.map(function(A){return{lable:A.tag,value:A.tag}}),name:"tag",mode:"tags",fieldProps:{maxCount:1},placeholder:q.format("formTagEmpty")},"tagSelect".concat(O)),!B.defaultEnableShowGroup&&(0,u.jsx)(Me,{label:q.format("formTagColor"),name:"tagColor"})]}),!B.defaultEnableShowGroup&&(0,u.jsx)(E.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(x){var i=x.canSeeEnableCe;return(0,u.jsx)(T.Z,{label:q.format("formEnableShowGroup"),name:"enableShowGroup",disabled:i,fieldProps:{onChange:function(b){if(b){var L,h;Ie({name:(L=r==null?void 0:r.Name)!==null&&L!==void 0?L:"",title:(0,l.fi)((h=r==null?void 0:r.Name)!==null&&h!==void 0?h:"","/")})}}}})}}),(0,u.jsx)($.Z,{name:["enableShowGroup"],children:function(x){var i=x.enableShowGroup;return(i||B.defaultEnableShowGroup)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(J.Z.Compact,{children:[B.containerDetail&&(0,u.jsx)(F.Z,{label:q.format("formSelectUrl"),width:"sm",name:"selectUrl",options:f.map(function(k){return{label:k,value:k}}),onChange:function(b){var L;!((L=d.current)===null||L===void 0)&&L.setFieldValue&&d.current.setFieldValue("url",b)}}),(0,u.jsx)(D.Z,{label:q.format("formUrl"),name:"url",width:"md"}),(0,u.jsx)(G.Z,{label:" ",children:(0,u.jsx)(te.Z,{action:function(){var b;return(0,Oe.R3)({url:(b=d.current)===null||b===void 0?void 0:b.getFieldValue("url")})},onSuccess:function(b){var L,h,m;(L=d.current)===null||L===void 0||L.setFieldValue("icon",b.data.icon),(h=d.current)===null||h===void 0||h.setFieldValue("title",b.data.title),(m=d.current)===null||m===void 0||m.setFieldValue("description",b.data.description)},children:q.format("getUrlDetailButton")})})]}),(0,u.jsxs)(H.UW,{children:[(0,u.jsx)(D.Z,{label:q.format("formTitle"),name:"title"}),(0,u.jsx)(D.Z,{label:q.format("formDescription"),name:"description"})]}),(0,u.jsx)(H.UW,{children:(0,u.jsx)(D.Z,{width:"lg",placeholder:q.format("formIconEmpty"),label:q.format("formIcon"),name:"icon"})})]})}})]})}),Se=a},81146:function(Te,ce,e){var me=e(97857),_=e.n(me),fe=e(15009),s=e.n(fe),le=e(99289),p=e.n(le),l=e(67294),y=e(97269),G=e(62370),D=e(5966),H=e(97462),F=e(82346),T=e(71230),$=e(15746),ae=e(34041),J=e(83622),X=e(84567),E=e(42075),te=e(80821),ge=e(23430),M=e(93162),xe=e.n(M),u=e(78267),Me=e.n(u),S=e(75458),Oe=e.n(S),je=e(12323),ne=e(4244),a=e.n(ne),Se=e(24078),B=e(36146),n=e(85893),U,d,oe,V={decorations:{matchBackground:"",matchBorder:"#FFFF00",activeMatchBackground:"#FFFF0066",matchOverviewRuler:"",activeMatchColorOverviewRuler:""}},O=(0,l.forwardRef)(function(c,Z){var w=(0,l.useRef)(),f=(0,F.useModel)("subscriber"),K=new B.Uo("components.containerLog");(0,l.useImperativeHandle)(Z,function(){return{fit:function(){U.clear(),oe.fit()},start:function(){return p()(s()().mark(function j(){return s()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,Ce({lineTotal:500});case 2:case"end":return Q.stop()}},j)}))()},close:function(){f.progress.close(c.id)}}});function Ce(I){return Y.apply(this,arguments)}function Y(){return Y=p()(s()().mark(function I(j){return s()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:f.progress.close(c.id),U.clear(),j.download=!1,c.request(j);case 4:case"end":return Q.stop()}},I)})),Y.apply(this,arguments)}return(0,l.useEffect)(function(){return window.addEventListener("resize",function(){oe.fit()}),U=new ne.Terminal(_()(_()({},je.X),{},{fontSize:12,lineHeight:1.2,allowProposedApi:!0})),oe=new u.FitAddon,d=new S.SearchAddon({}),U.loadAddon(oe),U.loadAddon(d),U.open(document.getElementById("terminal-container-log")),oe.fit(),f.addDataHandler(c.id,function(I){U.write(I.data)}),function(){U.clear(),U.reset(),f.progress.close(c.id)}},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y.A,{submitter:!1,layout:"horizontal",onFinish:function(j){var r;Ce({id:c.id,lineTotal:parseInt(j.lineTotal),showTime:(r=j.showTime)!==null&&r!==void 0?r:!1})},formRef:w,children:(0,n.jsxs)(T.Z,{gutter:[10,0],children:[(0,n.jsx)($.Z,{span:8,children:(0,n.jsx)(G.Z,{name:"lineTotal",initialValue:"500",label:K.format("formLineTotal"),children:(0,n.jsxs)(ae.Z,{defaultValue:"500",onChange:function(j){var r;(r=w.current)===null||r===void 0||r.submit()},children:[(0,n.jsx)(ae.Z.Option,{value:"100",children:K.format("formLineTotalOption",{number:"100"})}),(0,n.jsx)(ae.Z.Option,{value:"200",children:K.format("formLineTotalOption",{number:"200"})}),(0,n.jsx)(ae.Z.Option,{value:"500",children:K.format("formLineTotalOption",{number:"500"})}),(0,n.jsx)(ae.Z.Option,{value:"1000",children:K.format("formLineTotalOption",{number:"1000"})}),(0,n.jsx)(ae.Z.Option,{value:"-1",children:K.format("formLineTotalOptionAll")})]})})}),(0,n.jsx)($.Z,{children:(0,n.jsx)(J.ZP,{onClick:function(){U.clear()},children:K.format("clearButton")})}),(0,n.jsx)($.Z,{children:(0,n.jsx)(G.Z,{name:"showTime",valuePropName:"checked",children:(0,n.jsx)(X.Z,{onChange:function(j){var r;(r=w.current)===null||r===void 0||r.submit()},children:K.format("formShowTime")})})}),(0,n.jsx)($.Z,{children:(0,n.jsx)(D.Z,{label:K.format("formKeywork"),name:"keywork",fieldProps:{onPressEnter:function(){var j;d.findNext((j=w.current)===null||j===void 0?void 0:j.getFieldValue("keywork"),V)},onChange:function(j){d.findNext(j.target.value,V)}},placeholder:K.format("formKeyworkEmpty")})}),(0,n.jsx)($.Z,{children:(0,n.jsx)(H.Z,{name:["keywork"],children:function(j){var r=j.keywork;return(0,n.jsxs)(E.Z,{size:10,children:[(0,n.jsx)(J.ZP,{onClick:function(){d.findNext(r,V)},children:K.format("formKeyworkNext")},"next"),(0,n.jsx)(J.ZP,{onClick:function(){d.findPrevious(r,V)},children:K.format("formKeyworkPrev")},"prev")]})}})}),(0,n.jsx)($.Z,{children:(0,n.jsx)(te.Z,{icon:(0,n.jsx)(ge.Z,{}),action:p()(s()().mark(function I(){var j,r,Q;return s()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(!c.download){ie.next=5;break}return ie.next=3,c.download({lineTotal:parseInt((j=w.current)===null||j===void 0?void 0:j.getFieldValue("lineTotal")),showTime:(r=w.current)===null||r===void 0?void 0:r.getFieldValue("showTime")});case 3:Q=ie.sent,(0,M.saveAs)(Q.data,Q.name);case 5:case"end":return ie.stop()}},I)})),children:K.format("downloadButton")})})]})}),(0,n.jsx)("div",{style:{marginTop:"20px",height:c.showInDrawer?"75vh":"85vh"},id:"terminal-container-log"})]})});ce.Z=O},27619:function(Te,ce,e){e.d(ce,{Z:function(){return l}});var me=e(5574),_=e.n(me),fe=e(82346),s=e(67294),le=e(64389),p=e(85893);function l(y){var G=(0,fe.useModel)("@@initialState"),D=G.initialState,H="chart-area-".concat(y.name),F=(0,s.useState)(),T=_()(F,2),$=T[0],ae=T[1],J={};y.data.forEach(function(E){E.show===!1?J[E.name]=!1:J[E.name]=!0});var X={tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},valueFormatter:function(te){return y.yValueFormatter?y.yValueFormatter(te):te}},legend:{selected:J},grid:{left:"0",right:"0",bottom:"0",top:"30",containLabel:!0},xAxis:{type:"category",data:y.data[0].data.map(function(E){return E.date}),boundaryGap:!1,axisLabel:{rotate:20}},yAxis:{type:"value",axisLabel:{formatter:y.yLabelFormatter},max:function(te){if(y.yDomainMaxCallback)return y.yDomainMaxCallback(te)}},series:[]};return(0,s.useEffect)(function(){var E="",te=window.matchMedia("(prefers-color-scheme: dark)");(D==null?void 0:D.theme.algorithm)=="dark"||te.matches?E="dark":E="",$&&!$.isDisposed()&&$.dispose();var ge=document.getElementById(H),M=le.S1(ge,E);M.setOption(X);var xe=new ResizeObserver(function(){M.resize()});ge&&xe.observe(ge),ae(M)},[D]),(0,s.useEffect)(function(){$&&!$.isDisposed()&&$.setOption({legend:{data:y.data.map(function(E){return E.name})},xAxis:{data:y.data[0].data.map(function(E){return E.date})},series:y.data.map(function(E){return{name:E.name,type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:E.data.map(function(te){return te.value})}})})},[y.data]),(0,p.jsx)("div",{style:{height:200},id:H})}},65913:function(Te,ce,e){var me=e(5574),_=e.n(me),fe=e(74330),s=e(67294),le=e(85893),p=(0,s.forwardRef)(function(l,y){(0,s.useImperativeHandle)(y,function(){return{show:function(){F(!0)},destroy:function(){F(!1)}}});var G=(0,s.useState)(!1),D=_()(G,2),H=D[0],F=D[1];return(0,le.jsx)(fe.Z,{spinning:H,size:"default",children:l.children})});ce.Z=p},84410:function(Te,ce,e){e.d(ce,{a:function(){return y},i:function(){return p}});var me=e(15009),_=e.n(me),fe=e(99289),s=e.n(fe),le=e(82346);function p(D){return l.apply(this,arguments)}function l(){return l=s()(_()().mark(function D(H){return _()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.abrupt("return",(0,le.request)("/api/app/container/get-stat-info",{method:"POST",data:H}));case 1:case"end":return T.stop()}},D)})),l.apply(this,arguments)}function y(D){return G.apply(this,arguments)}function G(){return G=s()(_()().mark(function D(H){return _()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.abrupt("return",(0,le.request)("/api/app/container/get-process-info",{method:"POST",data:H}));case 1:case"end":return T.stop()}},D)})),G.apply(this,arguments)}}}]);
