"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4214],{1699:function(Y,O,n){n.d(O,{u:function(){return S}});var I=n(97857),d=n.n(I),R=n(67294),o=n(82346),p=n(42075),_=n(85893),S=function(x){var s=(0,o.useAccess)(),E=Array.isArray(x.access)?x.access:[x.access];return x.space?(0,_.jsx)(p.Z,d()(d()({},x.space),{},{children:E.every(function(T){return s[T]})?x.children:x.fallback})):(0,_.jsx)(_.Fragment,{children:E.every(function(T){return s[T]})?x.children:x.fallback})}},80821:function(Y,O,n){n.d(O,{Z:function(){return x}});var I=n(5574),d=n.n(I),R=n(24963),o=n(86738),p=n(28036),_=n(83062),S=n(67294),g=n(85893);function x(s){var E=(0,S.useState)(!1),T=d()(E,2),L=T[0],y=T[1],M=(0,S.useContext)(R.Z),A=M.lang,U=M.notice,W=M.message,D=function(){y(!0);var q=s.action();q instanceof Promise?q.then(function(r){if(y(!1),r){typeof s.onSuccess=="function"&&s.onSuccess(r);var c="";s.messageSuccess?typeof s.messageSuccess=="function"?c=s.messageSuccess(r):c=s.messageSuccess.indexOf("notification.")==0?A(s.messageSuccess):s.messageSuccess:c=A("notification.finish"),s.asynced?W.info(c):W.success(c)}}).catch(function(r){y(!1),typeof s.onError=="function"&&s.onError(r)}):y(!1)};return s.confirm?(0,g.jsx)(o.Z,{style:{width:500},title:s.confirmTitle?s.confirmTitle:A("notification.title.tip"),description:typeof s.confirm=="string"&&s.confirm.indexOf("notification.")==0?A(s.confirm):s.confirm,onConfirm:D,okText:"Yes",cancelText:"No",onOpenChange:s.confirmOnOpenChange,children:(0,g.jsx)(p.ZP,{block:s.block,disabled:s.disabled,icon:s.icon,loading:L,danger:s.danger,type:s.type,children:s.children})}):(0,g.jsx)(_.Z,{title:s.tips,children:(0,g.jsx)(p.ZP,{block:s.block,style:s.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:s.disabled,icon:s.icon,loading:L,onClick:D,danger:s.danger,type:s.type,children:s.children})})}},81366:function(Y,O,n){var I=n(19632),d=n.n(I),R=n(5574),o=n.n(R),p=n(27254),_=n(42075),S=n(28036),g=n(25593),x=n(67294),s=n(31112),E=n(85893),T=(0,x.forwardRef)(function(L,y){var M=(0,x.useContext)(s.Z),A=M.showPath,U=(0,x.useState)([{title:"\u6839\u76EE\u5F55",path:"/"}]),W=o()(U,2),D=W[0],J=W[1];(0,x.useImperativeHandle)(y,function(){return{addHistory:function(c,b){J([].concat(d()(D),[{title:c,path:b}]))},initHistory:function(c){J([{title:"\u6839\u76EE\u5F55",path:"/"}].concat(d()(c)))}}});var q=function(c){A?A(D[c].title,D[c].path):L.showPath&&L.showPath(D[c].title,D[c].path);var b=D.filter(function(i,ee){return ee<=c});J(d()(b))};return(0,E.jsxs)(_.Z,{children:[(0,E.jsx)(_.Z.Compact,{children:D.map(function(r,c){return(0,E.jsx)(S.ZP,{icon:(0,E.jsx)(p.Z,{}),type:"dashed",onClick:function(){q(c)},children:r.title},c)})}),D.length>=2&&(0,E.jsx)(g.Z.Text,{copyable:{text:D[D.length-1].path}})]})});O.Z=T},31112:function(Y,O,n){var I=n(67294),d=(0,I.createContext)({});O.Z=d},68536:function(Y,O,n){n.d(O,{Z:function(){return s}});var I=n(24963),d=n(93613),R=n(36693),o=n(2741),p=n(25593),_=n(42075),S=n(67294),g=n(85893),x=0;function s(E){var T=(0,S.useContext)(I.Z),L=T.message;return E.isDir?(0,g.jsx)(p.Z.Link,{onClick:function(){E.onClick&&E.onClick()},children:(0,g.jsxs)(_.Z,{children:[(0,g.jsx)(d.Z,{}),E.showName]})}):E.isLink?(0,g.jsx)(p.Z.Link,{onClick:function(){E.onClick&&E.onClick()},children:(0,g.jsxs)(_.Z,{children:[(0,g.jsx)(R.Z,{}),E.showName]})}):(0,g.jsx)(p.Z.Text,{onClick:function(){if(x++,x==2){x=0,E.onClick&&E.onClick();return}setTimeout(function(){x==1&&L.info("\u53CC\u51FB\u67E5\u770B\u6587\u4EF6\u5185\u5BB9"),x=0},400)},style:{cursor:"pointer"},children:(0,g.jsxs)(_.Z,{children:[(0,g.jsx)(o.Z,{}),E.showName]})})}},92754:function(Y,O,n){var I=n(5574),d=n.n(I),R=n(67294),o=n(82346),p=n(38703),_=n(85893),S=(0,R.forwardRef)(function(g,x){var s=(0,R.useState)(""),E=d()(s,2),T=E[0],L=E[1];(0,R.useImperativeHandle)(x,function(){return{setFinish:function(){W({finish:{downloading:100,extracting:100}})},setStart:function(J){J&&L(J),W({start:{downloading:0,extracting:0}})},close:function(){y.progress.close("image:pull:"+T),W({start:{downloading:0,extracting:0}})}}});var y=(0,o.useModel)("subscriber");y.addDataHandler("image:pull:"+T,function(D){W(D.data)});var M=(0,R.useState)(),A=d()(M,2),U=A[0],W=A[1];return(0,R.useEffect)(function(){return W({start:{downloading:0,extracting:0}}),function(){y.progress.close("image:pull:"+T)}},[]),(0,_.jsx)(_.Fragment,{children:U&&Object.keys(U).map(function(D){return(0,_.jsx)(p.Z,{percent:U[D].downloading,success:{percent:U[D].extracting}},D)})})});O.Z=S},76428:function(Y,O,n){n.d(O,{Z:function(){return o}});var I=n(25593),d=n(67294),R=n(85893);function o(p){return(0,R.jsx)(I.Z.Text,{copyable:!0,children:p.title})}},24963:function(Y,O,n){var I=n(67294),d=(0,I.createContext)({});O.Z=d},65913:function(Y,O,n){var I=n(5574),d=n.n(I),R=n(74330),o=n(67294),p=n(85893),_=(0,o.forwardRef)(function(S,g){(0,o.useImperativeHandle)(g,function(){return{show:function(){T(!0)},destroy:function(){T(!1)}}});var x=(0,o.useState)(!1),s=d()(x,2),E=s[0],T=s[1];return(0,p.jsx)(R.Z,{spinning:E,size:"default",children:S.children})});O.Z=_},7267:function(Y,O,n){n.r(O),n.d(O,{default:function(){return ze}});var I=n(19632),d=n.n(I),R=n(15009),o=n.n(R),p=n(99289),_=n.n(p),S=n(5574),g=n.n(S),x=n(90078),s=n(78099),E=n(37476),T=n(62370),L=n(5966),y=n(28036),M=n(25593),A=n(42075),U=n(66309),W=n(96074),D=n(83062),J=n(84567),q=n(50136),r=n(67294),c=n(82346),b=n(18148),i=n(5251),ee=n(80821),me=n(43425),he=n(64789),ve=n(58638),ge=n(1912),De=n(28307),_e=n(96042),Ee=n(67255),je=n(24963),ae=n(3393),xe=n(93162),Pe=n(95591),le=n(184),ce=n(68536),Re=n(81366),e=n(85893),Oe=(0,r.forwardRef)(function(w,re){(0,r.useImperativeHandle)(re,function(){return{show:function(){}}});var se=(0,r.useState)(""),H=g()(se,2),$=H[0],j=H[1],t=(0,r.useState)(!1),N=g()(t,2),V=N[0],G=N[1],Q=(0,r.useRef)(),z=(0,r.useRef)(),Z=function(a,f){j(f)};return(0,e.jsx)(le.a,{open:V,submitter:!1,title:"\u955C\u50CF\u6587\u4EF6\u67E5\u770B",onOpenChange:function(a){G(a),j(a?"/":"")},trigger:(0,e.jsx)(M.Z.Link,{children:(0,e.jsx)(Pe.Z,{})},"file"),children:(0,e.jsx)(s.Z,{headerTitle:(0,e.jsx)(Re.Z,{ref:z,showPath:Z}),scroll:{x:"max-content"},search:!1,rowKey:"showName",pagination:{pageSize:500,position:["topRight","bottomRight"]},actionRef:Q,request:_()(o()().mark(function l(){var a;return o()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(console.log($),$!=""){v.next=3;break}return v.abrupt("return",{data:[],total:0,success:!0});case 3:return v.next=5,(0,ae.cD)({md5:w.imageInfo.info.Id,path:$});case 5:return a=v.sent,v.abrupt("return",{data:a.data.info,total:a.data.info.length,success:!0});case 7:case"end":return v.stop()}},l)})),columns:[{title:"\u540D\u79F0",dataIndex:"showName",key:"name",render:function(P,f,v,u,m){var P;return f.isDir?P=(0,e.jsx)(ce.Z,{isDir:!0,onClick:function(){return Z(f.showName,f.name)},showName:f.showName}):f.linkName?P=(0,e.jsx)(ce.Z,{isLink:!0,showName:"".concat(f.showName)}):P=(0,e.jsx)(ce.Z,{showName:f.showName}),P}},{title:"\u6743\u9650",dataIndex:"mode",key:"mode"},{title:"\u7528\u6237",dataIndex:"owner"},{title:"\u7528\u6237\u7EC4",dataIndex:"group"},{title:"\u5927\u5C0F",dataIndex:"size",key:"size"},{title:"\u4FEE\u6539\u65F6\u95F4",dataIndex:"modTime",key:"modTime",render:function(a,f,v,u,m){return(0,i.NF)(f.modTime)},sorter:function(a,f){return new Date(a.modTime).getTime()-new Date(f.modTime).getTime()}}],cardProps:{ghost:!0}},"".concat(w.imageInfo.info.Id,"-").concat($))})}),Te=Oe,Ce=n(65913),Ie=n(87784),Ze=n(40666),Ae=n(77171),ye=n(48689),de=n(45742),ie=n(38345),Se=n(91708),Me=n(85265),K=n(26412),be=n(60940),Fe=n(97269),Be=n(65233),pe=n(2487),Le=n(4393),Ue=n(76428),We=(0,r.forwardRef)(function(w,re){(0,r.useImperativeHandle)(re,function(){return{show:function(u){return _()(o()().mark(function m(){var P,F;return o()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return a(!0),(P=f.current)===null||P===void 0||P.show(),h.prev=2,h.next=5,(0,ae.cd)({imageName:u}).finally(function(){var C;(C=f.current)===null||C===void 0||C.destroy()});case 5:F=h.sent,t(F.data.list),h.next=12;break;case 9:h.prev=9,h.t0=h.catch(2),a(!1);case 12:case"end":return h.stop()}},m,null,[[2,9]])}))()}}});var se=(0,c.useAccess)(),H=(0,r.useState)(),$=g()(H,2),j=$[0],t=$[1],N=(0,r.useState)(""),V=g()(N,2),G=V[0],Q=V[1],z=(0,r.useState)(!1),Z=g()(z,2),l=Z[0],a=Z[1],f=(0,r.useRef)();return(0,e.jsx)(le.a,{open:l,onOpenChange:function(u){a(u),!u&&t(void 0)},title:"\u8FDC\u7A0B Tag \u5217\u8868",isKeyPressSubmit:!0,submitter:!1,drawerProps:{extra:(0,e.jsx)(Fe.A,{isKeyPressSubmit:!0,onFinish:function(u){Q(u.search)},submitter:!1,children:(0,e.jsx)(A.Z.Compact,{children:(0,e.jsx)(T.Z,{style:{margin:0},name:"search",children:(0,e.jsx)(Be.Z,{allowClear:!0,addonBefore:"\u641C\u7D22Tag",placeholder:"\u6309\u56DE\u8F66\u67E5\u8BE2",onClear:function(){Q("")}})})})})},children:(0,e.jsx)(Ce.Z,{ref:f,children:(0,e.jsx)(pe.Z,{rowKey:function(u){return"".concat(u)},grid:{gutter:10,xs:3,sm:3,md:4,lg:4,xl:5,xxl:6},dataSource:j&&j.filter(function(v){return!G||v.indexOf(G)!==-1}),loading:!j||(j==null?void 0:j.length)<=0,renderItem:function(u,m){return(0,e.jsx)(pe.Z.Item,{children:(0,e.jsx)(Le.Z,{style:{height:"60px"},children:(0,e.jsx)("div",{style:{margin:"-10px",wordBreak:"break-word"},children:(0,e.jsx)(Ue.Z,{title:u})})})},m)}})})},"form")}),Ke=We;function we(w){var re=(0,r.useRef)(),se=(0,r.useState)(!1),H=g()(se,2),$=H[0],j=H[1];return(0,e.jsxs)(le.a,{open:$,title:"\u589E\u52A0\u955C\u50CF Tag",onOpenChange:function(N){j(N)},formRef:re,onFinish:function(){var t=_()(o()().mark(function N(V){var G,Q,z;return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,ae._U)({md5:(G=w.imageInfo.info.Id)!==null&&G!==void 0?G:"",tag:(V.imageRespo?V.imageRespo.serverAddress+"/":"")+V.imageTag});case 2:z=l.sent,j(!1),(Q=re.current)===null||Q===void 0||Q.resetFields(),w.onFinish&&w.onFinish();case 6:case"end":return l.stop()}},N)}));return function(N){return t.apply(this,arguments)}}(),trigger:(0,e.jsx)(D.Z,{title:"\u589E\u52A0\u955C\u50CFTag",children:(0,e.jsx)(y.ZP,{type:"link",icon:(0,e.jsx)(he.Z,{})})}),children:[(0,e.jsx)(T.Z,{label:"\u955C\u50CF\u4ED3\u5E93",name:"imageRespo",tooltip:(0,e.jsxs)(e.Fragment,{children:["\u63A8\u9001\u524D\u8BF7\u4FDD\u8BC1\u4ED3\u5E93\u4E2D\u6709\u6307\u5B9A\u7684\u547D\u540D\u7A7A\u95F4, \u5982\u6CA1\u6709\u8BF7\u5148 ",(0,e.jsx)("a",{href:"",target:"_blank",children:"\u6DFB\u52A0\u4ED3\u5E93"})]}),children:(0,e.jsx)(_e.Z,{})}),(0,e.jsx)(L.Z,{fieldProps:{min:2,max:255},rules:[{required:!0}],required:!0,placeholder:"\u53EA\u80FD\u4F7F\u7528\u5C0F\u5199\u82F1\u6587\u5B57\u7B26\u3001\u6570\u5B57\u3001_\u3001-\u3001",label:"\u955C\u50CF\u540D\u79F0",name:"imageTag",tooltip:"\u4F8B\u5982: name:tag\u3001namespace/name:tag\u3001registry/namespace/name:tag"})]})}var ue=n(1699),$e=(0,r.forwardRef)(function(w,re){var se;(0,r.useImperativeHandle)(re,function(){return{show:function(C){return _()(o()().mark(function B(){return o()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return z(!0),k.next=3,ne(C);case 3:case"end":return k.stop()}},B)}))()}}});var H=(0,r.useRef)(),$=(0,r.useState)(),j=g()($,2),t=j[0],N=j[1],V=(0,r.useState)(!1),G=g()(V,2),Q=G[0],z=G[1],Z=(0,r.useContext)(je.Z),l=Z.message,a=(0,r.useState)(0),f=g()(a,2),v=f[0],u=f[1],m=(0,c.useNavigate)(),P=(0,c.useAccess)(),F=(0,r.useRef)(),ne=function(){var h=_()(o()().mark(function C(B){var te,k;return o()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return(te=H.current)===null||te===void 0||te.show(),X.next=3,(0,ae.YU)({md5:B,showLayer:!0}).finally(function(){var fe;(fe=H.current)===null||fe===void 0||fe.destroy()});case 3:k=X.sent,N(k.data);case 5:case"end":return X.stop()}},C)}));return function(B){return h.apply(this,arguments)}}();return(0,r.useEffect)(function(){t&&ne(t==null?void 0:t.info.Id)},[v]),(0,e.jsx)(Me.Z,{title:"\u5FEB\u6377\u67E5\u770B\u955C\u50CF",open:Q,onClose:function(){z(!1),w.onClose&&w.onClose()},width:800,extra:(0,e.jsxs)(A.Z,{split:(0,e.jsx)(W.Z,{type:"vertical"}),children:[(t==null?void 0:t.info)&&(0,e.jsx)(Te,{imageInfo:t}),(t==null?void 0:t.info)&&(0,e.jsx)(we,{imageInfo:t,onFinish:function(){ne(t.info.Id)}})]}),children:(0,e.jsxs)(Ce.Z,{ref:H,children:[!P.canSeeEnableCe&&(0,e.jsx)(Ke,{ref:F}),(0,e.jsxs)(ie.Z,{direction:"column",ghost:!0,gutter:[0,10],children:[(0,e.jsx)(ie.Z,{title:(0,e.jsx)(me.Z,{}),subTitle:"\u5E38\u7528\u64CD\u4F5C",ghost:!0,children:(0,e.jsxs)(A.Z,{children:[(0,e.jsx)(ee.Z,{icon:(0,e.jsx)(ve.Z,{}),action:function(){var C;return(0,ae.Rb)({md5:(C=t==null?void 0:t.info.RepoTags)!==null&&C!==void 0?C:[""]})},onSuccess:function(C){var B=new Blob([C],{type:"application/tar"});(0,xe.saveAs)(B,(t==null?void 0:t.info.RepoTags.join("-"))+".tar")},children:"\u5BFC\u51FA"}),(0,e.jsx)(W.Z,{}),(0,e.jsx)(ue.u,{access:"canSeeImageListManageDelete",children:(0,e.jsx)(ee.Z,{icon:(0,e.jsx)(Ie.Z,{}),danger:!0,type:"primary",action:function(){var C;return(0,b.ao)({md5:[(C=t==null?void 0:t.info.Id)!==null&&C!==void 0?C:""],force:!0})},onSuccess:function(){m("/image/list")},confirm:"notification.confirm.title",children:"\u5F3A\u5236\u5220\u9664"})})]})}),(0,e.jsx)(ie.Z,{title:(0,e.jsx)(Ze.Z,{}),subTitle:"Tag \u5217\u8868",ghost:!0,children:(0,e.jsx)(Se.Rs,{grid:{gutter:40,column:2},headerTitle:!1,metas:{content:{render:function(C,B,te){return(0,e.jsx)(U.Z,{color:"blue",children:(0,e.jsx)(M.Z.Text,{copyable:!0,children:B})},te)}},title:{render:function(C,B,te){return(0,e.jsxs)(A.Z,{children:[(0,e.jsxs)(ee.Z,{action:function(){return(0,ae.Gb)({tag:B,type:"push"})},children:[(0,e.jsx)(ge.Z,{})," Push"]}),(0,e.jsxs)(ee.Z,{action:function(){return(0,ae.Gb)({tag:B,type:"pull"})},children:[(0,e.jsx)(Ae.Z,{})," Pull"]}),!P.canSeeEnableCe&&(0,e.jsx)(y.ZP,{onClick:function(){var oe;(oe=F.current)===null||oe===void 0||oe.show(B)},children:"\u8FDC\u7A0BTag"}),(0,e.jsx)(ue.u,{access:"canSeeImageListManage",children:(0,e.jsx)(ee.Z,{action:function(){return(0,ae.Pn)({tag:B})},danger:!0,onSuccess:function(oe){return u(v+1),!0},confirm:"notification.confirm.title",children:(0,e.jsx)(ye.Z,{})})})]},te)}}},dataSource:t==null?void 0:t.info.RepoTags})}),t&&(0,e.jsx)(ie.Z,{title:(0,e.jsx)(de.Z,{}),subTitle:"\u955C\u50CF\u8BE6\u60C5",ghost:!0,children:(0,e.jsxs)(K.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,e.jsx)(K.Z.Item,{label:"ID",children:(0,e.jsx)(M.Z.Text,{editable:{tooltip:"\u4FEE\u6539\u955C\u50CF\u5907\u6CE8\u540D\u79F0",onChange:function(){var h=_()(o()().mark(function B(te){var k;return o()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,(0,b.Fj)({tag:t==null?void 0:t.info.RepoTags[0],title:te});case 2:k=X.sent,ne(t.info.Id),l.success("\u4FEE\u6539\u955C\u50CF\u540D\u79F0\u6210\u529F");case 5:case"end":return X.stop()}},B)}));function C(B){return h.apply(this,arguments)}return C}()},children:t==null?void 0:t.info.Id})}),(0,e.jsx)(K.Z.Item,{label:"Parent",children:t==null?void 0:t.info.Parent}),(0,e.jsx)(K.Z.Item,{label:"Size",children:(0,i.FI)((se=t==null?void 0:t.info.Size)!==null&&se!==void 0?se:0)}),(0,e.jsx)(K.Z.Item,{label:"Created",children:t==null?void 0:t.info.Created}),(0,e.jsxs)(K.Z.Item,{label:"Build",children:["Docker ",t==null?void 0:t.info.DockerVersion," ",t==null?void 0:t.info.Os," ",t==null?void 0:t.info.Architecture]}),(0,e.jsx)(K.Z.Item,{label:"Labels",children:(0,e.jsx)(K.Z,{column:1,bordered:!0,children:(t==null?void 0:t.info.Config.Labels)&&Object.keys(t==null?void 0:t.info.Config.Labels).map(function(h){return(0,e.jsx)(K.Z.Item,{label:h,children:t==null?void 0:t.info.Config.Labels[h]},h)})})})]})}),(0,e.jsx)(ie.Z,{title:(0,e.jsx)(de.Z,{}),subTitle:"Dockerfile \u8BE6\u60C5",ghost:!0,children:(0,e.jsxs)(K.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,e.jsx)(K.Z.Item,{label:"CMD",children:t==null?void 0:t.info.Config.Cmd}),(0,e.jsx)(K.Z.Item,{label:"ENTRYPOINT",children:t==null?void 0:t.info.Config.Entrypoint}),(0,e.jsx)(K.Z.Item,{label:"EXPOSE",children:(t==null?void 0:t.info.Config.ExposedPorts)&&Object.keys(t==null?void 0:t.info.Config.ExposedPorts).map(function(h){return(0,e.jsx)(U.Z,{color:"gray",children:h},h)})}),(0,e.jsx)(K.Z.Item,{label:"VOLUME",children:(t==null?void 0:t.info.Config.Volumes)&&Object.keys(t==null?void 0:t.info.Config.Volumes).map(function(h){return(0,e.jsx)(U.Z,{color:"gray",children:h},h)})}),(0,e.jsx)(K.Z.Item,{label:"Env",children:(0,e.jsx)(K.Z,{column:1,bordered:!0,children:(t==null?void 0:t.info.Config.Env)&&(t==null?void 0:t.info.Config.Env.map(function(h,C){var B=h.split("=");return(0,e.jsx)(K.Z.Item,{label:B[0],children:B[1]},C)}))})})]})}),(t==null?void 0:t.layer)&&(0,e.jsxs)(ie.Z,{title:(0,e.jsx)(de.Z,{}),subTitle:"Layers",ghost:!0,children:[(0,e.jsx)(be.Z,{rowKey:"CreatedBy",dataSource:t.layer.reverse(),columns:[{title:"Layer",dataIndex:"CreatedBy",key:"CreatedBy"}]}),";"]})]})]})})}),Ne=$e;function ze(){var w=(0,r.useContext)(je.Z),re=w.message,se=w.notice,H=w.lang,$=(0,c.useAccess)(),j=(0,r.useRef)(),t=(0,r.useState)({force:!1}),N=g()(t,2),V=N[0],G=N[1],Q=(0,r.useRef)(),z=(0,r.useRef)();return(0,e.jsxs)(x._z,{header:{extra:[(0,e.jsx)(ue.u,{access:"canSeeImageListManageCreate",children:(0,e.jsx)(c.Link,{to:"/image/create",children:(0,e.jsx)(y.ZP,{type:"primary",children:"\u521B\u5EFA&\u5BFC\u5165\u955C\u50CF"},"create")},"create")},"create"),(0,e.jsx)(ue.u,{access:"canSeeImageListPull",children:(0,e.jsx)(De.Z,{onFinish:function(){var l,a;!((l=j.current)===null||l===void 0)&&l.reloadAndRest&&((a=j.current)===null||a===void 0||a.reloadAndRest())}},"remote")},"remote")]},children:[(0,e.jsx)(Ne,{ref:z,onClose:function(){var l,a;!((l=j.current)===null||l===void 0)&&l.reloadAndRest&&((a=j.current)===null||a===void 0||a.reloadAndRest())}}),(0,e.jsx)(s.Z,{scroll:{x:"max-content"},rowKey:"Id",columns:[{title:"\u540D\u79F0",dataIndex:"title",render:function(l,a,f,v,u){var m=a.Id.substring(7,19);return a.Title&&(m=a.Title),(0,e.jsx)(M.Z.Link,{onClick:function(){var F;!((F=z.current)===null||F===void 0)&&F.show&&z.current.show(a.Id)},children:m},"title-".concat(f))}},{title:"Tag",dataIndex:"tag",render:function(l,a,f,v){return(0,e.jsx)(A.Z,{direction:"vertical",style:{textAlign:"left"},children:a.RepoTags.map(function(u,m){return(0,e.jsxs)(A.Z,{children:[(0,e.jsx)(U.Z,{color:"#2db7f5",children:(0,e.jsx)(M.Z.Text,{copyable:!0,title:u,style:{color:"#ffffff"},children:u},"tag-"+m)},"tag-".concat(m)),a.Containers>0&&(0,e.jsx)(U.Z,{color:"cyan",children:"\u4F7F\u7528\u4E2D"},"use-".concat(m))]},m)})},a.Id)}},{title:"\u4F7F\u7528\u72B6\u6001",hidden:!0,dataIndex:"use",valueEnum:{1:"\u4F7F\u7528\u4E2D",2:"\u672A\u4F7F\u7528"}},{title:"\u67B6\u6784",width:80,search:!1,render:function(l,a,f,v,u){if(a.Labels&&a.Labels["com.dpanel.image.arch"])return(0,e.jsx)(U.Z,{children:a.Labels["com.dpanel.image.arch"]},"arch"+a.Id)}},{title:"\u5927\u5C0F",dataIndex:"size",ellipsis:!0,width:"120px",search:!1,sorter:function(l,a){return parseFloat(l.Size)-parseFloat(a.Size)},render:function(l,a,f,v){return(0,e.jsx)("div",{children:(0,i.FI)(parseFloat(a.Size))},a.Id)}},{title:"\u521B\u5EFA\u65E5\u671F",dataIndex:"Created",ellipsis:!0,search:!1,width:"180px",render:function(l,a,f,v){return(0,e.jsx)("div",{children:(0,i.ZM)(a.Created*1e3)},a.Id)},sorter:function(l,a){return l.Created-a.Created}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:100,fixed:"right",hidden:!$.canSeeImageListManage,render:function(l,a,f,v){return(0,e.jsxs)(A.Z,{split:(0,e.jsx)(W.Z,{type:"vertical"}),children:[(0,e.jsx)(M.Z.Link,{onClick:function(){var m;!((m=z.current)===null||m===void 0)&&m.show&&z.current.show(a.Id)},children:(0,e.jsx)(D.Z,{title:"\u7BA1\u7406",children:(0,e.jsx)(me.Z,{})})},"edit"),(0,e.jsx)(c.Link,{to:"/app/create/image?imageId="+a.RepoTags[0],children:(0,e.jsx)(D.Z,{title:"\u521B\u5EFA\u5BB9\u5668",children:(0,e.jsx)(he.Z,{})})},"create")]})}}],request:function(){var Z=_()(o()().mark(function l(a,f,v){var u;return o()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,b.KG)({tag:a.tag,title:a.title,use:a.use?a.use=="1"?1:2:0});case 2:if(u=P.sent,!(!u||!u.data||!u.data.list)){P.next=5;break}return P.abrupt("return",{data:[],success:!0,total:0});case 5:return u.data.list.map(function(F){var ne="";F.RepoTags.map(function(h){u.data.title[h]&&(ne=u.data.title[h])}),F.Title=ne}),P.abrupt("return",{data:u.data.list,success:!0,total:u.data.list.length});case 7:case"end":return P.stop()}},l)}));return function(l,a,f){return Z.apply(this,arguments)}}(),pagination:(0,Ee.O)(),search:{collapsed:!1},rowSelection:$.canSeeImageListManage?{defaultSelectedRowKeys:[],alwaysShowAlert:!0}:void 0,actionRef:j,tableAlertOptionRender:function(l){var a=l.selectedRowKeys,f=l.selectedRows;return(0,e.jsxs)(A.Z,{size:16,children:[(0,e.jsx)(ee.Z,{icon:(0,e.jsx)(ve.Z,{}),action:function(){var u=[];return f.map(function(m){u.push.apply(u,d()(m.RepoTags))}),(0,ae.Rb)({md5:u})},onSuccess:function(u){var m=f.map(function(F){return F.RepoTags[0]}),P=new Blob([u],{type:"application/tar"});(0,xe.saveAs)(P,m.join("-")+".tar")},children:"\u5BFC\u51FA"}),(0,e.jsxs)(E.Y,{formRef:Q,title:"\u6279\u91CF\u63A8\u9001\u955C\u50CF",trigger:(0,e.jsx)(y.ZP,{icon:(0,e.jsx)(ge.Z,{}),children:"\u540C\u6B65\u81F3\u5176\u5B83\u4ED3\u5E93"}),onFinish:function(){var v=_()(o()().mark(function u(m){var P,F,ne;return o()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,b.KX)({md5:a,registryId:m.registryId,newNamespace:m.newNamespace});case 2:return ne=C.sent,(P=j.current)===null||P===void 0||P.reload(),!((F=j.current)===null||F===void 0)&&F.clearSelected&&j.current.clearSelected(),C.abrupt("return",!0);case 6:case"end":return C.stop()}},u)}));return function(u){return v.apply(this,arguments)}}(),children:[(0,e.jsx)(T.Z,{name:"registryId",hidden:!0}),(0,e.jsx)(T.Z,{label:"\u955C\u50CF\u4ED3\u5E93",name:"imageRespo",tooltip:(0,e.jsxs)(e.Fragment,{children:["\u63A8\u9001\u524D\u8BF7\u4FDD\u8BC1\u4ED3\u5E93\u4E2D\u6709\u6307\u5B9A\u7684\u547D\u540D\u7A7A\u95F4, \u5982\u6CA1\u6709\u8BF7\u5148 ",(0,e.jsx)("a",{href:"",target:"_blank",children:"\u6DFB\u52A0\u4ED3\u5E93"})]}),children:(0,e.jsx)(_e.Z,{multiple:!0,top:!0,onChangeList:function(u){var m;(m=Q.current)===null||m===void 0||m.setFieldValue("registryId",u.map(function(P){return P.id}))}})}),(0,e.jsx)(L.Z,{tooltip:"\u53EF\u4EE5\u901A\u8FC7\u6B64\u9879\u91CD\u65B0\u5B9A\u4E49\u547D\u540D\u7A7A\u95F4\uFF0Cdocker hub \u4E0D\u53D7\u8BE5\u914D\u7F6E\u7684\u5F71\u54CD\u3002 \u914D\u7F6E\u6B64\u9879\u540E mysql:latest \u4F1A\u63A8\u9001\u81F3 {\u547D\u540D\u7A7A\u95F4}/mysql:latest\uFF0C dpanel/dpanel:latest \u4F1A\u63A8\u9001\u81F3 {\u547D\u540D\u7A7A\u95F4}/dpanel:latest",label:"\u91CD\u5199\u4ED3\u5E93\u547D\u540D\u7A7A\u95F4",name:"newNamespace"})]}),(0,e.jsx)(ue.u,{access:"canSeeImageListManageDelete",children:(0,e.jsx)(ee.Z,{danger:!0,type:"primary",action:function(){return(0,b.ao)({md5:a,force:V.force})},onSuccess:function(){var u,m;return!((u=j.current)===null||u===void 0)&&u.reloadAndRest&&((m=j.current)===null||m===void 0||m.reloadAndRest()),!0},onError:function(){var u,m;return!((u=j.current)===null||u===void 0)&&u.reset&&((m=j.current)===null||m===void 0||m.reset()),!0},confirm:(0,e.jsxs)(A.Z,{style:{width:280},direction:"vertical",children:[(0,e.jsx)(M.Z.Text,{children:H("notification.confirm.title")}),(0,e.jsx)(J.Z,{name:"deleteVolume",onChange:function(u){return G({force:u.target.checked})},children:"\u5F3A\u5236\u5220\u9664\uFF1F"})]}),children:"\u6279\u91CF\u5220\u9664"})})]})},tableExtraRender:function(){return(0,e.jsx)(ue.u,{access:"canSeeImageListManageCreate",children:(0,e.jsx)(q.Z,{mode:"horizontal",selectedKeys:["all"],items:[{label:(0,e.jsx)(c.Link,{to:"/image/list",replace:!0,children:"\u5168\u90E8\u955C\u50CF"}),key:"all"},{label:(0,e.jsx)(c.Link,{to:"/image/list/recycle",replace:!0,children:"\u6784\u5EFA\u4EFB\u52A1"}),key:"build"}]})})},toolBarRender:function(){return[(0,e.jsx)(ue.u,{access:"canSeeImageListManageDelete",children:(0,e.jsx)(ee.Z,{action:function(){return(0,b.c7)()},onSuccess:function(){var a,f;return!((a=j.current)===null||a===void 0)&&a.reloadAndRest&&((f=j.current)===null||f===void 0||f.reloadAndRest()),!0},onError:function(){var a,f;return!((a=j.current)===null||a===void 0)&&a.reset&&((f=j.current)===null||f===void 0||f.reset()),!0},confirm:"notification.confirm.title",children:"\u6E05\u7406\u672A\u4F7F\u7528\u955C\u50CF"})},"prune")]},columnsState:(0,Ee.j)("image-list")})]})}},3393:function(Y,O,n){n.d(O,{Gb:function(){return g},Pn:function(){return T},Rb:function(){return y},YU:function(){return _},ZQ:function(){return W},_U:function(){return s},cD:function(){return J},cd:function(){return A}});var I=n(15009),d=n.n(I),R=n(99289),o=n.n(R),p=n(82346);function _(r){return S.apply(this,arguments)}function S(){return S=o()(d()().mark(function r(c){return d()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,p.request)("/api/app/image/get-detail",{method:"POST",data:c}));case 1:case"end":return i.stop()}},r)})),S.apply(this,arguments)}function g(r){return x.apply(this,arguments)}function x(){return x=o()(d()().mark(function r(c){return d()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,p.request)("/api/app/image/tag-remote",{method:"POST",data:c}));case 1:case"end":return i.stop()}},r)})),x.apply(this,arguments)}function s(r){return E.apply(this,arguments)}function E(){return E=o()(d()().mark(function r(c){return d()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,p.request)("/api/app/image/tag-add",{method:"POST",data:c}));case 1:case"end":return i.stop()}},r)})),E.apply(this,arguments)}function T(r){return L.apply(this,arguments)}function L(){return L=o()(d()().mark(function r(c){return d()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,p.request)("/api/app/image/tag-delete",{method:"POST",data:c}));case 1:case"end":return i.stop()}},r)})),L.apply(this,arguments)}function y(r){return M.apply(this,arguments)}function M(){return M=o()(d()().mark(function r(c){return d()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,p.request)("/api/app/image/export",{method:"POST",data:c,responseType:"blob"}));case 1:case"end":return i.stop()}},r)})),M.apply(this,arguments)}function A(r){return U.apply(this,arguments)}function U(){return U=o()(d()().mark(function r(c){return d()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,p.request)("/api/pro/image/get-remote-tag",{method:"POST",data:c}));case 1:case"end":return i.stop()}},r)})),U.apply(this,arguments)}function W(r){return D.apply(this,arguments)}function D(){return D=o()(d()().mark(function r(c){return d()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,p.request)("/api/app/image/check-upgrade",{method:"POST",data:c}));case 1:case"end":return i.stop()}},r)})),D.apply(this,arguments)}function J(r){return q.apply(this,arguments)}function q(){return q=o()(d()().mark(function r(c){return d()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,p.request)("/api/app/image/get-rootfs",{method:"POST",data:c}));case 1:case"end":return i.stop()}},r)})),q.apply(this,arguments)}},67255:function(Y,O,n){n.d(O,{O:function(){return I},j:function(){return d}});function I(){var R=localStorage.getItem("dpanel-pagesize");return R=="all"?!1:{showSizeChanger:!0,defaultPageSize:parseInt(R!=null?R:"20")}}function d(R){var o="dpanel-table-column-".concat(R),p={};if(localStorage.getItem(o)){var _;p=JSON.parse((_=localStorage.getItem(o))!==null&&_!==void 0?_:"{}")}return{defaultValue:p,onChange:function(g){localStorage.setItem("dpanel-table-column-".concat(R),JSON.stringify(g))}}}}}]);
