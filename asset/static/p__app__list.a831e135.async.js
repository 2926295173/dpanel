"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4316],{16165:function(ye,ee,e){var ne=e(87462),u=e(1413),re=e(4942),c=e(45987),R=e(67294),B=e(93967),F=e.n(B),P=e(42550),Y=e(63017),L=e(41755),K=["className","component","viewBox","spin","rotate","tabIndex","onClick","children"],U=R.forwardRef(function(y,N){var w=y.className,z=y.component,J=y.viewBox,X=y.spin,x=y.rotate,H=y.tabIndex,ie=y.onClick,_=y.children,g=(0,c.Z)(y,K),E=R.useRef(),V=(0,P.x1)(E,N);(0,L.Kp)(!!(z||_),"Should have `component` prop or `children`."),(0,L.C3)(E);var i=R.useContext(Y.Z),ue=i.prefixCls,oe=ue===void 0?"anticon":ue,ge=i.rootClassName,de=F()(ge,oe,(0,re.Z)({},"".concat(oe,"-spin"),!!X&&!!z),w),b=F()((0,re.Z)({},"".concat(oe,"-spin"),!!X)),G=x?{msTransform:"rotate(".concat(x,"deg)"),transform:"rotate(".concat(x,"deg)")}:void 0,I=(0,u.Z)((0,u.Z)({},L.vD),{},{className:b,style:G,viewBox:J});J||delete I.viewBox;var W=function(){return z?R.createElement(z,I,_):_?((0,L.Kp)(!!J||R.Children.count(_)===1&&R.isValidElement(_)&&R.Children.only(_).type==="use","Make sure that you provide correct `viewBox` prop (default `0 0 1024 1024`) to the icon."),R.createElement("svg",(0,ne.Z)({},I,{viewBox:J}),_)):null},ce=H;return ce===void 0&&ie&&(ce=-1),R.createElement("span",(0,ne.Z)({role:"img"},g,{ref:V,tabIndex:ce,onClick:ie,className:de}),W())});U.displayName="AntdIcon",ee.Z=U},36435:function(ye,ee,e){var ne=e(15009),u=e.n(ne),re=e(64599),c=e.n(re),R=e(99289),B=e.n(R),F=e(9783),P=e.n(F),Y=e(5574),L=e.n(Y),K=e(67294),U=e(184),y=e(38345),N=e(97269),w=e(97321),z=e(97462),J=e(64317),X=e(5966),x=e(86615),H=e(68602),ie=e(28036),_=e(83403),g=e(24963),E=e(1699),V=e(29177),i=e(45742),ue=e(43425),oe=e(44349),ge=e(3616),de=e(36146),b=e(85893),G=(0,K.forwardRef)(function(I,W){var ce=(0,K.useState)(!1),ve=L()(ce,2),me=ve[0],te=ve[1],t=(0,K.useRef)(),Ae=(0,K.useContext)(g.Z),Me=Ae.message,Le=(0,K.useState)([]),Ee=L()(Le,2),Re=Ee[0],Ce=Ee[1],$=new de.Uo("components.permissionButton"),be=P()(P()(P()(P()(P()({},_.W6.CONTAINER,"Id"),_.W6.APPSTORE,"name"),_.W6.COMPOSE,"name"),_.W6.REGISTRY,"serverAddress"),_.W6.DOCKER_ENV,"name"),Ue=P()(P()(P()(P()(P()({},_.W6.CONTAINER,"name"),_.W6.APPSTORE,"name"),_.W6.COMPOSE,"name"),_.W6.REGISTRY,"title"),_.W6.DOCKER_ENV,"title"),Ie=be[I.type],We=Ue[I.type],Ze=I.selected.map(function(S){return S[be[I.type]]});return K.useEffect(function(){if(me){if(!I.selected||I.selected.length==0){Me.error(de.FD.format("message.noDataSelect")),te(!1);return}(0,H.dP)({permission:{uri:I.type,key:Ie,value:Ze}}).then(function(S){var O;(O=t.current)===null||O===void 0||O.setFieldValue("list",Object.keys(S.data.list).map(function(T){return{name:T,type:S.data.list[T].type,users:S.data.list[T].users}}))}),(0,H.lE)().then(function(S){var O,T=(O=S.data)===null||O===void 0||(O=O.list)===null||O===void 0?void 0:O.map(function(l){return{label:l.username,value:l.username}});Ce(T)})}},[me]),(0,b.jsx)(E.u,{access:["canSeeEnableEe","canSeeFounder","canSeeManage"],children:(0,b.jsxs)(U.a,{name:"create",title:$.format("drawerTitle"),open:me,onOpenChange:function(O){if(!O){var T;(T=t.current)===null||T===void 0||T.resetFields()}te(O)},drawerProps:{forceRender:!0,width:ge.R_},formRef:t,trigger:(0,b.jsx)(ie.ZP,{icon:(0,b.jsx)(V.Z,{}),children:$.format("drawerTriggerButton")}),onFinish:function(){var S=B()(u()().mark(function O(T){var l,A,D;return u()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:l=c()(T.list),v.prev=1,l.s();case 3:if((A=l.n()).done){v.next=9;break}return D=A.value,v.next=7,(0,H.Db)({usernames:D.users,permissionType:D.type,permission:{uri:I.type,key:Ie,showKey:We,value:[D.name]}});case 7:v.next=3;break;case 9:v.next=14;break;case 11:v.prev=11,v.t0=v.catch(1),l.e(v.t0);case 14:return v.prev=14,l.f(),v.finish(14);case 17:Me.success(de.FD.format("finish")),te(!1),I.onSuccess();case 20:case"end":return v.stop()}},O,null,[[1,11,14,17]])}));return function(O){return S.apply(this,arguments)}}(),children:[(0,b.jsxs)(y.Z,{ghost:!0,title:(0,b.jsx)(i.Z,{}),subTitle:$.format("batchTitle"),children:[(0,b.jsx)(N.A.Item,{name:"type",style:{marginBottom:0},children:(0,b.jsx)(w.Z.Group,{defaultValue:"admin",onChange:function(O){var T,l,A=(T=t.current)===null||T===void 0?void 0:T.getFieldValue("list");A.forEach(function(D){D.type=O,D.users=[]}),(l=t.current)===null||l===void 0||l.setFieldValue("list",A)},children:["admin","restricted","public"].map(function(S){return(0,b.jsx)(w.Z,{style:{width:240},title:$.format("dataTypeOption.".concat(S)),description:$.format("dataTypeOptionDesc.".concat(S)),value:S},S)})})}),(0,b.jsx)(z.Z,{name:["type"],children:function(O){var T=O.type;if(T==="restricted")return(0,b.jsx)(J.Z,{mode:"multiple",name:"usernames",label:$.format("formUsernames"),onChange:function(A){var D,Q,v=(D=t.current)===null||D===void 0?void 0:D.getFieldValue("list");v.forEach(function(Z){Z.users=A}),(Q=t.current)===null||Q===void 0||Q.setFieldValue("list",v)},rules:[{required:!0}],request:B()(u()().mark(function l(){var A,D,Q;return u()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(!(Re.length>0)){Z.next=2;break}return Z.abrupt("return",Re);case 2:return Z.next=4,(0,H.lE)();case 4:return D=Z.sent,Q=(A=D.data)===null||A===void 0||(A=A.list)===null||A===void 0?void 0:A.map(function(m){return{label:m.username,value:m.username}}),Ce(Q),Z.abrupt("return",Q);case 8:case"end":return Z.stop()}},l)}))})}})]}),(0,b.jsx)(y.Z,{ghost:!0,title:(0,b.jsx)(ue.Z,{}),subTitle:$.format("dataTitle"),children:(0,b.jsx)(oe.Z,{name:"list",hideCopyButton:!0,gap:10,items:[{name:"name",label:$.format("dataName"),render:function(O,T,l){var A=l.getCurrentRowData();return(0,b.jsx)(X.Z,{disabled:!0,label:$.format("dataName"),width:"sm",name:"name"})}},{name:"type",label:$.format("dataType"),render:function(O,T,l){var A=l.getCurrentRowData();return(0,b.jsx)(x.Z.Group,{label:$.format("dataType"),name:"type",radioType:"button",options:["admin","public","restricted"].map(function(D){return{label:$.format("dataTypeOption.".concat(D)),value:D}})})}},{name:"users",label:$.format("dataUsers"),render:function(O,T,l){return(0,b.jsx)(z.Z,{name:["type"],children:function(D){var Q=D.type;if(Q=="restricted")return(0,b.jsx)(J.Z,{width:"sm",mode:"tags",name:"users",label:$.format("dataUsers"),options:Re})}})}}]})})]})})});ee.Z=G},14668:function(ye,ee,e){e.r(ee),e.d(ee,{default:function(){return Q}});var ne=e(64599),u=e.n(ne),re=e(15009),c=e.n(re),R=e(99289),B=e.n(R),F=e(5574),P=e.n(F),Y=e(90078),L=e(28036),K=e(78099),U=e(97269),y=e(62370),N=e(42075),w=e(25593),z=e(40411),J=e(34041),X=e(96074),x=e(83062),H=e(84567),ie=e(50136),_=e(82346),g=e(45742),E=e(89035),V=e(95591),i=e(86548),ue=e(74842),oe=e(87784),ge=e(33160),de=e(30159),b=e(94359),G=e(13822),I=e(80821),W=e(67294),ce=e(62597),ve=e(87662),me=e(16165),te=e(5251),t=e(85893),Ae=function(){return(0,t.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18403",children:(0,t.jsx)("path",{d:"M224 192v64H96v576h128v64h64v-64h64v64h64v-64h64v64h64v-64h64v64h64v-64h64v64h64v-64h128V256h-128V192h-64v64h-64V192h-64v64h-64V192h-64v64h-64V192h-64v64H288V192z m-64 128h704v448H160z m96 64c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32zM256 512c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m512 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32zM256 640c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z","p-id":"18404"})})},Me=function(){return(0,t.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18546",children:(0,t.jsx)("path",{d:"M64 224v576h416v-32c0-17.76 14.24-32 32-32 17.76 0 32 14.24 32 32v32h416V224z m64 64h768v288H128z m64 64v160h192v-160z m224 0v160h192v-160z m224 0v160h192v-160zM256 416h64v32H256z m224 0h64v32h-64z m224 0h64v32h-64zM128 640h768v96h-300.992c-14.144-35.52-42.752-64-83.008-64-40.256 0-68.864 28.48-83.008 64H128z","p-id":"18547"})})};function Le(v){var Z,m,Oe,fe,De,je;return(0,t.jsx)(t.Fragment,{children:v.value&&v.value.memory&&v.value.memory.out>0?(0,t.jsxs)(N.Z,{children:[(0,t.jsxs)(x.Z,{title:"Cpu: ".concat((Z=v.value)===null||Z===void 0?void 0:Z.cpu.toFixed(2),"%"),children:[(0,t.jsx)(me.Z,{component:Ae,style:{width:15,lineHeight:20}})," ","".concat((m=v.value)===null||m===void 0?void 0:m.cpu.toFixed(2),"%")]}),(0,t.jsxs)(x.Z,{title:"Memory: ".concat((0,te.FI)((Oe=v.value)===null||Oe===void 0?void 0:Oe.memory.in)," / ").concat((0,te.FI)((fe=v.value)===null||fe===void 0?void 0:fe.memory.out)),children:[(0,t.jsx)(me.Z,{component:Me,style:{width:15,lineHeight:20}})," ","".concat((((De=v.value)===null||De===void 0?void 0:De.memory.in)/((je=v.value)===null||je===void 0?void 0:je.memory.out)*100).toFixed(2),"%")]})]}):""})}var Ee=e(67255),Re=e(37413),Ce=e(46357),$=e(99922),be=e(83403),Ue=e(20578),Ie=e(99861),We=e(78914),Ze=e(29453),S=e(8287),O=e(93362),T=e(78451),l=e(36146),A=e(36435),D=e(1699);function Q(){var v,Z,m=(0,W.useRef)(),Oe=(0,W.useState)(""),fe=P()(Oe,2),De=fe[0],je=fe[1],sn=(0,W.useState)(),we=P()(sn,2),le=we[0],ln=we[1],un=(0,W.useState)(1),ze=P()(un,2),on=ze[0],dn=ze[1],cn=(0,W.useState)([]),Ve=P()(cn,2),pe=Ve[0],vn=Ve[1],He=(0,W.useRef)(),Ge=(0,W.useRef)(),Qe=(0,W.useRef)(),Ye=(0,W.useRef)(),Be=(0,_.useAccess)(),mn=(0,W.useState)(),Je=P()(mn,2),he=Je[0],fn=Je[1],Xe=(0,W.useRef)(),$e=(0,W.useRef)(),qe=(0,W.useRef)(),pn=(0,W.useState)([]),en=P()(pn,2),Se=en[0],hn=en[1],_n=(0,_.useLocation)(),nn=new l.Uo("components.appDetail.appDetailQuickManage");return(0,W.useEffect)(function(){(0,ve.K3)().then(function(M){var f;je((f=M.data.serverUrl)!==null&&f!==void 0?f:"")}),!Be.canSeeEnableCe&&(0,Ue.q)().then(function(M){fn(M.data)}),(0,Ze.e1)().then(function(M){hn(M.data.list)})},[]),(0,t.jsxs)(Y._z,{header:{extra:[(0,t.jsx)(D.u,{access:"canSeeContainerListManageCreate",children:(0,t.jsx)(_.Link,{to:"/app/create/image",children:(0,t.jsx)(L.ZP,{type:"primary",children:l.Ob.format("container.create")})})},"create")]},children:[(0,t.jsx)(Ce.Z,{ref:He,onFinish:function(){var f,s;!((f=m.current)===null||f===void 0)&&f.reloadAndRest&&((s=m.current)===null||s===void 0||s.reloadAndRest())},onUpgradeFinish:function(){var f,s;!((f=m.current)===null||f===void 0)&&f.reloadAndRest&&((s=m.current)===null||s===void 0||s.reloadAndRest())}}),(0,t.jsx)($.Z,{ref:Ge}),(0,t.jsx)(S.Z,{ref:Qe}),(0,t.jsx)(Ie.Z,{ref:$e,finishAutoHide:!0}),(0,t.jsx)(We.Z,{ref:qe}),(0,t.jsx)(O.Z,{ref:Ye}),(0,t.jsx)(K.Z,{actionRef:m,scroll:{x:"max-content"},columns:[{key:"title",title:l.FD.format("listTitle"),width:300,dataIndex:"siteTitle",sorter:function(f,s){return f.Names[0].localeCompare(s.Names[0])},sortDirections:["descend","ascend"],render:function(f,s,j,p,a){var r=(0,te.fi)(s.Names[0],"/");le!=null&&le.siteList&&le.siteList.map(function(o){o.containerInfo&&o.containerInfo.Id==s.Id&&o.siteTitle!=""&&(r=o.siteTitle)}),s.Labels&&s.Labels["com.dpanel.container.title"]&&(r=s.Labels["com.dpanel.container.title"]);var d=he&&he.container?he.container.find(function(o){return o.id==s.Id}):!1;return(0,t.jsxs)(N.Z,{direction:"vertical",children:[(0,t.jsx)(w.Z.Link,{onClick:function(){var C;(C=He.current)===null||C===void 0||C.show(s.Id)},children:(0,t.jsx)(T.Z,{content:r})}),!Be.canSeeEnableCe&&d&&(0,t.jsx)(z.Z,{count:"new"})]})}},{title:l.FD.format("listTag"),hidden:!0,dataIndex:"tag",renderFormItem:function(f,s,j,p){return(0,t.jsx)(J.Z,{options:Se&&Se.map(function(a){return{lable:a.tag,value:a.tag}})})}},{key:"ports",title:l.FD.format("listAccess"),tooltip:l.FD.format("listAccessTip"),width:150,dataIndex:"ports",search:!1,render:function(f,s,j,p){var a=[],r=[],d=[];return s!=null&&s.Ports&&s.Ports.map(function(o,C){o.PublicPort?a.push(o):r.push(o)}),le!=null&&le.domainList&&le.domainList.map(function(o,C){s.Names.indexOf(o.containerId)>-1&&d.push(o.setting.enableSSL?"https://"+o.serverName:"http://"+o.serverName)}),(0,t.jsx)(Re.Z,{publicPort:a,privatePort:r,domain:d,serverIp:De})}},{title:l.FD.format("listUsage"),width:200,search:!1,key:"usage",sorter:function(f,s){var j={},p={};if(pe){var a,r;j=(a=pe.find(function(d){return f.Id.startsWith(d.container)}))!==null&&a!==void 0?a:{},p=(r=pe.find(function(d){return s.Id.startsWith(d.container)}))!==null&&r!==void 0?r:{}}return JSON.stringify(j).localeCompare(JSON.stringify(p))},render:function(f,s,j,p,a){if(!pe||pe.length<=0)return"";var r={};return pe.filter(function(d){s.Id.indexOf(d.container)==0&&(r=d)}),(0,t.jsx)(Le,{value:r})}},{title:l.FD.format("listRunStatus"),key:"status",dataIndex:["container","status"],search:!1,width:130,render:function(f,s,j,p){return s.Status.indexOf("(healthy)")>-1?s.State="healthy":s.Status.indexOf("(unhealthy)")>-1&&(s.State="unhealthy"),(0,t.jsx)(b.Z,{status:"container.".concat(s.State),tip:"".concat(s.State," ").concat(s.Status)})}},{title:l.FD.format("listImageName"),key:"image",search:!1,width:150,render:function(f,s,j,p){return(0,t.jsx)("span",{style:{wordBreak:"break-word"},children:(0,t.jsx)(w.Z.Link,{onClick:function(){var r;(r=qe.current)===null||r===void 0||r.show(s.Image)},children:s.Image})})}},{title:l.FD.format("listCreatedAt"),width:170,dataIndex:["Created"],render:function(f,s,j,p,a){return(0,te.ZM)(s.Created*1e3)},sorter:function(f,s){return new Date(f.Created*1e3).toISOString().localeCompare(new Date(s.Created*1e3).toISOString())},search:!1,sortDirections:["descend","ascend"]},{title:l.FD.format("listManage"),valueType:"option",key:"option",width:200,fixed:"right",hidden:!Be.canSeeContainerListManage,render:function(f,s,j,p){return(0,t.jsxs)(N.Z,{split:(0,t.jsx)(X.Z,{type:"vertical"}),children:[(0,t.jsx)(w.Z.Link,{onClick:function(){var r;(r=Qe.current)===null||r===void 0||r.show(s.Id)},children:(0,t.jsx)(x.Z,{title:l.FD.format("listManageLog"),children:(0,t.jsx)(g.Z,{})})},"log"),(s.State=="running"||s.State=="healthy")&&(0,t.jsx)(w.Z.Link,{onClick:function(){var r;(r=Ge.current)===null||r===void 0||r.show({url:"/console/container/".concat(s.Id),title:(0,te.fi)(s.Names[0],"/")})},children:(0,t.jsx)(x.Z,{title:l.FD.format("listManageConsole"),children:(0,t.jsx)(E.Z,{})})},"console"),(s.State=="running"||s.State=="healthy")&&(0,t.jsx)(w.Z.Link,{onClick:function(){var r;(r=Ye.current)===null||r===void 0||r.showContainer(s.Names[0])},children:(0,t.jsx)(x.Z,{title:l.FD.format("listManageFileExplorer"),children:(0,t.jsx)(V.Z,{})})},"file"),(0,t.jsx)(_.Link,{to:"/app/create/image?id="+s.Id,children:(0,t.jsx)(x.Z,{title:l.FD.format("listManageEdit"),children:(0,t.jsx)(i.Z,{})})},"edit")]})}}],rowKey:"Id",request:function(){var M=B()(c()().mark(function f(s,j,p){var a,r,d,o,C,n,q;return c()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,(0,G.IE)({tag:s.title,siteTitle:s.title,md5:s.Id});case 2:return r=se.sent,d="",o=[],s.tag&&Se&&(o=(C=(n=Se.find(function(k){return k.tag==s.tag}))===null||n===void 0?void 0:n.item.map(function(k){var ae;return(ae=k.name)!==null&&ae!==void 0?ae:""}))!==null&&C!==void 0?C:[]),q=[],d!=""?r.data.list.map(function(k){k.Names.map(function(ae){ae.startsWith("/"+d)&&q.push(k)})}):o&&o.length>0?r.data.list.map(function(k){k.Names.map(function(ae){o.indexOf(ae)>-1&&q.push(k)})}):q=r.data.list,ln(r.data),dn(on+1),(0,ve.Cz)({follow:!1}).then(function(k){vn(k.data.list)}),se.abrupt("return",{data:(a=q)!==null&&a!==void 0?a:[],success:!0,total:r.data.list.length});case 12:case"end":return se.stop()}},f)}));return function(f,s,j){return M.apply(this,arguments)}}(),rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(f){var s=f.selectedRowKeys,j=f.selectedRows;return(0,t.jsxs)(N.Z,{size:16,wrap:!0,children:[(0,t.jsx)(A.Z,{type:be.W6.CONTAINER,selected:j,onSuccess:function(){var a,r;return!((a=m.current)===null||a===void 0)&&a.reloadAndRest&&((r=m.current)===null||r===void 0||r.reloadAndRest()),!0}},"dataPermission"),(0,t.jsxs)(D.u,{access:"canSeeContainerList",space:{size:16,wrap:!0},children:[(0,t.jsx)(I.Z,{icon:(0,t.jsx)(ue.Z,{}),action:B()(c()().mark(function p(){var a,r,d,o;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a=u()(s),n.prev=1,a.s();case 3:if((r=a.n()).done){n.next=10;break}return d=r.value,n.next=7,(0,G.IW)({md5:d,operate:"start"});case 7:o=n.sent;case 8:n.next=3;break;case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),a.e(n.t0);case 15:return n.prev=15,a.f(),n.finish(15);case 18:return n.abrupt("return",!0);case 19:case"end":return n.stop()}},p,null,[[1,12,15,18]])})),onSuccess:function(){var a,r;return!((a=m.current)===null||a===void 0)&&a.reloadAndRest&&((r=m.current)===null||r===void 0||r.reloadAndRest()),!0},children:l.FD.format("listManageStart")}),(0,t.jsx)(I.Z,{action:B()(c()().mark(function p(){var a,r,d,o;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a=u()(s),n.prev=1,a.s();case 3:if((r=a.n()).done){n.next=10;break}return d=r.value,n.next=7,(0,G.IW)({md5:d,operate:"stop"});case 7:o=n.sent;case 8:n.next=3;break;case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),a.e(n.t0);case 15:return n.prev=15,a.f(),n.finish(15);case 18:return n.abrupt("return",!0);case 19:case"end":return n.stop()}},p,null,[[1,12,15,18]])})),icon:(0,t.jsx)(oe.Z,{}),onSuccess:function(){var a,r;return!((a=m.current)===null||a===void 0)&&a.reloadAndRest&&((r=m.current)===null||r===void 0||r.reloadAndRest()),!0},children:l.FD.format("listManageStop")}),(0,t.jsx)(I.Z,{action:B()(c()().mark(function p(){var a,r,d,o;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a=u()(s),n.prev=1,a.s();case 3:if((r=a.n()).done){n.next=10;break}return d=r.value,n.next=7,(0,G.IW)({md5:d,operate:"restart"});case 7:o=n.sent;case 8:n.next=3;break;case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),a.e(n.t0);case 15:return n.prev=15,a.f(),n.finish(15);case 18:return n.abrupt("return",!0);case 19:case"end":return n.stop()}},p,null,[[1,12,15,18]])})),onSuccess:function(){var a,r;return!((a=m.current)===null||a===void 0)&&a.reloadAndRest&&((r=m.current)===null||r===void 0||r.reloadAndRest()),!0},icon:(0,t.jsx)(ge.Z,{}),children:l.FD.format("listManageRestart")}),(0,t.jsx)(I.Z,{action:B()(c()().mark(function p(){var a,r,d,o;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a=u()(s),n.prev=1,a.s();case 3:if((r=a.n()).done){n.next=10;break}return d=r.value,n.next=7,(0,G.IW)({md5:d,operate:"pause"});case 7:o=n.sent;case 8:n.next=3;break;case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),a.e(n.t0);case 15:return n.prev=15,a.f(),n.finish(15);case 18:return n.abrupt("return",!0);case 19:case"end":return n.stop()}},p,null,[[1,12,15,18]])})),onSuccess:function(){var a,r;return!((a=m.current)===null||a===void 0)&&a.reloadAndRest&&((r=m.current)===null||r===void 0||r.reloadAndRest()),!0},icon:(0,t.jsx)(de.Z,{}),children:l.FD.format("listManagePause")}),(0,t.jsx)(I.Z,{action:B()(c()().mark(function p(){var a,r,d,o;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a=u()(s),n.prev=1,a.s();case 3:if((r=a.n()).done){n.next=10;break}return d=r.value,n.next=7,(0,G.IW)({md5:d,operate:"unpause"});case 7:o=n.sent;case 8:n.next=3;break;case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),a.e(n.t0);case 15:return n.prev=15,a.f(),n.finish(15);case 18:return n.abrupt("return",!0);case 19:case"end":return n.stop()}},p,null,[[1,12,15,18]])})),onSuccess:function(){var a,r;return!((a=m.current)===null||a===void 0)&&a.reloadAndRest&&((r=m.current)===null||r===void 0||r.reloadAndRest()),!0},icon:(0,t.jsx)(ue.Z,{}),children:l.FD.format("listManageUnpause")})]}),(0,t.jsx)(X.Z,{}),(0,t.jsx)(D.u,{showProTips:!0,access:["canSeeEnableCe","canSeeContainerListManageOp"],children:function(a){var r=a.canSeeEnableCe,d=a.canSeeContainerListManageOp;return d&&(0,t.jsx)(I.Z,{disabled:r,type:"primary",action:B()(c()().mark(function o(){var C,n,q,_e,se,k,ae,Pe,rn,Ke,Fe,xe,an;return c()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:q=[],_e=u()(j),h.prev=2,k=c()().mark(function gn(){var ke,tn,Te;return c()().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:tn=se.value,Te=he==null||(ke=he.container)===null||ke===void 0?void 0:ke.find(function(En){return En.id==tn.Id}),Te&&!q.includes(Te.image)&&q.push(Te.image);case 3:case"end":return Ne.stop()}},gn)}),_e.s();case 5:if((se=_e.n()).done){h.next=9;break}return h.delegateYield(k(),"t0",7);case 7:h.next=5;break;case 9:h.next=14;break;case 11:h.prev=11,h.t1=h.catch(2),_e.e(h.t1);case 14:return h.prev=14,_e.f(),h.finish(14);case 17:if(q){h.next=19;break}return h.abrupt("return",!1);case 19:return h.next=21,(C=$e.current)===null||C===void 0?void 0:C.pull(q);case 21:(n=$e.current)===null||n===void 0||n.finish(),Pe=u()(j),h.prev=23,Pe.s();case 25:if((rn=Pe.n()).done){h.next=32;break}return an=rn.value,h.next=29,(0,G.RF)({md5:(Ke=an.Id)!==null&&Ke!==void 0?Ke:"",imageTag:"",enableBak:(Fe=(xe=Xe.current)===null||xe===void 0?void 0:xe.getFieldValue("enableBak"))!==null&&Fe!==void 0?Fe:!1});case 29:ae=h.sent;case 30:h.next=25;break;case 32:h.next=37;break;case 34:h.prev=34,h.t2=h.catch(23),Pe.e(h.t2);case 37:return h.prev=37,Pe.f(),h.finish(37);case 40:return h.abrupt("return",ae);case 41:case"end":return h.stop()}},o,null,[[2,11,14,17],[23,34,37,40]])})),onSuccess:function(){var C,n;return!((C=m.current)===null||C===void 0)&&C.reloadAndRest&&((n=m.current)===null||n===void 0||n.reloadAndRest()),!0},confirm:(0,t.jsxs)(N.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,t.jsx)(w.Z.Text,{children:nn.format("upgradeConfirm")}),(0,t.jsx)(U.A,{formRef:Xe,submitter:!1,layout:"inline",children:(0,t.jsx)(y.Z,{name:"enableBak",valuePropName:"checked",children:(0,t.jsx)(H.Z,{children:nn.format("upgradeConfirmEnableBak")})})})]}),children:l.FD.format("listManageUpgradeBatch")})}}),(0,t.jsx)(D.u,{access:"canSeeContainerListManageDelete",children:(0,t.jsx)(I.Z,{danger:!0,type:"primary",action:B()(c()().mark(function p(){var a,r,d,o;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=u()(s),n.prev=1,r.s();case 3:if((d=r.n()).done){n.next=10;break}return o=d.value,n.next=7,(0,ce.Ct)({md5:o,deleteImage:!1,deleteVolume:!1});case 7:a=n.sent;case 8:n.next=3;break;case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(1),r.e(n.t0);case 15:return n.prev=15,r.f(),n.finish(15);case 18:return n.abrupt("return",a);case 19:case"end":return n.stop()}},p,null,[[1,12,15,18]])})),onSuccess:function(){var a,r;return!((a=m.current)===null||a===void 0)&&a.reloadAndRest&&((r=m.current)===null||r===void 0||r.reloadAndRest()),!0},onError:function(){var a,r;return!((a=m.current)===null||a===void 0)&&a.reset&&((r=m.current)===null||r===void 0||r.reset()),!0},confirm:"notification.confirm.title",children:l.FD.format("listManageDeleteBatch")})})]})},pagination:(0,Ee.O)({page:(v=(Z=_n.state)===null||Z===void 0?void 0:Z.page)!==null&&v!==void 0?v:void 0}),search:{collapsed:!1},tableExtraRender:function(){return(0,t.jsx)(ie.Z,{mode:"horizontal",selectedKeys:["list"],items:[{label:(0,t.jsx)(_.Link,{to:"/app/list",replace:!0,children:l.Ob.format("container.list")}),key:"list"},{label:(0,t.jsx)(_.Link,{to:"/app/list/recycle",replace:!0,children:l.Ob.format("container.list.recycle")}),key:"recycle"}]})},toolBarRender:function(){return[(0,t.jsx)(D.u,{access:"canSeeContainerListManageDelete",children:(0,t.jsx)(I.Z,{action:function(){return(0,G.KK)()},onSuccess:function(){var s,j;return!((s=m.current)===null||s===void 0)&&s.reloadAndRest&&((j=m.current)===null||j===void 0||j.reloadAndRest()),!0},onError:function(){var s,j;return!((s=m.current)===null||s===void 0)&&s.reset&&((j=m.current)===null||j===void 0||j.reset()),!0},tips:l.FD.format("listManagePruneTip"),confirm:"notification.confirm.title",children:l.FD.format("listManagePrune")})},"clear")]},columnsState:(0,Ee.j)("app-list")})]})}},62597:function(ye,ee,e){e.d(ee,{$G:function(){return B},Ct:function(){return J},Tb:function(){return K},XH:function(){return y},cl:function(){return Y},fp:function(){return P},iE:function(){return w},xb:function(){return x},ze:function(){return ie}});var ne=e(15009),u=e.n(ne),re=e(99289),c=e.n(re),R=e(82346);function B(g){return F.apply(this,arguments)}function F(){return F=c()(u()().mark(function g(E){return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,R.request)("/api/app/site/create-by-image",{method:"POST",data:E}));case 1:case"end":return i.stop()}},g)})),F.apply(this,arguments)}var P={EnvValueRuleRequired:1,EnvValueRuleDisabled:2,EnvValueTypeNumber:1024,EnvValueTypeText:2048,EnvValueTypeSelect:4096,EnvValueTypeSelectMultiple:8192};function Y(g){return L.apply(this,arguments)}function L(){return L=c()(u()().mark(function g(E){return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,R.request)("/api/app/site/get-list",{method:"POST",data:E}));case 1:case"end":return i.stop()}},g)})),L.apply(this,arguments)}function K(g){return U.apply(this,arguments)}function U(){return U=c()(u()().mark(function g(E){return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return E.download=!1,i.next=3,(0,R.request)("/api/app/log/run",{method:"POST",data:E});case 3:return i.abrupt("return",i.sent);case 4:case"end":return i.stop()}},g)})),U.apply(this,arguments)}function y(g){return N.apply(this,arguments)}function N(){return N=c()(u()().mark(function g(E){return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return E.download=!0,i.next=3,(0,R.request)("/api/app/log/run",{method:"POST",data:E,responseType:"blob"});case 3:return i.abrupt("return",i.sent);case 4:case"end":return i.stop()}},g)})),N.apply(this,arguments)}function w(g){return z.apply(this,arguments)}function z(){return z=c()(u()().mark(function g(E){return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return E.id=String(E.id),i.next=3,(0,R.request)("/api/app/site/get-detail",{data:E,method:"POST"});case 3:return i.abrupt("return",i.sent);case 4:case"end":return i.stop()}},g)})),z.apply(this,arguments)}function J(g){return X.apply(this,arguments)}function X(){return X=c()(u()().mark(function g(E){return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,R.request)("/api/app/container/delete",{method:"POST",data:E}));case 1:case"end":return i.stop()}},g)})),X.apply(this,arguments)}function x(g){return H.apply(this,arguments)}function H(){return H=c()(u()().mark(function g(E){return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,R.request)("/api/app/site/delete",{method:"POST",data:E}));case 1:case"end":return i.stop()}},g)})),H.apply(this,arguments)}function ie(g){return _.apply(this,arguments)}function _(){return _=c()(u()().mark(function g(E){return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,R.request)("/api/app/container/ignore",{method:"POST",data:E}));case 1:case"end":return i.stop()}},g)})),_.apply(this,arguments)}},20578:function(ye,ee,e){e.d(ee,{q:function(){return P},w:function(){return B}});var ne=e(15009),u=e.n(ne),re=e(99289),c=e.n(re),R=e(82346);function B(L){return F.apply(this,arguments)}function F(){return F=c()(u()().mark(function L(K){return u()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,R.request)("/api/pro/container/recycle-restore",{data:K,method:"POST"});case 2:return y.abrupt("return",y.sent);case 3:case"end":return y.stop()}},L)})),F.apply(this,arguments)}function P(){return Y.apply(this,arguments)}function Y(){return Y=c()(u()().mark(function L(){return u()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,R.request)("/api/pro/container/check-all-upgrade",{method:"POST"});case 2:return U.abrupt("return",U.sent);case 3:case"end":return U.stop()}},L)})),Y.apply(this,arguments)}}}]);
