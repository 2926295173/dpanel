"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4617],{81146:function(Ye,Te,e){var Pe=e(97857),m=e.n(Pe),Le=e(15009),f=e.n(Le),I=e(99289),W=e.n(I),ye=e(67294),fe=e(97269),A=e(62370),he=e(5966),s=e(97462),H=e(82346),Ze=e(71230),ae=e(15746),p=e(34041),le=e(83622),q=e(84567),de=e(42075),z=e(80821),Oe=e(23430),we=e(93162),Ce=e.n(we),L=e(78267),D=e.n(L),b=e(75458),G=e.n(b),Ee=e(12323),Ge=e(4244),i=e.n(Ge),qe=e(24078),Me=e(36146),y=e(85893),$,ge,Se,De={decorations:{matchBackground:"",matchBorder:"#FFFF00",activeMatchBackground:"#FFFF0066",matchOverviewRuler:"",activeMatchColorOverviewRuler:""}},Be=(0,ye.forwardRef)(function(ue,Ne){var u=(0,ye.useRef)(),x=(0,H.useModel)("subscriber"),R=new Me.Uo("components.containerLog");(0,ye.useImperativeHandle)(Ne,function(){return{fit:function(){$.clear(),Se.fit()},start:function(){return W()(f()().mark(function F(){return f()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,t({lineTotal:500});case 2:case"end":return O.stop()}},F)}))()},close:function(){x.progress.close(ue.id)}}});function t(B){return ce.apply(this,arguments)}function ce(){return ce=W()(f()().mark(function B(F){return f()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:x.progress.close(ue.id),$.clear(),F.download=!1,ue.request(F);case 4:case"end":return O.stop()}},B)})),ce.apply(this,arguments)}return(0,ye.useEffect)(function(){return window.addEventListener("resize",function(){Se.fit()}),$=new Ge.Terminal(m()(m()({},Ee.X),{},{fontSize:12,lineHeight:1.2,allowProposedApi:!0})),Se=new L.FitAddon,ge=new b.SearchAddon({}),$.loadAddon(Se),$.loadAddon(ge),$.open(document.getElementById("terminal-container-log")),Se.fit(),x.addDataHandler(ue.id,function(B){$.write(B.data)}),function(){$.clear(),$.reset(),x.progress.close(ue.id)}},[]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(fe.A,{submitter:!1,layout:"horizontal",onFinish:function(F){var n;t({id:ue.id,lineTotal:parseInt(F.lineTotal),showTime:(n=F.showTime)!==null&&n!==void 0?n:!1})},formRef:u,children:(0,y.jsxs)(Ze.Z,{gutter:[10,0],children:[(0,y.jsx)(ae.Z,{span:8,children:(0,y.jsx)(A.Z,{name:"lineTotal",initialValue:"500",label:R.format("formLineTotal"),children:(0,y.jsxs)(p.Z,{defaultValue:"500",onChange:function(F){var n;(n=u.current)===null||n===void 0||n.submit()},children:[(0,y.jsx)(p.Z.Option,{value:"100",children:R.format("formLineTotalOption",{number:"100"})}),(0,y.jsx)(p.Z.Option,{value:"200",children:R.format("formLineTotalOption",{number:"200"})}),(0,y.jsx)(p.Z.Option,{value:"500",children:R.format("formLineTotalOption",{number:"500"})}),(0,y.jsx)(p.Z.Option,{value:"1000",children:R.format("formLineTotalOption",{number:"1000"})}),(0,y.jsx)(p.Z.Option,{value:"-1",children:R.format("formLineTotalOptionAll")})]})})}),(0,y.jsx)(ae.Z,{children:(0,y.jsx)(le.ZP,{onClick:function(){$.clear()},children:R.format("clearButton")})}),(0,y.jsx)(ae.Z,{children:(0,y.jsx)(A.Z,{name:"showTime",valuePropName:"checked",children:(0,y.jsx)(q.Z,{onChange:function(F){var n;(n=u.current)===null||n===void 0||n.submit()},children:R.format("formShowTime")})})}),(0,y.jsx)(ae.Z,{children:(0,y.jsx)(he.Z,{label:R.format("formKeywork"),name:"keywork",fieldProps:{onPressEnter:function(){var F;ge.findNext((F=u.current)===null||F===void 0?void 0:F.getFieldValue("keywork"),De)},onChange:function(F){ge.findNext(F.target.value,De)}},placeholder:R.format("formKeyworkEmpty")})}),(0,y.jsx)(ae.Z,{children:(0,y.jsx)(s.Z,{name:["keywork"],children:function(F){var n=F.keywork;return(0,y.jsxs)(de.Z,{size:10,children:[(0,y.jsx)(le.ZP,{onClick:function(){ge.findNext(n,De)},children:R.format("formKeyworkNext")},"next"),(0,y.jsx)(le.ZP,{onClick:function(){ge.findPrevious(n,De)},children:R.format("formKeyworkPrev")},"prev")]})}})}),(0,y.jsx)(ae.Z,{children:(0,y.jsx)(z.Z,{buttonProps:{icon:(0,y.jsx)(Oe.Z,{})},action:W()(f()().mark(function B(){var F,n,O;return f()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(!ue.download){ee.next=5;break}return ee.next=3,ue.download({lineTotal:parseInt((F=u.current)===null||F===void 0?void 0:F.getFieldValue("lineTotal")),showTime:(n=u.current)===null||n===void 0?void 0:n.getFieldValue("showTime")});case 3:O=ee.sent,(0,we.saveAs)(O.data,O.name);case 5:case"end":return ee.stop()}},B)})),children:R.format("downloadButton")})})]})}),(0,y.jsx)("div",{style:{marginTop:"20px",height:ue.showInDrawer?"75vh":"85vh"},id:"terminal-container-log"})]})});Te.Z=Be},94359:function(Ye,Te,e){e.d(Te,{Z:function(){return le}});var Pe=e(5574),m=e.n(Pe),Le=e(3089),f=e(98165),I=e(18429),W=e(8751),ye=e(66212),fe=e(14313),A=e(30159),he=e(87740),s=e(50888),H=e(66309),Ze=e(83062),ae=e(36146),p=e(85893);function le(q){var de,z,Oe=new ae.Uo("components.containerStatus"),we=q.status.split("."),Ce=m()(we,2),L=Ce[0],D=Ce[1],b="";b=Oe.format(q.status,(de=q.statusValue)!==null&&de!==void 0?de:{});var G=(0,p.jsx)(p.Fragment,{});return D=="0"&&(G=(0,p.jsx)(H.Z,{icon:(0,p.jsx)(Le.Z,{}),color:"default",children:b})),D=="10"&&(G=(0,p.jsx)(H.Z,{icon:(0,p.jsx)(f.Z,{spin:!0}),color:"processing",children:b})),D=="20"&&(G=(0,p.jsx)(H.Z,{icon:(0,p.jsx)(I.Z,{}),color:"error",children:b})),D=="30"&&(G=(0,p.jsx)(H.Z,{icon:(0,p.jsx)(W.Z,{}),color:"success",children:b})),D=="new"&&(G=(0,p.jsx)(H.Z,{icon:(0,p.jsx)(ye.Z,{}),children:b})),(D=="running"||D=="healthy"||D=="active"||D=="ready")&&(G=(0,p.jsx)(H.Z,{icon:(0,p.jsx)(fe.Z,{}),color:"success",children:b})),(D=="paused"||D=="pause"||D=="rollback_paused")&&(G=(0,p.jsx)(H.Z,{icon:(0,p.jsx)(A.Z,{}),color:"warning",children:b})),(D=="waiting"||D=="starting"||D=="accepted")&&(G=(0,p.jsx)(H.Z,{icon:(0,p.jsx)(he.Z,{}),children:b})),["deploying","pending","allocated","accepted","assigned","preparing","updating","rollback_started"].includes(D)&&(G=(0,p.jsx)(H.Z,{icon:(0,p.jsx)(s.Z,{}),color:"processing",children:b})),(D=="error"||D=="down"||D=="failed")&&(G=(0,p.jsx)(H.Z,{icon:(0,p.jsx)(I.Z,{}),color:"error",children:b})),["complete","completed","rollback_completed"].includes(D)&&(G=(0,p.jsx)(H.Z,{icon:(0,p.jsx)(W.Z,{}),color:"success",children:b})),["exited","dead","removing","restarting","unhealthy","created","drain","unreachable","shutdown","rejected","remove","orphaned"].includes(D)&&(G=(0,p.jsx)(H.Z,{icon:(0,p.jsx)(I.Z,{}),color:"warning",children:b})),(0,p.jsx)(Ze.Z,{placement:"top",title:(z=q.tip)!==null&&z!==void 0?z:"",children:G})}},98093:function(Ye,Te,e){e.d(Te,{Z:function(){return F}});var Pe=e(15009),m=e.n(Pe),Le=e(99289),f=e.n(Le),I=e(5574),W=e.n(I),ye=e(3616),fe=e(184),A=e(62370),he=e(83622),s=e(67294),H=e(59252),Ze=e(24796),ae=e(93529),p=e(91058),le=e(82034),q=e(10523),de=e(52255),z=e(38345),Oe=e(5966),we=e(24739),Ce=e(30291),L=e(92398),D=e(36146),b=e(42963),G=e(42075),Ee=e(64317),Ge=e(75870),i=e(85893);function qe(){var n=new D.Uo("components.appForm");return(0,i.jsxs)(G.Z.Compact,{children:[(0,i.jsx)(Ee.Z,{name:"imageRegistry",width:"sm",fieldProps:{popupMatchSelectWidth:!1},request:f()(m()().mark(function O(){var _e;return m()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.next=2,(0,Ge.Ot)();case 2:return _e=ie.sent,ie.abrupt("return",_e.data.list.map(function(be){return{label:"".concat(be.title,"@").concat(be.serverAddress),value:be.id}}));case 4:case"end":return ie.stop()}},O)})),label:n.format("dockerImageImageName")}),(0,i.jsx)(Oe.Z,{label:" ",name:"imageName",required:!0,rules:[{required:!0}],width:"lg"})]})}var Me=e(86615),y=e(97462),$=e(31199),ge=e(86250),Se=e(44349),De=e(24494);function Be(){var n,O=new D.Uo("components.appForm"),_e=(0,s.useContext)(b.Z),ee=_e.createFormRef,ie=(0,s.useRef)();return(0,i.jsxs)(z.Z,{children:[(0,i.jsxs)(ge.Z,{gap:60,children:[(0,i.jsx)(Me.Z.Group,{width:"md",label:O.format("createSchedulingLabel"),name:["scheduling","mode"],options:O.option("createSchedulingOption",["global","replicated"]),initialValue:"replicated",disabled:(n=ee.current)===null||n===void 0?void 0:n.getFieldValue("id")}),(0,i.jsx)(y.Z,{name:["scheduling"],children:function(Ke){var $e=Ke.scheduling;return $e.mode=="replicated"&&(0,i.jsx)($.Z,{width:"md",label:O.format("createSchedulingReplicas"),name:["scheduling","replicas"],initialValue:1})}})]}),(0,i.jsx)(y.Z,{name:["scheduling","constraint"],children:function(Ke){var $e=Ke.scheduling,Fe=Ke.constraint;return $e.mode=="replicated"&&[(0,i.jsx)(Me.Z.Group,{label:O.format("createConstraintNode"),initialValue:"all",name:["constraint","role"],options:O.option("createConstraintNodeOption",["all","manager","worker","user"])},"role"),Fe&&Fe.role=="user"&&(0,i.jsx)(Ee.Z,{name:["constraint","node"],request:f()(m()().mark(function ze(){var ke;return m()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,(0,De.HN)();case 2:return ke=N.sent,N.abrupt("return",ke.data.list&&ke.data.list.map(function(X){var J;return{label:(J=X.Description)===null||J===void 0?void 0:J.Hostname,value:X.ID}}));case 4:case"end":return N.stop()}},ze)}))}),(0,i.jsx)(Se.Z,{name:["constraint","label"],label:O.format("createConstraintLabel"),hideCopyButton:!0,showAddButton:!0,gap:10,ref:ie,items:[{label:O.format("createConstraintLabelOption.name"),name:"name",width:"md",placeholder:"node.labels.name"},{name:"operator",render:function(ke,C,N){return(0,i.jsx)(Ee.Z,{label:" ",name:"operator",valueEnum:{"==":"==","!=":"!="},initialValue:"=="})}},{label:O.format("createConstraintLabelOption.value"),name:"value",width:"md"}]},"label"),(0,i.jsx)(Se.Z,{name:"placement",label:O.format("createPlacementLabel"),hideCopyButton:!0,showAddButton:!0,gap:10,items:[{name:"name",render:function(ke,C,N){return(0,i.jsx)(Ee.Z,{label:" ",name:"type",options:O.option("createPlacementOption",["spread"]),initialValue:"spread",allowClear:!1,width:"sm"})}},{label:O.format("createConstraintLabelOption.value"),name:"value",width:"md",placeholder:"node.labels.hostname"}]},"placement")]}})]})}var ue=e(73396),Ne=e(55730),u=e(33879);function x(){var n=new D.Uo("components.appForm");return(0,i.jsx)(z.Z,{ghost:!0,children:(0,i.jsxs)(ge.Z,{gap:30,children:[(0,i.jsx)(Ee.Z,{label:n.format("createAdvRestart"),name:["restart","name"],width:"sm",initialValue:"any",options:n.option("createAdvRestartOption",["none","on-failure","any"])}),(0,i.jsx)(y.Z,{name:["restart"],children:function(_e){var ee=_e.restart;return ee=="on-failure"&&(0,i.jsx)($.Z,{width:"sm",label:n.format("createAdvRestartMax"),name:["restart","maxAttempt"],initialValue:5})}}),(0,i.jsx)($.Z,{width:"sm",label:n.format("createAdvRestartDelay"),tooltip:n.format("createAdvRestartDelayTip"),name:["restart","delay"],initialValue:5,fieldProps:{addonAfter:D.FD.format("unitSecond")}}),(0,i.jsx)($.Z,{width:"sm",label:n.format("createAdvRestartWindow"),tooltip:n.format("createAdvRestartWindowTip"),name:["restart","window"],initialValue:0,fieldProps:{addonAfter:D.FD.format("unitSecond")}})]})})}function R(){var n=new D.Uo("components.appForm");return(0,i.jsxs)(z.Z,{children:[(0,i.jsxs)(ge.Z,{gap:30,children:[(0,i.jsx)($.Z,{label:n.format("createSwarmUpdateParallelism"),name:["scheduling","update","parallelism"],initialValue:1}),(0,i.jsx)($.Z,{label:n.format("createSwarmUpdateDelay"),name:["scheduling","update","delay"],initialValue:0,fieldProps:{addonAfter:D.FD.format("unitSecond")}})]}),(0,i.jsx)(Me.Z.Group,{label:n.format("createSwarmUpdateFailureAction"),name:["scheduling","update","failureAction"],initialValue:"pause",options:n.option("createSwarmUpdateFailureActionOption",["pause","continue","rollback"])}),(0,i.jsx)(Me.Z.Group,{label:n.format("createSwarmUpdateOrder"),name:["scheduling","update","order"],initialValue:"stop-first",options:n.option("createSwarmUpdateOrderOption",["stop-first","start-first"])})]})}var t=e(64412),ce=e(27323),B=(0,s.forwardRef)(function(n,O){(0,s.useImperativeHandle)(O,function(){return{edit:function(o){var l,c,v,P,j,h,g,T,K,Q,k,Y,oe,a,me,ne,Ae,pe,Xe,je,xe,Ie,Re,w,d,E,M,S,_,se,te,Ue,en,Je,tn,an={id:o.ID,siteName:(l=(c=o.Spec)===null||c===void 0?void 0:c.Name)!==null&&l!==void 0?l:"",siteTitle:((v=o.Spec)===null||v===void 0?void 0:v.Labels)&&((P=o.Spec)===null||P===void 0?void 0:P.Labels[De.$m]),hostname:(j=o.Spec)===null||j===void 0||(j=j.TaskTemplate)===null||j===void 0||(j=j.ContainerSpec)===null||j===void 0?void 0:j.Hostname,imageName:(h=(g=o.Spec)===null||g===void 0||(g=g.TaskTemplate)===null||g===void 0||(g=g.ContainerSpec)===null||g===void 0?void 0:g.Image)!==null&&h!==void 0?h:"",environment:(T=o.Spec)===null||T===void 0||(T=T.TaskTemplate)===null||T===void 0||(T=T.ContainerSpec)===null||T===void 0||(T=T.Env)===null||T===void 0?void 0:T.map(function(r){var Z=r.split("=");return{name:Z[0],value:Z.slice(1).join("=")}}),volumes:(K=o.Spec)===null||K===void 0||(K=K.TaskTemplate)===null||K===void 0||(K=K.ContainerSpec)===null||K===void 0||(K=K.Mounts)===null||K===void 0?void 0:K.map(function(r){var Z,V;return{dest:(Z=r.Target)!==null&&Z!==void 0?Z:"",host:(V=r.Source)!==null&&V!==void 0?V:"",type:r.Type,permission:r.ReadOnly?"readonly":"write"}}),restartPolicy:function(r,Z){return{name:(Z=r.Condition)!==null&&Z!==void 0?Z:"any",maxAttempt:r.MaxAttempts,window:r.Window,delay:r.Delay}}(((Q=o.Spec)===null||Q===void 0||(Q=Q.TaskTemplate)===null||Q===void 0?void 0:Q.RestartPolicy)||{}),cpus:function(r){return r?r/1e9:0}((k=o.Spec)===null||k===void 0||(k=k.TaskTemplate)===null||k===void 0||(k=k.Resources)===null||k===void 0||(k=k.Limits)===null||k===void 0?void 0:k.NanoCPUs),memory:function(r){return r?r/1024/1024:0}((Y=o.Spec)===null||Y===void 0||(Y=Y.TaskTemplate)===null||Y===void 0||(Y=Y.Resources)===null||Y===void 0||(Y=Y.Limits)===null||Y===void 0?void 0:Y.MemoryBytes),workDir:{useDefault:!((oe=o.Spec)!==null&&oe!==void 0&&(oe=oe.TaskTemplate)!==null&&oe!==void 0&&(oe=oe.ContainerSpec)!==null&&oe!==void 0&&oe.Dir),default:"",value:(a=o.Spec)===null||a===void 0||(a=a.TaskTemplate)===null||a===void 0||(a=a.ContainerSpec)===null||a===void 0?void 0:a.Dir},user:{useDefault:!((me=o.Spec)!==null&&me!==void 0&&(me=me.TaskTemplate)!==null&&me!==void 0&&(me=me.ContainerSpec)!==null&&me!==void 0&&me.User),default:"",value:(ne=o.Spec)===null||ne===void 0||(ne=ne.TaskTemplate)===null||ne===void 0||(ne=ne.ContainerSpec)===null||ne===void 0?void 0:ne.User},command:{useDefault:!((Ae=o.Spec)!==null&&Ae!==void 0&&(Ae=Ae.TaskTemplate)!==null&&Ae!==void 0&&(Ae=Ae.ContainerSpec)!==null&&Ae!==void 0&&Ae.Command),default:"",value:(pe=o.Spec)===null||pe===void 0||(pe=pe.TaskTemplate)===null||pe===void 0||(pe=pe.ContainerSpec)===null||pe===void 0||(pe=pe.Command)===null||pe===void 0?void 0:pe.join(" ")},log:function(r,Z){return{driver:(Z=r==null?void 0:r.Name)!==null&&Z!==void 0?Z:"json-file",maxFile:(r==null?void 0:r.Options)&&r.Options["max-file"],maxSize:(r==null?void 0:r.Options)&&r.Options["max-size"]}}((Xe=o.Spec)===null||Xe===void 0||(Xe=Xe.TaskTemplate)===null||Xe===void 0?void 0:Xe.LogDriver),dns:(je=o.Spec)===null||je===void 0||(je=je.TaskTemplate)===null||je===void 0||(je=je.ContainerSpec)===null||je===void 0||(je=je.DNSConfig)===null||je===void 0?void 0:je.Nameservers,label:((xe=o.Spec)===null||xe===void 0||(xe=xe.TaskTemplate)===null||xe===void 0||(xe=xe.ContainerSpec)===null||xe===void 0?void 0:xe.Labels)&&Object.entries((Ie=o.Spec)===null||Ie===void 0||(Ie=Ie.TaskTemplate)===null||Ie===void 0||(Ie=Ie.ContainerSpec)===null||Ie===void 0?void 0:Ie.Labels).map(function(r){return{name:r[0],value:r[1]}}),extraHosts:((Re=o.Spec)===null||Re===void 0||(Re=Re.TaskTemplate)===null||Re===void 0||(Re=Re.ContainerSpec)===null||Re===void 0?void 0:Re.Hosts)&&((w=o.Spec)===null||w===void 0||(w=w.TaskTemplate)===null||w===void 0||(w=w.ContainerSpec)===null||w===void 0?void 0:w.Hosts.map(function(r){var Z=r.split(":"),V=W()(Z,2),He=V[0],We=V[1];return{name:He,value:We}})),capAdd:(d=o.Spec)===null||d===void 0||(d=d.TaskTemplate)===null||d===void 0||(d=d.ContainerSpec)===null||d===void 0?void 0:d.CapabilityAdd,scheduling:function(r){return{mode:r!=null&&r.Global?"global":"replicated",replicas:r!=null&&r.Replicated?r.Replicated.Replicas:1}}((E=o.Spec)===null||E===void 0?void 0:E.Mode),constraint:function(r,Z,V,He){var We="all";r!=null&&(Z=r.Constraints)!==null&&Z!==void 0&&Z.includes("node.role==worker")&&(We="worker"),r!=null&&(V=r.Constraints)!==null&&V!==void 0&&V.includes("node.role==manager")&&(We="manager"),r==null||(He=r.Constraints)===null||He===void 0||He.forEach(function(Qe){Qe.includes("node.id==")&&(We="user")});var nn="",rn=[];return r!=null&&r.Constraints&&r.Constraints.forEach(function(Qe){if(Qe.includes("node.id==")){var un=Qe.split("node.id=="),on=W()(un,2),Sn=on[0],cn=on[1];nn=cn;return}if(Qe.includes("==")){var vn=Qe.split("=="),sn=W()(vn,2),mn=sn[0],pn=sn[1];rn.push({name:mn,value:pn,operator:"=="});return}if(Qe.includes("!=")){var fn=Qe.split("!="),dn=W()(fn,2),hn=dn[0],gn=dn[1];rn.push({name:hn,value:gn,operator:"!="});return}}),{role:We,node:nn,label:rn}}((M=o.Spec)===null||M===void 0||(M=M.TaskTemplate)===null||M===void 0?void 0:M.Placement),placement:((S=o.Spec)===null||S===void 0||(S=S.TaskTemplate)===null||S===void 0||(S=S.Placement)===null||S===void 0?void 0:S.Preferences)&&Object.entries((_=o.Spec)===null||_===void 0||(_=_.TaskTemplate)===null||_===void 0||(_=_.Placement)===null||_===void 0?void 0:_.Preferences).map(function(r){var Z,V;return{name:"spread",value:(Z=(V=r[1].Spread)===null||V===void 0?void 0:V.SpreadDescriptor)!==null&&Z!==void 0?Z:""}}),update:function(r,Z,V){return{parallelism:(Z=r==null?void 0:r.Parallelism)!==null&&Z!==void 0?Z:1,delay:(V=r==null?void 0:r.Delay)!==null&&V!==void 0?V:0,failureAction:r==null?void 0:r.FailureAction,order:r==null?void 0:r.Order}}((se=o.Spec)===null||se===void 0?void 0:se.UpdateConfig),healthcheck:function(r,Z,V,He,We,nn){var rn=r!=null&&(Z=r.Test)!==null&&Z!==void 0&&Z.includes("CMD-SHELL")?"CMD-SHELL":"CMD";return{interval:(V=r==null?void 0:r.Interval)!==null&&V!==void 0?V:30,timeout:(He=r==null?void 0:r.Timeout)!==null&&He!==void 0?He:10,retries:(We=r==null?void 0:r.Retries)!==null&&We!==void 0?We:3,cmd:r!=null&&r.Test?r==null||(nn=r.Test)===null||nn===void 0?void 0:nn.join(" "):"",shellType:rn}}((te=o.Spec)===null||te===void 0||(te=te.TaskTemplate)===null||te===void 0||(te=te.ContainerSpec)===null||te===void 0?void 0:te.Healthcheck)},ln=((Ue=o.Spec)===null||Ue===void 0?void 0:Ue.Labels)&&((en=o.Spec)===null||en===void 0?void 0:en.Labels[De.ev]);if(ln&&(an.imageRegistry=parseInt(ln)),(Je=o.Spec)!==null&&Je!==void 0&&(Je=Je.EndpointSpec)!==null&&Je!==void 0&&Je.Ports){var Ve;an.ports=(Ve=o.Spec)===null||Ve===void 0||(Ve=Ve.EndpointSpec)===null||Ve===void 0||(Ve=Ve.Ports)===null||Ve===void 0?void 0:Ve.map(function(r){var Z;return{dest:String(r.TargetPort),host:String((Z=r.PublishedPort)!==null&&Z!==void 0?Z:""),mode:r.PublishMode}})}(tn=Fe.current)===null||tn===void 0||tn.setFieldsValue(an),re(!0)}}});var _e=(0,s.useState)("basic"),ee=W()(_e,2),ie=ee[0],be=ee[1],Ke=new D.Uo("components.appForm"),$e=new D.Uo("swarm"),Fe=(0,s.useRef)(),ze=(0,s.useRef)(),ke=(0,s.useRef)(),C=(0,s.useRef)(),N=(0,s.useRef)(),X=(0,s.useState)(!1),J=W()(X,2),ve=J[0],re=J[1];return(0,i.jsx)(b.Z.Provider,{value:{createFormRef:Fe,volumeListRef:ze,createEnvRef:N,createLinkRef:C,domainRef:ke},children:(0,i.jsx)(fe.a,{drawerProps:{width:ye.R_,forceRender:n.forceRender,rootClassName:"createAppWapper"},formRef:Fe,title:$e.format("serviceCreateTitle"),onOpenChange:function(o){if(re(o),!o){var l,c;!((l=Fe.current)===null||l===void 0)&&l.resetFields&&((c=Fe.current)===null||c===void 0||c.resetFields()),be("basic")}},open:ve,trigger:n.showTrigger?(0,i.jsx)(he.ZP,{type:"primary",children:$e.format("serviceCreateTitle")}):void 0,onFinish:function(){var U=f()(m()().mark(function o(l){var c,v,P;return m()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return v={id:l.id,siteTitle:l.siteTitle,siteName:l.siteName,hostname:l.hostname,imageRegistry:l.imageRegistry,imageName:l.imageName,ports:l.ports,environment:l.environment,volumes:l.volumes,restartPolicy:l.restart,cpus:l.cpus,memory:l.memory,workDir:l.workDir&&!l.workDir.useDefault?l.workDir.value:"",user:l.user&&!l.user.useDefault?l.user.value:"",command:l.command&&!l.command.useDefault?l.command.value:"",entrypoint:l.entrypoint&&!l.entrypoint.useDefault?l.entrypoint.value:"",log:l.log,dns:l.dns,label:l.label,extraHosts:l.extraHosts,capAdd:l.capAdd,scheduling:l.scheduling,constraint:l.constraint,placement:l.placement,update:l.update},l.healthcheck&&l.healthcheck.cmd&&l.healthcheck.cmd!=""&&(v.healthcheck=l.healthcheck),v.scheduling&&((c=v.scheduling)===null||c===void 0?void 0:c.mode)=="global"&&v.ports&&(v.ports=(P=v.ports)===null||P===void 0?void 0:P.map(function(g){return g.mode="host",g})),h.next=5,(0,De.P3)(v);case 5:return n.onFinish&&n.onFinish(),h.abrupt("return",!0);case 7:case"end":return h.stop()}},o)}));return function(o){return U.apply(this,arguments)}}(),children:(0,i.jsxs)(z.Z,{direction:"column",gutter:[0,10],ghost:!0,children:[(0,i.jsxs)(z.Z,{ghost:!0,children:[(0,i.jsx)(A.Z,{name:"id",hidden:!0}),(0,i.jsx)(Oe.Z,{name:"siteTitle",label:D.FD.format("listDescription"),placeholder:$e.format("serviceCreateListDescriptionEmpty")}),(0,i.jsxs)(we.UW,{children:[(0,i.jsx)(Oe.Z,{width:"lg",name:"siteName",label:D.FD.format("listName"),required:!0,rules:[{required:!0}],placeholder:$e.format("serviceCreateListNameEmpty")}),(0,i.jsx)(Oe.Z,{label:"Hostname",name:"hostname",width:"md"})]}),(0,i.jsx)(qe,{})]}),(0,i.jsx)(Ce.Z,{offsetTop:10,target:function(){return document.querySelector(".createAppWapper .ant-drawer-body")},children:(0,i.jsx)(z.Z,{style:{margin:-20},children:(0,i.jsx)(L.Z,{activeKey:ie,onChange:function(o){be(o)},items:Ke.option("createTabOption",["basic","scheduling","run-command","cap"]).map(function(U){return{label:U.label,key:U.value}})})})}),(0,i.jsxs)(z.Z,{ghost:!0,children:[(0,i.jsxs)(de.Z,{show:ie=="basic",children:[(0,i.jsx)(le.Z,{showIngress:!0}),(0,i.jsx)(p.Z,{showAddButton:!0,showImportButton:!0,showCodeMode:!0,ref:N,drawerProps:{title:Ke.format("createEnvTitle")}}),(0,i.jsx)(q.Z,{showDefault:!0,ref:ze,showType:!0}),(0,i.jsx)(H.Z,{}),(0,i.jsx)(Ze.Z,{})]}),(0,i.jsxs)(de.Z,{show:ie=="scheduling",children:[(0,i.jsx)(Be,{}),(0,i.jsx)(R,{})]}),(0,i.jsxs)(de.Z,{show:ie=="run-command",children:[(0,i.jsx)(x,{}),(0,i.jsx)(u.Z,{showCommand:!0,showUser:!0,showWorkDir:!0}),(0,i.jsx)(ue.Z,{}),(0,i.jsx)(Ne.Z,{}),(0,i.jsx)(t.Z,{}),(0,i.jsx)(ce.Z,{})]}),(0,i.jsx)(de.Z,{show:ie=="cap",children:(0,i.jsx)(ae.Z,{})})]})]})})})}),F=B},94617:function(Ye,Te,e){e.d(Te,{Z:function(){return ke}});var Pe=e(97857),m=e.n(Pe),Le=e(15009),f=e.n(Le),I=e(99289),W=e.n(I),ye=e(5574),fe=e.n(ye),A=e(24494),he=e(5251),s=e(36146),H=e(86548),Ze=e(82061),ae=e(1883),p=e(42075),le=e(66309),q=e(25593),de=e(96074),z=e(83062),Oe=e(60940),we=e(37413),Ce=e(94359),L=e(67294),D=e(87662),b=e(78451),G=e(3616),Ee=e(33160),Ge=e(43425),i=e(57132),qe=e(71965),Me=e(45605),y=e(60433),$=e(38345),ge=e(97269),Se=e(24739),De=e(31199),Be=e(62370),ue=e(9773),Ne=e(64317),u=e(85265),x=e(86250),R=e(83622),t=e(84567),ce=e(26412),B=e(80821),F=e(76428),n=e(85893);function O(C){var N,X,J=new s.Uo("swarm"),ve=C.detail;if((N=ve.Spec)!==null&&N!==void 0&&(N=N.Mode)!==null&&N!==void 0&&N.Replicated){var re;return(0,n.jsxs)(p.Z,{children:[(0,n.jsx)(le.Z,{children:J.format("listServiceMode.replicated")}),(0,n.jsx)(le.Z,{color:"success",bordered:!1,children:(re=ve.ServiceStatus)===null||re===void 0?void 0:re.RunningTasks}),(0,n.jsx)(le.Z,{color:"gold",bordered:!1,children:ve.Spec.Mode.Replicated.Replicas})]})}else if((X=ve.Spec)!==null&&X!==void 0&&(X=X.Mode)!==null&&X!==void 0&&X.Global)return(0,n.jsx)(le.Z,{children:J.format("listServiceMode.global")})}var _e=e(81146);function ee(C){var N=(0,L.useState)(!1),X=fe()(N,2),J=X[0],ve=X[1],re=(0,L.useRef)();return(0,n.jsxs)(n.Fragment,{children:[C.trigger?L.cloneElement(C.trigger,{onClick:function(){ve(!0)}}):null,(0,n.jsx)(u.Z,{title:"".concat(s.FD.format("listLog")," - ").concat(C.detail.name),open:J,forceRender:!0,onClose:function(){ve(!1)},afterOpenChange:function(o){if(o)setTimeout(function(){var c,v;(c=re.current)===null||c===void 0||c.start(),(v=re.current)===null||v===void 0||v.fit()},1e3);else{var l;(l=re.current)===null||l===void 0||l.close()}},width:G.FK,children:J&&(0,n.jsx)(_e.Z,{ref:re,showInDrawer:!0,id:"swarm:log:".concat(C.type,":").concat(C.detail.id),request:function(){var U=W()(f()().mark(function o(l){var c;return f()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,A.m8)({id:C.detail.id,type:C.type,lineTotal:l.lineTotal,download:(c=l.download)!==null&&c!==void 0?c:!1,showTime:l.showTime});case 2:case"end":return P.stop()}},o)}));return function(o){return U.apply(this,arguments)}}(),download:function(){var U=W()(f()().mark(function o(l){var c;return f()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,A.Id)({id:C.detail.id,type:C.type,lineTotal:l.lineTotal,showTime:l.showTime,download:!0});case 2:return c=P.sent,P.abrupt("return",{data:new Blob([c],{type:"text/plain"}),name:C.detail.name+"_"+new Date().toLocaleDateString()+".log"});case 4:case"end":return P.stop()}},o)}));return function(o){return U.apply(this,arguments)}}()})})]})}var ie=e(98093),be=e(67255),Ke=(0,L.forwardRef)(function(C,N){var X,J,ve,re,U,o,l,c,v,P,j,h,g;(0,L.useImperativeHandle)(N,function(){return{show:function(d){me(d),k(!0)}}});var T=(0,L.useState)(!1),K=fe()(T,2),Q=K[0],k=K[1],Y=(0,L.useState)(),oe=fe()(Y,2),a=oe[0],me=oe[1],ne=new s.Uo("swarm"),Ae=(0,L.useState)(""),pe=fe()(Ae,2),Xe=pe[0],je=pe[1],xe=(0,L.useRef)(),Ie=(0,L.useRef)(),Re=(0,L.useRef)();return(0,L.useEffect)(function(){(0,D.K3)().then(function(w){var d;je((d=w.data.serverUrl)!==null&&d!==void 0?d:"")})},[]),(0,n.jsxs)(u.Z,{title:ne.format("serviceDetailTitle",{name:a==null||(X=a.Spec)===null||X===void 0?void 0:X.Name}),open:Q,forceRender:!0,width:G.R_,onClose:function(){k(!1),me(void 0),C.onFinish&&C.onFinish()},extra:[a&&(0,n.jsx)(B.Z,{buttonProps:{type:"link",icon:(0,n.jsx)(Ee.Z,{})},tips:s.FD.format("listManageRefresh"),action:W()(f()().mark(function w(){var d,E;return f()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,A.ig)({id:a.ID});case 2:E=S.sent,me(E.data.info),!((d=Re.current)===null||d===void 0)&&d.reloadAndRest&&Re.current.reloadAndRest();case 5:case"end":return S.stop()}},w)}))},"refresh")],children:[(0,n.jsx)(ie.Z,{forceRender:!0,ref:Ie,onFinish:W()(f()().mark(function w(){var d,E;return f()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,A.ig)({id:(d=a==null?void 0:a.ID)!==null&&d!==void 0?d:""});case 2:E=S.sent,me(E.data.info);case 4:case"end":return S.stop()}},w)}))}),(0,n.jsxs)(x.Z,{vertical:!0,gap:20,children:[(0,n.jsx)($.Z,{title:(0,n.jsx)(Ge.Z,{}),ghost:!0,subTitle:s.FD.format("listManage"),children:(0,n.jsxs)(p.Z,{wrap:!0,children:[a&&(0,n.jsx)(R.ZP,{type:"primary",icon:(0,n.jsx)(H.Z,{}),onClick:function(){var d;(d=Ie.current)===null||d===void 0||d.edit(a)},children:s.FD.format("listManageEdit")}),(0,n.jsx)(de.Z,{type:"vertical"}),a&&(0,n.jsx)(ee,{type:"service",detail:{id:(J=a.ID)!==null&&J!==void 0?J:"",name:(ve=(re=a.Spec)===null||re===void 0?void 0:re.Name)!==null&&ve!==void 0?ve:""},trigger:(0,n.jsx)(R.ZP,{icon:(0,n.jsx)(ae.Z,{}),children:s.FD.format("listManageLog")},"log")}),(a==null||(U=a.Spec)===null||U===void 0||(U=U.Mode)===null||U===void 0?void 0:U.Replicated)&&(0,n.jsx)(B.Z,{buttonProps:{icon:(0,n.jsx)(i.Z,{})},confirmProps:{forceRender:!0,onOpenChange:function(d,E){var M,S;(M=xe.current)===null||M===void 0||M.setFieldsValue({replicas:(S=a.Spec)===null||S===void 0||(S=S.Mode)===null||S===void 0||(S=S.Replicated)===null||S===void 0?void 0:S.Replicas,force:!1})},description:(0,n.jsx)(ge.A,{layout:"inline",submitter:!1,formRef:xe,children:(0,n.jsxs)(p.Z,{direction:"vertical",size:[0,15],style:{width:600},children:[(0,n.jsx)(q.Z.Text,{children:ne.format("serviceManageScalingTip")}),(0,n.jsxs)(Se.UW,{children:[(0,n.jsx)(De.Z,{label:ne.format("serviceManageScalingReplicas"),width:"sm",name:"replicas"}),(0,n.jsx)(Be.Z,{name:"force",valuePropName:"checked",children:(0,n.jsxs)(t.Z,{children:[s.FD.format("listManageDeployForce"),"\uFF1F"]})})]})]})})},action:W()(f()().mark(function w(){var d,E,M;return f()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,A.x$)({name:(d=a==null?void 0:a.ID)!==null&&d!==void 0?d:"",replicas:(E=xe.current)===null||E===void 0?void 0:E.getFieldValue("replicas"),force:(M=xe.current)===null||M===void 0?void 0:M.getFieldValue("force")}));case 1:case"end":return _.stop()}},w)})),onSuccess:function(){(0,A.ig)({id:a.ID}).then(function(d){me(d.data.info)})},children:s.FD.format("listManageScaling")}),a&&(0,n.jsx)(B.Z,{action:function(){return(0,A.x$)({name:a.ID,rollback:!0})},buttonProps:{icon:(0,n.jsx)(qe.Z,{})},confirmProps:{showCommonConfirm:!0},children:s.FD.format("listManageRollback")}),(0,n.jsx)(B.Z,{showDivider:!0,action:function(){var d;return(0,A.tm)({name:[(d=a==null?void 0:a.ID)!==null&&d!==void 0?d:""]})},buttonProps:{type:"primary",danger:!0,icon:(0,n.jsx)(Ze.Z,{})},confirmProps:{showCommonConfirm:!0},onSuccess:function(d){k(!1),C.onFinish&&C.onFinish()},children:s.FD.format("listManageDelete")})]})}),a&&(0,n.jsx)(we.Z,{publicPort:((o=a.Endpoint)===null||o===void 0?void 0:o.Ports)&&((l=a.Endpoint)===null||l===void 0?void 0:l.Ports.map(function(w){var d,E,M;return{PrivatePort:(d=w.TargetPort)!==null&&d!==void 0?d:0,Type:(E=w.Protocol)!==null&&E!==void 0?E:"tcp",IP:"",PublicPort:(M=w.PublishedPort)!==null&&M!==void 0?M:0}})),serverIp:Xe,showInDetail:!0,ghost:!0,layout:"inline"}),(0,n.jsx)($.Z,{title:(0,n.jsx)(Me.Z,{}),subTitle:s.FD.format("listManageDetail"),ghost:!0,children:(0,n.jsxs)(ce.Z,{column:1,bordered:!0,styles:{label:{width:150}},children:[(0,n.jsxs)(ce.Z.Item,{label:s.FD.format("listTitle"),children:[(0,n.jsx)(F.Z,{title:a==null?void 0:a.ID})," - ",a==null||(c=a.Spec)===null||c===void 0?void 0:c.Name,a&&((v=a.UpdateStatus)===null||v===void 0?void 0:v.State)&&(0,n.jsxs)(n.Fragment,{children:[" - ",(0,n.jsx)(Ce.Z,{status:"service.".concat((P=a.UpdateStatus)===null||P===void 0?void 0:P.State)})]})]}),(0,n.jsx)(ce.Z.Item,{label:s.FD.format("listDescription"),children:(a==null||(j=a.Spec)===null||j===void 0?void 0:j.Labels)&&a.Spec.Labels[A.$m]}),(0,n.jsx)(ce.Z.Item,{label:s.FD.format("listRunTask"),children:(0,n.jsx)(p.Z,{children:(a==null?void 0:a.ServiceStatus)&&Object.keys(a.ServiceStatus).map(function(w){var d=w;return(a==null?void 0:a.ServiceStatus)&&(0,n.jsx)(z.Z,{title:ne.format("listServiceStatusTipOption.".concat(d)),children:(0,n.jsxs)(le.Z,{color:ne.format("listServiceStatusColorOption.".concat(d)),bordered:!1,children:[ne.format("listServiceStatusOption.".concat(d))," ",a==null?void 0:a.ServiceStatus[d]]})},d)})})}),(0,n.jsx)(ce.Z.Item,{label:s.FD.format("listServiceMode"),children:a&&(0,n.jsx)(O,{detail:a})}),(0,n.jsx)(ce.Z.Item,{label:s.FD.format("listImageName"),children:a==null||(h=a.Spec)===null||h===void 0||(h=h.TaskTemplate)===null||h===void 0||(h=h.ContainerSpec)===null||h===void 0?void 0:h.Image}),(0,n.jsx)(ce.Z.Item,{label:s.FD.format("listVersion"),children:a==null||(g=a.Version)===null||g===void 0?void 0:g.Index}),(0,n.jsx)(ce.Z.Item,{label:s.FD.format("listCreatedAt"),children:(0,he.NF)(a==null?void 0:a.CreatedAt)}),(0,n.jsx)(ce.Z.Item,{label:s.FD.format("listUpdatedAt"),children:(0,he.NF)(a==null?void 0:a.UpdatedAt)})]})}),a&&(0,n.jsx)($.Z,{title:(0,n.jsx)(y.Z,{}),subTitle:ne.format("listTaskTitle"),ghost:!0,children:(0,n.jsx)(ue.Z,{scroll:{x:"max-content"},rowKey:"ID",search:{filterType:"light"},actionRef:Re,columns:[{search:!1,title:s.FD.format("listName"),render:function(d,E,M,S,_){return E.ID}},{search:!1,width:200,title:s.FD.format("listNodeName"),render:function(d,E,M,S,_){return E.NodeID}},{search:!1,width:50,title:s.FD.format("listSlot"),render:function(d,E,M,S,_){return E.Slot}},{key:"status",renderFormItem:function(d,E,M,S){return(0,n.jsx)(Ne.Z,{name:"status",valueEnum:Object.fromEntries(ne.option("listTaskStatusOption",["running","shutdown","accepted"]).map(function(_){return[_.value,_.label]}))})},width:120,title:s.FD.format("listRunStatus"),render:function(d,E,M){var S;if(E.Status.State!="running"){var _;return(0,n.jsx)(Ce.Z,{status:"task.".concat(E.Status.State),tip:(_=E.Status.Err)!==null&&_!==void 0?_:E.Status.Message})}return(0,n.jsx)(Ce.Z,{status:"task.".concat(E.DesiredState),tip:(S=E.Status.Err)!==null&&S!==void 0?S:E.Status.Message})}},{search:!1,width:180,title:s.FD.format("listUpdatedAt"),render:function(d,E,M,S,_){return(0,he.NF)(E.UpdatedAt)}},{search:!1,width:100,title:s.FD.format("listManage"),fixed:"right",render:function(d,E,M,S,_){var se,te;return(0,n.jsx)(p.Z,{children:(0,n.jsx)(ee,{type:"node",detail:{id:(se=E.ID)!==null&&se!==void 0?se:"",name:(te=E.ID)!==null&&te!==void 0?te:""},trigger:(0,n.jsx)(q.Z.Link,{children:(0,n.jsx)(ae.Z,{})})})})}}],request:function(){var w=W()(f()().mark(function d(E){var M,S;return f()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,(0,A.XX)({serviceName:a==null?void 0:a.ID,status:E.status});case 2:return M=se.sent,se.next=5,(0,A.HN)();case 5:return S=se.sent,se.abrupt("return",{data:M.data.list.map(function(te){var Ue,en=S&&((Ue=S.data.list.find(function(Je){return Je.ID==te.NodeID}))===null||Ue===void 0||(Ue=Ue.Description)===null||Ue===void 0?void 0:Ue.Hostname);return en&&(te.NodeID=en),te}),success:!0,total:M.data.list.length});case 7:case"end":return se.stop()}},d)}));return function(d){return w.apply(this,arguments)}}(),pagination:(0,be.Oh)()})})]})]})}),$e=Ke,Fe=e(98510),ze=(0,L.forwardRef)(function(C,N){(0,L.useImperativeHandle)(N,function(){return{reload:function(){var c;!((c=o.current)===null||c===void 0)&&c.reloadAndRest&&o.current.reloadAndRest()}}});var X=(0,L.useState)(""),J=fe()(X,2),ve=J[0],re=J[1],U=(0,L.useRef)(),o=(0,L.useRef)();return(0,L.useEffect)(function(){(0,D.K3)().then(function(l){var c;re((c=l.data.serverUrl)!==null&&c!==void 0?c:"")})},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)($e,{ref:U,onFinish:function(){var c;!((c=o.current)===null||c===void 0)&&c.reloadAndRest&&o.current.reloadAndRest()}}),(0,n.jsx)(Fe.C,m()(m()({},C.tableProps),{},{actionRef:o,rowKey:"ID",columns:[{key:"serviceName",title:s.FD.format("listServiceName"),render:function(c,v,P,j,h){var g,T=0;return v.Task&&v.Task.forEach(function(K){K.Status.State=="running"&&(T+=1)}),(0,n.jsxs)(p.Z,{children:[v.Task&&(0,n.jsx)(le.Z,{color:"success",bordered:!1,children:T}),(0,n.jsx)(q.Z.Link,{onClick:function(){var Q;(Q=U.current)===null||Q===void 0||Q.show(v)},children:(g=v.Spec)===null||g===void 0?void 0:g.Name})]})}},{width:150,search:!1,title:s.FD.format("listPort"),render:function(c,v,P,j,h){var g,T,K=[];return!((g=v.Endpoint)===null||g===void 0)&&g.Ports&&((T=v.Endpoint)===null||T===void 0||T.Ports.map(function(Q){var k,Y,oe;K.push({PrivatePort:(k=Q.TargetPort)!==null&&k!==void 0?k:0,Type:(Y=Q.Protocol)!==null&&Y!==void 0?Y:"tcp",IP:"0.0.0.0",PublicPort:(oe=Q.PublishedPort)!==null&&oe!==void 0?oe:0})})),(0,n.jsx)(we.Z,{ghost:!0,publicPort:K,serverIp:ve})}},{width:150,search:!1,title:s.FD.format("listServiceMode"),render:function(c,v,P,j,h){return(0,n.jsx)(O,{detail:v})}},{hidden:!C.showImageName,width:400,search:!1,title:s.FD.format("listImageName"),render:function(c,v,P,j,h){var g,T=((g=v.Spec)===null||g===void 0||(g=g.TaskTemplate)===null||g===void 0||(g=g.ContainerSpec)===null||g===void 0?void 0:g.Image)||"",K=T.includes("@")?T.split("@"):[T,null],Q=fe()(K,2),k=Q[0],Y=Q[1];return(0,n.jsx)(b.Z,{children:k})}},{search:!1,width:180,title:s.FD.format("listCreatedAt"),render:function(c,v,P,j,h){return(0,he.NF)(v.CreatedAt)}},{search:!1,width:180,title:s.FD.format("listUpdatedAt"),render:function(c,v,P,j,h){return(0,he.NF)(v.UpdatedAt)}},{hidden:!C.showManage,search:!1,title:s.FD.format("listManage"),width:100,fixed:"right",render:function(c,v,P,j,h){return(0,n.jsx)(p.Z,{split:(0,n.jsx)(de.Z,{type:"vertical"}),children:C.showManage&&C.showManage.onEdit&&(0,n.jsx)(q.Z.Link,{onClick:function(){var T;!((T=C.showManage)===null||T===void 0)&&T.onEdit&&C.showManage.onEdit(v)},children:(0,n.jsx)(z.Z,{title:s.FD.format("listManageEdit"),children:(0,n.jsx)(H.Z,{})})},"edit")})}}],request:function(){var l=W()(f()().mark(function c(v){var P,j,h;return f()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!C.showWithNodeId){T.next=7;break}return T.next=3,(0,A.rN)({nodeId:(P=C.showWithNodeId)!==null&&P!==void 0?P:""});case 3:return j=T.sent,T.abrupt("return",{data:j.data.list,total:j.data.list.length,success:!0});case 7:return T.next=9,(0,A.kM)({name:v.serviceName});case 9:return h=T.sent,T.abrupt("return",{data:h.data.list,total:h.data.list.length,success:!0});case 11:case"end":return T.stop()}},c)}));return function(c){return l.apply(this,arguments)}}(),quickToolbarRender:function(c){var v=c.selectedRows;return[(0,n.jsx)(B.Z,{buttonProps:{danger:!0,type:"primary",icon:(0,n.jsx)(Ze.Z,{})},action:W()(f()().mark(function P(){return f()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,A.tm)({name:v.map(function(g){return g.ID})}));case 1:case"end":return h.stop()}},P)})),onSuccess:function(){var j,h;return!((j=o.current)===null||j===void 0)&&j.reloadAndRest&&((h=o.current)===null||h===void 0||h.reloadAndRest()),!0},onError:function(){var j,h;return!((j=o.current)===null||j===void 0)&&j.reset&&((h=o.current)===null||h===void 0||h.reset()),!0},confirmProps:{showCommonConfirm:!0},children:s.FD.format("listManageDeleteBatch")})]},expandable:C.showWithNodeId?{expandRowByClick:!0,rowExpandable:function(c){return c.Task&&c.Task.length>0&&c.Task.filter(function(v){return v.Status.State=="running"}).length>0},expandedRowRender:function(c){return(0,n.jsx)(Oe.Z,{rowKey:"ID",columns:[{title:s.FD.format("listName"),render:function(P,j,h){return j.ID}},{width:120,title:s.FD.format("listRunStatus"),render:function(P,j,h){var g;return(0,n.jsx)(Ce.Z,{status:"task.".concat(j.Status.State),tip:(g=j.Status.Err)!==null&&g!==void 0?g:j.Status.Message})}},{title:s.FD.format("listUpdatedAt"),width:180,render:function(P,j,h){return(0,he.NF)(j.UpdatedAt)}},{width:100,title:s.FD.format("listManage"),fixed:"right",render:function(P,j,h){var g,T;return(0,n.jsx)(p.Z,{children:(0,n.jsx)(ee,{type:"node",detail:{id:(g=j.ID)!==null&&g!==void 0?g:"",name:(T=j.ID)!==null&&T!==void 0?T:""},trigger:(0,n.jsx)(q.Z.Link,{children:(0,n.jsx)(ae.Z,{})})})})}}],pagination:!1,dataSource:c.Task.filter(function(v){return v.Status.State=="running"})})}}:void 0}),"service-list")]})}),ke=ze},76428:function(Ye,Te,e){e.d(Te,{Z:function(){return f}});var Pe=e(25593),m=e(67294),Le=e(85893);function f(I){return(0,Le.jsx)(Pe.Z.Text,{copyable:!0,children:I.title})}},12323:function(Ye,Te,e){e.d(Te,{X:function(){return Pe},n:function(){return m}});var Pe={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},m=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},24494:function(Ye,Te,e){e.d(Te,{$m:function(){return W},HN:function(){return le},Id:function(){return ae},JC:function(){return fe},P3:function(){return De},QB:function(){return Ce},UK:function(){return he},XX:function(){return G},Zc:function(){return de},ev:function(){return ye},ig:function(){return ue},kM:function(){return qe},kp:function(){return D},m8:function(){return H},rN:function(){return Ge},tm:function(){return ge},vb:function(){return Oe},x$:function(){return y}});var Pe=e(15009),m=e.n(Pe),Le=e(99289),f=e.n(Le),I=e(82346),W="com.dpanel.swarm.service.description",ye="com.dpanel.swarm.service.registry";function fe(){return A.apply(this,arguments)}function A(){return A=f()(m()().mark(function u(){return m()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",(0,I.request)("/api/app/swarm/info",{method:"POST"}));case 1:case"end":return R.stop()}},u)})),A.apply(this,arguments)}function he(u){return s.apply(this,arguments)}function s(){return s=f()(m()().mark(function u(x){return m()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,I.request)("/api/app/swarm/init",{method:"POST",data:x}));case 1:case"end":return t.stop()}},u)})),s.apply(this,arguments)}function H(u){return Ze.apply(this,arguments)}function Ze(){return Ze=f()(m()().mark(function u(x){return m()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return x.id=String(x.id),t.abrupt("return",(0,I.request)("/api/app/swarm/log",{method:"POST",data:x}));case 2:case"end":return t.stop()}},u)})),Ze.apply(this,arguments)}function ae(u){return p.apply(this,arguments)}function p(){return p=f()(m()().mark(function u(x){return m()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return x.download=!0,x.id=String(x.id),t.next=4,(0,I.request)("/api/app/swarm/log",{method:"POST",data:x,responseType:"blob"});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},u)})),p.apply(this,arguments)}function le(u){return q.apply(this,arguments)}function q(){return q=f()(m()().mark(function u(x){return m()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,I.request)("/api/app/swarm/node-list",{method:"POST",data:x}));case 1:case"end":return t.stop()}},u)})),q.apply(this,arguments)}function de(u){return z.apply(this,arguments)}function z(){return z=f()(m()().mark(function u(x){return m()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,I.request)("/api/app/swarm/node-update",{method:"POST",data:x}));case 1:case"end":return t.stop()}},u)})),z.apply(this,arguments)}function Oe(u){return we.apply(this,arguments)}function we(){return we=f()(m()().mark(function u(x){return m()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,I.request)("/api/app/swarm/info-join",{method:"POST",data:x}));case 1:case"end":return t.stop()}},u)})),we.apply(this,arguments)}function Ce(u){return L.apply(this,arguments)}function L(){return L=f()(m()().mark(function u(x){return m()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,I.request)("/api/app/swarm/node-remove",{method:"POST",data:x}));case 1:case"end":return t.stop()}},u)})),L.apply(this,arguments)}function D(u){return b.apply(this,arguments)}function b(){return b=f()(m()().mark(function u(x){return m()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,I.request)("/api/app/swarm/node-prune",{method:"POST",data:x}));case 1:case"end":return t.stop()}},u)})),b.apply(this,arguments)}function G(u){return Ee.apply(this,arguments)}function Ee(){return Ee=f()(m()().mark(function u(x){return m()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,I.request)("/api/app/swarm/task-list",{method:"POST",data:x}));case 1:case"end":return t.stop()}},u)})),Ee.apply(this,arguments)}function Ge(u){return i.apply(this,arguments)}function i(){return i=f()(m()().mark(function u(x){return m()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,I.request)("/api/app/swarm/task-list-in-node",{method:"POST",data:x}));case 1:case"end":return t.stop()}},u)})),i.apply(this,arguments)}function qe(u){return Me.apply(this,arguments)}function Me(){return Me=f()(m()().mark(function u(x){return m()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,I.request)("/api/app/swarm/service-list",{method:"POST",data:x}));case 1:case"end":return t.stop()}},u)})),Me.apply(this,arguments)}function y(u){return $.apply(this,arguments)}function $(){return $=f()(m()().mark(function u(x){return m()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,I.request)("/api/app/swarm/service-scaling",{method:"POST",data:x}));case 1:case"end":return t.stop()}},u)})),$.apply(this,arguments)}function ge(u){return Se.apply(this,arguments)}function Se(){return Se=f()(m()().mark(function u(x){return m()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,I.request)("/api/app/swarm/service-delete",{method:"POST",data:x}));case 1:case"end":return t.stop()}},u)})),Se.apply(this,arguments)}function De(u){return Be.apply(this,arguments)}function Be(){return Be=f()(m()().mark(function u(x){return m()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,I.request)("/api/app/swarm/service-create",{method:"POST",data:x}));case 1:case"end":return t.stop()}},u)})),Be.apply(this,arguments)}function ue(u){return Ne.apply(this,arguments)}function Ne(){return Ne=f()(m()().mark(function u(x){return m()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,I.request)("/api/app/swarm/service-detail",{method:"POST",data:x}));case 1:case"end":return t.stop()}},u)})),Ne.apply(this,arguments)}}}]);
