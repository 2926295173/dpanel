"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1102],{64317:function(ue,U,e){var f=e(1413),a=e(45987),G=e(22270),C=e(67294),y=e(66758),S=e(73552),W=e(85893),M=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],A=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],j=function(I,b){var $=I.fieldProps,H=I.children,g=I.params,s=I.proFieldProps,x=I.mode,l=I.valueEnum,t=I.request,J=I.showSearch,ne=I.options,Q=(0,a.Z)(I,M),c=(0,C.useContext)(y.Z);return(0,W.jsx)(S.Z,(0,f.Z)((0,f.Z)({valueEnum:(0,G.h)(l),request:t,params:g,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,f.Z)({options:ne,mode:x,showSearch:J,getPopupContainer:c.getPopupContainer},$),ref:b,proFieldProps:s},Q),{},{children:H}))},_=C.forwardRef(function(D,I){var b=D.fieldProps,$=D.children,H=D.params,g=D.proFieldProps,s=D.mode,x=D.valueEnum,l=D.request,t=D.options,J=(0,a.Z)(D,A),ne=(0,f.Z)({options:t,mode:s||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},b),Q=(0,C.useContext)(y.Z);return(0,W.jsx)(S.Z,(0,f.Z)((0,f.Z)({valueEnum:(0,G.h)(x),request:l,params:H,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,f.Z)({getPopupContainer:Q.getPopupContainer},ne),ref:I,proFieldProps:g},J),{},{children:$}))}),L=C.forwardRef(j),E=_,v=L;v.SearchSelect=E,v.displayName="ProFormComponent",U.Z=v},52688:function(ue,U,e){var f=e(1413),a=e(45987),G=e(67294),C=e(73552),y=e(85893),S=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],W=G.forwardRef(function(M,A){var j=M.fieldProps,_=M.unCheckedChildren,L=M.checkedChildren,E=M.proFieldProps,v=(0,a.Z)(M,S);return(0,y.jsx)(C.Z,(0,f.Z)({valueType:"switch",fieldProps:(0,f.Z)({unCheckedChildren:_,checkedChildren:L},j),ref:A,valuePropName:"checked",proFieldProps:E,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},v))});U.Z=W},90672:function(ue,U,e){var f=e(1413),a=e(45987),G=e(67294),C=e(73552),y=e(85893),S=["fieldProps","proFieldProps"],W=function(A,j){var _=A.fieldProps,L=A.proFieldProps,E=(0,a.Z)(A,S);return(0,y.jsx)(C.Z,(0,f.Z)({ref:j,valueType:"textarea",fieldProps:_,proFieldProps:L},E))};U.Z=G.forwardRef(W)},2236:function(ue,U,e){e.d(U,{S:function(){return H}});var f=e(1413),a=e(4942),G=e(71002),C=e(45987),y=e(12044),S=e(28459),W=e(93967),M=e.n(W),A=e(97435),j=e(67294),_=e(73935),L=e(76509),E=e(98082),v=function(s){return(0,a.Z)({},s.componentCls,{position:"fixed",insetInlineEnd:0,bottom:0,zIndex:99,display:"flex",alignItems:"center",width:"100%",paddingInline:24,paddingBlock:0,boxSizing:"border-box",lineHeight:"64px",backgroundColor:(0,E.uK)(s.colorBgElevated,.6),borderBlockStart:"1px solid ".concat(s.colorSplit),"-webkit-backdrop-filter":"blur(8px)",backdropFilter:"blur(8px)",color:s.colorText,transition:"all 0.2s ease 0s","&-left":{flex:1,color:s.colorText},"&-right":{color:s.colorText,"> *":{marginInlineEnd:8,"&:last-child":{marginBlock:0,marginInline:0}}}})};function D(g){return(0,E.Xj)("ProLayoutFooterToolbar",function(s){var x=(0,f.Z)((0,f.Z)({},s),{},{componentCls:".".concat(g)});return[v(x)]})}function I(g,s){var x=s.stylish;return(0,E.Xj)("ProLayoutFooterToolbarStylish",function(l){var t=(0,f.Z)((0,f.Z)({},l),{},{componentCls:".".concat(g)});return x?[(0,a.Z)({},"".concat(t.componentCls),x==null?void 0:x(t))]:[]})}var b=e(85893),$=["children","className","extra","portalDom","style","renderContent"],H=function(s){var x=s.children,l=s.className,t=s.extra,J=s.portalDom,ne=J===void 0?!0:J,Q=s.style,c=s.renderContent,F=(0,C.Z)(s,$),Y=(0,j.useContext)(S.ZP.ConfigContext),n=Y.getPrefixCls,fe=Y.getTargetContainer,De=s.prefixCls||n("pro"),k="".concat(De,"-footer-bar"),xe=D(k),oe=xe.wrapSSR,le=xe.hashId,B=(0,j.useContext)(L.X),je=(0,j.useMemo)(function(){var se=B.hasSiderMenu,Me=B.isMobile,Se=B.siderWidth;if(se)return Se?Me?"100%":"calc(100% - ".concat(Se,"px)"):"100%"},[B.collapsed,B.hasSiderMenu,B.isMobile,B.siderWidth]),Fe=(0,j.useMemo)(function(){return(typeof window=="undefined"?"undefined":(0,G.Z)(window))===void 0||(typeof document=="undefined"?"undefined":(0,G.Z)(document))===void 0?null:(fe==null?void 0:fe())||document.body},[]),be=I("".concat(k,".").concat(k,"-stylish"),{stylish:s.stylish}),Oe=(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"".concat(k,"-left ").concat(le).trim(),children:t}),(0,b.jsx)("div",{className:"".concat(k,"-right ").concat(le).trim(),children:x})]});(0,j.useEffect)(function(){return!B||!(B!=null&&B.setHasFooterToolbar)?function(){}:(B==null||B.setHasFooterToolbar(!0),function(){var se;B==null||(se=B.setHasFooterToolbar)===null||se===void 0||se.call(B,!1)})},[]);var Te=(0,b.jsx)("div",(0,f.Z)((0,f.Z)({className:M()(l,le,k,(0,a.Z)({},"".concat(k,"-stylish"),!!s.stylish)),style:(0,f.Z)({width:je},Q)},(0,A.Z)(F,["prefixCls"])),{},{children:c?c((0,f.Z)((0,f.Z)((0,f.Z)({},s),B),{},{leftWidth:je}),Oe):Oe})),Be=!(0,y.j)()||!ne||!Fe?Te:(0,_.createPortal)(Te,Fe,k);return be.wrapSSR(oe((0,b.jsx)(j.Fragment,{children:Be},k)))}},76509:function(ue,U,e){e.d(U,{X:function(){return a}});var f=e(67294),a=(0,f.createContext)({})},24963:function(ue,U,e){var f=e(67294),a=(0,f.createContext)({});U.Z=a},68548:function(ue,U,e){e.r(U),e.d(U,{default:function(){return _e}});var f=e(19632),a=e.n(f),G=e(64599),C=e.n(G),y=e(15009),S=e.n(y),W=e(99289),M=e.n(W),A=e(5574),j=e.n(A),_=e(184),L=e(38345),E=e(5966),v=e(67294),D=e(91058),I=e(85576),b=e(83062),$=e(14726),H=e(94668),g=e(97857),s=e.n(g),x=e(17186),l=e(24739),t=e(85893),J=(0,v.forwardRef)(function(V,te){var q=(0,v.useRef)();(0,v.useImperativeHandle)(te,function(){return{addItem:function(Z,O){var N,o=(N=q.current)===null||N===void 0?void 0:N.getList(),i=!1;if(o==null||o.map(function(R){if(R.name==Z){i=!0;return}}),!i){var X;(X=q.current)===null||X===void 0||X.add({name:Z,value:O})}},clear:function(){var Z;(Z=q.current)===null||Z===void 0||(Z=Z.getList())===null||Z===void 0||Z.map(function(O,N){var o;(o=q.current)===null||o===void 0||o.remove(N)})}}});var ee={};return V.hideCopyButton===!0&&(ee.copyIconProps=!1),V.hideDeleteButton===!0&&(ee.deleteIconProps=!1),(0,t.jsx)(x.u,s()(s()({name:V.name,actionRef:q,creatorButtonProps:V.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(V.label?V.label:V.name)}:!1,min:0},ee),{},{children:function(Z,O,N){return(0,t.jsx)(l.UW,{children:V.items.map(function(o){return o.render?(0,t.jsx)("div",{children:o.render&&o.render(Z,O,N)},"".concat(V.name,"-").concat(o.name,"-").concat(Z.key)):(0,t.jsx)(E.Z,{width:o.width,name:o.name,label:o.label,required:o.required,rules:[{required:o.required}],disabled:o.disabled,placeholder:o.placeholder},"".concat(V.name,"-").concat(o.name,"-").concat(Z.key))})})}}))}),ne=J,Q=e(92067),c=(0,v.forwardRef)(function(V,te){var q=(0,v.useState)(!1),ee=j()(q,2),re=ee[0],Z=ee[1],O=(0,v.useState)(),N=j()(O,2),o=N[0],i=N[1];return(0,v.useImperativeHandle)(te,function(){return{}}),(0,t.jsxs)(L.Z,{title:"\u670D\u52A1\u4F9D\u8D56\u66FF\u6362",subTitle:"\u66FF\u6362\u540ECompose\u4E2D\u7684\u670D\u52A1\u5C06\u4E0D\u4F1A\u521B\u5EFA",headerBordered:!0,children:[(0,t.jsx)(I.Z,{title:"\u9009\u62E9\u5BB9\u5668",width:1024,footer:!1,open:re,onCancel:function(){return Z(!1)},children:(0,t.jsx)(Q.Z,{onSelect:function(R){o==null||o.setCurrentRowData({target:R.Name}),Z(!1)}})}),(0,t.jsx)(ne,{name:"replace",hideCopyButton:!0,hideDeleteButton:!0,items:[{label:"\u4F9D\u8D56\u670D\u52A1",name:"depend",disabled:!0},{label:"\u66FF\u6362\u670D\u52A1",name:"target",render:function(R,ie,de){return(0,t.jsx)(E.Z,{label:"\u66FF\u6362\u5DF2\u6709\u5BB9\u5668",name:"target",placeholder:"\u8BF7\u9009\u62E9\u5DF2\u6709\u5BB9\u5668",addonAfter:(0,t.jsx)(b.Z,{title:"\u9009\u62E9\u66FF\u6362\u7684\u5BB9\u5668",children:(0,t.jsx)($.ZP,{type:"primary",icon:(0,t.jsx)(H.Z,{}),onClick:function(){i(de),Z(!0)}})},R.key)},R.key)}}]})]})}),F=c,Y=e(10523),n=e(82034),fe=(0,v.forwardRef)(function(V,te){var q=(0,v.useState)(!1),ee=j()(q,2),re=ee[0],Z=ee[1],O=(0,v.useRef)();return(0,v.useImperativeHandle)(te,function(){return{edit:function(o,i){var X,R,ie;if(!((X=O.current)===null||X===void 0)&&X.resetFields&&((R=O.current)===null||R===void 0||R.resetFields()),(ie=O.current)===null||ie===void 0||ie.setFieldsValue({name:o.name}),i!=null&&i.containerName){var de;(de=O.current)===null||de===void 0||de.setFieldsValue({containerName:i.containerName})}else{var pe;(pe=O.current)===null||pe===void 0||pe.setFieldsValue({containerName:o.container_name})}if(i!=null&&i.environment){var ce;(ce=O.current)===null||ce===void 0||ce.setFieldsValue({environment:i.environment})}else{var w;(w=O.current)===null||w===void 0||w.setFieldsValue({environment:o.environment&&Object.keys(o.environment).map(function(z){return{name:z,value:o.environment&&o.environment[z]?o.environment[z]:""}})})}if(i!=null&&i.ports){var ve;(ve=O.current)===null||ve===void 0||ve.setFieldsValue({ports:i.ports})}else{var ge;(ge=O.current)===null||ge===void 0||ge.setFieldsValue({ports:o.ports&&o.ports.map(function(z){return{host:z.published,dest:String(z.target)}})})}if(i!=null&&i.volumes){var me;(me=O.current)===null||me===void 0||me.setFieldsValue({volumes:i.volumes})}else{var Ce;(Ce=O.current)===null||Ce===void 0||Ce.setFieldsValue({volumes:o.volumes&&o.volumes.map(function(z){return{host:z.source,dest:z.target,permission:z.read_only?"read":"write"}})})}if(i!=null&&i.replace){var Pe;(Pe=O.current)===null||Pe===void 0||Pe.setFieldsValue({replace:i.replace})}else{var ye;(ye=O.current)===null||ye===void 0||ye.setFieldsValue({replace:o.depends_on&&Object.keys(o.depends_on).map(function(z){return{depend:z,target:""}})})}Z(!0)}}}),(0,t.jsxs)(_.a,{open:re,onOpenChange:function(o){Z(o)},drawerProps:{forceRender:!0},formRef:O,title:"\u7F16\u8F91\u5BB9\u5668\u670D\u52A1",onFinish:function(){var N=M()(S()().mark(function o(i){return S()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return V.onFinish&&V.onFinish(i),R.abrupt("return",!0);case 2:case"end":return R.stop()}},o)}));return function(o){return N.apply(this,arguments)}}(),children:[(0,t.jsxs)(L.Z,{children:[(0,t.jsx)(E.Z,{label:"\u670D\u52A1\u540D\u79F0",name:"name",disabled:!0}),(0,t.jsx)(E.Z,{label:"\u5BB9\u5668\u540D\u79F0",name:"containerName",tooltip:"\u6307\u5B9A\u5BB9\u5668\u540D\u79F0\u540E\uFF0C\u65E0\u6CD5\u591A\u6B21\u90E8\u7F72\u3002\u4E3A\u7A7A\u65F6\u7531 compose \u81EA\u52A8\u751F\u6210"})]}),(0,t.jsx)(n.Z,{showInDrawer:!0}),(0,t.jsx)(D.Z,{showAddButton:!0,showInDrawer:!0,showImportButton:!0}),(0,t.jsx)(Y.Z,{showInDrawer:!0}),(0,t.jsx)(F,{})]},"create")}),De=fe,k=e(89063),xe=e(24963),oe=e(90098),le=e(45742),B=e(91806),je=e(27496),Fe=e(43425),be=e(97269),Oe=e(2236),Te=e(62370),Be=e(86615),se=e(97462),Me=e(90672),Se=e(95213),Le=e(95089),Ae=e(54006),we=e(63490),Ie=e(42075),Ue=e(66309),We=e(96074),Re=e(91845);function _e(){var V=(0,v.useContext)(xe.Z),te=V.loading,q=(0,Ae.useNavigate)(),ee=(0,v.useState)([]),re=j()(ee,2),Z=re[0],O=re[1],N=(0,v.useRef)(),o=(0,v.useRef)(),i=(0,v.useRef)(),X=(0,Ae.useSearchParams)(),R=j()(X,2),ie=R[0],de=R[1],pe=(0,v.useState)(),ce=j()(pe,2),w=ce[0],ve=ce[1],ge=(0,v.useState)("text"),me=j()(ge,2),Ce=me[0],Pe=me[1],ye=(0,v.useState)(""),z=j()(ye,2),Ke=z[0],Ve=z[1],Ee=function(){var K=M()(S()().mark(function u(r){var p,d;return S()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(r.yaml){m.next=2;break}return m.abrupt("return");case 2:return m.next=4,(0,oe.xC)({yaml:r.yaml});case 4:if(d=m.sent,!(!d||!d.data||!d.data.project)){m.next=7;break}return m.abrupt("return");case 7:(p=i.current)===null||p===void 0||p.setFieldValue("yaml",r.yaml),r.disableSetYaml||Ve(r.yaml),d.data.project&&O(Object.keys(d.data.project.services).map(function(P,he){var T=d.data.project.services[P];if(r.override&&r.override[P]){var Ze=r.override[P];Ze.ports&&(T.ports=Ze.ports.map(function(ae){return{target:parseInt(ae.dest),published:ae.host}})),Ze.replace&&Ze.replace.map(function(ae){T.depends_on&&T.depends_on[ae.depend]&&ae.target&&(T.depends_on["".concat(ae.target,":").concat(ae.depend)]=T.depends_on[ae.depend],delete T.depends_on[ae.depend])})}return T.name=P,T}));case 10:case"end":return m.stop()}},u)}));return function(r){return K.apply(this,arguments)}}(),Ne=function(u){var r=u.matchAll(/\$\{(\w+)[:-]?(.*)\}/g),p=C()(r),d;try{for(p.s();!(d=p.n()).done;){var h,m=d.value;(h=N.current)===null||h===void 0||h.addEnvItem(m[1],m[2]?m[2].indexOf("-")==0?m[2].substring(1):m[2]:"")}}catch(P){p.e(P)}finally{p.f()}};return(0,v.useEffect)(function(){var K=ie.get("id");K&&(te.show(),(0,oe.YZ)({id:parseInt(K)}).then(function(u){var r;if(ve(u.data.detail),Pe(u.data.detail.setting.type),u.data.detail.setting.type==""&&(u.data.detail.setting.type="text"),(r=i.current)===null||r===void 0||r.setFieldsValue({name:u.data.detail.name,title:u.data.detail.title,type:u.data.detail.setting.type,yaml:u.data.detail.yaml,override:u.data.detail.setting.override}),u.data.detail.setting.type=="remoteUrl"){var p;(p=i.current)===null||p===void 0||p.setFieldValue("remoteUrl",u.data.detail.setting.uri[0])}else if(u.data.detail.setting.type=="serverPath"){var d;(d=i.current)===null||d===void 0||d.setFieldValue("serverPath",u.data.detail.setting.uri[0])}else if(u.data.detail.setting.type=="storagePath"){var h;(h=i.current)===null||h===void 0||h.setFieldValue("storagePath","/dpanel/compose/"+u.data.detail.setting.uri[0])}Ee({yaml:u.data.detail.yaml,override:u.data.detail.setting.override})}).finally(function(){te.destroy()}))},[]),(0,t.jsx)(be.A,{submitter:{render:function(u,r){return(0,t.jsx)(Oe.S,{children:r})}},formRef:i,onFinish:function(){var K=M()(S()().mark(function u(r){var p,d,h;return S()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return p={type:r.type,name:r.name,title:r.title,override:r.override},w!=null&&w.id&&(p.id=w.id),r.type=="text"?p.yaml=r.yaml:r.type=="remoteUrl"?p.remoteUrl=r.remoteUrl:r.type=="serverPath"&&(p.serverPath=r.serverPath),P.next=5,(0,oe.im)(p);case 5:if(d=P.sent,!d.data.id){P.next=10;break}return(h=i.current)===null||h===void 0||h.resetFields(),q("/compose/deploy/"+d.data.id),P.abrupt("return",!0);case 10:return P.abrupt("return",!1);case 11:case"end":return P.stop()}},u)}));return function(u){return K.apply(this,arguments)}}(),children:(0,t.jsxs)(L.Z,{split:"vertical",children:[(0,t.jsxs)(L.Z,{split:"horizontal",colSpan:"55%",children:[(0,t.jsxs)(L.Z,{title:(0,t.jsx)(le.Z,{}),subTitle:"\u57FA\u7840\u4FE1\u606F",children:[(0,t.jsx)(E.Z,{label:"\u7AD9\u70B9\u540D\u79F0",name:"title",fieldProps:{onChange:function(u){var r="";if(u.target.value&&!w){var p,d=(0,Re.N9)(u.target.value.trim(),{toneType:"none",type:"array"});r=d.join(""),(p=i.current)===null||p===void 0||p.setFieldValue("name",r)}}}}),(0,t.jsx)(E.Z,{label:"\u7AD9\u70B9\u6807\u8BC6",name:"name",required:!0,rules:[{required:!0}],disabled:!!w,placeholder:"\u6807\u8BC6Compose\u521B\u5EFA\u7684\u5BB9\u5668\u7EC4\uFF0C\u53EA\u5141\u8BB8\u4E3A\u82F1\u6587\u6216\u662F\u6570\u5B57"}),(0,t.jsx)(Te.Z,{name:"override"}),(0,t.jsx)(Be.Z.Group,{label:"Yaml \u6765\u6E90",name:"type",initialValue:"text",fieldProps:{defaultValue:"text",onChange:function(){}},options:[{label:"yaml",value:"text",disabled:(w==null?void 0:w.setting.type)=="storagePath"},{label:"\u8FDC\u7A0B\u5730\u5740",value:"remoteUrl",disabled:(w==null?void 0:w.setting.type)=="storagePath"},{label:"\u9762\u677F\u5BB9\u5668\u5185\u8DEF\u5F84",value:"serverPath",disabled:(w==null?void 0:w.setting.type)=="storagePath"},{label:"\u81EA\u52A8\u53D1\u73B0",value:"storagePath"}]}),(0,t.jsx)(se.Z,{name:["type"],children:function(u){var r=u.type;if(r=="text")return(0,t.jsx)(k.Z,{title:"\u5BFC\u5165\u672C\u5730 compose \u6587\u4EF6",onImport:function(d){return Ee({yaml:d}),!0},onLoad:function(d){if(d.indexOf("services:")<0)throw new Error("\u5BFC\u5165\u7684compose\u6587\u4EF6\u9519\u8BEF");return!0}});if(r=="remoteUrl")return(0,t.jsx)(E.Z,{label:"",required:!0,rules:[{required:!0}],name:"remoteUrl",placeholder:"\u8BF7\u8F93\u5165\u8FDC\u7A0B docker-compose.yaml \u94FE\u63A5",fieldProps:{onBlur:function(){var p=M()(S()().mark(function h(m){var P;return S()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(m.target.value){T.next=2;break}return T.abrupt("return");case 2:return te.show(),T.next=5,(0,oe.MG)({uri:m.target.value});case 5:P=T.sent,te.destroy(),P&&P.data&&P.data.content&&Ee({yaml:P.data.content});case 8:case"end":return T.stop()}},h)}));function d(h){return p.apply(this,arguments)}return d}()}});if(r=="serverPath")return(0,t.jsx)(E.Z,{label:"",required:!0,rules:[{required:!0}],name:"serverPath",placeholder:"\u8BF7\u6307\u5B9A\u9762\u677F\u5BB9\u5668\u5185\u7684\u76EE\u5F55\uFF0C\u5BBF\u4E3B\u673A\u76EE\u5F55\u9700\u8981\u5148\u6302\u8F7D\u5230\u9762\u677F\u5BB9\u5668\u4E2D",initialValue:"",fieldProps:{onBlur:function(){var p=M()(S()().mark(function h(m){var P;return S()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(m.target.value){T.next=2;break}return T.abrupt("return");case 2:return T.next=4,(0,oe.MG)({uri:m.target.value});case 4:P=T.sent,P&&P.data&&P.data.content&&Ee({yaml:P.data.content});case 6:case"end":return T.stop()}},h)}));function d(h){return p.apply(this,arguments)}return d}()}});if(r=="storagePath")return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(E.Z,{name:"storagePath",required:!0,disabled:!0,placeholder:"\u6302\u8F7D /dpanel/compose \u76EE\u5F55\u540E\uFF0C\u81EA\u52A8\u53D1\u73B0\u3002",rules:[{required:!0,message:"\u6302\u8F7D /dpanel/compose \u76EE\u5F55\u540E\uFF0C\u81EA\u52A8\u53D1\u73B0\u3002"}]})})}})]}),(0,t.jsx)(De,{ref:o,onFinish:function(u){var r,p,d=(r=i.current)===null||r===void 0?void 0:r.getFieldValue("override");d||(d={}),d[u.name]=u,O(a()(Z.map(function(h){return h.name==u.name&&(u.ports&&(h.ports=u.ports.map(function(m){return{target:parseInt(m.dest),published:m.host}})),u.replace&&u.replace.map(function(m){h.depends_on&&h.depends_on[m.depend]&&m.target&&(h.depends_on["".concat(m.target,":").concat(m.depend)]=h.depends_on[m.depend],delete h.depends_on[m.depend])})),h}))),(p=i.current)===null||p===void 0||p.setFieldValue("override",d)}}),(0,t.jsx)(L.Z,{title:(0,t.jsx)(B.Z,{}),subTitle:"\u670D\u52A1\u5217\u8868",children:(0,t.jsx)(we.Z,{dataSource:Z,rowKey:"name",pagination:!1,columns:[{title:"\u540D\u79F0",dataIndex:"name"},{title:"\u955C\u50CF",dataIndex:"image"},{title:"\u7AEF\u53E3",dataIndex:"ports",render:function(u,r,p){return r.ports&&r.ports.map(function(d,h){return(0,t.jsx)(Ie.Z,{size:"large",wrap:!0,children:(0,t.jsxs)(Ue.Z,{color:"#2db7f5",icon:d.published?(0,t.jsx)(je.Z,{}):"",style:{marginBottom:5},children:[d.published," : ",d.target]})},"space".concat(h))})}},{title:"\u4F9D\u8D56",dataIndex:"dependsOn",width:150,render:function(u,r,p){if(r.depends_on)return(0,t.jsx)(Ie.Z,{wrap:!0,children:Object.keys(r.depends_on).map(function(d){var h=d;return r.external_links&&r.external_links.map(function(m){m.indexOf(":"+d)>-1&&(h=m)}),h})})}},{title:"\u64CD\u4F5C",width:80,render:function(u,r,p){return(0,t.jsx)(Ie.Z,{split:(0,t.jsx)(We.Z,{type:"vertical"}),children:(0,t.jsx)($.ZP,{type:"link",onClick:function(){var h,m=(h=i.current)===null||h===void 0?void 0:h.getFieldValue("override");if(m&&m[r.name]){var P;(P=o.current)===null||P===void 0||P.edit(r,m[r.name])}else{var he;(he=o.current)===null||he===void 0||he.edit(r)}return!1},children:(0,t.jsx)(b.Z,{title:"\u7F16\u8F91\u670D\u52A1",children:(0,t.jsx)(Fe.Z,{})})},"manage")})}}]})})]}),(0,t.jsxs)(L.Z,{title:(0,t.jsx)(le.Z,{}),subTitle:"compose.yaml",children:[(0,t.jsx)(Me.Z,{name:"yaml",hidden:!0}),(0,t.jsx)(Le.ZP,{theme:"dark",minHeight:"550px",onChange:function(u,r){var p;(p=i.current)===null||p===void 0||p.setFieldValue("yaml",u)},onBlur:function(){var u;Ee({yaml:(u=i.current)===null||u===void 0?void 0:u.getFieldValue("yaml"),disableSetYaml:!0})},readOnly:Ce!="text",value:Ke,extensions:[Se.RI.yaml()]})]})]})},"create")}},90098:function(ue,U,e){e.d(U,{GG:function(){return $},MG:function(){return t},Oh:function(){return v},U_:function(){return x},YZ:function(){return j},ik:function(){return L},im:function(){return S},mg:function(){return I},pm:function(){return M},xC:function(){return ne}});var f=e(15009),a=e.n(f),G=e(99289),C=e.n(G),y=e(54006);function S(c){return W.apply(this,arguments)}function W(){return W=C()(a()().mark(function c(F){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,y.request)("/api/app/compose/create",{method:"POST",data:F}));case 1:case"end":return n.stop()}},c)})),W.apply(this,arguments)}function M(c){return A.apply(this,arguments)}function A(){return A=C()(a()().mark(function c(F){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,y.request)("/api/app/compose/get-list",{method:"POST",data:F}));case 1:case"end":return n.stop()}},c)})),A.apply(this,arguments)}function j(c){return _.apply(this,arguments)}function _(){return _=C()(a()().mark(function c(F){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,y.request)("/api/app/compose/get-detail",{method:"POST",data:F}));case 1:case"end":return n.stop()}},c)})),_.apply(this,arguments)}function L(c){return E.apply(this,arguments)}function E(){return E=C()(a()().mark(function c(F){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,y.request)("/api/app/compose/delete",{method:"POST",data:F}));case 1:case"end":return n.stop()}},c)})),E.apply(this,arguments)}function v(c){return D.apply(this,arguments)}function D(){return D=C()(a()().mark(function c(F){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,y.request)("/api/app/compose/container-deploy",{method:"POST",data:F}));case 1:case"end":return n.stop()}},c)})),D.apply(this,arguments)}function I(c){return b.apply(this,arguments)}function b(){return b=C()(a()().mark(function c(F){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,y.request)("/api/app/compose/container-destroy",{method:"POST",data:F}));case 1:case"end":return n.stop()}},c)})),b.apply(this,arguments)}function $(c){return H.apply(this,arguments)}function H(){return H=C()(a()().mark(function c(F){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,y.request)("/api/app/compose/container-ctrl",{method:"POST",data:F}));case 1:case"end":return n.stop()}},c)})),H.apply(this,arguments)}function g(c){return s.apply(this,arguments)}function s(){return s=_asyncToGenerator(_regeneratorRuntime().mark(function c(F){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/api/app/compose/container-log",{method:"POST",data:F}));case 1:case"end":return n.stop()}},c)})),s.apply(this,arguments)}function x(c){return l.apply(this,arguments)}function l(){return l=C()(a()().mark(function c(F){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,y.request)("/api/app/compose/container-process-kill",{method:"POST",data:F}));case 1:case"end":return n.stop()}},c)})),l.apply(this,arguments)}function t(c){return J.apply(this,arguments)}function J(){return J=C()(a()().mark(function c(F){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,y.request)("/api/app/compose/get-from-uri",{method:"POST",data:F}));case 1:case"end":return n.stop()}},c)})),J.apply(this,arguments)}function ne(c){return Q.apply(this,arguments)}function Q(){return Q=C()(a()().mark(function c(F){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,y.request)("/api/app/compose/parse",{method:"POST",data:F}));case 1:case"end":return n.stop()}},c)})),Q.apply(this,arguments)}},60335:function(ue,U,e){e.d(U,{IE:function(){return M},IW:function(){return S},KK:function(){return v},LJ:function(){return I},Re:function(){return $},eE:function(){return L},jV:function(){return j}});var f=e(15009),a=e.n(f),G=e(99289),C=e.n(G),y=e(54006);function S(g){return W.apply(this,arguments)}function W(){return W=C()(a()().mark(function g(s){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,y.request)("/api/app/container/status",{method:"POST",data:s}));case 1:case"end":return l.stop()}},g)})),W.apply(this,arguments)}function M(g){return A.apply(this,arguments)}function A(){return A=C()(a()().mark(function g(s){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,y.request)("/api/app/container/get-list",{data:s,method:"POST"}));case 1:case"end":return l.stop()}},g)})),A.apply(this,arguments)}function j(g){return _.apply(this,arguments)}function _(){return _=C()(a()().mark(function g(s){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,y.request)("/api/app/container/get-detail",{data:s,method:"POST"}));case 1:case"end":return l.stop()}},g)})),_.apply(this,arguments)}function L(g){return E.apply(this,arguments)}function E(){return E=C()(a()().mark(function g(s){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,y.request)("/api/app/container/update",{data:s,method:"POST"}));case 1:case"end":return l.stop()}},g)})),E.apply(this,arguments)}function v(){return D.apply(this,arguments)}function D(){return D=C()(a()().mark(function g(){return a()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",(0,y.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return x.stop()}},g)})),D.apply(this,arguments)}function I(g){return b.apply(this,arguments)}function b(){return b=C()(a()().mark(function g(s){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,y.request)("/api/app/container/export",{method:"POST",data:s,responseType:"blob"}));case 1:case"end":return l.stop()}},g)})),b.apply(this,arguments)}function $(g){return H.apply(this,arguments)}function H(){return H=C()(a()().mark(function g(s){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,y.request)("/api/app/container/commit",{method:"POST",data:s}));case 1:case"end":return l.stop()}},g)})),H.apply(this,arguments)}}}]);
