"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3357],{76428:function(Y,v,t){t.d(v,{Z:function(){return h}});var g=t(25593),f=t(67294),P=t(85893);function h(j){return(0,P.jsx)(g.Z.Text,{copyable:!0,children:j.title})}},70977:function(Y,v,t){t.r(v),t.d(v,{default:function(){return ue}});var g=t(15009),f=t.n(g),P=t(99289),h=t.n(P),j=t(5574),D=t.n(j),l=t(3393),X=t(43425),H=t(58638),J=t(87784),x=t(40666),Q=t(1912),w=t(77171),k=t(48689),O=t(45742),i=t(38345),Z=t(97269),A=t(62370),q=t(7529),ee=t(5966),C=t(63713),M=t(42075),ne=t(96074),te=t(65233),L=t(2487),se=t(4393),T=t(66309),U=t(25593),a=t(26412),oe=t(63490),_=t(67294),E=t(80821),ae=t(5251),p=t(93162),fe=t.n(p),re=t(18148),ie=t(96042),le=t(24963),_e=t(76428),n=t(85893);function ue(){var B,I=(0,_.useContext)(le.Z),Pe=I.message,he=I.notice,je=I.lang,de=(0,_.useState)(),W=D()(de,2),e=W[0],ce=W[1],K=(0,C.useParams)(),b=(0,_.useRef)(),Ee=(0,_.useState)(0),S=D()(Ee,2),R=S[0],y=S[1],me=(0,C.useNavigate)(),F=(0,C.useAccess)(),ve=(0,_.useState)(),$=D()(ve,2),c=$[0],De=$[1],ge=(0,_.useState)(""),z=D()(ge,2),G=z[0],N=z[1];return(0,_.useEffect)(function(){K.id&&(0,l.YU)({md5:K.id}).then(function(s){ce(s.data),F.canSeeImageRemoteTag&&(0,l.cd)({imageName:s.data.info.RepoTags[0]}).then(function(o){De(o.data.list)}).catch(function(o){})})},[R]),(0,n.jsx)("div",{children:(0,n.jsxs)(i.Z,{direction:"column",ghost:!0,gutter:[0,10],children:[(0,n.jsx)(i.Z,{title:(0,n.jsx)(X.Z,{}),subTitle:"\u5E38\u7528\u64CD\u4F5C",headerBordered:!0,bordered:!0,children:(0,n.jsxs)(M.Z,{children:[(0,n.jsx)(E.Z,{icon:(0,n.jsx)(H.Z,{}),action:function(){var o;return(0,l.Rb)({md5:(o=e==null?void 0:e.info.RepoTags)!==null&&o!==void 0?o:[""]})},onSuccess:function(o){var r=new Blob([o],{type:"application/tar"});(0,p.saveAs)(r,(e==null?void 0:e.info.RepoTags.join("-"))+".tar")},messageSuccess:"export",children:"\u5BFC\u51FA"}),(0,n.jsx)(ne.Z,{}),(0,n.jsx)(E.Z,{icon:(0,n.jsx)(J.Z,{}),danger:!0,type:"primary",action:function(){var o;return(0,re.ao)({md5:[(o=e==null?void 0:e.info.Id)!==null&&o!==void 0?o:""],force:!0})},onSuccess:function(){me("/image/list")},confirm:"\u662F\u5426\u8981\u505C\u6B62\u8BE5\u955C\u50CF\u4E0B\u7684\u5BB9\u5668\u5E76\u5F3A\u5236\u5220\u9664\uFF1F",messageSuccess:"delete",children:"\u5F3A\u5236\u5220\u9664"})]})}),F.canSeeImageRemoteTag&&(0,n.jsx)(i.Z,{title:(0,n.jsx)(x.Z,{}),subTitle:"\u8FDC\u7A0B Tag \u5217\u8868",extra:(0,n.jsx)(Z.A,{isKeyPressSubmit:!0,submitter:!1,onFinish:function(o){N(o.search)},children:(0,n.jsx)(M.Z.Compact,{children:(0,n.jsx)(A.Z,{style:{margin:0},name:"search",children:(0,n.jsx)(te.Z,{allowClear:!0,addonBefore:"\u641C\u7D22Tag",placeholder:"\u6309\u56DE\u8F66\u67E5\u8BE2",onClear:function(){N("")}})})})},"form"),children:(0,n.jsx)(L.Z,{pagination:{pageSize:36},rowKey:function(o){return"".concat(o)},grid:{gutter:10,xs:3,sm:3,md:4,lg:4,xl:5,xxl:6},dataSource:c&&c.filter(function(s){return!G||s.indexOf(G)!==-1}),loading:!c||(c==null?void 0:c.length)<=0,renderItem:function(o,r){return(0,n.jsx)(L.Z.Item,{children:(0,n.jsx)(se.Z,{style:{height:"60px"},children:(0,n.jsx)("div",{style:{margin:"-10px",wordBreak:"break-word"},children:(0,n.jsx)(_e.Z,{title:o})})})},r)}})}),(0,n.jsx)(i.Z,{bordered:!0,title:(0,n.jsx)(x.Z,{}),subTitle:"Tag \u5217\u8868",children:(0,n.jsx)(q.Rs,{grid:{gutter:40,column:2},headerTitle:!1,metas:{content:{render:function(o,r,u){return(0,n.jsx)(T.Z,{color:"blue",children:(0,n.jsx)(U.Z.Text,{copyable:!0,children:r})},u)}},title:{render:function(o,r,u){return(0,n.jsxs)(M.Z,{children:[(0,n.jsxs)(E.Z,{action:function(){return(0,l.Gb)({tag:r,type:"push"})},messageSuccess:"imagePush",children:[(0,n.jsx)(Q.Z,{})," Push"]}),(0,n.jsxs)(E.Z,{action:function(){return(0,l.Gb)({tag:r,type:"pull"})},messageSuccess:"imagePull",children:[(0,n.jsx)(w.Z,{})," Pull"]}),(0,n.jsx)(E.Z,{action:function(){return(0,l.Pn)({tag:r})},onSuccess:function(V){return y(R+1),!0},messageSuccess:"imageTagDelete",confirm:"\u662F\u5426\u786E\u8BA4\u5220\u9664\u6807\u7B7E",children:(0,n.jsx)(k.Z,{})})]},u)}}},dataSource:e==null?void 0:e.info.RepoTags})}),(0,n.jsx)(i.Z,{bordered:!0,headerBordered:!0,title:(0,n.jsx)(x.Z,{}),subTitle:"\u65B0\u589E Tag",children:(0,n.jsxs)(Z.A,{formRef:b,onFinish:function(){var s=h()(f()().mark(function o(r){var u,d,V;return f()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,l._U)({md5:(u=e==null?void 0:e.info.Id)!==null&&u!==void 0?u:"",tag:(r.imageRespo?r.imageRespo.serverAddress+"/":"")+r.imageTag});case 2:V=m.sent,y(R+1),(d=b.current)===null||d===void 0||d.resetFields();case 5:case"end":return m.stop()}},o)}));return function(o){return s.apply(this,arguments)}}(),children:[(0,n.jsx)(A.Z,{label:"\u955C\u50CF\u4ED3\u5E93",name:"imageRespo",tooltip:(0,n.jsxs)(n.Fragment,{children:["\u63A8\u9001\u524D\u8BF7\u4FDD\u8BC1\u4ED3\u5E93\u4E2D\u6709\u6307\u5B9A\u7684\u547D\u540D\u7A7A\u95F4, \u5982\u6CA1\u6709\u8BF7\u5148 ",(0,n.jsx)("a",{href:"",target:"_blank",children:"\u6DFB\u52A0\u4ED3\u5E93"})]}),children:(0,n.jsx)(ie.Z,{})}),(0,n.jsx)(ee.Z,{fieldProps:{min:2,max:255},rules:[{required:!0}],required:!0,placeholder:"\u53EA\u80FD\u4F7F\u7528\u5C0F\u5199\u82F1\u6587\u5B57\u7B26\u3001\u6570\u5B57\u3001_\u3001-\u3001",label:"\u955C\u50CF\u540D\u79F0",name:"imageTag",tooltip:"\u4F8B\u5982: name:tag\u3001namespace/name:tag\u3001registry/namespace/name:tag"})]})}),(0,n.jsx)(i.Z,{bordered:!0,headerBordered:!0,title:(0,n.jsx)(O.Z,{}),subTitle:"\u955C\u50CF\u8BE6\u60C5",children:(0,n.jsxs)(a.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,n.jsx)(a.Z.Item,{label:"ID",children:e==null?void 0:e.info.Id}),(0,n.jsx)(a.Z.Item,{label:"Parent",children:e==null?void 0:e.info.Parent}),(0,n.jsx)(a.Z.Item,{label:"Size",children:(0,ae.FI)((B=e==null?void 0:e.info.Size)!==null&&B!==void 0?B:0)}),(0,n.jsx)(a.Z.Item,{label:"Created",children:e==null?void 0:e.info.Created}),(0,n.jsxs)(a.Z.Item,{label:"Build",children:["Docker ",e==null?void 0:e.info.DockerVersion," ",e==null?void 0:e.info.Os," ",e==null?void 0:e.info.Architecture]}),(0,n.jsx)(a.Z.Item,{label:"Labels",children:(0,n.jsx)(a.Z,{column:1,bordered:!0,children:(e==null?void 0:e.info.Config.Labels)&&Object.keys(e==null?void 0:e.info.Config.Labels).map(function(s){return(0,n.jsx)(a.Z.Item,{label:s,children:(0,n.jsx)(U.Z.Text,{style:{width:"400px"},ellipsis:{tooltip:e==null?void 0:e.info.Config.Labels[s]},children:e==null?void 0:e.info.Config.Labels[s]})},s)})})})]})}),(0,n.jsx)(i.Z,{bordered:!0,headerBordered:!0,title:(0,n.jsx)(O.Z,{}),subTitle:"Dockerfile \u8BE6\u60C5",children:(0,n.jsxs)(a.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,n.jsx)(a.Z.Item,{label:"CMD",children:e==null?void 0:e.info.Config.Cmd}),(0,n.jsx)(a.Z.Item,{label:"ENTRYPOINT",children:e==null?void 0:e.info.Config.Entrypoint}),(0,n.jsx)(a.Z.Item,{label:"EXPOSE",children:(e==null?void 0:e.info.Config.ExposedPorts)&&Object.keys(e==null?void 0:e.info.Config.ExposedPorts).map(function(s){return(0,n.jsx)(T.Z,{color:"gray",children:s},s)})}),(0,n.jsx)(a.Z.Item,{label:"VOLUME",children:(e==null?void 0:e.info.Config.Volumes)&&Object.keys(e==null?void 0:e.info.Config.Volumes).map(function(s){return(0,n.jsx)(T.Z,{color:"gray",children:s},s)})}),(0,n.jsx)(a.Z.Item,{label:"Env",children:(0,n.jsx)(a.Z,{column:1,bordered:!0,children:(e==null?void 0:e.info.Config.Env)&&(e==null?void 0:e.info.Config.Env.map(function(s,o){var r=s.split("=");return(0,n.jsx)(a.Z.Item,{label:r[0],children:r[1]},o)}))})})]})}),(0,n.jsxs)(i.Z,{bordered:!0,headerBordered:!0,title:(0,n.jsx)(O.Z,{}),subTitle:"Layers",children:[(0,n.jsx)(oe.Z,{rowKey:"CreatedBy",dataSource:e==null?void 0:e.layer.reverse(),columns:[{title:"Layer",dataIndex:"CreatedBy",key:"CreatedBy"}]}),";"]})]})})}}}]);
