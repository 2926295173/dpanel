"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1050],{1699:function(ne,I,n){n.d(I,{u:function(){return p}});var U=n(9783),o=n.n(U),z=n(97857),O=n.n(z),k=n(67294),a=n(82346),w=n(40411),v=n(42075),c=n(85893),p=function(t){var W=(0,a.useAccess)(),d=Array.isArray(t.access)?t.access:[t.access],m,Z=t.fallback;if(typeof t.children=="function"?(m=t.children(d.reduce(function(r,M){return O()(O()({},r),{},o()({},M,W[M]))},{})),m||(m=Z)):d.every(function(r){return W[r]})?m=t.children:m=Z,!Z&&m&&t.showProTips&&W.canSeeEnableCe){if(W.canSeeEnableHiddenProTips)return null;m=(0,c.jsx)(w.Z,{offset:t.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:m})}if(!Z&&m&&t.showProRibbonTips&&W.canSeeEnableCe){if(W.canSeeEnableHiddenProTips)return null;m=(0,c.jsx)(w.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:m})}return t.space?(0,c.jsx)(v.Z,O()(O()({},t.space),{},{children:m})):m}},80821:function(ne,I,n){n.d(I,{Z:function(){return G}});var U=n(97857),o=n.n(U),z=n(5574),O=n.n(z),k=n(24963),a=n(86738),w=n(28036),v=n(83062),c=n(67294),p=n(85893);function G(t){var W=(0,c.useState)(!1),d=O()(W,2),m=d[0],Z=d[1],r=(0,c.useContext)(k.Z),M=r.lang,$=r.message,g=function(){Z(!0);var de=t.action();de instanceof Promise?de.then(function(te){if(Z(!1),te){typeof t.onSuccess=="function"&&t.onSuccess(te);var e="";t.messageSuccess?typeof t.messageSuccess=="function"?e=t.messageSuccess(te):e=t.messageSuccess.indexOf("notification.")==0?M(t.messageSuccess):t.messageSuccess:e=M("notification.finish"),t.asynced?$.info(e):$.success(e)}}).catch(function(te){Z(!1),typeof t.onError=="function"&&t.onError(te)}):Z(!1)};return t.confirm?(0,p.jsx)(a.Z,o()(o()({style:{width:500},title:t.confirmTitle?t.confirmTitle:M("notification.title.tip"),description:typeof t.confirm=="string"&&t.confirm.indexOf("notification.")==0?M(t.confirm):t.confirm,onConfirm:g,okText:"Yes",cancelText:"No",onOpenChange:t.confirmOnOpenChange},t.confirmProps),{},{children:(0,p.jsx)(w.ZP,{block:t.block,disabled:t.disabled,icon:!t.children&&m?void 0:t.icon,loading:m,danger:t.danger,type:t.type,children:t.children})})):(0,p.jsx)(v.Z,{title:t.tips,children:(0,p.jsx)(w.ZP,{block:t.block,style:t.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:t.disabled,icon:!t.children&&m?void 0:t.icon,loading:m,onClick:g,danger:t.danger,type:t.type,children:t.children})})}},44349:function(ne,I,n){var U=n(97857),o=n.n(U),z=n(17186),O=n(5966),k=n(86250),a=n(67294),w=n(85893),v=(0,a.forwardRef)(function(c,p){var G=(0,a.useRef)();(0,a.useImperativeHandle)(p,function(){return{addItem:function(d,m){var Z,r=(Z=G.current)===null||Z===void 0?void 0:Z.getList(),M=!1;if(r==null||r.map(function(g){if(g.name==d){M=!0;return}}),!M){var $;($=G.current)===null||$===void 0||$.add({name:d,value:m})}},clear:function(){var d;(d=G.current)===null||d===void 0||(d=d.getList())===null||d===void 0||d.map(function(m,Z){var r;(r=G.current)===null||r===void 0||r.remove(Z)})}}});var t={};return c.hideCopyButton===!0&&(t.copyIconProps=!1),c.hideDeleteButton===!0&&(t.deleteIconProps=!1),(0,w.jsx)(z.u,o()(o()({initialValue:c.initialValue,label:c.label,name:c.name,actionRef:G,creatorButtonProps:c.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(c.label?c.label:c.name)}:!1,min:c.min?c.min:0},t),{},{children:function(d,m,Z){return(0,w.jsx)(k.Z,{justify:c.justify,gap:c.gap,children:c.items.map(function(r){return r.render?(0,w.jsx)("div",{children:r.render&&r.render(d,m,Z)},"".concat(c.name,"-").concat(r.name,"-").concat(d.key)):(0,w.jsx)(O.Z,{width:r.width,name:r.name,label:r.label,required:r.required,rules:[{required:r.required}],disabled:r.disabled,placeholder:r.placeholder},"".concat(c.name,"-").concat(r.name,"-").concat(d.key))})})}}))});I.Z=v},34879:function(ne,I,n){n.d(I,{Z:function(){return k}});var U=n(97961),o=n(91604),z=n(1677),O=n(85893);function k(a){return a.showDragger?(0,O.jsx)(o.Z,{max:a.max?a.max:1,title:a.title,label:a.label,required:a.required,rules:[{required:a.required}],fieldProps:{multiple:!!(a.max&&a.max>1),name:"file",accept:a.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(v){return new Promise(function(c){var p;(0,U._2)({path:(p=v.response.data.path)!==null&&p!==void 0?p:""}).then(function(G){c(!0)})})}},name:a.name}):(0,O.jsx)(z.Z,{max:a.max?a.max:1,title:a.title,label:a.label,required:a.required,rules:[{required:a.required}],fieldProps:{multiple:!!(a.max&&a.max>1),name:"file",accept:a.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(v){return new Promise(function(c){var p;(0,U._2)({path:(p=v.response.data.path)!==null&&p!==void 0?p:""}).then(function(G){c(!0)})})}},name:a.name})}},2808:function(ne,I,n){n.d(I,{Z:function(){return w}});var U=n(97857),o=n.n(U),z=n(62370),O=n(51663),k=n(67294),a=n(85893);function w(v){return(0,a.jsx)(z.Z,o()(o()({},v),{},{children:(0,a.jsx)(O.Z,{showText:function(p){return p.toHexString()},allowClear:!0,presets:[{label:"\u9884\u8BBE\u989C\u8272",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},3616:function(ne,I,n){n.d(I,{Ed:function(){return O},FK:function(){return o},R_:function(){return U},ob:function(){return z}});var U=window.innerWidth<=1024?"90vw":"65vw",o="90vw",z="60vw",O="50vh"},12323:function(ne,I,n){n.d(I,{X:function(){return U},n:function(){return o}});var U={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},o=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},24963:function(ne,I,n){var U=n(67294),o=(0,U.createContext)({});I.Z=o},56757:function(ne,I,n){n.r(I),n.d(I,{default:function(){return nn}});var U=n(5574),o=n.n(U),z=n(19632),O=n.n(z),k=n(15009),a=n.n(k),w=n(99289),v=n.n(w),c=n(24963),p=n(87662),G=n(88641),t=n(38345),W=n(97269),d=n(5966),m=n(31199),Z=n(63434),r=n(67294),M=n(42075),$=n(80821),g=n(1699),J=n(82346);function de(A){return te.apply(this,arguments)}function te(){return te=v()(a()().mark(function A(F){return a()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",(0,J.request)("/api/common/home/email-test",{method:"POST",data:F}));case 1:case"end":return D.stop()}},A)})),te.apply(this,arguments)}var e=n(85893);function Se(){var A=(0,r.useRef)(),F=(0,r.useContext)(c.Z),L=F.lang,D=(0,r.useState)(""),f=o()(D,2),q=f[0],B=f[1],Y=function(){var ee=v()(a()().mark(function V(){var _,h,s,j,H,u,N,b;return a()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,p.pe)({groupName:"setting",name:"emailServer"});case 2:b=y.sent,b.data&&((_=A.current)===null||_===void 0||_.setFieldsValue({host:(h=b.data.host)!==null&&h!==void 0?h:"",port:(s=b.data.port)!==null&&s!==void 0?s:"",email:(j=b.data.email)!==null&&j!==void 0?j:"",code:(H=b.data.code)!==null&&H!==void 0?H:"",status:(u=b.data.status)!==null&&u!==void 0?u:[]})),b.data&&B((N=b.data)===null||N===void 0?void 0:N.email);case 5:case"end":return y.stop()}},V)}));return function(){return ee.apply(this,arguments)}}();return(0,e.jsx)(t.Z,{direction:"column",gutter:[0,10],ghost:!0,children:(0,e.jsx)(t.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(G.Z,{}),subTitle:"\u90AE\u4EF6\u670D\u52A1",children:(0,e.jsxs)(W.A,{layout:"horizontal",labelAlign:"right",labelCol:{span:5,offset:0},formRef:A,onInit:v()(a()().mark(function ee(){return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return Y(),_.abrupt("return",!0);case 2:case"end":return _.stop()}},ee)})),submitter:{render:function(V,_){return[].concat(O()(_),[(0,e.jsx)($.Z,{tips:"\u5C06\u53D1\u9001\u90AE\u4EF6\u81F3 ".concat(q," \u4E2D\uFF0C\u6CE8\u610F\u67E5\u6536"),action:v()(a()().mark(function h(){return a()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,de({subject:L("system.basic.emailTestSubject"),content:L("system.basic.emailTestContent",{time:new Date().toISOString()})});case 2:return j.abrupt("return",j.sent);case 3:case"end":return j.stop()}},h)})),children:"\u6D4B\u8BD5"},"testEmail")])}},onFinish:function(){var ee=v()(a()().mark(function V(_){var h;return a()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,p.bv)({emailServer:{host:_.host,port:_.port,email:_.email,code:_.code,status:_.status}});case 2:return(h=A.current)===null||h===void 0||h.resetFields(),Y(),j.abrupt("return",!0);case 5:case"end":return j.stop()}},V)}));return function(V){return ee.apply(this,arguments)}}(),children:[(0,e.jsx)(d.Z,{label:"SMTP\u670D\u52A1\u5668\u5730\u5740",name:"host",placeholder:"\u4F8B\u5982:smtp.163.com",required:!0,rules:[{required:!0}]}),(0,e.jsx)(m.Z,{label:"SMTP\u670D\u52A1\u5668\u7AEF\u53E3",name:"port",placeholder:"\u53D1\u9001\u90AE\u4EF6\u7AEF\u53E3\uFF0C\u901A\u5E38\u4E3A465",required:!0,rules:[{required:!0}]}),(0,e.jsx)(d.Z,{label:"SMTP\u6388\u6743\u7801",name:"code",width:"lg",placeholder:"SMTP\u6388\u6743\u7801",required:!0,rules:[{required:!0}],addonAfter:(0,e.jsxs)(M.Z,{children:[(0,e.jsx)("a",{target:"_blank",href:"https://service.mail.qq.com/detail/0/75",children:"QQ\u90AE\u7BB1\u6388\u6743\u7801"}),(0,e.jsx)("a",{target:"_blank",href:"https://help.mail.163.com/faqDetail.do?code=d7a5dc8471cd0c0e8b4b8f4f8e49998b374173cfe9171305fa1ce630d7f67ac286624f309a1a7089",children:"163\u90AE\u7BB1\u6388\u6743\u7801"})]})}),(0,e.jsx)(d.Z,{label:"\u53D1\u4EF6\u90AE\u7BB1",name:"email",placeholder:"\u53D1\u4EF6\u90AE\u7BB1\u5730\u5740",required:!0,rules:[{required:!0}]}),(0,e.jsx)(g.u,{access:"canSeeEnableEe",children:(0,e.jsx)(Z.Z.Group,{name:"status",label:"\u5F00\u542F\u529F\u80FD",options:[{label:"\u6CE8\u518C",value:"register"}]})})]})})})}function Pe(A){return ve.apply(this,arguments)}function ve(){return ve=v()(a()().mark(function A(F){return a()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",(0,J.request)("/api/pro/two-fa/enable",{method:"POST",data:F}));case 1:case"end":return D.stop()}},A)})),ve.apply(this,arguments)}function ye(){return ge.apply(this,arguments)}function ge(){return ge=v()(a()().mark(function A(){return a()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.abrupt("return",(0,J.request)("/api/pro/two-fa/get-setting",{method:"POST"}));case 1:case"end":return L.stop()}},A)})),ge.apply(this,arguments)}var Be=n(29177),Ae=n(86548),Fe=n(97937),Te=n(12119),re=n(97462),se=n(52688),ce=n(62370),be=n(28036),De=n(98163);function Oe(){var A=(0,r.useRef)(),F=(0,J.useModel)("@@initialState"),L=F.initialState,D=F.loading,f=F.error,q=F.refresh,B=F.setInitialState,Y=(0,r.useContext)(c.Z),ee=Y.message,V=Y.notice,_=Y.lang,h=(0,r.useRef)(),s=(0,r.useState)(0),j=o()(s,2),H=j[0],u=j[1],N=(0,J.useAccess)();return(0,r.useEffect)(function(){!N.canSeeEnableCe&&ye().then(function(b){var S;(S=h.current)===null||S===void 0||S.setFieldsValue({enable:b.data.enable,email:b.data.email,qrcode:b.data.qrcode})})},[H]),(0,e.jsxs)(t.Z,{direction:"column",gutter:[0,10],ghost:!0,children:[(0,e.jsx)(t.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(Be.Z,{}),subTitle:"\u7BA1\u7406\u5458",children:(0,e.jsxs)(W.A,{layout:"horizontal",labelAlign:"right",labelCol:{span:3,offset:0},formRef:A,onFinish:function(){var b=v()(a()().mark(function S(y){var T,E;return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,p.Jn)({username:y.username,password:y.password,newPassword:y.newPassword});case 2:if(T=i.sent,!(T&&T.data)){i.next=9;break}return(E=A.current)===null||E===void 0||E.resetFields(),ee.success("\u4FEE\u6539\u7BA1\u7406\u5458\u7528\u6237\u540D\u548C\u5BC6\u7801\u6210\u529F"),localStorage.removeItem("token"),q(),i.abrupt("return",!0);case 9:case"end":return i.stop()}},S)}));return function(S){return b.apply(this,arguments)}}(),children:[(0,e.jsx)(re.Z,{name:["enableUsername"],children:function(S){var y=S.enableUsername;return(0,e.jsx)(d.Z,{label:"\u7528\u6237\u540D",name:"username",style:{width:"80%"},initialValue:L==null?void 0:L.user.username,disabled:!y,addonAfter:[(0,e.jsx)(be.ZP,{type:"link",hidden:!!y,icon:(0,e.jsx)(Ae.Z,{}),onClick:function(){var E;(E=A.current)===null||E===void 0||E.setFieldValue("enableUsername",!0)}},"editBtn"),(0,e.jsx)(be.ZP,{type:"link",hidden:!y,icon:(0,e.jsx)(Fe.Z,{}),onClick:function(){var E;(E=A.current)===null||E===void 0||E.setFieldValue("enableUsername",!1)}},"closeBtn")]},"username")}}),(0,e.jsx)(d.Z.Password,{label:"\u5F53\u524D\u5BC6\u7801",name:"password",placeholder:"\u8F93\u5165\u7BA1\u7406\u5458\u5F53\u524D\u5BC6\u7801",rules:[{required:!0}]},"password"),(0,e.jsx)(d.Z.Password,{label:"\u65B0\u5BC6\u7801",name:"newPassword"},"newPasword"),(0,e.jsx)(re.Z,{name:["newPassword"],children:function(S){var y=S.newPassword;return(0,e.jsx)(d.Z.Password,{label:"\u786E\u8BA4\u65B0\u5BC6\u7801",name:"newPassword2",dependencies:["newPassword"],rules:[{required:typeof y!="undefined"&&y!=""},function(T){var E=T.getFieldValue;return{validator:function(i,l){return!l||E("newPassword")===l?Promise.resolve():Promise.reject(new Error("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4"))}}}]},"newPasword2")}})]})}),(0,e.jsx)(g.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(S){var y=S.canSeeEnableCe;return(0,e.jsx)(t.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(Te.Z,{}),subTitle:"\u767B\u5F55\u53CC\u56E0\u7D20\u914D\u7F6E",children:(0,e.jsxs)(W.A,{disabled:y,onFinish:function(){var T=v()(a()().mark(function E(C){var i,l;return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,Pe({email:C.email,enable:C.enable});case 2:i=R.sent,i&&i.data.qrcode&&((l=h.current)===null||l===void 0||l.setFieldValue("qrcode",i.data.qrcode)),u(H+1);case 5:case"end":return R.stop()}},E)}));return function(E){return T.apply(this,arguments)}}(),formRef:h,layout:"horizontal",labelAlign:"right",labelCol:{span:3,offset:0},children:[(0,e.jsx)(se.Z,{label:"\u5F00\u542F",name:"enable"}),(0,e.jsx)(d.Z,{label:"\u90AE\u7BB1",name:"email",placeholder:"\u8BF7\u8F93\u5165\u4F60\u7684\u90AE\u7BB1",rules:[{required:!0},{type:"email"}]}),(0,e.jsx)(ce.Z,{name:"qrcode",hidden:!0}),(0,e.jsx)(re.Z,{name:["qrcode"],children:function(E){var C=E.qrcode;if(C)return(0,e.jsx)(ce.Z,{label:"\u7ED1\u5B9A\u4E8C\u7EF4\u7801",tooltip:"\u4F7F\u7528\u652F\u6301 2fa \u7684\u9A8C\u8BC1 App \u626B\u7801\u8BE5\u4E8C\u7EF4\u7801",children:(0,e.jsx)(De.Z,{style:{border:"#d1d9e0b3 solid 1px",padding:"10px",borderRadius:"10px"},width:200,src:"data:image/png;base64,".concat(C)})})}})]})})}})]})}var Ze={xs:6,sm:6,md:6,lg:3,xl:3,xxl:3,offset:0},Me=n(43425),Re=n(19400),oe=n(86615),me=n(64317),Q=n(24739),Ie=n(47221),Ue=n(86125),_e=n(86250),pe=n(2487),Le=n(4393),We=n(71230),we=n(15746),$e=n(40411),Ke=n(184),ze=n(25054),ke=n(90672),Ve=n(21532),Ee=n(34879),He=n(44349),fe=n(65451),Ne=n(2808),Ge=n(3616),le=function(F){return(0,e.jsx)(Ne.Z,{name:F.name,label:F.label,tooltip:F.tooltip})},ue={colorPrimary:"",colorTextBase:"",colorLink:"",colorBgContainer:"",colorBorder:"",colorBgElevated:"",colorBorderSecondary:"colorBorder"},je=["borderRadius","wireframe"],Qe=(0,r.forwardRef)(function(A,F){(0,r.useImperativeHandle)(F,function(){return{show:function(){q(!0)},reset:function(){var h;(h=B.current)===null||h===void 0||h.resetFields(["siteLogo","siteTitle","siteCopyright","siteLink","bgImage","bgSize"])}}});var L=(0,r.useState)(!1),D=o()(L,2),f=D[0],q=D[1],B=(0,r.useRef)(),Y=(0,r.useContext)(c.Z),ee=Y.message,V=Y.lang;return(0,e.jsx)(Ve.ZP,{children:(0,e.jsxs)(Ke.a,{drawerProps:{forceRender:!0,width:Ge.R_},submitter:{render:function(h,s){return(0,e.jsx)(M.Z,{children:s[1]})}},title:"\u81EA\u5B9A\u4E49\u4E3B\u9898",formRef:B,open:f,onOpenChange:function(){var _=v()(a()().mark(function h(s){var j,H,u,N,b,S;return a()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if((j=B.current)===null||j===void 0||j.resetFields(["bgImageUpload","siteLogoUpload"]),!s){T.next=8;break}return T.next=4,(0,fe.Py)();case 4:H=T.sent,u=H.data.config,u&&(je.forEach(function(E){if(u.token&&u.token[E]){var C,i;(C=B.current)===null||C===void 0||C.setFieldValue("enableStyle",!0),(i=B.current)===null||i===void 0||i.setFieldValue(E,u.token[E])}}),(N=B.current)===null||N===void 0||N.setFieldsValue({siteLogo:u.siteLogo,siteTitle:u.siteTitle,siteCopyright:u.siteCopyright,siteLink:u.siteLink,bgImage:u.bgImage,loginLogo:u.loginLogo}),!u.bgImage||!u.bgImage.width||u.bgImage.width=="100%"?(b=B.current)===null||b===void 0||b.setFieldValue("bgSize","full"):(S=B.current)===null||S===void 0||S.setFieldValue("bgSize","default")),Object.keys(ue).map(function(E){var C=E;ue[E]!=""&&(C=ue[E]),B!=null&&B.current&&u.token&&(B==null||B.current.setFieldValue("enableColor",!0),B==null||B.current.setFieldValue(E,u.token[C]))});case 8:q(s);case 9:case"end":return T.stop()}},h)}));return function(h){return _.apply(this,arguments)}}(),name:"theme-user",onFinish:function(){var _=v()(a()().mark(function h(s){var j,H,u;return a()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return u={token:{},bgImage:s.bgImage,siteLink:s.siteLink,siteTitle:(j=s.siteTitle)!==null&&j!==void 0?j:"",siteCopyright:s.siteCopyright,siteLogo:(H=s.siteLogo)!==null&&H!==void 0?H:"",loginLogo:s.loginLogo},s.siteLogoUpload&&s.siteLogoUpload.length>0&&(u.siteLogo=s.siteLogoUpload[0].response.data.path),u.bgImage||(u.bgImage={}),s.bgImageUpload&&s.bgImageUpload.length>0&&(u.bgImage.src=s.bgImageUpload[0].response.data.path),u.bgImage.width=s.bgSize=="full"?"100%":"",s.loginLogoUpload&&s.loginLogoUpload.length>0&&(u.loginLogo=s.loginLogoUpload[0].response.data.path),Object.keys(ue).map(function(S){u.token||(u.token={});var y=S;ue[S]!=""&&(y=ue[S]);var T=B.current&&B.current.getFieldValue(y);T&&T.toHexString?T.cleared||(u.token[S]=T.toHexString()):u.token[S]=T}),je.map(function(S){u.token||(u.token={});var y=B.current&&B.current.getFieldValue(S);u.token[S]=y}),b.next=10,(0,fe.Z8)(u);case 10:return A.onFinish&&A.onFinish(),ee.success(V("notification.finishTheme")),b.abrupt("return",!0);case 13:case"end":return b.stop()}},h)}));return function(h){return _.apply(this,arguments)}}(),children:[(0,e.jsx)(Q.UW,{title:"\u76AE\u80A4\u8272\u7CFB",extra:(0,e.jsx)(se.Z,{name:"enableColor"})}),(0,e.jsx)(re.Z,{name:["enableColor"],children:function(h){var s=h.enableColor;return s&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Q.UW,{children:le({name:"colorPrimary",label:"\u54C1\u724C\u8272",tooltip:"\u54C1\u724C\u8272\u662F\u4F53\u73B0\u4EA7\u54C1\u7279\u6027\u548C\u4F20\u64AD\u7406\u5FF5\u6700\u76F4\u89C2\u7684\u89C6\u89C9\u5143\u7D20\u4E4B\u4E00\u3002\u5728\u4F60\u5B8C\u6210\u54C1\u724C\u4E3B\u8272\u7684\u9009\u53D6\u4E4B\u540E\uFF0C\u4F1A\u81EA\u52A8\u5E2E\u4F60\u751F\u6210\u4E00\u5957\u5B8C\u6574\u7684\u8272\u677F\uFF0C\u5E76\u8D4B\u4E88\u5B83\u4EEC\u6709\u6548\u7684\u8BBE\u8BA1\u8BED\u4E49"})}),(0,e.jsxs)(Q.UW,{children:[le({name:"colorBgContainer",label:"\u4E3B\u7A97\u53E3\u80CC\u666F\u8272\u53CA\u900F\u660E\u5EA6"}),le({name:"colorBgElevated",label:"\u5F39\u51FA\u7A97\u80CC\u666F\u8272\u53CA\u900F\u660E\u5EA6"})]}),(0,e.jsxs)(Q.UW,{children:[le({name:"colorTextBase",label:"\u57FA\u7840\u6587\u672C"}),le({name:"colorLink",label:"\u94FE\u63A5\u6587\u672C"}),le({name:"colorBorder",label:"\u8FB9\u6846\u8272"})]})]})}}),(0,e.jsx)(Q.UW,{title:"\u98CE\u683C",extra:(0,e.jsx)(se.Z,{name:"enableStyle"})}),(0,e.jsx)(re.Z,{name:["enableStyle"],children:function(h){var s=h.enableStyle;return s&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Q.UW,{children:(0,e.jsxs)(_e.Z,{gap:40,children:[(0,e.jsx)(se.Z,{label:"\u7EBF\u6846\u5316",name:"wireframe"}),(0,e.jsx)(ze.Z,{min:1,max:16,label:"\u5706\u89D2",name:"borderRadius"})]})})})}}),(0,e.jsx)(Q.UW,{title:"\u9762\u677F"}),(0,e.jsx)(d.Z,{label:"\u6807\u9898",name:"siteTitle",placeholder:"\u5C55\u793A\u5728\u9762\u677F\u5DE6\u4E0A\u89D2\u53CA\u9875\u9762\u6807\u7B7E\uFF0C\u4E3A\u7A7A\u5219\u4E0D\u663E\u793A"}),(0,e.jsxs)(Q.UW,{children:[(0,e.jsx)(Ee.Z,{label:"Logo",title:"\u4E0A\u4F20 Logo",name:"siteLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(d.Z,{width:"md",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u8FDC\u7A0BUrl",name:"siteLogo"})]}),(0,e.jsxs)(Q.UW,{children:[(0,e.jsx)(Ee.Z,{label:"\u80CC\u666F\u56FE",title:"\u4E0A\u4F20\u80CC\u666F\u56FE",name:"bgImageUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(d.Z,{width:"md",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u8FDC\u7A0BUrl",name:["bgImage","src"]}),(0,e.jsx)(oe.Z.Group,{name:"bgSize",label:"\u5C3A\u5BF8",initialValue:"full",valueEnum:{full:"\u5168\u5C4F",default:"\u9ED8\u8BA4"}})]}),(0,e.jsx)(Q.UW,{children:(0,e.jsx)(re.Z,{name:["bgSize"],children:function(h){var s=h.bgSize;if(s=="default")return(0,e.jsxs)(Q.UW,{children:[(0,e.jsx)(m.Z,{width:"xs",name:["bgImage","top"],label:"\u8DDD\u9876\u90E8\u504F\u79FB\u91CF"}),(0,e.jsx)(m.Z,{width:"xs",name:["bgImage","bottom"],label:"\u8DDD\u5E95\u90E8\u504F\u79FB\u91CF"}),(0,e.jsx)(m.Z,{width:"xs",name:["bgImage","left"],label:"\u8DDD\u5DE6\u4FA7\u504F\u79FB\u91CF"}),(0,e.jsx)(m.Z,{width:"xs",name:["bgImage","right"],label:"\u8DDD\u53F3\u4FA7\u504F\u79FB\u91CF"})]})}})}),(0,e.jsx)(He.Z,{name:"siteLink",label:"\u5E95\u90E8\u94FE\u63A5",showAddButton:!0,hideCopyButton:!0,gap:10,items:[{name:"title",label:"\u6587\u672C"},{name:"href",label:"\u94FE\u63A5"}]}),(0,e.jsx)(ke.Z,{label:"\u7248\u6743\u4FE1\u606F",name:"siteCopyright"}),(0,e.jsxs)(Q.UW,{title:"\u767B\u5F55\u9875",children:[(0,e.jsx)(Ee.Z,{label:"Logo",title:"Logo",name:"loginLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(d.Z,{width:"md",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u8FDC\u7A0BUrl",name:"loginLogo"})]})]})})}),Xe=Qe,Ce=n(12323),Ye=n(64304),he=n.n(Ye);function Je(){var A=(0,r.useRef)(),F=(0,r.useRef)(),L=(0,r.useRef)(),D=(0,J.useModel)("@@initialState"),f=D.initialState,q=D.loading,B=D.error,Y=D.refresh,ee=D.setInitialState,V=(0,J.useAccess)(),_=(0,r.useContext)(c.Z),h=_.message,s=_.lang,j=(0,J.useAntdConfigSetter)(),H=(0,r.useState)(),u=o()(H,2),N=u[0],b=u[1],S=(0,r.useState)(),y=o()(S,2),T=y[0],E=y[1];return(0,r.useEffect)(function(){var C,i,l,P,R,x,X,K;(C=A.current)===null||C===void 0||C.setFieldsValue({algorithm:(i=f==null?void 0:f.theme.algorithm)!==null&&i!==void 0?i:"default",mainMenu:(l=f==null?void 0:f.theme.mainMenu)!==null&&l!==void 0?l:"top",compact:(P=f==null?void 0:f.theme.compact)!==null&&P!==void 0?P:"default",fontSize:(R=f==null?void 0:f.theme.fontSize)!==null&&R!==void 0?R:14,fontSizeConsole:(x=f==null?void 0:f.theme.fontSizeConsole)!==null&&x!==void 0?x:12,sideMenu:(X=f==null?void 0:f.theme.sideMenu)!==null&&X!==void 0?X:"default",tablePageSize:(K=f==null?void 0:f.theme.tablePageSize)!==null&&K!==void 0?K:"20"})},[f]),(0,e.jsx)(Ie.Z,{accordion:!0,defaultActiveKey:"basic",items:[{key:"basic",label:"\u57FA\u7840\u98CE\u683C",children:(0,e.jsxs)(t.Z,{ghost:!0,children:[!V.canSeeEnableCe&&(0,e.jsx)(Xe,{ref:F}),(0,e.jsxs)(W.A,{layout:"horizontal",labelAlign:"right",labelCol:Ze,formRef:A,submitter:{render:function(i,l){return[l[1]]}},onFinish:function(){var C=v()(a()().mark(function i(l){var P;return a()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(P={algorithm:l.algorithm,mainMenu:l.mainMenu,sideMenu:l.sideMenu,compact:l.compact,fontSizeConsole:l.fontSizeConsole,fontSize:l.fontSize,tablePageSize:l.tablePageSize},!(l.algorithm!=(f==null?void 0:f.theme.algorithm)&&!V.canSeeEnableCe)){x.next=4;break}return x.next=4,(0,fe.H)({clearColor:!0});case 4:return localStorage.setItem("dpanel-theme",l.algorithm),localStorage.setItem("dpanel-compact",l.compact),localStorage.setItem("dpanel-pagesize",l.tablePageSize),x.next=9,(0,p.bv)({theme:P});case 9:h.success(s("notification.finishTheme"));case 10:case"end":return x.stop()}},i)}));return function(i){return C.apply(this,arguments)}}(),children:[(0,e.jsx)(oe.Z.Group,{name:"algorithm",label:"\u4E3B\u9898\u76AE\u80A4",initialValue:"default",radioType:"button",valueEnum:function(){var i={default:"\u4EAE\u8272",dark:"\u6697\u8272",system:"\u8DDF\u968F\u7CFB\u7EDF"};return i}}),(0,e.jsx)(g.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(i){var l=i.canSeeEnableCe;return(0,e.jsx)(re.Z,{name:["algorithm"],children:function(R){var x=R.algorithm;return(0,e.jsx)(ce.Z,{label:"\u81EA\u5B9A\u4E49\u76AE\u80A4\u914D\u7F6E",children:(0,e.jsxs)(M.Z.Compact,{children:[(0,e.jsx)(be.ZP,{disabled:l||x=="system",onClick:function(){var K;(K=F.current)===null||K===void 0||K.show()},icon:(0,e.jsx)(Me.Z,{}),children:"\u914D\u7F6E"}),(0,e.jsx)($.Z,{disabled:l||x=="system",action:v()(a()().mark(function X(){var K;return a()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,(0,fe.H)({clearColor:!0,clearSite:!0});case 2:j(function(xe){return xe.theme={token:{}},xe}),(K=F.current)===null||K===void 0||K.reset(),window.location.reload();case 5:case"end":return ae.stop()}},X)})),children:"\u6062\u590D\u9ED8\u8BA4"})]})})}})}}),(0,e.jsx)(oe.Z.Group,{name:"mainMenu",label:"\u4E3B\u83DC\u5355\u4F4D\u7F6E",initialValue:"top",radioType:"button",valueEnum:{top:"\u9876\u90E8",side:"\u4FA7\u9762"}}),(0,e.jsx)(oe.Z.Group,{name:"sideMenu",label:"\u5DE6\u4FA7\u83DC\u5355",initialValue:"default",radioType:"button",valueEnum:{default:"\u9ED8\u8BA4\u5C55\u5F00",collapse:"\u9ED8\u8BA4\u6536\u7F29"}}),(0,e.jsx)(oe.Z.Group,{name:"compact",label:"\u6587\u672C\u5E03\u5C40",initialValue:"default",radioType:"button",valueEnum:{default:"\u9ED8\u8BA4",compact:"\u7D27\u51D1"}}),(0,e.jsx)(ce.Z,{name:"fontSize",label:"\u4E3B\u9898\u5B57\u53F7",initialValue:14,children:(0,e.jsx)(Ue.Z,{step:2,max:30,min:8,marks:{8:"8",10:"10",12:"12",14:"14",16:"16",20:"20",26:"26",30:"20"}})}),(0,e.jsx)(me.Z,{initialValue:"20",label:"\u8868\u683C\u5206\u9875\u6570",name:"tablePageSize",valueEnum:{10:"\u6BCF\u987510\u6761",20:"\u6BCF\u987520\u6761",50:"\u6BCF\u987550\u6761",100:"\u6BCF\u9875100\u6761",all:"\u663E\u793A\u5168\u90E8"}})]})]})},{key:"console",label:"\u63A7\u5236\u53F0\u98CE\u683C",children:(0,e.jsx)(t.Z,{ghost:!0,children:(0,e.jsxs)(W.A,{submitter:{render:function(i,l){return[l[1]]}},request:v()(a()().mark(function C(){var i,l,P;return a()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return l=Ce.X,x.next=3,(0,p.pe)({groupName:"setting",name:"themeConsoleConfig"});case 3:return P=x.sent,P.data&&Object.assign(l,P.data),!V.canSeeEnableCe&&P.data&&(i=P.data)!==null&&i!==void 0&&i.themeName&&P.data.themeName!=""&&Object.keys(he()).forEach(function(X,K){X==P.data.themeName&&(E(Math.ceil((K+1)/36)),b(P.data.themeName))}),x.abrupt("return",{fontSize:l.fontSize,lineHeight:l.lineHeight,letterSpacing:l.letterSpacing,fontWeight:l.fontWeight,cursorStyle:l.cursorStyle,cursorInactiveStyle:l.cursorInactiveStyle,cursorBlink:l.cursorBlink});case 7:case"end":return x.stop()}},C)})),formRef:L,onFinish:function(){var C=v()(a()().mark(function i(l){var P;return a()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return P={fontSize:l.fontSize,lineHeight:l.lineHeight,letterSpacing:l.letterSpacing,fontWeight:l.fontWeight,cursorStyle:l.cursorStyle,cursorInactiveStyle:l.cursorInactiveStyle,cursorBlink:l.cursorBlink,theme:{},themeName:""},N!=""&&!V.canSeeEnableCe&&(P.theme=he()[N],P.themeName=N),x.next=4,(0,p.bv)({console:P});case 4:return h.success(s("notification.finishTheme")),x.abrupt("return",!1);case 6:case"end":return x.stop()}},i)}));return function(i){return C.apply(this,arguments)}}(),children:[(0,e.jsx)(Q.UW,{title:"\u5B57\u4F53",children:(0,e.jsxs)(_e.Z,{gap:50,children:[(0,e.jsx)(m.Z,{label:"\u5B57\u53F7",name:"fontSize",tooltip:"\u4EE5\u50CF\u7D20\u4E3A\u5355\u4F4D\u4E2D\u5B57\u4F53\u7684\u5927\u5C0F",fieldProps:{addonAfter:"px"}}),(0,e.jsx)(m.Z,{label:"\u884C\u9AD8",name:"lineHeight",tooltip:"\u4EE5\u500D\u7387\u4E3A\u5355\u4F4D\u7684\u884C\u9AD8",fieldProps:{addonAfter:"\u500D"}}),(0,e.jsx)(m.Z,{label:"\u5B57\u95F4\u8DDD",name:"letterSpacing",fieldProps:{addonAfter:"px"},tooltip:"\u4EE5\u50CF\u7D20\u4E3A\u5355\u4F4D\u7684\u5B57\u95F4\u8DDD"}),(0,e.jsx)(me.Z,{label:"\u52A0\u7C97",name:"fontWeight",options:[{label:"normal",value:"normal"},{label:"bold",value:"bold"},{label:"100",value:"100"},{label:"200",value:"200"},{label:"300",value:"300"},{label:"400",value:"400"},{label:"500",value:"500"},{label:"600",value:"600"},{label:"700",value:"700"},{label:"800",value:"800"},{label:"900",value:"900"}]})]})}),(0,e.jsx)(Q.UW,{title:"\u5149\u6807",children:(0,e.jsxs)(_e.Z,{gap:50,children:[(0,e.jsx)(me.Z,{label:"\u6837\u5F0F - \u6D3B\u52A8\u6001",name:"cursorStyle",width:"sm",valueEnum:{bar:"\u7AD6\u7EBF",underline:"\u4E0B\u5212\u7EBF",block:"\u5B9E\u5FC3\u6846"}}),(0,e.jsx)(me.Z,{label:"\u6837\u5F0F - \u975E\u6D3B\u52A8\u6001",name:"cursorInactiveStyle",width:"sm",valueEnum:{bar:"\u7AD6\u7EBF",underline:"\u4E0B\u5212\u7EBF",block:"\u5B9E\u5FC3\u6846",outline:"\u7A7A\u5FC3\u6846"}}),(0,e.jsx)(se.Z,{label:"\u95EA\u52A8?",name:"cursorBlink"})]})}),(0,e.jsx)(g.u,{showProRibbonTips:!0,access:"canSeeEnableCe",children:function(i){var l=i.canSeeEnableCe;return(0,e.jsx)(t.Z,{ghost:!0,title:(0,e.jsx)(Re.Z,{}),subTitle:"\u76AE\u80A4",children:(0,e.jsx)(pe.Z,{split:!0,style:{overflow:"hidden"},grid:{column:6},pagination:{pageSize:36,current:T,onChange:function(R,x){E(R)}},dataSource:Object.keys(he()).map(function(P){return{label:P,value:P,data:he()[P]}}),renderItem:function(R,x){var X=R.data,K=(0,e.jsxs)(Le.Z,{style:{backgroundColor:X.background,color:X.foreground,textAlign:"center",cursor:l?"not-allowed":"pointer",borderRadius:0},onClick:function(){if(!l){var ae;(ae=L.current)===null||ae===void 0||ae.setFieldValue("theme",R.data),b(R.label)}},hoverable:!0,children:[(0,e.jsx)(We.Z,{wrap:!0,gutter:[2,2],justify:"center",align:"middle",children:Ce.n.filter(function(ie){return X[ie]!=""}).map(function(ie){return(0,e.jsx)(we.Z,{style:{backgroundColor:X[ie],padding:8}},ie)})}),(0,e.jsx)("div",{style:{paddingTop:5},children:R.label})]});return(0,e.jsx)(pe.Z.Item,{style:{margin:0},children:N==R.label?(0,e.jsx)($e.Z.Ribbon,{text:"Checked",children:K}):K},x)}})})}})]})})}]})}var qe=n(90078),en=n(92398);function nn(){var A=(0,r.useState)("user"),F=o()(A,2),L=F[0],D=F[1],f=(0,J.useAccess)(),q=(0,J.useLocation)();return(0,r.useEffect)(function(){q.state&&D(q.state.tag)},[q.state]),(0,e.jsx)(qe._z,{children:(0,e.jsx)(t.Z,{children:(0,e.jsx)(en.Z,{activeKey:L,onChange:function(Y){D(Y)},items:[{key:"user",label:"\u767B\u5F55\u914D\u7F6E",children:(0,e.jsx)(Oe,{})},{key:"theme",label:"\u754C\u9762\u914D\u7F6E",children:(0,e.jsx)(Je,{})},{key:"notice",label:"\u901A\u77E5\u670D\u52A1",children:(0,e.jsx)(Se,{}),disabled:f.canSeeEnableCe}]})})})}},97961:function(ne,I,n){n.d(I,{GH:function(){return G},MF:function(){return m},_2:function(){return W},fN:function(){return w},ii:function(){return a},vC:function(){return c}});var U=n(15009),o=n.n(U),z=n(99289),O=n.n(z),k=n(82346),a=[{name:"amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"i386",arch:"386",search:[]},{name:"arm/v6",arch:"arm",search:[]},{name:"arm/v7",arch:"arm",search:[]},{name:"arm/v8",arch:"arm64",search:[]},{name:"ppc64le",arch:"ppc64le",search:[]},{name:"riscv64",arch:"riscv64",search:[]}];function w(r){return v.apply(this,arguments)}function v(){return v=O()(o()().mark(function r(M){return o()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,k.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:M}));case 1:case"end":return g.stop()}},r)})),v.apply(this,arguments)}function c(r){return p.apply(this,arguments)}function p(){return p=O()(o()().mark(function r(M){return o()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,k.request)("/api/app/image/import-by-container-tar",{method:"POST",data:M}));case 1:case"end":return g.stop()}},r)})),p.apply(this,arguments)}function G(r){return t.apply(this,arguments)}function t(){return t=O()(o()().mark(function r(M){return o()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,k.request)("/api/app/image/import-by-image-tar",{method:"POST",data:M}));case 1:case"end":return g.stop()}},r)})),t.apply(this,arguments)}function W(r){return d.apply(this,arguments)}function d(){return d=O()(o()().mark(function r(M){return o()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,k.request)("/api/common/attach/delete",{method:"POST",data:M});case 2:return g.abrupt("return",g.sent);case 3:case"end":return g.stop()}},r)})),d.apply(this,arguments)}function m(){return Z.apply(this,arguments)}function Z(){return Z=O()(o()().mark(function r(){return o()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",(0,k.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return $.stop()}},r)})),Z.apply(this,arguments)}}}]);
