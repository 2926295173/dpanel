"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1180],{88484:function(X,A,e){e.d(A,{Z:function(){return P}});var p=e(87462),d=e(67294),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},M=D,S=e(84089),T=function(t,R){return d.createElement(S.Z,(0,p.Z)({},t,{ref:R,icon:M}))},x=d.forwardRef(T),P=x},52688:function(X,A,e){var p=e(1413),d=e(45987),D=e(67294),M=e(35510),S=e(85893),T=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],x=D.forwardRef(function(P,m){var t=P.fieldProps,R=P.unCheckedChildren,Z=P.checkedChildren,B=P.proFieldProps,y=(0,d.Z)(P,T);return(0,S.jsx)(M.Z,(0,p.Z)({valueType:"switch",fieldProps:(0,p.Z)({unCheckedChildren:R,checkedChildren:Z},t),ref:m,valuePropName:"checked",proFieldProps:B,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},y))});A.Z=x},5966:function(X,A,e){var p=e(97685),d=e(1413),D=e(45987),M=e(21770),S=e(99859),T=e(55241),x=e(97435),P=e(67294),m=e(35510),t=e(85893),R=["fieldProps","proFieldProps"],Z=["fieldProps","proFieldProps"],B="text",y=function(s){var n=s.fieldProps,g=s.proFieldProps,h=(0,D.Z)(s,R);return(0,t.jsx)(m.Z,(0,d.Z)({valueType:B,fieldProps:n,filedConfig:{valueType:B},proFieldProps:g},h))},O=function(s){var n=(0,M.Z)(s.open||!1,{value:s.open,onChange:s.onOpenChange}),g=(0,p.Z)(n,2),h=g[0],$=g[1];return(0,t.jsx)(S.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(w){var b,r=w.getFieldValue(s.name||[]);return(0,t.jsx)(T.Z,(0,d.Z)((0,d.Z)({getPopupContainer:function(a){return a&&a.parentNode?a.parentNode:a},onOpenChange:function(a){return $(a)},content:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[(b=s.statusRender)===null||b===void 0?void 0:b.call(s,r),s.strengthText?(0,t.jsx)("div",{style:{marginTop:10},children:(0,t.jsx)("span",{children:s.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},s.popoverProps),{},{open:h,children:s.children}))}})},W=function(s){var n=s.fieldProps,g=s.proFieldProps,h=(0,D.Z)(s,Z),$=(0,P.useState)(!1),V=(0,p.Z)($,2),w=V[0],b=V[1];return n!=null&&n.statusRender&&h.name?(0,t.jsx)(O,{name:h.name,statusRender:n==null?void 0:n.statusRender,popoverProps:n==null?void 0:n.popoverProps,strengthText:n==null?void 0:n.strengthText,open:w,onOpenChange:b,children:(0,t.jsx)("div",{children:(0,t.jsx)(m.Z,(0,d.Z)({valueType:"password",fieldProps:(0,d.Z)((0,d.Z)({},(0,x.Z)(n,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(l){var a;n==null||(a=n.onBlur)===null||a===void 0||a.call(n,l),b(!1)},onClick:function(l){var a;n==null||(a=n.onClick)===null||a===void 0||a.call(n,l),b(!0)}}),proFieldProps:g,filedConfig:{valueType:B}},h))})}):(0,t.jsx)(m.Z,(0,d.Z)({valueType:"password",fieldProps:n,proFieldProps:g,filedConfig:{valueType:B}},h))},U=y;U.Password=W,U.displayName="ProFormComponent",A.Z=U},80821:function(X,A,e){e.d(A,{Z:function(){return m}});var p=e(5574),d=e.n(p),D=e(24963),M=e(86738),S=e(28036),T=e(83062),x=e(67294),P=e(85893);function m(t){var R=(0,x.useState)(!1),Z=d()(R,2),B=Z[0],y=Z[1],O=(0,x.useContext)(D.Z),W=O.lang,U=O.notice,L=O.message,s=function(){y(!0),t.action().then(function(g){if(y(!1),g){typeof t.onSuccess=="function"&&t.onSuccess(g);var h="";t.messageSuccess?typeof t.messageSuccess=="function"?h=t.messageSuccess(g):h=t.messageSuccess.indexOf("notification.")==0?W(t.messageSuccess):t.messageSuccess:h=W("notification.finish"),t.asynced?L.info(h):L.success(h)}}).catch(function(g){y(!1),typeof t.onError=="function"&&t.onError(g)})};return t.confirm?(0,P.jsx)(M.Z,{style:{width:500},title:t.confirmTitle?t.confirmTitle:W("notification.title.tip"),description:typeof t.confirm=="string"&&t.confirm.indexOf("notification.")==0?W(t.confirm):t.confirm,onConfirm:s,okText:"Yes",cancelText:"No",children:(0,P.jsx)(S.ZP,{disabled:t.disabled,icon:t.icon,loading:B,danger:t.danger,type:t.type,children:t.children})}):(0,P.jsx)(T.Z,{title:t.tips,children:(0,P.jsx)(S.ZP,{style:t.ghost?{padding:0,height:"auto"}:{},disabled:t.disabled,icon:t.icon,loading:B,onClick:s,danger:t.danger,type:t.type,children:t.children})})}},12491:function(X,A,e){e.d(A,{Z:function(){return P}});var p=e(24963),d=e(88484),D=e(62370),M=e(31418),S=e(28036),T=e(67294),x=e(85893);function P(m){var t=(0,T.useContext)(p.Z),R=t.message,Z=t.notice,B=t.lang,y=(0,T.useRef)(null),O=M.Z.useApp(),W=function(){y.current&&(y.current.click(),y.current.onchange=function(L){if(!L||!L.target)return"";var s=new FileReader;s.onload=function(g){var h,$,V=(h=g.target)===null||h===void 0?void 0:h.result;if(m.onLoad)try{m.onLoad&&m.onLoad(V)}catch(w){Z.error(w);return}typeof m.onImport=="function"&&(R.success("\u6210\u529F\u5BFC\u5165 ".concat(m.title)),m.onImport(V)),($=y.current)!==null&&$!==void 0&&$.value&&(y.current.value="")};var n=L.target;if(n.files)try{s.readAsText(n.files[0])}catch(g){Z.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(D.Z,{children:(0,x.jsx)(S.ZP,{icon:(0,x.jsx)(d.Z,{}),block:!0,onClick:W,children:m.title})}),(0,x.jsx)("input",{style:{display:"none"},type:"file",ref:y,name:"importFileInput"})]})}},24963:function(X,A,e){var p=e(67294),d=(0,p.createContext)({});A.Z=d},53893:function(X,A,e){e.r(A),e.d(A,{default:function(){return o}});var p=e(15009),d=e.n(p),D=e(99289),M=e.n(D),S=e(5574),T=e.n(S),x=e(80821),P=e(184),m=e(5966),t=e(52688),R=e(97462),Z=e(62370),B=e(28036),y=e(86250),O=e(67294),W=e(91845),U=e(87662),L=e(24963),s=e(12491),n=e(85893),g=(0,O.forwardRef)(function(c,Y){var H;(0,O.useImperativeHandle)(Y,function(){return{edit:function(u){var v;(v=f.current)===null||v===void 0||v.setFieldsValue({name:u.name,title:u.title,address:u.address,enableTLS:u.enableTLS,tlsCa:u.tlsCa,tlsCert:u.tlsCert,tlsKey:u.tlsKey,enableComposePath:u.enableComposePath}),_(!0),i(u.name)}}});var N=(0,O.useState)(!1),z=T()(N,2),Q=z[0],_=z[1],f=(0,O.useRef)(),C=(0,O.useState)(""),F=T()(C,2),j=F[0],i=F[1],q=(0,O.useContext)(L.Z),J=q.lang;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(B.ZP,{onClick:function(){var u;i(""),(u=f.current)===null||u===void 0||u.resetFields(),_(!0)},type:"primary",children:"\u6DFB\u52A0\u670D\u52A1\u7AEF"}),(0,n.jsxs)(P.a,{drawerProps:{forceRender:!0},onOpenChange:function(u){_(u)},open:Q,width:800,formRef:f,title:(H=f.current)!==null&&H!==void 0&&H.getFieldValue&&f.current.getFieldValue("name")=="local"?"\u914D\u7F6E\u9ED8\u8BA4Docker\u670D\u52A1\u7AEF":"\u6DFB\u52A0\u8FDC\u7A0BDocker\u670D\u52A1\u7AEF",onFinish:function(){var G=M()(d()().mark(function u(v){var E,I;return d()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return E={name:v.name,title:v.title,address:v.address,tlsCa:v.tlsCa,tlsCert:v.tlsCert,tlsKey:v.tlsKey,enableTLS:v.enableTLS,enableComposePath:v.enableComposePath,composePath:v.enableComposePath?v.composePath:""},k.next=3,(0,U.ad)(E);case 3:return I=k.sent,c.onFinish&&c.onFinish(),k.abrupt("return",!0);case 6:case"end":return k.stop()}},u)}));return function(u){return G.apply(this,arguments)}}(),children:[(0,n.jsx)(m.Z,{label:"\u540D\u79F0",name:"title",required:!0,rules:[{required:!0}],fieldProps:{onChange:function(u){var v="";if(u.target.value&&!j){var E,I=(0,W.N9)(u.target.value.trim(),{toneType:"none",type:"array"});v=I.join(""),(E=f.current)===null||E===void 0||E.setFieldValue("name",v)}}}}),(0,n.jsx)(m.Z,{label:"\u6807\u8BC6",name:"name",required:!0,disabled:j!="",rules:[{required:!0}],placeholder:"\u6807\u8BC6Docker\u73AF\u5883\uFF0C\u53EA\u5141\u8BB8\u4E3A\u82F1\u6587\u6216\u662F\u6570\u5B57"}),(0,n.jsx)(m.Z,{label:"Docker Api \u5730\u5740",name:"address",tooltip:"\u8FDE\u63A5\u8FDC\u7A0B Docker \u65F6\u8BF7\u5148\u5F00\u542F Api \u5730\u5740\u8BBF\u95EE\u3002",placeholder:"\u4F8B\u5982\uFF1Aunix:///var/run/docker.sock\u3001tcp://192.16.0.5:2375"}),(0,n.jsxs)(y.Z,{gap:80,children:[(0,n.jsx)(t.Z,{label:"\u542F\u7528TLS",name:"enableTLS",tooltip:"\u751F\u6210\u6559\u7A0B\u89C1\uFF1Ahttps://donknap.github.io/dpanel-docs/#/zh-cn/manual/remote"}),(0,n.jsx)(R.Z,{name:["enableComposePath","name"],children:function(u){var v=u.name;if(v!="local")return(0,n.jsx)(t.Z,{label:J("system.env.createEnableComposePath"),name:"enableComposePath",tooltip:"\u5F00\u542F\u72EC\u7ACBcompose\u914D\u7F6E\u540E\uFF0C\u5207\u6362\u8FDC\u7A0B docker \u5BA2\u6237\u7AEF\u65F6\u5C06\u53EA\u4F1A\u8BFB\u53D6\u8BE5\u73AF\u5883\u4E13\u5C5E\u76EE\u5F55\u4E0B\u7684 compose \u4EFB\u52A1"})}})]}),(0,n.jsx)(R.Z,{name:["enableComposePath","name"],children:function(u){var v=u.enableComposePath,E=u.name;if(v)return(0,n.jsx)(m.Z,{label:J("system.env.createComposePath"),name:"composePath",disabled:!0,fieldProps:{value:"/dpanel/compose/compose-".concat(E!=null?E:"")}})}}),(0,n.jsx)(R.Z,{name:["enableTLS"],children:function(u){var v=u.enableTLS;if(v)return(0,n.jsxs)(y.Z,{gap:20,justify:"start",children:[(0,n.jsx)(Z.Z,{name:"tlsCa",label:"\u4E0A\u4F20\u5BA2\u6237\u7AEF\u8BC1\u4E66",children:(0,n.jsx)(s.Z,{title:"\u4E0A\u4F20CA\u8BC1\u4E66 ca.pem",onImport:function(I){var K;return(K=f.current)===null||K===void 0||K.setFieldValue("tlsCa",I),!0},onLoad:function(I){if(I.indexOf("CERTIFICATE")<0)throw new Error("\u5BFC\u5165ca.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})}),(0,n.jsx)(Z.Z,{name:"tlsCert",label:" ",children:(0,n.jsx)(s.Z,{title:"\u4E0A\u4F20\u8BC1\u4E66\u6587\u4EF6 cert.pem",onImport:function(I){var K;return(K=f.current)===null||K===void 0||K.setFieldValue("tlsCert",I),!0},onLoad:function(I){if(I.indexOf("CERTIFICATE")<0)throw new Error("\u5BFC\u5165cert.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})}),(0,n.jsx)(Z.Z,{label:" ",name:"tlsKey",children:(0,n.jsx)(s.Z,{title:"\u4E0A\u4F20\u5BC6\u94A5\u6587\u4EF6 key.pem",onImport:function(I){var K;return(K=f.current)===null||K===void 0||K.setFieldValue("tlsKey",I),!0},onLoad:function(I){if(I.indexOf("PRIVATE")<0)throw new Error("\u5BFC\u5165key.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})})]})}})]})]})}),h=g,$=e(86548),V=e(90078),w=e(10641),b=e(63713),r=e(42075),l=e(96074),a=e(25593);function o(){var c=(0,O.useRef)(),Y=(0,O.useRef)(),H=(0,b.useSearchParams)(),N=T()(H,2),z=N[0],Q=N[1];return(0,n.jsx)(V._z,{header:{extra:[(0,n.jsx)(h,{ref:Y,onFinish:M()(d()().mark(function _(){var f,C,F;return d()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!z.get("id")){i.next=6;break}return i.next=3,(0,U.vC)({name:(F=z.get("id"))!==null&&F!==void 0?F:"local"});case 3:return Q(""),window.location.href="/dpanel/ui/home",i.abrupt("return");case 6:!((f=c.current)===null||f===void 0)&&f.reloadAndRest&&((C=c.current)===null||C===void 0||C.reloadAndRest());case 7:case"end":return i.stop()}},_)}))},"dockerEnvCreate")]},children:(0,n.jsx)(w.Z,{rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name"},{title:"\u540D\u79F0",dataIndex:"title"},{title:"\u5730\u5740",dataIndex:"address"},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(f,C,F,j,i){return(0,n.jsx)(r.Z,{split:(0,n.jsx)(l.Z,{type:"vertical"}),children:(0,n.jsx)(a.Z.Link,{onClick:function(){var J;(J=Y.current)===null||J===void 0||J.edit(C)},children:(0,n.jsx)($.Z,{})},C.name)})}}],pagination:!1,request:M()(d()().mark(function _(){var f;return d()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,U.Kg)();case 2:return f=F.sent,z.get("id")&&f.data.list.map(function(j){if(j.name==z.get("id")){var i;(i=Y.current)===null||i===void 0||i.edit(j)}}),F.abrupt("return",{data:f.data.list,total:f.data.list.length});case 5:case"end":return F.stop()}},_)})),search:!1,rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0,getCheckboxProps:function(f){return{disabled:f.default}}},actionRef:c,tableAlertOptionRender:function(f){var C=f.selectedRowKeys;return(0,n.jsx)(r.Z,{size:16,children:(0,n.jsx)(x.Z,{danger:!0,type:"primary",action:function(){return(0,U._g)({name:C})},onSuccess:function(){var j,i;return!((j=c.current)===null||j===void 0)&&j.reloadAndRest&&((i=c.current)===null||i===void 0||i.reloadAndRest()),!0},onError:function(){var j,i;return!((j=c.current)===null||j===void 0)&&j.reset&&((i=c.current)===null||i===void 0||i.reset()),!0},confirm:"notification.confirm.title",children:"\u6279\u91CF\u5220\u9664"})})}})})}},86250:function(X,A,e){e.d(A,{Z:function(){return b}});var p=e(67294),d=e(93967),D=e.n(d),M=e(98423),S=e(98065),T=e(53124),x=e(83559),P=e(83262);const m=["wrap","nowrap","wrap-reverse"],t=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],R=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],Z=(r,l)=>{const a=l.wrap===!0?"wrap":l.wrap;return{[`${r}-wrap-${a}`]:a&&m.includes(a)}},B=(r,l)=>{const a={};return R.forEach(o=>{a[`${r}-align-${o}`]=l.align===o}),a[`${r}-align-stretch`]=!l.align&&!!l.vertical,a},y=(r,l)=>{const a={};return t.forEach(o=>{a[`${r}-justify-${o}`]=l.justify===o}),a};function O(r,l){return D()(Object.assign(Object.assign(Object.assign({},Z(r,l)),B(r,l)),y(r,l)))}var W=O;const U=r=>{const{componentCls:l}=r;return{[l]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},L=r=>{const{componentCls:l}=r;return{[l]:{"&-gap-small":{gap:r.flexGapSM},"&-gap-middle":{gap:r.flexGap},"&-gap-large":{gap:r.flexGapLG}}}},s=r=>{const{componentCls:l}=r,a={};return m.forEach(o=>{a[`${l}-wrap-${o}`]={flexWrap:o}}),a},n=r=>{const{componentCls:l}=r,a={};return R.forEach(o=>{a[`${l}-align-${o}`]={alignItems:o}}),a},g=r=>{const{componentCls:l}=r,a={};return t.forEach(o=>{a[`${l}-justify-${o}`]={justifyContent:o}}),a},h=()=>({});var $=(0,x.I$)("Flex",r=>{const{paddingXS:l,padding:a,paddingLG:o}=r,c=(0,P.IX)(r,{flexGapSM:l,flexGap:a,flexGapLG:o});return[U(c),L(c),s(c),n(c),g(c)]},h,{resetStyle:!1}),V=function(r,l){var a={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&l.indexOf(o)<0&&(a[o]=r[o]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(r);c<o.length;c++)l.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(r,o[c])&&(a[o[c]]=r[o[c]]);return a},b=p.forwardRef((r,l)=>{const{prefixCls:a,rootClassName:o,className:c,style:Y,flex:H,gap:N,children:z,vertical:Q=!1,component:_="div"}=r,f=V(r,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:C,direction:F,getPrefixCls:j}=p.useContext(T.E_),i=j("flex",a),[q,J,G]=$(i),u=Q!=null?Q:C==null?void 0:C.vertical,v=D()(c,o,C==null?void 0:C.className,i,J,G,W(i,r),{[`${i}-rtl`]:F==="rtl",[`${i}-gap-${N}`]:(0,S.n)(N),[`${i}-vertical`]:u}),E=Object.assign(Object.assign({},C==null?void 0:C.style),Y);return H&&(E.flex=H),N&&!(0,S.n)(N)&&(E.gap=N),q(p.createElement(_,Object.assign({ref:l,className:v,style:E},(0,M.Z)(f,["justify","wrap","align"])),z))})}}]);
