"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8878],{55809:function(y,P,n){var D=n(87462),_=n(67294),M=n(44805),i=n(84089),d=function(g,h){return _.createElement(i.Z,(0,D.Z)({},g,{ref:h,icon:M.Z}))},c=_.forwardRef(d);P.Z=c},1699:function(y,P,n){n.d(P,{u:function(){return C}});var D=n(9783),_=n.n(D),M=n(97857),i=n.n(M),d=n(67294),c=n(82346),O=n(40411),g=n(42075),h=n(85893),C=function(u){var l=(0,c.useAccess)(),p=Array.isArray(u.access)?u.access:[u.access],r,E=u.fallback;if(typeof u.children=="function"?(r=u.children(p.reduce(function(o,s){return i()(i()({},o),{},_()({},s,l[s]))},{})),r||(r=E)):p.every(function(o){return l[o]})?r=u.children:r=E,!E&&r&&u.showProTips&&l.canSeeEnableCe){if(l.canSeeEnableHiddenProTips)return null;r=(0,h.jsx)(O.Z,{offset:u.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:r})}if(!E&&r&&u.showProRibbonTips&&l.canSeeEnableCe){if(l.canSeeEnableHiddenProTips)return null;r=(0,h.jsx)(O.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:r})}return u.space?(0,h.jsx)(g.Z,i()(i()({},u.space),{},{children:r})):r}},29798:function(y,P,n){n.r(P),n.d(P,{default:function(){return E}});var D=n(5574),_=n.n(D),M=n(13822),i=n(38345),d=n(82346),c=n(67294),O=n(24963),g=n(50070),h=n(37767),C=n(52031),R=n(14189),u=n(72409),l=n(14245),p=n(1699),r=n(85893);function E(){var o=(0,c.useContext)(O.Z),s=o.message,A=o.notice,j=o.loading,U=o.lang,T=(0,c.useContext)(g.AppDetailContext),t=(0,d.useParams)(),a=(0,c.useState)(),f=_()(a,2),e=f[0],S=f[1],H=(0,c.useState)(1),B=_()(H,2),x=B[0],k=B[1],Z=(0,d.useNavigate)();return(0,c.useEffect)(function(){var b;j.show(),T.reload(),(0,M.jV)({md5:(b=t.id)!==null&&b!==void 0?b:""}).then(function(v){v.data&&(v.data.info.HostConfig.NetworkMode=="host"&&v.data.info.Config.ExposedPorts&&Object.keys(v.data.info.Config.ExposedPorts).map(function(I){v.data.info.NetworkSettings.Ports[I]=[{HostIp:"0.0.0.0",HostPort:I.substring(0,I.indexOf("/"))}]}),S(v.data))}).finally(function(){j.destroy()})},[x]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(i.Z,{direction:"column",gutter:[0,10],children:[(e==null?void 0:e.info)&&(0,r.jsx)(R.Z,{data:e.info}),(e==null?void 0:e.info)&&(0,r.jsx)(p.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,r.jsx)(u.Z,{data:e,checkContainerUpgrade:function(){Z("/app/list",{state:{page:localStorage.getItem("dpanel-page-compose-list")}})}})}),e&&(0,r.jsx)(h.Z,{data:e}),e&&(0,r.jsx)(C.Z,{data:e==null?void 0:e.info}),e&&(0,r.jsx)(l.Z,{data:e.info})]})})}},50070:function(y,P,n){n.r(P),n.d(P,{AppDetailContext:function(){return A},default:function(){return j}});var D=n(15009),_=n.n(D),M=n(99289),i=n.n(M),d=n(5574),c=n.n(d),O=n(1699),g=n(24963),h=n(13822),C=n(36146),R=n(55809),u=n(90078),l=n(82346),p=n(25593),r=n(28036),E=n(50136),o=n(67294),s=n(85893),A=(0,o.createContext)({});function j(){var U,T=(0,o.useContext)(g.Z),t=T.loading,a=(0,l.useParams)(),f=(0,l.useSearchParams)(),e=c()(f,2),S=e[0],H=e[1],B=(U=S.get("tab"))!==null&&U!==void 0?U:"edit",x=(0,o.useState)("edit"),k=c()(x,2),Z=k[0],b=k[1],v=(0,l.useNavigate)(),I=(0,o.useState)(1),G=c()(I,2),V=G[0],Q=G[1],z=[{label:(0,s.jsx)(l.Link,{to:"/app/detail/edit/".concat(a.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,s.jsx)(l.Link,{to:"/app/detail/network/".concat(a.id,"?tab=network"),children:"\u7F51\u7EDC\u7BA1\u7406"}),key:"network"},{label:(0,s.jsx)(p.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){v("/app/detail/file/".concat(a.id,"?tab=file"))}},{label:(0,s.jsx)(p.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){v("/app/detail/log/".concat(a.id,"?tab=log"))}},{label:(0,s.jsx)(p.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){v("/app/detail/stat/".concat(a.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,s.jsx)(R.Z,{}),disabled:!0}],Y=(0,o.useState)(z),X=c()(Y,2),w=X[0],q=X[1];(0,o.useEffect)(function(){t.show(),b(B);var W=function(){var $=i()(_()().mark(function J(){var N,F,K;return _()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return N=z,m.prev=1,m.next=4,(0,h.jV)({md5:(F=a.id)!==null&&F!==void 0?F:""});case 4:K=m.sent,N.map(function(L){return L.key=="containerName"&&(L.label=K.data.info.Name),(!K.data.info.State.Running||K.data.info.State.Restarting)&&(L.key=="file"||L.key=="stat")&&(L.disabled=!0),L}),q(N),m.next=13;break;case 9:return m.prev=9,m.t0=m.catch(1),v("/app/list"),m.abrupt("return");case 13:return m.prev=13,t.destroy(),m.finish(13);case 16:case"end":return m.stop()}},J,null,[[1,9,13,16]])}));return function(){return $.apply(this,arguments)}}();W()},[V,a]);var ee=function($){b($.key)};return(0,s.jsx)(A.Provider,{value:{reload:function(){Q(V+1)}},children:(0,s.jsxs)(u._z,{header:{extra:[(0,s.jsx)(O.u,{access:"canSeeContainerListManageCreate",children:(0,s.jsx)(l.Link,{to:"/app/create/image",children:(0,s.jsx)(r.ZP,{type:"primary",children:C.Ob.format("container.create")})})},"create")]},children:[(0,s.jsx)(E.Z,{mode:"horizontal",onClick:ee,selectedKeys:[Z],items:w}),(0,s.jsx)(l.Outlet,{})]})})}},62597:function(y,P,n){n.d(P,{$G:function(){return c},Ct:function(){return o},Tb:function(){return R},XH:function(){return l},cl:function(){return h},fp:function(){return g},iE:function(){return r},xb:function(){return A},ze:function(){return U}});var D=n(15009),_=n.n(D),M=n(99289),i=n.n(M),d=n(82346);function c(t){return O.apply(this,arguments)}function O(){return O=i()(_()().mark(function t(a){return _()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/app/site/create-by-image",{method:"POST",data:a}));case 1:case"end":return e.stop()}},t)})),O.apply(this,arguments)}var g={EnvValueRuleRequired:1,EnvValueRuleDisabled:2,EnvValueTypeNumber:1024,EnvValueTypeText:2048,EnvValueTypeSelect:4096,EnvValueTypeSelectMultiple:8192};function h(t){return C.apply(this,arguments)}function C(){return C=i()(_()().mark(function t(a){return _()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/app/site/get-list",{method:"POST",data:a}));case 1:case"end":return e.stop()}},t)})),C.apply(this,arguments)}function R(t){return u.apply(this,arguments)}function u(){return u=i()(_()().mark(function t(a){return _()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.download=!1,e.next=3,(0,d.request)("/api/app/log/run",{method:"POST",data:a});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},t)})),u.apply(this,arguments)}function l(t){return p.apply(this,arguments)}function p(){return p=i()(_()().mark(function t(a){return _()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.download=!0,e.next=3,(0,d.request)("/api/app/log/run",{method:"POST",data:a,responseType:"blob"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},t)})),p.apply(this,arguments)}function r(t){return E.apply(this,arguments)}function E(){return E=i()(_()().mark(function t(a){return _()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.id=String(a.id),e.next=3,(0,d.request)("/api/app/site/get-detail",{data:a,method:"POST"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},t)})),E.apply(this,arguments)}function o(t){return s.apply(this,arguments)}function s(){return s=i()(_()().mark(function t(a){return _()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/app/container/delete",{method:"POST",data:a}));case 1:case"end":return e.stop()}},t)})),s.apply(this,arguments)}function A(t){return j.apply(this,arguments)}function j(){return j=i()(_()().mark(function t(a){return _()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/app/site/delete",{method:"POST",data:a}));case 1:case"end":return e.stop()}},t)})),j.apply(this,arguments)}function U(t){return T.apply(this,arguments)}function T(){return T=i()(_()().mark(function t(a){return _()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/app/container/ignore",{method:"POST",data:a}));case 1:case"end":return e.stop()}},t)})),T.apply(this,arguments)}}}]);
