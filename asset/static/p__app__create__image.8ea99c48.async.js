(self.webpackChunk=self.webpackChunk||[]).push([[3985],{64789:function(ie,N,e){"use strict";e.d(N,{Z:function(){return E}});var R=e(87462),u=e(67294),M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},p=M,_=e(84089),D=function(v,o){return u.createElement(_.Z,(0,R.Z)({},v,{ref:o,icon:p}))},A=u.forwardRef(D),E=A},63434:function(ie,N,e){"use strict";var R=e(1413),u=e(45987),M=e(22270),p=e(84567),_=e(67294),D=e(90789),A=e(35510),E=e(85893),c=["options","fieldProps","proFieldProps","valueEnum"],v=_.forwardRef(function(m,W){var a=m.options,t=m.fieldProps,z=m.proFieldProps,H=m.valueEnum,Z=(0,u.Z)(m,c);return(0,E.jsx)(A.Z,(0,R.Z)({ref:W,valueType:"checkbox",valueEnum:(0,M.h)(H,void 0),fieldProps:(0,R.Z)({options:a},t),lightProps:(0,R.Z)({labelFormatter:function(){return(0,E.jsx)(A.Z,(0,R.Z)({ref:W,valueType:"checkbox",mode:"read",valueEnum:(0,M.h)(H,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,R.Z)({options:a},t),proFieldProps:z},Z))}},Z.lightProps),proFieldProps:z},Z))}),o=_.forwardRef(function(m,W){var a=m.fieldProps,t=m.children;return(0,E.jsx)(p.Z,(0,R.Z)((0,R.Z)({ref:W},a),{},{children:t}))}),g=(0,D.G)(o,{valuePropName:"checked"}),b=g;b.Group=v,N.Z=b},31199:function(ie,N,e){"use strict";var R=e(1413),u=e(45987),M=e(67294),p=e(35510),_=e(85893),D=["fieldProps","min","proFieldProps","max"],A=function(v,o){var g=v.fieldProps,b=v.min,m=v.proFieldProps,W=v.max,a=(0,u.Z)(v,D);return(0,_.jsx)(p.Z,(0,R.Z)({valueType:"digit",fieldProps:(0,R.Z)({min:b,max:W},g),ref:o,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:m},a))},E=M.forwardRef(A);N.Z=E},90672:function(ie,N,e){"use strict";var R=e(1413),u=e(45987),M=e(67294),p=e(35510),_=e(85893),D=["fieldProps","proFieldProps"],A=function(c,v){var o=c.fieldProps,g=c.proFieldProps,b=(0,u.Z)(c,D);return(0,_.jsx)(p.Z,(0,R.Z)({ref:v,valueType:"textarea",fieldProps:o,proFieldProps:g},b))};N.Z=M.forwardRef(A)},91058:function(ie,N,e){"use strict";var R=e(19632),u=e.n(R),M=e(97857),p=e.n(M),_=e(5574),D=e.n(_),A=e(89035),E=e(64317),c=e(5966),v=e(38345),o=e(17186),g=e(24739),b=e(42075),m=e(28036),W=e(85576),a=e(67294),t=e(95089),z=e(12491),H=e(62597),Z=e(79245),r=e(85893),f="docker-image",S=(0,a.forwardRef)(function(x,d){var de=(0,a.useState)(f),l=D()(de,2),T=l[0],y=l[1],C=(0,a.useRef)(),se=(0,a.useState)(""),ce=D()(se,2),me=ce[0],k=ce[1],ge=function(){T!="code"?y("code"):y(f)};(0,a.useImperativeHandle)(d,function(){return{addEnvItem:function(K,ne){var X,te=(X=C.current)===null||X===void 0?void 0:X.getList(),n=!1;if(te==null||te.map(function(fe){if(fe.name==K){n=!0;return}}),!n){var _e;(_e=C.current)===null||_e===void 0||_e.add({name:K,value:ne})}},clear:function(){var K;(K=C.current)===null||K===void 0||(K=K.getList())===null||K===void 0||K.map(function(ne,X){var te;(te=C.current)===null||te===void 0||te.remove(X)})}}});function Pe(w){try{var K,ne;w==""&&(w=Me());for(var X=(K=(ne=C.current)===null||ne===void 0||(ne=ne.getList())===null||ne===void 0?void 0:ne.length)!==null&&K!==void 0?K:0,te=X;te>=0;te--){var n;(n=C.current)===null||n===void 0||n.remove(te)}var _e=w.split(`
`),fe=0;_e.map(function(pe){var je,De=pe.split("=");De.length<2||((je=C.current)===null||je===void 0||je.add({name:De[0],value:De.slice(1).join("=")},fe),fe++)})}catch(pe){console.log(pe)}}function Me(){if(C&&C.current&&C.current.getList){var w,K=(w=C.current)===null||w===void 0?void 0:w.getList();if(K){var ne=[];return K.map(function(X){ne.push("".concat(X.name,"=").concat(X.value))}),ne.join(`
`)}else return""}else return""}function Te(w){var K,ne,X,te,n={},_e={help:w&&w.label?w.label:"",name:"value",label:"\u53D8\u91CF\u503C",rules:[{required:x.requireValue?!0:(0,Z.y)((K=w.rule)===null||K===void 0?void 0:K.kind,H.fp.EnvValueRuleRequired)}],disabled:x.showDisableValue||(0,Z.y)((ne=w.rule)===null||ne===void 0?void 0:ne.kind,H.fp.EnvValueRuleDisabled)};if((0,Z.y)((X=w.rule)===null||X===void 0?void 0:X.kind,H.fp.EnvValueTypeSelect)){var fe;return(0,r.jsx)(E.Z,p()(p()({fieldProps:n},_e),{},{width:x.showInDrawer?"sm":"md",options:((fe=w.rule)===null||fe===void 0?void 0:fe.option)&&w.rule.option.map(function(pe){return{label:pe.name,value:pe.value}}),initialValue:w.value}))}else return(0,Z.y)((te=w.rule)===null||te===void 0?void 0:te.kind,H.fp.EnvValueTypeNumber)?(0,r.jsx)(c.Z,p()(p()({fieldProps:n},_e),{},{width:x.showInDrawer?"sm":"md",rules:[].concat(u()(_e.rules),[{pattern:new RegExp("^[0-9]*$")}]),help:_e.help+",\u6570\u503C\u7C7B\u578B"})):(0,r.jsx)(c.Z,p()(p()({fieldProps:n},_e),{},{width:x.showInDrawer?"sm":"md"}))}return(0,r.jsxs)(v.Z,{ghost:x.showCardGhost,title:x.label?x.label:null,headerBordered:!0,extra:(x.showCodeMode||x.showImportButton)&&(0,r.jsxs)(b.Z,{children:[x.showImportButton&&(0,r.jsx)("div",{style:{marginBottom:"-25px"},children:(0,r.jsx)(z.Z,{title:"\u5BFC\u5165 env \u6587\u4EF6",onImport:function(K){return Pe(K),!0},onLoad:function(K){if(K.indexOf("=")<0)throw new Error("\u5BFC\u5165env\u6587\u4EF6\u9519\u8BEF");return!0}})}),x.showCodeMode?(0,r.jsx)(m.ZP,{icon:(0,r.jsx)(A.Z,{}),type:T=="code"?"primary":"default",onClick:ge,children:"\u4EE3\u7801\u6A21\u5F0F"},"code"):""]}),children:[(0,r.jsx)(o.u,{name:x.name?x.name:"environment",actionRef:C,creatorButtonProps:x.showAddButton?{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u73AF\u5883\u53D8\u91CF"}:!1,copyIconProps:!1,deleteIconProps:x.showDeleteButton,min:100,label:x.listLabel,children:function(K,ne,X){var te=X.getCurrentRowData();return(0,r.jsxs)(g.UW,{style:{marginBottom:"5px"},children:[(0,r.jsx)(c.Z,{width:x.showInDrawer?"sm":"md",name:"name",label:"\u53D8\u91CF\u540D",required:!0,rules:[{required:!0}],disabled:x.showDisableName,placeholder:"\u8F93\u5165\u53D8\u91CF\u540D\u79F0"}),Te(te)]})}}),x.showCodeMode&&(0,r.jsx)(W.Z,{width:"800px",open:T=="code",onCancel:function(){return y("docker-image")},onOk:function(){Pe(me),y("docker-image")},children:(0,r.jsx)(t.ZP,{onChange:function(K){return k(K)},value:Me(),height:"680px",theme:"light"})})]})});N.Z=S},92067:function(ie,N,e){"use strict";e.d(N,{Z:function(){return b}});var R=e(15009),u=e.n(R),M=e(99289),p=e.n(M),_=e(60335),D=e(64789),A=e(78099),E=e(42075),c=e(28036),v=e(37413),o=e(5251),g=e(85893);function b(m){return(0,g.jsx)(A.Z,{columns:[{title:"\u5BB9\u5668\u540D\u79F0",dataIndex:"name",render:function(a,t,z,H){return(0,g.jsx)(E.Z,{direction:"vertical",style:{textAlign:"left"},children:t==null?void 0:t.Names.map(function(Z){return(0,o.fi)(Z,"/")})},t.Id)}},{title:"\u7AEF\u53E3",dataIndex:"ports",search:!1,render:function(a,t,z,H){var Z=[],r=[];return t!=null&&t.Ports&&t.Ports.map(function(f,S){f.PublicPort?Z.push(f):r.push(f)}),(0,g.jsx)(v.Z,{publicPort:Z,privatePort:r,domain:[]})}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",ellipsis:!0,width:100,render:function(a,t,z,H){return[(0,g.jsx)(c.ZP,{type:"link",onClick:p()(u()().mark(function Z(){var r;return u()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,_.jV)({md5:t.Id});case 2:r=S.sent,m.onSelect&&m.onSelect(r.data.info);case 4:case"end":return S.stop()}},Z)})),children:(0,g.jsx)(D.Z,{})},t.Id)]}}],rowKey:"Id",request:function(){var W=p()(u()().mark(function a(t,z,H){var Z;return u()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,_.IE)({siteTitle:t.name});case 2:return Z=f.sent,f.abrupt("return",{data:Z.data.list,success:!0,total:Z.data.list.length});case 4:case"end":return f.stop()}},a)}));return function(a,t,z){return W.apply(this,arguments)}}(),pagination:{pageSize:9}})}},52255:function(ie,N,e){"use strict";e.d(N,{Z:function(){return M}});var R=e(67294),u=e(85893);function M(p){return(0,u.jsx)("div",{style:{display:p.show?"block":"none"},children:p.children})}},44349:function(ie,N,e){"use strict";var R=e(97857),u=e.n(R),M=e(17186),p=e(5966),_=e(86250),D=e(67294),A=e(85893),E=(0,D.forwardRef)(function(c,v){var o=(0,D.useRef)();(0,D.useImperativeHandle)(v,function(){return{addItem:function(m,W){var a,t=(a=o.current)===null||a===void 0?void 0:a.getList(),z=!1;if(t==null||t.map(function(Z){if(Z.name==m){z=!0;return}}),!z){var H;(H=o.current)===null||H===void 0||H.add({name:m,value:W})}},clear:function(){var m;(m=o.current)===null||m===void 0||(m=m.getList())===null||m===void 0||m.map(function(W,a){var t;(t=o.current)===null||t===void 0||t.remove(a)})}}});var g={};return c.hideCopyButton===!0&&(g.copyIconProps=!1),c.hideDeleteButton===!0&&(g.deleteIconProps=!1),(0,A.jsx)(M.u,u()(u()({initialValue:c.initialValue,label:c.label,name:c.name,actionRef:o,creatorButtonProps:c.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(c.label?c.label:c.name)}:!1,min:c.min?c.min:0},g),{},{children:function(m,W,a){return(0,A.jsx)(_.Z,{justify:c.justify,gap:c.gap,children:c.items.map(function(t){return t.render?(0,A.jsx)("div",{children:t.render&&t.render(m,W,a)},"".concat(c.name,"-").concat(t.name,"-").concat(m.key)):(0,A.jsx)(p.Z,{width:t.width,name:t.name,label:t.label,required:t.required,rules:[{required:t.required}],disabled:t.disabled,placeholder:t.placeholder},"".concat(c.name,"-").concat(t.name,"-").concat(m.key))})})}}))});N.Z=E},12491:function(ie,N,e){"use strict";e.d(N,{Z:function(){return E}});var R=e(24963),u=e(88484),M=e(62370),p=e(31418),_=e(28036),D=e(67294),A=e(85893);function E(c){var v=(0,D.useContext)(R.Z),o=v.message,g=v.notice,b=v.lang,m=(0,D.useRef)(null),W=p.Z.useApp(),a=function(){m.current&&(m.current.click(),m.current.onchange=function(z){if(!z||!z.target)return"";var H=new FileReader;H.onload=function(r){var f,S,x=(f=r.target)===null||f===void 0?void 0:f.result;if(c.onLoad)try{c.onLoad&&c.onLoad(x)}catch(d){g.error(d);return}typeof c.onImport=="function"&&(o.success("\u6210\u529F\u5BFC\u5165 ".concat(c.title)),c.onImport(x)),(S=m.current)!==null&&S!==void 0&&S.value&&(m.current.value="")};var Z=z.target;if(Z.files)try{H.readAsText(Z.files[0])}catch(r){g.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(M.Z,{children:(0,A.jsx)(_.ZP,{icon:(0,A.jsx)(u.Z,{}),block:!0,onClick:a,children:c.title})}),(0,A.jsx)("input",{style:{display:"none"},type:"file",ref:m,name:"importFileInput"})]})}},28230:function(ie,N,e){"use strict";var R=e(15009),u=e.n(R),M=e(99289),p=e.n(M),_=e(5574),D=e.n(_),A=e(24963),E=e(14946),c=e(184),v=e(5966),o=e(62370),g=e(97462),b=e(52688),m=e(24739),W=e(17186),a=e(28036),t=e(34041),z=e(71230),H=e(15746),Z=e(67294),r=e(85893),f=(0,Z.forwardRef)(function(S,x){var d=(0,Z.useState)(!1),de=D()(d,2),l=de[0],T=de[1],y=(0,Z.useRef)(),C=(0,Z.useContext)(A.Z),se=C.message;return(0,Z.useImperativeHandle)(x,function(){return{}}),(0,r.jsxs)(c.a,{name:"create",title:"\u521B\u5EFA\u7F51\u7EDC",open:l,onOpenChange:function(me){T(me)},formRef:y,trigger:(0,r.jsx)(a.ZP,{type:"primary",children:"\u521B\u5EFA\u7F51\u7EDC"}),onFinish:function(){var ce=p()(u()().mark(function me(k){var ge,Pe,Me,Te,w,K,ne,X,te,n,_e,fe,pe,je;return u()().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return fe={name:k.name,driver:(ge=k.driver)!==null&&ge!==void 0?ge:"bridge",ipSubnet:(Pe=k.ipSubnet)!==null&&Pe!==void 0?Pe:"",ipGateway:(Me=k.ipGateway)!==null&&Me!==void 0?Me:"",ipRange:(Te=k.ipRange)!==null&&Te!==void 0?Te:"",ipAux:k.ipAux,enableIpV6:(w=k.enableIpV6)!==null&&w!==void 0?w:!1,ipV6Subnet:(K=k.ipV6Subnet)!==null&&K!==void 0?K:"",ipV6Gateway:(ne=k.ipV6Gateway)!==null&&ne!==void 0?ne:"",ipV6Range:(X=k.ipV6Range)!==null&&X!==void 0?X:"",ipV6Aux:(te=k.ipV6Aux)!==null&&te!==void 0?te:[],driverOption:k.driverOption,internal:(n=k.internal)!==null&&n!==void 0?n:!1,attachable:(_e=k.attachable)!==null&&_e!==void 0?_e:!1},(k.driver=="macvlan"||k.driver=="ipvlan")&&(fe.driverOption||(fe.driverOption=[]),fe.driverOption.push({name:"parent",value:k.macvlanParentCard})),ye.next=4,(0,E.XY)(fe);case 4:if(pe=ye.sent,!(pe&&pe.data&&pe.data.id!="")){ye.next=10;break}return se.success("\u521B\u5EFA\u7F51\u7EDC\u6210\u529F"),S.onFinish&&S.onFinish(),(je=y.current)===null||je===void 0||je.resetFields(),ye.abrupt("return",!0);case 10:case"end":return ye.stop()}},me)}));return function(me){return ce.apply(this,arguments)}}(),children:[(0,r.jsx)(v.Z,{label:"\u540D\u79F0",tooltip:"\u4E0D\u914D\u7F6E\u5B50\u7F51\u65F6\uFF0C\u4F1A\u81EA\u52A8\u751F\u6210",name:"name",required:!0,rules:[{required:!0}],placeholder:"\u6307\u5B9A\u552F\u4E00\u7684\u7F51\u7EDC\u540D\u79F0"}),(0,r.jsx)(o.Z,{label:"\u7C7B\u578B",name:"driver",children:(0,r.jsxs)(t.Z,{defaultValue:"bridge",children:[(0,r.jsx)(t.Z.Option,{value:"bridge",children:"bridge"}),(0,r.jsx)(t.Z.Option,{value:"macvlan",children:"macvlan"}),(0,r.jsx)(t.Z.Option,{value:"ipvlan",children:"ipvlan"}),(0,r.jsx)(t.Z.Option,{value:"overlay",children:"overlay"})]})}),(0,r.jsx)(g.Z,{name:["driver"],children:function(me){var k=me.driver;if(k=="macvlan"||k=="ipvlan")return(0,r.jsx)(v.Z,{required:!0,rules:[{required:!0}],label:"\u7236\u7F51\u5361",name:"macvlanParentCard",tooltip:"\u6307\u5B9A\u8981\u6865\u63A5\u7684\u5BBF\u4E3B\u673A\u7F51\u5361\u540D\u79F0"})}}),(0,r.jsxs)(z.Z,{children:[(0,r.jsx)(H.Z,{span:8,children:(0,r.jsx)(b.Z,{label:"\u81EA\u5B9AIPV4\u5B50\u7F51",name:"userIpV4Subnet"})}),(0,r.jsx)(H.Z,{span:8,children:(0,r.jsx)(b.Z,{name:"internal",label:"\u9694\u79BB\u5916\u90E8\u8BBF\u95EE",initialValue:!1})}),(0,r.jsx)(H.Z,{span:8,children:(0,r.jsx)(b.Z,{name:"attachable",label:"\u5141\u8BB8\u624B\u52A8\u9644\u52A0\u5BB9\u5668",initialValue:!1})})]}),(0,r.jsx)(g.Z,{name:["userIpV4Subnet"],children:function(me){var k=me.userIpV4Subnet;if(k)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(m.UW,{title:"IPV4\u914D\u7F6E",children:[(0,r.jsx)(v.Z,{label:"\u5B50\u7F51",name:"ipSubnet",width:"md",tooltip:"\u683C\u5F0F\u4E3A: \u5B50\u7F51\u8D77\u59CB\u5730\u5740/\u63A9\u7801\u3002\u5E38\u89C1\u7684\u683C\u5F0F\u6709 10.0.0.0/8, 172.20.0.0/16, 192.168.1.0/24",placeholder:"192.168.0.0/16"}),(0,r.jsx)(v.Z,{label:"\u7F51\u5173",name:"ipGateway",width:"md",placeholder:"192.168.0.1"}),(0,r.jsx)(v.Z,{label:"\u6307\u5B9AIp\u8303\u56F4",name:"ipRange",width:"md",placeholder:"192.168.1.0/24"})]}),(0,r.jsx)(W.u,{name:"ipAux",label:"\u6392\u9664Ip",children:(0,r.jsxs)(m.UW,{children:[(0,r.jsx)(v.Z,{label:"\u8BBE\u5907\u540D\u79F0",name:"device",width:"md"}),(0,r.jsx)(v.Z,{label:"Ip\u5730\u5740",name:"address",width:"md"})]})})]})}}),(0,r.jsxs)(z.Z,{children:[(0,r.jsx)(H.Z,{span:8,children:(0,r.jsx)(b.Z,{label:"\u542F\u7528IPV6",name:"enableIpV6"})}),(0,r.jsx)(H.Z,{children:(0,r.jsx)(b.Z,{label:"\u81EA\u5B9AIPV6\u5B50\u7F51",name:"userIpV6Subnet",fieldProps:{onChange:function(me,k){if(me){var ge;(ge=y.current)===null||ge===void 0||ge.setFieldValue("enableIpV6",!0)}}}})})]}),(0,r.jsx)(g.Z,{name:["userIpV6Subnet"],children:function(me){var k=me.userIpV6Subnet;if(k)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(m.UW,{title:"IPV6\u914D\u7F6E",children:[(0,r.jsx)(v.Z,{label:"\u5B50\u7F51",name:"ipV6Subnet",width:"md",placeholder:"2001:db8::/48"}),(0,r.jsx)(v.Z,{label:"\u7F51\u5173",name:"ipV6Gateway",width:"md",placeholder:"2001:db8::1"}),(0,r.jsx)(v.Z,{label:"Ip\u8303\u56F4",name:"ipV6Range",width:"md",placeholder:"2001:db8::/64"})]}),(0,r.jsx)(W.u,{name:"ipV6Aux",label:"\u6392\u9664Ip",children:(0,r.jsxs)(m.UW,{children:[(0,r.jsx)(v.Z,{label:"\u8BBE\u5907\u540D\u79F0",name:"device",width:"md"}),(0,r.jsx)(v.Z,{label:"Ip\u5730\u5740",name:"address",width:"md"})]})})]})}}),(0,r.jsx)(W.u,{name:"driverOption",label:"\u81EA\u5B9A\u4E49\u9A71\u52A8\u914D\u7F6E",children:(0,r.jsxs)(m.UW,{children:[(0,r.jsx)(v.Z,{label:"\u540D\u79F0",name:"name",width:"md"}),(0,r.jsx)(v.Z,{label:"\u503C",name:"value",width:"md"})]})})]})});N.Z=f},46442:function(ie,N,e){"use strict";var R=e(15009),u=e.n(R),M=e(99289),p=e.n(M),_=e(5574),D=e.n(_),A=e(67294),E=e(14946),c=e(64789),v=e(78099),o=e(28036),g=e(85265),b=e(42075),m=e(66309),W=e(28230),a=e(85893),t=(0,A.forwardRef)(function(z,H){(0,A.useImperativeHandle)(H,function(){return{show:function(){S(!0)}}});var Z=(0,A.useState)(!1),r=D()(Z,2),f=r[0],S=r[1],x=(0,A.useRef)();return(0,a.jsxs)(a.Fragment,{children:[z.showTriggerButton&&(0,a.jsx)(o.ZP,{onClick:function(){S(!0)},children:"\u52A0\u5165\u7F51\u7EDC"}),(0,a.jsx)(g.Z,{title:"\u9009\u62E9\u7F51\u7EDC",width:800,footer:!1,open:f,onClose:function(){return S(!1)},extra:(0,a.jsx)(b.Z,{children:(0,a.jsx)(W.Z,{onFinish:function(){var de,l;!((de=x.current)===null||de===void 0)&&de.reloadAndRest&&((l=x.current)===null||l===void 0||l.reloadAndRest())}},"create")}),children:(0,a.jsx)(v.Z,{rowKey:"Name",toolBarRender:!1,actionRef:x,columns:[{title:"\u540D\u79F0",dataIndex:"Name",render:function(de,l,T,y,C){return l.Name=="none"||l.Name=="bridge"||l.Name=="host"?(0,a.jsxs)(a.Fragment,{children:[l.Name," ",(0,a.jsx)(m.Z,{color:"blue",children:"System"})]}):(0,a.jsx)(a.Fragment,{children:de})}},{title:"\u7C7B\u578B",ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"IPAM Driver",ellipsis:!0,width:120,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4 IPAM Network",search:!1,dataIndex:["IPAM","Config",0,"Subnet"],render:function(de,l,T,y,C){return(0,a.jsxs)(b.Z,{children:[l.IPAM.Config&&l.IPAM.Config[0]&&"".concat(l.IPAM.Config[0].Subnet," - ").concat(l.IPAM.Config[0].Gateway),l.IPAM.Config&&l.IPAM.Config[1]&&"".concat(l.IPAM.Config[1].Subnet," - ").concat(l.IPAM.Config[1].Gateway)]})}},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(de,l,T,y,C){return[l.Name!="none"&&l.Name!="bridge"&&l.Name!="host"&&(0,a.jsx)(o.ZP,{type:"link",onClick:function(){z.onSelect(l),S(!1)},children:(0,a.jsx)(c.Z,{})},l.Id)]}}],request:function(){var d=p()(u()().mark(function de(l,T,y){var C;return u()().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.next=2,(0,E.jR)({name:l.Name});case 2:return C=ce.sent,ce.abrupt("return",{data:C.data.list,success:!0,total:C.data.list.length});case 4:case"end":return ce.stop()}},de)}));return function(de,l,T){return d.apply(this,arguments)}}(),pagination:{pageSize:10}})})]})});N.Z=t},35880:function(ie,N,e){"use strict";var R=e(67294),u=(0,R.createContext)({});N.Z=u},17374:function(ie,N,e){"use strict";e.r(N),e.d(N,{default:function(){return yn}});var R=e(15009),u=e.n(R),M=e(99289),p=e.n(M),_=e(5574),D=e.n(_),A=e(90078),E=e(38345),c=e(97269),v=e(2236),o=e(5966),g=e(24739),b=e(97462),m=e(30291),W=e(92398),a=e(38925),t=e(67294),z=e(35880),H=e(78099),Z=e(62370),r=e(85576),f=e(42075),S=e(96074),x=e(25593),d=e(83062),de=e(71230),l=e(15746),T=e(28036),y=e(3393),C=e(18148),se=e(5251),ce=e(64789),me=e(87462),k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885 780H165c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM400 325.7h73.9V664c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V325.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 171a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13z"}}]},name:"to-top",theme:"outlined"},ge=k,Pe=e(84089),Me=function(J,$){return t.createElement(Pe.Z,(0,me.Z)({},J,{ref:$,icon:ge}))},Te=t.forwardRef(Me),w=Te,K=e(85060),ne=e(28307),X=e(78451),te=e(99861),n=e(85893);function _e(j){var J=(0,t.useState)(!1),$=D()(J,2),Q=$[0],I=$[1],G=(0,t.useRef)(),B=(0,t.useContext)(z.Z),P=B.createFormRef,L=B.volumeListRef,U=B.createEnvRef,h=B.domainRef,F=(0,t.useRef)(),q=function(){var V=p()(u()().mark(function Y(O){var ee,he,oe,le,Ee,xe,Ae,Ce,Be,Re,Ze,ke;return u()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return I(!1),re.next=3,(0,y.YU)({md5:O});case 3:le=re.sent,j.redeploy||(Ce=(Ee=P.current)===null||Ee===void 0?void 0:Ee.getFieldsValue(),(xe=P.current)===null||xe===void 0||xe.resetFields(),(Ae=P.current)===null||Ae===void 0||Ae.setFieldsValue({siteName:Ce.siteName,siteTitle:Ce.siteTitle,useBridgeNetwork:Ce.useBridgeNetwork})),le.data.info.Config.Env&&le.data.info.Config.Env.map(function(i){var ve,s=i.split("=");(ve=U.current)===null||ve===void 0||ve.addEnvItem(s[0],s.slice(1).join("="))}),(ee=P.current)===null||ee===void 0||ee.setFieldValue("imageName",O),(he=P.current)===null||he===void 0||he.setFieldValue("workDir",le.data.info.Config.WorkingDir),(oe=h.current)===null||oe===void 0||oe.setExposePort(le.data.info.Config.ExposedPorts),j.redeploy||(le.data.info.Config.Volumes?(Ze=[],Object.keys(le.data.info.Config.Volumes).map(function(i,ve){Ze.push(i)}),(Re=L.current)===null||Re===void 0||Re.setDefaultDestPath(Ze)):(ke=L.current)===null||ke===void 0||ke.setDefaultDestPath([]),(Be=P.current)===null||Be===void 0||Be.setFieldsValue({workDir:{value:"",useDefault:!0,default:le.data.info.Config.WorkingDir},user:{value:"",useDefault:!0,default:le.data.info.Config.User},command:{value:"",useDefault:!0,default:le.data.info.Config.Cmd&&le.data.info.Config.Cmd.join(" ")},entrypoint:{value:"",useDefault:!0,default:le.data.info.Config.Entrypoint&&le.data.info.Config.Entrypoint.join(" ")}}));case 10:case"end":return re.stop()}},Y)}));return function(O){return V.apply(this,arguments)}}();return(0,t.useEffect)(function(){j.fromImageId&&q(j.fromImageId)},[j.fromImageId]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.Z,{open:Q,width:1024,title:"\u9009\u62E9\u955C\u50CF",footer:!1,onCancel:function(){return I(!1)},children:(0,n.jsx)(H.Z,{scroll:{x:"max-content"},columns:[{title:"Id",dataIndex:"Id",search:!1,width:200,render:function(Y,O,ee,he,oe){return(0,n.jsx)(X.Z,{content:O.Id})}},{title:"\u955C\u50CF\u540D\u79F0",dataIndex:"tag",width:200,render:function(Y,O,ee,he){return(0,n.jsx)(X.Z,{content:O.RepoTags[0]})}},{title:"\u521B\u5EFA\u65E5\u671F",dataIndex:"Created",ellipsis:!0,search:!1,width:"180px",render:function(Y,O,ee,he){return(0,n.jsx)("div",{children:(0,se.ZM)(O.Created*1e3)},O.Id)},sorter:function(Y,O){return Y.Created-O.Created}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:80,render:function(Y,O,ee,he){return(0,n.jsxs)(f.Z,{split:(0,n.jsx)(S.Z,{type:"vertical"}),children:[(0,n.jsx)(x.Z.Link,{onClick:p()(u()().mark(function oe(){return u()().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.abrupt("return",q(O.RepoTags[0]));case 1:case"end":return Ee.stop()}},oe)})),children:(0,n.jsx)(d.Z,{title:"\u4F7F\u7528\u955C\u50CF",children:(0,n.jsx)(ce.Z,{})})},"addImage"),(0,n.jsx)(x.Z.Link,{onClick:p()(u()().mark(function oe(){var le;return u()().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:O.RepoTags[0]&&((le=F.current)===null||le===void 0||le.setImageName(O.RepoTags[0]));case 1:case"end":return xe.stop()}},oe)})),children:(0,n.jsx)(d.Z,{title:"\u66F4\u65B0\u955C\u50CF",children:(0,n.jsx)(w,{})})},"updateImage")]})}}],request:function(){var V=p()(u()().mark(function Y(O,ee,he){var oe,le,Ee,xe,Ae;return u()().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return j.redeploy&&(le=(oe=P.current)===null||oe===void 0?void 0:oe.getFieldValue("imageName"),O.tag=le?le.split(":")[0]:O.tag),Be.next=3,(0,C.KG)({tag:O.tag});case 3:return Ee=Be.sent,xe=0,Ae=[],Ee.data.list&&(Ae=Ee.data.list.flatMap(function(Re){return Re.RepoTags.map(function(Ze){return{Key:xe++,Id:Re.Id,Created:Re.Created,RepoTags:[Ze]}})})),Be.abrupt("return",{data:Ae,success:!0,total:Ae.length});case 8:case"end":return Be.stop()}},Y)}));return function(Y,O,ee){return V.apply(this,arguments)}}(),toolBarRender:function(){return[(0,n.jsx)(ne.Z,{onClick:function(){I(!1)},buttonType:"primary",ref:F,onFinish:function(O){q(O)}},"remote")]},formRef:G,rowKey:"Key",pagination:{pageSize:5}})},"imageTableList"),(0,n.jsxs)(de.Z,{children:[(0,n.jsx)(l.Z,{span:14,children:(0,n.jsx)(o.Z,{label:"\u955C\u50CF",tooltip:j.redeploy?"\u66F4\u65B0\u5BB9\u5668\u65F6,\u53EA\u53EF\u4EE5\u9009\u62E9\u8BE5\u955C\u50CF\u4E0B\u7684\u4E0D\u540Ctag.\u4E5F\u53EF\u4EE5\u5F3A\u5236\u66F4\u65B0\u5DF2\u90E8\u7F72tag,\u66F4\u6B21\u90E8\u7F72":"\u65B0\u5EFA\u5BB9\u5668\u65F6,\u53EF\u4EE5\u4F7F\u7528\u672C\u5730\u955C\u50CF,\u4E5F\u53EF\u4EE5\u4E0B\u8F7D\u5168\u65B0\u7684\u955C\u50CF\u6216\u662F\u66F4\u65B0\u672C\u5730\u955C\u50CF\u7684tag",name:"imageName",disabled:!0,placeholder:"\u8BF7\u9009\u62E9\u955C\u50CF\uFF0C\u5982\u679C\u662F\u8FDC\u7A0B\u955C\u50CF\u8BF7\u5148\u4E0B\u8F7D",rules:[{required:!0}],required:!0})}),(0,n.jsx)(l.Z,{children:(0,n.jsx)(Z.Z,{label:" ",children:(0,n.jsxs)(f.Z.Compact,{children:[(0,n.jsx)(T.ZP,{type:"primary",onClick:function(){return I(!0)},children:j.redeploy?"\u66F4\u6362\u955C\u50CF":"\u9009\u62E9\u955C\u50CF"},"showBtn"),(0,n.jsx)(b.Z,{name:["imageName"],children:function(Y){var O=Y.imageName;return j.redeploy?(0,n.jsx)(te.Z,{image:[O],trigger:(0,n.jsx)(d.Z,{title:"\u91CD\u65B0\u62C9\u53D6\u5F53\u524D\u955C\u50CF",children:(0,n.jsx)(T.ZP,{icon:(0,n.jsx)(K.Z,{}),children:"\u62C9\u53D6\u5F53\u524D\u955C\u50CF"})})}):(0,n.jsx)(ne.Z,{onClick:function(){I(!1)},ref:F,onFinish:function(he){q(he)}},"remote")}})]})})})]})]})}var fe=e(60335),pe=e(51042),je=e(63434),De=e(17186),ye=e(85265),un=e(92067),ln=(0,t.forwardRef)(function(j,J){var $=(0,t.useState)(!1),Q=D()($,2),I=Q[0],G=Q[1],B=(0,t.useRef)(),P=function(h){var F=(0,t.useState)([]),q=D()(F,2),V=q[0],Y=q[1];return(0,t.useEffect)(function(){(0,fe.jV)({md5:h.name}).then(function(O){var ee;return Y((ee=O.data.info.Config.Env)!==null&&ee!==void 0?ee:[]),!0})},[]),(0,n.jsxs)(E.Z,{bordered:!0,extra:h.action,style:{marginBottom:10},children:[(0,n.jsx)(E.Z,{title:"\u5173\u8054\u4FE1\u606F",children:(0,n.jsxs)(g.UW,{children:[(0,n.jsx)(o.Z,{label:"\u5BB9\u5668\u540D\u79F0",name:"name",width:"md",readonly:!0}),(0,n.jsx)(o.Z,{label:"\u8BBF\u95EEHostName",name:"alise",width:"md",tooltip:"\u901A\u8FC7\u914D\u7F6E\u6B64\u540D\u79F0\uFF0C\u5728\u5BB9\u5668\u5185\u90E8\u8FDB\u884C\u8BF7\u6C42\u8BBF\u95EE"}),(0,n.jsx)(je.Z,{label:"\u5173\u8054\u5B58\u50A8",name:"volume"})]})}),(0,n.jsx)(E.Z,{title:"\u73AF\u5883\u53D8\u91CF",children:(0,n.jsx)(f.Z,{direction:"vertical",children:V&&V.map(function(O,ee){return(0,n.jsx)(x.Z.Text,{copyable:{icon:(0,n.jsx)(pe.Z,{}),onCopy:function(){var oe=O.split("=");j.onAddEnv(oe[0],oe[1])},tooltips:["add env","success"]},code:!0,ellipsis:{tooltip:O},style:{width:300},children:O},ee)})},"linkEnv")})]})},L=function(h){var F,q,V=!1,Y=(F=(q=B.current)===null||q===void 0?void 0:q.getList())!==null&&F!==void 0?F:[];if(Y.map(function(ee){ee.name==h.name&&(V=!0)}),!V){var O;(O=B.current)===null||O===void 0||O.add(h)}};return(0,t.useImperativeHandle)(J,function(){return{setDefaultLink:function(h){h&&h.map(function(F){F.name!=""&&L(F)})}}}),(0,n.jsxs)(E.Z,{title:"\u5173\u8054\u5BB9\u5668",headerBordered:!0,children:[(0,n.jsx)(De.u,{name:"links",actionRef:B,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5173\u8054"},actionGuard:{beforeAddRow:function(h,F){return G(!0),!1}},copyIconProps:!1,min:0,itemRender:function(h,F){return(0,n.jsx)(P,{action:h.action,name:F.record.name})}}),(0,n.jsx)(ye.Z,{title:"\u9009\u62E9\u5BB9\u5668",width:800,footer:!1,open:I,onClose:function(){return G(!1)},children:(0,n.jsx)(un.Z,{onSelect:function(h){L({name:h.Name,alise:h.Config.Hostname,volume:!1}),G(!1)}})})]})}),sn=ln,on=e(91058),Ve=e(64317),dn=(0,t.forwardRef)(function(j,J){var $=(0,t.useRef)();return(0,t.useImperativeHandle)(J,function(){return{setDefaultDestPath:function(I){var G,B,P=(G=(B=$.current)===null||B===void 0?void 0:B.getList())!==null&&G!==void 0?G:[];I.length!=0&&I.filter(function(L){return L!=""}).map(function(L){var U=!1;if(P.map(function(F){if(F.dest==L){U=!0;return}}),!U){var h;(h=$.current)===null||h===void 0||h.add({dest:L,permission:"write",inImage:!0})}})},addUserVolumeItem:function(I,G){var B,P=(B=$.current)===null||B===void 0?void 0:B.getList(),L=!1;if(P==null||P.map(function(h){if(h.dest==G){L=!0;return}}),!L){var U;(U=$.current)===null||U===void 0||U.add({host:I,dest:G})}}}}),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(E.Z,{title:"\u81EA\u5B9A\u4E49\u6302\u8F7D\u6216\u662F\u5B58\u50A8\u5377",tooltip:"\u6302\u8F7D\u53EF\u4EE5\u662F\u5BBF\u4E3B\u673A\u7684\u76EE\u5F55\u6216\u662F\u6587\u4EF6\uFF0C\u4E5F\u53EF\u4EE5\u6307\u5B9A\u5B58\u50A8\u5377\u540D\uFF08\u81EA\u52A8\u65B0\u5EFA\uFF09\u3002",headerBordered:!0,direction:"column",children:(0,n.jsx)(De.u,{actionRef:$,name:"volumes",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u6620\u5C04\u76EE\u5F55"},copyIconProps:!1,min:0,children:function(I,G,B){var P=B.getCurrentRowData();return(0,n.jsxs)(g.UW,{children:[(0,n.jsxs)(f.Z.Compact,{children:[(0,n.jsx)(o.Z,{label:"\u5BBF\u4E3B\u673A\u6587\u4EF6\u3001\u76EE\u5F55\u6216\u5B58\u50A8\u5377",name:"host",width:j.showInDrawer?"sm":"md"}),(0,n.jsx)(Ve.Z,{label:" ",valueEnum:{write:"\u8BFB\u5199",readonly:"\u53EA\u8BFB"},initialValue:"write",name:"permission"})]}),(0,n.jsx)(o.Z,{label:"\u5BB9\u5668\u5185\u8DEF\u5F84",name:"dest",width:j.showInDrawer?"sm":"md",required:!0,rules:[{required:!0}],disabled:j.disabledUserVolumeDest||P.inImage})]})}})})})}),cn=dn,mn=e(2831),Fe=e(52688),en=e(86125),_n=e(44349);function vn(j){var J,$=(0,t.useState)(),Q=D()($,2),I=Q[0],G=Q[1];return(0,t.useEffect)(function(){(0,mn.aF)().then(function(B){return G(B.data.info)})},[]),(0,n.jsxs)(E.Z,{children:[(0,n.jsx)(o.Z,{label:"\u5171\u4EAB\u5185\u5B58\u5927\u5C0F - /dev/shm",name:"shmsize",initialValue:"64M",tooltip:"0 \u4E3A\u4F7F\u7528\u9ED8\u8BA464M\uFF0C\u914D\u7F6E\u65F6\u8BF7\u9644\u52A0\u5355\u4F4D\uFF0C\u4F8B\u5982\uFF1A1G"}),(0,n.jsx)(Z.Z,{label:"\u6700\u5927Cpu\u914D\u989D",name:"cpus",tooltip:"0 \u4E3A\u4E0D\u9650\u5236",children:(0,n.jsx)(en.Z,{step:.1,max:I==null?void 0:I.NCPU,marks:{0:"0",.5:"0.5\u6838",1:"1\u6838",1.5:"1.5\u6838",2:"2\u6838",4:"4\u6838",6:"6\u6838",8:"8\u6838"}})}),(0,n.jsx)(Z.Z,{label:"\u6700\u5927\u5185\u5B58\u914D\u989D",name:"memory",tooltip:"0 \u4E3A\u4E0D\u9650\u5236",children:(0,n.jsx)(en.Z,{step:256,max:Math.round(((J=I==null?void 0:I.MemTotal)!==null&&J!==void 0?J:0)/1024/1024),marks:{0:"0",1024:"1G",2048:"2G",3072:"3G",4096:"4G"}})}),(0,n.jsx)(Ve.Z,{label:"\u65E5\u5FD7\u7C7B\u578B",name:["log","driver"],tooltip:"\u9ED8\u8BA4\u4F7F\u7528 json-file \u9A71\u52A8\u7531 docker \u7EDF\u4E00\u7BA1\u7406\u3002\u91C7\u7528 journal \u65F6\u65E5\u5FD7\u5C06\u6765\u5BBF\u4E3B\u673A\u7BA1\u7406",initialValue:"json-file",valueEnum:{"json-file":"json-file",journald:"journal (\u5BBF\u4E3B\u9700\u8981\u5B89\u88C5journal\u670D\u52A1)"}}),(0,n.jsx)(b.Z,{name:["log"],children:function(P){var L=P.log;if(L.driver=="json-file")return(0,n.jsxs)(g.UW,{children:[(0,n.jsx)(o.Z,{label:"\u65E5\u5FD7\u5207\u5272\u5927\u5C0F",name:["log","maxSize"],placeholder:"\u4F8B\u5982\uFF1A10k,5M",tooltip:"\u9ED8\u8BA4 Docker \u5E76\u4E0D\u4F1A\u81EA\u52A8\u5207\u5272\u65E5\u5FD7"}),(0,n.jsx)(o.Z,{tooltip:"\u9ED8\u8BA4 Docker \u5E76\u4E0D\u4F1A\u81EA\u52A8\u6E05\u7406\u65E5\u5FD7\u6587\u4EF6",label:"\u4FDD\u7559\u65E5\u5FD7\u6587\u4EF6\u6570",name:["log","maxFile"],placeholder:"\u4F8B\u5982\uFF1A10"})]})}}),(0,n.jsx)(_n.Z,{name:"device",label:"\u5173\u8054\u8BBE\u5907",hideCopyButton:!0,showAddButton:!0,items:[{label:"\u5BBF\u4E3B\u673A\u8DEF\u5F84",name:"host",width:"md",placeholder:"\u4F8B\u5982\uFF1A/dev/tty0"},{label:"\u5BB9\u5668\u5185\u8DEF\u5F84",name:"dest",width:"md",placeholder:"\u4F8B\u5982\uFF1A/dev/tty0"}]}),(0,n.jsxs)(de.Z,{children:[(0,n.jsx)(l.Z,{span:4,children:(0,n.jsx)(Fe.Z,{label:"\u4F7F\u7528 Gpu",name:["gpus","enable"]})}),(0,n.jsx)(l.Z,{span:20,children:(0,n.jsx)(b.Z,{name:["gpus"],children:function(P){var L=P.gpus;if(L&&L.enable)return(0,n.jsx)(Ve.Z,{mode:"tags",label:"\u8BBE\u5907\u5217\u8868",name:["gpus","device"],placeholder:"\u914D\u7F6E\u4F7F\u7528\u8BBE\u5907id\u6216\u662Fuuid\uFF0C\u4E0D\u586B\u6240\u4E3A\u6240\u6709\u8BBE\u5907"})}})})]}),(0,n.jsx)(b.Z,{name:["gpus"],children:function(P){var L=P.gpus;if(L&&L.enable)return(0,n.jsx)(Ve.Z,{label:"\u8BA1\u7B97\u80FD\u529B",name:["gpus","capabilities"],mode:"multiple",fieldProps:{allowClear:!0},options:[{label:"compute - \u8BA1\u7B97\u80FD\u529B",value:"compute"},{label:"compat32 - \u517C\u5BB932\u4F4D",value:"compat32"},{label:"graphics - \u56FE\u5F62\u5904\u7406\u80FD\u529B",value:"graphics"},{label:"utility - \u76D1\u63A7\u548C\u7BA1\u7406\u80FD\u529B",value:"utility"},{label:"video - \u89C6\u9891\u5904\u7406\u80FD\u529B",value:"video"},{label:"display - \u663E\u793A\u56FE\u5F62\u754C\u9762\u80FD\u529B",value:"display"}]})}})]})}function fn(){return(0,n.jsx)(E.Z,{title:"\u5BB9\u5668\u6807\u7B7E",children:(0,n.jsx)(De.u,{name:"label",label:"",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u6807\u7B7E"},copyIconProps:!1,min:0,children:(0,n.jsxs)(g.UW,{children:[(0,n.jsx)(o.Z,{width:"md",name:"name",label:"\u540D\u79F0",placeholder:""}),(0,n.jsx)(o.Z,{width:"md",name:"value",label:"\u503C",placeholder:""})]})})})}var hn=e(44771),pn=e(86615),wn="default",Un="user";function En(j){return(0,n.jsx)(Z.Z,{label:j.label,tooltip:j.tooltip,children:(0,n.jsxs)(f.Z.Compact,{block:!0,children:[(0,n.jsx)(pn.Z.Group,{radioType:"button",name:[j.name,"useDefault"],options:[{label:"\u4F7F\u7528\u9ED8\u8BA4",value:!0},{label:"\u81EA\u5B9A\u4E49",value:!1}]}),(0,n.jsx)(b.Z,{name:[j.name],children:function($){return $[j.name]&&$[j.name].useDefault?(0,n.jsx)(o.Z,{name:[j.name,"default"],disabled:!0,placeholder:"\u672A\u8BBE\u7F6E"}):(0,n.jsx)(o.Z,{name:[j.name,"value"]})}})]})})}var He=En,$e=e(24963);function Cn(){var j=(0,t.useContext)($e.Z),J=j.message,$=j.lang;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(E.Z,{children:[(0,n.jsx)(hn.Z,{label:"\u91CD\u542F\u7B56\u7565"}),(0,n.jsxs)(g.UW,{children:[(0,n.jsx)(Fe.Z,{fieldProps:{onChange:function(I){I&&J.warning($("app.create.privilegedNotice"))}},name:"privileged",tooltip:"--privileged",label:"\u8D4B\u4E88\u5BB9\u5668Root\u6743\u9650",initialValue:!1}),(0,n.jsx)(Fe.Z,{name:"autoRemove",tooltip:"--rm",label:"\u505C\u6B62\u540E\u81EA\u52A8\u5220\u9664",initialValue:!1}),(0,n.jsx)(Fe.Z,{fieldProps:{onChange:function(I){I&&J.warning($("app.create.hostPidNotice"))}},tooltip:"--pid host",name:"hostPid",label:"\u5173\u8054\u5BBF\u4E3B\u673APid",initialValue:!1})]}),(0,n.jsx)(He,{label:"\u5DE5\u4F5C\u76EE\u5F55",tooltip:"\u9ED8\u8BA4\u4F7F\u7528\u955C\u50CF\u4E2D\u6307\u5B9A\u7684\u5DE5\u4F5C\u76EE\u5F55",name:"workDir"}),(0,n.jsx)(He,{label:"User",tooltip:"\u5728\u5BB9\u5668\u4E2D\u8FD0\u884C\u547D\u4EE4\u7684\u7528\u6237",name:"user"}),(0,n.jsx)(He,{label:"Command",tooltip:"\u542F\u52A8\u5BB9\u5668\u65F6\u8FD0\u884C\u7684\u547D\u4EE4\uFF0C\u4EE5\u7A7A\u683C\u5206\u9694",name:"command"}),(0,n.jsx)(He,{label:"Entrypoint",tooltip:"\u65E0\u6CD5\u8986\u76D6\u955C\u50CF\u4E2D\u5DF2\u7ECF\u6307\u5B9A\u7684 Entrypoint \u547D\u4EE4",name:"entrypoint"})]})})}var gn=e(91845),nn=e(62597),tn=e(82346),jn=e(46442),Pn=(0,t.forwardRef)(function(j,J){var $=(0,t.useContext)($e.Z),Q=$.notice,I=(0,t.useRef)(),G=(0,t.useRef)();(0,t.useImperativeHandle)(J,function(){return{}});var B=function(L){var U,h,F=!1,q=(U=(h=I.current)===null||h===void 0?void 0:h.getList())!==null&&U!==void 0?U:[];if(q.map(function(Y){Y.name==L.name&&(F=!0)}),!F){var V;(V=I.current)===null||V===void 0||V.add(L)}};return(0,n.jsxs)(E.Z,{title:"\u5173\u8054\u7F51\u7EDC",headerBordered:!0,extra:(0,n.jsx)(f.Z,{children:j.showUseBridgeNetwork&&(0,n.jsx)(Fe.Z,{name:"useBridgeNetwork",fieldProps:{checkedChildren:"\u5173\u8054 Bridge \u7F51\u7EDC",unCheckedChildren:"\u5173\u8054 Bridge \u7F51\u7EDC"}},"useBridgeNetwork")}),children:[(0,n.jsx)(De.u,{name:"network",actionRef:I,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u7F51\u7EDC"},actionGuard:{beforeAddRow:function(L,U){var h;return!j.siteName||j.siteName==""||typeof j.siteName=="undefined"?(Q.error("\u8BF7\u8F93\u5165\u7AD9\u70B9\u6807\u8BC6"),!1):((h=G.current)===null||h===void 0||h.show(),!1)}},copyIconProps:!1,min:0,itemRender:function(L,U){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(g.UW,{children:[(0,n.jsx)(o.Z,{label:"\u7F51\u7EDC\u540D\u79F0",name:"name",width:"md",disabled:!0,fieldProps:{value:U.record.name}}),(0,n.jsx)(Z.Z,{label:"\u8BBF\u95EEHostname",name:"alise",children:U.record.alise!=""&&(0,n.jsx)(x.Z.Text,{code:!0,copyable:!0,children:U.record.alise})}),(0,n.jsx)(Z.Z,{label:" ",children:L.action})]}),(0,n.jsx)(g.UW,{children:(0,n.jsx)(o.Z,{label:"\u6307\u5B9AIpV4",name:"ipV4",width:"md",disabled:U.record.name=="bridge",fieldProps:{addonAfter:U.record.subnet}})})]})}}),(0,n.jsx)(jn.Z,{ref:G,onSelect:function(L){B({name:L.Name,alise:[""],subnet:L.IPAM.Config[0].Subnet})}})]})}),xn=Pn,Bn=(0,t.forwardRef)(function(j,J){var $=(0,t.useState)(""),Q=D()($,2),I=Q[0],G=Q[1],B=(0,t.useRef)(),P=(0,t.useContext)(z.Z),L=P.createFormRef;return(0,t.useImperativeHandle)(J,function(){return{setExposePort:function(h){if(h){var F,q,V=(F=(q=B.current)===null||q===void 0?void 0:q.getList())!==null&&F!==void 0?F:[];Object.keys(h).map(function(Y){var O=!1;if(V.map(function(he){he.dest==Y&&(O=!0)}),!O){var ee;(ee=B.current)===null||ee===void 0||ee.add({host:"",dest:Y})}})}},setHostname:function(h){G(h)},addPortItem:function(h,F){var q,V=(q=B.current)===null||q===void 0?void 0:q.getList(),Y=!1;if(V==null||V.map(function(ee){if(ee.host==h){Y=!0;return}}),!Y){var O;(O=B.current)===null||O===void 0||O.add({host:String(h),dest:String(F)})}}}}),(0,n.jsx)(E.Z,{title:"\u7ED1\u5B9A\u7AEF\u53E3",tooltip:"\u8BBF\u95EE\u7AEF\u53E3\u7559\u7A7A\u65F6\u968F\u673A\u751F\u6210\u7AEF\u53E3\uFF0C\u5168\u90E8\u5220\u9664\u5219\u8868\u793A\u4E0D\u66B4\u9732\u7AEF\u53E3",headerBordered:!0,extra:(0,n.jsxs)(f.Z,{children:[j.showBindHost&&(0,n.jsx)(Fe.Z,{name:"useHostNetwork",fieldProps:{checkedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",unCheckedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",onChange:function(h){if(h){var F;(F=L.current)===null||F===void 0||F.setFieldsValue({bindIpV6:!1,publishAllPorts:!1})}}}}),j.showBindIpV6&&(0,n.jsx)(b.Z,{name:["siteName","useHostNetwork"],children:function(h){var F=h.useHostNetwork;return(0,n.jsx)(Fe.Z,{name:"publishAllPorts",fieldProps:{checkedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3",unCheckedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3"},disabled:F},"publishAllPorts")}}),j.showBindIpV6&&(0,n.jsx)(b.Z,{name:["siteName","useHostNetwork"],children:function(h){var F=h.useHostNetwork;return(0,n.jsx)(Fe.Z,{name:"bindIpV6",fieldProps:{checkedChildren:"IpV6",unCheckedChildren:"IpV6"},disabled:F},"bindIpV6")}})]}),children:(0,n.jsx)(b.Z,{name:["useHostNetwork","bindIpV6","publishAllPorts"],children:function(h){var F=h.useHostNetwork,q=h.bindIpV6,V=h.publishAllPorts;if(!F&&!V)return(0,n.jsx)(De.u,{name:"ports",actionRef:B,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BF9\u5916\u90E8\u8BBF\u95EE"},min:0,copyIconProps:!1,children:(0,n.jsxs)(g.UW,{children:[(0,n.jsx)(o.Z,{width:j.showInDrawer?"sm":"md",name:"host",label:"\u5916\u90E8\u8BBF\u95EE\u7AEF\u53E3",tooltip:"\u5BF9\u5916\u8BBF\u95EE\u53EF\u4EE5\u901A\u8FC7\u6DFB\u52A0\u8BBF\u95EE\u7AEF\u53E3\u6216\u662F\u521B\u5EFA\u5B8C\u6210\u540E\u5BF9\u5BB9\u5668\u7ED1\u5B9A\u57DF\u540D",placeholder:"\u7559\u7A7A\u5C06\u4F7F\u7528\u968F\u673A\u7AEF\u53E3\uFF0C\u7ED1\u5B9AIpV6\u5FC5\u586B",required:q,rules:[{required:q}]}),(0,n.jsx)(o.Z,{label:"\u5BB9\u5668\u5185\u7AEF\u53E3",width:j.showInDrawer?"sm":"md",name:"dest",placeholder:"\u6784\u5EFA\u65F6 Expose \u6307\u5B9A\u7684\u7AEF\u53E3",required:!0,rules:[{required:!0}]})]})})}})})}),Dn=Bn,Se=e(52255);function Fn(){var j=(0,t.useRef)(),J=function(I){var G,B,P=!1,L=(G=(B=j.current)===null||B===void 0?void 0:B.getList())!==null&&G!==void 0?G:[];if(L.map(function(h){h.name==I.name&&(P=!0)}),!P){var U;(U=j.current)===null||U===void 0||U.add(I)}},$=function(I){var G,B,P=!1,L=(G=(B=j.current)===null||B===void 0?void 0:B.getList())!==null&&G!==void 0?G:[];L.map(function(U,h){if(U.name==I){var F;(F=j.current)===null||F===void 0||F.remove(h)}})};return(0,n.jsx)(E.Z,{title:"\u5173\u8054\u5BBF\u4E3B\u673A\u7F51\u7EDC\u5185\u4E3B\u673A",tooltip:"\u5BB9\u5668\u5185\u5982\u679C\u9700\u8981\u8BF7\u6C42\u5BBF\u4E3B\u673A\u6240\u5728\u7684\u7F51\u7EDC\u4E2D\u7684\u4E3B\u673A\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6B64\u914D\u7F6E\u5C06Ip\u6CE8\u5165\u5230\u5BB9\u5668\u4E2D",extra:(0,n.jsx)(f.Z,{children:(0,n.jsx)(Fe.Z,{name:"enableBindHost",fieldProps:{checkedChildren:"\u7ED1\u5B9A\u5BBF\u4E3B\u673AIp",unCheckedChildren:"\u7ED1\u5B9A\u5BBF\u4E3B\u673AIp",onChange:function(I){I?J({name:"host.dpanel.local",value:"host-gateway"}):$("host.dpanel.local")}}})}),children:(0,n.jsx)(De.u,{name:"extraHosts",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BBF\u4E3B\u673A\u7F51\u7EDC\u5173\u8054"},actionRef:j,copyIconProps:!1,min:0,children:(0,n.jsxs)(g.UW,{children:[(0,n.jsx)(o.Z,{width:"md",name:"name",label:"Hostname",placeholder:""}),(0,n.jsx)(o.Z,{width:"md",name:"value",label:"ip",placeholder:""})]})})})}var Ye=e(90672),An=(0,t.forwardRef)(function(j,J){return(0,t.useImperativeHandle)(J,function(){return{}}),(0,n.jsxs)(E.Z,{title:"\u7F51\u7EDC\u914D\u7F6E",children:[(0,n.jsxs)(g.UW,{children:[(0,n.jsx)(o.Z,{label:"\u914D\u7F6E ipV4 \u5730\u5740",name:["ipV4","address"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u5730\u5740\uFF0C\u4F8B\u5982 192.168.1.5",placeholder:"192.168.1.5"}),(0,n.jsx)(b.Z,{name:["ipV4"],children:function(Q){var I=Q.ipV4;return(0,n.jsx)(o.Z,{label:"\u914D\u7F6E ipV4 \u5B50\u7F51",name:["ipV4","subnet"],width:"md",required:I&&I.address,tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u6240\u5728\u7684\u5B50\u7F51\uFF0C\u4F8B\u5982 192.168.1.0/24",placeholder:"192.168.1.0/24",rules:[{required:I&&I.address}]})}}),(0,n.jsx)(o.Z,{label:"\u914D\u7F6E ipV4 \u7F51\u5173",name:["ipV4","gateway"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u7684\u7F51\u5173\uFF0C\u4F8B\u5982 192.168.1.1",placeholder:"192.168.1.1"}),(0,n.jsx)(Fe.Z,{label:"\u81EA\u5B9A\u4E49ipV6",name:"enableIpV6Address"})]}),(0,n.jsx)(b.Z,{name:["enableIpV6Address"],children:function(Q){var I=Q.enableIpV6Address;if(I)return(0,n.jsxs)(g.UW,{children:[(0,n.jsx)(o.Z,{label:"\u914D\u7F6E ipV6 \u5730\u5740",name:["ipV6","address"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipV6\u5730\u5740\uFF0C\u4F8B\u5982 2001:db8::5",placeholder:"2001:db8::5"}),(0,n.jsx)(b.Z,{name:["ipV6"],children:function(B){var P=B.ipV6;return(0,n.jsx)(o.Z,{label:"\u914D\u7F6E ipV6 \u5B50\u7F51",name:["ipV6","subnet"],width:"md",required:P&&P.address,tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u6240\u5728\u7684\u5B50\u7F51\uFF0C\u4F8B\u5982 2001:db8::/48",placeholder:"2001:db8::/48",rules:[{required:P&&P.address}]})}}),(0,n.jsx)(o.Z,{label:"\u914D\u7F6E ipV6 \u7F51\u5173",name:["ipV6","gateway"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipV6\u7684\u7F51\u5173\uFF0C\u4F8B\u5982 2001:db8::1",placeholder:"2001:db8::1"})]})}}),(0,n.jsx)(Ye.Z,{label:"DNS\u914D\u7F6E",name:"dns",placeholder:"\u8BF7\u6307\u5B9Adns\u5730\u5740\uFF0C\u4F8B\u5982\uFF1A8.8.8.8\uFF0C\u4E00\u884C\u6DFB\u4E00\u6761dns\u5730\u5740"})]})}),In=An,ze=e(31199),On=e(86250);function bn(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E.Z,{title:"\u9644\u52A0\u6267\u884C\u811A\u672C",headerBordered:!0,subTitle:"",children:(0,n.jsx)(Ye.Z,{label:"\u5BB9\u5668\u521B\u5EFA\u540E\u6267\u884C\u811A\u672C",name:["hook","containerCreate"],placeholder:"\u5BB9\u5668\u5728\u521B\u5EFA\u540E\u6267\u884C\u7684\u811A\u672C\uFF0C\u6B64\u811A\u672C\u5E76\u4E0D\u4F1A\u5F71\u54CD entrypoint \u53CA command\u3002\u4F8B\u5982\uFF1Als -al && touch abc.txt && apt update"})}),(0,n.jsxs)(E.Z,{title:"\u5065\u5EB7\u68C0\u67E5",headerBordered:!0,children:[(0,n.jsxs)(On.Z,{gap:20,justify:"start",children:[(0,n.jsx)(ze.Z,{label:"\u91CD\u590D\u95F4\u9694\u65F6\u95F4\uFF08\u79D2\uFF09",name:["healthcheck","interval"],initialValue:30}),(0,n.jsx)(ze.Z,{label:"\u8D85\u65F6\u5931\u8D25\u65F6\u95F4\uFF08\u79D2\uFF09",name:["healthcheck","timeout"],initialValue:10}),(0,n.jsx)(ze.Z,{label:"\u5931\u8D25\u91CD\u590D\u6B21\u6570",name:["healthcheck","retries"],initialValue:3}),(0,n.jsx)(Ve.Z,{width:"sm",label:"\u811A\u672C\u6267\u884C\u73AF\u5883",initialValue:"CMD",name:["healthcheck","shellType"],valueEnum:{CMD:"\u5728 Docker \u73AF\u5883\u6267\u884C","CMD-SHELL":"\u5728\u5BB9\u5668\u5185\u6267\u884C"}})]}),(0,n.jsx)(Ye.Z,{label:"\u6267\u884C\u811A\u672C",name:["healthcheck","cmd"],placeholder:"\u914D\u7F6E\u5BB9\u5668\u5065\u5EB7\u68C0\u67E5\u811A\u672C\uFF0C\u4F8B\u5982\uFF1Acurl -f http://localhost:8080/ || exit 1"})]})]})}var Mn=e(74763),rn=e(2487),Rn=[{name:"ALL"},{name:"AUDIT_CONTROL"},{name:"AUDIT_WRITE",default:!0},{name:"BLOCK_SUSPEND"},{name:"CHOWN",default:!0},{name:"DAC_OVERRIDE",default:!0},{name:"DAC_READ_SEARCH"},{name:"FOWNER",default:!0},{name:"FSETID",default:!0},{name:"IPC_LOCK"},{name:"IPC_OWNER"},{name:"KILL",default:!0},{name:"LEASE"},{name:"LINUX_IMMUTABLE"},{name:"MAC_ADMIN"},{name:"MAC_OVERRIDE"},{name:"MKNOD",default:!0},{name:"NET_ADMIN"},{name:"NET_BIND_SERVICE",default:!0},{name:"NET_BROADCAST"},{name:"NET_RAW",default:!0},{name:"SETFCAP",default:!0},{name:"SETGID",default:!0},{name:"SETPCAP",default:!0},{name:"SETUID",default:!0},{name:"SYSLOG"},{name:"SYS_ADMIN"},{name:"SYS_BOOT"},{name:"SYS_CHROOT",default:!0},{name:"SYS_MODULE"},{name:"SYS_NICE"},{name:"SYS_PACCT"},{name:"SYS_PTRACE"},{name:"SYS_RAWIO"},{name:"SYS_RESOURCE"},{name:"SYS_TIME"},{name:"SYS_TTY_CONFIG"}],Zn=(0,t.forwardRef)(function(j,J){var $=(0,t.useContext)($e.Z),Q=$.lang,I=(0,t.useState)(null),G=D()(I,2),B=G[0],P=G[1],L=(0,t.useContext)(z.Z),U=L.createFormRef;return(0,t.useImperativeHandle)(J,function(){return{}}),(0,n.jsx)(E.Z,{children:(0,n.jsx)(rn.Z,{grid:{gutter:10,xs:3,sm:3,md:4,lg:4,xl:4,xxl:6},dataSource:Rn,renderItem:function(F,q){var V;return(0,n.jsx)(rn.Z.Item,{children:(0,n.jsx)(Fe.Z,{fieldProps:{onChange:function(O){F.name=="ALL"&&P(O)}},disabled:F.name!="ALL"&&((0,Mn.k)(B)?(V=U.current)===null||V===void 0?void 0:V.getFieldValue(["capAdd","ALL"]):B),initialValue:F.default,name:["capAdd",F.name],tooltip:Q("app.create.cap."+F.name.toLocaleLowerCase()),label:F.name})},q)}})})}),Tn=Zn,Ne="update",an="copy",Xe="new";function yn(){var j,J,$,Q=(0,t.useContext)($e.Z),I=Q.loading,G=Q.notice,B=(0,t.useContext)(z.Z),P=B.createFormRef,L=B.volumeListRef,U=B.domainRef,h=B.createEnvRef,F=B.createLinkRef,q=(0,t.useState)(Xe),V=D()(q,2),Y=V[0],O=V[1],ee=(0,tn.useSearchParams)(),he=D()(ee,2),oe=he[0],le=he[1],Ee=(0,tn.useNavigate)(),xe=(0,t.useState)("basic"),Ae=D()(xe,2),Ce=Ae[0],Be=Ae[1],Re=parseInt((j=oe.get("id"))!==null&&j!==void 0?j:""),Ze=(J=oe.get("containerId"))!==null&&J!==void 0?J:"",ke=($=oe.get("imageId"))!==null&&$!==void 0?$:"";return(0,t.useEffect)(function(){if(Ze||Re)I.show(),(0,nn.iE)({md5:Ze,id:Re}).then(function(){var i=p()(u()().mark(function ve(s){var we,Ue,ae,Le,Ge,Oe,Ke,Je,Qe;return u()().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:if(ae={info:{}},!s.data.env.imageName){be.next=11;break}return be.prev=2,be.next=5,(0,y.YU)({md5:s.data.env.imageName});case 5:Le=be.sent,ae=Le.data,be.next=11;break;case 9:be.prev=9,be.t0=be.catch(2);case 11:oe.get("op")==an?O(an):O(Ne),s.data.env.network&&s.data.env.network.map(function(ue){return!ue.alise&&ue.name!="bridge"&&(ue.alise=[s.data.siteName+".pod.dpanel.local"]),ue}),s.data.env.ports&&s.data.env.ports.map(function(ue){return ue.host=="0"&&(ue.host=""),ue}),Ge=s.data.env.bindIpV6,s.data.containerInfo.Info&&s.data.containerInfo.Info.NetworkSettings.Networks&&Object.keys(s.data.containerInfo.Info.NetworkSettings.Networks).map(function(ue){if(s.data.env.network&&(s.data.env.network=s.data.env.network.map(function(qe){return ue==qe.name&&(qe.subnet=s.data.containerInfo.Info.NetworkSettings.Networks[ue].IPAddress+"/"+s.data.containerInfo.Info.NetworkSettings.Networks[ue].IPPrefixLen),qe})),s.data.containerInfo.Info.NetworkSettings.Networks[ue].IPv6Gateway!=""&&(Ge=!0),ue=="bridge"){var We;(We=P.current)===null||We===void 0||We.setFieldValue("useBridgeNetwork",!0)}}),s.data.env.extraHosts&&s.data.env.extraHosts.map(function(ue){if(ue.value=="host-gateway"){var We;(We=P.current)===null||We===void 0||We.setFieldValue("enableBindHost",!0)}}),Oe=s.data.env.ports,s.data.env.ports&&(Oe=s.data.env.ports.map(function(ue){return ue.host=(ue.hostIp?ue.hostIp+":":"")+ue.host,ue})),(we=P.current)===null||we===void 0||we.setFieldsValue({imageName:s.data.env.imageName,privileged:s.data.env.privileged,bindIpV6:s.data.env.useHostNetwork?!1:Ge,useHostNetwork:s.data.env.useHostNetwork,publishAllPorts:s.data.env.useHostNetwork?!1:s.data.env.publishAllPorts,workDir:{value:s.data.env.workDir,useDefault:!s.data.env.workDir,default:ae&&ae.info.Config&&ae.info.Config.WorkingDir},user:{value:s.data.env.user,useDefault:!s.data.env.user,default:ae&&ae.info.Config&&ae.info.Config.User},command:{value:s.data.env.command,useDefault:!s.data.env.command,default:ae&&ae.info.Config&&ae.info.Config.Cmd&&ae.info.Config.Cmd.join(" ")},entrypoint:{value:s.data.env.entrypoint,useDefault:!s.data.env.entrypoint,default:ae&&ae.info.Config&&ae.info.Config.Entrypoint&&ae.info.Config.Entrypoint.join(" ")},shmsize:(Ue=s.data.env.shmsize)!==null&&Ue!==void 0?Ue:"64M",cpus:s.data.env.cpus,memory:s.data.env.memory,environment:s.data.env.environment,label:s.data.env.label,volumes:s.data.env.volumes,ports:Oe,links:s.data.env.links,network:s.data.env.network,restart:s.data.env.restart,extraHosts:s.data.env.extraHosts,autoRemove:s.data.env.autoRemove,log:s.data.env.log,dns:s.data.env.dns&&s.data.env.dns.join(`
`),ipV4:s.data.env.ipV4,ipV6:s.data.env.ipV6,gpus:s.data.env.gpus,device:s.data.env.device,hook:s.data.env.hook,hostPid:s.data.env.hostPid,capAdd:s.data.env.capAdd&&Object.fromEntries(s.data.env.capAdd.map(function(ue){return[ue,!0]}))}),s.data.env.ipV6&&((Ke=P.current)===null||Ke===void 0||Ke.setFieldValue("enableIpV6Address",!0)),s.data.env.healthcheck&&s.data.env.healthcheck.cmd&&s.data.env.healthcheck.cmd!=""&&((Je=P.current)===null||Je===void 0||Je.setFieldsValue({healthcheck:s.data.env.healthcheck})),oe.get("op")==Ne&&((Qe=P.current)===null||Qe===void 0||Qe.setFieldsValue({siteTitle:s.data.siteTitle,siteName:s.data.siteName}));case 23:case"end":return be.stop()}},ve,null,[[2,9]])}));return function(ve){return i.apply(this,arguments)}}()).finally(function(){I.destroy()});else{var Ie,re;O(Xe),(Ie=P.current)===null||Ie===void 0||Ie.resetFields(),(re=P.current)===null||re===void 0||re.setFieldValue("useBridgeNetwork",!0)}},[oe]),(0,n.jsx)(A._z,{children:(0,n.jsx)(E.Z,{direction:"column",gutter:[0,10],children:(0,n.jsxs)(c.A,{submitter:{render:function(re,i){return(0,n.jsx)(v.S,{children:i})}},formRef:P,onFinish:function(){var Ie=p()(u()().mark(function re(i){var ve,s,we,Ue,ae,Le;return u()().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(Le={siteTitle:i.siteTitle,siteName:i.siteName,hostname:i.hostname,imageName:i.imageName,environment:i.environment,links:i.links,ports:i.ports,volumes:i.volumes,network:(ve=i.network)!==null&&ve!==void 0?ve:[],privileged:(s=i.privileged)!==null&&s!==void 0?s:!1,autoRemove:(we=i.autoRemove)!==null&&we!==void 0?we:!1,restart:i.restart,cpus:i.cpus,memory:i.memory,shmsize:(Ue=i.shmsize)!==null&&Ue!==void 0?Ue:0,workDir:i.workDir&&!i.workDir.useDefault?i.workDir.value:"",user:i.user&&!i.user.useDefault?i.user.value:"",command:i.command&&!i.command.useDefault?i.command.value:"",entrypoint:i.entrypoint&&!i.entrypoint.useDefault?i.entrypoint.value:"",useHostNetwork:i.useHostNetwork,bindIpV6:i.bindIpV6,log:i.log,dns:i.dns&&i.dns!=""?i.dns.split(`
`):[],label:i.label,publishAllPorts:i.publishAllPorts,extraHosts:i.extraHosts,ipV4:i.ipV4,ipV6:i.ipV6,device:i.device,gpus:i.gpus,hook:i.hook,hostPid:i.hostPid,capAdd:i.capAdd?Object.keys(i.capAdd).map(function(Ke){return Ke}):[],useBridgeNetwork:(ae=i.useBridgeNetwork)!==null&&ae!==void 0?ae:!0},!(!i.useBridgeNetwork&&!i.useHostNetwork&&(!i.network||i.network.length==0))){Oe.next=4;break}return G.error("\u4E0D\u52A0\u5165 Bridge \u7F51\u7EDC\u65F6\uFF0C\u5FC5\u987B\u6307\u5B9A\u4E00\u4E2A\u81EA\u5B9A\u4E49\u7F51\u7EDC"),Oe.abrupt("return",!1);case 4:return i.useBridgeNetwork&&Le.network.push({name:"bridge",alise:[],ipV4:""}),i.healthcheck&&i.healthcheck.cmd&&i.healthcheck.cmd!=""&&(Le.healthcheck=i.healthcheck),Ze&&Y==Ne&&(Le.containerId=Ze),Oe.next=9,(0,nn.$G)(Le);case 9:return Ee("/app/list"),Oe.abrupt("return",!0);case 11:case"end":return Oe.stop()}},re)}));return function(re){return Ie.apply(this,arguments)}}(),children:[(0,n.jsxs)(E.Z,{title:"\u57FA\u7840\u4FE1\u606F",headerBordered:!0,children:[(0,n.jsx)(o.Z,{name:"siteTitle",label:"\u5BB9\u5668\u63CF\u8FF0",fieldProps:{onChange:function(re){var i="";if(re.target.value&&Y!=Ne){var ve,s=(0,gn.N9)(re.target.value.trim(),{toneType:"none",type:"array"});i=s.join(""),(ve=P.current)===null||ve===void 0||ve.setFieldValue("siteName",i)}}},placeholder:"\u8BF7\u8F93\u5165\u5BB9\u5668\u63CF\u8FF0\u540D\u79F0"}),(0,n.jsxs)(g.UW,{children:[(0,n.jsx)(o.Z,{width:"lg",name:"siteName",label:"\u5BB9\u5668\u6807\u8BC6",tooltip:"\u5BB9\u5668\u552F\u4E00\u6807\u8BC6\uFF0C\u7528\u4E8E\u6807\u8BC6\u5BB9\u5668\u548C\u5185\u90E8\u8BBF\u95EE",required:!0,disabled:Y==Ne,rules:[{required:!0}],placeholder:"\u8BF7\u8F93\u5165\u5BB9\u5668\u6807\u8BC6\u540D\u79F0"}),(0,n.jsx)(o.Z,{label:"Hostname",name:"hostname",width:"lg"})]}),(0,n.jsx)(_e,{redeploy:Y!=Xe,fromImageId:ke})]}),(0,n.jsx)(m.Z,{offsetTop:50,children:(0,n.jsx)(E.Z,{style:{marginBottom:-20},children:(0,n.jsx)(W.Z,{activeKey:Ce,onChange:function(re){Be(re),window.scrollTo(0,450)},items:[{label:"\u57FA\u672C\u914D\u7F6E",key:"basic"},{label:"\u5173\u8054\u914D\u7F6E",key:"link"},{label:"\u8FD0\u884C\u914D\u7F6E",key:"run-command"},{label:"\u8D44\u6E90\u914D\u7F6E",key:"resource"},{label:"Hook",key:"hook"},{label:"\u80FD\u529B\u914D\u7F6E",key:"cap"},{label:"\u5176\u5B83",key:"other"}]})})}),(0,n.jsxs)(Se.Z,{show:Ce=="basic",children:[(0,n.jsx)(Dn,{ref:U,showBindHost:!0,showBindIpV6:!0}),(0,n.jsx)(on.Z,{showAddButton:!0,showImportButton:!0,showCodeMode:!0,label:"\u73AF\u5883\u53D8\u91CF",ref:h}),(0,n.jsx)(cn,{showDefault:!0,ref:L}),(0,n.jsx)(b.Z,{name:["siteName","useHostNetwork"],children:function(re){var i=re.siteName,ve=re.useHostNetwork;if(!ve)return(0,n.jsx)(In,{})}})]}),(0,n.jsx)(Se.Z,{show:Ce=="link",children:(0,n.jsx)(b.Z,{name:["siteName","useHostNetwork"],children:function(re){var i=re.siteName,ve=re.useHostNetwork;return ve?(0,n.jsx)(a.Z,{showIcon:!0,description:"\u7ED1\u5B9A\u5230\u5BBF\u4E3B\u673A\u7F51\u7EDC\u65F6\uFF0C\u65E0\u6CD5\u901A\u8FC7 Docker \u5173\u8054\u5176\u5B83\u5BB9\u5668\u3002\u8BF7\u4F7F\u7528\u5BBF\u4E3B\u673A\u5185\u7F51IP\u6216\u662F127.0.0.1\u4E92\u8054\u5BB9\u5668\u66B4\u9732\u7AEF\u53E3\u3002"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(sn,{onAddEnv:function(we,Ue){var ae;(ae=h.current)===null||ae===void 0||ae.addEnvItem(we,Ue)},ref:F}),(0,n.jsx)(xn,{showUseBridgeNetwork:!0,siteName:i}),(0,n.jsx)(Fn,{})]})}})}),(0,n.jsx)(Se.Z,{show:Ce=="run-command",children:(0,n.jsx)(Cn,{})}),(0,n.jsx)(Se.Z,{show:Ce=="resource",children:(0,n.jsx)(vn,{})}),(0,n.jsx)(Se.Z,{show:Ce=="hook",children:(0,n.jsx)(bn,{})}),(0,n.jsx)(Se.Z,{show:Ce=="other",children:(0,n.jsx)(fn,{})}),(0,n.jsx)(Se.Z,{show:Ce=="cap",children:(0,n.jsx)(Tn,{})})]},"form")})})}},2831:function(ie,N,e){"use strict";e.d(N,{Ll:function(){return v},aF:function(){return D},d6:function(){return g},u5:function(){return E}});var R=e(15009),u=e.n(R),M=e(99289),p=e.n(M),_=e(82346);function D(){return A.apply(this,arguments)}function A(){return A=p()(u()().mark(function m(){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_.request)("/api/common/home/info",{method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},m)})),A.apply(this,arguments)}function E(){return c.apply(this,arguments)}function c(){return c=p()(u()().mark(function m(){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_.request)("/api/common/home/check-new-version",{method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},m)})),c.apply(this,arguments)}function v(){return o.apply(this,arguments)}function o(){return o=p()(u()().mark(function m(){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_.request)("/api/common/home/usage",{method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},m)})),o.apply(this,arguments)}function g(){return b.apply(this,arguments)}function b(){return b=p()(u()().mark(function m(){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_.request)("/api/common/home/upgrade-script",{method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},m)})),b.apply(this,arguments)}},14946:function(ie,N,e){"use strict";e.d(N,{CI:function(){return v},HY:function(){return z},IS:function(){return D},XY:function(){return m},_3:function(){return Z},_x:function(){return g},jR:function(){return E},t9:function(){return a}});var R=e(15009),u=e.n(R),M=e(99289),p=e.n(M),_=e(82346);function D(f){return A.apply(this,arguments)}function A(){return A=p()(u()().mark(function f(S){return u()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,_.request)("/api/app/network/get-detail",{method:"POST",data:S}));case 1:case"end":return d.stop()}},f)})),A.apply(this,arguments)}function E(f){return c.apply(this,arguments)}function c(){return c=p()(u()().mark(function f(S){return u()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,_.request)("/api/app/network/get-list",{method:"POST",data:S}));case 1:case"end":return d.stop()}},f)})),c.apply(this,arguments)}function v(){return o.apply(this,arguments)}function o(){return o=p()(u()().mark(function f(){return u()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,_.request)("/api/app/network/prune",{method:"POST"});case 2:return x.abrupt("return",x.sent);case 3:case"end":return x.stop()}},f)})),o.apply(this,arguments)}function g(f){return b.apply(this,arguments)}function b(){return b=p()(u()().mark(function f(S){return u()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,_.request)("/api/app/network/delete",{method:"POST",data:S});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},f)})),b.apply(this,arguments)}function m(f){return W.apply(this,arguments)}function W(){return W=p()(u()().mark(function f(S){return u()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,_.request)("/api/app/network/create",{method:"POST",data:S});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},f)})),W.apply(this,arguments)}function a(f){return t.apply(this,arguments)}function t(){return t=p()(u()().mark(function f(S){return u()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,_.request)("/api/app/network/disconnect",{method:"POST",data:S});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},f)})),t.apply(this,arguments)}function z(f){return H.apply(this,arguments)}function H(){return H=p()(u()().mark(function f(S){return u()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,_.request)("/api/app/network/connect",{method:"POST",data:S});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},f)})),H.apply(this,arguments)}function Z(f){return r.apply(this,arguments)}function r(){return r=p()(u()().mark(function f(S){return u()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,_.request)("/api/app/network/get-container-list",{method:"POST",data:S}));case 1:case"end":return d.stop()}},f)})),r.apply(this,arguments)}},79245:function(ie,N,e){"use strict";e.d(N,{m:function(){return M},y:function(){return p}});var R=e(64599),u=e.n(R);function M(_){var D=[];if(!_||_=="")return D;var A=_.matchAll(/\$\{(\w+)[:-?=]*(.*?)\}/g),E=u()(A),c;try{for(E.s();!(c=E.n()).done;){var v=c.value;D.push({name:v[1],value:v[2]?v[2].indexOf("-")==0?v[2].substring(1):v[2]:""})}}catch(o){E.e(o)}finally{E.f()}return D}function p(_,D){return!_||!D?!1:(_&D)!==0}},86250:function(ie,N,e){"use strict";e.d(N,{Z:function(){return de}});var R=e(67294),u=e(93967),M=e.n(u),p=e(98423),_=e(98065),D=e(53124),A=e(83559),E=e(83262);const c=["wrap","nowrap","wrap-reverse"],v=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],o=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],g=(l,T)=>{const y=T.wrap===!0?"wrap":T.wrap;return{[`${l}-wrap-${y}`]:y&&c.includes(y)}},b=(l,T)=>{const y={};return o.forEach(C=>{y[`${l}-align-${C}`]=T.align===C}),y[`${l}-align-stretch`]=!T.align&&!!T.vertical,y},m=(l,T)=>{const y={};return v.forEach(C=>{y[`${l}-justify-${C}`]=T.justify===C}),y};function W(l,T){return M()(Object.assign(Object.assign(Object.assign({},g(l,T)),b(l,T)),m(l,T)))}var a=W;const t=l=>{const{componentCls:T}=l;return{[T]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},z=l=>{const{componentCls:T}=l;return{[T]:{"&-gap-small":{gap:l.flexGapSM},"&-gap-middle":{gap:l.flexGap},"&-gap-large":{gap:l.flexGapLG}}}},H=l=>{const{componentCls:T}=l,y={};return c.forEach(C=>{y[`${T}-wrap-${C}`]={flexWrap:C}}),y},Z=l=>{const{componentCls:T}=l,y={};return o.forEach(C=>{y[`${T}-align-${C}`]={alignItems:C}}),y},r=l=>{const{componentCls:T}=l,y={};return v.forEach(C=>{y[`${T}-justify-${C}`]={justifyContent:C}}),y},f=()=>({});var S=(0,A.I$)("Flex",l=>{const{paddingXS:T,padding:y,paddingLG:C}=l,se=(0,E.IX)(l,{flexGapSM:T,flexGap:y,flexGapLG:C});return[t(se),z(se),H(se),Z(se),r(se)]},f,{resetStyle:!1}),x=function(l,T){var y={};for(var C in l)Object.prototype.hasOwnProperty.call(l,C)&&T.indexOf(C)<0&&(y[C]=l[C]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var se=0,C=Object.getOwnPropertySymbols(l);se<C.length;se++)T.indexOf(C[se])<0&&Object.prototype.propertyIsEnumerable.call(l,C[se])&&(y[C[se]]=l[C[se]]);return y},de=R.forwardRef((l,T)=>{const{prefixCls:y,rootClassName:C,className:se,style:ce,flex:me,gap:k,children:ge,vertical:Pe=!1,component:Me="div"}=l,Te=x(l,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:w,direction:K,getPrefixCls:ne}=R.useContext(D.E_),X=ne("flex",y),[te,n,_e]=S(X),fe=Pe!=null?Pe:w==null?void 0:w.vertical,pe=M()(se,C,w==null?void 0:w.className,X,n,_e,a(X,l),{[`${X}-rtl`]:K==="rtl",[`${X}-gap-${k}`]:(0,_.n)(k),[`${X}-vertical`]:fe}),je=Object.assign(Object.assign({},w==null?void 0:w.style),ce);return me&&(je.flex=me),k&&!(0,_.n)(k)&&(je.gap=k),te(R.createElement(Me,Object.assign({ref:T,className:pe,style:je},(0,p.Z)(Te,["justify","wrap","align"])),ge))})},64599:function(ie,N,e){var R=e(96263);function u(M,p){var _=typeof Symbol!="undefined"&&M[Symbol.iterator]||M["@@iterator"];if(!_){if(Array.isArray(M)||(_=R(M))||p&&M&&typeof M.length=="number"){_&&(M=_);var D=0,A=function(){};return{s:A,n:function(){return D>=M.length?{done:!0}:{done:!1,value:M[D++]}},e:function(g){throw g},f:A}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var E=!0,c=!1,v;return{s:function(){_=_.call(M)},n:function(){var g=_.next();return E=g.done,g},e:function(g){c=!0,v=g},f:function(){try{!E&&_.return!=null&&_.return()}finally{if(c)throw v}}}}ie.exports=u,ie.exports.__esModule=!0,ie.exports.default=ie.exports}}]);
