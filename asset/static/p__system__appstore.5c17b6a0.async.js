"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3917],{1699:function(J,U,e){e.d(U,{u:function(){return I}});var R=e(9783),i=e.n(R),T=e(97857),c=e.n(T),x=e(67294),C=e(82346),W=e(40411),g=e(42075),m=e(85893),I=function(n){var E=(0,C.useAccess)(),v=Array.isArray(n.access)?n.access:[n.access],l,h=n.fallback;if(typeof n.children=="function"?(l=n.children(v.reduce(function(s,d){return c()(c()({},s),{},i()({},d,E[d]))},{})),l||(l=h)):v.every(function(s){return E[s]})?l=n.children:l=h,!h&&l&&n.showProTips&&E.canSeeEnableCe){if(E.canSeeEnableHiddenProTips)return null;l=(0,m.jsx)(W.Z,{offset:n.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:l})}if(!h&&l&&n.showProRibbonTips&&E.canSeeEnableCe){if(E.canSeeEnableHiddenProTips)return null;l=(0,m.jsx)(W.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:l})}return n.space?(0,m.jsx)(g.Z,c()(c()({},n.space),{},{children:l})):l}},80821:function(J,U,e){e.d(U,{Z:function(){return p}});var R=e(97857),i=e.n(R),T=e(5574),c=e.n(T),x=e(24963),C=e(86738),W=e(28036),g=e(83062),m=e(67294),I=e(85893);function p(n){var E=(0,m.useState)(!1),v=c()(E,2),l=v[0],h=v[1],s=(0,m.useContext)(x.Z),d=s.lang,D=s.message,K=function(){h(!0);var B=n.action();B instanceof Promise?B.then(function(t){if(h(!1),t){typeof n.onSuccess=="function"&&n.onSuccess(t);var u="";n.messageSuccess?typeof n.messageSuccess=="function"?u=n.messageSuccess(t):u=n.messageSuccess.indexOf("notification.")==0?d(n.messageSuccess):n.messageSuccess:u=d("notification.finish"),n.asynced?D.info(u):D.success(u)}}).catch(function(t){h(!1),typeof n.onError=="function"&&n.onError(t)}):h(!1)};return n.confirm?(0,I.jsx)(C.Z,i()(i()({style:{width:500},title:n.confirmTitle?n.confirmTitle:d("notification.title.tip"),description:typeof n.confirm=="string"&&n.confirm.indexOf("notification.")==0?d(n.confirm):n.confirm,onConfirm:K,okText:"Yes",cancelText:"No",onOpenChange:n.confirmOnOpenChange},n.confirmProps),{},{children:(0,I.jsx)(W.ZP,{block:n.block,disabled:n.disabled,icon:!n.children&&l?void 0:n.icon,loading:l,danger:n.danger,type:n.type,children:n.children})})):(0,I.jsx)(g.Z,{title:n.tips,children:(0,I.jsx)(W.ZP,{block:n.block,style:n.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:n.disabled,icon:!n.children&&l?void 0:n.icon,loading:l,onClick:K,danger:n.danger,type:n.type,children:n.children})})}},44349:function(J,U,e){var R=e(97857),i=e.n(R),T=e(17186),c=e(5966),x=e(86250),C=e(67294),W=e(85893),g=(0,C.forwardRef)(function(m,I){var p=(0,C.useRef)();(0,C.useImperativeHandle)(I,function(){return{addItem:function(v,l){var h,s=(h=p.current)===null||h===void 0?void 0:h.getList(),d=!1;if(s==null||s.map(function(K){if(K.name==v){d=!0;return}}),!d){var D;(D=p.current)===null||D===void 0||D.add({name:v,value:l})}},clear:function(){var v;(v=p.current)===null||v===void 0||(v=v.getList())===null||v===void 0||v.map(function(l,h){var s;(s=p.current)===null||s===void 0||s.remove(h)})}}});var n={};return m.hideCopyButton===!0&&(n.copyIconProps=!1),m.hideDeleteButton===!0&&(n.deleteIconProps=!1),(0,W.jsx)(T.u,i()(i()({initialValue:m.initialValue,label:m.label,name:m.name,actionRef:p,creatorButtonProps:m.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(m.label?m.label:m.name)}:!1,min:m.min?m.min:0},n),{},{children:function(v,l,h){return(0,W.jsx)(x.Z,{justify:m.justify,gap:m.gap,children:m.items.map(function(s){return s.render?(0,W.jsx)("div",{children:s.render&&s.render(v,l,h)},"".concat(m.name,"-").concat(s.name,"-").concat(v.key)):(0,W.jsx)(c.Z,{width:s.width,name:s.name,label:s.label,required:s.required,rules:[{required:s.required}],disabled:s.disabled,placeholder:s.placeholder},"".concat(m.name,"-").concat(s.name,"-").concat(v.key))})})}}))});U.Z=g},8680:function(J,U,e){var R=e(15009),i=e.n(R),T=e(64599),c=e.n(T),x=e(99289),C=e.n(x),W=e(9783),g=e.n(W),m=e(5574),I=e.n(m),p=e(67294),n=e(184),E=e(38345),v=e(97269),l=e(97321),h=e(97462),s=e(64317),d=e(5966),D=e(86615),K=e(68602),_=e(28036),B=e(83403),t=e(24963),u=e(1699),o=e(29177),r=e(45742),V=e(43425),ae=e(44349),se=e(3616),L=e(85893),ue=(0,p.forwardRef)(function(X,ie){var le=(0,p.useState)(!1),re=I()(le,2),ee=re[0],ne=re[1],Q=(0,p.useRef)(),$=(0,p.useContext)(t.Z),te=$.message,k=(0,p.useState)([]),N=I()(k,2),w=N[0],O=N[1],G=g()(g()(g()(g()(g()({},B.W6.CONTAINER,"Id"),B.W6.APPSTORE,"name"),B.W6.COMPOSE,"name"),B.W6.REGISTRY,"serverAddress"),B.W6.DOCKER_ENV,"name"),H=g()(g()(g()(g()(g()({},B.W6.CONTAINER,"name"),B.W6.APPSTORE,"name"),B.W6.COMPOSE,"name"),B.W6.REGISTRY,"title"),B.W6.DOCKER_ENV,"title"),y=G[X.type],Z=H[X.type],A=X.selected.map(function(P){return P[G[X.type]]});return p.useEffect(function(){ee&&((0,K.dP)({permission:{uri:X.type,key:y,value:A}}).then(function(P){var b;(b=Q.current)===null||b===void 0||b.setFieldValue("list",Object.keys(P.data.list).map(function(S){return{name:S,type:P.data.list[S].type,users:P.data.list[S].users}}))}),(0,K.lE)().then(function(P){var b,S=(b=P.data)===null||b===void 0||(b=b.list)===null||b===void 0?void 0:b.map(function(M){return{label:M.username,value:M.username}});O(S)}))},[ee]),(0,L.jsx)(u.u,{access:["canSeeEnableEe","canSeeFounder","canSeeManage"],children:(0,L.jsxs)(n.a,{name:"create",title:"\u6570\u636E\u6743\u9650\u8BBE\u7F6E",open:ee,onOpenChange:function(b){if(!b){var S;(S=Q.current)===null||S===void 0||S.resetFields()}ne(b)},drawerProps:{forceRender:!0,width:se.R_},formRef:Q,trigger:(0,L.jsx)(_.ZP,{icon:(0,L.jsx)(o.Z,{}),children:"\u6570\u636E\u6743\u9650"}),onFinish:function(){var P=C()(i()().mark(function b(S){var M,f,a;return i()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:M=c()(S.list),j.prev=1,M.s();case 3:if((f=M.n()).done){j.next=9;break}return a=f.value,j.next=7,(0,K.Db)({usernames:a.users,permissionType:a.type,permission:{uri:X.type,key:y,showKey:Z,value:[a.name]}});case 7:j.next=3;break;case 9:j.next=14;break;case 11:j.prev=11,j.t0=j.catch(1),M.e(j.t0);case 14:return j.prev=14,M.f(),j.finish(14);case 17:te.success("\u6743\u9650\u8BBE\u7F6E\u6210\u529F"),ne(!1),X.onSuccess();case 20:case"end":return j.stop()}},b,null,[[1,11,14,17]])}));return function(b){return P.apply(this,arguments)}}(),children:[(0,L.jsxs)(E.Z,{ghost:!0,title:(0,L.jsx)(r.Z,{}),subTitle:"\u6279\u91CF\u8BBE\u7F6E",children:[(0,L.jsx)(v.A.Item,{name:"type",style:{marginBottom:0},children:(0,L.jsxs)(l.Z.Group,{defaultValue:"admin",onChange:function(b){var S,M,f=(S=Q.current)===null||S===void 0?void 0:S.getFieldValue("list");f.forEach(function(a){a.type=b,a.users=[]}),(M=Q.current)===null||M===void 0||M.setFieldValue("list",f)},children:[(0,L.jsx)(l.Z,{style:{width:240},title:"\u7BA1\u7406\u5458",description:"\u4EC5\u7BA1\u7406\u5458\u53EF\u89C1",value:"admin"}),(0,L.jsx)(l.Z,{style:{width:240},title:"\u6307\u5B9A\u7528\u6237",description:"\u4EC5\u9009\u4E2D\u7528\u6237\u53EF\u89C1",value:"restricted"}),(0,L.jsx)(l.Z,{style:{width:240},title:"\u516C\u5171",description:"\u6240\u6709\u4EBA\u53EF\u89C1",value:"public"})]})}),(0,L.jsx)(h.Z,{name:["type"],children:function(b){var S=b.type;if(S==="restricted")return(0,L.jsx)(s.Z,{mode:"multiple",name:"usernames",label:"\u9009\u62E9\u7528\u6237",onChange:function(f){var a,F,j=(a=Q.current)===null||a===void 0?void 0:a.getFieldValue("list");j.forEach(function(z){z.users=f}),(F=Q.current)===null||F===void 0||F.setFieldValue("list",j)},rules:[{required:!0}],request:C()(i()().mark(function M(){var f,a,F;return i()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!(w.length>0)){z.next=2;break}return z.abrupt("return",w);case 2:return z.next=4,(0,K.lE)();case 4:return a=z.sent,F=(f=a.data)===null||f===void 0||(f=f.list)===null||f===void 0?void 0:f.map(function(q){return{label:q.username,value:q.username}}),O(F),z.abrupt("return",F);case 8:case"end":return z.stop()}},M)}))})}})]}),(0,L.jsx)(E.Z,{ghost:!0,title:(0,L.jsx)(V.Z,{}),subTitle:"\u6570\u636E\u6743\u9650\u8BBE\u7F6E",children:(0,L.jsx)(ae.Z,{name:"list",hideCopyButton:!0,gap:10,items:[{name:"name",label:"\u540D\u79F0",render:function(b,S,M){var f=M.getCurrentRowData();return(0,L.jsx)(d.Z,{disabled:!0,label:"\u540D\u79F0",width:"sm",name:"name"})}},{name:"type",label:"\u6743\u9650\u7C7B\u578B",render:function(b,S,M){var f=M.getCurrentRowData();return(0,L.jsx)(D.Z.Group,{label:"\u6743\u9650\u7C7B\u578B",name:"type",radioType:"button",options:[{label:"\u7BA1\u7406\u5458",value:"admin"},{label:"\u516C\u5171",value:"public"},{label:"\u6307\u5B9A\u7528\u6237",value:"restricted"}]})}},{name:"users",label:"\u5173\u8054\u7528\u6237",render:function(b,S,M){return(0,L.jsx)(h.Z,{name:["type"],children:function(a){var F=a.type;if(F=="restricted")return(0,L.jsx)(s.Z,{width:"sm",mode:"tags",name:"users",label:"\u5173\u8054\u7528\u6237",options:w})}})}}]})})]})})});U.Z=ue},3616:function(J,U,e){e.d(U,{Ed:function(){return c},FK:function(){return i},R_:function(){return R},ob:function(){return T}});var R=window.innerWidth<=1024?"90vw":"65vw",i="90vw",T="60vw",c="50vh"},24963:function(J,U,e){var R=e(67294),i=(0,R.createContext)({});U.Z=i},52756:function(J,U,e){e.r(U),e.d(U,{default:function(){return I},getLang:function(){return m}});var R=e(82346),i=e(31418),T=e(26058),c=e(85137),x=e(24963),C=e(65913),W=e(67294),g=e(85893);function m(p,n,E){var v=(0,R.getLocale)();E!=null&&E.XK&&(v="zh-XK");var l=(0,R.getIntl)(v).formatMessage({id:p},n);return l}function I(){var p=(0,W.useRef)(),n=(0,R.useIntl)(),E=function(u){for(var o=arguments.length,r=new Array(o>1?o-1:0),V=1;V<o;V++)r[V-1]=arguments[V];l.notification[u]({message:n.formatMessage({id:"notification.title."+u}),description:r.join(" "),placement:"topRight"})},v=function(u){for(var o=arguments.length,r=new Array(o>1?o-1:0),V=1;V<o;V++)r[V-1]=arguments[V];l.message[u](r.join(" "))},l=i.Z.useApp(),h=(0,R.useModel)("@@initialState"),s=h.initialState,d=h.loading,D=h.error,K=h.refresh,_=h.setInitialState,B=(0,R.useModel)("subscriber");return s!=null&&s.user.username&&B.addDataHandler("user:permission:".concat(s==null?void 0:s.user.username),function(t){K()}),(0,g.jsx)(T.Z,{children:(0,g.jsx)(x.Z.Provider,{value:{notice:{success:function(){for(var u=arguments.length,o=new Array(u),r=0;r<u;r++)o[r]=arguments[r];E.apply(void 0,["success"].concat(o))},error:function(){for(var u=arguments.length,o=new Array(u),r=0;r<u;r++)o[r]=arguments[r];E.apply(void 0,["error"].concat(o))},warning:function(){for(var u=arguments.length,o=new Array(u),r=0;r<u;r++)o[r]=arguments[r];E.apply(void 0,["warning"].concat(o))},info:function(){for(var u=arguments.length,o=new Array(u),r=0;r<u;r++)o[r]=arguments[r];E.apply(void 0,["info"].concat(o))},destroy:function(){l.notification.destroy()}},message:{success:function(){for(var u=arguments.length,o=new Array(u),r=0;r<u;r++)o[r]=arguments[r];v.apply(void 0,["success"].concat(o))},error:function(){for(var u=arguments.length,o=new Array(u),r=0;r<u;r++)o[r]=arguments[r];v.apply(void 0,["error"].concat(o))},warning:function(){for(var u=arguments.length,o=new Array(u),r=0;r<u;r++)o[r]=arguments[r];v.apply(void 0,["warning"].concat(o))},info:function(){for(var u=arguments.length,o=new Array(u),r=0;r<u;r++)o[r]=arguments[r];v.apply(void 0,["info"].concat(o))},loading:function(){for(var u=arguments.length,o=new Array(u),r=0;r<u;r++)o[r]=arguments[r];v.apply(void 0,["loading"].concat(o))},destroy:function(){l.message.destroy()}},loading:{show:function(){p.current&&p.current.show()},destroy:function(){p.current&&p.current.destroy()}},lang:function(u,o){return n.formatMessage({id:u},o)}},children:(0,g.jsxs)(C.Z,{ref:p,children:[(0,g.jsx)(R.Outlet,{}),(0,g.jsx)(c.Z.BackTop,{duration:10,style:{bottom:100}})]})},d?"1":"2")})}},65913:function(J,U,e){var R=e(5574),i=e.n(R),T=e(74330),c=e(67294),x=e(85893),C=(0,c.forwardRef)(function(W,g){(0,c.useImperativeHandle)(g,function(){return{show:function(){n(!0)},destroy:function(){n(!1)}}});var m=(0,c.useState)(!1),I=i()(m,2),p=I[0],n=I[1];return(0,x.jsx)(T.Z,{spinning:p,size:"default",children:W.children})});U.Z=C},29337:function(J,U,e){e.r(U),e.d(U,{default:function(){return Q}});var R=e(15009),i=e.n(R),T=e(99289),c=e.n(T),x=e(5574),C=e.n(x),W=e(3616),g=e(52756),m=e(24963),I=e(15078),p=e(184),n=e(5966),E=e(97462),v=e(86615),l=e(62370),h=e(82346),s=e(28036),d=e(42075),D=e(25593),K=e(66309),_=e(40056),B=e(67294),t=e(85893),u=(0,B.forwardRef)(function($,te){var k=(0,B.useState)(!1),N=C()(k,2),w=N[0],O=N[1],G=(0,B.useRef)(),H=(0,B.useContext)(m.Z),y=H.message,Z=H.notice,A=(0,h.useSearchParams)(),P=C()(A,2),b=P[0],S=P[1];return(0,B.useImperativeHandle)(te,function(){return{edit:function(f){var a;(a=G.current)===null||a===void 0||a.setFieldsValue({title:f.title,name:f.name,type:f.setting.type,url:f.setting.url,id:f.id}),O(!0)}}}),(0,B.useEffect)(function(){b.get("op")=="create"&&O(!0)},[]),(0,t.jsxs)(p.a,{name:"create",title:"\u6DFB\u52A0\u7B2C\u4E09\u65B9\u5E94\u7528\u5546\u5E97",open:w,onOpenChange:function(f){var a;!f&&((a=G.current)===null||a===void 0||a.resetFields()),O(f)},drawerProps:{forceRender:!0,width:W.R_},formRef:G,trigger:(0,t.jsx)(s.ZP,{type:"primary",children:"\u6DFB\u52A0\u7B2C\u4E09\u65B9\u5E94\u7528\u5546\u5E97"}),onFinish:function(){var M=c()(i()().mark(function f(a){var F,j,z;return i()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return a.type=="1panel-local"&&(a.url="/dpanel/store/".concat(a.name)),Y.next=3,(0,I.ks)({name:a.name,url:a.url,type:a.type});case 3:if(F=Y.sent,!(F&&F.data)){Y.next=13;break}return Y.next=7,(0,I.$c)({id:a.id,name:a.name,title:a.title,type:a.type,url:a.url,apps:F.data.list});case 7:if(j=Y.sent,!(j&&j.data)){Y.next=13;break}return y.success("\u6DFB\u52A0\u7B2C\u4E09\u65B9\u5E94\u7528\u5546\u5E97\u6210\u529F"),$.onFinish&&$.onFinish(),(z=G.current)===null||z===void 0||z.resetFields(),Y.abrupt("return",!0);case 13:case"end":return Y.stop()}},f)}));return function(f){return M.apply(this,arguments)}}(),children:[(0,t.jsx)(n.Z,{name:"id",hidden:!0}),(0,t.jsx)(n.Z,{label:"\u540D\u79F0",name:"title",required:!0,rules:[{required:!0}],placeholder:"\u7528\u4E8E\u533A\u5206\u4E0D\u540C\u7684\u5E94\u7528\u5546\u5E97"}),(0,t.jsx)(E.Z,{name:["id"],children:function(f){var a=f.id;return(0,t.jsx)(n.Z,{label:"\u6807\u8BC6",name:"name",required:!0,disabled:!!a,rules:[{required:!0}],placeholder:"\u6307\u5B9A\u5546\u5E97\u6807\u8BC6\uFF0C\u7528\u4E8E\u521B\u5EFA\u5546\u5E97\u6587\u4EF6\u5B58\u50A8\u76EE\u5F55"})}}),(0,t.jsx)(v.Z.Group,{name:"type",label:"\u5546\u5E97\u7C7B\u578B",valueEnum:{casaos:"casaos","1panel":"1panel","1panel-local":"1panel \u672C\u5730"},fieldProps:{onChange:function(f){var a;(a=G.current)===null||a===void 0||a.resetFields(["url"])}}}),(0,t.jsx)(E.Z,{name:["type","name"],children:function(f){var a=f.type,F=f.name,j=[],z=[];return a=="1panel"&&(z=["https://gitee.com/qyg2297248353/appstore-dpanel","https://github.com/1Panel-dev/appstore","https://github.com/okxlin/appstore"],j=[(0,t.jsx)(n.Z,{label:"\u4ED3\u5E93\u5730\u5740",name:"url",required:!0,rules:[{required:!0}],placeholder:"\u8BF7\u8F93\u5165\u8FDC\u7A0B git \u4ED3\u5E93\u5730\u5740\u6216\u662F\u9762\u677F /dpanel/store \u4E0B\u7684\u5B50\u76EE\u5F55\u540D"},"gitUrl")]),a=="portainer"&&(j=[(0,t.jsx)(n.Z,{label:"template.json \u5730\u5740",name:"url",required:!0,rules:[{required:!0}],placeholder:"https://github.com/Lissy93/portainer-templates/blob/main/templates.json"},"jsonUrl")]),a=="casaos"&&(z=["https://play.cuse.eu.org/Cp0204-AppStore-Play.zip"],j=[(0,t.jsx)(n.Z,{label:"zip \u5730\u5740",name:"url",required:!0,rules:[{required:!0}],placeholder:"\u8BF7\u8F93\u5165\u8FDC\u7A0B zip \u5730\u5740"},"zipUrl")]),a&&a!="1panel-local"?[j,(0,t.jsx)(l.Z,{label:(0,t.jsxs)(d.Z,{children:["\u63A8\u8350\u5546\u5E97",(0,t.jsx)("a",{href:"https://dpanel.cc/#/zh-cn/manual/setting/store?id=%e6%94%af%e6%8c%81%e7%b1%bb%e5%9e%8b",target:"_blank",children:(0,g.getLang)("notification.help")})]}),children:(0,t.jsx)(d.Z,{wrap:!0,children:z.map(function(q,Y){return(0,t.jsx)(D.Z.Link,{onClick:function(){var oe;(oe=G.current)===null||oe===void 0||oe.setFieldValue("url",q)},children:(0,t.jsx)(K.Z,{color:"cyan",children:q})},Y)})})},"recommend")]:[j,(0,t.jsx)(l.Z,{children:(0,t.jsx)(_.Z,{message:"\u65B0\u5EFA /dpanel/store/".concat(F!=null?F:""," \u76EE\u5F55\uFF0C\u5E76\u81EA\u884C\u4E0B\u8F7D\u6216\u662F\u6DFB\u52A0\u5E94\u7528")})},"local-description")]}})]})}),o=u,r=e(80821),V=e(8680),ae=e(83403),se=e(5251),L=e(67255),ue=e(99611),X=e(43425),ie=e(98165),le=e(90078),re=e(41482),ee=e(96074),ne=e(83062);function Q(){var $=(0,B.useRef)(),te=(0,h.useAccess)(),k=(0,B.useRef)();return(0,t.jsx)(le._z,{header:{extra:[te.canSeeFounder&&(0,t.jsx)(o,{ref:k,onFinish:function(){var w,O;!((w=$.current)===null||w===void 0)&&w.reloadAndRest&&((O=$.current)===null||O===void 0||O.reloadAndRest())}},"create")]},children:(0,t.jsx)(re.Z,{scroll:{x:"max-content"},rowKey:"id",pagination:(0,L.O)(),columns:[{title:"\u6807\u8BC6",dataIndex:"name",width:200},{title:"\u540D\u79F0",dataIndex:"title"},{title:"\u5730\u5740",width:500,search:!1,render:function(w,O,G,H,y){return(0,t.jsx)("a",{href:O.setting.url,target:"_blank",children:(0,t.jsx)(K.Z,{children:O.setting.url})})}},{title:"\u6700\u540E\u66F4\u65B0",width:180,render:function(w,O,G,H,y){if(O.setting.updatedAt)return(0,se.ZM)(O.setting.updatedAt*1e3)}},{title:"\u64CD\u4F5C",width:100,search:!1,fixed:"right",render:function(w,O,G,H,y){return(0,t.jsxs)(d.Z,{split:(0,t.jsx)(ee.Z,{type:"vertical"}),children:[(0,t.jsx)(h.Link,{to:"/compose/appstore",state:{name:O.name},children:(0,t.jsx)(ne.Z,{title:"\u67E5\u770B",children:(0,t.jsx)(ue.Z,{})})}),(0,t.jsx)(D.Z.Link,{onClick:function(){var A;(A=k.current)===null||A===void 0||A.edit(O)},children:(0,t.jsx)(ne.Z,{title:"\u7BA1\u7406",children:(0,t.jsx)(X.Z,{})})},"manage"),(0,t.jsx)(r.Z,{type:"link",icon:(0,t.jsx)(ie.Z,{}),action:function(){var A,P;return(0,I.ks)({id:O.id,name:O.name,url:(A=O.setting.url)!==null&&A!==void 0?A:"",type:(P=O.setting.type)!==null&&P!==void 0?P:""})},onSuccess:function(){var A,P;return!((A=$.current)===null||A===void 0)&&A.reloadAndRest&&((P=$.current)===null||P===void 0||P.reloadAndRest()),!0},onError:function(){var A,P;return!((A=$.current)===null||A===void 0)&&A.reloadAndRest&&((P=$.current)===null||P===void 0||P.reloadAndRest()),!0},children:" "},"upgrade")]})}}],request:function(){var N=c()(i()().mark(function w(O,G,H){var y;return i()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,I.eO)({name:O.name,title:O.title});case 2:return y=A.sent,A.abrupt("return",{data:y.data.list,success:!0,total:y.data.list.length});case 4:case"end":return A.stop()}},w)}));return function(w,O,G){return N.apply(this,arguments)}}(),rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},actionRef:$,tableAlertOptionRender:function(w){var O=w.selectedRowKeys,G=w.selectedRows;return(0,t.jsxs)(d.Z,{size:16,children:[(0,t.jsx)(V.Z,{type:ae.W6.APPSTORE,selected:G,onSuccess:function(){var y,Z;return!((y=$.current)===null||y===void 0)&&y.reloadAndRest&&((Z=$.current)===null||Z===void 0||Z.reloadAndRest()),!0}}),(0,t.jsx)(r.Z,{danger:!0,type:"primary",action:function(){return(0,I.Me)({id:G.map(function(y){return y.id})})},onSuccess:function(){var y,Z;return!((y=$.current)===null||y===void 0)&&y.reloadAndRest&&((Z=$.current)===null||Z===void 0||Z.reloadAndRest()),!0},onError:function(){var y,Z;return!((y=$.current)===null||y===void 0)&&y.reset&&((Z=$.current)===null||Z===void 0||Z.reset()),!0},confirm:"notification.confirm.title",children:"\u6279\u91CF\u5220\u9664"},"delete")]})}})})}},15078:function(J,U,e){e.d(U,{$c:function(){return C},Me:function(){return v},eO:function(){return n},ks:function(){return g},yL:function(){return h}});var R=e(15009),i=e.n(R),T=e(99289),c=e.n(T),x=e(82346);function C(d){return W.apply(this,arguments)}function W(){return W=c()(i()().mark(function d(D){return i()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,x.request)("/api/common/store/create",{method:"POST",data:D}));case 1:case"end":return _.stop()}},d)})),W.apply(this,arguments)}function g(d){return m.apply(this,arguments)}function m(){return m=c()(i()().mark(function d(D){return i()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,x.request)("/api/common/store/sync",{method:"POST",data:D}));case 1:case"end":return _.stop()}},d)})),m.apply(this,arguments)}function I(d){return p.apply(this,arguments)}function p(){return p=_asyncToGenerator(_regeneratorRuntime().mark(function d(D){return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",request("/api/common/store/get-detail",{method:"POST",data:D}));case 1:case"end":return _.stop()}},d)})),p.apply(this,arguments)}function n(d){return E.apply(this,arguments)}function E(){return E=c()(i()().mark(function d(D){return i()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,x.request)("/api/common/store/get-list",{method:"POST",data:D}));case 1:case"end":return _.stop()}},d)})),E.apply(this,arguments)}function v(d){return l.apply(this,arguments)}function l(){return l=c()(i()().mark(function d(D){return i()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,x.request)("/api/common/store/delete",{method:"POST",data:D});case 2:return _.abrupt("return",_.sent);case 3:case"end":return _.stop()}},d)})),l.apply(this,arguments)}function h(d){return s.apply(this,arguments)}function s(){return s=c()(i()().mark(function d(D){return i()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,x.request)(D==null?void 0:D.path,{method:"GET"}));case 1:case"end":return _.stop()}},d)})),s.apply(this,arguments)}},67255:function(J,U,e){e.d(U,{O:function(){return R},j:function(){return i}});function R(T){var c=localStorage.getItem("dpanel-pagesize");return c=="all"?!1:{defaultCurrent:T==null?void 0:T.page,showSizeChanger:!0,defaultPageSize:parseInt(c!=null?c:"20"),onChange:function(C,W){localStorage.setItem("dpanel-page-"+location.pathname.split("/").slice(-2).join("-"),"".concat(C))}}}function i(T){var c="dpanel-table-column-".concat(T),x={};if(localStorage.getItem(c)){var C;x=JSON.parse((C=localStorage.getItem(c))!==null&&C!==void 0?C:"{}")}return{defaultValue:x,onChange:function(g){localStorage.setItem("dpanel-table-column-".concat(T),JSON.stringify(g))}}}}}]);
