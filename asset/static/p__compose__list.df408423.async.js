"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8022],{91806:function(I,p,e){e.d(p,{Z:function(){return x}});var Z=e(87462),v=e(67294),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-40 824H232V687h97.9c11.6 32.8 32 62.3 59.1 84.7 34.5 28.5 78.2 44.3 123 44.3s88.5-15.7 123-44.3c27.1-22.4 47.5-51.9 59.1-84.7H792v-63H643.6l-5.2 24.7C626.4 708.5 573.2 752 512 752s-114.4-43.5-126.5-103.3l-5.2-24.7H232V136h560v752zM320 341h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 160h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"container",theme:"outlined"},d=c,j=e(84089),m=function(L,z){return v.createElement(j.Z,(0,Z.Z)({},L,{ref:z,icon:d}))},A=v.forwardRef(m),x=A},60433:function(I,p,e){var Z=e(87462),v=e(67294),c=e(69782),d=e(84089),j=function(x,P){return v.createElement(d.Z,(0,Z.Z)({},x,{ref:P,icon:c.Z}))},m=v.forwardRef(j);p.Z=m},96781:function(I,p,e){var Z=e(67294),v=(0,Z.createContext)({});p.Z=v},83536:function(I,p,e){e.r(p),e.d(p,{default:function(){return k}});var Z=e(64599),v=e.n(Z),c=e(15009),d=e.n(c),j=e(99289),m=e.n(j),A=e(80821),x=e(90098),P=e(43425),L=e(86548),z=e(23430),w=e(90078),K=e(10641),M=e(82346),$=e(28036),B=e(25593),F=e(42075),V=e(96074),T=e(83062),D=e(67294),W=e(94359),U=e(67255),G=e(93162),b=e(24963),y=e(66309),n=e(85893);function J(f){var O=(0,M.useIntl)(),S=(0,D.useContext)(b.Z),C=S.lang,h;if(!f.type)h=(0,n.jsx)(y.Z,{children:C("compose.type.default")});else switch(f.type){case"remoteUrl":h=(0,n.jsx)(y.Z,{color:"cyan",children:C("compose.type.".concat(f.type))});break;case"serverPath":h=(0,n.jsx)(y.Z,{color:"blue",children:C("compose.type.".concat(f.type))});break;case"storagePath":h=(0,n.jsx)(y.Z,{color:"geekblue",children:C("compose.type.".concat(f.type))});break;case"outPath":h=(0,n.jsx)(y.Z,{color:"yellow",children:C("compose.type.".concat(f.type))});break;case"store":h=(0,n.jsx)(y.Z,{color:"green",children:C("compose.type.".concat(f.type))});break;case"dangling":h=(0,n.jsx)(y.Z,{color:"error",children:C("compose.type.".concat(f.type))});break;default:h=(0,n.jsx)(y.Z,{children:C("compose.type.".concat(f.type))})}return(0,n.jsx)(T.Z,{title:f.tootip,children:h})}var N=e(96781),Y=e(73587);function k(){var f=(0,D.useContext)(N.Z),O=f.listTableRef,S=(0,D.useContext)(b.Z),C=S.lang,h=S.notice,H=(0,D.useRef)();return(0,n.jsxs)(w._z,{header:{extra:[(0,n.jsx)(M.Link,{to:"/compose/create",reloadDocument:location.search.length>0,children:(0,n.jsx)($.ZP,{type:"primary",children:"\u521B\u5EFA\u4EFB\u52A1"},"createCompose")},"create")]},children:[(0,n.jsx)(Y.Z,{ref:H,onClose:function(){var o;!((o=O.current)===null||o===void 0)&&o.reloadAndRest&&O.current.reloadAndRest()}}),(0,n.jsx)(K.Z,{scroll:{x:"max-content"},request:function(){var g=m()(d()().mark(function o(t){var u;return d()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,x.pm)({title:t.title,name:t.name});case 2:return u=a.sent,a.abrupt("return",{data:u.data.list,success:!0,total:u.data.list.length});case 4:case"end":return a.stop()}},o)}));return function(o){return g.apply(this,arguments)}}(),rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name",width:200,render:function(o,t,u,s,a){return(0,n.jsx)(B.Z.Link,{onClick:function(){if(t.setting.type=="dangling")h.info("\u65E0\u6CD5\u627E\u5230\u8BE5\u4EFB\u52A1\u7684 compose.yaml \u6587\u4EF6\uFF0C\u8BF7\u6302\u8F7D\u76F8\u5E94\u7684 compose \u6587\u4EF6\u6216\u662F\u5728\u9762\u677F\u7684 compose \u76EE\u5F55\u6DFB\u52A0\u540C\u6807\u8BC6\u7684\u4EFB\u52A1\u76EE\u5F55\u53CA compose.yaml \u6587\u4EF6");else{var i;(i=H.current)===null||i===void 0||i.show(t.id||t.name)}},children:t.name})},sorter:function(o,t){return o.name.localeCompare(t.name)},sortDirections:["descend","ascend"]},{title:"\u9879\u76EE\u540D\u79F0",dataIndex:"title",width:200},{title:"\u7C7B\u578B",width:150,search:!1,render:function(o,t,u,s,a){var l;return(0,n.jsx)(J,{tootip:(l=t.setting.uri)!==null&&l!==void 0?l:"",type:t.setting&&t.setting.type?t.setting.type:""})}},{title:"\u5BB9\u5668\u72B6\u6001",dataIndex:"status",search:!1,width:300,render:function(o,t,u,s,a){return(0,n.jsx)(F.Z,{children:t.setting.status.split(", ").map(function(l,i){var R="running",r=l.indexOf("(");return r>-1?R=l.slice(0,r):R=l,(0,n.jsx)(W.Z,{status:R,message:{content:C("compose.status.".concat(R),{count:l.slice(r+1,l.length-1)}),title:t.setting.message,placement:"top",showInTag:!0}},i)})})}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"",search:!1,width:150,render:function(o,t,u,s,a){return t.setting.createdAt?new Date(t.setting.createdAt).toLocaleString():"-"}},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"",search:!1,width:150,render:function(o,t,u,s,a){return t.setting.updatedAt?new Date(t.setting.updatedAt).toLocaleString():"-"}},{title:"\u64CD\u4F5C",width:80,valueType:"option",fixed:"right",key:"option",render:function(o,t,u,s,a){return t.setting.type!="dangling"&&(0,n.jsxs)(F.Z,{split:(0,n.jsx)(V.Z,{type:"vertical"}),children:[(0,n.jsx)(B.Z.Link,{onClick:function(){var i;(i=H.current)===null||i===void 0||i.show(t.id||t.name)},children:(0,n.jsx)(T.Z,{title:"\u90E8\u7F72",children:(0,n.jsx)(P.Z,{})})},"3"),(0,n.jsx)(M.Link,{to:"/compose/create?id="+(t.id||t.name),children:(0,n.jsx)(T.Z,{title:"\u7F16\u8F91",children:(0,n.jsx)(L.Z,{})})},"4"),(0,n.jsx)(B.Z.Link,{onClick:m()(d()().mark(function l(){var i,R;return d()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,x.tw)({id:t.id||t.name});case 2:i=E.sent,R=new Blob([i],{type:"application/zip"}),(0,G.saveAs)(R,"compose-"+t.name+".zip");case 5:case"end":return E.stop()}},l)})),children:(0,n.jsx)(T.Z,{title:"\u4E0B\u8F7D",children:(0,n.jsx)(z.Z,{})})},"2")]})}}],rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0,getCheckboxProps:function(o){return{disabled:o.setting.type=="dangling"||o.setting.type=="outPath"}}},tableAlertOptionRender:function(o){var t=o.selectedRows;return(0,n.jsx)(F.Z,{size:16,children:(0,n.jsx)(A.Z,{danger:!0,type:"primary",action:m()(d()().mark(function u(){var s,a,l,i;return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:a=v()(t),r.prev=1,a.s();case 3:if((l=a.n()).done){r.next=10;break}return i=l.value,r.next=7,(0,x.mg)({id:i.id||i.name});case 7:s=r.sent;case 8:r.next=3;break;case 10:r.next=15;break;case 12:r.prev=12,r.t0=r.catch(1),a.e(r.t0);case 15:return r.prev=15,a.f(),r.finish(15);case 18:return r.abrupt("return",(0,x.ik)({id:t.map(function(E){return E.id})}));case 19:case"end":return r.stop()}},u,null,[[1,12,15,18]])})),onSuccess:function(){var s,a;return!((s=O.current)===null||s===void 0)&&s.reloadAndRest&&((a=O.current)===null||a===void 0||a.reloadAndRest()),!0},onError:function(){var s,a;return!((s=O.current)===null||s===void 0)&&s.reset&&((a=O.current)===null||a===void 0||a.reset()),!0},confirm:"notification.confirm.title",children:"\u6279\u91CF\u5220\u9664"})})},pagination:(0,U.O)(),search:{collapsed:!1},actionRef:O,columnsState:(0,U.j)("compose-list")})]})}},67255:function(I,p,e){e.d(p,{O:function(){return Z},j:function(){return v}});function Z(){var c=localStorage.getItem("dpanel-pagesize");return c=="all"?!1:{showSizeChanger:!0,defaultPageSize:parseInt(c!=null?c:"20")}}function v(c){var d="dpanel-table-column-".concat(c),j={};if(localStorage.getItem(d)){var m;j=JSON.parse((m=localStorage.getItem(d))!==null&&m!==void 0?m:"{}")}return{defaultValue:j,onChange:function(x){localStorage.setItem("dpanel-table-column-".concat(c),JSON.stringify(x))}}}}}]);
