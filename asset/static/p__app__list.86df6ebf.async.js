"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4316],{16165:function(De,J,n){var Q=n(87462),O=n(1413),W=n(4942),m=n(45987),S=n(67294),D=n(93967),N=n.n(D),_=n(42550),g=n(63017),k=n(41755),F=["className","component","viewBox","spin","rotate","tabIndex","onClick","children"],K=S.forwardRef(function(M,A){var $=M.className,B=M.component,i=M.viewBox,X=M.spin,w=M.rotate,x=M.tabIndex,ie=M.onClick,P=M.children,he=(0,m.Z)(M,F),te=S.useRef(),pe=(0,_.x1)(te,A);(0,k.Kp)(!!(B||P),"Should have `component` prop or `children`."),(0,k.C3)(te);var oe=S.useContext(g.Z),de=oe.prefixCls,se=de===void 0?"anticon":de,E=oe.rootClassName,z=N()(E,se,(0,W.Z)({},"".concat(se,"-spin"),!!X&&!!B),$),y=N()((0,W.Z)({},"".concat(se,"-spin"),!!X)),L=w?{msTransform:"rotate(".concat(w,"deg)"),transform:"rotate(".concat(w,"deg)")}:void 0,ue=(0,O.Z)((0,O.Z)({},k.vD),{},{className:y,style:L,viewBox:i});i||delete ue.viewBox;var le=function(){return B?S.createElement(B,ue,P):P?((0,k.Kp)(!!i||S.Children.count(P)===1&&S.isValidElement(P)&&S.Children.only(P).type==="use","Make sure that you provide correct `viewBox` prop (default `0 0 1024 1024`) to the icon."),S.createElement("svg",(0,Q.Z)({},ue,{viewBox:i}),P)):null},Y=x;return Y===void 0&&ie&&(Y=-1),S.createElement("span",(0,Q.Z)({role:"img"},he,{ref:pe,tabIndex:Y,onClick:ie,className:z}),le())});K.displayName="AntdIcon",J.Z=K},44349:function(De,J,n){var Q=n(97857),O=n.n(Q),W=n(17186),m=n(5966),S=n(86250),D=n(67294),N=n(85893),_=(0,D.forwardRef)(function(g,k){var F=(0,D.useRef)();(0,D.useImperativeHandle)(k,function(){return{addItem:function(A,$){var B,i=(B=F.current)===null||B===void 0?void 0:B.getList(),X=!1;if(i==null||i.map(function(x){if(x.name==A){X=!0;return}}),!X){var w;(w=F.current)===null||w===void 0||w.add({name:A,value:$})}},clear:function(){var A;(A=F.current)===null||A===void 0||(A=A.getList())===null||A===void 0||A.map(function($,B){var i;(i=F.current)===null||i===void 0||i.remove(B)})}}});var K={};return g.hideCopyButton===!0&&(K.copyIconProps=!1),g.hideDeleteButton===!0&&(K.deleteIconProps=!1),(0,N.jsx)(W.u,O()(O()({initialValue:g.initialValue,label:g.label,name:g.name,actionRef:F,creatorButtonProps:g.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(g.label?g.label:g.name)}:!1,min:g.min?g.min:0},K),{},{children:function(A,$,B){return(0,N.jsx)(S.Z,{justify:g.justify,gap:g.gap,children:g.items.map(function(i){return i.render?(0,N.jsx)("div",{children:i.render&&i.render(A,$,B)},"".concat(g.name,"-").concat(i.name,"-").concat(A.key)):(0,N.jsx)(m.Z,{width:i.width,name:i.name,label:i.label,required:i.required,rules:[{required:i.required}],disabled:i.disabled,placeholder:i.placeholder},"".concat(g.name,"-").concat(i.name,"-").concat(A.key))})})}}))});J.Z=_},8680:function(De,J,n){var Q=n(15009),O=n.n(Q),W=n(64599),m=n.n(W),S=n(99289),D=n.n(S),N=n(9783),_=n.n(N),g=n(5574),k=n.n(g),F=n(67294),K=n(184),M=n(38345),A=n(97269),$=n(97321),B=n(97462),i=n(64317),X=n(5966),w=n(86615),x=n(68602),ie=n(28036),P=n(83403),he=n(24963),te=n(1699),pe=n(29177),oe=n(45742),de=n(43425),se=n(44349),E=n(85893),z=(0,F.forwardRef)(function(y,L){var ue=(0,F.useState)(!1),le=k()(ue,2),Y=le[0],ee=le[1],a=(0,F.useRef)(),Se=(0,F.useContext)(he.Z),Be=Se.message,ye=(0,F.useState)([]),Ee=k()(ye,2),_e=Ee[0],Pe=Ee[1],Ie=_()(_()(_()(_()(_()({},P.W6.CONTAINER,"Id"),P.W6.APPSTORE,"name"),P.W6.COMPOSE,"name"),P.W6.REGISTRY,"serverAddress"),P.W6.DOCKER_ENV,"name"),Le=_()(_()(_()(_()(_()({},P.W6.CONTAINER,"name"),P.W6.APPSTORE,"name"),P.W6.COMPOSE,"name"),P.W6.REGISTRY,"title"),P.W6.DOCKER_ENV,"title"),ne=Ie[y.type],Ze=Le[y.type],Te=y.selected.map(function(T){return T[Ie[y.type]]});return F.useEffect(function(){Y&&((0,x.dP)({permission:{uri:y.type,key:ne,value:Te}}).then(function(T){var p;(p=a.current)===null||p===void 0||p.setFieldValue("list",Object.keys(T.data.list).map(function(C){return{name:C,type:T.data.list[C].type,users:T.data.list[C].users}}))}),(0,x.lE)().then(function(T){var p,C=(p=T.data)===null||p===void 0||(p=p.list)===null||p===void 0?void 0:p.map(function(j){return{label:j.username,value:j.username}});Pe(C)}))},[Y]),(0,E.jsx)(te.u,{access:["canSeeEnableEe","canSeeFounder","canSeeManage"],children:(0,E.jsxs)(K.a,{name:"create",title:"\u6570\u636E\u6743\u9650\u8BBE\u7F6E",open:Y,onOpenChange:function(p){if(!p){var C;(C=a.current)===null||C===void 0||C.resetFields()}ee(p)},drawerProps:{forceRender:!0},formRef:a,trigger:(0,E.jsx)(ie.ZP,{icon:(0,E.jsx)(pe.Z,{}),children:"\u6570\u636E\u6743\u9650"}),onFinish:function(){var T=D()(O()().mark(function p(C){var j,b,Z;return O()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:j=m()(C.list),I.prev=1,j.s();case 3:if((b=j.n()).done){I.next=9;break}return Z=b.value,I.next=7,(0,x.Db)({usernames:Z.users,permissionType:Z.type,permission:{uri:y.type,key:ne,showKey:Ze,value:[Z.name]}});case 7:I.next=3;break;case 9:I.next=14;break;case 11:I.prev=11,I.t0=I.catch(1),j.e(I.t0);case 14:return I.prev=14,j.f(),I.finish(14);case 17:Be.success("\u6743\u9650\u8BBE\u7F6E\u6210\u529F"),ee(!1),y.onSuccess();case 20:case"end":return I.stop()}},p,null,[[1,11,14,17]])}));return function(p){return T.apply(this,arguments)}}(),children:[(0,E.jsxs)(M.Z,{ghost:!0,title:(0,E.jsx)(oe.Z,{}),subTitle:"\u6279\u91CF\u8BBE\u7F6E",children:[(0,E.jsx)(A.A.Item,{name:"type",style:{marginBottom:0},children:(0,E.jsxs)($.Z.Group,{defaultValue:"admin",onChange:function(p){var C,j,b=(C=a.current)===null||C===void 0?void 0:C.getFieldValue("list");b.forEach(function(Z){Z.type=p,Z.users=[]}),(j=a.current)===null||j===void 0||j.setFieldValue("list",b)},children:[(0,E.jsx)($.Z,{style:{width:240},title:"\u7BA1\u7406\u5458",description:"\u4EC5\u7BA1\u7406\u5458\u53EF\u89C1",value:"admin"}),(0,E.jsx)($.Z,{style:{width:240},title:"\u6307\u5B9A\u7528\u6237",description:"\u4EC5\u9009\u4E2D\u7528\u6237\u53EF\u89C1",value:"restricted"}),(0,E.jsx)($.Z,{style:{width:240},title:"\u516C\u5171",description:"\u6240\u6709\u4EBA\u53EF\u89C1",value:"public"})]})}),(0,E.jsx)(B.Z,{name:["type"],children:function(p){var C=p.type;if(C==="restricted")return(0,E.jsx)(i.Z,{mode:"multiple",name:"usernames",label:"\u9009\u62E9\u7528\u6237",onChange:function(b){var Z,V,I=(Z=a.current)===null||Z===void 0?void 0:Z.getFieldValue("list");I.forEach(function(c){c.users=b}),(V=a.current)===null||V===void 0||V.setFieldValue("list",I)},rules:[{required:!0}],request:D()(O()().mark(function j(){var b,Z,V;return O()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(_e.length>0)){c.next=2;break}return c.abrupt("return",_e);case 2:return c.next=4,(0,x.lE)();case 4:return Z=c.sent,V=(b=Z.data)===null||b===void 0||(b=b.list)===null||b===void 0?void 0:b.map(function(re){return{label:re.username,value:re.username}}),Pe(V),c.abrupt("return",V);case 8:case"end":return c.stop()}},j)}))})}})]}),(0,E.jsx)(M.Z,{ghost:!0,title:(0,E.jsx)(de.Z,{}),subTitle:"\u6570\u636E\u6743\u9650\u8BBE\u7F6E",children:(0,E.jsx)(se.Z,{name:"list",hideCopyButton:!0,gap:10,items:[{name:"name",label:"\u540D\u79F0",render:function(p,C,j){var b=j.getCurrentRowData();return(0,E.jsx)(X.Z,{disabled:!0,label:"\u540D\u79F0",width:"sm",name:"name"})}},{name:"type",label:"\u6743\u9650\u7C7B\u578B",render:function(p,C,j){var b=j.getCurrentRowData();return(0,E.jsx)(w.Z.Group,{label:"\u6743\u9650\u7C7B\u578B",name:"type",radioType:"button",options:[{label:"\u7BA1\u7406\u5458",value:"admin"},{label:"\u516C\u5171",value:"public"},{label:"\u6307\u5B9A\u7528\u6237",value:"restricted"}]})}},{name:"users",label:"\u5173\u8054\u7528\u6237",render:function(p,C,j){return(0,E.jsx)(B.Z,{name:["type"],children:function(Z){var V=Z.type;if(V=="restricted")return(0,E.jsx)(i.Z,{width:"sm",mode:"tags",name:"users",label:"\u5173\u8054\u7528\u6237",options:_e})}})}}]})})]})})});J.Z=z},42939:function(De,J,n){n.r(J),n.d(J,{default:function(){return I}});var Q=n(64599),O=n.n(Q),W=n(15009),m=n.n(W),S=n(99289),D=n.n(S),N=n(5574),_=n.n(N),g=n(78099),k=n(97269),F=n(62370),K=n(42075),M=n(25593),A=n(40411),$=n(34041),B=n(96074),i=n(83062),X=n(84567),w=n(50136),x=n(82346),ie=n(43425),P=n(45742),he=n(89035),te=n(74842),pe=n(87784),oe=n(33160),de=n(30159),se=n(94359),E=n(78498),z=n(60335),y=n(80821),L=n(67294),ue=n(62597),le=n(87662),Y=n(16165),ee=n(5251),a=n(85893),Se=function(){return(0,a.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18403",children:(0,a.jsx)("path",{d:"M224 192v64H96v576h128v64h64v-64h64v64h64v-64h64v64h64v-64h64v64h64v-64h64v64h64v-64h128V256h-128V192h-64v64h-64V192h-64v64h-64V192h-64v64h-64V192h-64v64H288V192z m-64 128h704v448H160z m96 64c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32zM256 512c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m512 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32zM256 640c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z","p-id":"18404"})})},Be=function(){return(0,a.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18546",children:(0,a.jsx)("path",{d:"M64 224v576h416v-32c0-17.76 14.24-32 32-32 17.76 0 32 14.24 32 32v32h416V224z m64 64h768v288H128z m64 64v160h192v-160z m224 0v160h192v-160z m224 0v160h192v-160zM256 416h64v32H256z m224 0h64v32h-64z m224 0h64v32h-64zM128 640h768v96h-300.992c-14.144-35.52-42.752-64-83.008-64-40.256 0-68.864 28.48-83.008 64H128z","p-id":"18547"})})};function ye(c){var re,o,Re,ce,ge,Ce;return(0,a.jsx)(a.Fragment,{children:c.value&&c.value.memory&&c.value.memory.out>0?(0,a.jsxs)(K.Z,{children:[(0,a.jsxs)(i.Z,{title:"Cpu: ".concat((re=c.value)===null||re===void 0?void 0:re.cpu.toFixed(2),"%"),children:[(0,a.jsx)(Y.Z,{component:Se,style:{width:15,lineHeight:20}})," ","".concat((o=c.value)===null||o===void 0?void 0:o.cpu.toFixed(2),"%")]}),(0,a.jsxs)(i.Z,{title:"\u5185\u5B58: ".concat((0,ee.FI)((Re=c.value)===null||Re===void 0?void 0:Re.memory.in)," / ").concat((0,ee.FI)((ce=c.value)===null||ce===void 0?void 0:ce.memory.out)),children:[(0,a.jsx)(Y.Z,{component:Be,style:{width:15,lineHeight:20}})," ","".concat((((ge=c.value)===null||ge===void 0?void 0:ge.memory.in)/((Ce=c.value)===null||Ce===void 0?void 0:Ce.memory.out)*100).toFixed(2),"%")]})]}):""})}var Ee=n(67255),_e=n(37413),Pe=n(68714),Ie=n(57716),Le=n(83403),ne=n(1699),Ze=n(8680),Te=n(20578),T=n(24963),p=n(99861),C=n(52364),j=(0,L.forwardRef)(function(c,re){var o=(0,L.useRef)(),Re=(0,L.useState)(""),ce=_()(Re,2),ge=ce[0],Ce=ce[1],qe=(0,L.useState)(),Ne=_()(qe,2),ae=Ne[0],en=Ne[1],nn=(0,L.useState)(1),ze=_()(nn,2),rn=ze[0],an=ze[1],tn=(0,L.useState)([]),Ve=_()(tn,2),je=Ve[0],sn=Ve[1],He=(0,L.useRef)(),ke=(0,L.useRef)(),Me=(0,x.useAccess)(),un=(0,L.useState)(),we=_()(un,2),ve=we[0],ln=we[1],Ge=(0,L.useRef)(),We=(0,L.useRef)(),on=(0,L.useState)([]),Je=_()(on,2),Ae=Je[0],dn=Je[1],cn=(0,L.useContext)(T.Z),vn=cn.lang;return(0,L.useImperativeHandle)(re,function(){return{reload:function(){var u,s;!((u=o.current)===null||u===void 0)&&u.reloadAndRest&&((s=o.current)===null||s===void 0||s.reloadAndRest())}}}),(0,L.useEffect)(function(){(0,le.K3)().then(function(h){var u;Ce((u=h.data.serverUrl)!==null&&u!==void 0?u:"")}),!Me.canSeeEnableCe&&(0,Te.ql)().then(function(h){ln(h.data)}),(0,C.k)().then(function(h){dn(h.data.list)})},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Pe.Z,{ref:He,onFinish:function(){var u,s;!((u=o.current)===null||u===void 0)&&u.reloadAndRest&&((s=o.current)===null||s===void 0||s.reloadAndRest())},onUpgradeFinish:function(){var u,s;!((u=o.current)===null||u===void 0)&&u.reloadAndRest&&((s=o.current)===null||s===void 0||s.reloadAndRest())}}),(0,a.jsx)(Ie.Z,{ref:ke}),(0,a.jsx)(p.Z,{ref:We,finishAutoHide:!0}),(0,a.jsx)(g.Z,{actionRef:o,scroll:{x:"max-content"},columns:[{key:"title",title:"\u540D\u79F0",dataIndex:"siteTitle",sorter:function(u,s){return u.Names[0].localeCompare(s.Names[0])},sortDirections:["descend","ascend"],render:function(u,s,U,v,r){var t=(0,ee.fi)(s.Names[0],"/");ae!=null&&ae.siteList&&ae.siteList.map(function(l){l.containerInfo&&l.containerInfo.Id==s.Id&&l.siteTitle!=""&&(t=l.siteTitle)}),s.Labels&&s.Labels["com.dpanel.container.title"]&&(t=s.Labels["com.dpanel.container.title"]);var d=ve&&ve.container?ve.container.find(function(l){return l.id==s.Id}):!1;return(0,a.jsxs)(K.Z,{direction:"vertical",children:[(0,a.jsx)(M.Z.Link,{onClick:function(){var R;(R=He.current)===null||R===void 0||R.show(s.Id)},children:t}),!Me.canSeeEnableCe&&d&&(0,a.jsx)(A.Z,{count:"new"})]})}},{title:"\u6807\u7B7E",hidden:!0,dataIndex:"tag",renderFormItem:function(u,s,U,v){return(0,a.jsx)($.Z,{options:Ae&&Ae.map(function(r){return{lable:r.tag,value:r.tag}})})}},{key:"ports",title:(0,a.jsx)(E.Z,{title:"\u5BF9\u5916\u8BBF\u95EE",help:"\u5BF9\u5916\u66B4\u9732\u7AEF\u53E3\u65F6\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7\u670D\u52A1\u5668ip(\u516C\u7F51,\u5185\u7F51,127.0.0.1)\u52A0\u7AEF\u53E3\u7684\u5F62\u5F0F\u8FDB\u884C\u8BBF\u95EE\u3002\u5982\u679C\u9700\u8981\u7ED1\u5B9A\u57DF\u540D,\u8BF7\u6DFB\u52A0\u7AD9\u70B9\u7ED1\u5B9A\u57DF\u540D\u8F6C\u53D1."}),dataIndex:"ports",width:130,search:!1,render:function(u,s,U,v){var r=[],t=[],d=[];return s!=null&&s.Ports&&s.Ports.map(function(l,R){l.PublicPort?r.push(l):t.push(l)}),ae!=null&&ae.domainList&&ae.domainList.map(function(l,R){s.Names.indexOf(l.containerId)>-1&&d.push(l.setting.enableSSL?"https://"+l.serverName:"http://"+l.serverName)}),(0,a.jsx)(_e.Z,{publicPort:r,privatePort:t,domain:d,serverIp:ge})}},{title:"\u5360\u7528\u7387",width:200,search:!1,key:"usage",sorter:function(u,s){var U=je.find(function(r){return u.Id.startsWith(r.container)}),v=je.find(function(r){return s.Id.startsWith(r.container)});return JSON.stringify(U).localeCompare(JSON.stringify(v))},render:function(u,s,U,v,r){if(!je||je.length<=0)return"";var t={};return je.filter(function(d){s.Id.indexOf(d.container)==0&&(t=d)}),(0,a.jsx)(ye,{value:t})}},{title:"\u8FD0\u884C\u72B6\u6001",key:"status",dataIndex:["container","status"],search:!1,width:130,render:function(u,s,U,v){return s.Status.indexOf("(healthy)")>-1?s.State="healthy":s.Status.indexOf("(unhealthy)")>-1&&(s.State="unhealthy"),[(0,a.jsx)("div",{children:(0,a.jsx)(se.Z,{status:s.State,message:{content:s.Status,placement:"top"}})},"status")]}},{title:"\u6240\u5C5E\u955C\u50CF",key:"image",search:!1,width:150,render:function(u,s,U,v){return(0,a.jsx)("span",{style:{wordBreak:"break-word"},children:(0,a.jsx)(x.Link,{to:"/image/detail/".concat(s.ImageID),children:s.Image})})}},{title:"\u521B\u5EFA\u65E5\u671F",width:170,dataIndex:["Created"],render:function(u,s,U,v,r){return(0,ee.ZM)(s.Created*1e3)},sorter:function(u,s){return new Date(u.Created*1e3).toISOString().localeCompare(new Date(s.Created*1e3).toISOString())},search:!1,sortDirections:["descend","ascend"]},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:100,fixed:"right",hidden:!Me.canSeeContainerListManage,render:function(u,s,U,v){return(0,a.jsxs)(K.Z,{split:(0,a.jsx)(B.Z,{type:"vertical"}),children:[(0,a.jsx)(x.Link,{to:"/app/detail/edit/"+s.Id,children:(0,a.jsx)(i.Z,{title:"\u7BA1\u7406\u5BB9\u5668",children:(0,a.jsx)(ie.Z,{})})},"edit"),(0,a.jsx)(x.Link,{to:"/app/detail/log/".concat(s.Id,"?tab=log"),children:(0,a.jsx)(i.Z,{title:"\u8FD0\u884C\u65E5\u5FD7",children:(0,a.jsx)(P.Z,{})})},"log"),(s.State=="running"||s.State=="healthy")&&(0,a.jsx)(M.Z.Link,{onClick:function(){var t;(t=ke.current)===null||t===void 0||t.show(s.Id)},children:(0,a.jsx)(he.Z,{})},"console")]})}}],rowKey:"Id",request:function(){var h=D()(m()().mark(function u(s,U,v){var r,t,d,l,R,e,G;return m()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(0,z.IE)({tag:s.title,siteTitle:s.title,md5:s.Id});case 2:return t=q.sent,d="",l=[],c.searchPrefix&&(d=c.searchPrefix),c.searchNameList&&(l=c.searchNameList),s.tag&&Ae&&(l=(R=(e=Ae.find(function(H){return H.tag==s.tag}))===null||e===void 0?void 0:e.containerName)!==null&&R!==void 0?R:[]),console.log(d),console.log(l),G=[],d!=""?t.data.list.map(function(H){H.Names.map(function(me){me.startsWith("/"+d)&&G.push(H)})}):l&&l.length>0?t.data.list.map(function(H){H.Names.map(function(me){l.indexOf(me)>-1&&G.push(H)})}):G=t.data.list,en(t.data),an(rn+1),(0,le.Cz)({follow:!1}).then(function(H){sn(H.data.list)}),q.abrupt("return",{data:(r=G)!==null&&r!==void 0?r:[],success:!0,total:t.data.list.length});case 16:case"end":return q.stop()}},u)}));return function(u,s,U){return h.apply(this,arguments)}}(),rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(u){var s=u.selectedRowKeys,U=u.selectedRows;return(0,a.jsxs)(K.Z,{size:16,wrap:!0,children:[(0,a.jsx)(Ze.Z,{type:Le.W6.CONTAINER,selected:U,onSuccess:function(){var r,t;return!((r=o.current)===null||r===void 0)&&r.reloadAndRest&&((t=o.current)===null||t===void 0||t.reloadAndRest()),!0}},"dataPermission"),(0,a.jsxs)(ne.u,{access:"canSeeContainerList",space:{size:16,wrap:!0},children:[(0,a.jsx)(y.Z,{icon:(0,a.jsx)(te.Z,{}),action:D()(m()().mark(function v(){var r,t,d,l;return m()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=O()(s),e.prev=1,r.s();case 3:if((t=r.n()).done){e.next=10;break}return d=t.value,e.next=7,(0,z.IW)({md5:d,operate:"start"});case 7:l=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},v,null,[[1,12,15,18]])})),onSuccess:function(){var r,t;return!((r=o.current)===null||r===void 0)&&r.reloadAndRest&&((t=o.current)===null||t===void 0||t.reloadAndRest()),!0},children:"\u542F\u52A8"}),(0,a.jsx)(y.Z,{action:D()(m()().mark(function v(){var r,t,d,l;return m()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=O()(s),e.prev=1,r.s();case 3:if((t=r.n()).done){e.next=10;break}return d=t.value,e.next=7,(0,z.IW)({md5:d,operate:"stop"});case 7:l=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},v,null,[[1,12,15,18]])})),icon:(0,a.jsx)(pe.Z,{}),onSuccess:function(){var r,t;return!((r=o.current)===null||r===void 0)&&r.reloadAndRest&&((t=o.current)===null||t===void 0||t.reloadAndRest()),!0},children:"\u505C\u6B62"}),(0,a.jsx)(y.Z,{action:D()(m()().mark(function v(){var r,t,d,l;return m()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=O()(s),e.prev=1,r.s();case 3:if((t=r.n()).done){e.next=10;break}return d=t.value,e.next=7,(0,z.IW)({md5:d,operate:"restart"});case 7:l=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},v,null,[[1,12,15,18]])})),onSuccess:function(){var r,t;return!((r=o.current)===null||r===void 0)&&r.reloadAndRest&&((t=o.current)===null||t===void 0||t.reloadAndRest()),!0},icon:(0,a.jsx)(oe.Z,{}),children:"\u91CD\u542F"}),(0,a.jsx)(y.Z,{action:D()(m()().mark(function v(){var r,t,d,l;return m()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=O()(s),e.prev=1,r.s();case 3:if((t=r.n()).done){e.next=10;break}return d=t.value,e.next=7,(0,z.IW)({md5:d,operate:"pause"});case 7:l=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},v,null,[[1,12,15,18]])})),onSuccess:function(){var r,t;return!((r=o.current)===null||r===void 0)&&r.reloadAndRest&&((t=o.current)===null||t===void 0||t.reloadAndRest()),!0},icon:(0,a.jsx)(de.Z,{}),children:"\u6682\u505C"}),(0,a.jsx)(y.Z,{action:D()(m()().mark(function v(){var r,t,d,l;return m()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=O()(s),e.prev=1,r.s();case 3:if((t=r.n()).done){e.next=10;break}return d=t.value,e.next=7,(0,z.IW)({md5:d,operate:"unpause"});case 7:l=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},v,null,[[1,12,15,18]])})),onSuccess:function(){var r,t;return!((r=o.current)===null||r===void 0)&&r.reloadAndRest&&((t=o.current)===null||t===void 0||t.reloadAndRest()),!0},icon:(0,a.jsx)(te.Z,{}),children:"\u6062\u590D"})]}),(0,a.jsx)(B.Z,{}),(0,a.jsx)(ne.u,{access:["canSeeEnableCe","canSeeContainerListManageOp"],children:function(r){var t=r.canSeeEnableCe,d=r.canSeeContainerListManageOp;return!t&&d&&(0,a.jsx)(y.Z,{type:"primary",action:D()(m()().mark(function l(){var R,e,G,fe,q,H,me,Oe,Qe,Fe,xe,Ue,Ye;return m()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:G=[],fe=O()(U),f.prev=2,H=m()().mark(function fn(){var Ke,Xe,be;return m()().wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:Xe=q.value,be=ve==null||(Ke=ve.container)===null||Ke===void 0?void 0:Ke.find(function(mn){return mn.id==Xe.Id}),be&&!G.includes(be.image)&&G.push(be.image);case 3:case"end":return $e.stop()}},fn)}),fe.s();case 5:if((q=fe.n()).done){f.next=9;break}return f.delegateYield(H(),"t0",7);case 7:f.next=5;break;case 9:f.next=14;break;case 11:f.prev=11,f.t1=f.catch(2),fe.e(f.t1);case 14:return f.prev=14,fe.f(),f.finish(14);case 17:if(G){f.next=19;break}return f.abrupt("return",!1);case 19:return f.next=21,(R=We.current)===null||R===void 0?void 0:R.pull(G);case 21:(e=We.current)===null||e===void 0||e.finish(),Oe=O()(U),f.prev=23,Oe.s();case 25:if((Qe=Oe.n()).done){f.next=32;break}return Ye=Qe.value,f.next=29,(0,z.RF)({md5:(Fe=Ye.Id)!==null&&Fe!==void 0?Fe:"",imageTag:"",enableBak:(xe=(Ue=Ge.current)===null||Ue===void 0?void 0:Ue.getFieldValue("enableBak"))!==null&&xe!==void 0?xe:!1});case 29:me=f.sent;case 30:f.next=25;break;case 32:f.next=37;break;case 34:f.prev=34,f.t2=f.catch(23),Oe.e(f.t2);case 37:return f.prev=37,Oe.f(),f.finish(37);case 40:return f.abrupt("return",me);case 41:case"end":return f.stop()}},l,null,[[2,11,14,17],[23,34,37,40]])})),onSuccess:function(){var R,e;return!((R=o.current)===null||R===void 0)&&R.reloadAndRest&&((e=o.current)===null||e===void 0||e.reloadAndRest()),!0},confirm:(0,a.jsxs)(K.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,a.jsx)(M.Z.Text,{children:vn("app.detail.upgradeConfirm")}),(0,a.jsx)(k.A,{formRef:Ge,submitter:!1,layout:"inline",children:(0,a.jsx)(F.Z,{name:"enableBak",valuePropName:"checked",children:(0,a.jsx)(X.Z,{children:"\u5907\u4EFD\u65E7\u5BB9\u5668\uFF1F"})})})]}),children:"\u6279\u91CF\u5347\u7EA7"})}}),(0,a.jsx)(ne.u,{access:"canSeeContainerListManageDelete",children:(0,a.jsx)(y.Z,{danger:!0,type:"primary",action:D()(m()().mark(function v(){var r,t,d,l;return m()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=O()(s),e.prev=1,t.s();case 3:if((d=t.n()).done){e.next=10;break}return l=d.value,e.next=7,(0,ue.Ct)({md5:l,deleteImage:!1,deleteVolume:!1});case 7:r=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t.e(e.t0);case 15:return e.prev=15,t.f(),e.finish(15);case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}},v,null,[[1,12,15,18]])})),onSuccess:function(){var r,t;return!((r=o.current)===null||r===void 0)&&r.reloadAndRest&&((t=o.current)===null||t===void 0||t.reloadAndRest()),!0},onError:function(){var r,t;return!((r=o.current)===null||r===void 0)&&r.reset&&((t=o.current)===null||t===void 0||t.reset()),!0},confirm:"notification.confirm.title",children:"\u6279\u91CF\u5220\u9664"})})]})},pagination:c.showLite?!1:(0,Ee.O)(),search:c.showLite?!1:{collapsed:!1},tableExtraRender:function(){return!c.showLite&&Me.canSeeContainerListManageCreate&&(0,a.jsx)(w.Z,{mode:"horizontal",selectedKeys:["list"],items:[{label:(0,a.jsx)(x.Link,{to:"/app/list",replace:!0,children:"\u5BB9\u5668\u5217\u8868"}),key:"list"},{label:(0,a.jsx)(x.Link,{to:"/app/list/recycle",replace:!0,children:"\u56DE\u6536\u7AD9"}),key:"recycle"}]})},toolBarRender:c.showLite?!1:function(){return[(0,a.jsx)(ne.u,{access:"canSeeContainerListManageDelete",children:(0,a.jsx)(y.Z,{action:function(){return(0,z.KK)()},onSuccess:function(){var u,s;return!((u=o.current)===null||u===void 0)&&u.reloadAndRest&&((s=o.current)===null||s===void 0||s.reloadAndRest()),!0},onError:function(){var u,s;return!((u=o.current)===null||u===void 0)&&u.reset&&((s=o.current)===null||s===void 0||s.reset()),!0},confirm:"notification.confirm.title",children:"\u6E05\u7406\u5DF2\u505C\u6B62\u5BB9\u5668"})},"clear")]},columnsState:(0,Ee.j)("app-list")})]})}),b=j,Z=n(90078),V=n(28036);function I(){return(0,a.jsx)(Z._z,{header:{extra:[(0,a.jsx)(ne.u,{access:"canSeeContainerListManageCreate",children:(0,a.jsx)(x.Link,{to:"/app/create/image",children:(0,a.jsx)(V.ZP,{type:"primary",children:"\u521B\u5EFA\u5BB9\u5668"})})},"create")]},children:(0,a.jsx)(b,{},"appList")})}},67255:function(De,J,n){n.d(J,{O:function(){return Q},j:function(){return O}});function Q(){var W=localStorage.getItem("dpanel-pagesize");return W=="all"?!1:{showSizeChanger:!0,defaultPageSize:parseInt(W!=null?W:"20")}}function O(W){var m="dpanel-table-column-".concat(W),S={};if(localStorage.getItem(m)){var D;S=JSON.parse((D=localStorage.getItem(m))!==null&&D!==void 0?D:"{}")}return{defaultValue:S,onChange:function(_){localStorage.setItem("dpanel-table-column-".concat(W),JSON.stringify(_))}}}}}]);
