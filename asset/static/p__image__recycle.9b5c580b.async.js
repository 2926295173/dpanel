"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4202],{45742:function(W,E,n){n.d(E,{Z:function(){return R}});var I=n(87462),u=n(67294),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656zM492 400h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 144h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 144h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H492c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zM340 368a40 40 0 1080 0 40 40 0 10-80 0zm0 144a40 40 0 1080 0 40 40 0 10-80 0zm0 144a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"profile",theme:"outlined"},l=m,c=n(84089),P=function(g,M){return u.createElement(c.Z,(0,I.Z)({},g,{ref:M,icon:l}))},O=u.forwardRef(P),R=O},80821:function(W,E,n){n.d(E,{Z:function(){return M}});var I=n(5574),u=n.n(I),m=n(93246),l=n(54006),c=n(31418),P=n(86738),O=n(14726),R=n(83062),o=n(67294),g=n(85893);function M(t){var A=(0,o.useState)(!1),a=u()(A,2),d=a[0],C=a[1],j=c.Z.useApp(),B=(0,l.useIntl)(),T=function(){C(!0),t.action().then(function(h){if(C(!1),typeof t.onSuccess=="function"&&t.onSuccess(h),t.messageSuccess){var f="";typeof t.messageSuccess=="function"?f=t.messageSuccess(h):f=t.messageSuccess,f.indexOf(".")>-1&&(f=B.formatMessage({id:f})),t.asynced?(0,m.Rk)(j,f):(0,m.$h)(j,f)}}).catch(function(h){C(!1),typeof t.onError=="function"&&t.onError(h)})};return t.confirm?(0,g.jsx)(P.Z,{style:{width:500},title:"\u63D0\u793A",description:t.confirm,onConfirm:T,okText:"Yes",cancelText:"No",children:(0,g.jsx)(O.ZP,{disabled:t.disabled,icon:t.icon,loading:d,danger:t.danger,type:t.type,children:t.children})}):(0,g.jsx)(R.Z,{title:t.tips,children:(0,g.jsx)(O.ZP,{disabled:t.disabled,icon:t.icon,loading:d,onClick:T,danger:t.danger,type:t.type,children:t.children})})}},94359:function(W,E,n){n.d(E,{Z:function(){return A}});var I=n(67294),u=n(3089),m=n(98165),l=n(18429),c=n(8751),P=n(14313),O=n(30159),R=n(87740),o=n(66309),g=n(83062),M=n(54006),t=n(85893);function A(a){var d=(0,t.jsx)(t.Fragment,{});if(a.status=="0"&&(d=(0,t.jsx)(o.Z,{icon:(0,t.jsx)(u.Z,{}),color:"default",children:"waiting"})),a.status=="10"&&(d=(0,t.jsx)(o.Z,{icon:(0,t.jsx)(m.Z,{spin:!0}),color:"processing",children:"processing"})),a.status=="20"&&(d=(0,t.jsx)(o.Z,{icon:(0,t.jsx)(l.Z,{}),color:"error",children:"error"})),a.status=="30"&&(d=(0,t.jsx)(o.Z,{icon:(0,t.jsx)(c.Z,{}),color:"success",children:"success"})),a.status=="running"){var C,j;d=(0,t.jsx)(o.Z,{icon:(0,t.jsx)(P.Z,{}),color:"success",children:(C=a.message)!==null&&C!==void 0&&C.showInTag?(j=a.message)===null||j===void 0?void 0:j.content:a.status})}if(a.status=="paused"){var B,T;d=(0,t.jsx)(o.Z,{icon:(0,t.jsx)(O.Z,{}),children:(B=a.message)!==null&&B!==void 0&&B.showInTag?(T=a.message)===null||T===void 0?void 0:T.content:a.status})}if(a.status=="restarting"||a.status=="waiting"){var U,h;d=(0,t.jsx)(o.Z,{icon:(0,t.jsx)(R.Z,{}),children:(U=a.message)!==null&&U!==void 0&&U.showInTag?(h=a.message)===null||h===void 0?void 0:h.content:a.status})}if(a.status=="exited"||a.status=="dead"||a.status=="removing"){var f,L;d=(0,t.jsx)(o.Z,{icon:(0,t.jsx)(l.Z,{}),color:"warning",children:(f=a.message)!==null&&f!==void 0&&f.showInTag?(L=a.message)===null||L===void 0?void 0:L.content:a.status})}return a.link&&(d=(0,t.jsx)(M.Link,{to:a.link,children:d})),a.message&&(d=(0,t.jsx)(g.Z,{placement:a.message.placement,title:a.message.content,children:d})),(0,t.jsx)(t.Fragment,{children:d})}},78451:function(W,E,n){n.d(E,{Z:function(){return m}});var I=n(67294),u=n(85893);function m(l){return(0,u.jsx)("span",{style:{wordBreak:"break-word"},children:l.content})}},52548:function(W,E,n){n.r(E),n.d(E,{default:function(){return y}});var I=n(15009),u=n.n(I),m=n(99289),l=n.n(m),c=n(90078),P=n(10641),O=n(37476),R=n(14726),o=n(42075),g=n(83062),M=n(66309),t=n(96074),A=n(50136),a=n(54006),d=n(18148),C=n(94359),j=n(95089),B=n(43425),T=n(45742),U=n(80821),h=n(67294),f=n(67255),L=n(78451),r=n(85893);function y(){var i=(0,h.useRef)();return(0,r.jsx)(c._z,{header:{extra:[(0,r.jsx)(R.ZP,{type:"primary",children:(0,r.jsx)(a.Link,{to:"/image/create",children:"\u521B\u5EFA\u955C\u50CF"})},"create"),(0,r.jsx)(R.ZP,{children:"\u62C9\u53D6\u955C\u50CF"},"pull")]},children:(0,r.jsx)(P.Z,{scroll:{x:"max-content"},actionRef:i,rowKey:"id",columns:[{title:"\u540D\u79F0",render:function(s,e,x,D){return(0,r.jsx)(o.Z,{direction:"vertical",style:{textAlign:"left"},children:e.imageInfo&&e.imageInfo.info.Id?(0,r.jsx)(a.Link,{to:"/image/detail/".concat(e.imageInfo.info.Id),children:(0,r.jsxs)(g.Z,{title:"\u67E5\u770B\u955C\u50CF",children:[" ",e.title]})},"detail"):e.title},e.id)}},{title:"\u6700\u65B0Tag",dataIndex:"tag",search:!1,render:function(s,e,x,D){return e.imageInfo?e.imageInfo.info.Id==""?(0,r.jsx)(M.Z,{children:"none"},"none"):(0,r.jsx)(o.Z,{direction:"vertical",style:{textAlign:"left"},children:e.imageInfo.info.RepoTags.map(function(v,Z){return(0,r.jsx)(M.Z,{color:"#2db7f5",children:v},Z)})},e.id):(0,r.jsx)(r.Fragment,{})}},{title:"\u955C\u50CFId",search:!1,copyable:!0,width:300,render:function(s,e,x,D,v){return(0,r.jsx)(L.Z,{content:e.imageInfo&&e.imageInfo.info.Id})}},{title:"\u6784\u5EFA\u72B6\u6001",width:150,ellipsis:!0,search:!1,render:function(s,e,x,D){return[(0,r.jsx)("div",{children:(0,r.jsx)(C.Z,{status:e.status},e.id)},e.id)]}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:150,render:function(s,e,x,D){return(0,r.jsxs)(o.Z,{split:(0,r.jsx)(t.Z,{type:"vertical"}),children:[(0,r.jsx)(a.Link,{to:"/image/create?id="+e.id,type:"link",children:(0,r.jsx)(g.Z,{title:"\u518D\u6B21\u6784\u5EFA",children:(0,r.jsx)(B.Z,{})})},"rebuild"),(0,r.jsx)(O.Y,{title:"\u6784\u5EFA\u65E5\u5FD7",submitter:!1,trigger:(0,r.jsx)(a.Link,{to:"#",children:(0,r.jsx)(g.Z,{title:"\u6784\u5EFA\u65E5\u5FD7",children:(0,r.jsx)(T.Z,{})})},e.id),children:(0,r.jsx)(j.ZP,{theme:"dark",height:"500px",value:e.message})},"log")]})}}],request:function(){var _=l()(u()().mark(function s(e,x,D){var v,Z,p;return u()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,d.Xn)({page:(v=e.current)!==null&&v!==void 0?v:1,pageSize:(Z=e.pageSize)!==null&&Z!==void 0?Z:10});case 2:return p=K.sent,K.abrupt("return",{data:p.data.list,success:!0,total:p.data.total});case 4:case"end":return K.stop()}},s)}));return function(s,e,x){return _.apply(this,arguments)}}(),pagination:(0,f.O)(),search:{collapsed:!1},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(s){var e=s.selectedRowKeys;return(0,r.jsx)(o.Z,{size:16,children:(0,r.jsx)(U.Z,{danger:!0,type:"primary",action:function(){return(0,d.$q)({id:e})},onSuccess:function(){var D,v;return!((D=i.current)===null||D===void 0)&&D.reloadAndRest&&((v=i.current)===null||v===void 0||v.reloadAndRest()),!0},onError:function(){var D,v;return!((D=i.current)===null||D===void 0)&&D.reset&&((v=i.current)===null||v===void 0||v.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"})})},tableExtraRender:function(){return(0,r.jsx)(A.Z,{mode:"horizontal",selectedKeys:["build"],items:[{label:(0,r.jsx)(a.Link,{to:"/image/list",replace:!0,children:"\u5168\u90E8\u955C\u50CF"}),key:"all"},{label:(0,r.jsx)(a.Link,{to:"/image/list/build",replace:!0,children:"\u6784\u5EFA\u4EFB\u52A1"}),key:"build"}]})}})})}},18148:function(W,E,n){n.d(E,{$q:function(){return a},Fj:function(){return f},KG:function(){return P},KX:function(){return r},T8:function(){return t},Xn:function(){return g},ao:function(){return C},c5:function(){return U},c7:function(){return B}});var I=n(15009),u=n.n(I),m=n(99289),l=n.n(m),c=n(54006);function P(i){return O.apply(this,arguments)}function O(){return O=l()(u()().mark(function i(_){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/app/image/get-list",{method:"POST",data:_}));case 1:case"end":return e.stop()}},i)})),O.apply(this,arguments)}function R(i){return o.apply(this,arguments)}function o(){return o=_asyncToGenerator(_regeneratorRuntime().mark(function i(_){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request("/api/app/log/image-build",{method:"POST",data:_});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},i)})),o.apply(this,arguments)}function g(i){return M.apply(this,arguments)}function M(){return M=l()(u()().mark(function i(_){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/app/image/get-list-build",{method:"POST",data:_}));case 1:case"end":return e.stop()}},i)})),M.apply(this,arguments)}function t(i){return A.apply(this,arguments)}function A(){return A=l()(u()().mark(function i(_){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.request)("/api/app/image/get-build-task",{method:"POST",data:_});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},i)})),A.apply(this,arguments)}function a(i){return d.apply(this,arguments)}function d(){return d=l()(u()().mark(function i(_){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.request)("/api/app/image/delete-build-task",{method:"POST",data:_});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},i)})),d.apply(this,arguments)}function C(i){return j.apply(this,arguments)}function j(){return j=l()(u()().mark(function i(_){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.request)("/api/app/image/image-delete",{method:"POST",data:_});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},i)})),j.apply(this,arguments)}function B(){return T.apply(this,arguments)}function T(){return T=l()(u()().mark(function i(){return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,c.request)("/api/app/image/image-prune",{method:"POST"});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},i)})),T.apply(this,arguments)}function U(){return h.apply(this,arguments)}function h(){return h=l()(u()().mark(function i(){return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,c.request)("/api/app/image/build-prune",{method:"POST"});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},i)})),h.apply(this,arguments)}function f(i){return L.apply(this,arguments)}function L(){return L=l()(u()().mark(function i(_){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.request)("/api/app/image/update-title",{method:"POST",data:_});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},i)})),L.apply(this,arguments)}function r(i){return y.apply(this,arguments)}function y(){return y=l()(u()().mark(function i(_){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("/api/app/image/tag-sync",{method:"POST",data:_}));case 1:case"end":return e.stop()}},i)})),y.apply(this,arguments)}},67255:function(W,E,n){n.d(E,{O:function(){return I},j:function(){return u}});function I(){var m,l=parseInt((m=localStorage.getItem("dpanel-pagesize"))!==null&&m!==void 0?m:"0");return{showSizeChanger:!0,defaultPageSize:l!=null?l:20}}function u(m){var l="dpanel-table-column-".concat(m),c={};if(localStorage.getItem(l)){var P;c=JSON.parse((P=localStorage.getItem(l))!==null&&P!==void 0?P:"{}")}return{defaultValue:c,onChange:function(R){localStorage.setItem("dpanel-table-column-".concat(m),JSON.stringify(R))}}}}}]);
