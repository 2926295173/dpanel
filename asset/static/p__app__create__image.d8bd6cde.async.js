(self.webpackChunk=self.webpackChunk||[]).push([[3985],{64789:function(se,K,n){"use strict";n.d(K,{Z:function(){return _}});var M=n(87462),c=n(67294),O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},D=O,g=n(84089),x=function(Z,l){return c.createElement(g.Z,(0,M.Z)({},Z,{ref:l,icon:D}))},I=c.forwardRef(x),_=I},63434:function(se,K,n){"use strict";var M=n(1413),c=n(45987),O=n(22270),D=n(84567),g=n(67294),x=n(90789),I=n(35510),_=n(85893),m=["options","fieldProps","proFieldProps","valueEnum"],Z=g.forwardRef(function(p,z){var a=p.options,t=p.fieldProps,X=p.proFieldProps,ee=p.valueEnum,U=(0,c.Z)(p,m);return(0,_.jsx)(I.Z,(0,M.Z)({ref:z,valueType:"checkbox",valueEnum:(0,O.h)(ee,void 0),fieldProps:(0,M.Z)({options:a},t),lightProps:(0,M.Z)({labelFormatter:function(){return(0,_.jsx)(I.Z,(0,M.Z)({ref:z,valueType:"checkbox",mode:"read",valueEnum:(0,O.h)(ee,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,M.Z)({options:a},t),proFieldProps:X},U))}},U.lightProps),proFieldProps:X},U))}),l=g.forwardRef(function(p,z){var a=p.fieldProps,t=p.children;return(0,_.jsx)(D.Z,(0,M.Z)((0,M.Z)({ref:z},a),{},{children:t}))}),P=(0,x.G)(l,{valuePropName:"checked"}),S=P;S.Group=Z,K.Z=S},31199:function(se,K,n){"use strict";var M=n(1413),c=n(45987),O=n(67294),D=n(35510),g=n(85893),x=["fieldProps","min","proFieldProps","max"],I=function(Z,l){var P=Z.fieldProps,S=Z.min,p=Z.proFieldProps,z=Z.max,a=(0,c.Z)(Z,x);return(0,g.jsx)(D.Z,(0,M.Z)({valueType:"digit",fieldProps:(0,M.Z)({min:S,max:z},P),ref:l,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:p},a))},_=O.forwardRef(I);K.Z=_},90672:function(se,K,n){"use strict";var M=n(1413),c=n(45987),O=n(67294),D=n(35510),g=n(85893),x=["fieldProps","proFieldProps"],I=function(m,Z){var l=m.fieldProps,P=m.proFieldProps,S=(0,c.Z)(m,x);return(0,g.jsx)(D.Z,(0,M.Z)({ref:Z,valueType:"textarea",fieldProps:l,proFieldProps:P},S))};K.Z=O.forwardRef(I)},91058:function(se,K,n){"use strict";var M=n(19632),c=n.n(M),O=n(97857),D=n.n(O),g=n(5574),x=n.n(g),I=n(89035),_=n(64317),m=n(5966),Z=n(38345),l=n(17186),P=n(24739),S=n(42075),p=n(28036),z=n(85576),a=n(67294),t=n(95089),X=n(12491),ee=n(62597),U=n(79245),V=n(85893),k="docker-image",ae=(0,a.forwardRef)(function(N,me){var ce=(0,a.useState)(k),u=x()(ce,2),A=u[0],b=u[1],h=(0,a.useRef)(),oe=(0,a.useState)(""),Ee=x()(oe,2),ye=Ee[0],Oe=Ee[1],Le=function(){A!="code"?b("code"):b(k)};(0,a.useImperativeHandle)(me,function(){return{addEnvItem:function(H,te){var Q,ue=(Q=h.current)===null||Q===void 0?void 0:Q.getList(),ve=!1;if(ue==null||ue.map(function(Ce){if(Ce.name==H){ve=!0;return}}),!ve){var e;(e=h.current)===null||e===void 0||e.add({name:H,value:te})}},clear:function(){var H;(H=h.current)===null||H===void 0||(H=H.getList())===null||H===void 0||H.map(function(te,Q){var ue;(ue=h.current)===null||ue===void 0||ue.remove(Q)})}}});function Me(T){try{var H,te;T==""&&(T=we());for(var Q=(H=(te=h.current)===null||te===void 0||(te=te.getList())===null||te===void 0?void 0:te.length)!==null&&H!==void 0?H:0,ue=Q;ue>=0;ue--){var ve;(ve=h.current)===null||ve===void 0||ve.remove(ue)}var e=T.split(`
`),Ce=0;e.map(function(De){var be,We=De.split("=");We.length<2||((be=h.current)===null||be===void 0||be.add({name:We[0],value:We.slice(1).join("=")},Ce),Ce++)})}catch(De){console.log(De)}}function we(){if(h&&h.current&&h.current.getList){var T,H=(T=h.current)===null||T===void 0?void 0:T.getList();if(H){var te=[];return H.map(function(Q){te.push("".concat(Q.name,"=").concat(Q.value))}),te.join(`
`)}else return""}else return""}function Ue(T){var H,te,Q,ue,ve={},e={help:T&&T.label?T.label:"",name:"value",label:"\u53D8\u91CF\u503C",rules:[{required:N.requireValue?!0:(0,U.y)((H=T.rule)===null||H===void 0?void 0:H.kind,ee.fp.EnvValueRuleRequired)}],disabled:N.showDisableValue||(0,U.y)((te=T.rule)===null||te===void 0?void 0:te.kind,ee.fp.EnvValueRuleDisabled)};if((0,U.y)((Q=T.rule)===null||Q===void 0?void 0:Q.kind,ee.fp.EnvValueTypeSelect)){var Ce;return(0,V.jsx)(_.Z,D()(D()({fieldProps:ve},e),{},{width:N.showInDrawer?"sm":"md",options:((Ce=T.rule)===null||Ce===void 0?void 0:Ce.option)&&T.rule.option.map(function(De){return{label:De.name,value:De.value}}),initialValue:T.value}))}else return(0,U.y)((ue=T.rule)===null||ue===void 0?void 0:ue.kind,ee.fp.EnvValueTypeNumber)?(0,V.jsx)(m.Z,D()(D()({fieldProps:ve},e),{},{width:N.showInDrawer?"sm":"md",rules:[].concat(c()(e.rules),[{pattern:new RegExp("^[0-9]*$")}]),help:e.help+",\u6570\u503C\u7C7B\u578B"})):(0,V.jsx)(m.Z,D()(D()({fieldProps:ve},e),{},{width:N.showInDrawer?"sm":"md"}))}return(0,V.jsxs)(Z.Z,{ghost:N.showCardGhost,title:N.label?N.label:null,headerBordered:!0,extra:(N.showCodeMode||N.showImportButton)&&(0,V.jsxs)(S.Z,{children:[N.showImportButton&&(0,V.jsx)("div",{style:{marginBottom:"-25px"},children:(0,V.jsx)(X.Z,{title:"\u5BFC\u5165 env \u6587\u4EF6",onImport:function(H){return Me(H),!0},onLoad:function(H){if(H.indexOf("=")<0)throw new Error("\u5BFC\u5165env\u6587\u4EF6\u9519\u8BEF");return!0}})}),N.showCodeMode?(0,V.jsx)(p.ZP,{icon:(0,V.jsx)(I.Z,{}),type:A=="code"?"primary":"default",onClick:Le,children:"\u4EE3\u7801\u6A21\u5F0F"},"code"):""]}),children:[(0,V.jsx)(l.u,{name:N.name?N.name:"environment",actionRef:h,creatorButtonProps:N.showAddButton?{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u73AF\u5883\u53D8\u91CF"}:!1,copyIconProps:!1,deleteIconProps:N.showDeleteButton,min:100,label:N.listLabel,children:function(H,te,Q){var ue=Q.getCurrentRowData();return(0,V.jsxs)(P.UW,{style:{marginBottom:"5px"},children:[(0,V.jsx)(m.Z,{width:N.showInDrawer?"sm":"md",name:"name",label:"\u53D8\u91CF\u540D",required:!0,rules:[{required:!0}],disabled:N.showDisableName,placeholder:"\u8F93\u5165\u53D8\u91CF\u540D\u79F0"}),Ue(ue)]})}}),N.showCodeMode&&(0,V.jsx)(z.Z,{width:"800px",open:A=="code",onCancel:function(){return b("docker-image")},onOk:function(){Me(ye),b("docker-image")},children:(0,V.jsx)(t.ZP,{onChange:function(H){return Oe(H)},value:we(),height:"680px",theme:"light"})})]})});K.Z=ae},92067:function(se,K,n){"use strict";n.d(K,{Z:function(){return S}});var M=n(15009),c=n.n(M),O=n(99289),D=n.n(O),g=n(60335),x=n(64789),I=n(78099),_=n(42075),m=n(28036),Z=n(37413),l=n(5251),P=n(85893);function S(p){return(0,P.jsx)(I.Z,{columns:[{title:"\u5BB9\u5668\u540D\u79F0",dataIndex:"name",render:function(a,t,X,ee){return(0,P.jsx)(_.Z,{direction:"vertical",style:{textAlign:"left"},children:t==null?void 0:t.Names.map(function(U){return(0,l.fi)(U,"/")})},t.Id)}},{title:"\u7AEF\u53E3",dataIndex:"ports",search:!1,render:function(a,t,X,ee){var U=[],V=[];return t!=null&&t.Ports&&t.Ports.map(function(k,ae){k.PublicPort?U.push(k):V.push(k)}),(0,P.jsx)(Z.Z,{publicPort:U,privatePort:V,domain:[]})}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",ellipsis:!0,width:100,render:function(a,t,X,ee){return[(0,P.jsx)(m.ZP,{type:"link",onClick:D()(c()().mark(function U(){var V;return c()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,(0,g.jV)({md5:t.Id});case 2:V=ae.sent,p.onSelect&&p.onSelect(V.data.info);case 4:case"end":return ae.stop()}},U)})),children:(0,P.jsx)(x.Z,{})},t.Id)]}}],rowKey:"Id",request:function(){var z=D()(c()().mark(function a(t,X,ee){var U;return c()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,g.IE)({siteTitle:t.name});case 2:return U=k.sent,k.abrupt("return",{data:U.data.list,success:!0,total:U.data.list.length});case 4:case"end":return k.stop()}},a)}));return function(a,t,X){return z.apply(this,arguments)}}(),pagination:{pageSize:9}})}},52255:function(se,K,n){"use strict";n.d(K,{Z:function(){return O}});var M=n(67294),c=n(85893);function O(D){return(0,c.jsx)("div",{style:{display:D.show?"block":"none"},children:D.children})}},44349:function(se,K,n){"use strict";var M=n(97857),c=n.n(M),O=n(17186),D=n(5966),g=n(86250),x=n(67294),I=n(85893),_=(0,x.forwardRef)(function(m,Z){var l=(0,x.useRef)();(0,x.useImperativeHandle)(Z,function(){return{addItem:function(p,z){var a,t=(a=l.current)===null||a===void 0?void 0:a.getList(),X=!1;if(t==null||t.map(function(U){if(U.name==p){X=!0;return}}),!X){var ee;(ee=l.current)===null||ee===void 0||ee.add({name:p,value:z})}},clear:function(){var p;(p=l.current)===null||p===void 0||(p=p.getList())===null||p===void 0||p.map(function(z,a){var t;(t=l.current)===null||t===void 0||t.remove(a)})}}});var P={};return m.hideCopyButton===!0&&(P.copyIconProps=!1),m.hideDeleteButton===!0&&(P.deleteIconProps=!1),(0,I.jsx)(O.u,c()(c()({initialValue:m.initialValue,label:m.label,name:m.name,actionRef:l,creatorButtonProps:m.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(m.label?m.label:m.name)}:!1,min:m.min?m.min:0},P),{},{children:function(p,z,a){return(0,I.jsx)(g.Z,{justify:m.justify,gap:m.gap,children:m.items.map(function(t){return t.render?(0,I.jsx)("div",{children:t.render&&t.render(p,z,a)},"".concat(m.name,"-").concat(t.name,"-").concat(p.key)):(0,I.jsx)(D.Z,{width:t.width,name:t.name,label:t.label,required:t.required,rules:[{required:t.required}],disabled:t.disabled,placeholder:t.placeholder},"".concat(m.name,"-").concat(t.name,"-").concat(p.key))})})}}))});K.Z=_},12491:function(se,K,n){"use strict";n.d(K,{Z:function(){return _}});var M=n(24963),c=n(88484),O=n(62370),D=n(31418),g=n(28036),x=n(67294),I=n(85893);function _(m){var Z=(0,x.useContext)(M.Z),l=Z.message,P=Z.notice,S=Z.lang,p=(0,x.useRef)(null),z=D.Z.useApp(),a=function(){p.current&&(p.current.click(),p.current.onchange=function(X){if(!X||!X.target)return"";var ee=new FileReader;ee.onload=function(V){var k,ae,N=(k=V.target)===null||k===void 0?void 0:k.result;if(m.onLoad)try{m.onLoad&&m.onLoad(N)}catch(me){P.error(me);return}typeof m.onImport=="function"&&(l.success("\u6210\u529F\u5BFC\u5165 ".concat(m.title)),m.onImport(N)),(ae=p.current)!==null&&ae!==void 0&&ae.value&&(p.current.value="")};var U=X.target;if(U.files)try{ee.readAsText(U.files[0])}catch(V){P.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(O.Z,{children:(0,I.jsx)(g.ZP,{icon:(0,I.jsx)(c.Z,{}),block:!0,onClick:a,children:m.title})}),(0,I.jsx)("input",{style:{display:"none"},type:"file",ref:p,name:"importFileInput"})]})}},46442:function(se,K,n){"use strict";var M=n(15009),c=n.n(M),O=n(99289),D=n.n(O),g=n(5574),x=n.n(g),I=n(67294),_=n(14946),m=n(64789),Z=n(78099),l=n(28036),P=n(85265),S=n(42075),p=n(66309),z=n(28230),a=n(85893),t=(0,I.forwardRef)(function(X,ee){(0,I.useImperativeHandle)(ee,function(){return{show:function(){ae(!0)}}});var U=(0,I.useState)(!1),V=x()(U,2),k=V[0],ae=V[1],N=(0,I.useRef)();return(0,a.jsxs)(a.Fragment,{children:[X.showTriggerButton&&(0,a.jsx)(l.ZP,{onClick:function(){ae(!0)},children:"\u52A0\u5165\u7F51\u7EDC"}),(0,a.jsx)(P.Z,{title:"\u9009\u62E9\u7F51\u7EDC",width:800,footer:!1,open:k,onClose:function(){return ae(!1)},extra:(0,a.jsx)(S.Z,{children:(0,a.jsx)(z.Z,{onFinish:function(){var ce,u;!((ce=N.current)===null||ce===void 0)&&ce.reloadAndRest&&((u=N.current)===null||u===void 0||u.reloadAndRest())}},"create")}),children:(0,a.jsx)(Z.Z,{rowKey:"Name",toolBarRender:!1,actionRef:N,columns:[{title:"\u540D\u79F0",dataIndex:"Name",render:function(ce,u,A,b,h){return u.Name=="none"||u.Name=="bridge"||u.Name=="host"?(0,a.jsxs)(a.Fragment,{children:[u.Name," ",(0,a.jsx)(p.Z,{color:"blue",children:"System"})]}):(0,a.jsx)(a.Fragment,{children:ce})}},{title:"\u7C7B\u578B",ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"IPAM Driver",ellipsis:!0,width:120,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4 IPAM Network",search:!1,dataIndex:["IPAM","Config",0,"Subnet"],render:function(ce,u,A,b,h){return(0,a.jsxs)(S.Z,{children:[u.IPAM.Config&&u.IPAM.Config[0]&&"".concat(u.IPAM.Config[0].Subnet," - ").concat(u.IPAM.Config[0].Gateway),u.IPAM.Config&&u.IPAM.Config[1]&&"".concat(u.IPAM.Config[1].Subnet," - ").concat(u.IPAM.Config[1].Gateway)]})}},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(ce,u,A,b,h){return[u.Name!="none"&&u.Name!="bridge"&&u.Name!="host"&&(0,a.jsx)(l.ZP,{type:"link",onClick:function(){X.onSelect(u),ae(!1)},children:(0,a.jsx)(m.Z,{})},u.Id)]}}],request:function(){var me=D()(c()().mark(function ce(u,A,b){var h;return c()().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,(0,_.jR)({name:u.Name});case 2:return h=Ee.sent,Ee.abrupt("return",{data:h.data.list,success:!0,total:h.data.list.length});case 4:case"end":return Ee.stop()}},ce)}));return function(ce,u,A){return me.apply(this,arguments)}}(),pagination:{pageSize:10}})})]})});K.Z=t},35880:function(se,K,n){"use strict";var M=n(67294),c=(0,M.createContext)({});K.Z=c},17121:function(se,K,n){"use strict";n.r(K),n.d(K,{default:function(){return Hn}});var M=n(15009),c=n.n(M),O=n(99289),D=n.n(O),g=n(5574),x=n.n(g),I=n(90078),_=n(38345),m=n(97269),Z=n(2236),l=n(5966),P=n(24739),S=n(97462),p=n(30291),z=n(92398),a=n(38925),t=n(67294),X=n(35880),ee=n(78099),U=n(62370),V=n(85576),k=n(42075),ae=n(96074),N=n(25593),me=n(83062),ce=n(71230),u=n(15746),A=n(28036),b=n(3393),h=n(18148),oe=n(5251),Ee=n(64789),ye=n(87462),Oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885 780H165c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM400 325.7h73.9V664c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V325.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 171a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13z"}}]},name:"to-top",theme:"outlined"},Le=Oe,Me=n(84089),we=function(w,y){return t.createElement(Me.Z,(0,ye.Z)({},w,{ref:y,icon:Le}))},Ue=t.forwardRef(we),T=Ue,H=n(85060),te=n(28307),Q=n(78451),ue=n(99861),ve=n(80821),e=n(85893);function Ce(f){var w=(0,t.useState)(!1),y=x()(w,2),L=y[0],F=y[1],$=(0,t.useRef)(),v=(0,t.useContext)(X.Z),d=v.createFormRef,W=v.volumeListRef,Y=v.createEnvRef,E=v.domainRef,i=(0,t.useRef)(),R=function(){var C=D()(c()().mark(function j(s){var B,q,G,J,Pe,he,fe,le,pe,Ie,Ae,ke,_e;return c()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,b.YU)({md5:s});case 2:return J=o.sent,f.redeploy||(le=(Pe=d.current)===null||Pe===void 0?void 0:Pe.getFieldsValue(),(he=d.current)===null||he===void 0||he.resetFields(),(fe=d.current)===null||fe===void 0||fe.setFieldsValue({siteName:le.siteName,siteTitle:le.siteTitle,useBridgeNetwork:le.useBridgeNetwork})),J.data.info.Config.Env&&J.data.info.Config.Env.map(function(de){var r,ge=de.split("=");(r=Y.current)===null||r===void 0||r.addEnvItem(ge[0],ge.slice(1).join("="))}),(B=d.current)===null||B===void 0||B.setFieldValue("imageName",s),(q=d.current)===null||q===void 0||q.setFieldValue("workDir",J.data.info.Config.WorkingDir),(G=E.current)===null||G===void 0||G.setExposePort(J.data.info.Config.ExposedPorts),f.redeploy||(J.data.info.Config.Volumes?(ke=[],Object.keys(J.data.info.Config.Volumes).map(function(de,r){ke.push(de)}),(Ae=W.current)===null||Ae===void 0||Ae.setDefaultDestPath(ke)):(_e=W.current)===null||_e===void 0||_e.setDefaultDestPath([]),(pe=W.current)===null||pe===void 0||pe.initImageRootfs(s),(Ie=d.current)===null||Ie===void 0||Ie.setFieldsValue({workDir:{value:"",useDefault:!0,default:J.data.info.Config.WorkingDir},user:{value:"",useDefault:!0,default:J.data.info.Config.User},command:{value:"",useDefault:!0,default:J.data.info.Config.Cmd&&J.data.info.Config.Cmd.join(" ")},entrypoint:{value:"",useDefault:!0,default:J.data.info.Config.Entrypoint&&J.data.info.Config.Entrypoint.join(" ")}})),o.abrupt("return",!0);case 10:case"end":return o.stop()}},j)}));return function(s){return C.apply(this,arguments)}}();return(0,t.useEffect)(function(){f.fromImageId&&R(f.fromImageId)},[f.fromImageId]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(V.Z,{open:L,width:1024,title:"\u9009\u62E9\u955C\u50CF",footer:!1,onCancel:function(){return F(!1)},children:(0,e.jsx)(ee.Z,{scroll:{x:"max-content"},columns:[{title:"Id",dataIndex:"Id",search:!1,width:200,render:function(j,s,B,q,G){return(0,e.jsx)(Q.Z,{content:s.Id})}},{title:"\u955C\u50CF\u540D\u79F0",dataIndex:"tag",width:200,render:function(j,s,B,q){return(0,e.jsx)(Q.Z,{content:s.RepoTags[0]})}},{title:"\u521B\u5EFA\u65E5\u671F",dataIndex:"Created",ellipsis:!0,search:!1,width:"180px",render:function(j,s,B,q){return(0,e.jsx)("div",{children:(0,oe.ZM)(s.Created*1e3)},s.Id)},sorter:function(j,s){return j.Created-s.Created}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:80,render:function(j,s,B,q){return(0,e.jsxs)(k.Z,{split:(0,e.jsx)(ae.Z,{type:"vertical"}),children:[(0,e.jsx)(ve.Z,{icon:(0,e.jsx)(Ee.Z,{}),tips:"\u4F7F\u7528\u955C\u50CF",action:function(){return R(s.RepoTags[0])},type:"link",onSuccess:function(){F(!1)}},"addImage"),(0,e.jsx)(N.Z.Link,{onClick:D()(c()().mark(function G(){var J;return c()().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:s.RepoTags[0]&&((J=i.current)===null||J===void 0||J.setImageName(s.RepoTags[0]));case 1:case"end":return he.stop()}},G)})),children:(0,e.jsx)(me.Z,{title:"\u66F4\u65B0\u955C\u50CF",children:(0,e.jsx)(T,{})})},"updateImage")]})}}],request:function(){var C=D()(c()().mark(function j(s,B,q){var G,J,Pe,he,fe;return c()().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return f.redeploy&&(J=(G=d.current)===null||G===void 0?void 0:G.getFieldValue("imageName"),s.tag=J?J.split(":")[0]:s.tag),pe.next=3,(0,h.KG)({tag:s.tag});case 3:return Pe=pe.sent,he=0,fe=[],Pe.data.list&&(fe=Pe.data.list.flatMap(function(Ie){return Ie.RepoTags.map(function(Ae){return{Key:he++,Id:Ie.Id,Created:Ie.Created,RepoTags:[Ae]}})})),pe.abrupt("return",{data:fe,success:!0,total:fe.length});case 8:case"end":return pe.stop()}},j)}));return function(j,s,B){return C.apply(this,arguments)}}(),toolBarRender:function(){return[(0,e.jsx)(te.Z,{onClick:function(){F(!1)},buttonType:"primary",ref:i,onFinish:function(s){R(s)}},"remote")]},formRef:$,rowKey:"Key",pagination:{pageSize:5}})},"imageTableList"),(0,e.jsxs)(ce.Z,{children:[(0,e.jsx)(u.Z,{span:14,children:(0,e.jsx)(l.Z,{label:"\u955C\u50CF",tooltip:f.redeploy?"\u66F4\u65B0\u5BB9\u5668\u65F6,\u53EA\u53EF\u4EE5\u9009\u62E9\u8BE5\u955C\u50CF\u4E0B\u7684\u4E0D\u540Ctag.\u4E5F\u53EF\u4EE5\u5F3A\u5236\u66F4\u65B0\u5DF2\u90E8\u7F72tag,\u66F4\u6B21\u90E8\u7F72":"\u65B0\u5EFA\u5BB9\u5668\u65F6,\u53EF\u4EE5\u4F7F\u7528\u672C\u5730\u955C\u50CF,\u4E5F\u53EF\u4EE5\u4E0B\u8F7D\u5168\u65B0\u7684\u955C\u50CF\u6216\u662F\u66F4\u65B0\u672C\u5730\u955C\u50CF\u7684tag",name:"imageName",disabled:!0,placeholder:"\u8BF7\u9009\u62E9\u955C\u50CF\uFF0C\u5982\u679C\u662F\u8FDC\u7A0B\u955C\u50CF\u8BF7\u5148\u4E0B\u8F7D",rules:[{required:!0}],required:!0})}),(0,e.jsx)(u.Z,{children:(0,e.jsx)(U.Z,{label:" ",children:(0,e.jsxs)(k.Z.Compact,{children:[(0,e.jsx)(A.ZP,{type:"primary",onClick:function(){return F(!0)},children:f.redeploy?"\u66F4\u6362\u955C\u50CF":"\u9009\u62E9\u955C\u50CF"},"showBtn"),(0,e.jsx)(S.Z,{name:["imageName"],children:function(j){var s=j.imageName;return f.redeploy?(0,e.jsx)(ue.Z,{image:[s],trigger:(0,e.jsx)(me.Z,{title:"\u91CD\u65B0\u62C9\u53D6\u5F53\u524D\u955C\u50CF",children:(0,e.jsx)(A.ZP,{icon:(0,e.jsx)(H.Z,{}),children:"\u62C9\u53D6\u5F53\u524D\u955C\u50CF"})})}):(0,e.jsx)(te.Z,{onClick:function(){F(!1)},ref:i,onFinish:function(q){R(q)}},"remote")}})]})})})]})]})}var De=n(60335),be=n(51042),We=n(63434),Se=n(17186),on=n(85265),ln=n(92067),sn=(0,t.forwardRef)(function(f,w){var y=(0,t.useState)(!1),L=x()(y,2),F=L[0],$=L[1],v=(0,t.useRef)(),d=function(E){var i=(0,t.useState)([]),R=x()(i,2),C=R[0],j=R[1];return(0,t.useEffect)(function(){(0,De.jV)({md5:E.name}).then(function(s){var B;return j((B=s.data.info.Config.Env)!==null&&B!==void 0?B:[]),!0})},[]),(0,e.jsxs)(_.Z,{bordered:!0,extra:E.action,style:{marginBottom:10},children:[(0,e.jsx)(_.Z,{title:"\u5173\u8054\u4FE1\u606F",children:(0,e.jsxs)(P.UW,{children:[(0,e.jsx)(l.Z,{label:"\u5BB9\u5668\u540D\u79F0",name:"name",width:"md",readonly:!0}),(0,e.jsx)(l.Z,{label:"\u8BBF\u95EEHostName",name:"alise",width:"md",tooltip:"\u901A\u8FC7\u914D\u7F6E\u6B64\u540D\u79F0\uFF0C\u5728\u5BB9\u5668\u5185\u90E8\u8FDB\u884C\u8BF7\u6C42\u8BBF\u95EE"}),(0,e.jsx)(We.Z,{label:"\u5173\u8054\u5B58\u50A8",name:"volume"})]})}),(0,e.jsx)(_.Z,{title:"\u73AF\u5883\u53D8\u91CF",children:(0,e.jsx)(k.Z,{direction:"vertical",children:C&&C.map(function(s,B){return(0,e.jsx)(N.Z.Text,{copyable:{icon:(0,e.jsx)(be.Z,{}),onCopy:function(){var G=s.split("=");f.onAddEnv(G[0],G[1])},tooltips:["add env","success"]},code:!0,ellipsis:{tooltip:s},style:{width:300},children:s},B)})},"linkEnv")})]})},W=function(E){var i,R,C=!1,j=(i=(R=v.current)===null||R===void 0?void 0:R.getList())!==null&&i!==void 0?i:[];if(j.map(function(B){B.name==E.name&&(C=!0)}),!C){var s;(s=v.current)===null||s===void 0||s.add(E)}};return(0,t.useImperativeHandle)(w,function(){return{setDefaultLink:function(E){E&&E.map(function(i){i.name!=""&&W(i)})}}}),(0,e.jsxs)(_.Z,{title:"\u5173\u8054\u5BB9\u5668",headerBordered:!0,children:[(0,e.jsx)(Se.u,{name:"links",actionRef:v,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5173\u8054"},actionGuard:{beforeAddRow:function(E,i){return $(!0),!1}},copyIconProps:!1,min:0,itemRender:function(E,i){return(0,e.jsx)(d,{action:E.action,name:i.record.name})}}),(0,e.jsx)(on.Z,{title:"\u9009\u62E9\u5BB9\u5668",width:800,footer:!1,open:F,onClose:function(){return $(!1)},children:(0,e.jsx)(ln.Z,{onSelect:function(E){W({name:E.Name,alise:E.Config.Hostname,volume:!1}),$(!1)}})})]})}),dn=sn,cn=n(91058),Ne=n(64317),mn=n(1413),fn=n(45987),vn=n(35510),hn=["fieldProps","request","params","proFieldProps"],pn=function(w,y){var L=w.fieldProps,F=w.request,$=w.params,v=w.proFieldProps,d=(0,fn.Z)(w,hn);return(0,e.jsx)(vn.Z,(0,mn.Z)({valueType:"treeSelect",fieldProps:L,ref:y,request:F,params:$,filedConfig:{customLightMode:!0},proFieldProps:v},d))},_n=t.forwardRef(pn),En=_n;function Cn(f){var w=function(L){L.target&&L.target.className&&L.target.className.indexOf(f.targetClassName)!==-1&&L.preventDefault()};return(0,t.useEffect)(function(){return window.addEventListener("wheel",w,{passive:!1}),function(){window.removeEventListener("wheel",w)}},[]),(0,e.jsx)(e.Fragment,{children:f.children})}var gn=(0,t.forwardRef)(function(f,w){var y=(0,t.useRef)(),L=(0,t.useContext)(X.Z),F=L.createFormRef,$=(0,t.useState)(),v=x()($,2),d=v[0],W=v[1];(0,t.useImperativeHandle)(w,function(){return{setDefaultDestPath:function(i){var R,C,j=(R=(C=y.current)===null||C===void 0?void 0:C.getList())!==null&&R!==void 0?R:[];i.length!=0&&i.filter(function(s){return s!=""}).map(function(s){var B=!1;if(j.map(function(G){if(G.dest==s){B=!0;return}}),!B){var q;(q=y.current)===null||q===void 0||q.add({dest:s,permission:"write",inImage:!0})}})},addUserVolumeItem:function(i,R){var C,j=(C=y.current)===null||C===void 0?void 0:C.getList(),s=!1;if(j==null||j.map(function(q){if(q.dest==R){s=!0;return}}),!s){var B;(B=y.current)===null||B===void 0||B.add({host:i,dest:R})}},initImageRootfs:Y}});var Y=function(){var E=D()(c()().mark(function i(R){var C,j;return c()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(!d){B.next=2;break}return B.abrupt("return");case 2:if(R){B.next=4;break}return B.abrupt("return");case 4:return B.next=6,(0,b.cD)({md5:R});case 6:C=B.sent,j={title:"/",value:"/",children:[]},C.data.list.map(function(q){var G=j;q.split("/").map(function(J,Pe,he){var fe;if(J){var le=(fe=G.children)===null||fe===void 0?void 0:fe.find(function(pe){return pe.title===J});le||(le={title:J,value:he.join("/"),children:[]},G.children?G.children.push(le):G.children=[le]),G=le}})}),j.children&&W(j.children);case 10:case"end":return B.stop()}},i)}));return function(R){return E.apply(this,arguments)}}();return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(_.Z,{title:"\u81EA\u5B9A\u4E49\u6302\u8F7D\u6216\u662F\u5B58\u50A8\u5377",tooltip:"\u6302\u8F7D\u53EF\u4EE5\u662F\u5BBF\u4E3B\u673A\u7684\u76EE\u5F55\u6216\u662F\u6587\u4EF6\uFF0C\u4E5F\u53EF\u4EE5\u6307\u5B9A\u5B58\u50A8\u5377\u540D\uFF08\u81EA\u52A8\u65B0\u5EFA\uFF09\u3002",headerBordered:!0,direction:"column",children:(0,e.jsx)(Se.u,{actionRef:y,name:"volumes",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u6620\u5C04\u76EE\u5F55"},copyIconProps:!1,min:0,children:function(i,R,C){var j,s=C.getCurrentRowData();return(0,e.jsxs)(P.UW,{children:[(0,e.jsxs)(k.Z.Compact,{children:[(0,e.jsx)(l.Z,{label:"\u5BBF\u4E3B\u673A\u6587\u4EF6\u3001\u76EE\u5F55\u6216\u5B58\u50A8\u5377",name:"host",width:f.showInDrawer?"sm":"md"}),(0,e.jsx)(Ne.Z,{label:" ",valueEnum:{write:"\u8BFB\u5199",readonly:"\u53EA\u8BFB"},initialValue:"write",name:"permission"})]}),(0,e.jsxs)(k.Z.Compact,{children:[(0,e.jsx)(l.Z,{label:"\u5BB9\u5668\u5185\u8DEF\u5F84",name:"dest",width:f.showInDrawer?"sm":"md",required:!0,rules:[{required:!0}],disabled:f.disabledUserVolumeDest||s.inImage}),!f.disabledUserVolumeDest&&!s.inImage&&((j=F.current)===null||j===void 0?void 0:j.getFieldValue)&&F.current.getFieldValue("imageName")&&(0,e.jsx)(Cn,{targetClassName:"ant-select-tree",children:(0,e.jsx)(En,{label:" ",width:"sm",placeholder:"\u9009\u62E9\u5BB9\u5668\u5185\u76EE\u5F55",fieldProps:{loading:!d,popupMatchSelectWidth:500,placement:"topLeft",treeLine:!0,showSearch:!0,onChange:function(q,G,J){C.setCurrentRowData({dest:q})},treeData:d}},"abc4")})]})]})}})})})}),xn=gn,Pn=n(2831),xe=n(52688),nn=n(86125),jn=n(44349);function Fn(f){var w,y=(0,t.useState)(),L=x()(y,2),F=L[0],$=L[1];return(0,t.useEffect)(function(){(0,Pn.aF)().then(function(v){return $(v.data.info)})},[]),(0,e.jsxs)(_.Z,{children:[(0,e.jsx)(l.Z,{label:"\u5171\u4EAB\u5185\u5B58\u5927\u5C0F - /dev/shm",name:"shmsize",initialValue:"64M",tooltip:"0 \u4E3A\u4F7F\u7528\u9ED8\u8BA464M\uFF0C\u914D\u7F6E\u65F6\u8BF7\u9644\u52A0\u5355\u4F4D\uFF0C\u4F8B\u5982\uFF1A1G"}),(0,e.jsx)(U.Z,{label:"\u6700\u5927Cpu\u914D\u989D",name:"cpus",tooltip:"0 \u4E3A\u4E0D\u9650\u5236",children:(0,e.jsx)(nn.Z,{step:.1,max:F==null?void 0:F.NCPU,marks:{0:"0",.5:"0.5\u6838",1:"1\u6838",1.5:"1.5\u6838",2:"2\u6838",4:"4\u6838",6:"6\u6838",8:"8\u6838"}})}),(0,e.jsx)(U.Z,{label:"\u6700\u5927\u5185\u5B58\u914D\u989D",name:"memory",tooltip:"0 \u4E3A\u4E0D\u9650\u5236",children:(0,e.jsx)(nn.Z,{step:256,max:Math.round(((w=F==null?void 0:F.MemTotal)!==null&&w!==void 0?w:0)/1024/1024),marks:{0:"0",1024:"1G",2048:"2G",3072:"3G",4096:"4G"}})}),(0,e.jsx)(Ne.Z,{label:"\u65E5\u5FD7\u7C7B\u578B",name:["log","driver"],tooltip:"\u9ED8\u8BA4\u4F7F\u7528 json-file \u9A71\u52A8\u7531 docker \u7EDF\u4E00\u7BA1\u7406\u3002\u91C7\u7528 journal \u65F6\u65E5\u5FD7\u5C06\u6765\u5BBF\u4E3B\u673A\u7BA1\u7406",initialValue:"json-file",valueEnum:{"json-file":"json-file",journald:"journal (\u5BBF\u4E3B\u9700\u8981\u5B89\u88C5journal\u670D\u52A1)"}}),(0,e.jsx)(S.Z,{name:["log"],children:function(d){var W=d.log;if(W.driver=="json-file")return(0,e.jsxs)(P.UW,{children:[(0,e.jsx)(l.Z,{label:"\u65E5\u5FD7\u5207\u5272\u5927\u5C0F",name:["log","maxSize"],placeholder:"\u4F8B\u5982\uFF1A10k,5M",tooltip:"\u9ED8\u8BA4 Docker \u5E76\u4E0D\u4F1A\u81EA\u52A8\u5207\u5272\u65E5\u5FD7"}),(0,e.jsx)(l.Z,{tooltip:"\u9ED8\u8BA4 Docker \u5E76\u4E0D\u4F1A\u81EA\u52A8\u6E05\u7406\u65E5\u5FD7\u6587\u4EF6",label:"\u4FDD\u7559\u65E5\u5FD7\u6587\u4EF6\u6570",name:["log","maxFile"],placeholder:"\u4F8B\u5982\uFF1A10"})]})}}),(0,e.jsx)(jn.Z,{name:"device",label:"\u5173\u8054\u8BBE\u5907",hideCopyButton:!0,showAddButton:!0,items:[{label:"\u5BBF\u4E3B\u673A\u8DEF\u5F84",name:"host",width:"md",placeholder:"\u4F8B\u5982\uFF1A/dev/tty0"},{label:"\u5BB9\u5668\u5185\u8DEF\u5F84",name:"dest",width:"md",placeholder:"\u4F8B\u5982\uFF1A/dev/tty0"}]}),(0,e.jsxs)(ce.Z,{children:[(0,e.jsx)(u.Z,{span:4,children:(0,e.jsx)(xe.Z,{label:"\u4F7F\u7528 Gpu",name:["gpus","enable"]})}),(0,e.jsx)(u.Z,{span:20,children:(0,e.jsx)(S.Z,{name:["gpus"],children:function(d){var W=d.gpus;if(W&&W.enable)return(0,e.jsx)(Ne.Z,{mode:"tags",label:"\u8BBE\u5907\u5217\u8868",name:["gpus","device"],placeholder:"\u914D\u7F6E\u4F7F\u7528\u8BBE\u5907id\u6216\u662Fuuid\uFF0C\u4E0D\u586B\u6240\u4E3A\u6240\u6709\u8BBE\u5907"})}})})]}),(0,e.jsx)(S.Z,{name:["gpus"],children:function(d){var W=d.gpus;if(W&&W.enable)return(0,e.jsx)(Ne.Z,{label:"\u8BA1\u7B97\u80FD\u529B",name:["gpus","capabilities"],mode:"multiple",fieldProps:{allowClear:!0},options:[{label:"compute - \u8BA1\u7B97\u80FD\u529B",value:"compute"},{label:"compat32 - \u517C\u5BB932\u4F4D",value:"compat32"},{label:"graphics - \u56FE\u5F62\u5904\u7406\u80FD\u529B",value:"graphics"},{label:"utility - \u76D1\u63A7\u548C\u7BA1\u7406\u80FD\u529B",value:"utility"},{label:"video - \u89C6\u9891\u5904\u7406\u80FD\u529B",value:"video"},{label:"display - \u663E\u793A\u56FE\u5F62\u754C\u9762\u80FD\u529B",value:"display"}]})}})]})}function Bn(){return(0,e.jsx)(_.Z,{title:"\u5BB9\u5668\u6807\u7B7E",children:(0,e.jsx)(Se.u,{name:"label",label:"",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u6807\u7B7E"},copyIconProps:!1,min:0,children:(0,e.jsxs)(P.UW,{children:[(0,e.jsx)(l.Z,{width:"md",name:"name",label:"\u540D\u79F0",placeholder:""}),(0,e.jsx)(l.Z,{width:"md",name:"value",label:"\u503C",placeholder:""})]})})})}var Dn=n(44771),In=n(86615),$n="default",Gn="user";function An(f){return(0,e.jsx)(U.Z,{label:f.label,tooltip:f.tooltip,children:(0,e.jsxs)(k.Z.Compact,{block:!0,children:[(0,e.jsx)(In.Z.Group,{radioType:"button",name:[f.name,"useDefault"],options:[{label:"\u4F7F\u7528\u9ED8\u8BA4",value:!0},{label:"\u81EA\u5B9A\u4E49",value:!1}]}),(0,e.jsx)(S.Z,{name:[f.name],children:function(y){return y[f.name]&&y[f.name].useDefault?(0,e.jsx)(l.Z,{name:[f.name,"default"],disabled:!0,placeholder:"\u672A\u8BBE\u7F6E"}):(0,e.jsx)(l.Z,{name:[f.name,"value"]})}})]})})}var He=An,$e=n(24963);function On(){var f=(0,t.useContext)($e.Z),w=f.message,y=f.lang;return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(_.Z,{children:[(0,e.jsx)(Dn.Z,{label:"\u91CD\u542F\u7B56\u7565"}),(0,e.jsxs)(P.UW,{children:[(0,e.jsx)(xe.Z,{fieldProps:{onChange:function(F){F&&w.warning(y("app.create.privilegedNotice"))}},name:"privileged",tooltip:"--privileged",label:"\u8D4B\u4E88\u5BB9\u5668Root\u6743\u9650",initialValue:!1}),(0,e.jsx)(xe.Z,{name:"autoRemove",tooltip:"--rm",label:"\u505C\u6B62\u540E\u81EA\u52A8\u5220\u9664",initialValue:!1}),(0,e.jsx)(xe.Z,{fieldProps:{onChange:function(F){F&&w.warning(y("app.create.hostPidNotice"))}},tooltip:"--pid host",name:"hostPid",label:"\u5173\u8054\u5BBF\u4E3B\u673APid",initialValue:!1})]}),(0,e.jsx)(He,{label:"\u5DE5\u4F5C\u76EE\u5F55",tooltip:"\u9ED8\u8BA4\u4F7F\u7528\u955C\u50CF\u4E2D\u6307\u5B9A\u7684\u5DE5\u4F5C\u76EE\u5F55",name:"workDir"}),(0,e.jsx)(He,{label:"User",tooltip:"\u5728\u5BB9\u5668\u4E2D\u8FD0\u884C\u547D\u4EE4\u7684\u7528\u6237",name:"user"}),(0,e.jsx)(He,{label:"Command",tooltip:"\u542F\u52A8\u5BB9\u5668\u65F6\u8FD0\u884C\u7684\u547D\u4EE4\uFF0C\u4EE5\u7A7A\u683C\u5206\u9694",name:"command"}),(0,e.jsx)(He,{label:"Entrypoint",tooltip:"\u65E0\u6CD5\u8986\u76D6\u955C\u50CF\u4E2D\u5DF2\u7ECF\u6307\u5B9A\u7684 Entrypoint \u547D\u4EE4",name:"entrypoint"})]})})}var bn=n(91845),tn=n(62597),rn=n(82346),Rn=n(46442),Mn=(0,t.forwardRef)(function(f,w){var y=(0,t.useRef)(),L=(0,t.useRef)();(0,t.useImperativeHandle)(w,function(){return{}});var F=function(v){var d,W,Y=!1,E=(d=(W=y.current)===null||W===void 0?void 0:W.getList())!==null&&d!==void 0?d:[];if(E.map(function(R){R.name==v.name&&(Y=!0)}),!Y){var i;(i=y.current)===null||i===void 0||i.add(v)}};return(0,e.jsxs)(_.Z,{title:"\u5173\u8054\u7F51\u7EDC",headerBordered:!0,extra:(0,e.jsx)(k.Z,{children:f.showUseBridgeNetwork&&(0,e.jsx)(xe.Z,{name:"useBridgeNetwork",fieldProps:{checkedChildren:"\u5173\u8054 Bridge \u7F51\u7EDC",unCheckedChildren:"\u5173\u8054 Bridge \u7F51\u7EDC"}},"useBridgeNetwork")}),children:[(0,e.jsx)(Se.u,{name:"network",actionRef:y,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u7F51\u7EDC"},actionGuard:{beforeAddRow:function(v,d){var W;return(W=L.current)===null||W===void 0||W.show(),!1}},copyIconProps:!1,min:0,itemRender:function(v,d){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(P.UW,{children:[(0,e.jsx)(l.Z,{label:"\u7F51\u7EDC\u540D\u79F0",name:"name",width:"md",disabled:!0,fieldProps:{value:d.record.name}}),(0,e.jsx)(U.Z,{label:"\u8BBF\u95EEHostname",name:"alise",children:d.record.alise!=""&&(0,e.jsx)(N.Z.Text,{code:!0,copyable:!0,children:d.record.alise})}),(0,e.jsx)(U.Z,{label:" ",children:v.action})]}),(0,e.jsx)(P.UW,{children:(0,e.jsx)(l.Z,{label:"\u6307\u5B9AIpV4",name:"ipV4",width:"md",disabled:d.record.name=="bridge",fieldProps:{addonAfter:d.record.subnet}})})]})}}),(0,e.jsx)(Rn.Z,{ref:L,onSelect:function(v){F({name:v.Name,alise:[""],subnet:v.IPAM.Config[0].Subnet})}})]})}),Zn=Mn,Tn=(0,t.forwardRef)(function(f,w){var y=(0,t.useState)(""),L=x()(y,2),F=L[0],$=L[1],v=(0,t.useRef)(),d=(0,t.useContext)(X.Z),W=d.createFormRef;return(0,t.useImperativeHandle)(w,function(){return{setExposePort:function(E){if(E){var i,R,C=(i=(R=v.current)===null||R===void 0?void 0:R.getList())!==null&&i!==void 0?i:[];Object.keys(E).map(function(j){var s=!1;if(C.map(function(q){q.dest==j&&(s=!0)}),!s){var B;(B=v.current)===null||B===void 0||B.add({host:"",dest:j})}})}},setHostname:function(E){$(E)},addPortItem:function(E,i){var R,C=(R=v.current)===null||R===void 0?void 0:R.getList(),j=!1;if(C==null||C.map(function(B){if(B.host==E){j=!0;return}}),!j){var s;(s=v.current)===null||s===void 0||s.add({host:String(E),dest:String(i)})}}}}),(0,e.jsx)(_.Z,{title:"\u7ED1\u5B9A\u7AEF\u53E3",tooltip:"\u8BBF\u95EE\u7AEF\u53E3\u7559\u7A7A\u65F6\u968F\u673A\u751F\u6210\u7AEF\u53E3\uFF0C\u5168\u90E8\u5220\u9664\u5219\u8868\u793A\u4E0D\u66B4\u9732\u7AEF\u53E3",headerBordered:!0,extra:(0,e.jsxs)(k.Z,{children:[f.showBindHost&&(0,e.jsx)(xe.Z,{name:"useHostNetwork",fieldProps:{checkedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",unCheckedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",onChange:function(E){if(E){var i;(i=W.current)===null||i===void 0||i.setFieldsValue({bindIpV6:!1,publishAllPorts:!1})}}}}),f.showBindIpV6&&(0,e.jsx)(S.Z,{name:["siteName","useHostNetwork"],children:function(E){var i=E.useHostNetwork;return(0,e.jsx)(xe.Z,{name:"publishAllPorts",fieldProps:{checkedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3",unCheckedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3"},disabled:i},"publishAllPorts")}}),f.showBindIpV6&&(0,e.jsx)(S.Z,{name:["siteName","useHostNetwork"],children:function(E){var i=E.useHostNetwork;return(0,e.jsx)(xe.Z,{name:"bindIpV6",fieldProps:{checkedChildren:"IpV6",unCheckedChildren:"IpV6"},disabled:i},"bindIpV6")}})]}),children:(0,e.jsx)(S.Z,{name:["useHostNetwork","bindIpV6","publishAllPorts"],children:function(E){var i=E.useHostNetwork,R=E.bindIpV6,C=E.publishAllPorts;if(!i&&!C)return(0,e.jsx)(Se.u,{name:"ports",actionRef:v,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BF9\u5916\u90E8\u8BBF\u95EE"},min:0,copyIconProps:!1,children:(0,e.jsxs)(P.UW,{children:[(0,e.jsx)(l.Z,{width:f.showInDrawer?"sm":"md",name:"host",label:"\u5916\u90E8\u8BBF\u95EE\u7AEF\u53E3",tooltip:"\u5BF9\u5916\u8BBF\u95EE\u53EF\u4EE5\u901A\u8FC7\u6DFB\u52A0\u8BBF\u95EE\u7AEF\u53E3\u6216\u662F\u521B\u5EFA\u5B8C\u6210\u540E\u5BF9\u5BB9\u5668\u7ED1\u5B9A\u57DF\u540D",placeholder:"\u7559\u7A7A\u5C06\u4F7F\u7528\u968F\u673A\u7AEF\u53E3\uFF0C\u7ED1\u5B9AIpV6\u5FC5\u586B",required:R,rules:[{required:R}]}),(0,e.jsx)(l.Z,{label:"\u5BB9\u5668\u5185\u7AEF\u53E3",width:f.showInDrawer?"sm":"md",name:"dest",placeholder:"\u6784\u5EFA\u65F6 Expose \u6307\u5B9A\u7684\u7AEF\u53E3",required:!0,rules:[{required:!0}]})]})})}})})}),yn=Tn,Ze=n(52255);function wn(){var f=(0,t.useRef)(),w=function(F){var $,v,d=!1,W=($=(v=f.current)===null||v===void 0?void 0:v.getList())!==null&&$!==void 0?$:[];if(W.map(function(E){E.name==F.name&&(d=!0)}),!d){var Y;(Y=f.current)===null||Y===void 0||Y.add(F)}},y=function(F){var $,v,d=!1,W=($=(v=f.current)===null||v===void 0?void 0:v.getList())!==null&&$!==void 0?$:[];W.map(function(Y,E){if(Y.name==F){var i;(i=f.current)===null||i===void 0||i.remove(E)}})};return(0,e.jsx)(_.Z,{title:"\u5173\u8054\u5BBF\u4E3B\u673A\u7F51\u7EDC\u5185\u4E3B\u673A",tooltip:"\u5BB9\u5668\u5185\u5982\u679C\u9700\u8981\u8BF7\u6C42\u5BBF\u4E3B\u673A\u6240\u5728\u7684\u7F51\u7EDC\u4E2D\u7684\u4E3B\u673A\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6B64\u914D\u7F6E\u5C06Ip\u6CE8\u5165\u5230\u5BB9\u5668\u4E2D",extra:(0,e.jsx)(k.Z,{children:(0,e.jsx)(xe.Z,{name:"enableBindHost",fieldProps:{checkedChildren:"\u7ED1\u5B9A\u5BBF\u4E3B\u673AIp",unCheckedChildren:"\u7ED1\u5B9A\u5BBF\u4E3B\u673AIp",onChange:function(F){F?w({name:"host.dpanel.local",value:"host-gateway"}):y("host.dpanel.local")}}})}),children:(0,e.jsx)(Se.u,{name:"extraHosts",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BBF\u4E3B\u673A\u7F51\u7EDC\u5173\u8054"},actionRef:f,copyIconProps:!1,min:0,children:(0,e.jsxs)(P.UW,{children:[(0,e.jsx)(l.Z,{width:"md",name:"name",label:"Hostname",placeholder:""}),(0,e.jsx)(l.Z,{width:"md",name:"value",label:"ip",placeholder:""})]})})})}var Ge=n(90672),Sn=(0,t.forwardRef)(function(f,w){return(0,t.useImperativeHandle)(w,function(){return{}}),(0,e.jsxs)(_.Z,{title:"\u7F51\u7EDC\u914D\u7F6E",children:[(0,e.jsxs)(P.UW,{children:[(0,e.jsx)(l.Z,{label:"\u914D\u7F6E ipV4 \u5730\u5740",name:["ipV4","address"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u5730\u5740\uFF0C\u4F8B\u5982 192.168.1.5",placeholder:"192.168.1.5"}),(0,e.jsx)(S.Z,{name:["ipV4"],children:function(L){var F=L.ipV4;return(0,e.jsx)(l.Z,{label:"\u914D\u7F6E ipV4 \u5B50\u7F51",name:["ipV4","subnet"],width:"md",required:F&&F.address,tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u6240\u5728\u7684\u5B50\u7F51\uFF0C\u4F8B\u5982 192.168.1.0/24",placeholder:"192.168.1.0/24",rules:[{required:F&&F.address}]})}}),(0,e.jsx)(l.Z,{label:"\u914D\u7F6E ipV4 \u7F51\u5173",name:["ipV4","gateway"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u7684\u7F51\u5173\uFF0C\u4F8B\u5982 192.168.1.1",placeholder:"192.168.1.1"}),(0,e.jsx)(xe.Z,{label:"\u81EA\u5B9A\u4E49ipV6",name:"enableIpV6Address"})]}),(0,e.jsx)(S.Z,{name:["enableIpV6Address"],children:function(L){var F=L.enableIpV6Address;if(F)return(0,e.jsxs)(P.UW,{children:[(0,e.jsx)(l.Z,{label:"\u914D\u7F6E ipV6 \u5730\u5740",name:["ipV6","address"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipV6\u5730\u5740\uFF0C\u4F8B\u5982 2001:db8::5",placeholder:"2001:db8::5"}),(0,e.jsx)(S.Z,{name:["ipV6"],children:function(v){var d=v.ipV6;return(0,e.jsx)(l.Z,{label:"\u914D\u7F6E ipV6 \u5B50\u7F51",name:["ipV6","subnet"],width:"md",required:d&&d.address,tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u6240\u5728\u7684\u5B50\u7F51\uFF0C\u4F8B\u5982 2001:db8::/48",placeholder:"2001:db8::/48",rules:[{required:d&&d.address}]})}}),(0,e.jsx)(l.Z,{label:"\u914D\u7F6E ipV6 \u7F51\u5173",name:["ipV6","gateway"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipV6\u7684\u7F51\u5173\uFF0C\u4F8B\u5982 2001:db8::1",placeholder:"2001:db8::1"})]})}}),(0,e.jsx)(Ge.Z,{label:"DNS\u914D\u7F6E",name:"dns",placeholder:"\u8BF7\u6307\u5B9Adns\u5730\u5740\uFF0C\u4F8B\u5982\uFF1A8.8.8.8\uFF0C\u4E00\u884C\u6DFB\u4E00\u6761dns\u5730\u5740"})]})}),Ln=Sn,Ye=n(31199),Un=n(86250);function Wn(){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(_.Z,{title:"\u9644\u52A0\u6267\u884C\u811A\u672C",headerBordered:!0,subTitle:"",children:(0,e.jsx)(Ge.Z,{label:"\u5BB9\u5668\u521B\u5EFA\u540E\u6267\u884C\u811A\u672C",name:["hook","containerCreate"],placeholder:"\u5BB9\u5668\u5728\u521B\u5EFA\u540E\u6267\u884C\u7684\u811A\u672C\uFF0C\u6B64\u811A\u672C\u5E76\u4E0D\u4F1A\u5F71\u54CD entrypoint \u53CA command\u3002\u4F8B\u5982\uFF1Als -al && touch abc.txt && apt update"})}),(0,e.jsxs)(_.Z,{title:"\u5065\u5EB7\u68C0\u67E5",headerBordered:!0,children:[(0,e.jsxs)(Un.Z,{gap:20,justify:"start",children:[(0,e.jsx)(Ye.Z,{label:"\u91CD\u590D\u95F4\u9694\u65F6\u95F4\uFF08\u79D2\uFF09",name:["healthcheck","interval"],initialValue:30}),(0,e.jsx)(Ye.Z,{label:"\u8D85\u65F6\u5931\u8D25\u65F6\u95F4\uFF08\u79D2\uFF09",name:["healthcheck","timeout"],initialValue:10}),(0,e.jsx)(Ye.Z,{label:"\u5931\u8D25\u91CD\u590D\u6B21\u6570",name:["healthcheck","retries"],initialValue:3}),(0,e.jsx)(Ne.Z,{width:"sm",label:"\u811A\u672C\u6267\u884C\u73AF\u5883",initialValue:"CMD",name:["healthcheck","shellType"],valueEnum:{CMD:"\u5728 Docker \u73AF\u5883\u6267\u884C","CMD-SHELL":"\u5728\u5BB9\u5668\u5185\u6267\u884C"}})]}),(0,e.jsx)(Ge.Z,{label:"\u6267\u884C\u811A\u672C",name:["healthcheck","cmd"],placeholder:"\u914D\u7F6E\u5BB9\u5668\u5065\u5EB7\u68C0\u67E5\u811A\u672C\uFF0C\u4F8B\u5982\uFF1Acurl -f http://localhost:8080/ || exit 1"})]})]})}var Nn=n(74763),an=n(2487),Vn=[{name:"ALL"},{name:"AUDIT_CONTROL"},{name:"AUDIT_WRITE",default:!0},{name:"BLOCK_SUSPEND"},{name:"CHOWN",default:!0},{name:"DAC_OVERRIDE",default:!0},{name:"DAC_READ_SEARCH"},{name:"FOWNER",default:!0},{name:"FSETID",default:!0},{name:"IPC_LOCK"},{name:"IPC_OWNER"},{name:"KILL",default:!0},{name:"LEASE"},{name:"LINUX_IMMUTABLE"},{name:"MAC_ADMIN"},{name:"MAC_OVERRIDE"},{name:"MKNOD",default:!0},{name:"NET_ADMIN"},{name:"NET_BIND_SERVICE",default:!0},{name:"NET_BROADCAST"},{name:"NET_RAW",default:!0},{name:"SETFCAP",default:!0},{name:"SETGID",default:!0},{name:"SETPCAP",default:!0},{name:"SETUID",default:!0},{name:"SYSLOG"},{name:"SYS_ADMIN"},{name:"SYS_BOOT"},{name:"SYS_CHROOT",default:!0},{name:"SYS_MODULE"},{name:"SYS_NICE"},{name:"SYS_PACCT"},{name:"SYS_PTRACE"},{name:"SYS_RAWIO"},{name:"SYS_RESOURCE"},{name:"SYS_TIME"},{name:"SYS_TTY_CONFIG"}],kn=(0,t.forwardRef)(function(f,w){var y=(0,t.useContext)($e.Z),L=y.lang,F=(0,t.useState)(null),$=x()(F,2),v=$[0],d=$[1],W=(0,t.useContext)(X.Z),Y=W.createFormRef;return(0,t.useImperativeHandle)(w,function(){return{}}),(0,e.jsx)(_.Z,{children:(0,e.jsx)(an.Z,{grid:{gutter:10,xs:3,sm:3,md:4,lg:4,xl:4,xxl:6},dataSource:Vn,renderItem:function(i,R){var C;return(0,e.jsx)(an.Z.Item,{children:(0,e.jsx)(xe.Z,{fieldProps:{onChange:function(s){i.name=="ALL"&&d(s)}},disabled:i.name!="ALL"&&((0,Nn.k)(v)?(C=Y.current)===null||C===void 0?void 0:C.getFieldValue(["capAdd","ALL"]):v),initialValue:i.default,name:["capAdd",i.name],tooltip:L("app.create.cap."+i.name.toLocaleLowerCase()),label:i.name})},R)}})})}),Kn=kn,Ve="update",un="copy",ze="new";function Hn(){var f,w,y,L=(0,t.useContext)($e.Z),F=L.loading,$=L.notice,v=(0,t.useContext)(X.Z),d=v.createFormRef,W=v.volumeListRef,Y=v.domainRef,E=v.createEnvRef,i=v.createLinkRef,R=(0,t.useState)(ze),C=x()(R,2),j=C[0],s=C[1],B=(0,rn.useSearchParams)(),q=x()(B,2),G=q[0],J=q[1],Pe=(0,rn.useNavigate)(),he=(0,t.useState)("basic"),fe=x()(he,2),le=fe[0],pe=fe[1],Ie=parseInt((f=G.get("id"))!==null&&f!==void 0?f:""),Ae=(w=G.get("containerId"))!==null&&w!==void 0?w:"",ke=(y=G.get("imageId"))!==null&&y!==void 0?y:"";return(0,t.useEffect)(function(){if(Ae||Ie)F.show(),(0,tn.iE)({md5:Ae,id:Ie}).then(function(){var o=D()(c()().mark(function de(r){var ge,Re,je,re,Xe,Fe,Ke,Je,Qe,qe;return c()().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:if(re={info:{}},!r.data.env.imageName){Be.next=11;break}return Be.prev=2,Be.next=5,(0,b.YU)({md5:r.data.env.imageName});case 5:Xe=Be.sent,re=Xe.data,Be.next=11;break;case 9:Be.prev=9,Be.t0=Be.catch(2);case 11:G.get("op")==un?s(un):s(Ve),r.data.env.network&&r.data.env.network.map(function(ne){return!ne.alise&&ne.name!="bridge"&&(ne.alise=[r.data.siteName+".pod.dpanel.local"]),ne}),r.data.env.ports&&r.data.env.ports.map(function(ne){return ne.host=="0"&&(ne.host=""),ne}),Fe=r.data.env.bindIpV6,r.data.containerInfo.Info&&r.data.containerInfo.Info.NetworkSettings.Networks&&Object.keys(r.data.containerInfo.Info.NetworkSettings.Networks).map(function(ne){if(r.data.env.network&&(r.data.env.network=r.data.env.network.map(function(en){return ne==en.name&&(en.subnet=r.data.containerInfo.Info.NetworkSettings.Networks[ne].IPAddress+"/"+r.data.containerInfo.Info.NetworkSettings.Networks[ne].IPPrefixLen),en})),r.data.containerInfo.Info.NetworkSettings.Networks[ne].IPv6Gateway!=""&&(Fe=!0),ne=="bridge"){var Te;(Te=d.current)===null||Te===void 0||Te.setFieldValue("useBridgeNetwork",!0)}}),r.data.env.extraHosts&&r.data.env.extraHosts.map(function(ne){if(ne.value=="host-gateway"){var Te;(Te=d.current)===null||Te===void 0||Te.setFieldValue("enableBindHost",!0)}}),Ke=r.data.env.ports,r.data.env.ports&&(Ke=r.data.env.ports.map(function(ne){return ne.host=(ne.hostIp?ne.hostIp+":":"")+ne.host,ne})),(ge=d.current)===null||ge===void 0||ge.setFieldsValue({imageName:r.data.env.imageName,privileged:r.data.env.privileged,bindIpV6:r.data.env.useHostNetwork?!1:Fe,useHostNetwork:r.data.env.useHostNetwork,publishAllPorts:r.data.env.useHostNetwork?!1:r.data.env.publishAllPorts,workDir:{value:r.data.env.workDir,useDefault:!r.data.env.workDir,default:re&&re.info.Config&&re.info.Config.WorkingDir},user:{value:r.data.env.user,useDefault:!r.data.env.user,default:re&&re.info.Config&&re.info.Config.User},command:{value:r.data.env.command,useDefault:!r.data.env.command,default:re&&re.info.Config&&re.info.Config.Cmd&&re.info.Config.Cmd.join(" ")},entrypoint:{value:r.data.env.entrypoint,useDefault:!r.data.env.entrypoint,default:re&&re.info.Config&&re.info.Config.Entrypoint&&re.info.Config.Entrypoint.join(" ")},shmsize:(Re=r.data.env.shmsize)!==null&&Re!==void 0?Re:"64M",cpus:r.data.env.cpus,memory:r.data.env.memory,environment:r.data.env.environment,label:r.data.env.label,volumes:r.data.env.volumes,ports:Ke,links:r.data.env.links,network:r.data.env.network,restart:r.data.env.restart,extraHosts:r.data.env.extraHosts,autoRemove:r.data.env.autoRemove,log:r.data.env.log,dns:r.data.env.dns&&r.data.env.dns.join(`
`),ipV4:r.data.env.ipV4,ipV6:r.data.env.ipV6,gpus:r.data.env.gpus,device:r.data.env.device,hook:r.data.env.hook,hostPid:r.data.env.hostPid,capAdd:r.data.env.capAdd&&Object.fromEntries(r.data.env.capAdd.map(function(ne){return[ne,!0]}))}),r.data.env.ipV6&&((Je=d.current)===null||Je===void 0||Je.setFieldValue("enableIpV6Address",!0)),r.data.env.healthcheck&&r.data.env.healthcheck.cmd&&r.data.env.healthcheck.cmd!=""&&((Qe=d.current)===null||Qe===void 0||Qe.setFieldsValue({healthcheck:r.data.env.healthcheck})),G.get("op")==Ve&&((qe=d.current)===null||qe===void 0||qe.setFieldsValue({siteTitle:r.data.siteTitle,siteName:r.data.siteName})),(je=W.current)===null||je===void 0||je.initImageRootfs(r.data.env.imageName);case 24:case"end":return Be.stop()}},de,null,[[2,9]])}));return function(de){return o.apply(this,arguments)}}()).finally(function(){F.destroy()});else{var _e,ie;s(ze),(_e=d.current)===null||_e===void 0||_e.resetFields(),(ie=d.current)===null||ie===void 0||ie.setFieldValue("useBridgeNetwork",!0)}},[G]),(0,e.jsx)(I._z,{children:(0,e.jsx)(_.Z,{direction:"column",gutter:[0,10],children:(0,e.jsxs)(m.A,{submitter:{render:function(ie,o){return(0,e.jsx)(Z.S,{children:o})}},formRef:d,onFinish:function(){var _e=D()(c()().mark(function ie(o){var de,r,ge,Re,je,re;return c()().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:if(re={siteTitle:o.siteTitle,siteName:o.siteName,hostname:o.hostname,imageName:o.imageName,environment:o.environment,links:o.links,ports:o.ports,volumes:o.volumes,network:(de=o.network)!==null&&de!==void 0?de:[],privileged:(r=o.privileged)!==null&&r!==void 0?r:!1,autoRemove:(ge=o.autoRemove)!==null&&ge!==void 0?ge:!1,restart:o.restart,cpus:o.cpus,memory:o.memory,shmsize:(Re=o.shmsize)!==null&&Re!==void 0?Re:0,workDir:o.workDir&&!o.workDir.useDefault?o.workDir.value:"",user:o.user&&!o.user.useDefault?o.user.value:"",command:o.command&&!o.command.useDefault?o.command.value:"",entrypoint:o.entrypoint&&!o.entrypoint.useDefault?o.entrypoint.value:"",useHostNetwork:o.useHostNetwork,bindIpV6:o.bindIpV6,log:o.log,dns:o.dns&&o.dns!=""?o.dns.split(`
`):[],label:o.label,publishAllPorts:o.publishAllPorts,extraHosts:o.extraHosts,ipV4:o.ipV4,ipV6:o.ipV6,device:o.device,gpus:o.gpus,hook:o.hook,hostPid:o.hostPid,capAdd:o.capAdd?Object.keys(o.capAdd).map(function(Ke){return Ke}):[],useBridgeNetwork:(je=o.useBridgeNetwork)!==null&&je!==void 0?je:!0},!(!o.useBridgeNetwork&&!o.useHostNetwork&&(!o.network||o.network.length==0))){Fe.next=4;break}return $.error("\u4E0D\u52A0\u5165 Bridge \u7F51\u7EDC\u65F6\uFF0C\u5FC5\u987B\u6307\u5B9A\u4E00\u4E2A\u81EA\u5B9A\u4E49\u7F51\u7EDC"),Fe.abrupt("return",!1);case 4:return o.useBridgeNetwork&&re.network.push({name:"bridge",alise:[],ipV4:""}),o.healthcheck&&o.healthcheck.cmd&&o.healthcheck.cmd!=""&&(re.healthcheck=o.healthcheck),Ae&&j==Ve&&(re.containerId=Ae),Fe.next=9,(0,tn.$G)(re);case 9:return Pe("/app/list"),Fe.abrupt("return",!0);case 11:case"end":return Fe.stop()}},ie)}));return function(ie){return _e.apply(this,arguments)}}(),children:[(0,e.jsxs)(_.Z,{title:"\u57FA\u7840\u4FE1\u606F",headerBordered:!0,children:[(0,e.jsx)(l.Z,{name:"siteTitle",label:"\u5BB9\u5668\u63CF\u8FF0",fieldProps:{onChange:function(ie){var o="";if(ie.target.value&&j!=Ve){var de,r=(0,bn.N9)(ie.target.value.trim(),{toneType:"none",type:"array"});o=r.join(""),(de=d.current)===null||de===void 0||de.setFieldValue("siteName",o)}}},placeholder:"\u8BF7\u8F93\u5165\u5BB9\u5668\u63CF\u8FF0\u540D\u79F0"}),(0,e.jsxs)(P.UW,{children:[(0,e.jsx)(l.Z,{width:"lg",name:"siteName",label:"\u5BB9\u5668\u6807\u8BC6",tooltip:"\u5BB9\u5668\u552F\u4E00\u6807\u8BC6\uFF0C\u7528\u4E8E\u6807\u8BC6\u5BB9\u5668\u548C\u5185\u90E8\u8BBF\u95EE",required:!0,disabled:j==Ve,rules:[{required:!0}],placeholder:"\u8BF7\u8F93\u5165\u5BB9\u5668\u6807\u8BC6\u540D\u79F0"}),(0,e.jsx)(l.Z,{label:"Hostname",name:"hostname",width:"lg"})]}),(0,e.jsx)(Ce,{redeploy:j!=ze,fromImageId:ke})]}),(0,e.jsx)(p.Z,{offsetTop:50,children:(0,e.jsx)(_.Z,{style:{marginBottom:-20},children:(0,e.jsx)(z.Z,{activeKey:le,onChange:function(ie){pe(ie),window.scrollTo(0,450)},items:[{label:"\u57FA\u672C\u914D\u7F6E",key:"basic"},{label:"\u5173\u8054\u914D\u7F6E",key:"link"},{label:"\u8FD0\u884C\u914D\u7F6E",key:"run-command"},{label:"\u8D44\u6E90\u914D\u7F6E",key:"resource"},{label:"Hook",key:"hook"},{label:"\u80FD\u529B\u914D\u7F6E",key:"cap"},{label:"\u5176\u5B83",key:"other"}]})})}),(0,e.jsxs)(Ze.Z,{show:le=="basic",children:[(0,e.jsx)(yn,{ref:Y,showBindHost:!0,showBindIpV6:!0}),(0,e.jsx)(cn.Z,{showAddButton:!0,showImportButton:!0,showCodeMode:!0,label:"\u73AF\u5883\u53D8\u91CF",ref:E}),(0,e.jsx)(xn,{showDefault:!0,ref:W}),(0,e.jsx)(S.Z,{name:["siteName","useHostNetwork"],children:function(ie){var o=ie.siteName,de=ie.useHostNetwork;if(!de)return(0,e.jsx)(Ln,{})}})]}),(0,e.jsx)(Ze.Z,{show:le=="link",children:(0,e.jsx)(S.Z,{name:["siteName","useHostNetwork"],children:function(ie){var o=ie.siteName,de=ie.useHostNetwork;return de?(0,e.jsx)(a.Z,{showIcon:!0,description:"\u7ED1\u5B9A\u5230\u5BBF\u4E3B\u673A\u7F51\u7EDC\u65F6\uFF0C\u65E0\u6CD5\u901A\u8FC7 Docker \u5173\u8054\u5176\u5B83\u5BB9\u5668\u3002\u8BF7\u4F7F\u7528\u5BBF\u4E3B\u673A\u5185\u7F51IP\u6216\u662F127.0.0.1\u4E92\u8054\u5BB9\u5668\u66B4\u9732\u7AEF\u53E3\u3002"}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(dn,{onAddEnv:function(ge,Re){var je;(je=E.current)===null||je===void 0||je.addEnvItem(ge,Re)},ref:i}),(0,e.jsx)(Zn,{showUseBridgeNetwork:!0,siteName:o}),(0,e.jsx)(wn,{})]})}})}),(0,e.jsx)(Ze.Z,{show:le=="run-command",children:(0,e.jsx)(On,{})}),(0,e.jsx)(Ze.Z,{show:le=="resource",children:(0,e.jsx)(Fn,{})}),(0,e.jsx)(Ze.Z,{show:le=="hook",children:(0,e.jsx)(Wn,{})}),(0,e.jsx)(Ze.Z,{show:le=="other",children:(0,e.jsx)(Bn,{})}),(0,e.jsx)(Ze.Z,{show:le=="cap",children:(0,e.jsx)(Kn,{})})]},"form")})})}},2831:function(se,K,n){"use strict";n.d(K,{Ll:function(){return Z},aF:function(){return x},d6:function(){return P},u5:function(){return _}});var M=n(15009),c=n.n(M),O=n(99289),D=n.n(O),g=n(82346);function x(){return I.apply(this,arguments)}function I(){return I=D()(c()().mark(function p(){return c()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.request)("/api/common/home/info",{method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},p)})),I.apply(this,arguments)}function _(){return m.apply(this,arguments)}function m(){return m=D()(c()().mark(function p(){return c()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.request)("/api/common/home/check-new-version",{method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},p)})),m.apply(this,arguments)}function Z(){return l.apply(this,arguments)}function l(){return l=D()(c()().mark(function p(){return c()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.request)("/api/common/home/usage",{method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},p)})),l.apply(this,arguments)}function P(){return S.apply(this,arguments)}function S(){return S=D()(c()().mark(function p(){return c()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,g.request)("/api/common/home/upgrade-script",{method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},p)})),S.apply(this,arguments)}},79245:function(se,K,n){"use strict";n.d(K,{m:function(){return O},y:function(){return D}});var M=n(64599),c=n.n(M);function O(g){var x=[];if(!g||g=="")return x;var I=g.matchAll(/\$\{(\w+)[:-?=]*(.*?)\}/g),_=c()(I),m;try{for(_.s();!(m=_.n()).done;){var Z=m.value;x.push({name:Z[1],value:Z[2]?Z[2].indexOf("-")==0?Z[2].substring(1):Z[2]:""})}}catch(l){_.e(l)}finally{_.f()}return x}function D(g,x){return!g||!x?!1:(g&x)!==0}},86250:function(se,K,n){"use strict";n.d(K,{Z:function(){return ce}});var M=n(67294),c=n(93967),O=n.n(c),D=n(98423),g=n(98065),x=n(53124),I=n(83559),_=n(83262);const m=["wrap","nowrap","wrap-reverse"],Z=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],l=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],P=(u,A)=>{const b=A.wrap===!0?"wrap":A.wrap;return{[`${u}-wrap-${b}`]:b&&m.includes(b)}},S=(u,A)=>{const b={};return l.forEach(h=>{b[`${u}-align-${h}`]=A.align===h}),b[`${u}-align-stretch`]=!A.align&&!!A.vertical,b},p=(u,A)=>{const b={};return Z.forEach(h=>{b[`${u}-justify-${h}`]=A.justify===h}),b};function z(u,A){return O()(Object.assign(Object.assign(Object.assign({},P(u,A)),S(u,A)),p(u,A)))}var a=z;const t=u=>{const{componentCls:A}=u;return{[A]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},X=u=>{const{componentCls:A}=u;return{[A]:{"&-gap-small":{gap:u.flexGapSM},"&-gap-middle":{gap:u.flexGap},"&-gap-large":{gap:u.flexGapLG}}}},ee=u=>{const{componentCls:A}=u,b={};return m.forEach(h=>{b[`${A}-wrap-${h}`]={flexWrap:h}}),b},U=u=>{const{componentCls:A}=u,b={};return l.forEach(h=>{b[`${A}-align-${h}`]={alignItems:h}}),b},V=u=>{const{componentCls:A}=u,b={};return Z.forEach(h=>{b[`${A}-justify-${h}`]={justifyContent:h}}),b},k=()=>({});var ae=(0,I.I$)("Flex",u=>{const{paddingXS:A,padding:b,paddingLG:h}=u,oe=(0,_.IX)(u,{flexGapSM:A,flexGap:b,flexGapLG:h});return[t(oe),X(oe),ee(oe),U(oe),V(oe)]},k,{resetStyle:!1}),N=function(u,A){var b={};for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&A.indexOf(h)<0&&(b[h]=u[h]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var oe=0,h=Object.getOwnPropertySymbols(u);oe<h.length;oe++)A.indexOf(h[oe])<0&&Object.prototype.propertyIsEnumerable.call(u,h[oe])&&(b[h[oe]]=u[h[oe]]);return b},ce=M.forwardRef((u,A)=>{const{prefixCls:b,rootClassName:h,className:oe,style:Ee,flex:ye,gap:Oe,children:Le,vertical:Me=!1,component:we="div"}=u,Ue=N(u,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:T,direction:H,getPrefixCls:te}=M.useContext(x.E_),Q=te("flex",b),[ue,ve,e]=ae(Q),Ce=Me!=null?Me:T==null?void 0:T.vertical,De=O()(oe,h,T==null?void 0:T.className,Q,ve,e,a(Q,u),{[`${Q}-rtl`]:H==="rtl",[`${Q}-gap-${Oe}`]:(0,g.n)(Oe),[`${Q}-vertical`]:Ce}),be=Object.assign(Object.assign({},T==null?void 0:T.style),Ee);return ye&&(be.flex=ye),Oe&&!(0,g.n)(Oe)&&(be.gap=Oe),ue(M.createElement(we,Object.assign({ref:A,className:De,style:be},(0,D.Z)(Ue,["justify","wrap","align"])),Le))})},64599:function(se,K,n){var M=n(96263);function c(O,D){var g=typeof Symbol!="undefined"&&O[Symbol.iterator]||O["@@iterator"];if(!g){if(Array.isArray(O)||(g=M(O))||D&&O&&typeof O.length=="number"){g&&(O=g);var x=0,I=function(){};return{s:I,n:function(){return x>=O.length?{done:!0}:{done:!1,value:O[x++]}},e:function(P){throw P},f:I}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _=!0,m=!1,Z;return{s:function(){g=g.call(O)},n:function(){var P=g.next();return _=P.done,P},e:function(P){m=!0,Z=P},f:function(){try{!_&&g.return!=null&&g.return()}finally{if(m)throw Z}}}}se.exports=c,se.exports.__esModule=!0,se.exports.default=se.exports}}]);
