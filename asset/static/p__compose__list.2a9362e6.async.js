(self.webpackChunk=self.webpackChunk||[]).push([[8022],{23430:function(B,C,t){"use strict";t.d(C,{Z:function(){return h}});var E=t(87462),i=t(67294),v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},m=v,d=t(84089),O=function(s,u){return i.createElement(d.Z,(0,E.Z)({},s,{ref:u,icon:m}))},j=i.forwardRef(O),h=j},80821:function(B,C,t){"use strict";t.d(C,{Z:function(){return p}});var E=t(5574),i=t.n(E),v=t(24963),m=t(86738),d=t(28036),O=t(83062),j=t(67294),h=t(85893);function p(s){var u=(0,j.useState)(!1),a=i()(u,2),g=a[0],n=a[1],c=(0,j.useContext)(v.Z),D=c.lang,x=c.notice,P=c.message,M=function(){n(!0);var y=s.action();y instanceof Promise?y.then(function(Z){if(n(!1),Z){typeof s.onSuccess=="function"&&s.onSuccess(Z);var T="";s.messageSuccess?typeof s.messageSuccess=="function"?T=s.messageSuccess(Z):T=s.messageSuccess.indexOf("notification.")==0?D(s.messageSuccess):s.messageSuccess:T=D("notification.finish"),s.asynced?P.info(T):P.success(T)}}).catch(function(Z){n(!1),typeof s.onError=="function"&&s.onError(Z)}):n(!1)};return s.confirm?(0,h.jsx)(m.Z,{style:{width:500},title:s.confirmTitle?s.confirmTitle:D("notification.title.tip"),description:typeof s.confirm=="string"&&s.confirm.indexOf("notification.")==0?D(s.confirm):s.confirm,onConfirm:M,okText:"Yes",cancelText:"No",children:(0,h.jsx)(d.ZP,{disabled:s.disabled,icon:s.icon,loading:g,danger:s.danger,type:s.type,children:s.children})}):(0,h.jsx)(O.Z,{title:s.tips,children:(0,h.jsx)(d.ZP,{style:s.ghost?{padding:0,height:"auto"}:{},disabled:s.disabled,icon:s.icon,loading:g,onClick:M,danger:s.danger,type:s.type,children:s.children})})}},94359:function(B,C,t){"use strict";t.d(C,{Z:function(){return g}});var E=t(67294),i=t(3089),v=t(98165),m=t(18429),d=t(8751),O=t(14313),j=t(30159),h=t(87740),p=t(66309),s=t(83062),u=t(82346),a=t(85893);function g(n){var c=(0,a.jsx)(a.Fragment,{});if(n.status=="0"&&(c=(0,a.jsx)(p.Z,{icon:(0,a.jsx)(i.Z,{}),color:"default",children:"waiting"})),n.status=="10"&&(c=(0,a.jsx)(p.Z,{icon:(0,a.jsx)(v.Z,{spin:!0}),color:"processing",children:"processing"})),n.status=="20"&&(c=(0,a.jsx)(p.Z,{icon:(0,a.jsx)(m.Z,{}),color:"error",children:"error"})),n.status=="30"&&(c=(0,a.jsx)(p.Z,{icon:(0,a.jsx)(d.Z,{}),color:"success",children:"success"})),n.status=="running"||n.status=="healthy"){var D,x;c=(0,a.jsx)(p.Z,{icon:(0,a.jsx)(O.Z,{}),color:"success",children:(D=n.message)!==null&&D!==void 0&&D.showInTag?(x=n.message)===null||x===void 0?void 0:x.content:n.status})}if(n.status=="paused"){var P,M;c=(0,a.jsx)(p.Z,{icon:(0,a.jsx)(j.Z,{}),children:(P=n.message)!==null&&P!==void 0&&P.showInTag?(M=n.message)===null||M===void 0?void 0:M.content:n.status})}if(n.status=="waiting"||n.status=="starting"){var U,y;c=(0,a.jsx)(p.Z,{icon:(0,a.jsx)(h.Z,{}),children:(U=n.message)!==null&&U!==void 0&&U.showInTag?(y=n.message)===null||y===void 0?void 0:y.content:n.status})}if(n.status=="exited"||n.status=="dead"||n.status=="removing"||n.status=="restarting"||n.status=="unhealthy"||n.status=="created"){var Z,T;c=(0,a.jsx)(p.Z,{icon:(0,a.jsx)(m.Z,{}),color:"warning",children:(Z=n.message)!==null&&Z!==void 0&&Z.showInTag?(T=n.message)===null||T===void 0?void 0:T.content:n.status})}if(n.link&&(c=(0,a.jsx)(u.Link,{to:n.link,children:c})),n.message){var A;c=(0,a.jsx)(s.Z,{placement:(A=n.message.placement)!==null&&A!==void 0?A:"top",title:n.message.content,children:c})}return(0,a.jsx)(a.Fragment,{children:c})}},24963:function(B,C,t){"use strict";var E=t(67294),i=(0,E.createContext)({});C.Z=i},96781:function(B,C,t){"use strict";var E=t(67294),i=(0,E.createContext)({});C.Z=i},83536:function(B,C,t){"use strict";t.r(C),t.d(C,{default:function(){return F}});var E=t(15009),i=t.n(E),v=t(99289),m=t.n(v),d=t(80821),O=t(90098),j=t(43425),h=t(86548),p=t(23430),s=t(90078),u=t(10641),a=t(82346),g=t(28036),n=t(25593),c=t(42075),D=t(96074),x=t(83062),P=t(67294),M=t(96781),U=t(94359),y=t(67255),Z=t(93162),T=t(24963),A=t(66309),l=t(85893);function H(R){var b=(0,a.useIntl)(),K=(0,P.useContext)(T.Z),S=K.lang,r;if(!R.type)r=(0,l.jsx)(A.Z,{children:S("compose.type.default")});else switch(R.type){case"remoteUrl":r=(0,l.jsx)(A.Z,{color:"cyan",children:S("compose.type.".concat(R.type))});break;case"serverPath":r=(0,l.jsx)(A.Z,{color:"blue",children:S("compose.type.".concat(R.type))});break;case"storagePath":r=(0,l.jsx)(A.Z,{color:"geekblue",children:S("compose.type.".concat(R.type))});break;case"outPath":r=(0,l.jsx)(A.Z,{color:"yellow",children:S("compose.type.".concat(R.type))});break;case"store":r=(0,l.jsx)(A.Z,{color:"green",children:S("compose.type.".concat(R.type))});break;case"dangling":r=(0,l.jsx)(A.Z,{color:"error",children:S("compose.type.".concat(R.type))});break;default:r=(0,l.jsx)(A.Z,{children:S("compose.type.".concat(R.type))})}return(0,l.jsx)(x.Z,{title:R.tootip,children:r})}function F(){var R=(0,P.useContext)(M.Z),b=R.listTableRef,K=(0,P.useContext)(T.Z),S=K.lang,r=K.notice;return(0,l.jsx)(s._z,{header:{extra:[(0,l.jsx)(a.Link,{to:"/compose/create",reloadDocument:location.search.length>0,children:(0,l.jsx)(g.ZP,{type:"primary",children:"\u521B\u5EFA\u4EFB\u52A1"},"createCompose")},"create")]},children:(0,l.jsx)(u.Z,{scroll:{x:"max-content"},request:function(){var o=m()(i()().mark(function f(e){var L;return i()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,O.pm)({title:e.title,name:e.name});case 2:return L=_.sent,_.abrupt("return",{data:L.data.list,success:!0,total:L.data.list.length});case 4:case"end":return _.stop()}},f)}));return function(f){return o.apply(this,arguments)}}(),rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name",width:200,render:function(f,e,L,w,_){return e.setting.type=="dangling"?(0,l.jsx)(n.Z.Link,{onClick:function(){r.info("\u65E0\u6CD5\u627E\u5230\u8BE5\u4EFB\u52A1\u7684 compose.yaml \u6587\u4EF6\uFF0C\u8BF7\u6302\u8F7D\u76F8\u5E94\u7684 compose \u6587\u4EF6\u6216\u662F\u5728\u9762\u677F\u7684 compose \u76EE\u5F55\u6DFB\u52A0\u540C\u6807\u8BC6\u7684\u4EFB\u52A1\u76EE\u5F55\u53CA compose.yaml \u6587\u4EF6")},children:e.name}):(0,l.jsx)(a.Link,{to:"/compose/deploy/"+(e.id||e.name),children:e.name},L)},sorter:function(f,e){return f.name.localeCompare(e.name)},sortDirections:["descend","ascend"]},{title:"\u9879\u76EE\u540D\u79F0",dataIndex:"title",width:200},{title:"\u7C7B\u578B",width:150,search:!1,render:function(f,e,L,w,_){var I;return(0,l.jsx)(H,{tootip:(I=e.setting.uri)!==null&&I!==void 0?I:"",type:e.setting&&e.setting.type?e.setting.type:""})}},{title:"\u5BB9\u5668\u72B6\u6001",dataIndex:"status",search:!1,width:300,render:function(f,e,L,w,_){return(0,l.jsx)(c.Z,{children:e.setting.status.split(", ").map(function(I,z){var W="running",G=I.indexOf("(");return G>-1?W=I.slice(0,G):W=I,(0,l.jsx)(U.Z,{status:W,message:{content:S("compose.status.".concat(W),{count:I.slice(G+1,I.length-1)}),placement:"top",showInTag:!0}},z)})})}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"",search:!1,width:150,render:function(f,e,L,w,_){return e.setting.createdAt?new Date(e.setting.createdAt).toLocaleString():"-"}},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"",search:!1,width:150,render:function(f,e,L,w,_){return e.setting.updatedAt?new Date(e.setting.updatedAt).toLocaleString():"-"}},{title:"\u64CD\u4F5C",width:80,valueType:"option",fixed:"right",key:"option",render:function(f,e,L,w,_){return e.setting.type!="dangling"&&(0,l.jsxs)(c.Z,{split:(0,l.jsx)(D.Z,{type:"vertical"}),children:[(0,l.jsx)(a.Link,{to:"/compose/deploy/"+(e.id||e.name),children:(0,l.jsx)(x.Z,{title:"\u90E8\u7F72",children:(0,l.jsx)(j.Z,{})})},"3"),(0,l.jsx)(a.Link,{to:"/compose/create?id="+(e.id||e.name),children:(0,l.jsx)(x.Z,{title:"\u7F16\u8F91",children:(0,l.jsx)(h.Z,{})})},"4"),(0,l.jsx)(n.Z.Link,{onClick:m()(i()().mark(function I(){var z,W;return i()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,O.tw)({id:e.id||e.name});case 2:z=k.sent,W=new Blob([z],{type:"application/zip"}),(0,Z.saveAs)(W,"compose-"+e.name+".zip");case 5:case"end":return k.stop()}},I)})),children:(0,l.jsx)(x.Z,{title:"\u4E0B\u8F7D",children:(0,l.jsx)(p.Z,{})})},"2")]})}}],rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0,getCheckboxProps:function(f){return{disabled:f.setting.type=="dangling"||f.setting.type=="outPath"}}},tableAlertOptionRender:function(f){var e=f.selectedRows;return(0,l.jsx)(c.Z,{size:16,children:(0,l.jsx)(d.Z,{danger:!0,type:"primary",action:function(){return(0,O.ik)({id:e.map(function(w){return w.id})})},onSuccess:function(){var w,_;return!((w=b.current)===null||w===void 0)&&w.reloadAndRest&&((_=b.current)===null||_===void 0||_.reloadAndRest()),!0},onError:function(){var w,_;return!((w=b.current)===null||w===void 0)&&w.reset&&((_=b.current)===null||_===void 0||_.reset()),!0},confirm:"notification.confirm.title",children:"\u6279\u91CF\u5220\u9664"})})},pagination:(0,y.O)(),search:{collapsed:!1},actionRef:b,columnsState:(0,y.j)("compose-list")})})}},90098:function(B,C,t){"use strict";t.d(C,{GG:function(){return P},MG:function(){return A},Oh:function(){return n},Pn:function(){return s},U_:function(){return Z},VN:function(){return U},iE:function(){return R},ik:function(){return a},im:function(){return O},mg:function(){return D},pm:function(){return h},tw:function(){return K},xC:function(){return H}});var E=t(15009),i=t.n(E),v=t(99289),m=t.n(v),d=t(82346);function O(r){return j.apply(this,arguments)}function j(){return j=m()(i()().mark(function r(o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/app/compose/create",{method:"POST",data:o}));case 1:case"end":return e.stop()}},r)})),j.apply(this,arguments)}function h(r){return p.apply(this,arguments)}function p(){return p=m()(i()().mark(function r(o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/app/compose/get-list",{method:"POST",data:o}));case 1:case"end":return e.stop()}},r)})),p.apply(this,arguments)}function s(r){return u.apply(this,arguments)}function u(){return u=m()(i()().mark(function r(o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.id=String(o.id),e.abrupt("return",(0,d.request)("/api/app/compose/get-task",{method:"POST",data:o}));case 2:case"end":return e.stop()}},r)})),u.apply(this,arguments)}function a(r){return g.apply(this,arguments)}function g(){return g=m()(i()().mark(function r(o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/app/compose/delete",{method:"POST",data:o}));case 1:case"end":return e.stop()}},r)})),g.apply(this,arguments)}function n(r){return c.apply(this,arguments)}function c(){return c=m()(i()().mark(function r(o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.id=String(o.id),e.abrupt("return",(0,d.request)("/api/app/compose/container-deploy",{method:"POST",data:o}));case 2:case"end":return e.stop()}},r)})),c.apply(this,arguments)}function D(r){return x.apply(this,arguments)}function x(){return x=m()(i()().mark(function r(o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.id=String(o.id),e.abrupt("return",(0,d.request)("/api/app/compose/container-destroy",{method:"POST",data:o}));case 2:case"end":return e.stop()}},r)})),x.apply(this,arguments)}function P(r){return M.apply(this,arguments)}function M(){return M=m()(i()().mark(function r(o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.id=String(o.id),e.abrupt("return",(0,d.request)("/api/app/compose/container-ctrl",{method:"POST",data:o}));case 2:case"end":return e.stop()}},r)})),M.apply(this,arguments)}function U(r){return y.apply(this,arguments)}function y(){return y=m()(i()().mark(function r(o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.id=String(o.id),e.abrupt("return",(0,d.request)("/api/app/compose/container-log",{method:"POST",data:o}));case 2:case"end":return e.stop()}},r)})),y.apply(this,arguments)}function Z(r){return T.apply(this,arguments)}function T(){return T=m()(i()().mark(function r(o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/app/compose/container-process-kill",{method:"POST",data:o}));case 1:case"end":return e.stop()}},r)})),T.apply(this,arguments)}function A(r){return l.apply(this,arguments)}function l(){return l=m()(i()().mark(function r(o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/app/compose/get-from-uri",{method:"POST",data:o}));case 1:case"end":return e.stop()}},r)})),l.apply(this,arguments)}function H(r){return F.apply(this,arguments)}function F(){return F=m()(i()().mark(function r(o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/app/compose/parse",{method:"POST",data:o}));case 1:case"end":return e.stop()}},r)})),F.apply(this,arguments)}function R(r){return b.apply(this,arguments)}function b(){return b=m()(i()().mark(function r(o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/api/common/store/deploy",{method:"POST",data:o}));case 1:case"end":return e.stop()}},r)})),b.apply(this,arguments)}function K(r){return S.apply(this,arguments)}function S(){return S=m()(i()().mark(function r(o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.id=String(o.id),e.abrupt("return",(0,d.request)("/api/app/compose/download",{method:"POST",data:o,responseType:"blob"}));case 2:case"end":return e.stop()}},r)})),S.apply(this,arguments)}},67255:function(B,C,t){"use strict";t.d(C,{O:function(){return E},j:function(){return i}});function E(){var v=localStorage.getItem("dpanel-pagesize");return v=="all"?!1:{showSizeChanger:!0,defaultPageSize:parseInt(v!=null?v:"20")}}function i(v){var m="dpanel-table-column-".concat(v),d={};if(localStorage.getItem(m)){var O;d=JSON.parse((O=localStorage.getItem(m))!==null&&O!==void 0?O:"{}")}return{defaultValue:d,onChange:function(h){localStorage.setItem("dpanel-table-column-".concat(v),JSON.stringify(h))}}}},93162:function(B,C,t){var E,i,v;(function(m,d){i=[],E=d,v=typeof E=="function"?E.apply(C,i):E,v!==void 0&&(B.exports=v)})(this,function(){"use strict";function m(u,a){return typeof a=="undefined"?a={autoBom:!1}:typeof a!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function d(u,a,g){var n=new XMLHttpRequest;n.open("GET",u),n.responseType="blob",n.onload=function(){s(n.response,a,g)},n.onerror=function(){console.error("could not download file")},n.send()}function O(u){var a=new XMLHttpRequest;a.open("HEAD",u,!1);try{a.send()}catch(g){}return 200<=a.status&&299>=a.status}function j(u){try{u.dispatchEvent(new MouseEvent("click"))}catch(g){var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(a)}}var h=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof t.g=="object"&&t.g.global===t.g?t.g:void 0,p=h.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=h.saveAs||(typeof window!="object"||window!==h?function(){}:"download"in HTMLAnchorElement.prototype&&!p?function(u,a,g){var n=h.URL||h.webkitURL,c=document.createElement("a");a=a||u.name||"download",c.download=a,c.rel="noopener",typeof u=="string"?(c.href=u,c.origin===location.origin?j(c):O(c.href)?d(u,a,g):j(c,c.target="_blank")):(c.href=n.createObjectURL(u),setTimeout(function(){n.revokeObjectURL(c.href)},4e4),setTimeout(function(){j(c)},0))}:"msSaveOrOpenBlob"in navigator?function(u,a,g){if(a=a||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(m(u,g),a);else if(O(u))d(u,a,g);else{var n=document.createElement("a");n.href=u,n.target="_blank",setTimeout(function(){j(n)})}}:function(u,a,g,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),typeof u=="string")return d(u,a,g);var c=u.type==="application/octet-stream",D=/constructor/i.test(h.HTMLElement)||h.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||c&&D||p)&&typeof FileReader!="undefined"){var P=new FileReader;P.onloadend=function(){var y=P.result;y=x?y:y.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=y:location=y,n=null},P.readAsDataURL(u)}else{var M=h.URL||h.webkitURL,U=M.createObjectURL(u);n?n.location=U:location.href=U,n=null,setTimeout(function(){M.revokeObjectURL(U)},4e4)}});h.saveAs=s.saveAs=s,B.exports=s})}}]);
