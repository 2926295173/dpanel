"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1180],{52688:function(z,p,e){var y=e(1413),P=e(45987),L=e(67294),M=e(61856),I=e(85893),Z=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],h=L.forwardRef(function(C,d){var r=C.fieldProps,B=C.unCheckedChildren,A=C.checkedChildren,$=C.proFieldProps,g=(0,P.Z)(C,Z);return(0,I.jsx)(M.Z,(0,y.Z)({valueType:"switch",fieldProps:(0,y.Z)({unCheckedChildren:B,checkedChildren:A},r),ref:d,valuePropName:"checked",proFieldProps:$,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},g))});p.Z=h},80821:function(z,p,e){e.d(p,{Z:function(){return d}});var y=e(5574),P=e.n(y),L=e(24963),M=e(86738),I=e(14726),Z=e(83062),h=e(67294),C=e(85893);function d(r){var B=(0,h.useState)(!1),A=P()(B,2),$=A[0],g=A[1],F=(0,h.useContext)(L.Z),K=F.lang,N=F.notice,S=F.message,l=function(){g(!0),r.action().then(function(T){if(g(!1),typeof r.onSuccess=="function"&&r.onSuccess(T),r.messageSuccess){var E="";typeof r.messageSuccess=="function"?E=r.messageSuccess(T):E=r.messageSuccess,E.indexOf(".")>-1&&(E=K(E)),r.asynced?S.info(E):S.success(E)}}).catch(function(T){g(!1),typeof r.onError=="function"&&r.onError(T)})};return r.confirm?(0,C.jsx)(M.Z,{style:{width:500},title:K("notification.title.tip"),description:r.confirm,onConfirm:l,okText:"Yes",cancelText:"No",children:(0,C.jsx)(I.ZP,{disabled:r.disabled,icon:r.icon,loading:$,danger:r.danger,type:r.type,children:r.children})}):(0,C.jsx)(Z.Z,{title:r.tips,children:(0,C.jsx)(I.ZP,{disabled:r.disabled,icon:r.icon,loading:$,onClick:l,danger:r.danger,type:r.type,children:r.children})})}},89063:function(z,p,e){e.d(p,{Z:function(){return C}});var y=e(24963),P=e(88484),L=e(31418),M=e(72723),I=e(14726),Z=e(67294),h=e(85893);function C(d){var r=(0,Z.useContext)(y.Z),B=r.message,A=r.notice,$=r.lang,g=(0,Z.useRef)(null),F=L.Z.useApp(),K=function(){g.current&&(g.current.click(),g.current.onchange=function(S){if(!S||!S.target)return"";var l=new FileReader;l.onload=function(T){var E,V,w=(E=T.target)===null||E===void 0?void 0:E.result;if(d.onLoad)try{d.onLoad&&d.onLoad(w)}catch(J){A.error(J);return}typeof d.onImport=="function"&&d.onImport(w),(V=g.current)!==null&&V!==void 0&&V.value&&(g.current.value="")};var G=S.target;if(G.files)try{l.readAsText(G.files[0])}catch(T){A.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(M.Z.Item,{name:"importFile",label:d.label,children:(0,h.jsx)(I.ZP,{icon:(0,h.jsx)(P.Z,{}),block:!0,onClick:K,children:d.title})}),(0,h.jsx)("input",{style:{display:"none"},type:"file",ref:g,name:"importFileInput"})]})}},24963:function(z,p,e){var y=e(67294),P=(0,y.createContext)({});p.Z=P},53893:function(z,p,e){e.r(p),e.d(p,{default:function(){return o}});var y=e(15009),P=e.n(y),L=e(99289),M=e.n(L),I=e(80821),Z=e(5574),h=e.n(Z),C=e(184),d=e(5966),r=e(52688),B=e(97462),A=e(62370),$=e(14726),g=e(86250),F=e(67294),K=e(91845),N=e(87662),S=e(89063),l=e(85893),G=(0,F.forwardRef)(function(t,a){(0,F.useImperativeHandle)(a,function(){return{edit:function(s){var u;(u=f.current)===null||u===void 0||u.setFieldsValue({name:s.name,title:s.title,address:s.address,enableTLS:s.enableTLS,tlsCa:s.tlsCa,tlsCert:s.tlsCert,tlsKey:s.tlsKey}),c(!0),D(s.name)}}});var i=(0,F.useState)(!1),v=h()(i,2),x=v[0],c=v[1],f=(0,F.useRef)(),j=(0,F.useState)(""),X=h()(j,2),W=X[0],D=X[1];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)($.ZP,{onClick:function(){var s;D(""),(s=f.current)===null||s===void 0||s.resetFields(),c(!0)},type:"primary",children:"\u6DFB\u52A0Docker\u73AF\u5883"}),(0,l.jsxs)(C.a,{drawerProps:{forceRender:!0},onOpenChange:function(s){c(s)},open:x,width:800,formRef:f,title:"\u6DFB\u52A0Docker\u73AF\u5883",onFinish:function(){var U=M()(P()().mark(function s(u){var O,m;return P()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return O={name:u.name,title:u.title,address:u.address,tlsCa:u.tlsCa,tlsCert:u.tlsCert,tlsKey:u.tlsKey,enableTLS:u.enableTLS},b.next=3,(0,N.ad)(O);case 3:return m=b.sent,t.onFinish&&t.onFinish(),b.abrupt("return",!0);case 6:case"end":return b.stop()}},s)}));return function(s){return U.apply(this,arguments)}}(),children:[(0,l.jsx)(d.Z,{label:"\u540D\u79F0",name:"title",required:!0,rules:[{required:!0}],fieldProps:{onChange:function(s){var u="";if(s.target.value&&!W){var O,m=(0,K.N9)(s.target.value.trim(),{toneType:"none",type:"array"});u=m.join(""),(O=f.current)===null||O===void 0||O.setFieldValue("name",u)}}}}),(0,l.jsx)(d.Z,{label:"\u6807\u8BC6",name:"name",required:!0,disabled:W!="",rules:[{required:!0}],placeholder:"\u6807\u8BC6Docker\u73AF\u5883\uFF0C\u53EA\u5141\u8BB8\u4E3A\u82F1\u6587\u6216\u662F\u6570\u5B57"}),(0,l.jsx)(d.Z,{label:"Docker Api \u5730\u5740",name:"address",tooltip:"\u8FDE\u63A5\u8FDC\u7A0B Docker \u65F6\u8BF7\u5148\u5F00\u542F Api \u5730\u5740\u8BBF\u95EE\u3002",placeholder:"\u4F8B\u5982\uFF1Aunix:///var/run/docker.sock\u3001tcp://192.16.0.5:2375"}),(0,l.jsx)(r.Z,{label:"\u542F\u7528TLS",name:"enableTLS",tooltip:"\u751F\u6210\u6559\u7A0B\u89C1\uFF1Ahttps://donknap.github.io/dpanel-docs/#/zh-cn/manual/remote"}),(0,l.jsx)(B.Z,{name:["enableTLS"],children:function(s){var u=s.enableTLS;if(u)return(0,l.jsxs)(g.Z,{gap:20,justify:"start",children:[(0,l.jsx)(A.Z,{name:"tlsCa",children:(0,l.jsx)(S.Z,{title:"\u4E0A\u4F20CA\u8BC1\u4E66 ca.pem",onImport:function(m){var R;return(R=f.current)===null||R===void 0||R.setFieldValue("tlsCa",m),!0},onLoad:function(m){if(m.indexOf("CERTIFICATE")<0)throw new Error("\u5BFC\u5165ca.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})}),(0,l.jsx)(A.Z,{name:"tlsCert",children:(0,l.jsx)(S.Z,{title:"\u4E0A\u4F20\u8BC1\u4E66\u6587\u4EF6 cert.pem",onImport:function(m){var R;return(R=f.current)===null||R===void 0||R.setFieldValue("tlsCert",m),!0},onLoad:function(m){if(m.indexOf("CERTIFICATE")<0)throw new Error("\u5BFC\u5165cert.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})}),(0,l.jsx)(A.Z,{name:"tlsKey",children:(0,l.jsx)(S.Z,{title:"\u4E0A\u4F20\u5BC6\u94A5\u6587\u4EF6 key.pem",onImport:function(m){var R;return(R=f.current)===null||R===void 0||R.setFieldValue("tlsKey",m),!0},onLoad:function(m){if(m.indexOf("PRIVATE")<0)throw new Error("\u5BFC\u5165key.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})})]})}})]})]})}),T=G,E=e(43425),V=e(90078),w=e(10641),J=e(42075),H=e(96074),n=e(60922);function o(){var t=(0,F.useRef)(),a=(0,F.useRef)();return(0,l.jsx)(V._z,{header:{extra:[(0,l.jsx)(T,{ref:a,onFinish:function(){var v,x;!((v=t.current)===null||v===void 0)&&v.reloadAndRest&&((x=t.current)===null||x===void 0||x.reloadAndRest())}},"dockerEnvCreate")]},children:(0,l.jsx)(w.Z,{rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name"},{title:"\u540D\u79F0",dataIndex:"title"},{title:"\u5730\u5740",dataIndex:"address"},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(v,x,c,f,j){return(0,l.jsx)(J.Z,{split:(0,l.jsx)(H.Z,{type:"vertical"}),children:!x.default&&(0,l.jsx)(n.Z.Link,{onClick:function(){var W;(W=a.current)===null||W===void 0||W.edit(x)},children:(0,l.jsx)(E.Z,{})},x.name)})}}],pagination:!1,request:M()(P()().mark(function i(){var v;return P()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,N.Kg)();case 2:return v=c.sent,c.abrupt("return",{data:v.data.list,total:v.data.list.length});case 4:case"end":return c.stop()}},i)})),search:!1,rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0,getCheckboxProps:function(v){return{disabled:v.default}}},actionRef:t,tableAlertOptionRender:function(v){var x=v.selectedRowKeys;return(0,l.jsx)(J.Z,{size:16,children:(0,l.jsx)(I.Z,{danger:!0,type:"primary",action:function(){return(0,N._g)({name:x})},onSuccess:function(){var f,j;return!((f=t.current)===null||f===void 0)&&f.reloadAndRest&&((j=t.current)===null||j===void 0||j.reloadAndRest()),!0},onError:function(){var f,j;return!((f=t.current)===null||f===void 0)&&f.reset&&((j=t.current)===null||j===void 0||j.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"})})}})})}},86250:function(z,p,e){e.d(p,{Z:function(){return H}});var y=e(67294),P=e(93967),L=e.n(P),M=e(98423),I=e(98065),Z=e(53124),h=e(83559),C=e(83262);const d=["wrap","nowrap","wrap-reverse"],r=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],B=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],A=(n,o)=>{const t=o.wrap===!0?"wrap":o.wrap;return{[`${n}-wrap-${t}`]:t&&d.includes(t)}},$=(n,o)=>{const t={};return B.forEach(a=>{t[`${n}-align-${a}`]=o.align===a}),t[`${n}-align-stretch`]=!o.align&&!!o.vertical,t},g=(n,o)=>{const t={};return r.forEach(a=>{t[`${n}-justify-${a}`]=o.justify===a}),t};function F(n,o){return L()(Object.assign(Object.assign(Object.assign({},A(n,o)),$(n,o)),g(n,o)))}var K=F;const N=n=>{const{componentCls:o}=n;return{[o]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},S=n=>{const{componentCls:o}=n;return{[o]:{"&-gap-small":{gap:n.flexGapSM},"&-gap-middle":{gap:n.flexGap},"&-gap-large":{gap:n.flexGapLG}}}},l=n=>{const{componentCls:o}=n,t={};return d.forEach(a=>{t[`${o}-wrap-${a}`]={flexWrap:a}}),t},G=n=>{const{componentCls:o}=n,t={};return B.forEach(a=>{t[`${o}-align-${a}`]={alignItems:a}}),t},T=n=>{const{componentCls:o}=n,t={};return r.forEach(a=>{t[`${o}-justify-${a}`]={justifyContent:a}}),t},E=()=>({});var V=(0,h.I$)("Flex",n=>{const{paddingXS:o,padding:t,paddingLG:a}=n,i=(0,C.IX)(n,{flexGapSM:o,flexGap:t,flexGapLG:a});return[N(i),S(i),l(i),G(i),T(i)]},E,{resetStyle:!1}),w=function(n,o){var t={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&o.indexOf(a)<0&&(t[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(n);i<a.length;i++)o.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(n,a[i])&&(t[a[i]]=n[a[i]]);return t},H=y.forwardRef((n,o)=>{const{prefixCls:t,rootClassName:a,className:i,style:v,flex:x,gap:c,children:f,vertical:j=!1,component:X="div"}=n,W=w(n,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:D,direction:U,getPrefixCls:s}=y.useContext(Z.E_),u=s("flex",t),[O,m,R]=V(u),b=j!=null?j:D==null?void 0:D.vertical,Q=L()(i,a,D==null?void 0:D.className,u,m,R,K(u,n),{[`${u}-rtl`]:U==="rtl",[`${u}-gap-${c}`]:(0,I.n)(c),[`${u}-vertical`]:b}),Y=Object.assign(Object.assign({},D==null?void 0:D.style),v);return x&&(Y.flex=x),c&&!(0,I.n)(c)&&(Y.gap=c),O(y.createElement(X,Object.assign({ref:o,className:Q,style:Y},(0,M.Z)(W,["justify","wrap","align"])),f))})}}]);
