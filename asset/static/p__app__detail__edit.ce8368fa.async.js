"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8878],{29158:function(ee,O,t){t.d(O,{Z:function(){return R}});var S=t(87462),u=t(67294),b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"},d=b,c=t(84089),f=function(I,o){return u.createElement(c.Z,(0,S.Z)({},I,{ref:o,icon:d}))},p=u.forwardRef(f),R=p},30159:function(ee,O,t){t.d(O,{Z:function(){return R}});var S=t(87462),u=t(67294),b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm-88-532h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zm224 0h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z"}}]},name:"pause-circle",theme:"outlined"},d=b,c=t(84089),f=function(I,o){return u.createElement(c.Z,(0,S.Z)({},I,{ref:o,icon:d}))},p=u.forwardRef(f),R=p},74842:function(ee,O,t){t.d(O,{Z:function(){return R}});var S=t(87462),u=t(67294),b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},d=b,c=t(84089),f=function(I,o){return u.createElement(c.Z,(0,S.Z)({},I,{ref:o,icon:d}))},p=u.forwardRef(f),R=p},16664:function(ee,O,t){t.d(O,{Z:function(){return R}});var S=t(87462),u=t(67294),b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"unordered-list",theme:"outlined"},d=b,c=t(84089),f=function(I,o){return u.createElement(c.Z,(0,S.Z)({},I,{ref:o,icon:d}))},p=u.forwardRef(f),R=p},75516:function(ee,O,t){t.d(O,{Z:function(){return A}});var S=t(89035),u=t(37476),b=t(38345),d=t(97462),c=t(62370),f=t(54006),p=t(14726),R=t(63490),T=t(78045),I=t(67294),o=t(85893);function A(g){return(0,o.jsx)(u.Y,{trigger:(0,o.jsx)(p.ZP,{type:"dashed",icon:(0,o.jsx)(S.Z,{}),children:"Console"}),submitter:!1,children:(0,o.jsxs)(b.Z,{children:[(0,o.jsx)(d.Z,{name:["entryCmd"],children:function(s){var m,x=s.entryCmd,ue=x?"/bin/"+x:"/bin/sh";return(0,o.jsx)(R.Z,{columns:[{title:"\u5BB9\u5668\u540D\u79F0",key:"name",dataIndex:"name",ellipsis:!0},{title:"\u5DE5\u4F5C\u76EE\u5F55",key:"workDir",dataIndex:"workDir"},{title:"\u72B6\u6001",key:"status",dataIndex:"status",width:150},{title:"\u64CD\u4F5C",key:"status",width:150,render:function(J,ne,ie){return(0,o.jsx)(f.Link,{to:"/console/".concat(g.container.Id,"?cmd=").concat(encodeURIComponent(ue),"&workDir=").concat(encodeURIComponent(g.container.Config.WorkingDir?g.container.Config.WorkingDir:"/")),target:"_blank",children:"\u767B\u5F55"})}}],dataSource:[{key:1,name:g.container.Id,status:g.container.State.Status,workDir:(m=g.container.Config.WorkingDir)!==null&&m!==void 0?m:"/"}],rowKey:"key",pagination:!1})}}),(0,o.jsx)(c.Z,{name:"entryCmd",label:"Shell\u73AF\u5883\uFF08\u4EC5\u505A\u9ED8\u8BA4\u73AF\u5883\uFF0C\u767B\u5F55\u540E\u53EF\u5207\u6362\u81F3\u5176\u4ED6\u73AF\u5883\uFF09",style:{marginTop:15},initialValue:"sh",children:(0,o.jsxs)(T.ZP.Group,{children:[(0,o.jsx)(T.ZP,{value:"bash",children:"/bin/bash"}),(0,o.jsx)(T.ZP,{value:"sh",children:"/bin/sh"})]})})]})})}},78498:function(ee,O,t){t.d(O,{Z:function(){return f}});var S=t(25035),u=t(42075),b=t(83062),d=t(67294),c=t(85893);function f(p){return(0,c.jsxs)(u.Z,{children:[p.title,(0,c.jsx)(b.Z,{title:p.help,children:(0,c.jsx)(S.Z,{})})]})}},54198:function(ee,O,t){t.r(O),t.d(O,{default:function(){return ln}});var S=t(15009),u=t.n(S),b=t(99289),d=t.n(b),c=t(5574),f=t.n(c),p=t(14946),R=t(29158),T=t(48689),I=t(38345),o=t(10641),A=t(42075),g=t(60922),ce=t(83062),s=t(67294),m=t(80821),x=t(60335),ue=t(64599),w=t.n(ue),J=t(87462),ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 680h-54V540H546v-92h238c8.8 0 16-7.2 16-16V168c0-8.8-7.2-16-16-16H240c-8.8 0-16 7.2-16 16v264c0 8.8 7.2 16 16 16h238v92H190v140h-54c-4.4 0-8 3.6-8 8v176c0 4.4 3.6 8 8 8h176c4.4 0 8-3.6 8-8V688c0-4.4-3.6-8-8-8h-54v-72h220v72h-54c-4.4 0-8 3.6-8 8v176c0 4.4 3.6 8 8 8h176c4.4 0 8-3.6 8-8V688c0-4.4-3.6-8-8-8h-54v-72h220v72h-54c-4.4 0-8 3.6-8 8v176c0 4.4 3.6 8 8 8h176c4.4 0 8-3.6 8-8V688c0-4.4-3.6-8-8-8zM256 805.3c0 1.5-1.2 2.7-2.7 2.7h-58.7c-1.5 0-2.7-1.2-2.7-2.7v-58.7c0-1.5 1.2-2.7 2.7-2.7h58.7c1.5 0 2.7 1.2 2.7 2.7v58.7zm288 0c0 1.5-1.2 2.7-2.7 2.7h-58.7c-1.5 0-2.7-1.2-2.7-2.7v-58.7c0-1.5 1.2-2.7 2.7-2.7h58.7c1.5 0 2.7 1.2 2.7 2.7v58.7zM288 384V216h448v168H288zm544 421.3c0 1.5-1.2 2.7-2.7 2.7h-58.7c-1.5 0-2.7-1.2-2.7-2.7v-58.7c0-1.5 1.2-2.7 2.7-2.7h58.7c1.5 0 2.7 1.2 2.7 2.7v58.7zM360 300a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"cluster",theme:"outlined"},ie=ne,k=t(84089),xe=function(E,F){return s.createElement(k.Z,(0,J.Z)({},E,{ref:F,icon:ie}))},te=s.forwardRef(xe),l=te,j=t(184),L=t(14726),a=t(4798),n=t(85893);function De(P){var E=(0,s.useRef)();return[(0,n.jsx)(j.a,{trigger:(0,n.jsx)(L.ZP,{type:"primary",icon:(0,n.jsx)(l,{}),children:"\u52A0\u5165\u5DF2\u6709\u7F51\u7EDC"},"button"),width:800,formRef:E,title:"\u914D\u7F6E\u7F51\u7EDC",onFinish:function(){var F=d()(u()().mark(function y(v){var V,B,M,$,N;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!v.network){e.next=19;break}B=w()(v.network),e.prev=2,B.s();case 4:if((M=B.n()).done){e.next=11;break}return $=M.value,e.next=8,(0,p.HY)({name:$.name,containerName:P.containerName,containerAlise:$.alise,ipV4:$.ipV4});case 8:N=e.sent;case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),B.e(e.t0);case 16:return e.prev=16,B.f(),e.finish(16);case 19:return!((V=E.current)===null||V===void 0)&&V.resetFields&&E.current.resetFields(),P.onSuccess&&P.onSuccess(),e.abrupt("return",!0);case 22:case"end":return e.stop()}},y,null,[[2,13,16,19]])}));return function(y){return F.apply(this,arguments)}}(),children:(0,n.jsx)(a.Z,{siteName:P.containerName})},"form")]}var me=t(78498);function ve(P){var E=(0,s.useRef)();return(0,n.jsx)(I.Z,{title:(0,n.jsx)(R.Z,{}),subTitle:"\u5BB9\u5668\u5173\u8054\u4FE1\u606F",ghost:!0,extra:(0,n.jsx)(De,{onSuccess:function(){var y,v;!((y=E.current)===null||y===void 0)&&y.reloadAndRest&&((v=E.current)===null||v===void 0||v.reloadAndRest())},containerName:P.containerName}),children:(0,n.jsx)(o.Z,{scroll:{x:"max-content"},rowKey:"key",actionRef:E,pagination:!1,options:!1,columns:[{title:"\u6240\u5C5E\u7F51\u7EDC",key:"name",dataIndex:"networkName",width:300},{title:"\u5BB9\u5668\u540D\u79F0",key:"containerName",dataIndex:"containerName"},{title:(0,n.jsx)(me.Z,{title:"hostname",help:"\u63D0\u4F9B\u5BB9\u5668\u5185\u90E8\u8BBF\u95EE"}),key:"hostName",render:function(y,v,V){return v.hostName?(0,n.jsx)(A.Z,{direction:"vertical",children:v.hostName.map(function(B){if(B)return(0,n.jsx)(g.Z.Text,{copyable:!0,keyboard:!0,children:B},B)})}):(0,n.jsx)(n.Fragment,{})}},{title:"Ip",key:"ip",render:function(y,v,V,B,M){return(0,n.jsxs)(A.Z,{direction:"vertical",children:[(0,n.jsx)("span",{children:v.networkInfo.IPv4Address}),v.networkInfo.IPv6Address&&(0,n.jsx)("span",{children:v.networkInfo.IPv6Address})]})}},{title:"\u64CD\u4F5C",key:"option",width:100,render:function(y,v,V,B,M){return(0,n.jsx)(A.Z,{children:v.key!="bridge"&&v.key!="none"&&v.key!="host"&&v.networkName!=""&&(0,n.jsx)(ce.Z,{title:"\u9000\u51FA\u7F51\u7EDC",children:(0,n.jsx)(m.Z,{confirm:"\u786E\u8BA4\u9000\u51FA\u8BE5\u7F51\u7EDC\uFF1F",type:"link",action:function(){var N;return(0,p.t9)({name:v.networkName,containerName:(N=P.containerName)!==null&&N!==void 0?N:""})},messageSuccess:"\u9000\u51FA\u6210\u529F",onSuccess:function(){var N,Z;!((N=E.current)===null||N===void 0)&&N.reloadAndRest&&((Z=E.current)===null||Z===void 0||Z.reloadAndRest())},children:(0,n.jsx)(T.Z,{})})})})}}],request:function(){var F=d()(u()().mark(function y(v,V,B){var M,$;return u()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,x.jV)({md5:P.containerName});case 2:return M=Z.sent,Z.next=5,(0,p._3)({name:Object.keys(M.data.info.NetworkSettings.Networks)});case 5:return $=Z.sent,Z.abrupt("return",{data:$.data.list,success:!0,total:$.data.list.length});case 7:case"end":return Z.stop()}},y)}));return function(y,v,V){return F.apply(this,arguments)}}(),search:!1,expandable:{defaultExpandAllRows:!0,expandRowByClick:!1,defaultExpandedRowKeys:["bridge"]}})})}var ye=t(44771);function fe(P){return(0,n.jsx)(g.Z.Text,{copyable:!0,children:P.title})}var Fe=t(62597),Be=t(43425),he=t(74842),Oe=t(87784),Pe=t(33160),Se=t(30159),Ze=t(58638),be=t(551),Q=function(E,F){return s.createElement(k.Z,(0,J.Z)({},E,{ref:F,icon:be.Z}))},ae=s.forwardRef(Q),Ee=ae,Ce=t(86548),K=t(57132),pe=t(45605),ge={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM496 208H312c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 544h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H312c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm328 244a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"hdd",theme:"outlined"},Te=ge,X=function(E,F){return s.createElement(k.Z,(0,J.Z)({},E,{ref:F,icon:Te}))},U=s.forwardRef(X),$e=U,He=t(32319),Ke=t(16664),ke=t(97269),Ve=t(62370),se=t(54006),Ae=t(96074),Re=t(84567),ze=t(25278),h=t(26412),_e=t(66309),we=t(93162),Ge=t(87662),Ye=t(75516),Je=t(28031),Qe=t(85576),Xe=t(63490),qe=t(37476),en=t(86615),nn=t(97462),tn=t(5966),an=t(2831);function rn(P){var E=Qe.Z.useModal(),F=f()(E,2),y=F[0],v=F[1],V=(0,s.useState)(),B=f()(V,2),M=B[0],$=B[1],N=(0,s.useRef)(),Z="";return(0,s.useEffect)(function(){var e,G;(0,an.aF)().then(function(z){$(z.data.dpanel.containerInfo)}),Z=(e=localStorage.getItem("backupPath"))!==null&&e!==void 0?e:"",(G=N.current)===null||G===void 0||G.setFieldValue("backupPath",Z)},[]),(0,n.jsxs)(n.Fragment,{children:[v,(0,n.jsxs)(qe.Y,{modalProps:{forceRender:!0},formRef:N,title:"\u5907\u4EFD\u5BB9\u5668\u5B58\u50A8\u5377",trigger:(0,n.jsxs)(L.ZP,{children:[(0,n.jsx)(Ee,{})," \u5907\u4EFD\u5B58\u50A8"]}),onFinish:function(){var e=d()(u()().mark(function G(z){var le,_;return u()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return z.backupPath&&localStorage.setItem("backupPath",z.backupPath),le={containerMd5:P.container.Id,backupTargetType:z.backupTargetType,backupPath:z.backupPath},z.backupTargetType=="dpanel"&&M&&M.Mounts&&M.Mounts.map(function(q){q.Destination=="/dpanel"&&(le.backupPath=q.Type=="volume"?q.Name:le.backupPath=q.Source)}),re.next=5,(0,Je.vp)(le);case 5:return _=re.sent,y.info({title:"\u6B63\u5728\u5907\u4EFD\u5B58\u50A8\u4E2D",content:(0,n.jsx)(I.Z,{ghost:!0,style:{paddingTop:30},children:(0,n.jsx)(Xe.Z,{columns:[{title:"\u5907\u4EFD\u6587\u4EF6",key:"backup",dataIndex:"backup",width:300,render:function(Le,je,Y){return(0,n.jsx)(g.Z.Paragraph,{ellipsis:{rows:5,expandable:!0},children:je.backupTar})}},{title:"\u5907\u4EFD\u76EE\u5F55",key:"pathList",dataIndex:"pathList",render:function(Le,je,Y){return je.pathList.map(function(Ie,Me){return(0,n.jsx)("div",{children:Ie},Me)})}}],dataSource:[{key:1,backupTar:_.data.backupTar,pathList:_.data.pathList}],rowKey:"key",pagination:!1})}),closable:!0,width:800}),re.abrupt("return",!0);case 8:case"end":return re.stop()}},G)}));return function(G){return e.apply(this,arguments)}}(),children:[(0,n.jsx)(en.Z.Group,{label:"\u5907\u4EFD\u76EE\u6807\u4F4D\u7F6E",name:"backupTargetType",initialValue:"dpanel",fieldProps:{defaultValue:"dpanel"},options:[{label:"DPanel \u5907\u4EFD\u76EE\u5F55\u4E2D",value:"dpanel"},{label:"\u5BBF\u4E3B\u673A\u76EE\u5F55\u4E2D",value:"host"}]}),(0,n.jsx)(nn.Z,{name:["backupTargetType"],children:function(G){var z=G.backupTargetType;return z=="host"?(0,n.jsx)(tn.Z,{label:"\u6307\u5B9A\u5BBF\u4E3B\u673A\u76EE\u5F55",tooltip:"\u8BF7\u586B\u5199\u5BBF\u4E3B\u673A\u76EE\u5F55\uFF0C\u4E0D\u5B58\u65F6\u4F1A\u65B0\u5EFA",name:"backupPath",placeholder:"/home/backup",initialValue:"/home/backup"}):(0,n.jsxs)(n.Fragment,{children:["\u5907\u4EFD\u4F4D\u4E8E DPanel \u5BB9\u5668\u4E2D\u7684 /dpanel/backup \u8DEF\u5F84 ",(0,n.jsx)(se.Link,{target:"_blank",to:"/app/detail/file/".concat(M==null?void 0:M.Id,"?tab=file&path=").concat(encodeURIComponent("/dpanel/backup")),children:"\u67E5\u770B"})]})}})]})]})}var Ue=t(78451),un=t(24963),sn=t(50070);function ln(){var P,E,F,y=(0,s.useContext)(un.Z),v=y.message,V=y.notice,B=y.loading,M=(0,s.useContext)(sn.AppDetailContext),$=(0,se.useParams)(),N=(0,s.useState)(),Z=f()(N,2),e=Z[0],G=Z[1],z=(0,s.useState)(1),le=f()(z,2),_=le[0],oe=le[1],re=(0,se.useNavigate)(),q=(0,s.useRef)(),Le=(0,s.useState)({deleteImage:!1,deleteVolume:!1,deleteLink:!1}),je=f()(Le,2),Y=je[0],Ie=je[1],Me=(0,s.useState)(""),Ne=f()(Me,2),on=Ne[0],dn=Ne[1],We=(0,s.useRef)();return(0,s.useEffect)(function(){var i;B.show(),M.reload(),(0,x.jV)({md5:(i=$.id)!==null&&i!==void 0?i:""}).then(function(r){var D;r.data&&(r.data.info.HostConfig.NetworkMode=="host"&&r.data.info.Config.ExposedPorts&&Object.keys(r.data.info.Config.ExposedPorts).map(function(C){r.data.info.NetworkSettings.Ports[C]=[{HostIp:"0.0.0.0",HostPort:C.substring(0,C.indexOf("/"))}]}),G(r.data.info)),(D=q.current)===null||D===void 0||D.setFieldValue("restart",r.data.info.HostConfig.RestartPolicy.Name)}).finally(function(){B.destroy()}),(0,Ge.pe)({groupName:"setting",name:"server"}).then(function(r){r.data.setting.value.serverIp&&dn(r.data.setting.value.serverIp)})},[_]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(I.Z,{direction:"column",gutter:[0,10],children:[(0,n.jsx)(I.Z,{title:(0,n.jsx)(Be.Z,{}),subTitle:"\u5E38\u7528\u64CD\u4F5C",ghost:!0,children:(0,n.jsxs)(A.Z,{wrap:!0,children:[(0,n.jsx)(m.Z,{icon:(0,n.jsx)(he.Z,{}),action:function(){var r;return(0,x.IW)({md5:(r=e==null?void 0:e.Id)!==null&&r!==void 0?r:"",operate:"start"})},messageSuccess:"\u542F\u52A8\u6210\u529F",onSuccess:function(){return oe(_+1)},disabled:e&&e.State.Running||e&&e.State.Paused,children:"\u542F\u52A8"}),(0,n.jsx)(m.Z,{action:function(){var r;return(0,x.IW)({md5:(r=e==null?void 0:e.Id)!==null&&r!==void 0?r:"",operate:"stop"})},messageSuccess:"\u505C\u6B62\u6210\u529F",icon:(0,n.jsx)(Oe.Z,{}),onSuccess:function(){return oe(_+1)},disabled:e&&e.State.Dead,children:"\u505C\u6B62"}),(0,n.jsx)(m.Z,{action:function(){var r;return(0,x.IW)({md5:(r=e==null?void 0:e.Id)!==null&&r!==void 0?r:"",operate:"restart"})},messageSuccess:"\u91CD\u542F\u6210\u529F",onSuccess:function(){return oe(_+1)},icon:(0,n.jsx)(Pe.Z,{}),children:"\u91CD\u542F"}),(0,n.jsx)(m.Z,{action:function(){var r;return(0,x.IW)({md5:(r=e==null?void 0:e.Id)!==null&&r!==void 0?r:"",operate:"pause"})},messageSuccess:"\u6682\u505C\u6210\u529F",onSuccess:function(){return oe(_+1)},icon:(0,n.jsx)(Se.Z,{}),disabled:e&&!e.State.Running,children:"\u6682\u505C"}),(0,n.jsx)(m.Z,{action:function(){var r;return(0,x.IW)({md5:(r=e==null?void 0:e.Id)!==null&&r!==void 0?r:"",operate:"unpause"})},messageSuccess:"\u542F\u52A8\u6210\u529F",onSuccess:function(){return oe(_+1)},icon:(0,n.jsx)(he.Z,{}),disabled:e&&!e.State.Paused,children:"\u6062\u590D"}),(0,n.jsx)(Ae.Z,{type:"vertical"}),e&&(0,n.jsx)(Ye.Z,{container:e}),(0,n.jsx)(Ae.Z,{type:"vertical"}),e&&(!e.Config.Labels||!e.Config.Labels["com.docker.compose.project"])&&(0,n.jsx)(m.Z,{action:function(){var r;return(0,Fe.Ct)({md5:(r=e==null?void 0:e.Id)!==null&&r!==void 0?r:"",deleteImage:Y.deleteImage,deleteVolume:Y.deleteVolume})},messageSuccess:"\u5220\u9664\u6210\u529F",danger:!0,type:"primary",icon:(0,n.jsx)(Oe.Z,{}),onSuccess:function(){return re("/app/list")},confirm:(0,n.jsxs)(A.Z,{style:{width:280},direction:"vertical",children:[(0,n.jsx)(g.Z.Text,{children:"\u5220\u9664\u5BB9\u5668\u540E\u65E0\u6CD5\u6062\u590D,\u786E\u8BA4\u5417\uFF1F"}),(0,n.jsx)(Re.Z,{name:"deleteVolume",onChange:function(r){return Ie({deleteImage:Y.deleteImage,deleteVolume:r.target.checked,deleteLink:Y.deleteLink})},children:"\u5220\u9664\u5B58\u50A8\uFF1F"}),(0,n.jsx)(Re.Z,{name:"deleteImage",onChange:function(r){return Ie({deleteImage:r.target.checked,deleteVolume:Y.deleteVolume,deleteLink:Y.deleteLink})},children:"\u5220\u9664\u955C\u50CF\uFF1F"}),(0,n.jsx)(Re.Z,{name:"deleteLink",onChange:function(r){return Ie({deleteImage:Y.deleteVolume,deleteVolume:Y.deleteVolume,deleteLink:r.target.checked})},children:"\u5220\u9664\u5173\u8054\u5BB9\u5668\uFF1F"})]}),children:"\u5220\u9664"}),(0,n.jsx)(m.Z,{icon:(0,n.jsx)(Ze.Z,{}),action:function(){var r;return(0,x.LJ)({md5:(r=e==null?void 0:e.Id)!==null&&r!==void 0?r:""})},onSuccess:function(r){var D=new Blob([r],{type:"application/tar"});(0,we.saveAs)(D,(e==null?void 0:e.Id)+".tar")},messageSuccess:"\u5BFC\u51FA\u6210\u529F",children:"\u5BFC\u51FA"}),(0,n.jsx)(m.Z,{icon:(0,n.jsx)(Ee,{}),action:d()(u()().mark(function i(){var r,D,C;return u()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,(0,x.Re)({md5:(r=e==null?void 0:e.Id)!==null&&r!==void 0?r:"",name:(D=(C=We.current)===null||C===void 0?void 0:C.getFieldValue("saveImageName"))!==null&&D!==void 0?D:e==null?void 0:e.Name});case 2:case"end":return H.stop()}},i)})),confirmTitle:"\u955C\u50CF\u540D\u79F0",confirm:(0,n.jsx)(A.Z,{style:{width:280},direction:"vertical",children:(0,n.jsx)(ke.A,{formRef:We,submitter:!1,children:(0,n.jsx)(Ve.Z,{name:"saveImageName",children:(0,n.jsx)(ze.Z,{placeholder:"\u9ED8\u8BA4\u4E3A\u5BB9\u5668\u955C\u50CF\u540D\u79F0"})})})}),messageSuccess:"\u4FDD\u5B58\u6210\u529F",children:"\u53E6\u5B58\u4E3A\u955C\u50CF"}),e&&(0,n.jsx)(rn,{container:e}),(0,n.jsx)(Ae.Z,{type:"vertical"}),(0,n.jsx)(se.Link,{to:"/app/create/image?containerId=".concat(e==null?void 0:e.Id,"&op=update"),children:(0,n.jsx)(L.ZP,{type:"primary",icon:(0,n.jsx)(Ce.Z,{}),children:"\u66F4\u65B0\u5BB9\u5668"})}),(0,n.jsx)(se.Link,{to:"/app/create/image?containerId=".concat(e==null?void 0:e.Id,"&op=copy"),children:(0,n.jsx)(L.ZP,{icon:(0,n.jsx)(K.Z,{}),children:"\u590D\u5236"})})]})}),(0,n.jsx)(I.Z,{title:(0,n.jsx)(pe.Z,{}),subTitle:"\u5BB9\u5668\u72B6\u6001",ghost:!0,children:(0,n.jsxs)(h.Z,{column:1,bordered:!0,children:[(0,n.jsx)(h.Z.Item,{label:"ID",children:(0,n.jsx)(fe,{title:e==null?void 0:e.Id})}),(0,n.jsx)(h.Z.Item,{label:"\u5BB9\u5668\u540D\u79F0",children:(0,n.jsx)(g.Z.Text,{editable:{tooltip:"\u4FEE\u6539\u5BB9\u5668\u540D\u79F0",onChange:function(){var i=d()(u()().mark(function D(C){var W;return u()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(e!=null&&e.Id){de.next=2;break}return de.abrupt("return");case 2:return de.next=4,(0,x.eE)({md5:e.Id,name:C});case 4:W=de.sent,oe(_+1),v.success("\u4FEE\u6539\u5BB9\u5668\u540D\u79F0");case 7:case"end":return de.stop()}},D)}));function r(D){return i.apply(this,arguments)}return r}()},children:e&&e.Name})}),(0,n.jsx)(h.Z.Item,{label:(0,n.jsx)(me.Z,{title:"\u7F51\u7EDC",help:"\u9ED8\u8BA4\u7F51\u7EDC\u53EA\u652F\u6301\u901A\u8FC7ip\u8BBF\u95EE,ip\u4F1A\u968F\u7740\u5BB9\u5668\u542F\u52A8\u505C\u6B62\u6539\u53D8.\u5982\u679C\u9700\u8981\u5728\u5BB9\u5668\u5185\u4E92\u8054,\u8BF7\u901A\u8FC7\u3010\u7F16\u8F91\u7AD9\u70B9\u3011-\u3010\u6DFB\u52A0\u5173\u8054\u3011"}),children:(e==null?void 0:e.State.Running)&&(0,n.jsxs)(h.Z,{column:1,bordered:!0,children:[e.NetworkSettings.Networks&&Object.keys(e.NetworkSettings.Networks).map(function(i,r){return(0,n.jsx)(h.Z.Item,{label:i,children:i=="host"?" Host \u7F51\u7EDC\uFF0C\u4E0E\u5BBF\u4E3B\u673A\u5171\u7528\u540C\u4E00\u7F51\u7EDC":(0,n.jsxs)(A.Z,{direction:"vertical",children:[(0,n.jsx)(fe,{title:e==null?void 0:e.NetworkSettings.Networks[i].IPAddress}),e==null?void 0:e.NetworkSettings.Networks[i].Gateway,e==null?void 0:e.NetworkSettings.Networks[i].MacAddress]})},"1")}),e.HostConfig.ExtraHosts&&(0,n.jsx)(h.Z.Item,{label:"\u5BBF\u4E3B\u673A\u7F51\u7EDC",children:(0,n.jsx)(A.Z,{direction:"vertical",children:e.HostConfig.ExtraHosts.map(function(i){if(i.indexOf(":")>-1){var r=i.split(":");return(0,n.jsxs)(A.Z,{children:[(0,n.jsx)(fe,{title:r[0]})," - ",r[1]]})}})})},"1")]})}),(0,n.jsx)(h.Z.Item,{label:"\u72B6\u6001",children:e==null?void 0:e.State.Status}),(0,n.jsx)(h.Z.Item,{label:"\u521B\u5EFA\u65F6\u95F4",children:new Date((P=e==null?void 0:e.Created)!==null&&P!==void 0?P:"").toLocaleString()}),(0,n.jsx)(h.Z.Item,{label:"\u542F\u52A8\u65F6\u95F4",children:new Date((E=e==null?void 0:e.State.StartedAt)!==null&&E!==void 0?E:"").toLocaleString()}),(0,n.jsx)(h.Z.Item,{label:"\u91CD\u542F\u7B56\u7565",children:(0,n.jsx)(ke.A,{onFinish:function(){var i=d()(u()().mark(function r(D){var C;return u()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(e!=null&&e.Id){H.next=2;break}return H.abrupt("return");case 2:return H.next=4,(0,x.eE)({md5:e.Id,restart:D.restart});case 4:return C=H.sent,v.success("\u4FEE\u6539\u91CD\u542F\u7B56\u7565\u6210\u529F"),H.abrupt("return");case 7:case"end":return H.stop()}},r)}));return function(r){return i.apply(this,arguments)}}(),formRef:q,children:(0,n.jsx)(ye.Z,{defaultValue:e==null?void 0:e.HostConfig.RestartPolicy.Name})})})]})}),e&&e.Mounts&&e.Mounts.length>0&&(0,n.jsx)(I.Z,{title:(0,n.jsx)($e,{}),subTitle:"\u6301\u4E45\u5B58\u50A8\u8BE6\u60C5",ghost:!0,children:(0,n.jsx)(h.Z,{column:1,bordered:!0,children:e==null?void 0:e.Mounts.map(function(i,r){return(0,n.jsx)(h.Z.Item,{labelStyle:{width:"30%"},label:i.Type=="volume"?(0,n.jsx)(Ue.Z,{content:i.Name}):i.Source,children:(0,n.jsxs)(se.Link,{target:"_blank",to:"/app/detail/file/".concat(e.Id,"?tab=file&path=").concat(encodeURIComponent(i.Destination)),children:[i.Destination," ",(0,n.jsx)(He.Z,{})]})},r)})})}),(0,n.jsx)(I.Z,{title:(0,n.jsx)(Ke.Z,{}),subTitle:"\u955C\u50CF\u8BE6\u60C5",ghost:!0,children:(0,n.jsxs)(h.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,n.jsx)(h.Z.Item,{label:"Image Tag",children:(0,n.jsx)(se.Link,{target:"_blank",to:"/image/detail/"+(e==null?void 0:e.Image),children:e==null?void 0:e.Config.Image})}),(0,n.jsx)(h.Z.Item,{label:"Image",children:e==null?void 0:e.Image}),(0,n.jsx)(h.Z.Item,{label:"Port",children:(0,n.jsx)(A.Z,{direction:"vertical",children:(e==null?void 0:e.NetworkSettings.Ports)&&Object.keys(e.NetworkSettings.Ports).map(function(i){var r,D=(r=e==null?void 0:e.NetworkSettings.Ports[i])!==null&&r!==void 0?r:[{HostPort:null,HostIp:""}];return D.map(function(C){var W=on;return W!=""&&W.indexOf(":")>-1&&(W="[".concat(W,"]")),W==""&&C.HostIp=="::"&&(W="[::1]"),W==""&&C.HostIp=="0.0.0.0"&&(W="127.0.0.1"),W==""&&(W=C.HostIp),(0,n.jsxs)(A.Z.Compact,{children:[(0,n.jsxs)(_e.Z,{color:C.HostPort?"success":"",children:[C.HostPort?"".concat(C.HostIp,":").concat(C.HostPort," ->"):"",i]},i),C.HostPort?(0,n.jsx)("a",{href:"http://".concat(W,":").concat(C.HostPort),target:"_blank",children:(0,n.jsx)(R.Z,{})}):""]})})})})}),(0,n.jsx)(h.Z.Item,{label:"CMD",children:(e==null?void 0:e.Config.Cmd)&&(e==null?void 0:e.Config.Cmd.join(" "))}),(0,n.jsx)(h.Z.Item,{label:"ENTRYPOINT",children:e==null?void 0:e.Config.Entrypoint}),(0,n.jsx)(h.Z.Item,{label:"ENV",children:(0,n.jsx)(h.Z,{column:1,bordered:!0,children:(e==null?void 0:e.Config.Env)&&e.Config.Env.map(function(i,r){var D=i.split("=");return(0,n.jsx)(h.Z.Item,{label:D[0],children:(0,n.jsx)(Ue.Z,{content:D.slice(1).join("=")})},r)})})}),(0,n.jsx)(h.Z.Item,{label:"Labels",children:(0,n.jsx)(h.Z,{column:1,bordered:!0,children:e&&Object.keys(e.Config.Labels).map(function(i){return(0,n.jsx)(h.Z.Item,{label:i,children:(0,n.jsx)(g.Z.Text,{style:{width:"400px"},ellipsis:{tooltip:e.Config.Labels[i]},children:e.Config.Labels[i]})},i)})})})]})}),(e==null?void 0:e.Name)&&(0,n.jsx)(ve,{containerName:(F=e==null?void 0:e.Name)!==null&&F!==void 0?F:""})]})})}},50070:function(ee,O,t){t.r(O),t.d(O,{AppDetailContext:function(){return x},default:function(){return ue}});var S=t(15009),u=t.n(S),b=t(99289),d=t.n(b),c=t(5574),f=t.n(c),p=t(24963),R=t(2831),T=t(60335),I=t(41123),o=t(54006),A=t(86738),g=t(60922),ce=t(50136),s=t(67294),m=t(85893),x=(0,s.createContext)({});function ue(){var w,J=(0,s.useContext)(p.Z),ne=J.lang,ie=J.loading,k=(0,o.useParams)(),xe=(0,o.useSearchParams)(),te=f()(xe,2),l=te[0],j=te[1],L=(w=l.get("tab"))!==null&&w!==void 0?w:"edit",a=(0,s.useState)("edit"),n=f()(a,2),De=n[0],me=n[1],ve=(0,o.useNavigate)(),ye=(0,s.useState)(1),fe=f()(ye,2),Fe=fe[0],Be=fe[1],he=[{label:(0,m.jsx)(o.Link,{to:"/app/detail/edit/".concat(k.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,m.jsx)(o.Link,{to:"/app/detail/domain/".concat(k.id,"?tab=domain"),children:"\u57DF\u540D\u7BA1\u7406"}),key:"domain"},{label:(0,m.jsx)(A.Z,{style:{width:500},title:ne("notification.title.tip"),description:"\u6587\u4EF6\u7BA1\u7406\u4F1A\u81EA\u52A8\u521B\u5EFA dpanel-plugin-exolorer \u5BB9\u5668\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F",onConfirm:function(){ve("/app/detail/file/".concat(k.id,"?tab=file")),Ze(he.filter(function(ae){return ae.key!="fileConfirm"})),me("file")},okText:"Yes",cancelText:"No",children:(0,m.jsx)(g.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"})}),key:"fileConfirm"},{label:(0,m.jsx)(g.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){ve("/app/detail/file/".concat(k.id,"?tab=file"))}},{label:(0,m.jsx)(g.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){ve("/app/detail/log/".concat(k.id,"?tab=log"))}},{label:(0,m.jsx)(g.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){ve("/app/detail/stat/".concat(k.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,m.jsx)(I.Z,{}),disabled:!0}],Oe=(0,s.useState)(he),Pe=f()(Oe,2),Se=Pe[0],Ze=Pe[1];(0,s.useEffect)(function(){ie.show(),me(L);var Q=function(){var ae=d()(u()().mark(function Ee(){var Ce,K,pe,ge;return u()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return K=he,X.next=3,(0,R.aF)();case 3:return pe=X.sent,pe.data.dpanel.family=="lite"&&(K=K.filter(function(U){return U.key!="domain"})),pe.data.plugin.explorer.isCreated||(K=K.filter(function(U){return U.key!="file"})),pe.data.plugin.explorer.isCreated&&(K=K.filter(function(U){return U.key!="fileConfirm"})),X.next=9,(0,T.jV)({md5:(Ce=k.id)!==null&&Ce!==void 0?Ce:""});case 9:ge=X.sent,K.map(function(U){return U.key=="containerName"&&(U.label=ge.data.info.Name),(!ge.data.info.State.Running||ge.data.info.State.Restarting)&&(U.key=="file"||U.key=="fileConfirm"||U.key=="stat")&&(U.disabled=!0),U}),Ze(K),ie.destroy();case 13:case"end":return X.stop()}},Ee)}));return function(){return ae.apply(this,arguments)}}();Q()},[Fe]);var be=function(ae){ae.key!="fileConfirm"&&me(ae.key)};return(0,m.jsxs)(x.Provider,{value:{reload:function(){Be(Fe+1)}},children:[(0,m.jsx)(ce.Z,{mode:"horizontal",onClick:be,selectedKeys:[De],items:Se}),(0,m.jsx)(o.Outlet,{})]})}},28031:function(ee,O,t){t.d(O,{C4:function(){return ue},LK:function(){return m},OQ:function(){return J},V9:function(){return f},Yx:function(){return A},ZU:function(){return I},_U:function(){return R},gb:function(){return ce},lE:function(){return xe},vp:function(){return ie}});var S=t(15009),u=t.n(S),b=t(99289),d=t.n(b),c=t(54006);function f(l){return p.apply(this,arguments)}function p(){return p=d()(u()().mark(function l(j){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,c.request)("/api/app/explorer/get-path-list",{data:j,method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},l)})),p.apply(this,arguments)}function R(l){return T.apply(this,arguments)}function T(){return T=d()(u()().mark(function l(j){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,c.request)("/api/app/explorer/export",{data:j,method:"POST",responseType:"blob"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},l)})),T.apply(this,arguments)}function I(l){return o.apply(this,arguments)}function o(){return o=d()(u()().mark(function l(j){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,c.request)("/api/app/explorer/import",{data:j,method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},l)})),o.apply(this,arguments)}function A(l){return g.apply(this,arguments)}function g(){return g=d()(u()().mark(function l(j){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,c.request)("/api/app/explorer/delete",{data:j,method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},l)})),g.apply(this,arguments)}function ce(l){return s.apply(this,arguments)}function s(){return s=d()(u()().mark(function l(j){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,c.request)("/api/app/explorer/unzip",{data:j,method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},l)})),s.apply(this,arguments)}function m(l){return x.apply(this,arguments)}function x(){return x=d()(u()().mark(function l(j){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,c.request)("/api/app/explorer/get-content",{data:j,method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},l)})),x.apply(this,arguments)}function ue(l){return w.apply(this,arguments)}function w(){return w=d()(u()().mark(function l(j){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,c.request)("/api/app/explorer/import-file-content",{data:j,method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},l)})),w.apply(this,arguments)}function J(l){return ne.apply(this,arguments)}function ne(){return ne=d()(u()().mark(function l(j){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,c.request)("/api/app/explorer/chmod",{data:j,method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},l)})),ne.apply(this,arguments)}function ie(l){return k.apply(this,arguments)}function k(){return k=d()(u()().mark(function l(j){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,c.request)("/api/app/volume/backup",{data:j,method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},l)})),k.apply(this,arguments)}function xe(l){return te.apply(this,arguments)}function te(){return te=d()(u()().mark(function l(j){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,c.request)("/api/app/explorer/get-passwd",{data:j,method:"POST"});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},l)})),te.apply(this,arguments)}}}]);
