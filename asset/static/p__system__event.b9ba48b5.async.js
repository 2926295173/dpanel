"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5050],{80821:function(T,m,n){n.d(m,{Z:function(){return S}});var v=n(97857),i=n.n(v),o=n(5574),l=n.n(o),h=n(24963),s=n(86738),O=n(28036),E=n(83062),P=n(67294),_=n(85893);function S(e){var R=(0,P.useState)(!1),D=l()(R,2),y=D[0],c=D[1],j=(0,P.useContext)(h.Z),r=j.lang,d=j.message,u=function(){c(!0);var a=e.action();a instanceof Promise?a.then(function(f){if(c(!1),f){typeof e.onSuccess=="function"&&e.onSuccess(f);var g="";e.messageSuccess?typeof e.messageSuccess=="function"?g=e.messageSuccess(f):g=e.messageSuccess.indexOf("notification.")==0?r(e.messageSuccess):e.messageSuccess:g=r("notification.finish"),e.asynced?d.info(g):d.success(g)}}).catch(function(f){c(!1),typeof e.onError=="function"&&e.onError(f)}):c(!1)};return e.confirm?(0,_.jsx)(s.Z,i()(i()({style:{width:500},title:e.confirmTitle?e.confirmTitle:r("notification.title.tip"),description:typeof e.confirm=="string"&&e.confirm.indexOf("notification.")==0?r(e.confirm):e.confirm,onConfirm:u,okText:"Yes",cancelText:"No",onOpenChange:e.confirmOnOpenChange},e.confirmProps),{},{children:(0,_.jsx)(O.ZP,{block:e.block,disabled:e.disabled,icon:!e.children&&y?void 0:e.icon,loading:y,danger:e.danger,type:e.type,children:e.children})})):(0,_.jsx)(E.Z,{title:e.tips,children:(0,_.jsx)(O.ZP,{block:e.block,style:e.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:e.disabled,icon:!e.children&&y?void 0:e.icon,loading:y,onClick:u,danger:e.danger,type:e.type,children:e.children})})}},24963:function(T,m,n){var v=n(67294),i=(0,v.createContext)({});m.Z=i},85827:function(T,m,n){n.r(m),n.d(m,{default:function(){return j}});var v=n(15009),i=n.n(v),o=n(99289),l=n.n(o),h=n(80821),s=n(82346);function O(r){return E.apply(this,arguments)}function E(){return E=l()(i()().mark(function r(d){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,s.request)("/api/common/event/get-list",{method:"POST",data:d}));case 1:case"end":return t.stop()}},r)})),E.apply(this,arguments)}function P(r){return _.apply(this,arguments)}function _(){return _=l()(i()().mark(function r(d){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,s.request)("/api/common/event/prune",{method:"POST",data:d}));case 1:case"end":return t.stop()}},r)})),_.apply(this,arguments)}var S=n(36146),e=n(67255),R=n(90078),D=n(41482),y=n(67294),c=n(85893);function j(){var r=(0,y.useRef)(),d=new S.Uo("system.notice");return(0,c.jsx)(R._z,{header:{extra:[(0,c.jsx)(h.Z,{action:function(){return P()},onSuccess:function(){var t,a;return!((t=r.current)===null||t===void 0)&&t.reloadAndRest&&((a=r.current)===null||a===void 0||a.reloadAndRest()),!0},onError:function(){var t,a;return!((t=r.current)===null||t===void 0)&&t.reset&&((a=r.current)===null||a===void 0||a.reset()),!0},confirm:"notification.confirm.title",danger:!0,type:"primary",children:S.FD.format("clear")})]},children:(0,c.jsx)(D.Z,{search:!1,scroll:{x:"max-content"},columns:[{title:d.format("listType"),ellipsis:!0,dataIndex:"type",width:200},{title:d.format("listDetail"),search:!1,render:function(t,a,f,g){return(0,c.jsxs)(c.Fragment,{children:[a.action," ",a.message]})}},{title:d.format("listCreateAt"),ellipsis:!0,search:!1,dataIndex:"createdAt",width:200,render:function(t,a,f,g,x){return new Date(a.createdAt).toLocaleString()}}],rowKey:"id",request:function(){var u=l()(i()().mark(function t(a,f,g){var x,M,b;return i()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,O({page:(x=a.current)!==null&&x!==void 0?x:1,pageSize:(M=a.pageSize)!==null&&M!==void 0?M:10,type:a.type});case 2:return b=C.sent,C.abrupt("return",{data:b.data.list,success:!0,total:b.data.total});case 4:case"end":return C.stop()}},t)}));return function(t,a,f){return u.apply(this,arguments)}}(),pagination:(0,e.O)(),actionRef:r})})}},67255:function(T,m,n){n.d(m,{O:function(){return v},j:function(){return i}});function v(o){var l=localStorage.getItem("dpanel-pagesize");return l=="all"?!1:{defaultCurrent:o==null?void 0:o.page,showSizeChanger:!0,defaultPageSize:parseInt(l!=null?l:"20"),onChange:function(s,O){localStorage.setItem("dpanel-page-"+location.pathname.split("/").slice(-2).join("-"),"".concat(s))}}}function i(o){var l="dpanel-table-column-".concat(o),h={};if(localStorage.getItem(l)){var s;h=JSON.parse((s=localStorage.getItem(l))!==null&&s!==void 0?s:"{}")}return{defaultValue:h,onChange:function(E){localStorage.setItem("dpanel-table-column-".concat(o),JSON.stringify(E))}}}}}]);
