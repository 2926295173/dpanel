"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1610],{87740:function(U,O,e){e.d(O,{Z:function(){return f}});var P=e(87462),a=e(67294),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},i=g,m=e(84089),j=function(d,E){return a.createElement(m.Z,(0,P.Z)({},d,{ref:E,icon:i}))},c=a.forwardRef(j),f=c},1699:function(U,O,e){e.d(O,{u:function(){return d}});var P=e(9783),a=e.n(P),g=e(97857),i=e.n(g),m=e(67294),j=e(82346),c=e(40411),f=e(42075),_=e(85893),d=function(r){var s=(0,j.useAccess)(),t=Array.isArray(r.access)?r.access:[r.access],h,M=r.fallback;if(typeof r.children=="function"?(h=r.children(t.reduce(function(T,b){return i()(i()({},T),{},a()({},b,s[b]))},{})),h||(h=M)):t.every(function(T){return s[T]})?h=r.children:h=M,!M&&h&&r.showProTips&&s.canSeeEnableCe){if(s.canSeeEnableHiddenProTips)return null;h=(0,_.jsx)(c.Z,{offset:r.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:h})}if(!M&&h&&r.showProRibbonTips&&s.canSeeEnableCe){if(s.canSeeEnableHiddenProTips)return null;h=(0,_.jsx)(c.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:h})}return r.space?(0,_.jsx)(f.Z,i()(i()({},r.space),{},{children:h})):h}},80821:function(U,O,e){e.d(O,{Z:function(){return s}});var P=e(97857),a=e.n(P),g=e(5574),i=e.n(g),m=e(24963),j=e(36146),c=e(86738),f=e(83062),_=e(96074),d=e(83622),E=e(67294),r=e(85893);function s(t){var h=(0,E.useState)(!1),M=i()(h,2),T=M[0],b=M[1],K=(0,E.useContext)(m.Z),W=K.message,y=new j.Uo,p=function(){b(!0);var u=t.action();u instanceof Promise?u.then(function(l){if(b(!1),l){typeof t.onSuccess=="function"&&t.onSuccess(l);var o="";t.messageSuccess?typeof t.messageSuccess=="function"?o=t.messageSuccess(l):o=t.messageSuccess.indexOf("notification.")==0?y.format(t.messageSuccess):t.messageSuccess:o=y.format("notification.finish"),t.asynced?W.info(o):W.success(o)}}).catch(function(l){b(!1),typeof t.onError=="function"&&t.onError(l)}):b(!1)};return t.confirm?(0,r.jsx)(c.Z,a()(a()({style:{width:500},title:t.confirmTitle?t.confirmTitle:y.format("notification.title.tip"),description:typeof t.confirm=="string"&&t.confirm.indexOf("notification.")==0?y.format(t.confirm):t.confirm,onConfirm:p,okText:"Yes",cancelText:"No",onOpenChange:t.confirmOnOpenChange},t.confirmProps),{},{children:(0,r.jsxs)(f.Z,{title:t.tips,children:[t.showDivider&&(0,r.jsx)(_.Z,{type:"vertical",style:{marginRight:15}}),(0,r.jsx)(d.ZP,{block:t.block,disabled:t.disabled,icon:!t.children&&T?void 0:t.icon,loading:T,danger:t.danger,type:t.type,children:t.children})]})})):(0,r.jsxs)(f.Z,{title:t.tips,children:[t.showDivider&&(0,r.jsx)(_.Z,{type:"vertical",style:{marginRight:15}}),(0,r.jsx)(d.ZP,{block:t.block,style:t.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:t.disabled,icon:!t.children&&T?void 0:t.icon,loading:T,onClick:p,danger:t.danger,type:t.type,children:t.children})]})}},78451:function(U,O,e){e.d(O,{Z:function(){return g}});var P=e(67294),a=e(85893);function g(i){var m;return(0,a.jsx)("span",{style:{width:i.width?i.width:"auto",wordBreak:"break-word"},children:(m=i.content)!==null&&m!==void 0?m:i.children})}},24963:function(U,O,e){var P=e(67294),a=(0,P.createContext)({});O.Z=a},67108:function(U,O,e){e.r(O),e.d(O,{default:function(){return l}});var P=e(15009),a=e.n(P),g=e(99289),i=e.n(g),m=e(90078),j=e(56729),c=e(62597),f=e(83622),_=e(42075),d=e(96074),E=e(83062),r=e(50136),s=e(82346),t=e(86548),h=e(87740),M=e(67294),T=e(96974),b=e(80821),K=e(67255),W=e(78451),y=e(1699),p=e(36146),S=e(77446),u=e(85893);function l(){var o=(0,T.UO)(),D=(0,M.useRef)();return(0,M.useEffect)(function(){var n;(n=D.current)===null||n===void 0||n.reload()},[o]),(0,u.jsx)(m._z,{header:{extra:[(0,u.jsx)(y.u,{access:"canSeeContainerListManageCreate",children:(0,u.jsx)(f.ZP,{type:"primary",children:(0,u.jsx)(s.Link,{to:"/app/create/image",children:p.Ob.format("container.create")})})},"create")]},children:(0,u.jsx)(j.Z,{scroll:{x:"max-content"},actionRef:D,columns:[{title:p.FD.format("listTitle"),dataIndex:"siteTitle",width:200},{title:p.FD.format("listName"),dataIndex:"siteName",width:200},{title:p.FD.format("listLastError"),dataIndex:"message",search:!1,width:250,render:function(I,v,L,C,R){return(0,u.jsx)(W.Z,{content:v.message})}},{title:p.FD.format("listDeletedAt"),ellipsis:!0,dataIndex:"deletedAt",search:!1,width:180,render:function(I,v,L,C,R){return new Date(v.deletedAt).toLocaleString()}},{title:p.FD.format("listManage"),valueType:"option",key:"option",width:80,fixed:"right",render:function(I,v,L,C){return(0,u.jsxs)(_.Z,{split:(0,u.jsx)(d.Z,{type:"vertical"}),children:[(0,u.jsx)(s.Link,{to:"/app/create/image?op=update&id="+v.id,type:"link",children:(0,u.jsx)(E.Z,{title:p.FD.format("listManageEdit"),children:(0,u.jsx)(t.Z,{})})},"rebuild"),v.containerInfo&&v.containerInfo.Info&&v.containerInfo.Info.Name&&(0,u.jsx)(y.u,{access:"canSeeEnableCe",children:function(B){var Z=B.canSeeEnableCe;return(0,u.jsx)(b.Z,{disabled:Z,action:function(){return(0,S.v)({id:v.id})},ghost:!0,type:"link",tips:p.FD.format("listManageUnpause"),onSuccess:function(){var x;!((x=D.current)===null||x===void 0)&&x.reloadAndRest&&D.current.reloadAndRest()},icon:(0,u.jsx)(h.Z,{})})}})]})}}],rowKey:"id",request:function(){var n=i()(a()().mark(function I(v,L,C){var R,B;return a()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,c.cl)({pageSize:v.pageSize,page:(R=v.current)!==null&&R!==void 0?R:1,isDelete:!0,siteTitle:v.siteTitle,siteName:v.siteName});case 2:return B=A.sent,A.abrupt("return",{data:B.data.list,success:!0,total:B.data.total});case 4:case"end":return A.stop()}},I)}));return function(I,v,L){return n.apply(this,arguments)}}(),rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(I){var v=I.selectedRowKeys;return(0,u.jsx)(_.Z,{size:16,children:(0,u.jsx)(b.Z,{danger:!0,type:"primary",action:function(){return(0,c.xb)({id:v})},onSuccess:function(){var C,R;return!((C=D.current)===null||C===void 0)&&C.reloadAndRest&&((R=D.current)===null||R===void 0||R.reloadAndRest()),!0},onError:function(){var C,R;return!((C=D.current)===null||C===void 0)&&C.reset&&((R=D.current)===null||R===void 0||R.reset()),!0},confirm:"notification.confirm.title",children:p.FD.format("listManageDeleteBatch")})})},pagination:(0,K.Oh)(),search:{collapsed:!1},tableExtraRender:function(){return(0,u.jsx)(r.Z,{mode:"horizontal",selectedKeys:["recycle"],items:[{label:(0,u.jsx)(s.Link,{to:"/app/list",replace:!0,children:p.Ob.format("container.list")}),key:"all"},{label:(0,u.jsx)(s.Link,{to:"/app/recycle",replace:!0,children:p.Ob.format("container.list.recycle")}),key:"recycle"}]})}})})}},62597:function(U,O,e){e.d(O,{$G:function(){return f},Ct:function(){return K},Tb:function(){return s},XH:function(){return h},cl:function(){return E},fp:function(){return d},fu:function(){return c},iE:function(){return T},xb:function(){return y},ze:function(){return S}});var P=e(15009),a=e.n(P),g=e(99289),i=e.n(g),m=e(82346),j="com.dpanel.container.description",c="com.dpanel.container.title";function f(l){return _.apply(this,arguments)}function _(){return _=i()(a()().mark(function l(o){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/app/site/create-by-image",{method:"POST",data:o}));case 1:case"end":return n.stop()}},l)})),_.apply(this,arguments)}var d={EnvValueRuleRequired:1,EnvValueRuleDisabled:2,EnvValueTypeNumber:1024,EnvValueTypeText:2048,EnvValueTypeSelect:4096,EnvValueTypeSelectMultiple:8192};function E(l){return r.apply(this,arguments)}function r(){return r=i()(a()().mark(function l(o){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/app/site/get-list",{method:"POST",data:o}));case 1:case"end":return n.stop()}},l)})),r.apply(this,arguments)}function s(l){return t.apply(this,arguments)}function t(){return t=i()(a()().mark(function l(o){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o.download=!1,n.next=3,(0,m.request)("/api/app/log/run",{method:"POST",data:o});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},l)})),t.apply(this,arguments)}function h(l){return M.apply(this,arguments)}function M(){return M=i()(a()().mark(function l(o){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o.download=!0,n.next=3,(0,m.request)("/api/app/log/run",{method:"POST",data:o,responseType:"blob"});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},l)})),M.apply(this,arguments)}function T(l){return b.apply(this,arguments)}function b(){return b=i()(a()().mark(function l(o){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o.id=String(o.id),n.next=3,(0,m.request)("/api/app/site/get-detail",{data:o,method:"POST"});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},l)})),b.apply(this,arguments)}function K(l){return W.apply(this,arguments)}function W(){return W=i()(a()().mark(function l(o){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/app/container/delete",{method:"POST",data:o}));case 1:case"end":return n.stop()}},l)})),W.apply(this,arguments)}function y(l){return p.apply(this,arguments)}function p(){return p=i()(a()().mark(function l(o){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/app/site/delete",{method:"POST",data:o}));case 1:case"end":return n.stop()}},l)})),p.apply(this,arguments)}function S(l){return u.apply(this,arguments)}function u(){return u=i()(a()().mark(function l(o){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/app/container/ignore",{method:"POST",data:o}));case 1:case"end":return n.stop()}},l)})),u.apply(this,arguments)}},77446:function(U,O,e){e.d(O,{V:function(){return j},v:function(){return f}});var P=e(15009),a=e.n(P),g=e(99289),i=e.n(g),m=e(82346);function j(d){return c.apply(this,arguments)}function c(){return c=i()(a()().mark(function d(E){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,m.request)("/api/pro/container-rollback/get-list",{data:E,method:"POST"});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},d)})),c.apply(this,arguments)}function f(d){return _.apply(this,arguments)}function _(){return _=i()(a()().mark(function d(E){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,m.request)("/api/pro/container-rollback/restore",{data:E,method:"POST"});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},d)})),_.apply(this,arguments)}},67255:function(U,O,e){e.d(O,{O$:function(){return j},Oh:function(){return g},j_:function(){return i},nX:function(){return m}});var P=e(5574),a=e.n(P);function g(c){var f=localStorage.getItem("dpanel-pagesize");if(f=="all")return!1;var _=location.pathname.split("/").slice(-2).join("-");return{defaultCurrent:c==null?void 0:c.page,showSizeChanger:!0,defaultPageSize:parseInt(f!=null?f:"20"),onChange:function(E,r){["app-list","compose-list"].includes(_)&&localStorage.setItem("dpanel-page-"+_,"".concat(E))}}}function i(c){var f="dpanel-table-column-".concat(c),_={};if(localStorage.getItem(f)){var d;_=JSON.parse((d=localStorage.getItem(f))!==null&&d!==void 0?d:"{}")}return{defaultValue:_,onChange:function(r){localStorage.setItem("dpanel-table-column-".concat(c),JSON.stringify(r))}}}function m(c,f,_){var d=location.pathname.split("/").slice(-2).join("-");_.columnKey&&localStorage.setItem("dpanel-table-sort-".concat(d),"".concat(_.columnKey,"|").concat(_.order))}function j(c,f){var _=localStorage.getItem("dpanel-table-sort-".concat(c));if(_){var d=_.split("|"),E=a()(d,2),r=E[0],s=E[1];if(r==f)return s}}}}]);
