"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4037],{12119:function(_,b,e){e.d(b,{Z:function(){return x}});var r=e(87462),p=e(67294),$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M608 112c-167.9 0-304 136.1-304 304 0 70.3 23.9 135 63.9 186.5l-41.1 41.1-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-44.9 44.9-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-65.3 65.3a8.03 8.03 0 000 11.3l42.3 42.3c3.1 3.1 8.2 3.1 11.3 0l253.6-253.6A304.06 304.06 0 00608 720c167.9 0 304-136.1 304-304S775.9 112 608 112zm161.2 465.2C726.2 620.3 668.9 644 608 644c-60.9 0-118.2-23.7-161.2-66.8-43.1-43-66.8-100.3-66.8-161.2 0-60.9 23.7-118.2 66.8-161.2 43-43.1 100.3-66.8 161.2-66.8 60.9 0 118.2 23.7 161.2 66.8 43.1 43 66.8 100.3 66.8 161.2 0 60.9-23.7 118.2-66.8 161.2z"}}]},name:"key",theme:"outlined"},v=$,Z=e(84089),L=function(R,j){return p.createElement(Z.Z,(0,r.Z)({},R,{ref:j,icon:v}))},C=p.forwardRef(L),x=C},63434:function(_,b,e){var r=e(1413),p=e(45987),$=e(22270),v=e(84567),Z=e(67294),L=e(90789),C=e(56),x=e(85893),D=["options","fieldProps","proFieldProps","valueEnum"],R=Z.forwardRef(function(c,U){var H=c.options,I=c.fieldProps,V=c.proFieldProps,Q=c.valueEnum,G=(0,p.Z)(c,D);return(0,x.jsx)(C.Z,(0,r.Z)({ref:U,valueType:"checkbox",valueEnum:(0,$.h)(Q,void 0),fieldProps:(0,r.Z)({options:H},I),lightProps:(0,r.Z)({labelFormatter:function(){return(0,x.jsx)(C.Z,(0,r.Z)({ref:U,valueType:"checkbox",mode:"read",valueEnum:(0,$.h)(Q,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,r.Z)({options:H},I),proFieldProps:V},G))}},G.lightProps),proFieldProps:V},G))}),j=Z.forwardRef(function(c,U){var H=c.fieldProps,I=c.children;return(0,x.jsx)(v.Z,(0,r.Z)((0,r.Z)({ref:U},H),{},{children:I}))}),M=(0,L.G)(j,{valuePropName:"checked"}),F=M;F.Group=R,b.Z=F},75293:function(_,b,e){e.d(b,{Z:function(){return $}});var r=e(25593),p=e(85893);function $(v){return(0,p.jsx)(r.Z.Text,{copyable:!0,style:{padding:10,display:v.block?"block":"",background:"#24292f",color:"#ffffff"},children:v.content})}},66139:function(_,b,e){e.r(b),e.d(b,{default:function(){return me}});var r=e(15009),p=e.n(r),$=e(99289),v=e.n($),Z=e(5574),L=e.n(Z),C=e(68602),x=e(89075),D=e(68262),R=e(82346),j=e(9361),M=e(40056),F=e(86250),c=e(25593),U=e(67294),H=e(75293),I=e(36146),V=e(29177),Q=e(88360),G=e(94149),re=e(12119),Y=e(5966),ae=e(97462),ie=e(63434),ce=e(92398),de=e(55241),fe=e(42075),o=e(85893);function ue(A){var X,f=new I.Uo("user");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ce.Z,{centered:!0,activeKey:A.loginType,items:[{icon:(0,o.jsx)(V.Z,{}),key:"login",label:f.format("title")},{icon:(0,o.jsx)(Q.Z,{}),key:"register",label:f.format("registerTitle")}].filter(function(ee){return ee.key==A.loginType})}),(0,o.jsx)(Y.Z,{name:"username",fieldProps:{size:"large",prefix:(0,o.jsx)(V.Z,{className:"prefixIcon"})},placeholder:f.format("formUsernameEmpty"),rules:[{required:!0,message:f.format("formUsernameEmpty")}]},"username"),(0,o.jsx)(Y.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,o.jsx)(G.Z,{className:"prefixIcon"})},placeholder:f.format("formPasswordEmpty"),rules:[{required:!0,message:f.format("formPasswordEmpty")}]},"password"),A.showTwoFa&&(0,o.jsx)(Y.Z,{name:"code",placeholder:f.format("formTwofaEmpty"),rules:[{required:!0}],fieldProps:{maxLength:6,size:"large",prefix:(0,o.jsx)(re.Z,{className:"prefixIcon"})}}),A.loginType=="register"&&(0,o.jsx)(ae.Z,{name:["password"],children:function(se){var pe=se.password;return(0,o.jsx)(Y.Z.Password,{fieldProps:{size:"large",prefix:(0,o.jsx)(G.Z,{className:"prefixIcon"})},placeholder:f.format("formConfirmPasswordEmpty"),name:"confirmPassword",dependencies:["password"],rules:[{required:!0,message:f.format("formConfirmPasswordEmpty")},function(ne){var te=ne.getFieldValue;return{validator:function(t,n){return!n||te("password")===n?Promise.resolve():Promise.reject(new Error(f.format("formMessagePasswordNotMatch")))}}}]},"confirmPassword")}}),A.showAutoLogin&&(0,o.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,o.jsx)(ie.Z,{noStyle:!0,name:"autoLogin",initialValue:!0,children:f.format("formAutoLogin")}),(0,o.jsx)(de.Z,{content:(0,o.jsxs)(fe.Z,{direction:"vertical",size:[0,30],children:[(0,o.jsxs)("span",{children:[f.format("formUserResetTip"),", ",(0,o.jsx)("a",{href:"https://dpanel.cc/#/zh-cn/install/ctrl",target:"_blank",children:I.FD.format("help")})]}),(0,o.jsx)(H.Z,{content:"docker exec ".concat((X=A.appName)!==null&&X!==void 0?X:"dpanel"," ./dpanel user:reset -f config.yaml")}),(0,o.jsx)("span",{})]}),children:(0,o.jsx)(c.Z.Link,{style:{float:"right"},children:f.format("formUserReset")})})]})]})}var me=function(){var A=j.Z.useToken(),X=A.token,f=(0,R.useModel)("@@initialState"),ee=f.initialState,se=f.loading,pe=f.error,ne=f.refresh,te=f.setInitialState,le=(0,U.useState)({loginType:"account",appName:"dpanel"}),t=L()(le,2),n=t[0],a=t[1],s=(0,U.useState)(),i=L()(s,2),m=i[0],y=i[1],S=(0,U.useState)(),B=L()(S,2),E=B[0],W=B[1],K=(0,R.useAntdConfigSetter)(),z=(0,U.useRef)(),h=new I.Uo("user");return(0,U.useEffect)(function(){window.document.title=h.format("documentTitle"),(0,C.Nr)().then(function(){var g=v()(p()().mark(function N(d){var O;return p()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:h.appendXk(d.data.feature.includes("canSeeEnableXk")),O={loginType:"account"},d.data.showBuildName&&d.data.family!="lite"&&(O.showBuildName=!0),d.data.showRegister&&(O.loginType="register"),d.data.family=="demo"&&(O.showDemo=!0),O.appName=d.data.appName,d.data.theme&&d.data.theme.algorithm&&(localStorage.setItem("dpanel-theme",d.data.theme.algorithm),K(function(u){var oe;(oe=u.theme)!==null&&oe!==void 0||(u.theme={});var q=[];return d.data.theme&&(d.data.theme.algorithm=="dark"?q.push(j.Z.darkAlgorithm):q.push(j.Z.defaultAlgorithm),u.theme.algorithm=q),u})),W(d.data),a(O),d.data.feature.indexOf("canSeeEnableThemeUser")!=-1?(0,x.ax)().then(function(u){u.data&&u.data.themeUserConfig&&u.data.themeUserConfig.siteTitle&&(window.document.title=u.data.themeUserConfig.siteTitle),y(u.data)}):y({});case 10:case"end":return k.stop()}},N)}));return function(N){return g.apply(this,arguments)}}())},[]),(0,o.jsxs)(o.Fragment,{children:[n&&n.showBuildName&&(0,o.jsx)(M.Z,{type:"error",message:h.format("tipShowBuildName"),banner:!0}),n&&n.showDemo&&(0,o.jsx)(M.Z,{type:"error",message:h.format("tipShowDemo"),banner:!0}),(0,o.jsx)(F.Z,{justify:"center",align:"center",style:{height:"100vh",background:m&&m.themeUserConfig&&m.themeUserConfig.bgImage&&m.themeUserConfig.bgImage.src?"url(".concat(m.themeUserConfig.bgImage.src,")"):"".concat(X.colorBgElevated,"dd")},children:(0,o.jsxs)(D.U,{onFinish:function(){var g=v()(p()().mark(function N(d){var O,J;return p()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(n.loginType!="register"){u.next=3;break}return u.next=3,(0,C.AT)({username:d.username,password:d.password,confirmPassword:d.confirmPassword});case 3:return u.prev=3,u.next=6,(0,C.n$)({username:d.username,password:d.password,autoLogin:d.autoLogin,code:d.code});case 6:if(O=u.sent,!O.data.accessToken){u.next=14;break}return localStorage.setItem("token",O.data.accessToken),ne(),window.location.href="/dpanel/ui",u.abrupt("return");case 14:return u.abrupt("return",!1);case 15:u.next=20;break;case 17:u.prev=17,u.t0=u.catch(3),(J=z.current)===null||J===void 0||J.resetFields(["code"]);case 20:case"end":return u.stop()}},N,null,[[3,17]])}));return function(N){return g.apply(this,arguments)}}(),containerStyle:{background:"transparent",height:"auto"},contentStyle:{width:"auto"},logo:"",title:(0,o.jsx)("img",{src:m&&m.themeUserConfig&&m.themeUserConfig.loginLogo?m.themeUserConfig.loginLogo:"/dpanel/static/asset/logo.png",width:"350"}),subTitle:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("br",{}),(0,o.jsx)("br",{})]}),formRef:z,children:[(0,o.jsx)(ue,{showTwoFa:!!(m&&m.canSeeEnableTwoFa),loginType:n.loginType,appName:n.appName,showAutoLogin:!(E!=null&&E.feature.includes("canSeeEnableXk"))}),(0,o.jsxs)(c.Z.Paragraph,{style:{marginBottom:10,color:"#999999",textAlign:"center"},children:[h.format("agree"),(0,o.jsx)("a",{href:h.format("userAgreementUrl"),target:"_blank",children:h.format("userAgreement")}),(0,o.jsx)("a",{href:h.format("userPrivacyUrl"),target:"_blank",children:h.format("userPrivacy")})]})]})})]})}},89075:function(_,b,e){e.d(b,{$w:function(){return L},YQ:function(){return x},ax:function(){return R}});var r=e(15009),p=e.n(r),$=e(99289),v=e.n($),Z=e(82346);function L(){return C.apply(this,arguments)}function C(){return C=v()(p()().mark(function M(){return p()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,Z.request)("/api/pro/home/get-machine-id",{method:"POST"}));case 1:case"end":return c.stop()}},M)})),C.apply(this,arguments)}function x(){return D.apply(this,arguments)}function D(){return D=v()(p()().mark(function M(){return p()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,Z.request)("/api/pro/home/get-license-info",{method:"POST"}));case 1:case"end":return c.stop()}},M)})),D.apply(this,arguments)}function R(){return j.apply(this,arguments)}function j(){return j=v()(p()().mark(function M(){return p()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,Z.request)("/api/pro/home/login-info",{method:"POST"}));case 1:case"end":return c.stop()}},M)})),j.apply(this,arguments)}},40056:function(_,b,e){e.d(b,{Z:function(){return le}});var r=e(67294),p=e(89739),$=e(4340),v=e(97937),Z=e(21640),L=e(78860),C=e(93967),x=e.n(C),D=e(29372),R=e(64217),j=e(42550),M=e(96159),F=e(53124),c=e(11568),U=e(14747),H=e(83559);const I=(t,n,a,s,i)=>({background:t,border:`${(0,c.bf)(s.lineWidth)} ${s.lineType} ${n}`,[`${i}-icon`]:{color:a}}),V=t=>{const{componentCls:n,motionDurationSlow:a,marginXS:s,marginSM:i,fontSize:m,fontSizeLG:y,lineHeight:S,borderRadiusLG:B,motionEaseInOutCirc:E,withDescriptionIconSize:W,colorText:K,colorTextHeading:z,withDescriptionPadding:h,defaultPadding:g}=t;return{[n]:Object.assign(Object.assign({},(0,U.Wf)(t)),{position:"relative",display:"flex",alignItems:"center",padding:g,wordWrap:"break-word",borderRadius:B,[`&${n}-rtl`]:{direction:"rtl"},[`${n}-content`]:{flex:1,minWidth:0},[`${n}-icon`]:{marginInlineEnd:s,lineHeight:0},"&-description":{display:"none",fontSize:m,lineHeight:S},"&-message":{color:z},[`&${n}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${a} ${E}, opacity ${a} ${E},
        padding-top ${a} ${E}, padding-bottom ${a} ${E},
        margin-bottom ${a} ${E}`},[`&${n}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${n}-with-description`]:{alignItems:"flex-start",padding:h,[`${n}-icon`]:{marginInlineEnd:i,fontSize:W,lineHeight:0},[`${n}-message`]:{display:"block",marginBottom:s,color:z,fontSize:y},[`${n}-description`]:{display:"block",color:K}},[`${n}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},Q=t=>{const{componentCls:n,colorSuccess:a,colorSuccessBorder:s,colorSuccessBg:i,colorWarning:m,colorWarningBorder:y,colorWarningBg:S,colorError:B,colorErrorBorder:E,colorErrorBg:W,colorInfo:K,colorInfoBorder:z,colorInfoBg:h}=t;return{[n]:{"&-success":I(i,s,a,t,n),"&-info":I(h,z,K,t,n),"&-warning":I(S,y,m,t,n),"&-error":Object.assign(Object.assign({},I(W,E,B,t,n)),{[`${n}-description > pre`]:{margin:0,padding:0}})}}},G=t=>{const{componentCls:n,iconCls:a,motionDurationMid:s,marginXS:i,fontSizeIcon:m,colorIcon:y,colorIconHover:S}=t;return{[n]:{"&-action":{marginInlineStart:i},[`${n}-close-icon`]:{marginInlineStart:i,padding:0,overflow:"hidden",fontSize:m,lineHeight:(0,c.bf)(m),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${a}-close`]:{color:y,transition:`color ${s}`,"&:hover":{color:S}}},"&-close-text":{color:y,transition:`color ${s}`,"&:hover":{color:S}}}}},re=t=>({withDescriptionIconSize:t.fontSizeHeading3,defaultPadding:`${t.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${t.paddingMD}px ${t.paddingContentHorizontalLG}px`});var Y=(0,H.I$)("Alert",t=>[V(t),Q(t),G(t)],re),ae=function(t,n){var a={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(a[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)n.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(a[s[i]]=t[s[i]]);return a};const ie={success:p.Z,info:L.Z,error:$.Z,warning:Z.Z},ce=t=>{const{icon:n,prefixCls:a,type:s}=t,i=ie[s]||null;return n?(0,M.wm)(n,r.createElement("span",{className:`${a}-icon`},n),()=>({className:x()(`${a}-icon`,n.props.className)})):r.createElement(i,{className:`${a}-icon`})},de=t=>{const{isClosable:n,prefixCls:a,closeIcon:s,handleClose:i,ariaProps:m}=t,y=s===!0||s===void 0?r.createElement(v.Z,null):s;return n?r.createElement("button",Object.assign({type:"button",onClick:i,className:`${a}-close-icon`,tabIndex:0},m),y):null};var o=r.forwardRef((t,n)=>{const{description:a,prefixCls:s,message:i,banner:m,className:y,rootClassName:S,style:B,onMouseEnter:E,onMouseLeave:W,onClick:K,afterClose:z,showIcon:h,closable:g,closeText:N,closeIcon:d,action:O,id:J}=t,k=ae(t,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[u,oe]=r.useState(!1),q=r.useRef(null);r.useImperativeHandle(n,()=>({nativeElement:q.current}));const{getPrefixCls:ye,direction:Ee,alert:l}=r.useContext(F.E_),P=ye("alert",s),[Ce,Pe,xe]=Y(P),je=T=>{var w;oe(!0),(w=t.onClose)===null||w===void 0||w.call(t,T)},ge=r.useMemo(()=>t.type!==void 0?t.type:m?"warning":"info",[t.type,m]),Ie=r.useMemo(()=>typeof g=="object"&&g.closeIcon||N?!0:typeof g=="boolean"?g:d!==!1&&d!==null&&d!==void 0?!0:!!(l!=null&&l.closable),[N,d,g,l==null?void 0:l.closable]),he=m&&h===void 0?!0:h,Se=x()(P,`${P}-${ge}`,{[`${P}-with-description`]:!!a,[`${P}-no-icon`]:!he,[`${P}-banner`]:!!m,[`${P}-rtl`]:Ee==="rtl"},l==null?void 0:l.className,y,S,xe,Pe),Oe=(0,R.Z)(k,{aria:!0,data:!0}),Te=r.useMemo(()=>{var T,w;return typeof g=="object"&&g.closeIcon?g.closeIcon:N||(d!==void 0?d:typeof(l==null?void 0:l.closable)=="object"&&(!((T=l==null?void 0:l.closable)===null||T===void 0)&&T.closeIcon)?(w=l==null?void 0:l.closable)===null||w===void 0?void 0:w.closeIcon:l==null?void 0:l.closeIcon)},[d,g,N,l==null?void 0:l.closeIcon]),be=r.useMemo(()=>{const T=g!=null?g:l==null?void 0:l.closable;if(typeof T=="object"){const{closeIcon:w}=T;return ae(T,["closeIcon"])}return{}},[g,l==null?void 0:l.closable]);return Ce(r.createElement(D.ZP,{visible:!u,motionName:`${P}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:T=>({maxHeight:T.offsetHeight}),onLeaveEnd:z},(T,w)=>{let{className:ve,style:$e}=T;return r.createElement("div",Object.assign({id:J,ref:(0,j.sQ)(q,w),"data-show":!u,className:x()(Se,ve),style:Object.assign(Object.assign(Object.assign({},l==null?void 0:l.style),B),$e),onMouseEnter:E,onMouseLeave:W,onClick:K,role:"alert"},Oe),he?r.createElement(ce,{description:a,icon:t.icon,prefixCls:P,type:ge}):null,r.createElement("div",{className:`${P}-content`},i?r.createElement("div",{className:`${P}-message`},i):null,a?r.createElement("div",{className:`${P}-description`},a):null),O?r.createElement("div",{className:`${P}-action`},O):null,r.createElement(de,{isClosable:Ie,prefixCls:P,closeIcon:Te,handleClose:je,ariaProps:be}))}))}),ue=e(15671),me=e(43144),A=e(61120),X=e(78814),f=e(82963);function ee(t,n,a){return n=(0,A.Z)(n),(0,f.Z)(t,(0,X.Z)()?Reflect.construct(n,a||[],(0,A.Z)(t).constructor):n.apply(t,a))}var se=e(60136),ne=function(t){function n(){var a;return(0,ue.Z)(this,n),a=ee(this,n,arguments),a.state={error:void 0,info:{componentStack:""}},a}return(0,se.Z)(n,t),(0,me.Z)(n,[{key:"componentDidCatch",value:function(s,i){this.setState({error:s,info:i})}},{key:"render",value:function(){const{message:s,description:i,id:m,children:y}=this.props,{error:S,info:B}=this.state,E=(B==null?void 0:B.componentStack)||null,W=typeof s=="undefined"?(S||"").toString():s,K=typeof i=="undefined"?E:i;return S?r.createElement(o,{id:m,type:"error",message:W,description:r.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},K)}):y}}])}(r.Component);const te=o;te.ErrorBoundary=ne;var le=te}}]);
