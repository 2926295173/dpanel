"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3355],{28307:function(I,M,e){var b=e(5574),t=e.n(b),P=e(38345),_=e(97269),n=e(5966),f=e(62370),m=e(14726),T=e(85265),v=e(78957),E=e(34041),g=e(67294),o=e(80821),D=e(3393),O=e(97961),p=e(92754),a=e(85893),d=(0,g.forwardRef)(function(h,s){var c=(0,g.useState)(!1),j=t()(c,2),C=j[0],y=j[1],B=(0,g.useRef)(),R=(0,g.useRef)();return(0,g.useImperativeHandle)(s,function(){return{upgradeImage:function(l){var u;return y(!0),(u=B.current)===null||u===void 0||u.setFieldValue("imageUrl",l),(0,D.Gb)({tag:l,type:"pull"})},setImageName:function(l){var u;y(!0),(u=B.current)===null||u===void 0||u.setFieldValue("imageUrl",l)}}}),[(0,a.jsx)(m.ZP,{onClick:function(){var l,u;y(!0),(l=B.current)===null||l===void 0||l.resetFields(),(u=R.current)===null||u===void 0||u.setStart()},children:"\u62C9\u53D6\u65B0\u955C\u50CF"},"remoteBtn"),(0,a.jsxs)(T.Z,{forceRender:!0,open:C,title:"\u4E0B\u8F7D\u8FDC\u7A0B\u955C\u50CF",width:800,onClose:function(){return y(!1)},footer:!1,children:[(0,a.jsx)(P.Z,{children:(0,a.jsxs)(v.Z,{direction:"vertical",size:"middle",children:[(0,a.jsxs)("div",{children:["1\u3001\u955C\u50CF\u540D\u79F0\u4E2D\u4E0D\u5305\u542B\u4ED3\u5E93\u5730\u5740\u65F6\uFF0C \u9ED8\u8BA4\u4ECE ",(0,a.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:"docker hub"})," \u4E2D\u4E0B\u8F7D\uFF0C \u4F60\u53EF\u4EE5\u5728\u4E0A\u9762",(0,a.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:"\u3010\u67E5\u627E\u3011"}),"\u9700\u8981\u7684\u955C\u50CF"]}),(0,a.jsxs)("div",{children:["2\u3001\u955C\u50CF\u4E2D\u5305\u542B\u4ED3\u5E93\u5730\u5740\u65F6\uFF0C\u8BF7\u786E",(0,a.jsx)("a",{href:"/image/registry",children:"\u3010\u6DFB\u52A0\u3011"}),"\u8FC7\u8BE5\u4ED3\u5E93\uFF0C\u5E76\u6709 Pull \u6743\u9650"]}),(0,a.jsxs)("div",{children:["3\u3001\u53EF\u5728",(0,a.jsx)("a",{href:"/image/registry",children:"\u3010\u4ED3\u5E93\u7BA1\u7406\u3011"}),"\u4E2D\u914D\u7F6E\u955C\u50CF\u7684\u52A0\u901F\u5730\u5740"]})]})}),(0,a.jsx)(P.Z,{title:"\u4E0B\u8F7D\u955C\u50CF",headerBordered:!0,children:(0,a.jsxs)(_.A,{submitter:!1,formRef:B,children:[(0,a.jsxs)(v.Z.Compact,{children:[(0,a.jsx)(n.Z,{width:400,name:"imageUrl",placeholder:"\u8BF7\u8F93\u5165\u955C\u50CF\u5730\u5740"}),(0,a.jsx)(f.Z,{name:"platform",children:(0,a.jsx)(E.Z,{style:{width:150},placeholder:"\u9ED8\u8BA4\u5F53\u524D\u7CFB\u7EDF",options:O.ii.map(function(i){return{label:i.name,value:i.name}})})}),(0,a.jsx)(o.Z,{action:function(){var l,u,r,U,F=(l=(u=B.current)===null||u===void 0?void 0:u.getFieldValue("imageUrl"))!==null&&l!==void 0?l:"";return(0,D.Gb)({tag:F,type:"pull",platform:(r=(U=B.current)===null||U===void 0?void 0:U.getFieldValue("platform"))!==null&&r!==void 0?r:"amd64"})},onSuccess:function(){var l,u,r;(l=R.current)===null||l===void 0||l.setFinish(),y(!1);var U=(u=(r=B.current)===null||r===void 0?void 0:r.getFieldValue("imageUrl"))!==null&&u!==void 0?u:"";h.onFinish&&h.onFinish(U)},messageSuccess:function(l){var u="\u62C9\u53D6\u6210\u529F";return l.data.proxyUrl&&(u+="\uFF0C\u4F7F\u7528\u4EE3\u7406 "+l.data.proxyUrl),u},children:"\u62C9\u53D6\u955C\u50CF"})]}),(0,a.jsx)(f.Z,{label:"\u4E0B\u8F7D\u8FDB\u5EA6",children:(0,a.jsx)(p.Z,{ref:R})})]})})]},"remoteDrawer")]});M.Z=d},80821:function(I,M,e){e.d(M,{Z:function(){return g}});var b=e(5574),t=e.n(b),P=e(93246),_=e(54006),n=e(31418),f=e(86738),m=e(14726),T=e(83062),v=e(67294),E=e(85893);function g(o){var D=(0,v.useState)(!1),O=t()(D,2),p=O[0],a=O[1],d=n.Z.useApp(),h=(0,_.useIntl)(),s=function(){a(!0),o.action().then(function(j){if(a(!1),typeof o.onSuccess=="function"&&o.onSuccess(j),o.messageSuccess){var C="";typeof o.messageSuccess=="function"?C=o.messageSuccess(j):C=o.messageSuccess,C.indexOf(".")>-1&&(C=h.formatMessage({id:C})),o.asynced?(0,P.Rk)(d,C):(0,P.$h)(d,C)}}).catch(function(j){a(!1),typeof o.onError=="function"&&o.onError(j)})};return o.confirm?(0,E.jsx)(f.Z,{style:{width:500},title:"\u63D0\u793A",description:o.confirm,onConfirm:s,okText:"Yes",cancelText:"No",children:(0,E.jsx)(m.ZP,{disabled:o.disabled,icon:o.icon,loading:p,danger:o.danger,type:o.type,children:o.children})}):(0,E.jsx)(T.Z,{title:o.tips,children:(0,E.jsx)(m.ZP,{disabled:o.disabled,icon:o.icon,loading:p,onClick:s,danger:o.danger,type:o.type,children:o.children})})}},92754:function(I,M,e){var b=e(5574),t=e.n(b),P=e(67294),_=e(54006),n=e(38703),f=e(85893),m=(0,P.forwardRef)(function(T,v){(0,P.useImperativeHandle)(v,function(){return{setFinish:function(){O({finish:{downloading:100,extracting:100}})},setStart:function(){O({start:{downloading:0,extracting:0}})}}});var E=(0,_.useModel)("subscriber");E.addDataHandler("imageDownload",function(){var p=E.getDataByType("imageDownload"),a=p.pop();a&&O(a.data)});var g=(0,P.useState)(),o=t()(g,2),D=o[0],O=o[1];return(0,P.useEffect)(function(){O({start:{downloading:0,extracting:0}})},[]),(0,f.jsx)(f.Fragment,{children:D&&Object.keys(D).map(function(p){return(0,f.jsx)(n.Z,{percent:D[p].downloading,success:{percent:D[p].extracting}},p)})})});M.Z=m},97961:function(I,M,e){e.d(M,{MF:function(){return p},_2:function(){return D},fN:function(){return m},hG:function(){return g},ii:function(){return f},vC:function(){return v}});var b=e(15009),t=e.n(b),P=e(99289),_=e.n(P),n=e(54006),f=[{name:"amd64",arch:"amd64"},{name:"arm64",arch:"arm64"},{name:"i386",arch:"386"},{name:"arm/v6",arch:"arm"},{name:"arm/v7",arch:"arm"},{name:"arm/v8",arch:"arm64"},{name:"ppc64le",arch:"ppc64le"},{name:"riscv64",arch:"riscv64"}];function m(d){return T.apply(this,arguments)}function T(){return T=_()(t()().mark(function d(h){return t()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,n.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:h}));case 1:case"end":return c.stop()}},d)})),T.apply(this,arguments)}function v(d){return E.apply(this,arguments)}function E(){return E=_()(t()().mark(function d(h){return t()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,n.request)("/api/app/image/import-by-container-tar",{method:"POST",data:h}));case 1:case"end":return c.stop()}},d)})),E.apply(this,arguments)}function g(d){return o.apply(this,arguments)}function o(){return o=_()(t()().mark(function d(h){return t()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,n.request)("/api/app/image/import-by-image-tar",{method:"POST",data:h}));case 1:case"end":return c.stop()}},d)})),o.apply(this,arguments)}function D(d){return O.apply(this,arguments)}function O(){return O=_()(t()().mark(function d(h){return t()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,n.request)("/api/common/attach/delete",{method:"POST",data:h});case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},d)})),O.apply(this,arguments)}function p(){return a.apply(this,arguments)}function a(){return a=_()(t()().mark(function d(){return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,n.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return s.stop()}},d)})),a.apply(this,arguments)}},3393:function(I,M,e){e.d(M,{Gb:function(){return T},Pn:function(){return o},Rb:function(){return O},YU:function(){return f},_U:function(){return E}});var b=e(15009),t=e.n(b),P=e(99289),_=e.n(P),n=e(54006);function f(a){return m.apply(this,arguments)}function m(){return m=_()(t()().mark(function a(d){return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,n.request)("/api/app/image/get-detail",{method:"POST",data:d}));case 1:case"end":return s.stop()}},a)})),m.apply(this,arguments)}function T(a){return v.apply(this,arguments)}function v(){return v=_()(t()().mark(function a(d){return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,n.request)("/api/app/image/tag-remote",{method:"POST",data:d}));case 1:case"end":return s.stop()}},a)})),v.apply(this,arguments)}function E(a){return g.apply(this,arguments)}function g(){return g=_()(t()().mark(function a(d){return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,n.request)("/api/app/image/tag-add",{method:"POST",data:d}));case 1:case"end":return s.stop()}},a)})),g.apply(this,arguments)}function o(a){return D.apply(this,arguments)}function D(){return D=_()(t()().mark(function a(d){return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,n.request)("/api/app/image/tag-delete",{method:"POST",data:d}));case 1:case"end":return s.stop()}},a)})),D.apply(this,arguments)}function O(a){return p.apply(this,arguments)}function p(){return p=_()(t()().mark(function a(d){return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,n.request)("/api/app/image/export",{method:"POST",data:d,responseType:"blob"}));case 1:case"end":return s.stop()}},a)})),p.apply(this,arguments)}},18148:function(I,M,e){e.d(M,{Fj:function(){return C},KG:function(){return f},KX:function(){return B},T8:function(){return o},Xn:function(){return E},ao:function(){return a},c5:function(){return c},c7:function(){return h}});var b=e(15009),t=e.n(b),P=e(99289),_=e.n(P),n=e(54006);function f(i){return m.apply(this,arguments)}function m(){return m=_()(t()().mark(function i(l){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,n.request)("/api/app/image/get-list",{method:"POST",data:l}));case 1:case"end":return r.stop()}},i)})),m.apply(this,arguments)}function T(i){return v.apply(this,arguments)}function v(){return v=_asyncToGenerator(_regeneratorRuntime().mark(function i(l){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,request("/api/app/log/image-build",{method:"POST",data:l});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},i)})),v.apply(this,arguments)}function E(i){return g.apply(this,arguments)}function g(){return g=_()(t()().mark(function i(l){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,n.request)("/api/app/image/get-list-build",{method:"POST",data:l}));case 1:case"end":return r.stop()}},i)})),g.apply(this,arguments)}function o(i){return D.apply(this,arguments)}function D(){return D=_()(t()().mark(function i(l){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,n.request)("/api/app/image/get-build-task",{method:"POST",data:l});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},i)})),D.apply(this,arguments)}function O(i){return p.apply(this,arguments)}function p(){return p=_asyncToGenerator(_regeneratorRuntime().mark(function i(l){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,request("/api/app/image/delete-build-task",{method:"POST",data:l});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},i)})),p.apply(this,arguments)}function a(i){return d.apply(this,arguments)}function d(){return d=_()(t()().mark(function i(l){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,n.request)("/api/app/image/image-delete",{method:"POST",data:l});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},i)})),d.apply(this,arguments)}function h(){return s.apply(this,arguments)}function s(){return s=_()(t()().mark(function i(){return t()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,n.request)("/api/app/image/image-prune",{method:"POST"});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},i)})),s.apply(this,arguments)}function c(){return j.apply(this,arguments)}function j(){return j=_()(t()().mark(function i(){return t()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,n.request)("/api/app/image/build-prune",{method:"POST"});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},i)})),j.apply(this,arguments)}function C(i){return y.apply(this,arguments)}function y(){return y=_()(t()().mark(function i(l){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,n.request)("/api/app/image/update-title",{method:"POST",data:l});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},i)})),y.apply(this,arguments)}function B(i){return R.apply(this,arguments)}function R(){return R=_()(t()().mark(function i(l){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,n.request)("/api/app/image/tag-sync",{method:"POST",data:l}));case 1:case"end":return r.stop()}},i)})),R.apply(this,arguments)}},5251:function(I,M,e){e.d(M,{FI:function(){return t},ZM:function(){return P}});function b(_){return _.trim()}function t(_){var n="";_<.1*1024?n=_.toFixed(2)+"B":_<.1*1024*1024?n=(_/1024).toFixed(2)+"KB":_<1*1024*1024*1024?n=(_/(1024*1024)).toFixed(2)+"MB":n=(_/(1024*1024*1024)).toFixed(2)+"GB";var f=n+"",m=f.indexOf("."),T=f.substr(m+1,2);return T=="00"?f.substring(0,m)+f.substr(m+3,2):n}function P(_){if(_){var n=new Date(_),f=n.getFullYear()+"-",m=(n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1)+"-",T=(n.getDate()<10?"0"+n.getDate():n.getDate())+" ",v=(n.getHours()<10?"0"+n.getHours():n.getHours())+":",E=(n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes())+":",g=n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds();return f+m+T+v+E+g}}}}]);
