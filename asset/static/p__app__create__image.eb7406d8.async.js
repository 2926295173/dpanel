"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3985],{64789:function(ve,$,e){e.d($,{Z:function(){return D}});var w=e(87462),l=e(67294),G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},x=G,Z=e(84089),y=function(P,d){return l.createElement(Z.Z,(0,w.Z)({},P,{ref:d,icon:x}))},A=l.forwardRef(y),D=A},63434:function(ve,$,e){var w=e(1413),l=e(45987),G=e(22270),x=e(84567),Z=e(67294),y=e(90789),A=e(35510),D=e(85893),v=["options","fieldProps","proFieldProps","valueEnum"],P=Z.forwardRef(function(o,S){var t=o.options,u=o.fieldProps,Q=o.proFieldProps,W=o.valueEnum,N=(0,l.Z)(o,v);return(0,D.jsx)(A.Z,(0,w.Z)({ref:S,valueType:"checkbox",valueEnum:(0,G.h)(W,void 0),fieldProps:(0,w.Z)({options:t},u),lightProps:(0,w.Z)({labelFormatter:function(){return(0,D.jsx)(A.Z,(0,w.Z)({ref:S,valueType:"checkbox",mode:"read",valueEnum:(0,G.h)(W,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,w.Z)({options:t},u),proFieldProps:Q},N))}},N.lightProps),proFieldProps:Q},N))}),d=Z.forwardRef(function(o,S){var t=o.fieldProps,u=o.children;return(0,D.jsx)(x.Z,(0,w.Z)((0,w.Z)({ref:S},t),{},{children:u}))}),F=(0,y.G)(d,{valuePropName:"checked"}),V=F;V.Group=P,$.Z=V},31199:function(ve,$,e){var w=e(1413),l=e(45987),G=e(67294),x=e(35510),Z=e(85893),y=["fieldProps","min","proFieldProps","max"],A=function(P,d){var F=P.fieldProps,V=P.min,o=P.proFieldProps,S=P.max,t=(0,l.Z)(P,y);return(0,Z.jsx)(x.Z,(0,w.Z)({valueType:"digit",fieldProps:(0,w.Z)({min:V,max:S},F),ref:d,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:o},t))},D=G.forwardRef(A);$.Z=D},90672:function(ve,$,e){var w=e(1413),l=e(45987),G=e(67294),x=e(35510),Z=e(85893),y=["fieldProps","proFieldProps"],A=function(v,P){var d=v.fieldProps,F=v.proFieldProps,V=(0,l.Z)(v,y);return(0,Z.jsx)(x.Z,(0,w.Z)({ref:P,valueType:"textarea",fieldProps:d,proFieldProps:F},V))};$.Z=G.forwardRef(A)},91058:function(ve,$,e){var w=e(5574),l=e.n(w),G=e(89035),x=e(38345),Z=e(17186),y=e(24739),A=e(5966),D=e(42075),v=e(28036),P=e(85576),d=e(67294),F=e(95089),V=e(12491),o=e(85893),S="docker-image",t=(0,d.forwardRef)(function(u,Q){var W=(0,d.useState)(S),N=l()(W,2),a=N[0],_=N[1],f=(0,d.useRef)(),z=(0,d.useState)(""),c=l()(z,2),le=c[0],s=c[1],b=function(){a!="code"?_("code"):_(S)};(0,d.useImperativeHandle)(Q,function(){return{addEnvItem:function(M,Y){var B,ee=(B=f.current)===null||B===void 0?void 0:B.getList(),ce=!1;if(ee==null||ee.map(function(pe){if(pe.name==M){ce=!0;return}}),!ce){var _e;(_e=f.current)===null||_e===void 0||_e.add({name:M,value:Y})}},clear:function(){var M;(M=f.current)===null||M===void 0||(M=M.getList())===null||M===void 0||M.map(function(Y,B){var ee;(ee=f.current)===null||ee===void 0||ee.remove(B)})}}});function R(L){try{var M,Y;L==""&&(L=I());for(var B=(M=(Y=f.current)===null||Y===void 0||(Y=Y.getList())===null||Y===void 0?void 0:Y.length)!==null&&M!==void 0?M:0,ee=B;ee>=0;ee--){var ce;(ce=f.current)===null||ce===void 0||ce.remove(ee)}var _e=L.split(`
`),pe=0;_e.map(function(oe){var Ee,Ce=oe.split("=");Ce.length<2||((Ee=f.current)===null||Ee===void 0||Ee.add({name:Ce[0],value:Ce.slice(1).join("=")},pe),pe++)})}catch(oe){console.log(oe)}}function I(){if(f&&f.current&&f.current.getList){var L,M=(L=f.current)===null||L===void 0?void 0:L.getList();if(M){var Y=[];return M.map(function(B){Y.push("".concat(B.name,"=").concat(B.value))}),Y.join(`
`)}else return""}else return""}return(0,o.jsxs)(x.Z,{ghost:u.showCardGhost,title:u.label?u.label:null,headerBordered:!0,extra:(u.showCodeMode||u.showImportButton)&&(0,o.jsxs)(D.Z,{children:[u.showImportButton&&(0,o.jsx)("div",{style:{marginBottom:"-25px"},children:(0,o.jsx)(V.Z,{title:"\u5BFC\u5165 env \u6587\u4EF6",onImport:function(M){return R(M),!0},onLoad:function(M){if(M.indexOf("=")<0)throw new Error("\u5BFC\u5165env\u6587\u4EF6\u9519\u8BEF");return!0}})}),u.showCodeMode?(0,o.jsx)(v.ZP,{icon:(0,o.jsx)(G.Z,{}),type:a=="code"?"primary":"default",onClick:b,children:"\u4EE3\u7801\u6A21\u5F0F"},"code"):""]}),children:[(0,o.jsx)(Z.u,{name:u.name?u.name:"environment",actionRef:f,creatorButtonProps:u.showAddButton?{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u73AF\u5883\u53D8\u91CF"}:!1,copyIconProps:!1,deleteIconProps:u.showDeleteButton,min:100,label:u.listLabel,children:function(M,Y,B){var ee=B.getCurrentRowData();return(0,o.jsxs)(y.UW,{children:[(0,o.jsx)(A.Z,{width:u.showInDrawer?"sm":"md",name:"name",label:"\u53D8\u91CF\u540D",required:!0,rules:[{required:!0}],disabled:u.showDisableName,placeholder:"\u8F93\u5165\u53D8\u91CF\u540D\u79F0"}),(0,o.jsx)(A.Z,{width:u.showInDrawer?"sm":"md",name:"value",label:"\u53D8\u91CF\u503C",rules:[{required:!!u.requireValue}],disabled:u.showDisableValue,placeholder:ee&&ee.label?ee.label:"\u8F93\u5165\u53D8\u91CF\u503C"})]})}}),u.showCodeMode&&(0,o.jsx)(P.Z,{width:"800px",open:a=="code",onCancel:function(){return _("docker-image")},onOk:function(){R(le),_("docker-image")},children:(0,o.jsx)(F.ZP,{onChange:function(M){return s(M)},value:I(),height:"680px",theme:"light"})})]})});$.Z=t},92067:function(ve,$,e){e.d($,{Z:function(){return V}});var w=e(15009),l=e.n(w),G=e(99289),x=e.n(G),Z=e(60335),y=e(64789),A=e(10641),D=e(42075),v=e(28036),P=e(37413),d=e(5251),F=e(85893);function V(o){return(0,F.jsx)(A.Z,{columns:[{title:"\u5BB9\u5668\u540D\u79F0",dataIndex:"name",render:function(t,u,Q,W){return(0,F.jsx)(D.Z,{direction:"vertical",style:{textAlign:"left"},children:u==null?void 0:u.Names.map(function(N){return(0,d.fi)(N,"/")})},u.Id)}},{title:"\u7AEF\u53E3",dataIndex:"ports",search:!1,render:function(t,u,Q,W){var N=[],a=[];return u!=null&&u.Ports&&u.Ports.map(function(_,f){_.PublicPort?N.push(_):a.push(_)}),(0,F.jsx)(P.Z,{publicPort:N,privatePort:a,domain:[]})}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",ellipsis:!0,width:100,render:function(t,u,Q,W){return[(0,F.jsx)(v.ZP,{type:"link",onClick:x()(l()().mark(function N(){var a;return l()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,Z.jV)({md5:u.Id});case 2:a=f.sent,o.onSelect&&o.onSelect(a.data.info);case 4:case"end":return f.stop()}},N)})),children:(0,F.jsx)(y.Z,{})},u.Id)]}}],rowKey:"Id",request:function(){var S=x()(l()().mark(function t(u,Q,W){var N;return l()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,Z.IE)({siteTitle:u.name});case 2:return N=_.sent,_.abrupt("return",{data:N.data.list,success:!0,total:N.data.list.length});case 4:case"end":return _.stop()}},t)}));return function(t,u,Q){return S.apply(this,arguments)}}(),pagination:{pageSize:9}})}},52255:function(ve,$,e){e.d($,{Z:function(){return G}});var w=e(67294),l=e(85893);function G(x){return(0,l.jsx)("div",{style:{display:x.show?"block":"none"},children:x.children})}},44349:function(ve,$,e){var w=e(97857),l=e.n(w),G=e(17186),x=e(5966),Z=e(86250),y=e(67294),A=e(85893),D=(0,y.forwardRef)(function(v,P){var d=(0,y.useRef)();(0,y.useImperativeHandle)(P,function(){return{addItem:function(o,S){var t,u=(t=d.current)===null||t===void 0?void 0:t.getList(),Q=!1;if(u==null||u.map(function(N){if(N.name==o){Q=!0;return}}),!Q){var W;(W=d.current)===null||W===void 0||W.add({name:o,value:S})}},clear:function(){var o;(o=d.current)===null||o===void 0||(o=o.getList())===null||o===void 0||o.map(function(S,t){var u;(u=d.current)===null||u===void 0||u.remove(t)})}}});var F={};return v.hideCopyButton===!0&&(F.copyIconProps=!1),v.hideDeleteButton===!0&&(F.deleteIconProps=!1),(0,A.jsx)(G.u,l()(l()({initialValue:v.initialValue,label:v.label,name:v.name,actionRef:d,creatorButtonProps:v.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(v.label?v.label:v.name)}:!1,min:v.min?v.min:0},F),{},{children:function(o,S,t){return(0,A.jsx)(Z.Z,{justify:v.justify,gap:v.gap,children:v.items.map(function(u){return u.render?(0,A.jsx)("div",{children:u.render&&u.render(o,S,t)},"".concat(v.name,"-").concat(u.name,"-").concat(o.key)):(0,A.jsx)(x.Z,{width:u.width,name:u.name,label:u.label,required:u.required,rules:[{required:u.required}],disabled:u.disabled,placeholder:u.placeholder},"".concat(v.name,"-").concat(u.name,"-").concat(o.key))})})}}))});$.Z=D},12491:function(ve,$,e){e.d($,{Z:function(){return D}});var w=e(24963),l=e(88484),G=e(62370),x=e(31418),Z=e(28036),y=e(67294),A=e(85893);function D(v){var P=(0,y.useContext)(w.Z),d=P.message,F=P.notice,V=P.lang,o=(0,y.useRef)(null),S=x.Z.useApp(),t=function(){o.current&&(o.current.click(),o.current.onchange=function(Q){if(!Q||!Q.target)return"";var W=new FileReader;W.onload=function(a){var _,f,z=(_=a.target)===null||_===void 0?void 0:_.result;if(v.onLoad)try{v.onLoad&&v.onLoad(z)}catch(c){F.error(c);return}typeof v.onImport=="function"&&(d.success("\u6210\u529F\u5BFC\u5165 ".concat(v.title)),v.onImport(z)),(f=o.current)!==null&&f!==void 0&&f.value&&(o.current.value="")};var N=Q.target;if(N.files)try{W.readAsText(N.files[0])}catch(a){F.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(G.Z,{children:(0,A.jsx)(Z.ZP,{icon:(0,A.jsx)(l.Z,{}),block:!0,onClick:t,children:v.title})}),(0,A.jsx)("input",{style:{display:"none"},type:"file",ref:o,name:"importFileInput"})]})}},28230:function(ve,$,e){var w=e(15009),l=e.n(w),G=e(99289),x=e.n(G),Z=e(5574),y=e.n(Z),A=e(24963),D=e(14946),v=e(184),P=e(5966),d=e(62370),F=e(97462),V=e(52688),o=e(24739),S=e(17186),t=e(28036),u=e(34041),Q=e(71230),W=e(15746),N=e(67294),a=e(85893),_=(0,N.forwardRef)(function(f,z){var c=(0,N.useState)(!1),le=y()(c,2),s=le[0],b=le[1],R=(0,N.useRef)(),I=(0,N.useContext)(A.Z),L=I.message;return(0,N.useImperativeHandle)(z,function(){return{}}),(0,a.jsxs)(v.a,{name:"create",title:"\u521B\u5EFA\u7F51\u7EDC",open:s,onOpenChange:function(Y){b(Y)},formRef:R,trigger:(0,a.jsx)(t.ZP,{type:"primary",children:"\u521B\u5EFA\u7F51\u7EDC"}),onFinish:function(){var M=x()(l()().mark(function Y(B){var ee,ce,_e,pe,oe,Ee,Ce,ge,n,ye,Se,be,de,Me;return l()().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return be={name:B.name,driver:(ee=B.driver)!==null&&ee!==void 0?ee:"bridge",ipSubnet:(ce=B.ipSubnet)!==null&&ce!==void 0?ce:"",ipGateway:(_e=B.ipGateway)!==null&&_e!==void 0?_e:"",ipRange:(pe=B.ipRange)!==null&&pe!==void 0?pe:"",ipAux:B.ipAux,enableIpV6:(oe=B.enableIpV6)!==null&&oe!==void 0?oe:!1,ipV6Subnet:(Ee=B.ipV6Subnet)!==null&&Ee!==void 0?Ee:"",ipV6Gateway:(Ce=B.ipV6Gateway)!==null&&Ce!==void 0?Ce:"",ipV6Range:(ge=B.ipV6Range)!==null&&ge!==void 0?ge:"",ipV6Aux:(n=B.ipV6Aux)!==null&&n!==void 0?n:[],driverOption:B.driverOption,internal:(ye=B.internal)!==null&&ye!==void 0?ye:!1,attachable:(Se=B.attachable)!==null&&Se!==void 0?Se:!1},(B.driver=="macvlan"||B.driver=="ipvlan")&&(be.driverOption||(be.driverOption=[]),be.driverOption.push({name:"parent",value:B.macvlanParentCard})),Ze.next=4,(0,D.XY)(be);case 4:if(de=Ze.sent,!(de&&de.data&&de.data.id!="")){Ze.next=10;break}return L.success("\u521B\u5EFA\u7F51\u7EDC\u6210\u529F"),f.onFinish&&f.onFinish(),(Me=R.current)===null||Me===void 0||Me.resetFields(),Ze.abrupt("return",!0);case 10:case"end":return Ze.stop()}},Y)}));return function(Y){return M.apply(this,arguments)}}(),children:[(0,a.jsx)(P.Z,{label:"\u540D\u79F0",tooltip:"\u4E0D\u914D\u7F6E\u5B50\u7F51\u65F6\uFF0C\u4F1A\u81EA\u52A8\u751F\u6210",name:"name",required:!0,rules:[{required:!0}],placeholder:"\u6307\u5B9A\u552F\u4E00\u7684\u7F51\u7EDC\u540D\u79F0"}),(0,a.jsx)(d.Z,{label:"\u7C7B\u578B",name:"driver",children:(0,a.jsxs)(u.Z,{defaultValue:"bridge",children:[(0,a.jsx)(u.Z.Option,{value:"bridge",children:"bridge"}),(0,a.jsx)(u.Z.Option,{value:"macvlan",children:"macvlan"}),(0,a.jsx)(u.Z.Option,{value:"ipvlan",children:"ipvlan"}),(0,a.jsx)(u.Z.Option,{value:"overlay",children:"overlay"})]})}),(0,a.jsx)(F.Z,{name:["driver"],children:function(Y){var B=Y.driver;if(B=="macvlan"||B=="ipvlan")return(0,a.jsx)(P.Z,{required:!0,rules:[{required:!0}],label:"\u7236\u7F51\u5361",name:"macvlanParentCard",tooltip:"\u6307\u5B9A\u8981\u6865\u63A5\u7684\u5BBF\u4E3B\u673A\u7F51\u5361\u540D\u79F0"})}}),(0,a.jsxs)(Q.Z,{children:[(0,a.jsx)(W.Z,{span:8,children:(0,a.jsx)(V.Z,{label:"\u81EA\u5B9AIPV4\u5B50\u7F51",name:"userIpV4Subnet"})}),(0,a.jsx)(W.Z,{span:8,children:(0,a.jsx)(V.Z,{name:"internal",label:"\u9694\u79BB\u5916\u90E8\u8BBF\u95EE",initialValue:!1})}),(0,a.jsx)(W.Z,{span:8,children:(0,a.jsx)(V.Z,{name:"attachable",label:"\u5141\u8BB8\u624B\u52A8\u9644\u52A0\u5BB9\u5668",initialValue:!1})})]}),(0,a.jsx)(F.Z,{name:["userIpV4Subnet"],children:function(Y){var B=Y.userIpV4Subnet;if(B)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.UW,{title:"IPV4\u914D\u7F6E",children:[(0,a.jsx)(P.Z,{label:"\u5B50\u7F51",name:"ipSubnet",width:"md",tooltip:"\u683C\u5F0F\u4E3A: \u5B50\u7F51\u8D77\u59CB\u5730\u5740/\u63A9\u7801\u3002\u5E38\u89C1\u7684\u683C\u5F0F\u6709 10.0.0.0/8, 172.20.0.0/16, 192.168.1.0/24",placeholder:"192.168.0.0/16"}),(0,a.jsx)(P.Z,{label:"\u7F51\u5173",name:"ipGateway",width:"md",placeholder:"192.168.0.1"}),(0,a.jsx)(P.Z,{label:"\u6307\u5B9AIp\u8303\u56F4",name:"ipRange",width:"md",placeholder:"192.168.1.0/24"})]}),(0,a.jsx)(S.u,{name:"ipAux",label:"\u6392\u9664Ip",children:(0,a.jsxs)(o.UW,{children:[(0,a.jsx)(P.Z,{label:"\u8BBE\u5907\u540D\u79F0",name:"device",width:"md"}),(0,a.jsx)(P.Z,{label:"Ip\u5730\u5740",name:"address",width:"md"})]})})]})}}),(0,a.jsxs)(Q.Z,{children:[(0,a.jsx)(W.Z,{span:8,children:(0,a.jsx)(V.Z,{label:"\u542F\u7528IPV6",name:"enableIpV6"})}),(0,a.jsx)(W.Z,{children:(0,a.jsx)(V.Z,{label:"\u81EA\u5B9AIPV6\u5B50\u7F51",name:"userIpV6Subnet",fieldProps:{onChange:function(Y,B){if(Y){var ee;(ee=R.current)===null||ee===void 0||ee.setFieldValue("enableIpV6",!0)}}}})})]}),(0,a.jsx)(F.Z,{name:["userIpV6Subnet"],children:function(Y){var B=Y.userIpV6Subnet;if(B)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.UW,{title:"IPV6\u914D\u7F6E",children:[(0,a.jsx)(P.Z,{label:"\u5B50\u7F51",name:"ipV6Subnet",width:"md",placeholder:"2001:db8::/48"}),(0,a.jsx)(P.Z,{label:"\u7F51\u5173",name:"ipV6Gateway",width:"md",placeholder:"2001:db8::1"}),(0,a.jsx)(P.Z,{label:"Ip\u8303\u56F4",name:"ipV6Range",width:"md",placeholder:"2001:db8::/64"})]}),(0,a.jsx)(S.u,{name:"ipV6Aux",label:"\u6392\u9664Ip",children:(0,a.jsxs)(o.UW,{children:[(0,a.jsx)(P.Z,{label:"\u8BBE\u5907\u540D\u79F0",name:"device",width:"md"}),(0,a.jsx)(P.Z,{label:"Ip\u5730\u5740",name:"address",width:"md"})]})})]})}}),(0,a.jsx)(S.u,{name:"driverOption",label:"\u81EA\u5B9A\u4E49\u9A71\u52A8\u914D\u7F6E",children:(0,a.jsxs)(o.UW,{children:[(0,a.jsx)(P.Z,{label:"\u540D\u79F0",name:"name",width:"md"}),(0,a.jsx)(P.Z,{label:"\u503C",name:"value",width:"md"})]})})]})});$.Z=_},46442:function(ve,$,e){var w=e(15009),l=e.n(w),G=e(99289),x=e.n(G),Z=e(5574),y=e.n(Z),A=e(67294),D=e(14946),v=e(64789),P=e(10641),d=e(28036),F=e(85265),V=e(42075),o=e(66309),S=e(28230),t=e(85893),u=(0,A.forwardRef)(function(Q,W){(0,A.useImperativeHandle)(W,function(){return{show:function(){f(!0)}}});var N=(0,A.useState)(!1),a=y()(N,2),_=a[0],f=a[1],z=(0,A.useRef)();return(0,t.jsxs)(t.Fragment,{children:[Q.showTriggerButton&&(0,t.jsx)(d.ZP,{onClick:function(){f(!0)},children:"\u52A0\u5165\u7F51\u7EDC"}),(0,t.jsx)(F.Z,{title:"\u9009\u62E9\u7F51\u7EDC",width:800,footer:!1,open:_,onClose:function(){return f(!1)},extra:(0,t.jsx)(V.Z,{children:(0,t.jsx)(S.Z,{onFinish:function(){var le,s;!((le=z.current)===null||le===void 0)&&le.reloadAndRest&&((s=z.current)===null||s===void 0||s.reloadAndRest())}},"create")}),children:(0,t.jsx)(P.Z,{rowKey:"Name",toolBarRender:!1,actionRef:z,columns:[{title:"\u540D\u79F0",dataIndex:"Name",render:function(le,s,b,R,I){return s.Name=="none"||s.Name=="bridge"||s.Name=="host"?(0,t.jsxs)(t.Fragment,{children:[s.Name," ",(0,t.jsx)(o.Z,{color:"blue",children:"System"})]}):(0,t.jsx)(t.Fragment,{children:le})}},{title:"\u7C7B\u578B",ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"IPAM Driver",ellipsis:!0,width:120,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4 IPAM Network",search:!1,dataIndex:["IPAM","Config",0,"Subnet"],render:function(le,s,b,R,I){return(0,t.jsxs)(V.Z,{children:[s.IPAM.Config&&s.IPAM.Config[0]&&"".concat(s.IPAM.Config[0].Subnet," - ").concat(s.IPAM.Config[0].Gateway),s.IPAM.Config&&s.IPAM.Config[1]&&"".concat(s.IPAM.Config[1].Subnet," - ").concat(s.IPAM.Config[1].Gateway)]})}},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(le,s,b,R,I){return[s.Name!="none"&&s.Name!="bridge"&&s.Name!="host"&&(0,t.jsx)(d.ZP,{type:"link",onClick:function(){Q.onSelect(s),f(!1)},children:(0,t.jsx)(v.Z,{})},s.Id)]}}],request:function(){var c=x()(l()().mark(function le(s,b,R){var I;return l()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,(0,D.jR)({name:s.Name});case 2:return I=M.sent,M.abrupt("return",{data:I.data.list,success:!0,total:I.data.list.length});case 4:case"end":return M.stop()}},le)}));return function(le,s,b){return c.apply(this,arguments)}}(),pagination:{pageSize:10}})})]})});$.Z=u},35880:function(ve,$,e){var w=e(67294),l=(0,w.createContext)({});$.Z=l},17374:function(ve,$,e){e.r($),e.d($,{default:function(){return wn}});var w=e(15009),l=e.n(w),G=e(99289),x=e.n(G),Z=e(5574),y=e.n(Z),A=e(90078),D=e(38345),v=e(97269),P=e(2236),d=e(5966),F=e(97462),V=e(64218),o=e(92398),S=e(38925),t=e(67294),u=e(35880),Q=e(10641),W=e(62370),N=e(85576),a=e(42075),_=e(96074),f=e(25593),z=e(83062),c=e(71230),le=e(15746),s=e(28036),b=e(3393),R=e(18148),I=e(5251),L=e(64789),M=e(87462),Y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885 780H165c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM400 325.7h73.9V664c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V325.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 171a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13z"}}]},name:"to-top",theme:"outlined"},B=Y,ee=e(84089),ce=function(X,k){return t.createElement(ee.Z,(0,M.Z)({},X,{ref:k,icon:B}))},_e=t.forwardRef(ce),pe=_e,oe=e(85060),Ee=e(28307),Ce=e(78451),ge=e(99861),n=e(85893);function ye(h){var X=(0,t.useState)(!1),k=y()(X,2),J=k[0],g=k[1],K=(0,t.useRef)(),E=(0,t.useContext)(u.Z),p=E.createFormRef,T=E.volumeListRef,O=E.createEnvRef,m=E.domainRef,C=(0,t.useRef)(),q=function(){var U=x()(l()().mark(function H(j){var ne,me,se,re,fe,je,Fe,he,Pe,Ie,Oe,ke;return l()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return g(!1),te.next=3,(0,b.YU)({md5:j});case 3:re=te.sent,h.redeploy||(he=(fe=p.current)===null||fe===void 0?void 0:fe.getFieldsValue(),(je=p.current)===null||je===void 0||je.resetFields(),(Fe=p.current)===null||Fe===void 0||Fe.setFieldsValue({siteName:he.siteName,siteTitle:he.siteTitle,useBridgeNetwork:he.useBridgeNetwork})),re.data.info.Config.Env&&re.data.info.Config.Env.map(function(i){var ie,r=i.split("=");(ie=O.current)===null||ie===void 0||ie.addEnvItem(r[0],r.slice(1).join("="))}),(ne=p.current)===null||ne===void 0||ne.setFieldValue("imageName",j),(me=p.current)===null||me===void 0||me.setFieldValue("workDir",re.data.info.Config.WorkingDir),(se=m.current)===null||se===void 0||se.setExposePort(re.data.info.Config.ExposedPorts),h.redeploy||(re.data.info.Config.Volumes?(Oe=[],Object.keys(re.data.info.Config.Volumes).map(function(i,ie){Oe.push(i)}),(Ie=T.current)===null||Ie===void 0||Ie.setDefaultDestPath(Oe)):(ke=T.current)===null||ke===void 0||ke.setDefaultDestPath([]),(Pe=p.current)===null||Pe===void 0||Pe.setFieldsValue({workDir:{value:"",useDefault:!0,default:re.data.info.Config.WorkingDir},user:{value:"",useDefault:!0,default:re.data.info.Config.User},command:{value:"",useDefault:!0,default:re.data.info.Config.Cmd&&re.data.info.Config.Cmd.join(" ")},entrypoint:{value:"",useDefault:!0,default:re.data.info.Config.Entrypoint&&re.data.info.Config.Entrypoint.join(" ")}}));case 10:case"end":return te.stop()}},H)}));return function(j){return U.apply(this,arguments)}}();return(0,t.useEffect)(function(){h.fromImageId&&q(h.fromImageId)},[h.fromImageId]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.Z,{open:J,width:1024,title:"\u9009\u62E9\u955C\u50CF",footer:!1,onCancel:function(){return g(!1)},children:(0,n.jsx)(Q.Z,{scroll:{x:"max-content"},columns:[{title:"Id",dataIndex:"Id",search:!1,width:200,render:function(H,j,ne,me,se){return(0,n.jsx)(Ce.Z,{content:j.Id})}},{title:"\u955C\u50CF\u540D\u79F0",dataIndex:"tag",width:200,render:function(H,j,ne,me){return(0,n.jsx)(Ce.Z,{content:j.RepoTags[0]})}},{title:"\u521B\u5EFA\u65E5\u671F",dataIndex:"Created",ellipsis:!0,search:!1,width:"180px",render:function(H,j,ne,me){return(0,n.jsx)("div",{children:(0,I.ZM)(j.Created*1e3)},j.Id)},sorter:function(H,j){return H.Created-j.Created}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:80,render:function(H,j,ne,me){return(0,n.jsxs)(a.Z,{split:(0,n.jsx)(_.Z,{type:"vertical"}),children:[(0,n.jsx)(f.Z.Link,{onClick:x()(l()().mark(function se(){return l()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.abrupt("return",q(j.RepoTags[0]));case 1:case"end":return fe.stop()}},se)})),children:(0,n.jsx)(z.Z,{title:"\u4F7F\u7528\u955C\u50CF",children:(0,n.jsx)(L.Z,{})})},"addImage"),(0,n.jsx)(f.Z.Link,{onClick:x()(l()().mark(function se(){var re;return l()().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:j.RepoTags[0]&&((re=C.current)===null||re===void 0||re.setImageName(j.RepoTags[0]));case 1:case"end":return je.stop()}},se)})),children:(0,n.jsx)(z.Z,{title:"\u66F4\u65B0\u955C\u50CF",children:(0,n.jsx)(pe,{})})},"updateImage")]})}}],request:function(){var U=x()(l()().mark(function H(j,ne,me){var se,re,fe,je,Fe;return l()().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return h.redeploy&&(re=(se=p.current)===null||se===void 0?void 0:se.getFieldValue("imageName"),j.tag=re?re.split(":")[0]:j.tag),Pe.next=3,(0,R.KG)({tag:j.tag});case 3:return fe=Pe.sent,je=0,Fe=[],fe.data.list&&(Fe=fe.data.list.flatMap(function(Ie){return Ie.RepoTags.map(function(Oe){return{Key:je++,Id:Ie.Id,Created:Ie.Created,RepoTags:[Oe]}})})),Pe.abrupt("return",{data:Fe,success:!0,total:Fe.length});case 8:case"end":return Pe.stop()}},H)}));return function(H,j,ne){return U.apply(this,arguments)}}(),toolBarRender:function(){return[(0,n.jsx)(Ee.Z,{onClick:function(){g(!1)},buttonType:"primary",ref:C,onFinish:function(j){q(j)}},"remote")]},formRef:K,rowKey:"Key",pagination:{pageSize:5}})},"imageTableList"),(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(le.Z,{span:14,children:(0,n.jsx)(d.Z,{label:"\u955C\u50CF",tooltip:h.redeploy?"\u66F4\u65B0\u5BB9\u5668\u65F6,\u53EA\u53EF\u4EE5\u9009\u62E9\u8BE5\u955C\u50CF\u4E0B\u7684\u4E0D\u540Ctag.\u4E5F\u53EF\u4EE5\u5F3A\u5236\u66F4\u65B0\u5DF2\u90E8\u7F72tag,\u66F4\u6B21\u90E8\u7F72":"\u65B0\u5EFA\u5BB9\u5668\u65F6,\u53EF\u4EE5\u4F7F\u7528\u672C\u5730\u955C\u50CF,\u4E5F\u53EF\u4EE5\u4E0B\u8F7D\u5168\u65B0\u7684\u955C\u50CF\u6216\u662F\u66F4\u65B0\u672C\u5730\u955C\u50CF\u7684tag",name:"imageName",disabled:!0,placeholder:"\u8BF7\u9009\u62E9\u955C\u50CF\uFF0C\u5982\u679C\u662F\u8FDC\u7A0B\u955C\u50CF\u8BF7\u5148\u4E0B\u8F7D",rules:[{required:!0}],required:!0})}),(0,n.jsx)(le.Z,{children:(0,n.jsx)(W.Z,{label:" ",children:(0,n.jsxs)(a.Z.Compact,{children:[(0,n.jsx)(s.ZP,{type:"primary",onClick:function(){return g(!0)},children:h.redeploy?"\u66F4\u6362\u955C\u50CF":"\u9009\u62E9\u955C\u50CF"},"showBtn"),(0,n.jsx)(F.Z,{name:["imageName"],children:function(H){var j=H.imageName;return h.redeploy?(0,n.jsx)(ge.Z,{image:[j],trigger:(0,n.jsx)(z.Z,{title:"\u91CD\u65B0\u62C9\u53D6\u5F53\u524D\u955C\u50CF",children:(0,n.jsx)(s.ZP,{icon:(0,n.jsx)(oe.Z,{}),children:"\u62C9\u53D6\u5F53\u524D\u955C\u50CF"})})}):(0,n.jsx)(Ee.Z,{onClick:function(){g(!1)},ref:C,onFinish:function(me){q(me)}},"remote")}})]})})})]})]})}var Se=e(60335),be=e(51042),de=e(24739),Me=e(63434),Le=e(17186),Ze=e(85265),rn=e(92067),ln=(0,t.forwardRef)(function(h,X){var k=(0,t.useState)(!1),J=y()(k,2),g=J[0],K=J[1],E=(0,t.useRef)(),p=function(m){var C=(0,t.useState)([]),q=y()(C,2),U=q[0],H=q[1];return(0,t.useEffect)(function(){(0,Se.jV)({md5:m.name}).then(function(j){var ne;return H((ne=j.data.info.Config.Env)!==null&&ne!==void 0?ne:[]),!0})},[]),(0,n.jsxs)(D.Z,{bordered:!0,extra:m.action,style:{marginBottom:10},children:[(0,n.jsx)(D.Z,{title:"\u5173\u8054\u4FE1\u606F",children:(0,n.jsxs)(de.UW,{children:[(0,n.jsx)(d.Z,{label:"\u5BB9\u5668\u540D\u79F0",name:"name",width:"md",readonly:!0}),(0,n.jsx)(d.Z,{label:"\u8BBF\u95EEHostName",name:"alise",width:"md",tooltip:"\u901A\u8FC7\u914D\u7F6E\u6B64\u540D\u79F0\uFF0C\u5728\u5BB9\u5668\u5185\u90E8\u8FDB\u884C\u8BF7\u6C42\u8BBF\u95EE"}),(0,n.jsx)(Me.Z,{label:"\u5173\u8054\u5B58\u50A8",name:"volume"})]})}),(0,n.jsx)(D.Z,{title:"\u73AF\u5883\u53D8\u91CF",children:(0,n.jsx)(a.Z,{direction:"vertical",children:U&&U.map(function(j,ne){return(0,n.jsx)(f.Z.Text,{copyable:{icon:(0,n.jsx)(be.Z,{}),onCopy:function(){var se=j.split("=");h.onAddEnv(se[0],se[1])},tooltips:["add env","success"]},code:!0,ellipsis:{tooltip:j},style:{width:300},children:j},ne)})},"linkEnv")})]})},T=function(m){var C,q,U=!1,H=(C=(q=E.current)===null||q===void 0?void 0:q.getList())!==null&&C!==void 0?C:[];if(H.map(function(ne){ne.name==m.name&&(U=!0)}),!U){var j;(j=E.current)===null||j===void 0||j.add(m)}};return(0,t.useImperativeHandle)(X,function(){return{setDefaultLink:function(m){m&&m.map(function(C){C.name!=""&&T(C)})}}}),(0,n.jsxs)(D.Z,{title:"\u5173\u8054\u5BB9\u5668",headerBordered:!0,children:[(0,n.jsx)(Le.u,{name:"links",actionRef:E,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5173\u8054"},actionGuard:{beforeAddRow:function(m,C){return K(!0),!1}},copyIconProps:!1,min:0,itemRender:function(m,C){return(0,n.jsx)(p,{action:m.action,name:C.record.name})}}),(0,n.jsx)(Ze.Z,{title:"\u9009\u62E9\u5BB9\u5668",width:800,footer:!1,open:g,onClose:function(){return K(!1)},children:(0,n.jsx)(rn.Z,{onSelect:function(m){T({name:m.Name,alise:m.Config.Hostname,volume:!1}),K(!1)}})})]})}),sn=ln,on=e(91058),Ne=e(64317),dn=(0,t.forwardRef)(function(h,X){var k=(0,t.useRef)();return(0,t.useImperativeHandle)(X,function(){return{setDefaultDestPath:function(g){var K,E,p=(K=(E=k.current)===null||E===void 0?void 0:E.getList())!==null&&K!==void 0?K:[];g.length!=0&&g.filter(function(T){return T!=""}).map(function(T){var O=!1;if(p.map(function(C){if(C.dest==T){O=!0;return}}),!O){var m;(m=k.current)===null||m===void 0||m.add({dest:T,permission:"write",inImage:!0})}})},addUserVolumeItem:function(g,K){var E,p=(E=k.current)===null||E===void 0?void 0:E.getList(),T=!1;if(p==null||p.map(function(m){if(m.dest==K){T=!0;return}}),!T){var O;(O=k.current)===null||O===void 0||O.add({host:g,dest:K})}}}}),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(D.Z,{title:"\u81EA\u5B9A\u4E49\u6302\u8F7D\u6216\u662F\u5B58\u50A8\u5377",tooltip:"\u6302\u8F7D\u53EF\u4EE5\u662F\u5BBF\u4E3B\u673A\u7684\u76EE\u5F55\u6216\u662F\u6587\u4EF6\uFF0C\u4E5F\u53EF\u4EE5\u6307\u5B9A\u5B58\u50A8\u5377\u540D\uFF08\u81EA\u52A8\u65B0\u5EFA\uFF09\u3002",headerBordered:!0,direction:"column",children:(0,n.jsx)(Le.u,{actionRef:k,name:"volumes",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u6620\u5C04\u76EE\u5F55"},copyIconProps:!1,min:0,children:function(g,K,E){var p=E.getCurrentRowData();return(0,n.jsxs)(de.UW,{children:[(0,n.jsxs)(a.Z.Compact,{children:[(0,n.jsx)(d.Z,{label:"\u5BBF\u4E3B\u673A\u6587\u4EF6\u3001\u76EE\u5F55\u6216\u5B58\u50A8\u5377",name:"host",width:h.showInDrawer?"sm":"md"}),(0,n.jsx)(Ne.Z,{label:" ",valueEnum:{write:"\u8BFB\u5199",readonly:"\u53EA\u8BFB"},initialValue:"write",name:"permission"})]}),(0,n.jsx)(d.Z,{label:"\u5BB9\u5668\u5185\u8DEF\u5F84",name:"dest",width:h.showInDrawer?"sm":"md",required:!0,rules:[{required:!0}],disabled:h.disabledUserVolumeDest||p.inImage})]})}})})})}),cn=dn,mn=e(2831),xe=e(52688),en=e(86125),vn=e(44349);function fn(h){var X,k=(0,t.useState)(),J=y()(k,2),g=J[0],K=J[1];return(0,t.useEffect)(function(){(0,mn.aF)().then(function(E){return K(E.data.info)})},[]),(0,n.jsxs)(D.Z,{children:[(0,n.jsx)(d.Z,{label:"\u5171\u4EAB\u5185\u5B58\u5927\u5C0F - /dev/shm",name:"shmsize",initialValue:"64M",tooltip:"0 \u4E3A\u4F7F\u7528\u9ED8\u8BA464M\uFF0C\u914D\u7F6E\u65F6\u8BF7\u9644\u52A0\u5355\u4F4D\uFF0C\u4F8B\u5982\uFF1A1G"}),(0,n.jsx)(W.Z,{label:"\u6700\u5927Cpu\u914D\u989D",name:"cpus",tooltip:"0 \u4E3A\u4E0D\u9650\u5236",children:(0,n.jsx)(en.Z,{step:.1,max:g==null?void 0:g.NCPU,marks:{0:"0",.5:"0.5\u6838",1:"1\u6838",1.5:"1.5\u6838",2:"2\u6838",4:"4\u6838",6:"6\u6838",8:"8\u6838"}})}),(0,n.jsx)(W.Z,{label:"\u6700\u5927\u5185\u5B58\u914D\u989D",name:"memory",tooltip:"0 \u4E3A\u4E0D\u9650\u5236",children:(0,n.jsx)(en.Z,{step:256,max:Math.round(((X=g==null?void 0:g.MemTotal)!==null&&X!==void 0?X:0)/1024/1024),marks:{0:"0",1024:"1G",2048:"2G",3072:"3G",4096:"4G"}})}),(0,n.jsx)(Ne.Z,{label:"\u65E5\u5FD7\u7C7B\u578B",name:["log","driver"],tooltip:"\u9ED8\u8BA4\u4F7F\u7528 json-file \u9A71\u52A8\u7531 docker \u7EDF\u4E00\u7BA1\u7406\u3002\u91C7\u7528 journal \u65F6\u65E5\u5FD7\u5C06\u6765\u5BBF\u4E3B\u673A\u7BA1\u7406",initialValue:"json-file",valueEnum:{"json-file":"json-file",journald:"journal (\u5BBF\u4E3B\u9700\u8981\u5B89\u88C5journal\u670D\u52A1)"}}),(0,n.jsx)(F.Z,{name:["log"],children:function(p){var T=p.log;if(T.driver=="json-file")return(0,n.jsxs)(de.UW,{children:[(0,n.jsx)(d.Z,{label:"\u65E5\u5FD7\u5207\u5272\u5927\u5C0F",name:["log","maxSize"],placeholder:"\u4F8B\u5982\uFF1A10k,5M",tooltip:"\u9ED8\u8BA4 Docker \u5E76\u4E0D\u4F1A\u81EA\u52A8\u5207\u5272\u65E5\u5FD7"}),(0,n.jsx)(d.Z,{tooltip:"\u9ED8\u8BA4 Docker \u5E76\u4E0D\u4F1A\u81EA\u52A8\u6E05\u7406\u65E5\u5FD7\u6587\u4EF6",label:"\u4FDD\u7559\u65E5\u5FD7\u6587\u4EF6\u6570",name:["log","maxFile"],placeholder:"\u4F8B\u5982\uFF1A10"})]})}}),(0,n.jsx)(vn.Z,{name:"device",label:"\u5173\u8054\u8BBE\u5907",hideCopyButton:!0,showAddButton:!0,items:[{label:"\u5BBF\u4E3B\u673A\u8DEF\u5F84",name:"host",width:"md",placeholder:"\u4F8B\u5982\uFF1A/dev/tty0"},{label:"\u5BB9\u5668\u5185\u8DEF\u5F84",name:"dest",width:"md",placeholder:"\u4F8B\u5982\uFF1A/dev/tty0"}]}),(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(le.Z,{span:4,children:(0,n.jsx)(xe.Z,{label:"\u4F7F\u7528 Gpu",name:["gpus","enable"]})}),(0,n.jsx)(le.Z,{span:20,children:(0,n.jsx)(F.Z,{name:["gpus"],children:function(p){var T=p.gpus;if(T&&T.enable)return(0,n.jsx)(Ne.Z,{mode:"tags",label:"\u8BBE\u5907\u5217\u8868",name:["gpus","device"],placeholder:"\u914D\u7F6E\u4F7F\u7528\u8BBE\u5907id\u6216\u662Fuuid\uFF0C\u4E0D\u586B\u6240\u4E3A\u6240\u6709\u8BBE\u5907"})}})})]}),(0,n.jsx)(F.Z,{name:["gpus"],children:function(p){var T=p.gpus;if(T&&T.enable)return(0,n.jsx)(Ne.Z,{label:"\u8BA1\u7B97\u80FD\u529B",name:["gpus","capabilities"],mode:"multiple",fieldProps:{allowClear:!0},options:[{label:"compute - \u8BA1\u7B97\u80FD\u529B",value:"compute"},{label:"compat32 - \u517C\u5BB932\u4F4D",value:"compat32"},{label:"graphics - \u56FE\u5F62\u5904\u7406\u80FD\u529B",value:"graphics"},{label:"utility - \u76D1\u63A7\u548C\u7BA1\u7406\u80FD\u529B",value:"utility"},{label:"video - \u89C6\u9891\u5904\u7406\u80FD\u529B",value:"video"},{label:"display - \u663E\u793A\u56FE\u5F62\u754C\u9762\u80FD\u529B",value:"display"}]})}})]})}function hn(){return(0,n.jsx)(D.Z,{title:"\u5BB9\u5668\u6807\u7B7E",children:(0,n.jsx)(Le.u,{name:"label",label:"",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u6807\u7B7E"},copyIconProps:!1,min:0,children:(0,n.jsxs)(de.UW,{children:[(0,n.jsx)(d.Z,{width:"md",name:"name",label:"\u540D\u79F0",placeholder:""}),(0,n.jsx)(d.Z,{width:"md",name:"value",label:"\u503C",placeholder:""})]})})})}var _n=e(44771),pn=e(86615),yn="default",Sn="user";function En(h){return(0,n.jsx)(W.Z,{label:h.label,tooltip:h.tooltip,children:(0,n.jsxs)(a.Z.Compact,{block:!0,children:[(0,n.jsx)(pn.Z.Group,{radioType:"button",name:[h.name,"useDefault"],options:[{label:"\u4F7F\u7528\u9ED8\u8BA4",value:!0},{label:"\u81EA\u5B9A\u4E49",value:!1}]}),(0,n.jsx)(F.Z,{name:[h.name],children:function(k){return k[h.name]&&k[h.name].useDefault?(0,n.jsx)(d.Z,{name:[h.name,"default"],disabled:!0,placeholder:"\u672A\u8BBE\u7F6E"}):(0,n.jsx)(d.Z,{name:[h.name,"value"]})}})]})})}var He=En,$e=e(24963);function Cn(){var h=(0,t.useContext)($e.Z),X=h.notice,k=h.lang;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(D.Z,{children:[(0,n.jsx)(_n.Z,{label:"\u91CD\u542F\u7B56\u7565"}),(0,n.jsxs)(de.UW,{children:[(0,n.jsx)(xe.Z,{fieldProps:{onChange:function(g){g&&X.warning(k("app.create.privilegedNotice"))}},name:"privileged",label:"\u8D4B\u4E88\u5BB9\u5668Root\u6743\u9650",initialValue:!1}),(0,n.jsx)(xe.Z,{name:"autoRemove",label:"\u505C\u6B62\u540E\u81EA\u52A8\u5220\u9664",initialValue:!1}),(0,n.jsx)(xe.Z,{fieldProps:{onChange:function(g){g&&X.warning(k("app.create.hostPidNotice"))}},name:"hostPid",label:"\u5173\u8054\u5BBF\u4E3B\u673APid",initialValue:!1})]}),(0,n.jsx)(He,{label:"\u5DE5\u4F5C\u76EE\u5F55",tooltip:"\u9ED8\u8BA4\u4F7F\u7528\u955C\u50CF\u4E2D\u6307\u5B9A\u7684\u5DE5\u4F5C\u76EE\u5F55",name:"workDir"}),(0,n.jsx)(He,{label:"User",tooltip:"\u5728\u5BB9\u5668\u4E2D\u8FD0\u884C\u547D\u4EE4\u7684\u7528\u6237",name:"user"}),(0,n.jsx)(He,{label:"Command",tooltip:"\u542F\u52A8\u5BB9\u5668\u65F6\u8FD0\u884C\u7684\u547D\u4EE4\uFF0C\u4EE5\u7A7A\u683C\u5206\u9694",name:"command"}),(0,n.jsx)(He,{label:"Entrypoint",tooltip:"\u65E0\u6CD5\u8986\u76D6\u955C\u50CF\u4E2D\u5DF2\u7ECF\u6307\u5B9A\u7684 Entrypoint \u547D\u4EE4",name:"entrypoint"})]})})}var gn=e(91845),nn=e(62597),tn=e(82346),jn=e(46442),Pn=(0,t.forwardRef)(function(h,X){var k=(0,t.useContext)($e.Z),J=k.notice,g=(0,t.useRef)(),K=(0,t.useRef)();(0,t.useImperativeHandle)(X,function(){return{}});var E=function(T){var O,m,C=!1,q=(O=(m=g.current)===null||m===void 0?void 0:m.getList())!==null&&O!==void 0?O:[];if(q.map(function(H){H.name==T.name&&(C=!0)}),!C){var U;(U=g.current)===null||U===void 0||U.add(T)}};return(0,n.jsxs)(D.Z,{title:"\u5173\u8054\u7F51\u7EDC",headerBordered:!0,extra:(0,n.jsx)(a.Z,{children:h.showUseBridgeNetwork&&(0,n.jsx)(xe.Z,{name:"useBridgeNetwork",fieldProps:{checkedChildren:"\u5173\u8054 Bridge \u7F51\u7EDC",unCheckedChildren:"\u5173\u8054 Bridge \u7F51\u7EDC"}},"useBridgeNetwork")}),children:[(0,n.jsx)(Le.u,{name:"network",actionRef:g,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u7F51\u7EDC"},actionGuard:{beforeAddRow:function(T,O){var m;return!h.siteName||h.siteName==""||typeof h.siteName=="undefined"?(J.error("\u8BF7\u8F93\u5165\u7AD9\u70B9\u6807\u8BC6"),!1):((m=K.current)===null||m===void 0||m.show(),!1)}},copyIconProps:!1,min:0,itemRender:function(T,O){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(de.UW,{children:[(0,n.jsx)(d.Z,{label:"\u7F51\u7EDC\u540D\u79F0",name:"name",width:"md",disabled:!0,fieldProps:{value:O.record.name}}),(0,n.jsx)(W.Z,{label:"\u8BBF\u95EEHostname",name:"alise",children:O.record.alise!=""&&(0,n.jsx)(f.Z.Text,{code:!0,copyable:!0,children:O.record.alise})}),(0,n.jsx)(W.Z,{label:" ",children:T.action})]}),(0,n.jsx)(de.UW,{children:(0,n.jsx)(d.Z,{label:"\u6307\u5B9AIpV4",name:"ipV4",width:"md",disabled:O.record.name=="bridge",fieldProps:{addonAfter:O.record.subnet}})})]})}}),(0,n.jsx)(jn.Z,{ref:K,onSelect:function(T){E({name:T.Name,alise:[""],subnet:T.IPAM.Config[0].Subnet})}})]})}),xn=Pn,Fn=(0,t.forwardRef)(function(h,X){var k=(0,t.useState)(""),J=y()(k,2),g=J[0],K=J[1],E=(0,t.useRef)(),p=(0,t.useContext)(u.Z),T=p.createFormRef;return(0,t.useImperativeHandle)(X,function(){return{setExposePort:function(m){if(m){var C,q,U=(C=(q=E.current)===null||q===void 0?void 0:q.getList())!==null&&C!==void 0?C:[];Object.keys(m).map(function(H){var j=!1;if(U.map(function(me){me.dest==H&&(j=!0)}),!j){var ne;(ne=E.current)===null||ne===void 0||ne.add({host:"",dest:H})}})}},setHostname:function(m){K(m)},addPortItem:function(m,C){var q,U=(q=E.current)===null||q===void 0?void 0:q.getList(),H=!1;if(U==null||U.map(function(ne){if(ne.host==m){H=!0;return}}),!H){var j;(j=E.current)===null||j===void 0||j.add({host:String(m),dest:String(C)})}}}}),(0,n.jsx)(D.Z,{title:"\u7ED1\u5B9A\u7AEF\u53E3",tooltip:"\u8BBF\u95EE\u7AEF\u53E3\u7559\u7A7A\u65F6\u968F\u673A\u751F\u6210\u7AEF\u53E3\uFF0C\u5168\u90E8\u5220\u9664\u5219\u8868\u793A\u4E0D\u66B4\u9732\u7AEF\u53E3",headerBordered:!0,extra:(0,n.jsxs)(a.Z,{children:[h.showBindHost&&(0,n.jsx)(xe.Z,{name:"useHostNetwork",fieldProps:{checkedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",unCheckedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",onChange:function(m){if(m){var C;(C=T.current)===null||C===void 0||C.setFieldsValue({bindIpV6:!1,publishAllPorts:!1})}}}}),h.showBindIpV6&&(0,n.jsx)(F.Z,{name:["siteName","useHostNetwork"],children:function(m){var C=m.useHostNetwork;return(0,n.jsx)(xe.Z,{name:"publishAllPorts",fieldProps:{checkedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3",unCheckedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3"},disabled:C},"publishAllPorts")}}),h.showBindIpV6&&(0,n.jsx)(F.Z,{name:["siteName","useHostNetwork"],children:function(m){var C=m.useHostNetwork;return(0,n.jsx)(xe.Z,{name:"bindIpV6",fieldProps:{checkedChildren:"IpV6",unCheckedChildren:"IpV6"},disabled:C},"bindIpV6")}})]}),children:(0,n.jsx)(F.Z,{name:["useHostNetwork","bindIpV6","publishAllPorts"],children:function(m){var C=m.useHostNetwork,q=m.bindIpV6,U=m.publishAllPorts;if(!C&&!U)return(0,n.jsx)(Le.u,{name:"ports",actionRef:E,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BF9\u5916\u90E8\u8BBF\u95EE"},min:0,copyIconProps:!1,children:(0,n.jsxs)(de.UW,{children:[(0,n.jsx)(d.Z,{width:h.showInDrawer?"sm":"md",name:"host",label:"\u5916\u90E8\u8BBF\u95EE\u7AEF\u53E3",tooltip:"\u5BF9\u5916\u8BBF\u95EE\u53EF\u4EE5\u901A\u8FC7\u6DFB\u52A0\u8BBF\u95EE\u7AEF\u53E3\u6216\u662F\u521B\u5EFA\u5B8C\u6210\u540E\u5BF9\u5BB9\u5668\u7ED1\u5B9A\u57DF\u540D",placeholder:"\u7559\u7A7A\u5C06\u4F7F\u7528\u968F\u673A\u7AEF\u53E3\uFF0C\u7ED1\u5B9AIpV6\u5FC5\u586B",required:q,rules:[{required:q}]}),(0,n.jsx)(d.Z,{label:"\u5BB9\u5668\u5185\u7AEF\u53E3",width:h.showInDrawer?"sm":"md",name:"dest",placeholder:"\u6784\u5EFA\u65F6 Expose \u6307\u5B9A\u7684\u7AEF\u53E3",required:!0,rules:[{required:!0}]})]})})}})})}),Bn=Fn,Ue=e(52255);function Dn(){var h=(0,t.useRef)(),X=function(g){var K,E,p=!1,T=(K=(E=h.current)===null||E===void 0?void 0:E.getList())!==null&&K!==void 0?K:[];if(T.map(function(m){m.name==g.name&&(p=!0)}),!p){var O;(O=h.current)===null||O===void 0||O.add(g)}},k=function(g){var K,E,p=!1,T=(K=(E=h.current)===null||E===void 0?void 0:E.getList())!==null&&K!==void 0?K:[];T.map(function(O,m){if(O.name==g){var C;(C=h.current)===null||C===void 0||C.remove(m)}})};return(0,n.jsx)(D.Z,{title:"\u5173\u8054\u5BBF\u4E3B\u673A\u7F51\u7EDC\u5185\u4E3B\u673A",tooltip:"\u5BB9\u5668\u5185\u5982\u679C\u9700\u8981\u8BF7\u6C42\u5BBF\u4E3B\u673A\u6240\u5728\u7684\u7F51\u7EDC\u4E2D\u7684\u4E3B\u673A\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6B64\u914D\u7F6E\u5C06Ip\u6CE8\u5165\u5230\u5BB9\u5668\u4E2D",extra:(0,n.jsx)(a.Z,{children:(0,n.jsx)(xe.Z,{name:"enableBindHost",fieldProps:{checkedChildren:"\u7ED1\u5B9A\u5BBF\u4E3B\u673AIp",unCheckedChildren:"\u7ED1\u5B9A\u5BBF\u4E3B\u673AIp",onChange:function(g){g?X({name:"host.dpanel.local",value:"host-gateway"}):k("host.dpanel.local")}}})}),children:(0,n.jsx)(Le.u,{name:"extraHosts",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BBF\u4E3B\u673A\u7F51\u7EDC\u5173\u8054"},actionRef:h,copyIconProps:!1,min:0,children:(0,n.jsxs)(de.UW,{children:[(0,n.jsx)(d.Z,{width:"md",name:"name",label:"Hostname",placeholder:""}),(0,n.jsx)(d.Z,{width:"md",name:"value",label:"ip",placeholder:""})]})})})}var Ye=e(90672),An=(0,t.forwardRef)(function(h,X){return(0,t.useImperativeHandle)(X,function(){return{}}),(0,n.jsxs)(D.Z,{title:"\u7F51\u7EDC\u914D\u7F6E",children:[(0,n.jsxs)(de.UW,{children:[(0,n.jsx)(d.Z,{label:"\u914D\u7F6E ipV4 \u5730\u5740",name:["ipV4","address"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u5730\u5740\uFF0C\u4F8B\u5982 192.168.1.5",placeholder:"192.168.1.5"}),(0,n.jsx)(F.Z,{name:["ipV4"],children:function(J){var g=J.ipV4;return(0,n.jsx)(d.Z,{label:"\u914D\u7F6E ipV4 \u5B50\u7F51",name:["ipV4","subnet"],width:"md",required:g&&g.address,tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u6240\u5728\u7684\u5B50\u7F51\uFF0C\u4F8B\u5982 192.168.1.0/24",placeholder:"192.168.1.0/24",rules:[{required:g&&g.address}]})}}),(0,n.jsx)(d.Z,{label:"\u914D\u7F6E ipV4 \u7F51\u5173",name:["ipV4","gateway"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u7684\u7F51\u5173\uFF0C\u4F8B\u5982 192.168.1.1",placeholder:"192.168.1.1"}),(0,n.jsx)(xe.Z,{label:"\u81EA\u5B9A\u4E49ipV6",name:"enableIpV6Address"})]}),(0,n.jsx)(F.Z,{name:["enableIpV6Address"],children:function(J){var g=J.enableIpV6Address;if(g)return(0,n.jsxs)(de.UW,{children:[(0,n.jsx)(d.Z,{label:"\u914D\u7F6E ipV6 \u5730\u5740",name:["ipV6","address"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipV6\u5730\u5740\uFF0C\u4F8B\u5982 2001:db8::5",placeholder:"2001:db8::5"}),(0,n.jsx)(F.Z,{name:["ipV6"],children:function(E){var p=E.ipV6;return(0,n.jsx)(d.Z,{label:"\u914D\u7F6E ipV6 \u5B50\u7F51",name:["ipV6","subnet"],width:"md",required:p&&p.address,tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u6240\u5728\u7684\u5B50\u7F51\uFF0C\u4F8B\u5982 2001:db8::/48",placeholder:"2001:db8::/48",rules:[{required:p&&p.address}]})}}),(0,n.jsx)(d.Z,{label:"\u914D\u7F6E ipV6 \u7F51\u5173",name:["ipV6","gateway"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipV6\u7684\u7F51\u5173\uFF0C\u4F8B\u5982 2001:db8::1",placeholder:"2001:db8::1"})]})}}),(0,n.jsx)(Ye.Z,{label:"DNS\u914D\u7F6E",name:"dns",placeholder:"\u8BF7\u6307\u5B9Adns\u5730\u5740\uFF0C\u4F8B\u5982\uFF1A8.8.8.8\uFF0C\u4E00\u884C\u6DFB\u4E00\u6761dns\u5730\u5740"})]})}),In=An,ze=e(31199),On=e(86250);function bn(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(D.Z,{title:"\u9644\u52A0\u6267\u884C\u811A\u672C",headerBordered:!0,subTitle:"",children:(0,n.jsx)(Ye.Z,{label:"\u5BB9\u5668\u521B\u5EFA\u540E\u6267\u884C\u811A\u672C",name:["hook","containerCreate"],placeholder:"\u5BB9\u5668\u5728\u521B\u5EFA\u540E\u6267\u884C\u7684\u811A\u672C\uFF0C\u6B64\u811A\u672C\u5E76\u4E0D\u4F1A\u5F71\u54CD entrypoint \u53CA command\u3002\u4F8B\u5982\uFF1Als -al && touch abc.txt && apt update"})}),(0,n.jsxs)(D.Z,{title:"\u5065\u5EB7\u68C0\u67E5",headerBordered:!0,children:[(0,n.jsxs)(On.Z,{gap:20,justify:"start",children:[(0,n.jsx)(ze.Z,{label:"\u91CD\u590D\u95F4\u9694\u65F6\u95F4\uFF08\u79D2\uFF09",name:["healthcheck","interval"],initialValue:30}),(0,n.jsx)(ze.Z,{label:"\u8D85\u65F6\u5931\u8D25\u65F6\u95F4\uFF08\u79D2\uFF09",name:["healthcheck","timeout"],initialValue:10}),(0,n.jsx)(ze.Z,{label:"\u5931\u8D25\u91CD\u590D\u6B21\u6570",name:["healthcheck","retries"],initialValue:3}),(0,n.jsx)(Ne.Z,{width:"sm",label:"\u811A\u672C\u6267\u884C\u73AF\u5883",initialValue:"CMD",name:["healthcheck","shellType"],valueEnum:{CMD:"\u5728 Docker \u73AF\u5883\u6267\u884C","CMD-SHELL":"\u5728\u5BB9\u5668\u5185\u6267\u884C"}})]}),(0,n.jsx)(Ye.Z,{label:"\u6267\u884C\u811A\u672C",name:["healthcheck","cmd"],placeholder:"\u914D\u7F6E\u5BB9\u5668\u5065\u5EB7\u68C0\u67E5\u811A\u672C\uFF0C\u4F8B\u5982\uFF1Acurl -f http://localhost:8080/ || exit 1"})]})]})}var Mn=e(74763),an=e(2487),Zn=[{name:"ALL"},{name:"AUDIT_CONTROL"},{name:"AUDIT_WRITE",default:!0},{name:"BLOCK_SUSPEND"},{name:"CHOWN",default:!0},{name:"DAC_OVERRIDE",default:!0},{name:"DAC_READ_SEARCH"},{name:"FOWNER",default:!0},{name:"FSETID",default:!0},{name:"IPC_LOCK"},{name:"IPC_OWNER"},{name:"KILL",default:!0},{name:"LEASE"},{name:"LINUX_IMMUTABLE"},{name:"MAC_ADMIN"},{name:"MAC_OVERRIDE"},{name:"MKNOD",default:!0},{name:"NET_ADMIN"},{name:"NET_BIND_SERVICE",default:!0},{name:"NET_BROADCAST"},{name:"NET_RAW",default:!0},{name:"SETFCAP",default:!0},{name:"SETGID",default:!0},{name:"SETPCAP",default:!0},{name:"SETUID",default:!0},{name:"SYSLOG"},{name:"SYS_ADMIN"},{name:"SYS_BOOT"},{name:"SYS_CHROOT",default:!0},{name:"SYS_MODULE"},{name:"SYS_NICE"},{name:"SYS_PACCT"},{name:"SYS_PTRACE"},{name:"SYS_RAWIO"},{name:"SYS_RESOURCE"},{name:"SYS_TIME"},{name:"SYS_TTY_CONFIG"}],Rn=(0,t.forwardRef)(function(h,X){var k=(0,t.useContext)($e.Z),J=k.lang,g=(0,t.useState)(null),K=y()(g,2),E=K[0],p=K[1],T=(0,t.useContext)(u.Z),O=T.createFormRef;return(0,t.useImperativeHandle)(X,function(){return{}}),(0,n.jsx)(D.Z,{children:(0,n.jsx)(an.Z,{grid:{gutter:10,xs:3,sm:3,md:4,lg:4,xl:4,xxl:6},dataSource:Zn,renderItem:function(C,q){var U;return(0,n.jsx)(an.Z.Item,{children:(0,n.jsx)(xe.Z,{fieldProps:{onChange:function(j){C.name=="ALL"&&p(j)}},disabled:C.name!="ALL"&&((0,Mn.k)(E)?(U=O.current)===null||U===void 0?void 0:U.getFieldValue(["capAdd","ALL"]):E),initialValue:C.default,name:["capAdd",C.name],tooltip:J("app.create.cap."+C.name.toLocaleLowerCase()),label:C.name})},q)}})})}),Tn=Rn,Ve="update",un="copy",Xe="new";function wn(){var h,X,k,J=(0,t.useContext)($e.Z),g=J.loading,K=J.notice,E=(0,t.useContext)(u.Z),p=E.createFormRef,T=E.volumeListRef,O=E.domainRef,m=E.createEnvRef,C=E.createLinkRef,q=(0,t.useState)(Xe),U=y()(q,2),H=U[0],j=U[1],ne=(0,tn.useSearchParams)(),me=y()(ne,2),se=me[0],re=me[1],fe=(0,tn.useNavigate)(),je=(0,t.useState)("basic"),Fe=y()(je,2),he=Fe[0],Pe=Fe[1],Ie=parseInt((h=se.get("id"))!==null&&h!==void 0?h:""),Oe=(X=se.get("containerId"))!==null&&X!==void 0?X:"",ke=(k=se.get("imageId"))!==null&&k!==void 0?k:"";return(0,t.useEffect)(function(){if(Oe||Ie)g.show(),(0,nn.iE)({md5:Oe,id:Ie}).then(function(){var i=x()(l()().mark(function ie(r){var Re,Te,ae,we,Ge,De,Ke,Je,Qe;return l()().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:if(ae={info:{},layer:[]},!r.data.env.imageName){Ae.next=11;break}return Ae.prev=2,Ae.next=5,(0,b.YU)({md5:r.data.env.imageName});case 5:we=Ae.sent,ae=we.data,Ae.next=11;break;case 9:Ae.prev=9,Ae.t0=Ae.catch(2);case 11:se.get("op")==un?j(un):j(Ve),r.data.env.network&&r.data.env.network.map(function(ue){return!ue.alise&&ue.name!="bridge"&&(ue.alise=[r.data.siteName+".pod.dpanel.local"]),ue}),r.data.env.ports&&r.data.env.ports.map(function(ue){return ue.host=="0"&&(ue.host=""),ue}),Ge=r.data.env.bindIpV6,r.data.containerInfo.Info&&r.data.containerInfo.Info.NetworkSettings.Networks&&Object.keys(r.data.containerInfo.Info.NetworkSettings.Networks).map(function(ue){if(r.data.env.network&&(r.data.env.network=r.data.env.network.map(function(qe){return ue==qe.name&&(qe.subnet=r.data.containerInfo.Info.NetworkSettings.Networks[ue].IPAddress+"/"+r.data.containerInfo.Info.NetworkSettings.Networks[ue].IPPrefixLen),qe})),r.data.containerInfo.Info.NetworkSettings.Networks[ue].IPv6Gateway!=""&&(Ge=!0),ue=="bridge"){var We;(We=p.current)===null||We===void 0||We.setFieldValue("useBridgeNetwork",!0)}}),r.data.env.extraHosts&&r.data.env.extraHosts.map(function(ue){if(ue.value=="host-gateway"){var We;(We=p.current)===null||We===void 0||We.setFieldValue("enableBindHost",!0)}}),De=r.data.env.ports,r.data.env.ports&&(De=r.data.env.ports.map(function(ue){return ue.host=(ue.hostIp?ue.hostIp+":":"")+ue.host,ue})),(Re=p.current)===null||Re===void 0||Re.setFieldsValue({imageName:r.data.env.imageName,privileged:r.data.env.privileged,bindIpV6:r.data.env.useHostNetwork?!1:Ge,useHostNetwork:r.data.env.useHostNetwork,publishAllPorts:r.data.env.useHostNetwork?!1:r.data.env.publishAllPorts,workDir:{value:r.data.env.workDir,useDefault:!r.data.env.workDir,default:ae&&ae.info.Config&&ae.info.Config.WorkingDir},user:{value:r.data.env.user,useDefault:!r.data.env.user,default:ae&&ae.info.Config&&ae.info.Config.User},command:{value:r.data.env.command,useDefault:!r.data.env.command,default:ae&&ae.info.Config&&ae.info.Config.Cmd&&ae.info.Config.Cmd.join(" ")},entrypoint:{value:r.data.env.entrypoint,useDefault:!r.data.env.entrypoint,default:ae&&ae.info.Config&&ae.info.Config.Entrypoint&&ae.info.Config.Entrypoint.join(" ")},shmsize:(Te=r.data.env.shmsize)!==null&&Te!==void 0?Te:"64M",cpus:r.data.env.cpus,memory:r.data.env.memory,environment:r.data.env.environment,label:r.data.env.label,volumes:r.data.env.volumes,ports:De,links:r.data.env.links,network:r.data.env.network,restart:r.data.env.restart,extraHosts:r.data.env.extraHosts,autoRemove:r.data.env.autoRemove,log:r.data.env.log,dns:r.data.env.dns&&r.data.env.dns.join(`
`),ipV4:r.data.env.ipV4,ipV6:r.data.env.ipV6,gpus:r.data.env.gpus,device:r.data.env.device,hook:r.data.env.hook,hostPid:r.data.env.hostPid,capAdd:r.data.env.capAdd&&Object.fromEntries(r.data.env.capAdd.map(function(ue){return[ue,!0]}))}),r.data.env.ipV6&&((Ke=p.current)===null||Ke===void 0||Ke.setFieldValue("enableIpV6Address",!0)),r.data.env.healthcheck&&r.data.env.healthcheck.cmd&&r.data.env.healthcheck.cmd!=""&&((Je=p.current)===null||Je===void 0||Je.setFieldsValue({healthcheck:r.data.env.healthcheck})),se.get("op")==Ve&&((Qe=p.current)===null||Qe===void 0||Qe.setFieldsValue({siteTitle:r.data.siteTitle,siteName:r.data.siteName}));case 23:case"end":return Ae.stop()}},ie,null,[[2,9]])}));return function(ie){return i.apply(this,arguments)}}()).finally(function(){g.destroy()});else{var Be,te;j(Xe),(Be=p.current)===null||Be===void 0||Be.resetFields(),(te=p.current)===null||te===void 0||te.setFieldValue("useBridgeNetwork",!0)}},[se]),(0,n.jsx)(A._z,{children:(0,n.jsx)(D.Z,{direction:"column",gutter:[0,10],children:(0,n.jsxs)(v.A,{submitter:{render:function(te,i){return(0,n.jsx)(P.S,{children:i})}},formRef:p,onFinish:function(){var Be=x()(l()().mark(function te(i){var ie,r,Re,Te,ae,we;return l()().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:if(we={siteTitle:i.siteTitle,siteName:i.siteName,imageName:i.imageName,environment:i.environment,links:i.links,ports:i.ports,volumes:i.volumes,network:(ie=i.network)!==null&&ie!==void 0?ie:[],privileged:(r=i.privileged)!==null&&r!==void 0?r:!1,autoRemove:(Re=i.autoRemove)!==null&&Re!==void 0?Re:!1,restart:i.restart,cpus:i.cpus,memory:i.memory,shmsize:(Te=i.shmsize)!==null&&Te!==void 0?Te:0,workDir:i.workDir&&!i.workDir.useDefault?i.workDir.value:"",user:i.user&&!i.user.useDefault?i.user.value:"",command:i.command&&!i.command.useDefault?i.command.value:"",entrypoint:i.entrypoint&&!i.entrypoint.useDefault?i.entrypoint.value:"",useHostNetwork:i.useHostNetwork,bindIpV6:i.bindIpV6,log:i.log,dns:i.dns&&i.dns!=""?i.dns.split(`
`):[],label:i.label,publishAllPorts:i.publishAllPorts,extraHosts:i.extraHosts,ipV4:i.ipV4,ipV6:i.ipV6,device:i.device,gpus:i.gpus,hook:i.hook,hostPid:i.hostPid,capAdd:i.capAdd?Object.keys(i.capAdd).map(function(Ke){return Ke}):[],useBridgeNetwork:(ae=i.useBridgeNetwork)!==null&&ae!==void 0?ae:!0},!(!i.useBridgeNetwork&&!i.useHostNetwork&&(!i.network||i.network.length==0))){De.next=4;break}return K.error("\u4E0D\u52A0\u5165 Bridge \u7F51\u7EDC\u65F6\uFF0C\u5FC5\u987B\u6307\u5B9A\u4E00\u4E2A\u81EA\u5B9A\u4E49\u7F51\u7EDC"),De.abrupt("return",!1);case 4:return i.useBridgeNetwork&&we.network.push({name:"bridge",alise:[],ipV4:""}),i.healthcheck&&i.healthcheck.cmd&&i.healthcheck.cmd!=""&&(we.healthcheck=i.healthcheck),Oe&&H==Ve&&(we.containerId=Oe),De.next=9,(0,nn.$G)(we);case 9:return fe("/app/list"),De.abrupt("return",!0);case 11:case"end":return De.stop()}},te)}));return function(te){return Be.apply(this,arguments)}}(),children:[(0,n.jsxs)(D.Z,{title:"\u57FA\u7840\u4FE1\u606F",headerBordered:!0,children:[(0,n.jsx)(d.Z,{name:"siteTitle",label:"\u5BB9\u5668\u63CF\u8FF0",fieldProps:{onChange:function(te){var i="";if(te.target.value&&H!=Ve){var ie,r=(0,gn.N9)(te.target.value.trim(),{toneType:"none",type:"array"});i=r.join(""),(ie=p.current)===null||ie===void 0||ie.setFieldValue("siteName",i)}}},placeholder:"\u8BF7\u8F93\u5165\u5BB9\u5668\u63CF\u8FF0\u540D\u79F0"}),(0,n.jsx)(d.Z,{name:"siteName",label:"\u5BB9\u5668\u6807\u8BC6",tooltip:"\u5BB9\u5668\u552F\u4E00\u6807\u8BC6\uFF0C\u7528\u4E8E\u6807\u8BC6\u5BB9\u5668\u548C\u5185\u90E8\u8BBF\u95EE",required:!0,disabled:H==Ve,rules:[{required:!0}],placeholder:"\u8BF7\u8F93\u5165\u5BB9\u5668\u6807\u8BC6\u540D\u79F0"}),(0,n.jsx)(ye,{redeploy:H!=Xe,fromImageId:ke})]}),(0,n.jsx)(V.Z,{offsetTop:50,children:(0,n.jsx)(D.Z,{style:{marginBottom:-20},children:(0,n.jsx)(o.Z,{activeKey:he,onChange:function(te){Pe(te),window.scrollTo(0,450)},items:[{label:"\u57FA\u672C\u914D\u7F6E",key:"basic"},{label:"\u5173\u8054\u914D\u7F6E",key:"link"},{label:"\u8FD0\u884C\u914D\u7F6E",key:"run-command"},{label:"\u8D44\u6E90\u914D\u7F6E",key:"resource"},{label:"Hook",key:"hook"},{label:"\u80FD\u529B\u914D\u7F6E",key:"cap"},{label:"\u5176\u5B83",key:"other"}]})})}),(0,n.jsxs)(Ue.Z,{show:he=="basic",children:[(0,n.jsx)(Bn,{ref:O,showBindHost:!0,showBindIpV6:!0}),(0,n.jsx)(on.Z,{showAddButton:!0,showImportButton:!0,showCodeMode:!0,label:"\u73AF\u5883\u53D8\u91CF",ref:m}),(0,n.jsx)(cn,{showDefault:!0,ref:T}),(0,n.jsx)(F.Z,{name:["siteName","useHostNetwork"],children:function(te){var i=te.siteName,ie=te.useHostNetwork;if(!ie)return(0,n.jsx)(In,{})}})]}),(0,n.jsx)(Ue.Z,{show:he=="link",children:(0,n.jsx)(F.Z,{name:["siteName","useHostNetwork"],children:function(te){var i=te.siteName,ie=te.useHostNetwork;return ie?(0,n.jsx)(S.Z,{showIcon:!0,description:"\u7ED1\u5B9A\u5230\u5BBF\u4E3B\u673A\u7F51\u7EDC\u65F6\uFF0C\u65E0\u6CD5\u901A\u8FC7 Docker \u5173\u8054\u5176\u5B83\u5BB9\u5668\u3002\u8BF7\u4F7F\u7528\u5BBF\u4E3B\u673A\u5185\u7F51IP\u6216\u662F127.0.0.1\u4E92\u8054\u5BB9\u5668\u66B4\u9732\u7AEF\u53E3\u3002"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(sn,{onAddEnv:function(Re,Te){var ae;(ae=m.current)===null||ae===void 0||ae.addEnvItem(Re,Te)},ref:C}),(0,n.jsx)(xn,{showUseBridgeNetwork:!0,siteName:i}),(0,n.jsx)(Dn,{})]})}})}),(0,n.jsx)(Ue.Z,{show:he=="run-command",children:(0,n.jsx)(Cn,{})}),(0,n.jsx)(Ue.Z,{show:he=="resource",children:(0,n.jsx)(fn,{})}),(0,n.jsx)(Ue.Z,{show:he=="hook",children:(0,n.jsx)(bn,{})}),(0,n.jsx)(Ue.Z,{show:he=="other",children:(0,n.jsx)(hn,{})}),(0,n.jsx)(Ue.Z,{show:he=="cap",children:(0,n.jsx)(Tn,{})})]},"form")})})}},2831:function(ve,$,e){e.d($,{Ll:function(){return P},aF:function(){return y},d6:function(){return F},u5:function(){return D}});var w=e(15009),l=e.n(w),G=e(99289),x=e.n(G),Z=e(82346);function y(){return A.apply(this,arguments)}function A(){return A=x()(l()().mark(function o(){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Z.request)("/api/common/home/info",{method:"POST"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},o)})),A.apply(this,arguments)}function D(){return v.apply(this,arguments)}function v(){return v=x()(l()().mark(function o(){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Z.request)("/api/common/home/check-new-version",{method:"POST"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},o)})),v.apply(this,arguments)}function P(){return d.apply(this,arguments)}function d(){return d=x()(l()().mark(function o(){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Z.request)("/api/common/home/usage",{method:"POST"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},o)})),d.apply(this,arguments)}function F(){return V.apply(this,arguments)}function V(){return V=x()(l()().mark(function o(){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Z.request)("/api/common/home/upgrade-script",{method:"POST"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},o)})),V.apply(this,arguments)}},14946:function(ve,$,e){e.d($,{CI:function(){return P},HY:function(){return Q},IS:function(){return y},XY:function(){return o},_3:function(){return N},_x:function(){return F},jR:function(){return D},t9:function(){return t}});var w=e(15009),l=e.n(w),G=e(99289),x=e.n(G),Z=e(82346);function y(_){return A.apply(this,arguments)}function A(){return A=x()(l()().mark(function _(f){return l()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,Z.request)("/api/app/network/get-detail",{method:"POST",data:f}));case 1:case"end":return c.stop()}},_)})),A.apply(this,arguments)}function D(_){return v.apply(this,arguments)}function v(){return v=x()(l()().mark(function _(f){return l()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,Z.request)("/api/app/network/get-list",{method:"POST",data:f}));case 1:case"end":return c.stop()}},_)})),v.apply(this,arguments)}function P(){return d.apply(this,arguments)}function d(){return d=x()(l()().mark(function _(){return l()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,(0,Z.request)("/api/app/network/prune",{method:"POST"});case 2:return z.abrupt("return",z.sent);case 3:case"end":return z.stop()}},_)})),d.apply(this,arguments)}function F(_){return V.apply(this,arguments)}function V(){return V=x()(l()().mark(function _(f){return l()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,Z.request)("/api/app/network/delete",{method:"POST",data:f});case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},_)})),V.apply(this,arguments)}function o(_){return S.apply(this,arguments)}function S(){return S=x()(l()().mark(function _(f){return l()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,Z.request)("/api/app/network/create",{method:"POST",data:f});case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},_)})),S.apply(this,arguments)}function t(_){return u.apply(this,arguments)}function u(){return u=x()(l()().mark(function _(f){return l()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,Z.request)("/api/app/network/disconnect",{method:"POST",data:f});case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},_)})),u.apply(this,arguments)}function Q(_){return W.apply(this,arguments)}function W(){return W=x()(l()().mark(function _(f){return l()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,Z.request)("/api/app/network/connect",{method:"POST",data:f});case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},_)})),W.apply(this,arguments)}function N(_){return a.apply(this,arguments)}function a(){return a=x()(l()().mark(function _(f){return l()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,Z.request)("/api/app/network/get-container-list",{method:"POST",data:f}));case 1:case"end":return c.stop()}},_)})),a.apply(this,arguments)}},86250:function(ve,$,e){e.d($,{Z:function(){return le}});var w=e(67294),l=e(93967),G=e.n(l),x=e(98423),Z=e(98065),y=e(53124),A=e(83559),D=e(83262);const v=["wrap","nowrap","wrap-reverse"],P=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],d=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],F=(s,b)=>{const R=b.wrap===!0?"wrap":b.wrap;return{[`${s}-wrap-${R}`]:R&&v.includes(R)}},V=(s,b)=>{const R={};return d.forEach(I=>{R[`${s}-align-${I}`]=b.align===I}),R[`${s}-align-stretch`]=!b.align&&!!b.vertical,R},o=(s,b)=>{const R={};return P.forEach(I=>{R[`${s}-justify-${I}`]=b.justify===I}),R};function S(s,b){return G()(Object.assign(Object.assign(Object.assign({},F(s,b)),V(s,b)),o(s,b)))}var t=S;const u=s=>{const{componentCls:b}=s;return{[b]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},Q=s=>{const{componentCls:b}=s;return{[b]:{"&-gap-small":{gap:s.flexGapSM},"&-gap-middle":{gap:s.flexGap},"&-gap-large":{gap:s.flexGapLG}}}},W=s=>{const{componentCls:b}=s,R={};return v.forEach(I=>{R[`${b}-wrap-${I}`]={flexWrap:I}}),R},N=s=>{const{componentCls:b}=s,R={};return d.forEach(I=>{R[`${b}-align-${I}`]={alignItems:I}}),R},a=s=>{const{componentCls:b}=s,R={};return P.forEach(I=>{R[`${b}-justify-${I}`]={justifyContent:I}}),R},_=()=>({});var f=(0,A.I$)("Flex",s=>{const{paddingXS:b,padding:R,paddingLG:I}=s,L=(0,D.IX)(s,{flexGapSM:b,flexGap:R,flexGapLG:I});return[u(L),Q(L),W(L),N(L),a(L)]},_,{resetStyle:!1}),z=function(s,b){var R={};for(var I in s)Object.prototype.hasOwnProperty.call(s,I)&&b.indexOf(I)<0&&(R[I]=s[I]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var L=0,I=Object.getOwnPropertySymbols(s);L<I.length;L++)b.indexOf(I[L])<0&&Object.prototype.propertyIsEnumerable.call(s,I[L])&&(R[I[L]]=s[I[L]]);return R},le=w.forwardRef((s,b)=>{const{prefixCls:R,rootClassName:I,className:L,style:M,flex:Y,gap:B,children:ee,vertical:ce=!1,component:_e="div"}=s,pe=z(s,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:oe,direction:Ee,getPrefixCls:Ce}=w.useContext(y.E_),ge=Ce("flex",R),[n,ye,Se]=f(ge),be=ce!=null?ce:oe==null?void 0:oe.vertical,de=G()(L,I,oe==null?void 0:oe.className,ge,ye,Se,t(ge,s),{[`${ge}-rtl`]:Ee==="rtl",[`${ge}-gap-${B}`]:(0,Z.n)(B),[`${ge}-vertical`]:be}),Me=Object.assign(Object.assign({},oe==null?void 0:oe.style),M);return Y&&(Me.flex=Y),B&&!(0,Z.n)(B)&&(Me.gap=B),n(w.createElement(_e,Object.assign({ref:b,className:de,style:Me},(0,x.Z)(pe,["justify","wrap","align"])),ee))})}}]);
