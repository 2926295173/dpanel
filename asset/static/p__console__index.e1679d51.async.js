"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3805],{49610:function(R,O,e){var D=e(67294),a=e(54964),M=e(52626),u=e(12320),i=e.n(u),T=e(78267),f=e.n(T),g=e(85893),o,d=new u.Terminal(a.a),m=new T.FitAddon,h,_=(0,D.forwardRef)(function(C,l){var P=function(){d.reset(),m.fit(),d.focus(),h&&h.dispose(),o&&(o.close(),o=null)};return(0,D.useImperativeHandle)(l,function(){return{start:function(A,c){var W="console:"+A,y=c?Object.keys(c).map(function(v){if(c&&c[v])return"".concat(v,"=").concat(c[v])}):[];P(),o=new WebSocket((0,M.R)("/console/"+A+"?"+y.join("&"))),o.addEventListener("message",function(v){var p=JSON.parse(v.data),t=p.type;if(t==W&&(d.write(p.data),p.data.indexOf("exec failed")!=-1)){P();return}}),h=d.onData(function(v){var p={content:{command:v},type:W};o&&o.send(JSON.stringify(p))})},close:function(){P()},fit:function(){m.fit()}}}),(0,D.useEffect)(function(){return d.loadAddon(m),d.open(document.getElementById("terminal-container-console")),m.fit(),function(){P()}},[]),(0,g.jsx)("div",{style:{height:C.showInDrawer?"75vh":"100vh"},id:"terminal-container-console"})});O.Z=_},54964:function(R,O,e){e.d(O,{a:function(){return h}});var D=e(5574),a=e.n(D),M=e(78267),u=e.n(M),i=e(75458),T=e.n(i),f=e(67294),g=e(12320),o=e.n(g),d=e(89629),m=e(85893),h={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,cursorStyle:"block",cursorBlink:!0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},_=new g.Terminal(h),C=new i.SearchAddon,l=new M.FitAddon,P=(0,f.forwardRef)(function(r,A){var c,W=(0,f.useState)(!0),y=a()(W,2),v=y[0],p=y[1];return(0,f.useEffect)(function(){return window.addEventListener("resize",function(){r.showInModal||l.fit()}),r.style&&r.style.fontSize&&(_.options.fontSize=r.style.fontSize),_.loadAddon(l),_.loadAddon(C),_.open(document.getElementById(r.id?r.id:"terminal-container")),r.showInModal||l.fit(),function(){_.reset(),p(!0)}},[]),(0,f.useImperativeHandle)(A,function(){return{write:function(s){v&&(l.fit(),p(!1)),_.write(s)},clear:function(){_.clear()},getTerminal:function(){return _},findNext:function(s){C.findNext(s)},findPrev:function(s){C.findPrevious(s)},fit:function(){l.fit()},onData:function(s){return _.onData(s)}}}),(0,m.jsx)("div",{id:r.id?r.id:"terminal-container",style:{width:r.width?r.width:"100%",height:r.height?r.height:"500px",marginTop:(c=r.style)===null||c===void 0?void 0:c.marginTop}})});O.Z=P},33345:function(R,O,e){e.r(O),e.d(O,{default:function(){return o}});var D=e(5574),a=e.n(D),M=e(49610),u=e(60335),i=e(5251),T=e(82346),f=e(67294),g=e(85893);function o(){var d=(0,T.useParams)(),m=(0,T.useSearchParams)(),h=a()(m,2),_=h[0],C=h[1],l=(0,f.useRef)();return(0,f.useEffect)(function(){d.id&&(0,u.jV)({md5:d.id}).then(function(P){var r;window.document.title="console - ".concat((0,i.fi)(P.data.info.Name,"/")),d.id&&((r=l.current)===null||r===void 0||r.start(P.data.info.Id,{width:_.get("width"),height:_.get("height"),cmd:_.get("cmd"),workDir:_.get("workDir")}))}),document.body.style.overflow="hidden"},[]),(0,g.jsx)(M.Z,{ref:l})}},60335:function(R,O,e){e.d(O,{IE:function(){return g},IW:function(){return T},KK:function(){return C},LJ:function(){return P},RF:function(){return W},Re:function(){return A},aF:function(){return v},eE:function(){return h},jV:function(){return d}});var D=e(15009),a=e.n(D),M=e(99289),u=e.n(M),i=e(82346);function T(t){return f.apply(this,arguments)}function f(){return f=u()(a()().mark(function t(s){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.request)("/api/app/container/status",{method:"POST",data:s}));case 1:case"end":return n.stop()}},t)})),f.apply(this,arguments)}function g(t){return o.apply(this,arguments)}function o(){return o=u()(a()().mark(function t(s){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.request)("/api/app/container/get-list",{data:s,method:"POST"}));case 1:case"end":return n.stop()}},t)})),o.apply(this,arguments)}function d(t){return m.apply(this,arguments)}function m(){return m=u()(a()().mark(function t(s){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.request)("/api/app/container/get-detail",{data:s,method:"POST"}));case 1:case"end":return n.stop()}},t)})),m.apply(this,arguments)}function h(t){return _.apply(this,arguments)}function _(){return _=u()(a()().mark(function t(s){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.request)("/api/app/container/update",{data:s,method:"POST"}));case 1:case"end":return n.stop()}},t)})),_.apply(this,arguments)}function C(){return l.apply(this,arguments)}function l(){return l=u()(a()().mark(function t(){return a()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",(0,i.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return E.stop()}},t)})),l.apply(this,arguments)}function P(t){return r.apply(this,arguments)}function r(){return r=u()(a()().mark(function t(s){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.request)("/api/app/container/export",{method:"POST",data:s,responseType:"blob"}));case 1:case"end":return n.stop()}},t)})),r.apply(this,arguments)}function A(t){return c.apply(this,arguments)}function c(){return c=u()(a()().mark(function t(s){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.request)("/api/app/container/commit",{method:"POST",data:s}));case 1:case"end":return n.stop()}},t)})),c.apply(this,arguments)}function W(t){return y.apply(this,arguments)}function y(){return y=u()(a()().mark(function t(s){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.request)("/api/app/container/upgrade",{method:"POST",data:s}));case 1:case"end":return n.stop()}},t)})),y.apply(this,arguments)}function v(t){return p.apply(this,arguments)}function p(){return p=u()(a()().mark(function t(s){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.request)("/api/app/container/copy",{method:"POST",data:s}));case 1:case"end":return n.stop()}},t)})),p.apply(this,arguments)}}}]);
