"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4316],{52645:function(Pe,V,e){e.d(V,{Z:function(){return m}});var G=e(87462),Z=e(67294),J={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},c=J,Y=e(84089),H=function(P,F){return Z.createElement(Y.Z,(0,G.Z)({},P,{ref:F,icon:c}))},N=Z.forwardRef(H),m=N},36435:function(Pe,V,e){var G=e(15009),Z=e.n(G),J=e(64599),c=e.n(J),Y=e(99289),H=e.n(Y),N=e(9783),m=e.n(N),ce=e(5574),P=e.n(ce),F=e(67294),Se=e(184),Ee=e(38345),Ie=e(97269),X=e(97321),$=e(97462),Ce=e(64317),be=e(5966),q=e(86615),le=e(68602),Te=e(83622),L=e(83403),_e=e(24963),je=e(1699),Le=e(29177),xe=e(1883),Ze=e(43425),Ue=e(44349),We=e(3616),me=e(36146),R=e(85893),Fe=(0,F.forwardRef)(function(W,Qe){var z=(0,F.useState)(!1),ie=P()(z,2),O=ie[0],ee=ie[1],A=(0,F.useRef)(),De=(0,F.useContext)(_e.Z),B=De.message,a=(0,F.useState)([]),Re=P()(a,2),fe=Re[0],Oe=Re[1],_=new me.Uo("components.permissionButton"),ye=m()(m()(m()(m()(m()({},L.W6.CONTAINER,"Id"),L.W6.APPSTORE,"name"),L.W6.COMPOSE,"name"),L.W6.REGISTRY,"serverAddress"),L.W6.DOCKER_ENV,"name"),Ae=m()(m()(m()(m()(m()({},L.W6.CONTAINER,"name"),L.W6.APPSTORE,"name"),L.W6.COMPOSE,"name"),L.W6.REGISTRY,"title"),L.W6.DOCKER_ENV,"title"),Me=ye[W.type],Be=Ae[W.type],we=W.selected.map(function(E){return E[ye[W.type]]});return F.useEffect(function(){if(O){if(!W.selected||W.selected.length==0){B.error(me.FD.format("title.noDataSelect")),ee(!1);return}(0,le.dP)({permission:{uri:W.type,key:Me,value:we}}).then(function(E){var v;(v=A.current)===null||v===void 0||v.setFieldValue("list",Object.keys(E.data.list).map(function(g){return{name:g,type:E.data.list[g].type,users:E.data.list[g].users}}))}),(0,le.lE)().then(function(E){var v,g=(v=E.data)===null||v===void 0||(v=v.list)===null||v===void 0?void 0:v.map(function(C){return{label:C.username,value:C.username}});Oe(g)})}},[O]),(0,R.jsx)(je.u,{access:["canSeeEnableEe","canSeeFounder","canSeeManage"],children:(0,R.jsxs)(Se.a,{name:"create",title:_.format("drawerTitle"),open:O,onOpenChange:function(v){if(!v){var g;(g=A.current)===null||g===void 0||g.resetFields()}ee(v)},drawerProps:{forceRender:!0,width:We.R_},formRef:A,trigger:(0,R.jsx)(Te.ZP,{icon:(0,R.jsx)(Le.Z,{}),children:_.format("drawerTriggerButton")}),onFinish:function(){var E=H()(Z()().mark(function v(g){var C,M,j;return Z()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:C=c()(g.list),y.prev=1,C.s();case 3:if((M=C.n()).done){y.next=9;break}return j=M.value,y.next=7,(0,le.Db)({usernames:j.users,permissionType:j.type,permission:{uri:W.type,key:Me,showKey:Be,value:[j.name]}});case 7:y.next=3;break;case 9:y.next=14;break;case 11:y.prev=11,y.t0=y.catch(1),C.e(y.t0);case 14:return y.prev=14,C.f(),y.finish(14);case 17:B.success(me.FD.format("finish")),ee(!1),W.onSuccess();case 20:case"end":return y.stop()}},v,null,[[1,11,14,17]])}));return function(v){return E.apply(this,arguments)}}(),children:[(0,R.jsxs)(Ee.Z,{ghost:!0,title:(0,R.jsx)(xe.Z,{}),subTitle:_.format("batchTitle"),children:[(0,R.jsx)(Ie.A.Item,{name:"type",style:{marginBottom:0},children:(0,R.jsx)(X.Z.Group,{defaultValue:"admin",onChange:function(v){var g,C,M=(g=A.current)===null||g===void 0?void 0:g.getFieldValue("list");M.forEach(function(j){j.type=v,j.users=[]}),(C=A.current)===null||C===void 0||C.setFieldValue("list",M)},children:["admin","restricted","public"].map(function(E){return(0,R.jsx)(X.Z,{style:{width:240},title:_.format("dataTypeOption.".concat(E)),description:_.format("dataTypeDescOption.".concat(E)),value:E},E)})})}),(0,R.jsx)($.Z,{name:["type"],children:function(v){var g=v.type;if(g==="restricted")return(0,R.jsx)(Ce.Z,{mode:"multiple",name:"usernames",label:_.format("formUsernames"),onChange:function(M){var j,u,y=(j=A.current)===null||j===void 0?void 0:j.getFieldValue("list");y.forEach(function(b){b.users=M}),(u=A.current)===null||u===void 0||u.setFieldValue("list",y)},rules:[{required:!0}],request:H()(Z()().mark(function C(){var M,j,u;return Z()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(fe.length>0)){b.next=2;break}return b.abrupt("return",fe);case 2:return b.next=4,(0,le.lE)();case 4:return j=b.sent,u=(M=j.data)===null||M===void 0||(M=M.list)===null||M===void 0?void 0:M.map(function(te){return{label:te.username,value:te.username}}),Oe(u),b.abrupt("return",u);case 8:case"end":return b.stop()}},C)}))})}})]}),(0,R.jsx)(Ee.Z,{ghost:!0,title:(0,R.jsx)(Ze.Z,{}),subTitle:_.format("dataTitle"),children:(0,R.jsx)(Ue.Z,{name:"list",hideCopyButton:!0,gap:10,items:[{name:"name",label:_.format("dataName"),render:function(v,g,C){var M=C.getCurrentRowData();return(0,R.jsx)(be.Z,{disabled:!0,label:_.format("dataName"),width:"sm",name:"name"})}},{name:"type",label:_.format("dataType"),render:function(v,g,C){var M=C.getCurrentRowData();return(0,R.jsx)(q.Z.Group,{label:_.format("dataType"),name:"type",radioType:"button",options:["admin","public","restricted"].map(function(j){return{label:_.format("dataTypeOption.".concat(j)),value:j}})})}},{name:"users",label:_.format("dataUsers"),render:function(v,g,C){return(0,R.jsx)($.Z,{name:["type"],children:function(j){var u=j.type;if(u=="restricted")return(0,R.jsx)(Ce.Z,{width:"sm",mode:"tags",name:"users",label:_.format("dataUsers"),options:fe})}})}}]})})]})})});V.Z=Fe},14668:function(Pe,V,e){e.r(V),e.d(V,{default:function(){return rt}});var G=e(64599),Z=e.n(G),J=e(15009),c=e.n(J),Y=e(19632),H=e.n(Y),N=e(99289),m=e.n(N),ce=e(5574),P=e.n(ce),F=e(74453),Se=e(34041),Ee=e(97269),Ie=e(62370),X=e(42075),$=e(25593),Ce=e(40411),be=e(96074),q=e(83062),le=e(84567),Te=e(82346),L=e(1883),_e=e(89035),je=e(95591),Le=e(16596),xe=e(52645),Ze=e(82061),Ue=e(33160),We=e(87784),me=e(30159),R=e(74842),Fe=e(99611),W=e(86548),Qe=e(94359),z=e(13822),ie=e(80821),O=e(67294),ee=e(62597),A=e(87662),De=e(16165),B=e(5251),a=e(85893),Re=function(){return(0,a.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18403",children:(0,a.jsx)("path",{d:"M224 192v64H96v576h128v64h64v-64h64v64h64v-64h64v64h64v-64h64v64h64v-64h64v64h64v-64h128V256h-128V192h-64v64h-64V192h-64v64h-64V192h-64v64h-64V192h-64v64H288V192z m-64 128h704v448H160z m96 64c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32zM256 512c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m512 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32zM256 640c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z","p-id":"18404"})})},fe=function(){return(0,a.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18546",children:(0,a.jsx)("path",{d:"M64 224v576h416v-32c0-17.76 14.24-32 32-32 17.76 0 32 14.24 32 32v32h416V224z m64 64h768v288H128z m64 64v160h192v-160z m224 0v160h192v-160z m224 0v160h192v-160zM256 416h64v32H256z m224 0h64v32h-64z m224 0h64v32h-64zM128 640h768v96h-300.992c-14.144-35.52-42.752-64-83.008-64-40.256 0-68.864 28.48-83.008 64H128z","p-id":"18547"})})};function Oe(T){var ve,k,he,oe,pe,ge;return(0,a.jsx)(a.Fragment,{children:T.value&&T.value.memory&&T.value.memory.out>0?(0,a.jsxs)(X.Z,{children:[(0,a.jsxs)(q.Z,{title:"Cpu: ".concat((ve=T.value)===null||ve===void 0?void 0:ve.cpu.toFixed(2),"%"),children:[(0,a.jsx)(De.Z,{component:Re,style:{width:15,lineHeight:20}})," ","".concat((k=T.value)===null||k===void 0?void 0:k.cpu.toFixed(2),"%")]}),(0,a.jsxs)(q.Z,{title:"Memory: ".concat((0,B.FI)((he=T.value)===null||he===void 0?void 0:he.memory.in)," / ").concat((0,B.FI)((oe=T.value)===null||oe===void 0?void 0:oe.memory.out)),children:[(0,a.jsx)(De.Z,{component:fe,style:{width:15,lineHeight:20}})," ","".concat((((pe=T.value)===null||pe===void 0?void 0:pe.memory.in)/((ge=T.value)===null||ge===void 0?void 0:ge.memory.out)*100).toFixed(2),"%")]})]}):""})}var _=e(67255),ye=e(37413),Ae=e(47463),Me=e(99922),Be=e(83403),we=e(20578),E=e(99861),v=e(78914),g=e(29453),C=e(8287),M=e(29463),j=e(78451),u=e(36146),y=e(36435),b=e(1699),te=e(55375),w=e(98510),nt=e(84941);function rt(){var T=new u.Uo("components.appDetail"),ve=new u.Uo("app"),k=(0,Te.useAccess)(),he=(0,O.useState)(""),oe=P()(he,2),pe=oe[0],ge=oe[1],st=(0,O.useState)(1),Ge=P()(st,2),Q=Ge[0],ae=Ge[1],lt=(0,O.useState)([]),Je=P()(lt,2),ue=Je[0],it=Je[1],ot=(0,O.useState)(),Ye=P()(ot,2),Ke=Ye[0],ut=Ye[1],dt=(0,O.useState)([]),Xe=P()(dt,2),qe=Xe[0],ct=Xe[1],ne=(0,O.useRef)(),Ne=(0,O.useRef)(),$e=(0,O.useRef)(),ze=(0,O.useRef)(),Ve=(0,O.useRef)(),et=(0,O.useRef)(),He=(0,O.useRef)(),tt=(0,O.useRef)(),at=(0,O.useRef)();return(0,O.useEffect)(function(){(0,A.K3)().then(function(h){var r;ge((r=h.data.serverUrl)!==null&&r!==void 0?r:"")}),!k.canSeeEnableCe&&(0,we.q)().then(function(h){ut(h.data)})},[]),(0,O.useEffect)(function(){var h;!((h=ne.current)===null||h===void 0)&&h.reload&&ne.current.reload(!1)},[Q]),(0,a.jsxs)(F._z,{header:{extra:[(0,a.jsx)(nt.Z,{showTrigger:!0,onFinish:function(){ae(Q+1)},ref:at},"createByImage")]},children:[(0,a.jsx)(Ae.Z,{ref:Ne,onFinish:function(){ae(Q+1)},onUpgradeFinish:function(){ae(Q+1)}}),(0,a.jsx)(Me.Z,{showFileExplorer:!0,ref:$e}),(0,a.jsx)(C.Z,{ref:ze}),(0,a.jsx)(E.Z,{ref:He,finishAutoHide:!0}),(0,a.jsx)(v.Z,{ref:tt}),(0,a.jsx)(M.Z,{showConsole:!0,ref:Ve}),(0,a.jsx)(w.C,{actionRef:ne,tableKey:te.Dc,columns:[{key:"title",title:u.FD.format("listTitle"),width:300,dataIndex:"siteTitle",sorter:function(r,t){return r.Names[0].localeCompare(t.Names[0])},defaultSortOrder:(0,_.rj)(te.Dc,"title"),sortDirections:_.h5,render:function(r,t,o,i,n){var s=(0,B.fi)(t.Names[0],"/");return(0,a.jsxs)(X.Z,{direction:"vertical",children:[(0,a.jsx)($.Z.Link,{onClick:function(){var p;(p=Ne.current)===null||p===void 0||p.show(t.Id)},children:(0,a.jsx)(j.Z,{content:s})}),!k.canSeeEnableCe&&Ke&&Ke.container&&Ke.container.find(function(l){return l.id==t.Id})&&(0,a.jsx)(Ce.Z,{count:"new"})]})}},{title:u.FD.format("listTag"),hidden:!0,dataIndex:"tag",renderFormItem:function(r,t,o,i){return(0,a.jsx)(Se.Z,{onSelect:function(s){o.submit()},onDeselect:function(){o.submit()},onClear:function(){o.submit()},allowClear:!0,popupMatchSelectWidth:!1,options:qe&&Object.entries(qe.reduce(function(n,s){var l=s.group||"tag";return n[l]||(n[l]=[]),n[l].push(s),n},{})).map(function(n){var s=P()(n,2),l=s[0],p=s[1];return{label:l,title:l,options:p.map(function(x){return{label:x.tag,value:x.tag}})}})})}},{key:"ports",title:u.FD.format("listAccess"),tooltip:u.FD.format("listAccessTip"),width:150,dataIndex:"ports",search:!1,render:function(r,t,o,i){var n,s=[],l=[];return t!=null&&t.Ports&&t.Ports.map(function(p,x){p.PublicPort?s.push(p):l.push(p)}),(0,a.jsx)(ye.Z,{publicPort:s,privatePort:l,domain:(n=t.DPExtend)===null||n===void 0?void 0:n.domainList,serverIp:pe})}},{title:u.FD.format("listUsage"),width:200,search:!1,key:"usage",sorter:function(r,t){var o={},i={};if(ue){var n,s;o=(n=ue.find(function(l){return r.Id.startsWith(l.container)}))!==null&&n!==void 0?n:{},i=(s=ue.find(function(l){return t.Id.startsWith(l.container)}))!==null&&s!==void 0?s:{}}return JSON.stringify(o).localeCompare(JSON.stringify(i))},defaultSortOrder:(0,_.rj)(te.Dc,"usage"),sortDirections:_.h5,render:function(r,t,o,i,n){if(!ue||ue.length<=0)return"";var s={};return ue.filter(function(l){t.Id.indexOf(l.container)==0&&(s=l)}),(0,a.jsx)(Oe,{value:s})}},{title:u.FD.format("listRunStatus"),key:"status",dataIndex:["container","status"],search:!1,width:130,render:function(r,t,o,i){var n="",s={};if(t.State.includes("(")){var l=t.State.indexOf("(");l>-1&&(n="compose.".concat(t.State.slice(0,l))),s={count:t.State.slice(l+1,t.State.length-1)}}else n="container.".concat(t.State),t.Status.indexOf("(healthy)")>-1?n="container.healthy":t.Status.indexOf("(unhealthy)")>-1&&(n="container.unhealthy");return(0,a.jsx)(Qe.Z,{statusValue:s,status:n,tip:"".concat(t.State," ").concat(t.Status)})}},{title:u.FD.format("listImageName"),key:"image",width:150,dataIndex:"image",render:function(r,t,o,i){return(0,a.jsx)("span",{style:{wordBreak:"break-word"},children:(0,a.jsx)($.Z.Link,{onClick:function(){var s;(s=tt.current)===null||s===void 0||s.show(t.Image)},children:t.Image.includes("sha256:")?t.Image.substring(7,19):t.Image})})}},{key:"created",search:!1,title:u.FD.format("listCreatedAt"),width:170,dataIndex:["Created"],render:function(r,t,o,i,n){return(0,B.ZM)(t.Created*1e3)},sorter:function(r,t){return new Date(r.Created*1e3).toISOString().localeCompare(new Date(t.Created*1e3).toISOString())},defaultSortOrder:(0,_.rj)(te.Dc,"created"),sortDirections:_.h5},{title:u.FD.format("listManage"),valueType:"option",key:"option",width:130,fixed:"right",hidden:!k.canSeeContainerListManage,render:function(r,t,o,i){return(0,a.jsxs)(X.Z,{split:(0,a.jsx)(be.Z,{type:"vertical"}),children:[(0,a.jsx)($.Z.Link,{onClick:function(){var s;(s=ze.current)===null||s===void 0||s.show(t.Id)},children:(0,a.jsx)(q.Z,{title:u.FD.format("listManageLog"),children:(0,a.jsx)(L.Z,{})})},"log"),(t.State=="running"||t.State=="healthy"||t.State=="unhealthy")&&(0,a.jsx)($.Z.Link,{onClick:function(){var s;(s=$e.current)===null||s===void 0||s.show({url:"/console/container/".concat(t.Id),title:(0,B.fi)(t.Names[0],"/")})},children:(0,a.jsx)(q.Z,{title:u.FD.format("listManageConsole"),children:(0,a.jsx)(_e.Z,{})})},"console"),(t.State=="running"||t.State=="healthy"||t.State=="unhealthy")&&(0,a.jsx)($.Z.Link,{onClick:function(){var s,l=t.Names.find(function(p){if(p.indexOf("/")===0)return p});(s=Ve.current)===null||s===void 0||s.showContainer(l!=null?l:t.Names[0])},children:(0,a.jsx)(q.Z,{title:u.FD.format("listManageFileExplorer"),children:(0,a.jsx)(je.Z,{})})},"file")]})}}],rowKey:"Id",request:function(){var h=m()(c()().mark(function r(t,o,i){var n,s,l,p,x,S;return c()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,z.IE)({siteTitle:t.title,image:t.image});case 2:return s=f.sent,l="",p=[],f.next=7,(0,g.e1)({showCompose:!0,showSwarm:!0});case 7:if(x=f.sent,ct(x.data.list),S=[],S=s.data.list.map(function(d){var I=s.data.siteList.find(function(D){return D.containerInfo&&D.containerInfo.Id==d.Id&&D.siteTitle!=""});if(I&&d.Names.unshift(I.siteTitle),d.Labels&&d.Labels[ee.fu]&&d.Names.unshift(d.Labels[ee.fu]),d.DPExtend={domainList:s.data.domainList.filter(function(D,de){return d.Names.includes(D.containerId)}).map(function(D){return D.setting.enableSSL?"https://"+D.serverName:"http://"+D.serverName}),tag:[]},d.Labels&&d.Labels["com.docker.compose.project"]){var K;(K=d.DPExtend.tag)===null||K===void 0||K.push((0,B.fi)(d.Labels["com.docker.compose.project"],"dpanel-c-"))}if(d.Labels&&d.Labels["com.docker.swarm.service.name"]){var U;(U=d.DPExtend.tag)===null||U===void 0||U.push(d.Labels["com.docker.swarm.service.name"])}return x.data.list.forEach(function(D){D.item&&D.item.forEach(function(de){if(d.Names.includes(de.name)&&d.DPExtend){var se;(se=d.DPExtend.tag)===null||se===void 0||se.push(D.tag)}})}),d}),!t.tag){f.next=15;break}if(S.forEach(function(d){var I;!((I=d.DPExtend)===null||I===void 0)&&I.tag&&d.DPExtend.tag.forEach(function(K){t.tag.includes(K)&&p.push.apply(p,H()(d.Names))})}),p.length!=0){f.next=15;break}return f.abrupt("return",{data:[],success:!0,total:0});case 15:return l!=""?S=S.filter(function(d){var I=!1;return d.Names.forEach(function(K){K.startsWith("/"+l)&&(I=!0)}),I}):p&&p.length>0&&(S=S.filter(function(d){var I=!1;return d.Names.forEach(function(K){p.includes(K)&&(I=!0)}),I})),(0,A.Cz)({follow:!1}).then(function(d){it(d.data.list)}),f.abrupt("return",{data:(n=S)!==null&&n!==void 0?n:[],success:!0,total:s.data.list.length});case 18:case"end":return f.stop()}},r)}));return function(r,t,o){return h.apply(this,arguments)}}(),rowSelection:k.canSeeContainerListManage&&{defaultSelectedRowKeys:[],alwaysShowAlert:!0},quickToolbarRender:function(r){var t=r.selectedRows,o=r.loading,i=r.finish;return[(0,a.jsx)(y.Z,{type:Be.W6.CONTAINER,selected:t!=null?t:[],onSuccess:function(){return ae(Q+1),!0}},"dataPermission"),(0,a.jsx)(b.u,{showProTips:!0,access:["canSeeEnableCe","canSeeContainerListManageOp"],children:function(s){var l=s.canSeeEnableCe,p=s.canSeeContainerListManageOp;return p&&(0,a.jsx)(ie.Z,{buttonProps:{disabled:l,type:"primary",icon:(0,a.jsx)(Le.Z,{})},action:m()(c()().mark(function x(){var S,re,f,d,I;return c()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(t){U.next=2;break}return U.abrupt("return",!1);case 2:o(),S=[],re=Z()(t);try{for(re.s();!(f=re.n()).done;)d=f.value,d&&!S.includes(d.Image)&&S.push(d.Image)}catch(D){re.e(D)}finally{re.f()}if(!S){U.next=9;break}return U.next=9,(I=He.current)===null||I===void 0?void 0:I.pull(S).finally(function(){var D;(D=He.current)===null||D===void 0||D.finish()});case 9:return U.abrupt("return",Promise.all(t.map(function(D){var de,se,ke;return(0,z.RF)({md5:(de=D.Id)!==null&&de!==void 0?de:"",imageTag:"",enableBak:(se=(ke=et.current)===null||ke===void 0?void 0:ke.getFieldValue("enableBak"))!==null&&se!==void 0?se:!1}).finally(function(){i(!0)})})));case 10:case"end":return U.stop()}},x)})),onSuccess:function(){return ae(Q+1),!0},confirmProps:{description:(0,a.jsxs)(X.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,a.jsx)($.Z.Text,{children:T.format("upgradeConfirm")}),(0,a.jsx)(Ee.A,{formRef:et,submitter:!1,layout:"inline",children:(0,a.jsx)(Ie.Z,{name:"enableBak",valuePropName:"checked",children:(0,a.jsx)(le.Z,{children:T.format("upgradeConfirmEnableBak")})})})]})},children:u.FD.format("listManageUpgradeBatch")})}},"batchUpgrade"),(0,a.jsx)(b.u,{access:"canSeeContainerListManageDelete",children:(0,a.jsx)(ie.Z,{action:function(){return(0,z.KK)()},buttonProps:{icon:(0,a.jsx)(xe.Z,{})},onSuccess:function(){return ae(Q+1),!0},onError:function(){var s,l;return!((s=ne.current)===null||s===void 0)&&s.reloadAndRest&&((l=ne.current)===null||l===void 0||l.reloadAndRest()),!0},confirmProps:{description:ve.format("listManagePruneTip")},children:u.FD.format("listManagePrune")})},"clear"),(0,a.jsx)(b.u,{access:"canSeeContainerListManageDelete",children:(0,a.jsx)(ie.Z,{buttonProps:{danger:!0,type:"primary",icon:(0,a.jsx)(Ze.Z,{})},action:m()(c()().mark(function n(){return c()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Promise.all(t.map(function(){var p=m()(c()().mark(function x(S){return c()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,ee.Ct)({md5:S.Id,deleteImage:!1,deleteVolume:!1});case 2:return f.t0=f.sent,f.next=5,(0,g.rn)({name:S.Names[0]});case 5:return f.t1=f.sent,f.abrupt("return",[f.t0,f.t1]);case 7:case"end":return f.stop()}},x)}));return function(x){return p.apply(this,arguments)}}())));case 1:case"end":return l.stop()}},n)})),onSuccess:function(){return ae(Q+1),!0},onError:function(){var s,l;return!((s=ne.current)===null||s===void 0)&&s.reloadAndRest&&((l=ne.current)===null||l===void 0||l.reloadAndRest()),!0},confirmProps:{showCommonConfirm:!0},children:u.FD.format("listManageDeleteBatch")})},"batchDelete")]},contextMenu:function(r){return{items:[{type:"group",label:u.FD.format("listManageManage"),key:"manage",children:[{access:"canSeeContainerList",label:(0,a.jsx)(w.C.ContextMenuItem,{buttonProps:{icon:(0,a.jsx)(Ue.Z,{})},action:m()(c()().mark(function t(){return c()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r.loading(),i.abrupt("return",Promise.all(r.selectedRows.map(function(n){return(0,z.IW)({md5:n.Id,operate:"restart"})})).finally(function(){r.finish(!0)}));case 2:case"end":return i.stop()}},t)})),children:u.FD.format("listManageRestart")}),key:"restart"},{label:(0,a.jsx)(w.C.ContextMenuItem,{action:m()(c()().mark(function t(){return c()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r.loading(),i.abrupt("return",Promise.all(r.selectedRows.map(function(n){return(0,z.IW)({md5:n.Id,operate:"stop"})})).finally(function(){r.finish(!0)}));case 2:case"end":return i.stop()}},t)})),buttonProps:{icon:(0,a.jsx)(We.Z,{})},children:u.FD.format("listManageStop")}),key:"stop"},{label:(0,a.jsx)(w.C.ContextMenuItem,{action:m()(c()().mark(function t(){return c()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r.loading(),i.abrupt("return",Promise.all(r.selectedRows.map(function(n){return(0,z.IW)({md5:n.Id,operate:"pause"})})).finally(function(){r.finish(!0)}));case 2:case"end":return i.stop()}},t)})),buttonProps:{icon:(0,a.jsx)(me.Z,{})},children:u.FD.format("listManagePause")}),key:"pause"},{label:(0,a.jsx)(w.C.ContextMenuItem,{action:m()(c()().mark(function t(){return c()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r.loading(),i.abrupt("return",Promise.all(r.selectedRows.map(function(n){return(0,z.IW)({md5:n.Id,operate:"unpause"})})).finally(function(){r.finish(!0)}));case 2:case"end":return i.stop()}},t)})),buttonProps:{icon:(0,a.jsx)(R.Z,{})},children:u.FD.format("listManageUnpause")}),key:"unpause"}]},{type:"group",label:u.FD.format("listManage"),key:"operator",children:[{label:(0,a.jsx)(w.C.ContextMenuItem,{buttonProps:{icon:(0,a.jsx)(Fe.Z,{}),disabled:r.isMultiple()},action:m()(c()().mark(function t(){var o;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r.finish(!0),r.selectedRow&&((o=Ne.current)===null||o===void 0||o.show(r.selectedRow.Id));case 2:case"end":return n.stop()}},t)})),children:u.FD.format("listManageView")}),key:"view"},{label:(0,a.jsx)(w.C.ContextMenuItem,{buttonProps:{icon:(0,a.jsx)(W.Z,{}),disabled:r.isMultiple()},action:m()(c()().mark(function t(){var o;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r.finish(!0),r.selectedRow&&((o=at.current)===null||o===void 0||o.show(r.selectedRow.Id));case 2:case"end":return n.stop()}},t)})),children:u.FD.format("listManageEdit")}),key:"edit"},{label:(0,a.jsx)(w.C.ContextMenuItem,{buttonProps:{icon:(0,a.jsx)(L.Z,{}),disabled:r.isMultiple()},action:m()(c()().mark(function t(){var o;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r.selectedRow&&((o=ze.current)===null||o===void 0||o.show(r.selectedRow.Id)),r.finish(!0);case 2:case"end":return n.stop()}},t)})),children:u.FD.format("listManageLog")}),key:"log"},{label:(0,a.jsx)(w.C.ContextMenuItem,{buttonProps:{icon:(0,a.jsx)(_e.Z,{}),disabled:r.isMultiple()||r.selectedRow&&!["running","healthy","unhealthy"].includes(r.selectedRow.State)},action:m()(c()().mark(function t(){var o;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r.selectedRow&&((o=$e.current)===null||o===void 0||o.show({url:"/console/container/".concat(r.selectedRow.Id),title:(0,B.fi)(r.selectedRow.Names[0],"/")})),r.finish(!0);case 2:case"end":return n.stop()}},t)})),children:u.FD.format("listManageConsole")}),key:"console"},{label:(0,a.jsx)(w.C.ContextMenuItem,{buttonProps:{icon:(0,a.jsx)(je.Z,{}),disabled:r.isMultiple()||r.selectedRow&&!["running","healthy","unhealthy"].includes(r.selectedRow.State)},action:m()(c()().mark(function t(){var o,i;return c()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(r.selectedRow){s.next=2;break}return s.abrupt("return");case 2:i=r.selectedRow.Names.find(function(l){if(l.indexOf("/")===0)return l}),(o=Ve.current)===null||o===void 0||o.showContainer(i!=null?i:r.selectedRow.Names[0]),r.finish(!0);case 5:case"end":return s.stop()}},t)})),children:u.FD.format("listManageFilePath")}),key:"file"}]}]}}},"app-list")]})}},20578:function(Pe,V,e){e.d(V,{q:function(){return H}});var G=e(15009),Z=e.n(G),J=e(99289),c=e.n(J),Y=e(82346);function H(){return N.apply(this,arguments)}function N(){return N=c()(Z()().mark(function m(){return Z()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,Y.request)("/api/pro/container-upgrade/get-all-list",{method:"POST"});case 2:return P.abrupt("return",P.sent);case 3:case"end":return P.stop()}},m)})),N.apply(this,arguments)}}}]);
