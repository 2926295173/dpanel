"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1050],{1699:function(Q,D,n){n.d(D,{u:function(){return x}});var M=n(9783),f=n.n(M),W=n(97857),S=n.n(W),w=n(67294),r=n(82346),Z=n(40411),j=n(42075),d=n(85893),x=function(a){var I=(0,r.useAccess)(),o=Array.isArray(a.access)?a.access:[a.access],g,B=a.fallback;return typeof a.children=="function"?(g=a.children(o.reduce(function(t,A){return S()(S()({},t),{},f()({},A,I[A]))},{})),g||(g=B)):o.every(function(t){return I[t]})?g=a.children:g=B,!B&&g&&a.showProTips&&I.canSeeEnableCe&&(g=(0,d.jsx)(Z.Z,{offset:a.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:g})),!B&&g&&a.showProRibbonTips&&I.canSeeEnableCe&&(g=(0,d.jsx)(Z.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:g})),a.space?(0,d.jsx)(j.Z,S()(S()({},a.space),{},{children:g})):g}},80821:function(Q,D,n){n.d(D,{Z:function(){return K}});var M=n(97857),f=n.n(M),W=n(5574),S=n.n(W),w=n(24963),r=n(86738),Z=n(28036),j=n(83062),d=n(67294),x=n(85893);function K(a){var I=(0,d.useState)(!1),o=S()(I,2),g=o[0],B=o[1],t=(0,d.useContext)(w.Z),A=t.lang,U=t.message,b=function(){B(!0);var re=a.action();re instanceof Promise?re.then(function(N){if(B(!1),N){typeof a.onSuccess=="function"&&a.onSuccess(N);var e="";a.messageSuccess?typeof a.messageSuccess=="function"?e=a.messageSuccess(N):e=a.messageSuccess.indexOf("notification.")==0?A(a.messageSuccess):a.messageSuccess:e=A("notification.finish"),a.asynced?U.info(e):U.success(e)}}).catch(function(N){B(!1),typeof a.onError=="function"&&a.onError(N)}):B(!1)};return a.confirm?(0,x.jsx)(r.Z,f()(f()({style:{width:500},title:a.confirmTitle?a.confirmTitle:A("notification.title.tip"),description:typeof a.confirm=="string"&&a.confirm.indexOf("notification.")==0?A(a.confirm):a.confirm,onConfirm:b,okText:"Yes",cancelText:"No",onOpenChange:a.confirmOnOpenChange},a.confirmProps),{},{children:(0,x.jsx)(Z.ZP,{block:a.block,disabled:a.disabled,icon:!a.children&&g?void 0:a.icon,loading:g,danger:a.danger,type:a.type,children:a.children})})):(0,x.jsx)(j.Z,{title:a.tips,children:(0,x.jsx)(Z.ZP,{block:a.block,style:a.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:a.disabled,icon:!a.children&&g?void 0:a.icon,loading:g,onClick:b,danger:a.danger,type:a.type,children:a.children})})}},44349:function(Q,D,n){var M=n(97857),f=n.n(M),W=n(17186),S=n(5966),w=n(86250),r=n(67294),Z=n(85893),j=(0,r.forwardRef)(function(d,x){var K=(0,r.useRef)();(0,r.useImperativeHandle)(x,function(){return{addItem:function(o,g){var B,t=(B=K.current)===null||B===void 0?void 0:B.getList(),A=!1;if(t==null||t.map(function(b){if(b.name==o){A=!0;return}}),!A){var U;(U=K.current)===null||U===void 0||U.add({name:o,value:g})}},clear:function(){var o;(o=K.current)===null||o===void 0||(o=o.getList())===null||o===void 0||o.map(function(g,B){var t;(t=K.current)===null||t===void 0||t.remove(B)})}}});var a={};return d.hideCopyButton===!0&&(a.copyIconProps=!1),d.hideDeleteButton===!0&&(a.deleteIconProps=!1),(0,Z.jsx)(W.u,f()(f()({initialValue:d.initialValue,label:d.label,name:d.name,actionRef:K,creatorButtonProps:d.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(d.label?d.label:d.name)}:!1,min:d.min?d.min:0},a),{},{children:function(o,g,B){return(0,Z.jsx)(w.Z,{justify:d.justify,gap:d.gap,children:d.items.map(function(t){return t.render?(0,Z.jsx)("div",{children:t.render&&t.render(o,g,B)},"".concat(d.name,"-").concat(t.name,"-").concat(o.key)):(0,Z.jsx)(S.Z,{width:t.width,name:t.name,label:t.label,required:t.required,rules:[{required:t.required}],disabled:t.disabled,placeholder:t.placeholder},"".concat(d.name,"-").concat(t.name,"-").concat(o.key))})})}}))});D.Z=j},34879:function(Q,D,n){n.d(D,{Z:function(){return w}});var M=n(97961),f=n(91604),W=n(1677),S=n(85893);function w(r){return r.showDragger?(0,S.jsx)(f.Z,{max:r.max?r.max:1,title:r.title,label:r.label,required:r.required,rules:[{required:r.required}],fieldProps:{multiple:!!(r.max&&r.max>1),name:"file",accept:r.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(j){return new Promise(function(d){var x;(0,M._2)({path:(x=j.response.data.path)!==null&&x!==void 0?x:""}).then(function(K){d(!0)})})}},name:r.name}):(0,S.jsx)(W.Z,{max:r.max?r.max:1,title:r.title,label:r.label,required:r.required,rules:[{required:r.required}],fieldProps:{multiple:!!(r.max&&r.max>1),name:"file",accept:r.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(j){return new Promise(function(d){var x;(0,M._2)({path:(x=j.response.data.path)!==null&&x!==void 0?x:""}).then(function(K){d(!0)})})}},name:r.name})}},2808:function(Q,D,n){n.d(D,{Z:function(){return Z}});var M=n(97857),f=n.n(M),W=n(62370),S=n(51663),w=n(67294),r=n(85893);function Z(j){return(0,r.jsx)(W.Z,f()(f()({},j),{},{children:(0,r.jsx)(S.Z,{showText:function(x){return x.toHexString()},allowClear:!0,presets:[{label:"\u9884\u8BBE\u989C\u8272",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},3616:function(Q,D,n){n.d(D,{Ed:function(){return S},FK:function(){return f},R_:function(){return M},ob:function(){return W}});var M=window.innerWidth<=1024?"90vw":"65vw",f="90vw",W="60vw",S="50vh"},24963:function(Q,D,n){var M=n(67294),f=(0,M.createContext)({});D.Z=f},56757:function(Q,D,n){n.r(D),n.d(D,{default:function(){return We}});var M=n(5574),f=n.n(M),W=n(19632),S=n.n(W),w=n(15009),r=n.n(w),Z=n(99289),j=n.n(Z),d=n(24963),x=n(87662),K=n(88641),a=n(38345),I=n(97269),o=n(5966),g=n(31199),B=n(63434),t=n(67294),A=n(42075),U=n(80821),b=n(1699),G=n(82346);function re(C){return N.apply(this,arguments)}function N(){return N=j()(r()().mark(function C(P){return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,G.request)("/api/common/setting/email-test",{method:"POST",data:P}));case 1:case"end":return u.stop()}},C)})),N.apply(this,arguments)}var e=n(85893);function he(){var C=(0,t.useRef)(),P=(0,t.useContext)(d.Z),F=P.lang,u=(0,t.useState)(""),J=f()(u,2),H=J[0],O=J[1],z=function(){var $=j()(r()().mark(function y(){var _,v,s,i,c,l,R,m;return r()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,x.pe)({groupName:"setting",name:"emailServer"});case 2:m=E.sent,m.data.setting.value.emailServer&&((_=C.current)===null||_===void 0||_.setFieldsValue({host:(v=m.data.setting.value.emailServer.host)!==null&&v!==void 0?v:"",port:(s=m.data.setting.value.emailServer.port)!==null&&s!==void 0?s:"",email:(i=m.data.setting.value.emailServer.email)!==null&&i!==void 0?i:"",code:(c=m.data.setting.value.emailServer.code)!==null&&c!==void 0?c:"",status:(l=m.data.setting.value.emailServer.status)!==null&&l!==void 0?l:[]})),m.data.setting.value.emailServer&&O((R=m.data.setting.value.emailServer)===null||R===void 0?void 0:R.email);case 5:case"end":return E.stop()}},y)}));return function(){return $.apply(this,arguments)}}();return(0,e.jsx)(a.Z,{direction:"column",gutter:[0,10],ghost:!0,children:(0,e.jsx)(a.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(K.Z,{}),subTitle:"\u90AE\u4EF6\u670D\u52A1",children:(0,e.jsxs)(I.A,{layout:"horizontal",labelAlign:"right",labelCol:{span:5,offset:0},formRef:C,onInit:j()(r()().mark(function $(){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return z(),_.abrupt("return",!0);case 2:case"end":return _.stop()}},$)})),submitter:{render:function(y,_){return[].concat(S()(_),[(0,e.jsx)(U.Z,{tips:"\u5C06\u53D1\u9001\u90AE\u4EF6\u81F3 ".concat(H," \u4E2D\uFF0C\u6CE8\u610F\u67E5\u6536"),action:j()(r()().mark(function v(){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,re({subject:F("system.basic.emailTestSubject"),content:F("system.basic.emailTestContent",{time:new Date().toISOString()})});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},v)})),children:"\u6D4B\u8BD5"},"testEmail")])}},onFinish:function(){var $=j()(r()().mark(function y(_){var v;return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,x.gW)({host:_.host,port:_.port,email:_.email,code:_.code,status:_.status});case 2:return(v=C.current)===null||v===void 0||v.resetFields(),z(),i.abrupt("return",!0);case 5:case"end":return i.stop()}},y)}));return function(y){return $.apply(this,arguments)}}(),children:[(0,e.jsx)(o.Z,{label:"SMTP\u670D\u52A1\u5668\u5730\u5740",name:"host",placeholder:"\u4F8B\u5982:smtp.163.com",required:!0,rules:[{required:!0}]}),(0,e.jsx)(g.Z,{label:"SMTP\u670D\u52A1\u5668\u7AEF\u53E3",name:"port",placeholder:"\u53D1\u9001\u90AE\u4EF6\u7AEF\u53E3\uFF0C\u901A\u5E38\u4E3A465",required:!0,rules:[{required:!0}]}),(0,e.jsx)(o.Z,{label:"SMTP\u6388\u6743\u7801",name:"code",width:"lg",placeholder:"SMTP\u6388\u6743\u7801",required:!0,rules:[{required:!0}],addonAfter:(0,e.jsxs)(A.Z,{children:[(0,e.jsx)("a",{target:"_blank",href:"https://service.mail.qq.com/detail/0/75",children:"QQ\u90AE\u7BB1\u6388\u6743\u7801"}),(0,e.jsx)("a",{target:"_blank",href:"https://help.mail.163.com/faqDetail.do?code=d7a5dc8471cd0c0e8b4b8f4f8e49998b374173cfe9171305fa1ce630d7f67ac286624f309a1a7089",children:"163\u90AE\u7BB1\u6388\u6743\u7801"})]})}),(0,e.jsx)(o.Z,{label:"\u53D1\u4EF6\u90AE\u7BB1",name:"email",placeholder:"\u53D1\u4EF6\u90AE\u7BB1\u5730\u5740",required:!0,rules:[{required:!0}]}),(0,e.jsx)(b.u,{access:"canSeeEnableEe",children:(0,e.jsx)(B.Z.Group,{name:"status",label:"\u5F00\u542F\u529F\u80FD",options:[{label:"\u6CE8\u518C",value:"register"}]})})]})})})}function fe(C){return se.apply(this,arguments)}function se(){return se=j()(r()().mark(function C(P){return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,G.request)("/api/pro/two-fa/enable",{method:"POST",data:P}));case 1:case"end":return u.stop()}},C)})),se.apply(this,arguments)}function ve(){return ie.apply(this,arguments)}function ie(){return ie=j()(r()().mark(function C(){return r()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt("return",(0,G.request)("/api/pro/two-fa/get-setting",{method:"POST"}));case 1:case"end":return F.stop()}},C)})),ie.apply(this,arguments)}var ge=n(29177),_e=n(86548),be=n(97937),Ee=n(12119),Y=n(97462),le=n(52688),ne=n(62370),oe=n(28036),je=n(35930);function pe(){var C=(0,t.useRef)(),P=(0,G.useModel)("@@initialState"),F=P.initialState,u=P.loading,J=P.error,H=P.refresh,O=P.setInitialState,z=(0,t.useContext)(d.Z),$=z.message,y=z.notice,_=z.lang,v=(0,t.useRef)(),s=(0,t.useState)(0),i=f()(s,2),c=i[0],l=i[1],R=(0,G.useAccess)();return(0,t.useEffect)(function(){!R.canSeeEnableCe&&ve().then(function(m){var h;(h=v.current)===null||h===void 0||h.setFieldsValue({enable:m.data.enable,email:m.data.email,qrcode:m.data.qrcode})})},[c]),(0,e.jsxs)(a.Z,{direction:"column",gutter:[0,10],ghost:!0,children:[(0,e.jsx)(a.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(ge.Z,{}),subTitle:"\u7BA1\u7406\u5458",children:(0,e.jsxs)(I.A,{layout:"horizontal",labelAlign:"right",labelCol:{span:3,offset:0},formRef:C,onFinish:function(){var m=j()(r()().mark(function h(E){var p,T;return r()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,x.Jn)({username:E.username,password:E.password,newPassword:E.newPassword});case 2:if(p=L.sent,!(p&&p.data)){L.next=9;break}return(T=C.current)===null||T===void 0||T.resetFields(),$.success("\u4FEE\u6539\u7BA1\u7406\u5458\u7528\u6237\u540D\u548C\u5BC6\u7801\u6210\u529F"),localStorage.removeItem("token"),H(),L.abrupt("return",!0);case 9:case"end":return L.stop()}},h)}));return function(h){return m.apply(this,arguments)}}(),children:[(0,e.jsx)(Y.Z,{name:["enableUsername"],children:function(h){var E=h.enableUsername;return(0,e.jsx)(o.Z,{label:"\u7528\u6237\u540D",name:"username",style:{width:"80%"},initialValue:F==null?void 0:F.user.username,disabled:!E,addonAfter:[(0,e.jsx)(oe.ZP,{type:"link",hidden:!!E,icon:(0,e.jsx)(_e.Z,{}),onClick:function(){var T;(T=C.current)===null||T===void 0||T.setFieldValue("enableUsername",!0)}},"editBtn"),(0,e.jsx)(oe.ZP,{type:"link",hidden:!E,icon:(0,e.jsx)(be.Z,{}),onClick:function(){var T;(T=C.current)===null||T===void 0||T.setFieldValue("enableUsername",!1)}},"closeBtn")]},"username")}}),(0,e.jsx)(o.Z.Password,{label:"\u5F53\u524D\u5BC6\u7801",name:"password",placeholder:"\u8F93\u5165\u7BA1\u7406\u5458\u5F53\u524D\u5BC6\u7801",rules:[{required:!0}]},"password"),(0,e.jsx)(o.Z.Password,{label:"\u65B0\u5BC6\u7801",name:"newPassword"},"newPasword"),(0,e.jsx)(Y.Z,{name:["newPassword"],children:function(h){var E=h.newPassword;return(0,e.jsx)(o.Z.Password,{label:"\u786E\u8BA4\u65B0\u5BC6\u7801",name:"newPassword2",dependencies:["newPassword"],rules:[{required:typeof E!="undefined"&&E!=""},function(p){var T=p.getFieldValue;return{validator:function(L,ee){return!ee||T("newPassword")===ee?Promise.resolve():Promise.reject(new Error("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4"))}}}]},"newPasword2")}})]})}),(0,e.jsx)(b.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(h){var E=h.canSeeEnableCe;return(0,e.jsx)(a.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(Ee.Z,{}),subTitle:"\u767B\u5F55\u53CC\u56E0\u7D20\u914D\u7F6E",children:(0,e.jsxs)(I.A,{disabled:E,onFinish:function(){var p=j()(r()().mark(function T(k){var L,ee;return r()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,fe({email:k.email,enable:k.enable});case 2:L=te.sent,L&&L.data.qrcode&&((ee=v.current)===null||ee===void 0||ee.setFieldValue("qrcode",L.data.qrcode)),l(c+1);case 5:case"end":return te.stop()}},T)}));return function(T){return p.apply(this,arguments)}}(),formRef:v,layout:"horizontal",labelAlign:"right",labelCol:{span:3,offset:0},children:[(0,e.jsx)(le.Z,{label:"\u5F00\u542F",name:"enable"}),(0,e.jsx)(o.Z,{label:"\u90AE\u7BB1",name:"email",placeholder:"\u8BF7\u8F93\u5165\u4F60\u7684\u90AE\u7BB1",rules:[{required:!0},{type:"email"}]}),(0,e.jsx)(ne.Z,{name:"qrcode",hidden:!0}),(0,e.jsx)(Y.Z,{name:["qrcode"],children:function(T){var k=T.qrcode;if(k)return(0,e.jsx)(ne.Z,{label:"\u7ED1\u5B9A\u4E8C\u7EF4\u7801",tooltip:"\u4F7F\u7528\u652F\u6301 2fa \u7684\u9A8C\u8BC1 App \u626B\u7801\u8BE5\u4E8C\u7EF4\u7801",children:(0,e.jsx)(je.Z,{style:{border:"#d1d9e0b3 solid 1px",padding:"10px",borderRadius:"10px"},width:200,src:"data:image/png;base64,".concat(k)})})}})]})})}})]})}var xe={xs:6,sm:6,md:6,lg:3,xl:3,xxl:3,offset:0},ce=n(43425),ae=n(86615),Ce=n(64317),me=n(86125),Pe=n(184),V=n(24739),Se=n(25054),Be=n(90672),Ae=n(21532),Fe=n(86250),de=n(34879),ye=n(44349),ue=n(65451),Oe=n(2808),Te=n(3616),X=function(P){return(0,e.jsx)(Oe.Z,{name:P.name,label:P.label,tooltip:P.tooltip})},q={colorPrimary:"",colorTextBase:"",colorLink:"",colorBgContainer:"",colorBorder:"",colorBgElevated:"",colorBorderSecondary:"colorBorder"},De=["borderRadius","wireframe"],Me=(0,t.forwardRef)(function(C,P){(0,t.useImperativeHandle)(P,function(){return{show:function(){H(!0)},reset:function(){var v;(v=O.current)===null||v===void 0||v.resetFields(["siteLogo","siteTitle","siteCopyright","siteLink","bgImage","bgSize"])}}});var F=(0,t.useState)(!1),u=f()(F,2),J=u[0],H=u[1],O=(0,t.useRef)(),z=(0,t.useContext)(d.Z),$=z.message,y=z.lang;return(0,e.jsx)(Ae.ZP,{children:(0,e.jsxs)(Pe.a,{drawerProps:{forceRender:!0,width:Te.R_},submitter:{render:function(v,s){return(0,e.jsx)(A.Z,{children:s[1]})}},title:"\u81EA\u5B9A\u4E49\u4E3B\u9898",formRef:O,open:J,onOpenChange:function(v){var s;(s=O.current)===null||s===void 0||s.resetFields(["bgImageUpload","siteLogoUpload"]),v&&((0,ue.Py)().then(function(i){var c=i.data.config;if(c){var l;if((l=O.current)===null||l===void 0||l.setFieldsValue({siteLogo:c.siteLogo,siteTitle:c.siteTitle,siteCopyright:c.siteCopyright,siteLink:c.siteLink,bgImage:c.bgImage,loginLogo:c.loginLogo}),!c.bgImage||!c.bgImage.width||c.bgImage.width=="100%"){var R;(R=O.current)===null||R===void 0||R.setFieldValue("bgSize","full")}else{var m;(m=O.current)===null||m===void 0||m.setFieldValue("bgSize","default")}}}),Object.keys(q).map(function(i){var c=i;q[i]!=""&&(c=q[i]),O!=null&&O.current})),H(v)},name:"theme-user",onFinish:function(){var _=j()(r()().mark(function v(s){var i,c,l;return r()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return l={token:{},bgImage:s.bgImage,siteLink:s.siteLink,siteTitle:(i=s.siteTitle)!==null&&i!==void 0?i:"",siteCopyright:s.siteCopyright,siteLogo:(c=s.siteLogo)!==null&&c!==void 0?c:"",loginLogo:s.loginLogo},s.siteLogoUpload&&s.siteLogoUpload.length>0&&(l.siteLogo=s.siteLogoUpload[0].response.data.path),l.bgImage||(l.bgImage={}),s.bgImageUpload&&s.bgImageUpload.length>0&&(l.bgImage.src=s.bgImageUpload[0].response.data.path),l.bgImage.width=s.bgSize=="full"?"100%":"",s.loginLogoUpload&&s.loginLogoUpload.length>0&&(l.loginLogo=s.loginLogoUpload[0].response.data.path),Object.keys(q).map(function(h){l.token||(l.token={});var E=h;q[h]!=""&&(E=q[h]);var p=O.current&&O.current.getFieldValue(E);p&&p.toHexString?p.cleared||(l.token[h]=p.toHexString()):l.token[h]=p}),De.map(function(h){l.token||(l.token={});var E=O.current&&O.current.getFieldValue(h);l.token[h]=E}),m.next=10,(0,ue.Z8)(l);case 10:return C.onFinish&&C.onFinish(),$.success(y("notification.finishTheme")),m.abrupt("return",!0);case 13:case"end":return m.stop()}},v)}));return function(v){return _.apply(this,arguments)}}(),children:[(0,e.jsx)(V.UW,{title:"\u76AE\u80A4\u8272\u7CFB",extra:(0,e.jsx)(le.Z,{name:"enableColor"})}),(0,e.jsx)(Y.Z,{name:["enableColor"],children:function(v){var s=v.enableColor;return s&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(V.UW,{children:X({name:"colorPrimary",label:"\u54C1\u724C\u8272",tooltip:"\u54C1\u724C\u8272\u662F\u4F53\u73B0\u4EA7\u54C1\u7279\u6027\u548C\u4F20\u64AD\u7406\u5FF5\u6700\u76F4\u89C2\u7684\u89C6\u89C9\u5143\u7D20\u4E4B\u4E00\u3002\u5728\u4F60\u5B8C\u6210\u54C1\u724C\u4E3B\u8272\u7684\u9009\u53D6\u4E4B\u540E\uFF0C\u4F1A\u81EA\u52A8\u5E2E\u4F60\u751F\u6210\u4E00\u5957\u5B8C\u6574\u7684\u8272\u677F\uFF0C\u5E76\u8D4B\u4E88\u5B83\u4EEC\u6709\u6548\u7684\u8BBE\u8BA1\u8BED\u4E49"})}),(0,e.jsxs)(V.UW,{children:[X({name:"colorBgContainer",label:"\u4E3B\u7A97\u53E3\u80CC\u666F\u8272\u53CA\u900F\u660E\u5EA6"}),X({name:"colorBgElevated",label:"\u5F39\u51FA\u7A97\u80CC\u666F\u8272\u53CA\u900F\u660E\u5EA6"})]}),(0,e.jsxs)(V.UW,{children:[X({name:"colorTextBase",label:"\u57FA\u7840\u6587\u672C"}),X({name:"colorLink",label:"\u94FE\u63A5\u6587\u672C"}),X({name:"colorBorder",label:"\u8FB9\u6846\u8272"})]})]})}}),(0,e.jsx)(V.UW,{title:"\u98CE\u683C",extra:(0,e.jsx)(le.Z,{name:"enableStyle"})}),(0,e.jsx)(Y.Z,{name:["enableStyle"],children:function(v){var s=v.enableStyle;return s&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(V.UW,{children:(0,e.jsxs)(Fe.Z,{gap:40,children:[(0,e.jsx)(le.Z,{label:"\u7EBF\u6846\u5316",name:"wireframe"}),(0,e.jsx)(Se.Z,{min:1,max:16,label:"\u5706\u89D2",name:"borderRadius"})]})})})}}),(0,e.jsx)(V.UW,{title:"\u9762\u677F"}),(0,e.jsx)(o.Z,{label:"\u6807\u9898",name:"siteTitle",placeholder:"\u5C55\u793A\u5728\u9762\u677F\u5DE6\u4E0A\u89D2\u53CA\u9875\u9762\u6807\u7B7E\uFF0C\u4E3A\u7A7A\u5219\u4E0D\u663E\u793A"}),(0,e.jsxs)(V.UW,{children:[(0,e.jsx)(de.Z,{label:"Logo",title:"\u4E0A\u4F20 Logo",name:"siteLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(o.Z,{width:"md",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u8FDC\u7A0BUrl",name:"siteLogo"})]}),(0,e.jsxs)(V.UW,{children:[(0,e.jsx)(de.Z,{label:"\u80CC\u666F\u56FE",title:"\u4E0A\u4F20\u80CC\u666F\u56FE",name:"bgImageUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(o.Z,{width:"md",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u8FDC\u7A0BUrl",name:["bgImage","src"]}),(0,e.jsx)(ae.Z.Group,{name:"bgSize",label:"\u5C3A\u5BF8",initialValue:"full",valueEnum:{full:"\u5168\u5C4F",default:"\u9ED8\u8BA4"}})]}),(0,e.jsx)(V.UW,{children:(0,e.jsx)(Y.Z,{name:["bgSize"],children:function(v){var s=v.bgSize;if(s=="default")return(0,e.jsxs)(V.UW,{children:[(0,e.jsx)(g.Z,{width:"xs",name:["bgImage","top"],label:"\u8DDD\u9876\u90E8\u504F\u79FB\u91CF"}),(0,e.jsx)(g.Z,{width:"xs",name:["bgImage","bottom"],label:"\u8DDD\u5E95\u90E8\u504F\u79FB\u91CF"}),(0,e.jsx)(g.Z,{width:"xs",name:["bgImage","left"],label:"\u8DDD\u5DE6\u4FA7\u504F\u79FB\u91CF"}),(0,e.jsx)(g.Z,{width:"xs",name:["bgImage","right"],label:"\u8DDD\u53F3\u4FA7\u504F\u79FB\u91CF"})]})}})}),(0,e.jsx)(ye.Z,{name:"siteLink",label:"\u5E95\u90E8\u94FE\u63A5",showAddButton:!0,hideCopyButton:!0,gap:10,items:[{name:"title",label:"\u6587\u672C"},{name:"href",label:"\u94FE\u63A5"}]}),(0,e.jsx)(Be.Z,{label:"\u7248\u6743\u4FE1\u606F",name:"siteCopyright"}),(0,e.jsxs)(V.UW,{title:"\u767B\u5F55\u9875",children:[(0,e.jsx)(de.Z,{label:"Logo",title:"Logo",name:"loginLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(o.Z,{width:"md",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u8FDC\u7A0BUrl",name:"loginLogo"})]})]})})}),Ze=Me,Ue=n(68602);function Re(){var C=(0,t.useRef)(),P=(0,t.useRef)(),F=(0,G.useModel)("@@initialState"),u=F.initialState,J=F.loading,H=F.error,O=F.refresh,z=F.setInitialState,$=(0,G.useAccess)(),y=(0,t.useContext)(d.Z),_=y.message,v=y.lang,s=(0,G.useAntdConfigSetter)();return(0,t.useEffect)(function(){var i,c,l,R,m,h,E,p;(i=C.current)===null||i===void 0||i.setFieldsValue({algorithm:(c=u==null?void 0:u.theme.algorithm)!==null&&c!==void 0?c:"default",mainMenu:(l=u==null?void 0:u.theme.mainMenu)!==null&&l!==void 0?l:"top",compact:(R=u==null?void 0:u.theme.compact)!==null&&R!==void 0?R:"default",fontSize:(m=u==null?void 0:u.theme.fontSize)!==null&&m!==void 0?m:14,fontSizeConsole:(h=u==null?void 0:u.theme.fontSizeConsole)!==null&&h!==void 0?h:12,sideMenu:(E=u==null?void 0:u.theme.sideMenu)!==null&&E!==void 0?E:"default",tablePageSize:(p=u==null?void 0:u.theme.tablePageSize)!==null&&p!==void 0?p:"20"})},[u]),(0,e.jsx)(a.Z,{direction:"column",gutter:[0,10],ghost:!0,children:(0,e.jsxs)(a.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(ce.Z,{}),subTitle:"\u57FA\u672C\u914D\u7F6E",children:[!$.canSeeEnableCe&&(0,e.jsx)(Ze,{ref:P}),(0,e.jsxs)(I.A,{layout:"horizontal",labelAlign:"right",labelCol:xe,formRef:C,submitter:{render:function(c,l){return[l[1]]}},onFinish:function(){var i=j()(r()().mark(function c(l){var R;return r()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(R={algorithm:l.algorithm,mainMenu:l.mainMenu,sideMenu:l.sideMenu,compact:l.compact,fontSizeConsole:l.fontSizeConsole,fontSize:l.fontSize,tablePageSize:l.tablePageSize},!(l.algorithm!=(u==null?void 0:u.theme.algorithm)&&!$.canSeeEnableCe)){h.next=4;break}return h.next=4,(0,ue.H)({clearColor:!0});case 4:return localStorage.setItem("dpanel-theme",l.algorithm),localStorage.setItem("dpanel-compact",l.compact),localStorage.setItem("dpanel-pagesize",l.tablePageSize),h.next=9,(0,Ue.Gk)(R);case 9:_.success(v("notification.finishTheme"));case 10:case"end":return h.stop()}},c)}));return function(c){return i.apply(this,arguments)}}(),children:[(0,e.jsx)(ae.Z.Group,{name:"algorithm",label:"\u4E3B\u9898\u76AE\u80A4",initialValue:"default",radioType:"button",valueEnum:function(){var c={default:"\u4EAE\u8272",dark:"\u6697\u8272",system:"\u8DDF\u968F\u7CFB\u7EDF"};return c}}),(0,e.jsx)(b.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(c){var l=c.canSeeEnableCe;return(0,e.jsx)(Y.Z,{name:["algorithm"],children:function(m){var h=m.algorithm;if(h!="system")return(0,e.jsx)(ne.Z,{label:"\u81EA\u5B9A\u4E49\u76AE\u80A4\u914D\u7F6E",children:(0,e.jsxs)(A.Z.Compact,{children:[(0,e.jsx)(oe.ZP,{disabled:l,onClick:function(){var p;(p=P.current)===null||p===void 0||p.show()},icon:(0,e.jsx)(ce.Z,{}),children:"\u914D\u7F6E"}),(0,e.jsx)(U.Z,{disabled:l,action:j()(r()().mark(function E(){var p;return r()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,ue.H)({clearColor:!0,clearSite:!0});case 2:s(function(L){return L.theme={token:{}},L}),(p=P.current)===null||p===void 0||p.reset(),window.location.reload();case 5:case"end":return k.stop()}},E)})),children:"\u6062\u590D\u9ED8\u8BA4"})]})})}})}}),(0,e.jsx)(ae.Z.Group,{name:"mainMenu",label:"\u4E3B\u83DC\u5355\u4F4D\u7F6E",initialValue:"top",radioType:"button",valueEnum:{top:"\u9876\u90E8",side:"\u4FA7\u9762"}}),(0,e.jsx)(ae.Z.Group,{name:"sideMenu",label:"\u5DE6\u4FA7\u83DC\u5355",initialValue:"default",radioType:"button",valueEnum:{default:"\u9ED8\u8BA4\u5C55\u5F00",collapse:"\u9ED8\u8BA4\u6536\u7F29"}}),(0,e.jsx)(ae.Z.Group,{name:"compact",label:"\u6587\u672C\u5E03\u5C40",initialValue:"default",radioType:"button",valueEnum:{default:"\u9ED8\u8BA4",compact:"\u7D27\u51D1"}}),(0,e.jsx)(ne.Z,{name:"fontSize",label:"\u4E3B\u9898\u5B57\u53F7",initialValue:14,children:(0,e.jsx)(me.Z,{step:2,max:30,min:8,marks:{8:"8",10:"10",12:"12",14:"14",16:"16",20:"20",26:"26",30:"20"}})}),(0,e.jsx)(ne.Z,{name:"fontSizeConsole",label:"\u63A7\u5236\u53F0\u5B57\u53F7",initialValue:12,children:(0,e.jsx)(me.Z,{step:2,max:30,min:8,marks:{8:"8",10:"10",12:"12",14:"14",16:"16",20:"20",26:"26",30:"20"}})}),(0,e.jsx)(Ce.Z,{initialValue:"20",label:"\u8868\u683C\u5206\u9875\u6570",name:"tablePageSize",valueEnum:{10:"\u6BCF\u987510\u6761",20:"\u6BCF\u987520\u6761",50:"\u6BCF\u987550\u6761",100:"\u6BCF\u9875100\u6761",all:"\u663E\u793A\u5168\u90E8"}})]})]})})}var Ie=n(90078),Le=n(92398);function We(){var C=(0,G.useSearchParams)(),P=f()(C,2),F=P[0],u=P[1],J=(0,t.useState)("user"),H=f()(J,2),O=H[0],z=H[1],$=(0,G.useAccess)();return(0,t.useEffect)(function(){var y;z((y=F.get("tab"))!==null&&y!==void 0?y:"user")},[]),(0,e.jsx)(Ie._z,{children:(0,e.jsx)(a.Z,{children:(0,e.jsx)(Le.Z,{activeKey:O,onChange:function(_){z(_),u("tab="+_)},items:[{key:"user",label:"\u767B\u5F55\u914D\u7F6E",children:(0,e.jsx)(pe,{})},{key:"theme",label:"\u754C\u9762\u914D\u7F6E",children:(0,e.jsx)(Re,{})},{key:"notice",label:"\u901A\u77E5\u670D\u52A1",children:(0,e.jsx)(he,{})}].filter(function(y){return!($.canSeeEnableCe&&y.key=="notice")})})})})}},97961:function(Q,D,n){n.d(D,{GH:function(){return K},MF:function(){return g},_2:function(){return I},fN:function(){return Z},ii:function(){return r},vC:function(){return d}});var M=n(15009),f=n.n(M),W=n(99289),S=n.n(W),w=n(82346),r=[{name:"amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"i386",arch:"386",search:[]},{name:"arm/v6",arch:"arm",search:[]},{name:"arm/v7",arch:"arm",search:[]},{name:"arm/v8",arch:"arm64",search:[]},{name:"ppc64le",arch:"ppc64le",search:[]},{name:"riscv64",arch:"riscv64",search:[]}];function Z(t){return j.apply(this,arguments)}function j(){return j=S()(f()().mark(function t(A){return f()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,w.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:A}));case 1:case"end":return b.stop()}},t)})),j.apply(this,arguments)}function d(t){return x.apply(this,arguments)}function x(){return x=S()(f()().mark(function t(A){return f()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,w.request)("/api/app/image/import-by-container-tar",{method:"POST",data:A}));case 1:case"end":return b.stop()}},t)})),x.apply(this,arguments)}function K(t){return a.apply(this,arguments)}function a(){return a=S()(f()().mark(function t(A){return f()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,w.request)("/api/app/image/import-by-image-tar",{method:"POST",data:A}));case 1:case"end":return b.stop()}},t)})),a.apply(this,arguments)}function I(t){return o.apply(this,arguments)}function o(){return o=S()(f()().mark(function t(A){return f()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,w.request)("/api/common/attach/delete",{method:"POST",data:A});case 2:return b.abrupt("return",b.sent);case 3:case"end":return b.stop()}},t)})),o.apply(this,arguments)}function g(){return B.apply(this,arguments)}function B(){return B=S()(f()().mark(function t(){return f()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",(0,w.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return U.stop()}},t)})),B.apply(this,arguments)}}}]);
