"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3357],{76428:function(Y,m,t){t.d(m,{Z:function(){return D}});var f=t(25593),E=t(67294),u=t(85893);function D(x){return(0,u.jsx)(f.Z.Text,{copyable:!0,children:x.title})}},70977:function(Y,m,t){t.r(m),t.d(m,{default:function(){return ue}});var f=t(5574),E=t.n(f),u=t(3393),D=t(43425),x=t(58638),Z=t(1912),X=t(87784),h=t(40666),H=t(77171),J=t(48689),P=t(45742),r=t(38345),A=t(97269),R=t(62370),Q=t(7529),w=t(5966),C=t(54006),O=t(42075),k=t(96074),q=t(65233),L=t(2487),ee=t(4393),j=t(66309),U=t(25593),i=t(26412),ne=t(63490),l=t(67294),_=t(80821),te=t(5251),K=t(93162),fe=t.n(K),oe=t(18148),se=t(96042),ie=t(24963),ae=t(76428),n=t(85893);function ue(){var M,T=(0,l.useContext)(ie.Z),re=T.message,le=T.notice,S=T.lang,de=(0,l.useState)(),W=E()(de,2),e=W[0],_e=W[1],p=(0,C.useParams)(),F=(0,l.useRef)(),ce=(0,l.useState)(0),y=E()(ce,2),g=y[0],B=y[1],Ee=(0,C.useNavigate)(),b=(0,C.useAccess)(),ve=(0,l.useState)(),$=E()(ve,2),c=$[0],me=$[1],ge=(0,l.useState)(""),z=E()(ge,2),N=z[0],G=z[1];return(0,l.useEffect)(function(){p.id&&(0,u.YU)({md5:p.id}).then(function(o){_e(o.data),b.canSeeImageRemoteTag&&(0,u.cd)({imageName:o.data.info.RepoTags[0]}).then(function(s){me(s.data.list)}).finally(function(){})})},[g]),(0,n.jsx)("div",{children:(0,n.jsxs)(r.Z,{direction:"column",ghost:!0,gutter:[0,10],children:[(0,n.jsx)(r.Z,{title:(0,n.jsx)(D.Z,{}),subTitle:"\u5E38\u7528\u64CD\u4F5C",headerBordered:!0,bordered:!0,children:(0,n.jsxs)(O.Z,{children:[(0,n.jsx)(_.Z,{icon:(0,n.jsx)(x.Z,{}),action:function(){var s;return(0,u.Rb)({md5:(s=e==null?void 0:e.info.RepoTags)!==null&&s!==void 0?s:[""]})},onSuccess:function(s){var a=new Blob([s],{type:"application/tar"});(0,K.saveAs)(a,(e==null?void 0:e.info.RepoTags.join("-"))+".tar")},messageSuccess:"\u5BFC\u51FA\u6210\u529F",children:"\u5BFC\u51FA"}),(0,n.jsx)(_.Z,{icon:(0,n.jsx)(Z.Z,{}),action:function(){var s;return(0,u.Gb)({tag:(s=e==null?void 0:e.info.RepoTags[0])!==null&&s!==void 0?s:"",type:"push",asLatest:!0})},type:"primary",messageSuccess:"image.pushed",onSuccess:function(){B(g+1)},children:"Push As Latest"}),(0,n.jsx)(k.Z,{}),(0,n.jsx)(_.Z,{icon:(0,n.jsx)(X.Z,{}),danger:!0,type:"primary",action:function(){var s;return(0,oe.ao)({md5:[(s=e==null?void 0:e.info.Id)!==null&&s!==void 0?s:""],force:!0})},onSuccess:function(){Ee("/image/list")},confirm:"\u662F\u5426\u8981\u505C\u6B62\u8BE5\u955C\u50CF\u4E0B\u7684\u5BB9\u5668\u5E76\u5F3A\u5236\u5220\u9664\uFF1F",messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u5F3A\u5236\u5220\u9664"})]})}),b.canSeeImageRemoteTag&&(0,n.jsx)(r.Z,{title:(0,n.jsx)(h.Z,{}),subTitle:"\u8FDC\u7A0B Tag \u5217\u8868",extra:(0,n.jsx)(A.A,{isKeyPressSubmit:!0,submitter:!1,onFinish:function(s){G(s.search)},children:(0,n.jsx)(O.Z.Compact,{children:(0,n.jsx)(R.Z,{style:{margin:0},name:"search",children:(0,n.jsx)(q.Z,{allowClear:!0,addonBefore:"\u641C\u7D22Tag",placeholder:"\u6309\u56DE\u8F66\u67E5\u8BE2",onClear:function(){G("")}})})})},"form"),children:(0,n.jsx)(L.Z,{pagination:{pageSize:36},rowKey:function(s){return"".concat(s)},grid:{gutter:10,xs:3,sm:3,md:4,lg:4,xl:5,xxl:6},dataSource:c&&c.filter(function(o){return!N||o.indexOf(N)!==-1}),loading:!c||(c==null?void 0:c.length)<=0,renderItem:function(s,a){return(0,n.jsx)(L.Z.Item,{children:(0,n.jsx)(ee.Z,{style:{height:"60px"},children:(0,n.jsx)("div",{style:{margin:"-10px",wordBreak:"break-word"},children:(0,n.jsx)(ae.Z,{title:s})})})},a)}})}),(0,n.jsx)(r.Z,{bordered:!0,title:(0,n.jsx)(h.Z,{}),subTitle:"Tag \u5217\u8868",children:(0,n.jsx)(Q.Rs,{grid:{gutter:40,column:2},headerTitle:!1,metas:{content:{render:function(s,a,v){return(0,n.jsx)(j.Z,{color:"blue",children:(0,n.jsx)(U.Z.Text,{copyable:!0,children:a})},v)}},title:{render:function(s,a,v){return(0,n.jsxs)(O.Z,{children:[(0,n.jsxs)(_.Z,{action:function(){return(0,u.Gb)({tag:a,type:"push"})},messageSuccess:"image.pushed",children:[(0,n.jsx)(Z.Z,{})," Push"]}),(0,n.jsxs)(_.Z,{action:function(){return(0,u.Gb)({tag:a,type:"pull"})},messageSuccess:"image.pulled",children:[(0,n.jsx)(H.Z,{})," Pull"]}),(0,n.jsx)(_.Z,{action:function(){return(0,u.Pn)({tag:a})},onSuccess:function(V){return B(g+1),!0},messageSuccess:"tag.delete",confirm:"\u662F\u5426\u786E\u8BA4\u5220\u9664\u6807\u7B7E",children:(0,n.jsx)(J.Z,{})})]},v)}}},dataSource:e==null?void 0:e.info.RepoTags})}),(0,n.jsx)(r.Z,{bordered:!0,headerBordered:!0,title:(0,n.jsx)(h.Z,{}),subTitle:"\u65B0\u589E Tag",children:(0,n.jsxs)(A.A,{formRef:F,onFinish:function(s){return new Promise(function(a,v){var d;return(!e||!(e!=null&&e.info))&&(le.error(S("image.notFound")),v(!0)),(0,u._U)({md5:(d=e==null?void 0:e.info.Id)!==null&&d!==void 0?d:"",tag:(s.imageRespo?s.imageRespo.serverAddress+"/":"")+s.imageTag}).then(function(V){var I;re.success(S("tag.add"),V.data.tag),B(g+1),(I=F.current)===null||I===void 0||I.resetFields(),a(!0)})})},children:[(0,n.jsx)(R.Z,{label:"\u955C\u50CF\u4ED3\u5E93",name:"imageRespo",tooltip:(0,n.jsxs)(n.Fragment,{children:["\u63A8\u9001\u524D\u8BF7\u4FDD\u8BC1\u4ED3\u5E93\u4E2D\u6709\u6307\u5B9A\u7684\u547D\u540D\u7A7A\u95F4, \u5982\u6CA1\u6709\u8BF7\u5148 ",(0,n.jsx)("a",{href:"",target:"_blank",children:"\u6DFB\u52A0\u4ED3\u5E93"})]}),children:(0,n.jsx)(se.Z,{})}),(0,n.jsx)(w.Z,{fieldProps:{min:2,max:255},rules:[{required:!0}],required:!0,placeholder:"\u53EA\u80FD\u4F7F\u7528\u5C0F\u5199\u82F1\u6587\u5B57\u7B26\u3001\u6570\u5B57\u3001_\u3001-\u3001",label:"\u955C\u50CF\u540D\u79F0",name:"imageTag",tooltip:"\u4F8B\u5982: name:tag\u3001namespace/name:tag\u3001registry/namespace/name:tag"})]})}),(0,n.jsx)(r.Z,{bordered:!0,headerBordered:!0,title:(0,n.jsx)(P.Z,{}),subTitle:"\u955C\u50CF\u8BE6\u60C5",children:(0,n.jsxs)(i.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,n.jsx)(i.Z.Item,{label:"ID",children:e==null?void 0:e.info.Id}),(0,n.jsx)(i.Z.Item,{label:"Parent",children:e==null?void 0:e.info.Parent}),(0,n.jsx)(i.Z.Item,{label:"Size",children:(0,te.FI)((M=e==null?void 0:e.info.Size)!==null&&M!==void 0?M:0)}),(0,n.jsx)(i.Z.Item,{label:"Created",children:e==null?void 0:e.info.Created}),(0,n.jsxs)(i.Z.Item,{label:"Build",children:["Docker ",e==null?void 0:e.info.DockerVersion," ",e==null?void 0:e.info.Os," ",e==null?void 0:e.info.Architecture]}),(0,n.jsx)(i.Z.Item,{label:"Labels",children:(0,n.jsx)(i.Z,{column:1,bordered:!0,children:(e==null?void 0:e.info.Config.Labels)&&Object.keys(e==null?void 0:e.info.Config.Labels).map(function(o){return(0,n.jsx)(i.Z.Item,{label:o,children:(0,n.jsx)(U.Z.Text,{style:{width:"400px"},ellipsis:{tooltip:e==null?void 0:e.info.Config.Labels[o]},children:e==null?void 0:e.info.Config.Labels[o]})},o)})})})]})}),(0,n.jsx)(r.Z,{bordered:!0,headerBordered:!0,title:(0,n.jsx)(P.Z,{}),subTitle:"Dockerfile \u8BE6\u60C5",children:(0,n.jsxs)(i.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,n.jsx)(i.Z.Item,{label:"CMD",children:e==null?void 0:e.info.Config.Cmd}),(0,n.jsx)(i.Z.Item,{label:"ENTRYPOINT",children:e==null?void 0:e.info.Config.Entrypoint}),(0,n.jsx)(i.Z.Item,{label:"EXPOSE",children:(e==null?void 0:e.info.Config.ExposedPorts)&&Object.keys(e==null?void 0:e.info.Config.ExposedPorts).map(function(o){return(0,n.jsx)(j.Z,{color:"gray",children:o},o)})}),(0,n.jsx)(i.Z.Item,{label:"VOLUME",children:(e==null?void 0:e.info.Config.Volumes)&&Object.keys(e==null?void 0:e.info.Config.Volumes).map(function(o){return(0,n.jsx)(j.Z,{color:"gray",children:o},o)})}),(0,n.jsx)(i.Z.Item,{label:"Env",children:(0,n.jsx)(i.Z,{column:1,bordered:!0,children:(e==null?void 0:e.info.Config.Env)&&(e==null?void 0:e.info.Config.Env.map(function(o,s){var a=o.split("=");return(0,n.jsx)(i.Z.Item,{label:a[0],children:a[1]},s)}))})})]})}),(0,n.jsxs)(r.Z,{bordered:!0,headerBordered:!0,title:(0,n.jsx)(P.Z,{}),subTitle:"Layers",children:[(0,n.jsx)(ne.Z,{rowKey:"CreatedBy",dataSource:e==null?void 0:e.layer.reverse(),columns:[{title:"Layer",dataIndex:"CreatedBy",key:"CreatedBy"}]}),";"]})]})})}}}]);
