"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4214],{1699:function(X,R,n){n.d(R,{u:function(){return O}});var Z=n(9783),m=n.n(Z),C=n(97857),i=n.n(C),p=n(67294),x=n(82346),L=n(42075),_=n(85893),O=function(d){var T=(0,x.useAccess)(),y=Array.isArray(d.access)?d.access:[d.access],I;return typeof d.children=="function"?I=d.children(y.reduce(function(b,A){return i()(i()({},b),{},m()({},A,T[A]))},{})):y.every(function(b){return T[b]})?I=d.children:I=d.fallback,d.space?(0,_.jsx)(L.Z,i()(i()({},d.space),{},{children:I})):I}},80821:function(X,R,n){n.d(R,{Z:function(){return O}});var Z=n(5574),m=n.n(Z),C=n(24963),i=n(86738),p=n(28036),x=n(83062),L=n(67294),_=n(85893);function O(u){var d=(0,L.useState)(!1),T=m()(d,2),y=T[0],I=T[1],b=(0,L.useContext)(C.Z),A=b.lang,M=b.notice,B=b.message,D=function(){I(!0);var q=u.action();q instanceof Promise?q.then(function(v){if(I(!1),v){typeof u.onSuccess=="function"&&u.onSuccess(v);var a="";u.messageSuccess?typeof u.messageSuccess=="function"?a=u.messageSuccess(v):a=u.messageSuccess.indexOf("notification.")==0?A(u.messageSuccess):u.messageSuccess:a=A("notification.finish"),u.asynced?B.info(a):B.success(a)}}).catch(function(v){I(!1),typeof u.onError=="function"&&u.onError(v)}):I(!1)};return u.confirm?(0,_.jsx)(i.Z,{style:{width:500},title:u.confirmTitle?u.confirmTitle:A("notification.title.tip"),description:typeof u.confirm=="string"&&u.confirm.indexOf("notification.")==0?A(u.confirm):u.confirm,onConfirm:D,okText:"Yes",cancelText:"No",onOpenChange:u.confirmOnOpenChange,children:(0,_.jsx)(p.ZP,{block:u.block,disabled:u.disabled,icon:!u.children&&y?void 0:u.icon,loading:y,danger:u.danger,type:u.type,children:u.children})}):(0,_.jsx)(x.Z,{title:u.tips,children:(0,_.jsx)(p.ZP,{block:u.block,style:u.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:u.disabled,icon:!u.children&&y?void 0:u.icon,loading:y,onClick:D,danger:u.danger,type:u.type,children:u.children})})}},81366:function(X,R,n){var Z=n(19632),m=n.n(Z),C=n(5574),i=n.n(C),p=n(27254),x=n(42075),L=n(28036),_=n(25593),O=n(67294),u=n(31112),d=n(85893),T=(0,O.forwardRef)(function(y,I){var b=(0,O.useContext)(u.Z),A=b.showPath,M=(0,O.useState)([{title:"\u6839\u76EE\u5F55",path:"/"}]),B=i()(M,2),D=B[0],G=B[1];(0,O.useImperativeHandle)(I,function(){return{addHistory:function(a,S){G([].concat(m()(D),[{title:a,path:S}]))},initHistory:function(a){G([{title:"\u6839\u76EE\u5F55",path:"/"}].concat(m()(a)))}}});var q=function(a){A?A(D[a].title,D[a].path):y.showPath&&y.showPath(D[a].title,D[a].path);var S=D.filter(function(o,ue){return ue<=a});G(m()(S))};return(0,d.jsxs)(x.Z,{children:[(0,d.jsx)(x.Z.Compact,{children:D.map(function(v,a){return(0,d.jsx)(L.ZP,{icon:(0,d.jsx)(p.Z,{}),type:"dashed",onClick:function(){q(a)},children:v.title},a)})}),D.length>=2&&(0,d.jsx)(_.Z.Text,{copyable:{text:D[D.length-1].path}})]})});R.Z=T},31112:function(X,R,n){var Z=n(67294),m=(0,Z.createContext)({});R.Z=m},68536:function(X,R,n){n.d(R,{Z:function(){return u}});var Z=n(24963),m=n(93613),C=n(36693),i=n(2741),p=n(25593),x=n(42075),L=n(67294),_=n(85893),O=0;function u(d){var T=(0,L.useContext)(Z.Z),y=T.message;return d.isDir?(0,_.jsx)(p.Z.Link,{onClick:function(){d.onClick&&d.onClick()},children:(0,_.jsxs)(x.Z,{children:[(0,_.jsx)(m.Z,{}),d.showName]})}):d.isLink?(0,_.jsx)(p.Z.Link,{onClick:function(){d.onClick&&d.onClick()},children:(0,_.jsxs)(x.Z,{children:[(0,_.jsx)(C.Z,{}),d.showName]})}):(0,_.jsx)(p.Z.Text,{onClick:function(){if(O++,O==2){O=0,d.onClick&&d.onClick();return}setTimeout(function(){O==1&&y.info("\u53CC\u51FB\u67E5\u770B\u6587\u4EF6\u5185\u5BB9"),O=0},400)},style:{cursor:"pointer"},children:(0,_.jsxs)(x.Z,{children:[(0,_.jsx)(i.Z,{}),d.showName]})})}},92754:function(X,R,n){var Z=n(5574),m=n.n(Z),C=n(67294),i=n(82346),p=n(38703),x=n(85893),L=(0,C.forwardRef)(function(_,O){var u=(0,C.useState)(""),d=m()(u,2),T=d[0],y=d[1];(0,C.useImperativeHandle)(O,function(){return{setFinish:function(){B({finish:{downloading:100,extracting:100}})},setStart:function(G){G&&y(G),B({start:{downloading:0,extracting:0}})},close:function(){I.progress.close("image:pull:"+T),B({start:{downloading:0,extracting:0}})}}});var I=(0,i.useModel)("subscriber");I.addDataHandler("image:pull:"+T,function(D){B(D.data)});var b=(0,C.useState)(),A=m()(b,2),M=A[0],B=A[1];return(0,C.useEffect)(function(){return B({start:{downloading:0,extracting:0}}),function(){I.progress.close("image:pull:"+T)}},[]),(0,x.jsx)(x.Fragment,{children:M&&Object.keys(M).map(function(D){return(0,x.jsx)(p.Z,{percent:M[D].downloading,success:{percent:M[D].extracting}},D)})})});R.Z=L},76428:function(X,R,n){n.d(R,{Z:function(){return i}});var Z=n(25593),m=n(67294),C=n(85893);function i(p){return(0,C.jsx)(Z.Z.Text,{copyable:!0,children:p.title})}},24963:function(X,R,n){var Z=n(67294),m=(0,Z.createContext)({});R.Z=m},65913:function(X,R,n){var Z=n(5574),m=n.n(Z),C=n(74330),i=n(67294),p=n(85893),x=(0,i.forwardRef)(function(L,_){(0,i.useImperativeHandle)(_,function(){return{show:function(){T(!0)},destroy:function(){T(!1)}}});var O=(0,i.useState)(!1),u=m()(O,2),d=u[0],T=u[1];return(0,p.jsx)(C.Z,{spinning:d,size:"default",children:L.children})});R.Z=x},7267:function(X,R,n){n.r(R),n.d(R,{default:function(){return Ne}});var Z=n(19632),m=n.n(Z),C=n(15009),i=n.n(C),p=n(99289),x=n.n(p),L=n(5574),_=n.n(L),O=n(90078),u=n(78099),d=n(97269),T=n(62370),y=n(37476),I=n(5966),b=n(28036),A=n(25593),M=n(42075),B=n(66309),D=n(96074),G=n(83062),q=n(84567),v=n(50136),a=n(67294),S=n(82346),o=n(18148),ue=n(5251),se=n(80821),Ce=n(43425),he=n(64789),pe=n(58638),_e=n(1912),De=n(28307),ve=n(96042),ge=n(67255),Ee=n(24963),ae=n(3393),Pe=n(93162),Re=n(95591),ce=n(184),de=n(68536),Oe=n(81366),e=n(85893),Te=(0,a.forwardRef)(function(w,te){(0,a.useImperativeHandle)(te,function(){return{show:function(){}}});var re=(0,a.useState)(""),Q=_()(re,2),$=Q[0],g=Q[1],t=(0,a.useState)(!1),N=_()(t,2),J=N[0],V=N[1],Y=(0,a.useRef)(),z=(0,a.useRef)(),k=function(c,r){g(r)};return(0,e.jsx)(ce.a,{open:J,submitter:!1,title:"\u955C\u50CF\u6587\u4EF6\u67E5\u770B",onOpenChange:function(c){V(c),g(c?"/":"")},trigger:(0,e.jsx)(A.Z.Link,{children:(0,e.jsx)(Re.Z,{})},"file"),children:(0,e.jsx)(u.Z,{headerTitle:(0,e.jsx)(Oe.Z,{ref:z,showPath:k}),scroll:{x:"max-content"},search:!1,rowKey:"showName",pagination:{pageSize:500,position:["topRight","bottomRight"]},actionRef:Y,request:x()(i()().mark(function E(){var c;return i()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(console.log($),$!=""){f.next=3;break}return f.abrupt("return",{data:[],total:0,success:!0});case 3:return f.next=5,(0,ae.cD)({md5:w.imageInfo.info.Id,path:$});case 5:return c=f.sent,f.abrupt("return",{data:c.data.info,total:c.data.info.length,success:!0});case 7:case"end":return f.stop()}},E)})),columns:[{title:"\u540D\u79F0",dataIndex:"showName",key:"name",render:function(s,r,f,j,l){var s;return r.isDir?s=(0,e.jsx)(de.Z,{isDir:!0,onClick:function(){return k(r.showName,r.name)},showName:r.showName}):r.linkName?s=(0,e.jsx)(de.Z,{isLink:!0,showName:"".concat(r.showName)}):s=(0,e.jsx)(de.Z,{showName:r.showName}),s}},{title:"\u6743\u9650",dataIndex:"mode",key:"mode"},{title:"\u7528\u6237",dataIndex:"owner"},{title:"\u7528\u6237\u7EC4",dataIndex:"group"},{title:"\u5927\u5C0F",dataIndex:"size",key:"size"},{title:"\u4FEE\u6539\u65F6\u95F4",dataIndex:"modTime",key:"modTime",render:function(c,r,f,j,l){return(0,ue.NF)(r.modTime)},sorter:function(c,r){return new Date(c.modTime).getTime()-new Date(r.modTime).getTime()}}],cardProps:{ghost:!0}},"".concat(w.imageInfo.info.Id,"-").concat($))})}),Ie=Te,xe=n(65913),Ae=n(40666),Fe=n(77171),Ze=n(48689),fe=n(45742),oe=n(38345),ye=n(91708),Me=n(85265),K=n(26412),Se=n(60940),be=n(65233),je=n(2487),Be=n(4393),Le=n(76428),Ue=(0,a.forwardRef)(function(w,te){(0,a.useImperativeHandle)(te,function(){return{show:function(j){return x()(i()().mark(function l(){var s,P;return i()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return c(!0),(s=r.current)===null||s===void 0||s.show(),h.prev=2,h.next=5,(0,ae.cd)({imageName:j}).finally(function(){var W;(W=r.current)===null||W===void 0||W.destroy()});case 5:P=h.sent,t(P.data.list),h.next=12;break;case 9:h.prev=9,h.t0=h.catch(2),c(!1);case 12:case"end":return h.stop()}},l,null,[[2,9]])}))()}}});var re=(0,S.useAccess)(),Q=(0,a.useState)(),$=_()(Q,2),g=$[0],t=$[1],N=(0,a.useState)(""),J=_()(N,2),V=J[0],Y=J[1],z=(0,a.useState)(!1),k=_()(z,2),E=k[0],c=k[1],r=(0,a.useRef)();return(0,e.jsx)(ce.a,{open:E,onOpenChange:function(j){c(j),!j&&t(void 0)},title:"\u8FDC\u7A0B Tag \u5217\u8868",isKeyPressSubmit:!0,submitter:!1,drawerProps:{extra:(0,e.jsx)(d.A,{isKeyPressSubmit:!0,onFinish:function(j){Y(j.search)},submitter:!1,children:(0,e.jsx)(M.Z.Compact,{children:(0,e.jsx)(T.Z,{style:{margin:0},name:"search",children:(0,e.jsx)(be.Z,{allowClear:!0,addonBefore:"\u641C\u7D22Tag",placeholder:"\u6309\u56DE\u8F66\u67E5\u8BE2",onClear:function(){Y("")}})})})})},children:(0,e.jsx)(xe.Z,{ref:r,children:(0,e.jsx)(je.Z,{rowKey:function(j){return"".concat(j)},grid:{gutter:10,xs:3,sm:3,md:4,lg:4,xl:5,xxl:6},dataSource:g&&g.filter(function(f){return!V||f.indexOf(V)!==-1}),loading:!g||(g==null?void 0:g.length)<=0,renderItem:function(j,l){return(0,e.jsx)(je.Z.Item,{children:(0,e.jsx)(Be.Z,{style:{height:"60px"},children:(0,e.jsx)("div",{style:{margin:"-10px",wordBreak:"break-word"},children:(0,e.jsx)(Le.Z,{title:j})})})},l)}})})},"form")}),We=Ue;function Ke(w){var te=(0,a.useRef)(),re=(0,a.useState)(!1),Q=_()(re,2),$=Q[0],g=Q[1];return(0,e.jsxs)(ce.a,{open:$,title:"\u589E\u52A0\u955C\u50CF Tag",onOpenChange:function(N){g(N)},formRef:te,onFinish:function(){var t=x()(i()().mark(function N(J){var V,Y,z;return i()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,ae._U)({md5:(V=w.imageInfo.info.Id)!==null&&V!==void 0?V:"",tag:(J.imageRespo?J.imageRespo.serverAddress+"/":"")+J.imageTag});case 2:z=E.sent,g(!1),(Y=te.current)===null||Y===void 0||Y.resetFields(),w.onFinish&&w.onFinish();case 6:case"end":return E.stop()}},N)}));return function(N){return t.apply(this,arguments)}}(),trigger:(0,e.jsx)(G.Z,{title:"\u589E\u52A0\u955C\u50CFTag",children:(0,e.jsx)(b.ZP,{type:"link",icon:(0,e.jsx)(he.Z,{})})}),children:[(0,e.jsx)(T.Z,{label:"\u955C\u50CF\u4ED3\u5E93",name:"imageRespo",tooltip:(0,e.jsxs)(e.Fragment,{children:["\u63A8\u9001\u524D\u8BF7\u4FDD\u8BC1\u4ED3\u5E93\u4E2D\u6709\u6307\u5B9A\u7684\u547D\u540D\u7A7A\u95F4, \u5982\u6CA1\u6709\u8BF7\u5148 ",(0,e.jsx)("a",{href:"",target:"_blank",children:"\u6DFB\u52A0\u4ED3\u5E93"})]}),children:(0,e.jsx)(ve.Z,{})}),(0,e.jsx)(I.Z,{fieldProps:{min:2,max:255},rules:[{required:!0}],required:!0,placeholder:"\u53EA\u80FD\u4F7F\u7528\u5C0F\u5199\u82F1\u6587\u5B57\u7B26\u3001\u6570\u5B57\u3001_\u3001-\u3001",label:"\u955C\u50CF\u540D\u79F0",name:"imageTag",tooltip:"\u4F8B\u5982: name:tag\u3001namespace/name:tag\u3001registry/namespace/name:tag"})]})}var ie=n(1699),we=(0,a.forwardRef)(function(w,te){var re;(0,a.useImperativeHandle)(te,function(){return{show:function(W){return x()(i()().mark(function F(){return i()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return z(!0),H.next=3,U(W);case 3:case"end":return H.stop()}},F)}))()}}});var Q=(0,a.useRef)(),$=(0,a.useState)(),g=_()($,2),t=g[0],N=g[1],J=(0,a.useState)(!1),V=_()(J,2),Y=V[0],z=V[1],k=(0,a.useContext)(Ee.Z),E=k.message,c=(0,a.useState)(0),r=_()(c,2),f=r[0],j=r[1],l=(0,S.useNavigate)(),s=(0,S.useAccess)(),P=(0,a.useRef)(),U=function(){var h=x()(i()().mark(function W(F){var ne,H;return i()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return(ne=Q.current)===null||ne===void 0||ne.show(),ee.next=3,(0,ae.YU)({md5:F,showLayer:!0}).finally(function(){var me;(me=Q.current)===null||me===void 0||me.destroy()});case 3:H=ee.sent,N(H.data);case 5:case"end":return ee.stop()}},W)}));return function(F){return h.apply(this,arguments)}}();return(0,a.useEffect)(function(){t&&U(t==null?void 0:t.info.Id)},[f]),(0,e.jsx)(Me.Z,{title:"\u5FEB\u6377\u67E5\u770B\u955C\u50CF",open:Y,onClose:function(){z(!1),w.onClose&&w.onClose()},width:800,extra:(0,e.jsxs)(M.Z,{split:(0,e.jsx)(D.Z,{type:"vertical"}),children:[(t==null?void 0:t.info)&&(0,e.jsx)(Ie,{imageInfo:t}),(t==null?void 0:t.info)&&(0,e.jsx)(Ke,{imageInfo:t,onFinish:function(){U(t.info.Id)}})]}),children:(0,e.jsxs)(xe.Z,{ref:Q,children:[!s.canSeeEnableCe&&(0,e.jsx)(We,{ref:P}),(0,e.jsxs)(oe.Z,{direction:"column",ghost:!0,gutter:[0,10],children:[(0,e.jsx)(oe.Z,{title:(0,e.jsx)(Ae.Z,{}),subTitle:"Tag \u5217\u8868",ghost:!0,children:(0,e.jsx)(ye.Rs,{grid:{gutter:40,column:2},headerTitle:!1,metas:{content:{render:function(W,F,ne){return(0,e.jsx)(B.Z,{color:"blue",children:(0,e.jsx)(A.Z.Text,{copyable:!0,children:F})},ne)}},title:{render:function(W,F,ne){return(0,e.jsxs)(M.Z,{children:[(0,e.jsxs)(se.Z,{action:function(){return(0,ae.Gb)({tag:F,type:"push"})},children:[(0,e.jsx)(_e.Z,{})," Push"]}),(0,e.jsxs)(se.Z,{action:function(){return(0,ae.Gb)({tag:F,type:"pull"})},children:[(0,e.jsx)(Fe.Z,{})," Pull"]}),!s.canSeeEnableCe&&(0,e.jsx)(b.ZP,{onClick:function(){var le;(le=P.current)===null||le===void 0||le.show(F)},children:"\u8FDC\u7A0BTag"}),(0,e.jsx)(ie.u,{access:"canSeeImageListManage",children:(0,e.jsx)(se.Z,{action:function(){return(0,ae.Pn)({tag:F})},danger:!0,onSuccess:function(le){return j(f+1),!0},confirm:"notification.confirm.title",children:(0,e.jsx)(Ze.Z,{})})})]},ne)}}},dataSource:t==null?void 0:t.info.RepoTags})}),t&&(0,e.jsx)(oe.Z,{title:(0,e.jsx)(fe.Z,{}),subTitle:"\u955C\u50CF\u8BE6\u60C5",ghost:!0,children:(0,e.jsxs)(K.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,e.jsx)(K.Z.Item,{label:"ID",children:(0,e.jsx)(A.Z.Text,{editable:{tooltip:"\u4FEE\u6539\u955C\u50CF\u5907\u6CE8\u540D\u79F0",onChange:function(){var h=x()(i()().mark(function F(ne){var H;return i()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,(0,o.Fj)({tag:t==null?void 0:t.info.RepoTags[0],title:ne});case 2:H=ee.sent,U(t.info.Id),E.success("\u4FEE\u6539\u955C\u50CF\u540D\u79F0\u6210\u529F");case 5:case"end":return ee.stop()}},F)}));function W(F){return h.apply(this,arguments)}return W}()},children:t==null?void 0:t.info.Id})}),(0,e.jsx)(K.Z.Item,{label:"Parent",children:t==null?void 0:t.info.Parent}),(0,e.jsx)(K.Z.Item,{label:"Size",children:(0,ue.FI)((re=t==null?void 0:t.info.Size)!==null&&re!==void 0?re:0)}),(0,e.jsx)(K.Z.Item,{label:"Created",children:t==null?void 0:t.info.Created}),(0,e.jsxs)(K.Z.Item,{label:"Build",children:["Docker ",t==null?void 0:t.info.DockerVersion," ",t==null?void 0:t.info.Os," ",t==null?void 0:t.info.Architecture]}),(0,e.jsx)(K.Z.Item,{label:"Labels",children:(0,e.jsx)(K.Z,{column:1,bordered:!0,children:(t==null?void 0:t.info.Config.Labels)&&Object.keys(t==null?void 0:t.info.Config.Labels).map(function(h){return(0,e.jsx)(K.Z.Item,{label:h,children:t==null?void 0:t.info.Config.Labels[h]},h)})})})]})}),(0,e.jsx)(oe.Z,{title:(0,e.jsx)(fe.Z,{}),subTitle:"Dockerfile \u8BE6\u60C5",ghost:!0,children:(0,e.jsxs)(K.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,e.jsx)(K.Z.Item,{label:"CMD",children:t==null?void 0:t.info.Config.Cmd}),(0,e.jsx)(K.Z.Item,{label:"ENTRYPOINT",children:t==null?void 0:t.info.Config.Entrypoint}),(0,e.jsx)(K.Z.Item,{label:"EXPOSE",children:(t==null?void 0:t.info.Config.ExposedPorts)&&Object.keys(t==null?void 0:t.info.Config.ExposedPorts).map(function(h){return(0,e.jsx)(B.Z,{color:"gray",children:h},h)})}),(0,e.jsx)(K.Z.Item,{label:"VOLUME",children:(t==null?void 0:t.info.Config.Volumes)&&Object.keys(t==null?void 0:t.info.Config.Volumes).map(function(h){return(0,e.jsx)(B.Z,{color:"gray",children:h},h)})}),(0,e.jsx)(K.Z.Item,{label:"Env",children:(0,e.jsx)(K.Z,{column:1,bordered:!0,children:(t==null?void 0:t.info.Config.Env)&&(t==null?void 0:t.info.Config.Env.map(function(h,W){var F=h.split("=");return(0,e.jsx)(K.Z.Item,{label:F[0],children:F[1]},W)}))})})]})}),(t==null?void 0:t.layer)&&(0,e.jsxs)(oe.Z,{title:(0,e.jsx)(fe.Z,{}),subTitle:"Layers",ghost:!0,children:[(0,e.jsx)(Se.Z,{rowKey:"CreatedBy",dataSource:t.layer.reverse(),columns:[{title:"Layer",dataIndex:"CreatedBy",key:"CreatedBy"}]}),";"]})]})]})})}),$e=we;function Ne(){var w=(0,a.useContext)(Ee.Z),te=w.message,re=w.notice,Q=w.lang,$=(0,S.useAccess)(),g=(0,a.useRef)(),t=(0,a.useState)({force:!1}),N=_()(t,2),J=N[0],V=N[1],Y=(0,a.useRef)(),z=(0,a.useRef)(),k=(0,a.useRef)();return(0,e.jsxs)(O._z,{header:{extra:[(0,e.jsx)(ie.u,{access:"canSeeImageListManageCreate",children:(0,e.jsx)(S.Link,{to:"/image/create",children:(0,e.jsx)(b.ZP,{type:"primary",children:"\u521B\u5EFA&\u5BFC\u5165\u955C\u50CF"},"create")},"create")},"create"),(0,e.jsx)(ie.u,{access:"canSeeImageListPull",children:(0,e.jsx)(De.Z,{onFinish:function(){var c,r;!((c=g.current)===null||c===void 0)&&c.reloadAndRest&&((r=g.current)===null||r===void 0||r.reloadAndRest())}},"remote")},"remote")]},children:[(0,e.jsx)($e,{ref:z,onClose:function(){var c,r;!((c=g.current)===null||c===void 0)&&c.reloadAndRest&&((r=g.current)===null||r===void 0||r.reloadAndRest())}}),(0,e.jsx)(u.Z,{scroll:{x:"max-content"},rowKey:"Id",columns:[{title:"\u540D\u79F0",dataIndex:"title",render:function(c,r,f,j,l){var s=r.Id.substring(7,19);return r.Title&&(s=r.Title),(0,e.jsx)(A.Z.Link,{onClick:function(){var U;!((U=z.current)===null||U===void 0)&&U.show&&z.current.show(r.Id)},children:s},"title-".concat(f))}},{title:"Tag",dataIndex:"tag",render:function(c,r,f,j){return(0,e.jsx)(M.Z,{direction:"vertical",style:{textAlign:"left"},children:r.RepoTags.map(function(l,s){return(0,e.jsxs)(M.Z,{children:[(0,e.jsx)(B.Z,{color:"#2db7f5",children:(0,e.jsx)(A.Z.Text,{copyable:!0,title:l,style:{color:"#ffffff"},children:l},"tag-"+s)},"tag-".concat(s)),r.Containers>0&&(0,e.jsx)(B.Z,{color:"cyan",children:"\u4F7F\u7528\u4E2D"},"use-".concat(s))]},s)})},r.Id)}},{title:"\u4F7F\u7528\u72B6\u6001",hidden:!0,dataIndex:"use",valueEnum:{1:"\u4F7F\u7528\u4E2D",2:"\u672A\u4F7F\u7528"}},{title:"\u67B6\u6784",width:80,search:!1,render:function(c,r,f,j,l){if(r.Labels&&r.Labels["com.dpanel.image.arch"])return(0,e.jsx)(B.Z,{children:r.Labels["com.dpanel.image.arch"]},"arch"+r.Id)}},{title:"\u5927\u5C0F",dataIndex:"size",ellipsis:!0,width:"120px",search:!1,sorter:function(c,r){return parseFloat(c.Size)-parseFloat(r.Size)},render:function(c,r,f,j){return(0,e.jsx)("div",{children:(0,ue.FI)(parseFloat(r.Size))},r.Id)}},{title:"\u521B\u5EFA\u65E5\u671F",dataIndex:"Created",ellipsis:!0,search:!1,width:"180px",render:function(c,r,f,j){return(0,e.jsx)("div",{children:(0,ue.ZM)(r.Created*1e3)},r.Id)},sorter:function(c,r){return c.Created-r.Created}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:100,fixed:"right",hidden:!$.canSeeImageListManage,render:function(c,r,f,j){return(0,e.jsxs)(M.Z,{split:(0,e.jsx)(D.Z,{type:"vertical"}),children:[(0,e.jsx)(A.Z.Link,{onClick:function(){var s;!((s=z.current)===null||s===void 0)&&s.show&&z.current.show(r.Id)},children:(0,e.jsx)(G.Z,{title:"\u7BA1\u7406",children:(0,e.jsx)(Ce.Z,{})})},"edit"),(0,e.jsx)(S.Link,{to:"/app/create/image?imageId="+r.RepoTags[0],children:(0,e.jsx)(G.Z,{title:"\u521B\u5EFA\u5BB9\u5668",children:(0,e.jsx)(he.Z,{})})},"create")]})}}],request:function(){var E=x()(i()().mark(function c(r,f,j){var l;return i()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,o.KG)({tag:r.tag,title:r.title,use:r.use?r.use=="1"?1:2:0});case 2:if(l=P.sent,!(!l||!l.data||!l.data.list)){P.next=5;break}return P.abrupt("return",{data:[],success:!0,total:0});case 5:return l.data.list.map(function(U){var h="";U.RepoTags.map(function(W){l.data.title[W]&&(h=l.data.title[W])}),U.Title=h}),P.abrupt("return",{data:l.data.list,success:!0,total:l.data.list.length});case 7:case"end":return P.stop()}},c)}));return function(c,r,f){return E.apply(this,arguments)}}(),pagination:(0,ge.O)(),search:{collapsed:!1},rowSelection:$.canSeeImageListManage?{defaultSelectedRowKeys:[],alwaysShowAlert:!0}:void 0,actionRef:g,tableAlertOptionRender:function(c){var r=c.selectedRowKeys,f=c.selectedRows;return(0,e.jsxs)(M.Z,{size:16,children:[(0,e.jsx)(se.Z,{icon:(0,e.jsx)(pe.Z,{}),confirm:(0,e.jsxs)(M.Z,{style:{width:500,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,e.jsx)(A.Z.Text,{children:(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{children:"\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5BFC\u51FA\u955C\u50CF\u540E\u4F1A\u81EA\u52A8\u901A\u8FC7\u6D4F\u89C8\u5668\u4E0B\u8F7D\u81F3\u672C\u5730"}),(0,e.jsx)("li",{children:"\u5F53\u914D\u7F6E\u3010\u5BFC\u51FA\u5230\u9762\u677F\u5BB9\u5668\u76EE\u5F55\u3011\u540E\u5C06\u4FDD\u5B58\u81F3 /dpanel/storage \u76EE\u5F55"}),(0,e.jsx)("li",{children:"\u6D4F\u89C8\u5668\u4E0B\u8F7D\u5931\u8D25\u65F6\uFF0C\u8BF7\u68C0\u67E5\u662F\u5426\u5B89\u88C5\u4E86\u76F8\u5173\u4E0B\u8F7D\u63D2\u4EF6"})]})}),(0,e.jsx)(d.A,{layout:"horizontal",formRef:k,submitter:!1,children:(0,e.jsx)(T.Z,{valuePropName:"checked",name:"enableExportToPath",children:(0,e.jsx)(q.Z,{children:"\u5BFC\u51FA\u5230\u9762\u677F\u5BB9\u5668\u76EE\u5F55"})},"enableExportToPath")})]}),confirmOnOpenChange:function(){var l;!((l=k.current)===null||l===void 0)&&l.resetFields&&k.current.resetFields()},action:function(){var l,s=[];return f.map(function(P){s.push.apply(s,m()(P.RepoTags))}),(0,ae.Rb)({md5:s,enableExportToPath:(l=k.current)===null||l===void 0?void 0:l.getFieldValue("enableExportToPath")})},onSuccess:function(l){var s,P=f.map(function(h){return h.RepoTags[0]});if(!((s=k.current)!==null&&s!==void 0&&s.getFieldValue("enableExportToPath"))){var U=new Blob([l],{type:"application/tar"});(0,Pe.saveAs)(U,P.join("-")+".tar")}},children:"\u5BFC\u51FA"}),(0,e.jsxs)(y.Y,{formRef:Y,title:"\u6279\u91CF\u63A8\u9001\u955C\u50CF",trigger:(0,e.jsx)(b.ZP,{icon:(0,e.jsx)(_e.Z,{}),children:"\u540C\u6B65\u81F3\u5176\u5B83\u4ED3\u5E93"}),onFinish:function(){var j=x()(i()().mark(function l(s){var P,U,h;return i()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,o.KX)({md5:r,registryId:s.registryId,newNamespace:s.newNamespace});case 2:return h=F.sent,(P=g.current)===null||P===void 0||P.reload(),!((U=g.current)===null||U===void 0)&&U.clearSelected&&g.current.clearSelected(),F.abrupt("return",!0);case 6:case"end":return F.stop()}},l)}));return function(l){return j.apply(this,arguments)}}(),children:[(0,e.jsx)(T.Z,{name:"registryId",hidden:!0}),(0,e.jsx)(T.Z,{label:"\u955C\u50CF\u4ED3\u5E93",name:"imageRespo",tooltip:(0,e.jsxs)(e.Fragment,{children:["\u63A8\u9001\u524D\u8BF7\u4FDD\u8BC1\u4ED3\u5E93\u4E2D\u6709\u6307\u5B9A\u7684\u547D\u540D\u7A7A\u95F4, \u5982\u6CA1\u6709\u8BF7\u5148 ",(0,e.jsx)("a",{href:"",target:"_blank",children:"\u6DFB\u52A0\u4ED3\u5E93"})]}),children:(0,e.jsx)(ve.Z,{multiple:!0,top:!0,onChangeList:function(l){var s;(s=Y.current)===null||s===void 0||s.setFieldValue("registryId",l.map(function(P){return P.id}))}})}),(0,e.jsx)(I.Z,{tooltip:"\u53EF\u4EE5\u901A\u8FC7\u6B64\u9879\u91CD\u65B0\u5B9A\u4E49\u547D\u540D\u7A7A\u95F4\uFF0Cdocker hub \u4E0D\u53D7\u8BE5\u914D\u7F6E\u7684\u5F71\u54CD\u3002 \u914D\u7F6E\u6B64\u9879\u540E mysql:latest \u4F1A\u63A8\u9001\u81F3 {\u547D\u540D\u7A7A\u95F4}/mysql:latest\uFF0C dpanel/dpanel:latest \u4F1A\u63A8\u9001\u81F3 {\u547D\u540D\u7A7A\u95F4}/dpanel:latest",label:"\u91CD\u5199\u4ED3\u5E93\u547D\u540D\u7A7A\u95F4",name:"newNamespace"})]}),(0,e.jsx)(ie.u,{access:"canSeeImageListManageDelete",children:(0,e.jsx)(se.Z,{danger:!0,type:"primary",action:function(){return(0,o.ao)({md5:r,force:J.force})},onSuccess:function(){var l,s;return!((l=g.current)===null||l===void 0)&&l.reloadAndRest&&((s=g.current)===null||s===void 0||s.reloadAndRest()),!0},onError:function(){var l,s;return!((l=g.current)===null||l===void 0)&&l.reset&&((s=g.current)===null||s===void 0||s.reset()),!0},confirm:(0,e.jsxs)(M.Z,{style:{width:280},direction:"vertical",children:[(0,e.jsx)(A.Z.Text,{children:Q("notification.confirm.title")}),(0,e.jsx)(q.Z,{name:"deleteVolume",onChange:function(l){return V({force:l.target.checked})},children:"\u5F3A\u5236\u5220\u9664\uFF1F"})]}),children:"\u6279\u91CF\u5220\u9664"})})]})},tableExtraRender:function(){return(0,e.jsx)(ie.u,{access:"canSeeImageListManageCreate",children:(0,e.jsx)(v.Z,{mode:"horizontal",selectedKeys:["all"],items:[{label:(0,e.jsx)(S.Link,{to:"/image/list",replace:!0,children:"\u5168\u90E8\u955C\u50CF"}),key:"all"},{label:(0,e.jsx)(S.Link,{to:"/image/list/recycle",replace:!0,children:"\u6784\u5EFA\u4EFB\u52A1"}),key:"build"}]})})},toolBarRender:function(){return[(0,e.jsx)(ie.u,{access:"canSeeImageListManageDelete",children:(0,e.jsx)(se.Z,{action:function(){return(0,o.c7)()},onSuccess:function(){var r,f;return!((r=g.current)===null||r===void 0)&&r.reloadAndRest&&((f=g.current)===null||f===void 0||f.reloadAndRest()),!0},onError:function(){var r,f;return!((r=g.current)===null||r===void 0)&&r.reset&&((f=g.current)===null||f===void 0||f.reset()),!0},confirm:"notification.confirm.title",children:"\u6E05\u7406\u672A\u4F7F\u7528\u955C\u50CF"})},"prune")]},columnsState:(0,ge.j)("image-list")})]})}},3393:function(X,R,n){n.d(R,{Gb:function(){return _},Pn:function(){return T},Rb:function(){return I},YU:function(){return x},ZQ:function(){return B},_U:function(){return u},cD:function(){return G},cd:function(){return A}});var Z=n(15009),m=n.n(Z),C=n(99289),i=n.n(C),p=n(82346);function x(v){return L.apply(this,arguments)}function L(){return L=i()(m()().mark(function v(a){return m()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,p.request)("/api/app/image/get-detail",{method:"POST",data:a}));case 1:case"end":return o.stop()}},v)})),L.apply(this,arguments)}function _(v){return O.apply(this,arguments)}function O(){return O=i()(m()().mark(function v(a){return m()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,p.request)("/api/app/image/tag-remote",{method:"POST",data:a}));case 1:case"end":return o.stop()}},v)})),O.apply(this,arguments)}function u(v){return d.apply(this,arguments)}function d(){return d=i()(m()().mark(function v(a){return m()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,p.request)("/api/app/image/tag-add",{method:"POST",data:a}));case 1:case"end":return o.stop()}},v)})),d.apply(this,arguments)}function T(v){return y.apply(this,arguments)}function y(){return y=i()(m()().mark(function v(a){return m()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,p.request)("/api/app/image/tag-delete",{method:"POST",data:a}));case 1:case"end":return o.stop()}},v)})),y.apply(this,arguments)}function I(v){return b.apply(this,arguments)}function b(){return b=i()(m()().mark(function v(a){return m()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,p.request)("/api/app/image/export",{method:"POST",data:a,responseType:"blob"}));case 1:case"end":return o.stop()}},v)})),b.apply(this,arguments)}function A(v){return M.apply(this,arguments)}function M(){return M=i()(m()().mark(function v(a){return m()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,p.request)("/api/pro/image/get-remote-tag",{method:"POST",data:a}));case 1:case"end":return o.stop()}},v)})),M.apply(this,arguments)}function B(v){return D.apply(this,arguments)}function D(){return D=i()(m()().mark(function v(a){return m()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,p.request)("/api/app/image/check-upgrade",{method:"POST",data:a}));case 1:case"end":return o.stop()}},v)})),D.apply(this,arguments)}function G(v){return q.apply(this,arguments)}function q(){return q=i()(m()().mark(function v(a){return m()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,p.request)("/api/app/image/get-rootfs",{method:"POST",data:a}));case 1:case"end":return o.stop()}},v)})),q.apply(this,arguments)}},67255:function(X,R,n){n.d(R,{O:function(){return Z},j:function(){return m}});function Z(){var C=localStorage.getItem("dpanel-pagesize");return C=="all"?!1:{showSizeChanger:!0,defaultPageSize:parseInt(C!=null?C:"20")}}function m(C){var i="dpanel-table-column-".concat(C),p={};if(localStorage.getItem(i)){var x;p=JSON.parse((x=localStorage.getItem(i))!==null&&x!==void 0?x:"{}")}return{defaultValue:p,onChange:function(_){localStorage.setItem("dpanel-table-column-".concat(C),JSON.stringify(_))}}}}}]);
