"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1610],{87740:function(C,m,e){e.d(m,{Z:function(){return g}});var h=e(87462),r=e(67294),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},_=o,l=e(84089),f=function(d,D){return r.createElement(l.Z,(0,h.Z)({},d,{ref:D,icon:_}))},c=r.forwardRef(f),g=c},1699:function(C,m,e){e.d(m,{u:function(){return d}});var h=e(9783),r=e.n(h),o=e(97857),_=e.n(o),l=e(67294),f=e(82346),c=e(40411),g=e(42075),O=e(85893),d=function(n){var u=(0,f.useAccess)(),M=Array.isArray(n.access)?n.access:[n.access],i,p=n.fallback;if(typeof n.children=="function"?(i=n.children(M.reduce(function(j,P){return _()(_()({},j),{},r()({},P,u[P]))},{})),i||(i=p)):M.every(function(j){return u[j]})?i=n.children:i=p,!p&&i&&n.showProTips&&u.canSeeEnableCe){if(u.canSeeEnableHiddenProTips)return null;i=(0,O.jsx)(c.Z,{offset:n.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:i})}if(!p&&i&&n.showProRibbonTips&&u.canSeeEnableCe){if(u.canSeeEnableHiddenProTips)return null;i=(0,O.jsx)(c.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:i})}return n.space?(0,O.jsx)(g.Z,_()(_()({},n.space),{},{children:i})):i}},80821:function(C,m,e){e.d(m,{Z:function(){return D}});var h=e(97857),r=e.n(h),o=e(5574),_=e.n(o),l=e(24963),f=e(86738),c=e(28036),g=e(83062),O=e(67294),d=e(85893);function D(n){var u=(0,O.useState)(!1),M=_()(u,2),i=M[0],p=M[1],j=(0,O.useContext)(l.Z),P=j.lang,L=j.message,y=function(){p(!0);var U=n.action();U instanceof Promise?U.then(function(a){if(p(!1),a){typeof n.onSuccess=="function"&&n.onSuccess(a);var s="";n.messageSuccess?typeof n.messageSuccess=="function"?s=n.messageSuccess(a):s=n.messageSuccess.indexOf("notification.")==0?P(n.messageSuccess):n.messageSuccess:s=P("notification.finish"),n.asynced?L.info(s):L.success(s)}}).catch(function(a){p(!1),typeof n.onError=="function"&&n.onError(a)}):p(!1)};return n.confirm?(0,d.jsx)(f.Z,r()(r()({style:{width:500},title:n.confirmTitle?n.confirmTitle:P("notification.title.tip"),description:typeof n.confirm=="string"&&n.confirm.indexOf("notification.")==0?P(n.confirm):n.confirm,onConfirm:y,okText:"Yes",cancelText:"No",onOpenChange:n.confirmOnOpenChange},n.confirmProps),{},{children:(0,d.jsx)(c.ZP,{block:n.block,disabled:n.disabled,icon:!n.children&&i?void 0:n.icon,loading:i,danger:n.danger,type:n.type,children:n.children})})):(0,d.jsx)(g.Z,{title:n.tips,children:(0,d.jsx)(c.ZP,{block:n.block,style:n.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:n.disabled,icon:!n.children&&i?void 0:n.icon,loading:i,onClick:y,danger:n.danger,type:n.type,children:n.children})})}},78451:function(C,m,e){e.d(m,{Z:function(){return o}});var h=e(67294),r=e(85893);function o(_){return(0,r.jsx)("span",{style:{width:_.width?_.width:"auto",wordBreak:"break-word"},children:_.content})}},24963:function(C,m,e){var h=e(67294),r=(0,h.createContext)({});m.Z=r},67108:function(C,m,e){e.r(m),e.d(m,{default:function(){return s}});var h=e(15009),r=e.n(h),o=e(99289),_=e.n(o),l=e(90078),f=e(41482),c=e(62597),g=e(28036),O=e(42075),d=e(96074),D=e(83062),n=e(50136),u=e(82346),M=e(86548),i=e(87740),p=e(67294),j=e(96974),P=e(80821),L=e(67255),y=e(78451),B=e(1699),U=e(20578),a=e(85893);function s(){var T=(0,j.UO)(),t=(0,p.useRef)(),Z=(0,u.useAccess)();return(0,p.useEffect)(function(){var b;(b=t.current)===null||b===void 0||b.reload()},[T]),(0,a.jsx)(l._z,{header:{extra:[(0,a.jsx)(B.u,{access:"canSeeContainerListManageCreate",children:(0,a.jsx)(g.ZP,{type:"primary",children:(0,a.jsx)(u.Link,{to:"/app/create/image",children:"\u521B\u5EFA\u5BB9\u5668"})})},"create")]},children:(0,a.jsx)(f.Z,{scroll:{x:"max-content"},actionRef:t,columns:[{title:"\u540D\u79F0",dataIndex:"siteTitle",width:200},{title:"\u6807\u8BC6",dataIndex:"siteName",width:200},{title:"\u6700\u540E\u9519\u8BEF",dataIndex:"message",search:!1,width:250,render:function(W,E,I,R,v){return(0,a.jsx)(y.Z,{content:E.message})}},{title:"\u5220\u9664\u65E5\u671F",ellipsis:!0,dataIndex:"deletedAt",search:!1,width:180,render:function(W,E,I,R,v){return new Date(E.deletedAt).toLocaleString()}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:80,fixed:"right",render:function(W,E,I,R){return(0,a.jsxs)(O.Z,{split:(0,a.jsx)(d.Z,{type:"vertical"}),children:[(0,a.jsx)(u.Link,{to:"/app/create/image?op=update&id="+E.id,type:"link",children:(0,a.jsx)(D.Z,{title:"\u518D\u6B21\u6784\u5EFA",children:(0,a.jsx)(M.Z,{})})},"rebuild"),E.containerInfo&&E.containerInfo.Info&&E.containerInfo.Info.Name&&(0,a.jsx)(B.u,{access:"canSeeEnableCe",children:function(K){var x=K.canSeeEnableCe;return(0,a.jsx)(P.Z,{disabled:x,action:function(){return(0,U.w)({id:E.id})},ghost:!0,type:"link",tips:"\u6062\u590D\u5BB9\u5668",onSuccess:function(){var S;!((S=t.current)===null||S===void 0)&&S.reloadAndRest&&t.current.reloadAndRest()},icon:(0,a.jsx)(i.Z,{})})}})]})}}],rowKey:"id",request:function(){var b=_()(r()().mark(function W(E,I,R){var v,K;return r()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,c.cl)({pageSize:E.pageSize,page:(v=E.current)!==null&&v!==void 0?v:1,isDelete:!0,siteTitle:E.siteTitle,siteName:E.siteName});case 2:return K=A.sent,A.abrupt("return",{data:K.data.list,success:!0,total:K.data.total});case 4:case"end":return A.stop()}},W)}));return function(W,E,I){return b.apply(this,arguments)}}(),rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(W){var E=W.selectedRowKeys;return(0,a.jsx)(O.Z,{size:16,children:(0,a.jsx)(P.Z,{danger:!0,type:"primary",action:function(){return(0,c.xb)({id:E})},onSuccess:function(){var R,v;return!((R=t.current)===null||R===void 0)&&R.reloadAndRest&&((v=t.current)===null||v===void 0||v.reloadAndRest()),!0},onError:function(){var R,v;return!((R=t.current)===null||R===void 0)&&R.reset&&((v=t.current)===null||v===void 0||v.reset()),!0},confirm:"notification.confirm.title",children:"\u6279\u91CF\u5220\u9664"})})},pagination:(0,L.O)(),search:{collapsed:!1},tableExtraRender:function(){return(0,a.jsx)(n.Z,{mode:"horizontal",selectedKeys:["recycle"],items:[{label:(0,a.jsx)(u.Link,{to:"/app/list",replace:!0,children:"\u5BB9\u5668\u5217\u8868"}),key:"all"},{label:(0,a.jsx)(u.Link,{to:"/app/recycle",replace:!0,children:"\u56DE\u6536\u7AD9"}),key:"recycle"}]})}})})}},62597:function(C,m,e){e.d(m,{$G:function(){return f},Ct:function(){return j},Tb:function(){return D},XH:function(){return u},cl:function(){return O},fp:function(){return g},iE:function(){return i},xb:function(){return L},ze:function(){return B}});var h=e(15009),r=e.n(h),o=e(99289),_=e.n(o),l=e(82346);function f(a){return c.apply(this,arguments)}function c(){return c=_()(r()().mark(function a(s){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.request)("/api/app/site/create-by-image",{method:"POST",data:s}));case 1:case"end":return t.stop()}},a)})),c.apply(this,arguments)}var g={EnvValueRuleRequired:1,EnvValueRuleDisabled:2,EnvValueTypeNumber:1024,EnvValueTypeText:2048,EnvValueTypeSelect:4096};function O(a){return d.apply(this,arguments)}function d(){return d=_()(r()().mark(function a(s){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.request)("/api/app/site/get-list",{method:"POST",data:s}));case 1:case"end":return t.stop()}},a)})),d.apply(this,arguments)}function D(a){return n.apply(this,arguments)}function n(){return n=_()(r()().mark(function a(s){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s.download=!1,t.next=3,(0,l.request)("/api/app/log/run",{method:"POST",data:s});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},a)})),n.apply(this,arguments)}function u(a){return M.apply(this,arguments)}function M(){return M=_()(r()().mark(function a(s){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s.download=!0,t.next=3,(0,l.request)("/api/app/log/run",{method:"POST",data:s,responseType:"blob"});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},a)})),M.apply(this,arguments)}function i(a){return p.apply(this,arguments)}function p(){return p=_()(r()().mark(function a(s){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s.id=String(s.id),t.next=3,(0,l.request)("/api/app/site/get-detail",{data:s,method:"POST"});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},a)})),p.apply(this,arguments)}function j(a){return P.apply(this,arguments)}function P(){return P=_()(r()().mark(function a(s){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.request)("/api/app/container/delete",{method:"POST",data:s}));case 1:case"end":return t.stop()}},a)})),P.apply(this,arguments)}function L(a){return y.apply(this,arguments)}function y(){return y=_()(r()().mark(function a(s){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.request)("/api/app/site/delete",{method:"POST",data:s}));case 1:case"end":return t.stop()}},a)})),y.apply(this,arguments)}function B(a){return U.apply(this,arguments)}function U(){return U=_()(r()().mark(function a(s){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.request)("/api/app/container/ignore",{method:"POST",data:s}));case 1:case"end":return t.stop()}},a)})),U.apply(this,arguments)}},20578:function(C,m,e){e.d(m,{q:function(){return g},w:function(){return f}});var h=e(15009),r=e.n(h),o=e(99289),_=e.n(o),l=e(82346);function f(d){return c.apply(this,arguments)}function c(){return c=_()(r()().mark(function d(D){return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,l.request)("/api/pro/container/recycle-restore",{data:D,method:"POST"});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},d)})),c.apply(this,arguments)}function g(){return O.apply(this,arguments)}function O(){return O=_()(r()().mark(function d(){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,l.request)("/api/pro/container/check-all-upgrade",{method:"POST"});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},d)})),O.apply(this,arguments)}},67255:function(C,m,e){e.d(m,{O:function(){return h},j:function(){return r}});function h(o){var _=localStorage.getItem("dpanel-pagesize");return _=="all"?!1:{defaultCurrent:o==null?void 0:o.page,showSizeChanger:!0,defaultPageSize:parseInt(_!=null?_:"20"),onChange:function(f,c){localStorage.setItem("dpanel-page-"+location.pathname.split("/").slice(-2).join("-"),"".concat(f))}}}function r(o){var _="dpanel-table-column-".concat(o),l={};if(localStorage.getItem(_)){var f;l=JSON.parse((f=localStorage.getItem(_))!==null&&f!==void 0?f:"{}")}return{defaultValue:l,onChange:function(g){localStorage.setItem("dpanel-table-column-".concat(o),JSON.stringify(g))}}}}}]);
