"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2561],{99861:function(w,v,n){var M=n(15009),e=n.n(M),g=n(64599),s=n.n(g),c=n(99289),y=n.n(c),P=n(5574),C=n.n(P),O=n(42119),b=n(83062),f=n(67294),R=n(92754),l=n(3393),j=n(184),i=n(38345),h=n(85893),E=(0,f.forwardRef)(function(o,d){(0,f.useImperativeHandle)(d,function(){return{start:function(){var I;return S(!0),Z((I=o.image)!==null&&I!==void 0?I:[])},finish:function(){S(!1)},pull:function(I){return S(!0),Z(I)}}});var D=(0,f.useState)(0),m=C()(D,2),p=m[0],u=m[1],a=(0,f.useRef)(),r=(0,f.useState)(!1),t=C()(r,2),_=t[0],S=t[1],G=(0,f.useState)([]),x=C()(G,2),F=x[0],H=x[1],Z=function(){var U=y()(e()().mark(function I(A){var L,W,B,K,$,k,V;return e()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:W=0,H(A),B=s()(A),T.prev=3,B.s();case 5:if((K=B.n()).done){T.next=15;break}return k=K.value,u(W),($=a.current)===null||$===void 0||$.setStart(k),T.next=11,(0,l.Gb)({tag:k,type:"pull"});case 11:V=T.sent,W++;case 13:T.next=5;break;case 15:T.next=20;break;case 17:T.prev=17,T.t0=T.catch(3),B.e(T.t0);case 20:return T.prev=20,B.f(),T.finish(20);case 23:(L=a.current)===null||L===void 0||L.setFinish(),u(W),o.finishAutoHide&&S(!1);case 26:case"end":return T.stop()}},I,null,[[3,17,20,23]])}));return function(A){return U.apply(this,arguments)}}();return(0,h.jsxs)(j.a,{trigger:o.trigger,width:800,open:_,submitter:!1,title:"\u4E00\u952E\u62C9\u53D6\u955C\u50CF",onOpenChange:function(){var U=y()(e()().mark(function I(A){var L,W;return e()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:S(A),A&&o.trigger&&Z((L=o.image)!==null&&L!==void 0?L:[]),A||(W=a.current)===null||W===void 0||W.close();case 3:case"end":return K.stop()}},I)}));return function(I){return U.apply(this,arguments)}}(),drawerProps:{forceRender:!0},children:[(0,h.jsx)(i.Z,{children:F&&(0,h.jsx)(O.Z,{current:p,items:F.map(function(U,I){return{title:(0,h.jsx)(b.Z,{title:U,children:U.length>15?U.substring(0,6)+" ... "+U.substring(U.length-6):U}),key:I}})})}),(0,h.jsx)(i.Z,{children:(0,h.jsx)(R.Z,{ref:a})})]})});v.Z=E},44771:function(w,v,n){n.d(v,{Z:function(){return g}});var M=n(64317),e=n(85893);function g(s){return(0,e.jsx)(M.Z,{label:s.label,name:"restart",width:"sm",initialValue:s.defaultValue?s.defaultValue:"on-failure",options:[{value:"no",label:"\u4E0D\u91CD\u542F"},{value:"on-failure",label:"\u5931\u8D25\u540E\u91CD\u542F\uFF08\u9ED8\u8BA45\u6B21\uFF09"},{value:"unless-stopped",label:"\u672A\u624B\u52A8\u505C\u6B62\u5219\u91CD\u542F"},{value:"always",label:"\u4E00\u76F4\u91CD\u542F"}]})}},37413:function(w,v,n){n.d(v,{Z:function(){return j}});var M=n(19632),e=n.n(M),g=n(85577),s=n(58638),c=n(36693),y=n(35995),P=n(99611),C=n(38345),O=n(42075),b=n(66309),f=n(55241),R=n(67294),l=n(85893);function j(i){var h=[];i.publicPort&&(h=e()(i.publicPort)),i.privatePort&&(h=[].concat(e()(h),e()(i.privatePort)));var E=(0,l.jsxs)(C.Z,{direction:i.layout=="inline"?"row":"column",style:{width:i.layout!="inline"?750:"auto"},ghost:!0,children:[h.length>0&&(0,l.jsx)(C.Z,{title:(0,l.jsx)(g.Z,{}),subTitle:"\u7ED1\u5B9A\u7AEF\u53E3",ghost:i.ghost,children:h.map(function(o,d){var D,m=(D=i.serverIp)!==null&&D!==void 0?D:"localhost";if(m!=""&&m.indexOf("http")===-1&&m.indexOf(":")>-1&&(m="[".concat(m,"]")),m==""){var p=document.location.protocol+"//"+document.location.hostname;m=p}return m==""&&(m=o.IP),(0,l.jsx)(O.Z,{size:"large",wrap:!0,children:(0,l.jsx)(b.Z,{color:o.PublicPort?"#2db7f5":"warning",icon:o.PublicPort?(0,l.jsx)(s.Z,{}):"",style:{marginBottom:10,marginRight:15,width:210},children:o.PublicPort?(0,l.jsx)("a",{href:"".concat(m.indexOf("http")===0?m:"http://"+m,":").concat(o.PublicPort),target:"_blank",children:"".concat(o.PublicPort?o.IP+":"+o.PublicPort+" -> ":"").concat(o.PrivatePort,"/").concat(o.Type)},"link".concat(d)):"".concat(o.PrivatePort,"/").concat(o.Type)})},"space".concat(d))})}),i.domain&&i.domain.length>0&&(0,l.jsx)(C.Z,{title:(0,l.jsx)(c.Z,{}),subTitle:"\u7ED1\u5B9A\u57DF\u540D",ghost:i.ghost,children:(0,l.jsx)(O.Z,{wrap:!0,style:{textAlign:"left"},children:i.domain&&i.domain.map(function(o,d){return(0,l.jsx)(b.Z,{color:"blue",icon:(0,l.jsx)(s.Z,{}),children:(0,l.jsx)("a",{href:o,target:"_blank",children:o})},"domain".concat(d))})})})]});return i.showInDetail?E:(0,l.jsx)(f.Z,{placement:"bottom",content:E,children:(0,l.jsxs)(O.Z,{direction:"vertical",children:[i.privatePort&&i.privatePort.length>0&&(0,l.jsxs)(b.Z,{color:"warning",icon:(0,l.jsx)(y.Z,{}),children:["\u5185\u90E8\u7AEF\u53E3: ",i.privatePort.length]}),i.publicPort&&i.publicPort.length>0&&(0,l.jsxs)(b.Z,{color:"#2db7f5",icon:(0,l.jsx)(P.Z,{}),children:["\u5BF9\u5916\u7AEF\u53E3: ",i.publicPort.length]}),i.domain&&i.domain.length>0&&(0,l.jsx)(b.Z,{color:"blue",icon:(0,l.jsx)(c.Z,{}),children:i.domainTitle?i.domainTitle:"\u7ED1\u5B9A\u57DF\u540D: ".concat(i.domain.length)})]})})}},92754:function(w,v,n){var M=n(5574),e=n.n(M),g=n(67294),s=n(82346),c=n(38703),y=n(85893),P=(0,g.forwardRef)(function(C,O){var b=(0,g.useState)(""),f=e()(b,2),R=f[0],l=f[1];(0,g.useImperativeHandle)(O,function(){return{setFinish:function(){o({finish:{downloading:100,extracting:100}})},setStart:function(D){D&&l(D),o({start:{downloading:0,extracting:0}})},close:function(){j.progress.close("image:pull:"+R),o({start:{downloading:0,extracting:0}})}}});var j=(0,s.useModel)("subscriber");j.addDataHandler("image:pull:"+R,function(d){o(d.data)});var i=(0,g.useState)(),h=e()(i,2),E=h[0],o=h[1];return(0,g.useEffect)(function(){return o({start:{downloading:0,extracting:0}}),function(){j.progress.close("image:pull:"+R)}},[]),(0,y.jsx)(y.Fragment,{children:E&&Object.keys(E).map(function(d){return(0,y.jsx)(c.Z,{percent:E[d].downloading,success:{percent:E[d].extracting}},d)})})});v.Z=P},78451:function(w,v,n){n.d(v,{Z:function(){return g}});var M=n(67294),e=n(85893);function g(s){return(0,e.jsx)("span",{style:{width:s.width?s.width:"auto",wordBreak:"break-word"},children:s.content})}},62597:function(w,v,n){n.d(v,{$G:function(){return y},Ct:function(){return E},Tb:function(){return f},XH:function(){return l},cl:function(){return O},fp:function(){return C},iE:function(){return i},xb:function(){return d},ze:function(){return m}});var M=n(15009),e=n.n(M),g=n(99289),s=n.n(g),c=n(82346);function y(u){return P.apply(this,arguments)}function P(){return P=s()(e()().mark(function u(a){return e()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.request)("/api/app/site/create-by-image",{method:"POST",data:a}));case 1:case"end":return t.stop()}},u)})),P.apply(this,arguments)}var C={EnvValueRuleRequired:1,EnvValueRuleDisabled:2,EnvValueTypeNumber:1024,EnvValueTypeText:2048,EnvValueTypeSelect:4096};function O(u){return b.apply(this,arguments)}function b(){return b=s()(e()().mark(function u(a){return e()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.request)("/api/app/site/get-list",{method:"POST",data:a}));case 1:case"end":return t.stop()}},u)})),b.apply(this,arguments)}function f(u){return R.apply(this,arguments)}function R(){return R=s()(e()().mark(function u(a){return e()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.download=!1,t.next=3,(0,c.request)("/api/app/log/run",{method:"POST",data:a});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},u)})),R.apply(this,arguments)}function l(u){return j.apply(this,arguments)}function j(){return j=s()(e()().mark(function u(a){return e()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.download=!0,t.next=3,(0,c.request)("/api/app/log/run",{method:"POST",data:a,responseType:"blob"});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},u)})),j.apply(this,arguments)}function i(u){return h.apply(this,arguments)}function h(){return h=s()(e()().mark(function u(a){return e()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.id=String(a.id),t.next=3,(0,c.request)("/api/app/site/get-detail",{data:a,method:"POST"});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},u)})),h.apply(this,arguments)}function E(u){return o.apply(this,arguments)}function o(){return o=s()(e()().mark(function u(a){return e()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.request)("/api/app/container/delete",{method:"POST",data:a}));case 1:case"end":return t.stop()}},u)})),o.apply(this,arguments)}function d(u){return D.apply(this,arguments)}function D(){return D=s()(e()().mark(function u(a){return e()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.request)("/api/app/site/delete",{method:"POST",data:a}));case 1:case"end":return t.stop()}},u)})),D.apply(this,arguments)}function m(u){return p.apply(this,arguments)}function p(){return p=s()(e()().mark(function u(a){return e()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.request)("/api/app/container/ignore",{method:"POST",data:a}));case 1:case"end":return t.stop()}},u)})),p.apply(this,arguments)}},60335:function(w,v,n){n.d(v,{IE:function(){return C},IW:function(){return y},KK:function(){return j},LJ:function(){return h},RF:function(){return D},Re:function(){return o},aF:function(){return p},eE:function(){return R},jV:function(){return b}});var M=n(15009),e=n.n(M),g=n(99289),s=n.n(g),c=n(82346);function y(a){return P.apply(this,arguments)}function P(){return P=s()(e()().mark(function a(r){return e()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,c.request)("/api/app/container/status",{method:"POST",data:r}));case 1:case"end":return _.stop()}},a)})),P.apply(this,arguments)}function C(a){return O.apply(this,arguments)}function O(){return O=s()(e()().mark(function a(r){return e()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,c.request)("/api/app/container/get-list",{data:r,method:"POST"}));case 1:case"end":return _.stop()}},a)})),O.apply(this,arguments)}function b(a){return f.apply(this,arguments)}function f(){return f=s()(e()().mark(function a(r){return e()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,c.request)("/api/app/container/get-detail",{data:r,method:"POST"}));case 1:case"end":return _.stop()}},a)})),f.apply(this,arguments)}function R(a){return l.apply(this,arguments)}function l(){return l=s()(e()().mark(function a(r){return e()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,c.request)("/api/app/container/update",{data:r,method:"POST"}));case 1:case"end":return _.stop()}},a)})),l.apply(this,arguments)}function j(){return i.apply(this,arguments)}function i(){return i=s()(e()().mark(function a(){return e()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return t.stop()}},a)})),i.apply(this,arguments)}function h(a){return E.apply(this,arguments)}function E(){return E=s()(e()().mark(function a(r){return e()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,c.request)("/api/app/container/export",{method:"POST",data:r,responseType:"blob"}));case 1:case"end":return _.stop()}},a)})),E.apply(this,arguments)}function o(a){return d.apply(this,arguments)}function d(){return d=s()(e()().mark(function a(r){return e()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,c.request)("/api/app/container/commit",{method:"POST",data:r}));case 1:case"end":return _.stop()}},a)})),d.apply(this,arguments)}function D(a){return m.apply(this,arguments)}function m(){return m=s()(e()().mark(function a(r){return e()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,c.request)("/api/app/container/upgrade",{method:"POST",data:r}));case 1:case"end":return _.stop()}},a)})),m.apply(this,arguments)}function p(a){return u.apply(this,arguments)}function u(){return u=s()(e()().mark(function a(r){return e()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,c.request)("/api/app/container/copy",{method:"POST",data:r}));case 1:case"end":return _.stop()}},a)})),u.apply(this,arguments)}},3393:function(w,v,n){n.d(v,{Gb:function(){return C},Pn:function(){return R},Rb:function(){return j},YU:function(){return y},ZQ:function(){return o},_U:function(){return b},cD:function(){return D},cd:function(){return h}});var M=n(15009),e=n.n(M),g=n(99289),s=n.n(g),c=n(82346);function y(p){return P.apply(this,arguments)}function P(){return P=s()(e()().mark(function p(u){return e()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.request)("/api/app/image/get-detail",{method:"POST",data:u}));case 1:case"end":return r.stop()}},p)})),P.apply(this,arguments)}function C(p){return O.apply(this,arguments)}function O(){return O=s()(e()().mark(function p(u){return e()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.request)("/api/app/image/tag-remote",{method:"POST",data:u}));case 1:case"end":return r.stop()}},p)})),O.apply(this,arguments)}function b(p){return f.apply(this,arguments)}function f(){return f=s()(e()().mark(function p(u){return e()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.request)("/api/app/image/tag-add",{method:"POST",data:u}));case 1:case"end":return r.stop()}},p)})),f.apply(this,arguments)}function R(p){return l.apply(this,arguments)}function l(){return l=s()(e()().mark(function p(u){return e()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.request)("/api/app/image/tag-delete",{method:"POST",data:u}));case 1:case"end":return r.stop()}},p)})),l.apply(this,arguments)}function j(p){return i.apply(this,arguments)}function i(){return i=s()(e()().mark(function p(u){return e()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.request)("/api/app/image/export",{method:"POST",data:u,responseType:"blob"}));case 1:case"end":return r.stop()}},p)})),i.apply(this,arguments)}function h(p){return E.apply(this,arguments)}function E(){return E=s()(e()().mark(function p(u){return e()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.request)("/api/pro/image/get-remote-tag",{method:"POST",data:u}));case 1:case"end":return r.stop()}},p)})),E.apply(this,arguments)}function o(p){return d.apply(this,arguments)}function d(){return d=s()(e()().mark(function p(u){return e()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.request)("/api/app/image/check-upgrade",{method:"POST",data:u}));case 1:case"end":return r.stop()}},p)})),d.apply(this,arguments)}function D(p){return m.apply(this,arguments)}function m(){return m=s()(e()().mark(function p(u){return e()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,c.request)("/api/app/image/get-rootfs",{method:"POST",data:u}));case 1:case"end":return r.stop()}},p)})),m.apply(this,arguments)}}}]);
