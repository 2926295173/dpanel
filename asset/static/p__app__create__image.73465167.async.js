(self.webpackChunk=self.webpackChunk||[]).push([[3985],{64789:function(se,H,n){"use strict";n.d(H,{Z:function(){return E}});var M=n(87462),d=n(67294),I={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},P=I,C=n(84089),j=function(R,l){return d.createElement(C.Z,(0,M.Z)({},R,{ref:l,icon:P}))},F=d.forwardRef(j),E=F},63434:function(se,H,n){"use strict";var M=n(1413),d=n(45987),I=n(22270),P=n(84567),C=n(67294),j=n(90789),F=n(35510),E=n(85893),c=["options","fieldProps","proFieldProps","valueEnum"],R=C.forwardRef(function(_,G){var r=_.options,t=_.fieldProps,X=_.proFieldProps,q=_.valueEnum,U=(0,d.Z)(_,c);return(0,E.jsx)(F.Z,(0,M.Z)({ref:G,valueType:"checkbox",valueEnum:(0,I.h)(q,void 0),fieldProps:(0,M.Z)({options:r},t),lightProps:(0,M.Z)({labelFormatter:function(){return(0,E.jsx)(F.Z,(0,M.Z)({ref:G,valueType:"checkbox",mode:"read",valueEnum:(0,I.h)(q,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,M.Z)({options:r},t),proFieldProps:X},U))}},U.lightProps),proFieldProps:X},U))}),l=C.forwardRef(function(_,G){var r=_.fieldProps,t=_.children;return(0,E.jsx)(P.Z,(0,M.Z)((0,M.Z)({ref:G},r),{},{children:t}))}),g=(0,j.G)(l,{valuePropName:"checked"}),S=g;S.Group=R,H.Z=S},31199:function(se,H,n){"use strict";var M=n(1413),d=n(45987),I=n(67294),P=n(35510),C=n(85893),j=["fieldProps","min","proFieldProps","max"],F=function(R,l){var g=R.fieldProps,S=R.min,_=R.proFieldProps,G=R.max,r=(0,d.Z)(R,j);return(0,C.jsx)(P.Z,(0,M.Z)({valueType:"digit",fieldProps:(0,M.Z)({min:S,max:G},g),ref:l,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:_},r))},E=I.forwardRef(F);H.Z=E},90672:function(se,H,n){"use strict";var M=n(1413),d=n(45987),I=n(67294),P=n(35510),C=n(85893),j=["fieldProps","proFieldProps"],F=function(c,R){var l=c.fieldProps,g=c.proFieldProps,S=(0,d.Z)(c,j);return(0,C.jsx)(P.Z,(0,M.Z)({ref:R,valueType:"textarea",fieldProps:l,proFieldProps:g},S))};H.Z=I.forwardRef(F)},91058:function(se,H,n){"use strict";var M=n(19632),d=n.n(M),I=n(97857),P=n.n(I),C=n(5574),j=n.n(C),F=n(89035),E=n(64317),c=n(5966),R=n(38345),l=n(17186),g=n(24739),S=n(42075),_=n(28036),G=n(85576),r=n(67294),t=n(95089),X=n(12491),q=n(62597),U=n(79245),V=n(85893),k="docker-image",ue=(0,r.forwardRef)(function(N,fe){var me=(0,r.useState)(k),u=j()(me,2),D=u[0],A=u[1],p=(0,r.useRef)(),le=(0,r.useState)(""),pe=j()(le,2),ye=pe[0],Ie=pe[1],Le=function(){D!="code"?A("code"):A(k)};(0,r.useImperativeHandle)(fe,function(){return{addEnvItem:function($,ae){var J,oe=(J=p.current)===null||J===void 0?void 0:J.getList(),ve=!1;if(oe==null||oe.map(function(Ce){if(Ce.name==$){ve=!0;return}}),!ve){var e;(e=p.current)===null||e===void 0||e.add({name:$,value:ae})}},clear:function(){var $;($=p.current)===null||$===void 0||($=$.getList())===null||$===void 0||$.map(function(ae,J){var oe;(oe=p.current)===null||oe===void 0||oe.remove(J)})}}});function Me(Z){try{var $,ae;Z==""&&(Z=we());for(var J=($=(ae=p.current)===null||ae===void 0||(ae=ae.getList())===null||ae===void 0?void 0:ae.length)!==null&&$!==void 0?$:0,oe=J;oe>=0;oe--){var ve;(ve=p.current)===null||ve===void 0||ve.remove(oe)}var e=Z.split(`
`),Ce=0;e.map(function(Be){var Ae,We=Be.split("=");We.length<2||((Ae=p.current)===null||Ae===void 0||Ae.add({name:We[0],value:We.slice(1).join("=")},Ce),Ce++)})}catch(Be){console.log(Be)}}function we(){if(p&&p.current&&p.current.getList){var Z,$=(Z=p.current)===null||Z===void 0?void 0:Z.getList();if($){var ae=[];return $.map(function(J){ae.push("".concat(J.name,"=").concat(J.value))}),ae.join(`
`)}else return""}else return""}function Ue(Z){var $,ae,J,oe,ve={},e={help:Z&&Z.label?Z.label:"",name:"value",label:"\u53D8\u91CF\u503C",rules:[{required:N.requireValue?!0:(0,U.y)(($=Z.rule)===null||$===void 0?void 0:$.kind,q.fp.EnvValueRuleRequired)}],disabled:N.showDisableValue||(0,U.y)((ae=Z.rule)===null||ae===void 0?void 0:ae.kind,q.fp.EnvValueRuleDisabled)};if((0,U.y)((J=Z.rule)===null||J===void 0?void 0:J.kind,q.fp.EnvValueTypeSelect)){var Ce;return(0,V.jsx)(E.Z,P()(P()({fieldProps:ve},e),{},{width:N.showInDrawer?"sm":"md",options:((Ce=Z.rule)===null||Ce===void 0?void 0:Ce.option)&&Z.rule.option.map(function(Be){return{label:Be.name,value:Be.value}}),initialValue:Z.value}))}else return(0,U.y)((oe=Z.rule)===null||oe===void 0?void 0:oe.kind,q.fp.EnvValueTypeNumber)?(0,V.jsx)(c.Z,P()(P()({fieldProps:ve},e),{},{width:N.showInDrawer?"sm":"md",rules:[].concat(d()(e.rules),[{pattern:new RegExp("^[0-9]*$")}]),help:e.help+",\u6570\u503C\u7C7B\u578B"})):(0,V.jsx)(c.Z,P()(P()({fieldProps:ve},e),{},{width:N.showInDrawer?"sm":"md"}))}return(0,V.jsxs)(R.Z,{ghost:N.showCardGhost,title:N.label?N.label:null,headerBordered:!0,extra:(N.showCodeMode||N.showImportButton)&&(0,V.jsxs)(S.Z,{children:[N.showImportButton&&(0,V.jsx)("div",{style:{marginBottom:"-25px"},children:(0,V.jsx)(X.Z,{title:"\u5BFC\u5165 env \u6587\u4EF6",onImport:function($){return Me($),!0},onLoad:function($){if($.indexOf("=")<0)throw new Error("\u5BFC\u5165env\u6587\u4EF6\u9519\u8BEF");return!0}})}),N.showCodeMode?(0,V.jsx)(_.ZP,{icon:(0,V.jsx)(F.Z,{}),type:D=="code"?"primary":"default",onClick:Le,children:"\u4EE3\u7801\u6A21\u5F0F"},"code"):""]}),children:[(0,V.jsx)(l.u,{name:N.name?N.name:"environment",actionRef:p,creatorButtonProps:N.showAddButton?{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u73AF\u5883\u53D8\u91CF"}:!1,copyIconProps:!1,deleteIconProps:N.showDeleteButton,min:100,label:N.listLabel,children:function($,ae,J){var oe=J.getCurrentRowData();return(0,V.jsxs)(g.UW,{style:{marginBottom:"5px"},children:[(0,V.jsx)(c.Z,{width:N.showInDrawer?"sm":"md",name:"name",label:"\u53D8\u91CF\u540D",required:!0,rules:[{required:!0}],disabled:N.showDisableName,placeholder:"\u8F93\u5165\u53D8\u91CF\u540D\u79F0"}),Ue(oe)]})}}),N.showCodeMode&&(0,V.jsx)(G.Z,{width:"800px",open:D=="code",onCancel:function(){return A("docker-image")},onOk:function(){Me(ye),A("docker-image")},children:(0,V.jsx)(t.ZP,{onChange:function($){return Ie($)},value:we(),height:"680px",theme:"light"})})]})});H.Z=ue},92067:function(se,H,n){"use strict";n.d(H,{Z:function(){return S}});var M=n(15009),d=n.n(M),I=n(99289),P=n.n(I),C=n(60335),j=n(64789),F=n(78099),E=n(42075),c=n(28036),R=n(37413),l=n(5251),g=n(85893);function S(_){return(0,g.jsx)(F.Z,{columns:[{title:"\u5BB9\u5668\u540D\u79F0",dataIndex:"name",render:function(r,t,X,q){return(0,g.jsx)(E.Z,{direction:"vertical",style:{textAlign:"left"},children:t==null?void 0:t.Names.map(function(U){return(0,l.fi)(U,"/")})},t.Id)}},{title:"\u7AEF\u53E3",dataIndex:"ports",search:!1,render:function(r,t,X,q){var U=[],V=[];return t!=null&&t.Ports&&t.Ports.map(function(k,ue){k.PublicPort?U.push(k):V.push(k)}),(0,g.jsx)(R.Z,{publicPort:U,privatePort:V,domain:[]})}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",ellipsis:!0,width:100,render:function(r,t,X,q){return[(0,g.jsx)(c.ZP,{type:"link",onClick:P()(d()().mark(function U(){var V;return d()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,(0,C.jV)({md5:t.Id});case 2:V=ue.sent,_.onSelect&&_.onSelect(V.data.info);case 4:case"end":return ue.stop()}},U)})),children:(0,g.jsx)(j.Z,{})},t.Id)]}}],rowKey:"Id",request:function(){var G=P()(d()().mark(function r(t,X,q){var U;return d()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,C.IE)({siteTitle:t.name});case 2:return U=k.sent,k.abrupt("return",{data:U.data.list,success:!0,total:U.data.list.length});case 4:case"end":return k.stop()}},r)}));return function(r,t,X){return G.apply(this,arguments)}}(),pagination:{pageSize:9}})}},52255:function(se,H,n){"use strict";n.d(H,{Z:function(){return I}});var M=n(67294),d=n(85893);function I(P){return(0,d.jsx)("div",{style:{display:P.show?"block":"none"},children:P.children})}},44349:function(se,H,n){"use strict";var M=n(97857),d=n.n(M),I=n(17186),P=n(5966),C=n(86250),j=n(67294),F=n(85893),E=(0,j.forwardRef)(function(c,R){var l=(0,j.useRef)();(0,j.useImperativeHandle)(R,function(){return{addItem:function(_,G){var r,t=(r=l.current)===null||r===void 0?void 0:r.getList(),X=!1;if(t==null||t.map(function(U){if(U.name==_){X=!0;return}}),!X){var q;(q=l.current)===null||q===void 0||q.add({name:_,value:G})}},clear:function(){var _;(_=l.current)===null||_===void 0||(_=_.getList())===null||_===void 0||_.map(function(G,r){var t;(t=l.current)===null||t===void 0||t.remove(r)})}}});var g={};return c.hideCopyButton===!0&&(g.copyIconProps=!1),c.hideDeleteButton===!0&&(g.deleteIconProps=!1),(0,F.jsx)(I.u,d()(d()({initialValue:c.initialValue,label:c.label,name:c.name,actionRef:l,creatorButtonProps:c.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(c.label?c.label:c.name)}:!1,min:c.min?c.min:0},g),{},{children:function(_,G,r){return(0,F.jsx)(C.Z,{justify:c.justify,gap:c.gap,children:c.items.map(function(t){return t.render?(0,F.jsx)("div",{children:t.render&&t.render(_,G,r)},"".concat(c.name,"-").concat(t.name,"-").concat(_.key)):(0,F.jsx)(P.Z,{width:t.width,name:t.name,label:t.label,required:t.required,rules:[{required:t.required}],disabled:t.disabled,placeholder:t.placeholder},"".concat(c.name,"-").concat(t.name,"-").concat(_.key))})})}}))});H.Z=E},12491:function(se,H,n){"use strict";n.d(H,{Z:function(){return E}});var M=n(24963),d=n(88484),I=n(62370),P=n(31418),C=n(28036),j=n(67294),F=n(85893);function E(c){var R=(0,j.useContext)(M.Z),l=R.message,g=R.notice,S=R.lang,_=(0,j.useRef)(null),G=P.Z.useApp(),r=function(){_.current&&(_.current.click(),_.current.onchange=function(X){if(!X||!X.target)return"";var q=new FileReader;q.onload=function(V){var k,ue,N=(k=V.target)===null||k===void 0?void 0:k.result;if(c.onLoad)try{c.onLoad&&c.onLoad(N)}catch(fe){g.error(fe);return}typeof c.onImport=="function"&&(l.success("\u6210\u529F\u5BFC\u5165 ".concat(c.title)),c.onImport(N)),(ue=_.current)!==null&&ue!==void 0&&ue.value&&(_.current.value="")};var U=X.target;if(U.files)try{q.readAsText(U.files[0])}catch(V){g.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(I.Z,{children:(0,F.jsx)(C.ZP,{icon:(0,F.jsx)(d.Z,{}),block:!0,onClick:r,children:c.title})}),(0,F.jsx)("input",{style:{display:"none"},type:"file",ref:_,name:"importFileInput"})]})}},46442:function(se,H,n){"use strict";var M=n(15009),d=n.n(M),I=n(99289),P=n.n(I),C=n(5574),j=n.n(C),F=n(67294),E=n(14946),c=n(64789),R=n(78099),l=n(28036),g=n(85265),S=n(42075),_=n(66309),G=n(28230),r=n(85893),t=(0,F.forwardRef)(function(X,q){(0,F.useImperativeHandle)(q,function(){return{show:function(){ue(!0)}}});var U=(0,F.useState)(!1),V=j()(U,2),k=V[0],ue=V[1],N=(0,F.useRef)();return(0,r.jsxs)(r.Fragment,{children:[X.showTriggerButton&&(0,r.jsx)(l.ZP,{onClick:function(){ue(!0)},children:"\u52A0\u5165\u7F51\u7EDC"}),(0,r.jsx)(g.Z,{title:"\u9009\u62E9\u7F51\u7EDC",width:800,footer:!1,open:k,onClose:function(){return ue(!1)},extra:(0,r.jsx)(S.Z,{children:(0,r.jsx)(G.Z,{onFinish:function(){var me,u;!((me=N.current)===null||me===void 0)&&me.reloadAndRest&&((u=N.current)===null||u===void 0||u.reloadAndRest())}},"create")}),children:(0,r.jsx)(R.Z,{rowKey:"Name",toolBarRender:!1,actionRef:N,columns:[{title:"\u540D\u79F0",dataIndex:"Name",render:function(me,u,D,A,p){return u.Name=="none"||u.Name=="bridge"||u.Name=="host"?(0,r.jsxs)(r.Fragment,{children:[u.Name," ",(0,r.jsx)(_.Z,{color:"blue",children:"System"})]}):(0,r.jsx)(r.Fragment,{children:me})}},{title:"\u7C7B\u578B",ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"IPAM Driver",ellipsis:!0,width:120,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4 IPAM Network",search:!1,dataIndex:["IPAM","Config",0,"Subnet"],render:function(me,u,D,A,p){return(0,r.jsxs)(S.Z,{children:[u.IPAM.Config&&u.IPAM.Config[0]&&"".concat(u.IPAM.Config[0].Subnet," - ").concat(u.IPAM.Config[0].Gateway),u.IPAM.Config&&u.IPAM.Config[1]&&"".concat(u.IPAM.Config[1].Subnet," - ").concat(u.IPAM.Config[1].Gateway)]})}},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(me,u,D,A,p){return[u.Name!="none"&&u.Name!="bridge"&&u.Name!="host"&&(0,r.jsx)(l.ZP,{type:"link",onClick:function(){X.onSelect(u),ue(!1)},children:(0,r.jsx)(c.Z,{})},u.Id)]}}],request:function(){var fe=P()(d()().mark(function me(u,D,A){var p;return d()().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=2,(0,E.jR)({name:u.Name});case 2:return p=pe.sent,pe.abrupt("return",{data:p.data.list,success:!0,total:p.data.list.length});case 4:case"end":return pe.stop()}},me)}));return function(me,u,D){return fe.apply(this,arguments)}}(),pagination:{pageSize:10}})})]})});H.Z=t},35880:function(se,H,n){"use strict";var M=n(67294),d=(0,M.createContext)({});H.Z=d},17121:function(se,H,n){"use strict";n.r(H),n.d(H,{default:function(){return Kn}});var M=n(15009),d=n.n(M),I=n(99289),P=n.n(I),C=n(5574),j=n.n(C),F=n(90078),E=n(38345),c=n(97269),R=n(2236),l=n(5966),g=n(24739),S=n(97462),_=n(30291),G=n(92398),r=n(38925),t=n(67294),X=n(35880),q=n(78099),U=n(62370),V=n(85576),k=n(42075),ue=n(96074),N=n(25593),fe=n(83062),me=n(71230),u=n(15746),D=n(28036),A=n(3393),p=n(18148),le=n(5251),pe=n(64789),ye=n(87462),Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885 780H165c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM400 325.7h73.9V664c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V325.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 171a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13z"}}]},name:"to-top",theme:"outlined"},Le=Ie,Me=n(84089),we=function(y,T){return t.createElement(Me.Z,(0,ye.Z)({},y,{ref:T,icon:Le}))},Ue=t.forwardRef(we),Z=Ue,$=n(85060),ae=n(28307),J=n(78451),oe=n(99861),ve=n(80821),e=n(85893);function Ce(v){var y=(0,t.useState)(!1),T=j()(y,2),L=T[0],x=T[1],K=(0,t.useRef)(),m=(0,t.useContext)(X.Z),s=m.createFormRef,B=m.volumeListRef,w=m.createEnvRef,f=m.domainRef,i=(0,t.useRef)(),O=function(){var b=P()(d()().mark(function W(h){var Y,re,ee,z,he,_e,Ee,de,ce,ge,De,ke;return d()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,(0,A.YU)({md5:h});case 2:return z=Q.sent,v.redeploy||(de=(he=s.current)===null||he===void 0?void 0:he.getFieldsValue(),(_e=s.current)===null||_e===void 0||_e.resetFields(),(Ee=s.current)===null||Ee===void 0||Ee.setFieldsValue({siteName:de.siteName,siteTitle:de.siteTitle,useBridgeNetwork:de.useBridgeNetwork})),z.data.info.Config.Env&&z.data.info.Config.Env.map(function(o){var ie,a=o.split("=");(ie=w.current)===null||ie===void 0||ie.addEnvItem(a[0],a.slice(1).join("="))}),(Y=s.current)===null||Y===void 0||Y.setFieldValue("imageName",h),(re=s.current)===null||re===void 0||re.setFieldValue("workDir",z.data.info.Config.WorkingDir),(ee=f.current)===null||ee===void 0||ee.setExposePort(z.data.info.Config.ExposedPorts),v.redeploy||(z.data.info.Config.Volumes?(De=[],Object.keys(z.data.info.Config.Volumes).map(function(o,ie){De.push(o)}),(ge=B.current)===null||ge===void 0||ge.setDefaultDestPath(De)):(ke=B.current)===null||ke===void 0||ke.setDefaultDestPath([]),(ce=s.current)===null||ce===void 0||ce.setFieldsValue({workDir:{value:"",useDefault:!0,default:z.data.info.Config.WorkingDir},user:{value:"",useDefault:!0,default:z.data.info.Config.User},command:{value:"",useDefault:!0,default:z.data.info.Config.Cmd&&z.data.info.Config.Cmd.join(" ")},entrypoint:{value:"",useDefault:!0,default:z.data.info.Config.Entrypoint&&z.data.info.Config.Entrypoint.join(" ")}})),Q.abrupt("return",!0);case 10:case"end":return Q.stop()}},W)}));return function(h){return b.apply(this,arguments)}}();return(0,t.useEffect)(function(){v.fromImageId&&O(v.fromImageId)},[v.fromImageId]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(V.Z,{open:L,width:1024,title:"\u9009\u62E9\u955C\u50CF",footer:!1,onCancel:function(){return x(!1)},children:(0,e.jsx)(q.Z,{scroll:{x:"max-content"},columns:[{title:"Id",dataIndex:"Id",search:!1,width:200,render:function(W,h,Y,re,ee){return(0,e.jsx)(J.Z,{content:h.Id})}},{title:"\u955C\u50CF\u540D\u79F0",dataIndex:"tag",width:200,render:function(W,h,Y,re){return(0,e.jsx)(J.Z,{content:h.RepoTags[0]})}},{title:"\u521B\u5EFA\u65E5\u671F",dataIndex:"Created",ellipsis:!0,search:!1,width:"180px",render:function(W,h,Y,re){return(0,e.jsx)("div",{children:(0,le.ZM)(h.Created*1e3)},h.Id)},sorter:function(W,h){return W.Created-h.Created}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:80,render:function(W,h,Y,re){return(0,e.jsxs)(k.Z,{split:(0,e.jsx)(ue.Z,{type:"vertical"}),children:[(0,e.jsx)(ve.Z,{icon:(0,e.jsx)(pe.Z,{}),tips:"\u4F7F\u7528\u955C\u50CF",action:function(){return O(h.RepoTags[0])},type:"link",onSuccess:function(){x(!1)}},"addImage"),(0,e.jsx)(N.Z.Link,{onClick:P()(d()().mark(function ee(){var z;return d()().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:h.RepoTags[0]&&((z=i.current)===null||z===void 0||z.setImageName(h.RepoTags[0]));case 1:case"end":return _e.stop()}},ee)})),children:(0,e.jsx)(fe.Z,{title:"\u66F4\u65B0\u955C\u50CF",children:(0,e.jsx)(Z,{})})},"updateImage")]})}}],request:function(){var b=P()(d()().mark(function W(h,Y,re){var ee,z,he,_e,Ee;return d()().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return v.redeploy&&(z=(ee=s.current)===null||ee===void 0?void 0:ee.getFieldValue("imageName"),h.tag=z?z.split(":")[0]:h.tag),ce.next=3,(0,p.KG)({tag:h.tag});case 3:return he=ce.sent,_e=0,Ee=[],he.data.list&&(Ee=he.data.list.flatMap(function(ge){return ge.RepoTags.map(function(De){return{Key:_e++,Id:ge.Id,Created:ge.Created,RepoTags:[De]}})})),ce.abrupt("return",{data:Ee,success:!0,total:Ee.length});case 8:case"end":return ce.stop()}},W)}));return function(W,h,Y){return b.apply(this,arguments)}}(),toolBarRender:function(){return[(0,e.jsx)(ae.Z,{onClick:function(){x(!1)},buttonType:"primary",ref:i,onFinish:function(h){O(h)}},"remote")]},formRef:K,rowKey:"Key",pagination:{pageSize:5}})},"imageTableList"),(0,e.jsxs)(me.Z,{children:[(0,e.jsx)(u.Z,{span:14,children:(0,e.jsx)(l.Z,{label:"\u955C\u50CF",tooltip:v.redeploy?"\u66F4\u65B0\u5BB9\u5668\u65F6,\u53EA\u53EF\u4EE5\u9009\u62E9\u8BE5\u955C\u50CF\u4E0B\u7684\u4E0D\u540Ctag.\u4E5F\u53EF\u4EE5\u5F3A\u5236\u66F4\u65B0\u5DF2\u90E8\u7F72tag,\u66F4\u6B21\u90E8\u7F72":"\u65B0\u5EFA\u5BB9\u5668\u65F6,\u53EF\u4EE5\u4F7F\u7528\u672C\u5730\u955C\u50CF,\u4E5F\u53EF\u4EE5\u4E0B\u8F7D\u5168\u65B0\u7684\u955C\u50CF\u6216\u662F\u66F4\u65B0\u672C\u5730\u955C\u50CF\u7684tag",name:"imageName",disabled:!0,placeholder:"\u8BF7\u9009\u62E9\u955C\u50CF\uFF0C\u5982\u679C\u662F\u8FDC\u7A0B\u955C\u50CF\u8BF7\u5148\u4E0B\u8F7D",rules:[{required:!0}],required:!0})}),(0,e.jsx)(u.Z,{children:(0,e.jsx)(U.Z,{label:" ",children:(0,e.jsxs)(k.Z.Compact,{children:[(0,e.jsx)(D.ZP,{type:"primary",onClick:function(){return x(!0)},children:v.redeploy?"\u66F4\u6362\u955C\u50CF":"\u9009\u62E9\u955C\u50CF"},"showBtn"),(0,e.jsx)(S.Z,{name:["imageName"],children:function(W){var h=W.imageName;return v.redeploy?(0,e.jsx)(oe.Z,{image:[h],trigger:(0,e.jsx)(fe.Z,{title:"\u91CD\u65B0\u62C9\u53D6\u5F53\u524D\u955C\u50CF",children:(0,e.jsx)(D.ZP,{icon:(0,e.jsx)($.Z,{}),children:"\u62C9\u53D6\u5F53\u524D\u955C\u50CF"})})}):(0,e.jsx)(ae.Z,{onClick:function(){x(!1)},ref:i,onFinish:function(re){O(re)}},"remote")}})]})})})]})]})}var Be=n(60335),Ae=n(51042),We=n(63434),Se=n(17186),un=n(85265),on=n(92067),ln=(0,t.forwardRef)(function(v,y){var T=(0,t.useState)(!1),L=j()(T,2),x=L[0],K=L[1],m=(0,t.useRef)(),s=function(f){var i=(0,t.useState)([]),O=j()(i,2),b=O[0],W=O[1];return(0,t.useEffect)(function(){(0,Be.jV)({md5:f.name}).then(function(h){var Y;return W((Y=h.data.info.Config.Env)!==null&&Y!==void 0?Y:[]),!0})},[]),(0,e.jsxs)(E.Z,{bordered:!0,extra:f.action,style:{marginBottom:10},children:[(0,e.jsx)(E.Z,{title:"\u5173\u8054\u4FE1\u606F",children:(0,e.jsxs)(g.UW,{children:[(0,e.jsx)(l.Z,{label:"\u5BB9\u5668\u540D\u79F0",name:"name",width:"md",readonly:!0}),(0,e.jsx)(l.Z,{label:"\u8BBF\u95EEHostName",name:"alise",width:"md",tooltip:"\u901A\u8FC7\u914D\u7F6E\u6B64\u540D\u79F0\uFF0C\u5728\u5BB9\u5668\u5185\u90E8\u8FDB\u884C\u8BF7\u6C42\u8BBF\u95EE"}),(0,e.jsx)(We.Z,{label:"\u5173\u8054\u5B58\u50A8",name:"volume"})]})}),(0,e.jsx)(E.Z,{title:"\u73AF\u5883\u53D8\u91CF",children:(0,e.jsx)(k.Z,{direction:"vertical",children:b&&b.map(function(h,Y){return(0,e.jsx)(N.Z.Text,{copyable:{icon:(0,e.jsx)(Ae.Z,{}),onCopy:function(){var ee=h.split("=");v.onAddEnv(ee[0],ee[1])},tooltips:["add env","success"]},code:!0,ellipsis:{tooltip:h},style:{width:300},children:h},Y)})},"linkEnv")})]})},B=function(f){var i,O,b=!1,W=(i=(O=m.current)===null||O===void 0?void 0:O.getList())!==null&&i!==void 0?i:[];if(W.map(function(Y){Y.name==f.name&&(b=!0)}),!b){var h;(h=m.current)===null||h===void 0||h.add(f)}};return(0,t.useImperativeHandle)(y,function(){return{setDefaultLink:function(f){f&&f.map(function(i){i.name!=""&&B(i)})}}}),(0,e.jsxs)(E.Z,{title:"\u5173\u8054\u5BB9\u5668",headerBordered:!0,children:[(0,e.jsx)(Se.u,{name:"links",actionRef:m,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5173\u8054"},actionGuard:{beforeAddRow:function(f,i){return K(!0),!1}},copyIconProps:!1,min:0,itemRender:function(f,i){return(0,e.jsx)(s,{action:f.action,name:i.record.name})}}),(0,e.jsx)(un.Z,{title:"\u9009\u62E9\u5BB9\u5668",width:800,footer:!1,open:x,onClose:function(){return K(!1)},children:(0,e.jsx)(on.Z,{onSelect:function(f){B({name:f.Name,alise:f.Config.Hostname,volume:!1}),K(!1)}})})]})}),sn=ln,dn=n(91058),Ne=n(64317),cn=n(1413),mn=n(45987),fn=n(35510),vn=["fieldProps","request","params","proFieldProps"],hn=function(y,T){var L=y.fieldProps,x=y.request,K=y.params,m=y.proFieldProps,s=(0,mn.Z)(y,vn);return(0,e.jsx)(fn.Z,(0,cn.Z)({valueType:"treeSelect",fieldProps:L,ref:T,request:x,params:K,filedConfig:{customLightMode:!0},proFieldProps:m},s))},pn=t.forwardRef(hn),_n=pn;function En(v){var y=function(L){L.target&&L.target.className&&L.target.className.indexOf(v.targetClassName)!==-1&&L.preventDefault()};return(0,t.useEffect)(function(){return window.addEventListener("wheel",y,{passive:!1}),function(){window.removeEventListener("wheel",y)}},[]),(0,e.jsx)(e.Fragment,{children:v.children})}var Cn=(0,t.forwardRef)(function(v,y){var T=(0,t.useRef)(),L=(0,t.useContext)(X.Z),x=L.createFormRef;return(0,t.useImperativeHandle)(y,function(){return{setDefaultDestPath:function(m){var s,B,w=(s=(B=T.current)===null||B===void 0?void 0:B.getList())!==null&&s!==void 0?s:[];m.length!=0&&m.filter(function(f){return f!=""}).map(function(f){var i=!1;if(w.map(function(b){if(b.dest==f){i=!0;return}}),!i){var O;(O=T.current)===null||O===void 0||O.add({dest:f,permission:"write",inImage:!0})}})},addUserVolumeItem:function(m,s){var B,w=(B=T.current)===null||B===void 0?void 0:B.getList(),f=!1;if(w==null||w.map(function(O){if(O.dest==s){f=!0;return}}),!f){var i;(i=T.current)===null||i===void 0||i.add({host:m,dest:s})}}}}),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{id:"selectTree"}),(0,e.jsx)(E.Z,{title:"\u81EA\u5B9A\u4E49\u6302\u8F7D\u6216\u662F\u5B58\u50A8\u5377",tooltip:"\u6302\u8F7D\u53EF\u4EE5\u662F\u5BBF\u4E3B\u673A\u7684\u76EE\u5F55\u6216\u662F\u6587\u4EF6\uFF0C\u4E5F\u53EF\u4EE5\u6307\u5B9A\u5B58\u50A8\u5377\u540D\uFF08\u81EA\u52A8\u65B0\u5EFA\uFF09\u3002",headerBordered:!0,direction:"column",children:(0,e.jsx)(Se.u,{actionRef:T,name:"volumes",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u6620\u5C04\u76EE\u5F55"},copyIconProps:!1,min:0,children:function(m,s,B){var w,f=B.getCurrentRowData();return(0,e.jsxs)(g.UW,{children:[(0,e.jsxs)(k.Z.Compact,{children:[(0,e.jsx)(l.Z,{label:"\u5BBF\u4E3B\u673A\u6587\u4EF6\u3001\u76EE\u5F55\u6216\u5B58\u50A8\u5377",name:"host",width:v.showInDrawer?"sm":"md"}),(0,e.jsx)(Ne.Z,{label:" ",valueEnum:{write:"\u8BFB\u5199",readonly:"\u53EA\u8BFB"},initialValue:"write",name:"permission"})]}),(0,e.jsxs)(k.Z.Compact,{children:[(0,e.jsx)(l.Z,{label:"\u5BB9\u5668\u5185\u8DEF\u5F84",name:"dest",width:v.showInDrawer?"sm":"md",required:!0,rules:[{required:!0}],disabled:v.disabledUserVolumeDest||f.inImage}),!v.disabledUserVolumeDest&&!f.inImage&&((w=x.current)===null||w===void 0?void 0:w.getFieldValue)&&x.current.getFieldValue("imageName")&&(0,e.jsx)(En,{targetClassName:"ant-select-tree",children:(0,e.jsx)(_n,{label:" ",width:"sm",placeholder:"\u9009\u62E9\u5BB9\u5668\u5185\u76EE\u5F55",fieldProps:{popupMatchSelectWidth:500,placement:"topLeft",treeLine:!0,showSearch:!0,onChange:function(O,b,W){B.setCurrentRowData({dest:O})}},request:P()(d()().mark(function i(){var O,b,W,h;return d()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,(0,A.cD)({md5:(O=(b=x.current)===null||b===void 0?void 0:b.getFieldValue("imageName"))!==null&&O!==void 0?O:""});case 2:return W=re.sent,h={title:"/",value:"/"},W.data.list.map(function(ee){var z=h;ee.split("/").map(function(he,_e,Ee){var de;if(he){var ce=(de=z.children)===null||de===void 0?void 0:de.find(function(ge){return ge.title===he});ce||(ce={title:he,value:Ee.join("/"),children:[]},z.children?z.children.push(ce):z.children=[ce]),z=ce}})}),re.abrupt("return",h.children);case 6:case"end":return re.stop()}},i)}))},"abc4")})]})]})}})})]})}),gn=Cn,xn=n(2831),xe=n(52688),en=n(86125),jn=n(44349);function Pn(v){var y,T=(0,t.useState)(),L=j()(T,2),x=L[0],K=L[1];return(0,t.useEffect)(function(){(0,xn.aF)().then(function(m){return K(m.data.info)})},[]),(0,e.jsxs)(E.Z,{children:[(0,e.jsx)(l.Z,{label:"\u5171\u4EAB\u5185\u5B58\u5927\u5C0F - /dev/shm",name:"shmsize",initialValue:"64M",tooltip:"0 \u4E3A\u4F7F\u7528\u9ED8\u8BA464M\uFF0C\u914D\u7F6E\u65F6\u8BF7\u9644\u52A0\u5355\u4F4D\uFF0C\u4F8B\u5982\uFF1A1G"}),(0,e.jsx)(U.Z,{label:"\u6700\u5927Cpu\u914D\u989D",name:"cpus",tooltip:"0 \u4E3A\u4E0D\u9650\u5236",children:(0,e.jsx)(en.Z,{step:.1,max:x==null?void 0:x.NCPU,marks:{0:"0",.5:"0.5\u6838",1:"1\u6838",1.5:"1.5\u6838",2:"2\u6838",4:"4\u6838",6:"6\u6838",8:"8\u6838"}})}),(0,e.jsx)(U.Z,{label:"\u6700\u5927\u5185\u5B58\u914D\u989D",name:"memory",tooltip:"0 \u4E3A\u4E0D\u9650\u5236",children:(0,e.jsx)(en.Z,{step:256,max:Math.round(((y=x==null?void 0:x.MemTotal)!==null&&y!==void 0?y:0)/1024/1024),marks:{0:"0",1024:"1G",2048:"2G",3072:"3G",4096:"4G"}})}),(0,e.jsx)(Ne.Z,{label:"\u65E5\u5FD7\u7C7B\u578B",name:["log","driver"],tooltip:"\u9ED8\u8BA4\u4F7F\u7528 json-file \u9A71\u52A8\u7531 docker \u7EDF\u4E00\u7BA1\u7406\u3002\u91C7\u7528 journal \u65F6\u65E5\u5FD7\u5C06\u6765\u5BBF\u4E3B\u673A\u7BA1\u7406",initialValue:"json-file",valueEnum:{"json-file":"json-file",journald:"journal (\u5BBF\u4E3B\u9700\u8981\u5B89\u88C5journal\u670D\u52A1)"}}),(0,e.jsx)(S.Z,{name:["log"],children:function(s){var B=s.log;if(B.driver=="json-file")return(0,e.jsxs)(g.UW,{children:[(0,e.jsx)(l.Z,{label:"\u65E5\u5FD7\u5207\u5272\u5927\u5C0F",name:["log","maxSize"],placeholder:"\u4F8B\u5982\uFF1A10k,5M",tooltip:"\u9ED8\u8BA4 Docker \u5E76\u4E0D\u4F1A\u81EA\u52A8\u5207\u5272\u65E5\u5FD7"}),(0,e.jsx)(l.Z,{tooltip:"\u9ED8\u8BA4 Docker \u5E76\u4E0D\u4F1A\u81EA\u52A8\u6E05\u7406\u65E5\u5FD7\u6587\u4EF6",label:"\u4FDD\u7559\u65E5\u5FD7\u6587\u4EF6\u6570",name:["log","maxFile"],placeholder:"\u4F8B\u5982\uFF1A10"})]})}}),(0,e.jsx)(jn.Z,{name:"device",label:"\u5173\u8054\u8BBE\u5907",hideCopyButton:!0,showAddButton:!0,items:[{label:"\u5BBF\u4E3B\u673A\u8DEF\u5F84",name:"host",width:"md",placeholder:"\u4F8B\u5982\uFF1A/dev/tty0"},{label:"\u5BB9\u5668\u5185\u8DEF\u5F84",name:"dest",width:"md",placeholder:"\u4F8B\u5982\uFF1A/dev/tty0"}]}),(0,e.jsxs)(me.Z,{children:[(0,e.jsx)(u.Z,{span:4,children:(0,e.jsx)(xe.Z,{label:"\u4F7F\u7528 Gpu",name:["gpus","enable"]})}),(0,e.jsx)(u.Z,{span:20,children:(0,e.jsx)(S.Z,{name:["gpus"],children:function(s){var B=s.gpus;if(B&&B.enable)return(0,e.jsx)(Ne.Z,{mode:"tags",label:"\u8BBE\u5907\u5217\u8868",name:["gpus","device"],placeholder:"\u914D\u7F6E\u4F7F\u7528\u8BBE\u5907id\u6216\u662Fuuid\uFF0C\u4E0D\u586B\u6240\u4E3A\u6240\u6709\u8BBE\u5907"})}})})]}),(0,e.jsx)(S.Z,{name:["gpus"],children:function(s){var B=s.gpus;if(B&&B.enable)return(0,e.jsx)(Ne.Z,{label:"\u8BA1\u7B97\u80FD\u529B",name:["gpus","capabilities"],mode:"multiple",fieldProps:{allowClear:!0},options:[{label:"compute - \u8BA1\u7B97\u80FD\u529B",value:"compute"},{label:"compat32 - \u517C\u5BB932\u4F4D",value:"compat32"},{label:"graphics - \u56FE\u5F62\u5904\u7406\u80FD\u529B",value:"graphics"},{label:"utility - \u76D1\u63A7\u548C\u7BA1\u7406\u80FD\u529B",value:"utility"},{label:"video - \u89C6\u9891\u5904\u7406\u80FD\u529B",value:"video"},{label:"display - \u663E\u793A\u56FE\u5F62\u754C\u9762\u80FD\u529B",value:"display"}]})}})]})}function Fn(){return(0,e.jsx)(E.Z,{title:"\u5BB9\u5668\u6807\u7B7E",children:(0,e.jsx)(Se.u,{name:"label",label:"",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u6807\u7B7E"},copyIconProps:!1,min:0,children:(0,e.jsxs)(g.UW,{children:[(0,e.jsx)(l.Z,{width:"md",name:"name",label:"\u540D\u79F0",placeholder:""}),(0,e.jsx)(l.Z,{width:"md",name:"value",label:"\u503C",placeholder:""})]})})})}var Bn=n(44771),Dn=n(86615),Hn="default",$n="user";function In(v){return(0,e.jsx)(U.Z,{label:v.label,tooltip:v.tooltip,children:(0,e.jsxs)(k.Z.Compact,{block:!0,children:[(0,e.jsx)(Dn.Z.Group,{radioType:"button",name:[v.name,"useDefault"],options:[{label:"\u4F7F\u7528\u9ED8\u8BA4",value:!0},{label:"\u81EA\u5B9A\u4E49",value:!1}]}),(0,e.jsx)(S.Z,{name:[v.name],children:function(T){return T[v.name]&&T[v.name].useDefault?(0,e.jsx)(l.Z,{name:[v.name,"default"],disabled:!0,placeholder:"\u672A\u8BBE\u7F6E"}):(0,e.jsx)(l.Z,{name:[v.name,"value"]})}})]})})}var He=In,Ge=n(24963);function An(){var v=(0,t.useContext)(Ge.Z),y=v.message,T=v.lang;return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(E.Z,{children:[(0,e.jsx)(Bn.Z,{label:"\u91CD\u542F\u7B56\u7565"}),(0,e.jsxs)(g.UW,{children:[(0,e.jsx)(xe.Z,{fieldProps:{onChange:function(x){x&&y.warning(T("app.create.privilegedNotice"))}},name:"privileged",tooltip:"--privileged",label:"\u8D4B\u4E88\u5BB9\u5668Root\u6743\u9650",initialValue:!1}),(0,e.jsx)(xe.Z,{name:"autoRemove",tooltip:"--rm",label:"\u505C\u6B62\u540E\u81EA\u52A8\u5220\u9664",initialValue:!1}),(0,e.jsx)(xe.Z,{fieldProps:{onChange:function(x){x&&y.warning(T("app.create.hostPidNotice"))}},tooltip:"--pid host",name:"hostPid",label:"\u5173\u8054\u5BBF\u4E3B\u673APid",initialValue:!1})]}),(0,e.jsx)(He,{label:"\u5DE5\u4F5C\u76EE\u5F55",tooltip:"\u9ED8\u8BA4\u4F7F\u7528\u955C\u50CF\u4E2D\u6307\u5B9A\u7684\u5DE5\u4F5C\u76EE\u5F55",name:"workDir"}),(0,e.jsx)(He,{label:"User",tooltip:"\u5728\u5BB9\u5668\u4E2D\u8FD0\u884C\u547D\u4EE4\u7684\u7528\u6237",name:"user"}),(0,e.jsx)(He,{label:"Command",tooltip:"\u542F\u52A8\u5BB9\u5668\u65F6\u8FD0\u884C\u7684\u547D\u4EE4\uFF0C\u4EE5\u7A7A\u683C\u5206\u9694",name:"command"}),(0,e.jsx)(He,{label:"Entrypoint",tooltip:"\u65E0\u6CD5\u8986\u76D6\u955C\u50CF\u4E2D\u5DF2\u7ECF\u6307\u5B9A\u7684 Entrypoint \u547D\u4EE4",name:"entrypoint"})]})})}var On=n(91845),nn=n(62597),tn=n(82346),bn=n(46442),Mn=(0,t.forwardRef)(function(v,y){var T=(0,t.useRef)(),L=(0,t.useRef)();(0,t.useImperativeHandle)(y,function(){return{}});var x=function(m){var s,B,w=!1,f=(s=(B=T.current)===null||B===void 0?void 0:B.getList())!==null&&s!==void 0?s:[];if(f.map(function(O){O.name==m.name&&(w=!0)}),!w){var i;(i=T.current)===null||i===void 0||i.add(m)}};return(0,e.jsxs)(E.Z,{title:"\u5173\u8054\u7F51\u7EDC",headerBordered:!0,extra:(0,e.jsx)(k.Z,{children:v.showUseBridgeNetwork&&(0,e.jsx)(xe.Z,{name:"useBridgeNetwork",fieldProps:{checkedChildren:"\u5173\u8054 Bridge \u7F51\u7EDC",unCheckedChildren:"\u5173\u8054 Bridge \u7F51\u7EDC"}},"useBridgeNetwork")}),children:[(0,e.jsx)(Se.u,{name:"network",actionRef:T,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u7F51\u7EDC"},actionGuard:{beforeAddRow:function(m,s){var B;return(B=L.current)===null||B===void 0||B.show(),!1}},copyIconProps:!1,min:0,itemRender:function(m,s){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(g.UW,{children:[(0,e.jsx)(l.Z,{label:"\u7F51\u7EDC\u540D\u79F0",name:"name",width:"md",disabled:!0,fieldProps:{value:s.record.name}}),(0,e.jsx)(U.Z,{label:"\u8BBF\u95EEHostname",name:"alise",children:s.record.alise!=""&&(0,e.jsx)(N.Z.Text,{code:!0,copyable:!0,children:s.record.alise})}),(0,e.jsx)(U.Z,{label:" ",children:m.action})]}),(0,e.jsx)(g.UW,{children:(0,e.jsx)(l.Z,{label:"\u6307\u5B9AIpV4",name:"ipV4",width:"md",disabled:s.record.name=="bridge",fieldProps:{addonAfter:s.record.subnet}})})]})}}),(0,e.jsx)(bn.Z,{ref:L,onSelect:function(m){x({name:m.Name,alise:[""],subnet:m.IPAM.Config[0].Subnet})}})]})}),Rn=Mn,Zn=(0,t.forwardRef)(function(v,y){var T=(0,t.useState)(""),L=j()(T,2),x=L[0],K=L[1],m=(0,t.useRef)(),s=(0,t.useContext)(X.Z),B=s.createFormRef;return(0,t.useImperativeHandle)(y,function(){return{setExposePort:function(f){if(f){var i,O,b=(i=(O=m.current)===null||O===void 0?void 0:O.getList())!==null&&i!==void 0?i:[];Object.keys(f).map(function(W){var h=!1;if(b.map(function(re){re.dest==W&&(h=!0)}),!h){var Y;(Y=m.current)===null||Y===void 0||Y.add({host:"",dest:W})}})}},setHostname:function(f){K(f)},addPortItem:function(f,i){var O,b=(O=m.current)===null||O===void 0?void 0:O.getList(),W=!1;if(b==null||b.map(function(Y){if(Y.host==f){W=!0;return}}),!W){var h;(h=m.current)===null||h===void 0||h.add({host:String(f),dest:String(i)})}}}}),(0,e.jsx)(E.Z,{title:"\u7ED1\u5B9A\u7AEF\u53E3",tooltip:"\u8BBF\u95EE\u7AEF\u53E3\u7559\u7A7A\u65F6\u968F\u673A\u751F\u6210\u7AEF\u53E3\uFF0C\u5168\u90E8\u5220\u9664\u5219\u8868\u793A\u4E0D\u66B4\u9732\u7AEF\u53E3",headerBordered:!0,extra:(0,e.jsxs)(k.Z,{children:[v.showBindHost&&(0,e.jsx)(xe.Z,{name:"useHostNetwork",fieldProps:{checkedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",unCheckedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",onChange:function(f){if(f){var i;(i=B.current)===null||i===void 0||i.setFieldsValue({bindIpV6:!1,publishAllPorts:!1})}}}}),v.showBindIpV6&&(0,e.jsx)(S.Z,{name:["siteName","useHostNetwork"],children:function(f){var i=f.useHostNetwork;return(0,e.jsx)(xe.Z,{name:"publishAllPorts",fieldProps:{checkedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3",unCheckedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3"},disabled:i},"publishAllPorts")}}),v.showBindIpV6&&(0,e.jsx)(S.Z,{name:["siteName","useHostNetwork"],children:function(f){var i=f.useHostNetwork;return(0,e.jsx)(xe.Z,{name:"bindIpV6",fieldProps:{checkedChildren:"IpV6",unCheckedChildren:"IpV6"},disabled:i},"bindIpV6")}})]}),children:(0,e.jsx)(S.Z,{name:["useHostNetwork","bindIpV6","publishAllPorts"],children:function(f){var i=f.useHostNetwork,O=f.bindIpV6,b=f.publishAllPorts;if(!i&&!b)return(0,e.jsx)(Se.u,{name:"ports",actionRef:m,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BF9\u5916\u90E8\u8BBF\u95EE"},min:0,copyIconProps:!1,children:(0,e.jsxs)(g.UW,{children:[(0,e.jsx)(l.Z,{width:v.showInDrawer?"sm":"md",name:"host",label:"\u5916\u90E8\u8BBF\u95EE\u7AEF\u53E3",tooltip:"\u5BF9\u5916\u8BBF\u95EE\u53EF\u4EE5\u901A\u8FC7\u6DFB\u52A0\u8BBF\u95EE\u7AEF\u53E3\u6216\u662F\u521B\u5EFA\u5B8C\u6210\u540E\u5BF9\u5BB9\u5668\u7ED1\u5B9A\u57DF\u540D",placeholder:"\u7559\u7A7A\u5C06\u4F7F\u7528\u968F\u673A\u7AEF\u53E3\uFF0C\u7ED1\u5B9AIpV6\u5FC5\u586B",required:O,rules:[{required:O}]}),(0,e.jsx)(l.Z,{label:"\u5BB9\u5668\u5185\u7AEF\u53E3",width:v.showInDrawer?"sm":"md",name:"dest",placeholder:"\u6784\u5EFA\u65F6 Expose \u6307\u5B9A\u7684\u7AEF\u53E3",required:!0,rules:[{required:!0}]})]})})}})})}),Tn=Zn,Ze=n(52255);function yn(){var v=(0,t.useRef)(),y=function(x){var K,m,s=!1,B=(K=(m=v.current)===null||m===void 0?void 0:m.getList())!==null&&K!==void 0?K:[];if(B.map(function(f){f.name==x.name&&(s=!0)}),!s){var w;(w=v.current)===null||w===void 0||w.add(x)}},T=function(x){var K,m,s=!1,B=(K=(m=v.current)===null||m===void 0?void 0:m.getList())!==null&&K!==void 0?K:[];B.map(function(w,f){if(w.name==x){var i;(i=v.current)===null||i===void 0||i.remove(f)}})};return(0,e.jsx)(E.Z,{title:"\u5173\u8054\u5BBF\u4E3B\u673A\u7F51\u7EDC\u5185\u4E3B\u673A",tooltip:"\u5BB9\u5668\u5185\u5982\u679C\u9700\u8981\u8BF7\u6C42\u5BBF\u4E3B\u673A\u6240\u5728\u7684\u7F51\u7EDC\u4E2D\u7684\u4E3B\u673A\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6B64\u914D\u7F6E\u5C06Ip\u6CE8\u5165\u5230\u5BB9\u5668\u4E2D",extra:(0,e.jsx)(k.Z,{children:(0,e.jsx)(xe.Z,{name:"enableBindHost",fieldProps:{checkedChildren:"\u7ED1\u5B9A\u5BBF\u4E3B\u673AIp",unCheckedChildren:"\u7ED1\u5B9A\u5BBF\u4E3B\u673AIp",onChange:function(x){x?y({name:"host.dpanel.local",value:"host-gateway"}):T("host.dpanel.local")}}})}),children:(0,e.jsx)(Se.u,{name:"extraHosts",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BBF\u4E3B\u673A\u7F51\u7EDC\u5173\u8054"},actionRef:v,copyIconProps:!1,min:0,children:(0,e.jsxs)(g.UW,{children:[(0,e.jsx)(l.Z,{width:"md",name:"name",label:"Hostname",placeholder:""}),(0,e.jsx)(l.Z,{width:"md",name:"value",label:"ip",placeholder:""})]})})})}var Ye=n(90672),wn=(0,t.forwardRef)(function(v,y){return(0,t.useImperativeHandle)(y,function(){return{}}),(0,e.jsxs)(E.Z,{title:"\u7F51\u7EDC\u914D\u7F6E",children:[(0,e.jsxs)(g.UW,{children:[(0,e.jsx)(l.Z,{label:"\u914D\u7F6E ipV4 \u5730\u5740",name:["ipV4","address"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u5730\u5740\uFF0C\u4F8B\u5982 192.168.1.5",placeholder:"192.168.1.5"}),(0,e.jsx)(S.Z,{name:["ipV4"],children:function(L){var x=L.ipV4;return(0,e.jsx)(l.Z,{label:"\u914D\u7F6E ipV4 \u5B50\u7F51",name:["ipV4","subnet"],width:"md",required:x&&x.address,tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u6240\u5728\u7684\u5B50\u7F51\uFF0C\u4F8B\u5982 192.168.1.0/24",placeholder:"192.168.1.0/24",rules:[{required:x&&x.address}]})}}),(0,e.jsx)(l.Z,{label:"\u914D\u7F6E ipV4 \u7F51\u5173",name:["ipV4","gateway"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u7684\u7F51\u5173\uFF0C\u4F8B\u5982 192.168.1.1",placeholder:"192.168.1.1"}),(0,e.jsx)(xe.Z,{label:"\u81EA\u5B9A\u4E49ipV6",name:"enableIpV6Address"})]}),(0,e.jsx)(S.Z,{name:["enableIpV6Address"],children:function(L){var x=L.enableIpV6Address;if(x)return(0,e.jsxs)(g.UW,{children:[(0,e.jsx)(l.Z,{label:"\u914D\u7F6E ipV6 \u5730\u5740",name:["ipV6","address"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipV6\u5730\u5740\uFF0C\u4F8B\u5982 2001:db8::5",placeholder:"2001:db8::5"}),(0,e.jsx)(S.Z,{name:["ipV6"],children:function(m){var s=m.ipV6;return(0,e.jsx)(l.Z,{label:"\u914D\u7F6E ipV6 \u5B50\u7F51",name:["ipV6","subnet"],width:"md",required:s&&s.address,tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u6240\u5728\u7684\u5B50\u7F51\uFF0C\u4F8B\u5982 2001:db8::/48",placeholder:"2001:db8::/48",rules:[{required:s&&s.address}]})}}),(0,e.jsx)(l.Z,{label:"\u914D\u7F6E ipV6 \u7F51\u5173",name:["ipV6","gateway"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipV6\u7684\u7F51\u5173\uFF0C\u4F8B\u5982 2001:db8::1",placeholder:"2001:db8::1"})]})}}),(0,e.jsx)(Ye.Z,{label:"DNS\u914D\u7F6E",name:"dns",placeholder:"\u8BF7\u6307\u5B9Adns\u5730\u5740\uFF0C\u4F8B\u5982\uFF1A8.8.8.8\uFF0C\u4E00\u884C\u6DFB\u4E00\u6761dns\u5730\u5740"})]})}),Sn=wn,ze=n(31199),Ln=n(86250);function Un(){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(E.Z,{title:"\u9644\u52A0\u6267\u884C\u811A\u672C",headerBordered:!0,subTitle:"",children:(0,e.jsx)(Ye.Z,{label:"\u5BB9\u5668\u521B\u5EFA\u540E\u6267\u884C\u811A\u672C",name:["hook","containerCreate"],placeholder:"\u5BB9\u5668\u5728\u521B\u5EFA\u540E\u6267\u884C\u7684\u811A\u672C\uFF0C\u6B64\u811A\u672C\u5E76\u4E0D\u4F1A\u5F71\u54CD entrypoint \u53CA command\u3002\u4F8B\u5982\uFF1Als -al && touch abc.txt && apt update"})}),(0,e.jsxs)(E.Z,{title:"\u5065\u5EB7\u68C0\u67E5",headerBordered:!0,children:[(0,e.jsxs)(Ln.Z,{gap:20,justify:"start",children:[(0,e.jsx)(ze.Z,{label:"\u91CD\u590D\u95F4\u9694\u65F6\u95F4\uFF08\u79D2\uFF09",name:["healthcheck","interval"],initialValue:30}),(0,e.jsx)(ze.Z,{label:"\u8D85\u65F6\u5931\u8D25\u65F6\u95F4\uFF08\u79D2\uFF09",name:["healthcheck","timeout"],initialValue:10}),(0,e.jsx)(ze.Z,{label:"\u5931\u8D25\u91CD\u590D\u6B21\u6570",name:["healthcheck","retries"],initialValue:3}),(0,e.jsx)(Ne.Z,{width:"sm",label:"\u811A\u672C\u6267\u884C\u73AF\u5883",initialValue:"CMD",name:["healthcheck","shellType"],valueEnum:{CMD:"\u5728 Docker \u73AF\u5883\u6267\u884C","CMD-SHELL":"\u5728\u5BB9\u5668\u5185\u6267\u884C"}})]}),(0,e.jsx)(Ye.Z,{label:"\u6267\u884C\u811A\u672C",name:["healthcheck","cmd"],placeholder:"\u914D\u7F6E\u5BB9\u5668\u5065\u5EB7\u68C0\u67E5\u811A\u672C\uFF0C\u4F8B\u5982\uFF1Acurl -f http://localhost:8080/ || exit 1"})]})]})}var Wn=n(74763),rn=n(2487),Nn=[{name:"ALL"},{name:"AUDIT_CONTROL"},{name:"AUDIT_WRITE",default:!0},{name:"BLOCK_SUSPEND"},{name:"CHOWN",default:!0},{name:"DAC_OVERRIDE",default:!0},{name:"DAC_READ_SEARCH"},{name:"FOWNER",default:!0},{name:"FSETID",default:!0},{name:"IPC_LOCK"},{name:"IPC_OWNER"},{name:"KILL",default:!0},{name:"LEASE"},{name:"LINUX_IMMUTABLE"},{name:"MAC_ADMIN"},{name:"MAC_OVERRIDE"},{name:"MKNOD",default:!0},{name:"NET_ADMIN"},{name:"NET_BIND_SERVICE",default:!0},{name:"NET_BROADCAST"},{name:"NET_RAW",default:!0},{name:"SETFCAP",default:!0},{name:"SETGID",default:!0},{name:"SETPCAP",default:!0},{name:"SETUID",default:!0},{name:"SYSLOG"},{name:"SYS_ADMIN"},{name:"SYS_BOOT"},{name:"SYS_CHROOT",default:!0},{name:"SYS_MODULE"},{name:"SYS_NICE"},{name:"SYS_PACCT"},{name:"SYS_PTRACE"},{name:"SYS_RAWIO"},{name:"SYS_RESOURCE"},{name:"SYS_TIME"},{name:"SYS_TTY_CONFIG"}],Vn=(0,t.forwardRef)(function(v,y){var T=(0,t.useContext)(Ge.Z),L=T.lang,x=(0,t.useState)(null),K=j()(x,2),m=K[0],s=K[1],B=(0,t.useContext)(X.Z),w=B.createFormRef;return(0,t.useImperativeHandle)(y,function(){return{}}),(0,e.jsx)(E.Z,{children:(0,e.jsx)(rn.Z,{grid:{gutter:10,xs:3,sm:3,md:4,lg:4,xl:4,xxl:6},dataSource:Nn,renderItem:function(i,O){var b;return(0,e.jsx)(rn.Z.Item,{children:(0,e.jsx)(xe.Z,{fieldProps:{onChange:function(h){i.name=="ALL"&&s(h)}},disabled:i.name!="ALL"&&((0,Wn.k)(m)?(b=w.current)===null||b===void 0?void 0:b.getFieldValue(["capAdd","ALL"]):m),initialValue:i.default,name:["capAdd",i.name],tooltip:L("app.create.cap."+i.name.toLocaleLowerCase()),label:i.name})},O)}})})}),kn=Vn,Ve="update",an="copy",Xe="new";function Kn(){var v,y,T,L=(0,t.useContext)(Ge.Z),x=L.loading,K=L.notice,m=(0,t.useContext)(X.Z),s=m.createFormRef,B=m.volumeListRef,w=m.domainRef,f=m.createEnvRef,i=m.createLinkRef,O=(0,t.useState)(Xe),b=j()(O,2),W=b[0],h=b[1],Y=(0,tn.useSearchParams)(),re=j()(Y,2),ee=re[0],z=re[1],he=(0,tn.useNavigate)(),_e=(0,t.useState)("basic"),Ee=j()(_e,2),de=Ee[0],ce=Ee[1],ge=parseInt((v=ee.get("id"))!==null&&v!==void 0?v:""),De=(y=ee.get("containerId"))!==null&&y!==void 0?y:"",ke=(T=ee.get("imageId"))!==null&&T!==void 0?T:"";return(0,t.useEffect)(function(){if(De||ge)x.show(),(0,nn.iE)({md5:De,id:ge}).then(function(){var o=P()(d()().mark(function ie(a){var Oe,be,ne,Re,$e,Pe,Ke,Je,Qe;return d()().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:if(ne={info:{}},!a.data.env.imageName){Fe.next=11;break}return Fe.prev=2,Fe.next=5,(0,A.YU)({md5:a.data.env.imageName});case 5:Re=Fe.sent,ne=Re.data,Fe.next=11;break;case 9:Fe.prev=9,Fe.t0=Fe.catch(2);case 11:ee.get("op")==an?h(an):h(Ve),a.data.env.network&&a.data.env.network.map(function(te){return!te.alise&&te.name!="bridge"&&(te.alise=[a.data.siteName+".pod.dpanel.local"]),te}),a.data.env.ports&&a.data.env.ports.map(function(te){return te.host=="0"&&(te.host=""),te}),$e=a.data.env.bindIpV6,a.data.containerInfo.Info&&a.data.containerInfo.Info.NetworkSettings.Networks&&Object.keys(a.data.containerInfo.Info.NetworkSettings.Networks).map(function(te){if(a.data.env.network&&(a.data.env.network=a.data.env.network.map(function(qe){return te==qe.name&&(qe.subnet=a.data.containerInfo.Info.NetworkSettings.Networks[te].IPAddress+"/"+a.data.containerInfo.Info.NetworkSettings.Networks[te].IPPrefixLen),qe})),a.data.containerInfo.Info.NetworkSettings.Networks[te].IPv6Gateway!=""&&($e=!0),te=="bridge"){var Te;(Te=s.current)===null||Te===void 0||Te.setFieldValue("useBridgeNetwork",!0)}}),a.data.env.extraHosts&&a.data.env.extraHosts.map(function(te){if(te.value=="host-gateway"){var Te;(Te=s.current)===null||Te===void 0||Te.setFieldValue("enableBindHost",!0)}}),Pe=a.data.env.ports,a.data.env.ports&&(Pe=a.data.env.ports.map(function(te){return te.host=(te.hostIp?te.hostIp+":":"")+te.host,te})),(Oe=s.current)===null||Oe===void 0||Oe.setFieldsValue({imageName:a.data.env.imageName,privileged:a.data.env.privileged,bindIpV6:a.data.env.useHostNetwork?!1:$e,useHostNetwork:a.data.env.useHostNetwork,publishAllPorts:a.data.env.useHostNetwork?!1:a.data.env.publishAllPorts,workDir:{value:a.data.env.workDir,useDefault:!a.data.env.workDir,default:ne&&ne.info.Config&&ne.info.Config.WorkingDir},user:{value:a.data.env.user,useDefault:!a.data.env.user,default:ne&&ne.info.Config&&ne.info.Config.User},command:{value:a.data.env.command,useDefault:!a.data.env.command,default:ne&&ne.info.Config&&ne.info.Config.Cmd&&ne.info.Config.Cmd.join(" ")},entrypoint:{value:a.data.env.entrypoint,useDefault:!a.data.env.entrypoint,default:ne&&ne.info.Config&&ne.info.Config.Entrypoint&&ne.info.Config.Entrypoint.join(" ")},shmsize:(be=a.data.env.shmsize)!==null&&be!==void 0?be:"64M",cpus:a.data.env.cpus,memory:a.data.env.memory,environment:a.data.env.environment,label:a.data.env.label,volumes:a.data.env.volumes,ports:Pe,links:a.data.env.links,network:a.data.env.network,restart:a.data.env.restart,extraHosts:a.data.env.extraHosts,autoRemove:a.data.env.autoRemove,log:a.data.env.log,dns:a.data.env.dns&&a.data.env.dns.join(`
`),ipV4:a.data.env.ipV4,ipV6:a.data.env.ipV6,gpus:a.data.env.gpus,device:a.data.env.device,hook:a.data.env.hook,hostPid:a.data.env.hostPid,capAdd:a.data.env.capAdd&&Object.fromEntries(a.data.env.capAdd.map(function(te){return[te,!0]}))}),a.data.env.ipV6&&((Ke=s.current)===null||Ke===void 0||Ke.setFieldValue("enableIpV6Address",!0)),a.data.env.healthcheck&&a.data.env.healthcheck.cmd&&a.data.env.healthcheck.cmd!=""&&((Je=s.current)===null||Je===void 0||Je.setFieldsValue({healthcheck:a.data.env.healthcheck})),ee.get("op")==Ve&&((Qe=s.current)===null||Qe===void 0||Qe.setFieldsValue({siteTitle:a.data.siteTitle,siteName:a.data.siteName}));case 23:case"end":return Fe.stop()}},ie,null,[[2,9]])}));return function(ie){return o.apply(this,arguments)}}()).finally(function(){x.destroy()});else{var je,Q;h(Xe),(je=s.current)===null||je===void 0||je.resetFields(),(Q=s.current)===null||Q===void 0||Q.setFieldValue("useBridgeNetwork",!0)}},[ee]),(0,e.jsx)(F._z,{children:(0,e.jsx)(E.Z,{direction:"column",gutter:[0,10],children:(0,e.jsxs)(c.A,{submitter:{render:function(Q,o){return(0,e.jsx)(R.S,{children:o})}},formRef:s,onFinish:function(){var je=P()(d()().mark(function Q(o){var ie,a,Oe,be,ne,Re;return d()().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(Re={siteTitle:o.siteTitle,siteName:o.siteName,hostname:o.hostname,imageName:o.imageName,environment:o.environment,links:o.links,ports:o.ports,volumes:o.volumes,network:(ie=o.network)!==null&&ie!==void 0?ie:[],privileged:(a=o.privileged)!==null&&a!==void 0?a:!1,autoRemove:(Oe=o.autoRemove)!==null&&Oe!==void 0?Oe:!1,restart:o.restart,cpus:o.cpus,memory:o.memory,shmsize:(be=o.shmsize)!==null&&be!==void 0?be:0,workDir:o.workDir&&!o.workDir.useDefault?o.workDir.value:"",user:o.user&&!o.user.useDefault?o.user.value:"",command:o.command&&!o.command.useDefault?o.command.value:"",entrypoint:o.entrypoint&&!o.entrypoint.useDefault?o.entrypoint.value:"",useHostNetwork:o.useHostNetwork,bindIpV6:o.bindIpV6,log:o.log,dns:o.dns&&o.dns!=""?o.dns.split(`
`):[],label:o.label,publishAllPorts:o.publishAllPorts,extraHosts:o.extraHosts,ipV4:o.ipV4,ipV6:o.ipV6,device:o.device,gpus:o.gpus,hook:o.hook,hostPid:o.hostPid,capAdd:o.capAdd?Object.keys(o.capAdd).map(function(Ke){return Ke}):[],useBridgeNetwork:(ne=o.useBridgeNetwork)!==null&&ne!==void 0?ne:!0},!(!o.useBridgeNetwork&&!o.useHostNetwork&&(!o.network||o.network.length==0))){Pe.next=4;break}return K.error("\u4E0D\u52A0\u5165 Bridge \u7F51\u7EDC\u65F6\uFF0C\u5FC5\u987B\u6307\u5B9A\u4E00\u4E2A\u81EA\u5B9A\u4E49\u7F51\u7EDC"),Pe.abrupt("return",!1);case 4:return o.useBridgeNetwork&&Re.network.push({name:"bridge",alise:[],ipV4:""}),o.healthcheck&&o.healthcheck.cmd&&o.healthcheck.cmd!=""&&(Re.healthcheck=o.healthcheck),De&&W==Ve&&(Re.containerId=De),Pe.next=9,(0,nn.$G)(Re);case 9:return he("/app/list"),Pe.abrupt("return",!0);case 11:case"end":return Pe.stop()}},Q)}));return function(Q){return je.apply(this,arguments)}}(),children:[(0,e.jsxs)(E.Z,{title:"\u57FA\u7840\u4FE1\u606F",headerBordered:!0,children:[(0,e.jsx)(l.Z,{name:"siteTitle",label:"\u5BB9\u5668\u63CF\u8FF0",fieldProps:{onChange:function(Q){var o="";if(Q.target.value&&W!=Ve){var ie,a=(0,On.N9)(Q.target.value.trim(),{toneType:"none",type:"array"});o=a.join(""),(ie=s.current)===null||ie===void 0||ie.setFieldValue("siteName",o)}}},placeholder:"\u8BF7\u8F93\u5165\u5BB9\u5668\u63CF\u8FF0\u540D\u79F0"}),(0,e.jsxs)(g.UW,{children:[(0,e.jsx)(l.Z,{width:"lg",name:"siteName",label:"\u5BB9\u5668\u6807\u8BC6",tooltip:"\u5BB9\u5668\u552F\u4E00\u6807\u8BC6\uFF0C\u7528\u4E8E\u6807\u8BC6\u5BB9\u5668\u548C\u5185\u90E8\u8BBF\u95EE",required:!0,disabled:W==Ve,rules:[{required:!0}],placeholder:"\u8BF7\u8F93\u5165\u5BB9\u5668\u6807\u8BC6\u540D\u79F0"}),(0,e.jsx)(l.Z,{label:"Hostname",name:"hostname",width:"lg"})]}),(0,e.jsx)(Ce,{redeploy:W!=Xe,fromImageId:ke})]}),(0,e.jsx)(_.Z,{offsetTop:50,children:(0,e.jsx)(E.Z,{style:{marginBottom:-20},children:(0,e.jsx)(G.Z,{activeKey:de,onChange:function(Q){ce(Q),window.scrollTo(0,450)},items:[{label:"\u57FA\u672C\u914D\u7F6E",key:"basic"},{label:"\u5173\u8054\u914D\u7F6E",key:"link"},{label:"\u8FD0\u884C\u914D\u7F6E",key:"run-command"},{label:"\u8D44\u6E90\u914D\u7F6E",key:"resource"},{label:"Hook",key:"hook"},{label:"\u80FD\u529B\u914D\u7F6E",key:"cap"},{label:"\u5176\u5B83",key:"other"}]})})}),(0,e.jsxs)(Ze.Z,{show:de=="basic",children:[(0,e.jsx)(Tn,{ref:w,showBindHost:!0,showBindIpV6:!0}),(0,e.jsx)(dn.Z,{showAddButton:!0,showImportButton:!0,showCodeMode:!0,label:"\u73AF\u5883\u53D8\u91CF",ref:f}),(0,e.jsx)(gn,{showDefault:!0,ref:B}),(0,e.jsx)(S.Z,{name:["siteName","useHostNetwork"],children:function(Q){var o=Q.siteName,ie=Q.useHostNetwork;if(!ie)return(0,e.jsx)(Sn,{})}})]}),(0,e.jsx)(Ze.Z,{show:de=="link",children:(0,e.jsx)(S.Z,{name:["siteName","useHostNetwork"],children:function(Q){var o=Q.siteName,ie=Q.useHostNetwork;return ie?(0,e.jsx)(r.Z,{showIcon:!0,description:"\u7ED1\u5B9A\u5230\u5BBF\u4E3B\u673A\u7F51\u7EDC\u65F6\uFF0C\u65E0\u6CD5\u901A\u8FC7 Docker \u5173\u8054\u5176\u5B83\u5BB9\u5668\u3002\u8BF7\u4F7F\u7528\u5BBF\u4E3B\u673A\u5185\u7F51IP\u6216\u662F127.0.0.1\u4E92\u8054\u5BB9\u5668\u66B4\u9732\u7AEF\u53E3\u3002"}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(sn,{onAddEnv:function(Oe,be){var ne;(ne=f.current)===null||ne===void 0||ne.addEnvItem(Oe,be)},ref:i}),(0,e.jsx)(Rn,{showUseBridgeNetwork:!0,siteName:o}),(0,e.jsx)(yn,{})]})}})}),(0,e.jsx)(Ze.Z,{show:de=="run-command",children:(0,e.jsx)(An,{})}),(0,e.jsx)(Ze.Z,{show:de=="resource",children:(0,e.jsx)(Pn,{})}),(0,e.jsx)(Ze.Z,{show:de=="hook",children:(0,e.jsx)(Un,{})}),(0,e.jsx)(Ze.Z,{show:de=="other",children:(0,e.jsx)(Fn,{})}),(0,e.jsx)(Ze.Z,{show:de=="cap",children:(0,e.jsx)(kn,{})})]},"form")})})}},2831:function(se,H,n){"use strict";n.d(H,{Ll:function(){return R},aF:function(){return j},d6:function(){return g},u5:function(){return E}});var M=n(15009),d=n.n(M),I=n(99289),P=n.n(I),C=n(82346);function j(){return F.apply(this,arguments)}function F(){return F=P()(d()().mark(function _(){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,C.request)("/api/common/home/info",{method:"POST"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},_)})),F.apply(this,arguments)}function E(){return c.apply(this,arguments)}function c(){return c=P()(d()().mark(function _(){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,C.request)("/api/common/home/check-new-version",{method:"POST"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},_)})),c.apply(this,arguments)}function R(){return l.apply(this,arguments)}function l(){return l=P()(d()().mark(function _(){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,C.request)("/api/common/home/usage",{method:"POST"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},_)})),l.apply(this,arguments)}function g(){return S.apply(this,arguments)}function S(){return S=P()(d()().mark(function _(){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,C.request)("/api/common/home/upgrade-script",{method:"POST"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},_)})),S.apply(this,arguments)}},79245:function(se,H,n){"use strict";n.d(H,{m:function(){return I},y:function(){return P}});var M=n(64599),d=n.n(M);function I(C){var j=[];if(!C||C=="")return j;var F=C.matchAll(/\$\{(\w+)[:-?=]*(.*?)\}/g),E=d()(F),c;try{for(E.s();!(c=E.n()).done;){var R=c.value;j.push({name:R[1],value:R[2]?R[2].indexOf("-")==0?R[2].substring(1):R[2]:""})}}catch(l){E.e(l)}finally{E.f()}return j}function P(C,j){return!C||!j?!1:(C&j)!==0}},86250:function(se,H,n){"use strict";n.d(H,{Z:function(){return me}});var M=n(67294),d=n(93967),I=n.n(d),P=n(98423),C=n(98065),j=n(53124),F=n(83559),E=n(83262);const c=["wrap","nowrap","wrap-reverse"],R=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],l=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],g=(u,D)=>{const A=D.wrap===!0?"wrap":D.wrap;return{[`${u}-wrap-${A}`]:A&&c.includes(A)}},S=(u,D)=>{const A={};return l.forEach(p=>{A[`${u}-align-${p}`]=D.align===p}),A[`${u}-align-stretch`]=!D.align&&!!D.vertical,A},_=(u,D)=>{const A={};return R.forEach(p=>{A[`${u}-justify-${p}`]=D.justify===p}),A};function G(u,D){return I()(Object.assign(Object.assign(Object.assign({},g(u,D)),S(u,D)),_(u,D)))}var r=G;const t=u=>{const{componentCls:D}=u;return{[D]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},X=u=>{const{componentCls:D}=u;return{[D]:{"&-gap-small":{gap:u.flexGapSM},"&-gap-middle":{gap:u.flexGap},"&-gap-large":{gap:u.flexGapLG}}}},q=u=>{const{componentCls:D}=u,A={};return c.forEach(p=>{A[`${D}-wrap-${p}`]={flexWrap:p}}),A},U=u=>{const{componentCls:D}=u,A={};return l.forEach(p=>{A[`${D}-align-${p}`]={alignItems:p}}),A},V=u=>{const{componentCls:D}=u,A={};return R.forEach(p=>{A[`${D}-justify-${p}`]={justifyContent:p}}),A},k=()=>({});var ue=(0,F.I$)("Flex",u=>{const{paddingXS:D,padding:A,paddingLG:p}=u,le=(0,E.IX)(u,{flexGapSM:D,flexGap:A,flexGapLG:p});return[t(le),X(le),q(le),U(le),V(le)]},k,{resetStyle:!1}),N=function(u,D){var A={};for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&D.indexOf(p)<0&&(A[p]=u[p]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var le=0,p=Object.getOwnPropertySymbols(u);le<p.length;le++)D.indexOf(p[le])<0&&Object.prototype.propertyIsEnumerable.call(u,p[le])&&(A[p[le]]=u[p[le]]);return A},me=M.forwardRef((u,D)=>{const{prefixCls:A,rootClassName:p,className:le,style:pe,flex:ye,gap:Ie,children:Le,vertical:Me=!1,component:we="div"}=u,Ue=N(u,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:Z,direction:$,getPrefixCls:ae}=M.useContext(j.E_),J=ae("flex",A),[oe,ve,e]=ue(J),Ce=Me!=null?Me:Z==null?void 0:Z.vertical,Be=I()(le,p,Z==null?void 0:Z.className,J,ve,e,r(J,u),{[`${J}-rtl`]:$==="rtl",[`${J}-gap-${Ie}`]:(0,C.n)(Ie),[`${J}-vertical`]:Ce}),Ae=Object.assign(Object.assign({},Z==null?void 0:Z.style),pe);return ye&&(Ae.flex=ye),Ie&&!(0,C.n)(Ie)&&(Ae.gap=Ie),oe(M.createElement(we,Object.assign({ref:D,className:Be,style:Ae},(0,P.Z)(Ue,["justify","wrap","align"])),Le))})},64599:function(se,H,n){var M=n(96263);function d(I,P){var C=typeof Symbol!="undefined"&&I[Symbol.iterator]||I["@@iterator"];if(!C){if(Array.isArray(I)||(C=M(I))||P&&I&&typeof I.length=="number"){C&&(I=C);var j=0,F=function(){};return{s:F,n:function(){return j>=I.length?{done:!0}:{done:!1,value:I[j++]}},e:function(g){throw g},f:F}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var E=!0,c=!1,R;return{s:function(){C=C.call(I)},n:function(){var g=C.next();return E=g.done,g},e:function(g){c=!0,R=g},f:function(){try{!E&&C.return!=null&&C.return()}finally{if(c)throw R}}}}se.exports=d,se.exports.__esModule=!0,se.exports.default=se.exports}}]);
