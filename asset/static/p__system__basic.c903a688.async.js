"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1050],{1699:function(X,$,n){n.d($,{u:function(){return r}});var w=n(9783),E=n.n(w),z=n(97857),F=n.n(z),R=n(67294),a=n(82346),D=n(40411),f=n(42075),m=n(85893),r=function(h){var T=(0,a.useAccess)(),o=Array.isArray(h.access)?h.access:[h.access],_,S=h.fallback;return typeof h.children=="function"?(_=h.children(o.reduce(function(t,y){return F()(F()({},t),{},E()({},y,T[y]))},{})),_||(_=S)):o.every(function(t){return T[t]})?_=h.children:_=S,!S&&_&&h.showProTips&&T.canSeeEnableCe&&(_=(0,m.jsx)(D.Z,{offset:h.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:_})),!S&&_&&h.showProRibbonTips&&T.canSeeEnableCe&&(_=(0,m.jsx)(D.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:_})),h.space?(0,m.jsx)(f.Z,F()(F()({},h.space),{},{children:_})):_}},80821:function(X,$,n){n.d($,{Z:function(){return m}});var w=n(5574),E=n.n(w),z=n(24963),F=n(86738),R=n(28036),a=n(83062),D=n(67294),f=n(85893);function m(r){var K=(0,D.useState)(!1),h=E()(K,2),T=h[0],o=h[1],_=(0,D.useContext)(z.Z),S=_.lang,t=_.notice,y=_.message,Z=function(){o(!0);var V=r.action();V instanceof Promise?V.then(function(J){if(o(!1),J){typeof r.onSuccess=="function"&&r.onSuccess(J);var N="";r.messageSuccess?typeof r.messageSuccess=="function"?N=r.messageSuccess(J):N=r.messageSuccess.indexOf("notification.")==0?S(r.messageSuccess):r.messageSuccess:N=S("notification.finish"),r.asynced?y.info(N):y.success(N)}}).catch(function(J){o(!1),typeof r.onError=="function"&&r.onError(J)}):o(!1)};return r.confirm?(0,f.jsx)(F.Z,{style:{width:500},title:r.confirmTitle?r.confirmTitle:S("notification.title.tip"),description:typeof r.confirm=="string"&&r.confirm.indexOf("notification.")==0?S(r.confirm):r.confirm,onConfirm:Z,okText:"Yes",cancelText:"No",onOpenChange:r.confirmOnOpenChange,children:(0,f.jsx)(R.ZP,{block:r.block,disabled:r.disabled,icon:!r.children&&T?void 0:r.icon,loading:T,danger:r.danger,type:r.type,children:r.children})}):(0,f.jsx)(a.Z,{title:r.tips,children:(0,f.jsx)(R.ZP,{block:r.block,style:r.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:r.disabled,icon:!r.children&&T?void 0:r.icon,loading:T,onClick:Z,danger:r.danger,type:r.type,children:r.children})})}},44349:function(X,$,n){var w=n(97857),E=n.n(w),z=n(17186),F=n(5966),R=n(86250),a=n(67294),D=n(85893),f=(0,a.forwardRef)(function(m,r){var K=(0,a.useRef)();(0,a.useImperativeHandle)(r,function(){return{addItem:function(o,_){var S,t=(S=K.current)===null||S===void 0?void 0:S.getList(),y=!1;if(t==null||t.map(function(j){if(j.name==o){y=!0;return}}),!y){var Z;(Z=K.current)===null||Z===void 0||Z.add({name:o,value:_})}},clear:function(){var o;(o=K.current)===null||o===void 0||(o=o.getList())===null||o===void 0||o.map(function(_,S){var t;(t=K.current)===null||t===void 0||t.remove(S)})}}});var h={};return m.hideCopyButton===!0&&(h.copyIconProps=!1),m.hideDeleteButton===!0&&(h.deleteIconProps=!1),(0,D.jsx)(z.u,E()(E()({initialValue:m.initialValue,label:m.label,name:m.name,actionRef:K,creatorButtonProps:m.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(m.label?m.label:m.name)}:!1,min:m.min?m.min:0},h),{},{children:function(o,_,S){return(0,D.jsx)(R.Z,{justify:m.justify,gap:m.gap,children:m.items.map(function(t){return t.render?(0,D.jsx)("div",{children:t.render&&t.render(o,_,S)},"".concat(m.name,"-").concat(t.name,"-").concat(o.key)):(0,D.jsx)(F.Z,{width:t.width,name:t.name,label:t.label,required:t.required,rules:[{required:t.required}],disabled:t.disabled,placeholder:t.placeholder},"".concat(m.name,"-").concat(t.name,"-").concat(o.key))})})}}))});$.Z=f},34879:function(X,$,n){n.d($,{Z:function(){return R}});var w=n(97961),E=n(91604),z=n(1677),F=n(85893);function R(a){return a.showDragger?(0,F.jsx)(E.Z,{max:a.max?a.max:1,title:a.title,label:a.label,required:a.required,rules:[{required:a.required}],fieldProps:{multiple:!!(a.max&&a.max>1),name:"file",accept:a.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(f){return new Promise(function(m){var r;(0,w._2)({path:(r=f.response.data.path)!==null&&r!==void 0?r:""}).then(function(K){m(!0)})})}},name:a.name}):(0,F.jsx)(z.Z,{max:a.max?a.max:1,title:a.title,label:a.label,required:a.required,rules:[{required:a.required}],fieldProps:{multiple:!!(a.max&&a.max>1),name:"file",accept:a.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(f){return new Promise(function(m){var r;(0,w._2)({path:(r=f.response.data.path)!==null&&r!==void 0?r:""}).then(function(K){m(!0)})})}},name:a.name})}},2808:function(X,$,n){n.d($,{Z:function(){return D}});var w=n(97857),E=n.n(w),z=n(62370),F=n(51663),R=n(67294),a=n(85893);function D(f){return(0,a.jsx)(z.Z,E()(E()({},f),{},{children:(0,a.jsx)(F.Z,{showText:function(r){return r.toHexString()},allowClear:!0,presets:[{label:"\u9884\u8BBE\u989C\u8272",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},56757:function(X,$,n){n.r($),n.d($,{default:function(){return We}});var w=n(5574),E=n.n(w),z=n(19632),F=n.n(z),R=n(15009),a=n.n(R),D=n(99289),f=n.n(D),m=n(24963),r=n(87662),K=n(88641),h=n(38345),T=n(97269),o=n(5966),_=n(31199),S=n(63434),t=n(67294),y=n(42075),Z=n(80821),j=n(1699),V=n(82346);function J(p){return N.apply(this,arguments)}function N(){return N=f()(a()().mark(function p(x){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,V.request)("/api/common/setting/email-test",{method:"POST",data:x}));case 1:case"end":return s.stop()}},p)})),N.apply(this,arguments)}var e=n(85893);function he(){var p=(0,t.useRef)(),x=(0,t.useContext)(m.Z),B=x.lang,s=(0,t.useState)(""),Q=E()(s,2),H=Q[0],O=Q[1],k=function(){var W=f()(a()().mark(function A(){var C,I,M,u,l,d,b,i;return a()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,r.pe)({groupName:"setting",name:"emailServer"});case 2:i=c.sent,i.data.setting.value.emailServer&&((C=p.current)===null||C===void 0||C.setFieldsValue({host:(I=i.data.setting.value.emailServer.host)!==null&&I!==void 0?I:"",port:(M=i.data.setting.value.emailServer.port)!==null&&M!==void 0?M:"",email:(u=i.data.setting.value.emailServer.email)!==null&&u!==void 0?u:"",code:(l=i.data.setting.value.emailServer.code)!==null&&l!==void 0?l:"",status:(d=i.data.setting.value.emailServer.status)!==null&&d!==void 0?d:[]})),i.data.setting.value.emailServer&&O((b=i.data.setting.value.emailServer)===null||b===void 0?void 0:b.email);case 5:case"end":return c.stop()}},A)}));return function(){return W.apply(this,arguments)}}();return(0,e.jsx)(h.Z,{direction:"column",gutter:[0,10],ghost:!0,children:(0,e.jsx)(h.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(K.Z,{}),subTitle:"\u90AE\u4EF6\u670D\u52A1",children:(0,e.jsxs)(T.A,{layout:"horizontal",labelAlign:"right",labelCol:{span:5,offset:0},formRef:p,onInit:f()(a()().mark(function W(){return a()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return k(),C.abrupt("return",!0);case 2:case"end":return C.stop()}},W)})),submitter:{render:function(A,C){return[].concat(F()(C),[(0,e.jsx)(Z.Z,{tips:"\u5C06\u53D1\u9001\u90AE\u4EF6\u81F3 ".concat(H," \u4E2D\uFF0C\u6CE8\u610F\u67E5\u6536"),action:f()(a()().mark(function I(){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,J({subject:B("system.basic.emailTestSubject"),content:B("system.basic.emailTestContent",{time:new Date().toISOString()})});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},I)})),children:"\u6D4B\u8BD5"},"testEmail")])}},onFinish:function(){var W=f()(a()().mark(function A(C){var I;return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,r.gW)({host:C.host,port:C.port,email:C.email,code:C.code,status:C.status});case 2:return(I=p.current)===null||I===void 0||I.resetFields(),k(),u.abrupt("return",!0);case 5:case"end":return u.stop()}},A)}));return function(A){return W.apply(this,arguments)}}(),children:[(0,e.jsx)(o.Z,{label:"SMTP\u670D\u52A1\u5668\u5730\u5740",name:"host",placeholder:"\u4F8B\u5982:smtp.163.com",required:!0,rules:[{required:!0}]}),(0,e.jsx)(_.Z,{label:"SMTP\u670D\u52A1\u5668\u7AEF\u53E3",name:"port",placeholder:"\u53D1\u9001\u90AE\u4EF6\u7AEF\u53E3\uFF0C\u901A\u5E38\u4E3A465",required:!0,rules:[{required:!0}]}),(0,e.jsx)(o.Z,{label:"SMTP\u6388\u6743\u7801",name:"code",width:"lg",placeholder:"SMTP\u6388\u6743\u7801",required:!0,rules:[{required:!0}],addonAfter:(0,e.jsxs)(y.Z,{children:[(0,e.jsx)("a",{target:"_blank",href:"https://service.mail.qq.com/detail/0/75",children:"QQ\u90AE\u7BB1\u6388\u6743\u7801"}),(0,e.jsx)("a",{target:"_blank",href:"https://help.mail.163.com/faqDetail.do?code=d7a5dc8471cd0c0e8b4b8f4f8e49998b374173cfe9171305fa1ce630d7f67ac286624f309a1a7089",children:"163\u90AE\u7BB1\u6388\u6743\u7801"})]})}),(0,e.jsx)(o.Z,{label:"\u53D1\u4EF6\u90AE\u7BB1",name:"email",placeholder:"\u53D1\u4EF6\u90AE\u7BB1\u5730\u5740",required:!0,rules:[{required:!0}]}),(0,e.jsx)(j.u,{access:"canSeeEnableEe",children:(0,e.jsx)(S.Z.Group,{name:"status",label:"\u5F00\u542F\u529F\u80FD",options:[{label:"\u6CE8\u518C",value:"register"}]})})]})})})}function fe(p){return ie.apply(this,arguments)}function ie(){return ie=f()(a()().mark(function p(x){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,V.request)("/api/pro/two-fa/enable",{method:"POST",data:x}));case 1:case"end":return s.stop()}},p)})),ie.apply(this,arguments)}function ve(){return se.apply(this,arguments)}function se(){return se=f()(a()().mark(function p(){return a()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",(0,V.request)("/api/pro/two-fa/get-setting",{method:"POST"}));case 1:case"end":return B.stop()}},p)})),se.apply(this,arguments)}var ge=n(29177),_e=n(86548),be=n(97937),Ee=n(12119),Y=n(97462),le=n(52688),ae=n(62370),oe=n(28036),je=n(35930);function pe(){var p=(0,t.useRef)(),x=(0,V.useModel)("@@initialState"),B=x.initialState,s=x.loading,Q=x.error,H=x.refresh,O=x.setInitialState,k=(0,t.useContext)(m.Z),W=k.message,A=k.notice,C=k.lang,I=(0,t.useRef)(),M=(0,t.useState)(0),u=E()(M,2),l=u[0],d=u[1],b=(0,V.useAccess)();return(0,t.useEffect)(function(){!b.canSeeEnableCe&&ve().then(function(i){var v;(v=I.current)===null||v===void 0||v.setFieldsValue({enable:i.data.enable,email:i.data.email,qrcode:i.data.qrcode})})},[l]),(0,e.jsxs)(h.Z,{direction:"column",gutter:[0,10],ghost:!0,children:[(0,e.jsx)(h.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(ge.Z,{}),subTitle:"\u7BA1\u7406\u5458",children:(0,e.jsxs)(T.A,{layout:"horizontal",labelAlign:"right",labelCol:{span:3,offset:0},formRef:p,onFinish:function(){var i=f()(a()().mark(function v(c){var g,P;return a()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,r.Jn)({username:c.username,password:c.password,newPassword:c.newPassword});case 2:if(g=L.sent,!(g&&g.data)){L.next=9;break}return(P=p.current)===null||P===void 0||P.resetFields(),W.success("\u4FEE\u6539\u7BA1\u7406\u5458\u7528\u6237\u540D\u548C\u5BC6\u7801\u6210\u529F"),localStorage.removeItem("token"),H(),L.abrupt("return",!0);case 9:case"end":return L.stop()}},v)}));return function(v){return i.apply(this,arguments)}}(),children:[(0,e.jsx)(Y.Z,{name:["enableUsername"],children:function(v){var c=v.enableUsername;return(0,e.jsx)(o.Z,{label:"\u7528\u6237\u540D",name:"username",style:{width:"80%"},initialValue:B==null?void 0:B.user.username,disabled:!c,addonAfter:[(0,e.jsx)(oe.ZP,{type:"link",hidden:!!c,icon:(0,e.jsx)(_e.Z,{}),onClick:function(){var P;(P=p.current)===null||P===void 0||P.setFieldValue("enableUsername",!0)}},"editBtn"),(0,e.jsx)(oe.ZP,{type:"link",hidden:!c,icon:(0,e.jsx)(be.Z,{}),onClick:function(){var P;(P=p.current)===null||P===void 0||P.setFieldValue("enableUsername",!1)}},"closeBtn")]},"username")}}),(0,e.jsx)(o.Z.Password,{label:"\u5F53\u524D\u5BC6\u7801",name:"password",placeholder:"\u8F93\u5165\u7BA1\u7406\u5458\u5F53\u524D\u5BC6\u7801",rules:[{required:!0}]},"password"),(0,e.jsx)(o.Z.Password,{label:"\u65B0\u5BC6\u7801",name:"newPassword"},"newPasword"),(0,e.jsx)(Y.Z,{name:["newPassword"],children:function(v){var c=v.newPassword;return(0,e.jsx)(o.Z.Password,{label:"\u786E\u8BA4\u65B0\u5BC6\u7801",name:"newPassword2",dependencies:["newPassword"],rules:[{required:typeof c!="undefined"&&c!=""},function(g){var P=g.getFieldValue;return{validator:function(L,ne){return!ne||P("newPassword")===ne?Promise.resolve():Promise.reject(new Error("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4"))}}}]},"newPasword2")}})]})}),(0,e.jsx)(j.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(v){var c=v.canSeeEnableCe;return(0,e.jsx)(h.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(Ee.Z,{}),subTitle:"\u767B\u5F55\u53CC\u56E0\u7D20\u914D\u7F6E",children:(0,e.jsxs)(T.A,{disabled:c,onFinish:function(){var g=f()(a()().mark(function P(U){var L,ne;return a()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,fe({email:U.email,enable:U.enable});case 2:L=re.sent,L&&L.data.qrcode&&((ne=I.current)===null||ne===void 0||ne.setFieldValue("qrcode",L.data.qrcode)),d(l+1);case 5:case"end":return re.stop()}},P)}));return function(P){return g.apply(this,arguments)}}(),formRef:I,layout:"horizontal",labelAlign:"right",labelCol:{span:3,offset:0},children:[(0,e.jsx)(le.Z,{label:"\u5F00\u542F",name:"enable"}),(0,e.jsx)(o.Z,{label:"\u90AE\u7BB1",name:"email",placeholder:"\u8BF7\u8F93\u5165\u4F60\u7684\u90AE\u7BB1",rules:[{required:!0},{type:"email"}]}),(0,e.jsx)(ae.Z,{name:"qrcode",hidden:!0}),(0,e.jsx)(Y.Z,{name:["qrcode"],children:function(P){var U=P.qrcode;if(U)return(0,e.jsx)(ae.Z,{label:"\u7ED1\u5B9A\u4E8C\u7EF4\u7801",tooltip:"\u4F7F\u7528\u652F\u6301 2fa \u7684\u9A8C\u8BC1 App \u626B\u7801\u8BE5\u4E8C\u7EF4\u7801",children:(0,e.jsx)(je.Z,{style:{border:"#d1d9e0b3 solid 1px",padding:"10px",borderRadius:"10px"},width:200,src:"data:image/png;base64,".concat(U)})})}})]})})}})]})}var xe={xs:6,sm:6,md:6,lg:3,xl:3,xxl:3,offset:0},ce=n(43425),te=n(86615),Ce=n(64317),me=n(86125),Pe=n(184),G=n(24739),Se=n(25054),Be=n(90672),Fe=n(9361),ye=n(21532),Ae=n(86250),de=n(34879),Te=n(44349),ue=n(65451),Oe=n(2808),q=function(x){return(0,e.jsx)(Oe.Z,{name:x.name,label:x.label,tooltip:x.tooltip})},ee={colorPrimary:"",colorTextBase:"",colorLink:"",colorBgContainer:"",colorBorder:"",colorBgElevated:"",colorBorderSecondary:"colorBorder"},De=["borderRadius","wireframe"],Ze=(0,t.forwardRef)(function(p,x){(0,t.useImperativeHandle)(x,function(){return{show:function(){H(!0)},reset:function(){var u;(u=O.current)===null||u===void 0||u.resetFields(["siteLogo","siteTitle","siteCopyright","siteLink","bgImage","bgSize"])}}});var B=(0,t.useState)(!1),s=E()(B,2),Q=s[0],H=s[1],O=(0,t.useRef)(),k=(0,t.useContext)(m.Z),W=k.message,A=k.lang,C=Fe.Z.useToken(),I=C.token;return(0,e.jsx)(ye.ZP,{children:(0,e.jsxs)(Pe.a,{drawerProps:{forceRender:!0},submitter:{render:function(u,l){return(0,e.jsx)(y.Z,{children:l[1]})}},title:"\u81EA\u5B9A\u4E49\u4E3B\u9898",formRef:O,open:Q,onOpenChange:function(u){var l;(l=O.current)===null||l===void 0||l.resetFields(["bgImageUpload","siteLogoUpload"]),u&&((0,ue.Py)().then(function(d){var b=d.data.config;if(b){var i;if((i=O.current)===null||i===void 0||i.setFieldsValue({siteLogo:b.siteLogo,siteTitle:b.siteTitle,siteCopyright:b.siteCopyright,siteLink:b.siteLink,bgImage:b.bgImage,loginLogo:b.loginLogo}),!b.bgImage||!b.bgImage.width||b.bgImage.width=="100%"){var v;(v=O.current)===null||v===void 0||v.setFieldValue("bgSize","full")}else{var c;(c=O.current)===null||c===void 0||c.setFieldValue("bgSize","default")}}}),Object.keys(ee).map(function(d){var b=d;ee[d]!=""&&(b=ee[d]),O!=null&&O.current})),H(u)},name:"theme-user",onFinish:function(){var M=f()(a()().mark(function u(l){var d,b,i;return a()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return i={token:{},bgImage:l.bgImage,siteLink:l.siteLink,siteTitle:(d=l.siteTitle)!==null&&d!==void 0?d:"",siteCopyright:l.siteCopyright,siteLogo:(b=l.siteLogo)!==null&&b!==void 0?b:"",loginLogo:l.loginLogo},l.siteLogoUpload&&l.siteLogoUpload.length>0&&(i.siteLogo=l.siteLogoUpload[0].response.data.path),i.bgImage||(i.bgImage={}),l.bgImageUpload&&l.bgImageUpload.length>0&&(i.bgImage.src=l.bgImageUpload[0].response.data.path),i.bgImage.width=l.bgSize=="full"?"100%":"",l.loginLogoUpload&&l.loginLogoUpload.length>0&&(i.loginLogo=l.loginLogoUpload[0].response.data.path),Object.keys(ee).map(function(g){i.token||(i.token={});var P=g;ee[g]!=""&&(P=ee[g]);var U=O.current&&O.current.getFieldValue(P);U&&U.toHexString?U.cleared||(i.token[g]=U.toHexString()):i.token[g]=U}),De.map(function(g){i.token||(i.token={});var P=O.current&&O.current.getFieldValue(g);i.token[g]=P}),c.next=10,(0,ue.Z8)(i);case 10:return p.onFinish&&p.onFinish(),W.success(A("notification.finishTheme")),c.abrupt("return",!0);case 13:case"end":return c.stop()}},u)}));return function(u){return M.apply(this,arguments)}}(),children:[(0,e.jsx)(G.UW,{title:"\u76AE\u80A4\u8272\u7CFB",extra:(0,e.jsx)(le.Z,{name:"enableColor"})}),(0,e.jsx)(Y.Z,{name:["enableColor"],children:function(u){var l=u.enableColor;return l&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(G.UW,{children:q({name:"colorPrimary",label:"\u54C1\u724C\u8272",tooltip:"\u54C1\u724C\u8272\u662F\u4F53\u73B0\u4EA7\u54C1\u7279\u6027\u548C\u4F20\u64AD\u7406\u5FF5\u6700\u76F4\u89C2\u7684\u89C6\u89C9\u5143\u7D20\u4E4B\u4E00\u3002\u5728\u4F60\u5B8C\u6210\u54C1\u724C\u4E3B\u8272\u7684\u9009\u53D6\u4E4B\u540E\uFF0C\u4F1A\u81EA\u52A8\u5E2E\u4F60\u751F\u6210\u4E00\u5957\u5B8C\u6574\u7684\u8272\u677F\uFF0C\u5E76\u8D4B\u4E88\u5B83\u4EEC\u6709\u6548\u7684\u8BBE\u8BA1\u8BED\u4E49"})}),(0,e.jsxs)(G.UW,{children:[q({name:"colorBgContainer",label:"\u4E3B\u7A97\u53E3\u80CC\u666F\u8272\u53CA\u900F\u660E\u5EA6"}),q({name:"colorBgElevated",label:"\u5F39\u51FA\u7A97\u80CC\u666F\u8272\u53CA\u900F\u660E\u5EA6"})]}),(0,e.jsxs)(G.UW,{children:[q({name:"colorTextBase",label:"\u57FA\u7840\u6587\u672C"}),q({name:"colorLink",label:"\u94FE\u63A5\u6587\u672C"}),q({name:"colorBorder",label:"\u8FB9\u6846\u8272"})]})]})}}),(0,e.jsx)(G.UW,{title:"\u98CE\u683C",extra:(0,e.jsx)(le.Z,{name:"enableStyle"})}),(0,e.jsx)(Y.Z,{name:["enableStyle"],children:function(u){var l=u.enableStyle;return l&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(G.UW,{children:(0,e.jsxs)(Ae.Z,{gap:40,children:[(0,e.jsx)(le.Z,{label:"\u7EBF\u6846\u5316",name:"wireframe"}),(0,e.jsx)(Se.Z,{min:1,max:16,label:"\u5706\u89D2",name:"borderRadius"})]})})})}}),(0,e.jsx)(G.UW,{title:"\u9762\u677F"}),(0,e.jsx)(o.Z,{label:"\u6807\u9898",name:"siteTitle",placeholder:"\u5C55\u793A\u5728\u9762\u677F\u5DE6\u4E0A\u89D2\u53CA\u9875\u9762\u6807\u7B7E\uFF0C\u4E3A\u7A7A\u5219\u4E0D\u663E\u793A"}),(0,e.jsxs)(G.UW,{children:[(0,e.jsx)(de.Z,{label:"Logo",title:"\u4E0A\u4F20 Logo",name:"siteLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(o.Z,{width:"md",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u8FDC\u7A0BUrl",name:"siteLogo"})]}),(0,e.jsxs)(G.UW,{children:[(0,e.jsx)(de.Z,{label:"\u80CC\u666F\u56FE",title:"\u4E0A\u4F20\u80CC\u666F\u56FE",name:"bgImageUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(o.Z,{width:"md",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u8FDC\u7A0BUrl",name:["bgImage","src"]}),(0,e.jsx)(te.Z.Group,{name:"bgSize",label:"\u5C3A\u5BF8",initialValue:"full",valueEnum:{full:"\u5168\u5C4F",default:"\u9ED8\u8BA4"}})]}),(0,e.jsx)(G.UW,{children:(0,e.jsx)(Y.Z,{name:["bgSize"],children:function(u){var l=u.bgSize;if(l=="default")return(0,e.jsxs)(G.UW,{children:[(0,e.jsx)(_.Z,{width:"xs",name:["bgImage","top"],label:"\u8DDD\u9876\u90E8\u504F\u79FB\u91CF"}),(0,e.jsx)(_.Z,{width:"xs",name:["bgImage","bottom"],label:"\u8DDD\u5E95\u90E8\u504F\u79FB\u91CF"}),(0,e.jsx)(_.Z,{width:"xs",name:["bgImage","left"],label:"\u8DDD\u5DE6\u4FA7\u504F\u79FB\u91CF"}),(0,e.jsx)(_.Z,{width:"xs",name:["bgImage","right"],label:"\u8DDD\u53F3\u4FA7\u504F\u79FB\u91CF"})]})}})}),(0,e.jsx)(Te.Z,{name:"siteLink",label:"\u5E95\u90E8\u94FE\u63A5",showAddButton:!0,hideCopyButton:!0,gap:10,items:[{name:"title",label:"\u6587\u672C"},{name:"href",label:"\u94FE\u63A5"}]}),(0,e.jsx)(Be.Z,{label:"\u7248\u6743\u4FE1\u606F",name:"siteCopyright"}),(0,e.jsxs)(G.UW,{title:"\u767B\u5F55\u9875",children:[(0,e.jsx)(de.Z,{label:"Logo",title:"Logo",name:"loginLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(o.Z,{width:"md",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u8FDC\u7A0BUrl",name:"loginLogo"})]})]})})}),Me=Ze,Ue=n(68602);function Re(){var p=(0,t.useRef)(),x=(0,t.useRef)(),B=(0,V.useModel)("@@initialState"),s=B.initialState,Q=B.loading,H=B.error,O=B.refresh,k=B.setInitialState,W=(0,V.useAccess)(),A=(0,t.useContext)(m.Z),C=A.message,I=A.lang,M=(0,V.useAntdConfigSetter)();return(0,t.useEffect)(function(){var u,l,d,b,i,v,c,g;(u=p.current)===null||u===void 0||u.setFieldsValue({algorithm:(l=s==null?void 0:s.theme.algorithm)!==null&&l!==void 0?l:"default",mainMenu:(d=s==null?void 0:s.theme.mainMenu)!==null&&d!==void 0?d:"top",compact:(b=s==null?void 0:s.theme.compact)!==null&&b!==void 0?b:"default",fontSize:(i=s==null?void 0:s.theme.fontSize)!==null&&i!==void 0?i:14,fontSizeConsole:(v=s==null?void 0:s.theme.fontSizeConsole)!==null&&v!==void 0?v:12,sideMenu:(c=s==null?void 0:s.theme.sideMenu)!==null&&c!==void 0?c:"default",tablePageSize:(g=s==null?void 0:s.theme.tablePageSize)!==null&&g!==void 0?g:"20"})},[s]),(0,e.jsx)(h.Z,{direction:"column",gutter:[0,10],ghost:!0,children:(0,e.jsxs)(h.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(ce.Z,{}),subTitle:"\u57FA\u672C\u914D\u7F6E",children:[!W.canSeeEnableCe&&(0,e.jsx)(Me,{ref:x}),(0,e.jsxs)(T.A,{layout:"horizontal",labelAlign:"right",labelCol:xe,formRef:p,submitter:{render:function(l,d){return[d[1]]}},onFinish:function(){var u=f()(a()().mark(function l(d){var b;return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(b={algorithm:d.algorithm,mainMenu:d.mainMenu,sideMenu:d.sideMenu,compact:d.compact,fontSizeConsole:d.fontSizeConsole,fontSize:d.fontSize,tablePageSize:d.tablePageSize},!(d.algorithm!=(s==null?void 0:s.theme.algorithm)&&!W.canSeeEnableCe)){v.next=4;break}return v.next=4,(0,ue.H)({clearColor:!0});case 4:return localStorage.setItem("dpanel-theme",d.algorithm),localStorage.setItem("dpanel-compact",d.compact),localStorage.setItem("dpanel-pagesize",d.tablePageSize),v.next=9,(0,Ue.Gk)(b);case 9:C.success(I("notification.finishTheme"));case 10:case"end":return v.stop()}},l)}));return function(l){return u.apply(this,arguments)}}(),children:[(0,e.jsx)(te.Z.Group,{name:"algorithm",label:"\u4E3B\u9898\u76AE\u80A4",initialValue:"default",radioType:"button",valueEnum:function(){var l={default:"\u4EAE\u8272",dark:"\u6697\u8272",system:"\u8DDF\u968F\u7CFB\u7EDF"};return l}}),(0,e.jsx)(j.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(l){var d=l.canSeeEnableCe;return(0,e.jsx)(Y.Z,{name:["algorithm"],children:function(i){var v=i.algorithm;if(v!="system")return(0,e.jsx)(ae.Z,{label:"\u81EA\u5B9A\u4E49\u76AE\u80A4\u914D\u7F6E",children:(0,e.jsxs)(y.Z.Compact,{children:[(0,e.jsx)(oe.ZP,{disabled:d,onClick:function(){var g;(g=x.current)===null||g===void 0||g.show()},icon:(0,e.jsx)(ce.Z,{}),children:"\u914D\u7F6E"}),(0,e.jsx)(Z.Z,{disabled:d,action:f()(a()().mark(function c(){var g;return a()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,ue.H)({clearColor:!0,clearSite:!0});case 2:M(function(L){return L.theme={token:{}},L}),(g=x.current)===null||g===void 0||g.reset(),window.location.reload();case 5:case"end":return U.stop()}},c)})),children:"\u6062\u590D\u9ED8\u8BA4"})]})})}})}}),(0,e.jsx)(te.Z.Group,{name:"mainMenu",label:"\u4E3B\u83DC\u5355\u4F4D\u7F6E",initialValue:"top",radioType:"button",valueEnum:{top:"\u9876\u90E8",side:"\u4FA7\u9762"}}),(0,e.jsx)(te.Z.Group,{name:"sideMenu",label:"\u5DE6\u4FA7\u83DC\u5355",initialValue:"default",radioType:"button",valueEnum:{default:"\u9ED8\u8BA4\u5C55\u5F00",collapse:"\u9ED8\u8BA4\u6536\u7F29"}}),(0,e.jsx)(te.Z.Group,{name:"compact",label:"\u6587\u672C\u5E03\u5C40",initialValue:"default",radioType:"button",valueEnum:{default:"\u9ED8\u8BA4",compact:"\u7D27\u51D1"}}),(0,e.jsx)(ae.Z,{name:"fontSize",label:"\u4E3B\u9898\u5B57\u53F7",initialValue:14,children:(0,e.jsx)(me.Z,{step:2,max:30,min:8,marks:{8:"8",10:"10",12:"12",14:"14",16:"16",20:"20",26:"26",30:"20"}})}),(0,e.jsx)(ae.Z,{name:"fontSizeConsole",label:"\u63A7\u5236\u53F0\u5B57\u53F7",initialValue:12,children:(0,e.jsx)(me.Z,{step:2,max:30,min:8,marks:{8:"8",10:"10",12:"12",14:"14",16:"16",20:"20",26:"26",30:"20"}})}),(0,e.jsx)(Ce.Z,{initialValue:"20",label:"\u8868\u683C\u5206\u9875\u6570",name:"tablePageSize",valueEnum:{10:"\u6BCF\u987510\u6761",20:"\u6BCF\u987520\u6761",50:"\u6BCF\u987550\u6761",100:"\u6BCF\u9875100\u6761",all:"\u663E\u793A\u5168\u90E8"}})]})]})})}var Ie=n(90078),Le=n(92398);function We(){var p=(0,V.useSearchParams)(),x=E()(p,2),B=x[0],s=x[1],Q=(0,t.useState)("user"),H=E()(Q,2),O=H[0],k=H[1],W=(0,V.useAccess)();return(0,t.useEffect)(function(){var A;k((A=B.get("tab"))!==null&&A!==void 0?A:"user")},[]),(0,e.jsx)(Ie._z,{children:(0,e.jsx)(h.Z,{children:(0,e.jsx)(Le.Z,{activeKey:O,onChange:function(C){k(C),s("tab="+C)},items:[{key:"user",label:"\u767B\u5F55\u914D\u7F6E",children:(0,e.jsx)(pe,{})},{key:"theme",label:"\u754C\u9762\u914D\u7F6E",children:(0,e.jsx)(Re,{})},{key:"notice",label:"\u901A\u77E5\u670D\u52A1",children:(0,e.jsx)(he,{})}].filter(function(A){return!(W.canSeeEnableCe&&A.key=="notice")})})})})}},97961:function(X,$,n){n.d($,{GH:function(){return K},MF:function(){return _},_2:function(){return T},fN:function(){return D},ii:function(){return a},vC:function(){return m}});var w=n(15009),E=n.n(w),z=n(99289),F=n.n(z),R=n(82346),a=[{name:"linux/amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"linux/arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"linux/i386",arch:"386",search:[]},{name:"linux/arm/v6",arch:"arm",search:[]},{name:"linux/arm/v7",arch:"arm",search:[]},{name:"linux/arm/v8",arch:"arm64",search:[]},{name:"linux/ppc64le",arch:"ppc64le",search:[]},{name:"linux/riscv64",arch:"riscv64",search:[]}];function D(t){return f.apply(this,arguments)}function f(){return f=F()(E()().mark(function t(y){return E()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",(0,R.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:y}));case 1:case"end":return j.stop()}},t)})),f.apply(this,arguments)}function m(t){return r.apply(this,arguments)}function r(){return r=F()(E()().mark(function t(y){return E()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",(0,R.request)("/api/app/image/import-by-container-tar",{method:"POST",data:y}));case 1:case"end":return j.stop()}},t)})),r.apply(this,arguments)}function K(t){return h.apply(this,arguments)}function h(){return h=F()(E()().mark(function t(y){return E()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",(0,R.request)("/api/app/image/import-by-image-tar",{method:"POST",data:y}));case 1:case"end":return j.stop()}},t)})),h.apply(this,arguments)}function T(t){return o.apply(this,arguments)}function o(){return o=F()(E()().mark(function t(y){return E()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,R.request)("/api/common/attach/delete",{method:"POST",data:y});case 2:return j.abrupt("return",j.sent);case 3:case"end":return j.stop()}},t)})),o.apply(this,arguments)}function _(){return S.apply(this,arguments)}function S(){return S=F()(E()().mark(function t(){return E()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.abrupt("return",(0,R.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return Z.stop()}},t)})),S.apply(this,arguments)}}}]);
