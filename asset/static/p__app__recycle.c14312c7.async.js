"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1610],{80821:function(B,g,t){t.d(g,{Z:function(){return j}});var R=t(5574),r=t.n(R),o=t(93246),l=t(54006),i=t(31418),_=t(86738),m=t(14726),S=t(83062),D=t(67294),y=t(85893);function j(a){var b=(0,D.useState)(!1),v=r()(b,2),E=v[0],M=v[1],O=i.Z.useApp(),I=(0,l.useIntl)(),T=function(){M(!0),a.action().then(function(p){if(M(!1),typeof a.onSuccess=="function"&&a.onSuccess(p),a.messageSuccess){var n="";typeof a.messageSuccess=="function"?n=a.messageSuccess(p):n=a.messageSuccess,n.indexOf(".")>-1&&(n=I.formatMessage({id:n})),a.asynced?(0,o.Rk)(O,n):(0,o.$h)(O,n)}}).catch(function(p){M(!1),typeof a.onError=="function"&&a.onError(p)})};return a.confirm?(0,y.jsx)(_.Z,{style:{width:500},title:"\u63D0\u793A",description:a.confirm,onConfirm:T,okText:"Yes",cancelText:"No",children:(0,y.jsx)(m.ZP,{disabled:a.disabled,icon:a.icon,loading:E,danger:a.danger,type:a.type,children:a.children})}):(0,y.jsx)(S.Z,{title:a.tips,children:(0,y.jsx)(m.ZP,{disabled:a.disabled,icon:a.icon,loading:E,onClick:T,danger:a.danger,type:a.type,children:a.children})})}},99343:function(B,g,t){t.r(g),t.d(g,{default:function(){return e}});var R=t(15009),r=t.n(R),o=t(99289),l=t.n(o),i=t(6110),_=t(10641),m=t(62597),S=t(14726),D=t(83062),y=t(42075),j=t(50136),a=t(54006),b=t(87462),v=t(67294),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M876.6 239.5c-.5-.9-1.2-1.8-2-2.5-5-5-13.1-5-18.1 0L684.2 409.3l-67.9-67.9L788.7 169c.8-.8 1.4-1.6 2-2.5 3.6-6.1 1.6-13.9-4.5-17.5-98.2-58-226.8-44.7-311.3 39.7-67 67-89.2 162-66.5 247.4l-293 293c-3 3-2.8 7.9.3 11l169.7 169.7c3.1 3.1 8.1 3.3 11 .3l292.9-292.9c85.5 22.8 180.5.7 247.6-66.4 84.4-84.5 97.7-213.1 39.7-311.3zM786 499.8c-58.1 58.1-145.3 69.3-214.6 33.6l-8.8 8.8-.1-.1-274 274.1-79.2-79.2 230.1-230.1s0 .1.1.1l52.8-52.8c-35.7-69.3-24.5-156.5 33.6-214.6a184.2 184.2 0 01144-53.5L537 318.9a32.05 32.05 0 000 45.3l124.5 124.5a32.05 32.05 0 0045.3 0l132.8-132.8c3.7 51.8-14.4 104.8-53.6 143.9z"}}]},name:"tool",theme:"outlined"},M=E,O=t(84089),I=function(P,d){return v.createElement(O.Z,(0,b.Z)({},P,{ref:d,icon:M}))},T=v.forwardRef(I),x=T,p=t(96974),n=t(80821),s=t(67255),u=t(85893);function e(){var W=(0,p.UO)(),P=(0,v.useRef)();return(0,v.useEffect)(function(){var d;(d=P.current)===null||d===void 0||d.reload()},[W]),(0,u.jsx)(i._z,{header:{extra:[(0,u.jsx)(S.ZP,{type:"primary",children:(0,u.jsx)(a.Link,{to:"/app/create/image",children:"\u521B\u5EFA\u5BB9\u5668"})},"create")]},children:(0,u.jsx)(_.Z,{scroll:{x:"max-content"},actionRef:P,columns:[{title:"\u540D\u79F0",ellipsis:!0,dataIndex:"siteTitle"},{title:"\u6807\u8BC6",ellipsis:!0,dataIndex:"siteName"},{title:"\u5220\u9664\u65E5\u671F",ellipsis:!0,dataIndex:"deletedAt",search:!1,width:180,render:function(A,f,C,h,c){return new Date(f.deletedAt).toLocaleString()}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:100,render:function(A,f,C,h){return[(0,u.jsx)(a.Link,{to:"/app/create/image?id="+f.id,type:"link",children:(0,u.jsx)(D.Z,{title:"\u518D\u6B21\u6784\u5EFA",children:(0,u.jsx)(x,{})})},"rebuild")]}}],rowKey:"id",request:function(){var d=l()(r()().mark(function A(f,C,h){var c,K,U;return r()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,m.cl)({pageSize:(c=f.pageSize)!==null&&c!==void 0?c:10,page:(K=f.current)!==null&&K!==void 0?K:1,isDelete:!0,siteTitle:f.siteTitle,siteName:f.siteName});case 2:return U=L.sent,L.abrupt("return",{data:U.data.list,success:!0,total:U.data.total});case 4:case"end":return L.stop()}},A)}));return function(A,f,C){return d.apply(this,arguments)}}(),rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(A){var f=A.selectedRowKeys;return(0,u.jsx)(y.Z,{size:16,children:(0,u.jsx)(n.Z,{danger:!0,type:"primary",action:function(){return(0,m.xb)({id:f})},onSuccess:function(){var h,c;return!((h=P.current)===null||h===void 0)&&h.reloadAndRest&&((c=P.current)===null||c===void 0||c.reloadAndRest()),!0},onError:function(){var h,c;return!((h=P.current)===null||h===void 0)&&h.reset&&((c=P.current)===null||c===void 0||c.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"})})},pagination:(0,s.O)(),search:{collapsed:!1},tableExtraRender:function(){return(0,u.jsx)(j.Z,{mode:"horizontal",selectedKeys:["recycle"],items:[{label:(0,u.jsx)(a.Link,{to:"/app/list",replace:!0,children:"\u5BB9\u5668\u5217\u8868"}),key:"all"},{label:(0,u.jsx)(a.Link,{to:"/app/recycle",replace:!0,children:"\u56DE\u6536\u7AD9"}),key:"recycle"}]})}})})}},62597:function(B,g,t){t.d(g,{$G:function(){return _},Ct:function(){return M},Tb:function(){return y},XH:function(){return a},cl:function(){return S},iE:function(){return v},lK:function(){return x},xb:function(){return I}});var R=t(15009),r=t.n(R),o=t(99289),l=t.n(o),i=t(54006);function _(n){return m.apply(this,arguments)}function m(){return m=l()(r()().mark(function n(s){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/site/create-by-image",{method:"POST",data:s}));case 1:case"end":return e.stop()}},n)})),m.apply(this,arguments)}function S(n){return D.apply(this,arguments)}function D(){return D=l()(r()().mark(function n(s){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/site/get-list",{method:"POST",data:s}));case 1:case"end":return e.stop()}},n)})),D.apply(this,arguments)}function y(n){return j.apply(this,arguments)}function j(){return j=l()(r()().mark(function n(s){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.download=!1,e.next=3,(0,i.request)("/api/app/log/run",{method:"POST",data:s});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},n)})),j.apply(this,arguments)}function a(n){return b.apply(this,arguments)}function b(){return b=l()(r()().mark(function n(s){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.download=!0,e.next=3,(0,i.request)("/api/app/log/run",{method:"POST",data:s,responseType:"blob"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},n)})),b.apply(this,arguments)}function v(n){return E.apply(this,arguments)}function E(){return E=l()(r()().mark(function n(s){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.request)("/api/app/site/get-detail",{data:s,method:"POST"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},n)})),E.apply(this,arguments)}function M(n){return O.apply(this,arguments)}function O(){return O=l()(r()().mark(function n(s){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/container/delete",{method:"POST",data:s}));case 1:case"end":return e.stop()}},n)})),O.apply(this,arguments)}function I(n){return T.apply(this,arguments)}function T(){return T=l()(r()().mark(function n(s){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/site/delete",{method:"POST",data:s}));case 1:case"end":return e.stop()}},n)})),T.apply(this,arguments)}function x(n){return p.apply(this,arguments)}function p(){return p=l()(r()().mark(function n(s){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.request)("/api/app/site/update-title",{method:"POST",data:s});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},n)})),p.apply(this,arguments)}},67255:function(B,g,t){t.d(g,{O:function(){return R},j:function(){return r}});function R(){var o,l=parseInt((o=localStorage.getItem("dpanel-pagesize"))!==null&&o!==void 0?o:"0");return{showSizeChanger:!0,defaultPageSize:l!=null?l:20}}function r(o){var l="dpanel-table-column-".concat(o),i={};if(localStorage.getItem(l)){var _;i=JSON.parse((_=localStorage.getItem(l))!==null&&_!==void 0?_:"{}")}return{defaultValue:i,onChange:function(S){localStorage.setItem("dpanel-table-column-".concat(o),JSON.stringify(S))}}}}}]);
