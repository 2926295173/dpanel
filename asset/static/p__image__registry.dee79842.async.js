"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9013],{5966:function(L,R,e){var y=e(97685),t=e(1413),_=e(45987),h=e(21770),A=e(72723),B=e(55241),g=e(97435),T=e(67294),f=e(30506),o=e(85893),m=["fieldProps","proFieldProps"],r=["fieldProps","proFieldProps"],E="text",d=function(s){var n=s.fieldProps,p=s.proFieldProps,c=(0,_.Z)(s,m);return(0,o.jsx)(f.Z,(0,t.Z)({valueType:E,fieldProps:n,filedConfig:{valueType:E},proFieldProps:p},c))},i=function(s){var n=(0,h.Z)(s.open||!1,{value:s.open,onChange:s.onOpenChange}),p=(0,y.Z)(n,2),c=p[0],K=p[1];return(0,o.jsx)(A.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(b){var Z,P=b.getFieldValue(s.name||[]);return(0,o.jsx)(B.Z,(0,t.Z)((0,t.Z)({getPopupContainer:function(l){return l&&l.parentNode?l.parentNode:l},onOpenChange:function(l){return K(l)},content:(0,o.jsxs)("div",{style:{padding:"4px 0"},children:[(Z=s.statusRender)===null||Z===void 0?void 0:Z.call(s,P),s.strengthText?(0,o.jsx)("div",{style:{marginTop:10},children:(0,o.jsx)("span",{children:s.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},s.popoverProps),{},{open:c,children:s.children}))}})},u=function(s){var n=s.fieldProps,p=s.proFieldProps,c=(0,_.Z)(s,r),K=(0,T.useState)(!1),$=(0,y.Z)(K,2),b=$[0],Z=$[1];return n!=null&&n.statusRender&&c.name?(0,o.jsx)(i,{name:c.name,statusRender:n==null?void 0:n.statusRender,popoverProps:n==null?void 0:n.popoverProps,strengthText:n==null?void 0:n.strengthText,open:b,onOpenChange:Z,children:(0,o.jsx)("div",{children:(0,o.jsx)(f.Z,(0,t.Z)({valueType:"password",fieldProps:(0,t.Z)((0,t.Z)({},(0,g.Z)(n,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(j){var l;n==null||(l=n.onBlur)===null||l===void 0||l.call(n,j),Z(!1)},onClick:function(j){var l;n==null||(l=n.onClick)===null||l===void 0||l.call(n,j),Z(!0)}}),proFieldProps:p,filedConfig:{valueType:E}},c))})}):(0,o.jsx)(f.Z,(0,t.Z)({valueType:"password",fieldProps:n,proFieldProps:p,filedConfig:{valueType:E}},c))},a=d;a.Password=u,a.displayName="ProFormComponent",R.Z=a},90672:function(L,R,e){var y=e(1413),t=e(45987),_=e(67294),h=e(30506),A=e(85893),B=["fieldProps","proFieldProps"],g=function(f,o){var m=f.fieldProps,r=f.proFieldProps,E=(0,t.Z)(f,B);return(0,A.jsx)(h.Z,(0,y.Z)({ref:o,valueType:"textarea",fieldProps:m,proFieldProps:r},E))};R.Z=_.forwardRef(g)},80821:function(L,R,e){e.d(R,{Z:function(){return m}});var y=e(5574),t=e.n(y),_=e(93246),h=e(54006),A=e(31418),B=e(86738),g=e(14726),T=e(83062),f=e(67294),o=e(85893);function m(r){var E=(0,f.useState)(!1),d=t()(E,2),i=d[0],u=d[1],a=A.Z.useApp(),U=(0,h.useIntl)(),s=function(){u(!0),r.action().then(function(p){if(u(!1),typeof r.onSuccess=="function"&&r.onSuccess(p),r.messageSuccess){var c="";typeof r.messageSuccess=="function"?c=r.messageSuccess(p):c=r.messageSuccess,c.indexOf(".")>-1&&(c=U.formatMessage({id:c})),r.asynced?(0,_.Rk)(a,c):(0,_.$h)(a,c)}}).catch(function(p){u(!1),typeof r.onError=="function"&&r.onError(p)})};return r.confirm?(0,o.jsx)(B.Z,{style:{width:500},title:"\u63D0\u793A",description:r.confirm,onConfirm:s,okText:"Yes",cancelText:"No",children:(0,o.jsx)(g.ZP,{disabled:r.disabled,icon:r.icon,loading:i,danger:r.danger,type:r.type,children:r.children})}):(0,o.jsx)(T.Z,{title:r.tips,children:(0,o.jsx)(g.ZP,{disabled:r.disabled,icon:r.icon,loading:i,onClick:s,danger:r.danger,type:r.type,children:r.children})})}},24396:function(L,R,e){e.r(R),e.d(R,{default:function(){return Z}});var y=e(15009),t=e.n(y),_=e(99289),h=e.n(_),A=e(80821),B=e(5574),g=e.n(B),T=e(75870),f=e(93246),o=e(184),m=e(5966),r=e(90672),E=e(31418),d=e(14726),i=e(67294),u=e(85893),a=(0,i.forwardRef)(function(P,j){var l=(0,i.useState)(!1),C=g()(l,2),D=C[0],I=C[1],x=E.Z.useApp(),v=(0,i.useRef)(),G=(0,i.useState)(0),O=g()(G,2),N=O[0],Y=O[1];return(0,i.useImperativeHandle)(j,function(){return{setEditId:function(M){(0,T.t1)({id:M}).then(function(F){var S;I(!0),Y(M),(S=v.current)===null||S===void 0||S.setFieldsValue({title:F.data.info.title,serverAddress:F.data.info.serverAddress,username:F.data.info.setting.username,proxy:F.data.info.setting.proxy.join(`
`)})})}}}),(0,u.jsxs)(o.a,{drawerProps:{forceRender:!0},name:"create",title:"\u6DFB\u52A0/\u7F16\u8F91\u955C\u50CF\u4ED3\u5E93",open:D,onOpenChange:function(M){I(M)},formRef:v,trigger:(0,u.jsx)(d.ZP,{type:"primary",onClick:function(){var M;(M=v.current)===null||M===void 0||M.resetFields(),Y(0)},children:"\u6DFB\u52A0\u4ED3\u5E93"}),onFinish:function(){var z=h()(t()().mark(function M(F){var S,H,w,V;return t()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,(0,T.ZH)({id:N,title:F.title,serverAddress:F.serverAddress,username:(S=F.username)!==null&&S!==void 0?S:"",password:(H=F.password)!==null&&H!==void 0?H:"",proxy:F.proxy?F.proxy.split(`
`):[]});case 2:if(w=W.sent,!(w&&w.data&&w.data.id>0)){W.next=8;break}return(0,f.$h)(x,"\u6DFB\u52A0\u6216\u662F\u7F16\u8F91\u955C\u50CF\u4ED3\u5E93\u6210\u529F"),P.onFinish&&P.onFinish(),(V=v.current)===null||V===void 0||V.resetFields(),W.abrupt("return",!0);case 8:case"end":return W.stop()}},M)}));return function(M){return z.apply(this,arguments)}}(),children:[(0,u.jsx)(m.Z,{label:"\u540D\u79F0",name:"title",placeholder:"\u6307\u5B9A\u4ED3\u5E93\u4E00\u4E2A\u540D\u79F0",disabled:N==-1,required:!0}),(0,u.jsx)(m.Z,{label:"\u4ED3\u5E93\u5730\u5740",tooltip:"\u4F8B\u5982:ccr.ccs.tencentyun.com\uFF0Cdocker.io",name:"serverAddress",placeholder:"\u586B\u5199\u4ED3\u5E93\u5730\u5740\uFF0C\u5B98\u65B9\u9ED8\u8BA4\u7559\u7A7A",disabled:N==-1}),(0,u.jsx)(m.Z,{label:"\u7528\u6237\u540D",name:"username",placeholder:"\u914D\u7F6E\u4ED3\u5E93\u7528\u6237\u540D",tooltip:""},"username"),(0,u.jsx)(m.Z.Password,{label:"\u5BC6\u7801",name:"password",placeholder:"\u914D\u7F6E\u4ED3\u5E93\u5BC6\u7801,\u4E3A\u7A7A\u65F6\u4F7F\u7528\u65E7\u5BC6\u7801"},"password"),(0,u.jsx)(r.Z,{label:"\u52A0\u901F\u5730\u5740",name:"proxy",fieldProps:{autoSize:{minRows:10}},placeholder:`https://docker.1panel.live 
https://docker.m.daocloud.io`,tooltip:"\u914D\u7F6E\u8BE5\u4ED3\u5E93\u7684\u52A0\u901F\u5730\u5740\uFF0C\u591A\u4E2A\u5730\u5740\u7528\u6362\u884C\u5206\u9694\u3002\u591A\u4E2A\u5730\u5740\u91C7\u7528\u8F6E\u8BAD\u7684\u65B9\u5F0F\u4E0B\u8F7D"})]})}),U=a,s=e(6409),n=e(43425),p=e(6110),c=e(88717),K=e(78957),$=e(96074),b=e(83062);function Z(){var P=(0,i.useRef)(),j=(0,i.useRef)();return(0,u.jsx)(p._z,{header:{extra:[(0,u.jsx)(U,{onFinish:function(){var C,D;!((C=P.current)===null||C===void 0)&&C.reloadAndRest&&((D=P.current)===null||D===void 0||D.reloadAndRest())},ref:j})]},children:(0,u.jsx)(c.Z,{scroll:{x:"max-content"},rowKey:"id",columns:[{title:"\u540D\u79F0",ellipsis:!0,dataIndex:"title"},{title:"Url",dataIndex:"serverAddress"},{title:"\u7528\u6237",dataIndex:["setting","username"]},{title:"\u64CD\u4F5C",width:100,render:function(C,D,I,x,v){return(0,u.jsx)(K.Z,{split:(0,u.jsx)($.Z,{type:"vertical"}),children:(0,u.jsx)(d.ZP,{type:"link",onClick:function(){var O;(O=j.current)===null||O===void 0||O.setEditId(D.id)},children:(0,u.jsx)(b.Z,{title:"\u7BA1\u7406",children:(0,u.jsx)(n.Z,{})})})})}}],request:function(){var l=h()(t()().mark(function C(D,I,x){var v;return t()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,T.Ot)({title:D.title,serverAddress:D.serverAddress});case 2:return v=O.sent,O.abrupt("return",{data:v.data.list,success:!0,total:v.data.list.length});case 4:case"end":return O.stop()}},C)}));return function(C,D,I){return l.apply(this,arguments)}}(),toolBarRender:function(){return[]},rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},pagination:(0,s.O)(),actionRef:P,tableAlertOptionRender:function(C){var D=C.selectedRowKeys;return(0,u.jsx)(K.Z,{size:16,children:(0,u.jsx)(A.Z,{danger:!0,type:"primary",action:function(){return(0,T.ix)({id:D})},onSuccess:function(){var x,v;return!((x=P.current)===null||x===void 0)&&x.reloadAndRest&&((v=P.current)===null||v===void 0||v.reloadAndRest()),!0},onError:function(){var x,v;return!((x=P.current)===null||x===void 0)&&x.reset&&((v=P.current)===null||v===void 0||v.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"})})}})})}},75870:function(L,R,e){e.d(R,{Ot:function(){return B},ZH:function(){return T},ix:function(){return o},t1:function(){return r}});var y=e(15009),t=e.n(y),_=e(99289),h=e.n(_),A=e(54006);function B(d){return g.apply(this,arguments)}function g(){return g=h()(t()().mark(function d(i){return t()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,A.request)("/api/common/registry/get-list",{method:"POST",data:i}));case 1:case"end":return a.stop()}},d)})),g.apply(this,arguments)}function T(d){return f.apply(this,arguments)}function f(){return f=h()(t()().mark(function d(i){return t()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,A.request)("/api/common/registry/create",{method:"POST",data:i}));case 1:case"end":return a.stop()}},d)})),f.apply(this,arguments)}function o(d){return m.apply(this,arguments)}function m(){return m=h()(t()().mark(function d(i){return t()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,A.request)("/api/common/registry/delete",{method:"POST",data:i}));case 1:case"end":return a.stop()}},d)})),m.apply(this,arguments)}function r(d){return E.apply(this,arguments)}function E(){return E=h()(t()().mark(function d(i){return t()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,A.request)("/api/common/registry/get-detail",{method:"POST",data:i}));case 1:case"end":return a.stop()}},d)})),E.apply(this,arguments)}},6409:function(L,R,e){e.d(R,{O:function(){return y}});function y(){var t,_=parseInt((t=localStorage.getItem("dpanel-pagesize"))!==null&&t!==void 0?t:"0");return{showSizeChanger:!0,defaultPageSize:_!=null?_:20}}}}]);
