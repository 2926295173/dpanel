"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7549],{80821:function(L,E,e){e.d(E,{Z:function(){return a}});var P=e(97857),r=e.n(P),W=e(5574),d=e.n(W),j=e(24963),C=e(36146),g=e(86738),v=e(83062),i=e(28036),c=e(67294),M=e(85893);function a(_){var u=(0,c.useState)(!1),p=d()(u,2),o=p[0],s=p[1],O=(0,c.useContext)(j.Z),f=O.message,t=new C.Uo,K=function(){s(!0);var T=_.action();T instanceof Promise?T.then(function(n){if(s(!1),n){typeof _.onSuccess=="function"&&_.onSuccess(n);var U="";_.messageSuccess?typeof _.messageSuccess=="function"?U=_.messageSuccess(n):U=_.messageSuccess.indexOf("notification.")==0?t.format(_.messageSuccess):_.messageSuccess:U=t.format("notification.finish"),_.asynced?f.info(U):f.success(U)}}).catch(function(n){s(!1),typeof _.onError=="function"&&_.onError(n)}):s(!1)};return _.confirm?(0,M.jsx)(g.Z,r()(r()({style:{width:500},title:_.confirmTitle?_.confirmTitle:t.format("notification.title.tip"),description:typeof _.confirm=="string"&&_.confirm.indexOf("notification.")==0?t.format(_.confirm):_.confirm,onConfirm:K,okText:"Yes",cancelText:"No",onOpenChange:_.confirmOnOpenChange},_.confirmProps),{},{children:(0,M.jsx)(v.Z,{title:_.tips,children:(0,M.jsx)(i.ZP,{block:_.block,disabled:_.disabled,icon:!_.children&&o?void 0:_.icon,loading:o,danger:_.danger,type:_.type,children:_.children})})})):(0,M.jsx)(v.Z,{title:_.tips,children:(0,M.jsx)(i.ZP,{block:_.block,style:_.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:_.disabled,icon:!_.children&&o?void 0:_.icon,loading:o,onClick:K,danger:_.danger,type:_.type,children:_.children})})}},81366:function(L,E,e){var P=e(97857),r=e.n(P),W=e(19632),d=e.n(W),j=e(5574),C=e.n(j),g=e(27254),v=e(42075),i=e(85418),c=e(25593),M=e(28036),a=e(67294),_=e(31112),u=e(85893),p={title:"/",path:"/"},o=(0,a.forwardRef)(function(s,O){var f=(0,a.useContext)(_.Z),t=f.showPath,K=f.redirectPath,$=(0,a.useState)([p]),T=C()($,2),n=T[0],U=T[1];(0,a.useImperativeHandle)(O,function(){return{addHistory:function(h,D){D=="/"?U([p]):U([].concat(d()(n),[{title:h,path:D}]))},initHistory:function(h,D){U([r()(r()({},p),{},{children:D})].concat(d()(h)))}}});var y=function(h){t?t(n[h].title,n[h].path):s.showPath&&s.showPath(n[h].title,n[h].path);var D=n.filter(function(x,I){return I<=h});U(d()(D))};return(0,u.jsxs)(v.Z,{children:[(0,u.jsx)(v.Z.Compact,{children:n.map(function(B,h){return B.children?(0,u.jsxs)(i.Z.Button,{menu:{items:B.children.map(function(D,x){return{key:x,label:(0,u.jsx)(c.Z.Link,{onClick:function(){K(D)},children:D},x)}})},type:"dashed",onClick:function(x){y(h)},children:[(0,u.jsx)(g.Z,{})," ",B.title]},h):(0,u.jsx)(M.ZP,{icon:(0,u.jsx)(g.Z,{}),type:"dashed",onClick:function(){y(h)},children:B.title},h)})}),n.length>=2&&(0,u.jsx)(c.Z.Text,{copyable:{text:n[n.length-1].path}})]})});E.Z=o},31112:function(L,E,e){var P=e(67294),r=(0,P.createContext)({});E.Z=r},68536:function(L,E,e){e.d(E,{Z:function(){return M}});var P=e(24963),r=e(36146),W=e(93613),d=e(36693),j=e(2741),C=e(25593),g=e(42075),v=e(67294),i=e(85893),c=0;function M(a){var _=(0,v.useContext)(P.Z),u=_.message,p=new r.Uo("components.explorer");return a.isDir?(0,i.jsx)(C.Z.Link,{onClick:function(){a.onClick&&a.onClick()},children:(0,i.jsxs)(g.Z,{children:[(0,i.jsx)(W.Z,{}),a.showName]})}):a.isLink?(0,i.jsx)(C.Z.Link,{onClick:function(){a.onClick&&a.onClick()},children:(0,i.jsxs)(g.Z,{children:[(0,i.jsx)(d.Z,{}),a.showName]})}):(0,i.jsx)(C.Z.Text,{onClick:function(){if(c++,c==2){c=0,a.onClick&&a.onClick();return}setTimeout(function(){c==1&&u.info(p.format("fileNameMessageViewDetail")),c=0},400)},style:{cursor:"pointer"},children:(0,i.jsxs)(g.Z,{children:[(0,i.jsx)(j.Z,{}),a.showName]})})}},47248:function(L,E,e){var P=e(15009),r=e.n(P),W=e(99289),d=e.n(W),j=e(5574),C=e.n(j),g=e(38345),v=e(97269),i=e(62370),c=e(5966),M=e(64317),a=e(28036),_=e(85265),u=e(25593),p=e(42075),o=e(67294),s=e(3393),O=e(97961),f=e(92754),t=e(82346),K=e(2205),$=e(3616),T=e(36146),n=e(85893),U=(0,o.forwardRef)(function(y,B){var h=(0,o.useState)(!1),D=C()(h,2),x=D[0],I=D[1],k=(0,o.useRef)(),Z=(0,o.useRef)(),J=(0,o.useState)(!1),G=C()(J,2),V=G[0],Y=G[1],R=new T.Uo("components.imagePull");return(0,o.useImperativeHandle)(B,function(){return{upgradeImage:function(l){var m;return I(!0),(m=k.current)===null||m===void 0||m.setFieldValue("imageUrl",l),(0,s.Gb)({tag:l,type:"pull"})},setImageName:function(l){var m;I(!0),(m=k.current)===null||m===void 0||m.setFieldValue("imageUrl",l)}}}),[(0,n.jsx)(a.ZP,{type:y.buttonType?y.buttonType:"default",onClick:function(){var l,m;I(!0),(l=k.current)===null||l===void 0||l.resetFields(),(m=Z.current)===null||m===void 0||m.setStart("")},children:R.format("triggerButton")},"remoteBtn"),(0,n.jsxs)(_.Z,{forceRender:!0,open:x,title:R.format("drawerTitle"),width:$.R_,onClose:function(){var l;I(!1),(l=Z.current)===null||l===void 0||l.close()},footer:!1,children:[(0,n.jsx)(g.Z,{children:(0,n.jsx)(u.Z.Text,{children:(0,n.jsxs)("ul",{style:{lineHeight:"30px"},children:[(0,n.jsxs)("li",{children:[R.format("tip.1")," ",(0,n.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:T.FD.format("help")})]}),(0,n.jsxs)("li",{children:[R.format("tip.2")," ",(0,n.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:T.FD.format("help")})]}),(0,n.jsxs)("li",{children:[R.format("tip.3")," "]}),(0,n.jsxs)("li",{children:[R.format("tip.4")," ",(0,n.jsx)(t.Link,{to:"/image/registry",children:T.Ob.format("image.registry.create")})]}),(0,n.jsxs)("li",{children:[R.format("tip.5")," ",(0,n.jsx)(t.Link,{to:"/image/registry",children:T.Ob.format("image.registry")})]})]})})}),(0,n.jsx)(g.Z,{title:R.format("triggerButton"),headerBordered:!0,children:(0,n.jsxs)(v.A,{formRef:k,submitter:!1,isKeyPressSubmit:!0,onFinish:function(){var A=d()(r()().mark(function l(m){var b,H,w,N,F,z;return r()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return F=(b=m.imageUrl)!==null&&b!==void 0?b:"",m.registry&&(F=m.registry.serverAddress+"/"+F),Y(!0),(H=Z.current)===null||H===void 0||H.setStart(F),S.next=6,(0,s.Gb)({tag:F,type:"pull",platform:(w=m.platform)!==null&&w!==void 0?w:""}).finally(function(){Y(!1)});case 6:return z=S.sent,(N=Z.current)===null||N===void 0||N.setFinish(),I(!1),y.onFinish&&y.onFinish(z.data.tag),S.abrupt("return",!0);case 11:case"end":return S.stop()}},l)}));return function(l){return A.apply(this,arguments)}}(),children:[(0,n.jsxs)(p.Z.Compact,{children:[(0,n.jsx)(i.Z,{name:"registry",children:(0,n.jsx)(K.Z,{width:"150px"})}),(0,n.jsx)(c.Z,{disabled:V,width:270,name:"imageUrl",placeholder:R.format("imageUrlEmpty"),required:!0,rules:[{required:!0}]}),(0,n.jsx)(M.Z,{name:"platform",style:{width:100},placeholder:R.format("imagePlatformEmpty"),options:O.ii.map(function(A){return{label:A.name,value:A.name}})}),(0,n.jsx)(a.ZP,{loading:V,onClick:d()(r()().mark(function A(){var l;return r()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:(l=k.current)===null||l===void 0||l.submit();case 1:case"end":return b.stop()}},A)})),children:R.format("triggerButton")}),(0,n.jsx)(a.ZP,{danger:!0,onClick:function(){var l;(l=Z.current)===null||l===void 0||l.close()},children:T.FD.format("listManageKill")})]}),(0,n.jsx)(i.Z,{label:R.format("progressTitle"),children:(0,n.jsx)(f.Z,{ref:Z})})]})})]},"remoteDrawer")]});E.Z=U},3616:function(L,E,e){e.d(E,{Ed:function(){return d},FK:function(){return r},R_:function(){return P},ob:function(){return W}});var P=window.innerWidth<=1024?"90vw":"65vw",r="90vw",W="60vw",d="50vh"},24963:function(L,E,e){var P=e(67294),r=(0,P.createContext)({});E.Z=r},97961:function(L,E,e){e.d(E,{GH:function(){return M},_2:function(){return _},fN:function(){return g},ii:function(){return C},vC:function(){return i}});var P=e(15009),r=e.n(P),W=e(99289),d=e.n(W),j=e(82346),C=[{name:"amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"i386",arch:"386",search:[]},{name:"arm/v6",arch:"arm",search:[]},{name:"arm/v7",arch:"arm",search:[]},{name:"arm/v8",arch:"arm64",search:[]},{name:"ppc64le",arch:"ppc64le",search:[]},{name:"riscv64",arch:"riscv64",search:[]}];function g(s){return v.apply(this,arguments)}function v(){return v=d()(r()().mark(function s(O){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,j.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:O}));case 1:case"end":return t.stop()}},s)})),v.apply(this,arguments)}function i(s){return c.apply(this,arguments)}function c(){return c=d()(r()().mark(function s(O){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,j.request)("/api/app/image/import-by-container-tar",{method:"POST",data:O}));case 1:case"end":return t.stop()}},s)})),c.apply(this,arguments)}function M(s){return a.apply(this,arguments)}function a(){return a=d()(r()().mark(function s(O){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,j.request)("/api/app/image/import-by-image-tar",{method:"POST",data:O}));case 1:case"end":return t.stop()}},s)})),a.apply(this,arguments)}function _(s){return u.apply(this,arguments)}function u(){return u=d()(r()().mark(function s(O){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,j.request)("/api/common/attach/delete",{method:"POST",data:O});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},s)})),u.apply(this,arguments)}function p(){return o.apply(this,arguments)}function o(){return o=_asyncToGenerator(_regeneratorRuntime().mark(function s(){return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",request("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return f.stop()}},s)})),o.apply(this,arguments)}}}]);
