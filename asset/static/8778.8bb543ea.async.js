"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8778],{91058:function(y,C,e){var B=e(5574),h=e.n(B),p=e(89035),U=e(38345),O=e(17186),A=e(24739),D=e(5966),I=e(42075),r=e(14726),x=e(85576),m=e(67294),d=e(95089),W=e(89063),t=e(85893),g="docker-image",f=(0,m.forwardRef)(function(o,l){var n=(0,m.useState)(g),_=h()(n,2),c=_[0],a=_[1],u=(0,m.useRef)(),s=(0,m.useState)(""),E=h()(s,2),P=E[0],j=E[1],K=function(){c!="code"?a("code"):a(g)};(0,m.useImperativeHandle)(l,function(){return{addEnvItem:function(i,M){var T,F=(T=u.current)===null||T===void 0?void 0:T.getList(),Z=!1;if(F==null||F.map(function(V){if(V.name==i){Z=!0;return}}),!Z){var b;(b=u.current)===null||b===void 0||b.add({name:i,value:M})}},clear:function(){var i;(i=u.current)===null||i===void 0||(i=i.getList())===null||i===void 0||i.map(function(M,T){var F;(F=u.current)===null||F===void 0||F.remove(T)})}}});function R(v){try{var i,M;v==""&&(v=L());for(var T=(i=(M=u.current)===null||M===void 0||(M=M.getList())===null||M===void 0?void 0:M.length)!==null&&i!==void 0?i:0,F=T;F>=0;F--){var Z;(Z=u.current)===null||Z===void 0||Z.remove(F)}var b=v.split(`
`),V=0;b.map(function(H){var S,w=H.split("=");w.length<2||((S=u.current)===null||S===void 0||S.add({name:w[0],value:w.slice(1).join("=")},V),V++)})}catch(H){console.log(H)}}function L(){if(u&&u.current&&u.current.getList){var v,i=(v=u.current)===null||v===void 0?void 0:v.getList();if(i){var M=[];return i.map(function(T){M.push("".concat(T.name,"=").concat(T.value))}),M.join(`
`)}else return""}else return""}return(0,t.jsxs)(U.Z,{ghost:o.showCardGhost,title:"\u73AF\u5883\u53D8\u91CF",headerBordered:!0,extra:(0,t.jsxs)(I.Z,{children:[o.showImportButton&&(0,t.jsx)("div",{style:{marginBottom:"-25px"},children:(0,t.jsx)(W.Z,{title:"\u5BFC\u5165 env \u6587\u4EF6",onImport:function(i){return R(i),!0},onLoad:function(i){if(i.indexOf("=")<0)throw new Error("\u5BFC\u5165env\u6587\u4EF6\u9519\u8BEF");return!0}})}),(0,t.jsx)(r.ZP,{icon:(0,t.jsx)(p.Z,{}),type:c=="code"?"primary":"default",onClick:K,children:"\u4EE3\u7801\u6A21\u5F0F"},"code")]}),children:[(0,t.jsx)(O.u,{name:o.name?o.name:"environment",actionRef:u,creatorButtonProps:o.showAddButton?{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u73AF\u5883\u53D8\u91CF"}:!1,copyIconProps:!1,min:0,children:(0,t.jsxs)(A.UW,{children:[(0,t.jsx)(D.Z,{width:o.showInDrawer?"sm":"md",name:"name",label:"\u53D8\u91CF\u540D",required:!0,rules:[{required:!0}],disabled:o.showDisableName,placeholder:"\u8F93\u5165\u53D8\u91CF\u540D\u79F0"}),(0,t.jsx)(D.Z,{width:o.showInDrawer?"sm":"md",name:"value",label:"\u53D8\u91CF\u503C",rules:[{required:!!o.requireValue}],placeholder:"\u8F93\u5165\u53D8\u91CF\u503C\uFF0C\u53EF\u4EE5\u4E3A\u7A7A"})]})}),(0,t.jsx)(x.Z,{width:"800px",open:c=="code",onCancel:function(){return a("docker-image")},onOk:function(){R(P),a("docker-image")},children:(0,t.jsx)(d.ZP,{onChange:function(i){return j(i)},value:L(),height:"680px",theme:"light"})})]})});C.Z=f},82034:function(y,C,e){var B=e(5574),h=e.n(B),p=e(35880),U=e(38345),O=e(52688),A=e(97462),D=e(17186),I=e(24739),r=e(5966),x=e(42075),m=e(67294),d=e(85893),W=(0,m.forwardRef)(function(t,g){var f=(0,m.useState)(""),o=h()(f,2),l=o[0],n=o[1],_=(0,m.useRef)(),c=(0,m.useContext)(p.Z),a=c.createFormRef;return(0,m.useImperativeHandle)(g,function(){return{setExposePort:function(s){if(s){var E,P,j=(E=(P=_.current)===null||P===void 0?void 0:P.getList())!==null&&E!==void 0?E:[];Object.keys(s).map(function(K){var R=!1;if(j.map(function(v){v.dest==K&&(R=!0)}),!R){var L;(L=_.current)===null||L===void 0||L.add({host:"",dest:K})}})}},setHostname:function(s){n(s)},addPortItem:function(s,E){var P,j=(P=_.current)===null||P===void 0?void 0:P.getList(),K=!1;if(j==null||j.map(function(L){if(L.host==s){K=!0;return}}),!K){var R;(R=_.current)===null||R===void 0||R.add({host:String(s),dest:String(E)})}}}}),(0,d.jsx)(U.Z,{title:"\u7ED1\u5B9A\u7AEF\u53E3",tooltip:"\u8BBF\u95EE\u7AEF\u53E3\u7559\u7A7A\u65F6\u968F\u673A\u751F\u6210\u7AEF\u53E3\uFF0C\u5168\u90E8\u5220\u9664\u5219\u8868\u793A\u4E0D\u66B4\u9732\u7AEF\u53E3",headerBordered:!0,extra:(0,d.jsxs)(x.Z,{children:[t.showBindHost&&(0,d.jsx)(O.Z,{name:"useHostNetwork",fieldProps:{checkedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",unCheckedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",onChange:function(s){if(s){var E;(E=a.current)===null||E===void 0||E.setFieldsValue({bindIpV6:!1,publishAllPorts:!1})}}}}),t.showBindIpV6&&(0,d.jsx)(A.Z,{name:["siteName","useHostNetwork"],children:function(s){var E=s.useHostNetwork;return(0,d.jsx)(O.Z,{name:"publishAllPorts",fieldProps:{checkedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3",unCheckedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3"},disabled:E},"publishAllPorts")}}),t.showBindIpV6&&(0,d.jsx)(A.Z,{name:["siteName","useHostNetwork"],children:function(s){var E=s.useHostNetwork;return(0,d.jsx)(O.Z,{name:"bindIpV6",fieldProps:{checkedChildren:"IpV6",unCheckedChildren:"IpV6"},disabled:E},"bindIpV6")}})]}),children:(0,d.jsx)(A.Z,{name:["useHostNetwork","bindIpV6","publishAllPorts"],children:function(s){var E=s.useHostNetwork,P=s.bindIpV6,j=s.publishAllPorts;if(!E&&!j)return(0,d.jsx)(D.u,{name:"ports",actionRef:_,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BF9\u5916\u90E8\u8BBF\u95EE"},min:0,copyIconProps:!1,children:(0,d.jsxs)(I.UW,{children:[(0,d.jsx)(r.Z,{width:t.showInDrawer?"sm":"md",name:"host",label:"\u5916\u90E8\u8BBF\u95EE\u7AEF\u53E3",tooltip:"\u5BF9\u5916\u8BBF\u95EE\u53EF\u4EE5\u901A\u8FC7\u6DFB\u52A0\u8BBF\u95EE\u7AEF\u53E3\u6216\u662F\u521B\u5EFA\u5B8C\u6210\u540E\u5BF9\u5BB9\u5668\u7ED1\u5B9A\u57DF\u540D",placeholder:"\u7559\u7A7A\u5C06\u4F7F\u7528\u968F\u673A\u7AEF\u53E3\uFF0C\u7ED1\u5B9AIpV6\u5FC5\u586B",required:P,rules:[{required:P}]}),(0,d.jsx)(r.Z,{label:"\u5BB9\u5668\u5185\u7AEF\u53E3",width:t.showInDrawer?"sm":"md",name:"dest",placeholder:"\u6784\u5EFA\u65F6 Expose \u6307\u5B9A\u7684\u7AEF\u53E3",required:!0,rules:[{required:!0}]})]})})}})})});C.Z=W},10523:function(y,C,e){var B=e(38345),h=e(17186),p=e(5966),U=e(86615),O=e(24739),A=e(64317),D=e(42075),I=e(67294),r=e(85893),x=(0,I.forwardRef)(function(m,d){var W=(0,I.useRef)(),t=(0,I.useRef)();return(0,I.useImperativeHandle)(d,function(){return{setDefaultDestPath:function(f){var o,l,n=(o=(l=W.current)===null||l===void 0?void 0:l.getList())!==null&&o!==void 0?o:[];f.length!=0&&f.filter(function(_){return _!=""}).map(function(_){var c=!1;if(n.map(function(u){if(u.dest==_){c=!0;return}}),!c){var a;(a=W.current)===null||a===void 0||a.add({dest:_,permission:"write",inImage:!0,edit:!1})}})},addUserVolumeItem:function(f,o){var l,n=(l=t.current)===null||l===void 0?void 0:l.getList(),_=!1;if(n==null||n.map(function(a){if(a.dest==o){_=!0;return}}),!_){var c;(c=t.current)===null||c===void 0||c.add({host:f,dest:o})}}}}),(0,r.jsxs)(r.Fragment,{children:[m.showDefault&&(0,r.jsx)(B.Z,{title:"\u9ED8\u8BA4\u5B58\u50A8\uFF08Volume\uFF09",subTitle:"\u9ED8\u8BA4\u5B58\u50A8\u4E0E\u7AD9\u70B9\u6807\u8BC6\u4FDD\u6301\u4E00\u81F4",headerBordered:!0,children:(0,r.jsx)(h.u,{name:"volumesDefault",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u76EE\u5F55\u5230\u9ED8\u8BA4\u5B58\u50A8"},actionRef:W,copyIconProps:!1,min:0,children:function(f,o,l){var n=l.getCurrentRowData();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.Z,{width:"lg",name:"dest",label:"\u5BB9\u5668\u5185\u8DEF\u5F84",required:!0,rules:[{required:!0}],disabled:n.inImage}),(0,r.jsx)(U.Z.Group,{hidden:!0,name:"inImage",label:"\u955C\u50CF\u5185\u6302\u8F7D",valueEnum:{1:"\u662F",0:"\u5426"}})]})}})}),(0,r.jsx)(B.Z,{title:"\u81EA\u5B9A\u4E49\u6302\u8F7D\u6216\u662F\u5B58\u50A8\u5377",tooltip:"\u6302\u8F7D\u53EF\u4EE5\u662F\u5BBF\u4E3B\u673A\u7684\u76EE\u5F55\u6216\u662F\u6587\u4EF6\uFF0C\u4E5F\u53EF\u4EE5\u6307\u5B9A\u5B58\u50A8\u5377\u540D\uFF08\u81EA\u52A8\u65B0\u5EFA\uFF09\u3002",headerBordered:!0,direction:"column",children:(0,r.jsx)(h.u,{actionRef:t,name:"volumes",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u6620\u5C04\u76EE\u5F55"},copyIconProps:!1,min:0,children:(0,r.jsxs)(O.UW,{children:[(0,r.jsxs)(D.Z.Compact,{children:[(0,r.jsx)(p.Z,{label:"\u5BBF\u4E3B\u673A\u6587\u4EF6\u3001\u76EE\u5F55\u6216\u5B58\u50A8\u5377",name:"host",width:m.showInDrawer?"sm":"md",required:!0,rules:[{required:!0}]}),(0,r.jsx)(A.Z,{label:" ",valueEnum:{write:"\u8BFB\u5199",readonly:"\u53EA\u8BFB"},initialValue:"write",name:"permission"})]}),(0,r.jsx)(p.Z,{label:"\u5BB9\u5668\u5185\u8DEF\u5F84",name:"dest",width:m.showInDrawer?"sm":"md",required:!0,rules:[{required:!0}],disabled:m.disabledUserVolumeDest})]})})})]})});C.Z=x},92067:function(y,C,e){e.d(C,{Z:function(){return g}});var B=e(15009),h=e.n(B),p=e(99289),U=e.n(p),O=e(60335),A=e(27496),D=e(64789),I=e(10641),r=e(42075),x=e(66309),m=e(60922),d=e(14726),W=e(67294),t=e(85893);function g(f){return(0,t.jsx)(I.Z,{columns:[{title:"\u5BB9\u5668\u540D\u79F0",dataIndex:"names",render:function(l,n,_,c){return(0,t.jsx)(r.Z,{direction:"vertical",style:{textAlign:"left"},children:n==null?void 0:n.Names.map(function(a){return a})},n.Id)}},{title:"\u7AEF\u53E3",dataIndex:"ports",search:!1,render:function(l,n,_,c){return n!=null&&n.Ports?(0,t.jsx)(r.Z,{direction:"vertical",style:{textAlign:"left"},children:n==null?void 0:n.Ports.map(function(a,u){return(0,t.jsx)(x.Z,{color:"#2db7f5",icon:a.PublicPort?(0,t.jsx)(A.Z,{}):"",children:"".concat(a.PublicPort?a.IP+":"+a.PublicPort+"->":"").concat(a.PrivatePort,"/").concat(a.Type)},u)})},n.Id):(0,t.jsx)(t.Fragment,{})}},{title:"\u8FD0\u884C\u5BB9\u5668",search:!1,render:function(l,n,_,c){return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(m.Z.Text,{ellipsis:{tooltip:n.Image},children:n.Image},n.Id)})}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",ellipsis:!0,width:100,render:function(l,n,_,c){return[(0,t.jsx)(d.ZP,{type:"link",onClick:function(){(0,O.jV)({md5:n.Id}).then(function(u){return f.onSelect&&f.onSelect(u.data.info),!0})},children:(0,t.jsx)(D.Z,{})},n.Id)]}}],rowKey:"Id",request:function(){var o=U()(h()().mark(function l(n,_,c){return h()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",new Promise(function(s,E){(0,O.IE)({tag:n.names}).then(function(P){var j={data:P.data.list,success:!0,total:P.data.list.length};s(j)})}));case 1:case"end":return u.stop()}},l)}));return function(l,n,_){return o.apply(this,arguments)}}(),pagination:{pageSize:5}})}},89063:function(y,C,e){e.d(C,{Z:function(){return I}});var B=e(24963),h=e(88484),p=e(31418),U=e(72723),O=e(14726),A=e(67294),D=e(85893);function I(r){var x=(0,A.useContext)(B.Z),m=x.message,d=x.notice,W=x.lang,t=(0,A.useRef)(null),g=p.Z.useApp(),f=function(){t.current&&(t.current.click(),t.current.onchange=function(l){if(!l||!l.target)return"";var n=new FileReader;n.onload=function(c){var a,u,s=(a=c.target)===null||a===void 0?void 0:a.result;if(r.onLoad)try{r.onLoad&&r.onLoad(s)}catch(E){d.error(E);return}typeof r.onImport=="function"&&r.onImport(s),(u=t.current)!==null&&u!==void 0&&u.value&&(t.current.value="")};var _=l.target;if(_.files)try{n.readAsText(_.files[0])}catch(c){d.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(U.Z.Item,{name:"importFile",label:r.label,children:(0,D.jsx)(O.ZP,{icon:(0,D.jsx)(h.Z,{}),block:!0,onClick:f,children:r.title})}),(0,D.jsx)("input",{style:{display:"none"},type:"file",ref:t,name:"importFileInput"})]})}},35880:function(y,C,e){var B=e(67294),h=(0,B.createContext)({});C.Z=h}}]);
