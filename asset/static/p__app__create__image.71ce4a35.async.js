"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3985],{85060:function(de,T,e){e.d(T,{Z:function(){return s}});var A=e(87462),l=e(67294),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},_=w,f=e(84089),v=function(R,r){return l.createElement(f.Z,(0,A.Z)({},R,{ref:r,icon:_}))},j=l.forwardRef(v),s=j},2741:function(de,T,e){e.d(T,{Z:function(){return s}});var A=e(87462),l=e(67294),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.7c6 6 9.4 14.1 9.4 22.6V928c0 17.7-14.3 32-32 32H192c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32h424.7c8.5 0 16.7 3.4 22.7 9.4l215.2 215.3zM790.2 326L602 137.8V326h188.2z"}}]},name:"file",theme:"filled"},_=w,f=e(84089),v=function(R,r){return l.createElement(f.Z,(0,A.Z)({},R,{ref:r,icon:_}))},j=l.forwardRef(v),s=j},93613:function(de,T,e){e.d(T,{Z:function(){return s}});var A=e(87462),l=e(67294),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32z"}}]},name:"folder",theme:"filled"},_=w,f=e(84089),v=function(R,r){return l.createElement(f.Z,(0,A.Z)({},R,{ref:r,icon:_}))},j=l.forwardRef(v),s=j},27254:function(de,T,e){e.d(T,{Z:function(){return s}});var A=e(87462),l=e(67294),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zm-180 0H238c-13 0-24.8 7.9-29.7 20L136 643.2V256h188.5l119.6 114.4H748V444z"}}]},name:"folder-open",theme:"filled"},_=w,f=e(84089),v=function(R,r){return l.createElement(f.Z,(0,A.Z)({},R,{ref:r,icon:_}))},j=l.forwardRef(v),s=j},63434:function(de,T,e){var A=e(1413),l=e(45987),w=e(22270),_=e(84567),f=e(67294),v=e(90789),j=e(35510),s=e(85893),p=["options","fieldProps","proFieldProps","valueEnum"],R=f.forwardRef(function(D,H){var o=D.options,t=D.fieldProps,W=D.proFieldProps,I=D.valueEnum,i=(0,l.Z)(D,p);return(0,s.jsx)(j.Z,(0,A.Z)({ref:H,valueType:"checkbox",valueEnum:(0,w.h)(I,void 0),fieldProps:(0,A.Z)({options:o},t),lightProps:(0,A.Z)({labelFormatter:function(){return(0,s.jsx)(j.Z,(0,A.Z)({ref:H,valueType:"checkbox",mode:"read",valueEnum:(0,w.h)(I,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,A.Z)({options:o},t),proFieldProps:W},i))}},i.lightProps),proFieldProps:W},i))}),r=f.forwardRef(function(D,H){var o=D.fieldProps,t=D.children;return(0,s.jsx)(_.Z,(0,A.Z)((0,A.Z)({ref:H},o),{},{children:t}))}),M=(0,v.G)(r,{valuePropName:"checked"}),b=M;b.Group=R,T.Z=b},91058:function(de,T,e){var A=e(19632),l=e.n(A),w=e(97857),_=e.n(w),f=e(5574),v=e.n(f),j=e(89035),s=e(64317),p=e(5966),R=e(38345),r=e(17186),M=e(24739),b=e(42075),D=e(28036),H=e(85576),o=e(67294),t=e(95089),W=e(12491),I=e(62597),i=e(79245),d=e(85893),y="docker-image",Z=(0,o.forwardRef)(function(U,ce){var le=(0,o.useState)(y),S=v()(le,2),me=S[0],ve=S[1],z=(0,o.useRef)(),Me=(0,o.useState)(""),fe=v()(Me,2),Ze=fe[0],Te=fe[1],Ee=function(){me!="code"?ve("code"):ve(y)};(0,o.useImperativeHandle)(ce,function(){return{addEnvItem:function(k,re){var Y,ae=(Y=z.current)===null||Y===void 0?void 0:Y.getList(),Ce=!1;if(ae==null||ae.map(function(je){if(je.name==k){Ce=!0;return}}),!Ce){var se;(se=z.current)===null||se===void 0||se.add({name:k,value:re})}},clear:function(){var k;(k=z.current)===null||k===void 0||(k=k.getList())===null||k===void 0||k.map(function(re,Y){var ae;(ae=z.current)===null||ae===void 0||ae.remove(Y)})}}});function J(K){try{var k,re;K==""&&(K=n());for(var Y=(k=(re=z.current)===null||re===void 0||(re=re.getList())===null||re===void 0?void 0:re.length)!==null&&k!==void 0?k:0,ae=Y;ae>=0;ae--){var Ce;(Ce=z.current)===null||Ce===void 0||Ce.remove(ae)}var se=K.split(`
`),je=0;se.map(function(Ie){var Ae,Ue=Ie.split("=");Ue.length<2||((Ae=z.current)===null||Ae===void 0||Ae.add({name:Ue[0],value:Ue.slice(1).join("=")},je),je++)})}catch(Ie){console.log(Ie)}}function n(){if(z&&z.current&&z.current.getList){var K,k=(K=z.current)===null||K===void 0?void 0:K.getList();if(k){var re=[];return k.map(function(Y){re.push("".concat(Y.name,"=").concat(Y.value))}),re.join(`
`)}else return""}else return""}function De(K){var k,re,Y,ae,Ce={},se={help:K&&K.label?K.label:"",name:"value",label:"\u53D8\u91CF\u503C",rules:[{required:U.requireValue?!0:(0,i.y)((k=K.rule)===null||k===void 0?void 0:k.kind,I.fp.EnvValueRuleRequired)}],disabled:U.showDisableValue||(0,i.y)((re=K.rule)===null||re===void 0?void 0:re.kind,I.fp.EnvValueRuleDisabled)};if((0,i.y)((Y=K.rule)===null||Y===void 0?void 0:Y.kind,I.fp.EnvValueTypeSelect)){var je;return(0,d.jsx)(s.Z,_()(_()({fieldProps:Ce},se),{},{width:U.showInDrawer?"sm":"md",options:((je=K.rule)===null||je===void 0?void 0:je.option)&&K.rule.option.map(function(Ie){return{label:Ie.name,value:Ie.value}}),initialValue:K.value}))}else return(0,i.y)((ae=K.rule)===null||ae===void 0?void 0:ae.kind,I.fp.EnvValueTypeNumber)?(0,d.jsx)(p.Z,_()(_()({fieldProps:Ce},se),{},{width:U.showInDrawer?"sm":"md",rules:[].concat(l()(se.rules),[{pattern:new RegExp("^[0-9]*$")}]),help:se.help+",\u6570\u503C\u7C7B\u578B"})):(0,d.jsx)(p.Z,_()(_()({fieldProps:Ce},se),{},{width:U.showInDrawer?"sm":"md"}))}return(0,d.jsxs)(R.Z,{ghost:U.showCardGhost,title:U.label?U.label:null,headerBordered:!0,extra:(U.showCodeMode||U.showImportButton)&&(0,d.jsxs)(b.Z,{children:[U.showImportButton&&(0,d.jsx)("div",{style:{marginBottom:"-25px"},children:(0,d.jsx)(W.Z,{title:"\u5BFC\u5165 env \u6587\u4EF6",onImport:function(k){return J(k),!0},onLoad:function(k){if(k.indexOf("=")<0)throw new Error("\u5BFC\u5165env\u6587\u4EF6\u9519\u8BEF");return!0}})}),U.showCodeMode?(0,d.jsx)(D.ZP,{icon:(0,d.jsx)(j.Z,{}),type:me=="code"?"primary":"default",onClick:Ee,children:"\u4EE3\u7801\u6A21\u5F0F"},"code"):""]}),children:[(0,d.jsx)(r.u,{name:U.name?U.name:"environment",actionRef:z,creatorButtonProps:U.showAddButton?{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u73AF\u5883\u53D8\u91CF"}:!1,copyIconProps:!1,deleteIconProps:U.showDeleteButton,min:100,label:U.listLabel,children:function(k,re,Y){var ae=Y.getCurrentRowData();return(0,d.jsxs)(M.UW,{style:{marginBottom:"5px"},children:[(0,d.jsx)(p.Z,{width:U.showInDrawer?"sm":"md",name:"name",label:"\u53D8\u91CF\u540D",required:!0,rules:[{required:!0}],disabled:U.showDisableName,placeholder:"\u8F93\u5165\u53D8\u91CF\u540D\u79F0"}),De(ae)]})}}),U.showCodeMode&&(0,d.jsx)(H.Z,{width:"800px",open:me=="code",onCancel:function(){return ve("docker-image")},onOk:function(){J(Ze),ve("docker-image")},children:(0,d.jsx)(t.ZP,{onChange:function(k){return Te(k)},value:n(),height:"680px",theme:"light"})})]})});T.Z=Z},28307:function(de,T,e){var A=e(15009),l=e.n(A),w=e(99289),_=e.n(w),f=e(5574),v=e.n(f),j=e(38345),s=e(97269),p=e(62370),R=e(5966),r=e(64317),M=e(28036),b=e(85265),D=e(42075),H=e(67294),o=e(3393),t=e(97961),W=e(92754),I=e(82346),i=e(96042),d=e(85893),y=(0,H.forwardRef)(function(Z,U){var ce=(0,H.useState)(!1),le=v()(ce,2),S=le[0],me=le[1],ve=(0,H.useRef)(),z=(0,H.useRef)(),Me=(0,H.useState)(!1),fe=v()(Me,2),Ze=fe[0],Te=fe[1];return(0,H.useImperativeHandle)(U,function(){return{upgradeImage:function(J){var n;return me(!0),(n=ve.current)===null||n===void 0||n.setFieldValue("imageUrl",J),(0,o.Gb)({tag:J,type:"pull"})},setImageName:function(J){var n;me(!0),(n=ve.current)===null||n===void 0||n.setFieldValue("imageUrl",J)}}}),[(0,d.jsx)(M.ZP,{type:Z.buttonType?Z.buttonType:"default",onClick:function(){var J,n;Z.onClick&&Z.onClick(),me(!0),(J=ve.current)===null||J===void 0||J.resetFields(),(n=z.current)===null||n===void 0||n.setStart("")},children:"\u62C9\u53D6\u955C\u50CF"},"remoteBtn"),(0,d.jsxs)(b.Z,{forceRender:!0,open:S,title:"\u62C9\u53D6\u8FDC\u7A0B\u955C\u50CF",width:800,onClose:function(){var J;me(!1),(J=z.current)===null||J===void 0||J.close()},footer:!1,children:[(0,d.jsx)(j.Z,{children:(0,d.jsxs)(D.Z,{direction:"vertical",size:"middle",children:[(0,d.jsxs)("div",{children:["1\u3001\u955C\u50CF\u540D\u79F0\u4E2D\u4E0D\u5305\u542B\u4ED3\u5E93\u5730\u5740\u65F6\uFF0C \u9ED8\u8BA4\u4ECE ",(0,d.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:"docker hub"})," \u4E2D\u4E0B\u8F7D\uFF0C \u4F60\u53EF\u4EE5",(0,d.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:"\u3010\u67E5\u627E\u3011"})," \u9700\u8981\u7684\u955C\u50CF"]}),(0,d.jsx)("div",{children:"2\u3001\u62C9\u53D6\u975E docker hub \u955C\u50CF\u65F6\uFF0C\u8BF7\u586B\u5199\u5B8C\u6574\u7684\u955C\u50CF\u5730\u5740\u3002"}),(0,d.jsxs)("div",{children:["3\u3001\u76EE\u6807\u4ED3\u5E93\u6709\u6743\u9650\u9A8C\u8BC1\u65F6\uFF0C\u8BF7",(0,d.jsx)(I.Link,{to:"/image/registry",children:"\u3010\u6DFB\u52A0\u3011"}),"\u8BE5\u4ED3\u5E93\uFF0C\u5E76\u914D\u7F6E\u7528\u6237\u540D\u548C\u5BC6\u7801\u6743\u9650"]}),(0,d.jsxs)("div",{children:["4\u3001\u65E0\u6CD5\u6B63\u5E38\u62C9\u53D6\u955C\u50CF\u65F6\u8BF7\u5728 ",(0,d.jsx)(I.Link,{to:"/image/registry",children:"\u3010\u4ED3\u5E93\u7BA1\u7406\u3011"}),"\u4E2D\u914D\u7F6E\u955C\u50CF\u7684\u52A0\u901F\u5730\u5740"]})]})}),(0,d.jsx)(j.Z,{title:"\u62C9\u53D6\u955C\u50CF",headerBordered:!0,children:(0,d.jsxs)(s.A,{formRef:ve,submitter:!1,isKeyPressSubmit:!0,onFinish:function(){var Ee=_()(l()().mark(function J(n){var De,K,k,re,Y,ae;return l()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return Y=(De=n.imageUrl)!==null&&De!==void 0?De:"",n.registry&&(Y=n.registry.serverAddress+"/"+Y),Te(!0),(K=z.current)===null||K===void 0||K.setStart(Y),se.next=6,(0,o.Gb)({tag:Y,type:"pull",platform:(k=n.platform)!==null&&k!==void 0?k:""}).finally(function(){Te(!1)});case 6:return ae=se.sent,(re=z.current)===null||re===void 0||re.setFinish(),me(!1),Z.onFinish&&Z.onFinish(ae.data.tag),se.abrupt("return",!0);case 11:case"end":return se.stop()}},J)}));return function(J){return Ee.apply(this,arguments)}}(),children:[(0,d.jsxs)(D.Z.Compact,{children:[(0,d.jsx)(p.Z,{name:"registry",children:(0,d.jsx)(i.Z,{width:"150px"})}),(0,d.jsx)(R.Z,{disabled:Ze,width:270,name:"imageUrl",placeholder:"\u8BF7\u8F93\u5165\u955C\u50CF\u5730\u5740",required:!0,rules:[{required:!0}]}),(0,d.jsx)(r.Z,{name:"platform",style:{width:100},placeholder:"\u9ED8\u8BA4\u5F53\u524D\u67B6\u6784",options:t.ii.map(function(Ee){return{label:Ee.name,value:Ee.name}})}),(0,d.jsx)(M.ZP,{loading:Ze,onClick:_()(l()().mark(function Ee(){var J;return l()().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:(J=ve.current)===null||J===void 0||J.submit();case 1:case"end":return De.stop()}},Ee)})),children:"\u62C9\u53D6\u955C\u50CF"}),(0,d.jsx)(M.ZP,{danger:!0,onClick:function(){var J;(J=z.current)===null||J===void 0||J.close()},children:"\u4E2D\u6B62\u6267\u884C"})]}),(0,d.jsx)(p.Z,{label:"\u62C9\u53D6\u8FDB\u5EA6",children:(0,d.jsx)(W.Z,{ref:z})})]})})]},"remoteDrawer")]});T.Z=y},92067:function(de,T,e){e.d(T,{Z:function(){return b}});var A=e(15009),l=e.n(A),w=e(99289),_=e.n(w),f=e(60335),v=e(64789),j=e(41482),s=e(42075),p=e(28036),R=e(37413),r=e(5251),M=e(85893);function b(D){return(0,M.jsx)(j.Z,{columns:[{title:"\u5BB9\u5668\u540D\u79F0",dataIndex:"name",render:function(o,t,W,I){return(0,M.jsx)(s.Z,{direction:"vertical",style:{textAlign:"left"},children:t==null?void 0:t.Names.map(function(i){return(0,r.fi)(i,"/")})},t.Id)}},{title:"\u7AEF\u53E3",dataIndex:"ports",search:!1,render:function(o,t,W,I){var i=[],d=[];return t!=null&&t.Ports&&t.Ports.map(function(y,Z){y.PublicPort?i.push(y):d.push(y)}),(0,M.jsx)(R.Z,{publicPort:i,privatePort:d,domain:[]})}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",ellipsis:!0,width:100,render:function(o,t,W,I){return[(0,M.jsx)(p.ZP,{type:"link",onClick:_()(l()().mark(function i(){var d;return l()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,f.jV)({md5:t.Id});case 2:d=Z.sent,D.onSelect&&D.onSelect(d.data.info);case 4:case"end":return Z.stop()}},i)})),children:(0,M.jsx)(v.Z,{})},t.Id)]}}],rowKey:"Id",request:function(){var H=_()(l()().mark(function o(t,W,I){var i;return l()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,f.IE)({siteTitle:t.name});case 2:return i=y.sent,y.abrupt("return",{data:i.data.list,success:!0,total:i.data.list.length});case 4:case"end":return y.stop()}},o)}));return function(o,t,W){return H.apply(this,arguments)}}(),pagination:{pageSize:9}})}},52255:function(de,T,e){e.d(T,{Z:function(){return w}});var A=e(67294),l=e(85893);function w(_){return(0,l.jsx)("div",{style:{display:_.show?"block":"none"},children:_.children})}},81366:function(de,T,e){var A=e(19632),l=e.n(A),w=e(5574),_=e.n(w),f=e(27254),v=e(42075),j=e(28036),s=e(25593),p=e(67294),R=e(31112),r=e(85893),M=(0,p.forwardRef)(function(b,D){var H=(0,p.useContext)(R.Z),o=H.showPath,t=(0,p.useState)([{title:"\u6839\u76EE\u5F55",path:"/"}]),W=_()(t,2),I=W[0],i=W[1];(0,p.useImperativeHandle)(D,function(){return{addHistory:function(Z,U){i([].concat(l()(I),[{title:Z,path:U}]))},initHistory:function(Z){i([{title:"\u6839\u76EE\u5F55",path:"/"}].concat(l()(Z)))}}});var d=function(Z){o?o(I[Z].title,I[Z].path):b.showPath&&b.showPath(I[Z].title,I[Z].path);var U=I.filter(function(ce,le){return le<=Z});i(l()(U))};return(0,r.jsxs)(v.Z,{children:[(0,r.jsx)(v.Z.Compact,{children:I.map(function(y,Z){return(0,r.jsx)(j.ZP,{icon:(0,r.jsx)(f.Z,{}),type:"dashed",onClick:function(){d(Z)},children:y.title},Z)})}),I.length>=2&&(0,r.jsx)(s.Z.Text,{copyable:{text:I[I.length-1].path}})]})});T.Z=M},31112:function(de,T,e){var A=e(67294),l=(0,A.createContext)({});T.Z=l},68536:function(de,T,e){e.d(T,{Z:function(){return R}});var A=e(24963),l=e(93613),w=e(36693),_=e(2741),f=e(25593),v=e(42075),j=e(67294),s=e(85893),p=0;function R(r){var M=(0,j.useContext)(A.Z),b=M.message;return r.isDir?(0,s.jsx)(f.Z.Link,{onClick:function(){r.onClick&&r.onClick()},children:(0,s.jsxs)(v.Z,{children:[(0,s.jsx)(l.Z,{}),r.showName]})}):r.isLink?(0,s.jsx)(f.Z.Link,{onClick:function(){r.onClick&&r.onClick()},children:(0,s.jsxs)(v.Z,{children:[(0,s.jsx)(w.Z,{}),r.showName]})}):(0,s.jsx)(f.Z.Text,{onClick:function(){if(p++,p==2){p=0,r.onClick&&r.onClick();return}setTimeout(function(){p==1&&b.info("\u53CC\u51FB\u67E5\u770B\u6587\u4EF6\u5185\u5BB9"),p=0},400)},style:{cursor:"pointer"},children:(0,s.jsxs)(v.Z,{children:[(0,s.jsx)(_.Z,{}),r.showName]})})}},12491:function(de,T,e){e.d(T,{Z:function(){return s}});var A=e(24963),l=e(88484),w=e(62370),_=e(31418),f=e(28036),v=e(67294),j=e(85893);function s(p){var R=(0,v.useContext)(A.Z),r=R.message,M=R.notice,b=R.lang,D=(0,v.useRef)(null),H=_.Z.useApp(),o=function(){D.current&&(D.current.click(),D.current.onchange=function(W){if(!W||!W.target)return"";var I=new FileReader;I.onload=function(d){var y,Z,U=(y=d.target)===null||y===void 0?void 0:y.result;if(p.onLoad)try{p.onLoad&&p.onLoad(U)}catch(ce){M.error(ce);return}typeof p.onImport=="function"&&(r.success("\u6210\u529F\u5BFC\u5165 ".concat(p.title)),p.onImport(U)),(Z=D.current)!==null&&Z!==void 0&&Z.value&&(D.current.value="")};var i=W.target;if(i.files)try{I.readAsText(i.files[0])}catch(d){M.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(w.Z,{children:(0,j.jsx)(f.ZP,{icon:(0,j.jsx)(l.Z,{}),block:!0,onClick:o,children:p.title})}),(0,j.jsx)("input",{style:{display:"none"},type:"file",ref:D,name:"importFileInput"})]})}},46442:function(de,T,e){var A=e(15009),l=e.n(A),w=e(99289),_=e.n(w),f=e(5574),v=e.n(f),j=e(67294),s=e(14946),p=e(64789),R=e(41482),r=e(28036),M=e(85265),b=e(42075),D=e(66309),H=e(28230),o=e(85893),t=(0,j.forwardRef)(function(W,I){(0,j.useImperativeHandle)(I,function(){return{show:function(){Z(!0)}}});var i=(0,j.useState)(!1),d=v()(i,2),y=d[0],Z=d[1],U=(0,j.useRef)();return(0,o.jsxs)(o.Fragment,{children:[W.showTriggerButton&&(0,o.jsx)(r.ZP,{onClick:function(){Z(!0)},children:"\u52A0\u5165\u7F51\u7EDC"}),(0,o.jsx)(M.Z,{title:"\u9009\u62E9\u7F51\u7EDC",width:800,footer:!1,open:y,onClose:function(){return Z(!1)},extra:(0,o.jsx)(b.Z,{children:(0,o.jsx)(H.Z,{onFinish:function(){var le,S;!((le=U.current)===null||le===void 0)&&le.reloadAndRest&&((S=U.current)===null||S===void 0||S.reloadAndRest())}},"create")}),children:(0,o.jsx)(R.Z,{rowKey:"Name",toolBarRender:!1,actionRef:U,columns:[{title:"\u540D\u79F0",dataIndex:"Name",render:function(le,S,me,ve,z){return S.Name=="none"||S.Name=="bridge"||S.Name=="host"?(0,o.jsxs)(o.Fragment,{children:[S.Name," ",(0,o.jsx)(D.Z,{color:"blue",children:"System"})]}):(0,o.jsx)(o.Fragment,{children:le})}},{title:"\u7C7B\u578B",ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"Driver",ellipsis:!0,width:100,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4",search:!1,width:120,render:function(le,S,me,ve,z){return S.IPAM.Config&&S.IPAM.Config[0]&&(0,o.jsxs)(b.Z,{direction:"vertical",children:[S.IPAM.Config[0].Subnet,S.IPAM.Config[0].Gateway]})}},{title:"IPV6",search:!1,render:function(le,S,me,ve,z){return S.IPAM.Config&&S.IPAM.Config[1]&&(0,o.jsxs)(b.Z,{direction:"vertical",children:[S.IPAM.Config[1].Subnet,S.IPAM.Config[1].Gateway]})}},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(le,S,me,ve,z){return[S.Name!="none"&&S.Name!="bridge"&&S.Name!="host"&&(0,o.jsx)(r.ZP,{type:"link",onClick:function(){W.onSelect(S),Z(!1)},children:(0,o.jsx)(p.Z,{})},S.Id)]}}],request:function(){var ce=_()(l()().mark(function le(S,me,ve){var z;return l()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.next=2,(0,s.jR)({name:S.Name});case 2:return z=fe.sent,fe.abrupt("return",{data:z.data.list,success:!0,total:z.data.list.length});case 4:case"end":return fe.stop()}},le)}));return function(le,S,me){return ce.apply(this,arguments)}}(),pagination:{pageSize:10}})})]})});T.Z=t},35880:function(de,T,e){var A=e(67294),l=(0,A.createContext)({});T.Z=l},57841:function(de,T,e){e.r(T),e.d(T,{default:function(){return Fn}});var A=e(15009),l=e.n(A),w=e(99289),_=e.n(w),f=e(5574),v=e.n(f),j=e(90078),s=e(38345),p=e(97269),R=e(2236),r=e(5966),M=e(24739),b=e(97462),D=e(30291),H=e(92398),o=e(38925),t=e(67294),W=e(35880),I=e(41482),i=e(62370),d=e(85265),y=e(42075),Z=e(96074),U=e(28036),ce=e(83062),le=e(3393),S=e(18148),me=e(5251),ve=e(64789),z=e(85060),Me=e(28307),fe=e(78451),Ze=e(99861),Te=e(80821),Ee=e(1699),J=e(80271),n=e(85893);function De(C){var ne=(0,t.useState)(!1),V=v()(ne,2),Q=V[0],P=V[1],L=(0,t.useRef)(),E=(0,t.useContext)(W.Z),g=E.createFormRef,N=E.volumeListRef,X=E.createEnvRef,h=E.domainRef,c=(0,t.useRef)(),O=function(){var F=_()(l()().mark(function x(m){var B,G,te,q,Pe,ie,$,a,ee,u,pe,Fe;return l()().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.next=2,(0,le.YU)({md5:m});case 2:return q=_e.sent,C.redeploy||(a=(Pe=g.current)===null||Pe===void 0?void 0:Pe.getFieldsValue(),(ie=g.current)===null||ie===void 0||ie.resetFields(),($=g.current)===null||$===void 0||$.setFieldsValue({siteName:a.siteName,siteTitle:a.siteTitle,useBridgeNetwork:a.useBridgeNetwork})),q.data.info.Config.Env&&q.data.info.Config.Env.map(function(Oe){var he,xe=Oe.split("=");(he=X.current)===null||he===void 0||he.addEnvItem(xe[0],xe.slice(1).join("="))}),(B=g.current)===null||B===void 0||B.setFieldValue("imageName",m),(G=g.current)===null||G===void 0||G.setFieldValue("workDir",q.data.info.Config.WorkingDir),(te=h.current)===null||te===void 0||te.setExposePort(q.data.info.Config.ExposedPorts),C.redeploy||(q.data.info.Config.Volumes?(pe=[],Object.keys(q.data.info.Config.Volumes).map(function(Oe,he){pe.push(Oe)}),(u=N.current)===null||u===void 0||u.setDefaultDestPath(pe)):(Fe=N.current)===null||Fe===void 0||Fe.setDefaultDestPath([]),(ee=g.current)===null||ee===void 0||ee.setFieldsValue({workDir:{value:"",useDefault:!0,default:q.data.info.Config.WorkingDir},user:{value:"",useDefault:!0,default:q.data.info.Config.User},command:{value:"",useDefault:!0,default:q.data.info.Config.Cmd&&q.data.info.Config.Cmd.join(" ")},entrypoint:{value:"",useDefault:!0,default:q.data.info.Config.Entrypoint&&q.data.info.Config.Entrypoint.join(" ")}})),_e.abrupt("return",!0);case 10:case"end":return _e.stop()}},x)}));return function(m){return F.apply(this,arguments)}}();return(0,t.useEffect)(function(){C.fromImageId&&O(C.fromImageId)},[C.fromImageId]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Z,{open:Q,width:800,title:"\u9009\u62E9\u955C\u50CF",footer:!1,onClose:function(){return P(!1)},children:(0,n.jsx)(I.Z,{scroll:{x:"max-content"},columns:[{title:"Id",dataIndex:"Id",search:!1,width:80,render:function(x,m,B,G,te){return(0,n.jsx)(fe.Z,{content:m.Id.slice(7,19)})}},{title:"\u955C\u50CF\u540D\u79F0",dataIndex:"tag",width:200,render:function(x,m,B,G){return(0,n.jsx)(fe.Z,{content:m.RepoTags[0]})}},{title:"\u521B\u5EFA\u65E5\u671F",dataIndex:"Created",search:!1,width:100,render:function(x,m,B,G){return(0,n.jsx)("div",{children:(0,me.ZM)(m.Created*1e3)},m.Id)},sorter:function(x,m){return x.Created-m.Created}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:50,render:function(x,m,B,G){return(0,n.jsx)(y.Z,{split:(0,n.jsx)(Z.Z,{type:"vertical"}),children:(0,n.jsx)(Te.Z,{icon:(0,n.jsx)(ve.Z,{}),tips:"\u4F7F\u7528\u955C\u50CF",action:function(){return O(m.RepoTags[0])},type:"link",onSuccess:function(){P(!1)}},"addImage")})}}],request:function(){var F=_()(l()().mark(function x(m,B,G){var te,q,Pe,ie,$;return l()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return C.redeploy&&(q=(te=g.current)===null||te===void 0?void 0:te.getFieldValue("imageName"),m.tag=q?q.split(":")[0]:m.tag),ee.next=3,(0,S.KG)({tag:m.tag});case 3:return Pe=ee.sent,ie=0,$=[],Pe.data.list&&($=Pe.data.list.flatMap(function(u){return u.RepoTags.map(function(pe){return{Key:ie++,Id:u.Id,Created:u.Created,RepoTags:[pe]}})})),ee.abrupt("return",{data:$,success:!0,total:$.length});case 8:case"end":return ee.stop()}},x)}));return function(x,m,B){return F.apply(this,arguments)}}(),formRef:L,rowKey:"Key",pagination:{pageSize:8}})},"imageTableList"),(0,n.jsxs)(y.Z.Compact,{children:[(0,n.jsx)(r.Z,{width:"lg",label:"\u955C\u50CF",tooltip:C.redeploy?"\u66F4\u65B0\u5BB9\u5668\u65F6,\u53EA\u53EF\u4EE5\u9009\u62E9\u8BE5\u955C\u50CF\u4E0B\u7684\u4E0D\u540Ctag.\u4E5F\u53EF\u4EE5\u5F3A\u5236\u66F4\u65B0\u5DF2\u90E8\u7F72tag,\u66F4\u6B21\u90E8\u7F72":"\u65B0\u5EFA\u5BB9\u5668\u65F6,\u53EF\u4EE5\u4F7F\u7528\u672C\u5730\u955C\u50CF,\u4E5F\u53EF\u4EE5\u4E0B\u8F7D\u5168\u65B0\u7684\u955C\u50CF\u6216\u662F\u66F4\u65B0\u672C\u5730\u955C\u50CF\u7684tag",name:"imageName",disabled:!0,placeholder:"\u8BF7\u9009\u62E9\u955C\u50CF\uFF0C\u5982\u679C\u662F\u8FDC\u7A0B\u955C\u50CF\u8BF7\u5148\u4E0B\u8F7D",rules:[{required:!0}],required:!0}),(0,n.jsx)(i.Z,{label:" ",children:(0,n.jsx)(U.ZP,{type:"primary",onClick:function(){return P(!0)},children:"\u9009\u62E9\u955C\u50CF"},"showBtn")}),(0,n.jsx)(b.Z,{name:["imageName"],children:function(x){var m=x.imageName;if(m)return(0,n.jsx)(i.Z,{label:" ",children:(0,n.jsx)(Ze.Z,{finishAutoHide:!0,image:m?[m]:[],trigger:(0,n.jsx)(ce.Z,{title:"\u91CD\u65B0\u62C9\u53D6\u5F53\u524D\u955C\u50CF",children:(0,n.jsx)(U.ZP,{icon:(0,n.jsx)(z.Z,{}),children:"\u66F4\u65B0\u5F53\u524D\u955C\u50CF"})})})})}}),(0,n.jsx)(i.Z,{label:" ",children:(0,n.jsx)(Me.Z,{onClick:function(){P(!1)},ref:c,onFinish:function(x){O(x)}},"remote")}),(0,n.jsx)(i.Z,{label:" ",children:(0,n.jsx)(b.Z,{name:["imageName"],children:function(x){var m=x.imageName;if(m)return(0,n.jsx)(Ee.u,{access:"canSeeEnableCe",showProTips:!0,children:function(G){var te=G.canSeeEnableCe;return(0,n.jsx)(J.Z,{imageId:m,trigger:(0,n.jsx)(U.ZP,{disabled:te,children:"\u955C\u50CF\u6587\u4EF6"})})}})}})})]})]})}var K=e(60335),k=e(51042),re=e(63434),Y=e(17186),ae=e(25593),Ce=e(92067),se=(0,t.forwardRef)(function(C,ne){var V=(0,t.useState)(!1),Q=v()(V,2),P=Q[0],L=Q[1],E=(0,t.useRef)(),g=function(h){var c=(0,t.useState)([]),O=v()(c,2),F=O[0],x=O[1];return(0,t.useEffect)(function(){(0,K.jV)({md5:h.name}).then(function(m){var B;return x((B=m.data.info.Config.Env)!==null&&B!==void 0?B:[]),!0})},[]),(0,n.jsxs)(s.Z,{bordered:!0,extra:h.action,style:{marginBottom:10},children:[(0,n.jsx)(s.Z,{title:"\u5173\u8054\u4FE1\u606F",children:(0,n.jsxs)(M.UW,{children:[(0,n.jsx)(r.Z,{label:"\u5BB9\u5668\u540D\u79F0",name:"name",width:"md",readonly:!0}),(0,n.jsx)(r.Z,{label:"\u8BBF\u95EEHostName",name:"alise",width:"md",readonly:!0,tooltip:"\u901A\u8FC7\u914D\u7F6E\u6B64\u540D\u79F0\uFF0C\u5728\u5BB9\u5668\u5185\u90E8\u8FDB\u884C\u8BF7\u6C42\u8BBF\u95EE",hidden:!0}),(0,n.jsx)(i.Z,{label:"\u8BBF\u95EEHostName",tooltip:"\u901A\u8FC7\u914D\u7F6E\u6B64\u540D\u79F0\uFF0C\u5728\u5BB9\u5668\u5185\u90E8\u8FDB\u884C\u8BF7\u6C42\u8BBF\u95EE",children:(0,n.jsx)(ae.Z.Text,{copyable:!0,children:h.record.alise})}),(0,n.jsx)(re.Z,{label:"\u5173\u8054\u5B58\u50A8",name:"volume"})]})}),(0,n.jsx)(s.Z,{title:"\u73AF\u5883\u53D8\u91CF",children:(0,n.jsx)(y.Z,{direction:"vertical",children:F&&F.map(function(m,B){return(0,n.jsx)(ae.Z.Text,{copyable:{icon:(0,n.jsx)(k.Z,{}),onCopy:function(){var te=m.split("=");C.onAddEnv(te[0],te[1])},tooltips:["add env","success"]},code:!0,ellipsis:{tooltip:m},style:{width:300},children:m},B)})},"linkEnv")})]})},N=function(h){var c,O,F=!1,x=(c=(O=E.current)===null||O===void 0?void 0:O.getList())!==null&&c!==void 0?c:[];if(x.map(function(B){B.name==h.name&&(F=!0)}),!F){var m;(m=E.current)===null||m===void 0||m.add(h)}};return(0,t.useImperativeHandle)(ne,function(){return{setDefaultLink:function(h){h&&h.map(function(c){c.name!=""&&N(c)})}}}),(0,n.jsxs)(s.Z,{title:"\u5173\u8054\u5BB9\u5668",headerBordered:!0,children:[(0,n.jsx)(Y.u,{name:"links",actionRef:E,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5173\u8054"},actionGuard:{beforeAddRow:function(h,c){return L(!0),!1}},copyIconProps:!1,min:0,itemRender:function(h,c){return(0,n.jsx)(g,{action:h.action,name:c.record.name,record:c.record})}}),(0,n.jsx)(d.Z,{title:"\u9009\u62E9\u5BB9\u5668",width:800,footer:!1,open:P,onClose:function(){return L(!1)},children:(0,n.jsx)(Ce.Z,{onSelect:function(h){N({name:(0,me.fi)(h.Name,"/"),alise:"".concat(h.Config.Hostname,".").concat(h.Config.Domainname),volume:!1}),L(!1)}})})]})}),je=se,Ie=e(91058),Ae=e(64317),Ue=(0,t.forwardRef)(function(C,ne){var V=(0,t.useRef)(),Q=(0,t.useContext)(W.Z),P=Q.createFormRef,L=(0,t.useState)(),E=v()(L,2),g=E[0],N=E[1];(0,t.useImperativeHandle)(ne,function(){return{setDefaultDestPath:function(c){var O,F,x=(O=(F=V.current)===null||F===void 0?void 0:F.getList())!==null&&O!==void 0?O:[];c.length!=0&&c.filter(function(m){return m!=""}).map(function(m){var B=!1;if(x.map(function(te){if(te.dest==m){B=!0;return}}),!B){var G;(G=V.current)===null||G===void 0||G.add({dest:m,permission:"write",inImage:!0})}})},addUserVolumeItem:function(c,O){var F,x=(F=V.current)===null||F===void 0?void 0:F.getList(),m=!1;if(x==null||x.map(function(G){if(G.dest==O){m=!0;return}}),!m){var B;(B=V.current)===null||B===void 0||B.add({host:c,dest:O})}}}});var X=function(){var h=_()(l()().mark(function c(O){var F,x;return l()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(!g){B.next=2;break}return B.abrupt("return");case 2:if(O){B.next=4;break}return B.abrupt("return");case 4:return B.next=6,(0,le.cD)({md5:O});case 6:F=B.sent,x={title:"/",value:"/",children:[]},F.data.list.map(function(G){var te=x;G.split("/").map(function(q,Pe,ie){var $;if(q){var a=($=te.children)===null||$===void 0?void 0:$.find(function(ee){return ee.title===q});a||(a={title:q,value:ie.join("/"),children:[]},te.children?te.children.push(a):te.children=[a]),te=a}})}),x.children&&N(x.children);case 10:case"end":return B.stop()}},c)}));return function(O){return h.apply(this,arguments)}}();return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.Z,{title:"\u81EA\u5B9A\u4E49\u6302\u8F7D\u6216\u662F\u5B58\u50A8\u5377",tooltip:"\u6302\u8F7D\u53EF\u4EE5\u662F\u5BBF\u4E3B\u673A\u7684\u76EE\u5F55\u6216\u662F\u6587\u4EF6\uFF0C\u4E5F\u53EF\u4EE5\u6307\u5B9A\u5B58\u50A8\u5377\u540D\uFF08\u81EA\u52A8\u65B0\u5EFA\uFF09\u3002",headerBordered:!0,direction:"column",children:(0,n.jsx)(Y.u,{actionRef:V,name:"volumes",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u6620\u5C04\u76EE\u5F55"},copyIconProps:!1,min:0,children:function(c,O,F){var x=F.getCurrentRowData();return(0,n.jsxs)(M.UW,{children:[(0,n.jsxs)(y.Z.Compact,{children:[(0,n.jsx)(r.Z,{label:"\u5BBF\u4E3B\u673A\u6587\u4EF6\u3001\u76EE\u5F55\u6216\u5B58\u50A8\u5377",name:"host",width:C.showInDrawer?"sm":"md"}),(0,n.jsx)(Ae.Z,{label:" ",valueEnum:{write:"\u8BFB\u5199",readonly:"\u53EA\u8BFB"},initialValue:"write",name:"permission"})]}),(0,n.jsx)(y.Z.Compact,{children:(0,n.jsx)(r.Z,{label:"\u5BB9\u5668\u5185\u8DEF\u5F84",name:"dest",width:C.showInDrawer?"sm":"md",required:!0,rules:[{required:!0}],disabled:C.disabledUserVolumeDest||x.inImage})})]})}})})})}),Ge=Ue,ze=e(2831),ge=e(52688),Ke=e(86125),Ye=e(71230),ke=e(15746),Xe=e(44349);function Je(C){var ne,V=(0,t.useState)(),Q=v()(V,2),P=Q[0],L=Q[1];return(0,t.useEffect)(function(){(0,ze.aF)().then(function(E){return L(E.data.info)})},[]),(0,n.jsxs)(s.Z,{children:[(0,n.jsx)(r.Z,{label:"\u5171\u4EAB\u5185\u5B58\u5927\u5C0F - /dev/shm",name:"shmsize",initialValue:"64M",tooltip:"0 \u4E3A\u4F7F\u7528\u9ED8\u8BA464M\uFF0C\u914D\u7F6E\u65F6\u8BF7\u9644\u52A0\u5355\u4F4D\uFF0C\u4F8B\u5982\uFF1A1G"}),(0,n.jsx)(i.Z,{label:"\u6700\u5927Cpu\u914D\u989D",name:"cpus",tooltip:"0 \u4E3A\u4E0D\u9650\u5236",children:(0,n.jsx)(Ke.Z,{step:.1,max:P==null?void 0:P.NCPU,marks:{0:"0",.5:"0.5\u6838",1:"1\u6838",1.5:"1.5\u6838",2:"2\u6838",4:"4\u6838",6:"6\u6838",8:"8\u6838"}})}),(0,n.jsx)(i.Z,{label:"\u6700\u5927\u5185\u5B58\u914D\u989D",name:"memory",tooltip:"0 \u4E3A\u4E0D\u9650\u5236",children:(0,n.jsx)(Ke.Z,{step:256,max:Math.round(((ne=P==null?void 0:P.MemTotal)!==null&&ne!==void 0?ne:0)/1024/1024),marks:{0:"0",1024:"1G",2048:"2G",3072:"3G",4096:"4G"}})}),(0,n.jsx)(Ae.Z,{label:"\u65E5\u5FD7\u7C7B\u578B",name:["log","driver"],tooltip:"\u9ED8\u8BA4\u4F7F\u7528 json-file \u9A71\u52A8\u7531 docker \u7EDF\u4E00\u7BA1\u7406\u3002\u91C7\u7528 journal \u65F6\u65E5\u5FD7\u5C06\u6765\u5BBF\u4E3B\u673A\u7BA1\u7406",initialValue:"json-file",valueEnum:{"json-file":"json-file",journald:"journal (\u5BBF\u4E3B\u9700\u8981\u5B89\u88C5journal\u670D\u52A1)"}}),(0,n.jsx)(b.Z,{name:["log"],children:function(g){var N=g.log;if(N.driver=="json-file")return(0,n.jsxs)(M.UW,{children:[(0,n.jsx)(r.Z,{label:"\u65E5\u5FD7\u5207\u5272\u5927\u5C0F",name:["log","maxSize"],placeholder:"\u4F8B\u5982\uFF1A10k,5M",tooltip:"\u9ED8\u8BA4 Docker \u5E76\u4E0D\u4F1A\u81EA\u52A8\u5207\u5272\u65E5\u5FD7"}),(0,n.jsx)(r.Z,{tooltip:"\u9ED8\u8BA4 Docker \u5E76\u4E0D\u4F1A\u81EA\u52A8\u6E05\u7406\u65E5\u5FD7\u6587\u4EF6",label:"\u4FDD\u7559\u65E5\u5FD7\u6587\u4EF6\u6570",name:["log","maxFile"],placeholder:"\u4F8B\u5982\uFF1A10"})]})}}),(0,n.jsx)(Xe.Z,{name:"device",label:"\u5173\u8054\u8BBE\u5907",hideCopyButton:!0,showAddButton:!0,items:[{label:"\u5BBF\u4E3B\u673A\u8DEF\u5F84",name:"host",width:"md",placeholder:"\u4F8B\u5982\uFF1A/dev/tty0"},{label:"\u5BB9\u5668\u5185\u8DEF\u5F84",name:"dest",width:"md",placeholder:"\u4F8B\u5982\uFF1A/dev/tty0"}]}),(0,n.jsxs)(Ye.Z,{children:[(0,n.jsx)(ke.Z,{span:4,children:(0,n.jsx)(ge.Z,{label:"\u4F7F\u7528 Gpu",name:["gpus","enable"]})}),(0,n.jsx)(ke.Z,{span:20,children:(0,n.jsx)(b.Z,{name:["gpus"],children:function(g){var N=g.gpus;if(N&&N.enable)return(0,n.jsx)(Ae.Z,{mode:"tags",label:"\u8BBE\u5907\u5217\u8868",name:["gpus","device"],placeholder:"\u914D\u7F6E\u4F7F\u7528\u8BBE\u5907id\u6216\u662Fuuid\uFF0C\u4E0D\u586B\u6240\u4E3A\u6240\u6709\u8BBE\u5907"})}})})]}),(0,n.jsx)(b.Z,{name:["gpus"],children:function(g){var N=g.gpus;if(N&&N.enable)return(0,n.jsx)(Ae.Z,{label:"\u8BA1\u7B97\u80FD\u529B",name:["gpus","capabilities"],mode:"multiple",fieldProps:{allowClear:!0},options:[{label:"compute - \u8BA1\u7B97\u80FD\u529B",value:"compute"},{label:"compat32 - \u517C\u5BB932\u4F4D",value:"compat32"},{label:"graphics - \u56FE\u5F62\u5904\u7406\u80FD\u529B",value:"graphics"},{label:"utility - \u76D1\u63A7\u548C\u7BA1\u7406\u80FD\u529B",value:"utility"},{label:"video - \u89C6\u9891\u5904\u7406\u80FD\u529B",value:"video"},{label:"display - \u663E\u793A\u56FE\u5F62\u754C\u9762\u80FD\u529B",value:"display"}]})}})]})}function Qe(){return(0,n.jsx)(s.Z,{title:"\u5BB9\u5668\u6807\u7B7E",children:(0,n.jsx)(Y.u,{name:"label",label:"",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u6807\u7B7E"},copyIconProps:!1,min:0,children:(0,n.jsxs)(M.UW,{children:[(0,n.jsx)(r.Z,{width:"md",name:"name",label:"\u540D\u79F0",placeholder:""}),(0,n.jsx)(r.Z,{width:"md",name:"value",label:"\u503C",placeholder:""})]})})})}var qe=e(44771),en=e(86615),Dn="default",gn="user";function nn(C){return(0,n.jsx)(i.Z,{label:C.label,tooltip:C.tooltip,children:(0,n.jsxs)(y.Z.Compact,{block:!0,children:[(0,n.jsx)(en.Z.Group,{radioType:"button",name:[C.name,"useDefault"],options:[{label:"\u4F7F\u7528\u9ED8\u8BA4",value:!0},{label:"\u81EA\u5B9A\u4E49",value:!1}]}),(0,n.jsx)(b.Z,{name:[C.name],children:function(V){return V[C.name]&&V[C.name].useDefault?(0,n.jsx)(r.Z,{name:[C.name,"default"],disabled:!0,placeholder:"\u672A\u8BBE\u7F6E"}):(0,n.jsx)(r.Z,{name:[C.name,"value"]})}})]})})}var ye=nn,Le=e(24963);function tn(){var C=(0,t.useContext)(Le.Z),ne=C.message,V=C.lang;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(s.Z,{children:[(0,n.jsx)(qe.Z,{label:"\u91CD\u542F\u7B56\u7565"}),(0,n.jsxs)(M.UW,{children:[(0,n.jsx)(ge.Z,{fieldProps:{onChange:function(P){P&&ne.warning(V("app.create.privilegedNotice"))}},name:"privileged",tooltip:"--privileged",label:"\u8D4B\u4E88\u5BB9\u5668Root\u6743\u9650",initialValue:!1}),(0,n.jsx)(ge.Z,{name:"autoRemove",tooltip:"--rm",label:"\u505C\u6B62\u540E\u81EA\u52A8\u5220\u9664",initialValue:!1}),(0,n.jsx)(ge.Z,{fieldProps:{onChange:function(P){P&&ne.warning(V("app.create.hostPidNotice"))}},tooltip:"--pid host",name:"hostPid",label:"\u5173\u8054\u5BBF\u4E3B\u673APid",initialValue:!1})]}),(0,n.jsx)(ye,{label:"\u5DE5\u4F5C\u76EE\u5F55",tooltip:"\u9ED8\u8BA4\u4F7F\u7528\u955C\u50CF\u4E2D\u6307\u5B9A\u7684\u5DE5\u4F5C\u76EE\u5F55",name:"workDir"}),(0,n.jsx)(ye,{label:"User",tooltip:"\u5728\u5BB9\u5668\u4E2D\u8FD0\u884C\u547D\u4EE4\u7684\u7528\u6237",name:"user"}),(0,n.jsx)(ye,{label:"Command",tooltip:"\u542F\u52A8\u5BB9\u5668\u65F6\u8FD0\u884C\u7684\u547D\u4EE4\uFF0C\u4EE5\u7A7A\u683C\u5206\u9694",name:"command"}),(0,n.jsx)(ye,{label:"Entrypoint",tooltip:"\u65E0\u6CD5\u8986\u76D6\u955C\u50CF\u4E2D\u5DF2\u7ECF\u6307\u5B9A\u7684 Entrypoint \u547D\u4EE4",name:"entrypoint"})]})})}var un=e(91845),Ve=e(62597),He=e(82346),rn=e(61768),an=e(46442),ln=(0,t.forwardRef)(function(C,ne){var V=(0,t.useRef)(),Q=(0,t.useRef)();(0,t.useImperativeHandle)(ne,function(){return{}});var P=function(E){var g,N,X=!1,h=(g=(N=V.current)===null||N===void 0?void 0:N.getList())!==null&&g!==void 0?g:[];if(h.map(function(O){O.name==E.name&&(X=!0)}),!X){var c;(c=V.current)===null||c===void 0||c.add(E)}};return(0,n.jsxs)(s.Z,{title:"\u5173\u8054\u7F51\u7EDC",headerBordered:!0,extra:(0,n.jsx)(y.Z,{children:C.showUseBridgeNetwork&&(0,n.jsx)(ge.Z,{name:"useBridgeNetwork",fieldProps:{checkedChildren:"\u5173\u8054 Bridge \u7F51\u7EDC",unCheckedChildren:"\u5173\u8054 Bridge \u7F51\u7EDC"}},"useBridgeNetwork")}),children:[(0,n.jsx)(Y.u,{name:"network",actionRef:V,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u7F51\u7EDC"},actionGuard:{beforeAddRow:function(E,g){var N;return(N=Q.current)===null||N===void 0||N.show(),!1}},copyIconProps:!1,min:0,itemRender:function(E,g){if(g.record.name!="bridge")return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(M.UW,{children:[(0,n.jsx)(r.Z,{label:"\u7F51\u7EDC\u540D\u79F0",name:"name",width:"md",disabled:!0,fieldProps:{value:g.record.name}}),(0,n.jsx)(rn.Z,{label:"\u522B\u540D",name:"alise",tooltip:"\u540C\u4E00\u7F51\u7EDC\u4E2D\u7684\u5BB9\u5668\u53EF\u4EE5\u4F7F\u7528 hostname, domainname, \u81EA\u5B9A\u4E49\u522B\u540D\u8FDB\u884C\u8BF7\u6C42\u5173\u8054",children:(0,n.jsx)(r.Z,{width:"md",placeholder:"\u6307\u5B9A\u5F53\u524D\u5BB9\u5668\u5728\u8BE5\u7F51\u7EDC\u4E2D\u7684\u522B\u540D"})}),(0,n.jsx)(r.Z,{label:"\u6307\u5B9AIpV4",name:"ipV4",width:"md",disabled:g.record.name=="bridge",fieldProps:{addonAfter:g.record.subnet}}),(0,n.jsx)(r.Z,{label:"\u6307\u5B9AIpV6",name:"ipV6",width:"md",disabled:g.record.name=="bridge",fieldProps:{addonAfter:g.record.subnetV6}}),(0,n.jsx)(i.Z,{label:" ",children:E.action})]})})}}),(0,n.jsx)(an.Z,{ref:Q,onSelect:function(E){P({name:E.Name,alise:[""],subnet:E.IPAM.Config[0].Subnet,subnetV6:E.IPAM.Config[1].Subnet})}})]})}),on=ln,sn=(0,t.forwardRef)(function(C,ne){var V=(0,t.useState)(""),Q=v()(V,2),P=Q[0],L=Q[1],E=(0,t.useRef)(),g=(0,t.useContext)(W.Z),N=g.createFormRef;return(0,t.useImperativeHandle)(ne,function(){return{setExposePort:function(h){if(h){var c,O,F=(c=(O=E.current)===null||O===void 0?void 0:O.getList())!==null&&c!==void 0?c:[];Object.keys(h).map(function(x){var m=!1;if(F.map(function(G){G.dest==x&&(m=!0)}),!m){var B;(B=E.current)===null||B===void 0||B.add({host:"",dest:x})}})}},setHostname:function(h){L(h)},addPortItem:function(h,c){var O,F=(O=E.current)===null||O===void 0?void 0:O.getList(),x=!1;if(F==null||F.map(function(B){if(B.host==h){x=!0;return}}),!x){var m;(m=E.current)===null||m===void 0||m.add({host:String(h),dest:String(c)})}}}}),(0,n.jsx)(s.Z,{title:"\u7ED1\u5B9A\u7AEF\u53E3",tooltip:"\u8BBF\u95EE\u7AEF\u53E3\u7559\u7A7A\u65F6\u968F\u673A\u751F\u6210\u7AEF\u53E3\uFF0C\u5168\u90E8\u5220\u9664\u5219\u8868\u793A\u4E0D\u66B4\u9732\u7AEF\u53E3",headerBordered:!0,extra:(0,n.jsxs)(y.Z,{children:[C.showBindHost&&(0,n.jsx)(ge.Z,{name:"useHostNetwork",fieldProps:{checkedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",unCheckedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",onChange:function(h){if(h){var c;(c=N.current)===null||c===void 0||c.setFieldsValue({bindIpV6:!1,publishAllPorts:!1})}}}}),C.showBindIpV6&&(0,n.jsx)(b.Z,{name:["siteName","useHostNetwork"],children:function(h){var c=h.useHostNetwork;return(0,n.jsx)(ge.Z,{name:"publishAllPorts",fieldProps:{checkedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3",unCheckedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3"},disabled:c},"publishAllPorts")}}),C.showBindIpV6&&(0,n.jsx)(b.Z,{name:["siteName","useHostNetwork"],children:function(h){var c=h.useHostNetwork;return(0,n.jsx)(ge.Z,{name:"bindIpV6",fieldProps:{checkedChildren:"IpV6",unCheckedChildren:"IpV6"},disabled:c},"bindIpV6")}})]}),children:(0,n.jsx)(b.Z,{name:["useHostNetwork","bindIpV6","publishAllPorts"],children:function(h){var c=h.useHostNetwork,O=h.bindIpV6,F=h.publishAllPorts;if(!c&&!F)return(0,n.jsx)(Y.u,{name:"ports",actionRef:E,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BF9\u5916\u90E8\u8BBF\u95EE"},min:0,copyIconProps:!1,children:(0,n.jsxs)(M.UW,{children:[(0,n.jsx)(r.Z,{width:C.showInDrawer?"sm":"md",name:"host",label:"\u5916\u90E8\u8BBF\u95EE\u7AEF\u53E3",tooltip:"\u5BF9\u5916\u8BBF\u95EE\u53EF\u4EE5\u901A\u8FC7\u6DFB\u52A0\u8BBF\u95EE\u7AEF\u53E3\u6216\u662F\u521B\u5EFA\u5B8C\u6210\u540E\u5BF9\u5BB9\u5668\u7ED1\u5B9A\u57DF\u540D",placeholder:"\u7559\u7A7A\u5C06\u4F7F\u7528\u968F\u673A\u7AEF\u53E3\uFF0C\u7ED1\u5B9AIpV6\u5FC5\u586B",required:O,rules:[{required:O}]}),(0,n.jsx)(r.Z,{label:"\u5BB9\u5668\u5185\u7AEF\u53E3",width:C.showInDrawer?"sm":"md",name:"dest",placeholder:"\u6784\u5EFA\u65F6 Expose \u6307\u5B9A\u7684\u7AEF\u53E3",required:!0,rules:[{required:!0}]})]})})}})})}),dn=sn,Re=e(52255);function cn(){var C=(0,t.useRef)(),ne=function(P){var L,E,g=!1,N=(L=(E=C.current)===null||E===void 0?void 0:E.getList())!==null&&L!==void 0?L:[];if(N.map(function(h){h.name==P.name&&(g=!0)}),!g){var X;(X=C.current)===null||X===void 0||X.add(P)}},V=function(P){var L,E,g=!1,N=(L=(E=C.current)===null||E===void 0?void 0:E.getList())!==null&&L!==void 0?L:[];N.map(function(X,h){if(X.name==P){var c;(c=C.current)===null||c===void 0||c.remove(h)}})};return(0,n.jsx)(s.Z,{title:"\u5173\u8054\u5BBF\u4E3B\u673A\u7F51\u7EDC\u5185\u4E3B\u673A",tooltip:"\u5BB9\u5668\u5185\u5982\u679C\u9700\u8981\u8BF7\u6C42\u5BBF\u4E3B\u673A\u6240\u5728\u7684\u7F51\u7EDC\u4E2D\u7684\u4E3B\u673A\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6B64\u914D\u7F6E\u5C06Ip\u6CE8\u5165\u5230\u5BB9\u5668\u4E2D",extra:(0,n.jsx)(y.Z,{children:(0,n.jsx)(ge.Z,{name:"enableBindHost",fieldProps:{checkedChildren:"\u7ED1\u5B9A\u5BBF\u4E3B\u673AIp",unCheckedChildren:"\u7ED1\u5B9A\u5BBF\u4E3B\u673AIp",onChange:function(P){P?ne({name:"host.dpanel.local",value:"host-gateway"}):V("host.dpanel.local")}}})}),children:(0,n.jsx)(Y.u,{name:"extraHosts",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BBF\u4E3B\u673A\u7F51\u7EDC\u5173\u8054"},actionRef:C,copyIconProps:!1,min:0,children:(0,n.jsxs)(M.UW,{children:[(0,n.jsx)(r.Z,{width:"md",name:"name",label:"Hostname",placeholder:""}),(0,n.jsx)(r.Z,{width:"md",name:"value",label:"ip",placeholder:""})]})})})}var We=e(90672),mn=(0,t.forwardRef)(function(C,ne){return(0,t.useImperativeHandle)(ne,function(){return{}}),(0,n.jsxs)(s.Z,{title:"\u7F51\u7EDC\u914D\u7F6E",children:[(0,n.jsxs)(M.UW,{children:[(0,n.jsx)(r.Z,{label:"\u914D\u7F6E ipV4 \u5730\u5740",name:["ipV4","address"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u5730\u5740\uFF0C\u4F8B\u5982 192.168.1.5",placeholder:"192.168.1.5"}),(0,n.jsx)(b.Z,{name:["ipV4"],children:function(Q){var P=Q.ipV4;return(0,n.jsx)(r.Z,{label:"\u914D\u7F6E ipV4 \u5B50\u7F51",name:["ipV4","subnet"],width:"md",required:P&&P.address,tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u6240\u5728\u7684\u5B50\u7F51\uFF0C\u4F8B\u5982 192.168.1.0/24",placeholder:"192.168.1.0/24",rules:[{required:P&&P.address}]})}}),(0,n.jsx)(r.Z,{label:"\u914D\u7F6E ipV4 \u7F51\u5173",name:["ipV4","gateway"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u7684\u7F51\u5173\uFF0C\u4F8B\u5982 192.168.1.1",placeholder:"192.168.1.1"}),(0,n.jsx)(ge.Z,{label:"\u81EA\u5B9A\u4E49ipV6",name:"enableIpV6Address"})]}),(0,n.jsx)(b.Z,{name:["enableIpV6Address"],children:function(Q){var P=Q.enableIpV6Address;if(P)return(0,n.jsxs)(M.UW,{children:[(0,n.jsx)(r.Z,{label:"\u914D\u7F6E ipV6 \u5730\u5740",name:["ipV6","address"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipV6\u5730\u5740\uFF0C\u4F8B\u5982 2001:db8::5",placeholder:"2001:db8::5"}),(0,n.jsx)(b.Z,{name:["ipV6"],children:function(E){var g=E.ipV6;return(0,n.jsx)(r.Z,{label:"\u914D\u7F6E ipV6 \u5B50\u7F51",name:["ipV6","subnet"],width:"md",required:g&&g.address,tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u6240\u5728\u7684\u5B50\u7F51\uFF0C\u4F8B\u5982 2001:db8::/48",placeholder:"2001:db8::/48",rules:[{required:g&&g.address}]})}}),(0,n.jsx)(r.Z,{label:"\u914D\u7F6E ipV6 \u7F51\u5173",name:["ipV6","gateway"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipV6\u7684\u7F51\u5173\uFF0C\u4F8B\u5982 2001:db8::1",placeholder:"2001:db8::1"})]})}}),(0,n.jsx)(We.Z,{label:"DNS\u914D\u7F6E",name:"dns",placeholder:"\u8BF7\u6307\u5B9Adns\u5730\u5740\uFF0C\u4F8B\u5982\uFF1A8.8.8.8\uFF0C\u4E00\u884C\u6DFB\u4E00\u6761dns\u5730\u5740"})]})}),_n=mn,we=e(31199),vn=e(86250);function hn(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.Z,{title:"\u9644\u52A0\u6267\u884C\u811A\u672C",headerBordered:!0,subTitle:"",children:(0,n.jsx)(We.Z,{label:"\u5BB9\u5668\u521B\u5EFA\u540E\u6267\u884C\u811A\u672C",name:["hook","containerCreate"],placeholder:"\u5BB9\u5668\u5728\u521B\u5EFA\u540E\u6267\u884C\u7684\u811A\u672C\uFF0C\u6B64\u811A\u672C\u5E76\u4E0D\u4F1A\u5F71\u54CD entrypoint \u53CA command\u3002\u4F8B\u5982\uFF1Als -al && touch abc.txt && apt update"})}),(0,n.jsxs)(s.Z,{title:"\u5065\u5EB7\u68C0\u67E5",headerBordered:!0,children:[(0,n.jsxs)(vn.Z,{gap:20,justify:"start",children:[(0,n.jsx)(we.Z,{label:"\u91CD\u590D\u95F4\u9694\u65F6\u95F4\uFF08\u79D2\uFF09",name:["healthcheck","interval"],initialValue:30}),(0,n.jsx)(we.Z,{label:"\u8D85\u65F6\u5931\u8D25\u65F6\u95F4\uFF08\u79D2\uFF09",name:["healthcheck","timeout"],initialValue:10}),(0,n.jsx)(we.Z,{label:"\u5931\u8D25\u91CD\u590D\u6B21\u6570",name:["healthcheck","retries"],initialValue:3}),(0,n.jsx)(Ae.Z,{width:"sm",label:"\u811A\u672C\u6267\u884C\u73AF\u5883",initialValue:"CMD",name:["healthcheck","shellType"],valueEnum:{CMD:"\u5728 Docker \u73AF\u5883\u6267\u884C","CMD-SHELL":"\u5728\u5BB9\u5668\u5185\u6267\u884C"}})]}),(0,n.jsx)(We.Z,{label:"\u6267\u884C\u811A\u672C",name:["healthcheck","cmd"],placeholder:"\u914D\u7F6E\u5BB9\u5668\u5065\u5EB7\u68C0\u67E5\u811A\u672C\uFF0C\u4F8B\u5982\uFF1Acurl -f http://localhost:8080/ || exit 1"})]})]})}var fn=e(74763),$e=e(2487),En=[{name:"ALL"},{name:"AUDIT_CONTROL"},{name:"AUDIT_WRITE",default:!0},{name:"BLOCK_SUSPEND"},{name:"CHOWN",default:!0},{name:"DAC_OVERRIDE",default:!0},{name:"DAC_READ_SEARCH"},{name:"FOWNER",default:!0},{name:"FSETID",default:!0},{name:"IPC_LOCK"},{name:"IPC_OWNER"},{name:"KILL",default:!0},{name:"LEASE"},{name:"LINUX_IMMUTABLE"},{name:"MAC_ADMIN"},{name:"MAC_OVERRIDE"},{name:"MKNOD",default:!0},{name:"NET_ADMIN"},{name:"NET_BIND_SERVICE",default:!0},{name:"NET_BROADCAST"},{name:"NET_RAW",default:!0},{name:"SETFCAP",default:!0},{name:"SETGID",default:!0},{name:"SETPCAP",default:!0},{name:"SETUID",default:!0},{name:"SYSLOG"},{name:"SYS_ADMIN"},{name:"SYS_BOOT"},{name:"SYS_CHROOT",default:!0},{name:"SYS_MODULE"},{name:"SYS_NICE"},{name:"SYS_PACCT"},{name:"SYS_PTRACE"},{name:"SYS_RAWIO"},{name:"SYS_RESOURCE"},{name:"SYS_TIME"},{name:"SYS_TTY_CONFIG"}],pn=(0,t.forwardRef)(function(C,ne){var V=(0,t.useContext)(Le.Z),Q=V.lang,P=(0,t.useState)(null),L=v()(P,2),E=L[0],g=L[1],N=(0,t.useContext)(W.Z),X=N.createFormRef;return(0,t.useImperativeHandle)(ne,function(){return{}}),(0,n.jsx)(s.Z,{children:(0,n.jsx)($e.Z,{grid:{gutter:10,xs:3,sm:3,md:4,lg:4,xl:4,xxl:6},dataSource:En,renderItem:function(c,O){var F;return(0,n.jsx)($e.Z.Item,{children:(0,n.jsx)(ge.Z,{fieldProps:{onChange:function(m){c.name=="ALL"&&g(m)}},disabled:c.name!="ALL"&&((0,fn.k)(E)?(F=X.current)===null||F===void 0?void 0:F.getFieldValue(["capAdd","ALL"]):E),initialValue:c.default,name:["capAdd",c.name],tooltip:Q("app.create.cap."+c.name.toLocaleLowerCase()),label:c.name})},O)}})})}),Cn=pn;function Fn(){var C,ne=(0,t.useContext)(Le.Z),V=ne.loading,Q=ne.notice,P=(0,t.useContext)(W.Z),L=P.createFormRef,E=P.volumeListRef,g=P.domainRef,N=P.createEnvRef,X=P.createLinkRef,h=(0,He.useSearchParams)(),c=v()(h,2),O=c[0],F=c[1],x=(0,He.useNavigate)(),m=(0,t.useState)("basic"),B=v()(m,2),G=B[0],te=B[1],q=O.get("id"),Pe=(C=O.get("imageId"))!==null&&C!==void 0?C:"";return(0,t.useEffect)(function(){if(q)V.show(),(0,Ve.iE)({id:q}).then(function(){var a=_()(l()().mark(function ee(u){var pe,Fe,ue,_e,Oe,he,xe,Se;return l()().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:if(ue={info:{}},!u.data.env.imageName){Be.next=11;break}return Be.prev=2,Be.next=5,(0,le.YU)({md5:u.data.env.imageName});case 5:_e=Be.sent,ue=_e.data,Be.next=11;break;case 9:Be.prev=9,Be.t0=Be.catch(2);case 11:u.data.env.ports&&u.data.env.ports.map(function(oe){return oe.host=="0"&&(oe.host=""),oe}),Oe=u.data.env.bindIpV6,u.data.containerInfo&&u.data.containerInfo.Info.NetworkSettings&&u.data.containerInfo.Info.NetworkSettings.Networks&&Object.keys(u.data.containerInfo.Info.NetworkSettings.Networks).map(function(oe){if(u.data.env.network&&(u.data.env.network=u.data.env.network.map(function(Ne){return oe==Ne.name&&u.data.containerInfo&&(Ne.subnet=u.data.containerInfo.Info.NetworkSettings.Networks[oe].IPAddress+"/"+u.data.containerInfo.Info.NetworkSettings.Networks[oe].IPPrefixLen),Ne})),u.data.containerInfo&&u.data.containerInfo.Info.NetworkSettings.Networks[oe].IPv6Gateway!=""&&oe==u.data.siteName&&(Oe=!0),oe=="bridge"){var be;(be=L.current)===null||be===void 0||be.setFieldValue("useBridgeNetwork",!0)}}),u.data.env.extraHosts&&u.data.env.extraHosts.map(function(oe){if(oe.value=="host-gateway"){var be;(be=L.current)===null||be===void 0||be.setFieldValue("enableBindHost",!0)}}),he=u.data.env.ports,u.data.env.ports&&(he=u.data.env.ports.map(function(oe){return oe.host=oe.host!=""?(oe.hostIp?oe.hostIp+":":"")+oe.host:"",oe})),(pe=L.current)===null||pe===void 0||pe.setFieldsValue({siteTitle:u.data.siteTitle,siteName:u.data.siteName,imageName:u.data.env.imageName,privileged:u.data.env.privileged,bindIpV6:u.data.env.useHostNetwork?!1:Oe,useHostNetwork:u.data.env.useHostNetwork,publishAllPorts:u.data.env.useHostNetwork?!1:u.data.env.publishAllPorts,workDir:{value:u.data.env.workDir,useDefault:!u.data.env.workDir,default:ue&&ue.info.Config&&ue.info.Config.WorkingDir},user:{value:u.data.env.user,useDefault:!u.data.env.user,default:ue&&ue.info.Config&&ue.info.Config.User},command:{value:u.data.env.command,useDefault:!u.data.env.command,default:ue&&ue.info.Config&&ue.info.Config.Cmd&&ue.info.Config.Cmd.join(" ")},entrypoint:{value:u.data.env.entrypoint,useDefault:!u.data.env.entrypoint,default:ue&&ue.info.Config&&ue.info.Config.Entrypoint&&ue.info.Config.Entrypoint.join(" ")},shmsize:(Fe=u.data.env.shmsize)!==null&&Fe!==void 0?Fe:"64M",cpus:u.data.env.cpus,memory:u.data.env.memory,environment:u.data.env.environment,label:u.data.env.label,volumes:u.data.env.volumes,ports:he,links:u.data.env.links,network:u.data.env.network,restart:u.data.env.restart,extraHosts:u.data.env.extraHosts,autoRemove:u.data.env.autoRemove,log:u.data.env.log,dns:u.data.env.dns&&u.data.env.dns.join(`
`),ipV4:u.data.env.ipV4,ipV6:u.data.env.ipV6,gpus:u.data.env.gpus,device:u.data.env.device,hook:u.data.env.hook,hostPid:u.data.env.hostPid,capAdd:u.data.env.capAdd&&Object.fromEntries(u.data.env.capAdd.map(function(oe){return[oe,!0]}))}),u.data.env.ipV6&&((xe=L.current)===null||xe===void 0||xe.setFieldValue("enableIpV6Address",!0)),u.data.env.healthcheck&&u.data.env.healthcheck.cmd&&u.data.env.healthcheck.cmd!=""&&((Se=L.current)===null||Se===void 0||Se.setFieldsValue({healthcheck:u.data.env.healthcheck}));case 20:case"end":return Be.stop()}},ee,null,[[2,9]])}));return function(ee){return a.apply(this,arguments)}}()).finally(function(){V.destroy()});else{var ie,$;(ie=L.current)===null||ie===void 0||ie.resetFields(),($=L.current)===null||$===void 0||$.setFieldValue("useBridgeNetwork",!0)}},[O]),(0,n.jsx)(j._z,{children:(0,n.jsx)(s.Z,{direction:"column",gutter:[0,10],children:(0,n.jsxs)(p.A,{submitter:{render:function($,a){return(0,n.jsx)(R.S,{children:a})}},formRef:L,onFinish:function(){var ie=_()(l()().mark(function $(a){var ee,u,pe,Fe,ue,_e;return l()().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:if(_e={siteTitle:a.siteTitle,siteName:a.siteName,hostname:a.hostname,imageName:a.imageName,environment:a.environment,links:a.links,ports:a.ports,volumes:a.volumes,network:(ee=a.network)!==null&&ee!==void 0?ee:[],privileged:(u=a.privileged)!==null&&u!==void 0?u:!1,autoRemove:(pe=a.autoRemove)!==null&&pe!==void 0?pe:!1,restart:a.restart,cpus:a.cpus,memory:a.memory,shmsize:(Fe=a.shmsize)!==null&&Fe!==void 0?Fe:0,workDir:a.workDir&&!a.workDir.useDefault?a.workDir.value:"",user:a.user&&!a.user.useDefault?a.user.value:"",command:a.command&&!a.command.useDefault?a.command.value:"",entrypoint:a.entrypoint&&!a.entrypoint.useDefault?a.entrypoint.value:"",useHostNetwork:a.useHostNetwork,bindIpV6:a.bindIpV6,log:a.log,dns:a.dns&&a.dns!=""?a.dns.split(`
`):[],label:a.label,publishAllPorts:a.publishAllPorts,extraHosts:a.extraHosts,ipV4:a.ipV4,ipV6:a.ipV6,device:a.device,gpus:a.gpus,hook:a.hook,hostPid:a.hostPid,capAdd:a.capAdd?Object.keys(a.capAdd).map(function(xe){return xe}):[],useBridgeNetwork:(ue=a.useBridgeNetwork)!==null&&ue!==void 0?ue:!0},!(!a.useBridgeNetwork&&!a.useHostNetwork&&(!a.network||a.network.length==0))){he.next=4;break}return Q.error("\u4E0D\u52A0\u5165 Bridge \u7F51\u7EDC\u65F6\uFF0C\u5FC5\u987B\u6307\u5B9A\u4E00\u4E2A\u81EA\u5B9A\u4E49\u7F51\u7EDC"),he.abrupt("return",!1);case 4:return a.useBridgeNetwork&&!_e.network.find(function(xe){return xe.name=="bridge"})&&_e.network.push({name:"bridge",alise:[],ipV4:""}),a.healthcheck&&a.healthcheck.cmd&&a.healthcheck.cmd!=""&&(_e.healthcheck=a.healthcheck),q&&(_e.containerId=_e.siteName),console.log(_e),he.next=10,(0,Ve.$G)(_e);case 10:return x("/app/list"),he.abrupt("return",!0);case 12:case"end":return he.stop()}},$)}));return function($){return ie.apply(this,arguments)}}(),children:[(0,n.jsxs)(s.Z,{title:"\u57FA\u7840\u4FE1\u606F",headerBordered:!0,children:[(0,n.jsx)(r.Z,{name:"siteTitle",label:"\u5BB9\u5668\u63CF\u8FF0",fieldProps:{onChange:function($){var a="";if($.target.value&&!q){var ee,u=(0,un.N9)($.target.value.trim(),{toneType:"none",type:"array"});a=u.join(""),(ee=L.current)===null||ee===void 0||ee.setFieldValue("siteName",a)}}},placeholder:"\u8BF7\u8F93\u5165\u5BB9\u5668\u63CF\u8FF0\u540D\u79F0"}),(0,n.jsxs)(M.UW,{children:[(0,n.jsx)(r.Z,{width:"lg",name:"siteName",label:"\u5BB9\u5668\u6807\u8BC6",tooltip:"\u5BB9\u5668\u552F\u4E00\u6807\u8BC6\uFF0C\u7528\u4E8E\u6807\u8BC6\u5BB9\u5668\u548C\u5185\u90E8\u8BBF\u95EE",required:!0,rules:[{required:!0}],placeholder:"\u8BF7\u8F93\u5165\u5BB9\u5668\u6807\u8BC6\u540D\u79F0"}),(0,n.jsx)(r.Z,{label:"Hostname",name:"hostname",width:"md"})]}),(0,n.jsx)(De,{redeploy:!!q,fromImageId:Pe})]}),(0,n.jsx)(D.Z,{offsetTop:50,children:(0,n.jsx)(s.Z,{style:{marginBottom:-20},children:(0,n.jsx)(H.Z,{activeKey:G,onChange:function($){te($),window.scrollTo(0,450)},items:[{label:"\u57FA\u672C\u914D\u7F6E",key:"basic"},{label:"\u5173\u8054\u914D\u7F6E",key:"link"},{label:"\u8FD0\u884C\u914D\u7F6E",key:"run-command"},{label:"\u8D44\u6E90\u914D\u7F6E",key:"resource"},{label:"Hook",key:"hook"},{label:"\u80FD\u529B\u914D\u7F6E",key:"cap"},{label:"\u5176\u5B83",key:"other"}]})})}),(0,n.jsxs)(Re.Z,{show:G=="basic",children:[(0,n.jsx)(dn,{ref:g,showBindHost:!0,showBindIpV6:!0}),(0,n.jsx)(Ie.Z,{showAddButton:!0,showImportButton:!0,showCodeMode:!0,label:"\u73AF\u5883\u53D8\u91CF",ref:N}),(0,n.jsx)(Ge,{showDefault:!0,ref:E}),(0,n.jsx)(b.Z,{name:["siteName","useHostNetwork"],children:function($){var a=$.siteName,ee=$.useHostNetwork;if(!ee)return(0,n.jsx)(_n,{})}})]}),(0,n.jsx)(Re.Z,{show:G=="link",children:(0,n.jsx)(b.Z,{name:["siteName","useHostNetwork"],children:function($){var a=$.siteName,ee=$.useHostNetwork;return ee?(0,n.jsx)(o.Z,{showIcon:!0,description:"\u7ED1\u5B9A\u5230\u5BBF\u4E3B\u673A\u7F51\u7EDC\u65F6\uFF0C\u65E0\u6CD5\u901A\u8FC7 Docker \u5173\u8054\u5176\u5B83\u5BB9\u5668\u3002\u8BF7\u4F7F\u7528\u5BBF\u4E3B\u673A\u5185\u7F51IP\u6216\u662F127.0.0.1\u4E92\u8054\u5BB9\u5668\u66B4\u9732\u7AEF\u53E3\u3002"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(je,{onAddEnv:function(pe,Fe){var ue;(ue=N.current)===null||ue===void 0||ue.addEnvItem(pe,Fe)},ref:X}),(0,n.jsx)(on,{showUseBridgeNetwork:!0,siteName:a}),(0,n.jsx)(cn,{})]})}})}),(0,n.jsx)(Re.Z,{show:G=="run-command",children:(0,n.jsx)(tn,{})}),(0,n.jsx)(Re.Z,{show:G=="resource",children:(0,n.jsx)(Je,{})}),(0,n.jsx)(Re.Z,{show:G=="hook",children:(0,n.jsx)(hn,{})}),(0,n.jsx)(Re.Z,{show:G=="other",children:(0,n.jsx)(Qe,{})}),(0,n.jsx)(Re.Z,{show:G=="cap",children:(0,n.jsx)(Cn,{})})]},"form")})})}},2831:function(de,T,e){e.d(T,{Ll:function(){return R},aF:function(){return v},d6:function(){return M},u5:function(){return s}});var A=e(15009),l=e.n(A),w=e(99289),_=e.n(w),f=e(82346);function v(){return j.apply(this,arguments)}function j(){return j=_()(l()().mark(function D(){return l()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,f.request)("/api/common/home/info",{method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},D)})),j.apply(this,arguments)}function s(){return p.apply(this,arguments)}function p(){return p=_()(l()().mark(function D(){return l()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,f.request)("/api/common/home/check-new-version",{method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},D)})),p.apply(this,arguments)}function R(){return r.apply(this,arguments)}function r(){return r=_()(l()().mark(function D(){return l()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,f.request)("/api/common/home/usage",{method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},D)})),r.apply(this,arguments)}function M(){return b.apply(this,arguments)}function b(){return b=_()(l()().mark(function D(){return l()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,f.request)("/api/common/home/upgrade-script",{method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},D)})),b.apply(this,arguments)}},97961:function(de,T,e){e.d(T,{GH:function(){return r},MF:function(){return H},_2:function(){return b},fN:function(){return j},ii:function(){return v},vC:function(){return p}});var A=e(15009),l=e.n(A),w=e(99289),_=e.n(w),f=e(82346),v=[{name:"linux/amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"linux/arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"linux/i386",arch:"386",search:[]},{name:"linux/arm/v6",arch:"arm",search:[]},{name:"linux/arm/v7",arch:"arm",search:[]},{name:"linux/arm/v8",arch:"arm64",search:[]},{name:"linux/ppc64le",arch:"ppc64le",search:[]},{name:"linux/riscv64",arch:"riscv64",search:[]}];function j(t){return s.apply(this,arguments)}function s(){return s=_()(l()().mark(function t(W){return l()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,f.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:W}));case 1:case"end":return i.stop()}},t)})),s.apply(this,arguments)}function p(t){return R.apply(this,arguments)}function R(){return R=_()(l()().mark(function t(W){return l()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,f.request)("/api/app/image/import-by-container-tar",{method:"POST",data:W}));case 1:case"end":return i.stop()}},t)})),R.apply(this,arguments)}function r(t){return M.apply(this,arguments)}function M(){return M=_()(l()().mark(function t(W){return l()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,f.request)("/api/app/image/import-by-image-tar",{method:"POST",data:W}));case 1:case"end":return i.stop()}},t)})),M.apply(this,arguments)}function b(t){return D.apply(this,arguments)}function D(){return D=_()(l()().mark(function t(W){return l()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,f.request)("/api/common/attach/delete",{method:"POST",data:W});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},t)})),D.apply(this,arguments)}function H(){return o.apply(this,arguments)}function o(){return o=_()(l()().mark(function t(){return l()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.abrupt("return",(0,f.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return I.stop()}},t)})),o.apply(this,arguments)}},79245:function(de,T,e){e.d(T,{m:function(){return w},y:function(){return _}});var A=e(64599),l=e.n(A);function w(f){var v=[];if(!f||f=="")return v;var j=f.matchAll(/\$\{(\w+)[:-?=]*(.*?)\}/g),s=l()(j),p;try{for(s.s();!(p=s.n()).done;){var R=p.value;v.push({name:R[1],value:R[2]?R[2].indexOf("-")==0?R[2].substring(1):R[2]:""})}}catch(r){s.e(r)}finally{s.f()}return v}function _(f,v){return!f||!v?!1:(f&v)!==0}}}]);
