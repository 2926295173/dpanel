"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3805],{49610:function(W,g,t){var D=t(67294),u=t(54964),O=t(52626),f=t(12320),m=t.n(f),C=t(78267),n=t.n(C),e=t(85893),_,d=new f.Terminal(u.a),c=new C.FitAddon,h=(0,D.forwardRef)(function(i,p){var l,M=function(){d.reset(),l&&l.dispose(),_&&(_.close(),_=null)},o=function(){d.reset(),c.fit(),d.focus(),l&&l.dispose(),l=d.onData(function(E){var P={content:{command:E},type:"console"};_&&_.send(JSON.stringify(P))})};return(0,D.useImperativeHandle)(p,function(){return{start:function(E,P){var A=P?Object.keys(P).map(function(y){if(P&&P[y])return"".concat(y,"=").concat(P[y])}):[];_=new WebSocket((0,O.R)("/console/"+E+"?"+A.join("&"))),_.addEventListener("message",function(y){var T=JSON.parse(y.data),a=T.type;if(a=="console:"+E&&(d.write(T.data),T.data.indexOf("exec failed")!=-1)){M();return}}),o()},close:function(){M()},fit:function(){c.fit()}}}),(0,D.useEffect)(function(){return d.loadAddon(c),d.open(document.getElementById("terminal-container-console")),c.fit(),function(){M()}},[]),(0,e.jsx)("div",{style:{height:i.showInDrawer?"75vh":"100vh"},id:"terminal-container-console"})});g.Z=h},54964:function(W,g,t){t.d(g,{a:function(){return h}});var D=t(5574),u=t.n(D),O=t(78267),f=t.n(O),m=t(75458),C=t.n(m),n=t(67294),e=t(12320),_=t.n(e),d=t(89629),c=t(85893),h={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,cursorStyle:"block",cursorBlink:!0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},i=new e.Terminal(h),p=new m.SearchAddon,l=new O.FitAddon,M=(0,n.forwardRef)(function(o,U){var E,P=(0,n.useState)(!0),A=u()(P,2),y=A[0],T=A[1];return(0,n.useEffect)(function(){return window.addEventListener("resize",function(){o.showInModal||l.fit()}),o.style&&o.style.fontSize&&(i.options.fontSize=o.style.fontSize),i.loadAddon(l),i.loadAddon(p),i.open(document.getElementById(o.id?o.id:"terminal-container")),o.showInModal||l.fit(),function(){i.reset(),T(!0)}},[]),(0,n.useImperativeHandle)(U,function(){return{write:function(s){y&&(l.fit(),T(!1)),i.write(s)},clear:function(){i.clear()},getTerminal:function(){return i},findNext:function(s){p.findNext(s)},findPrev:function(s){p.findPrevious(s)},fit:function(){l.fit()},onData:function(s){return i.onData(s)}}}),(0,c.jsx)("div",{id:o.id?o.id:"terminal-container",style:{width:o.width?o.width:"100%",height:o.height?o.height:"500px",marginTop:(E=o.style)===null||E===void 0?void 0:E.marginTop}})});g.Z=M},33345:function(W,g,t){t.r(g),t.d(g,{default:function(){return _}});var D=t(5574),u=t.n(D),O=t(49610),f=t(60335),m=t(5251),C=t(82346),n=t(67294),e=t(85893);function _(){var d=(0,C.useParams)(),c=(0,C.useSearchParams)(),h=u()(c,2),i=h[0],p=h[1],l=(0,n.useRef)();return(0,n.useEffect)(function(){d.id&&(0,f.jV)({md5:d.id}).then(function(M){var o;window.document.title="console - ".concat((0,m.fi)(M.data.info.Name,"/")),d.id&&((o=l.current)===null||o===void 0||o.start(M.data.info.Id,{width:i.get("width"),height:i.get("height"),cmd:i.get("cmd"),workDir:i.get("workDir")}))}),document.body.style.overflow="hidden"},[]),(0,e.jsx)(O.Z,{ref:l})}},60335:function(W,g,t){t.d(g,{IE:function(){return e},IW:function(){return C},KK:function(){return p},LJ:function(){return M},RF:function(){return P},Re:function(){return U},aF:function(){return y},eE:function(){return h},jV:function(){return d}});var D=t(15009),u=t.n(D),O=t(99289),f=t.n(O),m=t(82346);function C(a){return n.apply(this,arguments)}function n(){return n=f()(u()().mark(function a(s){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.request)("/api/app/container/status",{method:"POST",data:s}));case 1:case"end":return r.stop()}},a)})),n.apply(this,arguments)}function e(a){return _.apply(this,arguments)}function _(){return _=f()(u()().mark(function a(s){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.request)("/api/app/container/get-list",{data:s,method:"POST"}));case 1:case"end":return r.stop()}},a)})),_.apply(this,arguments)}function d(a){return c.apply(this,arguments)}function c(){return c=f()(u()().mark(function a(s){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.request)("/api/app/container/get-detail",{data:s,method:"POST"}));case 1:case"end":return r.stop()}},a)})),c.apply(this,arguments)}function h(a){return i.apply(this,arguments)}function i(){return i=f()(u()().mark(function a(s){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.request)("/api/app/container/update",{data:s,method:"POST"}));case 1:case"end":return r.stop()}},a)})),i.apply(this,arguments)}function p(){return l.apply(this,arguments)}function l(){return l=f()(u()().mark(function a(){return u()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,m.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return v.stop()}},a)})),l.apply(this,arguments)}function M(a){return o.apply(this,arguments)}function o(){return o=f()(u()().mark(function a(s){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.request)("/api/app/container/export",{method:"POST",data:s,responseType:"blob"}));case 1:case"end":return r.stop()}},a)})),o.apply(this,arguments)}function U(a){return E.apply(this,arguments)}function E(){return E=f()(u()().mark(function a(s){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.request)("/api/app/container/commit",{method:"POST",data:s}));case 1:case"end":return r.stop()}},a)})),E.apply(this,arguments)}function P(a){return A.apply(this,arguments)}function A(){return A=f()(u()().mark(function a(s){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.request)("/api/app/container/upgrade",{method:"POST",data:s}));case 1:case"end":return r.stop()}},a)})),A.apply(this,arguments)}function y(a){return T.apply(this,arguments)}function T(){return T=f()(u()().mark(function a(s){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.request)("/api/app/container/copy",{method:"POST",data:s}));case 1:case"end":return r.stop()}},a)})),T.apply(this,arguments)}},5251:function(W,g,t){t.d(g,{FI:function(){return u},NF:function(){return f},ZM:function(){return O},fi:function(){return m}});function D(n){return n.trim()}function u(n){var e="";n<.1*1024?e=n.toFixed(2)+"B":n<.1*1024*1024?e=(n/1024).toFixed(2)+"KB":n<1*1024*1024*1024?e=(n/(1024*1024)).toFixed(2)+"MB":e=(n/(1024*1024*1024)).toFixed(2)+"GB";var _=e+"",d=_.indexOf("."),c=_.substring(d+1,d+3);return c=="00"?_.substring(0,d)+_.substr(d+3,2):e}function O(n){if(n){var e=new Date(n),_=e.getFullYear()+"-",d=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",c=(e.getDate()<10?"0"+e.getDate():e.getDate())+" ",h=(e.getHours()<10?"0"+e.getHours():e.getHours())+":",i=(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":",p=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return _+d+c+h+i+p}}function f(n){if(!n||n=="")return"-";var e=new Date(n),_=e.getUTCFullYear(),d=String(e.getUTCMonth()+1).padStart(2,"0"),c=String(e.getUTCDate()).padStart(2,"0"),h=String(e.getUTCHours()).padStart(2,"0"),i=String(e.getUTCMinutes()).padStart(2,"0"),p=String(e.getUTCSeconds()).padStart(2,"0");return"".concat(_,"-").concat(d,"-").concat(c," ").concat(h,":").concat(i,":").concat(p)}function m(n,e){if(!n||n.length===0)return"";if(e.length===0)return n;for(;n.startsWith(e);)n=n.slice(e.length);return n}function C(n,e){if(!n||n.length===0)return"";if(e.length===0)return n;for(;n.endsWith(e);)n=n.slice(0,n.length-e.length);return n}}}]);
