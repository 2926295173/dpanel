"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1610],{80821:function(A,d,t){t.d(d,{Z:function(){return M}});var f=t(5574),u=t.n(f),o=t(24963),s=t(86738),l=t(14726),g=t(83062),E=t(67294),p=t(85893);function M(a){var T=(0,E.useState)(!1),O=u()(T,2),v=O[0],D=O[1],P=(0,E.useContext)(o.Z),R=P.lang,j=P.notice,C=P.message,_=function(){D(!0),a.action().then(function(h){if(D(!1),typeof a.onSuccess=="function"&&a.onSuccess(h),a.messageSuccess){var n="";typeof a.messageSuccess=="function"?n=a.messageSuccess(h):n=a.messageSuccess,n=R("notification.".concat(n))+R("notification.title.success"),a.asynced?C.info(n):C.success(n)}}).catch(function(h){D(!1),typeof a.onError=="function"&&a.onError(h)})};return a.confirm?(0,p.jsx)(s.Z,{style:{width:500},title:a.confirmTitle?a.confirmTitle:R("notification.title.tip"),description:a.confirm,onConfirm:_,okText:"Yes",cancelText:"No",children:(0,p.jsx)(l.ZP,{disabled:a.disabled,icon:a.icon,loading:v,danger:a.danger,type:a.type,children:a.children})}):(0,p.jsx)(g.Z,{title:a.tips,children:(0,p.jsx)(l.ZP,{disabled:a.disabled,icon:a.icon,loading:v,onClick:_,danger:a.danger,type:a.type,children:a.children})})}},78451:function(A,d,t){t.d(d,{Z:function(){return o}});var f=t(67294),u=t(85893);function o(s){return(0,u.jsx)("span",{style:{width:s.width?s.width:"auto",wordBreak:"break-word"},children:s.content})}},24963:function(A,d,t){var f=t(67294),u=(0,f.createContext)({});d.Z=u},67108:function(A,d,t){t.r(d),t.d(d,{default:function(){return L}});var f=t(15009),u=t.n(f),o=t(99289),s=t.n(o),l=t(90078),g=t(10641),E=t(62597),p=t(14726),M=t(83062),a=t(42075),T=t(50136),O=t(54006),v=t(43425),D=t(67294),P=t(96974),R=t(80821),j=t(67255),C=t(78451),_=t(85893);function L(){var h=(0,P.UO)(),n=(0,D.useRef)();return(0,D.useEffect)(function(){var r;(r=n.current)===null||r===void 0||r.reload()},[h]),(0,_.jsx)(l._z,{header:{extra:[(0,_.jsx)(p.ZP,{type:"primary",children:(0,_.jsx)(O.Link,{to:"/app/create/image",children:"\u521B\u5EFA\u5BB9\u5668"})},"create")]},children:(0,_.jsx)(g.Z,{scroll:{x:"max-content"},actionRef:n,columns:[{title:"\u540D\u79F0",dataIndex:"siteTitle"},{title:"\u6807\u8BC6",dataIndex:"siteName"},{title:"\u6700\u540E\u9519\u8BEF",dataIndex:"message",width:250,render:function(i,e,y,m,c){return(0,_.jsx)(C.Z,{content:e.message})}},{title:"\u5220\u9664\u65E5\u671F",ellipsis:!0,dataIndex:"deletedAt",search:!1,width:180,render:function(i,e,y,m,c){return new Date(e.deletedAt).toLocaleString()}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:100,render:function(i,e,y,m){return[(0,_.jsx)(O.Link,{to:"/app/create/image?op=update&id="+e.id,type:"link",children:(0,_.jsx)(M.Z,{title:"\u518D\u6B21\u6784\u5EFA",children:(0,_.jsx)(v.Z,{})})},"rebuild")]}}],rowKey:"id",request:function(){var r=s()(u()().mark(function i(e,y,m){var c,B,U;return u()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,E.cl)({pageSize:(c=e.pageSize)!==null&&c!==void 0?c:10,page:(B=e.current)!==null&&B!==void 0?B:1,isDelete:!0,siteTitle:e.siteTitle,siteName:e.siteName});case 2:return U=b.sent,b.abrupt("return",{data:U.data.list,success:!0,total:U.data.total});case 4:case"end":return b.stop()}},i)}));return function(i,e,y){return r.apply(this,arguments)}}(),rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(i){var e=i.selectedRowKeys;return(0,_.jsx)(a.Z,{size:16,children:(0,_.jsx)(R.Z,{danger:!0,type:"primary",action:function(){return(0,E.xb)({id:e})},onSuccess:function(){var m,c;return!((m=n.current)===null||m===void 0)&&m.reloadAndRest&&((c=n.current)===null||c===void 0||c.reloadAndRest()),!0},onError:function(){var m,c;return!((m=n.current)===null||m===void 0)&&m.reset&&((c=n.current)===null||c===void 0||c.reset()),!0},messageSuccess:"delete",children:"\u6279\u91CF\u5220\u9664"})})},pagination:(0,j.O)(),search:{collapsed:!1},tableExtraRender:function(){return(0,_.jsx)(T.Z,{mode:"horizontal",selectedKeys:["recycle"],items:[{label:(0,_.jsx)(O.Link,{to:"/app/list",replace:!0,children:"\u5BB9\u5668\u5217\u8868"}),key:"all"},{label:(0,_.jsx)(O.Link,{to:"/app/recycle",replace:!0,children:"\u56DE\u6536\u7AD9"}),key:"recycle"}]})}})})}},62597:function(A,d,t){t.d(d,{$G:function(){return g},Ct:function(){return R},Tb:function(){return a},XH:function(){return O},cl:function(){return p},iE:function(){return D},lK:function(){return L},xb:function(){return C}});var f=t(15009),u=t.n(f),o=t(99289),s=t.n(o),l=t(54006);function g(n){return E.apply(this,arguments)}function E(){return E=s()(u()().mark(function n(r){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/app/site/create-by-image",{method:"POST",data:r}));case 1:case"end":return e.stop()}},n)})),E.apply(this,arguments)}function p(n){return M.apply(this,arguments)}function M(){return M=s()(u()().mark(function n(r){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/app/site/get-list",{method:"POST",data:r}));case 1:case"end":return e.stop()}},n)})),M.apply(this,arguments)}function a(n){return T.apply(this,arguments)}function T(){return T=s()(u()().mark(function n(r){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.download=!1,e.next=3,(0,l.request)("/api/app/log/run",{method:"POST",data:r});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},n)})),T.apply(this,arguments)}function O(n){return v.apply(this,arguments)}function v(){return v=s()(u()().mark(function n(r){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.download=!0,e.next=3,(0,l.request)("/api/app/log/run",{method:"POST",data:r,responseType:"blob"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},n)})),v.apply(this,arguments)}function D(n){return P.apply(this,arguments)}function P(){return P=s()(u()().mark(function n(r){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.request)("/api/app/site/get-detail",{data:r,method:"POST"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},n)})),P.apply(this,arguments)}function R(n){return j.apply(this,arguments)}function j(){return j=s()(u()().mark(function n(r){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/app/container/delete",{method:"POST",data:r}));case 1:case"end":return e.stop()}},n)})),j.apply(this,arguments)}function C(n){return _.apply(this,arguments)}function _(){return _=s()(u()().mark(function n(r){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.request)("/api/app/site/delete",{method:"POST",data:r}));case 1:case"end":return e.stop()}},n)})),_.apply(this,arguments)}function L(n){return h.apply(this,arguments)}function h(){return h=s()(u()().mark(function n(r){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.request)("/api/app/site/update-title",{method:"POST",data:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},n)})),h.apply(this,arguments)}},67255:function(A,d,t){t.d(d,{O:function(){return f},j:function(){return u}});function f(){var o,s=parseInt((o=localStorage.getItem("dpanel-pagesize"))!==null&&o!==void 0?o:"0");return{showSizeChanger:!0,defaultPageSize:s!=null?s:20}}function u(o){var s="dpanel-table-column-".concat(o),l={};if(localStorage.getItem(s)){var g;l=JSON.parse((g=localStorage.getItem(s))!==null&&g!==void 0?g:"{}")}return{defaultValue:l,onChange:function(p){localStorage.setItem("dpanel-table-column-".concat(o),JSON.stringify(p))}}}}}]);
