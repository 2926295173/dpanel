"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8914],{78914:function(Ee,ee,t){t.d(ee,{Z:function(){return Fe}});var ne=t(5574),j=t.n(ne),te=t(15009),h=t.n(te),re=t(99289),w=t.n(re),ae=t(80271),J=t(73813),ie=t(43425),oe=t(95591),se=t(40666),le=t(1912),ue=t(77171),de=t(82061),M=t(1883),R=t(38345),ce=t(89359),fe=t(82346),U=t(42075),K=t(83622),ve=t(96074),N=t(66309),Q=t(25593),o=t(26412),me=t(60940),s=t(67294),V=t(80821),W=t(5251),k=t(184),ge=t(97269),q=t(62370),he=t(25278),_=t(2487),xe=t(4393),je=t(65913),G=t(3616),D=t(36146),b=t(68297),n=t(85893),Ze=(0,s.forwardRef)(function(Z,P){(0,s.useImperativeHandle)(P,function(){return{show:function(u){return w()(h()().mark(function I(){var E,L;return h()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return f(!0),(E=F.current)===null||E===void 0||E.show(),r.prev=2,r.next=5,(0,b.aw)({imageName:u}).finally(function(){var i;(i=F.current)===null||i===void 0||i.destroy()});case 5:L=r.sent,S(L.data.list),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(2),f(!1);case 12:case"end":return r.stop()}},I,null,[[2,9]])}))()}}});var C=(0,s.useState)(),y=j()(C,2),l=y[0],S=y[1],m=(0,s.useState)(""),T=j()(m,2),g=T[0],e=T[1],p=(0,s.useState)(!1),O=j()(p,2),$=O[0],f=O[1],F=(0,s.useRef)(),A=new D.Uo("image");return(0,n.jsx)(k.a,{open:$,onOpenChange:function(u){f(u),!u&&S(void 0)},title:A.format("remoteTagTitle"),isKeyPressSubmit:!0,submitter:!1,drawerProps:{width:G.R_,extra:(0,n.jsx)(ge.A,{isKeyPressSubmit:!0,onFinish:function(u){e(u.search)},submitter:!1,children:(0,n.jsx)(U.Z.Compact,{children:(0,n.jsx)(q.Z,{style:{margin:0},name:"search",children:(0,n.jsx)(he.Z,{allowClear:!0,addonBefore:A.format("remoteSearch"),placeholder:A.format("remoteSearchEmpty"),onClear:function(){e("")}})})})})},children:(0,n.jsx)(je.Z,{ref:F,children:(0,n.jsx)(_.Z,{rowKey:function(u){return"".concat(u)},pagination:{pageSize:50},grid:{gutter:10,column:2},dataSource:l&&l.filter(function(x){return!g||x.toLocaleLowerCase().indexOf(g.toLocaleLowerCase())!==-1}),loading:!l||(l==null?void 0:l.length)<=0,renderItem:function(u,I){return(0,n.jsx)(_.Z.Item,{children:(0,n.jsx)(xe.Z,{style:{height:"80px"},children:(0,n.jsx)(Q.Z.Text,{copyable:!0,children:u})})},I)}})})},"form")}),Ce=Ze,ye=t(64789),Se=t(5966),Te=t(2205);function pe(Z){var P=(0,s.useRef)(),C=(0,s.useState)(!1),y=j()(C,2),l=y[0],S=y[1],m=new D.Uo("image");return(0,n.jsxs)(k.a,{drawerProps:{width:G.R_},open:l,title:m.format("tagTitle"),onOpenChange:function(g){var e;S(g),!g&&((e=P.current)===null||e===void 0||e.resetFields())},formRef:P,onFinish:function(){var T=w()(h()().mark(function g(e){var p,O;return h()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,b.Qd)({md5:(p=Z.imageInfo.info.Id)!==null&&p!==void 0?p:"",tag:(e.imageRegistry?e.imageRegistry.serverAddress+"/":"")+e.imageTag});case 2:return O=f.sent,S(!1),Z.onFinish&&Z.onFinish(),f.abrupt("return",!0);case 6:case"end":return f.stop()}},g)}));return function(g){return T.apply(this,arguments)}}(),trigger:(0,n.jsx)(K.ZP,{icon:(0,n.jsx)(ye.Z,{}),children:m.format("tagTitle")}),children:[(0,n.jsx)(q.Z,{label:m.format("tagRegistry"),name:"imageRegistry",tooltip:m.format("tagRegistryTip"),children:(0,n.jsx)(Te.Z,{})}),(0,n.jsx)(Se.Z,{fieldProps:{min:2,max:255},rules:[{required:!0}],required:!0,placeholder:m.format("tagImageTagEmpty"),label:m.format("tagImageTag"),name:"imageTag",tooltip:m.format("tagImageTagTip")})]})}var Ie=t(24963),H=t(1699),Re=t(78451),Pe=t(27166),Oe=(0,s.forwardRef)(function(Z,P){var C;(0,s.useImperativeHandle)(P,function(){return{show:function(i){return w()(h()().mark(function a(){return h()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return F(!0),d.next=3,Y(i);case 3:case"end":return d.stop()}},a)}))()}}});var y=(0,fe.useAccess)(),l=new D.Uo("components.image"),S=(0,s.useContext)(Ie.Z),m=S.message,T=(0,s.useState)(),g=j()(T,2),e=g[0],p=g[1],O=(0,s.useState)(!1),$=j()(O,2),f=$[0],F=$[1],A=(0,s.useState)(0),x=j()(A,2),u=x[0],I=x[1],E=(0,s.useRef)(),L=(0,s.useRef)(),Y=function(){var r=w()(h()().mark(function i(a){var v,d;return h()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return(v=L.current)===null||v===void 0||v.loading(),c.next=3,(0,J.YU)({md5:a,showLayer:!0}).finally(function(){var B;(B=L.current)===null||B===void 0||B.finish()});case 3:d=c.sent,p(d.data);case 5:case"end":return c.stop()}},i)}));return function(a){return r.apply(this,arguments)}}();return(0,s.useEffect)(function(){e&&Y(e==null?void 0:e.info.Id)},[u]),(0,n.jsxs)(Pe.Z,{drawerProps:{width:G.R_},submitter:!1,ref:L,title:l.format("quickTitle"),open:f,onOpenChange:function(i){F(i),i||Z.onClose&&Z.onClose()},children:[!y.canSeeEnableCe&&(0,n.jsx)(Ce,{ref:E}),(0,n.jsxs)(R.Z,{direction:"column",ghost:!0,gutter:[0,10],children:[(0,n.jsx)(R.Z,{title:(0,n.jsx)(ie.Z,{}),subTitle:l.format("quickDetailManageTitle"),ghost:!0,children:(0,n.jsxs)(U.Z,{children:[(e==null?void 0:e.info)&&(0,n.jsx)(H.u,{access:"canSeeEnableCe",showProTips:!0,children:function(i){var a=i.canSeeEnableCe;return(0,n.jsx)(ae.Z,{trigger:(0,n.jsx)(K.ZP,{disabled:a,icon:(0,n.jsx)(oe.Z,{}),children:D.FD.format("listManageFilePath")}),imageId:e.info.Id})}}),(0,n.jsx)(ve.Z,{type:"vertical"}),(e==null?void 0:e.info)&&(0,n.jsx)(pe,{imageInfo:e,onFinish:function(){I(u+1)}})]})},"manage"),(0,n.jsx)(R.Z,{title:(0,n.jsx)(se.Z,{}),subTitle:l.format("quickTagTitle"),ghost:!0,children:(0,n.jsx)(ce.Rs,{grid:{gutter:40,column:2},headerTitle:!1,metas:{content:{render:function(i,a,v){return(0,n.jsx)(N.Z,{color:"blue",children:(0,n.jsx)(Q.Z.Text,{copyable:!0,children:a})},v)}},title:{render:function(i,a,v){return(0,n.jsxs)(U.Z,{children:[(0,n.jsx)(V.Z,{buttonProps:{icon:(0,n.jsx)(le.Z,{})},action:function(){return(0,b.Ze)({tag:a,type:"push"})},children:"Push"}),(0,n.jsx)(V.Z,{buttonProps:{icon:(0,n.jsx)(ue.Z,{})},action:function(){return(0,b.Ze)({tag:a,type:"pull"})},children:"Pull"}),(0,n.jsx)(H.u,{access:"canSeeEnableCe",showProTips:!0,showProTipsOffset:[-15,9],children:function(z){var c=z.canSeeEnableCe;return(0,n.jsx)(K.ZP,{disabled:c,onClick:function(){var X;(X=E.current)===null||X===void 0||X.show(a)},children:l.format("quickRemoteTagButton")})}}),(0,n.jsx)(H.u,{access:"canSeeImageListManage",children:(0,n.jsx)(V.Z,{buttonProps:{danger:!0},confirmProps:{showCommonConfirm:!0},action:function(){return(0,b.cV)({tag:a})},onSuccess:function(z){return I(u+1),!0},children:(0,n.jsx)(de.Z,{})})})]},v)}}},dataSource:e==null?void 0:e.info.RepoTags})}),e&&(0,n.jsx)(R.Z,{title:(0,n.jsx)(M.Z,{}),subTitle:l.format("quickDetail"),ghost:!0,children:(0,n.jsxs)(o.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:[(0,n.jsx)(o.Z.Item,{label:"ID",children:(0,n.jsx)(Q.Z.Text,{editable:{tooltip:l.format("quickDetailManageEditNameTip"),onChange:function(){var r=w()(h()().mark(function a(v){var d;return h()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,J.Fj)({tag:e==null?void 0:e.info.RepoTags[0],title:v});case 2:d=c.sent,I(u+1),m.success(D.FD.format("finish"));case 5:case"end":return c.stop()}},a)}));function i(a){return r.apply(this,arguments)}return i}()},children:e==null?void 0:e.info.Id.substring(7,19)})}),(0,n.jsx)(o.Z.Item,{label:"Parent",children:e==null?void 0:e.info.Parent}),(0,n.jsx)(o.Z.Item,{label:"Size",children:(0,W.FI)((C=e==null?void 0:e.info.Size)!==null&&C!==void 0?C:0)}),(0,n.jsx)(o.Z.Item,{label:"Created",children:e==null?void 0:e.info.Created}),(0,n.jsxs)(o.Z.Item,{label:"Build",children:["Docker ",e==null?void 0:e.info.DockerVersion," ",e==null?void 0:e.info.Os," ",e==null?void 0:e.info.Architecture]}),(0,n.jsx)(o.Z.Item,{label:"Labels",children:(0,n.jsx)(o.Z,{column:1,bordered:!0,children:(e==null?void 0:e.info.Config.Labels)&&Object.keys(e==null?void 0:e.info.Config.Labels).map(function(r){return(0,n.jsx)(o.Z.Item,{label:r,children:e==null?void 0:e.info.Config.Labels[r]},r)})})})]})}),(0,n.jsx)(R.Z,{title:(0,n.jsx)(M.Z,{}),subTitle:l.format("quickDockerfileTitle"),ghost:!0,children:(0,n.jsxs)(o.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:[(0,n.jsx)(o.Z.Item,{label:"CMD",children:e==null?void 0:e.info.Config.Cmd}),(0,n.jsx)(o.Z.Item,{label:"ENTRYPOINT",children:e==null?void 0:e.info.Config.Entrypoint}),(0,n.jsx)(o.Z.Item,{label:"EXPOSE",children:(e==null?void 0:e.info.Config.ExposedPorts)&&Object.keys(e==null?void 0:e.info.Config.ExposedPorts).map(function(r){return(0,n.jsx)(N.Z,{color:"gray",children:r},r)})}),(0,n.jsx)(o.Z.Item,{label:"VOLUME",children:(e==null?void 0:e.info.Config.Volumes)&&Object.keys(e==null?void 0:e.info.Config.Volumes).map(function(r){return(0,n.jsx)(N.Z,{color:"gray",children:r},r)})}),(0,n.jsx)(o.Z.Item,{label:"Env",children:(0,n.jsx)(o.Z,{column:1,bordered:!0,children:(e==null?void 0:e.info.Config.Env)&&(e==null?void 0:e.info.Config.Env.map(function(r,i){var a=r.split("=");return(0,n.jsx)(o.Z.Item,{label:a[0],children:a[1]},i)}))})})]})}),(e==null?void 0:e.layer)&&(0,n.jsx)(R.Z,{title:(0,n.jsx)(M.Z,{}),subTitle:"Layers",ghost:!0,children:(0,n.jsx)(me.Z,{rowKey:"CreatedBy",dataSource:e.layer.reverse(),columns:[{title:"Size",key:"size",render:function(i,a,v){return(0,W.FI)(a.Size)}},{title:"Layer",dataIndex:"CreatedBy",key:"CreatedBy",render:function(i,a,v){return(0,n.jsx)(Re.Z,{content:a.CreatedBy})}}]})})]})]})}),Fe=Oe}}]);
