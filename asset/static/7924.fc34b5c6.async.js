!(function(){var x=Object.defineProperty,j=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var A=(T,b,h)=>b in T?x(T,b,{enumerable:!0,configurable:!0,writable:!0,value:h}):T[b]=h,W=(T,b)=>{for(var h in b||(b={}))K.call(b,h)&&A(T,h,b[h]);if(R)for(var h of R(b))k.call(b,h)&&A(T,h,b[h]);return T},B=(T,b)=>j(T,U(b));(self.webpackChunk=self.webpackChunk||[]).push([[7924],{74344:function(T,b,h){"use strict";var y=h(5574),p=h.n(y),O=h(37476),f=h(38345),m=h(82346),u=h(67294),D=h(35887),E=h(3616),e=h(36146),t=h(85893),r=(0,u.forwardRef)(function(i,s){(0,u.useImperativeHandle)(s,function(){return{start:function(){for(var l=arguments.length,o=new Array(l),S=0;S<l;S++)o[S]=arguments[S];L(o.join(":")),_(!0)},reset:function(){var l;(l=v.current)===null||l===void 0||l.clear(),_(!1)},show:function(l){_(!0),setTimeout(function(){var o,S;(o=v.current)===null||o===void 0||o.clear(),(S=v.current)===null||S===void 0||S.write(l)},1e3)}}});var n=(0,u.useState)(!1),a=p()(n,2),d=a[0],_=a[1],w=(0,u.useState)(""),C=p()(w,2),M=C[0],L=C[1],P=(0,m.useModel)("subscriber"),v=(0,u.useRef)(),g=new e.Uo("image");return P.addDataHandler("image:"+M,function(c){var l;(l=v.current)===null||l===void 0||l.write(c.data)}),(0,t.jsx)(O.Y,{modalProps:{width:E.ob,destroyOnClose:!0},title:g.format("createLogTitle"),submitter:!1,onOpenChange:function(l){if(_(l),l){var o,S;(o=v.current)===null||o===void 0||o.clear(),(S=v.current)===null||S===void 0||S.fit()}else P.progress.close("image:"+M)},open:d,children:(0,t.jsx)(f.Z,{ghost:!0,children:(0,t.jsx)(D.Z,{style:{fontSize:12},ref:v})})})});b.Z=r},35887:function(T,b,h){"use strict";var y=h(5574),p=h.n(y),O=h(12323),f=h(78267),m=h.n(f),u=h(75458),D=h.n(u),E=h(67294),e=h(4244),t=h.n(e),r=h(24078),i=h(85893),s,n,a,d=(0,E.forwardRef)(function(_,w){var C,M=(0,E.useState)(!0),L=p()(M,2),P=L[0],v=L[1];return(0,E.useEffect)(function(){return s=new e.Terminal(O.X),n=new u.SearchAddon,a=new f.FitAddon,window.addEventListener("resize",function(){_.showInModal||a.fit()}),_.style&&_.style.fontSize&&(s.options.fontSize=_.style.fontSize),s.loadAddon(a),s.loadAddon(n),s.open(document.getElementById(_.id?_.id:"terminal-container")),_.showInModal||a.fit(),function(){s.reset(),v(!0)}},[]),(0,E.useImperativeHandle)(w,function(){return{write:function(c){P&&(a.fit(),v(!1)),s.write(c)},clear:function(){s.clear()},getTerminal:function(){return s},findNext:function(c){n.findNext(c)},findPrev:function(c){n.findPrevious(c)},fit:function(){a.fit()},onData:function(c){return s.onData(c)}}}),(0,i.jsx)("div",{id:_.id?_.id:"terminal-container",style:{width:_.width?_.width:"100%",height:_.height?_.height:"500px",marginTop:(C=_.style)===null||C===void 0?void 0:C.marginTop}})});b.Z=d},12323:function(T,b,h){"use strict";h.d(b,{X:function(){return y},n:function(){return p}});var y={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},p=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},18148:function(T,b,h){"use strict";h.d(b,{$q:function(){return i},Fj:function(){return M},KG:function(){return u},KX:function(){return P},T8:function(){return t},Xn:function(){return E},ao:function(){return n},c5:function(){return w},c7:function(){return d}});var y=h(15009),p=h.n(y),O=h(99289),f=h.n(O),m=h(82346);function u(g){return D.apply(this,arguments)}function D(){return D=f()(p()().mark(function g(c){return p()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,m.request)("/api/app/image/get-list",{method:"POST",data:c}));case 1:case"end":return o.stop()}},g)})),D.apply(this,arguments)}function E(g){return e.apply(this,arguments)}function e(){return e=f()(p()().mark(function g(c){return p()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,m.request)("/api/app/image/get-list-build",{method:"POST",data:c}));case 1:case"end":return o.stop()}},g)})),e.apply(this,arguments)}function t(g){return r.apply(this,arguments)}function r(){return r=f()(p()().mark(function g(c){return p()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,m.request)("/api/app/image/get-build-task",{method:"POST",data:c});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},g)})),r.apply(this,arguments)}function i(g){return s.apply(this,arguments)}function s(){return s=f()(p()().mark(function g(c){return p()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,m.request)("/api/app/image/delete-build-task",{method:"POST",data:c});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},g)})),s.apply(this,arguments)}function n(g){return a.apply(this,arguments)}function a(){return a=f()(p()().mark(function g(c){return p()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,m.request)("/api/app/image/image-delete",{method:"POST",data:c});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},g)})),a.apply(this,arguments)}function d(){return _.apply(this,arguments)}function _(){return _=f()(p()().mark(function g(){return p()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,m.request)("/api/app/image/image-prune",{method:"POST"});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},g)})),_.apply(this,arguments)}function w(){return C.apply(this,arguments)}function C(){return C=f()(p()().mark(function g(){return p()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,m.request)("/api/app/image/build-prune",{method:"POST"});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},g)})),C.apply(this,arguments)}function M(g){return L.apply(this,arguments)}function L(){return L=f()(p()().mark(function g(c){return p()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,m.request)("/api/app/image/update-title",{method:"POST",data:c});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},g)})),L.apply(this,arguments)}function P(g){return v.apply(this,arguments)}function v(){return v=f()(p()().mark(function g(c){return p()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,m.request)("/api/app/image/tag-sync",{method:"POST",data:c}));case 1:case"end":return o.stop()}},g)})),v.apply(this,arguments)}},75458:function(T){(function(b,h){T.exports=h()})(self,()=>(()=>{"use strict";var b={345:(O,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.runAndSubscribe=f.forwardEvent=f.EventEmitter=void 0,f.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=m=>(this._listeners.push(m),{dispose:()=>{if(!this._disposed){for(let u=0;u<this._listeners.length;u++)if(this._listeners[u]===m)return void this._listeners.splice(u,1)}}})),this._event}fire(m,u){const D=[];for(let E=0;E<this._listeners.length;E++)D.push(this._listeners[E]);for(let E=0;E<D.length;E++)D[E].call(void 0,m,u)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},f.forwardEvent=function(m,u){return m(D=>u.fire(D))},f.runAndSubscribe=function(m,u){return u(void 0),m(D=>u(D))}},859:(O,f)=>{function m(u){for(const D of u)D.dispose();u.length=0}Object.defineProperty(f,"__esModule",{value:!0}),f.getDisposeArrayDisposable=f.disposeArray=f.toDisposable=f.MutableDisposable=f.Disposable=void 0,f.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const u of this._disposables)u.dispose();this._disposables.length=0}register(u){return this._disposables.push(u),u}unregister(u){const D=this._disposables.indexOf(u);D!==-1&&this._disposables.splice(D,1)}},f.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(u){var D;this._isDisposed||u===this._value||((D=this._value)==null||D.dispose(),this._value=u)}clear(){this.value=void 0}dispose(){var u;this._isDisposed=!0,(u=this._value)==null||u.dispose(),this._value=void 0}},f.toDisposable=function(u){return{dispose:u}},f.disposeArray=m,f.getDisposeArrayDisposable=function(u){return{dispose:()=>m(u)}}}},h={};function y(O){var f=h[O];if(f!==void 0)return f.exports;var m=h[O]={exports:{}};return b[O](m,m.exports,y),m.exports}var p={};return(()=>{var O=p;Object.defineProperty(O,"__esModule",{value:!0}),O.SearchAddon=void 0;const f=y(345),m=y(859),u=" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?";class D extends m.Disposable{constructor(e){var t;super(),this._highlightedLines=new Set,this._highlightDecorations=[],this._selectedDecoration=this.register(new m.MutableDisposable),this._linesCacheTimeoutId=0,this._linesCacheDisposables=new m.MutableDisposable,this._onDidChangeResults=this.register(new f.EventEmitter),this.onDidChangeResults=this._onDidChangeResults.event,this._highlightLimit=(t=e==null?void 0:e.highlightLimit)!=null?t:1e3}activate(e){this._terminal=e,this.register(this._terminal.onWriteParsed(()=>this._updateMatches())),this.register(this._terminal.onResize(()=>this._updateMatches())),this.register((0,m.toDisposable)(()=>this.clearDecorations()))}_updateMatches(){var e;this._highlightTimeout&&window.clearTimeout(this._highlightTimeout),this._cachedSearchTerm&&((e=this._lastSearchOptions)!=null&&e.decorations)&&(this._highlightTimeout=setTimeout(()=>{const t=this._cachedSearchTerm;this._cachedSearchTerm=void 0,this.findPrevious(t,B(W({},this._lastSearchOptions),{incremental:!0,noScroll:!0}))},200))}clearDecorations(e){this._selectedDecoration.clear(),(0,m.disposeArray)(this._highlightDecorations),this._highlightDecorations=[],this._highlightedLines.clear(),e||(this._cachedSearchTerm=void 0)}clearActiveDecoration(){this._selectedDecoration.clear()}findNext(e,t){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");const r=!this._lastSearchOptions||this._didOptionsChange(this._lastSearchOptions,t);this._lastSearchOptions=t,t!=null&&t.decorations&&(this._cachedSearchTerm===void 0||e!==this._cachedSearchTerm||r)&&this._highlightAllMatches(e,t);const i=this._findNextAndSelect(e,t);return this._fireResults(t),this._cachedSearchTerm=e,i}_highlightAllMatches(e,t){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!e||e.length===0)return void this.clearDecorations();t=t||{},this.clearDecorations(!0);const r=[];let i,s=this._find(e,0,0,t);for(;s&&((i==null?void 0:i.row)!==s.row||(i==null?void 0:i.col)!==s.col)&&!(r.length>=this._highlightLimit);)i=s,r.push(i),s=this._find(e,i.col+i.term.length>=this._terminal.cols?i.row+1:i.row,i.col+i.term.length>=this._terminal.cols?0:i.col+1,t);for(const n of r){const a=this._createResultDecoration(n,t.decorations);a&&(this._highlightedLines.add(a.marker.line),this._highlightDecorations.push({decoration:a,match:n,dispose(){a.dispose()}}))}}_find(e,t,r,i){var a;if(!this._terminal||!e||e.length===0)return(a=this._terminal)==null||a.clearSelection(),void this.clearDecorations();if(r>this._terminal.cols)throw new Error(`Invalid col: ${r} to search in terminal of ${this._terminal.cols} cols`);let s;this._initLinesCache();const n={startRow:t,startCol:r};if(s=this._findInLine(e,n,i),!s)for(let d=t+1;d<this._terminal.buffer.active.baseY+this._terminal.rows&&(n.startRow=d,n.startCol=0,s=this._findInLine(e,n,i),!s);d++);return s}_findNextAndSelect(e,t){var d;if(!this._terminal||!e||e.length===0)return(d=this._terminal)==null||d.clearSelection(),this.clearDecorations(),!1;const r=this._terminal.getSelectionPosition();this._terminal.clearSelection();let i=0,s=0;r&&(this._cachedSearchTerm===e?(i=r.end.x,s=r.end.y):(i=r.start.x,s=r.start.y)),this._initLinesCache();const n={startRow:s,startCol:i};let a=this._findInLine(e,n,t);if(!a)for(let _=s+1;_<this._terminal.buffer.active.baseY+this._terminal.rows&&(n.startRow=_,n.startCol=0,a=this._findInLine(e,n,t),!a);_++);if(!a&&s!==0)for(let _=0;_<s&&(n.startRow=_,n.startCol=0,a=this._findInLine(e,n,t),!a);_++);return!a&&r&&(n.startRow=r.start.y,n.startCol=0,a=this._findInLine(e,n,t)),this._selectResult(a,t==null?void 0:t.decorations,t==null?void 0:t.noScroll)}findPrevious(e,t){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");const r=!this._lastSearchOptions||this._didOptionsChange(this._lastSearchOptions,t);this._lastSearchOptions=t,t!=null&&t.decorations&&(this._cachedSearchTerm===void 0||e!==this._cachedSearchTerm||r)&&this._highlightAllMatches(e,t);const i=this._findPreviousAndSelect(e,t);return this._fireResults(t),this._cachedSearchTerm=e,i}_didOptionsChange(e,t){return!!t&&(e.caseSensitive!==t.caseSensitive||e.regex!==t.regex||e.wholeWord!==t.wholeWord)}_fireResults(e){if(e!=null&&e.decorations){let t=-1;if(this._selectedDecoration.value){const r=this._selectedDecoration.value.match;for(let i=0;i<this._highlightDecorations.length;i++){const s=this._highlightDecorations[i].match;if(s.row===r.row&&s.col===r.col&&s.size===r.size){t=i;break}}}this._onDidChangeResults.fire({resultIndex:t,resultCount:this._highlightDecorations.length})}}_findPreviousAndSelect(e,t){var _;if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!this._terminal||!e||e.length===0)return(_=this._terminal)==null||_.clearSelection(),this.clearDecorations(),!1;const r=this._terminal.getSelectionPosition();this._terminal.clearSelection();let i=this._terminal.buffer.active.baseY+this._terminal.rows-1,s=this._terminal.cols;const n=!0;this._initLinesCache();const a={startRow:i,startCol:s};let d;if(r&&(a.startRow=i=r.start.y,a.startCol=s=r.start.x,this._cachedSearchTerm!==e&&(d=this._findInLine(e,a,t,!1),d||(a.startRow=i=r.end.y,a.startCol=s=r.end.x))),d||(d=this._findInLine(e,a,t,n)),!d){a.startCol=Math.max(a.startCol,this._terminal.cols);for(let w=i-1;w>=0&&(a.startRow=w,d=this._findInLine(e,a,t,n),!d);w--);}if(!d&&i!==this._terminal.buffer.active.baseY+this._terminal.rows-1)for(let w=this._terminal.buffer.active.baseY+this._terminal.rows-1;w>=i&&(a.startRow=w,d=this._findInLine(e,a,t,n),!d);w--);return this._selectResult(d,t==null?void 0:t.decorations,t==null?void 0:t.noScroll)}_initLinesCache(){const e=this._terminal;this._linesCache||(this._linesCache=new Array(e.buffer.active.length),this._linesCacheDisposables.value=(0,m.getDisposeArrayDisposable)([e.onLineFeed(()=>this._destroyLinesCache()),e.onCursorMove(()=>this._destroyLinesCache()),e.onResize(()=>this._destroyLinesCache())])),window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=window.setTimeout(()=>this._destroyLinesCache(),15e3)}_destroyLinesCache(){this._linesCache=void 0,this._linesCacheDisposables.clear(),this._linesCacheTimeoutId&&(window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=0)}_isWholeWord(e,t,r){return(e===0||u.includes(t[e-1]))&&(e+r.length===t.length||u.includes(t[e+r.length]))}_findInLine(e,t,r={},i=!1){var g;const s=this._terminal,n=t.startRow,a=t.startCol,d=s.buffer.active.getLine(n);if(d!=null&&d.isWrapped)return i?void(t.startCol+=s.cols):(t.startRow--,t.startCol+=s.cols,this._findInLine(e,t,r));let _=(g=this._linesCache)==null?void 0:g[n];_||(_=this._translateBufferLineToStringWithWrap(n,!0),this._linesCache&&(this._linesCache[n]=_));const[w,C]=_,M=this._bufferColsToStringOffset(n,a),L=r.caseSensitive?e:e.toLowerCase(),P=r.caseSensitive?w:w.toLowerCase();let v=-1;if(r.regex){const c=RegExp(L,"g");let l;if(i)for(;l=c.exec(P.slice(0,M));)v=c.lastIndex-l[0].length,e=l[0],c.lastIndex-=e.length-1;else l=c.exec(P.slice(M)),l&&l[0].length>0&&(v=M+(c.lastIndex-l[0].length),e=l[0])}else i?M-L.length>=0&&(v=P.lastIndexOf(L,M-L.length)):v=P.indexOf(L,M);if(v>=0){if(r.wholeWord&&!this._isWholeWord(v,P,e))return;let c=0;for(;c<C.length-1&&v>=C[c+1];)c++;let l=c;for(;l<C.length-1&&v+e.length>=C[l+1];)l++;const o=v-C[c],S=v+e.length-C[l],I=this._stringLengthToBufferSize(n+c,o);return{term:e,col:I,row:n+c,size:this._stringLengthToBufferSize(n+l,S)-I+s.cols*(l-c)}}}_stringLengthToBufferSize(e,t){const r=this._terminal.buffer.active.getLine(e);if(!r)return 0;for(let i=0;i<t;i++){const s=r.getCell(i);if(!s)break;const n=s.getChars();n.length>1&&(t-=n.length-1);const a=r.getCell(i+1);a&&a.getWidth()===0&&t++}return t}_bufferColsToStringOffset(e,t){const r=this._terminal;let i=e,s=0,n=r.buffer.active.getLine(i);for(;t>0&&n;){for(let a=0;a<t&&a<r.cols;a++){const d=n.getCell(a);if(!d)break;d.getWidth()&&(s+=d.getCode()===0?1:d.getChars().length)}if(i++,n=r.buffer.active.getLine(i),n&&!n.isWrapped)break;t-=r.cols}return s}_translateBufferLineToStringWithWrap(e,t){var a;const r=this._terminal,i=[],s=[0];let n=r.buffer.active.getLine(e);for(;n;){const d=r.buffer.active.getLine(e+1),_=!!d&&d.isWrapped;let w=n.translateToString(!_&&t);if(_&&d){const C=n.getCell(n.length-1);C&&C.getCode()===0&&C.getWidth()===1&&((a=d.getCell(0))==null?void 0:a.getWidth())===2&&(w=w.slice(0,-1))}if(i.push(w),!_)break;s.push(s[s.length-1]+w.length),e++,n=d}return[i.join(""),s]}_selectResult(e,t,r){const i=this._terminal;if(this._selectedDecoration.clear(),!e)return i.clearSelection(),!1;if(i.select(e.col,e.row,e.size),t){const s=i.registerMarker(-i.buffer.active.baseY-i.buffer.active.cursorY+e.row);if(s){const n=i.registerDecoration({marker:s,x:e.col,width:e.size,backgroundColor:t.activeMatchBackground,layer:"top",overviewRulerOptions:{color:t.activeMatchColorOverviewRuler}});if(n){const a=[];a.push(s),a.push(n.onRender(d=>this._applyStyles(d,t.activeMatchBorder,!0))),a.push(n.onDispose(()=>(0,m.disposeArray)(a))),this._selectedDecoration.value={decoration:n,match:e,dispose(){n.dispose()}}}}}if(!r&&(e.row>=i.buffer.active.viewportY+i.rows||e.row<i.buffer.active.viewportY)){let s=e.row-i.buffer.active.viewportY;s-=Math.floor(i.rows/2),i.scrollLines(s)}return!0}_applyStyles(e,t,r){e.classList.contains("xterm-find-result-decoration")||(e.classList.add("xterm-find-result-decoration"),t&&(e.style.outline=`1px solid ${t}`)),r&&e.classList.add("xterm-find-active-result-decoration")}_createResultDecoration(e,t){const r=this._terminal,i=r.registerMarker(-r.buffer.active.baseY-r.buffer.active.cursorY+e.row);if(!i)return;const s=r.registerDecoration({marker:i,x:e.col,width:e.size,backgroundColor:t.matchBackground,overviewRulerOptions:this._highlightedLines.has(i.line)?void 0:{color:t.matchOverviewRuler,position:"center"}});if(s){const n=[];n.push(i),n.push(s.onRender(a=>this._applyStyles(a,t.matchBorder,!1))),n.push(s.onDispose(()=>(0,m.disposeArray)(n)))}return s}}O.SearchAddon=D})(),p})())}}]);
}());