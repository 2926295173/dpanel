"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5897],{80821:function(x,f,n){n.d(f,{Z:function(){return D}});var g=n(5574),u=n.n(g),s=n(24963),l=n(86738),E=n(14726),v=n(83062),_=n(67294),c=n(85893);function D(t){var R=(0,_.useState)(!1),y=u()(R,2),P=y[0],S=y[1],d=(0,_.useContext)(s.Z),O=d.lang,i=d.notice,r=d.message,a=function(){S(!0),t.action().then(function(m){if(S(!1),typeof t.onSuccess=="function"&&t.onSuccess(m),t.messageSuccess){var o="";typeof t.messageSuccess=="function"?o=t.messageSuccess(m):o=t.messageSuccess,o.indexOf(".")>-1&&(o=O(o)),t.asynced?r.info(o):r.success(o)}}).catch(function(m){S(!1),typeof t.onError=="function"&&t.onError(m)})};return t.confirm?(0,c.jsx)(l.Z,{style:{width:500},title:O("notification.title.tip"),description:t.confirm,onConfirm:a,okText:"Yes",cancelText:"No",children:(0,c.jsx)(E.ZP,{disabled:t.disabled,icon:t.icon,loading:P,danger:t.danger,type:t.type,children:t.children})}):(0,c.jsx)(v.Z,{title:t.tips,children:(0,c.jsx)(E.ZP,{disabled:t.disabled,icon:t.icon,loading:P,onClick:a,danger:t.danger,type:t.type,children:t.children})})}},24963:function(x,f,n){var g=n(67294),u=(0,g.createContext)({});f.Z=u},53889:function(x,f,n){n.r(f),n.d(f,{default:function(){return O}});var g=n(15009),u=n.n(g),s=n(99289),l=n.n(s),E=n(80821),v=n(54006);function _(i){return c.apply(this,arguments)}function c(){return c=l()(u()().mark(function i(r){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,v.request)("/api/common/event/get-list",{method:"POST",data:r}));case 1:case"end":return e.stop()}},i)})),c.apply(this,arguments)}function D(i){return t.apply(this,arguments)}function t(){return t=l()(u()().mark(function i(r){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,v.request)("/api/common/event/prune",{method:"POST",data:r}));case 1:case"end":return e.stop()}},i)})),t.apply(this,arguments)}var R=n(67255),y=n(90078),P=n(10641),S=n(67294),d=n(85893);function O(){var i=(0,S.useRef)();return(0,d.jsx)(y._z,{header:{extra:[(0,d.jsx)(E.Z,{action:function(){return D()},onSuccess:function(){var a,e;return!((a=i.current)===null||a===void 0)&&a.reloadAndRest&&((e=i.current)===null||e===void 0||e.reloadAndRest()),!0},onError:function(){var a,e;return!((a=i.current)===null||a===void 0)&&a.reset&&((e=i.current)===null||e===void 0||e.reset()),!0},messageSuccess:"\u6E05\u9664\u6210\u529F",confirm:"\u662F\u5426\u8981\u6E05\u9664\u6389\u6240\u6709\u4E8B\u4EF6\u4FE1\u606F",danger:!0,type:"primary",children:"\u6E05\u9664\u4E8B\u4EF6\u901A\u77E5"})]},children:(0,d.jsx)(P.Z,{scroll:{x:"max-content"},columns:[{title:"\u7C7B\u578B",ellipsis:!0,dataIndex:"type",width:200},{title:"\u8BE6\u60C5",search:!1,render:function(a,e,m,o){return(0,d.jsxs)(d.Fragment,{children:[e.action," ",e.message]})}},{title:"\u65F6\u95F4",ellipsis:!0,search:!1,dataIndex:"createdAt",width:200,render:function(a,e,m,o,C){return new Date(e.createdAt).toLocaleString()}}],rowKey:"id",request:function(){var r=l()(u()().mark(function a(e,m,o){var C,T,M;return u()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,_({page:(C=e.current)!==null&&C!==void 0?C:1,pageSize:(T=e.pageSize)!==null&&T!==void 0?T:10,type:e.type});case 2:return M=h.sent,h.abrupt("return",{data:M.data.list,success:!0,total:M.data.total});case 4:case"end":return h.stop()}},a)}));return function(a,e,m){return r.apply(this,arguments)}}(),pagination:(0,R.O)(),actionRef:i})})}},67255:function(x,f,n){n.d(f,{O:function(){return g},j:function(){return u}});function g(){var s,l=parseInt((s=localStorage.getItem("dpanel-pagesize"))!==null&&s!==void 0?s:"0");return{showSizeChanger:!0,defaultPageSize:l!=null?l:20}}function u(s){var l="dpanel-table-column-".concat(s),E={};if(localStorage.getItem(l)){var v;E=JSON.parse((v=localStorage.getItem(l))!==null&&v!==void 0?v:"{}")}return{defaultValue:E,onChange:function(c){localStorage.setItem("dpanel-table-column-".concat(s),JSON.stringify(c))}}}}}]);
