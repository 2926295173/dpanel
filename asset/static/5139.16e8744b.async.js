"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5139],{78914:function(V,I,t){t.d(I,{Z:function(){return Ee}});var R=t(5574),d=t.n(R),h=t(15009),i=t.n(h),z=t(99289),m=t.n(z),H=t(80271),M=t(65913),D=t(3393),oe=t(95591),le=t(40666),se=t(1912),ue=t(77171),de=t(48689),J=t(1883),A=t(38345),ce=t(91708),fe=t(82346),ve=t(85265),Q=t(42075),me=t(96074),Y=t(28036),X=t(66309),k=t(25593),l=t(26412),ge=t(60940),s=t(67294),q=t(80821),te=t(5251),he=t(18148),ae=t(184),xe=t(97269),re=t(62370),je=t(65233),ie=t(2487),Ze=t(4393),_=t(3616),N=t(36146),n=t(85893),Ce=(0,s.forwardRef)(function(P,F){(0,s.useImperativeHandle)(F,function(){return{show:function(f){return m()(i()().mark(function K(){var $,y;return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return L(!0),($=g.current)===null||$===void 0||$.show(),a.prev=2,a.next=5,(0,D.cd)({imageName:f}).finally(function(){var o;(o=g.current)===null||o===void 0||o.destroy()});case 5:y=a.sent,T(y.data.list),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),L(!1);case 12:case"end":return a.stop()}},K,null,[[2,9]])}))()}}});var w=(0,s.useState)(),Z=d()(w,2),x=Z[0],T=Z[1],e=(0,s.useState)(""),O=d()(e,2),C=O[0],p=O[1],E=(0,s.useState)(!1),S=d()(E,2),B=S[0],L=S[1],g=(0,s.useRef)(),b=new N.Uo("image");return(0,n.jsx)(ae.a,{open:B,onOpenChange:function(f){L(f),!f&&T(void 0)},title:b.format("remoteTagTitle"),isKeyPressSubmit:!0,submitter:!1,drawerProps:{width:_.R_,extra:(0,n.jsx)(xe.A,{isKeyPressSubmit:!0,onFinish:function(f){p(f.search)},submitter:!1,children:(0,n.jsx)(Q.Z.Compact,{children:(0,n.jsx)(re.Z,{style:{margin:0},name:"search",children:(0,n.jsx)(je.Z,{allowClear:!0,addonBefore:b.format("remoteSearch"),placeholder:b.format("remoteSearchEmpty"),onClear:function(){p("")}})})})})},children:(0,n.jsx)(M.Z,{ref:g,children:(0,n.jsx)(ie.Z,{rowKey:function(f){return"".concat(f)},pagination:{pageSize:50},grid:{gutter:10,column:2},dataSource:x&&x.filter(function(j){return!C||j.toLocaleLowerCase().indexOf(C.toLocaleLowerCase())!==-1}),loading:!x||(x==null?void 0:x.length)<=0,renderItem:function(f,K){return(0,n.jsx)(ie.Z.Item,{children:(0,n.jsx)(Ze.Z,{style:{height:"80px"},children:(0,n.jsx)(k.Z.Text,{copyable:!0,children:f})})},K)}})})},"form")}),pe=Ce,Se=t(64789),ye=t(5966),Te=t(83062),Ie=t(2205);function Re(P){var F=(0,s.useRef)(),w=(0,s.useState)(!1),Z=d()(w,2),x=Z[0],T=Z[1],e=new N.Uo("image");return(0,n.jsxs)(ae.a,{drawerProps:{width:_.R_},open:x,title:e.format("tagTitle"),onOpenChange:function(C){T(C)},formRef:F,onFinish:function(){var O=m()(i()().mark(function C(p){var E,S,B;return i()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,D._U)({md5:(E=P.imageInfo.info.Id)!==null&&E!==void 0?E:"",tag:(p.imageRespo?p.imageRespo.serverAddress+"/":"")+p.imageTag});case 2:B=g.sent,T(!1),(S=F.current)===null||S===void 0||S.resetFields(),P.onFinish&&P.onFinish();case 6:case"end":return g.stop()}},C)}));return function(C){return O.apply(this,arguments)}}(),trigger:(0,n.jsx)(Te.Z,{title:e.format("tagTitle"),children:(0,n.jsx)(Y.ZP,{type:"link",icon:(0,n.jsx)(Se.Z,{})})}),children:[(0,n.jsx)(re.Z,{label:e.format("tagRegistry"),name:"imageRespo",tooltip:e.format("tagRegistryTip"),children:(0,n.jsx)(Ie.Z,{})}),(0,n.jsx)(ye.Z,{fieldProps:{min:2,max:255},rules:[{required:!0}],required:!0,placeholder:e.format("tagImageTagEmpty"),label:e.format("tagImageTag"),name:"imageTag",tooltip:e.format("tagImageTagTip")})]})}var Pe=t(24963),ee=t(1699),we=t(78451),Oe=(0,s.forwardRef)(function(P,F){var w;(0,s.useImperativeHandle)(F,function(){return{show:function(o){return m()(i()().mark(function r(){return i()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return S(!0),u.next=3,U(o);case 3:case"end":return u.stop()}},r)}))()}}});var Z=(0,s.useRef)(),x=(0,s.useState)(),T=d()(x,2),e=T[0],O=T[1],C=(0,s.useState)(!1),p=d()(C,2),E=p[0],S=p[1],B=(0,s.useContext)(Pe.Z),L=B.message,g=(0,s.useState)(0),b=d()(g,2),j=b[0],f=b[1],K=(0,fe.useAccess)(),$=(0,s.useRef)(),y=new N.Uo("components.image"),U=function(){var a=m()(i()().mark(function o(r){var v,u;return i()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return(v=Z.current)===null||v===void 0||v.show(),c.next=3,(0,D.YU)({md5:r,showLayer:!0}).finally(function(){var G;(G=Z.current)===null||G===void 0||G.destroy()});case 3:u=c.sent,O(u.data);case 5:case"end":return c.stop()}},o)}));return function(r){return a.apply(this,arguments)}}();return(0,s.useEffect)(function(){e&&U(e==null?void 0:e.info.Id)},[j]),(0,n.jsx)(ve.Z,{title:y.format("quickTitle"),open:E,onClose:function(){S(!1),P.onClose&&P.onClose()},width:_.R_,extra:(0,n.jsxs)(Q.Z,{split:(0,n.jsx)(me.Z,{type:"vertical"}),children:[(e==null?void 0:e.info)&&(0,n.jsx)(ee.u,{access:"canSeeEnableCe",showProTips:!0,children:function(o){var r=o.canSeeEnableCe;return(0,n.jsx)(H.Z,{trigger:(0,n.jsx)(Y.ZP,{type:"link",disabled:r,icon:(0,n.jsx)(oe.Z,{})}),imageId:e.info.Id})}}),(e==null?void 0:e.info)&&(0,n.jsx)(Re,{imageInfo:e,onFinish:function(){U(e.info.Id)}})]}),children:(0,n.jsxs)(M.Z,{ref:Z,children:[!K.canSeeEnableCe&&(0,n.jsx)(pe,{ref:$}),(0,n.jsxs)(A.Z,{direction:"column",ghost:!0,gutter:[0,10],children:[(0,n.jsx)(A.Z,{title:(0,n.jsx)(le.Z,{}),subTitle:y.format("quickTagTitle"),ghost:!0,children:(0,n.jsx)(ce.Rs,{grid:{gutter:40,column:2},headerTitle:!1,metas:{content:{render:function(o,r,v){return(0,n.jsx)(X.Z,{color:"blue",children:(0,n.jsx)(k.Z.Text,{copyable:!0,children:r})},v)}},title:{render:function(o,r,v){return(0,n.jsxs)(Q.Z,{children:[(0,n.jsxs)(q.Z,{action:function(){return(0,D.Gb)({tag:r,type:"push"})},children:[(0,n.jsx)(se.Z,{})," Push"]}),(0,n.jsxs)(q.Z,{action:function(){return(0,D.Gb)({tag:r,type:"pull"})},children:[(0,n.jsx)(ue.Z,{})," Pull"]}),(0,n.jsx)(ee.u,{access:"canSeeEnableCe",showProTips:!0,showProTipsOffset:[-15,9],children:function(W){var c=W.canSeeEnableCe;return(0,n.jsx)(Y.ZP,{disabled:c,onClick:function(){var ne;(ne=$.current)===null||ne===void 0||ne.show(r)},children:y.format("quickRemoteTagButton")})}}),(0,n.jsx)(ee.u,{access:"canSeeImageListManage",children:(0,n.jsx)(q.Z,{action:function(){return(0,D.Pn)({tag:r})},danger:!0,onSuccess:function(W){return f(j+1),!0},confirm:"notification.confirm.title",children:(0,n.jsx)(de.Z,{})})})]},v)}}},dataSource:e==null?void 0:e.info.RepoTags})}),e&&(0,n.jsx)(A.Z,{title:(0,n.jsx)(J.Z,{}),subTitle:y.format("quickDetail"),ghost:!0,children:(0,n.jsxs)(l.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,n.jsx)(l.Z.Item,{label:"ID",children:(0,n.jsx)(k.Z.Text,{editable:{tooltip:y.format("quickDetailManageEditNameTip"),onChange:function(){var a=m()(i()().mark(function r(v){var u;return i()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,he.Fj)({tag:e==null?void 0:e.info.RepoTags[0],title:v});case 2:u=c.sent,U(e.info.Id),L.success(N.FD.format("finish"));case 5:case"end":return c.stop()}},r)}));function o(r){return a.apply(this,arguments)}return o}()},children:e==null?void 0:e.info.Id})}),(0,n.jsx)(l.Z.Item,{label:"Parent",children:e==null?void 0:e.info.Parent}),(0,n.jsx)(l.Z.Item,{label:"Size",children:(0,te.FI)((w=e==null?void 0:e.info.Size)!==null&&w!==void 0?w:0)}),(0,n.jsx)(l.Z.Item,{label:"Created",children:e==null?void 0:e.info.Created}),(0,n.jsxs)(l.Z.Item,{label:"Build",children:["Docker ",e==null?void 0:e.info.DockerVersion," ",e==null?void 0:e.info.Os," ",e==null?void 0:e.info.Architecture]}),(0,n.jsx)(l.Z.Item,{label:"Labels",children:(0,n.jsx)(l.Z,{column:1,bordered:!0,children:(e==null?void 0:e.info.Config.Labels)&&Object.keys(e==null?void 0:e.info.Config.Labels).map(function(a){return(0,n.jsx)(l.Z.Item,{label:a,children:e==null?void 0:e.info.Config.Labels[a]},a)})})})]})}),(0,n.jsx)(A.Z,{title:(0,n.jsx)(J.Z,{}),subTitle:y.format("quickDockerfileTitle"),ghost:!0,children:(0,n.jsxs)(l.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,n.jsx)(l.Z.Item,{label:"CMD",children:e==null?void 0:e.info.Config.Cmd}),(0,n.jsx)(l.Z.Item,{label:"ENTRYPOINT",children:e==null?void 0:e.info.Config.Entrypoint}),(0,n.jsx)(l.Z.Item,{label:"EXPOSE",children:(e==null?void 0:e.info.Config.ExposedPorts)&&Object.keys(e==null?void 0:e.info.Config.ExposedPorts).map(function(a){return(0,n.jsx)(X.Z,{color:"gray",children:a},a)})}),(0,n.jsx)(l.Z.Item,{label:"VOLUME",children:(e==null?void 0:e.info.Config.Volumes)&&Object.keys(e==null?void 0:e.info.Config.Volumes).map(function(a){return(0,n.jsx)(X.Z,{color:"gray",children:a},a)})}),(0,n.jsx)(l.Z.Item,{label:"Env",children:(0,n.jsx)(l.Z,{column:1,bordered:!0,children:(e==null?void 0:e.info.Config.Env)&&(e==null?void 0:e.info.Config.Env.map(function(a,o){var r=a.split("=");return(0,n.jsx)(l.Z.Item,{label:r[0],children:r[1]},o)}))})})]})}),(e==null?void 0:e.layer)&&(0,n.jsx)(A.Z,{title:(0,n.jsx)(J.Z,{}),subTitle:"Layers",ghost:!0,children:(0,n.jsx)(ge.Z,{rowKey:"CreatedBy",dataSource:e.layer.reverse(),columns:[{title:"Size",key:"size",render:function(o,r,v){return(0,te.FI)(r.Size)}},{title:"Layer",dataIndex:"CreatedBy",key:"CreatedBy",render:function(o,r,v){return(0,n.jsx)(we.Z,{content:r.CreatedBy})}}]})})]})]})})}),Ee=Oe},3616:function(V,I,t){t.d(I,{Ed:function(){return i},FK:function(){return d},R_:function(){return R},ob:function(){return h}});var R=window.innerWidth<=1024?"90vw":"65vw",d="90vw",h="60vw",i="50vh"},24963:function(V,I,t){var R=t(67294),d=(0,R.createContext)({});I.Z=d},67255:function(V,I,t){t.d(I,{O:function(){return R},j:function(){return d}});function R(h){var i=localStorage.getItem("dpanel-pagesize");return i=="all"?!1:{defaultCurrent:h==null?void 0:h.page,showSizeChanger:!0,defaultPageSize:parseInt(i!=null?i:"20"),onChange:function(m,H){localStorage.setItem("dpanel-page-"+location.pathname.split("/").slice(-2).join("-"),"".concat(m))}}}function d(h){var i="dpanel-table-column-".concat(h),z={};if(localStorage.getItem(i)){var m;z=JSON.parse((m=localStorage.getItem(i))!==null&&m!==void 0?m:"{}")}return{defaultValue:z,onChange:function(M){localStorage.setItem("dpanel-table-column-".concat(h),JSON.stringify(M))}}}}}]);
