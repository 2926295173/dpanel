"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5695],{28307:function(K,R,e){var b=e(15009),n=e.n(b),B=e(99289),d=e.n(B),l=e(5574),C=e.n(l),g=e(38345),D=e(97269),t=e(62370),E=e(5966),_=e(64317),M=e(28036),f=e(85265),s=e(42075),m=e(67294),u=e(3393),r=e(97961),v=e(92754),i=e(82346),c=e(96042),h=e(85893),L=(0,m.forwardRef)(function(P,A){var F=(0,m.useState)(!1),o=C()(F,2),T=o[0],p=o[1],a=(0,m.useRef)(),x=(0,m.useRef)(),w=(0,m.useState)(!1),I=C()(w,2),U=I[0],W=I[1];return(0,m.useImperativeHandle)(A,function(){return{upgradeImage:function(O){var j;return p(!0),(j=a.current)===null||j===void 0||j.setFieldValue("imageUrl",O),(0,u.Gb)({tag:O,type:"pull"})},setImageName:function(O){var j;p(!0),(j=a.current)===null||j===void 0||j.setFieldValue("imageUrl",O)}}}),[(0,h.jsx)(M.ZP,{type:P.buttonType?P.buttonType:"default",onClick:function(){var O,j;P.onClick&&P.onClick(),p(!0),(O=a.current)===null||O===void 0||O.resetFields(),(j=x.current)===null||j===void 0||j.setStart("")},children:"\u62C9\u53D6\u955C\u50CF"},"remoteBtn"),(0,h.jsxs)(f.Z,{forceRender:!0,open:T,title:"\u62C9\u53D6\u8FDC\u7A0B\u955C\u50CF",width:800,onClose:function(){var O;p(!1),(O=x.current)===null||O===void 0||O.close()},footer:!1,children:[(0,h.jsx)(g.Z,{children:(0,h.jsxs)(s.Z,{direction:"vertical",size:"middle",children:[(0,h.jsxs)("div",{children:["1\u3001\u955C\u50CF\u540D\u79F0\u4E2D\u4E0D\u5305\u542B\u4ED3\u5E93\u5730\u5740\u65F6\uFF0C \u9ED8\u8BA4\u4ECE ",(0,h.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:"docker hub"})," \u4E2D\u4E0B\u8F7D\uFF0C \u4F60\u53EF\u4EE5",(0,h.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:"\u3010\u67E5\u627E\u3011"})," \u9700\u8981\u7684\u955C\u50CF"]}),(0,h.jsx)("div",{children:"2\u3001\u62C9\u53D6\u975E docker hub \u955C\u50CF\u65F6\uFF0C\u8BF7\u586B\u5199\u5B8C\u6574\u7684\u955C\u50CF\u5730\u5740\u3002"}),(0,h.jsxs)("div",{children:["3\u3001\u76EE\u6807\u4ED3\u5E93\u6709\u6743\u9650\u9A8C\u8BC1\u65F6\uFF0C\u8BF7",(0,h.jsx)(i.Link,{to:"/image/registry",children:"\u3010\u6DFB\u52A0\u3011"}),"\u8BE5\u4ED3\u5E93\uFF0C\u5E76\u914D\u7F6E\u7528\u6237\u540D\u548C\u5BC6\u7801\u6743\u9650"]}),(0,h.jsxs)("div",{children:["4\u3001\u65E0\u6CD5\u6B63\u5E38\u62C9\u53D6\u955C\u50CF\u65F6\u8BF7\u5728 ",(0,h.jsx)(i.Link,{to:"/image/registry",children:"\u3010\u4ED3\u5E93\u7BA1\u7406\u3011"}),"\u4E2D\u914D\u7F6E\u955C\u50CF\u7684\u52A0\u901F\u5730\u5740"]})]})}),(0,h.jsx)(g.Z,{title:"\u62C9\u53D6\u955C\u50CF",headerBordered:!0,children:(0,h.jsxs)(D.A,{formRef:a,submitter:!1,isKeyPressSubmit:!0,onFinish:function(){var y=d()(n()().mark(function O(j){var S,$,N,G,k,H;return n()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return k=(S=j.imageUrl)!==null&&S!==void 0?S:"",j.registry&&(k=j.registry.serverAddress+"/"+k),W(!0),($=x.current)===null||$===void 0||$.setStart(k),Z.next=6,(0,u.Gb)({tag:k,type:"pull",platform:(N=j.platform)!==null&&N!==void 0?N:""}).finally(function(){W(!1)});case 6:return H=Z.sent,(G=x.current)===null||G===void 0||G.setFinish(),p(!1),P.onFinish&&P.onFinish(H.data.tag),Z.abrupt("return",!0);case 11:case"end":return Z.stop()}},O)}));return function(O){return y.apply(this,arguments)}}(),children:[(0,h.jsxs)(s.Z.Compact,{children:[(0,h.jsx)(t.Z,{name:"registry",children:(0,h.jsx)(c.Z,{width:"150px"})}),(0,h.jsx)(E.Z,{disabled:U,width:270,name:"imageUrl",placeholder:"\u8BF7\u8F93\u5165\u955C\u50CF\u5730\u5740",required:!0,rules:[{required:!0}]}),(0,h.jsx)(_.Z,{name:"platform",style:{width:100},placeholder:"\u9ED8\u8BA4\u5F53\u524D\u67B6\u6784",options:r.ii.map(function(y){return{label:y.name,value:y.name}})}),(0,h.jsx)(M.ZP,{loading:U,onClick:d()(n()().mark(function y(){var O;return n()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:(O=a.current)===null||O===void 0||O.submit();case 1:case"end":return S.stop()}},y)})),children:"\u62C9\u53D6\u955C\u50CF"}),(0,h.jsx)(M.ZP,{danger:!0,onClick:function(){var O;(O=x.current)===null||O===void 0||O.close()},children:"\u4E2D\u6B62\u6267\u884C"})]}),(0,h.jsx)(t.Z,{label:"\u62C9\u53D6\u8FDB\u5EA6",children:(0,h.jsx)(v.Z,{ref:x})})]})})]},"remoteDrawer")]});R.Z=L},81366:function(K,R,e){var b=e(19632),n=e.n(b),B=e(5574),d=e.n(B),l=e(27254),C=e(42075),g=e(28036),D=e(25593),t=e(67294),E=e(31112),_=e(85893),M=(0,t.forwardRef)(function(f,s){var m=(0,t.useContext)(E.Z),u=m.showPath,r=(0,t.useState)([{title:"\u6839\u76EE\u5F55",path:"/"}]),v=d()(r,2),i=v[0],c=v[1];(0,t.useImperativeHandle)(s,function(){return{addHistory:function(P,A){c([].concat(n()(i),[{title:P,path:A}]))},initHistory:function(P){c([{title:"\u6839\u76EE\u5F55",path:"/"}].concat(n()(P)))}}});var h=function(P){u?u(i[P].title,i[P].path):f.showPath&&f.showPath(i[P].title,i[P].path);var A=i.filter(function(F,o){return o<=P});c(n()(A))};return(0,_.jsxs)(C.Z,{children:[(0,_.jsx)(C.Z.Compact,{children:i.map(function(L,P){return(0,_.jsx)(g.ZP,{icon:(0,_.jsx)(l.Z,{}),type:"dashed",onClick:function(){h(P)},children:L.title},P)})}),i.length>=2&&(0,_.jsx)(D.Z.Text,{copyable:{text:i[i.length-1].path}})]})});R.Z=M},31112:function(K,R,e){var b=e(67294),n=(0,b.createContext)({});R.Z=n},68536:function(K,R,e){e.d(R,{Z:function(){return E}});var b=e(24963),n=e(93613),B=e(36693),d=e(2741),l=e(25593),C=e(42075),g=e(67294),D=e(85893),t=0;function E(_){var M=(0,g.useContext)(b.Z),f=M.message;return _.isDir?(0,D.jsx)(l.Z.Link,{onClick:function(){_.onClick&&_.onClick()},children:(0,D.jsxs)(C.Z,{children:[(0,D.jsx)(n.Z,{}),_.showName]})}):_.isLink?(0,D.jsx)(l.Z.Link,{onClick:function(){_.onClick&&_.onClick()},children:(0,D.jsxs)(C.Z,{children:[(0,D.jsx)(B.Z,{}),_.showName]})}):(0,D.jsx)(l.Z.Text,{onClick:function(){if(t++,t==2){t=0,_.onClick&&_.onClick();return}setTimeout(function(){t==1&&f.info("\u53CC\u51FB\u67E5\u770B\u6587\u4EF6\u5185\u5BB9"),t=0},400)},style:{cursor:"pointer"},children:(0,D.jsxs)(C.Z,{children:[(0,D.jsx)(d.Z,{}),_.showName]})})}},44349:function(K,R,e){var b=e(97857),n=e.n(b),B=e(17186),d=e(5966),l=e(86250),C=e(67294),g=e(85893),D=(0,C.forwardRef)(function(t,E){var _=(0,C.useRef)();(0,C.useImperativeHandle)(E,function(){return{addItem:function(s,m){var u,r=(u=_.current)===null||u===void 0?void 0:u.getList(),v=!1;if(r==null||r.map(function(c){if(c.name==s){v=!0;return}}),!v){var i;(i=_.current)===null||i===void 0||i.add({name:s,value:m})}},clear:function(){var s;(s=_.current)===null||s===void 0||(s=s.getList())===null||s===void 0||s.map(function(m,u){var r;(r=_.current)===null||r===void 0||r.remove(u)})}}});var M={};return t.hideCopyButton===!0&&(M.copyIconProps=!1),t.hideDeleteButton===!0&&(M.deleteIconProps=!1),(0,g.jsx)(B.u,n()(n()({initialValue:t.initialValue,label:t.label,name:t.name,actionRef:_,creatorButtonProps:t.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(t.label?t.label:t.name)}:!1,min:t.min?t.min:0},M),{},{children:function(s,m,u){return(0,g.jsx)(l.Z,{justify:t.justify,gap:t.gap,children:t.items.map(function(r){return r.render?(0,g.jsx)("div",{children:r.render&&r.render(s,m,u)},"".concat(t.name,"-").concat(r.name,"-").concat(s.key)):(0,g.jsx)(d.Z,{width:r.width,name:r.name,label:r.label,required:r.required,rules:[{required:r.required}],disabled:r.disabled,placeholder:r.placeholder},"".concat(t.name,"-").concat(r.name,"-").concat(s.key))})})}}))});R.Z=D},80271:function(K,R,e){var b=e(15009),n=e.n(b),B=e(99289),d=e.n(B),l=e(5574),C=e.n(l),g=e(95591),D=e(184),t=e(78099),E=e(25593),_=e(67294),M=e(3393),f=e(68536),s=e(5251),m=e(81366),u=e(85893),r=(0,_.forwardRef)(function(v,i){(0,_.useImperativeHandle)(i,function(){return{show:function(){}}});var c=(0,_.useState)(""),h=C()(c,2),L=h[0],P=h[1],A=(0,_.useState)(!1),F=C()(A,2),o=F[0],T=F[1],p=(0,_.useRef)(),a=(0,_.useRef)(),x=function(I,U){P(U)};return(0,u.jsx)(D.a,{open:o,submitter:!1,title:"\u955C\u50CF\u6587\u4EF6\u67E5\u770B",onOpenChange:function(I){T(I),P(I?"/":"")},trigger:v.trigger?v.trigger:(0,u.jsx)(E.Z.Link,{children:(0,u.jsx)(g.Z,{})},"file"),children:(0,u.jsx)(t.Z,{headerTitle:(0,u.jsx)(m.Z,{ref:a,showPath:x}),scroll:{x:"max-content"},search:!1,rowKey:"showName",pagination:{pageSize:500,position:["topRight","bottomRight"]},actionRef:p,request:d()(n()().mark(function w(){var I;return n()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(L!=""){W.next=2;break}return W.abrupt("return",{data:[],total:0,success:!0});case 2:return W.next=4,(0,M.cD)({md5:v.imageId,path:L});case 4:return I=W.sent,W.abrupt("return",{data:I.data.info,total:I.data.info.length,success:!0});case 6:case"end":return W.stop()}},w)})),columns:[{title:"\u540D\u79F0",dataIndex:"showName",key:"name",render:function(j,U,W,y,O){var j;return U.isDir?j=(0,u.jsx)(f.Z,{isDir:!0,onClick:function(){return x(U.showName,U.name)},showName:U.showName}):U.linkName?j=(0,u.jsx)(f.Z,{isLink:!0,showName:"".concat(U.showName)}):j=(0,u.jsx)(f.Z,{showName:U.showName}),j}},{title:"\u6743\u9650",dataIndex:"mode",key:"mode"},{title:"\u7528\u6237",dataIndex:"owner"},{title:"\u7528\u6237\u7EC4",dataIndex:"group"},{title:"\u5927\u5C0F",dataIndex:"size",key:"size"},{title:"\u4FEE\u6539\u65F6\u95F4",dataIndex:"modTime",key:"modTime",render:function(I,U,W,y,O){return(0,s.NF)(U.modTime)},sorter:function(I,U){return new Date(I.modTime).getTime()-new Date(U.modTime).getTime()}}],cardProps:{ghost:!0}},"".concat(v.imageId,"-").concat(L))})});R.Z=r},96042:function(K,R,e){e.d(R,{Z:function(){return t}});var b=e(97857),n=e.n(b),B=e(5574),d=e.n(B),l=e(75870),C=e(34041),g=e(67294),D=e(85893);function t(E){var _=(0,g.useState)([]),M=d()(_,2),f=M[0],s=M[1];(0,g.useEffect)(function(){(0,l.Ot)().then(function(u){u&&s(u.data.list)})},[]);var m={};return E.multiple&&(m.mode="multiple"),E.top&&(m.placement="topLeft"),(0,D.jsx)(C.Z,n()({popupMatchSelectWidth:!E.width,style:E.width?{width:E.width}:{},onChange:function(r){if(Array.isArray(r)){var v=r.map(function(i){return f[i]});E.onChangeList&&E.onChangeList(v)}else E.onChange&&E.onChange(f[r])},placeholder:"\u9009\u62E9\u955C\u50CF\u4ED3\u5E93\uFF0C\u9ED8\u8BA4\u4E3A\u5F53\u524D\u4ED3\u5E93",options:f.map(function(u,r){return{value:r,label:u.title+"("+u.serverAddress+")"}}),allowClear:!0},m))}},97961:function(K,R,e){e.d(R,{GH:function(){return _},MF:function(){return m},_2:function(){return f},fN:function(){return g},ii:function(){return C},vC:function(){return t}});var b=e(15009),n=e.n(b),B=e(99289),d=e.n(B),l=e(82346),C=[{name:"linux/amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"linux/arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"linux/i386",arch:"386",search:[]},{name:"linux/arm/v6",arch:"arm",search:[]},{name:"linux/arm/v7",arch:"arm",search:[]},{name:"linux/arm/v8",arch:"arm64",search:[]},{name:"linux/ppc64le",arch:"ppc64le",search:[]},{name:"linux/riscv64",arch:"riscv64",search:[]}];function g(r){return D.apply(this,arguments)}function D(){return D=d()(n()().mark(function r(v){return n()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,l.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:v}));case 1:case"end":return c.stop()}},r)})),D.apply(this,arguments)}function t(r){return E.apply(this,arguments)}function E(){return E=d()(n()().mark(function r(v){return n()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,l.request)("/api/app/image/import-by-container-tar",{method:"POST",data:v}));case 1:case"end":return c.stop()}},r)})),E.apply(this,arguments)}function _(r){return M.apply(this,arguments)}function M(){return M=d()(n()().mark(function r(v){return n()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,l.request)("/api/app/image/import-by-image-tar",{method:"POST",data:v}));case 1:case"end":return c.stop()}},r)})),M.apply(this,arguments)}function f(r){return s.apply(this,arguments)}function s(){return s=d()(n()().mark(function r(v){return n()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,l.request)("/api/common/attach/delete",{method:"POST",data:v});case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},r)})),s.apply(this,arguments)}function m(){return u.apply(this,arguments)}function u(){return u=d()(n()().mark(function r(){return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,l.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return i.stop()}},r)})),u.apply(this,arguments)}},18148:function(K,R,e){e.d(R,{$q:function(){return s},Fj:function(){return L},KG:function(){return C},KX:function(){return A},T8:function(){return M},Xn:function(){return E},ao:function(){return u},c5:function(){return c},c7:function(){return v}});var b=e(15009),n=e.n(b),B=e(99289),d=e.n(B),l=e(82346);function C(o){return g.apply(this,arguments)}function g(){return g=d()(n()().mark(function o(T){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,l.request)("/api/app/image/get-list",{method:"POST",data:T}));case 1:case"end":return a.stop()}},o)})),g.apply(this,arguments)}function D(o){return t.apply(this,arguments)}function t(){return t=_asyncToGenerator(_regeneratorRuntime().mark(function o(T){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,request("/api/app/log/image-build",{method:"POST",data:T});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},o)})),t.apply(this,arguments)}function E(o){return _.apply(this,arguments)}function _(){return _=d()(n()().mark(function o(T){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,l.request)("/api/app/image/get-list-build",{method:"POST",data:T}));case 1:case"end":return a.stop()}},o)})),_.apply(this,arguments)}function M(o){return f.apply(this,arguments)}function f(){return f=d()(n()().mark(function o(T){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,l.request)("/api/app/image/get-build-task",{method:"POST",data:T});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},o)})),f.apply(this,arguments)}function s(o){return m.apply(this,arguments)}function m(){return m=d()(n()().mark(function o(T){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,l.request)("/api/app/image/delete-build-task",{method:"POST",data:T});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},o)})),m.apply(this,arguments)}function u(o){return r.apply(this,arguments)}function r(){return r=d()(n()().mark(function o(T){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,l.request)("/api/app/image/image-delete",{method:"POST",data:T});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},o)})),r.apply(this,arguments)}function v(){return i.apply(this,arguments)}function i(){return i=d()(n()().mark(function o(){return n()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,l.request)("/api/app/image/image-prune",{method:"POST"});case 2:return p.abrupt("return",p.sent);case 3:case"end":return p.stop()}},o)})),i.apply(this,arguments)}function c(){return h.apply(this,arguments)}function h(){return h=d()(n()().mark(function o(){return n()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,l.request)("/api/app/image/build-prune",{method:"POST"});case 2:return p.abrupt("return",p.sent);case 3:case"end":return p.stop()}},o)})),h.apply(this,arguments)}function L(o){return P.apply(this,arguments)}function P(){return P=d()(n()().mark(function o(T){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,l.request)("/api/app/image/update-title",{method:"POST",data:T});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},o)})),P.apply(this,arguments)}function A(o){return F.apply(this,arguments)}function F(){return F=d()(n()().mark(function o(T){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,l.request)("/api/app/image/tag-sync",{method:"POST",data:T}));case 1:case"end":return a.stop()}},o)})),F.apply(this,arguments)}},75870:function(K,R,e){e.d(R,{Ot:function(){return C},ZH:function(){return D},ix:function(){return E},t1:function(){return M}});var b=e(15009),n=e.n(b),B=e(99289),d=e.n(B),l=e(82346);function C(s){return g.apply(this,arguments)}function g(){return g=d()(n()().mark(function s(m){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.request)("/api/common/registry/get-list",{method:"POST",data:m}));case 1:case"end":return r.stop()}},s)})),g.apply(this,arguments)}function D(s){return t.apply(this,arguments)}function t(){return t=d()(n()().mark(function s(m){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.request)("/api/common/registry/create",{method:"POST",data:m}));case 1:case"end":return r.stop()}},s)})),t.apply(this,arguments)}function E(s){return _.apply(this,arguments)}function _(){return _=d()(n()().mark(function s(m){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.request)("/api/common/registry/delete",{method:"POST",data:m}));case 1:case"end":return r.stop()}},s)})),_.apply(this,arguments)}function M(s){return f.apply(this,arguments)}function f(){return f=d()(n()().mark(function s(m){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.request)("/api/common/registry/get-detail",{method:"POST",data:m}));case 1:case"end":return r.stop()}},s)})),f.apply(this,arguments)}}}]);
