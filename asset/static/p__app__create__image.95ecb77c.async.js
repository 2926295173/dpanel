"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3985],{85060:function(fe,$,n){n.d($,{Z:function(){return j}});var b=n(87462),C=n(67294),G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},y=G,W=n(84089),V=function(Q,m){return C.createElement(W.Z,(0,b.Z)({},Q,{ref:m,icon:y}))},K=C.forwardRef(V),j=K},63434:function(fe,$,n){var b=n(1413),C=n(45987),G=n(22270),y=n(84567),W=n(67294),V=n(90789),K=n(35510),j=n(85893),Y=["options","fieldProps","proFieldProps","valueEnum"],Q=W.forwardRef(function(N,J){var h=N.options,t=N.fieldProps,ee=N.proFieldProps,re=N.valueEnum,M=(0,C.Z)(N,Y);return(0,j.jsx)(K.Z,(0,b.Z)({ref:J,valueType:"checkbox",valueEnum:(0,G.h)(re,void 0),fieldProps:(0,b.Z)({options:h},t),lightProps:(0,b.Z)({labelFormatter:function(){return(0,j.jsx)(K.Z,(0,b.Z)({ref:J,valueType:"checkbox",mode:"read",valueEnum:(0,G.h)(re,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,b.Z)({options:h},t),proFieldProps:ee},M))}},M.lightProps),proFieldProps:ee},M))}),m=W.forwardRef(function(N,J){var h=N.fieldProps,t=N.children;return(0,j.jsx)(y.Z,(0,b.Z)((0,b.Z)({ref:J},h),{},{children:t}))}),R=(0,V.G)(m,{valuePropName:"checked"}),D=R;D.Group=Q,$.Z=D},52688:function(fe,$,n){var b=n(1413),C=n(45987),G=n(67294),y=n(35510),W=n(85893),V=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],K=G.forwardRef(function(j,Y){var Q=j.fieldProps,m=j.unCheckedChildren,R=j.checkedChildren,D=j.proFieldProps,N=(0,C.Z)(j,V);return(0,W.jsx)(y.Z,(0,b.Z)({valueType:"switch",fieldProps:(0,b.Z)({unCheckedChildren:m,checkedChildren:R},Q),ref:Y,valuePropName:"checked",proFieldProps:D,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},N))});$.Z=K},90672:function(fe,$,n){var b=n(1413),C=n(45987),G=n(67294),y=n(35510),W=n(85893),V=["fieldProps","proFieldProps"],K=function(Y,Q){var m=Y.fieldProps,R=Y.proFieldProps,D=(0,C.Z)(Y,V);return(0,W.jsx)(y.Z,(0,b.Z)({ref:Q,valueType:"textarea",fieldProps:m,proFieldProps:R},D))};$.Z=G.forwardRef(K)},92067:function(fe,$,n){n.d($,{Z:function(){return D}});var b=n(15009),C=n.n(b),G=n(99289),y=n.n(G),W=n(13822),V=n(64789),K=n(41482),j=n(42075),Y=n(28036),Q=n(37413),m=n(5251),R=n(85893);function D(N){return(0,R.jsx)(K.Z,{columns:[{title:"\u5BB9\u5668\u540D\u79F0",dataIndex:"name",render:function(h,t,ee,re){return(0,R.jsx)(j.Z,{direction:"vertical",style:{textAlign:"left"},children:t==null?void 0:t.Names.map(function(M){return(0,m.fi)(M,"/")})},t.Id)}},{title:"\u7AEF\u53E3",dataIndex:"ports",search:!1,render:function(h,t,ee,re){var M=[],ue=[];return t!=null&&t.Ports&&t.Ports.map(function(k,oe){k.PublicPort?M.push(k):ue.push(k)}),(0,R.jsx)(Q.Z,{publicPort:M,privatePort:ue,domain:[]})}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",ellipsis:!0,width:100,render:function(h,t,ee,re){return[(0,R.jsx)(Y.ZP,{type:"link",onClick:y()(C()().mark(function M(){var ue;return C()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.next=2,(0,W.jV)({md5:t.Id});case 2:ue=oe.sent,N.onSelect&&N.onSelect(ue.data.info);case 4:case"end":return oe.stop()}},M)})),children:(0,R.jsx)(V.Z,{})},t.Id)]}}],rowKey:"Id",request:function(){var J=y()(C()().mark(function h(t,ee,re){var M;return C()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,W.IE)({siteTitle:t.name});case 2:return M=k.sent,k.abrupt("return",{data:M.data.list,success:!0,total:M.data.list.length});case 4:case"end":return k.stop()}},h)}));return function(h,t,ee){return J.apply(this,arguments)}}(),pagination:{pageSize:9}})}},52255:function(fe,$,n){n.d($,{Z:function(){return G}});var b=n(67294),C=n(85893);function G(y){return(0,C.jsx)("div",{style:{display:y.show?"block":"none"},children:y.children})}},46442:function(fe,$,n){var b=n(15009),C=n.n(b),G=n(99289),y=n.n(G),W=n(5574),V=n.n(W),K=n(67294),j=n(14946),Y=n(64789),Q=n(41482),m=n(28036),R=n(85265),D=n(42075),N=n(66309),J=n(28230),h=n(3616),t=n(85893),ee=(0,K.forwardRef)(function(re,M){(0,K.useImperativeHandle)(M,function(){return{show:function(){ve(!0)}}});var ue=(0,K.useState)(!1),k=V()(ue,2),oe=k[0],ve=k[1],Pe=(0,K.useRef)();return(0,t.jsxs)(t.Fragment,{children:[re.showTriggerButton&&(0,t.jsx)(m.ZP,{onClick:function(){ve(!0)},children:"\u52A0\u5165\u7F51\u7EDC"}),(0,t.jsx)(R.Z,{title:"\u9009\u62E9\u7F51\u7EDC",width:h.R_,footer:!1,open:oe,onClose:function(){return ve(!1)},extra:(0,t.jsx)(D.Z,{children:(0,t.jsx)(J.Z,{onFinish:function(){var o,r;!((o=Pe.current)===null||o===void 0)&&o.reloadAndRest&&((r=Pe.current)===null||r===void 0||r.reloadAndRest())}},"create")}),children:(0,t.jsx)(Q.Z,{rowKey:"Name",actionRef:Pe,columns:[{title:"\u540D\u79F0",dataIndex:"Name",render:function(o,r,P,B,U){return r.Name=="none"||r.Name=="bridge"||r.Name=="host"?(0,t.jsxs)(t.Fragment,{children:[r.Name," ",(0,t.jsx)(N.Z,{color:"blue",children:"System"})]}):(0,t.jsx)(t.Fragment,{children:o})}},{title:"\u7C7B\u578B",ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"Driver",ellipsis:!0,width:100,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4",search:!1,width:120,render:function(o,r,P,B,U){return r.IPAM.Config&&r.IPAM.Config[0]&&(0,t.jsxs)(D.Z,{direction:"vertical",children:[r.IPAM.Config[0].Subnet,r.IPAM.Config[0].Gateway]})}},{title:"IPV6",search:!1,render:function(o,r,P,B,U){return r.IPAM.Config&&r.IPAM.Config[1]&&(0,t.jsxs)(D.Z,{direction:"vertical",children:[r.IPAM.Config[1].Subnet,r.IPAM.Config[1].Gateway]})}},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(o,r,P,B,U){return[r.Name!="none"&&r.Name!="bridge"&&r.Name!="host"&&(0,t.jsx)(m.ZP,{type:"link",onClick:function(){re.onSelect(r),ve(!1)},children:(0,t.jsx)(Y.Z,{})},r.Id)]}}],request:function(){var te=y()(C()().mark(function o(r,P,B){var U;return C()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,(0,j.jR)({name:r.Name});case 2:return U=se.sent,se.abrupt("return",{data:U.data.list,success:!0,total:U.data.list.length});case 4:case"end":return se.stop()}},o)}));return function(o,r,P){return te.apply(this,arguments)}}(),pagination:{pageSize:10}})})]})});$.Z=ee},35880:function(fe,$,n){var b=n(67294),C=(0,b.createContext)({});$.Z=C},57841:function(fe,$,n){n.r($),n.d($,{default:function(){return jn}});var b=n(15009),C=n.n(b),G=n(99289),y=n.n(G),W=n(5574),V=n.n(W),K=n(90078),j=n(38345),Y=n(97269),Q=n(2236),m=n(5966),R=n(24739),D=n(97462),N=n(30291),J=n(92398),h=n(40056),t=n(67294),ee=n(35880),re=n(41482),M=n(62370),ue=n(85265),k=n(42075),oe=n(96074),ve=n(28036),Pe=n(83062),te=n(3393),o=n(18148),r=n(5251),P=n(64789),B=n(85060),U=n(28307),De=n(78451),se=n(99861),Ce=n(80821),Oe=n(1699),Ae=n(80271),Ze=n(3616),e=n(85893);function ie(v){var L=(0,t.useState)(!1),A=V()(L,2),S=A[0],E=A[1],F=(0,t.useContext)(ee.Z),i=F.createFormRef,g=F.volumeListRef,I=F.createEnvRef,O=F.domainRef,d=(0,t.useRef)(),l=function(){var s=y()(C()().mark(function f(c){var x,p,_,w,X,ge,le,H,Z,a,q,u;return C()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,(0,te.YU)({md5:c});case 2:return w=ne.sent,v.redeploy||(H=(X=i.current)===null||X===void 0?void 0:X.getFieldsValue(),(ge=i.current)===null||ge===void 0||ge.resetFields(),(le=i.current)===null||le===void 0||le.setFieldsValue({siteName:H.siteName,siteTitle:H.siteTitle,useBridgeNetwork:H.useBridgeNetwork})),w.data.info.Config.Env&&w.data.info.Config.Env.map(function(T){var ae,xe=T.split("=");(ae=I.current)===null||ae===void 0||ae.addEnvItem(xe[0],xe.slice(1).join("="))}),(x=i.current)===null||x===void 0||x.setFieldValue("imageName",c),(p=i.current)===null||p===void 0||p.setFieldValue("workDir",w.data.info.Config.WorkingDir),(_=O.current)===null||_===void 0||_.setExposePort(w.data.info.Config.ExposedPorts),v.redeploy||(w.data.info.Config.Volumes?(q=[],Object.keys(w.data.info.Config.Volumes).map(function(T,ae){q.push(T)}),(a=g.current)===null||a===void 0||a.setDefaultDestPath(q)):(u=g.current)===null||u===void 0||u.setDefaultDestPath([]),(Z=i.current)===null||Z===void 0||Z.setFieldsValue({workDir:{value:"",useDefault:!0,default:w.data.info.Config.WorkingDir},user:{value:"",useDefault:!0,default:w.data.info.Config.User},command:{value:"",useDefault:!0,default:w.data.info.Config.Cmd&&w.data.info.Config.Cmd.join(" ")},entrypoint:{value:"",useDefault:!0,default:w.data.info.Config.Entrypoint&&w.data.info.Config.Entrypoint.join(" ")}})),ne.abrupt("return",!0);case 10:case"end":return ne.stop()}},f)}));return function(c){return s.apply(this,arguments)}}();return(0,t.useEffect)(function(){v.fromImageId&&l(v.fromImageId)},[v.fromImageId]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ue.Z,{destroyOnClose:!0,open:S,width:Ze.R_,title:"\u9009\u62E9\u955C\u50CF",footer:!1,onClose:function(){E(!1)},children:(0,e.jsx)(re.Z,{scroll:{x:"max-content"},columns:[{title:"Id",dataIndex:"Id",search:!1,width:80,render:function(f,c,x,p,_){return(0,e.jsx)(De.Z,{content:c.Id.slice(7,19)})}},{title:"\u955C\u50CF\u540D\u79F0",dataIndex:"tag",width:200,render:function(f,c,x,p){return(0,e.jsx)(De.Z,{content:c.RepoTags[0]})}},{title:"\u521B\u5EFA\u65E5\u671F",dataIndex:"Created",search:!1,width:100,render:function(f,c,x,p){return(0,e.jsx)("div",{children:(0,r.ZM)(c.Created*1e3)},c.Id)},sorter:function(f,c){return f.Created-c.Created}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:50,render:function(f,c,x,p){return(0,e.jsx)(k.Z,{split:(0,e.jsx)(oe.Z,{type:"vertical"}),children:(0,e.jsx)(Ce.Z,{icon:(0,e.jsx)(P.Z,{}),tips:"\u4F7F\u7528\u955C\u50CF",action:function(){return l(c.RepoTags[0])},type:"link",onSuccess:function(){E(!1)}},"addImage")})}}],request:function(){var s=y()(C()().mark(function f(c,x,p){var _,w,X;return C()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return v.redeploy,le.next=3,(0,o.KG)({tag:c.tag});case 3:return _=le.sent,w=0,X=[],_.data.list&&(X=_.data.list.flatMap(function(H){return H.RepoTags.map(function(Z){return{Key:w++,Id:H.Id,Created:H.Created,RepoTags:[Z]}})})),le.abrupt("return",{data:X,success:!0,total:X.length});case 8:case"end":return le.stop()}},f)}));return function(f,c,x){return s.apply(this,arguments)}}(),rowKey:"Key",pagination:{pageSize:8}})},"imageTableList"),(0,e.jsxs)(k.Z.Compact,{children:[(0,e.jsx)(m.Z,{width:"lg",label:"\u955C\u50CF",tooltip:v.redeploy?"\u66F4\u65B0\u5BB9\u5668\u65F6,\u53EA\u53EF\u4EE5\u9009\u62E9\u8BE5\u955C\u50CF\u4E0B\u7684\u4E0D\u540Ctag.\u4E5F\u53EF\u4EE5\u5F3A\u5236\u66F4\u65B0\u5DF2\u90E8\u7F72tag,\u66F4\u6B21\u90E8\u7F72":"\u65B0\u5EFA\u5BB9\u5668\u65F6,\u53EF\u4EE5\u4F7F\u7528\u672C\u5730\u955C\u50CF,\u4E5F\u53EF\u4EE5\u4E0B\u8F7D\u5168\u65B0\u7684\u955C\u50CF\u6216\u662F\u66F4\u65B0\u672C\u5730\u955C\u50CF\u7684tag",name:"imageName",disabled:!0,placeholder:"\u8BF7\u9009\u62E9\u955C\u50CF\uFF0C\u5982\u679C\u662F\u8FDC\u7A0B\u955C\u50CF\u8BF7\u5148\u4E0B\u8F7D",rules:[{required:!0}],required:!0}),(0,e.jsx)(M.Z,{label:" ",children:(0,e.jsx)(ve.ZP,{type:"primary",onClick:function(){return E(!0)},children:"\u9009\u62E9\u955C\u50CF"},"showBtn")}),(0,e.jsx)(D.Z,{name:["imageName"],children:function(f){var c=f.imageName;if(c)return(0,e.jsx)(M.Z,{label:" ",children:(0,e.jsx)(se.Z,{finishAutoHide:!0,image:c?[c]:[],trigger:(0,e.jsx)(Pe.Z,{title:"\u91CD\u65B0\u62C9\u53D6\u5F53\u524D\u955C\u50CF",children:(0,e.jsx)(ve.ZP,{icon:(0,e.jsx)(B.Z,{}),children:"\u66F4\u65B0\u5F53\u524D\u955C\u50CF"})})})})}}),(0,e.jsx)(M.Z,{label:" ",children:(0,e.jsx)(U.Z,{onClick:function(){E(!1)},ref:d,onFinish:function(f){l(f)}},"remote")}),(0,e.jsx)(M.Z,{label:" ",children:(0,e.jsx)(D.Z,{name:["imageName"],children:function(f){var c=f.imageName;if(c)return(0,e.jsx)(Oe.u,{access:"canSeeEnableCe",showProTips:!0,children:function(p){var _=p.canSeeEnableCe;return(0,e.jsx)(Ae.Z,{imageId:c,trigger:(0,e.jsx)(ve.ZP,{disabled:_,children:"\u955C\u50CF\u6587\u4EF6"})})}})}})})]})]})}var we=n(13822),ye=n(51042),pe=n(63434),Ee=n(17186),be=n(25593),Me=n(92067),Se=(0,t.forwardRef)(function(v,L){var A=(0,t.useState)(!1),S=V()(A,2),E=S[0],F=S[1],i=(0,t.useRef)(),g=function(d){var l=(0,t.useState)([]),s=V()(l,2),f=s[0],c=s[1];return(0,t.useEffect)(function(){(0,we.jV)({md5:d.name}).then(function(x){var p;return c((p=x.data.info.Config.Env)!==null&&p!==void 0?p:[]),!0})},[]),(0,e.jsxs)(j.Z,{bordered:!0,extra:d.action,style:{marginBottom:10},children:[(0,e.jsx)(j.Z,{title:"\u5173\u8054\u4FE1\u606F",children:(0,e.jsxs)(R.UW,{children:[(0,e.jsx)(m.Z,{label:"\u5BB9\u5668\u540D\u79F0",name:"name",width:"md",readonly:!0}),(0,e.jsx)(m.Z,{label:"\u8BBF\u95EEHostName",name:"alise",width:"md",readonly:!0,tooltip:"\u901A\u8FC7\u914D\u7F6E\u6B64\u540D\u79F0\uFF0C\u5728\u5BB9\u5668\u5185\u90E8\u8FDB\u884C\u8BF7\u6C42\u8BBF\u95EE",hidden:!0}),(0,e.jsx)(M.Z,{label:"\u8BBF\u95EEHostName",tooltip:"\u901A\u8FC7\u914D\u7F6E\u6B64\u540D\u79F0\uFF0C\u5728\u5BB9\u5668\u5185\u90E8\u8FDB\u884C\u8BF7\u6C42\u8BBF\u95EE",children:(0,e.jsx)(be.Z.Text,{copyable:!0,children:d.record.alise})}),(0,e.jsx)(pe.Z,{label:"\u5173\u8054\u5B58\u50A8",name:"volume"})]})}),(0,e.jsx)(j.Z,{title:"\u73AF\u5883\u53D8\u91CF",children:(0,e.jsx)(k.Z,{direction:"vertical",children:f&&f.map(function(x,p){return(0,e.jsx)(be.Z.Text,{copyable:{icon:(0,e.jsx)(ye.Z,{}),onCopy:function(){var w=x.split("=");v.onAddEnv(w[0],w[1])},tooltips:["add env","success"]},code:!0,ellipsis:{tooltip:x},style:{width:300},children:x},p)})},"linkEnv")})]})},I=function(d){var l,s,f=!1,c=(l=(s=i.current)===null||s===void 0?void 0:s.getList())!==null&&l!==void 0?l:[];if(c.map(function(p){p.name==d.name&&(f=!0)}),!f){var x;(x=i.current)===null||x===void 0||x.add(d)}};return(0,t.useImperativeHandle)(L,function(){return{setDefaultLink:function(d){d&&d.map(function(l){l.name!=""&&I(l)})}}}),(0,e.jsxs)(j.Z,{title:"\u5173\u8054\u5BB9\u5668",headerBordered:!0,children:[(0,e.jsx)(Ee.u,{name:"links",actionRef:i,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5173\u8054"},actionGuard:{beforeAddRow:function(d,l){return F(!0),!1}},copyIconProps:!1,min:0,itemRender:function(d,l){return(0,e.jsx)(g,{action:d.action,name:l.record.name,record:l.record})}}),(0,e.jsx)(ue.Z,{title:"\u9009\u62E9\u5BB9\u5668",width:Ze.R_,footer:!1,open:E,onClose:function(){return F(!1)},children:(0,e.jsx)(Me.Z,{onSelect:function(d){I({name:(0,r.fi)(d.Name,"/"),alise:"".concat(d.Config.Hostname,".").concat(d.Config.Domainname),volume:!1}),F(!1)}})})]})}),Te=Se,Ie=n(91058),_e=n(64317),Ye=(0,t.forwardRef)(function(v,L){var A=(0,t.useRef)(),S=(0,t.useContext)(ee.Z),E=S.createFormRef,F=(0,t.useState)(),i=V()(F,2),g=i[0],I=i[1];(0,t.useImperativeHandle)(L,function(){return{setDefaultDestPath:function(l){var s,f,c=(s=(f=A.current)===null||f===void 0?void 0:f.getList())!==null&&s!==void 0?s:[];l.length!=0&&l.filter(function(x){return x!=""}).map(function(x){var p=!1;if(c.map(function(w){if(w.dest==x){p=!0;return}}),!p){var _;(_=A.current)===null||_===void 0||_.add({dest:x,permission:"write",inImage:!0})}})},addUserVolumeItem:function(l,s){var f,c=(f=A.current)===null||f===void 0?void 0:f.getList(),x=!1;if(c==null||c.map(function(_){if(_.dest==s){x=!0;return}}),!x){var p;(p=A.current)===null||p===void 0||p.add({host:l,dest:s})}}}});var O=function(){var d=y()(C()().mark(function l(s){var f,c;return C()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!g){p.next=2;break}return p.abrupt("return");case 2:if(s){p.next=4;break}return p.abrupt("return");case 4:return p.next=6,(0,te.cD)({md5:s});case 6:f=p.sent,c={title:"/",value:"/",children:[]},f.data.list.map(function(_){var w=c;_.split("/").map(function(X,ge,le){var H;if(X){var Z=(H=w.children)===null||H===void 0?void 0:H.find(function(a){return a.title===X});Z||(Z={title:X,value:le.join("/"),children:[]},w.children?w.children.push(Z):w.children=[Z]),w=Z}})}),c.children&&I(c.children);case 10:case"end":return p.stop()}},l)}));return function(s){return d.apply(this,arguments)}}();return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(j.Z,{title:"\u81EA\u5B9A\u4E49\u6302\u8F7D\u6216\u662F\u5B58\u50A8\u5377",tooltip:"\u6302\u8F7D\u53EF\u4EE5\u662F\u5BBF\u4E3B\u673A\u7684\u76EE\u5F55\u6216\u662F\u6587\u4EF6\uFF0C\u4E5F\u53EF\u4EE5\u6307\u5B9A\u5B58\u50A8\u5377\u540D\uFF08\u81EA\u52A8\u65B0\u5EFA\uFF09\u3002",headerBordered:!0,direction:"column",children:(0,e.jsx)(Ee.u,{actionRef:A,name:"volumes",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u6620\u5C04\u76EE\u5F55"},copyIconProps:!1,min:0,children:function(l,s,f){var c=f.getCurrentRowData();return(0,e.jsxs)(R.UW,{children:[(0,e.jsxs)(k.Z.Compact,{children:[(0,e.jsx)(m.Z,{label:"\u5BBF\u4E3B\u673A\u6587\u4EF6\u3001\u76EE\u5F55\u6216\u5B58\u50A8\u5377",name:"host",width:v.showInDrawer?"sm":"md"}),(0,e.jsx)(_e.Z,{label:" ",valueEnum:{write:"\u8BFB\u5199",readonly:"\u53EA\u8BFB"},initialValue:"write",name:"permission"})]}),(0,e.jsx)(k.Z.Compact,{children:(0,e.jsx)(m.Z,{label:"\u5BB9\u5668\u5185\u8DEF\u5F84",name:"dest",width:v.showInDrawer?"sm":"md",required:!0,rules:[{required:!0}],disabled:v.disabledUserVolumeDest||c.inImage})})]})}})})})}),ze=Ye,Xe=n(2831),de=n(52688),Ke=n(86125),Je=n(71230),He=n(15746),Qe=n(44349);function qe(v){var L,A=(0,t.useState)(),S=V()(A,2),E=S[0],F=S[1];return(0,t.useEffect)(function(){(0,Xe.aF)().then(function(i){return F(i.data.info)})},[]),(0,e.jsxs)(j.Z,{children:[(0,e.jsx)(m.Z,{label:"\u5171\u4EAB\u5185\u5B58\u5927\u5C0F - /dev/shm",name:"shmsize",initialValue:"64M",tooltip:"0 \u4E3A\u4F7F\u7528\u9ED8\u8BA464M\uFF0C\u914D\u7F6E\u65F6\u8BF7\u9644\u52A0\u5355\u4F4D\uFF0C\u4F8B\u5982\uFF1A1G"}),(0,e.jsx)(M.Z,{label:"\u6700\u5927Cpu\u914D\u989D",name:"cpus",tooltip:"0 \u4E3A\u4E0D\u9650\u5236",children:(0,e.jsx)(Ke.Z,{step:.1,max:E==null?void 0:E.NCPU,marks:{0:"0",.5:"0.5\u6838",1:"1\u6838",1.5:"1.5\u6838",2:"2\u6838",4:"4\u6838",6:"6\u6838",8:"8\u6838"}})}),(0,e.jsx)(M.Z,{label:"\u6700\u5927\u5185\u5B58\u914D\u989D",name:"memory",tooltip:"0 \u4E3A\u4E0D\u9650\u5236",children:(0,e.jsx)(Ke.Z,{step:256,max:Math.round(((L=E==null?void 0:E.MemTotal)!==null&&L!==void 0?L:0)/1024/1024),marks:{0:"0",1024:"1G",2048:"2G",3072:"3G",4096:"4G"}})}),(0,e.jsx)(_e.Z,{label:"\u65E5\u5FD7\u7C7B\u578B",name:["log","driver"],tooltip:"\u9ED8\u8BA4\u4F7F\u7528 json-file \u9A71\u52A8\u7531 docker \u7EDF\u4E00\u7BA1\u7406\u3002\u91C7\u7528 journal \u65F6\u65E5\u5FD7\u5C06\u6765\u5BBF\u4E3B\u673A\u7BA1\u7406",initialValue:"json-file",valueEnum:{"json-file":"json-file",journald:"journal (\u5BBF\u4E3B\u9700\u8981\u5B89\u88C5journal\u670D\u52A1)"}}),(0,e.jsx)(D.Z,{name:["log"],children:function(g){var I=g.log;if(I.driver=="json-file")return(0,e.jsxs)(R.UW,{children:[(0,e.jsx)(m.Z,{label:"\u65E5\u5FD7\u5207\u5272\u5927\u5C0F",name:["log","maxSize"],placeholder:"\u4F8B\u5982\uFF1A10k,5M",tooltip:"\u9ED8\u8BA4 Docker \u5E76\u4E0D\u4F1A\u81EA\u52A8\u5207\u5272\u65E5\u5FD7"}),(0,e.jsx)(m.Z,{tooltip:"\u9ED8\u8BA4 Docker \u5E76\u4E0D\u4F1A\u81EA\u52A8\u6E05\u7406\u65E5\u5FD7\u6587\u4EF6",label:"\u4FDD\u7559\u65E5\u5FD7\u6587\u4EF6\u6570",name:["log","maxFile"],placeholder:"\u4F8B\u5982\uFF1A10"})]})}}),(0,e.jsx)(Qe.Z,{name:"device",label:"\u5173\u8054\u8BBE\u5907",hideCopyButton:!0,showAddButton:!0,items:[{label:"\u5BBF\u4E3B\u673A\u8DEF\u5F84",name:"host",width:"md",placeholder:"\u4F8B\u5982\uFF1A/dev/tty0"},{label:"\u5BB9\u5668\u5185\u8DEF\u5F84",name:"dest",width:"md",placeholder:"\u4F8B\u5982\uFF1A/dev/tty0"}]}),(0,e.jsxs)(Je.Z,{children:[(0,e.jsx)(He.Z,{span:4,children:(0,e.jsx)(de.Z,{label:"\u4F7F\u7528 Gpu",name:["gpus","enable"]})}),(0,e.jsx)(He.Z,{span:20,children:(0,e.jsx)(D.Z,{name:["gpus"],children:function(g){var I=g.gpus;if(I&&I.enable)return(0,e.jsx)(_e.Z,{mode:"tags",label:"\u8BBE\u5907\u5217\u8868",name:["gpus","device"],placeholder:"\u914D\u7F6E\u4F7F\u7528\u8BBE\u5907id\u6216\u662Fuuid\uFF0C\u4E0D\u586B\u6240\u4E3A\u6240\u6709\u8BBE\u5907"})}})})]}),(0,e.jsx)(D.Z,{name:["gpus"],children:function(g){var I=g.gpus;if(I&&I.enable)return(0,e.jsx)(_e.Z,{label:"\u8BA1\u7B97\u80FD\u529B",name:["gpus","capabilities"],mode:"multiple",fieldProps:{allowClear:!0},options:[{label:"compute - \u8BA1\u7B97\u80FD\u529B",value:"compute"},{label:"compat32 - \u517C\u5BB932\u4F4D",value:"compat32"},{label:"graphics - \u56FE\u5F62\u5904\u7406\u80FD\u529B",value:"graphics"},{label:"utility - \u76D1\u63A7\u548C\u7BA1\u7406\u80FD\u529B",value:"utility"},{label:"video - \u89C6\u9891\u5904\u7406\u80FD\u529B",value:"video"},{label:"display - \u663E\u793A\u56FE\u5F62\u754C\u9762\u80FD\u529B",value:"display"}]})}})]})}function en(){return(0,e.jsx)(j.Z,{title:"\u5BB9\u5668\u6807\u7B7E",children:(0,e.jsx)(Ee.u,{name:"label",label:"",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u6807\u7B7E"},copyIconProps:!1,min:0,children:(0,e.jsxs)(R.UW,{children:[(0,e.jsx)(m.Z,{width:"md",name:"name",label:"\u540D\u79F0",placeholder:""}),(0,e.jsx)(m.Z,{width:"md",name:"value",label:"\u503C",placeholder:""})]})})})}var nn=n(44771),tn=n(86615),Bn="default",Pn="user";function un(v){return(0,e.jsx)(M.Z,{label:v.label,tooltip:v.tooltip,children:(0,e.jsxs)(k.Z.Compact,{block:!0,children:[(0,e.jsx)(tn.Z.Group,{radioType:"button",name:[v.name,"useDefault"],options:[{label:"\u4F7F\u7528\u9ED8\u8BA4",value:!0},{label:"\u81EA\u5B9A\u4E49",value:!1}]}),(0,e.jsx)(D.Z,{name:[v.name],children:function(A){return A[v.name]&&A[v.name].useDefault?(0,e.jsx)(m.Z,{name:[v.name,"default"],disabled:!0,placeholder:"\u672A\u8BBE\u7F6E"}):(0,e.jsx)(m.Z,{name:[v.name,"value"]})}})]})})}var Re=un,Ne=n(24963);function an(){var v=(0,t.useContext)(Ne.Z),L=v.message,A=v.lang;return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(j.Z,{children:[(0,e.jsx)(nn.Z,{label:"\u91CD\u542F\u7B56\u7565"}),(0,e.jsxs)(R.UW,{children:[(0,e.jsx)(de.Z,{fieldProps:{onChange:function(E){E&&L.warning(A("app.create.privilegedNotice"))}},name:"privileged",tooltip:"--privileged",label:"\u8D4B\u4E88\u5BB9\u5668Root\u6743\u9650",initialValue:!1}),(0,e.jsx)(de.Z,{name:"autoRemove",tooltip:"--rm",label:"\u505C\u6B62\u540E\u81EA\u52A8\u5220\u9664",initialValue:!1}),(0,e.jsx)(de.Z,{fieldProps:{onChange:function(E){E&&L.warning(A("app.create.hostPidNotice"))}},tooltip:"--pid host",name:"hostPid",label:"\u5173\u8054\u5BBF\u4E3B\u673APid",initialValue:!1})]}),(0,e.jsx)(Re,{label:"\u5DE5\u4F5C\u76EE\u5F55",tooltip:"\u9ED8\u8BA4\u4F7F\u7528\u955C\u50CF\u4E2D\u6307\u5B9A\u7684\u5DE5\u4F5C\u76EE\u5F55",name:"workDir"}),(0,e.jsx)(Re,{label:"User",tooltip:"\u5728\u5BB9\u5668\u4E2D\u8FD0\u884C\u547D\u4EE4\u7684\u7528\u6237",name:"user"}),(0,e.jsx)(Re,{label:"Command",tooltip:"\u542F\u52A8\u5BB9\u5668\u65F6\u8FD0\u884C\u7684\u547D\u4EE4\uFF0C\u4EE5\u7A7A\u683C\u5206\u9694",name:"command"}),(0,e.jsx)(Re,{label:"Entrypoint",tooltip:"\u65E0\u6CD5\u8986\u76D6\u955C\u50CF\u4E2D\u5DF2\u7ECF\u6307\u5B9A\u7684 Entrypoint \u547D\u4EE4",name:"entrypoint"})]})})}var rn=n(91845),$e=n(62597),ke=n(82346),ln=n(61768),on=n(46442),sn=(0,t.forwardRef)(function(v,L){var A=(0,t.useRef)(),S=(0,t.useRef)();(0,t.useImperativeHandle)(L,function(){return{}});var E=function(i){var g,I,O=!1,d=(g=(I=A.current)===null||I===void 0?void 0:I.getList())!==null&&g!==void 0?g:[];if(d.map(function(s){s.name==i.name&&(O=!0)}),!O){var l;(l=A.current)===null||l===void 0||l.add(i)}};return(0,e.jsxs)(j.Z,{title:"\u5173\u8054\u7F51\u7EDC",headerBordered:!0,extra:(0,e.jsx)(k.Z,{children:v.showUseBridgeNetwork&&(0,e.jsx)(de.Z,{name:"useBridgeNetwork",fieldProps:{checkedChildren:"\u5173\u8054 Bridge \u7F51\u7EDC",unCheckedChildren:"\u5173\u8054 Bridge \u7F51\u7EDC"}},"useBridgeNetwork")}),children:[(0,e.jsx)(Ee.u,{name:"network",actionRef:A,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u7F51\u7EDC"},actionGuard:{beforeAddRow:function(i,g){var I;return(I=S.current)===null||I===void 0||I.show(),!1}},copyIconProps:!1,min:0,itemRender:function(i,g){if(g.record.name!="bridge")return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(R.UW,{children:[(0,e.jsx)(m.Z,{label:"\u7F51\u7EDC\u540D\u79F0",name:"name",width:"md",disabled:!0,fieldProps:{value:g.record.name}}),(0,e.jsx)(ln.Z,{label:"\u522B\u540D",name:"alise",tooltip:"\u540C\u4E00\u7F51\u7EDC\u4E2D\u7684\u5BB9\u5668\u53EF\u4EE5\u4F7F\u7528 hostname, domainname, \u81EA\u5B9A\u4E49\u522B\u540D\u8FDB\u884C\u8BF7\u6C42\u5173\u8054",children:(0,e.jsx)(m.Z,{width:"md",placeholder:"\u6307\u5B9A\u5F53\u524D\u5BB9\u5668\u5728\u8BE5\u7F51\u7EDC\u4E2D\u7684\u522B\u540D"})}),(0,e.jsx)(m.Z,{label:"\u6307\u5B9AIpV4",name:"ipV4",width:"md",disabled:g.record.name=="bridge",fieldProps:{addonAfter:g.record.subnet}}),g.record.subnetV6&&(0,e.jsx)(m.Z,{label:"\u6307\u5B9AIpV6",name:"ipV6",width:"md",disabled:g.record.name=="bridge",fieldProps:{addonAfter:g.record.subnetV6}}),(0,e.jsx)(M.Z,{label:" ",children:i.action})]})})}}),(0,e.jsx)(on.Z,{ref:S,onSelect:function(i){E({name:i.Name,alise:[""],subnet:i.IPAM.Config[0].Subnet,subnetV6:i.IPAM.Config[1]&&i.IPAM.Config[1].Subnet})}})]})}),dn=sn,cn=(0,t.forwardRef)(function(v,L){var A=(0,t.useState)(""),S=V()(A,2),E=S[0],F=S[1],i=(0,t.useRef)(),g=(0,t.useContext)(ee.Z),I=g.createFormRef;return(0,t.useImperativeHandle)(L,function(){return{setExposePort:function(d){if(d){var l,s,f=(l=(s=i.current)===null||s===void 0?void 0:s.getList())!==null&&l!==void 0?l:[];Object.keys(d).map(function(c){var x=!1;if(f.map(function(_){_.dest==c&&(x=!0)}),!x){var p;(p=i.current)===null||p===void 0||p.add({host:"",dest:c})}})}},setHostname:function(d){F(d)},addPortItem:function(d,l){var s,f=(s=i.current)===null||s===void 0?void 0:s.getList(),c=!1;if(f==null||f.map(function(p){if(p.host==d){c=!0;return}}),!c){var x;(x=i.current)===null||x===void 0||x.add({host:String(d),dest:String(l)})}}}}),(0,e.jsx)(j.Z,{title:"\u7ED1\u5B9A\u7AEF\u53E3",tooltip:"\u8BBF\u95EE\u7AEF\u53E3\u7559\u7A7A\u65F6\u968F\u673A\u751F\u6210\u7AEF\u53E3\uFF0C\u5168\u90E8\u5220\u9664\u5219\u8868\u793A\u4E0D\u66B4\u9732\u7AEF\u53E3",headerBordered:!0,extra:(0,e.jsxs)(k.Z,{children:[v.showBindHost&&(0,e.jsx)(de.Z,{name:"useHostNetwork",fieldProps:{checkedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",unCheckedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",onChange:function(d){if(d){var l;(l=I.current)===null||l===void 0||l.setFieldsValue({bindIpV6:!1,publishAllPorts:!1})}}}}),v.showBindIpV6&&(0,e.jsx)(D.Z,{name:["siteName","useHostNetwork"],children:function(d){var l=d.useHostNetwork;return(0,e.jsx)(de.Z,{name:"publishAllPorts",fieldProps:{checkedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3",unCheckedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3"},disabled:l},"publishAllPorts")}}),v.showBindIpV6&&(0,e.jsx)(D.Z,{name:["siteName","useHostNetwork"],children:function(d){var l=d.useHostNetwork;return(0,e.jsx)(de.Z,{name:"bindIpV6",fieldProps:{checkedChildren:"IpV6",unCheckedChildren:"IpV6"},disabled:l},"bindIpV6")}})]}),children:(0,e.jsx)(D.Z,{name:["useHostNetwork","bindIpV6","publishAllPorts"],children:function(d){var l=d.useHostNetwork,s=d.bindIpV6,f=d.publishAllPorts;if(!l&&!f)return(0,e.jsx)(Ee.u,{name:"ports",actionRef:i,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BF9\u5916\u90E8\u8BBF\u95EE"},min:0,copyIconProps:!1,children:(0,e.jsxs)(R.UW,{children:[(0,e.jsx)(m.Z,{width:v.showInDrawer?"sm":"md",name:"host",label:"\u5916\u90E8\u8BBF\u95EE\u7AEF\u53E3",tooltip:"\u5BF9\u5916\u8BBF\u95EE\u53EF\u4EE5\u901A\u8FC7\u6DFB\u52A0\u8BBF\u95EE\u7AEF\u53E3\u6216\u662F\u521B\u5EFA\u5B8C\u6210\u540E\u5BF9\u5BB9\u5668\u7ED1\u5B9A\u57DF\u540D",placeholder:"\u7559\u7A7A\u5C06\u4F7F\u7528\u968F\u673A\u7AEF\u53E3\uFF0C\u7ED1\u5B9AIpV6\u5FC5\u586B",required:s,rules:[{required:s}]}),(0,e.jsx)(m.Z,{label:"\u5BB9\u5668\u5185\u7AEF\u53E3",width:v.showInDrawer?"sm":"md",name:"dest",placeholder:"\u6784\u5EFA\u65F6 Expose \u6307\u5B9A\u7684\u7AEF\u53E3",required:!0,rules:[{required:!0}]})]})})}})})}),mn=cn,Fe=n(52255);function fn(){var v=(0,t.useRef)(),L=function(E){var F,i,g=!1,I=(F=(i=v.current)===null||i===void 0?void 0:i.getList())!==null&&F!==void 0?F:[];if(I.map(function(d){d.name==E.name&&(g=!0)}),!g){var O;(O=v.current)===null||O===void 0||O.add(E)}},A=function(E){var F,i,g=!1,I=(F=(i=v.current)===null||i===void 0?void 0:i.getList())!==null&&F!==void 0?F:[];I.map(function(O,d){if(O.name==E){var l;(l=v.current)===null||l===void 0||l.remove(d)}})};return(0,e.jsx)(j.Z,{title:"\u5173\u8054\u5BBF\u4E3B\u673A\u7F51\u7EDC\u5185\u4E3B\u673A",tooltip:"\u5BB9\u5668\u5185\u5982\u679C\u9700\u8981\u8BF7\u6C42\u5BBF\u4E3B\u673A\u6240\u5728\u7684\u7F51\u7EDC\u4E2D\u7684\u4E3B\u673A\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6B64\u914D\u7F6E\u5C06Ip\u6CE8\u5165\u5230\u5BB9\u5668\u4E2D",extra:(0,e.jsx)(k.Z,{children:(0,e.jsx)(de.Z,{name:"enableBindHost",fieldProps:{checkedChildren:"\u7ED1\u5B9A\u5BBF\u4E3B\u673AIp",unCheckedChildren:"\u7ED1\u5B9A\u5BBF\u4E3B\u673AIp",onChange:function(E){E?L({name:"host.dpanel.local",value:"host-gateway"}):A("host.dpanel.local")}}})}),children:(0,e.jsx)(Ee.u,{name:"extraHosts",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BBF\u4E3B\u673A\u7F51\u7EDC\u5173\u8054"},actionRef:v,copyIconProps:!1,min:0,children:(0,e.jsxs)(R.UW,{children:[(0,e.jsx)(m.Z,{width:"md",name:"name",label:"Hostname",placeholder:""}),(0,e.jsx)(m.Z,{width:"md",name:"value",label:"ip",placeholder:""})]})})})}var Le=n(90672),vn=(0,t.forwardRef)(function(v,L){return(0,t.useImperativeHandle)(L,function(){return{}}),(0,e.jsxs)(j.Z,{title:"\u7F51\u7EDC\u914D\u7F6E",children:[(0,e.jsxs)(R.UW,{children:[(0,e.jsx)(m.Z,{label:"\u914D\u7F6E ipV4 \u5730\u5740",name:["ipV4","address"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u5730\u5740\uFF0C\u4F8B\u5982 192.168.1.5",placeholder:"192.168.1.5"}),(0,e.jsx)(D.Z,{name:["ipV4"],children:function(S){var E=S.ipV4;return(0,e.jsx)(m.Z,{label:"\u914D\u7F6E ipV4 \u5B50\u7F51",name:["ipV4","subnet"],width:"md",required:E&&E.address,tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u6240\u5728\u7684\u5B50\u7F51\uFF0C\u4F8B\u5982 192.168.1.0/24",placeholder:"192.168.1.0/24",rules:[{required:E&&E.address}]})}}),(0,e.jsx)(m.Z,{label:"\u914D\u7F6E ipV4 \u7F51\u5173",name:["ipV4","gateway"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u7684\u7F51\u5173\uFF0C\u4F8B\u5982 192.168.1.1",placeholder:"192.168.1.1"}),(0,e.jsx)(de.Z,{label:"\u81EA\u5B9A\u4E49ipV6",name:"enableIpV6Address"})]}),(0,e.jsx)(D.Z,{name:["enableIpV6Address"],children:function(S){var E=S.enableIpV6Address;if(E)return(0,e.jsxs)(R.UW,{children:[(0,e.jsx)(m.Z,{label:"\u914D\u7F6E ipV6 \u5730\u5740",name:["ipV6","address"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipV6\u5730\u5740\uFF0C\u4F8B\u5982 2001:db8::5",placeholder:"2001:db8::5"}),(0,e.jsx)(D.Z,{name:["ipV6"],children:function(i){var g=i.ipV6;return(0,e.jsx)(m.Z,{label:"\u914D\u7F6E ipV6 \u5B50\u7F51",name:["ipV6","subnet"],width:"md",required:g&&g.address,tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u6240\u5728\u7684\u5B50\u7F51\uFF0C\u4F8B\u5982 2001:db8::/48",placeholder:"2001:db8::/48",rules:[{required:g&&g.address}]})}}),(0,e.jsx)(m.Z,{label:"\u914D\u7F6E ipV6 \u7F51\u5173",name:["ipV6","gateway"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipV6\u7684\u7F51\u5173\uFF0C\u4F8B\u5982 2001:db8::1",placeholder:"2001:db8::1"})]})}}),(0,e.jsx)(Le.Z,{label:"DNS\u914D\u7F6E",name:"dns",placeholder:"\u8BF7\u6307\u5B9Adns\u5730\u5740\uFF0C\u4F8B\u5982\uFF1A8.8.8.8\uFF0C\u4E00\u884C\u6DFB\u4E00\u6761dns\u5730\u5740"})]})}),hn=vn,Ve=n(31199),pn=n(86250);function En(){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(j.Z,{title:"\u9644\u52A0\u6267\u884C\u811A\u672C",headerBordered:!0,subTitle:"",children:(0,e.jsx)(Le.Z,{label:"\u5BB9\u5668\u521B\u5EFA\u540E\u6267\u884C\u811A\u672C",name:["hook","containerCreate"],placeholder:"\u5BB9\u5668\u5728\u521B\u5EFA\u540E\u6267\u884C\u7684\u811A\u672C\uFF0C\u6B64\u811A\u672C\u5E76\u4E0D\u4F1A\u5F71\u54CD entrypoint \u53CA command\u3002\u4F8B\u5982\uFF1Als -al && touch abc.txt && apt update"})}),(0,e.jsxs)(j.Z,{title:"\u5065\u5EB7\u68C0\u67E5",headerBordered:!0,children:[(0,e.jsxs)(pn.Z,{gap:20,justify:"start",children:[(0,e.jsx)(Ve.Z,{label:"\u91CD\u590D\u95F4\u9694\u65F6\u95F4\uFF08\u79D2\uFF09",name:["healthcheck","interval"],initialValue:30}),(0,e.jsx)(Ve.Z,{label:"\u8D85\u65F6\u5931\u8D25\u65F6\u95F4\uFF08\u79D2\uFF09",name:["healthcheck","timeout"],initialValue:10}),(0,e.jsx)(Ve.Z,{label:"\u5931\u8D25\u91CD\u590D\u6B21\u6570",name:["healthcheck","retries"],initialValue:3}),(0,e.jsx)(_e.Z,{width:"sm",label:"\u811A\u672C\u6267\u884C\u73AF\u5883",initialValue:"CMD",name:["healthcheck","shellType"],valueEnum:{CMD:"\u5728 Docker \u73AF\u5883\u6267\u884C","CMD-SHELL":"\u5728\u5BB9\u5668\u5185\u6267\u884C"}})]}),(0,e.jsx)(Le.Z,{label:"\u6267\u884C\u811A\u672C",name:["healthcheck","cmd"],placeholder:"\u914D\u7F6E\u5BB9\u5668\u5065\u5EB7\u68C0\u67E5\u811A\u672C\uFF0C\u4F8B\u5982\uFF1Acurl -f http://localhost:8080/ || exit 1"})]})]})}var Cn=n(74763),Ge=n(2487),Fn=[{name:"ALL"},{name:"AUDIT_CONTROL"},{name:"AUDIT_WRITE",default:!0},{name:"BLOCK_SUSPEND"},{name:"CHOWN",default:!0},{name:"DAC_OVERRIDE",default:!0},{name:"DAC_READ_SEARCH"},{name:"FOWNER",default:!0},{name:"FSETID",default:!0},{name:"IPC_LOCK"},{name:"IPC_OWNER"},{name:"KILL",default:!0},{name:"LEASE"},{name:"LINUX_IMMUTABLE"},{name:"MAC_ADMIN"},{name:"MAC_OVERRIDE"},{name:"MKNOD",default:!0},{name:"NET_ADMIN"},{name:"NET_BIND_SERVICE",default:!0},{name:"NET_BROADCAST"},{name:"NET_RAW",default:!0},{name:"SETFCAP",default:!0},{name:"SETGID",default:!0},{name:"SETPCAP",default:!0},{name:"SETUID",default:!0},{name:"SYSLOG"},{name:"SYS_ADMIN"},{name:"SYS_BOOT"},{name:"SYS_CHROOT",default:!0},{name:"SYS_MODULE"},{name:"SYS_NICE"},{name:"SYS_PACCT"},{name:"SYS_PTRACE"},{name:"SYS_RAWIO"},{name:"SYS_RESOURCE"},{name:"SYS_TIME"},{name:"SYS_TTY_CONFIG"}],gn=(0,t.forwardRef)(function(v,L){var A=(0,t.useContext)(Ne.Z),S=A.lang,E=(0,t.useState)(null),F=V()(E,2),i=F[0],g=F[1],I=(0,t.useContext)(ee.Z),O=I.createFormRef;return(0,t.useImperativeHandle)(L,function(){return{}}),(0,e.jsx)(j.Z,{children:(0,e.jsx)(Ge.Z,{grid:{gutter:10,xs:3,sm:3,md:4,lg:4,xl:4,xxl:6},dataSource:Fn,renderItem:function(l,s){var f;return(0,e.jsx)(Ge.Z.Item,{children:(0,e.jsx)(de.Z,{fieldProps:{onChange:function(x){l.name=="ALL"&&g(x)}},disabled:l.name!="ALL"&&((0,Cn.k)(i)?(f=O.current)===null||f===void 0?void 0:f.getFieldValue(["capAdd","ALL"]):i),initialValue:l.default,name:["capAdd",l.name],tooltip:S("app.create.cap."+l.name.toLocaleLowerCase()),label:l.name})},s)}})})}),xn=gn;function jn(){var v,L=(0,t.useContext)(Ne.Z),A=L.loading,S=L.notice,E=(0,t.useContext)(ee.Z),F=E.createFormRef,i=E.volumeListRef,g=E.domainRef,I=E.createEnvRef,O=E.createLinkRef,d=(0,ke.useSearchParams)(),l=V()(d,2),s=l[0],f=l[1],c=(0,ke.useNavigate)(),x=(0,t.useState)("basic"),p=V()(x,2),_=p[0],w=p[1],X=s.get("id"),ge=(v=s.get("imageId"))!==null&&v!==void 0?v:"",le=(0,ke.useLocation)();return(0,t.useEffect)(function(){if(X)A.show(),(0,$e.iE)({id:X}).then(function(){var a=y()(C()().mark(function q(u){var he,ne,T,ae,xe,ce,je,Ue;return C()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(T={info:{}},!u.data.env.imageName){me.next=11;break}return me.prev=2,me.next=5,(0,te.YU)({md5:u.data.env.imageName});case 5:ae=me.sent,T=ae.data,me.next=11;break;case 9:me.prev=9,me.t0=me.catch(2);case 11:u.data.env.ports&&u.data.env.ports.map(function(z){return z.host=="0"&&(z.host=""),z}),xe=u.data.env.bindIpV6,u.data.containerInfo&&u.data.containerInfo.Info.NetworkSettings&&u.data.containerInfo.Info.NetworkSettings.Networks&&Object.keys(u.data.containerInfo.Info.NetworkSettings.Networks).map(function(z){if(u.data.env.network&&(u.data.env.network=u.data.env.network.map(function(We){return z==We.name&&u.data.containerInfo&&(We.subnet=u.data.containerInfo.Info.NetworkSettings.Networks[z].IPAddress+"/"+u.data.containerInfo.Info.NetworkSettings.Networks[z].IPPrefixLen),We})),u.data.containerInfo&&u.data.containerInfo.Info.NetworkSettings.Networks[z].IPv6Gateway!=""&&z==u.data.siteName&&(xe=!0),z=="bridge"){var Be;(Be=F.current)===null||Be===void 0||Be.setFieldValue("useBridgeNetwork",!0)}}),u.data.env.extraHosts&&u.data.env.extraHosts.map(function(z){if(z.value=="host-gateway"){var Be;(Be=F.current)===null||Be===void 0||Be.setFieldValue("enableBindHost",!0)}}),ce=u.data.env.ports,u.data.env.ports&&(ce=u.data.env.ports.map(function(z){return z.host=z.host!=""?(z.hostIp?z.hostIp+":":"")+z.host:"",z})),(he=F.current)===null||he===void 0||he.setFieldsValue({siteTitle:u.data.siteTitle,siteName:u.data.siteName,imageName:u.data.env.imageName,privileged:u.data.env.privileged,bindIpV6:u.data.env.useHostNetwork?!1:xe,useHostNetwork:u.data.env.useHostNetwork,publishAllPorts:u.data.env.useHostNetwork?!1:u.data.env.publishAllPorts,workDir:{value:u.data.env.workDir,useDefault:!u.data.env.workDir,default:T&&T.info.Config&&T.info.Config.WorkingDir},user:{value:u.data.env.user,useDefault:!u.data.env.user,default:T&&T.info.Config&&T.info.Config.User},command:{value:u.data.env.command,useDefault:!u.data.env.command,default:T&&T.info.Config&&T.info.Config.Cmd&&T.info.Config.Cmd.join(" ")},entrypoint:{value:u.data.env.entrypoint,useDefault:!u.data.env.entrypoint,default:T&&T.info.Config&&T.info.Config.Entrypoint&&T.info.Config.Entrypoint.join(" ")},shmsize:(ne=u.data.env.shmsize)!==null&&ne!==void 0?ne:"64M",cpus:u.data.env.cpus,memory:u.data.env.memory,environment:u.data.env.environment,label:u.data.env.label,volumes:u.data.env.volumes,ports:ce,links:u.data.env.links,network:u.data.env.network,restart:u.data.env.restart,extraHosts:u.data.env.extraHosts,autoRemove:u.data.env.autoRemove,log:u.data.env.log,dns:u.data.env.dns&&u.data.env.dns.join(`
`),ipV4:u.data.env.ipV4,ipV6:u.data.env.ipV6,gpus:u.data.env.gpus,device:u.data.env.device,hook:u.data.env.hook,hostPid:u.data.env.hostPid,capAdd:u.data.env.capAdd&&Object.fromEntries(u.data.env.capAdd.map(function(z){return[z,!0]}))}),u.data.env.ipV6&&((je=F.current)===null||je===void 0||je.setFieldValue("enableIpV6Address",!0)),u.data.env.healthcheck&&u.data.env.healthcheck.cmd&&u.data.env.healthcheck.cmd!=""&&((Ue=F.current)===null||Ue===void 0||Ue.setFieldsValue({healthcheck:u.data.env.healthcheck}));case 20:case"end":return me.stop()}},q,null,[[2,9]])}));return function(q){return a.apply(this,arguments)}}()).finally(function(){A.destroy()});else{var H,Z;(H=F.current)===null||H===void 0||H.resetFields(),(Z=F.current)===null||Z===void 0||Z.setFieldValue("useBridgeNetwork",!0)}},[s]),(0,e.jsx)(K._z,{children:(0,e.jsx)(j.Z,{direction:"column",gutter:[0,10],children:(0,e.jsxs)(Y.A,{submitter:{render:function(Z,a){return(0,e.jsx)(Q.S,{children:a})}},formRef:F,onFinish:function(){var H=y()(C()().mark(function Z(a){var q,u,he,ne,T,ae;return C()().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(ae={siteTitle:a.siteTitle,siteName:a.siteName,hostname:a.hostname,imageName:a.imageName,environment:a.environment,links:a.links,ports:a.ports,volumes:a.volumes,network:(q=a.network)!==null&&q!==void 0?q:[],privileged:(u=a.privileged)!==null&&u!==void 0?u:!1,autoRemove:(he=a.autoRemove)!==null&&he!==void 0?he:!1,restart:a.restart,cpus:a.cpus,memory:a.memory,shmsize:(ne=a.shmsize)!==null&&ne!==void 0?ne:0,workDir:a.workDir&&!a.workDir.useDefault?a.workDir.value:"",user:a.user&&!a.user.useDefault?a.user.value:"",command:a.command&&!a.command.useDefault?a.command.value:"",entrypoint:a.entrypoint&&!a.entrypoint.useDefault?a.entrypoint.value:"",useHostNetwork:a.useHostNetwork,bindIpV6:a.bindIpV6,log:a.log,dns:a.dns&&a.dns!=""?a.dns.split(`
`):[],label:a.label,publishAllPorts:a.publishAllPorts,extraHosts:a.extraHosts,ipV4:a.ipV4,ipV6:a.ipV6,device:a.device,gpus:a.gpus,hook:a.hook,hostPid:a.hostPid,capAdd:a.capAdd?Object.keys(a.capAdd).map(function(je){return je}):[],useBridgeNetwork:(T=a.useBridgeNetwork)!==null&&T!==void 0?T:!0},!(!a.useBridgeNetwork&&!a.useHostNetwork&&(!a.network||a.network.length==0))){ce.next=4;break}return S.error("\u4E0D\u52A0\u5165 Bridge \u7F51\u7EDC\u65F6\uFF0C\u5FC5\u987B\u6307\u5B9A\u4E00\u4E2A\u81EA\u5B9A\u4E49\u7F51\u7EDC"),ce.abrupt("return",!1);case 4:return a.useBridgeNetwork&&!ae.network.find(function(je){return je.name=="bridge"})&&ae.network.push({name:"bridge",alise:[],ipV4:""}),a.healthcheck&&a.healthcheck.cmd&&a.healthcheck.cmd!=""&&(ae.healthcheck=a.healthcheck),X&&(ae.containerId=X),ce.next=9,(0,$e.$G)(ae);case 9:return c("/app/list",{state:{page:localStorage.getItem("dpanel-page-app-list")}}),ce.abrupt("return",!0);case 11:case"end":return ce.stop()}},Z)}));return function(Z){return H.apply(this,arguments)}}(),children:[(0,e.jsxs)(j.Z,{title:"\u57FA\u7840\u4FE1\u606F",headerBordered:!0,children:[(0,e.jsx)(m.Z,{name:"siteTitle",label:"\u5BB9\u5668\u63CF\u8FF0",fieldProps:{onChange:function(Z){var a="";if(Z.target.value&&!X){var q,u=(0,rn.N9)(Z.target.value.trim(),{toneType:"none",type:"array"});a=u.join(""),(q=F.current)===null||q===void 0||q.setFieldValue("siteName",a)}}},placeholder:"\u8BF7\u8F93\u5165\u5BB9\u5668\u63CF\u8FF0\u540D\u79F0"}),(0,e.jsxs)(R.UW,{children:[(0,e.jsx)(m.Z,{width:"lg",name:"siteName",label:"\u5BB9\u5668\u6807\u8BC6",tooltip:"\u5BB9\u5668\u552F\u4E00\u6807\u8BC6\uFF0C\u7528\u4E8E\u6807\u8BC6\u5BB9\u5668\u548C\u5185\u90E8\u8BBF\u95EE",required:!0,rules:[{required:!0}],placeholder:"\u8BF7\u8F93\u5165\u5BB9\u5668\u6807\u8BC6\u540D\u79F0",disabled:!!X}),(0,e.jsx)(m.Z,{label:"Hostname",name:"hostname",width:"md"})]}),(0,e.jsx)(ie,{redeploy:!!X,fromImageId:ge})]}),(0,e.jsx)(N.Z,{offsetTop:50,children:(0,e.jsx)(j.Z,{style:{marginBottom:-20},children:(0,e.jsx)(J.Z,{activeKey:_,onChange:function(Z){w(Z),window.scrollTo(0,450)},items:[{label:"\u57FA\u672C\u914D\u7F6E",key:"basic"},{label:"\u5173\u8054\u914D\u7F6E",key:"link"},{label:"\u8FD0\u884C\u914D\u7F6E",key:"run-command"},{label:"\u8D44\u6E90\u914D\u7F6E",key:"resource"},{label:"Hook",key:"hook"},{label:"\u80FD\u529B\u914D\u7F6E",key:"cap"},{label:"\u5176\u5B83",key:"other"}]})})}),(0,e.jsxs)(Fe.Z,{show:_=="basic",children:[(0,e.jsx)(mn,{ref:g,showBindHost:!0,showBindIpV6:!0}),(0,e.jsx)(Ie.Z,{showAddButton:!0,showImportButton:!0,showCodeMode:!0,label:"\u73AF\u5883\u53D8\u91CF",ref:I}),(0,e.jsx)(ze,{showDefault:!0,ref:i}),(0,e.jsx)(D.Z,{name:["siteName","useHostNetwork"],children:function(Z){var a=Z.siteName,q=Z.useHostNetwork;if(!q)return(0,e.jsx)(hn,{})}})]}),(0,e.jsx)(Fe.Z,{show:_=="link",children:(0,e.jsx)(D.Z,{name:["siteName","useHostNetwork"],children:function(Z){var a=Z.siteName,q=Z.useHostNetwork;return q?(0,e.jsx)(h.Z,{showIcon:!0,description:"\u7ED1\u5B9A\u5230\u5BBF\u4E3B\u673A\u7F51\u7EDC\u65F6\uFF0C\u65E0\u6CD5\u901A\u8FC7 Docker \u5173\u8054\u5176\u5B83\u5BB9\u5668\u3002\u8BF7\u4F7F\u7528\u5BBF\u4E3B\u673A\u5185\u7F51IP\u6216\u662F127.0.0.1\u4E92\u8054\u5BB9\u5668\u66B4\u9732\u7AEF\u53E3\u3002"}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Te,{onAddEnv:function(he,ne){var T;(T=I.current)===null||T===void 0||T.addEnvItem(he,ne)},ref:O}),(0,e.jsx)(dn,{showUseBridgeNetwork:!0,siteName:a}),(0,e.jsx)(fn,{})]})}})}),(0,e.jsx)(Fe.Z,{show:_=="run-command",children:(0,e.jsx)(an,{})}),(0,e.jsx)(Fe.Z,{show:_=="resource",children:(0,e.jsx)(qe,{})}),(0,e.jsx)(Fe.Z,{show:_=="hook",children:(0,e.jsx)(En,{})}),(0,e.jsx)(Fe.Z,{show:_=="other",children:(0,e.jsx)(en,{})}),(0,e.jsx)(Fe.Z,{show:_=="cap",children:(0,e.jsx)(xn,{})})]},"form")})})}},2831:function(fe,$,n){n.d($,{Ll:function(){return Q},aF:function(){return V},d6:function(){return R},u5:function(){return j}});var b=n(15009),C=n.n(b),G=n(99289),y=n.n(G),W=n(82346);function V(){return K.apply(this,arguments)}function K(){return K=y()(C()().mark(function N(){return C()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,W.request)("/api/common/home/info",{method:"POST"});case 2:return h.abrupt("return",h.sent);case 3:case"end":return h.stop()}},N)})),K.apply(this,arguments)}function j(){return Y.apply(this,arguments)}function Y(){return Y=y()(C()().mark(function N(){return C()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,W.request)("/api/common/home/check-new-version",{method:"POST"});case 2:return h.abrupt("return",h.sent);case 3:case"end":return h.stop()}},N)})),Y.apply(this,arguments)}function Q(){return m.apply(this,arguments)}function m(){return m=y()(C()().mark(function N(){return C()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,W.request)("/api/common/home/usage",{method:"POST"});case 2:return h.abrupt("return",h.sent);case 3:case"end":return h.stop()}},N)})),m.apply(this,arguments)}function R(){return D.apply(this,arguments)}function D(){return D=y()(C()().mark(function N(){return C()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,W.request)("/api/common/home/upgrade-script",{method:"POST"});case 2:return h.abrupt("return",h.sent);case 3:case"end":return h.stop()}},N)})),D.apply(this,arguments)}},86250:function(fe,$,n){n.d($,{Z:function(){return te}});var b=n(67294),C=n(93967),G=n.n(C),y=n(98423),W=n(98065),V=n(53124),K=n(83559),j=n(83262);const Y=["wrap","nowrap","wrap-reverse"],Q=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],m=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],R=(o,r)=>{const P=r.wrap===!0?"wrap":r.wrap;return{[`${o}-wrap-${P}`]:P&&Y.includes(P)}},D=(o,r)=>{const P={};return m.forEach(B=>{P[`${o}-align-${B}`]=r.align===B}),P[`${o}-align-stretch`]=!r.align&&!!r.vertical,P},N=(o,r)=>{const P={};return Q.forEach(B=>{P[`${o}-justify-${B}`]=r.justify===B}),P};function J(o,r){return G()(Object.assign(Object.assign(Object.assign({},R(o,r)),D(o,r)),N(o,r)))}var h=J;const t=o=>{const{componentCls:r}=o;return{[r]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},ee=o=>{const{componentCls:r}=o;return{[r]:{"&-gap-small":{gap:o.flexGapSM},"&-gap-middle":{gap:o.flexGap},"&-gap-large":{gap:o.flexGapLG}}}},re=o=>{const{componentCls:r}=o,P={};return Y.forEach(B=>{P[`${r}-wrap-${B}`]={flexWrap:B}}),P},M=o=>{const{componentCls:r}=o,P={};return m.forEach(B=>{P[`${r}-align-${B}`]={alignItems:B}}),P},ue=o=>{const{componentCls:r}=o,P={};return Q.forEach(B=>{P[`${r}-justify-${B}`]={justifyContent:B}}),P},k=()=>({});var oe=(0,K.I$)("Flex",o=>{const{paddingXS:r,padding:P,paddingLG:B}=o,U=(0,j.IX)(o,{flexGapSM:r,flexGap:P,flexGapLG:B});return[t(U),ee(U),re(U),M(U),ue(U)]},k,{resetStyle:!1}),ve=function(o,r){var P={};for(var B in o)Object.prototype.hasOwnProperty.call(o,B)&&r.indexOf(B)<0&&(P[B]=o[B]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var U=0,B=Object.getOwnPropertySymbols(o);U<B.length;U++)r.indexOf(B[U])<0&&Object.prototype.propertyIsEnumerable.call(o,B[U])&&(P[B[U]]=o[B[U]]);return P},te=b.forwardRef((o,r)=>{const{prefixCls:P,rootClassName:B,className:U,style:De,flex:se,gap:Ce,children:Oe,vertical:Ae=!1,component:Ze="div"}=o,e=ve(o,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:ie,direction:we,getPrefixCls:ye}=b.useContext(V.E_),pe=ye("flex",P),[Ee,be,Me]=oe(pe),Se=Ae!=null?Ae:ie==null?void 0:ie.vertical,Te=G()(U,B,ie==null?void 0:ie.className,pe,be,Me,h(pe,o),{[`${pe}-rtl`]:we==="rtl",[`${pe}-gap-${Ce}`]:(0,W.n)(Ce),[`${pe}-vertical`]:Se}),Ie=Object.assign(Object.assign({},ie==null?void 0:ie.style),De);return se&&(Ie.flex=se),Ce&&!(0,W.n)(Ce)&&(Ie.gap=Ce),Ee(b.createElement(Ze,Object.assign({ref:r,className:Te,style:Ie},(0,y.Z)(e,["justify","wrap","align"])),Oe))})}}]);
