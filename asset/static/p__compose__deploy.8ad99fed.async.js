"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7667],{99861:function(N,U,e){var Z=e(15009),i=e.n(Z),A=e(64599),P=e.n(A),E=e(99289),O=e.n(E),h=e(5574),W=e.n(h),c=e(83062),o=e(14726),D=e(42119),a=e(67294),x=e(92754),n=e(3393),s=e(184),f=e(38345),u=e(23430),_=e(85893),d=(0,a.forwardRef)(function(I,L){(0,a.useImperativeHandle)(L,function(){return{}});var T=(0,a.useState)(0),p=W()(T,2),z=p[0],V=p[1],J=(0,a.useRef)();return(0,_.jsxs)(s.a,{trigger:(0,_.jsx)(c.Z,{title:"\u5F53\u90E8\u7F72\u65F6\u65E0\u6CD5\u6B63\u5E38\u62C9\u53D6\u955C\u50CF\u65F6\uFF0C\u53EF\u4EE5\u624B\u52A8\u4F7F\u7528\u9762\u677F\u7684\u4ED3\u5E93\u52A0\u901F\u529F\u80FD\u62C9\u53D6\u6240\u6709\u955C\u50CF",children:(0,_.jsx)(o.ZP,{icon:(0,_.jsx)(u.Z,{}),children:I.title?I.title:"\u4E00\u952E\u62C9\u53D6\u955C\u50CF"})}),width:800,submitter:!1,title:"\u4E00\u952E\u62C9\u53D6\u955C\u50CF",onOpenChange:function(){var w=O()(i()().mark(function v(y){var C,t,j,S,G,b,H;return i()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(!y){F.next=25;break}t=0,j=P()(I.image),F.prev=3,j.s();case 5:if((S=j.n()).done){F.next=15;break}return b=S.value,V(t),(G=J.current)===null||G===void 0||G.setStart(b),F.next=11,(0,n.Gb)({tag:b,type:"pull"});case 11:H=F.sent,t++;case 13:F.next=5;break;case 15:F.next=20;break;case 17:F.prev=17,F.t0=F.catch(3),j.e(F.t0);case 20:return F.prev=20,j.f(),F.finish(20);case 23:(C=J.current)===null||C===void 0||C.setFinish(),V(t);case 25:case"end":return F.stop()}},v,null,[[3,17,20,23]])}));return function(v){return w.apply(this,arguments)}}(),children:[(0,_.jsx)(f.Z,{children:(0,_.jsx)(D.Z,{current:z,items:I.image.map(function(w,v){return{title:w,key:v}})})}),(0,_.jsx)(f.Z,{children:(0,_.jsx)(x.Z,{ref:J})})]})});U.Z=d},91058:function(N,U,e){var Z=e(5574),i=e.n(Z),A=e(89035),P=e(38345),E=e(17186),O=e(24739),h=e(5966),W=e(42075),c=e(14726),o=e(85576),D=e(67294),a=e(95089),x=e(89063),n=e(85893),s="docker-image",f=(0,D.forwardRef)(function(u,_){var d=(0,D.useState)(s),I=i()(d,2),L=I[0],T=I[1],p=(0,D.useRef)(),z=(0,D.useState)(""),V=i()(z,2),J=V[0],w=V[1],v=function(){L!="code"?T("code"):T(s)};(0,D.useImperativeHandle)(_,function(){return{addEnvItem:function(j,S){var G,b=(G=p.current)===null||G===void 0?void 0:G.getList(),H=!1;if(b==null||b.map(function(F){if(F.name==j){H=!0;return}}),!H){var q;(q=p.current)===null||q===void 0||q.add({name:j,value:S})}},clear:function(){var j;(j=p.current)===null||j===void 0||(j=j.getList())===null||j===void 0||j.map(function(S,G){var b;(b=p.current)===null||b===void 0||b.remove(G)})}}});function y(t){try{var j,S;t==""&&(t=C());for(var G=(j=(S=p.current)===null||S===void 0||(S=S.getList())===null||S===void 0?void 0:S.length)!==null&&j!==void 0?j:0,b=G;b>=0;b--){var H;(H=p.current)===null||H===void 0||H.remove(b)}var q=t.split(`
`),F=0;q.map(function(ue){var r,ee=ue.split("=");ee.length<2||((r=p.current)===null||r===void 0||r.add({name:ee[0],value:ee.slice(1).join("=")},F),F++)})}catch(ue){console.log(ue)}}function C(){if(p&&p.current&&p.current.getList){var t,j=(t=p.current)===null||t===void 0?void 0:t.getList();if(j){var S=[];return j.map(function(G){S.push("".concat(G.name,"=").concat(G.value))}),S.join(`
`)}else return""}else return""}return(0,n.jsxs)(P.Z,{ghost:u.showCardGhost,title:"\u73AF\u5883\u53D8\u91CF",headerBordered:!0,extra:(0,n.jsxs)(W.Z,{children:[u.showImportButton&&(0,n.jsx)("div",{style:{marginBottom:"-25px"},children:(0,n.jsx)(x.Z,{title:"\u5BFC\u5165 env \u6587\u4EF6",onImport:function(j){return y(j),!0},onLoad:function(j){if(j.indexOf("=")<0)throw new Error("\u5BFC\u5165env\u6587\u4EF6\u9519\u8BEF");return!0}})}),(0,n.jsx)(c.ZP,{icon:(0,n.jsx)(A.Z,{}),type:L=="code"?"primary":"default",onClick:v,children:"\u4EE3\u7801\u6A21\u5F0F"},"code")]}),children:[(0,n.jsx)(E.u,{name:u.name?u.name:"environment",actionRef:p,creatorButtonProps:u.showAddButton?{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u73AF\u5883\u53D8\u91CF"}:!1,copyIconProps:!1,min:0,children:(0,n.jsxs)(O.UW,{children:[(0,n.jsx)(h.Z,{width:u.showInDrawer?"sm":"md",name:"name",label:"\u53D8\u91CF\u540D",required:!0,rules:[{required:!0}],disabled:u.showDisableName,placeholder:"\u8F93\u5165\u53D8\u91CF\u540D\u79F0"}),(0,n.jsx)(h.Z,{width:u.showInDrawer?"sm":"md",name:"value",label:"\u53D8\u91CF\u503C",rules:[{required:!!u.requireValue}],placeholder:"\u8F93\u5165\u53D8\u91CF\u503C\uFF0C\u53EF\u4EE5\u4E3A\u7A7A"})]})}),(0,n.jsx)(o.Z,{width:"800px",open:L=="code",onCancel:function(){return T("docker-image")},onOk:function(){y(J),T("docker-image")},children:(0,n.jsx)(a.ZP,{onChange:function(j){return w(j)},value:C(),height:"680px",theme:"light"})})]})});U.Z=f},80821:function(N,U,e){e.d(U,{Z:function(){return c}});var Z=e(5574),i=e.n(Z),A=e(24963),P=e(86738),E=e(14726),O=e(83062),h=e(67294),W=e(85893);function c(o){var D=(0,h.useState)(!1),a=i()(D,2),x=a[0],n=a[1],s=(0,h.useContext)(A.Z),f=s.lang,u=s.notice,_=s.message,d=function(){n(!0),o.action().then(function(L){if(n(!1),typeof o.onSuccess=="function"&&o.onSuccess(L),o.messageSuccess){var T="";typeof o.messageSuccess=="function"?T=o.messageSuccess(L):T=o.messageSuccess,T.indexOf(".")>-1&&(T=f(T)),o.asynced?_.info(T):_.success(T)}}).catch(function(L){n(!1),typeof o.onError=="function"&&o.onError(L)})};return o.confirm?(0,W.jsx)(P.Z,{style:{width:500},title:o.confirmTitle?o.confirmTitle:f("notification.title.tip"),description:o.confirm,onConfirm:d,okText:"Yes",cancelText:"No",children:(0,W.jsx)(E.ZP,{disabled:o.disabled,icon:o.icon,loading:x,danger:o.danger,type:o.type,children:o.children})}):(0,W.jsx)(O.Z,{title:o.tips,children:(0,W.jsx)(E.ZP,{disabled:o.disabled,icon:o.icon,loading:x,onClick:d,danger:o.danger,type:o.type,children:o.children})})}},37413:function(N,U,e){e.d(U,{Z:function(){return x}});var Z=e(19632),i=e.n(Z),A=e(27496),P=e(35995),E=e(99611),O=e(29158),h=e(38345),W=e(55241),c=e(42075),o=e(66309),D=e(67294),a=e(85893);function x(n){return(0,a.jsx)(W.Z,{placement:"right",content:(0,a.jsxs)(h.Z,{direction:"column",style:{width:500},ghost:!0,children:[(0,a.jsx)(h.Z,{title:"\u7AEF\u53E3",children:[].concat(i()(n.publicPort),i()(n.privatePort)).map(function(s,f){var u=n.serverIp;return u!=""&&u.indexOf(":")>-1&&(u="[".concat(u,"]")),u==""&&s.IP=="::"&&(u="[::1]"),u==""&&s.IP=="0.0.0.0"&&(u="127.0.0.1"),u==""&&(u=s.IP),(0,a.jsx)(c.Z,{size:"large",wrap:!0,children:(0,a.jsx)(o.Z,{color:s.PublicPort?"#2db7f5":"warning",icon:s.PublicPort?(0,a.jsx)(A.Z,{}):"",style:{marginBottom:5,width:210},children:s.PublicPort?(0,a.jsx)("a",{href:"http://".concat(u,":").concat(s.PublicPort),target:"_blank",children:"".concat(s.PublicPort?s.IP+":"+s.PublicPort+" -> ":"").concat(s.PrivatePort,"/").concat(s.Type)},"link".concat(f)):"".concat(s.PrivatePort,"/").concat(s.Type)})},"space".concat(f))})}),n.domain.length>0&&(0,a.jsx)(h.Z,{title:"\u57DF\u540D",children:(0,a.jsx)(c.Z,{direction:"vertical",style:{textAlign:"left"},children:n.domain.map(function(s,f){return(0,a.jsx)(o.Z,{color:"blue",icon:(0,a.jsx)(A.Z,{}),children:(0,a.jsx)("a",{href:s,target:"_blank",children:s})},"domain".concat(f))})})})]}),children:(0,a.jsxs)(c.Z,{direction:"vertical",children:[n.privatePort.length>0&&(0,a.jsxs)(o.Z,{color:"warning",icon:(0,a.jsx)(P.Z,{}),children:["\u5185\u90E8\u7AEF\u53E3: ",n.privatePort.length]}),n.publicPort.length>0&&(0,a.jsxs)(o.Z,{color:"#2db7f5",icon:(0,a.jsx)(E.Z,{}),children:["\u5BF9\u5916\u7AEF\u53E3: ",n.publicPort.length]}),n.domain.length>0&&(0,a.jsxs)(o.Z,{color:"blue",icon:(0,a.jsx)(O.Z,{}),children:["\u7ED1\u5B9A\u57DF\u540D: ",n.domain.length]})]})})}},94359:function(N,U,e){e.d(U,{Z:function(){return x}});var Z=e(67294),i=e(3089),A=e(98165),P=e(18429),E=e(8751),O=e(14313),h=e(30159),W=e(87740),c=e(66309),o=e(83062),D=e(54006),a=e(85893);function x(n){var s=(0,a.jsx)(a.Fragment,{});if(n.status=="0"&&(s=(0,a.jsx)(c.Z,{icon:(0,a.jsx)(i.Z,{}),color:"default",children:"waiting"})),n.status=="10"&&(s=(0,a.jsx)(c.Z,{icon:(0,a.jsx)(A.Z,{spin:!0}),color:"processing",children:"processing"})),n.status=="20"&&(s=(0,a.jsx)(c.Z,{icon:(0,a.jsx)(P.Z,{}),color:"error",children:"error"})),n.status=="30"&&(s=(0,a.jsx)(c.Z,{icon:(0,a.jsx)(E.Z,{}),color:"success",children:"success"})),n.status=="running"){var f,u;s=(0,a.jsx)(c.Z,{icon:(0,a.jsx)(O.Z,{}),color:"success",children:(f=n.message)!==null&&f!==void 0&&f.showInTag?(u=n.message)===null||u===void 0?void 0:u.content:n.status})}if(n.status=="paused"){var _,d;s=(0,a.jsx)(c.Z,{icon:(0,a.jsx)(h.Z,{}),children:(_=n.message)!==null&&_!==void 0&&_.showInTag?(d=n.message)===null||d===void 0?void 0:d.content:n.status})}if(n.status=="waiting"){var I,L;s=(0,a.jsx)(c.Z,{icon:(0,a.jsx)(W.Z,{}),children:(I=n.message)!==null&&I!==void 0&&I.showInTag?(L=n.message)===null||L===void 0?void 0:L.content:n.status})}if(n.status=="exited"||n.status=="dead"||n.status=="removing"||n.status=="restarting"||n.status=="created"){var T,p;s=(0,a.jsx)(c.Z,{icon:(0,a.jsx)(P.Z,{}),color:"warning",children:(T=n.message)!==null&&T!==void 0&&T.showInTag?(p=n.message)===null||p===void 0?void 0:p.content:n.status})}return n.link&&(s=(0,a.jsx)(D.Link,{to:n.link,children:s})),n.message&&(s=(0,a.jsx)(o.Z,{placement:n.message.placement,title:n.message.content,children:s})),(0,a.jsx)(a.Fragment,{children:s})}},89063:function(N,U,e){e.d(U,{Z:function(){return W}});var Z=e(24963),i=e(88484),A=e(31418),P=e(72723),E=e(14726),O=e(67294),h=e(85893);function W(c){var o=(0,O.useContext)(Z.Z),D=o.message,a=o.notice,x=o.lang,n=(0,O.useRef)(null),s=A.Z.useApp(),f=function(){n.current&&(n.current.click(),n.current.onchange=function(_){if(!_||!_.target)return"";var d=new FileReader;d.onload=function(L){var T,p,z=(T=L.target)===null||T===void 0?void 0:T.result;if(c.onLoad)try{c.onLoad&&c.onLoad(z)}catch(V){a.error(V);return}typeof c.onImport=="function"&&c.onImport(z),(p=n.current)!==null&&p!==void 0&&p.value&&(n.current.value="")};var I=_.target;if(I.files)try{d.readAsText(I.files[0])}catch(L){a.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(P.Z.Item,{name:"importFile",label:c.label,children:(0,h.jsx)(E.ZP,{icon:(0,h.jsx)(i.Z,{}),block:!0,onClick:f,children:c.title})}),(0,h.jsx)("input",{style:{display:"none"},type:"file",ref:n,name:"importFileInput"})]})}},92754:function(N,U,e){var Z=e(5574),i=e.n(Z),A=e(67294),P=e(54006),E=e(38703),O=e(85893),h=(0,A.forwardRef)(function(W,c){var o=(0,A.useState)(""),D=i()(o,2),a=D[0],x=D[1];(0,A.useImperativeHandle)(c,function(){return{setFinish:function(){_({finish:{downloading:100,extracting:100}})},setStart:function(I){I&&x(I),_({start:{downloading:0,extracting:0}})}}});var n=(0,P.useModel)("subscriber");n.addDataHandler("image:pull:"+a,function(d){_(d.data)});var s=(0,A.useState)(),f=i()(s,2),u=f[0],_=f[1];return(0,A.useEffect)(function(){_({start:{downloading:0,extracting:0}})},[]),(0,O.jsx)(O.Fragment,{children:u&&Object.keys(u).map(function(d){return(0,O.jsx)(E.Z,{percent:u[d].downloading,success:{percent:u[d].extracting}},d)})})});U.Z=h},54964:function(N,U,e){e.d(U,{a:function(){return o}});var Z=e(78267),i=e.n(Z),A=e(75458),P=e.n(A),E=e(67294),O=e(12320),h=e.n(O),W=e(89629),c=e(85893),o={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,cursorStyle:"block",cursorBlink:!0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},D=new O.Terminal(o),a=new A.SearchAddon,x=new Z.FitAddon,n=(0,E.forwardRef)(function(s,f){return(0,E.useEffect)(function(){window.addEventListener("resize",function(){s.showInModal||x.fit()}),s.style&&s.style.fontSize&&(D.options.fontSize=s.style.fontSize),D.loadAddon(x),D.loadAddon(a),D.open(document.getElementById("terminal-container")),x.fit()},[]),(0,E.useImperativeHandle)(f,function(){return{write:function(_){D.write(_)},clear:function(){D.clear()},getTerminal:function(){return D},findNext:function(_){a.findNext(_)},findPrev:function(_){a.findPrevious(_)},fit:function(){x.fit()},onData:function(_){D.onData(_)}}}),(0,c.jsx)("div",{id:"terminal-container",style:{width:s.width?s.width:"100%",height:s.height?s.height:"500px"}})});U.Z=n},24963:function(N,U,e){var Z=e(67294),i=(0,Z.createContext)({});U.Z=i},9740:function(N,U,e){e.r(U),e.d(U,{default:function(){return xe}});var Z=e(15009),i=e.n(Z),A=e(99289),P=e.n(A),E=e(5574),O=e.n(E),h=e(80821),W=e(54964),c=e(90098),o=e(43425),D=e(74842),a=e(87784),x=e(30159),n=e(48689),s=e(86548),f=e(89035),u=e(45742),_=e(38345),d=e(97269),I=e(54006),L=e(42075),T=e(96074),p=e(14726),z=e(60922),V=e(84567),J=e(40056),w=e(63490),v=e(83062),y=e(92398),C=e(67294),t=e(99861),j=e(1272),S=e(95089),G=e(95213),b=e(24963),H=e(91058),q=e(12320),F=e(89629),ue=e(78267),r=e(85893),ee=new q.Terminal(W.a),_e=new ue.FitAddon;function je(ne){var se=(0,I.useModel)("subscriber");return se.addDataHandler("compose:log:"+ne.id,function(oe){ee.write(oe.data)}),(0,C.useEffect)(function(){return window.addEventListener("resize",function(){_e.fit()}),ee.options.fontSize=12,ee.loadAddon(_e),ee.open(document.getElementById("terminal-log")),_e.fit(),(0,c.VN)({id:parseInt(ne.id)}),function(){se.progress.close("compose:log:"+ne.id)}},[ne.id]),(0,r.jsx)("div",{id:"terminal-log",style:{width:"100%",height:"500px"}})}var pe=e(37413),Ce=e(87662),Me=e(94359);function xe(){var ne,se,oe,de=(0,C.useContext)(b.Z),fe=de.loading,Ge=de.message,Ve=de.notice,Ie=de.lang,le=(0,I.useParams)(),Te=(0,I.useNavigate)(),ye=(0,C.useState)(),ve=O()(ye,2),l=ve[0],Ae=ve[1],Be=(0,C.useState)({deleteVolume:!1,deleteImage:!1,deleteData:!1}),he=O()(Be,2),Q=he[0],me=he[1],X=(0,C.useRef)(),Le=(0,C.useState)(0),Ee=O()(Le,2),ae=Ee[0],ie=Ee[1],Re=(0,C.useState)("default"),ge=O()(Re,2),Ue=ge[0],te=ge[1],re=(0,C.useRef)(),Pe=(0,I.useModel)("subscriber"),Ze=(0,C.useState)([]),De=O()(Ze,2),We=De[0],Ke=De[1],Fe=(0,C.useState)(""),Oe=O()(Fe,2),Se=Oe[0],be=Oe[1];return Pe.addDataHandler("compose:"+le.id,function(M){var m;(m=X.current)===null||m===void 0||m.write(M.data)}),(0,C.useEffect)(function(){var M;return fe.show(),(0,c.YZ)({id:parseInt((M=le.id)!==null&&M!==void 0?M:"")}).then(function(m){var g,B=m.data.detail;if(B.setting.status&&B.setting.status.indexOf("running")>-1&&(B.isRunning=!0),B.setting.status&&B.setting.status.indexOf("paused")>-1&&(B.isPaused=!0),B.setting.status&&B.setting.status.indexOf("exited")>-1&&(B.isExited=!0),B.setting.status&&B.setting.status=="waiting"?B.isDeploy=!1:B.isDeploy=!0,B.yaml){var Y=j.ZP.load(B.yaml);B.imageList=Object.keys(Y.services).map(function(R){var k;return(k=Y.services[R].image)!==null&&k!==void 0?k:""})}Ae(B),B.isDeploy&&te("default"),m.data.containerList&&((0,Ce.pe)({groupName:"setting",name:"server"}).then(function(R){R.data.setting.value.serverIp&&be(R.data.setting.value.serverIp)}),Ke(m.data.containerList));var K=m.data.project;K!=null&&K.services&&Object.keys(K.services).map(function(R){var k=[];if(K.services&&K.services[R]&&(K.services[R].environment&&Object.keys(K.services[R].environment).map(function($){K.services[R].environment&&k.push({name:$,value:K.services[R].environment[$]})}),k.length!=0)){var ce;(ce=re.current)===null||ce===void 0||ce.setFieldValue(["environment",R],k)}}),(0,c.VN)({id:parseInt((g=le.id)!==null&&g!==void 0?g:"")})}).catch(function(){Te("/compose/list")}).finally(function(){fe.destroy()}),function(){Pe.progress.close("compose:log:"+le.id)}},[ae]),(0,r.jsxs)(_.Z,{direction:"column",ghost:!0,gutter:[10,10],children:[(0,r.jsx)(_.Z,{title:(0,r.jsx)(o.Z,{}),subTitle:"\u64CD\u4F5C - "+(l==null?void 0:l.name),bordered:!0,headerBordered:!0,children:l!=null&&l.yaml?(0,r.jsxs)(L.Z,{wrap:!0,children:[(0,r.jsx)(h.Z,{icon:(0,r.jsx)(D.Z,{}),type:"primary",action:P()(i()().mark(function M(){var m,g,B,Y,K,R,k;return i()().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(!l.isDeploy){$.next=6;break}return te("crtl"),$.next=4,(0,c.GG)({id:(m=l==null?void 0:l.id)!==null&&m!==void 0?m:0,op:"restart"});case 4:$.next=16;break;case 6:if(te("deploy"),(g=X.current)===null||g===void 0||g.clear(),K={id:(B=l==null?void 0:l.id)!==null&&B!==void 0?B:0},K.environment=(Y=re.current)===null||Y===void 0?void 0:Y.getFieldValue("environment"),!(l!=null&&l.isDeploy)){$.next=14;break}return $.next=13,(0,c.mg)({id:(R=l==null?void 0:l.id)!==null&&R!==void 0?R:0,deleteImage:!1,deleteData:!1,deleteVolume:!1});case 13:k=$.sent;case 14:return $.next=16,(0,c.Oh)(K);case 16:ie(ae+1);case 17:case"end":return $.stop()}},M)})),children:l.isDeploy?"\u91CD\u542F":"\u542F\u52A8"},"create"),l.isDeploy&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{action:function(){var m,g;return(m=X.current)===null||m===void 0||m.clear(),te("crtl"),(0,c.GG)({id:(g=l==null?void 0:l.id)!==null&&g!==void 0?g:0,op:"stop"})},messageSuccess:"\u505C\u6B62\u6210\u529F",icon:(0,r.jsx)(a.Z,{}),disabled:l.isExited,onSuccess:function(){ie(ae+1)},children:"\u505C\u6B62"}),l.isPaused&&(0,r.jsx)(h.Z,{action:function(){var m,g;return te("crtl"),(m=X.current)===null||m===void 0||m.clear(),(0,c.GG)({id:(g=l==null?void 0:l.id)!==null&&g!==void 0?g:0,op:"unpause"})},messageSuccess:"\u6062\u590D\u6210\u529F",onSuccess:function(){ie(ae+1)},icon:(0,r.jsx)(D.Z,{}),children:"\u6062\u590D"}),!l.isPaused&&(0,r.jsx)(h.Z,{action:function(){var m,g;return te("crtl"),(m=X.current)===null||m===void 0||m.clear(),(0,c.GG)({id:(g=l==null?void 0:l.id)!==null&&g!==void 0?g:0,op:"pause"})},onSuccess:function(){ie(ae+1)},messageSuccess:"\u6682\u505C\u6210\u529F",icon:(0,r.jsx)(x.Z,{}),disabled:!l.isRunning,children:"\u6682\u505C"}),(0,r.jsx)(h.Z,{action:function(){var m,g;return(m=X.current)===null||m===void 0||m.clear(),te("destory"),(0,c.mg)({id:(g=l==null?void 0:l.id)!==null&&g!==void 0?g:0,deleteImage:!1,deleteData:!1,deleteVolume:!1})},onSuccess:function(){ie(ae+1)},confirm:"\u662F\u5426\u8981\u9500\u6BC1\u5BB9\u5668\uFF1F",type:"primary",danger:!0,messageSuccess:"\u9500\u6BC1\u6210\u529F",icon:(0,r.jsx)(n.Z,{}),children:"\u9500\u6BC1"}),(0,r.jsx)(T.Z,{type:"vertical"})]}),(0,r.jsx)(T.Z,{type:"vertical"}),l.id>0&&(0,r.jsx)(I.Link,{to:"/compose/create?id="+l.id,children:(0,r.jsx)(p.ZP,{icon:(0,r.jsx)(s.Z,{}),children:"\u7F16\u8F91\u4EFB\u52A1"})}),l.isDeploy&&(0,r.jsx)(h.Z,{type:"primary",action:P()(i()().mark(function M(){var m,g,B;return i()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return(m=X.current)===null||m===void 0||m.clear(),te("destory"),K.next=4,(0,c.mg)({id:(g=l==null?void 0:l.id)!==null&&g!==void 0?g:0,deleteImage:Q.deleteImage,deleteData:Q.deleteData,deleteVolume:Q.deleteVolume});case 4:B=K.sent;case 5:case"end":return K.stop()}},M)})),danger:!0,confirm:(0,r.jsxs)(L.Z,{style:{width:280},direction:"vertical",children:[(0,r.jsx)(z.Z.Text,{children:"\u5220\u9664\u5BB9\u5668\u540E\u65E0\u6CD5\u6062\u590D,\u786E\u8BA4\u5417\uFF1F"}),(0,r.jsx)(V.Z,{name:"deleteData",onChange:function(m){return me({deleteData:m.target.checked,deleteImage:Q.deleteImage,deleteVolume:Q.deleteVolume})},children:"\u5220\u9664\u4EFB\u52A1\uFF1F"}),(0,r.jsx)(V.Z,{name:"deleteImage",onChange:function(m){return me({deleteImage:m.target.checked,deleteData:Q.deleteData,deleteVolume:Q.deleteVolume})},children:"\u5220\u9664\u955C\u50CF\uFF1F"}),(0,r.jsx)(V.Z,{name:"deleteVolume",onChange:function(m){return me({deleteData:Q.deleteImage,deleteImage:Q.deleteImage,deleteVolume:m.target.checked})},children:"\u5220\u9664\u5B58\u50A8\u5377\uFF1F"})]}),children:"\u5220\u9664\u4EFB\u52A1"}),(0,r.jsx)(t.Z,{title:"\u4F7F\u7528\u4ED3\u5E93\u52A0\u901F\u62C9\u53D6\u955C\u50CF",image:l.imageList})]}):(0,r.jsx)(J.Z,{showIcon:!0,type:"info",message:(0,r.jsxs)(r.Fragment,{children:["\u65E0\u6CD5\u83B7\u53D6\u8BE5\u4EFB\u52A1\u7684 compose.yaml \u6587\u4EF6\uFF0C\u65E0\u7BA1\u7406\u6743\u9650\u3002",(0,r.jsx)("a",{target:"_blank",href:"https://dpanel.cc/#/zh-cn/manual/compose/external",children:"\u5982\u4F55\u7BA1\u7406\u5916\u90E8\u4EFB\u52A1\uFF1F"})]})})},"operator"),(0,r.jsxs)(_.Z,{split:"vertical",children:[(0,r.jsxs)(_.Z,{colSpan:"45%",direction:"column",split:"horizontal",style:{padding:10},children:[Ue!="default"&&(0,r.jsx)(_.Z,{title:(0,r.jsx)(f.Z,{}),subTitle:"\u63A7\u5236\u53F0",extra:(0,r.jsx)(L.Z,{children:(0,r.jsx)(h.Z,{action:function(){var m;return(m=X.current)===null||m===void 0||m.clear(),(0,c.U_)({})},icon:(0,r.jsx)(n.Z,{}),danger:!0,onSuccess:function(){ie(ae+1)},children:"\u4E2D\u6B62\u6267\u884C"},"kill")}),children:(0,r.jsx)(W.Z,{width:"100%",height:"300px",showInModal:!0,style:{fontSize:12},ref:X})}),l&&(0,r.jsx)(_.Z,{children:(0,r.jsx)(w.Z,{rowKey:"name",pagination:!1,columns:[{title:"\u540D\u79F0",dataIndex:"name"},{title:"\u7AEF\u53E3",render:function(m,g,B){var Y=[],K=[];return g.publishers.map(function(R){R.publishedPort?Y.push({PrivatePort:R.targetPort,Type:R.protocol,IP:R.url,PublicPort:R.publishedPort}):R.publishedPort&&K.push({PrivatePort:R.targetPort,Type:R.protocol,IP:R.url,PublicPort:R.publishedPort})}),(0,r.jsx)(pe.Z,{publicPort:Y,privatePort:K,domain:[],serverIp:Se})}},{title:"\u72B6\u6001",render:function(m,g,B){return console.log(g.state),(0,r.jsx)(Me.Z,{status:g.state,message:{content:Ie("container.".concat(g.state)),placement:"top",showInTag:!0}},g.name)}},{title:"\u64CD\u4F5C",render:function(m,g,B){return(0,r.jsxs)(L.Z,{split:(0,r.jsx)(T.Z,{type:"vertical"}),children:[(0,r.jsx)(I.Link,{to:"/app/detail/edit/"+g.name,children:(0,r.jsx)(v.Z,{title:"\u7BA1\u7406\u5BB9\u5668",children:(0,r.jsx)(o.Z,{})})},"edit"),g.state=="running"&&(0,r.jsx)(I.Link,{target:"_blank",to:"/console/"+g.name,children:(0,r.jsx)(v.Z,{title:"\u7EC8\u7AEF",children:(0,r.jsx)(f.Z,{})})},"console")]})}}],dataSource:We})}),(0,r.jsx)(_.Z,{style:{margin:"10px 10px"},children:(0,r.jsx)(d.A,{formRef:re,submitter:!1,children:!(l!=null&&l.isDeploy)&&(0,r.jsx)(y.Z,{indicator:{align:"center"},items:re&&re.current&&((ne=re.current)===null||ne===void 0?void 0:ne.getFieldValue("environment"))&&Object.keys((se=re.current)===null||se===void 0?void 0:se.getFieldValue("environment")).map(function(M){return{label:M,key:M,children:(0,r.jsx)(H.Z,{showCardGhost:!0,name:["environment",M],showDisableName:!0,showInDrawer:!0,requireValue:!0})}})})})})]}),l&&!l.isDeploy&&(0,r.jsx)(_.Z,{title:(0,r.jsx)(u.Z,{}),subTitle:"Yaml",colSpan:"55%",children:(0,r.jsx)(S.ZP,{theme:"dark",minHeight:"550px",value:l.yaml,extensions:[G.RI.yaml()]})}),l&&l.isDeploy&&(0,r.jsx)(_.Z,{title:(0,r.jsx)(u.Z,{}),subTitle:"\u65E5\u5FD7",colSpan:"55%",children:(0,r.jsx)(je,{id:(oe=le.id)!==null&&oe!==void 0?oe:""})})]})]})}},90098:function(N,U,e){e.d(U,{GG:function(){return _},MG:function(){return z},Oh:function(){return n},U_:function(){return T},VN:function(){return I},YZ:function(){return o},ik:function(){return a},im:function(){return O},mg:function(){return f},pm:function(){return W},xC:function(){return J}});var Z=e(15009),i=e.n(Z),A=e(99289),P=e.n(A),E=e(54006);function O(v){return h.apply(this,arguments)}function h(){return h=P()(i()().mark(function v(y){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/app/compose/create",{method:"POST",data:y}));case 1:case"end":return t.stop()}},v)})),h.apply(this,arguments)}function W(v){return c.apply(this,arguments)}function c(){return c=P()(i()().mark(function v(y){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/app/compose/get-list",{method:"POST",data:y}));case 1:case"end":return t.stop()}},v)})),c.apply(this,arguments)}function o(v){return D.apply(this,arguments)}function D(){return D=P()(i()().mark(function v(y){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/app/compose/get-detail",{method:"POST",data:y}));case 1:case"end":return t.stop()}},v)})),D.apply(this,arguments)}function a(v){return x.apply(this,arguments)}function x(){return x=P()(i()().mark(function v(y){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/app/compose/delete",{method:"POST",data:y}));case 1:case"end":return t.stop()}},v)})),x.apply(this,arguments)}function n(v){return s.apply(this,arguments)}function s(){return s=P()(i()().mark(function v(y){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/app/compose/container-deploy",{method:"POST",data:y}));case 1:case"end":return t.stop()}},v)})),s.apply(this,arguments)}function f(v){return u.apply(this,arguments)}function u(){return u=P()(i()().mark(function v(y){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/app/compose/container-destroy",{method:"POST",data:y}));case 1:case"end":return t.stop()}},v)})),u.apply(this,arguments)}function _(v){return d.apply(this,arguments)}function d(){return d=P()(i()().mark(function v(y){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/app/compose/container-ctrl",{method:"POST",data:y}));case 1:case"end":return t.stop()}},v)})),d.apply(this,arguments)}function I(v){return L.apply(this,arguments)}function L(){return L=P()(i()().mark(function v(y){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/app/compose/container-log",{method:"POST",data:y}));case 1:case"end":return t.stop()}},v)})),L.apply(this,arguments)}function T(v){return p.apply(this,arguments)}function p(){return p=P()(i()().mark(function v(y){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/app/compose/container-process-kill",{method:"POST",data:y}));case 1:case"end":return t.stop()}},v)})),p.apply(this,arguments)}function z(v){return V.apply(this,arguments)}function V(){return V=P()(i()().mark(function v(y){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/app/compose/get-from-uri",{method:"POST",data:y}));case 1:case"end":return t.stop()}},v)})),V.apply(this,arguments)}function J(v){return w.apply(this,arguments)}function w(){return w=P()(i()().mark(function v(y){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/app/compose/parse",{method:"POST",data:y}));case 1:case"end":return t.stop()}},v)})),w.apply(this,arguments)}},3393:function(N,U,e){e.d(U,{Gb:function(){return W},Pn:function(){return a},Rb:function(){return n},YU:function(){return O},_U:function(){return o}});var Z=e(15009),i=e.n(Z),A=e(99289),P=e.n(A),E=e(54006);function O(f){return h.apply(this,arguments)}function h(){return h=P()(i()().mark(function f(u){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,E.request)("/api/app/image/get-detail",{method:"POST",data:u}));case 1:case"end":return d.stop()}},f)})),h.apply(this,arguments)}function W(f){return c.apply(this,arguments)}function c(){return c=P()(i()().mark(function f(u){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,E.request)("/api/app/image/tag-remote",{method:"POST",data:u}));case 1:case"end":return d.stop()}},f)})),c.apply(this,arguments)}function o(f){return D.apply(this,arguments)}function D(){return D=P()(i()().mark(function f(u){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,E.request)("/api/app/image/tag-add",{method:"POST",data:u}));case 1:case"end":return d.stop()}},f)})),D.apply(this,arguments)}function a(f){return x.apply(this,arguments)}function x(){return x=P()(i()().mark(function f(u){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,E.request)("/api/app/image/tag-delete",{method:"POST",data:u}));case 1:case"end":return d.stop()}},f)})),x.apply(this,arguments)}function n(f){return s.apply(this,arguments)}function s(){return s=P()(i()().mark(function f(u){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,E.request)("/api/app/image/export",{method:"POST",data:u,responseType:"blob"}));case 1:case"end":return d.stop()}},f)})),s.apply(this,arguments)}}}]);
