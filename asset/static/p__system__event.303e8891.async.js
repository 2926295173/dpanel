"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5050],{80821:function(D,m,t){t.d(m,{Z:function(){return x}});var g=t(97857),u=t.n(g),o=t(5574),l=t.n(o),v=t(24963),s=t(86738),E=t(28036),h=t(83062),C=t(67294),_=t(85893);function x(e){var R=(0,C.useState)(!1),y=l()(R,2),c=y[0],O=y[1],i=(0,C.useContext)(v.Z),r=i.lang,a=i.message,n=function(){O(!0);var S=e.action();S instanceof Promise?S.then(function(d){if(O(!1),d){typeof e.onSuccess=="function"&&e.onSuccess(d);var f="";e.messageSuccess?typeof e.messageSuccess=="function"?f=e.messageSuccess(d):f=e.messageSuccess.indexOf("notification.")==0?r(e.messageSuccess):e.messageSuccess:f=r("notification.finish"),e.asynced?a.info(f):a.success(f)}}).catch(function(d){O(!1),typeof e.onError=="function"&&e.onError(d)}):O(!1)};return e.confirm?(0,_.jsx)(s.Z,u()(u()({style:{width:500},title:e.confirmTitle?e.confirmTitle:r("notification.title.tip"),description:typeof e.confirm=="string"&&e.confirm.indexOf("notification.")==0?r(e.confirm):e.confirm,onConfirm:n,okText:"Yes",cancelText:"No",onOpenChange:e.confirmOnOpenChange},e.confirmProps),{},{children:(0,_.jsx)(E.ZP,{block:e.block,disabled:e.disabled,icon:!e.children&&c?void 0:e.icon,loading:c,danger:e.danger,type:e.type,children:e.children})})):(0,_.jsx)(h.Z,{title:e.tips,children:(0,_.jsx)(E.ZP,{block:e.block,style:e.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:e.disabled,icon:!e.children&&c?void 0:e.icon,loading:c,onClick:n,danger:e.danger,type:e.type,children:e.children})})}},24963:function(D,m,t){var g=t(67294),u=(0,g.createContext)({});m.Z=u},85827:function(D,m,t){t.r(m),t.d(m,{default:function(){return O}});var g=t(15009),u=t.n(g),o=t(99289),l=t.n(o),v=t(80821),s=t(82346);function E(i){return h.apply(this,arguments)}function h(){return h=l()(u()().mark(function i(r){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,s.request)("/api/common/event/get-list",{method:"POST",data:r}));case 1:case"end":return n.stop()}},i)})),h.apply(this,arguments)}function C(i){return _.apply(this,arguments)}function _(){return _=l()(u()().mark(function i(r){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,s.request)("/api/common/event/prune",{method:"POST",data:r}));case 1:case"end":return n.stop()}},i)})),_.apply(this,arguments)}var x=t(67255),e=t(90078),R=t(41482),y=t(67294),c=t(85893);function O(){var i=(0,y.useRef)();return(0,c.jsx)(e._z,{header:{extra:[(0,c.jsx)(v.Z,{action:function(){return C()},onSuccess:function(){var a,n;return!((a=i.current)===null||a===void 0)&&a.reloadAndRest&&((n=i.current)===null||n===void 0||n.reloadAndRest()),!0},onError:function(){var a,n;return!((a=i.current)===null||a===void 0)&&a.reset&&((n=i.current)===null||n===void 0||n.reset()),!0},confirm:"notification.confirm.title",danger:!0,type:"primary",children:"\u6E05\u9664\u6240\u6709\u4E8B\u4EF6"})]},children:(0,c.jsx)(R.Z,{scroll:{x:"max-content"},columns:[{title:"\u7C7B\u578B",ellipsis:!0,dataIndex:"type",width:200},{title:"\u8BE6\u60C5",search:!1,render:function(a,n,j,S){return(0,c.jsxs)(c.Fragment,{children:[n.action," ",n.message]})}},{title:"\u65F6\u95F4",ellipsis:!0,search:!1,dataIndex:"createdAt",width:200,render:function(a,n,j,S,d){return new Date(n.createdAt).toLocaleString()}}],rowKey:"id",request:function(){var r=l()(u()().mark(function a(n,j,S){var d,f,T;return u()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,E({page:(d=n.current)!==null&&d!==void 0?d:1,pageSize:(f=n.pageSize)!==null&&f!==void 0?f:10,type:n.type});case 2:return T=P.sent,P.abrupt("return",{data:T.data.list,success:!0,total:T.data.total});case 4:case"end":return P.stop()}},a)}));return function(a,n,j){return r.apply(this,arguments)}}(),pagination:(0,x.O)(),actionRef:i})})}},67255:function(D,m,t){t.d(m,{O:function(){return g},j:function(){return u}});function g(o){var l=localStorage.getItem("dpanel-pagesize");return l=="all"?!1:{defaultCurrent:o==null?void 0:o.page,showSizeChanger:!0,defaultPageSize:parseInt(l!=null?l:"20"),onChange:function(s,E){localStorage.setItem("dpanel-page-"+location.pathname.split("/").slice(-2).join("-"),"".concat(s))}}}function u(o){var l="dpanel-table-column-".concat(o),v={};if(localStorage.getItem(l)){var s;v=JSON.parse((s=localStorage.getItem(l))!==null&&s!==void 0?s:"{}")}return{defaultValue:v,onChange:function(h){localStorage.setItem("dpanel-table-column-".concat(o),JSON.stringify(h))}}}}}]);
