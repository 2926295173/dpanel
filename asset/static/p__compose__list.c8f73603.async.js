(self.webpackChunk=self.webpackChunk||[]).push([[8022],{23430:function(U,O,e){"use strict";e.d(O,{Z:function(){return f}});var C=e(87462),s=e(67294),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},c=g,d=e(84089),j=function(u,r){return s.createElement(d.Z,(0,C.Z)({},u,{ref:r,icon:c}))},y=s.forwardRef(j),f=y},80821:function(U,O,e){"use strict";e.d(O,{Z:function(){return E}});var C=e(5574),s=e.n(C),g=e(24963),c=e(86738),d=e(14726),j=e(83062),y=e(67294),f=e(85893);function E(u){var r=(0,y.useState)(!1),n=s()(r,2),v=n[0],t=n[1],i=(0,y.useContext)(g.Z),T=i.lang,A=i.notice,M=i.message,P=function(){t(!0),u.action().then(function(_){if(t(!1),typeof u.onSuccess=="function"&&u.onSuccess(_),u.messageSuccess){var p="";typeof u.messageSuccess=="function"?p=u.messageSuccess(_):p=u.messageSuccess,p.indexOf(".")>-1&&(p=T(p)),u.asynced?M.info(p):M.success(p)}}).catch(function(_){t(!1),typeof u.onError=="function"&&u.onError(_)})};return u.confirm?(0,f.jsx)(c.Z,{style:{width:500},title:T("notification.title.tip"),description:u.confirm,onConfirm:P,okText:"Yes",cancelText:"No",children:(0,f.jsx)(d.ZP,{disabled:u.disabled,icon:u.icon,loading:v,danger:u.danger,type:u.type,children:u.children})}):(0,f.jsx)(j.Z,{title:u.tips,children:(0,f.jsx)(d.ZP,{disabled:u.disabled,icon:u.icon,loading:v,onClick:P,danger:u.danger,type:u.type,children:u.children})})}},94359:function(U,O,e){"use strict";e.d(O,{Z:function(){return v}});var C=e(67294),s=e(3089),g=e(98165),c=e(18429),d=e(8751),j=e(14313),y=e(30159),f=e(87740),E=e(66309),u=e(83062),r=e(54006),n=e(85893);function v(t){var i=(0,n.jsx)(n.Fragment,{});if(t.status=="0"&&(i=(0,n.jsx)(E.Z,{icon:(0,n.jsx)(s.Z,{}),color:"default",children:"waiting"})),t.status=="10"&&(i=(0,n.jsx)(E.Z,{icon:(0,n.jsx)(g.Z,{spin:!0}),color:"processing",children:"processing"})),t.status=="20"&&(i=(0,n.jsx)(E.Z,{icon:(0,n.jsx)(c.Z,{}),color:"error",children:"error"})),t.status=="30"&&(i=(0,n.jsx)(E.Z,{icon:(0,n.jsx)(d.Z,{}),color:"success",children:"success"})),t.status=="running"){var T,A;i=(0,n.jsx)(E.Z,{icon:(0,n.jsx)(j.Z,{}),color:"success",children:(T=t.message)!==null&&T!==void 0&&T.showInTag?(A=t.message)===null||A===void 0?void 0:A.content:t.status})}if(t.status=="paused"){var M,P;i=(0,n.jsx)(E.Z,{icon:(0,n.jsx)(y.Z,{}),children:(M=t.message)!==null&&M!==void 0&&M.showInTag?(P=t.message)===null||P===void 0?void 0:P.content:t.status})}if(t.status=="waiting"){var w,_;i=(0,n.jsx)(E.Z,{icon:(0,n.jsx)(f.Z,{}),children:(w=t.message)!==null&&w!==void 0&&w.showInTag?(_=t.message)===null||_===void 0?void 0:_.content:t.status})}if(t.status=="exited"||t.status=="dead"||t.status=="removing"||t.status=="restarting"||t.status=="created"){var p,l;i=(0,n.jsx)(E.Z,{icon:(0,n.jsx)(c.Z,{}),color:"warning",children:(p=t.message)!==null&&p!==void 0&&p.showInTag?(l=t.message)===null||l===void 0?void 0:l.content:t.status})}return t.link&&(i=(0,n.jsx)(r.Link,{to:t.link,children:i})),t.message&&(i=(0,n.jsx)(u.Z,{placement:t.message.placement,title:t.message.content,children:i})),(0,n.jsx)(n.Fragment,{children:i})}},24963:function(U,O,e){"use strict";var C=e(67294),s=(0,C.createContext)({});O.Z=s},96781:function(U,O,e){"use strict";var C=e(67294),s=(0,C.createContext)({});O.Z=s},83536:function(U,O,e){"use strict";e.r(O),e.d(O,{default:function(){return K}});var C=e(15009),s=e.n(C),g=e(99289),c=e.n(g),d=e(80821),j=e(90098),y=e(43425),f=e(86548),E=e(23430),u=e(10641),r=e(54006),n=e(42075),v=e(96074),t=e(83062),i=e(60922),T=e(67294),A=e(96781),M=e(94359),P=e(67255),w=e(93162),_=e(24963),p=e(66309),l=e(85893);function b(o){var m=(0,r.useIntl)(),R=(0,T.useContext)(_.Z),a=R.lang,B;if(!o.type)B=(0,l.jsx)(p.Z,{children:a("compose.default")});else switch(o.type){case"remoteUrl":B=(0,l.jsx)(p.Z,{color:"cyan",children:a("compose.".concat(o.type))});break;case"serverPath":B=(0,l.jsx)(p.Z,{color:"blue",children:a("compose.".concat(o.type))});break;case"storagePath":B=(0,l.jsx)(p.Z,{color:"blue-inverse",children:a("compose.".concat(o.type))});break;case"outPath":B=(0,l.jsx)(p.Z,{color:"yellow",children:a("compose.".concat(o.type))});break;default:B=(0,l.jsx)(p.Z,{children:a("compose.".concat(o.type))})}return(0,l.jsx)(t.Z,{title:o.tootip,children:B})}function K(){var o=(0,T.useContext)(A.Z),m=o.listTableRef,R=(0,T.useContext)(_.Z),a=R.lang,B=R.notice;return(0,l.jsx)(u.Z,{scroll:{x:"max-content"},request:function(){var W=c()(s()().mark(function L(h){var S,x,D;return s()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,j.pm)({title:h.title,name:h.name,pageSize:(S=h.pageSize)!==null&&S!==void 0?S:10,page:(x=h.current)!==null&&x!==void 0?x:1});case 2:return D=Z.sent,Z.abrupt("return",{data:D.data.list,success:!0,total:D.data.list.length});case 4:case"end":return Z.stop()}},L)}));return function(L){return W.apply(this,arguments)}}(),rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name",width:200,render:function(L,h,S,x,D){return(0,l.jsx)(r.Link,{to:"/compose/deploy/"+h.name,children:h.name},S)}},{title:"\u9879\u76EE\u540D\u79F0",dataIndex:"title",width:200},{title:"\u7C7B\u578B",width:150,search:!1,render:function(L,h,S,x,D){var I;return(0,l.jsx)(b,{tootip:(I=h.setting.uri)!==null&&I!==void 0?I:"",type:h.setting&&h.setting.type?h.setting.type:""})}},{title:"\u5BB9\u5668\u72B6\u6001",dataIndex:"status",search:!1,width:300,render:function(L,h,S,x,D){return(0,l.jsx)(n.Z,{children:h.setting.status.split(", ").map(function(I){var Z="running",F=I.indexOf("(");return F>-1?Z=I.slice(0,F):Z=I,(0,l.jsx)(M.Z,{status:Z,message:{content:a("compose.".concat(Z),{count:I.slice(F+1,I.length-1)}),placement:"top",showInTag:!0}})})})}},{title:"\u64CD\u4F5C",width:80,valueType:"option",key:"option",render:function(L,h,S,x,D){return(0,l.jsxs)(n.Z,{split:(0,l.jsx)(v.Z,{type:"vertical"}),children:[(0,l.jsx)(r.Link,{to:"/compose/deploy/"+h.name,children:(0,l.jsx)(t.Z,{title:"\u7BA1\u7406",children:(0,l.jsx)(y.Z,{})})},"3"),h.yaml&&(0,l.jsx)(r.Link,{to:"/compose/create?id="+h.id+"&name="+h.name,children:(0,l.jsx)(t.Z,{title:"\u7F16\u8F91",children:(0,l.jsx)(f.Z,{})})},"4"),h.yaml&&(0,l.jsx)(i.Z.Link,{onClick:function(){var Z=new Blob([h.yaml],{type:"text/plain"});(0,w.saveAs)(Z,h.name+".yaml")},children:(0,l.jsx)(t.Z,{title:"\u4E0B\u8F7D",children:(0,l.jsx)(E.Z,{})})},"2")]})}}],rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0,getCheckboxProps:function(L){return{disabled:!L.yaml||L.setting.type=="storagePath"}}},tableAlertOptionRender:function(L){var h=L.selectedRows;return(0,l.jsx)(n.Z,{size:16,children:(0,l.jsx)(d.Z,{danger:!0,type:"primary",action:function(){return(0,j.ik)({id:h.map(function(x){return x.id})})},onSuccess:function(){var x,D;return!((x=m.current)===null||x===void 0)&&x.reloadAndRest&&((D=m.current)===null||D===void 0||D.reloadAndRest()),!0},onError:function(){var x,D;return!((x=m.current)===null||x===void 0)&&x.reset&&((D=m.current)===null||D===void 0||D.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",confirm:(0,l.jsx)(n.Z,{style:{width:280},direction:"vertical",children:(0,l.jsx)(i.Z.Text,{children:"\u5220\u9664\u524D\u8BF7\u5148\u9500\u6BC1\u76F8\u5173\u5BB9\u5668\uFF0C\u786E\u8BA4\u5417\uFF1F"})}),children:"\u6279\u91CF\u5220\u9664"})})},pagination:(0,P.O)(),search:{collapsed:!1},actionRef:m,columnsState:(0,P.j)("compose-list")})}},90098:function(U,O,e){"use strict";e.d(O,{GG:function(){return M},MG:function(){return p},Oh:function(){return t},U_:function(){return w},YZ:function(){return u},ik:function(){return n},im:function(){return j},mg:function(){return T},pm:function(){return f},xC:function(){return b}});var C=e(15009),s=e.n(C),g=e(99289),c=e.n(g),d=e(54006);function j(o){return y.apply(this,arguments)}function y(){return y=c()(s()().mark(function o(m){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/compose/create",{method:"POST",data:m}));case 1:case"end":return a.stop()}},o)})),y.apply(this,arguments)}function f(o){return E.apply(this,arguments)}function E(){return E=c()(s()().mark(function o(m){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/compose/get-list",{method:"POST",data:m}));case 1:case"end":return a.stop()}},o)})),E.apply(this,arguments)}function u(o){return r.apply(this,arguments)}function r(){return r=c()(s()().mark(function o(m){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/compose/get-detail",{method:"POST",data:m}));case 1:case"end":return a.stop()}},o)})),r.apply(this,arguments)}function n(o){return v.apply(this,arguments)}function v(){return v=c()(s()().mark(function o(m){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/compose/delete",{method:"POST",data:m}));case 1:case"end":return a.stop()}},o)})),v.apply(this,arguments)}function t(o){return i.apply(this,arguments)}function i(){return i=c()(s()().mark(function o(m){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/compose/container-deploy",{method:"POST",data:m}));case 1:case"end":return a.stop()}},o)})),i.apply(this,arguments)}function T(o){return A.apply(this,arguments)}function A(){return A=c()(s()().mark(function o(m){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/compose/container-destroy",{method:"POST",data:m}));case 1:case"end":return a.stop()}},o)})),A.apply(this,arguments)}function M(o){return P.apply(this,arguments)}function P(){return P=c()(s()().mark(function o(m){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/compose/container-ctrl",{method:"POST",data:m}));case 1:case"end":return a.stop()}},o)})),P.apply(this,arguments)}function w(o){return _.apply(this,arguments)}function _(){return _=c()(s()().mark(function o(m){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/compose/container-process-kill",{method:"POST",data:m}));case 1:case"end":return a.stop()}},o)})),_.apply(this,arguments)}function p(o){return l.apply(this,arguments)}function l(){return l=c()(s()().mark(function o(m){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/compose/get-from-uri",{method:"POST",data:m}));case 1:case"end":return a.stop()}},o)})),l.apply(this,arguments)}function b(o){return K.apply(this,arguments)}function K(){return K=c()(s()().mark(function o(m){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/compose/parse",{method:"POST",data:m}));case 1:case"end":return a.stop()}},o)})),K.apply(this,arguments)}},67255:function(U,O,e){"use strict";e.d(O,{O:function(){return C},j:function(){return s}});function C(){var g,c=parseInt((g=localStorage.getItem("dpanel-pagesize"))!==null&&g!==void 0?g:"0");return{showSizeChanger:!0,defaultPageSize:c!=null?c:20}}function s(g){var c="dpanel-table-column-".concat(g),d={};if(localStorage.getItem(c)){var j;d=JSON.parse((j=localStorage.getItem(c))!==null&&j!==void 0?j:"{}")}return{defaultValue:d,onChange:function(f){localStorage.setItem("dpanel-table-column-".concat(g),JSON.stringify(f))}}}},93162:function(U,O,e){var C,s,g;(function(c,d){s=[],C=d,g=typeof C=="function"?C.apply(O,s):C,g!==void 0&&(U.exports=g)})(this,function(){"use strict";function c(r,n){return typeof n=="undefined"?n={autoBom:!1}:typeof n!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r}function d(r,n,v){var t=new XMLHttpRequest;t.open("GET",r),t.responseType="blob",t.onload=function(){u(t.response,n,v)},t.onerror=function(){console.error("could not download file")},t.send()}function j(r){var n=new XMLHttpRequest;n.open("HEAD",r,!1);try{n.send()}catch(v){}return 200<=n.status&&299>=n.status}function y(r){try{r.dispatchEvent(new MouseEvent("click"))}catch(v){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(n)}}var f=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof e.g=="object"&&e.g.global===e.g?e.g:void 0,E=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=f.saveAs||(typeof window!="object"||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!E?function(r,n,v){var t=f.URL||f.webkitURL,i=document.createElement("a");n=n||r.name||"download",i.download=n,i.rel="noopener",typeof r=="string"?(i.href=r,i.origin===location.origin?y(i):j(i.href)?d(r,n,v):y(i,i.target="_blank")):(i.href=t.createObjectURL(r),setTimeout(function(){t.revokeObjectURL(i.href)},4e4),setTimeout(function(){y(i)},0))}:"msSaveOrOpenBlob"in navigator?function(r,n,v){if(n=n||r.name||"download",typeof r!="string")navigator.msSaveOrOpenBlob(c(r,v),n);else if(j(r))d(r,n,v);else{var t=document.createElement("a");t.href=r,t.target="_blank",setTimeout(function(){y(t)})}}:function(r,n,v,t){if(t=t||open("","_blank"),t&&(t.document.title=t.document.body.innerText="downloading..."),typeof r=="string")return d(r,n,v);var i=r.type==="application/octet-stream",T=/constructor/i.test(f.HTMLElement)||f.safari,A=/CriOS\/[\d]+/.test(navigator.userAgent);if((A||i&&T||E)&&typeof FileReader!="undefined"){var M=new FileReader;M.onloadend=function(){var _=M.result;_=A?_:_.replace(/^data:[^;]*;/,"data:attachment/file;"),t?t.location.href=_:location=_,t=null},M.readAsDataURL(r)}else{var P=f.URL||f.webkitURL,w=P.createObjectURL(r);t?t.location=w:location.href=w,t=null,setTimeout(function(){P.revokeObjectURL(w)},4e4)}});f.saveAs=u.saveAs=u,U.exports=u})}}]);
