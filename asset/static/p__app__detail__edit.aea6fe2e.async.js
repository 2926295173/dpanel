"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8878],{55809:function(W,c,e){var p=e(87462),t=e(67294),P=e(44805),i=e(84089),l=function(C,v){return t.createElement(i.Z,(0,p.Z)({},C,{ref:v,icon:P.Z}))},d=t.forwardRef(l);c.Z=d},1699:function(W,c,e){e.d(c,{u:function(){return g}});var p=e(9783),t=e.n(p),P=e(97857),i=e.n(P),l=e(67294),d=e(82346),h=e(40411),C=e(42075),v=e(85893),g=function(r){var m=(0,d.useAccess)(),O=Array.isArray(r.access)?r.access:[r.access],_,o=r.fallback;if(typeof r.children=="function"?(_=r.children(O.reduce(function(s,D){return i()(i()({},s),{},t()({},D,m[D]))},{})),_||(_=o)):O.every(function(s){return m[s]})?_=r.children:_=o,!o&&_&&r.showProTips&&m.canSeeEnableCe){if(m.canSeeEnableHiddenProTips)return null;_=(0,v.jsx)(h.Z,{offset:r.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:_})}if(!o&&_&&r.showProRibbonTips&&m.canSeeEnableCe){if(m.canSeeEnableHiddenProTips)return null;_=(0,v.jsx)(h.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:_})}return r.space?(0,v.jsx)(C.Z,i()(i()({},r.space),{},{children:_})):_}},3616:function(W,c,e){e.d(c,{Ed:function(){return i},FK:function(){return t},R_:function(){return p},ob:function(){return P}});var p=window.innerWidth<=1024?"90vw":"65vw",t="90vw",P="60vw",i="50vh"},24963:function(W,c,e){var p=e(67294),t=(0,p.createContext)({});c.Z=t},29798:function(W,c,e){e.r(c),e.d(c,{default:function(){return o}});var p=e(5574),t=e.n(p),P=e(13822),i=e(38345),l=e(82346),d=e(67294),h=e(24963),C=e(50070),v=e(37767),g=e(52031),R=e(14189),r=e(72409),m=e(14245),O=e(1699),_=e(85893);function o(){var s=(0,d.useContext)(h.Z),D=s.message,I=s.notice,M=s.loading,B=s.lang,T=(0,d.useContext)(C.AppDetailContext),a=(0,l.useParams)(),u=(0,d.useState)(),E=t()(u,2),n=E[0],N=E[1],k=(0,d.useState)(1),y=t()(k,2),K=y[0],w=y[1],S=(0,l.useNavigate)();return(0,d.useEffect)(function(){var j;M.show(),T.reload(),(0,P.jV)({md5:(j=a.id)!==null&&j!==void 0?j:""}).then(function(b){b.data&&(b.data.info.HostConfig.NetworkMode=="host"&&b.data.info.Config.ExposedPorts&&Object.keys(b.data.info.Config.ExposedPorts).map(function(U){b.data.info.NetworkSettings.Ports[U]=[{HostIp:"0.0.0.0",HostPort:U.substring(0,U.indexOf("/"))}]}),N(b.data))}).finally(function(){M.destroy()})},[K]),(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(i.Z,{direction:"column",gutter:[0,10],children:[(n==null?void 0:n.info)&&(0,_.jsx)(R.Z,{data:n.info}),(n==null?void 0:n.info)&&(0,_.jsx)(O.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,_.jsx)(r.Z,{data:n,checkContainerUpgrade:function(){S("/app/list",{state:{page:localStorage.getItem("dpanel-page-compose-list")}})}})}),n&&(0,_.jsx)(v.Z,{data:n}),n&&(0,_.jsx)(g.Z,{data:n==null?void 0:n.info}),n&&(0,_.jsx)(m.Z,{data:n.info})]})})}},50070:function(W,c,e){e.r(c),e.d(c,{AppDetailContext:function(){return D},default:function(){return I}});var p=e(15009),t=e.n(p),P=e(99289),i=e.n(P),l=e(5574),d=e.n(l),h=e(1699),C=e(24963),v=e(13822),g=e(55809),R=e(90078),r=e(82346),m=e(25593),O=e(28036),_=e(50136),o=e(67294),s=e(85893),D=(0,o.createContext)({});function I(){var M,B=(0,o.useContext)(C.Z),T=B.loading,a=(0,r.useParams)(),u=(0,r.useSearchParams)(),E=d()(u,2),n=E[0],N=E[1],k=(M=n.get("tab"))!==null&&M!==void 0?M:"edit",y=(0,o.useState)("edit"),K=d()(y,2),w=K[0],S=K[1],j=(0,r.useNavigate)(),b=(0,o.useState)(1),U=d()(b,2),H=U[0],X=U[1],G=[{label:(0,s.jsx)(r.Link,{to:"/app/detail/edit/".concat(a.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,s.jsx)(r.Link,{to:"/app/detail/network/".concat(a.id,"?tab=network"),children:"\u7F51\u7EDC\u7BA1\u7406"}),key:"network"},{label:(0,s.jsx)(m.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){j("/app/detail/file/".concat(a.id,"?tab=file"))}},{label:(0,s.jsx)(m.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){j("/app/detail/log/".concat(a.id,"?tab=log"))}},{label:(0,s.jsx)(m.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){j("/app/detail/stat/".concat(a.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,s.jsx)(g.Z,{}),disabled:!0}],J=(0,o.useState)(G),V=d()(J,2),Q=V[0],Y=V[1];(0,o.useEffect)(function(){T.show(),S(k);var A=function(){var Z=i()(t()().mark(function z(){var $,F,x;return t()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return $=G,f.prev=1,f.next=4,(0,v.jV)({md5:(F=a.id)!==null&&F!==void 0?F:""});case 4:x=f.sent,$.map(function(L){return L.key=="containerName"&&(L.label=x.data.info.Name),(!x.data.info.State.Running||x.data.info.State.Restarting)&&(L.key=="file"||L.key=="stat")&&(L.disabled=!0),L}),Y($),f.next=13;break;case 9:return f.prev=9,f.t0=f.catch(1),j("/app/list"),f.abrupt("return");case 13:return f.prev=13,T.destroy(),f.finish(13);case 16:case"end":return f.stop()}},z,null,[[1,9,13,16]])}));return function(){return Z.apply(this,arguments)}}();A()},[H,a]);var q=function(Z){S(Z.key)};return(0,s.jsx)(D.Provider,{value:{reload:function(){X(H+1)}},children:(0,s.jsxs)(R._z,{header:{extra:[(0,s.jsx)(h.u,{access:"canSeeContainerListManageCreate",children:(0,s.jsx)(r.Link,{to:"/app/create/image",children:(0,s.jsx)(O.ZP,{type:"primary",children:"\u521B\u5EFA\u5BB9\u5668"})})},"create")]},children:[(0,s.jsx)(_.Z,{mode:"horizontal",onClick:q,selectedKeys:[w],items:Q}),(0,s.jsx)(r.Outlet,{})]})})}},62597:function(W,c,e){e.d(c,{$G:function(){return d},Ct:function(){return s},Tb:function(){return R},XH:function(){return m},cl:function(){return v},fp:function(){return C},iE:function(){return _},xb:function(){return I},ze:function(){return B}});var p=e(15009),t=e.n(p),P=e(99289),i=e.n(P),l=e(82346);function d(a){return h.apply(this,arguments)}function h(){return h=i()(t()().mark(function a(u){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/site/create-by-image",{method:"POST",data:u}));case 1:case"end":return n.stop()}},a)})),h.apply(this,arguments)}var C={EnvValueRuleRequired:1,EnvValueRuleDisabled:2,EnvValueTypeNumber:1024,EnvValueTypeText:2048,EnvValueTypeSelect:4096,EnvValueTypeSelectMultiple:8192};function v(a){return g.apply(this,arguments)}function g(){return g=i()(t()().mark(function a(u){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/site/get-list",{method:"POST",data:u}));case 1:case"end":return n.stop()}},a)})),g.apply(this,arguments)}function R(a){return r.apply(this,arguments)}function r(){return r=i()(t()().mark(function a(u){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return u.download=!1,n.next=3,(0,l.request)("/api/app/log/run",{method:"POST",data:u});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},a)})),r.apply(this,arguments)}function m(a){return O.apply(this,arguments)}function O(){return O=i()(t()().mark(function a(u){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return u.download=!0,n.next=3,(0,l.request)("/api/app/log/run",{method:"POST",data:u,responseType:"blob"});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},a)})),O.apply(this,arguments)}function _(a){return o.apply(this,arguments)}function o(){return o=i()(t()().mark(function a(u){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return u.id=String(u.id),n.next=3,(0,l.request)("/api/app/site/get-detail",{data:u,method:"POST"});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},a)})),o.apply(this,arguments)}function s(a){return D.apply(this,arguments)}function D(){return D=i()(t()().mark(function a(u){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/container/delete",{method:"POST",data:u}));case 1:case"end":return n.stop()}},a)})),D.apply(this,arguments)}function I(a){return M.apply(this,arguments)}function M(){return M=i()(t()().mark(function a(u){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/site/delete",{method:"POST",data:u}));case 1:case"end":return n.stop()}},a)})),M.apply(this,arguments)}function B(a){return T.apply(this,arguments)}function T(){return T=i()(t()().mark(function a(u){return t()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/container/ignore",{method:"POST",data:u}));case 1:case"end":return n.stop()}},a)})),T.apply(this,arguments)}}}]);
