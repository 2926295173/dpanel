"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1050],{1699:function(Y,B,t){t.d(B,{u:function(){return I}});var F=t(9783),p=t.n(F),H=t(97857),M=t.n(H),N=t(67294),a=t(82346),K=t(40411),j=t(42075),g=t(85893),I=function(T){var n=(0,a.useAccess)(),x=Array.isArray(T.access)?T.access:[T.access],w,d=T.fallback;if(typeof T.children=="function"?(w=T.children(x.reduce(function(u,D){return M()(M()({},u),{},p()({},D,n[D]))},{})),w||(w=d)):x.every(function(u){return n[u]})?w=T.children:w=d,!d&&w&&T.showProTips&&n.canSeeEnableCe){if(n.canSeeEnableHiddenProTips)return null;w=(0,g.jsx)(K.Z,{offset:T.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:w})}if(!d&&w&&T.showProRibbonTips&&n.canSeeEnableCe){if(n.canSeeEnableHiddenProTips)return null;w=(0,g.jsx)(K.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:w})}return T.space?(0,g.jsx)(j.Z,M()(M()({},T.space),{},{children:w})):w}},80821:function(Y,B,t){t.d(B,{Z:function(){return T}});var F=t(97857),p=t.n(F),H=t(5574),M=t.n(H),N=t(24963),a=t(36146),K=t(86738),j=t(83062),g=t(28036),I=t(67294),Z=t(85893);function T(n){var x=(0,I.useState)(!1),w=M()(x,2),d=w[0],u=w[1],D=(0,I.useContext)(N.Z),A=D.message,h=new a.Uo,le=function(){u(!0);var k=n.action();k instanceof Promise?k.then(function(e){if(u(!1),e){typeof n.onSuccess=="function"&&n.onSuccess(e);var ee="";n.messageSuccess?typeof n.messageSuccess=="function"?ee=n.messageSuccess(e):ee=n.messageSuccess.indexOf("notification.")==0?h.format(n.messageSuccess):n.messageSuccess:ee=h.format("notification.finish"),n.asynced?A.info(ee):A.success(ee)}}).catch(function(e){u(!1),typeof n.onError=="function"&&n.onError(e)}):u(!1)};return n.confirm?(0,Z.jsx)(K.Z,p()(p()({style:{width:500},title:n.confirmTitle?n.confirmTitle:h.format("notification.title.tip"),description:typeof n.confirm=="string"&&n.confirm.indexOf("notification.")==0?h.format(n.confirm):n.confirm,onConfirm:le,okText:"Yes",cancelText:"No",onOpenChange:n.confirmOnOpenChange},n.confirmProps),{},{children:(0,Z.jsx)(j.Z,{title:n.tips,children:(0,Z.jsx)(g.ZP,{block:n.block,disabled:n.disabled,icon:!n.children&&d?void 0:n.icon,loading:d,danger:n.danger,type:n.type,children:n.children})})})):(0,Z.jsx)(j.Z,{title:n.tips,children:(0,Z.jsx)(g.ZP,{block:n.block,style:n.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:n.disabled,icon:!n.children&&d?void 0:n.icon,loading:d,onClick:le,danger:n.danger,type:n.type,children:n.children})})}},44349:function(Y,B,t){var F=t(97857),p=t.n(F),H=t(17186),M=t(5966),N=t(86250),a=t(67294),K=t(85893),j=(0,a.forwardRef)(function(g,I){var Z=(0,a.useRef)();(0,a.useImperativeHandle)(I,function(){return{addItem:function(x,w){var d,u=(d=Z.current)===null||d===void 0?void 0:d.getList(),D=!1;if(u==null||u.map(function(h){if(h.name==x){D=!0;return}}),!D){var A;(A=Z.current)===null||A===void 0||A.add({name:x,value:w})}},clear:function(){var x;(x=Z.current)===null||x===void 0||(x=x.getList())===null||x===void 0||x.map(function(w,d){var u;(u=Z.current)===null||u===void 0||u.remove(d)})}}});var T={};return g.hideCopyButton===!0&&(T.copyIconProps=!1),g.hideDeleteButton===!0&&(T.deleteIconProps=!1),(0,K.jsx)(H.u,p()(p()({initialValue:g.initialValue,label:g.label,name:g.name,actionRef:Z,creatorButtonProps:g.showAddButton?{creatorButtonText:g.label?g.label:g.name}:!1,min:g.min?g.min:0},T),{},{children:function(x,w,d){return(0,K.jsx)(N.Z,{justify:g.justify,gap:g.gap,children:g.items.map(function(u){return u.render?(0,K.jsx)("div",{children:u.render&&u.render(x,w,d)},"".concat(g.name,"-").concat(u.name,"-").concat(x.key)):(0,K.jsx)(M.Z,{width:u.width,name:u.name,label:u.label,required:u.required,rules:[{required:u.required}],disabled:u.disabled,placeholder:u.placeholder},"".concat(g.name,"-").concat(u.name,"-").concat(x.key))})})}}))});B.Z=j},2808:function(Y,B,t){t.d(B,{Z:function(){return K}});var F=t(97857),p=t.n(F),H=t(62370),M=t(51663),N=t(67294),a=t(85893);function K(j){return(0,a.jsx)(H.Z,p()(p()({},j),{},{children:(0,a.jsx)(M.Z,{showText:function(I){return I.toHexString()},allowClear:!0,presets:[{label:"Color",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},51100:function(Y,B,t){t.d(B,{Z:function(){return N}});var F=t(97961),p=t(91604),H=t(1677),M=t(85893);function N(a){return a.showDragger?(0,M.jsx)(p.Z,{max:a.max?a.max:1,title:a.title,label:a.label,required:a.required,rules:[{required:a.required}],fieldProps:{multiple:!!(a.max&&a.max>1),name:"file",accept:a.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(j){return new Promise(function(g){var I;(0,F._2)({path:(I=j.response.data.path)!==null&&I!==void 0?I:""}).then(function(Z){g(!0)})})}},name:a.name}):(0,M.jsx)(H.Z,{max:a.max?a.max:1,title:a.title,label:a.label,required:a.required,rules:[{required:a.required}],fieldProps:{multiple:!!(a.max&&a.max>1),name:"file",accept:a.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(j){return new Promise(function(g){var I;(0,F._2)({path:(I=j.response.data.path)!==null&&I!==void 0?I:""}).then(function(Z){g(!0)})})}},name:a.name})}},3616:function(Y,B,t){t.d(B,{Ed:function(){return M},FK:function(){return p},R_:function(){return F},ob:function(){return H}});var F=window.innerWidth<=1024?"90vw":"65vw",p="90vw",H="60vw",M="50vh"},12323:function(Y,B,t){t.d(B,{X:function(){return F},n:function(){return p}});var F={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},p=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},24963:function(Y,B,t){var F=t(67294),p=(0,F.createContext)({});B.Z=p},56757:function(Y,B,t){t.r(B),t.d(B,{default:function(){return Ye}});var F=t(5574),p=t.n(F),H=t(19632),M=t.n(H),N=t(15009),a=t.n(N),K=t(99289),j=t.n(K),g=t(87662),I=t(88641),Z=t(38345),T=t(97269),n=t(5966),x=t(31199),w=t(63434),d=t(67294),u=t(42075),D=t(80821),A=t(1699),h=t(82346);function le(U){return oe.apply(this,arguments)}function oe(){return oe=j()(a()().mark(function U($){return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",(0,h.request)("/api/common/home/email-test",{method:"POST",data:$}));case 1:case"end":return R.stop()}},U)})),oe.apply(this,arguments)}var k=t(36146),e=t(85893);function ee(){var U=(0,d.useRef)(),$=(0,d.useState)(""),W=p()($,2),R=W[0],_=W[1],E=new k.Uo("components.systemBasic.systemBasicEmail");function y(){return X.apply(this,arguments)}function X(){return X=j()(a()().mark(function Q(){var m,O,P,c,o,C,S,r;return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,g.pe)({groupName:"setting",name:"emailServer"});case 2:r=v.sent,r.data&&((m=U.current)===null||m===void 0||m.setFieldsValue({host:(O=r.data.host)!==null&&O!==void 0?O:"",port:(P=r.data.port)!==null&&P!==void 0?P:"",email:(c=r.data.email)!==null&&c!==void 0?c:"",code:(o=r.data.code)!==null&&o!==void 0?o:"",status:(C=r.data.status)!==null&&C!==void 0?C:[]})),r.data&&_((S=r.data)===null||S===void 0?void 0:S.email);case 5:case"end":return v.stop()}},Q)})),X.apply(this,arguments)}return(0,e.jsx)(Z.Z,{direction:"column",gutter:[0,10],ghost:!0,children:(0,e.jsx)(Z.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(I.Z,{}),subTitle:E.format("cardTitle"),children:(0,e.jsxs)(T.A,{layout:"horizontal",labelAlign:"right",labelCol:{span:5,offset:0},formRef:U,onInit:j()(a()().mark(function Q(){return a()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return y(),O.abrupt("return",!0);case 2:case"end":return O.stop()}},Q)})),submitter:{render:function(m,O){return[].concat(M()(O),[(0,e.jsx)(D.Z,{tips:E.format("testTip",{email:R}),action:j()(a()().mark(function P(){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,le({subject:E.format("testSubject"),content:E.format("testContent",{time:new Date().toISOString()})});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},P)})),children:E.format("testButton")},"testEmail")])}},onFinish:function(){var Q=j()(a()().mark(function m(O){var P;return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,g.bv)({emailServer:{host:O.host,port:O.port,email:O.email,code:O.code,status:O.status}});case 2:return(P=U.current)===null||P===void 0||P.resetFields(),y(),o.abrupt("return",!0);case 5:case"end":return o.stop()}},m)}));return function(m){return Q.apply(this,arguments)}}(),children:[(0,e.jsx)(n.Z,{label:E.format("host"),name:"host",placeholder:E.format("hostEmpty"),required:!0,rules:[{required:!0}]}),(0,e.jsx)(x.Z,{label:E.format("port"),name:"port",placeholder:E.format("portEmpty"),required:!0,rules:[{required:!0}]}),(0,e.jsx)(n.Z,{label:E.format("code"),name:"code",width:"lg",placeholder:E.format("codeEmpty"),required:!0,rules:[{required:!0}],addonAfter:(0,e.jsxs)(u.Z,{children:[(0,e.jsx)("a",{target:"_blank",href:"https://service.mail.qq.com/detail/0/75",children:E.format("codeHelpQQ")}),(0,e.jsx)("a",{target:"_blank",href:"https://help.mail.163.com/faqDetail.do?code=d7a5dc8471cd0c0e8b4b8f4f8e49998b374173cfe9171305fa1ce630d7f67ac286624f309a1a7089",children:E.format("codeHelp163")})]})}),(0,e.jsx)(n.Z,{label:E.format("email"),name:"email",placeholder:E.format("emailEmpty"),required:!0,rules:[{required:!0}]}),(0,e.jsx)(A.u,{access:"canSeeEnableEe",children:(0,e.jsx)(w.Z.Group,{name:"status",label:E.format("status"),options:E.option("statusOption",["register"])})})]})})})}var de=t(24963);function Se(U){return me.apply(this,arguments)}function me(){return me=j()(a()().mark(function U($){return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",(0,h.request)("/api/pro/two-fa/enable",{method:"POST",data:$}));case 1:case"end":return R.stop()}},U)})),me.apply(this,arguments)}function xe(){return fe.apply(this,arguments)}function fe(){return fe=j()(a()().mark(function U(){return a()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.abrupt("return",(0,h.request)("/api/pro/two-fa/get-setting",{method:"POST"}));case 1:case"end":return W.stop()}},U)})),fe.apply(this,arguments)}var ye=t(29177),Pe=t(86548),Ce=t(97937),Te=t(12119),J=t(97462),te=t(52688),ie=t(62370),ae=t(86615),he=t(28036),Oe=t(98163),ge={xs:6,sm:6,md:6,lg:5,xl:5,xxl:5,offset:0};function Ze(){var U=(0,d.useRef)(),$=(0,h.useModel)("@@initialState"),W=$.initialState,R=$.refresh,_=(0,d.useContext)(de.Z),E=_.message,y=(0,d.useRef)(),X=(0,d.useState)(0),Q=p()(X,2),m=Q[0],O=Q[1],P=(0,h.useAccess)(),c=new k.Uo("components.systemBasic.systemBasicLogin");return(0,d.useEffect)(function(){!P.canSeeEnableCe&&xe().then(function(o){var C;(C=y.current)===null||C===void 0||C.setFieldsValue({enable:o.data.enable,email:o.data.email,qrcode:o.data.qrcode})})},[m]),(0,e.jsxs)(Z.Z,{direction:"column",gutter:[0,10],ghost:!0,children:[(0,e.jsx)(Z.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(ye.Z,{}),subTitle:c.format("adminTitle"),children:(0,e.jsxs)(T.A,{layout:"horizontal",labelAlign:"right",labelCol:ge,formRef:U,onFinish:function(){var o=j()(a()().mark(function C(S){var r,l;return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,g.Jn)({username:S.username,password:S.password,newPassword:S.newPassword});case 2:if(r=s.sent,!(r&&r.data)){s.next=9;break}return(l=U.current)===null||l===void 0||l.resetFields(),E.success(k.FD.format("finish")),localStorage.removeItem("token"),R(),s.abrupt("return",!0);case 9:case"end":return s.stop()}},C)}));return function(C){return o.apply(this,arguments)}}(),children:[(0,e.jsx)(J.Z,{name:["enableUsername"],children:function(C){var S=C.enableUsername;return(0,e.jsx)(n.Z,{label:c.format("adminUsername"),name:"username",style:{width:"80%"},initialValue:W==null?void 0:W.user.username,disabled:!S,addonAfter:[(0,e.jsx)(he.ZP,{type:"link",hidden:!!S,icon:(0,e.jsx)(Pe.Z,{}),onClick:function(){var l;(l=U.current)===null||l===void 0||l.setFieldValue("enableUsername",!0)}},"editBtn"),(0,e.jsx)(he.ZP,{type:"link",hidden:!S,icon:(0,e.jsx)(Ce.Z,{}),onClick:function(){var l;(l=U.current)===null||l===void 0||l.setFieldValue("enableUsername",!1)}},"closeBtn")]},"username")}}),(0,e.jsx)(n.Z.Password,{label:c.format("adminPassword"),name:"password",placeholder:c.format("adminPasswordEmpty"),rules:[{required:!0}]},"password"),(0,e.jsx)(n.Z.Password,{label:c.format("adminNewPassword"),name:"newPassword"},"newPasword"),(0,e.jsx)(J.Z,{name:["newPassword"],children:function(C){var S=C.newPassword;return(0,e.jsx)(n.Z.Password,{label:c.format("adminNewPassword2"),name:"newPassword2",dependencies:["newPassword"],rules:[{required:typeof S!="undefined"&&S!=""},function(r){var l=r.getFieldValue;return{validator:function(s,i){return!i||l("newPassword")===i?Promise.resolve():Promise.reject(new Error(c.format("adminMessagePasswordNotMatch")))}}}]},"newPasword2")}})]})}),(0,e.jsx)(Z.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(Te.Z,{}),subTitle:c.format("loginTitle"),children:(0,e.jsx)(T.A,{onFinish:function(){var o=j()(a()().mark(function C(S){var r,l;return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(P.canSeeEnableCe){s.next=5;break}return s.next=3,Se({email:S.twoFaEmail,enable:S.twoFaEnable});case 3:r=s.sent,r&&r.data.qrcode&&((l=y.current)===null||l===void 0||l.setFieldValue("towFaQrcode",r.data.qrcode));case 5:return s.next=7,(0,g.bv)({login:{failedEnable:S.loginFailedEnable,failedTotal:parseInt(S.loginFailedTotal),failedLockTime:parseInt(S.loginFailedLockTime)}});case 7:E.success(k.FD.format("finish")),O(m+1);case 9:case"end":return s.stop()}},C)}));return function(C){return o.apply(this,arguments)}}(),formRef:y,layout:"horizontal",labelAlign:"right",labelCol:ge,children:(0,e.jsx)(A.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(C){var S=C.canSeeEnableCe;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(te.Z,{disabled:S,label:c.format("loginTwoFaEnable"),name:"twoFaEnable"}),(0,e.jsx)(J.Z,{name:["twoFaEnable"],children:function(l){var v=l.twoFaEnable;return(0,e.jsx)(n.Z,{label:c.format("loginTwoFaEmail"),name:"twoFaEmail",disabled:S,placeholder:c.format("loginTwoFaEmailEmpty"),rules:[{required:v},{type:"email"}]})}}),(0,e.jsx)(ie.Z,{name:"towFaQrcode",hidden:!0}),(0,e.jsx)(J.Z,{name:["towFaQrcode"],children:function(l){var v=l.towFaQrcode;if(v)return(0,e.jsx)(ie.Z,{label:c.format("loginTwoFaQrcode"),tooltip:c.format("loginTwoFaQrcodeTip"),children:(0,e.jsx)(Oe.Z,{style:{border:"#d1d9e0b3 solid 1px",padding:"10px",borderRadius:"10px"},width:200,src:"data:image/png;base64,".concat(v)})})}}),(0,e.jsx)(te.Z,{label:c.format("loginFailedEnable"),name:"loginFailedEnable",initialValue:!0}),(0,e.jsx)(n.Z,{name:"loginFailedTotal",label:c.format("loginFailedTotal"),initialValue:5,fieldProps:{addonAfter:k.FD.format("unitTimes")}}),(0,e.jsx)(ae.Z.Group,{name:"loginFailedLockTime",label:c.format("loginFailedLockTime"),initialValue:"900",options:c.option("loginFailedLockTimeOption",["300","900","3600","18000","-1"])})]})}})})})]})}var Le=t(43425),we=t(19400),se=t(64317),G=t(24739),Ue=t(47221),Me=t(86125),ve=t(86250),pe=t(2487),Ie=t(4393),Re=t(71230),Be=t(15746),Fe=t(40411),Ae=t(184),We=t(25054),De=t(90672),$e=t(21532),Ke=t(44349),ue=t(65451),ze=t(2808),ke=t(3616),be=t(51100),ne={colorPrimary:"",colorTextBase:"",colorLink:"",colorBgContainer:"",colorBorder:"",colorBgElevated:"",colorBorderSecondary:"colorBorder"},_e=["borderRadius","wireframe"],Ve=(0,d.forwardRef)(function(U,$){(0,d.useImperativeHandle)($,function(){return{show:function(){E(!0)},reset:function(){var c;(c=y.current)===null||c===void 0||c.resetFields(["siteLogo","siteTitle","siteCopyright","siteLink","bgImage","bgSize"])}}});var W=(0,d.useState)(!1),R=p()(W,2),_=R[0],E=R[1],y=(0,d.useRef)(),X=(0,d.useContext)(de.Z),Q=X.message,m=new k.Uo("components.systemBasic.systemBasicThemeUser"),O=function(c){return(0,e.jsx)(ze.Z,{name:c.name,label:m.format(c.name),tooltip:c.tooltip})};return(0,e.jsx)($e.ZP,{children:(0,e.jsxs)(Ae.a,{drawerProps:{forceRender:!0,width:ke.R_},submitter:{render:function(c,o){return(0,e.jsx)(u.Z,{children:o[1]})}},title:m.format("drawerTitle"),formRef:y,open:_,onOpenChange:function(){var P=j()(a()().mark(function c(o){var C,S,r,l,v,s;return a()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if((C=y.current)===null||C===void 0||C.resetFields(["bgImageUpload","siteLogoUpload"]),!o){f.next=8;break}return f.next=4,(0,ue.Py)();case 4:S=f.sent,r=S.data.config,r&&(_e.forEach(function(L){if(r.token&&r.token[L]){var b,z;(b=y.current)===null||b===void 0||b.setFieldValue("enableStyle",!0),(z=y.current)===null||z===void 0||z.setFieldValue(L,r.token[L])}}),(l=y.current)===null||l===void 0||l.setFieldsValue({siteLogo:r.siteLogo,siteTitle:r.siteTitle,siteCopyright:r.siteCopyright,siteLink:r.siteLink,bgImage:r.bgImage,loginLogo:r.loginLogo}),!r.bgImage||!r.bgImage.width||r.bgImage.width=="100%"?(v=y.current)===null||v===void 0||v.setFieldValue("bgSize","full"):(s=y.current)===null||s===void 0||s.setFieldValue("bgSize","default")),Object.keys(ne).map(function(L){var b=L;ne[L]!=""&&(b=ne[L]),y!=null&&y.current&&r.token&&(y==null||y.current.setFieldValue("enableColor",!0),y==null||y.current.setFieldValue(L,r.token[b]))});case 8:E(o);case 9:case"end":return f.stop()}},c)}));return function(c){return P.apply(this,arguments)}}(),name:"theme-user",onFinish:function(){var P=j()(a()().mark(function c(o){var C,S,r;return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return r={token:{},bgImage:o.bgImage,siteLink:o.siteLink,siteTitle:(C=o.siteTitle)!==null&&C!==void 0?C:"",siteCopyright:o.siteCopyright,siteLogo:(S=o.siteLogo)!==null&&S!==void 0?S:"",loginLogo:o.loginLogo},o.siteLogoUpload&&o.siteLogoUpload.length>0&&(r.siteLogo=o.siteLogoUpload[0].response.data.path),r.bgImage||(r.bgImage={}),o.bgImageUpload&&o.bgImageUpload.length>0&&(r.bgImage.src=o.bgImageUpload[0].response.data.path),r.bgImage.width=o.bgSize=="full"?"100%":"",o.loginLogoUpload&&o.loginLogoUpload.length>0&&(r.loginLogo=o.loginLogoUpload[0].response.data.path),Object.keys(ne).map(function(s){r.token||(r.token={});var i=s;ne[s]!=""&&(i=ne[s]);var f=y.current&&y.current.getFieldValue(i);f&&f.toHexString?f.cleared||(r.token[s]=f.toHexString()):r.token[s]=f}),_e.map(function(s){r.token||(r.token={});var i=y.current&&y.current.getFieldValue(s);r.token[s]=i}),v.next=10,(0,ue.Z8)(r);case 10:return U.onFinish&&U.onFinish(),Q.success(k.FD.format("finishTheme")),v.abrupt("return",!0);case 13:case"end":return v.stop()}},c)}));return function(c){return P.apply(this,arguments)}}(),children:[(0,e.jsx)(G.UW,{title:m.format("colorTitle"),extra:(0,e.jsx)(te.Z,{name:"enableColor"})}),(0,e.jsx)(J.Z,{name:["enableColor"],children:function(c){var o=c.enableColor;return o&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(G.UW,{children:O({name:"colorPrimary",tooltip:m.format("colorPrimaryTip")})}),(0,e.jsxs)(G.UW,{children:[O({name:"colorBgContainer"}),O({name:"colorBgElevated"})]}),(0,e.jsxs)(G.UW,{children:[O({name:"colorTextBase"}),O({name:"colorLink"}),O({name:"colorBorder"})]})]})}}),(0,e.jsx)(G.UW,{title:"\u98CE\u683C",extra:(0,e.jsx)(te.Z,{name:"enableStyle"})}),(0,e.jsx)(J.Z,{name:["enableStyle"],children:function(c){var o=c.enableStyle;return o&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(G.UW,{children:(0,e.jsxs)(ve.Z,{gap:40,children:[(0,e.jsx)(te.Z,{label:m.format("wireframe"),name:"wireframe"}),(0,e.jsx)(We.Z,{min:1,max:16,label:m.format("borderRadius"),name:"borderRadius"})]})})})}}),(0,e.jsx)(G.UW,{title:m.format("uiTitle")}),(0,e.jsx)(n.Z,{label:m.format("siteTitle"),name:"siteTitle",placeholder:m.format("siteTitleEmpty")}),(0,e.jsxs)(G.UW,{children:[(0,e.jsx)(be.Z,{label:"Logo",title:m.format("siteLogoUploadTitle"),name:"siteLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(n.Z,{width:"md",placeholder:m.format("siteLogoEmpty"),label:m.format("siteLogo"),name:"siteLogo"})]}),(0,e.jsxs)(G.UW,{children:[(0,e.jsx)(be.Z,{label:m.format("bgImageUpload"),title:m.format("bgImageUploadTitle"),name:"bgImageUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(n.Z,{width:"md",placeholder:m.format("siteLogoEmpty"),label:m.format("bgImageSrc"),name:["bgImage","src"]}),(0,e.jsx)(ae.Z.Group,{name:"bgSize",label:m.format("bgImageBgSize"),initialValue:"full",options:m.option("bgImageBgSizeOption",["full","default"])})]}),(0,e.jsx)(G.UW,{children:(0,e.jsx)(J.Z,{name:["bgSize"],children:function(c){var o=c.bgSize;if(o=="default")return(0,e.jsxs)(G.UW,{children:[(0,e.jsx)(x.Z,{width:"xs",name:["bgImage","top"],label:m.format("bgImageTop")}),(0,e.jsx)(x.Z,{width:"xs",name:["bgImage","bottom"],label:m.format("bgImageBottom")}),(0,e.jsx)(x.Z,{width:"xs",name:["bgImage","left"],label:m.format("bgImageLeft")}),(0,e.jsx)(x.Z,{width:"xs",name:["bgImage","right"],label:m.format("bgImageRight")})]})}})}),(0,e.jsx)(Ke.Z,{name:"siteLink",label:m.format("siteLink"),showAddButton:!0,hideCopyButton:!0,gap:10,items:m.option("siteLinkOption",["title","href"]).map(function(P){return{name:P.value,label:P.label}})}),(0,e.jsx)(De.Z,{label:m.format("siteCopyright"),name:"siteCopyright"}),(0,e.jsxs)(G.UW,{title:m.format("uiLoginTitle"),children:[(0,e.jsx)(be.Z,{label:"Logo",title:"Logo",name:"loginLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(n.Z,{width:"md",placeholder:m.format("siteLogoEmpty"),label:m.format("loginLogo"),name:"loginLogo"})]})]})})}),He=Ve,je=t(12323),Ne=t(64304),ce=t.n(Ne);function Ge(){var U=(0,d.useRef)(),$=(0,d.useRef)(),W=(0,d.useRef)(),R=(0,h.useModel)("@@initialState"),_=R.initialState,E=(0,h.useAccess)(),y=(0,d.useContext)(de.Z),X=y.message,Q=(0,h.useAntdConfigSetter)(),m=(0,d.useState)(),O=p()(m,2),P=O[0],c=O[1],o=(0,d.useState)(),C=p()(o,2),S=C[0],r=C[1],l=new k.Uo("components.systemBasic.systemBasicTheme");return(0,d.useEffect)(function(){var v,s,i,f,L,b,z,V;(v=U.current)===null||v===void 0||v.setFieldsValue({algorithm:(s=_==null?void 0:_.theme.algorithm)!==null&&s!==void 0?s:"default",mainMenu:(i=_==null?void 0:_.theme.mainMenu)!==null&&i!==void 0?i:"top",compact:(f=_==null?void 0:_.theme.compact)!==null&&f!==void 0?f:"default",fontSize:(L=_==null?void 0:_.theme.fontSize)!==null&&L!==void 0?L:14,fontSizeConsole:(b=_==null?void 0:_.theme.fontSizeConsole)!==null&&b!==void 0?b:12,sideMenu:(z=_==null?void 0:_.theme.sideMenu)!==null&&z!==void 0?z:"default",tablePageSize:(V=_==null?void 0:_.theme.tablePageSize)!==null&&V!==void 0?V:"20"})},[_]),(0,e.jsx)(Ue.Z,{accordion:!0,defaultActiveKey:"basic",items:[{key:"basic",label:l.format("basicTitle"),children:(0,e.jsxs)(Z.Z,{ghost:!0,children:[!E.canSeeEnableCe&&(0,e.jsx)(He,{ref:$}),(0,e.jsxs)(T.A,{layout:"horizontal",labelAlign:"right",labelCol:ge,formRef:U,submitter:{render:function(s,i){return[i[1]]}},onFinish:function(){var v=j()(a()().mark(function s(i){var f;return a()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(f={algorithm:i.algorithm,mainMenu:i.mainMenu,sideMenu:i.sideMenu,compact:i.compact,fontSizeConsole:i.fontSizeConsole,fontSize:i.fontSize,tablePageSize:i.tablePageSize},!(i.algorithm!=(_==null?void 0:_.theme.algorithm)&&!E.canSeeEnableCe)){b.next=4;break}return b.next=4,(0,ue.H)({clearColor:!0});case 4:return localStorage.setItem("dpanel-theme",i.algorithm),localStorage.setItem("dpanel-compact",i.compact),localStorage.setItem("dpanel-pagesize",i.tablePageSize),b.next=9,(0,g.bv)({theme:f});case 9:X.success(k.FD.format("finishTheme"));case 10:case"end":return b.stop()}},s)}));return function(s){return v.apply(this,arguments)}}(),children:[(0,e.jsx)(ae.Z.Group,{name:"algorithm",label:l.format("basicAlgorithm"),initialValue:"default",radioType:"button",options:l.option("basicAlgorithmOption",["default","dark","system"])}),(0,e.jsx)(A.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(s){var i=s.canSeeEnableCe;return(0,e.jsx)(J.Z,{name:["algorithm"],children:function(L){var b=L.algorithm;return(0,e.jsx)(ie.Z,{label:l.format("basicUserTheme"),children:(0,e.jsxs)(u.Z.Compact,{children:[(0,e.jsx)(he.ZP,{disabled:i||b=="system",onClick:function(){var V;(V=$.current)===null||V===void 0||V.show()},icon:(0,e.jsx)(Le.Z,{}),children:l.format("basicUserThemeButton")}),(0,e.jsx)(D.Z,{disabled:i||b=="system",action:j()(a()().mark(function z(){var V;return a()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(0,ue.H)({clearColor:!0,clearSite:!0});case 2:Q(function(Ee){return Ee.theme={token:{}},Ee}),(V=$.current)===null||V===void 0||V.reset(),window.location.reload();case 5:case"end":return q.stop()}},z)})),children:l.format("basicUserThemeDefaultButton")})]})})}})}}),(0,e.jsx)(ae.Z.Group,{name:"mainMenu",label:l.format("basicMainMenu"),initialValue:"top",radioType:"button",options:l.option("basicMainMenuOption",["top","side"])}),(0,e.jsx)(ae.Z.Group,{name:"sideMenu",label:l.format("basicSideMenu"),initialValue:"default",radioType:"button",options:l.option("basicSideMenuOption",["default","collapse"])}),(0,e.jsx)(ae.Z.Group,{name:"compact",label:l.format("basicCompact"),initialValue:"default",radioType:"button",options:l.option("basicCompactOption",["default","compact"])}),(0,e.jsx)(ie.Z,{name:"fontSize",label:l.format("basicFontSize"),initialValue:14,children:(0,e.jsx)(Me.Z,{step:2,max:30,min:8,marks:{8:"8",10:"10",12:"12",14:"14",16:"16",20:"20",26:"26",30:"20"}})}),(0,e.jsx)(se.Z,{initialValue:"20",label:l.format("basicTablePageSize"),name:"tablePageSize",options:l.option("basicTablePageSizeOption",["10","20","50","100","all"])})]})]})},{key:"console",label:l.format("consoleTitle"),children:(0,e.jsx)(Z.Z,{ghost:!0,children:(0,e.jsxs)(T.A,{submitter:{render:function(s,i){return[i[1]]}},request:j()(a()().mark(function v(){var s,i,f;return a()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return i=je.X,b.next=3,(0,g.pe)({groupName:"setting",name:"themeConsoleConfig"});case 3:return f=b.sent,f.data&&Object.assign(i,f.data),!E.canSeeEnableCe&&f.data&&(s=f.data)!==null&&s!==void 0&&s.themeName&&f.data.themeName!=""&&Object.keys(ce()).forEach(function(z,V){z==f.data.themeName&&(r(Math.ceil((V+1)/36)),c(f.data.themeName))}),b.abrupt("return",{fontSize:i.fontSize,lineHeight:i.lineHeight,letterSpacing:i.letterSpacing,fontWeight:i.fontWeight,cursorStyle:i.cursorStyle,cursorInactiveStyle:i.cursorInactiveStyle,cursorBlink:i.cursorBlink});case 7:case"end":return b.stop()}},v)})),formRef:W,onFinish:function(){var v=j()(a()().mark(function s(i){var f;return a()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return f={fontSize:i.fontSize,lineHeight:i.lineHeight,letterSpacing:i.letterSpacing,fontWeight:i.fontWeight,cursorStyle:i.cursorStyle,cursorInactiveStyle:i.cursorInactiveStyle,cursorBlink:i.cursorBlink,theme:{},themeName:""},P!=""&&!E.canSeeEnableCe&&(f.theme=ce()[P],f.themeName=P),b.next=4,(0,g.bv)({console:f});case 4:return X.success(k.FD.format("finishTheme")),b.abrupt("return",!1);case 6:case"end":return b.stop()}},s)}));return function(s){return v.apply(this,arguments)}}(),children:[(0,e.jsx)(G.UW,{title:l.format("consoleFont"),children:(0,e.jsxs)(ve.Z,{gap:50,children:[(0,e.jsx)(x.Z,{label:l.format("consoleFontSize"),name:"fontSize",tooltip:l.format("consoleFontSizeTip"),fieldProps:{addonAfter:"px"}}),(0,e.jsx)(x.Z,{label:l.format("consoleLineHeight"),name:"lineHeight",tooltip:l.format("consoleLineHeightTip"),fieldProps:{addonAfter:l.format("consoleLineHeightUnit")}}),(0,e.jsx)(x.Z,{label:l.format("consoleLetterSpacing"),name:"letterSpacing",fieldProps:{addonAfter:"px"},tooltip:l.format("consoleLetterSpacingTip")}),(0,e.jsx)(se.Z,{label:l.format("consoleFontWeight"),name:"fontWeight",options:[{label:"normal",value:"normal"},{label:"bold",value:"bold"},{label:"100",value:"100"},{label:"200",value:"200"},{label:"300",value:"300"},{label:"400",value:"400"},{label:"500",value:"500"},{label:"600",value:"600"},{label:"700",value:"700"},{label:"800",value:"800"},{label:"900",value:"900"}]})]})}),(0,e.jsx)(G.UW,{title:l.format("consoleCursorStyleTitle"),children:(0,e.jsxs)(ve.Z,{gap:50,children:[(0,e.jsx)(se.Z,{label:l.format("consoleCursorStyle"),name:"cursorStyle",width:"sm",options:l.option("consoleCursorStyleOption",["bar","underline","block"])}),(0,e.jsx)(se.Z,{label:l.format("consoleCursorInactiveStyle"),name:"cursorInactiveStyle",width:"sm",options:l.option("consoleCursorStyleOption",["bar","underline","block","outline"])}),(0,e.jsx)(te.Z,{label:l.format("consoleCursorBlink"),name:"cursorBlink"})]})}),(0,e.jsx)(A.u,{showProRibbonTips:!0,access:"canSeeEnableCe",children:function(s){var i=s.canSeeEnableCe;return(0,e.jsx)(Z.Z,{ghost:!0,title:(0,e.jsx)(we.Z,{}),subTitle:l.format("consoleTheme"),children:(0,e.jsx)(pe.Z,{split:!0,style:{overflow:"hidden"},grid:{column:6},pagination:{pageSize:36,current:S,onChange:function(L,b){r(L)}},dataSource:Object.keys(ce()).map(function(f){return{label:f,value:f,data:ce()[f]}}),renderItem:function(L,b){var z=L.data,V=(0,e.jsxs)(Ie.Z,{style:{backgroundColor:z.background,color:z.foreground,textAlign:"center",cursor:i?"not-allowed":"pointer",borderRadius:0},onClick:function(){if(!i){var q;(q=W.current)===null||q===void 0||q.setFieldValue("theme",L.data),c(L.label)}},hoverable:!0,children:[(0,e.jsx)(Re.Z,{wrap:!0,gutter:[2,2],justify:"center",align:"middle",children:je.n.filter(function(re){return z[re]!=""}).map(function(re){return(0,e.jsx)(Be.Z,{style:{backgroundColor:z[re],padding:8}},re)})}),(0,e.jsx)("div",{style:{paddingTop:5},children:L.label})]});return(0,e.jsx)(pe.Z.Item,{style:{margin:0},children:P==L.label?(0,e.jsx)(Fe.Z.Ribbon,{text:"Checked",children:V}):V},b)}})})}})]})})}]})}var Qe=t(90078),Xe=t(92398);function Ye(){var U=(0,d.useState)("user"),$=p()(U,2),W=$[0],R=$[1],_=(0,h.useAccess)(),E=(0,h.useLocation)();return(0,d.useEffect)(function(){E.state&&R(E.state.tag)},[E.state]),(0,e.jsx)(Qe._z,{children:(0,e.jsx)(Z.Z,{children:(0,e.jsx)(Xe.Z,{activeKey:W,onChange:function(X){R(X)},items:[{key:"user",label:new k.Uo("components.systemBasic.systemBasicLogin").format("title"),children:(0,e.jsx)(Ze,{})},{key:"theme",label:new k.Uo("components.systemBasic.systemBasicTheme").format("title"),children:(0,e.jsx)(Ge,{})},{key:"notice",label:new k.Uo("components.systemBasic.systemBasicEmail").format("title"),children:(0,e.jsx)(ee,{}),disabled:_.canSeeEnableCe}]})})})}},97961:function(Y,B,t){t.d(B,{GH:function(){return Z},_2:function(){return n},fN:function(){return K},ii:function(){return a},vC:function(){return g}});var F=t(15009),p=t.n(F),H=t(99289),M=t.n(H),N=t(82346),a=[{name:"amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"i386",arch:"386",search:[]},{name:"arm/v6",arch:"arm",search:[]},{name:"arm/v7",arch:"arm",search:[]},{name:"arm/v8",arch:"arm64",search:[]},{name:"ppc64le",arch:"ppc64le",search:[]},{name:"riscv64",arch:"riscv64",search:[]}];function K(u){return j.apply(this,arguments)}function j(){return j=M()(p()().mark(function u(D){return p()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,N.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:D}));case 1:case"end":return h.stop()}},u)})),j.apply(this,arguments)}function g(u){return I.apply(this,arguments)}function I(){return I=M()(p()().mark(function u(D){return p()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,N.request)("/api/app/image/import-by-container-tar",{method:"POST",data:D}));case 1:case"end":return h.stop()}},u)})),I.apply(this,arguments)}function Z(u){return T.apply(this,arguments)}function T(){return T=M()(p()().mark(function u(D){return p()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,N.request)("/api/app/image/import-by-image-tar",{method:"POST",data:D}));case 1:case"end":return h.stop()}},u)})),T.apply(this,arguments)}function n(u){return x.apply(this,arguments)}function x(){return x=M()(p()().mark(function u(D){return p()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,N.request)("/api/common/attach/delete",{method:"POST",data:D});case 2:return h.abrupt("return",h.sent);case 3:case"end":return h.stop()}},u)})),x.apply(this,arguments)}function w(){return d.apply(this,arguments)}function d(){return d=_asyncToGenerator(_regeneratorRuntime().mark(function u(){return _regeneratorRuntime().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",request("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return A.stop()}},u)})),d.apply(this,arguments)}}}]);
