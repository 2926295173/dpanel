"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5897],{80821:function(x,g,n){n.d(g,{Z:function(){return R}});var _=n(5574),s=n.n(_),i=n(93246),u=n(54006),E=n(31418),o=n(86738),P=n(14726),m=n(83062),D=n(67294),d=n(85893);function R(t){var C=(0,D.useState)(!1),O=s()(C,2),f=O[0],S=O[1],r=E.Z.useApp(),l=(0,u.useIntl)(),a=function(){S(!0),t.action().then(function(v){if(S(!1),typeof t.onSuccess=="function"&&t.onSuccess(v),t.messageSuccess){var c="";typeof t.messageSuccess=="function"?c=t.messageSuccess(v):c=t.messageSuccess,c.indexOf(".")>-1&&(c=l.formatMessage({id:c})),t.asynced?(0,i.Rk)(r,c):(0,i.$h)(r,c)}}).catch(function(v){S(!1),typeof t.onError=="function"&&t.onError(v)})};return t.confirm?(0,d.jsx)(o.Z,{style:{width:500},title:"\u63D0\u793A",description:t.confirm,onConfirm:a,okText:"Yes",cancelText:"No",children:(0,d.jsx)(P.ZP,{disabled:t.disabled,icon:t.icon,loading:f,danger:t.danger,type:t.type,children:t.children})}):(0,d.jsx)(m.Z,{title:t.tips,children:(0,d.jsx)(P.ZP,{disabled:t.disabled,icon:t.icon,loading:f,onClick:a,danger:t.danger,type:t.type,children:t.children})})}},53889:function(x,g,n){n.r(g),n.d(g,{default:function(){return S}});var _=n(15009),s=n.n(_),i=n(99289),u=n.n(i),E=n(80821),o=n(54006);function P(r){return m.apply(this,arguments)}function m(){return m=u()(s()().mark(function r(l){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/api/common/event/get-list",{method:"POST",data:l}));case 1:case"end":return e.stop()}},r)})),m.apply(this,arguments)}function D(r){return d.apply(this,arguments)}function d(){return d=u()(s()().mark(function r(l){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.request)("/api/common/event/prune",{method:"POST",data:l}));case 1:case"end":return e.stop()}},r)})),d.apply(this,arguments)}var R=n(67255),t=n(6110),C=n(10641),O=n(67294),f=n(85893);function S(){var r=(0,O.useRef)();return(0,f.jsx)(t._z,{header:{extra:[(0,f.jsx)(E.Z,{action:function(){return D()},onSuccess:function(){var a,e;return!((a=r.current)===null||a===void 0)&&a.reloadAndRest&&((e=r.current)===null||e===void 0||e.reloadAndRest()),!0},onError:function(){var a,e;return!((a=r.current)===null||a===void 0)&&a.reset&&((e=r.current)===null||e===void 0||e.reset()),!0},messageSuccess:"\u6E05\u9664\u6210\u529F",confirm:"\u662F\u5426\u8981\u6E05\u9664\u6389\u6240\u6709\u4E8B\u4EF6\u4FE1\u606F",danger:!0,type:"primary",children:"\u6E05\u9664\u4E8B\u4EF6\u901A\u77E5"})]},children:(0,f.jsx)(C.Z,{scroll:{x:"max-content"},columns:[{title:"\u7C7B\u578B",ellipsis:!0,dataIndex:"type",width:200},{title:"\u8BE6\u60C5",search:!1,render:function(a,e,v,c){return(0,f.jsxs)(f.Fragment,{children:[e.action," ",e.message]})}},{title:"\u65F6\u95F4",ellipsis:!0,search:!1,dataIndex:"createdAt",width:200,render:function(a,e,v,c,y){return new Date(e.createdAt).toLocaleString()}}],rowKey:"id",request:function(){var l=u()(s()().mark(function a(e,v,c){var y,M,T;return s()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,P({page:(y=e.current)!==null&&y!==void 0?y:1,pageSize:(M=e.pageSize)!==null&&M!==void 0?M:10,type:e.type});case 2:return T=h.sent,h.abrupt("return",{data:T.data.list,success:!0,total:T.data.total});case 4:case"end":return h.stop()}},a)}));return function(a,e,v){return l.apply(this,arguments)}}(),pagination:(0,R.O)(),actionRef:r})})}},67255:function(x,g,n){n.d(g,{O:function(){return _},j:function(){return s}});function _(){var i,u=parseInt((i=localStorage.getItem("dpanel-pagesize"))!==null&&i!==void 0?i:"0");return{showSizeChanger:!0,defaultPageSize:u!=null?u:20}}function s(i){var u="dpanel-table-column-".concat(i),E={};if(localStorage.getItem(u)){var o;E=JSON.parse((o=localStorage.getItem(u))!==null&&o!==void 0?o:"{}")}return{defaultValue:E,onChange:function(m){localStorage.setItem("dpanel-table-column-".concat(i),JSON.stringify(m))}}}}}]);
