(self.webpackChunk=self.webpackChunk||[]).push([[8022],{23430:function(U,O,e){"use strict";e.d(O,{Z:function(){return m}});var C=e(87462),o=e(67294),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},c=g,d=e(84089),y=function(u,r){return o.createElement(d.Z,(0,C.Z)({},u,{ref:r,icon:c}))},j=o.forwardRef(y),m=j},80821:function(U,O,e){"use strict";e.d(O,{Z:function(){return p}});var C=e(5574),o=e.n(C),g=e(24963),c=e(86738),d=e(14726),y=e(83062),j=e(67294),m=e(85893);function p(u){var r=(0,j.useState)(!1),n=o()(r,2),v=n[0],t=n[1],i=(0,j.useContext)(g.Z),M=i.lang,Z=i.notice,R=i.message,D=function(){t(!0),u.action().then(function(_){if(t(!1),typeof u.onSuccess=="function"&&u.onSuccess(_),u.messageSuccess){var E="";typeof u.messageSuccess=="function"?E=u.messageSuccess(_):E=u.messageSuccess,E.indexOf(".")>-1&&(E=M(E)),u.asynced?R.info(E):R.success(E)}}).catch(function(_){t(!1),typeof u.onError=="function"&&u.onError(_)})};return u.confirm?(0,m.jsx)(c.Z,{style:{width:500},title:M("notification.title.tip"),description:u.confirm,onConfirm:D,okText:"Yes",cancelText:"No",children:(0,m.jsx)(d.ZP,{disabled:u.disabled,icon:u.icon,loading:v,danger:u.danger,type:u.type,children:u.children})}):(0,m.jsx)(y.Z,{title:u.tips,children:(0,m.jsx)(d.ZP,{disabled:u.disabled,icon:u.icon,loading:v,onClick:D,danger:u.danger,type:u.type,children:u.children})})}},94359:function(U,O,e){"use strict";e.d(O,{Z:function(){return v}});var C=e(67294),o=e(3089),g=e(98165),c=e(18429),d=e(8751),y=e(14313),j=e(30159),m=e(87740),p=e(66309),u=e(83062),r=e(54006),n=e(85893);function v(t){var i=(0,n.jsx)(n.Fragment,{});if(t.status=="0"&&(i=(0,n.jsx)(p.Z,{icon:(0,n.jsx)(o.Z,{}),color:"default",children:"waiting"})),t.status=="10"&&(i=(0,n.jsx)(p.Z,{icon:(0,n.jsx)(g.Z,{spin:!0}),color:"processing",children:"processing"})),t.status=="20"&&(i=(0,n.jsx)(p.Z,{icon:(0,n.jsx)(c.Z,{}),color:"error",children:"error"})),t.status=="30"&&(i=(0,n.jsx)(p.Z,{icon:(0,n.jsx)(d.Z,{}),color:"success",children:"success"})),t.status=="running"){var M,Z;i=(0,n.jsx)(p.Z,{icon:(0,n.jsx)(y.Z,{}),color:"success",children:(M=t.message)!==null&&M!==void 0&&M.showInTag?(Z=t.message)===null||Z===void 0?void 0:Z.content:t.status})}if(t.status=="paused"){var R,D;i=(0,n.jsx)(p.Z,{icon:(0,n.jsx)(j.Z,{}),children:(R=t.message)!==null&&R!==void 0&&R.showInTag?(D=t.message)===null||D===void 0?void 0:D.content:t.status})}if(t.status=="waiting"){var w,_;i=(0,n.jsx)(p.Z,{icon:(0,n.jsx)(m.Z,{}),children:(w=t.message)!==null&&w!==void 0&&w.showInTag?(_=t.message)===null||_===void 0?void 0:_.content:t.status})}if(t.status=="exited"||t.status=="dead"||t.status=="removing"||t.status=="restarting"||t.status=="created"){var E,l;i=(0,n.jsx)(p.Z,{icon:(0,n.jsx)(c.Z,{}),color:"warning",children:(E=t.message)!==null&&E!==void 0&&E.showInTag?(l=t.message)===null||l===void 0?void 0:l.content:t.status})}return t.link&&(i=(0,n.jsx)(r.Link,{to:t.link,children:i})),t.message&&(i=(0,n.jsx)(u.Z,{placement:t.message.placement,title:t.message.content,children:i})),(0,n.jsx)(n.Fragment,{children:i})}},24963:function(U,O,e){"use strict";var C=e(67294),o=(0,C.createContext)({});O.Z=o},96781:function(U,O,e){"use strict";var C=e(67294),o=(0,C.createContext)({});O.Z=o},83536:function(U,O,e){"use strict";e.r(O),e.d(O,{default:function(){return b}});var C=e(15009),o=e.n(C),g=e(99289),c=e.n(g),d=e(80821),y=e(90098),j=e(43425),m=e(86548),p=e(23430),u=e(10641),r=e(54006),n=e(42075),v=e(96074),t=e(83062),i=e(60922),M=e(67294),Z=e(96781),R=e(94359),D=e(67255),w=e(93162),_=e(24963),E=e(66309),l=e(85893);function z(s){var f=(0,r.useIntl)(),A=(0,M.useContext)(_.Z),a=A.lang,B;if(!s.type)B=(0,l.jsx)(E.Z,{children:a("compose.default")});else switch(s.type){case"remoteUrl":B=(0,l.jsx)(E.Z,{color:"cyan",children:a("compose.".concat(s.type))});break;case"serverPath":B=(0,l.jsx)(E.Z,{color:"blue",children:a("compose.".concat(s.type))});break;case"storagePath":B=(0,l.jsx)(E.Z,{color:"blue-inverse",children:a("compose.".concat(s.type))});break;case"outPath":B=(0,l.jsx)(E.Z,{color:"yellow",children:a("compose.".concat(s.type))});break;default:B=(0,l.jsx)(E.Z,{children:a("compose.".concat(s.type))})}return(0,l.jsx)(t.Z,{title:s.tootip,children:B})}function b(){var s=(0,M.useContext)(Z.Z),f=s.listTableRef,A=(0,M.useContext)(_.Z),a=A.lang,B=A.notice;return(0,l.jsx)(u.Z,{scroll:{x:"max-content"},request:function(){var W=c()(o()().mark(function L(h){var I,x,T;return o()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,y.pm)({title:h.title,name:h.name,pageSize:(I=h.pageSize)!==null&&I!==void 0?I:10,page:(x=h.current)!==null&&x!==void 0?x:1});case 2:return T=P.sent,P.abrupt("return",{data:T.data.list,success:!0,total:T.data.list.length});case 4:case"end":return P.stop()}},L)}));return function(L){return W.apply(this,arguments)}}(),rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name",width:200,render:function(L,h,I,x,T){return(0,l.jsx)(r.Link,{to:"/compose/deploy/"+h.id,children:h.name},I)}},{title:"\u9879\u76EE\u540D\u79F0",dataIndex:"title",width:200},{title:"\u7C7B\u578B",width:150,search:!1,render:function(L,h,I,x,T){var S;return(0,l.jsx)(z,{tootip:(S=h.setting.uri)!==null&&S!==void 0?S:"",type:h.setting&&h.setting.type?h.setting.type:""})}},{title:"\u5BB9\u5668\u72B6\u6001",dataIndex:"status",search:!1,width:300,render:function(L,h,I,x,T){return(0,l.jsx)(n.Z,{children:h.setting.status.split(", ").map(function(S){var P="running",K=S.indexOf("(");return K>-1?P=S.slice(0,K):P=S,(0,l.jsx)(R.Z,{status:P,message:{content:a("compose.".concat(P),{count:S.slice(K+1,S.length-1)}),placement:"top",showInTag:!0}},h.id)})})}},{title:"\u64CD\u4F5C",width:80,valueType:"option",key:"option",render:function(L,h,I,x,T){return(0,l.jsxs)(n.Z,{split:(0,l.jsx)(v.Z,{type:"vertical"}),children:[(0,l.jsx)(r.Link,{to:"/compose/deploy/"+h.id,children:(0,l.jsx)(t.Z,{title:"\u7BA1\u7406",children:(0,l.jsx)(j.Z,{})})},"3"),h.setting.type!="outPath"&&(0,l.jsx)(r.Link,{to:"/compose/create?id="+h.id,children:(0,l.jsx)(t.Z,{title:"\u7F16\u8F91",children:(0,l.jsx)(m.Z,{})})},"4"),(0,l.jsx)(i.Z.Link,{onClick:c()(o()().mark(function S(){var P,K;return o()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,y.YZ)({id:h.id});case 2:P=F.sent,P&&P.data&&P.data.detail&&(K=new Blob([P.data.detail.yaml],{type:"text/plain"}),(0,w.saveAs)(K,h.name+"-compose.yaml"));case 4:case"end":return F.stop()}},S)})),children:(0,l.jsx)(t.Z,{title:"\u4E0B\u8F7D",children:(0,l.jsx)(p.Z,{})})},"2")]})}}],rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0,getCheckboxProps:function(L){return{disabled:L.setting.type=="storagePath"||L.setting.type=="serverPath"||L.setting.type=="outPath"}}},tableAlertOptionRender:function(L){var h=L.selectedRows;return(0,l.jsx)(n.Z,{size:16,children:(0,l.jsx)(d.Z,{danger:!0,type:"primary",action:function(){return(0,y.ik)({id:h.map(function(x){return x.id})})},onSuccess:function(){var x,T;return!((x=f.current)===null||x===void 0)&&x.reloadAndRest&&((T=f.current)===null||T===void 0||T.reloadAndRest()),!0},onError:function(){var x,T;return!((x=f.current)===null||x===void 0)&&x.reset&&((T=f.current)===null||T===void 0||T.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",confirm:(0,l.jsx)(n.Z,{style:{width:280},direction:"vertical",children:(0,l.jsx)(i.Z.Text,{children:"\u5220\u9664\u524D\u8BF7\u5148\u9500\u6BC1\u76F8\u5173\u5BB9\u5668\uFF0C\u786E\u8BA4\u5417\uFF1F"})}),children:"\u6279\u91CF\u5220\u9664"})})},pagination:(0,D.O)(),search:{collapsed:!1},actionRef:f,columnsState:(0,D.j)("compose-list")})}},90098:function(U,O,e){"use strict";e.d(O,{GG:function(){return R},MG:function(){return E},Oh:function(){return t},U_:function(){return w},YZ:function(){return u},ik:function(){return n},im:function(){return y},mg:function(){return M},pm:function(){return m},xC:function(){return z}});var C=e(15009),o=e.n(C),g=e(99289),c=e.n(g),d=e(54006);function y(s){return j.apply(this,arguments)}function j(){return j=c()(o()().mark(function s(f){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/compose/create",{method:"POST",data:f}));case 1:case"end":return a.stop()}},s)})),j.apply(this,arguments)}function m(s){return p.apply(this,arguments)}function p(){return p=c()(o()().mark(function s(f){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/compose/get-list",{method:"POST",data:f}));case 1:case"end":return a.stop()}},s)})),p.apply(this,arguments)}function u(s){return r.apply(this,arguments)}function r(){return r=c()(o()().mark(function s(f){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/compose/get-detail",{method:"POST",data:f}));case 1:case"end":return a.stop()}},s)})),r.apply(this,arguments)}function n(s){return v.apply(this,arguments)}function v(){return v=c()(o()().mark(function s(f){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/compose/delete",{method:"POST",data:f}));case 1:case"end":return a.stop()}},s)})),v.apply(this,arguments)}function t(s){return i.apply(this,arguments)}function i(){return i=c()(o()().mark(function s(f){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/compose/container-deploy",{method:"POST",data:f}));case 1:case"end":return a.stop()}},s)})),i.apply(this,arguments)}function M(s){return Z.apply(this,arguments)}function Z(){return Z=c()(o()().mark(function s(f){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/compose/container-destroy",{method:"POST",data:f}));case 1:case"end":return a.stop()}},s)})),Z.apply(this,arguments)}function R(s){return D.apply(this,arguments)}function D(){return D=c()(o()().mark(function s(f){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/compose/container-ctrl",{method:"POST",data:f}));case 1:case"end":return a.stop()}},s)})),D.apply(this,arguments)}function w(s){return _.apply(this,arguments)}function _(){return _=c()(o()().mark(function s(f){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/compose/container-process-kill",{method:"POST",data:f}));case 1:case"end":return a.stop()}},s)})),_.apply(this,arguments)}function E(s){return l.apply(this,arguments)}function l(){return l=c()(o()().mark(function s(f){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/compose/get-from-uri",{method:"POST",data:f}));case 1:case"end":return a.stop()}},s)})),l.apply(this,arguments)}function z(s){return b.apply(this,arguments)}function b(){return b=c()(o()().mark(function s(f){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/app/compose/parse",{method:"POST",data:f}));case 1:case"end":return a.stop()}},s)})),b.apply(this,arguments)}},67255:function(U,O,e){"use strict";e.d(O,{O:function(){return C},j:function(){return o}});function C(){var g,c=parseInt((g=localStorage.getItem("dpanel-pagesize"))!==null&&g!==void 0?g:"0");return{showSizeChanger:!0,defaultPageSize:c!=null?c:20}}function o(g){var c="dpanel-table-column-".concat(g),d={};if(localStorage.getItem(c)){var y;d=JSON.parse((y=localStorage.getItem(c))!==null&&y!==void 0?y:"{}")}return{defaultValue:d,onChange:function(m){localStorage.setItem("dpanel-table-column-".concat(g),JSON.stringify(m))}}}},93162:function(U,O,e){var C,o,g;(function(c,d){o=[],C=d,g=typeof C=="function"?C.apply(O,o):C,g!==void 0&&(U.exports=g)})(this,function(){"use strict";function c(r,n){return typeof n=="undefined"?n={autoBom:!1}:typeof n!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r}function d(r,n,v){var t=new XMLHttpRequest;t.open("GET",r),t.responseType="blob",t.onload=function(){u(t.response,n,v)},t.onerror=function(){console.error("could not download file")},t.send()}function y(r){var n=new XMLHttpRequest;n.open("HEAD",r,!1);try{n.send()}catch(v){}return 200<=n.status&&299>=n.status}function j(r){try{r.dispatchEvent(new MouseEvent("click"))}catch(v){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(n)}}var m=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof e.g=="object"&&e.g.global===e.g?e.g:void 0,p=m.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=m.saveAs||(typeof window!="object"||window!==m?function(){}:"download"in HTMLAnchorElement.prototype&&!p?function(r,n,v){var t=m.URL||m.webkitURL,i=document.createElement("a");n=n||r.name||"download",i.download=n,i.rel="noopener",typeof r=="string"?(i.href=r,i.origin===location.origin?j(i):y(i.href)?d(r,n,v):j(i,i.target="_blank")):(i.href=t.createObjectURL(r),setTimeout(function(){t.revokeObjectURL(i.href)},4e4),setTimeout(function(){j(i)},0))}:"msSaveOrOpenBlob"in navigator?function(r,n,v){if(n=n||r.name||"download",typeof r!="string")navigator.msSaveOrOpenBlob(c(r,v),n);else if(y(r))d(r,n,v);else{var t=document.createElement("a");t.href=r,t.target="_blank",setTimeout(function(){j(t)})}}:function(r,n,v,t){if(t=t||open("","_blank"),t&&(t.document.title=t.document.body.innerText="downloading..."),typeof r=="string")return d(r,n,v);var i=r.type==="application/octet-stream",M=/constructor/i.test(m.HTMLElement)||m.safari,Z=/CriOS\/[\d]+/.test(navigator.userAgent);if((Z||i&&M||p)&&typeof FileReader!="undefined"){var R=new FileReader;R.onloadend=function(){var _=R.result;_=Z?_:_.replace(/^data:[^;]*;/,"data:attachment/file;"),t?t.location.href=_:location=_,t=null},R.readAsDataURL(r)}else{var D=m.URL||m.webkitURL,w=D.createObjectURL(r);t?t.location=w:location.href=w,t=null,setTimeout(function(){D.revokeObjectURL(w)},4e4)}});m.saveAs=u.saveAs=u,U.exports=u})}}]);
