"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8878],{55809:function(b,u,e){var D=e(87462),l=e(67294),O=e(44805),i=e(84089),f=function(v,c){return l.createElement(i.Z,(0,D.Z)({},v,{ref:c,icon:O.Z}))},s=l.forwardRef(f);u.Z=s},1699:function(b,u,e){e.d(u,{u:function(){return U}});var D=e(9783),l=e.n(D),O=e(97857),i=e.n(O),f=e(67294),s=e(82346),M=e(40411),v=e(42075),c=e(85893),U=function(a){var d=(0,s.useAccess)(),C=Array.isArray(a.access)?a.access:[a.access],_,o=a.fallback;return typeof a.children=="function"?(_=a.children(C.reduce(function(n,h){return i()(i()({},n),{},l()({},h,d[h]))},{})),_||(_=o)):C.every(function(n){return d[n]})?_=a.children:_=o,!o&&_&&a.showProTips&&d.canSeeEnableCe&&(_=(0,c.jsx)(M.Z,{offset:a.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:_})),!o&&_&&a.showProRibbonTips&&d.canSeeEnableCe&&(_=(0,c.jsx)(M.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:_})),a.space?(0,c.jsx)(v.Z,i()(i()({},a.space),{},{children:_})):_}},29798:function(b,u,e){e.r(u),e.d(u,{default:function(){return o}});var D=e(5574),l=e.n(D),O=e(60335),i=e(38345),f=e(82346),s=e(67294),M=e(24963),v=e(50070),c=e(37767),U=e(52031),T=e(14189),a=e(72409),d=e(14245),C=e(1699),_=e(85893);function o(){var n=(0,s.useContext)(M.Z),h=n.message,F=n.notice,j=n.loading,N=n.lang,L=(0,s.useContext)(v.AppDetailContext),E=(0,f.useParams)(),x=(0,s.useState)(),R=l()(x,2),t=R[0],$=R[1],y=(0,s.useState)(1),B=l()(y,2),I=B[0],H=B[1],g=(0,f.useNavigate)();return(0,s.useEffect)(function(){var m;j.show(),L.reload(),(0,O.jV)({md5:(m=E.id)!==null&&m!==void 0?m:""}).then(function(P){P.data&&(P.data.info.HostConfig.NetworkMode=="host"&&P.data.info.Config.ExposedPorts&&Object.keys(P.data.info.Config.ExposedPorts).map(function(p){P.data.info.NetworkSettings.Ports[p]=[{HostIp:"0.0.0.0",HostPort:p.substring(0,p.indexOf("/"))}]}),$(P.data))}).finally(function(){j.destroy()})},[I]),(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(i.Z,{direction:"column",gutter:[0,10],children:[(t==null?void 0:t.info)&&(0,_.jsx)(T.Z,{data:t.info}),(t==null?void 0:t.info)&&(0,_.jsx)(C.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,_.jsx)(a.Z,{data:t,checkContainerUpgrade:function(){g("/app/list",{state:{page:localStorage.getItem("dpanel-page-compose-list")}})}})}),t&&(0,_.jsx)(c.Z,{data:t}),t&&(0,_.jsx)(U.Z,{data:t==null?void 0:t.info}),t&&(0,_.jsx)(d.Z,{data:t.info})]})})}},50070:function(b,u,e){e.r(u),e.d(u,{AppDetailContext:function(){return h},default:function(){return F}});var D=e(15009),l=e.n(D),O=e(99289),i=e.n(O),f=e(5574),s=e.n(f),M=e(1699),v=e(24963),c=e(60335),U=e(55809),T=e(90078),a=e(82346),d=e(25593),C=e(28036),_=e(50136),o=e(67294),n=e(85893),h=(0,o.createContext)({});function F(){var j,N=(0,o.useContext)(v.Z),L=N.loading,E=(0,a.useParams)(),x=(0,a.useSearchParams)(),R=s()(x,2),t=R[0],$=R[1],y=(j=t.get("tab"))!==null&&j!==void 0?j:"edit",B=(0,o.useState)("edit"),I=s()(B,2),H=I[0],g=I[1],m=(0,a.useNavigate)(),P=(0,o.useState)(1),p=s()(P,2),z=p[0],Q=p[1],G=[{label:(0,n.jsx)(a.Link,{to:"/app/detail/edit/".concat(E.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,n.jsx)(a.Link,{to:"/app/detail/network/".concat(E.id,"?tab=network"),children:"\u7F51\u7EDC\u7BA1\u7406"}),key:"network"},{label:(0,n.jsx)(d.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){m("/app/detail/file/".concat(E.id,"?tab=file"))}},{label:(0,n.jsx)(d.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){m("/app/detail/log/".concat(E.id,"?tab=log"))}},{label:(0,n.jsx)(d.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){m("/app/detail/stat/".concat(E.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,n.jsx)(U.Z,{}),disabled:!0}],X=(0,o.useState)(G),V=s()(X,2),Y=V[0],w=V[1];(0,o.useEffect)(function(){L.show(),g(y);var A=function(){var S=i()(l()().mark(function J(){var Z,k,K;return l()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return Z=G,r.prev=1,r.next=4,(0,c.jV)({md5:(k=E.id)!==null&&k!==void 0?k:""});case 4:K=r.sent,Z.map(function(W){return W.key=="containerName"&&(W.label=K.data.info.Name),(!K.data.info.State.Running||K.data.info.State.Restarting)&&(W.key=="file"||W.key=="stat")&&(W.disabled=!0),W}),w(Z),r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(1),m("/app/list"),r.abrupt("return");case 13:return r.prev=13,L.destroy(),r.finish(13);case 16:case"end":return r.stop()}},J,null,[[1,9,13,16]])}));return function(){return S.apply(this,arguments)}}();A()},[z,E]);var q=function(S){g(S.key)};return(0,n.jsx)(h.Provider,{value:{reload:function(){Q(z+1)}},children:(0,n.jsxs)(T._z,{header:{extra:[(0,n.jsx)(M.u,{access:"canSeeContainerListManageCreate",children:(0,n.jsx)(a.Link,{to:"/app/create/image",children:(0,n.jsx)(C.ZP,{type:"primary",children:"\u521B\u5EFA\u5BB9\u5668"})})},"create")]},children:[(0,n.jsx)(_.Z,{mode:"horizontal",onClick:q,selectedKeys:[H],items:Y}),(0,n.jsx)(a.Outlet,{})]})})}}}]);
