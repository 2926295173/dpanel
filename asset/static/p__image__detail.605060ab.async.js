"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3357],{80821:function(W,M,e){e.d(M,{Z:function(){return j}});var b=e(5574),a=e.n(b),R=e(24963),l=e(86738),i=e(28036),y=e(83062),f=e(67294),B=e(85893);function j(s){var D=(0,f.useState)(!1),U=a()(D,2),O=U[0],g=U[1],m=(0,f.useContext)(R.Z),c=m.lang,_=m.notice,A=m.message,I=function(){g(!0);var E=s.action();E instanceof Promise?E.then(function(T){if(g(!1),T){typeof s.onSuccess=="function"&&s.onSuccess(T);var u="";s.messageSuccess?typeof s.messageSuccess=="function"?u=s.messageSuccess(T):u=s.messageSuccess.indexOf("notification.")==0?c(s.messageSuccess):s.messageSuccess:u=c("notification.finish"),s.asynced?A.info(u):A.success(u)}}).catch(function(T){g(!1),typeof s.onError=="function"&&s.onError(T)}):g(!1)};return s.confirm?(0,B.jsx)(l.Z,{style:{width:500},title:s.confirmTitle?s.confirmTitle:c("notification.title.tip"),description:typeof s.confirm=="string"&&s.confirm.indexOf("notification.")==0?c(s.confirm):s.confirm,onConfirm:I,okText:"Yes",cancelText:"No",children:(0,B.jsx)(i.ZP,{disabled:s.disabled,icon:s.icon,loading:O,danger:s.danger,type:s.type,children:s.children})}):(0,B.jsx)(y.Z,{title:s.tips,children:(0,B.jsx)(i.ZP,{style:s.ghost?{padding:0,height:"auto"}:{},disabled:s.disabled,icon:s.icon,loading:O,onClick:I,danger:s.danger,type:s.type,children:s.children})})}},96042:function(W,M,e){e.d(M,{Z:function(){return j}});var b=e(97857),a=e.n(b),R=e(5574),l=e.n(R),i=e(75870),y=e(34041),f=e(67294),B=e(85893);function j(s){var D=(0,f.useState)([]),U=l()(D,2),O=U[0],g=U[1];(0,f.useEffect)(function(){(0,i.Ot)().then(function(c){c&&g(c.data.list)})},[]);var m={};return s.multiple&&(m.mode="multiple"),s.top&&(m.placement="topLeft"),(0,B.jsx)(y.Z,a()({popupMatchSelectWidth:!s.width,style:s.width?{width:s.width}:{},onChange:function(_){if(Array.isArray(_)){var A=_.map(function(I){return O[I]});s.onChangeList&&s.onChangeList(A)}else s.onChange&&s.onChange(O[_])},placeholder:"\u9009\u62E9\u955C\u50CF\u4ED3\u5E93\uFF0C\u9ED8\u8BA4\u4E3A\u5F53\u524D\u4ED3\u5E93",options:O.map(function(c,_){return{value:_,label:c.title+"("+c.serverAddress+")"}}),allowClear:!0},m))}},76428:function(W,M,e){e.d(M,{Z:function(){return l}});var b=e(25593),a=e(67294),R=e(85893);function l(i){return(0,R.jsx)(b.Z.Text,{copyable:!0,children:i.title})}},24963:function(W,M,e){var b=e(67294),a=(0,b.createContext)({});M.Z=a},70977:function(W,M,e){e.r(M),e.d(M,{default:function(){return oe}});var b=e(15009),a=e.n(b),R=e(99289),l=e.n(R),i=e(5574),y=e.n(i),f=e(3393),B=e(43425),j=e(58638),s=e(87784),D=e(40666),U=e(1912),O=e(77171),g=e(48689),m=e(45742),c=e(38345),_=e(97269),A=e(62370),I=e(7529),p=e(5966),E=e(82346),T=e(42075),u=e(96074),w=e(65233),Z=e(2487),o=e(4393),P=e(66309),v=e(25593),r=e(26412),ae=e(63490),L=e(67294),$=e(80821),se=e(5251),Y=e(93162),Ee=e.n(Y),ue=e(18148),_e=e(96042),ie=e(24963),le=e(76428),t=e(85893);function oe(){var G,N=(0,L.useContext)(ie.Z),ve=N.message,Pe=N.notice,Oe=N.lang,de=(0,L.useState)(),X=y()(de,2),n=X[0],ce=X[1],k=(0,E.useParams)(),V=(0,L.useRef)(),me=(0,L.useState)(0),H=y()(me,2),z=H[0],Q=H[1],fe=(0,E.useNavigate)(),J=(0,E.useAccess)(),pe=(0,L.useState)(),q=y()(pe,2),S=q[0],he=q[1],ge=(0,L.useState)(""),ee=y()(ge,2),ne=ee[0],te=ee[1];return(0,L.useEffect)(function(){k.id&&(0,f.YU)({md5:k.id}).then(function(d){ce(d.data),J.canSeeImageRemoteTag&&(0,f.cd)({imageName:d.data.info.RepoTags[0]}).then(function(h){he(h.data.list)}).catch(function(h){})})},[z]),(0,t.jsx)("div",{children:(0,t.jsxs)(c.Z,{direction:"column",ghost:!0,gutter:[0,10],children:[(0,t.jsx)(c.Z,{title:(0,t.jsx)(B.Z,{}),subTitle:"\u5E38\u7528\u64CD\u4F5C",headerBordered:!0,bordered:!0,children:(0,t.jsxs)(T.Z,{children:[(0,t.jsx)($.Z,{icon:(0,t.jsx)(j.Z,{}),action:function(){var h;return(0,f.Rb)({md5:(h=n==null?void 0:n.info.RepoTags)!==null&&h!==void 0?h:[""]})},onSuccess:function(h){var C=new Blob([h],{type:"application/tar"});(0,Y.saveAs)(C,(n==null?void 0:n.info.RepoTags.join("-"))+".tar")},children:"\u5BFC\u51FA"}),(0,t.jsx)(u.Z,{}),(0,t.jsx)($.Z,{icon:(0,t.jsx)(s.Z,{}),danger:!0,type:"primary",action:function(){var h;return(0,ue.ao)({md5:[(h=n==null?void 0:n.info.Id)!==null&&h!==void 0?h:""],force:!0})},onSuccess:function(){fe("/image/list")},confirm:"notification.confirm.title",children:"\u5F3A\u5236\u5220\u9664"})]})}),J.canSeeImageRemoteTag&&(0,t.jsx)(c.Z,{title:(0,t.jsx)(D.Z,{}),subTitle:"\u8FDC\u7A0B Tag \u5217\u8868",extra:(0,t.jsx)(_.A,{isKeyPressSubmit:!0,submitter:!1,onFinish:function(h){te(h.search)},children:(0,t.jsx)(T.Z.Compact,{children:(0,t.jsx)(A.Z,{style:{margin:0},name:"search",children:(0,t.jsx)(w.Z,{allowClear:!0,addonBefore:"\u641C\u7D22Tag",placeholder:"\u6309\u56DE\u8F66\u67E5\u8BE2",onClear:function(){te("")}})})})},"form"),children:(0,t.jsx)(Z.Z,{pagination:{pageSize:36},rowKey:function(h){return"".concat(h)},grid:{gutter:10,xs:3,sm:3,md:4,lg:4,xl:5,xxl:6},dataSource:S&&S.filter(function(d){return!ne||d.indexOf(ne)!==-1}),loading:!S||(S==null?void 0:S.length)<=0,renderItem:function(h,C){return(0,t.jsx)(Z.Z.Item,{children:(0,t.jsx)(o.Z,{style:{height:"60px"},children:(0,t.jsx)("div",{style:{margin:"-10px",wordBreak:"break-word"},children:(0,t.jsx)(le.Z,{title:h})})})},C)}})}),(0,t.jsx)(c.Z,{bordered:!0,title:(0,t.jsx)(D.Z,{}),subTitle:"Tag \u5217\u8868",children:(0,t.jsx)(I.Rs,{grid:{gutter:40,column:2},headerTitle:!1,metas:{content:{render:function(h,C,x){return(0,t.jsx)(P.Z,{color:"blue",children:(0,t.jsx)(v.Z.Text,{copyable:!0,children:C})},x)}},title:{render:function(h,C,x){return(0,t.jsxs)(T.Z,{children:[(0,t.jsxs)($.Z,{action:function(){return(0,f.Gb)({tag:C,type:"push"})},children:[(0,t.jsx)(U.Z,{})," Push"]}),(0,t.jsxs)($.Z,{action:function(){return(0,f.Gb)({tag:C,type:"pull"})},children:[(0,t.jsx)(O.Z,{})," Pull"]}),(0,t.jsx)($.Z,{action:function(){return(0,f.Pn)({tag:C})},onSuccess:function(re){return Q(z+1),!0},confirm:"notification.confirm.title",children:(0,t.jsx)(g.Z,{})})]},x)}}},dataSource:n==null?void 0:n.info.RepoTags})}),(0,t.jsx)(c.Z,{bordered:!0,headerBordered:!0,title:(0,t.jsx)(D.Z,{}),subTitle:"\u65B0\u589E Tag",children:(0,t.jsxs)(_.A,{formRef:V,onFinish:function(){var d=l()(a()().mark(function h(C){var x,K,re;return a()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,f._U)({md5:(x=n==null?void 0:n.info.Id)!==null&&x!==void 0?x:"",tag:(C.imageRespo?C.imageRespo.serverAddress+"/":"")+C.imageTag});case 2:re=F.sent,Q(z+1),(K=V.current)===null||K===void 0||K.resetFields();case 5:case"end":return F.stop()}},h)}));return function(h){return d.apply(this,arguments)}}(),children:[(0,t.jsx)(A.Z,{label:"\u955C\u50CF\u4ED3\u5E93",name:"imageRespo",tooltip:(0,t.jsxs)(t.Fragment,{children:["\u63A8\u9001\u524D\u8BF7\u4FDD\u8BC1\u4ED3\u5E93\u4E2D\u6709\u6307\u5B9A\u7684\u547D\u540D\u7A7A\u95F4, \u5982\u6CA1\u6709\u8BF7\u5148 ",(0,t.jsx)("a",{href:"",target:"_blank",children:"\u6DFB\u52A0\u4ED3\u5E93"})]}),children:(0,t.jsx)(_e.Z,{})}),(0,t.jsx)(p.Z,{fieldProps:{min:2,max:255},rules:[{required:!0}],required:!0,placeholder:"\u53EA\u80FD\u4F7F\u7528\u5C0F\u5199\u82F1\u6587\u5B57\u7B26\u3001\u6570\u5B57\u3001_\u3001-\u3001",label:"\u955C\u50CF\u540D\u79F0",name:"imageTag",tooltip:"\u4F8B\u5982: name:tag\u3001namespace/name:tag\u3001registry/namespace/name:tag"})]})}),(0,t.jsx)(c.Z,{bordered:!0,headerBordered:!0,title:(0,t.jsx)(m.Z,{}),subTitle:"\u955C\u50CF\u8BE6\u60C5",children:(0,t.jsxs)(r.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,t.jsx)(r.Z.Item,{label:"ID",children:n==null?void 0:n.info.Id}),(0,t.jsx)(r.Z.Item,{label:"Parent",children:n==null?void 0:n.info.Parent}),(0,t.jsx)(r.Z.Item,{label:"Size",children:(0,se.FI)((G=n==null?void 0:n.info.Size)!==null&&G!==void 0?G:0)}),(0,t.jsx)(r.Z.Item,{label:"Created",children:n==null?void 0:n.info.Created}),(0,t.jsxs)(r.Z.Item,{label:"Build",children:["Docker ",n==null?void 0:n.info.DockerVersion," ",n==null?void 0:n.info.Os," ",n==null?void 0:n.info.Architecture]}),(0,t.jsx)(r.Z.Item,{label:"Labels",children:(0,t.jsx)(r.Z,{column:1,bordered:!0,children:(n==null?void 0:n.info.Config.Labels)&&Object.keys(n==null?void 0:n.info.Config.Labels).map(function(d){return(0,t.jsx)(r.Z.Item,{label:d,children:(0,t.jsx)(v.Z.Text,{style:{width:"400px"},ellipsis:{tooltip:n==null?void 0:n.info.Config.Labels[d]},children:n==null?void 0:n.info.Config.Labels[d]})},d)})})})]})}),(0,t.jsx)(c.Z,{bordered:!0,headerBordered:!0,title:(0,t.jsx)(m.Z,{}),subTitle:"Dockerfile \u8BE6\u60C5",children:(0,t.jsxs)(r.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,t.jsx)(r.Z.Item,{label:"CMD",children:n==null?void 0:n.info.Config.Cmd}),(0,t.jsx)(r.Z.Item,{label:"ENTRYPOINT",children:n==null?void 0:n.info.Config.Entrypoint}),(0,t.jsx)(r.Z.Item,{label:"EXPOSE",children:(n==null?void 0:n.info.Config.ExposedPorts)&&Object.keys(n==null?void 0:n.info.Config.ExposedPorts).map(function(d){return(0,t.jsx)(P.Z,{color:"gray",children:d},d)})}),(0,t.jsx)(r.Z.Item,{label:"VOLUME",children:(n==null?void 0:n.info.Config.Volumes)&&Object.keys(n==null?void 0:n.info.Config.Volumes).map(function(d){return(0,t.jsx)(P.Z,{color:"gray",children:d},d)})}),(0,t.jsx)(r.Z.Item,{label:"Env",children:(0,t.jsx)(r.Z,{column:1,bordered:!0,children:(n==null?void 0:n.info.Config.Env)&&(n==null?void 0:n.info.Config.Env.map(function(d,h){var C=d.split("=");return(0,t.jsx)(r.Z.Item,{label:C[0],children:C[1]},h)}))})})]})}),(0,t.jsxs)(c.Z,{bordered:!0,headerBordered:!0,title:(0,t.jsx)(m.Z,{}),subTitle:"Layers",children:[(0,t.jsx)(ae.Z,{rowKey:"CreatedBy",dataSource:n==null?void 0:n.layer.reverse(),columns:[{title:"Layer",dataIndex:"CreatedBy",key:"CreatedBy"}]}),";"]})]})})}},3393:function(W,M,e){e.d(M,{Gb:function(){return B},Pn:function(){return U},Rb:function(){return g},YU:function(){return y},ZQ:function(){return A},_U:function(){return s},cd:function(){return c}});var b=e(15009),a=e.n(b),R=e(99289),l=e.n(R),i=e(82346);function y(p){return f.apply(this,arguments)}function f(){return f=l()(a()().mark(function p(E){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,i.request)("/api/app/image/get-detail",{method:"POST",data:E}));case 1:case"end":return u.stop()}},p)})),f.apply(this,arguments)}function B(p){return j.apply(this,arguments)}function j(){return j=l()(a()().mark(function p(E){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,i.request)("/api/app/image/tag-remote",{method:"POST",data:E}));case 1:case"end":return u.stop()}},p)})),j.apply(this,arguments)}function s(p){return D.apply(this,arguments)}function D(){return D=l()(a()().mark(function p(E){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,i.request)("/api/app/image/tag-add",{method:"POST",data:E}));case 1:case"end":return u.stop()}},p)})),D.apply(this,arguments)}function U(p){return O.apply(this,arguments)}function O(){return O=l()(a()().mark(function p(E){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,i.request)("/api/app/image/tag-delete",{method:"POST",data:E}));case 1:case"end":return u.stop()}},p)})),O.apply(this,arguments)}function g(p){return m.apply(this,arguments)}function m(){return m=l()(a()().mark(function p(E){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,i.request)("/api/app/image/export",{method:"POST",data:E,responseType:"blob"}));case 1:case"end":return u.stop()}},p)})),m.apply(this,arguments)}function c(p){return _.apply(this,arguments)}function _(){return _=l()(a()().mark(function p(E){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,i.request)("/api/pro/image/get-remote-tag",{method:"POST",data:E}));case 1:case"end":return u.stop()}},p)})),_.apply(this,arguments)}function A(p){return I.apply(this,arguments)}function I(){return I=l()(a()().mark(function p(E){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,i.request)("/api/app/image/check-upgrade",{method:"POST",data:E}));case 1:case"end":return u.stop()}},p)})),I.apply(this,arguments)}},18148:function(W,M,e){e.d(M,{$q:function(){return g},Fj:function(){return T},KG:function(){return y},KX:function(){return w},T8:function(){return U},Xn:function(){return s},ao:function(){return c},c5:function(){return p},c7:function(){return A}});var b=e(15009),a=e.n(b),R=e(99289),l=e.n(R),i=e(82346);function y(o){return f.apply(this,arguments)}function f(){return f=l()(a()().mark(function o(P){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.request)("/api/app/image/get-list",{method:"POST",data:P}));case 1:case"end":return r.stop()}},o)})),f.apply(this,arguments)}function B(o){return j.apply(this,arguments)}function j(){return j=_asyncToGenerator(_regeneratorRuntime().mark(function o(P){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,request("/api/app/log/image-build",{method:"POST",data:P});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},o)})),j.apply(this,arguments)}function s(o){return D.apply(this,arguments)}function D(){return D=l()(a()().mark(function o(P){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.request)("/api/app/image/get-list-build",{method:"POST",data:P}));case 1:case"end":return r.stop()}},o)})),D.apply(this,arguments)}function U(o){return O.apply(this,arguments)}function O(){return O=l()(a()().mark(function o(P){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,i.request)("/api/app/image/get-build-task",{method:"POST",data:P});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},o)})),O.apply(this,arguments)}function g(o){return m.apply(this,arguments)}function m(){return m=l()(a()().mark(function o(P){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,i.request)("/api/app/image/delete-build-task",{method:"POST",data:P});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},o)})),m.apply(this,arguments)}function c(o){return _.apply(this,arguments)}function _(){return _=l()(a()().mark(function o(P){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,i.request)("/api/app/image/image-delete",{method:"POST",data:P});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},o)})),_.apply(this,arguments)}function A(){return I.apply(this,arguments)}function I(){return I=l()(a()().mark(function o(){return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,i.request)("/api/app/image/image-prune",{method:"POST"});case 2:return v.abrupt("return",v.sent);case 3:case"end":return v.stop()}},o)})),I.apply(this,arguments)}function p(){return E.apply(this,arguments)}function E(){return E=l()(a()().mark(function o(){return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,i.request)("/api/app/image/build-prune",{method:"POST"});case 2:return v.abrupt("return",v.sent);case 3:case"end":return v.stop()}},o)})),E.apply(this,arguments)}function T(o){return u.apply(this,arguments)}function u(){return u=l()(a()().mark(function o(P){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,i.request)("/api/app/image/update-title",{method:"POST",data:P});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},o)})),u.apply(this,arguments)}function w(o){return Z.apply(this,arguments)}function Z(){return Z=l()(a()().mark(function o(P){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.request)("/api/app/image/tag-sync",{method:"POST",data:P}));case 1:case"end":return r.stop()}},o)})),Z.apply(this,arguments)}},75870:function(W,M,e){e.d(M,{Ot:function(){return y},ZH:function(){return B},ix:function(){return s},t1:function(){return U}});var b=e(15009),a=e.n(b),R=e(99289),l=e.n(R),i=e(82346);function y(g){return f.apply(this,arguments)}function f(){return f=l()(a()().mark(function g(m){return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,i.request)("/api/common/registry/get-list",{method:"POST",data:m}));case 1:case"end":return _.stop()}},g)})),f.apply(this,arguments)}function B(g){return j.apply(this,arguments)}function j(){return j=l()(a()().mark(function g(m){return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,i.request)("/api/common/registry/create",{method:"POST",data:m}));case 1:case"end":return _.stop()}},g)})),j.apply(this,arguments)}function s(g){return D.apply(this,arguments)}function D(){return D=l()(a()().mark(function g(m){return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,i.request)("/api/common/registry/delete",{method:"POST",data:m}));case 1:case"end":return _.stop()}},g)})),D.apply(this,arguments)}function U(g){return O.apply(this,arguments)}function O(){return O=l()(a()().mark(function g(m){return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,i.request)("/api/common/registry/get-detail",{method:"POST",data:m}));case 1:case"end":return _.stop()}},g)})),O.apply(this,arguments)}}}]);
