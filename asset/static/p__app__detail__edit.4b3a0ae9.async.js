"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8878],{1699:function(y,f,e){e.d(f,{u:function(){return _}});var g=e(9783),P=e.n(g),T=e(97857),c=e.n(T),h=e(67294),l=e(82346),O=e(40411),u=e(42075),D=e(85893),_=function(a){var o=(0,l.useAccess)(),r=Array.isArray(a.access)?a.access:[a.access],n,s=a.fallback;return typeof a.children=="function"?(n=a.children(r.reduce(function(t,M){return c()(c()({},t),{},P()({},M,o[M]))},{})),n||(n=s)):r.every(function(t){return o[t]})?n=a.children:n=s,!s&&n&&a.showProTips&&o.canSeeEnableCe&&(n=(0,D.jsx)(O.Z,{offset:a.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:n})),!s&&n&&a.showProRibbonTips&&o.canSeeEnableCe&&(n=(0,D.jsx)(O.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:n})),a.space?(0,D.jsx)(u.Z,c()(c()({},a.space),{},{children:n})):n}},80821:function(y,f,e){e.d(f,{Z:function(){return D}});var g=e(5574),P=e.n(g),T=e(24963),c=e(86738),h=e(28036),l=e(83062),O=e(67294),u=e(85893);function D(_){var U=(0,O.useState)(!1),a=P()(U,2),o=a[0],r=a[1],n=(0,O.useContext)(T.Z),s=n.lang,t=n.notice,M=n.message,I=function(){r(!0);var A=_.action();A instanceof Promise?A.then(function(v){if(r(!1),v){typeof _.onSuccess=="function"&&_.onSuccess(v);var E="";_.messageSuccess?typeof _.messageSuccess=="function"?E=_.messageSuccess(v):E=_.messageSuccess.indexOf("notification.")==0?s(_.messageSuccess):_.messageSuccess:E=s("notification.finish"),_.asynced?M.info(E):M.success(E)}}).catch(function(v){r(!1),typeof _.onError=="function"&&_.onError(v)}):r(!1)};return _.confirm?(0,u.jsx)(c.Z,{style:{width:500},title:_.confirmTitle?_.confirmTitle:s("notification.title.tip"),description:typeof _.confirm=="string"&&_.confirm.indexOf("notification.")==0?s(_.confirm):_.confirm,onConfirm:I,okText:"Yes",cancelText:"No",onOpenChange:_.confirmOnOpenChange,children:(0,u.jsx)(h.ZP,{block:_.block,disabled:_.disabled,icon:!_.children&&o?void 0:_.icon,loading:o,danger:_.danger,type:_.type,children:_.children})}):(0,u.jsx)(l.Z,{title:_.tips,children:(0,u.jsx)(h.ZP,{block:_.block,style:_.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:_.disabled,icon:!_.children&&o?void 0:_.icon,loading:o,onClick:I,danger:_.danger,type:_.type,children:_.children})})}},29798:function(y,f,e){e.r(f),e.d(f,{default:function(){return s}});var g=e(5574),P=e.n(g),T=e(60335),c=e(38345),h=e(82346),l=e(67294),O=e(24963),u=e(50070),D=e(37767),_=e(52031),U=e(14189),a=e(72409),o=e(14245),r=e(1699),n=e(85893);function s(){var t=(0,l.useContext)(O.Z),M=t.message,I=t.notice,W=t.loading,A=t.lang,v=(0,l.useContext)(u.AppDetailContext),E=(0,h.useParams)(),S=(0,l.useState)(),m=P()(S,2),i=m[0],b=m[1],Z=(0,l.useState)(1),k=P()(Z,2),p=k[0],H=k[1],K=(0,h.useNavigate)();return(0,l.useEffect)(function(){var R;W.show(),v.reload(),(0,T.jV)({md5:(R=E.id)!==null&&R!==void 0?R:""}).then(function(C){C.data&&(C.data.info.HostConfig.NetworkMode=="host"&&C.data.info.Config.ExposedPorts&&Object.keys(C.data.info.Config.ExposedPorts).map(function(j){C.data.info.NetworkSettings.Ports[j]=[{HostIp:"0.0.0.0",HostPort:j.substring(0,j.indexOf("/"))}]}),b(C.data))}).finally(function(){W.destroy()})},[p]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(c.Z,{direction:"column",gutter:[0,10],children:[(i==null?void 0:i.info)&&(0,n.jsx)(U.Z,{data:i.info}),(i==null?void 0:i.info)&&(0,n.jsx)(r.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,n.jsx)(a.Z,{data:i,checkContainerUpgrade:function(){K("/app/list")}})}),i&&(0,n.jsx)(D.Z,{data:i}),i&&(0,n.jsx)(_.Z,{data:i==null?void 0:i.info}),i&&(0,n.jsx)(o.Z,{data:i.info})]})})}},50070:function(y,f,e){e.r(f),e.d(f,{AppDetailContext:function(){return M},default:function(){return I}});var g=e(15009),P=e.n(g),T=e(99289),c=e.n(T),h=e(5574),l=e.n(h),O=e(1699),u=e(24963),D=e(60335),_=e(55809),U=e(90078),a=e(82346),o=e(25593),r=e(28036),n=e(50136),s=e(67294),t=e(85893),M=(0,s.createContext)({});function I(){var W,A=(0,s.useContext)(u.Z),v=A.lang,E=A.loading,S=A.message,m=(0,a.useParams)(),i=(0,a.useSearchParams)(),b=l()(i,2),Z=b[0],k=b[1],p=(W=Z.get("tab"))!==null&&W!==void 0?W:"edit",H=(0,s.useState)("edit"),K=l()(H,2),R=K[0],C=K[1],j=(0,a.useNavigate)(),Q=(0,s.useState)(1),z=l()(Q,2),G=z[0],X=z[1],V=[{label:(0,t.jsx)(a.Link,{to:"/app/detail/edit/".concat(m.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,t.jsx)(a.Link,{to:"/app/detail/network/".concat(m.id,"?tab=network"),children:"\u7F51\u7EDC\u7BA1\u7406"}),key:"network"},{label:(0,t.jsx)(o.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){S.info(v("app.detail.createExplorerPlugin")),j("/app/detail/file/".concat(m.id,"?tab=file"))}},{label:(0,t.jsx)(o.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){j("/app/detail/log/".concat(m.id,"?tab=log"))}},{label:(0,t.jsx)(o.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){j("/app/detail/stat/".concat(m.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,t.jsx)(_.Z,{}),disabled:!0}],w=(0,s.useState)(V),Y=l()(w,2),q=Y[0],ee=Y[1];(0,s.useEffect)(function(){E.show(),C(p);var L=function(){var N=c()(P()().mark(function J(){var F,$,x;return P()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return F=V,d.prev=1,d.next=4,(0,D.jV)({md5:($=m.id)!==null&&$!==void 0?$:""});case 4:x=d.sent,F.map(function(B){return B.key=="containerName"&&(B.label=x.data.info.Name),(!x.data.info.State.Running||x.data.info.State.Restarting)&&(B.key=="file"||B.key=="stat")&&(B.disabled=!0),B}),ee(F),d.next=13;break;case 9:return d.prev=9,d.t0=d.catch(1),j("/app/list"),d.abrupt("return");case 13:return d.prev=13,E.destroy(),d.finish(13);case 16:case"end":return d.stop()}},J,null,[[1,9,13,16]])}));return function(){return N.apply(this,arguments)}}();L()},[G,m]);var _e=function(N){C(N.key)};return(0,t.jsx)(M.Provider,{value:{reload:function(){X(G+1)}},children:(0,t.jsxs)(U._z,{header:{extra:[(0,t.jsx)(O.u,{access:"canSeeContainerListManageCreate",children:(0,t.jsx)(a.Link,{to:"/app/create/image",children:(0,t.jsx)(r.ZP,{type:"primary",children:"\u521B\u5EFA\u5BB9\u5668"})})},"create")]},children:[(0,t.jsx)(n.Z,{mode:"horizontal",onClick:_e,selectedKeys:[R],items:q}),(0,t.jsx)(a.Outlet,{})]})})}}}]);
