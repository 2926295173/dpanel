"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4214],{1699:function(N,I,e){e.d(I,{u:function(){return o}});var U=e(9783),s=e.n(U),C=e(97857),l=e.n(C),E=e(67294),u=e(82346),M=e(40411),R=e(42075),h=e(85893),o=function(r){var O=(0,u.useAccess)(),t=Array.isArray(r.access)?r.access:[r.access],P,f=r.fallback;if(typeof r.children=="function"?(P=r.children(t.reduce(function(m,j){return l()(l()({},m),{},s()({},j,O[j]))},{})),P||(P=f)):t.every(function(m){return O[m]})?P=r.children:P=f,!f&&P&&r.showProTips&&O.canSeeEnableCe){if(O.canSeeEnableHiddenProTips)return null;P=(0,h.jsx)(M.Z,{offset:r.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:P})}if(!f&&P&&r.showProRibbonTips&&O.canSeeEnableCe){if(O.canSeeEnableHiddenProTips)return null;P=(0,h.jsx)(M.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:P})}return r.space?(0,h.jsx)(R.Z,l()(l()({},r.space),{},{children:P})):P}},80821:function(N,I,e){e.d(I,{Z:function(){return O}});var U=e(97857),s=e.n(U),C=e(5574),l=e.n(C),E=e(24963),u=e(36146),M=e(86738),R=e(83062),h=e(96074),o=e(83622),d=e(67294),r=e(85893);function O(t){var P=(0,d.useState)(!1),f=l()(P,2),m=f[0],j=f[1],T=(0,d.useContext)(E.Z),v=T.message,K=new u.Uo,D=function(){j(!0);var i=t.action();i instanceof Promise?i.then(function(a){if(j(!1),a){typeof t.onSuccess=="function"&&t.onSuccess(a);var Z="";t.messageSuccess?typeof t.messageSuccess=="function"?Z=t.messageSuccess(a):Z=t.messageSuccess.indexOf("notification.")==0?K.format(t.messageSuccess):t.messageSuccess:Z=K.format("notification.finish"),t.asynced?v.info(Z):v.success(Z)}}).catch(function(a){j(!1),typeof t.onError=="function"&&t.onError(a)}):j(!1)};return t.confirm?(0,r.jsx)(M.Z,s()(s()({style:{width:500},title:t.confirmTitle?t.confirmTitle:K.format("notification.title.tip"),description:typeof t.confirm=="string"&&t.confirm.indexOf("notification.")==0?K.format(t.confirm):t.confirm,onConfirm:D,okText:"Yes",cancelText:"No",onOpenChange:t.confirmOnOpenChange},t.confirmProps),{},{children:(0,r.jsxs)(R.Z,{title:t.tips,children:[t.showDivider&&(0,r.jsx)(h.Z,{type:"vertical",style:{marginRight:15}}),(0,r.jsx)(o.ZP,{block:t.block,disabled:t.disabled,icon:!t.children&&m?void 0:t.icon,loading:m,danger:t.danger,type:t.type,children:t.children})]})})):(0,r.jsxs)(R.Z,{title:t.tips,children:[t.showDivider&&(0,r.jsx)(h.Z,{type:"vertical",style:{marginRight:15}}),(0,r.jsx)(o.ZP,{block:t.block,style:t.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:t.disabled,icon:!t.children&&m?void 0:t.icon,loading:m,onClick:D,danger:t.danger,type:t.type,children:t.children})]})}},81366:function(N,I,e){var U=e(97857),s=e.n(U),C=e(19632),l=e.n(C),E=e(5574),u=e.n(E),M=e(27254),R=e(42075),h=e(85418),o=e(25593),d=e(83622),r=e(67294),O=e(31112),t=e(85893),P={title:"/",path:"/"},f=(0,r.forwardRef)(function(m,j){var T=(0,r.useContext)(O.Z),v=T.showPath,K=T.redirectPath,D=(0,r.useState)([P]),g=u()(D,2),i=g[0],a=g[1];(0,r.useImperativeHandle)(j,function(){return{addHistory:function(S,F){F=="/"?a([P]):a([].concat(l()(i),[{title:S,path:F}]))},initHistory:function(S,F){a([s()(s()({},P),{},{children:F})].concat(l()(S)))}}});var Z=function(S){v?v(i[S].title,i[S].path):m.showPath&&m.showPath(i[S].title,i[S].path);var F=i.filter(function(ne,Y){return Y<=S});a(l()(F))};return(0,t.jsxs)(R.Z,{children:[(0,t.jsx)(R.Z.Compact,{children:i.map(function(z,S){return z.children?(0,t.jsxs)(h.Z.Button,{menu:{items:z.children.map(function(F,ne){return{key:ne,label:(0,t.jsx)(o.Z.Link,{onClick:function(){K(F)},children:F},ne)}})},type:"dashed",onClick:function(ne){Z(S)},children:[(0,t.jsx)(M.Z,{})," ",z.title]},S):(0,t.jsx)(d.ZP,{icon:(0,t.jsx)(M.Z,{}),type:"dashed",onClick:function(){Z(S)},children:z.title},S)})}),i.length>=2&&(0,t.jsx)(o.Z.Text,{copyable:{text:i[i.length-1].path}})]})});I.Z=f},31112:function(N,I,e){var U=e(67294),s=(0,U.createContext)({});I.Z=s},68536:function(N,I,e){e.d(I,{Z:function(){return d}});var U=e(24963),s=e(36146),C=e(93613),l=e(36693),E=e(2741),u=e(25593),M=e(42075),R=e(67294),h=e(85893),o=0;function d(r){var O=(0,R.useContext)(U.Z),t=O.message,P=new s.Uo("components.explorer");return r.isDir?(0,h.jsx)(u.Z.Link,{onClick:function(){r.onClick&&r.onClick()},children:(0,h.jsxs)(M.Z,{children:[(0,h.jsx)(C.Z,{}),r.showName]})}):r.isLink?(0,h.jsx)(u.Z.Link,{onClick:function(){r.onClick&&r.onClick()},children:(0,h.jsxs)(M.Z,{children:[(0,h.jsx)(l.Z,{}),r.showName]})}):(0,h.jsx)(u.Z.Text,{onClick:function(){if(o++,o==2){o=0,r.onClick&&r.onClick();return}setTimeout(function(){o==1&&t.info(P.format("fileNameMessageViewDetail")),o=0},400)},style:{cursor:"pointer"},children:(0,h.jsxs)(M.Z,{children:[(0,h.jsx)(E.Z,{}),r.showName]})})}},92754:function(N,I,e){var U=e(5574),s=e.n(U),C=e(67294),l=e(82346),E=e(38703),u=e(85893),M=(0,C.forwardRef)(function(R,h){var o=(0,C.useState)(""),d=s()(o,2),r=d[0],O=d[1];(0,C.useImperativeHandle)(h,function(){return{setFinish:function(){j({finish:{downloading:100,extracting:100}})},setStart:function(v){v&&O(v),j({start:{downloading:0,extracting:0}})},close:function(){t.progress.close("image:pull:"+r),j({start:{downloading:0,extracting:0}})}}});var t=(0,l.useModel)("subscriber");t.addDataHandler("image:pull:"+r,function(T){j(T.data)});var P=(0,C.useState)(),f=s()(P,2),m=f[0],j=f[1];return(0,C.useEffect)(function(){return j({start:{downloading:0,extracting:0}}),function(){t.progress.close("image:pull:"+r)}},[]),(0,u.jsx)(u.Fragment,{children:m&&Object.keys(m).map(function(T){return(0,u.jsx)(E.Z,{percent:m[T].downloading,success:{percent:m[T].extracting}},T)})})});I.Z=M},47248:function(N,I,e){var U=e(15009),s=e.n(U),C=e(99289),l=e.n(C),E=e(5574),u=e.n(E),M=e(38345),R=e(97269),h=e(62370),o=e(5966),d=e(64317),r=e(83622),O=e(85265),t=e(25593),P=e(42075),f=e(67294),m=e(3393),j=e(97961),T=e(92754),v=e(82346),K=e(2205),D=e(3616),g=e(36146),i=e(85893),a=(0,f.forwardRef)(function(Z,z){var S=(0,f.useState)(!1),F=u()(S,2),ne=F[0],Y=F[1],$=(0,f.useRef)(),re=(0,f.useRef)(),Pe=(0,f.useState)(!1),he=u()(Pe,2),ee=he[0],ge=he[1],w=new g.Uo("components.imagePull");return(0,f.useImperativeHandle)(z,function(){return{upgradeImage:function(b){var p;return Y(!0),(p=$.current)===null||p===void 0||p.setFieldValue("imageUrl",b),(0,m.Gb)({tag:b,type:"pull"})},setImageName:function(b){var p;Y(!0),(p=$.current)===null||p===void 0||p.setFieldValue("imageUrl",b)}}}),[(0,i.jsx)(r.ZP,{type:Z.buttonType?Z.buttonType:"default",onClick:function(){var b,p;Y(!0),(b=$.current)===null||b===void 0||b.resetFields(),(p=re.current)===null||p===void 0||p.setStart("")},children:w.format("triggerButton")},"remoteBtn"),(0,i.jsxs)(O.Z,{forceRender:!0,open:ne,title:w.format("drawerTitle"),width:D.R_,onClose:function(){var b;Y(!1),(b=re.current)===null||b===void 0||b.close()},footer:!1,children:[(0,i.jsx)(M.Z,{children:(0,i.jsx)(t.Z.Text,{children:(0,i.jsxs)("ul",{style:{lineHeight:"30px"},children:[(0,i.jsxs)("li",{children:[w.format("tip.1")," ",(0,i.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:g.FD.format("help")})]}),(0,i.jsxs)("li",{children:[w.format("tip.2")," ",(0,i.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:g.FD.format("help")})]}),(0,i.jsxs)("li",{children:[w.format("tip.3")," "]}),(0,i.jsxs)("li",{children:[w.format("tip.4")," ",(0,i.jsx)(v.Link,{to:"/image/registry",children:g.Ob.format("image.registry.create")})]}),(0,i.jsxs)("li",{children:[w.format("tip.5")," ",(0,i.jsx)(v.Link,{to:"/image/registry",children:g.Ob.format("image.registry")})]})]})})}),(0,i.jsx)(M.Z,{title:w.format("triggerButton"),headerBordered:!0,children:(0,i.jsxs)(R.A,{formRef:$,submitter:!1,isKeyPressSubmit:!0,onFinish:function(){var H=l()(s()().mark(function b(p){var q,n,_e,ce,ae,ve;return s()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return ae=(q=p.imageUrl)!==null&&q!==void 0?q:"",p.registry&&(ae=p.registry.serverAddress+"/"+ae),ge(!0),(n=re.current)===null||n===void 0||n.setStart(ae),G.next=6,(0,m.Gb)({tag:ae,type:"pull",platform:(_e=p.platform)!==null&&_e!==void 0?_e:""}).finally(function(){ge(!1)});case 6:return ve=G.sent,(ce=re.current)===null||ce===void 0||ce.setFinish(),Y(!1),Z.onFinish&&Z.onFinish(ve.data.tag),G.abrupt("return",!0);case 11:case"end":return G.stop()}},b)}));return function(b){return H.apply(this,arguments)}}(),children:[(0,i.jsxs)(P.Z.Compact,{children:[(0,i.jsx)(h.Z,{name:"registry",children:(0,i.jsx)(K.Z,{width:"150px"})}),(0,i.jsx)(o.Z,{disabled:ee,width:270,name:"imageUrl",placeholder:w.format("imageUrlEmpty"),required:!0,rules:[{required:!0}]}),(0,i.jsx)(d.Z,{name:"platform",style:{width:100},placeholder:w.format("imagePlatformEmpty"),options:j.ii.map(function(H){return{label:H.name,value:H.name}})}),(0,i.jsx)(r.ZP,{loading:ee,onClick:l()(s()().mark(function H(){var b;return s()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:(b=$.current)===null||b===void 0||b.submit();case 1:case"end":return q.stop()}},H)})),children:w.format("triggerButton")}),(0,i.jsx)(r.ZP,{danger:!0,onClick:function(){var b;(b=re.current)===null||b===void 0||b.close()},children:g.FD.format("listManageKill")})]}),(0,i.jsx)(h.Z,{label:w.format("progressTitle"),children:(0,i.jsx)(T.Z,{ref:re})})]})})]},"remoteDrawer")]});I.Z=a},78451:function(N,I,e){e.d(I,{Z:function(){return C}});var U=e(67294),s=e(85893);function C(l){var E;return(0,s.jsx)("span",{style:{width:l.width?l.width:"auto",wordBreak:"break-word"},children:(E=l.content)!==null&&E!==void 0?E:l.children})}},51100:function(N,I,e){e.d(I,{Z:function(){return E}});var U=e(97961),s=e(91604),C=e(1677),l=e(85893);function E(u){return u.showDragger?(0,l.jsx)(s.Z,{max:u.max?u.max:1,title:u.title,label:u.label,required:u.required,rules:[{required:u.required}],fieldProps:{multiple:!!(u.max&&u.max>1),name:"file",accept:u.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(R){return new Promise(function(h){var o;(0,U._2)({path:(o=R.response.data.path)!==null&&o!==void 0?o:""}).then(function(d){h(!0)})})}},name:u.name}):(0,l.jsx)(C.Z,{max:u.max?u.max:1,title:u.title,label:u.label,required:u.required,rules:[{required:u.required}],fieldProps:{multiple:!!(u.max&&u.max>1),name:"file",accept:u.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(R){return new Promise(function(h){var o;(0,U._2)({path:(o=R.response.data.path)!==null&&o!==void 0?o:""}).then(function(d){h(!0)})})}},name:u.name})}},65913:function(N,I,e){var U=e(5574),s=e.n(U),C=e(74330),l=e(67294),E=e(85893),u=(0,l.forwardRef)(function(M,R){(0,l.useImperativeHandle)(R,function(){return{show:function(){r(!0)},destroy:function(){r(!1)}}});var h=(0,l.useState)(!1),o=s()(h,2),d=o[0],r=o[1];return(0,E.jsx)(C.Z,{spinning:d,size:"default",children:M.children})});I.Z=u},17550:function(N,I,e){e.r(I),e.d(I,{default:function(){return Re}});var U=e(19632),s=e.n(U),C=e(15009),l=e.n(C),E=e(99289),u=e.n(E),M=e(5574),R=e.n(M),h=e(90078),o=e(56729),d=e(97269),r=e(62370),O=e(37476),t=e(5966),P=e(83622),f=e(42075),m=e(25593),j=e(66309),T=e(96074),v=e(83062),K=e(84567),D=e(50136),g=e(67294),i=e(82346),a=e(18148),Z=e(5251),z=e(80821),S=e(64789),F=e(58638),ne=e(1912),Y=e(2205),$=e(67255),re=e(3393),Pe=e(93162),he=e(78914),ee=e(1699),ge=e(184),w=e(44349),H=e(97961),b=e(51100),p=e(36146),q=e(3616),n=e(85893),_e=(0,g.forwardRef)(function(de,V){(0,g.useImperativeHandle)(V,function(){return{}});var me=(0,g.useRef)(),te=new p.Uo("components.image");return(0,n.jsxs)(ge.a,{drawerProps:{width:q.R_},title:te.format("importTitle"),trigger:(0,n.jsx)(P.ZP,{children:te.format("importTitle")},"create"),formRef:me,onFinish:function(){var je=u()(l()().mark(function pe(se){var le,oe;return l()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,(0,H.GH)({localUrl:se.imageTarUpload?se.imageTarUpload.map(function(fe){return fe.response.data.path}):[],remoteUrl:se.remoteUrl?se.remoteUrl.map(function(fe){return fe.url}):[]});case 2:return oe=X.sent,!((le=me.current)===null||le===void 0)&&le.resetFields&&me.current.resetFields(),de.onFinish&&de.onFinish(),X.abrupt("return",!0);case 6:case"end":return X.stop()}},pe)}));return function(pe){return je.apply(this,arguments)}}(),children:[(0,n.jsx)(b.Z,{label:te.format("importLocal"),showDragger:!0,max:10,title:te.format("importLocalTip"),name:"imageTarUpload",accept:".tar"}),(0,n.jsx)(w.Z,{label:te.format("importRemote"),name:"remoteUrl",showAddButton:!0,hideCopyButton:!0,min:1,items:[{width:"lg",name:"url",placeholder:te.format("importRemoteEmpty")}]})]})}),ce=_e,ae=e(47248),ve=e(96486),Oe=e.n(ve),G=e(55375);function Re(){var de=(0,i.useAccess)(),V=(0,g.useRef)(),me=(0,g.useState)({force:!1}),te=R()(me,2),je=te[0],pe=te[1],se=(0,g.useRef)(),le=(0,g.useRef)(),oe=(0,g.useRef)(),Q=new p.Uo("image"),X=(0,g.useRef)(),fe=(0,g.useRef)(),Te=(0,g.useState)(1),De=R()(Te,2),ie=De[0],ue=De[1];return(0,g.useEffect)(function(){var A;!((A=V.current)===null||A===void 0)&&A.reloadAndRest&&V.current.reloadAndRest().then(function(){var y;!((y=V.current)===null||y===void 0)&&y.setPageInfo&&V.current.setPageInfo({current:(0,$.G$)(G.CM)})})},[ie]),(0,n.jsxs)(h._z,{header:{extra:[(0,n.jsx)(ee.u,{access:"canSeeImageListManageCreate",children:(0,n.jsx)(i.Link,{to:"/image/create",children:(0,n.jsx)(P.ZP,{type:"primary",children:p.Ob.format("image.create")},"create")},"create")},"create"),(0,n.jsx)(ee.u,{access:"canSeeImageListPull",children:(0,n.jsx)(ae.Z,{onFinish:function(){ue(ie+1)}},"remote")},"remote"),(0,n.jsx)(ee.u,{access:"canSeeImageListManageCreate",children:(0,n.jsx)(ce,{onFinish:function(){ue(ie+1)}})},"import")]},children:[(0,n.jsx)(he.Z,{ref:le,onClose:function(){ue(ie+1)}}),(0,n.jsx)(o.Z,{scroll:{x:"max-content"},rowKey:"Id",onChange:function(y,_,L){!Oe().isArray(L)&&(0,$.LX)(G.CM,L.columnKey,L.order),(0,$.MJ)(G.CM,y.current)},columns:[{title:"Id",dataIndex:"title",search:!1,render:function(y,_,L,W,c){var x=_.Id.substring(7,19);return _.Title&&(x=_.Title),(0,n.jsxs)(f.Z,{children:[(0,n.jsx)(m.Z.Link,{onClick:function(){var k;!((k=le.current)===null||k===void 0)&&k.show&&le.current.show(_.Id)},children:x},"title-".concat(L)),_.Containers==0&&(0,n.jsx)(j.Z,{color:"warning",children:p.FD.format("listNotUse")},"use-".concat(L))]})}},{title:p.FD.format("listTitle"),dataIndex:"tag",render:function(y,_,L,W){return(0,n.jsx)(f.Z,{direction:"vertical",style:{textAlign:"left"},children:_.RepoTags.map(function(c,x){return(0,n.jsx)(f.Z,{children:(0,n.jsx)(j.Z,{color:"#2db7f5",children:(0,n.jsx)(m.Z.Text,{copyable:!0,title:c,style:{color:"#ffffff"},children:c},"tag-"+x)},"tag-".concat(x))},x)})},_.Id)}},{title:"Digest",search:!1,tooltip:p.FD.format("listDigestTip"),render:function(y,_,L,W,c){return(0,n.jsx)(f.Z,{direction:"vertical",style:{textAlign:"left"},children:_.RepoTags&&_.RepoTags.map(function(x,B){var k,J=(k=_.RepoDigests)===null||k===void 0?void 0:k.find(function(Ee){var xe=Ee.split("@"),Me=R()(xe,2),Ce=Me[0],Ie=Me[1];return x.includes(Ce)});return(0,n.jsx)("span",{children:J?J.substring(J.indexOf("@")+8).substring(0,12):(0,n.jsx)(j.Z,{color:"warning",children:new p.Uo("components.appDetail.appDetailQuickManage").format("checkImageUpgrade.-3")})},B)})})}},{title:p.FD.format("listArch"),width:80,search:!1,render:function(y,_,L,W,c){if(_.Labels&&_.Labels["com.dpanel.image.arch"])return(0,n.jsx)(j.Z,{children:_.Labels["com.dpanel.image.arch"]},"arch"+_.Id)}},{title:p.FD.format("listSize"),dataIndex:"size",ellipsis:!0,width:"120px",search:!1,sorter:function(y,_){return parseFloat(y.Size)-parseFloat(_.Size)},sortDirections:$.h5,defaultSortOrder:(0,$.rj)(G.CM,"size"),render:function(y,_,L,W){return(0,n.jsx)("div",{children:(0,Z.FI)(parseFloat(_.Size))},_.Id)}},{title:p.FD.format("listCreatedAt"),dataIndex:"Created",key:"created",ellipsis:!0,search:!1,width:"180px",render:function(y,_,L,W){return(0,n.jsx)("div",{children:(0,Z.ZM)(_.Created*1e3)},_.Id)},sorter:function(y,_){return y.Created-_.Created},sortDirections:$.h5,defaultSortOrder:(0,$.rj)(G.CM,"created")},{title:p.FD.format("listManage"),valueType:"option",key:"option",width:80,fixed:"right",hidden:!de.canSeeImageListManage,render:function(y,_,L,W){return(0,n.jsx)(f.Z,{split:(0,n.jsx)(T.Z,{type:"vertical"}),children:(0,n.jsx)(i.Link,{to:"/app/create/image?imageId="+_.RepoTags[0],children:(0,n.jsx)(v.Z,{title:p.FD.format("listManageBuild"),children:(0,n.jsx)(S.Z,{})})},"create")})}}],request:function(){var A=u()(l()().mark(function y(_,L,W){var c;return l()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,(0,a.KG)({tag:_.tag,title:_.title,use:_.use?_.use=="1"?1:2:0});case 2:if(c=B.sent,!(!c||!c.data||!c.data.list)){B.next=5;break}return B.abrupt("return",{data:[],success:!0,total:0});case 5:return c.data.list.map(function(k){var J="";k.RepoTags.map(function(Ee){c.data.title[Ee]&&(J=c.data.title[Ee])}),k.Title=J}),B.abrupt("return",{data:c.data.list,success:!0,total:c.data.list.length});case 7:case"end":return B.stop()}},y)}));return function(y,_,L){return A.apply(this,arguments)}}(),pagination:(0,$.Oh)(),search:{collapsed:!1},rowSelection:de.canSeeImageListManage?{defaultSelectedRowKeys:[],alwaysShowAlert:!0}:void 0,actionRef:V,tableAlertOptionRender:function(y){var _=y.selectedRowKeys,L=y.selectedRows;return(0,n.jsxs)(f.Z,{size:16,children:[(0,n.jsx)(z.Z,{icon:(0,n.jsx)(F.Z,{}),confirm:(0,n.jsxs)(f.Z,{style:{width:500,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,n.jsx)(m.Z.Text,{children:(0,n.jsx)("ul",{children:Q.prefix("listManageExportTip",3).map(function(W,c){return(0,n.jsx)("li",{children:W},c)})})}),(0,n.jsx)(d.A,{layout:"horizontal",formRef:oe,submitter:!1,children:(0,n.jsx)(r.Z,{valuePropName:"checked",name:"enableExportToPath",children:(0,n.jsx)(K.Z,{children:Q.format("listManageExportOptionToHost")})},"enableExportToPath")})]}),confirmOnOpenChange:function(){var c;!((c=oe.current)===null||c===void 0)&&c.resetFields&&oe.current.resetFields()},action:function(){var c,x=[];return L.map(function(B){x.push.apply(x,s()(B.RepoTags))}),(0,re.Rb)({md5:x,enableExportToPath:(c=oe.current)===null||c===void 0?void 0:c.getFieldValue("enableExportToPath")})},onSuccess:function(c){var x=L.map(function(k){return k.RepoTags[0]});if(c.size>29){var B=new Blob([c],{type:"application/tar"});(0,Pe.saveAs)(B,x.join("-")+".tar")}ue(ie+1)},children:p.FD.format("listManageExport")}),(0,n.jsxs)(O.Y,{modalProps:{width:q.ob},formRef:se,title:Q.format("listManagePushTip"),trigger:(0,n.jsx)(P.ZP,{icon:(0,n.jsx)(ne.Z,{}),children:Q.format("listManagePush")}),onFinish:function(){var W=u()(l()().mark(function c(x){var B;return l()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,(0,a.KX)({md5:_,registryId:x.registryId,newNamespace:x.newNamespace});case 2:return B=J.sent,ue(ie+1),J.abrupt("return",!0);case 5:case"end":return J.stop()}},c)}));return function(c){return W.apply(this,arguments)}}(),children:[(0,n.jsx)(r.Z,{name:"registryId",hidden:!0}),(0,n.jsx)(r.Z,{label:Q.format("listManagePushImageRespo"),name:"imageRespo",tooltip:Q.format("listManagePushImageRespoTip"),children:(0,n.jsx)(Y.Z,{multiple:!0,top:!0,onChangeList:function(c){var x;(x=se.current)===null||x===void 0||x.setFieldValue("registryId",c.map(function(B){return B.id}))}})}),(0,n.jsx)(t.Z,{tooltip:Q.format("listManagePushNewNamespaceTip"),label:Q.format("listManagePushNewNamespace"),name:"newNamespace"})]}),(0,n.jsx)(ee.u,{access:"canSeeImageListManageDelete",children:(0,n.jsx)(z.Z,{danger:!0,type:"primary",action:function(){return(0,a.ao)({md5:_,force:je.force})},onSuccess:function(){var c,x;return!((c=V.current)===null||c===void 0)&&c.reloadAndRest&&((x=V.current)===null||x===void 0||x.reloadAndRest()),!0},onError:function(){var c,x;return!((c=V.current)===null||c===void 0)&&c.reloadAndRest&&((x=V.current)===null||x===void 0||x.reloadAndRest()),!0},confirm:(0,n.jsx)(d.A,{submitter:!1,formRef:fe,children:(0,n.jsxs)(f.Z,{style:{width:280},direction:"vertical",children:[(0,n.jsx)(m.Z.Text,{children:p.FD.format("confirm.title")}),(0,n.jsxs)(K.Z,{name:"deleteVolume",onChange:function(c){return pe({force:c.target.checked})},children:[p.FD.format("listManageDeleteForce"),"?"]})]})}),children:p.FD.format("listManageDeleteBatch")})})]})},tableExtraRender:function(){return(0,n.jsx)(ee.u,{access:"canSeeImageListManageCreate",children:(0,n.jsx)(D.Z,{mode:"horizontal",selectedKeys:["all"],items:[{label:(0,n.jsx)(i.Link,{to:"/image/list",replace:!0,children:Q.format("title")}),key:"all"},{label:(0,n.jsx)(i.Link,{to:"/image/list/recycle",replace:!0,children:Q.format("taskTitle")}),key:"build"}]})})},toolBarRender:function(){return[(0,n.jsx)(ee.u,{access:"canSeeImageListManageDelete",children:(0,n.jsx)(z.Z,{action:u()(l()().mark(function y(){var _,L;return l()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!((_=X.current)!==null&&_!==void 0&&_.getFieldValue("enableBuildCache"))){c.next=3;break}return c.next=3,(0,a.c5)();case 3:return c.abrupt("return",(0,a.c7)({enableUnuseTag:(L=X.current)===null||L===void 0?void 0:L.getFieldValue("enableUnuseTag")}));case 4:case"end":return c.stop()}},y)})),onSuccess:function(){var _;return!((_=V.current)===null||_===void 0)&&_.reloadAndRest&&V.current.reloadAndRest(),!0},tips:p.FD.format("listManagePruneTip"),onError:function(){return ue(ie+1),!0},confirmOnOpenChange:function(){var _;!((_=X.current)===null||_===void 0)&&_.resetFields&&X.current.resetFields()},confirm:(0,n.jsx)(d.A,{submitter:!1,formRef:X,layout:"inline",children:(0,n.jsxs)(f.Z,{direction:"vertical",style:{width:600},children:[(0,n.jsx)(m.Z.Text,{children:p.FD.format("confirm.title")}),(0,n.jsx)(r.Z,{name:"enableUnuseTag",valuePropName:"checked",children:(0,n.jsxs)(K.Z,{children:[Q.format("listManagePruneOption.enableUnuseTag"),"?"]})}),(0,n.jsx)(r.Z,{initialValue:!0,name:"enableBuildCache",valuePropName:"checked",children:(0,n.jsxs)(K.Z,{children:[Q.format("listManagePruneOption.enableBuildCache"),"?"]})})]})}),children:p.FD.format("listManagePrune")})},"prune")]},columnsState:(0,$.j_)(G.CM)})]})}},97961:function(N,I,e){e.d(I,{GH:function(){return d},_2:function(){return O},fN:function(){return M},ii:function(){return u},vC:function(){return h}});var U=e(15009),s=e.n(U),C=e(99289),l=e.n(C),E=e(82346),u=[{name:"amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"i386",arch:"386",search:[]},{name:"arm/v6",arch:"arm",search:[]},{name:"arm/v7",arch:"arm",search:[]},{name:"arm/v8",arch:"arm64",search:[]},{name:"ppc64le",arch:"ppc64le",search:[]},{name:"riscv64",arch:"riscv64",search:[]}];function M(m){return R.apply(this,arguments)}function R(){return R=l()(s()().mark(function m(j){return s()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,E.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:j}));case 1:case"end":return v.stop()}},m)})),R.apply(this,arguments)}function h(m){return o.apply(this,arguments)}function o(){return o=l()(s()().mark(function m(j){return s()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,E.request)("/api/app/image/import-by-container-tar",{method:"POST",data:j}));case 1:case"end":return v.stop()}},m)})),o.apply(this,arguments)}function d(m){return r.apply(this,arguments)}function r(){return r=l()(s()().mark(function m(j){return s()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,E.request)("/api/app/image/import-by-image-tar",{method:"POST",data:j}));case 1:case"end":return v.stop()}},m)})),r.apply(this,arguments)}function O(m){return t.apply(this,arguments)}function t(){return t=l()(s()().mark(function m(j){return s()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,E.request)("/api/common/attach/delete",{method:"POST",data:j});case 2:return v.abrupt("return",v.sent);case 3:case"end":return v.stop()}},m)})),t.apply(this,arguments)}function P(){return f.apply(this,arguments)}function f(){return f=_asyncToGenerator(_regeneratorRuntime().mark(function m(){return _regeneratorRuntime().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.abrupt("return",request("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return T.stop()}},m)})),f.apply(this,arguments)}},3393:function(N,I,e){e.d(I,{Gb:function(){return R},Pn:function(){return r},Rb:function(){return t},YU:function(){return u},ZQ:function(){return j},_U:function(){return o},cD:function(){return v},cd:function(){return f}});var U=e(15009),s=e.n(U),C=e(99289),l=e.n(C),E=e(82346);function u(D){return M.apply(this,arguments)}function M(){return M=l()(s()().mark(function D(g){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,E.request)("/api/app/image/get-detail",{method:"POST",data:g}));case 1:case"end":return a.stop()}},D)})),M.apply(this,arguments)}function R(D){return h.apply(this,arguments)}function h(){return h=l()(s()().mark(function D(g){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,E.request)("/api/app/image/tag-remote",{method:"POST",data:g}));case 1:case"end":return a.stop()}},D)})),h.apply(this,arguments)}function o(D){return d.apply(this,arguments)}function d(){return d=l()(s()().mark(function D(g){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,E.request)("/api/app/image/tag-add",{method:"POST",data:g}));case 1:case"end":return a.stop()}},D)})),d.apply(this,arguments)}function r(D){return O.apply(this,arguments)}function O(){return O=l()(s()().mark(function D(g){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,E.request)("/api/app/image/tag-delete",{method:"POST",data:g}));case 1:case"end":return a.stop()}},D)})),O.apply(this,arguments)}function t(D){return P.apply(this,arguments)}function P(){return P=l()(s()().mark(function D(g){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,E.request)("/api/app/image/export",{method:"POST",data:g,responseType:"blob"}));case 1:case"end":return a.stop()}},D)})),P.apply(this,arguments)}function f(D){return m.apply(this,arguments)}function m(){return m=l()(s()().mark(function D(g){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,E.request)("/api/pro/image/get-remote-tag",{method:"POST",data:g}));case 1:case"end":return a.stop()}},D)})),m.apply(this,arguments)}function j(D){return T.apply(this,arguments)}function T(){return T=l()(s()().mark(function D(g){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,E.request)("/api/app/image/check-upgrade",{method:"POST",data:g}));case 1:case"end":return a.stop()}},D)})),T.apply(this,arguments)}function v(D){return K.apply(this,arguments)}function K(){return K=l()(s()().mark(function D(g){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,E.request)("/api/pro/image/get-rootfs",{method:"POST",data:g}));case 1:case"end":return a.stop()}},D)})),K.apply(this,arguments)}},67255:function(N,I,e){e.d(I,{G$:function(){return E},LX:function(){return h},MJ:function(){return l},Oh:function(){return C},h5:function(){return M},j_:function(){return u},rj:function(){return R}});var U=e(5574),s=e.n(U);function C(o){var d=localStorage.getItem("dpanel-pagesize");return d=="all"?!1:{defaultCurrent:o==null?void 0:o.page,showSizeChanger:!0,defaultPageSize:parseInt(d!=null?d:"20"),showQuickJumper:!0}}function l(o,d){d?localStorage.setItem("dpanel-page-"+o,"".concat(d)):localStorage.removeItem("dpanel-page-"+o)}function E(o,d){var r,O=d?Math.ceil((d==null?void 0:d.total)/(d==null?void 0:d.pageSize)):void 0,t=parseInt((r=localStorage.getItem("dpanel-page-"+o))!==null&&r!==void 0?r:"");if(t!=0)return O&&t>O?O:t}function u(o){return{persistenceKey:o,persistenceType:"localStorage"}}var M=["descend","ascend"];function R(o,d){var r=localStorage.getItem("dpanel-table-sort-".concat(o));if(r){var O=r.split("|"),t=s()(O,2),P=t[0],f=t[1];if(P==d)return f}}function h(o,d,r){!d||!r?localStorage.removeItem("dpanel-table-sort-".concat(o)):localStorage.setItem("dpanel-table-sort-".concat(o),"".concat(d,"|").concat(r))}}}]);
