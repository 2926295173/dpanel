"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1180],{88484:function(K,F,e){e.d(F,{Z:function(){return _}});var p=e(87462),h=e(67294),T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},j=T,x=e(84089),A=function(t,v){return h.createElement(x.Z,(0,p.Z)({},t,{ref:v,icon:j}))},f=h.forwardRef(A),_=f},31199:function(K,F,e){var p=e(1413),h=e(45987),T=e(67294),j=e(35510),x=e(85893),A=["fieldProps","min","proFieldProps","max"],f=function(t,v){var c=t.fieldProps,M=t.min,d=t.proFieldProps,E=t.max,P=(0,h.Z)(t,A);return(0,x.jsx)(j.Z,(0,p.Z)({valueType:"digit",fieldProps:(0,p.Z)({min:M,max:E},c),ref:v,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:d},P))},_=T.forwardRef(f);F.Z=_},52688:function(K,F,e){var p=e(1413),h=e(45987),T=e(67294),j=e(35510),x=e(85893),A=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],f=T.forwardRef(function(_,u){var t=_.fieldProps,v=_.unCheckedChildren,c=_.checkedChildren,M=_.proFieldProps,d=(0,h.Z)(_,A);return(0,x.jsx)(j.Z,(0,p.Z)({valueType:"switch",fieldProps:(0,p.Z)({unCheckedChildren:v,checkedChildren:c},t),ref:u,valuePropName:"checked",proFieldProps:M,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},d))});F.Z=f},90672:function(K,F,e){var p=e(1413),h=e(45987),T=e(67294),j=e(35510),x=e(85893),A=["fieldProps","proFieldProps"],f=function(u,t){var v=u.fieldProps,c=u.proFieldProps,M=(0,h.Z)(u,A);return(0,x.jsx)(j.Z,(0,p.Z)({ref:t,valueType:"textarea",fieldProps:v,proFieldProps:c},M))};F.Z=T.forwardRef(f)},1699:function(K,F,e){e.d(F,{u:function(){return t}});var p=e(9783),h=e.n(p),T=e(97857),j=e.n(T),x=e(67294),A=e(82346),f=e(40411),_=e(42075),u=e(85893),t=function(c){var M=(0,A.useAccess)(),d=Array.isArray(c.access)?c.access:[c.access],E,P=c.fallback;return typeof c.children=="function"?(E=c.children(d.reduce(function(i,y){return j()(j()({},i),{},h()({},y,M[y]))},{})),E||(E=P)):d.every(function(i){return M[i]})?E=c.children:E=P,!P&&E&&c.showProTips&&M.canSeeEnableCe&&(E=(0,u.jsx)(f.Z,{offset:c.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:E})),!P&&E&&c.showProRibbonTips&&M.canSeeEnableCe&&(E=(0,u.jsx)(f.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:E})),c.space?(0,u.jsx)(_.Z,j()(j()({},c.space),{},{children:E})):E}},80821:function(K,F,e){e.d(F,{Z:function(){return u}});var p=e(5574),h=e.n(p),T=e(24963),j=e(86738),x=e(28036),A=e(83062),f=e(67294),_=e(85893);function u(t){var v=(0,f.useState)(!1),c=h()(v,2),M=c[0],d=c[1],E=(0,f.useContext)(T.Z),P=E.lang,i=E.notice,y=E.message,g=function(){d(!0);var L=t.action();L instanceof Promise?L.then(function(D){if(d(!1),D){typeof t.onSuccess=="function"&&t.onSuccess(D);var b="";t.messageSuccess?typeof t.messageSuccess=="function"?b=t.messageSuccess(D):b=t.messageSuccess.indexOf("notification.")==0?P(t.messageSuccess):t.messageSuccess:b=P("notification.finish"),t.asynced?y.info(b):y.success(b)}}).catch(function(D){d(!1),typeof t.onError=="function"&&t.onError(D)}):d(!1)};return t.confirm?(0,_.jsx)(j.Z,{style:{width:500},title:t.confirmTitle?t.confirmTitle:P("notification.title.tip"),description:typeof t.confirm=="string"&&t.confirm.indexOf("notification.")==0?P(t.confirm):t.confirm,onConfirm:g,okText:"Yes",cancelText:"No",onOpenChange:t.confirmOnOpenChange,children:(0,_.jsx)(x.ZP,{block:t.block,disabled:t.disabled,icon:!t.children&&M?void 0:t.icon,loading:M,danger:t.danger,type:t.type,children:t.children})}):(0,_.jsx)(A.Z,{title:t.tips,children:(0,_.jsx)(x.ZP,{block:t.block,style:t.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:t.disabled,icon:!t.children&&M?void 0:t.icon,loading:M,onClick:g,danger:t.danger,type:t.type,children:t.children})})}},44349:function(K,F,e){var p=e(97857),h=e.n(p),T=e(17186),j=e(5966),x=e(86250),A=e(67294),f=e(85893),_=(0,A.forwardRef)(function(u,t){var v=(0,A.useRef)();(0,A.useImperativeHandle)(t,function(){return{addItem:function(d,E){var P,i=(P=v.current)===null||P===void 0?void 0:P.getList(),y=!1;if(i==null||i.map(function(U){if(U.name==d){y=!0;return}}),!y){var g;(g=v.current)===null||g===void 0||g.add({name:d,value:E})}},clear:function(){var d;(d=v.current)===null||d===void 0||(d=d.getList())===null||d===void 0||d.map(function(E,P){var i;(i=v.current)===null||i===void 0||i.remove(P)})}}});var c={};return u.hideCopyButton===!0&&(c.copyIconProps=!1),u.hideDeleteButton===!0&&(c.deleteIconProps=!1),(0,f.jsx)(T.u,h()(h()({initialValue:u.initialValue,label:u.label,name:u.name,actionRef:v,creatorButtonProps:u.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(u.label?u.label:u.name)}:!1,min:u.min?u.min:0},c),{},{children:function(d,E,P){return(0,f.jsx)(x.Z,{justify:u.justify,gap:u.gap,children:u.items.map(function(i){return i.render?(0,f.jsx)("div",{children:i.render&&i.render(d,E,P)},"".concat(u.name,"-").concat(i.name,"-").concat(d.key)):(0,f.jsx)(j.Z,{width:i.width,name:i.name,label:i.label,required:i.required,rules:[{required:i.required}],disabled:i.disabled,placeholder:i.placeholder},"".concat(u.name,"-").concat(i.name,"-").concat(d.key))})})}}))});F.Z=_},12491:function(K,F,e){e.d(F,{Z:function(){return _}});var p=e(24963),h=e(88484),T=e(62370),j=e(31418),x=e(28036),A=e(67294),f=e(85893);function _(u){var t=(0,A.useContext)(p.Z),v=t.message,c=t.notice,M=t.lang,d=(0,A.useRef)(null),E=j.Z.useApp(),P=function(){d.current&&(d.current.click(),d.current.onchange=function(y){if(!y||!y.target)return"";var g=new FileReader;g.onload=function(L){var D,b,s=(D=L.target)===null||D===void 0?void 0:D.result;if(u.onLoad)try{u.onLoad&&u.onLoad(s)}catch(Q){c.error(Q);return}typeof u.onImport=="function"&&(v.success("\u6210\u529F\u5BFC\u5165 ".concat(u.title)),u.onImport(s)),(b=d.current)!==null&&b!==void 0&&b.value&&(d.current.value="")};var U=y.target;if(U.files)try{g.readAsText(U.files[0])}catch(L){c.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(T.Z,{children:(0,f.jsx)(x.ZP,{icon:(0,f.jsx)(h.Z,{}),block:!0,onClick:P,children:u.title})}),(0,f.jsx)("input",{style:{display:"none"},type:"file",ref:d,name:"importFileInput"})]})}},8680:function(K,F,e){var p=e(15009),h=e.n(p),T=e(64599),j=e.n(T),x=e(99289),A=e.n(x),f=e(9783),_=e.n(f),u=e(5574),t=e.n(u),v=e(67294),c=e(184),M=e(38345),d=e(97269),E=e(97321),P=e(97462),i=e(64317),y=e(5966),g=e(86615),U=e(68602),L=e(28036),D=e(83403),b=e(24963),s=e(1699),Q=e(29177),ne=e(45742),re=e(43425),te=e(44349),B=e(85893),ae=(0,v.forwardRef)(function(S,ue){var X=(0,v.useState)(!1),q=t()(X,2),N=q[0],ee=q[1],V=(0,v.useRef)(),se=(0,v.useContext)(b.Z),I=se.message,$=(0,v.useState)([]),Z=t()($,2),G=Z[0],z=Z[1],w=_()(_()(_()(_()(_()({},D.W6.CONTAINER,"Id"),D.W6.APPSTORE,"name"),D.W6.COMPOSE,"name"),D.W6.REGISTRY,"serverAddress"),D.W6.DOCKER_ENV,"name"),H=_()(_()(_()(_()(_()({},D.W6.CONTAINER,"name"),D.W6.APPSTORE,"name"),D.W6.COMPOSE,"name"),D.W6.REGISTRY,"title"),D.W6.DOCKER_ENV,"title"),W=w[S.type],k=H[S.type],Y=S.selected.map(function(R){return R[w[S.type]]});return v.useEffect(function(){N&&((0,U.dP)({permission:{uri:S.type,key:W,value:Y}}).then(function(R){var C;(C=V.current)===null||C===void 0||C.setFieldValue("list",Object.keys(R.data.list).map(function(o){return{name:o,type:R.data.list[o].type,users:R.data.list[o].users}}))}),(0,U.lE)().then(function(R){var C,o=(C=R.data)===null||C===void 0||(C=C.list)===null||C===void 0?void 0:C.map(function(n){return{label:n.username,value:n.username}});z(o)}))},[N]),(0,B.jsx)(s.u,{access:["canSeeEnableEe","canSeeFounder","canSeeManage"],children:(0,B.jsxs)(c.a,{name:"create",title:"\u6570\u636E\u6743\u9650\u8BBE\u7F6E",open:N,onOpenChange:function(C){if(!C){var o;(o=V.current)===null||o===void 0||o.resetFields()}ee(C)},drawerProps:{forceRender:!0},formRef:V,trigger:(0,B.jsx)(L.ZP,{icon:(0,B.jsx)(Q.Z,{}),children:"\u6570\u636E\u6743\u9650"}),onFinish:function(){var R=A()(h()().mark(function C(o){var n,r,l;return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n=j()(o.list),a.prev=1,n.s();case 3:if((r=n.n()).done){a.next=9;break}return l=r.value,a.next=7,(0,U.Db)({usernames:l.users,permissionType:l.type,permission:{uri:S.type,key:W,showKey:k,value:[l.name]}});case 7:a.next=3;break;case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),n.e(a.t0);case 14:return a.prev=14,n.f(),a.finish(14);case 17:I.success("\u6743\u9650\u8BBE\u7F6E\u6210\u529F"),ee(!1),S.onSuccess();case 20:case"end":return a.stop()}},C,null,[[1,11,14,17]])}));return function(C){return R.apply(this,arguments)}}(),children:[(0,B.jsxs)(M.Z,{ghost:!0,title:(0,B.jsx)(ne.Z,{}),subTitle:"\u6279\u91CF\u8BBE\u7F6E",children:[(0,B.jsx)(d.A.Item,{name:"type",style:{marginBottom:0},children:(0,B.jsxs)(E.Z.Group,{defaultValue:"admin",onChange:function(C){var o,n,r=(o=V.current)===null||o===void 0?void 0:o.getFieldValue("list");r.forEach(function(l){l.type=C,l.users=[]}),(n=V.current)===null||n===void 0||n.setFieldValue("list",r)},children:[(0,B.jsx)(E.Z,{style:{width:240},title:"\u7BA1\u7406\u5458",description:"\u4EC5\u7BA1\u7406\u5458\u53EF\u89C1",value:"admin"}),(0,B.jsx)(E.Z,{style:{width:240},title:"\u6307\u5B9A\u7528\u6237",description:"\u4EC5\u9009\u4E2D\u7528\u6237\u53EF\u89C1",value:"restricted"}),(0,B.jsx)(E.Z,{style:{width:240},title:"\u516C\u5171",description:"\u6240\u6709\u4EBA\u53EF\u89C1",value:"public"})]})}),(0,B.jsx)(P.Z,{name:["type"],children:function(C){var o=C.type;if(o==="restricted")return(0,B.jsx)(i.Z,{mode:"multiple",name:"usernames",label:"\u9009\u62E9\u7528\u6237",onChange:function(r){var l,m,a=(l=V.current)===null||l===void 0?void 0:l.getFieldValue("list");a.forEach(function(O){O.users=r}),(m=V.current)===null||m===void 0||m.setFieldValue("list",a)},rules:[{required:!0}],request:A()(h()().mark(function n(){var r,l,m;return h()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!(G.length>0)){O.next=2;break}return O.abrupt("return",G);case 2:return O.next=4,(0,U.lE)();case 4:return l=O.sent,m=(r=l.data)===null||r===void 0||(r=r.list)===null||r===void 0?void 0:r.map(function(J){return{label:J.username,value:J.username}}),z(m),O.abrupt("return",m);case 8:case"end":return O.stop()}},n)}))})}})]}),(0,B.jsx)(M.Z,{ghost:!0,title:(0,B.jsx)(re.Z,{}),subTitle:"\u6570\u636E\u6743\u9650\u8BBE\u7F6E",children:(0,B.jsx)(te.Z,{name:"list",hideCopyButton:!0,gap:10,items:[{name:"name",label:"\u540D\u79F0",render:function(C,o,n){var r=n.getCurrentRowData();return(0,B.jsx)(y.Z,{disabled:!0,label:"\u540D\u79F0",width:"sm",name:"name"})}},{name:"type",label:"\u6743\u9650\u7C7B\u578B",render:function(C,o,n){var r=n.getCurrentRowData();return(0,B.jsx)(g.Z.Group,{label:"\u6743\u9650\u7C7B\u578B",name:"type",radioType:"button",options:[{label:"\u7BA1\u7406\u5458",value:"admin"},{label:"\u516C\u5171",value:"public"},{label:"\u6307\u5B9A\u7528\u6237",value:"restricted"}]})}},{name:"users",label:"\u5173\u8054\u7528\u6237",render:function(C,o,n){return(0,B.jsx)(P.Z,{name:["type"],children:function(l){var m=l.type;if(m=="restricted")return(0,B.jsx)(i.Z,{width:"sm",mode:"tags",name:"users",label:"\u5173\u8054\u7528\u6237",options:G})}})}}]})})]})})});F.Z=ae},53893:function(K,F,e){e.r(F),e.d(F,{default:function(){return se}});var p=e(15009),h=e.n(p),T=e(99289),j=e.n(T),x=e(80821),A=e(5574),f=e.n(A),_=e(184),u=e(5966),t=e(52688),v=e(97462),c=e(62370),M=e(31199),d=e(86615),E=e(90672),P=e(71230),i=e(15746),y=e(86250),g=e(67294),U=e(91845),L=e(87662),D=e(12491),b=e(97124),s=e(85893),Q=(0,g.forwardRef)(function(I,$){var Z;(0,g.useImperativeHandle)($,function(){return{edit:function(n){var r;(r=W.current)===null||r===void 0||r.setFieldsValue({name:n.name,title:n.title,address:n.address,serverUrl:n.serverUrl,enableTLS:n.enableTLS,tlsCa:n.tlsCa,tlsCert:n.tlsCert,tlsKey:n.tlsKey,enableComposePath:n.enableComposePath,enableSSH:n.enableSSH,sshUsername:n.sshUsername,sshPassword:n.sshPassword,sshPort:n.sshPort==0?22:n.sshPort,sshKey:n.sshKey,sshType:n.sshType}),H(!0),C(n.name)}}});var G=(0,g.useState)(!1),z=f()(G,2),w=z[0],H=z[1],W=(0,g.useRef)(),k=(0,g.useState)(""),Y=f()(k,2),R=Y[0],C=Y[1];return(0,s.jsxs)(_.a,{drawerProps:{forceRender:!0},onOpenChange:function(n){if(!n){var r;C(""),(r=W.current)===null||r===void 0||r.resetFields()}H(n)},open:w,width:800,trigger:I.trigger,formRef:W,title:(Z=W.current)!==null&&Z!==void 0&&Z.getFieldValue&&W.current.getFieldValue("name")=="local"?"\u914D\u7F6E\u9ED8\u8BA4Docker\u670D\u52A1\u7AEF":"\u6DFB\u52A0\u8FDC\u7A0BDocker\u670D\u52A1\u7AEF",onFinish:function(){var o=j()(h()().mark(function n(r){var l;return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,L.ad)({name:r.name,title:r.title,address:r.address,serverUrl:r.serverUrl,enableTLS:r.enableTLS,tlsCa:r.tlsCa,tlsCert:r.tlsCert,tlsKey:r.tlsKey,enableComposePath:r.enableComposePath,composePath:r.enableComposePath?r.composePath:"",enableSSH:r.enableSSH,sshUsername:r.sshUsername,sshPassword:r.sshPassword,sshPort:parseInt(r.sshPort),sshKey:r.sshKey,sshType:r.sshType});case 2:return l=a.sent,I.onFinish&&I.onFinish(),a.abrupt("return",!0);case 5:case"end":return a.stop()}},n)}));return function(n){return o.apply(this,arguments)}}(),children:[(0,s.jsx)(u.Z,{label:"\u540D\u79F0",name:"title",required:!0,rules:[{required:!0}],fieldProps:{id:"envTitle",onChange:function(n){var r="";if(n.target.value&&!R){var l,m=(0,U.N9)(n.target.value.trim(),{toneType:"none",type:"array"});r=m.join(""),(l=W.current)===null||l===void 0||l.setFieldValue("name",r)}}}},"envTitle"),(0,s.jsx)(u.Z,{label:"\u6807\u8BC6",name:"name",required:!0,disabled:R!="",rules:[{required:!0}],placeholder:"\u6807\u8BC6Docker\u73AF\u5883\uFF0C\u53EA\u5141\u8BB8\u4E3A\u82F1\u6587\u6216\u662F\u6570\u5B57"}),(0,s.jsx)(u.Z,{tooltip:"\u8BBE\u7F6E\u5BBF\u4E3B\u673A\u7684Ip\u6216\u662F\u57DF\u540D\uFF0C\u7528\u4E8E\u901A\u8FC7\u7AEF\u53E3\u7684\u5F62\u5F0F\u8BBF\u95EE\u5BB9\u5668\u3002\u652F\u6301IpV4\u53CAIpV6",label:"\u5BB9\u5668\u7AEF\u53E3\u8BBF\u95EE\u57DF\u540D",name:"serverUrl",placeholder:"\u4F8B\u5982:192.168.1.25\u30012001:db8:1::2\u3001example.com"}),(0,s.jsxs)(P.Z,{children:[(0,s.jsx)(i.Z,{span:7,children:(0,s.jsx)(t.Z,{label:"\u542F\u7528 Docker Api TLS",name:"enableTLS",tooltip:"\u751F\u6210\u6559\u7A0B\u89C1\uFF1Ahttps://donknap.github.io/dpanel-docs/#/zh-cn/manual/remote"})}),(0,s.jsx)(i.Z,{children:(0,s.jsx)(u.Z,{label:"Docker Api \u5730\u5740",name:"address",required:!0,rules:[{required:!0}],width:"lg",tooltip:"\u8FDE\u63A5\u8FDC\u7A0B Docker \u65F6\u8BF7\u5148\u5F00\u542F Api \u5730\u5740\u8BBF\u95EE\u3002",placeholder:"\u4F8B\u5982\uFF1Aunix:///var/run/docker.sock\u3001tcp://192.16.0.5:2375"})})]}),(0,s.jsx)(v.Z,{name:["enableTLS"],children:function(n){var r=n.enableTLS;if(r)return(0,s.jsxs)(y.Z,{gap:40,justify:"start",children:[(0,s.jsx)(c.Z,{name:"tlsCa",label:"\u4E0A\u4F20\u5BA2\u6237\u7AEF\u8BC1\u4E66",children:(0,s.jsx)(D.Z,{title:"\u4E0A\u4F20CA\u8BC1\u4E66 ca.pem",onImport:function(m){var a;return(a=W.current)===null||a===void 0||a.setFieldValue("tlsCa",m),!0},onLoad:function(m){if(m.indexOf("CERTIFICATE")<0)throw new Error("\u5BFC\u5165ca.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})}),(0,s.jsx)(c.Z,{name:"tlsCert",label:" ",children:(0,s.jsx)(D.Z,{title:"\u4E0A\u4F20\u8BC1\u4E66\u6587\u4EF6 cert.pem",onImport:function(m){var a;return(a=W.current)===null||a===void 0||a.setFieldValue("tlsCert",m),!0},onLoad:function(m){if(m.indexOf("CERTIFICATE")<0)throw new Error("\u5BFC\u5165cert.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})}),(0,s.jsx)(c.Z,{label:" ",name:"tlsKey",children:(0,s.jsx)(D.Z,{title:"\u4E0A\u4F20\u5BC6\u94A5\u6587\u4EF6 key.pem",onImport:function(m){var a;return(a=W.current)===null||a===void 0||a.setFieldValue("tlsKey",m),!0},onLoad:function(m){if(m.indexOf("PRIVATE")<0)throw new Error("\u5BFC\u5165key.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})})]})}}),(0,s.jsxs)(P.Z,{children:[(0,s.jsx)(i.Z,{span:8,children:(0,s.jsx)(v.Z,{name:["enableComposePath","name"],children:function(n){var r=n.name;if(r!="local")return(0,s.jsx)(t.Z,{label:(0,b.getLang)("system.env.createEnableComposePath"),name:"enableComposePath",tooltip:"\u5F00\u542F\u72EC\u7ACBcompose\u914D\u7F6E\u540E\uFF0C\u5207\u6362\u8FDC\u7A0B docker \u5BA2\u6237\u7AEF\u65F6\u5C06\u53EA\u4F1A\u8BFB\u53D6\u8BE5\u73AF\u5883\u4E13\u5C5E\u76EE\u5F55\u4E0B\u7684 compose \u4EFB\u52A1"})}})}),(0,s.jsx)(i.Z,{children:(0,s.jsx)(v.Z,{name:["enableComposePath","name"],children:function(n){var r=n.enableComposePath,l=n.name;if(r)return(0,s.jsx)(u.Z,{width:"lg",label:(0,b.getLang)("system.env.createComposePath"),name:"composePath",disabled:!0,fieldProps:{value:"/dpanel/compose/compose-".concat(l!=null?l:"")}})}})})]}),(0,s.jsxs)(P.Z,{children:[(0,s.jsx)(i.Z,{span:7,children:(0,s.jsx)(t.Z,{label:"\u542F\u7528\u5BBF\u4E3B\u673A SSH \u8FDE\u63A5",name:"enableSSH"})}),(0,s.jsx)(i.Z,{span:6,children:(0,s.jsx)(v.Z,{name:["enableSSH"],children:function(n){var r=n.enableSSH;return r&&(0,s.jsx)(M.Z,{initialValue:22,label:"\u7AEF\u53E3",name:"sshPort"})}})}),(0,s.jsx)(i.Z,{offset:2,children:(0,s.jsx)(v.Z,{name:["enableSSH"],children:function(n){var r=n.enableSSH;return r&&(0,s.jsx)(d.Z.Group,{label:"\u9A8C\u8BC1\u65B9\u5F0F",name:"sshType",valueEnum:{password:"\u5BC6\u7801\u8BA4\u8BC1",key:"\u79C1\u94A5\u8BA4\u8BC1"}})}})})]}),(0,s.jsx)(v.Z,{name:["sshType","enableSSH"],children:function(n){var r=n.sshType,l=n.enableSSH;if(l){if(r=="password")return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Z,{label:"\u7528\u6237\u540D",name:"sshUsername"}),(0,s.jsx)(u.Z.Password,{label:"\u5BC6\u7801",name:"sshPassword"})]});if(r=="key")return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Z,{label:"\u7528\u6237\u540D",name:"sshUsername"}),(0,s.jsx)(D.Z,{title:"\u5BFC\u5165\u5BC6\u94A5\u6587\u4EF6",onImport:function(a){var O;return(O=W.current)===null||O===void 0||O.setFieldValue("sshKey",a),!0},onLoad:function(a){if(!a.includes("PRIVATE KEY"))throw new Error((0,b.getLang)("system.env.sshImportKeyFileIncorrect"));return!0}}),(0,s.jsx)(E.Z,{name:"sshKey",label:"\u5BC6\u94A5"}),(0,s.jsx)(u.Z.Password,{name:"sshPassword",label:"\u5BC6\u94A5\u5BC6\u7801"})]})}}})]})}),ne=Q,re=e(8680),te=e(83403),B=e(24963),ae=e(86548),S=e(90078),ue=e(41482),X=e(82346),q=e(28036),N=e(42075),ee=e(96074),V=e(25593);function se(){var I=(0,g.useRef)(),$=(0,g.useRef)(),Z=(0,X.useModel)("@@initialState"),G=Z.initialState,z=Z.loading,w=Z.error,H=Z.refresh,W=Z.setInitialState,k=(0,g.useContext)(B.Z),Y=k.message,R=(0,X.useLocation)(),C=(0,X.useNavigate)();return(0,g.useEffect)(function(){var o=R.state;if(o&&o.item){var n;(n=$.current)===null||n===void 0||n.edit(o.item)}},[R.state]),(0,s.jsx)(S._z,{header:{extra:[(0,s.jsx)(ne,{trigger:(0,s.jsx)(q.ZP,{type:"primary",children:"\u6DFB\u52A0\u670D\u52A1\u7AEF"}),ref:$,onFinish:j()(h()().mark(function o(){var n,r,l;return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(l=R.state,!(l&&l.item)){a.next=6;break}return a.next=4,(0,L.vC)({name:l.item.name});case 4:return C(R.pathname,{replace:!0,state:null}),a.abrupt("return");case 6:H(),!((n=I.current)===null||n===void 0)&&n.reloadAndRest&&((r=I.current)===null||r===void 0||r.reloadAndRest());case 8:case"end":return a.stop()}},o)}))},"dockerEnvCreate")]},children:(0,s.jsx)(ue.Z,{rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name"},{title:"\u540D\u79F0",dataIndex:"title"},{title:"\u5730\u5740",dataIndex:"address"},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(n,r,l,m,a){return(0,s.jsx)(N.Z,{split:(0,s.jsx)(ee.Z,{type:"vertical"}),children:(0,s.jsx)(V.Z.Link,{onClick:function(){var J;(J=$.current)===null||J===void 0||J.edit(r)},children:(0,s.jsx)(ae.Z,{})},r.name)})}}],pagination:!1,request:j()(h()().mark(function o(){var n;return h()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,L.Kg)();case 2:return n=l.sent,l.abrupt("return",{data:n.data.list,total:n.data.list.length});case 4:case"end":return l.stop()}},o)})),search:!1,rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},actionRef:I,tableAlertOptionRender:function(n){var r=n.selectedRows,l=n.selectedRowKeys;return(0,s.jsxs)(N.Z,{size:16,children:[(0,s.jsx)(re.Z,{type:te.W6.DOCKER_ENV,selected:r,onSuccess:function(){var a,O;return!((a=I.current)===null||a===void 0)&&a.reloadAndRest&&((O=I.current)===null||O===void 0||O.reloadAndRest()),!0}}),(0,s.jsx)(x.Z,{danger:!0,type:"primary",action:function(){return r.find(function(a){return a.default})?(Y.warning("\u9ED8\u8BA4\u73AF\u5883\u4E0D\u80FD\u5220\u9664"),!1):(0,L._g)({name:l})},onSuccess:function(){var a,O;return H(),!((a=I.current)===null||a===void 0)&&a.reloadAndRest&&((O=I.current)===null||O===void 0||O.reloadAndRest()),!0},onError:function(){var a,O;return!((a=I.current)===null||a===void 0)&&a.reset&&((O=I.current)===null||O===void 0||O.reset()),!0},confirm:"notification.confirm.title",children:"\u6279\u91CF\u5220\u9664"})]})}})})}}}]);
