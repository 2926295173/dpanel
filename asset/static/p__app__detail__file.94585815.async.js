"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5738],{1699:function(R,p,e){e.d(p,{u:function(){return C}});var E=e(9783),r=e.n(E),v=e(97857),t=e.n(v),l=e(67294),P=e(82346),O=e(40411),M=e(42075),f=e(85893),C=function(u){var _=(0,P.useAccess)(),h=Array.isArray(u.access)?u.access:[u.access],s,D=u.fallback;if(typeof u.children=="function"?(s=u.children(h.reduce(function(c,i){return t()(t()({},c),{},r()({},i,_[i]))},{})),s||(s=D)):h.every(function(c){return _[c]})?s=u.children:s=D,!D&&s&&u.showProTips&&_.canSeeEnableCe){if(_.canSeeEnableHiddenProTips)return null;s=(0,f.jsx)(O.Z,{offset:u.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:s})}if(!D&&s&&u.showProRibbonTips&&_.canSeeEnableCe){if(_.canSeeEnableHiddenProTips)return null;s=(0,f.jsx)(O.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:s})}return u.space?(0,f.jsx)(M.Z,t()(t()({},u.space),{},{children:s})):s}},3616:function(R,p,e){e.d(p,{Ed:function(){return t},FK:function(){return r},R_:function(){return E},ob:function(){return v}});var E=window.innerWidth<=1024?"90vw":"65vw",r="90vw",v="60vw",t="50vh"},24963:function(R,p,e){var E=e(67294),r=(0,E.createContext)({});p.Z=r},88879:function(R,p,e){e.r(p);var E=e(5574),r=e.n(E),v=e(57221),t=e(82346),l=e(67294),P=e(50070),O=e(38345),M=e(85893);function f(){var C,b=(0,t.useParams)(),u=(0,l.useContext)(P.AppDetailContext),_=(0,t.useSearchParams)(),h=r()(_,2),s=h[0],D=h[1];return(0,l.useEffect)(function(){u.reload(),D([])},[]),(0,M.jsx)(O.Z,{children:(0,M.jsx)(v.Z,{name:(C=b.id)!==null&&C!==void 0?C:"",apiPrefix:"container",workDir:""})})}p.default=f},50070:function(R,p,e){e.r(p),e.d(p,{AppDetailContext:function(){return T},default:function(){return L}});var E=e(15009),r=e.n(E),v=e(99289),t=e.n(v),l=e(5574),P=e.n(l),O=e(1699),M=e(24963),f=e(13822),C=e(36146),b=e(55809),u=e(90078),_=e(82346),h=e(25593),s=e(28036),D=e(50136),c=e(67294),i=e(85893),T=(0,c.createContext)({});function L(){var j,I=(0,c.useContext)(M.Z),W=I.loading,a=(0,_.useParams)(),o=(0,_.useSearchParams)(),d=P()(o,2),n=d[0],ee=d[1],N=(j=n.get("tab"))!==null&&j!==void 0?j:"edit",H=(0,c.useState)("edit"),k=P()(H,2),z=k[0],x=k[1],g=(0,_.useNavigate)(),J=(0,c.useState)(1),Z=P()(J,2),$=Z[0],V=Z[1],w=[{label:(0,i.jsx)(_.Link,{to:"/app/detail/edit/".concat(a.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,i.jsx)(_.Link,{to:"/app/detail/network/".concat(a.id,"?tab=network"),children:"\u7F51\u7EDC\u7BA1\u7406"}),key:"network"},{label:(0,i.jsx)(h.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){g("/app/detail/file/".concat(a.id,"?tab=file"))}},{label:(0,i.jsx)(h.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){g("/app/detail/log/".concat(a.id,"?tab=log"))}},{label:(0,i.jsx)(h.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){g("/app/detail/stat/".concat(a.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,i.jsx)(b.Z,{}),disabled:!0}],Q=(0,c.useState)(w),F=P()(Q,2),X=F[0],Y=F[1];(0,c.useEffect)(function(){W.show(),x(N);var U=function(){var B=t()(r()().mark(function G(){var K,S,y;return r()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return K=w,m.prev=1,m.next=4,(0,f.jV)({md5:(S=a.id)!==null&&S!==void 0?S:""});case 4:y=m.sent,K.map(function(A){return A.key=="containerName"&&(A.label=y.data.info.Name),(!y.data.info.State.Running||y.data.info.State.Restarting)&&(A.key=="file"||A.key=="stat")&&(A.disabled=!0),A}),Y(K),m.next=13;break;case 9:return m.prev=9,m.t0=m.catch(1),g("/app/list"),m.abrupt("return");case 13:return m.prev=13,W.destroy(),m.finish(13);case 16:case"end":return m.stop()}},G,null,[[1,9,13,16]])}));return function(){return B.apply(this,arguments)}}();U()},[$,a]);var q=function(B){x(B.key)};return(0,i.jsx)(T.Provider,{value:{reload:function(){V($+1)}},children:(0,i.jsxs)(u._z,{header:{extra:[(0,i.jsx)(O.u,{access:"canSeeContainerListManageCreate",children:(0,i.jsx)(_.Link,{to:"/app/create/image",children:(0,i.jsx)(s.ZP,{type:"primary",children:C.Ob.format("container.create")})})},"create")]},children:[(0,i.jsx)(D.Z,{mode:"horizontal",onClick:q,selectedKeys:[z],items:X}),(0,i.jsx)(_.Outlet,{})]})})}},13822:function(R,p,e){e.d(p,{IE:function(){return M},IW:function(){return P},KK:function(){return h},LJ:function(){return D},RF:function(){return L},Re:function(){return i},aF:function(){return I},eE:function(){return u},jV:function(){return C}});var E=e(15009),r=e.n(E),v=e(99289),t=e.n(v),l=e(82346);function P(a){return O.apply(this,arguments)}function O(){return O=t()(r()().mark(function a(o){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/container/status",{method:"POST",data:o}));case 1:case"end":return n.stop()}},a)})),O.apply(this,arguments)}function M(a){return f.apply(this,arguments)}function f(){return f=t()(r()().mark(function a(o){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/container/get-list",{data:o,method:"POST"}));case 1:case"end":return n.stop()}},a)})),f.apply(this,arguments)}function C(a){return b.apply(this,arguments)}function b(){return b=t()(r()().mark(function a(o){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/container/get-detail",{data:o,method:"POST"}));case 1:case"end":return n.stop()}},a)})),b.apply(this,arguments)}function u(a){return _.apply(this,arguments)}function _(){return _=t()(r()().mark(function a(o){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/container/update",{data:o,method:"POST"}));case 1:case"end":return n.stop()}},a)})),_.apply(this,arguments)}function h(){return s.apply(this,arguments)}function s(){return s=t()(r()().mark(function a(){return r()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,l.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return d.stop()}},a)})),s.apply(this,arguments)}function D(a){return c.apply(this,arguments)}function c(){return c=t()(r()().mark(function a(o){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/container/export",{method:"POST",data:o,responseType:"blob"}));case 1:case"end":return n.stop()}},a)})),c.apply(this,arguments)}function i(a){return T.apply(this,arguments)}function T(){return T=t()(r()().mark(function a(o){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/container/commit",{method:"POST",data:o}));case 1:case"end":return n.stop()}},a)})),T.apply(this,arguments)}function L(a){return j.apply(this,arguments)}function j(){return j=t()(r()().mark(function a(o){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/container/upgrade",{method:"POST",data:o}));case 1:case"end":return n.stop()}},a)})),j.apply(this,arguments)}function I(a){return W.apply(this,arguments)}function W(){return W=t()(r()().mark(function a(o){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,l.request)("/api/app/container/copy",{method:"POST",data:o}));case 1:case"end":return n.stop()}},a)})),W.apply(this,arguments)}}}]);
