"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2548],{80821:function(A,D,a){a.d(D,{Z:function(){return T}});var x=a(5574),u=a.n(x),I=a(93246),l=a(54006),i=a(31418),v=a(86738),c=a(14726),e=a(83062),j=a(67294),_=a(85893);function T(s){var Z=(0,j.useState)(!1),F=u()(Z,2),M=F[0],b=F[1],g=i.Z.useApp(),h=(0,l.useIntl)(),p=function(){b(!0),s.action().then(function(S){if(b(!1),typeof s.onSuccess=="function"&&s.onSuccess(S),s.messageSuccess){var P="";typeof s.messageSuccess=="function"?P=s.messageSuccess(S):P=s.messageSuccess,P.indexOf(".")>-1&&(P=h.formatMessage({id:P})),s.asynced?(0,I.Rk)(g,P):(0,I.$h)(g,P)}}).catch(function(S){b(!1),typeof s.onError=="function"&&s.onError(S)})};return s.confirm?(0,_.jsx)(v.Z,{style:{width:500},title:"\u63D0\u793A",description:s.confirm,onConfirm:p,okText:"Yes",cancelText:"No",children:(0,_.jsx)(c.ZP,{disabled:s.disabled,icon:s.icon,loading:M,danger:s.danger,type:s.type,children:s.children})}):(0,_.jsx)(e.Z,{title:s.tips,children:(0,_.jsx)(c.ZP,{disabled:s.disabled,icon:s.icon,loading:M,onClick:p,danger:s.danger,type:s.type,children:s.children})})}},67667:function(A,D,a){a.r(D),a.d(D,{default:function(){return U}});var x=a(5574),u=a.n(x),I=a(80821),l=a(97857),i=a.n(l),v=a(28413),c=a(67294),e=a(85893);function j(r){var d=(0,c.useState)(),o=u()(d,2),n=o[0],W=o[1],L={colorField:"value",valueField:"value",scale:{color:{range:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"]}},legend:!1};return r.data?(0,e.jsx)(v.Z,i()(i()({},L),{},{height:500,data:{name:"root",children:r.data}})):(0,e.jsx)(e.Fragment,{})}var _=a(2831),T=a(18148),s=a(5251),Z=a(45605),F=a(1210),M=a(38123),b=a(12122),g=a(38345),h=a(74273),p=a(54006),O=a(26412),S=a(78957),P=a(83062),R=a(71230),$=a(15746);function U(){var r,d,o,n,W,L,k,K,z,G,w,V,N,H,Y,ee=(0,c.useState)(),X=u()(ee,2),t=X[0],te=X[1],ne=(0,c.useState)(),Q=u()(ne,2),m=Q[0],ae=Q[1],J=function(){(0,_.a)().then(function(E){te(E.data);var y={total:0,container:0,volume:0,image:0,cache:0,item:[]};E.data.usage.Containers&&E.data.usage.Containers.map(function(f){var C,B;y.container+=f.SizeRootFs+((C=f.SizeRw)!==null&&C!==void 0?C:0),y.item.push({name:f.Names[0],value:parseFloat(((f.SizeRootFs+((B=f.SizeRw)!==null&&B!==void 0?B:0))/1024/1024).toFixed(2))})}),E.data.usage.Volumes&&E.data.usage.Volumes.map(function(f){y.volume+=f.UsageData.Size,y.item.push({name:f.Name,value:parseFloat((f.UsageData.Size/1024/1024).toFixed(2))})}),E.data.usage.Images&&E.data.usage.Images.map(function(f){var C,B;y.image+=f.Size-((C=f.Sharedsize)!==null&&C!==void 0?C:0),y.item.push({name:f.RepoTags&&f.RepoTags.length>0?f.RepoTags[0]:f.Id,value:parseFloat(((f.Size-((B=f.Sharedsize)!==null&&B!==void 0?B:0))/1024/1024).toFixed(2))})}),E.data.usage.BuildCache&&E.data.usage.BuildCache.map(function(f){y.cache+=f.Size}),!E.data.usage.Containers&&!E.data.usage.Images&&!E.data.usage.Volumes&&y.item.push({name:"docker\u7248\u672C\u592A\u4F4E\u6216\u662F\u83B7\u53D6\u8D85\u65F6 (\u7CFB\u7EDF/\u57FA\u7840\u8BBE\u7F6E\u8C03\u6574\u8D85\u65F6\u65F6\u95F4)",value:100}),y.total=E.data.usage.LayersSize,ae(y)})};return(0,c.useEffect)(function(){J()},[]),(0,e.jsxs)(g.Z,{direction:"column",gutter:[10,10],children:[(0,e.jsx)(g.Z,{title:(0,e.jsx)(Z.Z,{}),subTitle:"\u57FA\u7840\u4FE1\u606F",bordered:!0,headerBordered:!0,children:(0,e.jsxs)(O.Z,{children:[(0,e.jsx)(O.Z.Item,{label:"\u9762\u677F\u4FE1\u606F",children:(0,e.jsxs)(S.Z,{direction:"horizontal",children:[(0,e.jsxs)("span",{children:["DPanel - ",t==null?void 0:t.dpanel.version," - ",t==null?void 0:t.dpanel.family]}),(0,e.jsx)("a",{target:"_blank",href:"https://github.com/donknap/dpanel",children:(0,e.jsx)(F.Z,{})}),(0,e.jsx)(P.Z,{title:"\u5B98\u65B9\u4EA4\u6D41\u7FA4\uFF1A837583876",children:(0,e.jsx)("a",{target:"_blank",href:"https://qm.qq.com/q/NC0z7keAiy",children:(0,e.jsx)(M.Z,{})})})]})}),(0,e.jsx)(O.Z.Item,{label:"Docker Sdk \u7248\u672C",children:t==null?void 0:t.sdkVersion}),(0,e.jsx)(O.Z.Item,{label:"Docker\u7248\u672C",children:"".concat(t==null?void 0:t.info.OperatingSystem," - ").concat(t==null?void 0:t.info.ServerVersion," - ").concat(t==null?void 0:t.info.KernelVersion," - ").concat(t==null?void 0:t.info.Architecture)}),(0,e.jsx)(O.Z.Item,{label:"Cpu",children:t==null?void 0:t.info.NCPU}),(0,e.jsx)(O.Z.Item,{label:"Memory",children:(0,s.FI)((r=t==null?void 0:t.info.MemTotal)!==null&&r!==void 0?r:0)}),(0,e.jsx)(O.Z.Item,{label:"\u7CFB\u7EDF\u65F6\u95F4",children:new Date((d=t==null?void 0:t.info.SystemTime)!==null&&d!==void 0?d:"").toLocaleString()})]})}),(0,e.jsx)(g.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(b.Z,{}),subTitle:"\u7EDF\u8BA1",children:(0,e.jsxs)(R.Z,{children:[(0,e.jsx)($.Z,{span:"11",children:(m==null?void 0:m.item)&&(m==null?void 0:m.item.length)>0&&(0,e.jsx)(j,{data:(o=m==null?void 0:m.item)!==null&&o!==void 0?o:[]})}),(0,e.jsx)($.Z,{span:"5",children:(0,e.jsxs)(g.Z,{split:"horizontal",children:[(0,e.jsx)(h.Z,{statistic:{title:"\u5BB9\u5668",value:(0,s.FI)((n=m==null?void 0:m.container)!==null&&n!==void 0?n:0),description:"\u5305\u542B\u7CFB\u7EDF\u5360\u7528\u53CA\u5BB9\u5668\u8FD0\u884C\u5199\u5165\u6570\u636E"}}),(0,e.jsx)(h.Z,{statistic:{title:"\u955C\u50CF",value:(0,s.FI)((W=m==null?void 0:m.image)!==null&&W!==void 0?W:0),description:"\u5305\u542B\u4E2D\u95F4\u955C\u50CF"}}),(0,e.jsx)(h.Z,{statistic:{title:"\u5B58\u50A8",value:(0,s.FI)((L=m==null?void 0:m.volume)!==null&&L!==void 0?L:0),description:"\u53EA\u5305\u542B\u5B58\u50A8\u5377,\u4E0D\u5305\u542B\u6302\u8F7D\u76EE\u5F55"}}),(0,e.jsx)(h.Z,{statistic:{title:(0,e.jsxs)(S.Z,{children:[(0,e.jsx)("span",{children:"\u6784\u5EFA\u7F13\u5B58"}),(0,e.jsx)(I.Z,{action:function(){return(0,T.c5)()},type:"link",messageSuccess:"\u6E05\u9664\u6210\u529F",onSuccess:function(){J()},children:"\u6E05\u9664"})]}),value:(0,s.FI)((k=m==null?void 0:m.cache)!==null&&k!==void 0?k:0)}})]})}),(0,e.jsx)($.Z,{span:"8",children:(0,e.jsxs)(g.Z,{split:"horizontal",children:[(0,e.jsx)(g.Z,{ghost:!0,children:(0,e.jsxs)(h.Z.Group,{children:[(0,e.jsx)(h.Z,{statistic:{title:"\u5BB9\u5668",value:(K=t==null?void 0:t.info.Containers)!==null&&K!==void 0?K:0,description:(0,e.jsx)(p.Link,{to:"/app/list",children:"\u67E5\u770B"})}}),(0,e.jsx)(h.Z.Divider,{}),(0,e.jsx)(h.Z,{statistic:{title:"\u8FD0\u884C\u4E2D",value:(z=t==null?void 0:t.info.ContainersRunning)!==null&&z!==void 0?z:0,status:"success"}}),(0,e.jsx)(h.Z,{statistic:{title:"\u505C\u6B62",value:((G=t==null?void 0:t.info.ContainersPaused)!==null&&G!==void 0?G:0)+((w=t==null?void 0:t.info.ContainersStopped)!==null&&w!==void 0?w:0),status:"error"}}),(0,e.jsx)(h.Z,{statistic:{title:"\u56DE\u6536\u7AD9",value:(V=t==null?void 0:t.total.containerTask)!==null&&V!==void 0?V:0,status:"default",description:(0,e.jsx)(p.Link,{to:"/app/list/recycle",children:"\u67E5\u770B"})}})]})}),(0,e.jsxs)(g.Z,{ghost:!0,children:[(0,e.jsx)(h.Z,{statistic:{title:"\u955C\u50CF",value:"".concat((N=(t==null?void 0:t.usage.Images)&&t.usage.Images.length)!==null&&N!==void 0?N:0),status:"default",description:(0,e.jsx)(p.Link,{to:"/image/list",children:"\u67E5\u770B"})},chartPlacement:"left"}),(0,e.jsx)(h.Z,{statistic:{title:"\u4EFB\u52A1",value:(H=t==null?void 0:t.total.imageTask)!==null&&H!==void 0?H:0,status:"default",description:(0,e.jsx)(p.Link,{to:"/image/list/build",children:"\u67E5\u770B"})},chartPlacement:"left"})]}),(0,e.jsx)(g.Z,{ghost:!0,children:(0,e.jsx)(h.Z,{statistic:{title:"\u7F51\u7EDC",value:t==null?void 0:t.total.network,status:"default",description:(0,e.jsx)(p.Link,{to:"/system/network",children:"\u67E5\u770B"})},chartPlacement:"left"})}),(0,e.jsxs)(g.Z,{ghost:!0,children:[(0,e.jsx)(h.Z,{statistic:{title:"\u5B58\u50A8\u5377",value:(Y=(t==null?void 0:t.usage.Volumes)&&(t==null?void 0:t.usage.Volumes.length))!==null&&Y!==void 0?Y:0,status:"default",description:(0,e.jsx)(p.Link,{to:"/system/volume",children:"\u67E5\u770B"})},chartPlacement:"left"}),(0,e.jsx)(h.Z,{statistic:{title:"\u5907\u4EFD",value:t==null?void 0:t.total.backup,status:"default",description:(0,e.jsx)(p.Link,{to:"/app/backup",children:"\u67E5\u770B"})},chartPlacement:"left"})]})]})})]})})]})}},2831:function(A,D,a){a.d(D,{a:function(){return v},d:function(){return e}});var x=a(15009),u=a.n(x),I=a(99289),l=a.n(I),i=a(54006);function v(){return c.apply(this,arguments)}function c(){return c=l()(u()().mark(function _(){return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,i.request)("/api/common/home/info",{method:"POST"});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},_)})),c.apply(this,arguments)}function e(){return j.apply(this,arguments)}function j(){return j=l()(u()().mark(function _(){return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,i.request)("/api/common/home/upgrade-script",{method:"POST"});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},_)})),j.apply(this,arguments)}},18148:function(A,D,a){a.d(D,{Fj:function(){return P},KG:function(){return v},KX:function(){return $},T8:function(){return s},Xn:function(){return _},ao:function(){return b},c5:function(){return O},c7:function(){return h}});var x=a(15009),u=a.n(x),I=a(99289),l=a.n(I),i=a(54006);function v(r){return c.apply(this,arguments)}function c(){return c=l()(u()().mark(function r(d){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.request)("/api/app/image/get-list",{method:"POST",data:d}));case 1:case"end":return n.stop()}},r)})),c.apply(this,arguments)}function e(r){return j.apply(this,arguments)}function j(){return j=_asyncToGenerator(_regeneratorRuntime().mark(function r(d){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,request("/api/app/log/image-build",{method:"POST",data:d});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},r)})),j.apply(this,arguments)}function _(r){return T.apply(this,arguments)}function T(){return T=l()(u()().mark(function r(d){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.request)("/api/app/image/get-list-build",{method:"POST",data:d}));case 1:case"end":return n.stop()}},r)})),T.apply(this,arguments)}function s(r){return Z.apply(this,arguments)}function Z(){return Z=l()(u()().mark(function r(d){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,i.request)("/api/app/image/get-build-task",{method:"POST",data:d});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},r)})),Z.apply(this,arguments)}function F(r){return M.apply(this,arguments)}function M(){return M=_asyncToGenerator(_regeneratorRuntime().mark(function r(d){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,request("/api/app/image/delete-build-task",{method:"POST",data:d});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},r)})),M.apply(this,arguments)}function b(r){return g.apply(this,arguments)}function g(){return g=l()(u()().mark(function r(d){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,i.request)("/api/app/image/image-delete",{method:"POST",data:d});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},r)})),g.apply(this,arguments)}function h(){return p.apply(this,arguments)}function p(){return p=l()(u()().mark(function r(){return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,i.request)("/api/app/image/image-prune",{method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},r)})),p.apply(this,arguments)}function O(){return S.apply(this,arguments)}function S(){return S=l()(u()().mark(function r(){return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,i.request)("/api/app/image/build-prune",{method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},r)})),S.apply(this,arguments)}function P(r){return R.apply(this,arguments)}function R(){return R=l()(u()().mark(function r(d){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,i.request)("/api/app/image/update-title",{method:"POST",data:d});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},r)})),R.apply(this,arguments)}function $(r){return U.apply(this,arguments)}function U(){return U=l()(u()().mark(function r(d){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.request)("/api/app/image/tag-sync",{method:"POST",data:d}));case 1:case"end":return n.stop()}},r)})),U.apply(this,arguments)}},5251:function(A,D,a){a.d(D,{FI:function(){return u},ZM:function(){return I}});function x(l){return l.trim()}function u(l){var i="";l<.1*1024?i=l.toFixed(2)+"B":l<.1*1024*1024?i=(l/1024).toFixed(2)+"KB":l<1*1024*1024*1024?i=(l/(1024*1024)).toFixed(2)+"MB":i=(l/(1024*1024*1024)).toFixed(2)+"GB";var v=i+"",c=v.indexOf("."),e=v.substr(c+1,2);return e=="00"?v.substring(0,c)+v.substr(c+3,2):i}function I(l){if(l){var i=new Date(l),v=i.getFullYear()+"-",c=(i.getMonth()+1<10?"0"+(i.getMonth()+1):i.getMonth()+1)+"-",e=(i.getDate()<10?"0"+i.getDate():i.getDate())+" ",j=(i.getHours()<10?"0"+i.getHours():i.getHours())+":",_=(i.getMinutes()<10?"0"+i.getMinutes():i.getMinutes())+":",T=i.getSeconds()<10?"0"+i.getSeconds():i.getSeconds();return v+c+e+j+_+T}}}}]);
