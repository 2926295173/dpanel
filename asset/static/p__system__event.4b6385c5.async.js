"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5050],{80821:function(x,m,n){n.d(m,{Z:function(){return M}});var v=n(97857),i=n.n(v),u=n(5574),l=n.n(u),h=n(24963),o=n(36146),S=n(86738),_=n(83062),j=n(96074),D=n(83622),E=n(67294),c=n(85893);function M(e){var R=(0,E.useState)(!1),g=l()(R,2),P=g[0],r=g[1],s=(0,E.useContext)(h.Z),a=s.message,t=new o.Uo,C=function(){r(!0);var O=e.action();O instanceof Promise?O.then(function(d){if(r(!1),d){typeof e.onSuccess=="function"&&e.onSuccess(d);var f="";e.messageSuccess?typeof e.messageSuccess=="function"?f=e.messageSuccess(d):f=e.messageSuccess.indexOf("notification.")==0?t.format(e.messageSuccess):e.messageSuccess:f=t.format("notification.finish"),e.asynced?a.info(f):a.success(f)}}).catch(function(d){r(!1),typeof e.onError=="function"&&e.onError(d)}):r(!1)};return e.confirm?(0,c.jsx)(S.Z,i()(i()({style:{width:500},title:e.confirmTitle?e.confirmTitle:t.format("notification.title.tip"),description:typeof e.confirm=="string"&&e.confirm.indexOf("notification.")==0?t.format(e.confirm):e.confirm,onConfirm:C,okText:"Yes",cancelText:"No",onOpenChange:e.confirmOnOpenChange},e.confirmProps),{},{children:(0,c.jsxs)(_.Z,{title:e.tips,children:[e.showDivider&&(0,c.jsx)(j.Z,{type:"vertical",style:{marginRight:15}}),(0,c.jsx)(D.ZP,{block:e.block,disabled:e.disabled,icon:!e.children&&P?void 0:e.icon,loading:P,danger:e.danger,type:e.type,children:e.children})]})})):(0,c.jsxs)(_.Z,{title:e.tips,children:[e.showDivider&&(0,c.jsx)(j.Z,{type:"vertical",style:{marginRight:15}}),(0,c.jsx)(D.ZP,{block:e.block,style:e.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:e.disabled,icon:!e.children&&P?void 0:e.icon,loading:P,onClick:C,danger:e.danger,type:e.type,children:e.children})]})}},24963:function(x,m,n){var v=n(67294),i=(0,v.createContext)({});m.Z=i},85827:function(x,m,n){n.r(m),n.d(m,{default:function(){return P}});var v=n(15009),i=n.n(v),u=n(99289),l=n.n(u),h=n(80821),o=n(82346);function S(r){return _.apply(this,arguments)}function _(){return _=l()(i()().mark(function r(s){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,o.request)("/api/common/event/get-list",{method:"POST",data:s}));case 1:case"end":return t.stop()}},r)})),_.apply(this,arguments)}function j(r){return D.apply(this,arguments)}function D(){return D=l()(i()().mark(function r(s){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,o.request)("/api/common/event/prune",{method:"POST",data:s}));case 1:case"end":return t.stop()}},r)})),D.apply(this,arguments)}var E=n(36146),c=n(67255),M=n(90078),e=n(56729),R=n(67294),g=n(85893);function P(){var r=(0,R.useRef)();return(0,g.jsx)(M._z,{header:{extra:[(0,g.jsx)(h.Z,{action:function(){return j()},onSuccess:function(){var a,t;return!((a=r.current)===null||a===void 0)&&a.reloadAndRest&&((t=r.current)===null||t===void 0||t.reloadAndRest()),!0},onError:function(){var a,t;return!((a=r.current)===null||a===void 0)&&a.reset&&((t=r.current)===null||t===void 0||t.reset()),!0},confirm:"notification.confirm.title",danger:!0,type:"primary",children:E.FD.format("listManageClear")})]},children:(0,g.jsx)(e.Z,{search:!1,scroll:{x:"max-content"},columns:[{title:E.FD.format("listType"),ellipsis:!0,dataIndex:"type",width:200},{title:E.FD.format("listDescription"),search:!1,render:function(a,t,C,T){return(0,g.jsxs)(g.Fragment,{children:[t.action," ",t.message]})}},{title:E.FD.format("listCreatedAt"),ellipsis:!0,search:!1,dataIndex:"createdAt",width:200,render:function(a,t,C,T,O){return new Date(t.createdAt).toLocaleString()}}],rowKey:"id",request:function(){var s=l()(i()().mark(function a(t,C,T){var O,d,f;return i()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,S({page:(O=t.current)!==null&&O!==void 0?O:1,pageSize:(d=t.pageSize)!==null&&d!==void 0?d:10,type:t.type});case 2:return f=y.sent,y.abrupt("return",{data:f.data.list,success:!0,total:f.data.total});case 4:case"end":return y.stop()}},a)}));return function(a,t,C){return s.apply(this,arguments)}}(),pagination:(0,c.O)(),actionRef:r})})}},67255:function(x,m,n){n.d(m,{O:function(){return v},j:function(){return i}});function v(u){var l=localStorage.getItem("dpanel-pagesize");return l=="all"?!1:{defaultCurrent:u==null?void 0:u.page,showSizeChanger:!0,defaultPageSize:parseInt(l!=null?l:"20"),onChange:function(o,S){localStorage.setItem("dpanel-page-"+location.pathname.split("/").slice(-2).join("-"),"".concat(o))}}}function i(u){var l="dpanel-table-column-".concat(u),h={};if(localStorage.getItem(l)){var o;h=JSON.parse((o=localStorage.getItem(l))!==null&&o!==void 0?o:"{}")}return{defaultValue:h,onChange:function(_){localStorage.setItem("dpanel-table-column-".concat(u),JSON.stringify(_))}}}}}]);
