"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3357],{80821:function(U,B,e){e.d(B,{Z:function(){return y}});var I=e(5574),r=e.n(I),v=e(24963),u=e(86738),a=e(14726),j=e(83062),f=e(67294),C=e(85893);function y(i){var D=(0,f.useState)(!1),M=r()(D,2),O=M[0],E=M[1],p=(0,f.useContext)(v.Z),b=p.lang,l=p.notice,m=p.message,P=function(){E(!0),i.action().then(function(_){if(E(!1),typeof i.onSuccess=="function"&&i.onSuccess(_),i.messageSuccess){var A="";typeof i.messageSuccess=="function"?A=i.messageSuccess(_):A=i.messageSuccess,A.indexOf(".")>-1&&(A=b(A)),i.asynced?m.info(A):m.success(A)}}).catch(function(_){E(!1),typeof i.onError=="function"&&i.onError(_)})};return i.confirm?(0,C.jsx)(u.Z,{style:{width:500},title:i.confirmTitle?i.confirmTitle:b("notification.title.tip"),description:i.confirm,onConfirm:P,okText:"Yes",cancelText:"No",children:(0,C.jsx)(a.ZP,{disabled:i.disabled,icon:i.icon,loading:O,danger:i.danger,type:i.type,children:i.children})}):(0,C.jsx)(j.Z,{title:i.tips,children:(0,C.jsx)(a.ZP,{disabled:i.disabled,icon:i.icon,loading:O,onClick:P,danger:i.danger,type:i.type,children:i.children})})}},96042:function(U,B,e){e.d(B,{Z:function(){return y}});var I=e(97857),r=e.n(I),v=e(5574),u=e.n(v),a=e(75870),j=e(34041),f=e(67294),C=e(85893);function y(i){var D=(0,f.useState)([]),M=u()(D,2),O=M[0],E=M[1];(0,f.useEffect)(function(){(0,a.Ot)().then(function(b){b&&E(b.data.list)})},[]);var p={};return i.multiple&&(p.mode="multiple"),i.top&&(p.placement="topLeft"),(0,C.jsx)(j.Z,r()({onChange:function(l){if(Array.isArray(l)){var m=l.map(function(P){return O[P]});i.onChangeList&&i.onChangeList(m)}else i.onChange&&i.onChange(O[l])},placeholder:"\u9009\u62E9\u955C\u50CF\u4ED3\u5E93\uFF0C\u672C\u5730\u4F7F\u7528\u7559\u7A7A\u5373\u53EF",options:O.map(function(b,l){return{value:l,label:b.title+"("+b.serverAddress+")"}})},p))}},76428:function(U,B,e){e.d(B,{Z:function(){return u}});var I=e(25593),r=e(67294),v=e(85893);function u(a){return(0,v.jsx)(I.Z.Text,{copyable:!0,children:a.title})}},24963:function(U,B,e){var I=e(67294),r=(0,I.createContext)({});B.Z=r},70977:function(U,B,e){e.r(B),e.d(B,{default:function(){return ie}});var I=e(5574),r=e.n(I),v=e(3393),u=e(43425),a=e(58638),j=e(1912),f=e(87784),C=e(40666),y=e(77171),i=e(48689),D=e(45742),M=e(38345),O=e(97269),E=e(62370),p=e(7529),b=e(5966),l=e(54006),m=e(42075),P=e(96074),L=e(65233),_=e(2487),A=e(4393),x=e(66309),Z=e(25593),T=e(26412),d=e(63490),h=e(67294),g=e(80821),s=e(5251),Y=e(93162),he=e.n(Y),re=e(18148),ae=e(96042),se=e(24963),ue=e(76428),t=e(85893);function ie(){var $,w=(0,h.useContext)(se.Z),_e=w.message,le=w.notice,N=w.lang,oe=(0,h.useState)(),H=r()(oe,2),n=H[0],de=H[1],X=(0,l.useParams)(),V=(0,h.useRef)(),ce=(0,h.useState)(0),J=r()(ce,2),F=J[0],G=J[1],me=(0,l.useNavigate)(),Q=(0,l.useAccess)(),ge=(0,h.useState)(),k=r()(ge,2),S=k[0],fe=k[1],pe=(0,h.useState)(""),q=r()(pe,2),ee=q[0],ne=q[1];return(0,h.useEffect)(function(){X.id&&(0,v.YU)({md5:X.id}).then(function(o){de(o.data),Q.canSeeImageRemoteTag&&(0,v.cd)({imageName:o.data.info.RepoTags[0]}).then(function(c){fe(c.data.list)})})},[F]),(0,t.jsx)("div",{children:(0,t.jsxs)(M.Z,{direction:"column",ghost:!0,gutter:[0,10],children:[(0,t.jsx)(M.Z,{title:(0,t.jsx)(u.Z,{}),subTitle:"\u5E38\u7528\u64CD\u4F5C",headerBordered:!0,bordered:!0,children:(0,t.jsxs)(m.Z,{children:[(0,t.jsx)(g.Z,{icon:(0,t.jsx)(a.Z,{}),action:function(){var c;return(0,v.Rb)({md5:(c=n==null?void 0:n.info.RepoTags)!==null&&c!==void 0?c:[""]})},onSuccess:function(c){var R=new Blob([c],{type:"application/tar"});(0,Y.saveAs)(R,(n==null?void 0:n.info.RepoTags.join("-"))+".tar")},messageSuccess:"\u5BFC\u51FA\u6210\u529F",children:"\u5BFC\u51FA"}),(0,t.jsx)(g.Z,{icon:(0,t.jsx)(j.Z,{}),action:function(){var c;return(0,v.Gb)({tag:(c=n==null?void 0:n.info.RepoTags[0])!==null&&c!==void 0?c:"",type:"push",asLatest:!0})},type:"primary",messageSuccess:"image.pushed",onSuccess:function(){G(F+1)},children:"Push As Latest"}),(0,t.jsx)(P.Z,{}),(0,t.jsx)(g.Z,{icon:(0,t.jsx)(f.Z,{}),danger:!0,type:"primary",action:function(){var c;return(0,re.ao)({md5:[(c=n==null?void 0:n.info.Id)!==null&&c!==void 0?c:""],force:!0})},onSuccess:function(){me("/image/list")},confirm:"\u662F\u5426\u8981\u505C\u6B62\u8BE5\u955C\u50CF\u4E0B\u7684\u5BB9\u5668\u5E76\u5F3A\u5236\u5220\u9664\uFF1F",messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u5F3A\u5236\u5220\u9664"})]})}),Q.canSeeImageRemoteTag&&(0,t.jsx)(M.Z,{title:(0,t.jsx)(C.Z,{}),subTitle:"\u8FDC\u7A0B Tag \u5217\u8868",extra:(0,t.jsx)(O.A,{isKeyPressSubmit:!0,submitter:!1,onFinish:function(c){ne(c.search)},children:(0,t.jsx)(m.Z.Compact,{children:(0,t.jsx)(E.Z,{style:{margin:0},name:"search",children:(0,t.jsx)(L.Z,{allowClear:!0,addonBefore:"\u641C\u7D22Tag",placeholder:"\u6309\u56DE\u8F66\u67E5\u8BE2",onClear:function(){ne("")}})})})},"form"),children:(0,t.jsx)(_.Z,{pagination:{pageSize:36},rowKey:function(c){return"".concat(c)},grid:{gutter:10,xs:3,sm:3,md:4,lg:4,xl:5,xxl:6},dataSource:S&&S.filter(function(o){return!ee||o.indexOf(ee)!==-1}),loading:!S||(S==null?void 0:S.length)<=0,renderItem:function(c,R){return(0,t.jsx)(_.Z.Item,{children:(0,t.jsx)(A.Z,{style:{height:"60px"},children:(0,t.jsx)("div",{style:{margin:"-10px",wordBreak:"break-word"},children:(0,t.jsx)(ue.Z,{title:c})})})},R)}})}),(0,t.jsx)(M.Z,{bordered:!0,title:(0,t.jsx)(C.Z,{}),subTitle:"Tag \u5217\u8868",children:(0,t.jsx)(p.Rs,{grid:{gutter:40,column:2},headerTitle:!1,metas:{content:{render:function(c,R,K){return(0,t.jsx)(x.Z,{color:"blue",children:(0,t.jsx)(Z.Z.Text,{copyable:!0,children:R})},K)}},title:{render:function(c,R,K){return(0,t.jsxs)(m.Z,{children:[(0,t.jsxs)(g.Z,{action:function(){return(0,v.Gb)({tag:R,type:"push"})},messageSuccess:"image.pushed",children:[(0,t.jsx)(j.Z,{})," Push"]}),(0,t.jsxs)(g.Z,{action:function(){return(0,v.Gb)({tag:R,type:"pull"})},messageSuccess:"image.pulled",children:[(0,t.jsx)(y.Z,{})," Pull"]}),(0,t.jsx)(g.Z,{action:function(){return(0,v.Pn)({tag:R})},onSuccess:function(te){return G(F+1),!0},messageSuccess:"tag.delete",confirm:"\u662F\u5426\u786E\u8BA4\u5220\u9664\u6807\u7B7E",children:(0,t.jsx)(i.Z,{})})]},K)}}},dataSource:n==null?void 0:n.info.RepoTags})}),(0,t.jsx)(M.Z,{bordered:!0,headerBordered:!0,title:(0,t.jsx)(C.Z,{}),subTitle:"\u65B0\u589E Tag",children:(0,t.jsxs)(O.A,{formRef:V,onFinish:function(c){return new Promise(function(R,K){var W;return(!n||!(n!=null&&n.info))&&(le.error(N("image.notFound")),K(!0)),(0,v._U)({md5:(W=n==null?void 0:n.info.Id)!==null&&W!==void 0?W:"",tag:(c.imageRespo?c.imageRespo.serverAddress+"/":"")+c.imageTag}).then(function(te){var z;_e.success(N("tag.add"),te.data.tag),G(F+1),(z=V.current)===null||z===void 0||z.resetFields(),R(!0)})})},children:[(0,t.jsx)(E.Z,{label:"\u955C\u50CF\u4ED3\u5E93",name:"imageRespo",tooltip:(0,t.jsxs)(t.Fragment,{children:["\u63A8\u9001\u524D\u8BF7\u4FDD\u8BC1\u4ED3\u5E93\u4E2D\u6709\u6307\u5B9A\u7684\u547D\u540D\u7A7A\u95F4, \u5982\u6CA1\u6709\u8BF7\u5148 ",(0,t.jsx)("a",{href:"",target:"_blank",children:"\u6DFB\u52A0\u4ED3\u5E93"})]}),children:(0,t.jsx)(ae.Z,{})}),(0,t.jsx)(b.Z,{fieldProps:{min:2,max:255},rules:[{required:!0}],required:!0,placeholder:"\u53EA\u80FD\u4F7F\u7528\u5C0F\u5199\u82F1\u6587\u5B57\u7B26\u3001\u6570\u5B57\u3001_\u3001-\u3001",label:"\u955C\u50CF\u540D\u79F0",name:"imageTag",tooltip:"\u4F8B\u5982: name:tag\u3001namespace/name:tag\u3001registry/namespace/name:tag"})]})}),(0,t.jsx)(M.Z,{bordered:!0,headerBordered:!0,title:(0,t.jsx)(D.Z,{}),subTitle:"\u955C\u50CF\u8BE6\u60C5",children:(0,t.jsxs)(T.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,t.jsx)(T.Z.Item,{label:"ID",children:n==null?void 0:n.info.Id}),(0,t.jsx)(T.Z.Item,{label:"Parent",children:n==null?void 0:n.info.Parent}),(0,t.jsx)(T.Z.Item,{label:"Size",children:(0,s.FI)(($=n==null?void 0:n.info.Size)!==null&&$!==void 0?$:0)}),(0,t.jsx)(T.Z.Item,{label:"Created",children:n==null?void 0:n.info.Created}),(0,t.jsxs)(T.Z.Item,{label:"Build",children:["Docker ",n==null?void 0:n.info.DockerVersion," ",n==null?void 0:n.info.Os," ",n==null?void 0:n.info.Architecture]}),(0,t.jsx)(T.Z.Item,{label:"Labels",children:(0,t.jsx)(T.Z,{column:1,bordered:!0,children:(n==null?void 0:n.info.Config.Labels)&&Object.keys(n==null?void 0:n.info.Config.Labels).map(function(o){return(0,t.jsx)(T.Z.Item,{label:o,children:(0,t.jsx)(Z.Z.Text,{style:{width:"400px"},ellipsis:{tooltip:n==null?void 0:n.info.Config.Labels[o]},children:n==null?void 0:n.info.Config.Labels[o]})},o)})})})]})}),(0,t.jsx)(M.Z,{bordered:!0,headerBordered:!0,title:(0,t.jsx)(D.Z,{}),subTitle:"Dockerfile \u8BE6\u60C5",children:(0,t.jsxs)(T.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,t.jsx)(T.Z.Item,{label:"CMD",children:n==null?void 0:n.info.Config.Cmd}),(0,t.jsx)(T.Z.Item,{label:"ENTRYPOINT",children:n==null?void 0:n.info.Config.Entrypoint}),(0,t.jsx)(T.Z.Item,{label:"EXPOSE",children:(n==null?void 0:n.info.Config.ExposedPorts)&&Object.keys(n==null?void 0:n.info.Config.ExposedPorts).map(function(o){return(0,t.jsx)(x.Z,{color:"gray",children:o},o)})}),(0,t.jsx)(T.Z.Item,{label:"VOLUME",children:(n==null?void 0:n.info.Config.Volumes)&&Object.keys(n==null?void 0:n.info.Config.Volumes).map(function(o){return(0,t.jsx)(x.Z,{color:"gray",children:o},o)})}),(0,t.jsx)(T.Z.Item,{label:"Env",children:(0,t.jsx)(T.Z,{column:1,bordered:!0,children:(n==null?void 0:n.info.Config.Env)&&(n==null?void 0:n.info.Config.Env.map(function(o,c){var R=o.split("=");return(0,t.jsx)(T.Z.Item,{label:R[0],children:R[1]},c)}))})})]})}),(0,t.jsxs)(M.Z,{bordered:!0,headerBordered:!0,title:(0,t.jsx)(D.Z,{}),subTitle:"Layers",children:[(0,t.jsx)(d.Z,{rowKey:"CreatedBy",dataSource:n==null?void 0:n.layer.reverse(),columns:[{title:"Layer",dataIndex:"CreatedBy",key:"CreatedBy"}]}),";"]})]})})}},3393:function(U,B,e){e.d(B,{Gb:function(){return C},Pn:function(){return M},Rb:function(){return E},YU:function(){return j},_U:function(){return i},cd:function(){return b}});var I=e(15009),r=e.n(I),v=e(99289),u=e.n(v),a=e(54006);function j(m){return f.apply(this,arguments)}function f(){return f=u()(r()().mark(function m(P){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,a.request)("/api/app/image/get-detail",{method:"POST",data:P}));case 1:case"end":return _.stop()}},m)})),f.apply(this,arguments)}function C(m){return y.apply(this,arguments)}function y(){return y=u()(r()().mark(function m(P){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,a.request)("/api/app/image/tag-remote",{method:"POST",data:P}));case 1:case"end":return _.stop()}},m)})),y.apply(this,arguments)}function i(m){return D.apply(this,arguments)}function D(){return D=u()(r()().mark(function m(P){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,a.request)("/api/app/image/tag-add",{method:"POST",data:P}));case 1:case"end":return _.stop()}},m)})),D.apply(this,arguments)}function M(m){return O.apply(this,arguments)}function O(){return O=u()(r()().mark(function m(P){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,a.request)("/api/app/image/tag-delete",{method:"POST",data:P}));case 1:case"end":return _.stop()}},m)})),O.apply(this,arguments)}function E(m){return p.apply(this,arguments)}function p(){return p=u()(r()().mark(function m(P){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,a.request)("/api/app/image/export",{method:"POST",data:P,responseType:"blob"}));case 1:case"end":return _.stop()}},m)})),p.apply(this,arguments)}function b(m){return l.apply(this,arguments)}function l(){return l=u()(r()().mark(function m(P){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,a.request)("/api/pro/image/get-remote-tag",{method:"POST",data:P}));case 1:case"end":return _.stop()}},m)})),l.apply(this,arguments)}},18148:function(U,B,e){e.d(B,{$q:function(){return E},Fj:function(){return A},KG:function(){return j},KX:function(){return Z},T8:function(){return M},Xn:function(){return i},ao:function(){return b},c5:function(){return L},c7:function(){return m}});var I=e(15009),r=e.n(I),v=e(99289),u=e.n(v),a=e(54006);function j(d){return f.apply(this,arguments)}function f(){return f=u()(r()().mark(function d(h){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,a.request)("/api/app/image/get-list",{method:"POST",data:h}));case 1:case"end":return s.stop()}},d)})),f.apply(this,arguments)}function C(d){return y.apply(this,arguments)}function y(){return y=_asyncToGenerator(_regeneratorRuntime().mark(function d(h){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,request("/api/app/log/image-build",{method:"POST",data:h});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},d)})),y.apply(this,arguments)}function i(d){return D.apply(this,arguments)}function D(){return D=u()(r()().mark(function d(h){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,a.request)("/api/app/image/get-list-build",{method:"POST",data:h}));case 1:case"end":return s.stop()}},d)})),D.apply(this,arguments)}function M(d){return O.apply(this,arguments)}function O(){return O=u()(r()().mark(function d(h){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,a.request)("/api/app/image/get-build-task",{method:"POST",data:h});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},d)})),O.apply(this,arguments)}function E(d){return p.apply(this,arguments)}function p(){return p=u()(r()().mark(function d(h){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,a.request)("/api/app/image/delete-build-task",{method:"POST",data:h});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},d)})),p.apply(this,arguments)}function b(d){return l.apply(this,arguments)}function l(){return l=u()(r()().mark(function d(h){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,a.request)("/api/app/image/image-delete",{method:"POST",data:h});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},d)})),l.apply(this,arguments)}function m(){return P.apply(this,arguments)}function P(){return P=u()(r()().mark(function d(){return r()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,a.request)("/api/app/image/image-prune",{method:"POST"});case 2:return g.abrupt("return",g.sent);case 3:case"end":return g.stop()}},d)})),P.apply(this,arguments)}function L(){return _.apply(this,arguments)}function _(){return _=u()(r()().mark(function d(){return r()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,a.request)("/api/app/image/build-prune",{method:"POST"});case 2:return g.abrupt("return",g.sent);case 3:case"end":return g.stop()}},d)})),_.apply(this,arguments)}function A(d){return x.apply(this,arguments)}function x(){return x=u()(r()().mark(function d(h){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,a.request)("/api/app/image/update-title",{method:"POST",data:h});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},d)})),x.apply(this,arguments)}function Z(d){return T.apply(this,arguments)}function T(){return T=u()(r()().mark(function d(h){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,a.request)("/api/app/image/tag-sync",{method:"POST",data:h}));case 1:case"end":return s.stop()}},d)})),T.apply(this,arguments)}},75870:function(U,B,e){e.d(B,{Ot:function(){return j},ZH:function(){return C},ix:function(){return i},t1:function(){return M}});var I=e(15009),r=e.n(I),v=e(99289),u=e.n(v),a=e(54006);function j(E){return f.apply(this,arguments)}function f(){return f=u()(r()().mark(function E(p){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,a.request)("/api/common/registry/get-list",{method:"POST",data:p}));case 1:case"end":return l.stop()}},E)})),f.apply(this,arguments)}function C(E){return y.apply(this,arguments)}function y(){return y=u()(r()().mark(function E(p){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,a.request)("/api/common/registry/create",{method:"POST",data:p}));case 1:case"end":return l.stop()}},E)})),y.apply(this,arguments)}function i(E){return D.apply(this,arguments)}function D(){return D=u()(r()().mark(function E(p){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,a.request)("/api/common/registry/delete",{method:"POST",data:p}));case 1:case"end":return l.stop()}},E)})),D.apply(this,arguments)}function M(E){return O.apply(this,arguments)}function O(){return O=u()(r()().mark(function E(p){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,a.request)("/api/common/registry/get-detail",{method:"POST",data:p}));case 1:case"end":return l.stop()}},E)})),O.apply(this,arguments)}},5251:function(U,B,e){e.d(B,{FI:function(){return r},ZM:function(){return v}});function I(u){return u.trim()}function r(u){var a="";u<.1*1024?a=u.toFixed(2)+"B":u<.1*1024*1024?a=(u/1024).toFixed(2)+"KB":u<1*1024*1024*1024?a=(u/(1024*1024)).toFixed(2)+"MB":a=(u/(1024*1024*1024)).toFixed(2)+"GB";var j=a+"",f=j.indexOf("."),C=j.substring(f+1,f+3);return C=="00"?j.substring(0,f)+j.substr(f+3,2):a}function v(u){if(u){var a=new Date(u),j=a.getFullYear()+"-",f=(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-",C=(a.getDate()<10?"0"+a.getDate():a.getDate())+" ",y=(a.getHours()<10?"0"+a.getHours():a.getHours())+":",i=(a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes())+":",D=a.getSeconds()<10?"0"+a.getSeconds():a.getSeconds();return j+f+C+y+i+D}}}}]);
