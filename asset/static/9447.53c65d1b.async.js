"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9447],{37767:function(w,W,e){e.d(W,{Z:function(){return Oe}});var K=e(15009),o=e.n(K),L=e(99289),p=e.n(L),j=e(5574),U=e.n(j),l=e(45605),I=e(38345),M=e(97269),u=e(26412),C=e(42075),O=e(96074),g=e(25593),R=e(2487),s=e(67294),_=e(76428),t=e(78498),N=e(44771),n=e(13822),k=e(24963),Q=e(37413),q=e(5251),ee=e(82346),d=e(87662),c=e(36146),r=e(85893);function Oe(h){var ie,se,Y,le,de,ue,oe,ce,X,a,z=new c.Uo("components.appDetail.appDetailContainer"),Ie=(0,s.useState)(""),he=U()(Ie,2),ge=he[0],Ee=he[1],Me=(0,ee.useAccess)(),pe=(0,s.useContext)(k.Z),_e=pe.message,me=(0,s.useRef)(),je=[],fe=[],Pe=[],Ce=(0,s.useState)(""),De=U()(Ce,2),Re=De[0],xe=De[1];return(0,s.useEffect)(function(){h.data&&((0,d.K3)().then(function(x){var i;xe((i=x.data.serverUrl)!==null&&i!==void 0?i:"")}),Ee(h.data.info.Name))},[h.data]),(0,s.useEffect)(function(){var x;(x=me.current)===null||x===void 0||x.setFieldValue("restart",{name:h.data.info.HostConfig.RestartPolicy.Name,maxAccept:h.data.info.HostConfig.RestartPolicy.MaximumRetryCount})},[me.current,h.data]),h.data&&h.data.domain&&h.data.domain.map(function(x){Pe.push(x.setting.enableSSL?"https://"+x.serverName:"http://"+x.serverName)}),h.data.info.NetworkSettings.Ports&&Object.entries(h.data.info.NetworkSettings.Ports).map(function(x){var i=U()(x,2),T=i[0],B=i[1],Z=T.split("/"),$=U()(Z,2),b=$[0],E=$[1];B.forEach(function(V){V.HostPort?je.push({PrivatePort:b,Type:E,IP:V.HostIp,PublicPort:V.HostPort}):fe.push({PrivatePort:b,Type:E,IP:"",PublicPort:""})})}),(0,r.jsxs)(r.Fragment,{children:[h.data&&h.data.info.State.Running&&(0,r.jsx)(Q.Z,{publicPort:je,privatePort:fe,domain:Pe,serverIp:Re,showInDetail:!0,ghost:h.ghost,layout:"inline"}),(0,r.jsx)(I.Z,{title:(0,r.jsx)(l.Z,{}),subTitle:z.format("cardTitle"),ghost:h.ghost,children:(0,r.jsxs)(u.Z,{column:1,bordered:!0,children:[(0,r.jsx)(u.Z.Item,{label:"Hostname",children:(0,r.jsx)(C.Z,{split:(0,r.jsx)(O.Z,{type:"vertical"}),children:(0,r.jsx)(_.Z,{title:(ie=h.data.info)===null||ie===void 0?void 0:ie.Config.Hostname})})}),(0,r.jsx)(u.Z.Item,{label:z.format("containerName"),children:(0,r.jsxs)(C.Z,{split:(0,r.jsx)(O.Z,{type:"vertical"}),children:[(0,r.jsx)(_.Z,{title:(se=h.data.info)===null||se===void 0?void 0:se.Id.substring(0,12)}),(0,r.jsx)(g.Z.Text,{copyable:!0,editable:{tooltip:z.format("containerNameEditTip"),onChange:function(){var x=p()(o()().mark(function T(B){var Z,$;return o()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if((Z=h.data.info)!==null&&Z!==void 0&&Z.Id){E.next=2;break}return E.abrupt("return");case 2:return E.next=4,(0,n.eE)({md5:h.data.info.Id,name:B});case 4:$=E.sent,Ee(B),_e.success(c.FD.format("finish"));case 7:case"end":return E.stop()}},T)}));function i(T){return x.apply(this,arguments)}return i}()},children:(0,q.fi)(ge,"/")})]})}),(0,r.jsx)(u.Z.Item,{label:(0,r.jsx)(t.Z,{title:z.format("network"),help:z.format("networkHelp")}),children:((Y=h.data.info)===null||Y===void 0?void 0:Y.State.Running)&&(0,r.jsxs)(u.Z,{column:1,bordered:!0,children:[h.data.info.NetworkSettings.Networks&&Object.keys(h.data.info.NetworkSettings.Networks).map(function(x,i){var T,B,Z;return(0,r.jsx)(u.Z.Item,{label:x,children:x=="host"?z.format("networkUseHost"):(0,r.jsxs)(C.Z,{direction:"vertical",children:[(0,r.jsx)(_.Z,{title:(T=h.data.info)===null||T===void 0?void 0:T.NetworkSettings.Networks[x].IPAddress}),(B=h.data.info)===null||B===void 0?void 0:B.NetworkSettings.Networks[x].Gateway,(Z=h.data.info)===null||Z===void 0?void 0:Z.NetworkSettings.Networks[x].MacAddress]})},i)}),h.data.info.HostConfig.ExtraHosts&&(0,r.jsx)(u.Z.Item,{label:z.format("networkExtra"),children:(0,r.jsx)(C.Z,{direction:"vertical",children:h.data.info.HostConfig.ExtraHosts.map(function(x,i){if(x.indexOf(":")>-1){var T=x.split(":");return"".concat(T[0]," - ").concat(T.slice(1).join(":"))}})})},"host")]})}),(0,r.jsx)(u.Z.Item,{label:z.format("runTime"),children:z.format("runTimeValue",{create:new Date((le=(de=h.data.info)===null||de===void 0?void 0:de.Created)!==null&&le!==void 0?le:"").toLocaleString(),upgrade:new Date((ue=(oe=h.data.info)===null||oe===void 0?void 0:oe.State.StartedAt)!==null&&ue!==void 0?ue:"").toLocaleString()})}),Me.canSeeContainerListManage&&(0,r.jsx)(u.Z.Item,{label:z.format("restartPolicy"),children:(0,r.jsx)(M.A,{name:"container-restart",submitter:!1,onValuesChange:function(){var x=p()(o()().mark(function i(T,B){var Z,$;return o()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if((Z=h.data.info)!==null&&Z!==void 0&&Z.Id){E.next=2;break}return E.abrupt("return");case 2:return E.next=4,(0,n.eE)({md5:h.data.info.Id,restart:B.restart});case 4:return $=E.sent,_e.success(c.FD.format("finish")),E.abrupt("return");case 7:case"end":return E.stop()}},i)}));return function(i,T){return x.apply(this,arguments)}}(),layout:"inline",formRef:me,children:(0,r.jsx)(N.Z,{ghost:!0,defaultValue:(ce=h.data.info)===null||ce===void 0?void 0:ce.HostConfig.RestartPolicy.Name})})}),(0,r.jsx)(u.Z.Item,{label:z.format("env"),children:(0,r.jsx)(R.Z,{dataSource:(X=(a=h.data.info)===null||a===void 0?void 0:a.Config.Env)!==null&&X!==void 0?X:[],renderItem:function(i){var T=i.split("=");return(0,r.jsxs)(R.Z.Item,{children:[(0,r.jsx)(g.Z.Text,{code:!0,children:T[0]})," = ",(0,r.jsx)(g.Z.Text,{copyable:!0,children:T.slice(1).join("=")})]})}})})]})})]})}},14245:function(w,W,e){e.d(W,{Z:function(){return C}});var K=e(5574),o=e.n(K),L=e(3393),p=e(36146),j=e(60433),U=e(38345),l=e(26412),I=e(25593),M=e(67294),u=e(85893);function C(O){var g=new p.Uo("components.appDetail.appDetailQuickImage"),R=(0,M.useState)(),s=o()(R,2),_=s[0],t=s[1];return(0,M.useEffect)(function(){(0,L.YU)({md5:O.data.Image}).then(function(N){t(N.data)})},[O.data]),(0,u.jsx)(U.Z,{ghost:O.ghost,title:(0,u.jsx)(j.Z,{}),subTitle:g.format("cardTitle"),children:(0,u.jsxs)(l.Z,{styles:{label:{width:200}},column:1,bordered:!0,children:[(0,u.jsx)(l.Z.Item,{label:"Image Tag",children:(0,u.jsx)(I.Z.Text,{copyable:!0,children:O.data.Config.Image})}),(0,u.jsx)(l.Z.Item,{label:"Image",children:O.data.Image}),(0,u.jsx)(l.Z.Item,{label:"CMD",children:(_==null?void 0:_.info.Config.Cmd)&&(_==null?void 0:_.info.Config.Cmd.join(" "))}),(0,u.jsx)(l.Z.Item,{label:"ENTRYPOINT",children:_==null?void 0:_.info.Config.Entrypoint}),(0,u.jsx)(l.Z.Item,{label:"Labels",children:(0,u.jsx)(l.Z,{column:1,bordered:!0,children:(_==null?void 0:_.info.Config.Labels)&&Object.entries(_==null?void 0:_.info.Config.Labels).map(function(N){var n=o()(N,2),k=n[0],Q=n[1];return(0,u.jsx)(l.Z.Item,{label:k,children:Q},k)})})})]})})}},53399:function(w,W,e){e.d(W,{Z:function(){return x}});var K=e(15009),o=e.n(K),L=e(99289),p=e.n(L),j=e(5574),U=e.n(j),l=e(67294),I=e(80821),M=e(62597),u=e(13822),C=e(43425),O=e(58638),g=e(60219),R=e(86548),s=e(57132),_=e(87784),t=e(25035),N=e(38345),n=e(97269),k=e(62370),Q=e(5966),q=e(52688),ee=e(82346),d=e(42075),c=e(25278),r=e(96074),Oe=e(83622),h=e(25593),ie=e(85418),se=e(40411),Y=e(84567),le=e(83062),de=e(93162),ue=e(24739),oe=e(97462),ce=e(70146),X=e(36146),a=e(85893);function z(i){var T=(0,l.useRef)(),B=new X.Uo("components.appDetail");return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(I.Z,{icon:(0,a.jsx)(g.Z,{}),action:p()(o()().mark(function Z(){var $,b,E,V;return o()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,(0,ce.yB)({id:i.container.Name,enableImage:($=T.current)===null||$===void 0?void 0:$.getFieldValue("enableImage"),volume:Object.keys((b=(E=T.current)===null||E===void 0?void 0:E.getFieldValue("volume"))!==null&&b!==void 0?b:{}).filter(function(ve){return ve}),enableCommitImage:(V=T.current)===null||V===void 0?void 0:V.getFieldValue("enableCommitImage")});case 2:case"end":return ae.stop()}},Z)})),confirmOnOpenChange:function($){var b,E;!((b=T.current)===null||b===void 0)&&b.resetFields&&((E=T.current)===null||E===void 0||E.resetFields())},confirm:(0,a.jsxs)(d.Z,{style:{width:650,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,a.jsx)(h.Z.Text,{children:(0,a.jsx)("ul",{children:B.prefix("backupVolumeTip",4).map(function(Z,$){return(0,a.jsxs)("li",{children:[Z," ",$==3&&(0,a.jsx)(ee.Link,{to:"/app/backup",children:X.Ob.format("container.backup")})]},$)})})}),(0,a.jsxs)(n.A,{layout:"horizontal",formRef:T,submitter:!1,children:[(0,a.jsxs)(ue.UW,{children:[(0,a.jsx)(k.Z,{valuePropName:"checked",name:"enableSelectVolume",children:(0,a.jsx)(Y.Z,{disabled:!i.container.Mounts||i.container.Mounts.length==0,children:B.format("backupVolumeEnableSelectVolume")})}),(0,a.jsx)(k.Z,{valuePropName:"checked",name:"enableImage",children:(0,a.jsx)(Y.Z,{children:B.format("backupVolumeEnableImage")})}),(0,a.jsx)(oe.Z,{name:["enableImage"],children:function($){var b=$.enableImage;if(b)return(0,a.jsx)(k.Z,{valuePropName:"checked",name:"enableCommitImage",children:(0,a.jsx)(Y.Z,{children:B.format("backupVolumeEnableCommitImage")})})}})]}),(0,a.jsx)(oe.Z,{name:["enableSelectVolume"],children:function($){var b=$.enableSelectVolume;return b&&(0,a.jsx)(d.Z,{wrap:!0,children:i.container.Mounts&&i.container.Mounts.map(function(E,V){return(0,a.jsx)(k.Z,{valuePropName:"checked",name:["volume",E.Destination],children:(0,a.jsx)(Y.Z,{children:E.Destination})},"volume-".concat(V))})})}})]})]}),children:B.format("backupVolumeButton")})})}var Ie=e(24963),he=e(99861),ge=e(3393),Ee=e(50888),Me=e(16596),pe=e(1699),_e=e(5251),me=e(29453),je=e(71965),fe=e(77446),Pe=e(86615),Ce=e(40056),De=e(89240);function Re(i){var T=(0,ee.useAccess)(),B=(0,l.useState)(),Z=U()(B,2),$=Z[0],b=Z[1],E=(0,l.useRef)(),V=new X.Uo("components.appDetail.appDetailQuickManage");return(0,l.useEffect)(function(){T.canSeeEnableCe||(0,fe.V)({siteName:(0,De.HJ)(i.detail.Name)}).then(function(te){b(te.data.list)})},[i.detail]),(0,a.jsx)(pe.u,{access:["canSeeEnableCe"],showProTips:!0,children:function(ae){var ve=ae.canSeeEnableCe;return(0,a.jsx)(I.Z,{showDivider:!0,action:function(){var H;return(0,fe.v)({id:(H=E.current)===null||H===void 0?void 0:H.getFieldValue("id"),enableForce:!0})},icon:(0,a.jsx)(je.Z,{}),disabled:ve,onSuccess:function(){var H;(H=E.current)===null||H===void 0||H.resetFields(),i.onFinish&&i.onFinish()},confirmOnOpenChange:function(){var H;!((H=E.current)===null||H===void 0)&&H.resetFields&&E.current.resetFields()},confirm:(0,a.jsx)(n.A,{formRef:E,submitter:!1,children:(0,a.jsxs)(d.Z,{direction:"vertical",style:{width:500},size:[0,15],children:[(0,a.jsx)(h.Z.Text,{children:V.format("rollbackTip")}),$&&$.length>0?(0,a.jsx)(Pe.Z.Group,{fieldProps:{style:{display:"flex",flexDirection:"column",gap:8}},name:"id",label:"",options:$&&$.map(function(ne){return{label:"id: ".concat(ne.id," ").concat(X.FD.format("listDeletedAt"),": ").concat((0,_e.NF)(ne.deletedAt)),value:ne.id}})}):(0,a.jsx)(Ce.Z,{message:V.format("rollbackEmptyTip"),style:{marginBottom:10}})]})}),children:X.FD.format("listManageRollback")})}})}var xe=(0,l.forwardRef)(function(i,T){var B;(0,l.useImperativeHandle)(T,function(){return{}});var Z=(0,l.useRef)(),$=(0,l.useRef)(),b=(0,l.useRef)(),E=(0,l.useContext)(Ie.Z),V=E.loading,te=(0,l.useRef)(),ae=(0,l.useRef)(),ve=(0,l.useState)({status:0,error:""}),ne=U()(ve,2),H=ne[0],re=ne[1],A=new X.Uo("components.appDetail.appDetailQuickManage");function Ze(y){return Te.apply(this,arguments)}function Te(){return Te=p()(o()().mark(function y(m){var f,D,v;return o()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(D=-2,!m.ignore){P.next=6;break}if(!(m.ignore.indexOf("".concat(m.info.Name,"@*"))>-1)){P.next=4;break}return P.abrupt("return",{status:-2,error:""});case 4:if(!(m.ignore.indexOf("".concat(m.info.Name,"@").concat(m.info.Image))>-1)){P.next=6;break}return P.abrupt("return",{status:-2,error:""});case 6:return P.next=8,(0,ge.ZQ)({tag:(f=m.info.Config.Image)!==null&&f!==void 0?f:"",md5:m.info.Image,cacheTime:3600}).catch(function(F){D=-1});case 8:if(v=P.sent,!(v&&v.data.error&&v.data.error!="")){P.next=11;break}return P.abrupt("return",{status:-1,error:v.data.error});case 11:return v&&(v.data.digestLocal&&v.data.digestLocal.length>0?D=v.data.upgrade?1:2:v.data.error&&v.data.error!=""?D=-1:D=-2),P.abrupt("return",{status:D,error:""});case 13:case"end":return P.stop()}},y)})),Te.apply(this,arguments)}return(0,l.useEffect)(function(){i.checkContainerUpgrade&&(re({status:0}),Ze(i.data).then(function(y){re(y)}))},[i.data]),(0,a.jsx)(N.Z,{ghost:i.ghost,title:(0,a.jsx)(C.Z,{}),subTitle:A.format("cardTitle"),children:(0,a.jsxs)(d.Z,{wrap:!0,children:[(0,a.jsx)(I.Z,{icon:(0,a.jsx)(O.Z,{}),action:function(){var m,f;return(0,u.LJ)({md5:(m=(f=i.data)===null||f===void 0?void 0:f.info.Id)!==null&&m!==void 0?m:""})},confirm:A.format("exportConfirm"),onSuccess:function(m){var f,D=new Blob([m],{type:"application/tar"});(0,de.saveAs)(D,(0,_e.fi)((f=i.data)===null||f===void 0?void 0:f.info.Name,"/")+".tar")},children:A.format("exportButton")}),(0,a.jsx)(I.Z,{icon:(0,a.jsx)(g.Z,{}),action:p()(o()().mark(function y(){var m,f,D,v,S;return o()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,u.Re)({md5:(m=(f=i.data)===null||f===void 0?void 0:f.info.Id)!==null&&m!==void 0?m:"",name:(D=(v=$.current)===null||v===void 0?void 0:v.getFieldValue("saveImageName"))!==null&&D!==void 0?D:(S=i.data)===null||S===void 0?void 0:S.info.Name});case 2:case"end":return F.stop()}},y)})),confirmTitle:A.format("commitConfirmTitle"),confirm:(0,a.jsx)(d.Z,{style:{width:400,marginTop:"10px",paddingRight:"10px"},direction:"vertical",children:(0,a.jsx)(n.A,{formRef:$,submitter:!1,children:(0,a.jsx)(k.Z,{name:"saveImageName",children:(0,a.jsx)(c.Z,{addonBefore:A.format("commitConfirmSaveImageName")})})})}),children:A.format("commitButton")}),i.data&&(0,a.jsx)(pe.u,{access:"canSeeContainerBackup",children:(0,a.jsx)(z,{container:i.data.info})}),(0,a.jsx)(r.Z,{type:"vertical"}),(0,a.jsx)(ee.Link,{to:"/app/create/image?id=".concat((B=i.data)===null||B===void 0?void 0:B.info.Id,"&op=update"),children:(0,a.jsx)(Oe.ZP,{type:"primary",icon:(0,a.jsx)(R.Z,{}),children:A.format("editButton")})}),(0,a.jsx)(I.Z,{icon:(0,a.jsx)(s.Z,{}),action:p()(o()().mark(function y(){var m,f,D,v,S,P;return o()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,(0,u.aF)({md5:(m=(f=i.data)===null||f===void 0?void 0:f.info.Id)!==null&&m!==void 0?m:"",copyName:(D=(v=b.current)===null||v===void 0?void 0:v.getFieldValue("copyName"))!==null&&D!==void 0?D:"",enableRandomPort:(S=(P=b.current)===null||P===void 0?void 0:P.getFieldValue("enableRandomPort"))!==null&&S!==void 0?S:!1});case 2:return G.abrupt("return",G.sent);case 3:case"end":return G.stop()}},y)})),confirm:(0,a.jsxs)(d.Z,{style:{width:400,paddingRight:"10px"},direction:"vertical",children:[(0,a.jsx)(h.Z.Text,{children:A.format("copyConfirmTip")}),(0,a.jsxs)(n.A,{formRef:b,submitter:!1,layout:"horizontal",children:[(0,a.jsx)("br",{}),(0,a.jsx)(Q.Z,{label:A.format("copyCopyName"),name:"copyName"}),(0,a.jsx)(q.Z,{label:A.format("copyEnableRandomPort"),name:"enableRandomPort"})]})]}),onSuccess:function(m){var f;(f=b.current)===null||f===void 0||f.resetFields()},children:A.format("copyButton")}),(0,a.jsx)(Re,{detail:i.data.info,onFinish:function(){V.destroy(),i.checkContainerUpgrade&&i.checkContainerUpgrade()}}),i.data&&(0,a.jsxs)(a.Fragment,{children:[i.data.info.Config.Image&&(0,a.jsx)(he.Z,{image:[i.data.info.Config.Image],ref:te}),(0,a.jsx)(ie.Z,{placement:"bottomLeft",menu:{items:[{key:"1",label:(0,a.jsx)(I.Z,{action:p()(o()().mark(function y(){var m,f,D,v,S,P;return o()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,(0,M.ze)({md5:(m=(f=i.data.info)===null||f===void 0?void 0:f.Name)!==null&&m!==void 0?m:"",imageId:""});case 2:return re({status:0}),G.next=5,(0,ge.ZQ)({tag:(D=(v=i.data.info)===null||v===void 0?void 0:v.Config.Image)!==null&&D!==void 0?D:"",md5:(S=(P=i.data.info)===null||P===void 0?void 0:P.Image)!==null&&S!==void 0?S:"",cacheTime:0}).then(function(J){J.data.error&&J.data.error!=""?re({status:-1,error:J.data.error}):J.data.digestLocal&&J.data.digestLocal.length>0?re({status:J.data.upgrade?1:2}):re({status:-2})}).catch(function(J){re({status:-1})});case 5:return G.abrupt("return",G.sent);case 6:case"end":return G.stop()}},y)})),type:"link",children:A.format("upgradeCheckUpgrade")})},{key:"2",label:(0,a.jsx)(I.Z,{action:p()(o()().mark(function y(){var m,f,D,v;return o()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,M.ze)({md5:(m=(f=i.data.info)===null||f===void 0?void 0:f.Name)!==null&&m!==void 0?m:"",imageId:(D=(v=i.data.info)===null||v===void 0?void 0:v.Image)!==null&&D!==void 0?D:""});case 2:return P.abrupt("return",P.sent);case 3:case"end":return P.stop()}},y)})),type:"link",children:A.format("upgradeCheckUpgradeIgnoreOnce")})},{key:"3",label:(0,a.jsx)(I.Z,{action:p()(o()().mark(function y(){var m,f;return o()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,M.ze)({md5:(m=(f=i.data.info)===null||f===void 0?void 0:f.Name)!==null&&m!==void 0?m:"",imageId:"*"});case 2:return v.abrupt("return",v.sent);case 3:case"end":return v.stop()}},y)})),type:"link",children:A.format("upgradeCheckUpgradeIgnore")})}]},children:(0,a.jsx)(se.Z,{title:H.error,count:A.format("checkImageUpgrade."+H.status),color:A.format("checkImageUpgradeColor."+H.status),children:(0,a.jsx)(I.Z,{disabled:H.status===0,icon:H.status===0?(0,a.jsx)(Ee.Z,{}):(0,a.jsx)(Me.Z,{}),action:p()(o()().mark(function y(){var m,f,D,v,S;return o()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(m=te.current)===null||m===void 0?void 0:m.start();case 2:return V.show(),(f=te.current)===null||f===void 0||f.finish(),F.next=6,(0,u.RF)({md5:(D=i.data.info.Id)!==null&&D!==void 0?D:"",imageTag:"",enableBak:(v=(S=ae.current)===null||S===void 0?void 0:S.getFieldValue("enableBak"))!==null&&v!==void 0?v:!1});case 6:return F.abrupt("return",F.sent);case 7:case"end":return F.stop()}},y)})),confirm:(0,a.jsxs)(d.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,a.jsx)(h.Z.Text,{children:A.format("upgradeConfirm")}),(0,a.jsx)(n.A,{formRef:ae,submitter:!1,layout:"inline",children:(0,a.jsx)(k.Z,{name:"enableBak",valuePropName:"checked",children:(0,a.jsx)(Y.Z,{children:A.format("upgradeConfirmEnableBak")})})})]}),onSuccess:function(m){V.destroy(),i.checkContainerUpgrade&&i.checkContainerUpgrade()},children:A.format("upgradeButton")})})})]}),(0,a.jsx)(r.Z,{type:"vertical"}),i.data&&(0,a.jsx)(I.Z,{action:p()(o()().mark(function y(){var m,f,D,v,S,P,F;return o()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,(0,M.Ct)({md5:(m=(f=i.data)===null||f===void 0?void 0:f.info.Id)!==null&&m!==void 0?m:"",deleteImage:(D=(v=Z.current)===null||v===void 0?void 0:v.getFieldValue("deleteImage"))!==null&&D!==void 0?D:!1,deleteVolume:(S=(P=Z.current)===null||P===void 0?void 0:P.getFieldValue("deleteVolume"))!==null&&S!==void 0?S:!1});case 2:return J.abrupt("return",(0,me.rn)({name:(F=i.data)===null||F===void 0?void 0:F.info.Name}));case 3:case"end":return J.stop()}},y)})),danger:!0,type:"primary",icon:(0,a.jsx)(_.Z,{}),onSuccess:function(){V.destroy(),i.checkContainerUpgrade&&i.checkContainerUpgrade()},confirm:(0,a.jsxs)(d.Z,{style:{width:200},direction:"vertical",children:[(0,a.jsx)(h.Z.Text,{children:X.FD.format("confirm.title")}),(0,a.jsxs)(n.A,{formRef:Z,layout:"inline",submitter:!1,children:[(0,a.jsx)(k.Z,{addonAfter:(0,a.jsx)(le.Z,{title:A.format("deleteConfirmTip"),children:(0,a.jsx)(t.Z,{})}),name:"deleteVolume",valuePropName:"checked",children:(0,a.jsx)(Y.Z,{children:A.format("deleteConfirmDeleteVolume")})}),(0,a.jsx)(k.Z,{name:"deleteImage",valuePropName:"checked",children:(0,a.jsx)(Y.Z,{children:A.format("deleteConfirmDeleteImage")})})]})]}),children:A.format("deleteButton")})]})})}),x=xe},14189:function(w,W,e){var K=e(43425),o=e(74842),L=e(87784),p=e(33160),j=e(30159),U=e(89035),l=e(38345),I=e(42075),M=e(96074),u=e(83622),C=e(67294),O=e(94359),g=e(80821),R=e(13822),s=e(99922),_=e(36146),t=e(85893),N=(0,C.forwardRef)(function(n,k){(0,C.useImperativeHandle)(k,function(){return{showConsole:ee}});var Q=new _.Uo("components.appDetail.appDetailQuickOperation"),q=(0,C.useRef)();function ee(d){var c;(c=q.current)===null||c===void 0||c.show({url:"/console/container/".concat(n.data.Id),title:n.data.Name,workDir:d})}return(0,t.jsx)(l.Z,{title:(0,t.jsx)(K.Z,{}),ghost:n.ghost,subTitle:(0,t.jsxs)(I.Z,{children:[Q.format("cardTitle")," - ",n.data&&(0,t.jsx)(O.Z,{status:"container.".concat(n.data.State.Status),tip:n.data.State.Status})]}),children:(0,t.jsxs)(I.Z,{wrap:!0,children:[(0,t.jsx)(g.Z,{icon:(0,t.jsx)(o.Z,{}),action:function(){var c,r;return(0,R.IW)({md5:(c=(r=n.data)===null||r===void 0?void 0:r.Id)!==null&&c!==void 0?c:"",operate:"start"})},onSuccess:function(){return n.onFinish&&n.onFinish()},disabled:n.data&&n.data.State.Running||n.data&&n.data.State.Paused,children:Q.format("start")}),(0,t.jsx)(g.Z,{action:function(){var c,r;return(0,R.IW)({md5:(c=(r=n.data)===null||r===void 0?void 0:r.Id)!==null&&c!==void 0?c:"",operate:"stop"})},icon:(0,t.jsx)(L.Z,{}),onSuccess:function(){return n.onFinish&&n.onFinish()},disabled:n.data&&n.data.State.Dead,children:Q.format("stop")}),(0,t.jsx)(g.Z,{action:function(){var c,r;return(0,R.IW)({md5:(c=(r=n.data)===null||r===void 0?void 0:r.Id)!==null&&c!==void 0?c:"",operate:"restart"})},onSuccess:function(){return n.onFinish&&n.onFinish()},icon:(0,t.jsx)(p.Z,{}),children:Q.format("restart")}),(0,t.jsx)(g.Z,{action:function(){var c,r;return(0,R.IW)({md5:(c=(r=n.data)===null||r===void 0?void 0:r.Id)!==null&&c!==void 0?c:"",operate:"pause"})},onSuccess:function(){return n.onFinish&&n.onFinish()},icon:(0,t.jsx)(j.Z,{}),disabled:n.data&&n.data&&!n.data.State.Running,children:Q.format("pause")}),(0,t.jsx)(g.Z,{action:function(){var c,r;return(0,R.IW)({md5:(c=(r=n.data)===null||r===void 0?void 0:r.Id)!==null&&c!==void 0?c:"",operate:"unpause"})},onSuccess:function(){return n.onFinish&&n.onFinish()},icon:(0,t.jsx)(o.Z,{}),disabled:n.data&&!n.data.State.Paused,children:Q.format("unpause")}),(0,t.jsx)(M.Z,{type:"vertical"}),n.data&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Z,{showFileExplorer:!0,ref:q}),(0,t.jsx)(u.ZP,{type:"dashed",onClick:function(){n.data&&ee(n.data.Config.WorkingDir)},icon:(0,t.jsx)(U.Z,{}),children:"Console"})]}),(0,t.jsx)(M.Z,{type:"vertical"}),n.extra&&n.extra.map(function(d,c){return(0,t.jsx)("span",{children:d},c)})]})})});W.Z=N},52031:function(w,W,e){e.d(W,{Z:function(){return U}});var K=e(31574),o=e(38345),L=e(26412),p=e(36146),j=e(85893);function U(l){var I,M=new p.Uo("components.appDetail.appDetailVolume");return l.data&&l.data.Mounts&&l.data.Mounts.length>0&&(0,j.jsx)(o.Z,{ghost:l.ghost,title:(0,j.jsx)(K.Z,{}),subTitle:M.format("cardTitle"),children:(0,j.jsx)(L.Z,{column:1,bordered:!0,children:(I=l.data)===null||I===void 0?void 0:I.Mounts.map(function(u,C){return(0,j.jsx)(L.Z.Item,{styles:{label:{width:"50%",wordBreak:"break-word"},content:{width:"50%",wordBreak:"break-word"}},label:u.Type=="volume"?u.Name:u.Source,children:u.Destination},C)})})})}},94359:function(w,W,e){e.d(W,{Z:function(){return _}});var K=e(5574),o=e.n(K),L=e(3089),p=e(98165),j=e(18429),U=e(8751),l=e(66212),I=e(14313),M=e(30159),u=e(87740),C=e(50888),O=e(66309),g=e(83062),R=e(36146),s=e(85893);function _(t){var N,n,k=new R.Uo("components.containerStatus"),Q=t.status.split("."),q=o()(Q,2),ee=q[0],d=q[1],c="";c=k.format(t.status,(N=t.statusValue)!==null&&N!==void 0?N:{});var r=(0,s.jsx)(s.Fragment,{});return d=="0"&&(r=(0,s.jsx)(O.Z,{icon:(0,s.jsx)(L.Z,{}),color:"default",children:c})),d=="10"&&(r=(0,s.jsx)(O.Z,{icon:(0,s.jsx)(p.Z,{spin:!0}),color:"processing",children:c})),d=="20"&&(r=(0,s.jsx)(O.Z,{icon:(0,s.jsx)(j.Z,{}),color:"error",children:c})),d=="30"&&(r=(0,s.jsx)(O.Z,{icon:(0,s.jsx)(U.Z,{}),color:"success",children:c})),d=="new"&&(r=(0,s.jsx)(O.Z,{icon:(0,s.jsx)(l.Z,{}),children:c})),(d=="running"||d=="healthy"||d=="active"||d=="ready")&&(r=(0,s.jsx)(O.Z,{icon:(0,s.jsx)(I.Z,{}),color:"success",children:c})),(d=="paused"||d=="pause"||d=="rollback_paused")&&(r=(0,s.jsx)(O.Z,{icon:(0,s.jsx)(M.Z,{}),children:c})),(d=="waiting"||d=="starting"||d=="accepted")&&(r=(0,s.jsx)(O.Z,{icon:(0,s.jsx)(u.Z,{}),children:c})),["deploying","pending","allocated","accepted","assigned","preparing","updating","rollback_started"].includes(d)&&(r=(0,s.jsx)(O.Z,{icon:(0,s.jsx)(C.Z,{}),color:"processing",children:c})),(d=="error"||d=="down"||d=="failed")&&(r=(0,s.jsx)(O.Z,{icon:(0,s.jsx)(j.Z,{}),color:"error",children:c})),["complete","completed","rollback_completed"].includes(d)&&(r=(0,s.jsx)(O.Z,{icon:(0,s.jsx)(U.Z,{}),color:"success",children:c})),["exited","dead","removing","restarting","unhealthy","created","drain","unreachable","shutdown","rejected","remove","orphaned"].includes(d)&&(r=(0,s.jsx)(O.Z,{icon:(0,s.jsx)(j.Z,{}),color:"warning",children:c})),(0,s.jsx)(g.Z,{placement:"top",title:(n=t.tip)!==null&&n!==void 0?n:"",children:r})}},76428:function(w,W,e){e.d(W,{Z:function(){return p}});var K=e(25593),o=e(67294),L=e(85893);function p(j){return(0,L.jsx)(K.Z.Text,{copyable:!0,children:j.title})}},78498:function(w,W,e){e.d(W,{Z:function(){return U}});var K=e(25035),o=e(42075),L=e(83062),p=e(67294),j=e(85893);function U(l){return(0,j.jsxs)(o.Z,{children:[l.title,(0,j.jsx)(L.Z,{title:l.help,children:(0,j.jsx)(K.Z,{})})]})}},70146:function(w,W,e){e.d(W,{SR:function(){return O},VE:function(){return u},Zy:function(){return I},iD:function(){return R},yB:function(){return U}});var K=e(15009),o=e.n(K),L=e(99289),p=e.n(L),j=e(82346);function U(_){return l.apply(this,arguments)}function l(){return l=p()(o()().mark(function _(t){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,j.request)("/api/app/container-backup/create",{data:t,method:"POST"});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},_)})),l.apply(this,arguments)}function I(_){return M.apply(this,arguments)}function M(){return M=p()(o()().mark(function _(t){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,j.request)("/api/app/container-backup/get-list",{method:"POST",data:t}));case 1:case"end":return n.stop()}},_)})),M.apply(this,arguments)}function u(_){return C.apply(this,arguments)}function C(){return C=p()(o()().mark(function _(t){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,j.request)("/api/app/container-backup/delete",{method:"POST",data:t}));case 1:case"end":return n.stop()}},_)})),C.apply(this,arguments)}function O(_){return g.apply(this,arguments)}function g(){return g=p()(o()().mark(function _(t){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,j.request)("/api/app/container-backup/restore",{method:"POST",data:t}));case 1:case"end":return n.stop()}},_)})),g.apply(this,arguments)}function R(_){return s.apply(this,arguments)}function s(){return s=p()(o()().mark(function _(t){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,j.request)("/api/app/container-backup/get-detail",{method:"POST",data:t}));case 1:case"end":return n.stop()}},_)})),s.apply(this,arguments)}},29453:function(w,W,e){e.d(W,{A9:function(){return U},R3:function(){return O},e1:function(){return I},rn:function(){return u}});var K=e(15009),o=e.n(K),L=e(99289),p=e.n(L),j=e(82346);function U(R){return l.apply(this,arguments)}function l(){return l=p()(o()().mark(function R(s){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,j.request)("/api/common/tag/create",{method:"POST",data:s});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},R)})),l.apply(this,arguments)}function I(R){return M.apply(this,arguments)}function M(){return M=p()(o()().mark(function R(s){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,j.request)("/api/common/tag/get-list",{method:"POST",data:s});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},R)})),M.apply(this,arguments)}function u(R){return C.apply(this,arguments)}function C(){return C=p()(o()().mark(function R(s){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,j.request)("/api/common/tag/delete",{method:"POST",data:s});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},R)})),C.apply(this,arguments)}function O(R){return g.apply(this,arguments)}function g(){return g=p()(o()().mark(function R(s){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,j.request)("/api/pro/tag/get-url-detail",{method:"POST",data:s});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},R)})),g.apply(this,arguments)}},77446:function(w,W,e){e.d(W,{V:function(){return U},v:function(){return I}});var K=e(15009),o=e.n(K),L=e(99289),p=e.n(L),j=e(82346);function U(u){return l.apply(this,arguments)}function l(){return l=p()(o()().mark(function u(C){return o()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,j.request)("/api/pro/container-rollback/get-list",{data:C,method:"POST"});case 2:return g.abrupt("return",g.sent);case 3:case"end":return g.stop()}},u)})),l.apply(this,arguments)}function I(u){return M.apply(this,arguments)}function M(){return M=p()(o()().mark(function u(C){return o()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,j.request)("/api/pro/container-rollback/restore",{data:C,method:"POST"});case 2:return g.abrupt("return",g.sent);case 3:case"end":return g.stop()}},u)})),M.apply(this,arguments)}}}]);
