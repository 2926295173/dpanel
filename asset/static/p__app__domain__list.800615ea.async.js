"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7750],{58638:function(ve,F,e){e.d(F,{Z:function(){return P}});var i=e(87462),l=e(67294),$={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},s=$,B=e(84089),g=function(N,D){return l.createElement(B.Z,(0,i.Z)({},N,{ref:D,icon:s}))},I=l.forwardRef(g),P=I},35995:function(ve,F,e){e.d(F,{Z:function(){return P}});var i=e(87462),l=e(67294),$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M508 624a112 112 0 00112-112c0-3.28-.15-6.53-.43-9.74L498.26 623.57c3.21.28 6.45.43 9.74.43zm370.72-458.44L836 122.88a8 8 0 00-11.31 0L715.37 232.23Q624.91 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.7 119.43 136.55 191.45L112.56 835a8 8 0 000 11.31L155.25 889a8 8 0 0011.31 0l712.16-712.12a8 8 0 000-11.32zM332 512a176 176 0 01258.88-155.28l-48.62 48.62a112.08 112.08 0 00-140.92 140.92l-48.62 48.62A175.09 175.09 0 01332 512z"}},{tag:"path",attrs:{d:"M942.2 486.2Q889.4 375 816.51 304.85L672.37 449A176.08 176.08 0 01445 676.37L322.74 798.63Q407.82 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5z"}}]},name:"eye-invisible",theme:"filled"},s=$,B=e(84089),g=function(N,D){return l.createElement(B.Z,(0,i.Z)({},N,{ref:D,icon:s}))},I=l.forwardRef(g),P=I},36693:function(ve,F,e){var i=e(87462),l=e(67294),$=e(80111),s=e(84089),B=function(P,W){return l.createElement(s.Z,(0,i.Z)({},P,{ref:W,icon:$.Z}))},g=l.forwardRef(B);F.Z=g},64789:function(ve,F,e){e.d(F,{Z:function(){return P}});var i=e(87462),l=e(67294),$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},s=$,B=e(84089),g=function(N,D){return l.createElement(B.Z,(0,i.Z)({},N,{ref:D,icon:s}))},I=l.forwardRef(g),P=I},85577:function(ve,F,e){var i=e(87462),l=e(67294),$=e(11721),s=e(84089),B=function(P,W){return l.createElement(s.Z,(0,i.Z)({},P,{ref:W,icon:$.Z}))},g=l.forwardRef(B);F.Z=g},31199:function(ve,F,e){var i=e(1413),l=e(45987),$=e(67294),s=e(40284),B=e(85893),g=["fieldProps","min","proFieldProps","max"],I=function(N,D){var ae=N.fieldProps,m=N.min,oe=N.proFieldProps,d=N.max,de=(0,l.Z)(N,g);return(0,B.jsx)(s.Z,(0,i.Z)({valueType:"digit",fieldProps:(0,i.Z)({min:m,max:d},ae),ref:D,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:oe},de))},P=$.forwardRef(I);F.Z=P},92067:function(ve,F,e){e.d(F,{Z:function(){return de}});var i=e(15009),l=e.n(i),$=e(99289),s=e.n($),B=e(13822),g=e(64789),I=e(9773),P=e(42075),W=e(83062),N=e(83622),D=e(37413),ae=e(5251),m=e(36146),oe=e(67255),d=e(85893);function de(U){return(0,d.jsx)(I.Z,{columns:[{title:m.FD.format("listContainerName"),dataIndex:"name",render:function(O,T,ee,C){return(0,d.jsx)(P.Z,{direction:"vertical",style:{textAlign:"left"},children:T==null?void 0:T.Names.map(function(Z){return(0,ae.fi)(Z,"/")})},T.Id)}},{title:m.FD.format("listPort"),dataIndex:"ports",search:!1,render:function(O,T,ee,C){var Z=[],Q=[];return T!=null&&T.Ports&&T.Ports.map(function(w,p){w.PublicPort?Z.push(w):Q.push(w)}),(0,d.jsx)(D.Z,{publicPort:Z,privatePort:Q,domain:[]})}},{title:m.FD.format("listManage"),valueType:"option",key:"option",ellipsis:!0,width:100,render:function(O,T,ee,C){return[(0,d.jsx)(W.Z,{title:m.FD.format("listManageUse"),children:(0,d.jsx)(N.ZP,{type:"link",onClick:s()(l()().mark(function Z(){var Q;return l()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,B.jV)({md5:T.Id});case 2:Q=p.sent,U.onSelect&&U.onSelect(Q.data.info);case 4:case"end":return p.stop()}},Z)})),children:(0,d.jsx)(g.Z,{})},T.Id)},T.Id)]}}],rowKey:"Id",request:function(){var k=s()(l()().mark(function O(T,ee,C){var Z;return l()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,(0,B.IE)({siteTitle:T.name});case 2:return Z=w.sent,w.abrupt("return",{data:Z.data.list,success:!0,total:Z.data.list.length});case 4:case"end":return w.stop()}},O)}));return function(O,T,ee){return k.apply(this,arguments)}}(),pagination:(0,oe.Oh)()})}},37413:function(ve,F,e){e.d(F,{Z:function(){return oe}});var i=e(19632),l=e.n(i),$=e(36146),s=e(85577),B=e(58638),g=e(36693),I=e(35995),P=e(99611),W=e(38345),N=e(42075),D=e(66309),ae=e(55241),m=e(85893);function oe(d){var de,U=new $.Uo("components.containerPort"),k=[];d.publicPort&&(k=l()(d.publicPort)),d.privatePort&&(k=[].concat(l()(k),l()(d.privatePort)));var O=(de=d.serverIp)!==null&&de!==void 0?de:"localhost";if(O!=""&&O.indexOf("http")===-1&&O.indexOf(":")>-1&&(O="[".concat(O,"]")),O==""||O=="127.0.0.1"){var T=document.location.protocol+"//"+document.location.hostname;O=T}var ee=(0,m.jsxs)(W.Z,{direction:d.layout=="inline"?"row":"column",style:{width:d.layout!="inline"?600:"auto"},ghost:!0,children:[k.length>0&&(0,m.jsx)(W.Z,{title:(0,m.jsx)(s.Z,{}),subTitle:U.format("cardPortTitle"),ghost:d.ghost,bodyStyle:{maxHeight:300,overflow:"auto",margin:"10px 0"},children:k.map(function(C,Z){var Q;return O==""&&C.IP&&(O=C.IP),(0,m.jsx)(N.Z,{size:"large",wrap:!0,children:(0,m.jsx)(D.Z,{color:C.PublicPort?"blue":"yellow",icon:C.PublicPort?(0,m.jsx)(B.Z,{}):"",style:{marginBottom:10,marginRight:15},children:C.PublicPort?(0,m.jsx)("a",{href:"".concat(O.indexOf("http")===0?O:"http://"+O,":").concat(C.PublicPort),target:"_blank",children:"".concat(C.PublicPort?((Q=C.IP)!==null&&Q!==void 0?Q:"0.0.0.0")+":"+C.PublicPort+" -> ":"").concat(C.PrivatePort,"/").concat(C.Type)},"link".concat(Z)):"".concat(C.PrivatePort,"/").concat(C.Type)})},"space".concat(Z))})}),d.domain&&d.domain.length>0&&(0,m.jsx)(W.Z,{title:(0,m.jsx)(g.Z,{}),subTitle:U.format("cardDomainTitle"),ghost:d.ghost,children:(0,m.jsx)(N.Z,{wrap:!0,style:{textAlign:"left"},children:d.domain&&d.domain.map(function(C,Z){return(0,m.jsx)(D.Z,{color:"blue",icon:(0,m.jsx)(B.Z,{}),children:(0,m.jsx)("a",{href:C,target:"_blank",children:C})},"domain".concat(Z))})})})]});return d.showInDetail?ee:(0,m.jsx)(ae.Z,{placement:"right",content:ee,children:(0,m.jsxs)(N.Z,{direction:"vertical",children:[d.privatePort&&d.privatePort.length>0&&(0,m.jsxs)(D.Z,{color:"yellow",icon:(0,m.jsx)(I.Z,{}),children:[U.format("portPrivate"),": ",d.privatePort.length]}),d.publicPort&&d.publicPort.length>0&&(0,m.jsxs)(D.Z,{color:"blue",icon:(0,m.jsx)(P.Z,{}),children:[U.format("protPublic"),": ",d.publicPort.length]}),d.domain&&d.domain.length>0&&(0,m.jsx)(D.Z,{color:"geekblue",icon:(0,m.jsx)(g.Z,{}),children:d.domainTitle?d.domainTitle:"".concat(U.format("domain"),": ").concat(d.domain.length)})]})})}},7463:function(ve,F,e){e.r(F),e.d(F,{default:function(){return me}});var i=e(15009),l=e.n(i),$=e(99289),s=e.n($),B=e(5574),g=e.n(B),I=e(1699),P=e(66554),W=e(184),N=e(24739),D=e(97462),ae=e(5966),m=e(62370),oe=e(64317),d=e(86615),de=e(31199),U=e(52688),k=e(11106),O=e(83622),T=e(92398),ee=e(84567),C=e(42075),Z=e(66309),Q=e(71230),w=e(15746),p=e(40056),y=e(67294),X=e(74026),a=e(3616),J=e(36146),je=e(92067),n=e(85893);function ge(b){var V=(0,y.useState)(!1),Y=g()(V,2),G=Y[0],R=Y[1],ie=new J.Uo("components.appDomain");return(0,n.jsx)(W.a,{drawerProps:{width:a.R_},trigger:(0,n.jsx)(O.ZP,{type:"primary",onClick:function(){R(!0)},children:ie.format("createSelectContainer")}),onOpenChange:function(le){R(le)},open:G,children:(0,n.jsx)(je.Z,{onSelect:function(le){R(!1),b.onSelect&&b.onSelect(le)}})})}var ye=(0,y.forwardRef)(function(b,V){var Y=(0,y.useState)(!1),G=g()(Y,2),R=G[0],ie=G[1],A=(0,y.useRef)(),le=(0,y.useState)(),H=g()(le,2),x=H[0],c=H[1],ne=(0,y.useState)(1),S=g()(ne,2),L=S[0],M=S[1],v=new J.Uo("components.appDomain");return(0,y.useImperativeHandle)(V,function(){return{showEdit:function(E){return s()(l()().mark(function o(){var j,q,u;return l()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,P.lQ)({id:E});case 2:q=K.sent,u=q.data,(j=A.current)===null||j===void 0||j.setFieldsValue({containerId:u.domain.containerId,serverName:u.domain.serverName,serverNameAlias:u.domain.setting.serverNameAlias,serverAddress:u.domain.setting.serverAddress,serverProtocol:u.domain.setting.serverProtocol,port:u.domain.setting.port,enableBlockCommonExploits:u.domain.setting.enableBlockCommonExploits,enableAssetCache:u.domain.setting.enableAssetCache,enableWs:u.domain.setting.enableWs,extraNginx:u.domain.setting.extraNginx,enableSSL:u.domain.setting.enableSSL,certName:u.domain.setting.certName,vhost:u.vhost,type:u.domain.setting.type,wwwRoot:u.domain.setting.wwwRoot,fpmRoot:u.domain.setting.fpmRoot}),c(u),ie(!0);case 7:case"end":return K.stop()}},o)}))()}}}),(0,n.jsx)(W.a,{drawerProps:{forceRender:!0,width:a.R_},open:R,onOpenChange:function(E){var o;ie(E),!E&&((o=A.current)===null||o===void 0||o.resetFields())},title:v.format("createTitle"),trigger:(0,n.jsx)(O.ZP,{onClick:function(){var E;c(void 0),(E=A.current)===null||E===void 0||E.resetFields()},type:"primary",children:v.format("createTriggerButton")}),formRef:A,onFinish:function(){var ce=s()(l()().mark(function E(o){var j,q,u,te,K;return l()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(!o.vhost){re.next=8;break}return re.next=3,(0,P.Ss)({id:x&&(x==null?void 0:x.domain.id)>0?x.domain.id:0,vhost:o.vhost});case 3:return q=re.sent,re.next=6,(0,P.hZ)();case 6:re.next=11;break;case 8:return re.next=10,(0,P.Fj)({id:x&&(x==null?void 0:x.domain.id)>0?x.domain.id:0,containerId:o.containerId,serverName:o.serverName,serverNameAlias:o.serverNameAlias,serverAddress:o.serverAddress,serverProtocol:(u=o.protocol)!==null&&u!==void 0?u:"http",port:parseInt((te=o.port)!==null&&te!==void 0?te:"80"),enableBlockCommonExploits:o.enableBlockCommonExploits,enableAssetCache:o.enableAssetCache,enableWs:o.enableWs,enableSSL:o.enableSSL,extraNginx:o.extraNginx,certName:o.certName,wwwRoot:o.wwwRoot,fpmRoot:o.fpmRoot,type:o.type});case 10:K=re.sent;case 11:return(j=A.current)===null||j===void 0||j.resetFields(),b.onFinish(),re.abrupt("return",!0);case 14:case"end":return re.stop()}},E)}));return function(E){return ce.apply(this,arguments)}}(),children:(0,n.jsx)(T.Z,{items:[{key:"1",label:v.format("createTabDomain"),destroyOnHidden:!0,children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(N.UW,{children:[(0,n.jsx)(D.Z,{name:["enableSSL"],children:function(E){var o=E.enableSSL;return(0,n.jsx)(ae.Z,{width:"lg",label:v.format("createFormServerName"),tooltip:v.format("createFormServerNameTip"),name:"serverName",placeholder:"www.explame.com, demo.com:8807",rules:[{required:!0}],fieldProps:{addonBefore:o?"https://":"http://"},disabled:x&&x.domain.id>0})}}),(0,n.jsx)(m.Z,{label:" ",valuePropName:"checked",name:"enableSSL",children:(0,n.jsx)(ee.Z,{children:"Https?"})})]}),(0,n.jsx)(oe.Z,{label:v.format("createFormServerNameAlises"),name:"serverNameAlias",mode:"tags",placeholder:v.format("createFormServerNameAlisesEmpty")}),(0,n.jsx)(D.Z,{name:["enableSSL","serverName"],children:function(E){var o=E.enableSSL,j=E.serverName;if(o)return(0,n.jsxs)(C.Z.Compact,{children:[(0,n.jsx)(oe.Z,{label:v.format("createFormCertName"),width:"lg",name:"certName",fieldProps:{labelRender:function(u){return u.value}},required:!0,rules:[{required:!0}],request:s()(l()().mark(function q(){var u;return l()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,P.dZ)();case 2:return u=K.sent,K.abrupt("return",u.data&&u.data.list.map(function(Ce,re){return{label:(0,n.jsx)(C.Z,{wrap:!0,children:Ce.domain.map(function(Ie,be){return(0,n.jsx)(Z.Z,{children:Ie})})},re),value:"".concat(Ce.domain[0])}}));case 4:case"end":return K.stop()}},q)}))},L),(0,n.jsx)(m.Z,{label:" ",children:(0,n.jsx)(X.Z,{domain:j?[j]:[],onFinish:function(){M(L+1)}})})]})}}),(0,n.jsx)(d.Z.Group,{label:v.format("createFormType"),name:"type",initialValue:"proxy",options:v.option("createFormTypeOption",["proxy","redirect","fpm"])}),(0,n.jsxs)(C.Z.Compact,{children:[(0,n.jsx)(oe.Z,{label:v.format("createFormProtocol"),tooltip:v.format("createFormProtocolTip"),initialValue:"http",name:"serverProtocol",fieldProps:{allowClear:!1},valueEnum:{http:"http",https:"https"}}),(0,n.jsx)(D.Z,{name:["containerId","type"],children:function(E){var o=E.containerId,j=E.type;return[(0,n.jsx)(ae.Z,{width:"lg",label:" ",name:"serverAddress",placeholder:v.format("createFormServerAddressEmpty"),required:!0,disabled:o,rules:[{required:!0}]},"serverAddress"),j!="redirect"&&(0,n.jsxs)(C.Z.Compact,{children:[(0,n.jsx)(m.Z,{label:" ",name:"containerId",children:(0,n.jsx)(ge,{onSelect:function(u){var te,K;(te=A.current)===null||te===void 0||te.setFieldValue("serverAddress",u.Name),(K=A.current)===null||K===void 0||K.setFieldValue("containerId",u.Id)}})}),(0,n.jsx)(m.Z,{label:" ",children:(0,n.jsx)(O.ZP,{onClick:function(){var u,te;(u=A.current)===null||u===void 0||u.setFieldValue("containerId",""),(te=A.current)===null||te===void 0||te.setFieldValue("serverAddress","")},children:v.format("createUser")})})]},"selectContainer")]}})]}),(0,n.jsx)(de.Z,{label:v.format("createFormPort"),name:"port",placeholder:v.format("createFormPortEmpty")}),(0,n.jsx)(D.Z,{name:["type"],children:function(E){var o=E.type;if(o=="fpm")return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ae.Z,{fieldProps:{addonBefore:"/dpanel/wwwroot/"},name:"wwwRoot",label:"\u7F51\u7AD9\u6839\u76EE\u5F55"}),(0,n.jsx)(ae.Z,{initialValue:"/www",name:"fpmRoot",label:"FPM \u6839\u76EE\u5F55"})]})}}),(0,n.jsx)(D.Z,{name:["type"],children:function(E){var o=E.type;return o!="redirect"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Q.Z,{children:[(0,n.jsx)(w.Z,{span:12,children:(0,n.jsx)(U.Z,{label:v.format("createFormEnableBlockCommonExploits"),name:"enableBlockCommonExploits"})}),(0,n.jsx)(w.Z,{children:(0,n.jsx)(U.Z,{width:"md",label:v.format("createFormEnableAssetCache"),name:"enableAssetCache"})})]}),(0,n.jsx)(Q.Z,{children:(0,n.jsx)(w.Z,{span:12,children:(0,n.jsx)(U.Z,{label:v.format("createFormEnableWs"),name:"enableWs",initialValue:!0})})})]})}})]})},{key:"3",label:"vhost.conf",destroyOnHidden:!0,children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.Z,{message:v.format("createVhostTip"),showIcon:!0}),(0,n.jsx)(m.Z,{name:"vhost",label:" ",children:(0,n.jsx)(k.ZP,{height:"600px",theme:"dark",style:{backgroundColor:"#282c34"},onChange:function(){}})})]})}]})})}),pe=ye,Oe=e(5251),Ee=e(83062),Pe=e(38703);function _e(b){var V,Y=0;if(b.sslCrtCreatedAt&&b.sslCrtRenewAt){var G,R,ie=new Date,A=new Date((G=b.sslCrtRenewAt)!==null&&G!==void 0?G:""),le=new Date((R=b.sslCrtCreatedAt)!==null&&R!==void 0?R:""),H=Math.ceil((A.getTime()-le.getTime())/86400/1e3),x=Math.ceil((ie.getTime()-le.getTime())/86400/1e3);Y=Math.min(Math.ceil(x/H*100),100)}return b.certName?(0,n.jsx)(Ee.Z,{placement:"right",title:"".concat(J.FD.format("listExpireAt"),": ").concat((0,Oe.NF)((V=b.sslCrtRenewAt)!==null&&V!==void 0?V:"")),children:(0,n.jsx)(Z.Z,{icon:(0,n.jsxs)(C.Z,{children:[(0,n.jsx)(Pe.Z,{type:"circle",percent:Y,status:Y==100?"exception":"active",strokeWidth:20,size:14}),(0,n.jsx)("span",{})]}),children:b.certName})}):"-"}var t=e(80821),r=e(37413),f=e(98510),h=e(86548),_=e(74453),z=e(82346),se=e(96074),ue=e(25593),fe=e(50136);function me(){var b=(0,y.useRef)(),V=(0,y.useRef)(),Y=(0,y.useState)({}),G=g()(Y,2),R=G[0],ie=G[1],A=(0,z.useAccess)(),le=new J.Uo("app");return(0,n.jsx)(_._z,{extra:[(0,n.jsx)(I.u,{access:"canSeeContainerDomainManage",children:(0,n.jsx)(pe,{ref:V,onFinish:s()(l()().mark(function H(){var x,c;return l()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return!((x=b.current)===null||x===void 0)&&x.reloadAndRest&&((c=b.current)===null||c===void 0||c.reloadAndRest()),S.next=3,(0,P.hZ)();case 3:case"end":return S.stop()}},H)}))},"addDomain")},"addDomain"),(0,n.jsx)(I.u,{access:"canSeeContainerDomainManage",children:(0,n.jsx)(t.Z,{tips:le.format("domainRestartNginxTip"),action:s()(l()().mark(function H(){return l()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,P.hZ)();case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},H)})),children:le.format("domainRestartNginx")},"nginx")},"nginx")],children:(0,n.jsx)(f.C,{rowKey:"id",actionRef:b,columns:[{title:J.FD.format("listDomain"),dataIndex:"serverName",render:function(x,c,ne,S,L){var M=[];return c.serverName&&M.push(c.setting.enableSSL?"https://"+c.serverName:"http://"+c.serverName),c.setting.serverNameAlias&&c.setting.serverNameAlias.map(function(v){M.push(c.setting.enableSSL?"https://"+v:"http://"+v)}),(0,n.jsx)(r.Z,{domain:M,domainTitle:"".concat(c.serverName," (").concat(M.length,")")})}},{title:J.FD.format("listTargetAddress"),search:!1,render:function(x,c,ne,S,L){return"".concat(c.setting.serverAddress,":").concat(c.setting.port)}},{title:J.FD.format("listCert"),search:!0,dataIndex:"certName",width:300,valueEnum:R,render:function(x,c,ne,S,L){return c.setting.enableSSL?(0,n.jsx)(_e,{certName:c.setting.certName,sslCrtRenewAt:c.setting.sslCrtRenewAt,sslCrtCreatedAt:c.setting.sslCrtCreatedAt}):"-"}},{title:J.FD.format("listCreatedAt"),search:!1,width:180,ellipsis:!0,dataIndex:"createdAt",render:function(x,c,ne,S,L){return(0,Oe.NF)(c.createdAt)}},{title:J.FD.format("listManage"),key:"option",width:50,search:!1,fixed:"right",hidden:!A.canSeeContainerDomainManage,render:function(x,c,ne,S){return(0,n.jsx)(C.Z,{split:(0,n.jsx)(se.Z,{type:"vertical"}),children:(0,n.jsx)(ue.Z.Link,{onClick:function(){var M;return(M=V.current)===null||M===void 0||M.showEdit(c.id),!0},children:(0,n.jsx)(Ee.Z,{title:J.FD.format("listManageEdit"),children:(0,n.jsx)(h.Z,{})})},"edit")})}}],request:function(){var H=s()(l()().mark(function x(c,ne,S){var L,M,v;return l()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,P.i7)({serverName:c.serverName,certName:c.certName});case 2:return L=E.sent,E.next=5,(0,P.dZ)();case 5:return M=E.sent,v={},L.data.list.map(function(o){o.setting.certName&&typeof o.setting.certName=="string"&&(v[o.setting.certName]=o.setting.certName)}),ie(v),E.abrupt("return",{data:L.data.list&&L.data.list.map(function(o){if(M&&M.data.list){var j,q;o.setting.sslCrtCreatedAt=(j=M.data.list.find(function(u){return u.domain[0]==o.setting.certName}))===null||j===void 0?void 0:j.createdAt,o.setting.sslCrtRenewAt=(q=M.data.list.find(function(u){return u.domain[0]==o.setting.certName}))===null||q===void 0?void 0:q.renewAt}return o}),success:!0,total:L.data.list.length});case 10:case"end":return E.stop()}},x)}));return function(x,c,ne){return H.apply(this,arguments)}}(),rowSelection:A.canSeeContainerDomainManage?{defaultSelectedRowKeys:[],alwaysShowAlert:!0}:void 0,quickToolbarRender:function(x){var c=x.selectedRows;return[(0,n.jsx)(t.Z,{buttonProps:{danger:!0,type:"primary"},confirmProps:{showCommonConfirm:!0},action:s()(l()().mark(function ne(){var S;return l()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,(0,P.dj)({id:c.map(function(v){return v.id})});case 2:return S=M.sent,M.next=5,(0,P.hZ)();case 5:return M.abrupt("return",S);case 6:case"end":return M.stop()}},ne)})),onSuccess:function(){var S,L;return!((S=b.current)===null||S===void 0)&&S.reloadAndRest&&((L=b.current)===null||L===void 0||L.reloadAndRest()),!0},onError:function(){var S,L;return!((S=b.current)===null||S===void 0)&&S.reset&&((L=b.current)===null||L===void 0||L.reset()),!0},children:J.FD.format("listManageDeleteBatch")},"batchDelete")]},tableExtraRender:function(){return(0,n.jsx)(fe.Z,{mode:"horizontal",selectedKeys:["domain"],items:[{label:(0,n.jsx)(z.Link,{to:"/app/domain/list",replace:!0,children:J.Ob.format("container.domain.list")}),key:"domain"},{label:(0,n.jsx)(z.Link,{to:"/app/domain/cert",replace:!0,children:J.Ob.format("container.domain.cert")}),key:"cert"}]})}},"domain-list")})}},13822:function(ve,F,e){e.d(F,{IE:function(){return N},IW:function(){return P},KK:function(){return de},LJ:function(){return k},RF:function(){return C},Re:function(){return T},aF:function(){return Q},eE:function(){return oe},jV:function(){return ae}});var i=e(5574),l=e.n(i),$=e(15009),s=e.n($),B=e(99289),g=e.n(B),I=e(82346);function P(p){return W.apply(this,arguments)}function W(){return W=g()(s()().mark(function p(y){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,I.request)("/api/app/container/status",{method:"POST",data:y}));case 1:case"end":return a.stop()}},p)})),W.apply(this,arguments)}function N(p){return D.apply(this,arguments)}function D(){return D=g()(s()().mark(function p(y){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,I.request)("/api/app/container/get-list",{data:y,method:"POST"}));case 1:case"end":return a.stop()}},p)})),D.apply(this,arguments)}function ae(p){return m.apply(this,arguments)}function m(){return m=g()(s()().mark(function p(y){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,I.request)("/api/app/container/get-detail",{data:y,method:"POST"}));case 1:case"end":return a.stop()}},p)})),m.apply(this,arguments)}function oe(p){return d.apply(this,arguments)}function d(){return d=g()(s()().mark(function p(y){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,I.request)("/api/app/container/update",{data:y,method:"POST"}));case 1:case"end":return a.stop()}},p)})),d.apply(this,arguments)}function de(){return U.apply(this,arguments)}function U(){return U=g()(s()().mark(function p(){return s()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.abrupt("return",(0,I.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return X.stop()}},p)})),U.apply(this,arguments)}function k(p){return O.apply(this,arguments)}function O(){return O=g()(s()().mark(function p(y){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!y.enableExportToPath){a.next=2;break}return a.abrupt("return",(0,I.request)("/api/app/container/export",{method:"GET",params:y}));case 2:return a.abrupt("return",new Promise(function(J,je){var n=localStorage.getItem("token"),ge=new URLSearchParams;ge.append("token",n||""),Object.entries(y).forEach(function(Oe){var Ee=l()(Oe,2),Pe=Ee[0],_e=Ee[1];ge.append(Pe,String(_e))});var ye="/api/app/container/export?".concat(ge.toString()),pe=document.createElement("iframe");pe.style.display="none",pe.src=ye,document.body.appendChild(pe),setTimeout(function(){pe.parentElement&&document.body.removeChild(pe)},5e3),J({code:200,data:"success",error:""})}));case 3:case"end":return a.stop()}},p)})),O.apply(this,arguments)}function T(p){return ee.apply(this,arguments)}function ee(){return ee=g()(s()().mark(function p(y){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,I.request)("/api/app/container/commit",{method:"POST",data:y}));case 1:case"end":return a.stop()}},p)})),ee.apply(this,arguments)}function C(p){return Z.apply(this,arguments)}function Z(){return Z=g()(s()().mark(function p(y){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,I.request)("/api/app/container/upgrade",{method:"POST",data:y}));case 1:case"end":return a.stop()}},p)})),Z.apply(this,arguments)}function Q(p){return w.apply(this,arguments)}function w(){return w=g()(s()().mark(function p(y){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,I.request)("/api/app/container/copy",{method:"POST",data:y}));case 1:case"end":return a.stop()}},p)})),w.apply(this,arguments)}},40056:function(ve,F,e){e.d(F,{Z:function(){return _e}});var i=e(67294),l=e(89739),$=e(4340),s=e(97937),B=e(21640),g=e(78860),I=e(93967),P=e.n(I),W=e(29372),N=e(64217),D=e(42550),ae=e(96159),m=e(53124),oe=e(11568),d=e(14747),de=e(83559);const U=(t,r,f,h,_)=>({background:t,border:`${(0,oe.bf)(h.lineWidth)} ${h.lineType} ${r}`,[`${_}-icon`]:{color:f}}),k=t=>{const{componentCls:r,motionDurationSlow:f,marginXS:h,marginSM:_,fontSize:z,fontSizeLG:se,lineHeight:ue,borderRadiusLG:fe,motionEaseInOutCirc:me,withDescriptionIconSize:b,colorText:V,colorTextHeading:Y,withDescriptionPadding:G,defaultPadding:R}=t;return{[r]:Object.assign(Object.assign({},(0,d.Wf)(t)),{position:"relative",display:"flex",alignItems:"center",padding:R,wordWrap:"break-word",borderRadius:fe,[`&${r}-rtl`]:{direction:"rtl"},[`${r}-content`]:{flex:1,minWidth:0},[`${r}-icon`]:{marginInlineEnd:h,lineHeight:0},"&-description":{display:"none",fontSize:z,lineHeight:ue},"&-message":{color:Y},[`&${r}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${f} ${me}, opacity ${f} ${me},
        padding-top ${f} ${me}, padding-bottom ${f} ${me},
        margin-bottom ${f} ${me}`},[`&${r}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${r}-with-description`]:{alignItems:"flex-start",padding:G,[`${r}-icon`]:{marginInlineEnd:_,fontSize:b,lineHeight:0},[`${r}-message`]:{display:"block",marginBottom:h,color:Y,fontSize:se},[`${r}-description`]:{display:"block",color:V}},[`${r}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},O=t=>{const{componentCls:r,colorSuccess:f,colorSuccessBorder:h,colorSuccessBg:_,colorWarning:z,colorWarningBorder:se,colorWarningBg:ue,colorError:fe,colorErrorBorder:me,colorErrorBg:b,colorInfo:V,colorInfoBorder:Y,colorInfoBg:G}=t;return{[r]:{"&-success":U(_,h,f,t,r),"&-info":U(G,Y,V,t,r),"&-warning":U(ue,se,z,t,r),"&-error":Object.assign(Object.assign({},U(b,me,fe,t,r)),{[`${r}-description > pre`]:{margin:0,padding:0}})}}},T=t=>{const{componentCls:r,iconCls:f,motionDurationMid:h,marginXS:_,fontSizeIcon:z,colorIcon:se,colorIconHover:ue}=t;return{[r]:{"&-action":{marginInlineStart:_},[`${r}-close-icon`]:{marginInlineStart:_,padding:0,overflow:"hidden",fontSize:z,lineHeight:(0,oe.bf)(z),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${f}-close`]:{color:se,transition:`color ${h}`,"&:hover":{color:ue}}},"&-close-text":{color:se,transition:`color ${h}`,"&:hover":{color:ue}}}}},ee=t=>({withDescriptionIconSize:t.fontSizeHeading3,defaultPadding:`${t.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${t.paddingMD}px ${t.paddingContentHorizontalLG}px`});var C=(0,de.I$)("Alert",t=>[k(t),O(t),T(t)],ee),Z=function(t,r){var f={};for(var h in t)Object.prototype.hasOwnProperty.call(t,h)&&r.indexOf(h)<0&&(f[h]=t[h]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _=0,h=Object.getOwnPropertySymbols(t);_<h.length;_++)r.indexOf(h[_])<0&&Object.prototype.propertyIsEnumerable.call(t,h[_])&&(f[h[_]]=t[h[_]]);return f};const Q={success:l.Z,info:g.Z,error:$.Z,warning:B.Z},w=t=>{const{icon:r,prefixCls:f,type:h}=t,_=Q[h]||null;return r?(0,ae.wm)(r,i.createElement("span",{className:`${f}-icon`},r),()=>({className:P()(`${f}-icon`,r.props.className)})):i.createElement(_,{className:`${f}-icon`})},p=t=>{const{isClosable:r,prefixCls:f,closeIcon:h,handleClose:_,ariaProps:z}=t,se=h===!0||h===void 0?i.createElement(s.Z,null):h;return r?i.createElement("button",Object.assign({type:"button",onClick:_,className:`${f}-close-icon`,tabIndex:0},z),se):null};var X=i.forwardRef((t,r)=>{const{description:f,prefixCls:h,message:_,banner:z,className:se,rootClassName:ue,style:fe,onMouseEnter:me,onMouseLeave:b,onClick:V,afterClose:Y,showIcon:G,closable:R,closeText:ie,closeIcon:A,action:le,id:H}=t,x=Z(t,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[c,ne]=i.useState(!1),S=i.useRef(null);i.useImperativeHandle(r,()=>({nativeElement:S.current}));const{getPrefixCls:L,direction:M,closable:v,closeIcon:ce,className:E,style:o}=(0,m.dj)("alert"),j=L("alert",h),[q,u,te]=C(j),K=he=>{var xe;ne(!0),(xe=t.onClose)===null||xe===void 0||xe.call(t,he)},Ce=i.useMemo(()=>t.type!==void 0?t.type:z?"warning":"info",[t.type,z]),re=i.useMemo(()=>typeof R=="object"&&R.closeIcon||ie?!0:typeof R=="boolean"?R:A!==!1&&A!==null&&A!==void 0?!0:!!v,[ie,A,R,v]),Ie=z&&G===void 0?!0:G,be=P()(j,`${j}-${Ce}`,{[`${j}-with-description`]:!!f,[`${j}-no-icon`]:!Ie,[`${j}-banner`]:!!z,[`${j}-rtl`]:M==="rtl"},E,se,ue,te,u),Re=(0,N.Z)(x,{aria:!0,data:!0}),Se=i.useMemo(()=>typeof R=="object"&&R.closeIcon?R.closeIcon:ie||(A!==void 0?A:typeof v=="object"&&v.closeIcon?v.closeIcon:ce),[A,R,ie,ce]),Me=i.useMemo(()=>{const he=R!=null?R:v;if(typeof he=="object"){const{closeIcon:xe}=he;return Z(he,["closeIcon"])}return{}},[R,v]);return q(i.createElement(W.ZP,{visible:!c,motionName:`${j}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:he=>({maxHeight:he.offsetHeight}),onLeaveEnd:Y},({className:he,style:xe},De)=>i.createElement("div",Object.assign({id:H,ref:(0,D.sQ)(S,De),"data-show":!c,className:P()(be,he),style:Object.assign(Object.assign(Object.assign({},o),fe),xe),onMouseEnter:me,onMouseLeave:b,onClick:V,role:"alert"},Re),Ie?i.createElement(w,{description:f,icon:t.icon,prefixCls:j,type:Ce}):null,i.createElement("div",{className:`${j}-content`},_?i.createElement("div",{className:`${j}-message`},_):null,f?i.createElement("div",{className:`${j}-description`},f):null),le?i.createElement("div",{className:`${j}-action`},le):null,i.createElement(p,{isClosable:re,prefixCls:j,closeIcon:Se,handleClose:K,ariaProps:Me}))))}),a=e(15671),J=e(43144),je=e(61120),n=e(78814),ge=e(82963);function ye(t,r,f){return r=(0,je.Z)(r),(0,ge.Z)(t,(0,n.Z)()?Reflect.construct(r,f||[],(0,je.Z)(t).constructor):r.apply(t,f))}var pe=e(60136),Ee=function(t){function r(){var f;return(0,a.Z)(this,r),f=ye(this,r,arguments),f.state={error:void 0,info:{componentStack:""}},f}return(0,pe.Z)(r,t),(0,J.Z)(r,[{key:"componentDidCatch",value:function(h,_){this.setState({error:h,info:_})}},{key:"render",value:function(){const{message:h,description:_,id:z,children:se}=this.props,{error:ue,info:fe}=this.state,me=(fe==null?void 0:fe.componentStack)||null,b=typeof h=="undefined"?(ue||"").toString():h,V=typeof _=="undefined"?me:_;return ue?i.createElement(X,{id:z,type:"error",message:b,description:i.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},V)}):se}}])}(i.Component);const Pe=X;Pe.ErrorBoundary=Ee;var _e=Pe}}]);
