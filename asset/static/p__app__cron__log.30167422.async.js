"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4250],{6812:function(re,b,t){t.r(b),t.d(b,{default:function(){return te}});var E=t(15009),B=t.n(E),K=t(99289),N=t.n(K),z=t(5574),$=t.n(z),H=t(22191),y=t(80821),M=t(83727),V=t(67255),X=t(43425),G=t(90078),P=t(38345),Y=t(10641),J=t(95213),U=t(95089),Q=t(63713),F=t(42075),A=t(66309),W=t(96074),k=t(28036),w=t(25593),q=t(40411),ee=t(86250),I=t(55054),R=t(67294),l=t(85893);function te(){var a,s,i=(0,Q.useParams)(),n=(0,R.useState)(),u=$()(n,2),r=u[0],p=u[1],c=(0,R.useRef)(),m=(0,R.useState)(),g=$()(m,2),d=g[0],h=g[1],_=(0,R.useRef)(),j=(0,R.useState)(0),C=$()(j,2),T=C[0],L=C[1];return(0,R.useEffect)(function(){var v;(0,M.Ih)({id:parseInt((v=i.id)!==null&&v!==void 0?v:"")}).then(function(e){h(e.data.detail)})},[T]),(0,l.jsx)(G._z,{children:(0,l.jsxs)(P.Z,{ghost:!0,direction:"column",gutter:[0,10],children:[(0,l.jsx)(P.Z,{title:(0,l.jsx)(X.Z,{}),subTitle:d==null?void 0:d.title,extra:(0,l.jsxs)(F.Z,{children:[(0,l.jsx)("span",{children:"\u4E0B\u6B21\u8FD0\u884C\u65F6\u95F4\uFF1A"}),d&&d.setting.nextRunTime&&d.setting.nextRunTime.map(function(v,e){return(0,l.jsx)(A.Z,{children:new Date(v).toLocaleString()},"runNextTime-".concat(e))})]}),children:(0,l.jsxs)(F.Z,{children:[(0,l.jsx)(y.Z,{action:function(){var e;return(0,M.yh)({id:parseInt((e=i.id)!==null&&e!==void 0?e:"")})},onSuccess:function(){var e,o;return!((e=c.current)===null||e===void 0)&&e.reloadAndRest&&((o=c.current)===null||o===void 0||o.reloadAndRest()),!0},onError:function(){var e,o;return!((e=c.current)===null||e===void 0)&&e.reloadAndRest&&((o=c.current)===null||o===void 0||o.reloadAndRest()),!0},messageSuccess:"run",type:"primary",children:"\u7ACB\u5373\u6267\u884C"},"runOnce"),d&&(0,l.jsx)(y.Z,{action:function(){var e,o,D,O,f,x,Z={id:d.id,title:d.title,expression:(e=d.setting.expression)!==null&&e!==void 0?e:[],containerName:(o=d.setting.containerName)!==null&&o!==void 0?o:"",script:(D=d.setting.script)!==null&&D!==void 0?D:"",enableRunBlock:(O=d.setting.enableRunBlock)!==null&&O!==void 0?O:!1,environment:(f=d.setting.environment)!==null&&f!==void 0?f:[],keepLogTotal:(x=d.setting.keepLogTotal)!==null&&x!==void 0?x:10,disable:!d.setting.disable};return(0,M.FS)(Z)},onSuccess:function(){return L(T+1),!0},onError:function(){return L(T+1),!0},messageSuccess:"pause",children:d.setting.disable?"\u6062\u590D":"\u6682\u505C"},"pause"),(0,l.jsx)(W.Z,{type:"vertical"}),(0,l.jsx)(y.Z,{action:function(){var e;return p({}),(0,M.wb)({id:parseInt((e=i.id)!==null&&e!==void 0?e:"")})},onSuccess:function(){var e,o;return!((e=c.current)===null||e===void 0)&&e.reloadAndRest&&((o=c.current)===null||o===void 0||o.reloadAndRest()),!0},onError:function(){var e,o;return!((e=c.current)===null||e===void 0)&&e.reloadAndRest&&((o=c.current)===null||o===void 0||o.reloadAndRest()),!0},type:"primary",messageSuccess:"clear",confirm:"\u662F\u5426\u6E05\u7406\u6240\u6709\u7684\u8BA1\u5212\u4EFB\u52A1\u65E5\u5FD7\uFF1F",danger:!0,children:"\u6E05\u7A7A\u65E5\u5FD7"},"clear"),(0,l.jsx)(W.Z,{type:"vertical"}),(0,l.jsx)(H.Z,{ref:_,onFinish:function(){L(T+1)}},"create"),(0,l.jsx)(k.ZP,{onClick:function(){var e;!((e=_.current)===null||e===void 0)&&e.edit&&d&&_.current.edit(d)},children:"\u7F16\u8F91\u4EFB\u52A1"})]})}),(0,l.jsxs)(P.Z,{split:"vertical",children:[(0,l.jsx)(P.Z,{ghost:!0,colSpan:"30%",children:(0,l.jsx)(Y.Z,{actionRef:c,rowKey:"id",pagination:(0,V.O)(),columns:[{title:"Id",dataIndex:"id",render:function(e,o,D,O,f){return(0,l.jsxs)(F.Z,{children:[(0,l.jsx)(w.Z.Link,{onClick:function(){p(o)},children:o.id}),r!=null&&r.id&&r.id==o.id?(0,l.jsx)(q.Z,{status:"processing"}):""]})}},{title:"\u5F00\u59CB\u65F6\u95F4",render:function(e,o,D,O,f){return new Date(o.value.runTime).toLocaleString()}},{title:"\u8017\u65F6",render:function(e,o,D,O,f){return"".concat(o.value.useTime?o.value.useTime.toFixed(2)+"s":"-")}}],search:!1,request:function(){var v=N()(B()().mark(function e(o,D,O){var f,x;return B()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,M.bk)({id:parseInt((f=i.id)!==null&&f!==void 0?f:""),page:o.current,pageSize:o.pageSize});case 2:return x=S.sent,x.data.list&&x.data.list.length>0&&p(x.data.list[0]),S.abrupt("return",{data:x.data.list,success:!0,total:x.data.total});case 5:case"end":return S.stop()}},e)}));return function(e,o,D){return v.apply(this,arguments)}}()})}),(0,l.jsxs)(P.Z,{ghost:!0,colSpan:"70%",split:"horizontal",children:[(0,l.jsx)(P.Z,{children:(0,l.jsxs)(ee.Z,{gap:50,align:"center",justify:"space-evenly",children:[(0,l.jsx)(I.Z,{title:"\u65E5\u5FD7Id",value:(r==null?void 0:r.id)&&(r==null?void 0:r.id)}),(0,l.jsx)(I.Z,{title:"\u6267\u884C\u65F6\u95F4",value:(r==null?void 0:r.value)&&new Date((a=r==null?void 0:r.value.runTime)!==null&&a!==void 0?a:"").toLocaleString()}),(0,l.jsx)(I.Z,{title:"\u6D88\u8017\u65F6\u95F4",value:(r==null?void 0:r.value)&&"".concat(r!=null&&r.value.useTime?r.value.useTime.toFixed(2)+"s":"-")})]})}),(0,l.jsx)(P.Z,{children:(0,l.jsx)(U.ZP,{theme:"dark",height:"100vh",value:(r==null?void 0:r.value)&&((s=r.value.message)!==null&&s!==void 0?s:r==null?void 0:r.value.error),extensions:[J.RI.shell(),U.tk.lineWrapping]})})]})]})]})})}},55054:function(re,b,t){t.d(b,{Z:function(){return te}});var E=t(67294),B=t(57838),K=t(96159),N=t(93967),z=t.n(N),$=t(64217),H=t(53124),y=t(48054),V=a=>{const{value:s,formatter:i,precision:n,decimalSeparator:u,groupSeparator:r="",prefixCls:p}=a;let c;if(typeof i=="function")c=i(s);else{const m=String(s),g=m.match(/^(-?)(\d*)(\.(\d+))?$/);if(!g||m==="-")c=m;else{const d=g[1];let h=g[2]||"0",_=g[4]||"";h=h.replace(/\B(?=(\d{3})+(?!\d))/g,r),typeof n=="number"&&(_=_.padEnd(n,"0").slice(0,n>0?n:0)),_&&(_=`${u}${_}`),c=[E.createElement("span",{key:"int",className:`${p}-content-value-int`},d,h),_&&E.createElement("span",{key:"decimal",className:`${p}-content-value-decimal`},_)]}}return E.createElement("span",{className:`${p}-content-value`},c)},X=t(14747),G=t(83559),P=t(83262);const Y=a=>{const{componentCls:s,marginXXS:i,padding:n,colorTextDescription:u,titleFontSize:r,colorTextHeading:p,contentFontSize:c,fontFamily:m}=a;return{[s]:Object.assign(Object.assign({},(0,X.Wf)(a)),{[`${s}-title`]:{marginBottom:i,color:u,fontSize:r},[`${s}-skeleton`]:{paddingTop:n},[`${s}-content`]:{color:p,fontSize:c,fontFamily:m,[`${s}-content-value`]:{display:"inline-block",direction:"ltr"},[`${s}-content-prefix, ${s}-content-suffix`]:{display:"inline-block"},[`${s}-content-prefix`]:{marginInlineEnd:i},[`${s}-content-suffix`]:{marginInlineStart:i}}})}},J=a=>{const{fontSizeHeading3:s,fontSize:i}=a;return{titleFontSize:i,contentFontSize:s}};var U=(0,G.I$)("Statistic",a=>{const s=(0,P.IX)(a,{});return[Y(s)]},J),Q=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,n=Object.getOwnPropertySymbols(a);u<n.length;u++)s.indexOf(n[u])<0&&Object.prototype.propertyIsEnumerable.call(a,n[u])&&(i[n[u]]=a[n[u]]);return i},A=a=>{const{prefixCls:s,className:i,rootClassName:n,style:u,valueStyle:r,value:p=0,title:c,valueRender:m,prefix:g,suffix:d,loading:h=!1,formatter:_,precision:j,decimalSeparator:C=".",groupSeparator:T=",",onMouseEnter:L,onMouseLeave:v}=a,e=Q(a,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:o,direction:D,statistic:O}=E.useContext(H.E_),f=o("statistic",s),[x,Z,S]=U(f),ne=E.createElement(V,{decimalSeparator:C,groupSeparator:T,prefixCls:f,formatter:_,precision:j,value:p}),ae=z()(f,{[`${f}-rtl`]:D==="rtl"},O==null?void 0:O.className,i,n,Z,S),se=(0,$.Z)(e,{aria:!0,data:!0});return x(E.createElement("div",Object.assign({},se,{className:ae,style:Object.assign(Object.assign({},O==null?void 0:O.style),u),onMouseEnter:L,onMouseLeave:v}),c&&E.createElement("div",{className:`${f}-title`},c),E.createElement(y.Z,{paragraph:!1,loading:h,className:`${f}-skeleton`},E.createElement("div",{style:r,className:`${f}-content`},g&&E.createElement("span",{className:`${f}-content-prefix`},g),m?m(ne):ne,d&&E.createElement("span",{className:`${f}-content-suffix`},d)))))};const W=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function k(a,s){let i=a;const n=/\[[^\]]*]/g,u=(s.match(n)||[]).map(m=>m.slice(1,-1)),r=s.replace(n,"[]"),p=W.reduce((m,g)=>{let[d,h]=g;if(m.includes(d)){const _=Math.floor(i/h);return i-=_*h,m.replace(new RegExp(`${d}+`,"g"),j=>{const C=j.length;return _.toString().padStart(C,"0")})}return m},r);let c=0;return p.replace(n,()=>{const m=u[c];return c+=1,m})}function w(a,s){const{format:i=""}=s,n=new Date(a).getTime(),u=Date.now(),r=Math.max(n-u,0);return k(r,i)}var q=function(a,s){var i={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&s.indexOf(n)<0&&(i[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,n=Object.getOwnPropertySymbols(a);u<n.length;u++)s.indexOf(n[u])<0&&Object.prototype.propertyIsEnumerable.call(a,n[u])&&(i[n[u]]=a[n[u]]);return i};const ee=1e3/30;function I(a){return new Date(a).getTime()}const R=a=>{const{value:s,format:i="HH:mm:ss",onChange:n,onFinish:u}=a,r=q(a,["value","format","onChange","onFinish"]),p=(0,B.Z)(),c=E.useRef(null),m=()=>{u==null||u(),c.current&&(clearInterval(c.current),c.current=null)},g=()=>{const _=I(s);_>=Date.now()&&(c.current=setInterval(()=>{p(),n==null||n(_-Date.now()),_<Date.now()&&m()},ee))};E.useEffect(()=>(g(),()=>{c.current&&(clearInterval(c.current),c.current=null)}),[s]);const d=(_,j)=>w(_,Object.assign(Object.assign({},j),{format:i})),h=_=>(0,K.Tm)(_,{title:void 0});return E.createElement(A,Object.assign({},r,{value:s,valueRender:h,formatter:d}))};var l=E.memo(R);A.Countdown=l;var te=A}}]);
