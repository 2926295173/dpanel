"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3357],{80821:function(L,C,e){e.d(C,{Z:function(){return P}});var I=e(5574),a=e.n(I),U=e(24963),d=e(86738),u=e(28036),_=e(83062),o=e(67294),T=e(85893);function P(s){var D=(0,o.useState)(!1),y=a()(D,2),j=y[0],O=y[1],f=(0,o.useContext)(U.Z),g=f.lang,l=f.notice,A=f.message,B=function(){O(!0),s.action().then(function(p){if(O(!1),p){typeof s.onSuccess=="function"&&s.onSuccess(p);var b="";s.messageSuccess?typeof s.messageSuccess=="function"?b=s.messageSuccess(p):b=s.messageSuccess.indexOf("notification.")==0?g(s.messageSuccess):s.messageSuccess:b=g("notification.finish"),s.asynced?A.info(b):A.success(b)}}).catch(function(p){O(!1),typeof s.onError=="function"&&s.onError(p)})};return s.confirm?(0,T.jsx)(d.Z,{style:{width:500},title:s.confirmTitle?s.confirmTitle:g("notification.title.tip"),description:typeof s.confirm=="string"&&s.confirm.indexOf("notification.")==0?g(s.confirm):s.confirm,onConfirm:B,okText:"Yes",cancelText:"No",children:(0,T.jsx)(u.ZP,{disabled:s.disabled,icon:s.icon,loading:j,danger:s.danger,type:s.type,children:s.children})}):(0,T.jsx)(_.Z,{title:s.tips,children:(0,T.jsx)(u.ZP,{style:s.ghost?{padding:0,height:"auto"}:{},disabled:s.disabled,icon:s.icon,loading:j,onClick:B,danger:s.danger,type:s.type,children:s.children})})}},96042:function(L,C,e){e.d(C,{Z:function(){return P}});var I=e(97857),a=e.n(I),U=e(5574),d=e.n(U),u=e(75870),_=e(34041),o=e(67294),T=e(85893);function P(s){var D=(0,o.useState)([]),y=d()(D,2),j=y[0],O=y[1];(0,o.useEffect)(function(){(0,u.Ot)().then(function(g){g&&O(g.data.list)})},[]);var f={};return s.multiple&&(f.mode="multiple"),s.top&&(f.placement="topLeft"),(0,T.jsx)(_.Z,a()({onChange:function(l){if(Array.isArray(l)){var A=l.map(function(B){return j[B]});s.onChangeList&&s.onChangeList(A)}else s.onChange&&s.onChange(j[l])},placeholder:"\u9009\u62E9\u955C\u50CF\u4ED3\u5E93\uFF0C\u9ED8\u8BA4\u4E3A\u5F53\u524D\u4ED3\u5E93",options:j.map(function(g,l){return{value:l,label:g.title+"("+g.serverAddress+")"}}),allowClear:!0},f))}},76428:function(L,C,e){e.d(C,{Z:function(){return d}});var I=e(25593),a=e(67294),U=e(85893);function d(u){return(0,U.jsx)(I.Z.Text,{copyable:!0,children:u.title})}},24963:function(L,C,e){var I=e(67294),a=(0,I.createContext)({});C.Z=a},70977:function(L,C,e){e.r(C),e.d(C,{default:function(){return oe}});var I=e(15009),a=e.n(I),U=e(99289),d=e.n(U),u=e(5574),_=e.n(u),o=e(3393),T=e(43425),P=e(58638),s=e(87784),D=e(40666),y=e(1912),j=e(77171),O=e(48689),f=e(45742),g=e(38345),l=e(97269),A=e(62370),B=e(7529),h=e(5966),p=e(63713),b=e(42075),i=e(96074),w=e(65233),K=e(2487),c=e(4393),M=e(66309),v=e(25593),r=e(26412),ae=e(63490),W=e(67294),F=e(80821),se=e(5251),N=e(93162),Ee=e.n(N),ue=e(18148),_e=e(96042),ie=e(24963),le=e(76428),t=e(85893);function oe(){var G,z=(0,W.useContext)(ie.Z),ve=z.message,Pe=z.notice,De=z.lang,de=(0,W.useState)(),H=_()(de,2),n=H[0],ce=H[1],k=(0,p.useParams)(),X=(0,W.useRef)(),me=(0,W.useState)(0),V=_()(me,2),Y=V[0],Q=V[1],ge=(0,p.useNavigate)(),J=(0,p.useAccess)(),fe=(0,W.useState)(),q=_()(fe,2),Z=q[0],pe=q[1],he=(0,W.useState)(""),ee=_()(he,2),ne=ee[0],te=ee[1];return(0,W.useEffect)(function(){k.id&&(0,o.YU)({md5:k.id}).then(function(m){ce(m.data),J.canSeeImageRemoteTag&&(0,o.cd)({imageName:m.data.info.RepoTags[0]}).then(function(E){pe(E.data.list)}).catch(function(E){})})},[Y]),(0,t.jsx)("div",{children:(0,t.jsxs)(g.Z,{direction:"column",ghost:!0,gutter:[0,10],children:[(0,t.jsx)(g.Z,{title:(0,t.jsx)(T.Z,{}),subTitle:"\u5E38\u7528\u64CD\u4F5C",headerBordered:!0,bordered:!0,children:(0,t.jsxs)(b.Z,{children:[(0,t.jsx)(F.Z,{icon:(0,t.jsx)(P.Z,{}),action:function(){var E;return(0,o.Rb)({md5:(E=n==null?void 0:n.info.RepoTags)!==null&&E!==void 0?E:[""]})},onSuccess:function(E){var R=new Blob([E],{type:"application/tar"});(0,N.saveAs)(R,(n==null?void 0:n.info.RepoTags.join("-"))+".tar")},children:"\u5BFC\u51FA"}),(0,t.jsx)(i.Z,{}),(0,t.jsx)(F.Z,{icon:(0,t.jsx)(s.Z,{}),danger:!0,type:"primary",action:function(){var E;return(0,ue.ao)({md5:[(E=n==null?void 0:n.info.Id)!==null&&E!==void 0?E:""],force:!0})},onSuccess:function(){ge("/image/list")},confirm:"notification.confirm.title",children:"\u5F3A\u5236\u5220\u9664"})]})}),J.canSeeImageRemoteTag&&(0,t.jsx)(g.Z,{title:(0,t.jsx)(D.Z,{}),subTitle:"\u8FDC\u7A0B Tag \u5217\u8868",extra:(0,t.jsx)(l.A,{isKeyPressSubmit:!0,submitter:!1,onFinish:function(E){te(E.search)},children:(0,t.jsx)(b.Z.Compact,{children:(0,t.jsx)(A.Z,{style:{margin:0},name:"search",children:(0,t.jsx)(w.Z,{allowClear:!0,addonBefore:"\u641C\u7D22Tag",placeholder:"\u6309\u56DE\u8F66\u67E5\u8BE2",onClear:function(){te("")}})})})},"form"),children:(0,t.jsx)(K.Z,{pagination:{pageSize:36},rowKey:function(E){return"".concat(E)},grid:{gutter:10,xs:3,sm:3,md:4,lg:4,xl:5,xxl:6},dataSource:Z&&Z.filter(function(m){return!ne||m.indexOf(ne)!==-1}),loading:!Z||(Z==null?void 0:Z.length)<=0,renderItem:function(E,R){return(0,t.jsx)(K.Z.Item,{children:(0,t.jsx)(c.Z,{style:{height:"60px"},children:(0,t.jsx)("div",{style:{margin:"-10px",wordBreak:"break-word"},children:(0,t.jsx)(le.Z,{title:E})})})},R)}})}),(0,t.jsx)(g.Z,{bordered:!0,title:(0,t.jsx)(D.Z,{}),subTitle:"Tag \u5217\u8868",children:(0,t.jsx)(B.Rs,{grid:{gutter:40,column:2},headerTitle:!1,metas:{content:{render:function(E,R,x){return(0,t.jsx)(M.Z,{color:"blue",children:(0,t.jsx)(v.Z.Text,{copyable:!0,children:R})},x)}},title:{render:function(E,R,x){return(0,t.jsxs)(b.Z,{children:[(0,t.jsxs)(F.Z,{action:function(){return(0,o.Gb)({tag:R,type:"push"})},children:[(0,t.jsx)(y.Z,{})," Push"]}),(0,t.jsxs)(F.Z,{action:function(){return(0,o.Gb)({tag:R,type:"pull"})},children:[(0,t.jsx)(j.Z,{})," Pull"]}),(0,t.jsx)(F.Z,{action:function(){return(0,o.Pn)({tag:R})},onSuccess:function(re){return Q(Y+1),!0},confirm:"notification.confirm.title",children:(0,t.jsx)(O.Z,{})})]},x)}}},dataSource:n==null?void 0:n.info.RepoTags})}),(0,t.jsx)(g.Z,{bordered:!0,headerBordered:!0,title:(0,t.jsx)(D.Z,{}),subTitle:"\u65B0\u589E Tag",children:(0,t.jsxs)(l.A,{formRef:X,onFinish:function(){var m=d()(a()().mark(function E(R){var x,S,re;return a()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,o._U)({md5:(x=n==null?void 0:n.info.Id)!==null&&x!==void 0?x:"",tag:(R.imageRespo?R.imageRespo.serverAddress+"/":"")+R.imageTag});case 2:re=$.sent,Q(Y+1),(S=X.current)===null||S===void 0||S.resetFields();case 5:case"end":return $.stop()}},E)}));return function(E){return m.apply(this,arguments)}}(),children:[(0,t.jsx)(A.Z,{label:"\u955C\u50CF\u4ED3\u5E93",name:"imageRespo",tooltip:(0,t.jsxs)(t.Fragment,{children:["\u63A8\u9001\u524D\u8BF7\u4FDD\u8BC1\u4ED3\u5E93\u4E2D\u6709\u6307\u5B9A\u7684\u547D\u540D\u7A7A\u95F4, \u5982\u6CA1\u6709\u8BF7\u5148 ",(0,t.jsx)("a",{href:"",target:"_blank",children:"\u6DFB\u52A0\u4ED3\u5E93"})]}),children:(0,t.jsx)(_e.Z,{})}),(0,t.jsx)(h.Z,{fieldProps:{min:2,max:255},rules:[{required:!0}],required:!0,placeholder:"\u53EA\u80FD\u4F7F\u7528\u5C0F\u5199\u82F1\u6587\u5B57\u7B26\u3001\u6570\u5B57\u3001_\u3001-\u3001",label:"\u955C\u50CF\u540D\u79F0",name:"imageTag",tooltip:"\u4F8B\u5982: name:tag\u3001namespace/name:tag\u3001registry/namespace/name:tag"})]})}),(0,t.jsx)(g.Z,{bordered:!0,headerBordered:!0,title:(0,t.jsx)(f.Z,{}),subTitle:"\u955C\u50CF\u8BE6\u60C5",children:(0,t.jsxs)(r.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,t.jsx)(r.Z.Item,{label:"ID",children:n==null?void 0:n.info.Id}),(0,t.jsx)(r.Z.Item,{label:"Parent",children:n==null?void 0:n.info.Parent}),(0,t.jsx)(r.Z.Item,{label:"Size",children:(0,se.FI)((G=n==null?void 0:n.info.Size)!==null&&G!==void 0?G:0)}),(0,t.jsx)(r.Z.Item,{label:"Created",children:n==null?void 0:n.info.Created}),(0,t.jsxs)(r.Z.Item,{label:"Build",children:["Docker ",n==null?void 0:n.info.DockerVersion," ",n==null?void 0:n.info.Os," ",n==null?void 0:n.info.Architecture]}),(0,t.jsx)(r.Z.Item,{label:"Labels",children:(0,t.jsx)(r.Z,{column:1,bordered:!0,children:(n==null?void 0:n.info.Config.Labels)&&Object.keys(n==null?void 0:n.info.Config.Labels).map(function(m){return(0,t.jsx)(r.Z.Item,{label:m,children:(0,t.jsx)(v.Z.Text,{style:{width:"400px"},ellipsis:{tooltip:n==null?void 0:n.info.Config.Labels[m]},children:n==null?void 0:n.info.Config.Labels[m]})},m)})})})]})}),(0,t.jsx)(g.Z,{bordered:!0,headerBordered:!0,title:(0,t.jsx)(f.Z,{}),subTitle:"Dockerfile \u8BE6\u60C5",children:(0,t.jsxs)(r.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,t.jsx)(r.Z.Item,{label:"CMD",children:n==null?void 0:n.info.Config.Cmd}),(0,t.jsx)(r.Z.Item,{label:"ENTRYPOINT",children:n==null?void 0:n.info.Config.Entrypoint}),(0,t.jsx)(r.Z.Item,{label:"EXPOSE",children:(n==null?void 0:n.info.Config.ExposedPorts)&&Object.keys(n==null?void 0:n.info.Config.ExposedPorts).map(function(m){return(0,t.jsx)(M.Z,{color:"gray",children:m},m)})}),(0,t.jsx)(r.Z.Item,{label:"VOLUME",children:(n==null?void 0:n.info.Config.Volumes)&&Object.keys(n==null?void 0:n.info.Config.Volumes).map(function(m){return(0,t.jsx)(M.Z,{color:"gray",children:m},m)})}),(0,t.jsx)(r.Z.Item,{label:"Env",children:(0,t.jsx)(r.Z,{column:1,bordered:!0,children:(n==null?void 0:n.info.Config.Env)&&(n==null?void 0:n.info.Config.Env.map(function(m,E){var R=m.split("=");return(0,t.jsx)(r.Z.Item,{label:R[0],children:R[1]},E)}))})})]})}),(0,t.jsxs)(g.Z,{bordered:!0,headerBordered:!0,title:(0,t.jsx)(f.Z,{}),subTitle:"Layers",children:[(0,t.jsx)(ae.Z,{rowKey:"CreatedBy",dataSource:n==null?void 0:n.layer.reverse(),columns:[{title:"Layer",dataIndex:"CreatedBy",key:"CreatedBy"}]}),";"]})]})})}},3393:function(L,C,e){e.d(C,{Gb:function(){return T},Pn:function(){return y},Rb:function(){return O},YU:function(){return _},ZQ:function(){return A},_U:function(){return s},cd:function(){return g}});var I=e(15009),a=e.n(I),U=e(99289),d=e.n(U),u=e(63713);function _(h){return o.apply(this,arguments)}function o(){return o=d()(a()().mark(function h(p){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,u.request)("/api/app/image/get-detail",{method:"POST",data:p}));case 1:case"end":return i.stop()}},h)})),o.apply(this,arguments)}function T(h){return P.apply(this,arguments)}function P(){return P=d()(a()().mark(function h(p){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,u.request)("/api/app/image/tag-remote",{method:"POST",data:p}));case 1:case"end":return i.stop()}},h)})),P.apply(this,arguments)}function s(h){return D.apply(this,arguments)}function D(){return D=d()(a()().mark(function h(p){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,u.request)("/api/app/image/tag-add",{method:"POST",data:p}));case 1:case"end":return i.stop()}},h)})),D.apply(this,arguments)}function y(h){return j.apply(this,arguments)}function j(){return j=d()(a()().mark(function h(p){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,u.request)("/api/app/image/tag-delete",{method:"POST",data:p}));case 1:case"end":return i.stop()}},h)})),j.apply(this,arguments)}function O(h){return f.apply(this,arguments)}function f(){return f=d()(a()().mark(function h(p){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,u.request)("/api/app/image/export",{method:"POST",data:p,responseType:"blob"}));case 1:case"end":return i.stop()}},h)})),f.apply(this,arguments)}function g(h){return l.apply(this,arguments)}function l(){return l=d()(a()().mark(function h(p){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,u.request)("/api/pro/image/get-remote-tag",{method:"POST",data:p}));case 1:case"end":return i.stop()}},h)})),l.apply(this,arguments)}function A(h){return B.apply(this,arguments)}function B(){return B=d()(a()().mark(function h(p){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,u.request)("/api/app/image/check-upgrade",{method:"POST",data:p}));case 1:case"end":return i.stop()}},h)})),B.apply(this,arguments)}},18148:function(L,C,e){e.d(C,{$q:function(){return O},Fj:function(){return b},KG:function(){return _},KX:function(){return w},T8:function(){return y},Xn:function(){return s},ao:function(){return g},c5:function(){return h},c7:function(){return A}});var I=e(15009),a=e.n(I),U=e(99289),d=e.n(U),u=e(63713);function _(c){return o.apply(this,arguments)}function o(){return o=d()(a()().mark(function c(M){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,u.request)("/api/app/image/get-list",{method:"POST",data:M}));case 1:case"end":return r.stop()}},c)})),o.apply(this,arguments)}function T(c){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime().mark(function c(M){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,request("/api/app/log/image-build",{method:"POST",data:M});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},c)})),P.apply(this,arguments)}function s(c){return D.apply(this,arguments)}function D(){return D=d()(a()().mark(function c(M){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,u.request)("/api/app/image/get-list-build",{method:"POST",data:M}));case 1:case"end":return r.stop()}},c)})),D.apply(this,arguments)}function y(c){return j.apply(this,arguments)}function j(){return j=d()(a()().mark(function c(M){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,u.request)("/api/app/image/get-build-task",{method:"POST",data:M});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},c)})),j.apply(this,arguments)}function O(c){return f.apply(this,arguments)}function f(){return f=d()(a()().mark(function c(M){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,u.request)("/api/app/image/delete-build-task",{method:"POST",data:M});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},c)})),f.apply(this,arguments)}function g(c){return l.apply(this,arguments)}function l(){return l=d()(a()().mark(function c(M){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,u.request)("/api/app/image/image-delete",{method:"POST",data:M});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},c)})),l.apply(this,arguments)}function A(){return B.apply(this,arguments)}function B(){return B=d()(a()().mark(function c(){return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,u.request)("/api/app/image/image-prune",{method:"POST"});case 2:return v.abrupt("return",v.sent);case 3:case"end":return v.stop()}},c)})),B.apply(this,arguments)}function h(){return p.apply(this,arguments)}function p(){return p=d()(a()().mark(function c(){return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,u.request)("/api/app/image/build-prune",{method:"POST"});case 2:return v.abrupt("return",v.sent);case 3:case"end":return v.stop()}},c)})),p.apply(this,arguments)}function b(c){return i.apply(this,arguments)}function i(){return i=d()(a()().mark(function c(M){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,u.request)("/api/app/image/update-title",{method:"POST",data:M});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},c)})),i.apply(this,arguments)}function w(c){return K.apply(this,arguments)}function K(){return K=d()(a()().mark(function c(M){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,u.request)("/api/app/image/tag-sync",{method:"POST",data:M}));case 1:case"end":return r.stop()}},c)})),K.apply(this,arguments)}},75870:function(L,C,e){e.d(C,{Ot:function(){return _},ZH:function(){return T},ix:function(){return s},t1:function(){return y}});var I=e(15009),a=e.n(I),U=e(99289),d=e.n(U),u=e(63713);function _(O){return o.apply(this,arguments)}function o(){return o=d()(a()().mark(function O(f){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,u.request)("/api/common/registry/get-list",{method:"POST",data:f}));case 1:case"end":return l.stop()}},O)})),o.apply(this,arguments)}function T(O){return P.apply(this,arguments)}function P(){return P=d()(a()().mark(function O(f){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,u.request)("/api/common/registry/create",{method:"POST",data:f}));case 1:case"end":return l.stop()}},O)})),P.apply(this,arguments)}function s(O){return D.apply(this,arguments)}function D(){return D=d()(a()().mark(function O(f){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,u.request)("/api/common/registry/delete",{method:"POST",data:f}));case 1:case"end":return l.stop()}},O)})),D.apply(this,arguments)}function y(O){return j.apply(this,arguments)}function j(){return j=d()(a()().mark(function O(f){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,u.request)("/api/common/registry/get-detail",{method:"POST",data:f}));case 1:case"end":return l.stop()}},O)})),j.apply(this,arguments)}},5251:function(L,C,e){e.d(C,{FI:function(){return a},NF:function(){return d},ZM:function(){return U}});function I(u){return u.trim()}function a(u){var _="";u<.1*1024?_=u.toFixed(2)+"B":u<.1*1024*1024?_=(u/1024).toFixed(2)+"KB":u<1*1024*1024*1024?_=(u/(1024*1024)).toFixed(2)+"MB":_=(u/(1024*1024*1024)).toFixed(2)+"GB";var o=_+"",T=o.indexOf("."),P=o.substring(T+1,T+3);return P=="00"?o.substring(0,T)+o.substr(T+3,2):_}function U(u){if(u){var _=new Date(u),o=_.getFullYear()+"-",T=(_.getMonth()+1<10?"0"+(_.getMonth()+1):_.getMonth()+1)+"-",P=(_.getDate()<10?"0"+_.getDate():_.getDate())+" ",s=(_.getHours()<10?"0"+_.getHours():_.getHours())+":",D=(_.getMinutes()<10?"0"+_.getMinutes():_.getMinutes())+":",y=_.getSeconds()<10?"0"+_.getSeconds():_.getSeconds();return o+T+P+s+D+y}}function d(u){if(!u||u=="")return"-";var _=new Date(u),o=_.getUTCFullYear(),T=String(_.getUTCMonth()+1).padStart(2,"0"),P=String(_.getUTCDate()).padStart(2,"0"),s=String(_.getUTCHours()).padStart(2,"0"),D=String(_.getUTCMinutes()).padStart(2,"0"),y=String(_.getUTCSeconds()).padStart(2,"0");return"".concat(o,"-").concat(T,"-").concat(P," ").concat(s,":").concat(D,":").concat(y)}}}]);
