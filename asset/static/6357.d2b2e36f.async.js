"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6357],{8287:function(he,X,e){var K=e(5574),_=e.n(K),J=e(15009),r=e.n(J),G=e(99289),h=e.n(G),i=e(13822),E=e(25593),U=e(83062),D=e(85265),O=e(42075),T=e(67294),v=e(81146),c=e(45742),M=e(58638),Z=e(62597),s=e(3616),C=e(82346),x=e(85893),oe=(0,T.forwardRef)(function(ne,$){(0,T.useImperativeHandle)($,function(){return{show:function(A){return h()(r()().mark(function y(){var P;return r()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,i.jV)({md5:A});case 2:P=L.sent,P.data&&w(P.data.info),a(!0);case 5:case"end":return L.stop()}},y)}))()}}});var j=(0,T.useState)(!1),d=_()(j,2),t=d[0],a=d[1],R=(0,T.useState)(),Ee=_()(R,2),k=Ee[0],w=Ee[1],f=(0,T.useRef)();return(0,x.jsxs)(x.Fragment,{children:[ne.showTriggerButton&&(0,x.jsx)(E.Z.Link,{onClick:h()(r()().mark(function I(){return r()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:w(ne.containerInfo),a(!0);case 2:case"end":return y.stop()}},I)})),children:(0,x.jsx)(U.Z,{title:"\u8FD0\u884C\u65E5\u5FD7",children:(0,x.jsx)(c.Z,{})})},"log"),(0,x.jsx)(D.Z,{title:"\u5BB9\u5668\u65E5\u5FD7",open:t,forceRender:!0,onClose:function(){a(!1)},afterOpenChange:function(A){if(A)setTimeout(function(){var P,ee;(P=f.current)===null||P===void 0||P.start(),(ee=f.current)===null||ee===void 0||ee.fit()},1e3);else{var y;(y=f.current)===null||y===void 0||y.close()}},width:s.FK,extra:(0,x.jsx)(O.Z,{children:(0,x.jsx)(C.Link,{to:"/container/log/".concat(k==null?void 0:k.Name),target:"_blank",onClick:function(){var A;(A=f.current)===null||A===void 0||A.close(),a(!1)},children:(0,x.jsx)(U.Z,{title:"\u65B0\u7A97\u53E3\u6253\u5F00",children:(0,x.jsx)(M.Z,{})})})}),children:k&&t&&(0,x.jsx)(v.Z,{ref:f,showInDrawer:!0,id:"container:log:".concat(k==null?void 0:k.Id),request:function(){var I=h()(r()().mark(function A(y){var P;return r()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,Z.Tb)({id:(P=k.Id)!==null&&P!==void 0?P:"",lineTotal:y.lineTotal,download:y.download,showTime:y.showTime});case 2:case"end":return L.stop()}},A)}));return function(A){return I.apply(this,arguments)}}(),download:function(){var I=h()(r()().mark(function A(y){var P,ee,L,De;return r()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(0,Z.XH)({id:(P=k.Id)!==null&&P!==void 0?P:"",lineTotal:y.lineTotal,showTime:y.showTime});case 2:return L=q.sent,q.next=5,(0,i.jV)({md5:(ee=k.Id)!==null&&ee!==void 0?ee:""});case 5:return De=q.sent,q.abrupt("return",{data:new Blob([L],{type:"text/plain"}),name:De.data.info.Name.replaceAll("/","")+"_"+new Date().toLocaleDateString()+".log"});case 7:case"end":return q.stop()}},A)}));return function(A){return I.apply(this,arguments)}}()})})]})});X.Z=oe},46357:function(he,X,e){e.d(X,{Z:function(){return V}});var K=e(5574),_=e.n(K),J=e(15009),r=e.n(J),G=e(99289),h=e.n(G),i=e(67294),E=e(37767),U=e(13822),D=e(82346),O=e(60433),T=e(85265),v=e(96074),c=e(86250),M=e(26412),Z=e(52031),s=e(14189),C=e(72409),x=e(93362),oe=e(184),ne=e(43831),$=e(5251),j=e(25593),d=e(52209),t=e(3616),a=e(85893),R=(0,i.forwardRef)(function(l,S){(0,i.useImperativeHandle)(S,function(){return{}});var o=(0,i.useState)(!1),F=_()(o,2),H=F[0],ue=F[1];return(0,a.jsx)(oe.a,{submitter:!1,title:(0,$.fi)(l.containerInfo.Name,"/")+" - \u7F51\u7EDC\u7BA1\u7406",onOpenChange:function(_e){ue(_e)},drawerProps:{width:t.R_},open:H,trigger:(0,a.jsx)(j.Z.Link,{children:(0,a.jsx)(d.Z,{})},"file"),children:(0,a.jsx)(ne.Z,{ghost:!0,containerInfo:l.containerInfo})})}),Ee=R,k=e(8287),w=e(65913),f=e(14245),I=e(1699),A=e(40666),y=e(64789),P=e(38345),ee=e(42075),L=e(66309),De=e(90127),ie=e(29453);function q(l){var S=(0,i.useState)(0),o=_()(S,2),F=o[0],H=o[1],ue=(0,i.useState)(),fe=_()(ue,2),_e=fe[0],n=fe[1];return(0,i.useEffect)(function(){n([]),(0,ie.e1)().then(function(re){n(re.data.list)})},[F,l.data.info.Name]),(0,a.jsx)(P.Z,{ghost:!0,title:(0,a.jsx)(A.Z,{}),subTitle:"\u5BB9\u5668\u6807\u7B7E",extra:(0,a.jsx)(De.Z,{trigger:(0,a.jsx)(j.Z.Link,{children:(0,a.jsx)(y.Z,{})}),containerDetail:l.data,onFinish:function(){H(F+1)}}),children:(0,a.jsx)(ee.Z,{wrap:!0,children:_e&&(_e==null?void 0:_e.filter(function(re){return re.item&&re.item.find(function(Pe){return Pe.name==l.data.info.Name})}).map(function(re,Pe){return(0,a.jsx)(L.Z,{color:re.tagColor,closable:!0,style:{height:35,display:"flex",borderRadius:20,justifyContent:"center",alignItems:"center"},onClose:h()(r()().mark(function Me(){return r()().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return ve.next=2,(0,ie.rn)({name:l.data.info.Name,tag:re.tag});case 2:H(F+1);case 3:case"end":return ve.stop()}},Me)})),children:(0,a.jsx)("span",{style:{paddingLeft:10,paddingRight:3},children:re.tag})},Pe)}))})})}var ge=e(19632),te=e.n(ge),u=e(12122),W=e(83062),B=e(60940),z=e(27619),je=e(84410),de=e(24963),N={total:0,memory:{usage:[{name:"use",data:[]},{name:"all",show:!1,data:[]}],source:{usage:0,limit:0}},cpu:{usage:[{name:"use",data:[]}],source:{usage:0,limit:0}},network:{usage:[{name:"rx",data:[]},{name:"tx",data:[]}],source:{usageIn:0,usageOut:0}},io:{usage:[{name:"read",data:[]},{name:"write",data:[]}],source:{usageRead:0,usageWrite:0}}},b=function(S,o){switch(o.type){case"clear":return N;case"update":var F=new Date(o.payload.read).toLocaleTimeString(),H=JSON.parse(JSON.stringify(S));if(o.payload.memory_stats&&o.payload.memory_stats.limit&&o.payload.memory_stats.usage&&(H.memory.usage=[{name:"use",data:[].concat(te()(S.memory.usage[0].data.slice(-20)),[{date:F,value:Math.round(o.payload.memory_stats.usage)}])},{name:"all",show:!1,data:[].concat(te()(S.memory.usage[1].data.slice(-20)),[{date:F,value:Math.round(o.payload.memory_stats.limit)}])}],H.memory.source={usage:o.payload.memory_stats.usage,limit:o.payload.memory_stats.limit}),o.payload&&o.payload.cpu_stats){var ue=o.payload.cpu_stats.cpu_usage.total_usage-o.payload.precpu_stats.cpu_usage.total_usage,fe=o.payload.cpu_stats.system_cpu_usage-o.payload.precpu_stats.system_cpu_usage;H.cpu.usage=[{name:"use",data:[].concat(te()(S.cpu.usage[0].data.slice(-20)),[{date:F,value:(ue/fe*o.payload.cpu_stats.online_cpus*100).toFixed(2)}])}],H.cpu.source={usage:ue/fe*o.payload.cpu_stats.online_cpus*100,limit:fe*o.payload.cpu_stats.online_cpus*100}}return o.payload.networks&&(H.network.source={usageIn:parseFloat(o.payload.networks.eth0.rx_bytes.toFixed(2)),usageOut:parseFloat(o.payload.networks.eth0.tx_bytes.toFixed(2))},H.network.usage=[{name:"rx",data:[].concat(te()(S.network.usage[0].data.slice(-20)),[{date:F,value:parseFloat(o.payload.networks.eth0.rx_bytes.toFixed(2))}])},{name:"tx",data:[].concat(te()(S.network.usage[1].data.slice(-20)),[{date:F,value:parseFloat(o.payload.networks.eth0.tx_bytes.toFixed(2))}])}]),o.payload.blkio_stats&&o.payload.blkio_stats.io_service_bytes_recursive&&o.payload.blkio_stats.io_service_bytes_recursive.length>0&&(H.io.source={usageRead:o.payload.blkio_stats.io_service_bytes_recursive[0].value,usageWrite:o.payload.blkio_stats.io_service_bytes_recursive[1].value},H.io.usage=[{name:"read",data:[].concat(te()(S.io.usage[0].data.slice(-20)),[{date:F,value:parseFloat(o.payload.blkio_stats.io_service_bytes_recursive[0].value.toFixed(2))}])},{name:"write",data:[].concat(te()(S.io.usage[1].data.slice(-20)),[{date:F,value:parseFloat(o.payload.blkio_stats.io_service_bytes_recursive[1].value.toFixed(2))}])}]),H}},g=(0,i.forwardRef)(function(l,S){var o=(0,i.useState)(!1),F=_()(o,2),H=F[0],ue=F[1],fe=(0,i.useReducer)(b,N),_e=_()(fe,2),n=_e[0],re=_e[1],Pe=(0,i.useState)(),Me=_()(Pe,2),pe=Me[0],ve=Me[1],Re=(0,i.useContext)(de.Z),Te=Re.loading,Ce=(0,D.useModel)("subscriber");(0,i.useImperativeHandle)(S,function(){return{show:function(m){return h()(r()().mark(function ce(){return r()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.next=2,se(m);case 2:case"end":return le.stop()}},ce)}))()}}});function se(p){return Oe.apply(this,arguments)}function Oe(){return Oe=h()(r()().mark(function p(m){var ce,ae;return r()().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return Te.show(),(0,je.i)({id:m}),xe.next=4,(0,je.a)({id:m});case 4:ce=xe.sent,ae={columns:[],data:[]},ce.data.list.Titles.map(function(me){ae.columns.push({title:me,label:me,dataIndex:me})}),ce.data.list.Processes.map(function(me,Ie){ae.data.push({UID:me[0],PID:me[1],PPID:me[2],C:me[3],STIME:me[4],TTY:me[5],TIME:me[6],CMD:me[7]})}),ve(ae),Te.destroy();case 10:case"end":return xe.stop()}},p)})),Oe.apply(this,arguments)}return Ce.addDataHandler("container:stat:".concat(l.containerInfo.Id),function(p){var m=JSON.parse(p.data);re({type:"update",payload:m})}),(0,a.jsxs)(a.Fragment,{children:[l.showTriggerButton&&(0,a.jsx)(j.Z.Link,{onClick:h()(r()().mark(function p(){var m;return r()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:ue(!0),!((m=l.containerInfo)===null||m===void 0)&&m.Name&&se(l.containerInfo.Id);case 2:case"end":return ae.stop()}},p)})),children:(0,a.jsx)(W.Z,{title:"\u8FD0\u884C\u72B6\u6001",children:(0,a.jsx)(u.Z,{})})},"log"),(0,a.jsxs)(T.Z,{title:"\u5BB9\u5668\u65E5\u5FD7",open:H,onClose:function(){ue(!1)},afterOpenChange:function(m){m||(Ce.progress.close("container:stat:"+l.containerInfo.Id),re({type:"clear",payload:{}}))},width:t.R_,children:[(0,a.jsxs)(P.Z,{ghost:!0,direction:"row",wrap:!0,gutter:[20,20],children:[n.memory&&n.memory.source&&(0,a.jsx)(P.Z,{colSpan:12,title:(0,a.jsx)(u.Z,{}),subTitle:"Memory usage: ".concat((0,$.FI)(n.memory.source.usage)," / ").concat((0,$.FI)(n.memory.source.limit)),headerBordered:!0,bordered:!0,children:(0,a.jsx)(z.Z,{name:"container-memory",data:n.memory.usage,yLabelFormatter:function(m){return(0,$.FI)(parseFloat(m))},yValueFormatter:function(m){return(0,$.FI)(parseFloat(m))},yDomainMaxCallback:function(m){return m.min*2}})}),(0,a.jsx)(P.Z,{colSpan:12,title:(0,a.jsx)(u.Z,{}),subTitle:"Cpu usage: ".concat(n.cpu.source.usage.toFixed(2),"%"),headerBordered:!0,bordered:!0,children:(0,a.jsx)(z.Z,{name:"container-cpu",data:n.cpu.usage,yDomainMaxCallback:function(m){return m.min*100},yLabelFormatter:function(m){return"".concat(parseFloat(m).toFixed(2),"%")}})}),n.io&&n.io.source&&(0,a.jsx)(P.Z,{colSpan:12,title:(0,a.jsx)(u.Z,{}),subTitle:"I/O: ".concat((0,$.FI)(n.io.source.usageRead)," / ").concat((0,$.FI)(n.io.source.usageWrite)),headerBordered:!0,bordered:!0,children:(0,a.jsx)(z.Z,{name:"container-disk",data:n.io.usage,yDomainMaxCallback:function(m){return m.max*2},yLabelFormatter:function(m){return(0,$.FI)(parseFloat(m))}})}),n.network&&n.network.source&&(0,a.jsx)(P.Z,{colSpan:12,title:(0,a.jsx)(u.Z,{}),subTitle:"Network: ".concat((0,$.FI)(n.network.source.usageIn)," / ").concat((0,$.FI)(n.network.source.usageOut)),headerBordered:!0,bordered:!0,children:(0,a.jsx)(z.Z,{name:"container-network",data:n.network.usage,yDomainMaxCallback:function(m){return m.max*2},yLabelFormatter:function(m){return(0,$.FI)(parseFloat(m))}})})]}),(0,a.jsx)(P.Z,{title:(0,a.jsx)(O.Z,{}),subTitle:"Progress",children:(0,a.jsx)(B.Z,{scroll:{x:"max-content"},rowKey:"PID",columns:pe==null?void 0:pe.columns,dataSource:pe==null?void 0:pe.data,pagination:{pageSize:10}})})]})]})}),Y=g,Q=(0,i.forwardRef)(function(l,S){var o,F;(0,i.useImperativeHandle)(S,function(){return{show:function(Oe){return h()(r()().mark(function p(){return r()().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ve(!0),ce.next=3,Te(Oe);case 3:case"end":return ce.stop()}},p)}))()}}});var H=(0,D.useAccess)(),ue=(0,i.useRef)(),fe=(0,i.useState)(),_e=_()(fe,2),n=_e[0],re=_e[1],Pe=(0,i.useState)(!1),Me=_()(Pe,2),pe=Me[0],ve=Me[1],Re=(0,i.useRef)();function Te(se){return Ce.apply(this,arguments)}function Ce(){return Ce=h()(r()().mark(function se(Oe){var p,m;return r()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return(p=ue.current)===null||p===void 0||p.show(),ae.next=3,(0,U.jV)({md5:Oe}).finally(function(){var le;(le=ue.current)===null||le===void 0||le.destroy()});case 3:m=ae.sent,m.data&&(m.data.info.HostConfig.NetworkMode=="host"&&m.data.info.Config.ExposedPorts&&Object.keys(m.data.info.Config.ExposedPorts).map(function(le){m.data.info.NetworkSettings.Ports[le]=[{HostIp:"0.0.0.0",HostPort:le.substring(0,le.indexOf("/"))}]}),re(m.data));case 5:case"end":return ae.stop()}},se)})),Ce.apply(this,arguments)}return(0,a.jsx)(T.Z,{title:"\u5FEB\u6377\u67E5\u770B\u5BB9\u5668 - ".concat((0,$.fi)((o=n==null?void 0:n.info.Name)!==null&&o!==void 0?o:"","/")),open:pe,onClose:function(){ve(!1),l.onFinish&&l.onFinish()},width:t.R_,extra:(0,a.jsxs)(I.u,{access:"canSeeContainerList",space:{split:(0,a.jsx)(v.Z,{type:"vertical"})},children:[(n==null?void 0:n.info)&&n.info.State.Running&&(0,a.jsx)(x.Z,{apiPrefix:"container",name:n.info.Name,title:(0,$.fi)(n.info.Name,"/"),workDir:(F=n.info.Config.WorkingDir)!==null&&F!==void 0?F:""}),(n==null?void 0:n.info)&&H.canSeeContainerListManageOp&&(0,a.jsx)(Ee,{containerInfo:n.info}),(n==null?void 0:n.info)&&n.info.State.Running&&(0,a.jsx)(k.Z,{containerInfo:n.info,showTriggerButton:!0}),(n==null?void 0:n.info)&&n.info.State.Running&&(0,a.jsx)(Y,{containerInfo:n.info,showTriggerButton:!0})]}),children:(0,a.jsx)(w.Z,{ref:ue,children:(0,a.jsxs)(c.Z,{vertical:!0,gap:20,children:[n&&(0,a.jsx)(I.u,{access:"canSeeContainerList",children:(0,a.jsx)(s.Z,{ref:Re,ghost:!0,data:n==null?void 0:n.info,onFinish:h()(r()().mark(function se(){return r()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Te(n.info.Id);case 2:return p.t0=p.sent,p.abrupt("return",[p.t0]);case 4:case"end":return p.stop()}},se)}))})}),n&&(0,a.jsx)(I.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,a.jsx)(C.Z,{ghost:!0,data:n,checkContainerUpgrade:function(){ve(!1),l.onUpgradeFinish&&l.onUpgradeFinish()}})}),n&&(0,a.jsx)(q,{data:n}),n&&(0,a.jsx)(E.Z,{data:n,ghost:!0}),(0,a.jsx)(Z.Z,{data:n==null?void 0:n.info,ghost:!0}),n&&(0,a.jsx)(f.Z,{data:n.info,ghost:!0}),(n==null?void 0:n.info.Config.Labels)&&(0,a.jsx)(P.Z,{title:(0,a.jsx)(O.Z,{}),ghost:!0,subTitle:"\u6807\u7B7E",children:(0,a.jsx)(M.Z,{column:1,bordered:!0,children:(n==null?void 0:n.info.Config.Labels)&&Object.keys(n==null?void 0:n.info.Config.Labels).map(function(se){return(0,a.jsx)(M.Z.Item,{label:se,children:n==null?void 0:n.info.Config.Labels[se]},se)})})})]})})})}),V=Q},90127:function(he,X,e){var K=e(15009),_=e.n(K),J=e(99289),r=e.n(J),G=e(5574),h=e.n(G),i=e(5251),E=e(184),U=e(62370),D=e(5966),O=e(24739),T=e(64317),v=e(52688),c=e(97462),M=e(40056),Z=e(42075),s=e(67294),C=e(1699),x=e(80821),oe=e(2808),ne=e(87662),$=e(52756),j=e(29453),d=e(3616),t=e(85893),a=(0,s.forwardRef)(function(R,Ee){var k;(0,s.useImperativeHandle)(Ee,function(){return{edit:function(b){je(!0),de(b),w.current&&w.current.setFieldsValue({tag:[b.tag],tagColor:b.tagColor,enableShowGroup:b.enableShowGroup})}}});var w=(0,s.useRef)(),f=(0,s.useState)(0),I=h()(f,2),A=I[0],y=I[1],P=(0,s.useState)([]),ee=h()(P,2),L=ee[0],De=ee[1],ie=(0,s.useState)(),q=h()(ie,2),ge=q[0],te=q[1],u=(k=R.containerDetail)===null||k===void 0?void 0:k.info,W=(0,s.useState)(!1),B=h()(W,2),z=B[0],je=B[1];function de(N){w.current&&w.current.setFieldsValue({title:N.title,description:N.description,url:N.url,icon:N.icon,name:N.name})}return(0,s.useEffect)(function(){te([]),(0,j.e1)().then(function(N){te(N.data.list)})},[A]),(0,s.useEffect)(function(){u&&(0,ne.K3)().then(function(N){var b=[];u.NetworkSettings&&u.NetworkSettings.Ports&&Object.keys(u.NetworkSettings.Ports).map(function(g){u.NetworkSettings.Ports[g]&&u.NetworkSettings.Ports[g].map(function(Y){Y.HostPort&&b.push("http://".concat(N.data.serverUrl,":").concat(Y.HostPort))})}),De(b)})},[R.containerDetail]),(0,t.jsxs)(E.a,{drawerProps:{forceRender:!0,width:d.R_},open:z,onFinish:function(){var N=r()(_()().mark(function b(g){var Y,Q,V,l;return _()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return V="",g.tagColor&&g.tagColor.toHexString?g.tagColor.cleared||(V=g.tagColor.toHexString()):V=g.tagColor,l=(Y=g.enableShowGroup)!==null&&Y!==void 0?Y:R.defaultEnableShowGroup,o.next=5,(0,j.A9)({enableShowGroup:l,tag:g.tag?g.tag[0]:"",tagColor:V,name:(Q=u==null?void 0:u.Name)!==null&&Q!==void 0?Q:g.name,title:l?g.title:"",description:l?g.description:"",url:l?g.url:"",icon:l?g.icon:""});case 5:return y(A+1),R.onFinish&&R.onFinish({tag:g.tag,tagColor:g.tagColor,enableShowGroup:l}),o.abrupt("return",!0);case 8:case"end":return o.stop()}},b)}));return function(b){return N.apply(this,arguments)}}(),formRef:w,title:"\u6DFB\u52A0\u5BB9\u5668\u6807\u7B7E",trigger:R.trigger,onOpenChange:function(b){var g;je(b),!b&&(!((g=w.current)===null||g===void 0)&&g.resetFields)&&w.current.resetFields()},children:[R.defaultEnableShowGroup&&(0,t.jsx)(U.Z,{children:(0,t.jsx)(M.Z,{message:(0,$.getLang)("system.home.tagAddContainerTips")})}),(0,t.jsx)(D.Z,{name:"name",hidden:!0}),(0,t.jsxs)(O.UW,{children:[(0,t.jsx)(T.Z,{width:"lg",label:"\u6807\u7B7E\u6216\u5206\u7EC4",layout:"vertical",required:!0,rules:[{required:!0}],onChange:function(b){var g=ge&&ge.find(function(H){return b&&b.length>=1&&H.tag==b[0]});if(g){var Y,Q,V,l=g.item.find(function(H){return H.name==(u==null?void 0:u.Name)});(Y=w.current)===null||Y===void 0||Y.setFieldsValue({tagColor:g.tagColor,enableShowGroup:g.enableShowGroup}),l&&l.name&&de({name:(Q=u==null?void 0:u.Name)!==null&&Q!==void 0?Q:"",title:l?l.title:(0,i.fi)((V=u==null?void 0:u.Name)!==null&&V!==void 0?V:"","/"),description:l&&l.description,url:l&&l.url,icon:l&&l.icon})}if(!b||b.length==0){var S,o=(S=w.current)===null||S===void 0?void 0:S.getFieldValue("url");if(!o||o==""){var F;!((F=w.current)===null||F===void 0)&&F.resetFields&&w.current.resetFields()}}},options:ge&&ge.map(function(N){return{lable:N.tag,value:N.tag}}),name:"tag",mode:"tags",fieldProps:{maxCount:1},placeholder:"\u8BF7\u9009\u62E9\u6216\u662F\u8F93\u5165\u6807\u7B7E\u6216\u662F\u5206\u7EC4"},"tagSelect".concat(A)),!R.defaultEnableShowGroup&&(0,t.jsx)(oe.Z,{label:"\u6807\u7B7E\u80CC\u666F\u989C\u8272",name:"tagColor"})]}),!R.defaultEnableShowGroup&&(0,t.jsx)(C.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(b){var g=b.canSeeEnableCe;return(0,t.jsx)(v.Z,{label:"\u4EE5\u5206\u7EC4\u7684\u5F62\u5F0F\u5C55\u793A\u9996\u9875\u5361\u7247",name:"enableShowGroup",disabled:g,fieldProps:{onChange:function(Q){if(Q){var V,l;de({name:(V=u==null?void 0:u.Name)!==null&&V!==void 0?V:"",title:(0,i.fi)((l=u==null?void 0:u.Name)!==null&&l!==void 0?l:"","/")})}}}})}}),(0,t.jsx)(c.Z,{name:["enableShowGroup"],children:function(b){var g=b.enableShowGroup;return(g||R.defaultEnableShowGroup)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(Z.Z.Compact,{children:[R.containerDetail&&(0,t.jsx)(T.Z,{label:"\u9009\u62E9\u7AEF\u53E3",width:"sm",name:"selectUrl",options:L.map(function(Y){return{label:Y,value:Y}}),onChange:function(Q){var V;!((V=w.current)===null||V===void 0)&&V.setFieldValue&&w.current.setFieldValue("url",Q)}}),(0,t.jsx)(D.Z,{label:"\u8BBF\u95EE\u5730\u5740",name:"url",width:"md"}),(0,t.jsx)(U.Z,{label:" ",children:(0,t.jsx)(x.Z,{action:function(){var Q;return(0,j.R3)({url:(Q=w.current)===null||Q===void 0?void 0:Q.getFieldValue("url")})},onSuccess:function(Q){var V,l,S;(V=w.current)===null||V===void 0||V.setFieldValue("icon",Q.data.icon),(l=w.current)===null||l===void 0||l.setFieldValue("title",Q.data.title),(S=w.current)===null||S===void 0||S.setFieldValue("description",Q.data.description)},children:"\u83B7\u53D6\u4FE1\u606F"})})]}),(0,t.jsxs)(O.UW,{children:[(0,t.jsx)(D.Z,{label:"\u6807\u9898",name:"title"}),(0,t.jsx)(D.Z,{label:"\u63CF\u8FF0",name:"description"})]}),(0,t.jsx)(O.UW,{children:(0,t.jsx)(D.Z,{width:"lg",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u56FE\u6807\u8FDC\u7A0B\u5730\u5740",name:"icon"})})]})}})]})});X.Z=a},81146:function(he,X,e){var K=e(97857),_=e.n(K),J=e(15009),r=e.n(J),G=e(99289),h=e.n(G),i=e(67294),E=e(97269),U=e(62370),D=e(5966),O=e(97462),T=e(82346),v=e(71230),c=e(15746),M=e(34041),Z=e(28036),s=e(84567),C=e(42075),x=e(80821),oe=e(23430),ne=e(93162),$=e.n(ne),j=e(78267),d=e.n(j),t=e(75458),a=e.n(t),R=e(12323),Ee=e(4244),k=e.n(Ee),w=e(24078),f=e(85893),I,A,y,P={decorations:{matchBackground:"",matchBorder:"#FFFF00",activeMatchBackground:"#FFFF0066",matchOverviewRuler:"",activeMatchColorOverviewRuler:""}},ee=(0,i.forwardRef)(function(L,De){var ie=(0,i.useRef)(),q=(0,T.useModel)("subscriber");(0,i.useImperativeHandle)(De,function(){return{fit:function(){I.clear(),y.fit()},start:function(){return h()(r()().mark(function W(){return r()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,ge({lineTotal:500});case 2:case"end":return z.stop()}},W)}))()},close:function(){q.progress.close(L.id)}}});function ge(u){return te.apply(this,arguments)}function te(){return te=h()(r()().mark(function u(W){return r()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:I.clear(),W.download=!1,L.request(W);case 3:case"end":return z.stop()}},u)})),te.apply(this,arguments)}return(0,i.useEffect)(function(){return window.addEventListener("resize",function(){y.fit()}),I=new Ee.Terminal(_()(_()({},R.X),{},{fontSize:12,lineHeight:1.2,allowProposedApi:!0})),y=new j.FitAddon,A=new t.SearchAddon({}),I.loadAddon(y),I.loadAddon(A),I.open(document.getElementById("terminal-container-log")),y.fit(),q.addDataHandler(L.id,function(u){I.write(u.data)}),function(){I.clear(),I.reset(),q.progress.close(L.id)}},[]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(E.A,{submitter:!1,layout:"horizontal",onFinish:function(W){var B;ge({id:L.id,lineTotal:parseInt(W.lineTotal),showTime:(B=W.showTime)!==null&&B!==void 0?B:!1})},formRef:ie,children:(0,f.jsxs)(v.Z,{gutter:[10,0],children:[(0,f.jsx)(c.Z,{span:8,children:(0,f.jsx)(U.Z,{name:"lineTotal",initialValue:"500",label:"\u83B7\u53D6\u65E5\u5FD7\u6761\u6570",children:(0,f.jsxs)(M.Z,{defaultValue:"500",onChange:function(W){var B;(B=ie.current)===null||B===void 0||B.submit()},children:[(0,f.jsx)(M.Z.Option,{value:"100",children:"100\u6761\u65E5\u5FD7\u6570\u636E"}),(0,f.jsx)(M.Z.Option,{value:"200",children:"200\u6761\u65E5\u5FD7\u6570\u636E"}),(0,f.jsx)(M.Z.Option,{value:"500",children:"500\u6761\u65E5\u5FD7\u6570\u636E"}),(0,f.jsx)(M.Z.Option,{value:"1000",children:"1000\u6761\u65E5\u5FD7\u6570\u636E"}),(0,f.jsx)(M.Z.Option,{value:"-1",children:"\u5168\u90E8\uFF08\u4E0B\u8F7D\u53EF\u89C1\uFF09"})]})})}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(Z.ZP,{onClick:function(){I.clear()},children:"\u6E05\u5C4F"})}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(U.Z,{name:"showTime",valuePropName:"checked",children:(0,f.jsx)(s.Z,{onChange:function(W){var B;(B=ie.current)===null||B===void 0||B.submit()},children:"\u663E\u793A\u65F6\u95F4"})})}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(D.Z,{label:"\u67E5\u627E",name:"keywork",fieldProps:{onPressEnter:function(){var W;A.findNext((W=ie.current)===null||W===void 0?void 0:W.getFieldValue("keywork"),P)},onChange:function(W){A.findNext(W.target.value,P)}},placeholder:"\u8F93\u5165\u5173\u952E\u5B57\u56DE\u8F66\u67E5\u627E"})}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(O.Z,{name:["keywork"],children:function(W){var B=W.keywork;return(0,f.jsxs)(C.Z,{size:10,children:[(0,f.jsx)(Z.ZP,{onClick:function(){A.findNext(B,P)},children:"\u4E0B\u4E00\u4E2A"},"next"),(0,f.jsx)(Z.ZP,{onClick:function(){A.findPrevious(B,P)},children:"\u4E0A\u4E00\u4E2A"},"prev")]})}})}),(0,f.jsx)(c.Z,{children:(0,f.jsx)(x.Z,{icon:(0,f.jsx)(oe.Z,{}),action:h()(r()().mark(function u(){var W,B,z;return r()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(!L.download){de.next=5;break}return de.next=3,L.download({lineTotal:parseInt((W=ie.current)===null||W===void 0?void 0:W.getFieldValue("lineTotal")),showTime:(B=ie.current)===null||B===void 0?void 0:B.getFieldValue("showTime")});case 3:z=de.sent,(0,ne.saveAs)(z.data,z.name);case 5:case"end":return de.stop()}},u)})),children:"\u4E0B\u8F7D\u65E5\u5FD7"})})]})}),(0,f.jsx)("div",{style:{marginTop:"20px",height:L.showInDrawer?"75vh":"85vh"},id:"terminal-container-log"})]})});X.Z=ee},27619:function(he,X,e){e.d(X,{Z:function(){return i}});var K=e(5574),_=e.n(K),J=e(82346),r=e(67294),G=e(64389),h=e(85893);function i(E){var U=(0,J.useModel)("@@initialState"),D=U.initialState,O="chart-area-".concat(E.name),T=(0,r.useState)(),v=_()(T,2),c=v[0],M=v[1],Z={};E.data.forEach(function(C){C.show===!1?Z[C.name]=!1:Z[C.name]=!0});var s={tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},valueFormatter:function(x){return E.yValueFormatter?E.yValueFormatter(x):x}},legend:{selected:Z},grid:{left:"0",right:"0",bottom:"0",top:"30",containLabel:!0},xAxis:{type:"category",data:E.data[0].data.map(function(C){return C.date}),boundaryGap:!1,axisLabel:{rotate:20}},yAxis:{type:"value",axisLabel:{formatter:E.yLabelFormatter},max:function(x){if(E.yDomainMaxCallback)return E.yDomainMaxCallback(x)}},series:[]};return(0,r.useEffect)(function(){var C="",x=window.matchMedia("(prefers-color-scheme: dark)");(D==null?void 0:D.theme.algorithm)=="dark"||x.matches?C="dark":C="",c&&!c.isDisposed()&&c.dispose();var oe=document.getElementById(O),ne=G.S1(oe,C);ne.setOption(s);var $=new ResizeObserver(function(){ne.resize()});oe&&$.observe(oe),M(ne)},[D]),(0,r.useEffect)(function(){c&&!c.isDisposed()&&c.setOption({legend:{data:E.data.map(function(C){return C.name})},xAxis:{data:E.data[0].data.map(function(C){return C.date})},series:E.data.map(function(C){return{name:C.name,type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:C.data.map(function(x){return x.value})}})})},[E.data]),(0,h.jsx)("div",{style:{height:200},id:O})}},2808:function(he,X,e){e.d(X,{Z:function(){return i}});var K=e(97857),_=e.n(K),J=e(62370),r=e(51663),G=e(67294),h=e(85893);function i(E){return(0,h.jsx)(J.Z,_()(_()({},E),{},{children:(0,h.jsx)(r.Z,{showText:function(D){return D.toHexString()},allowClear:!0,presets:[{label:"\u9884\u8BBE\u989C\u8272",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},52756:function(he,X,e){e.r(X),e.d(X,{default:function(){return D},getLang:function(){return U}});var K=e(82346),_=e(31418),J=e(26058),r=e(85137),G=e(24963),h=e(65913),i=e(67294),E=e(85893);function U(O,T,v){var c=(0,K.getLocale)();v!=null&&v.XK&&(c="zh-XK");var M=(0,K.getIntl)(c).formatMessage({id:O},T);return M}function D(){var O=(0,i.useRef)(),T=(0,K.useIntl)(),v=function(d){for(var t=arguments.length,a=new Array(t>1?t-1:0),R=1;R<t;R++)a[R-1]=arguments[R];M.notification[d]({message:T.formatMessage({id:"notification.title."+d}),description:a.join(" "),placement:"topRight"})},c=function(d){for(var t=arguments.length,a=new Array(t>1?t-1:0),R=1;R<t;R++)a[R-1]=arguments[R];M.message[d](a.join(" "))},M=_.Z.useApp(),Z=(0,K.useModel)("@@initialState"),s=Z.initialState,C=Z.loading,x=Z.error,oe=Z.refresh,ne=Z.setInitialState,$=(0,K.useModel)("subscriber");return s!=null&&s.user.username&&$.addDataHandler("user:permission:".concat(s==null?void 0:s.user.username),function(j){oe()}),(0,E.jsx)(J.Z,{children:(0,E.jsx)(G.Z.Provider,{value:{notice:{success:function(){for(var d=arguments.length,t=new Array(d),a=0;a<d;a++)t[a]=arguments[a];v.apply(void 0,["success"].concat(t))},error:function(){for(var d=arguments.length,t=new Array(d),a=0;a<d;a++)t[a]=arguments[a];v.apply(void 0,["error"].concat(t))},warning:function(){for(var d=arguments.length,t=new Array(d),a=0;a<d;a++)t[a]=arguments[a];v.apply(void 0,["warning"].concat(t))},info:function(){for(var d=arguments.length,t=new Array(d),a=0;a<d;a++)t[a]=arguments[a];v.apply(void 0,["info"].concat(t))},destroy:function(){M.notification.destroy()}},message:{success:function(){for(var d=arguments.length,t=new Array(d),a=0;a<d;a++)t[a]=arguments[a];c.apply(void 0,["success"].concat(t))},error:function(){for(var d=arguments.length,t=new Array(d),a=0;a<d;a++)t[a]=arguments[a];c.apply(void 0,["error"].concat(t))},warning:function(){for(var d=arguments.length,t=new Array(d),a=0;a<d;a++)t[a]=arguments[a];c.apply(void 0,["warning"].concat(t))},info:function(){for(var d=arguments.length,t=new Array(d),a=0;a<d;a++)t[a]=arguments[a];c.apply(void 0,["info"].concat(t))},loading:function(){for(var d=arguments.length,t=new Array(d),a=0;a<d;a++)t[a]=arguments[a];c.apply(void 0,["loading"].concat(t))},destroy:function(){M.message.destroy()}},loading:{show:function(){O.current&&O.current.show()},destroy:function(){O.current&&O.current.destroy()}},lang:function(d,t){return T.formatMessage({id:d},t)}},children:(0,E.jsxs)(h.Z,{ref:O,children:[(0,E.jsx)(K.Outlet,{}),(0,E.jsx)(r.Z.BackTop,{duration:10,style:{bottom:100}})]})},C?"1":"2")})}},65913:function(he,X,e){var K=e(5574),_=e.n(K),J=e(74330),r=e(67294),G=e(85893),h=(0,r.forwardRef)(function(i,E){(0,r.useImperativeHandle)(E,function(){return{show:function(){T(!0)},destroy:function(){T(!1)}}});var U=(0,r.useState)(!1),D=_()(U,2),O=D[0],T=D[1];return(0,G.jsx)(J.Z,{spinning:O,size:"default",children:i.children})});X.Z=h},84410:function(he,X,e){e.d(X,{a:function(){return E},i:function(){return h}});var K=e(15009),_=e.n(K),J=e(99289),r=e.n(J),G=e(82346);function h(D){return i.apply(this,arguments)}function i(){return i=r()(_()().mark(function D(O){return _()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,G.request)("/api/app/container/get-stat-info",{method:"POST",data:O}));case 1:case"end":return v.stop()}},D)})),i.apply(this,arguments)}function E(D){return U.apply(this,arguments)}function U(){return U=r()(_()().mark(function D(O){return _()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,G.request)("/api/app/container/get-process-info",{method:"POST",data:O}));case 1:case"end":return v.stop()}},D)})),U.apply(this,arguments)}},29453:function(he,X,e){e.d(X,{A9:function(){return h},R3:function(){return T},e1:function(){return E},rn:function(){return D}});var K=e(15009),_=e.n(K),J=e(99289),r=e.n(J),G=e(82346);function h(c){return i.apply(this,arguments)}function i(){return i=r()(_()().mark(function c(M){return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,G.request)("/api/common/tag/create",{method:"POST",data:M});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},c)})),i.apply(this,arguments)}function E(c){return U.apply(this,arguments)}function U(){return U=r()(_()().mark(function c(M){return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,G.request)("/api/common/tag/get-list",{method:"POST",data:M});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},c)})),U.apply(this,arguments)}function D(c){return O.apply(this,arguments)}function O(){return O=r()(_()().mark(function c(M){return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,G.request)("/api/common/tag/delete",{method:"POST",data:M});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},c)})),O.apply(this,arguments)}function T(c){return v.apply(this,arguments)}function v(){return v=r()(_()().mark(function c(M){return _()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,G.request)("/api/pro/tag/get-url-detail",{method:"POST",data:M});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},c)})),v.apply(this,arguments)}}}]);
