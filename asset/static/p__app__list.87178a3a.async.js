"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4316],{36435:function(Se,ee,r){var te=r(15009),o=r.n(te),se=r(64599),f=r.n(se),U=r(99289),W=r.n(U),w=r(9783),b=r.n(w),J=r(5574),F=r.n(J),B=r(67294),Z=r(184),K=r(38345),x=r(97269),z=r(97321),re=r(97462),ie=r(64317),ne=r(5966),H=r(86615),G=r(68602),ve=r(28036),M=r(83403),_=r(24963),j=r(1699),N=r(29177),i=r(45742),je=r(43425),Ce=r(44349),Ie=r(3616),me=r(36146),S=r(85893),Q=(0,B.forwardRef)(function(I,A){var Te=(0,B.useState)(!1),fe=F()(Te,2),le=fe[0],X=fe[1],t=(0,B.useRef)(),Ae=(0,B.useContext)(_.Z),Oe=Ae.message,Le=(0,B.useState)([]),pe=F()(Le,2),he=pe[0],ye=pe[1],L=new me.Uo("components.permissionButton"),De=b()(b()(b()(b()(b()({},M.W6.CONTAINER,"Id"),M.W6.APPSTORE,"name"),M.W6.COMPOSE,"name"),M.W6.REGISTRY,"serverAddress"),M.W6.DOCKER_ENV,"name"),Ue=b()(b()(b()(b()(b()({},M.W6.CONTAINER,"name"),M.W6.APPSTORE,"name"),M.W6.COMPOSE,"name"),M.W6.REGISTRY,"title"),M.W6.DOCKER_ENV,"title"),Pe=De[I.type],We=Ue[I.type],Ze=I.selected.map(function(D){return D[De[I.type]]});return B.useEffect(function(){if(le){if(!I.selected||I.selected.length==0){Oe.error(me.FD.format("message.noDataSelect")),X(!1);return}(0,G.dP)({permission:{uri:I.type,key:Pe,value:Ze}}).then(function(D){var g;(g=t.current)===null||g===void 0||g.setFieldValue("list",Object.keys(D.data.list).map(function(P){return{name:P,type:D.data.list[P].type,users:D.data.list[P].users}}))}),(0,G.lE)().then(function(D){var g,P=(g=D.data)===null||g===void 0||(g=g.list)===null||g===void 0?void 0:g.map(function(l){return{label:l.username,value:l.username}});ye(P)})}},[le]),(0,S.jsx)(j.u,{access:["canSeeEnableEe","canSeeFounder","canSeeManage"],children:(0,S.jsxs)(Z.a,{name:"create",title:L.format("drawerTitle"),open:le,onOpenChange:function(g){if(!g){var P;(P=t.current)===null||P===void 0||P.resetFields()}X(g)},drawerProps:{forceRender:!0,width:Ie.R_},formRef:t,trigger:(0,S.jsx)(ve.ZP,{icon:(0,S.jsx)(N.Z,{}),children:L.format("drawerTriggerButton")}),onFinish:function(){var D=W()(o()().mark(function g(P){var l,C,R;return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:l=f()(P.list),c.prev=1,l.s();case 3:if((C=l.n()).done){c.next=9;break}return R=C.value,c.next=7,(0,G.Db)({usernames:R.users,permissionType:R.type,permission:{uri:I.type,key:Pe,showKey:We,value:[R.name]}});case 7:c.next=3;break;case 9:c.next=14;break;case 11:c.prev=11,c.t0=c.catch(1),l.e(c.t0);case 14:return c.prev=14,l.f(),c.finish(14);case 17:Oe.success(me.FD.format("finish")),X(!1),I.onSuccess();case 20:case"end":return c.stop()}},g,null,[[1,11,14,17]])}));return function(g){return D.apply(this,arguments)}}(),children:[(0,S.jsxs)(K.Z,{ghost:!0,title:(0,S.jsx)(i.Z,{}),subTitle:L.format("batchTitle"),children:[(0,S.jsx)(x.A.Item,{name:"type",style:{marginBottom:0},children:(0,S.jsx)(z.Z.Group,{defaultValue:"admin",onChange:function(g){var P,l,C=(P=t.current)===null||P===void 0?void 0:P.getFieldValue("list");C.forEach(function(R){R.type=g,R.users=[]}),(l=t.current)===null||l===void 0||l.setFieldValue("list",C)},children:["admin","restricted","public"].map(function(D){return(0,S.jsx)(z.Z,{style:{width:240},title:L.format("dataTypeOption.".concat(D)),description:L.format("dataTypeOptionDesc.".concat(D)),value:D},D)})})}),(0,S.jsx)(re.Z,{name:["type"],children:function(g){var P=g.type;if(P==="restricted")return(0,S.jsx)(ie.Z,{mode:"multiple",name:"usernames",label:L.format("formUsernames"),onChange:function(C){var R,k,c=(R=t.current)===null||R===void 0?void 0:R.getFieldValue("list");c.forEach(function(T){T.users=C}),(k=t.current)===null||k===void 0||k.setFieldValue("list",c)},rules:[{required:!0}],request:W()(o()().mark(function l(){var C,R,k;return o()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!(he.length>0)){T.next=2;break}return T.abrupt("return",he);case 2:return T.next=4,(0,G.lE)();case 4:return R=T.sent,k=(C=R.data)===null||C===void 0||(C=C.list)===null||C===void 0?void 0:C.map(function(v){return{label:v.username,value:v.username}}),ye(k),T.abrupt("return",k);case 8:case"end":return T.stop()}},l)}))})}})]}),(0,S.jsx)(K.Z,{ghost:!0,title:(0,S.jsx)(je.Z,{}),subTitle:L.format("dataTitle"),children:(0,S.jsx)(Ce.Z,{name:"list",hideCopyButton:!0,gap:10,items:[{name:"name",label:L.format("dataName"),render:function(g,P,l){var C=l.getCurrentRowData();return(0,S.jsx)(ne.Z,{disabled:!0,label:L.format("dataName"),width:"sm",name:"name"})}},{name:"type",label:L.format("dataType"),render:function(g,P,l){var C=l.getCurrentRowData();return(0,S.jsx)(H.Z.Group,{label:L.format("dataType"),name:"type",radioType:"button",options:["admin","public","restricted"].map(function(R){return{label:L.format("dataTypeOption.".concat(R)),value:R}})})}},{name:"users",label:L.format("dataUsers"),render:function(g,P,l){return(0,S.jsx)(re.Z,{name:["type"],children:function(R){var k=R.type;if(k=="restricted")return(0,S.jsx)(ie.Z,{width:"sm",mode:"tags",name:"users",label:L.format("dataUsers"),options:he})}})}}]})})]})})});ee.Z=Q},14668:function(Se,ee,r){r.r(ee),r.d(ee,{default:function(){return k}});var te=r(64599),o=r.n(te),se=r(15009),f=r.n(se),U=r(99289),W=r.n(U),w=r(5574),b=r.n(w),J=r(90078),F=r(28036),B=r(78099),Z=r(97269),K=r(62370),x=r(42075),z=r(25593),re=r(40411),ie=r(34041),ne=r(96074),H=r(83062),G=r(84567),ve=r(50136),M=r(82346),_=r(45742),j=r(89035),N=r(95591),i=r(86548),je=r(74842),Ce=r(87784),Ie=r(33160),me=r(30159),S=r(94359),Q=r(13822),I=r(80821),A=r(67294),Te=r(62597),fe=r(87662),le=r(16165),X=r(5251),t=r(85893),Ae=function(){return(0,t.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18403",children:(0,t.jsx)("path",{d:"M224 192v64H96v576h128v64h64v-64h64v64h64v-64h64v64h64v-64h64v64h64v-64h64v64h64v-64h128V256h-128V192h-64v64h-64V192h-64v64h-64V192h-64v64h-64V192h-64v64H288V192z m-64 128h704v448H160z m96 64c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32zM256 512c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m512 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32zM256 640c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z","p-id":"18404"})})},Oe=function(){return(0,t.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18546",children:(0,t.jsx)("path",{d:"M64 224v576h416v-32c0-17.76 14.24-32 32-32 17.76 0 32 14.24 32 32v32h416V224z m64 64h768v288H128z m64 64v160h192v-160z m224 0v160h192v-160z m224 0v160h192v-160zM256 416h64v32H256z m224 0h64v32h-64z m224 0h64v32h-64zM128 640h768v96h-300.992c-14.144-35.52-42.752-64-83.008-64-40.256 0-68.864 28.48-83.008 64H128z","p-id":"18547"})})};function Le(c){var T,v,_e,ue,ge,Re;return(0,t.jsx)(t.Fragment,{children:c.value&&c.value.memory&&c.value.memory.out>0?(0,t.jsxs)(x.Z,{children:[(0,t.jsxs)(H.Z,{title:"Cpu: ".concat((T=c.value)===null||T===void 0?void 0:T.cpu.toFixed(2),"%"),children:[(0,t.jsx)(le.Z,{component:Ae,style:{width:15,lineHeight:20}})," ","".concat((v=c.value)===null||v===void 0?void 0:v.cpu.toFixed(2),"%")]}),(0,t.jsxs)(H.Z,{title:"Memory: ".concat((0,X.FI)((_e=c.value)===null||_e===void 0?void 0:_e.memory.in)," / ").concat((0,X.FI)((ue=c.value)===null||ue===void 0?void 0:ue.memory.out)),children:[(0,t.jsx)(le.Z,{component:Oe,style:{width:15,lineHeight:20}})," ","".concat((((ge=c.value)===null||ge===void 0?void 0:ge.memory.in)/((Re=c.value)===null||Re===void 0?void 0:Re.memory.out)*100).toFixed(2),"%")]})]}):""})}var pe=r(67255),he=r(37413),ye=r(46357),L=r(99922),De=r(83403),Ue=r(20578),Pe=r(99861),We=r(78914),Ze=r(29453),D=r(8287),g=r(93362),P=r(78451),l=r(36146),C=r(36435),R=r(1699);function k(){var c,T,v=(0,A.useRef)(),_e=(0,A.useState)(""),ue=b()(_e,2),ge=ue[0],Re=ue[1],sr=(0,A.useState)(),ze=b()(sr,2),ae=ze[0],ir=ze[1],lr=(0,A.useState)(1),Ne=b()(lr,2),ur=Ne[0],or=Ne[1],dr=(0,A.useState)([]),Ve=b()(dr,2),oe=Ve[0],cr=Ve[1],He=(0,A.useRef)(),Ge=(0,A.useRef)(),Qe=(0,A.useRef)(),Ye=(0,A.useRef)(),$e=(0,M.useAccess)(),vr=(0,A.useState)(),Je=b()(vr,2),de=Je[0],mr=Je[1],Xe=(0,A.useRef)(),Fe=(0,A.useRef)(),qe=(0,A.useRef)(),fr=(0,A.useState)([]),er=b()(fr,2),be=er[0],pr=er[1],hr=(0,M.useLocation)(),rr=new l.Uo("components.appDetail.appDetailQuickManage");return(0,A.useEffect)(function(){(0,fe.K3)().then(function(O){var m;Re((m=O.data.serverUrl)!==null&&m!==void 0?m:"")}),!$e.canSeeEnableCe&&(0,Ue.q)().then(function(O){mr(O.data)}),(0,Ze.e1)().then(function(O){pr(O.data.list)})},[]),(0,t.jsxs)(J._z,{header:{extra:[(0,t.jsx)(R.u,{access:"canSeeContainerListManageCreate",children:(0,t.jsx)(M.Link,{to:"/app/create/image",children:(0,t.jsx)(F.ZP,{type:"primary",children:l.Ob.format("container.create")})})},"create")]},children:[(0,t.jsx)(ye.Z,{ref:He,onFinish:function(){var m,s;!((m=v.current)===null||m===void 0)&&m.reloadAndRest&&((s=v.current)===null||s===void 0||s.reloadAndRest())},onUpgradeFinish:function(){var m,s;!((m=v.current)===null||m===void 0)&&m.reloadAndRest&&((s=v.current)===null||s===void 0||s.reloadAndRest())}}),(0,t.jsx)(L.Z,{showFileExplorer:!0,ref:Ge}),(0,t.jsx)(D.Z,{ref:Qe}),(0,t.jsx)(Pe.Z,{ref:Fe,finishAutoHide:!0}),(0,t.jsx)(We.Z,{ref:qe}),(0,t.jsx)(g.Z,{showConsole:!0,ref:Ye}),(0,t.jsx)(B.Z,{actionRef:v,scroll:{x:"max-content"},columns:[{key:"title",title:l.FD.format("listTitle"),width:300,dataIndex:"siteTitle",sorter:function(m,s){return m.Names[0].localeCompare(s.Names[0])},sortDirections:["descend","ascend"],render:function(m,s,E,p,a){var n=(0,X.fi)(s.Names[0],"/");ae!=null&&ae.siteList&&ae.siteList.map(function(u){u.containerInfo&&u.containerInfo.Id==s.Id&&u.siteTitle!=""&&(n=u.siteTitle)}),s.Labels&&s.Labels["com.dpanel.container.title"]&&(n=s.Labels["com.dpanel.container.title"]);var d=de&&de.container?de.container.find(function(u){return u.id==s.Id}):!1;return(0,t.jsxs)(x.Z,{direction:"vertical",children:[(0,t.jsx)(z.Z.Link,{onClick:function(){var y;(y=He.current)===null||y===void 0||y.show(s.Id)},children:(0,t.jsx)(P.Z,{content:n})}),!$e.canSeeEnableCe&&d&&(0,t.jsx)(re.Z,{count:"new"})]})}},{title:l.FD.format("listTag"),hidden:!0,dataIndex:"tag",renderFormItem:function(m,s,E,p){return(0,t.jsx)(ie.Z,{options:be&&be.map(function(a){return{lable:a.tag,value:a.tag}})})}},{key:"ports",title:l.FD.format("listAccess"),tooltip:l.FD.format("listAccessTip"),width:150,dataIndex:"ports",search:!1,render:function(m,s,E,p){var a=[],n=[],d=[];return s!=null&&s.Ports&&s.Ports.map(function(u,y){u.PublicPort?a.push(u):n.push(u)}),ae!=null&&ae.domainList&&ae.domainList.map(function(u,y){s.Names.indexOf(u.containerId)>-1&&d.push(u.setting.enableSSL?"https://"+u.serverName:"http://"+u.serverName)}),(0,t.jsx)(he.Z,{publicPort:a,privatePort:n,domain:d,serverIp:ge})}},{title:l.FD.format("listUsage"),width:200,search:!1,key:"usage",sorter:function(m,s){var E={},p={};if(oe){var a,n;E=(a=oe.find(function(d){return m.Id.startsWith(d.container)}))!==null&&a!==void 0?a:{},p=(n=oe.find(function(d){return s.Id.startsWith(d.container)}))!==null&&n!==void 0?n:{}}return JSON.stringify(E).localeCompare(JSON.stringify(p))},render:function(m,s,E,p,a){if(!oe||oe.length<=0)return"";var n={};return oe.filter(function(d){s.Id.indexOf(d.container)==0&&(n=d)}),(0,t.jsx)(Le,{value:n})}},{title:l.FD.format("listRunStatus"),key:"status",dataIndex:["container","status"],search:!1,width:130,render:function(m,s,E,p){return s.Status.indexOf("(healthy)")>-1?s.State="healthy":s.Status.indexOf("(unhealthy)")>-1&&(s.State="unhealthy"),(0,t.jsx)(S.Z,{status:"container.".concat(s.State),tip:"".concat(s.State," ").concat(s.Status)})}},{title:l.FD.format("listImageName"),key:"image",search:!1,width:150,render:function(m,s,E,p){return(0,t.jsx)("span",{style:{wordBreak:"break-word"},children:(0,t.jsx)(z.Z.Link,{onClick:function(){var n;(n=qe.current)===null||n===void 0||n.show(s.Image)},children:s.Image})})}},{title:l.FD.format("listCreatedAt"),width:170,dataIndex:["Created"],render:function(m,s,E,p,a){return(0,X.ZM)(s.Created*1e3)},sorter:function(m,s){return new Date(m.Created*1e3).toISOString().localeCompare(new Date(s.Created*1e3).toISOString())},search:!1,sortDirections:["descend","ascend"]},{title:l.FD.format("listManage"),valueType:"option",key:"option",width:200,fixed:"right",hidden:!$e.canSeeContainerListManage,render:function(m,s,E,p){return(0,t.jsxs)(x.Z,{split:(0,t.jsx)(ne.Z,{type:"vertical"}),children:[(0,t.jsx)(z.Z.Link,{onClick:function(){var n;(n=Qe.current)===null||n===void 0||n.show(s.Id)},children:(0,t.jsx)(H.Z,{title:l.FD.format("listManageLog"),children:(0,t.jsx)(_.Z,{})})},"log"),(s.State=="running"||s.State=="healthy"||s.State=="unhealthy")&&(0,t.jsx)(z.Z.Link,{onClick:function(){var n;(n=Ge.current)===null||n===void 0||n.show({url:"/console/container/".concat(s.Id),title:(0,X.fi)(s.Names[0],"/")})},children:(0,t.jsx)(H.Z,{title:l.FD.format("listManageConsole"),children:(0,t.jsx)(j.Z,{})})},"console"),(s.State=="running"||s.State=="healthy"||s.State=="unhealthy")&&(0,t.jsx)(z.Z.Link,{onClick:function(){var n;(n=Ye.current)===null||n===void 0||n.showContainer(s.Names[0])},children:(0,t.jsx)(H.Z,{title:l.FD.format("listManageFileExplorer"),children:(0,t.jsx)(N.Z,{})})},"file"),(0,t.jsx)(M.Link,{to:"/app/create/image?id="+s.Id,children:(0,t.jsx)(H.Z,{title:l.FD.format("listManageEdit"),children:(0,t.jsx)(i.Z,{})})},"edit")]})}}],rowKey:"Id",request:function(){var O=W()(f()().mark(function m(s,E,p){var a,n,d,u,y,e,V;return f()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(0,Q.IE)({tag:s.title,siteTitle:s.title,md5:s.Id});case 2:return n=q.sent,d="",u=[],s.tag&&be&&(u=(y=(e=be.find(function($){return $.tag==s.tag}))===null||e===void 0?void 0:e.item.map(function($){var Y;return(Y=$.name)!==null&&Y!==void 0?Y:""}))!==null&&y!==void 0?y:[]),V=[],d!=""?n.data.list.map(function($){$.Names.map(function(Y){Y.startsWith("/"+d)&&V.push($)})}):u&&u.length>0?n.data.list.map(function($){$.Names.map(function(Y){u.indexOf(Y)>-1&&V.push($)})}):V=n.data.list,ir(n.data),or(ur+1),(0,fe.Cz)({follow:!1}).then(function($){cr($.data.list)}),q.abrupt("return",{data:(a=V)!==null&&a!==void 0?a:[],success:!0,total:n.data.list.length});case 12:case"end":return q.stop()}},m)}));return function(m,s,E){return O.apply(this,arguments)}}(),rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(m){var s=m.selectedRowKeys,E=m.selectedRows;return(0,t.jsxs)(x.Z,{size:16,wrap:!0,children:[(0,t.jsx)(C.Z,{type:De.W6.CONTAINER,selected:E,onSuccess:function(){var a,n;return!((a=v.current)===null||a===void 0)&&a.reloadAndRest&&((n=v.current)===null||n===void 0||n.reloadAndRest()),!0}},"dataPermission"),(0,t.jsxs)(R.u,{access:"canSeeContainerList",space:{size:16,wrap:!0},children:[(0,t.jsx)(I.Z,{icon:(0,t.jsx)(je.Z,{}),action:W()(f()().mark(function p(){var a,n,d,u;return f()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=o()(s),e.prev=1,a.s();case 3:if((n=a.n()).done){e.next=10;break}return d=n.value,e.next=7,(0,Q.IW)({md5:d,operate:"start"});case 7:u=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),a.e(e.t0);case 15:return e.prev=15,a.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},p,null,[[1,12,15,18]])})),onSuccess:function(){var a,n;return!((a=v.current)===null||a===void 0)&&a.reloadAndRest&&((n=v.current)===null||n===void 0||n.reloadAndRest()),!0},children:l.FD.format("listManageStart")}),(0,t.jsx)(I.Z,{action:W()(f()().mark(function p(){var a,n,d,u;return f()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=o()(s),e.prev=1,a.s();case 3:if((n=a.n()).done){e.next=10;break}return d=n.value,e.next=7,(0,Q.IW)({md5:d,operate:"stop"});case 7:u=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),a.e(e.t0);case 15:return e.prev=15,a.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},p,null,[[1,12,15,18]])})),icon:(0,t.jsx)(Ce.Z,{}),onSuccess:function(){var a,n;return!((a=v.current)===null||a===void 0)&&a.reloadAndRest&&((n=v.current)===null||n===void 0||n.reloadAndRest()),!0},children:l.FD.format("listManageStop")}),(0,t.jsx)(I.Z,{action:W()(f()().mark(function p(){var a,n,d,u;return f()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=o()(s),e.prev=1,a.s();case 3:if((n=a.n()).done){e.next=10;break}return d=n.value,e.next=7,(0,Q.IW)({md5:d,operate:"restart"});case 7:u=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),a.e(e.t0);case 15:return e.prev=15,a.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},p,null,[[1,12,15,18]])})),onSuccess:function(){var a,n;return!((a=v.current)===null||a===void 0)&&a.reloadAndRest&&((n=v.current)===null||n===void 0||n.reloadAndRest()),!0},icon:(0,t.jsx)(Ie.Z,{}),children:l.FD.format("listManageRestart")}),(0,t.jsx)(I.Z,{action:W()(f()().mark(function p(){var a,n,d,u;return f()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=o()(s),e.prev=1,a.s();case 3:if((n=a.n()).done){e.next=10;break}return d=n.value,e.next=7,(0,Q.IW)({md5:d,operate:"pause"});case 7:u=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),a.e(e.t0);case 15:return e.prev=15,a.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},p,null,[[1,12,15,18]])})),onSuccess:function(){var a,n;return!((a=v.current)===null||a===void 0)&&a.reloadAndRest&&((n=v.current)===null||n===void 0||n.reloadAndRest()),!0},icon:(0,t.jsx)(me.Z,{}),children:l.FD.format("listManagePause")}),(0,t.jsx)(I.Z,{action:W()(f()().mark(function p(){var a,n,d,u;return f()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=o()(s),e.prev=1,a.s();case 3:if((n=a.n()).done){e.next=10;break}return d=n.value,e.next=7,(0,Q.IW)({md5:d,operate:"unpause"});case 7:u=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),a.e(e.t0);case 15:return e.prev=15,a.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},p,null,[[1,12,15,18]])})),onSuccess:function(){var a,n;return!((a=v.current)===null||a===void 0)&&a.reloadAndRest&&((n=v.current)===null||n===void 0||n.reloadAndRest()),!0},icon:(0,t.jsx)(je.Z,{}),children:l.FD.format("listManageUnpause")})]}),(0,t.jsx)(ne.Z,{}),(0,t.jsx)(R.u,{showProTips:!0,access:["canSeeEnableCe","canSeeContainerListManageOp"],children:function(a){var n=a.canSeeEnableCe,d=a.canSeeContainerListManageOp;return d&&(0,t.jsx)(I.Z,{disabled:n,type:"primary",action:W()(f()().mark(function u(){var y,e,V,ce,q,$,Y,Ee,nr,Be,Ke,ke,ar;return f()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:V=[],ce=o()(E),h.prev=2,$=f()().mark(function _r(){var we,tr,Me;return f()().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:tr=q.value,Me=de==null||(we=de.container)===null||we===void 0?void 0:we.find(function(gr){return gr.id==tr.Id}),Me&&!V.includes(Me.image)&&V.push(Me.image);case 3:case"end":return xe.stop()}},_r)}),ce.s();case 5:if((q=ce.n()).done){h.next=9;break}return h.delegateYield($(),"t0",7);case 7:h.next=5;break;case 9:h.next=14;break;case 11:h.prev=11,h.t1=h.catch(2),ce.e(h.t1);case 14:return h.prev=14,ce.f(),h.finish(14);case 17:if(V){h.next=19;break}return h.abrupt("return",!1);case 19:return h.next=21,(y=Fe.current)===null||y===void 0?void 0:y.pull(V);case 21:(e=Fe.current)===null||e===void 0||e.finish(),Ee=o()(E),h.prev=23,Ee.s();case 25:if((nr=Ee.n()).done){h.next=32;break}return ar=nr.value,h.next=29,(0,Q.RF)({md5:(Be=ar.Id)!==null&&Be!==void 0?Be:"",imageTag:"",enableBak:(Ke=(ke=Xe.current)===null||ke===void 0?void 0:ke.getFieldValue("enableBak"))!==null&&Ke!==void 0?Ke:!1});case 29:Y=h.sent;case 30:h.next=25;break;case 32:h.next=37;break;case 34:h.prev=34,h.t2=h.catch(23),Ee.e(h.t2);case 37:return h.prev=37,Ee.f(),h.finish(37);case 40:return h.abrupt("return",Y);case 41:case"end":return h.stop()}},u,null,[[2,11,14,17],[23,34,37,40]])})),onSuccess:function(){var y,e;return!((y=v.current)===null||y===void 0)&&y.reloadAndRest&&((e=v.current)===null||e===void 0||e.reloadAndRest()),!0},confirm:(0,t.jsxs)(x.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,t.jsx)(z.Z.Text,{children:rr.format("upgradeConfirm")}),(0,t.jsx)(Z.A,{formRef:Xe,submitter:!1,layout:"inline",children:(0,t.jsx)(K.Z,{name:"enableBak",valuePropName:"checked",children:(0,t.jsx)(G.Z,{children:rr.format("upgradeConfirmEnableBak")})})})]}),children:l.FD.format("listManageUpgradeBatch")})}}),(0,t.jsx)(R.u,{access:"canSeeContainerListManageDelete",children:(0,t.jsx)(I.Z,{danger:!0,type:"primary",action:W()(f()().mark(function p(){var a,n,d,u;return f()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=o()(s),e.prev=1,n.s();case 3:if((d=n.n()).done){e.next=10;break}return u=d.value,e.next=7,(0,Te.Ct)({md5:u,deleteImage:!1,deleteVolume:!1});case 7:a=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:return e.abrupt("return",a);case 19:case"end":return e.stop()}},p,null,[[1,12,15,18]])})),onSuccess:function(){var a,n;return!((a=v.current)===null||a===void 0)&&a.reloadAndRest&&((n=v.current)===null||n===void 0||n.reloadAndRest()),!0},onError:function(){var a,n;return!((a=v.current)===null||a===void 0)&&a.reset&&((n=v.current)===null||n===void 0||n.reset()),!0},confirm:"notification.confirm.title",children:l.FD.format("listManageDeleteBatch")})})]})},pagination:(0,pe.O)({page:(c=(T=hr.state)===null||T===void 0?void 0:T.page)!==null&&c!==void 0?c:void 0}),search:{collapsed:!1},tableExtraRender:function(){return(0,t.jsx)(ve.Z,{mode:"horizontal",selectedKeys:["list"],items:[{label:(0,t.jsx)(M.Link,{to:"/app/list",replace:!0,children:l.Ob.format("container.list")}),key:"list"},{label:(0,t.jsx)(M.Link,{to:"/app/list/recycle",replace:!0,children:l.Ob.format("container.list.recycle")}),key:"recycle"}]})},toolBarRender:function(){return[(0,t.jsx)(R.u,{access:"canSeeContainerListManageDelete",children:(0,t.jsx)(I.Z,{action:function(){return(0,Q.KK)()},onSuccess:function(){var s,E;return!((s=v.current)===null||s===void 0)&&s.reloadAndRest&&((E=v.current)===null||E===void 0||E.reloadAndRest()),!0},onError:function(){var s,E;return!((s=v.current)===null||s===void 0)&&s.reset&&((E=v.current)===null||E===void 0||E.reset()),!0},tips:l.FD.format("listManagePruneTip"),confirm:"notification.confirm.title",children:l.FD.format("listManagePrune")})},"clear")]},columnsState:(0,pe.j)("app-list")})]})}},62597:function(Se,ee,r){r.d(ee,{$G:function(){return W},Ct:function(){return ie},Tb:function(){return B},XH:function(){return K},cl:function(){return J},fp:function(){return b},iE:function(){return z},xb:function(){return H},ze:function(){return ve}});var te=r(15009),o=r.n(te),se=r(99289),f=r.n(se),U=r(82346);function W(_){return w.apply(this,arguments)}function w(){return w=f()(o()().mark(function _(j){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,U.request)("/api/app/site/create-by-image",{method:"POST",data:j}));case 1:case"end":return i.stop()}},_)})),w.apply(this,arguments)}var b={EnvValueRuleRequired:1,EnvValueRuleDisabled:2,EnvValueTypeNumber:1024,EnvValueTypeText:2048,EnvValueTypeSelect:4096,EnvValueTypeSelectMultiple:8192};function J(_){return F.apply(this,arguments)}function F(){return F=f()(o()().mark(function _(j){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,U.request)("/api/app/site/get-list",{method:"POST",data:j}));case 1:case"end":return i.stop()}},_)})),F.apply(this,arguments)}function B(_){return Z.apply(this,arguments)}function Z(){return Z=f()(o()().mark(function _(j){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return j.download=!1,i.next=3,(0,U.request)("/api/app/log/run",{method:"POST",data:j});case 3:return i.abrupt("return",i.sent);case 4:case"end":return i.stop()}},_)})),Z.apply(this,arguments)}function K(_){return x.apply(this,arguments)}function x(){return x=f()(o()().mark(function _(j){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return j.download=!0,i.next=3,(0,U.request)("/api/app/log/run",{method:"POST",data:j,responseType:"blob"});case 3:return i.abrupt("return",i.sent);case 4:case"end":return i.stop()}},_)})),x.apply(this,arguments)}function z(_){return re.apply(this,arguments)}function re(){return re=f()(o()().mark(function _(j){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return j.id=String(j.id),i.next=3,(0,U.request)("/api/app/site/get-detail",{data:j,method:"POST"});case 3:return i.abrupt("return",i.sent);case 4:case"end":return i.stop()}},_)})),re.apply(this,arguments)}function ie(_){return ne.apply(this,arguments)}function ne(){return ne=f()(o()().mark(function _(j){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,U.request)("/api/app/container/delete",{method:"POST",data:j}));case 1:case"end":return i.stop()}},_)})),ne.apply(this,arguments)}function H(_){return G.apply(this,arguments)}function G(){return G=f()(o()().mark(function _(j){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,U.request)("/api/app/site/delete",{method:"POST",data:j}));case 1:case"end":return i.stop()}},_)})),G.apply(this,arguments)}function ve(_){return M.apply(this,arguments)}function M(){return M=f()(o()().mark(function _(j){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,U.request)("/api/app/container/ignore",{method:"POST",data:j}));case 1:case"end":return i.stop()}},_)})),M.apply(this,arguments)}},20578:function(Se,ee,r){r.d(ee,{q:function(){return b},w:function(){return W}});var te=r(15009),o=r.n(te),se=r(99289),f=r.n(se),U=r(82346);function W(F){return w.apply(this,arguments)}function w(){return w=f()(o()().mark(function F(B){return o()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,U.request)("/api/pro/container/recycle-restore",{data:B,method:"POST"});case 2:return K.abrupt("return",K.sent);case 3:case"end":return K.stop()}},F)})),w.apply(this,arguments)}function b(){return J.apply(this,arguments)}function J(){return J=f()(o()().mark(function F(){return o()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,U.request)("/api/pro/container/check-all-upgrade",{method:"POST"});case 2:return Z.abrupt("return",Z.sent);case 3:case"end":return Z.stop()}},F)})),J.apply(this,arguments)}}}]);
