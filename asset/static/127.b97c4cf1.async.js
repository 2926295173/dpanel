"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[127],{90127:function(I,W,n){var h=n(15009),d=n.n(h),B=n(99289),P=n.n(B),T=n(5574),D=n.n(T),O=n(29453),M=n(5251),R=n(184),b=n(62370),E=n(24739),C=n(64317),j=n(52688),l=n(97462),m=n(5966),U=n(38925),a=n(42075),S=n(67294),V=n(1699),w=n(80821),H=n(2808),x=n(87662),c=n(52756),t=n(85893),r=(0,S.forwardRef)(function(e,A){var Z;(0,S.useImperativeHandle)(A,function(){return{}});var p=(0,S.useRef)(),Y=(0,S.useState)(0),z=D()(Y,2),G=z[0],q=z[1],k=(0,S.useState)([]),$=D()(k,2),ee=$[0],ne=$[1],te=(0,S.useState)(),J=D()(te,2),F=J[0],Q=J[1],s=(Z=e.containerDetail)===null||Z===void 0?void 0:Z.info;function X(g){p.current&&p.current.setFieldsValue({title:g.title,description:g.description,url:g.url,icon:g.icon})}return(0,S.useEffect)(function(){Q([]),(0,O.pK)().then(function(g){Q(g.data.list)})},[G]),(0,S.useEffect)(function(){s&&(0,x.K3)().then(function(g){var f=[];s.NetworkSettings&&s.NetworkSettings.Ports&&Object.keys(s.NetworkSettings.Ports).map(function(o){s.NetworkSettings.Ports[o]&&s.NetworkSettings.Ports[o].map(function(v){v.HostPort&&f.push("http://".concat(g.data.serverUrl,":").concat(v.HostPort))})}),ne(f)})},[e.containerDetail]),(0,t.jsxs)(R.a,{onFinish:function(){var g=P()(d()().mark(function f(o){var v,i,_,u;return d()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return _="",o.tagColor&&o.tagColor.toHexString?o.tagColor.cleared||(_=o.tagColor.toHexString()):_=o.tagColor,u=(v=o.enableShowGroup)!==null&&v!==void 0?v:e.enableShowGroup,K.next=5,(0,O.s6)({enableShowGroup:u,tag:o.tag?o.tag[0]:"",tagColor:_,containerName:(i=s==null?void 0:s.Name)!==null&&i!==void 0?i:"",title:u?o.title:"",description:u?o.description:"",url:u?o.url:"",icon:u?o.icon:""});case 5:return q(G+1),e.onFinish&&e.onFinish({tag:o.tag,tagColor:o.tagColor,enableShowGroup:u}),K.abrupt("return",!0);case 8:case"end":return K.stop()}},f)}));return function(f){return g.apply(this,arguments)}}(),formRef:p,title:"\u6DFB\u52A0\u5BB9\u5668\u6807\u7B7E",trigger:e.trigger,onOpenChange:function(f){var o;f&&(!((o=p.current)===null||o===void 0)&&o.resetFields)&&p.current.resetFields()},children:[e.enableShowGroup&&(0,t.jsx)(b.Z,{children:(0,t.jsx)(U.Z,{message:(0,c.getLang)("system.home.containerTagAddContainerTips")})}),(0,t.jsxs)(E.UW,{children:[(0,t.jsx)(C.Z,{width:"lg",label:"\u6807\u7B7E\u6216\u5206\u7EC4",layout:"vertical",required:!0,rules:[{required:!0}],onChange:function(f){var o=F&&F.find(function(N){return f&&f.length>=1&&N.tag==f[0]});if(o){var v,i,_,u=o.container.find(function(N){return N.containerName==(s==null?void 0:s.Name)});(v=p.current)===null||v===void 0||v.setFieldsValue({tagColor:o.tagColor,enableShowGroup:o.enableShowGroup}),u&&u.containerName&&X({containerName:(i=s==null?void 0:s.Name)!==null&&i!==void 0?i:"",title:u?u.title:(0,M.fi)((_=s==null?void 0:s.Name)!==null&&_!==void 0?_:"","/"),description:u&&u.description,url:u&&u.url,icon:u&&u.icon})}if(!f||f.length==0){var L,K=(L=p.current)===null||L===void 0?void 0:L.getFieldValue("url");if(!K||K==""){var y;!((y=p.current)===null||y===void 0)&&y.resetFields&&p.current.resetFields()}}},options:F&&F.map(function(g){return{lable:g.tag,value:g.tag}}),name:"tag",mode:"tags",fieldProps:{maxCount:1},placeholder:"\u8BF7\u9009\u62E9\u6216\u662F\u8F93\u5165\u6807\u7B7E\u6216\u662F\u5206\u7EC4"},"tagSelect".concat(G)),!e.enableShowGroup&&(0,t.jsx)(H.Z,{label:"\u6807\u7B7E\u80CC\u666F\u989C\u8272",name:"tagColor"})]}),!e.enableShowGroup&&(0,t.jsx)(V.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(f){var o=f.canSeeEnableCe;return(0,t.jsx)(j.Z,{label:"\u4EE5\u5206\u7EC4\u7684\u5F62\u5F0F\u5C55\u793A\u9996\u9875\u5361\u7247",name:"enableShowGroup",disabled:o,fieldProps:{onChange:function(i){if(i){var _,u;X({containerName:(_=s==null?void 0:s.Name)!==null&&_!==void 0?_:"",title:(0,M.fi)((u=s==null?void 0:s.Name)!==null&&u!==void 0?u:"","/")})}}}})}}),(0,t.jsx)(l.Z,{name:["enableShowGroup"],children:function(f){var o=f.enableShowGroup;return(o||e.enableShowGroup)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a.Z.Compact,{children:[e.containerDetail&&(0,t.jsx)(C.Z,{label:"\u9009\u62E9\u7AEF\u53E3",width:"sm",name:"selectUrl",options:ee.map(function(v){return{label:v,value:v}}),onChange:function(i){var _;!((_=p.current)===null||_===void 0)&&_.setFieldValue&&p.current.setFieldValue("url",i)}}),(0,t.jsx)(m.Z,{label:"\u8BBF\u95EE\u5730\u5740",name:"url",width:"md"}),(0,t.jsx)(b.Z,{label:" ",children:(0,t.jsx)(w.Z,{action:function(){var i,_;return(0,O.d1)({containerName:(i=s==null?void 0:s.Name)!==null&&i!==void 0?i:"",url:(_=p.current)===null||_===void 0?void 0:_.getFieldValue("url")})},onSuccess:function(i){var _,u,L;(_=p.current)===null||_===void 0||_.setFieldValue("icon",i.data.icon),(u=p.current)===null||u===void 0||u.setFieldValue("title",i.data.title),(L=p.current)===null||L===void 0||L.setFieldValue("description",i.data.description)},children:"\u83B7\u53D6\u4FE1\u606F"})})]}),(0,t.jsxs)(E.UW,{children:[(0,t.jsx)(m.Z,{label:"\u6807\u9898",name:"title"}),(0,t.jsx)(m.Z,{label:"\u63CF\u8FF0",name:"description"})]}),(0,t.jsx)(E.UW,{children:(0,t.jsx)(m.Z,{width:"lg",placeholder:"\u4EE5 https \u6216\u662F http \u5F00\u5934\uFF0C\u4F18\u5148\u4F7F\u7528\u4E0A\u4F20\u56FE\u7247",label:"\u56FE\u6807\u8FDC\u7A0B\u5730\u5740",name:"icon"})})]})}})]})});W.Z=r},2808:function(I,W,n){n.d(W,{Z:function(){return O}});var h=n(97857),d=n.n(h),B=n(62370),P=n(51663),T=n(67294),D=n(85893);function O(M){return(0,D.jsx)(B.Z,d()(d()({},M),{},{children:(0,D.jsx)(P.Z,{showText:function(b){return b.toHexString()},allowClear:!0,presets:[{label:"\u9884\u8BBE\u989C\u8272",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},52756:function(I,W,n){n.r(W),n.d(W,{default:function(){return b},getLang:function(){return R}});var h=n(82346),d=n(31418),B=n(26058),P=n(85137),T=n(24963),D=n(65913),O=n(67294),M=n(85893);function R(E,C){return(0,h.getIntl)((0,h.getLocale)()).formatMessage({id:E},C)}function b(){var E=(0,O.useRef)(),C=(0,h.useIntl)(),j=function(t){for(var r=arguments.length,e=new Array(r>1?r-1:0),A=1;A<r;A++)e[A-1]=arguments[A];m.notification[t]({message:C.formatMessage({id:"notification.title."+t}),description:e.join(" "),placement:"topRight"})},l=function(t){for(var r=arguments.length,e=new Array(r>1?r-1:0),A=1;A<r;A++)e[A-1]=arguments[A];m.message[t](e.join(" "))},m=d.Z.useApp(),U=(0,h.useModel)("@@initialState"),a=U.initialState,S=U.loading,V=U.error,w=U.refresh,H=U.setInitialState,x=(0,h.useModel)("subscriber");return a!=null&&a.user.username&&x.addDataHandler("user:permission:".concat(a==null?void 0:a.user.username),function(c){w()}),(0,M.jsx)(B.Z,{children:(0,M.jsx)(T.Z.Provider,{value:{notice:{success:function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];j.apply(void 0,["success"].concat(r))},error:function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];j.apply(void 0,["error"].concat(r))},warning:function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];j.apply(void 0,["warning"].concat(r))},info:function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];j.apply(void 0,["info"].concat(r))},destroy:function(){m.notification.destroy()}},message:{success:function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];l.apply(void 0,["success"].concat(r))},error:function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];l.apply(void 0,["error"].concat(r))},warning:function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];l.apply(void 0,["warning"].concat(r))},info:function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];l.apply(void 0,["info"].concat(r))},loading:function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];l.apply(void 0,["loading"].concat(r))},destroy:function(){m.message.destroy()}},loading:{show:function(){E.current&&E.current.show()},destroy:function(){E.current&&E.current.destroy()}},lang:function(t,r){return C.formatMessage({id:t},r)}},children:(0,M.jsxs)(D.Z,{ref:E,children:[(0,M.jsx)(h.Outlet,{}),(0,M.jsx)(P.Z.BackTop,{duration:10,style:{bottom:100}})]})},S?"1":"2")})}},65913:function(I,W,n){var h=n(5574),d=n.n(h),B=n(74330),P=n(67294),T=n(85893),D=(0,P.forwardRef)(function(O,M){(0,P.useImperativeHandle)(M,function(){return{show:function(){C(!0)},destroy:function(){C(!1)}}});var R=(0,P.useState)(!1),b=d()(R,2),E=b[0],C=b[1];return(0,T.jsx)(B.Z,{spinning:E,size:"default",children:O.children})});W.Z=D},29453:function(I,W,n){n.d(W,{_2:function(){return b},d1:function(){return C},pK:function(){return M},s6:function(){return D}});var h=n(15009),d=n.n(h),B=n(99289),P=n.n(B),T=n(82346);function D(l){return O.apply(this,arguments)}function O(){return O=P()(d()().mark(function l(m){return d()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,T.request)("/api/app/container-tag/create",{method:"POST",data:m});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},l)})),O.apply(this,arguments)}function M(l){return R.apply(this,arguments)}function R(){return R=P()(d()().mark(function l(m){return d()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,T.request)("/api/app/container-tag/get-list",{method:"POST",data:m});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},l)})),R.apply(this,arguments)}function b(l){return E.apply(this,arguments)}function E(){return E=P()(d()().mark(function l(m){return d()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,T.request)("/api/app/container-tag/delete",{method:"POST",data:m});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},l)})),E.apply(this,arguments)}function C(l){return j.apply(this,arguments)}function j(){return j=P()(d()().mark(function l(m){return d()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,T.request)("/api/pro/container-tag/get-url-detail",{method:"POST",data:m});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},l)})),j.apply(this,arguments)}}}]);
