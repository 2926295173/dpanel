"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9447],{37767:function(w,W,e){e.d(W,{Z:function(){return Oe}});var K=e(15009),i=e.n(K),L=e(99289),p=e.n(L),j=e(5574),U=e.n(j),l=e(45605),I=e(38345),M=e(97269),c=e(26412),C=e(42075),O=e(96074),g=e(25593),R=e(2487),s=e(67294),m=e(76428),t=e(78498),F=e(44771),n=e(13822),N=e(24963),G=e(37413),q=e(5251),ee=e(82346),u=e(87662),_=e(36146),r=e(85893);function Oe(h){var ie,se,Y,le,de,ue,oe,ce,X,a,z=new _.Uo("components.appDetail.appDetailContainer"),Ie=(0,s.useState)(""),he=U()(Ie,2),ge=he[0],Ee=he[1],Me=(0,ee.useAccess)(),pe=(0,s.useContext)(N.Z),_e=pe.message,me=(0,s.useRef)(),je=[],fe=[],Pe=[],Ce=(0,s.useState)(""),De=U()(Ce,2),Re=De[0],xe=De[1];return(0,s.useEffect)(function(){h.data&&((0,u.K3)().then(function(T){var o;xe((o=T.data.serverUrl)!==null&&o!==void 0?o:"")}),Ee(h.data.info.Name))},[h.data]),(0,s.useEffect)(function(){var T;(T=me.current)===null||T===void 0||T.setFieldValue("restart",{name:h.data.info.HostConfig.RestartPolicy.Name,maxAccept:h.data.info.HostConfig.RestartPolicy.MaximumRetryCount})},[me.current,h.data]),h.data&&h.data.domain&&h.data.domain.map(function(T){Pe.push(T.setting.enableSSL?"https://"+T.serverName:"http://"+T.serverName)}),h.data.info.NetworkSettings.Ports&&Object.entries(h.data.info.NetworkSettings.Ports).map(function(T){var o=U()(T,2),Z=o[0],B=o[1],$=Z.split("/"),x=U()($,2),b=x[0],E=x[1];B.forEach(function(k){k.HostPort?je.push({PrivatePort:b,Type:E,IP:k.HostIp,PublicPort:k.HostPort}):fe.push({PrivatePort:b,Type:E,IP:"",PublicPort:""})})}),(0,r.jsxs)(r.Fragment,{children:[h.data&&h.data.info.State.Running&&(0,r.jsx)(G.Z,{publicPort:je,privatePort:fe,domain:Pe,serverIp:Re,showInDetail:!0,ghost:h.ghost,layout:"inline"}),(0,r.jsx)(I.Z,{title:(0,r.jsx)(l.Z,{}),subTitle:z.format("cardTitle"),ghost:h.ghost,children:(0,r.jsxs)(c.Z,{column:1,bordered:!0,children:[(0,r.jsx)(c.Z.Item,{label:"Hostname",children:(0,r.jsx)(C.Z,{split:(0,r.jsx)(O.Z,{type:"vertical"}),children:(0,r.jsx)(m.Z,{title:(ie=h.data.info)===null||ie===void 0?void 0:ie.Config.Hostname})})}),(0,r.jsx)(c.Z.Item,{label:z.format("containerName"),children:(0,r.jsxs)(C.Z,{split:(0,r.jsx)(O.Z,{type:"vertical"}),children:[(0,r.jsx)(m.Z,{title:(se=h.data.info)===null||se===void 0?void 0:se.Id.substring(0,12)}),(0,r.jsx)(g.Z.Text,{copyable:!0,editable:{tooltip:z.format("containerNameEditTip"),onChange:function(){var T=p()(i()().mark(function Z(B){var $,x;return i()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(($=h.data.info)!==null&&$!==void 0&&$.Id){E.next=2;break}return E.abrupt("return");case 2:return E.next=4,(0,n.eE)({md5:h.data.info.Id,name:B});case 4:x=E.sent,Ee(B),_e.success(_.FD.format("finish"));case 7:case"end":return E.stop()}},Z)}));function o(Z){return T.apply(this,arguments)}return o}()},children:(0,q.fi)(ge,"/")})]})}),(0,r.jsx)(c.Z.Item,{label:(0,r.jsx)(t.Z,{title:z.format("network"),help:z.format("networkHelp")}),children:((Y=h.data.info)===null||Y===void 0?void 0:Y.State.Running)&&(0,r.jsxs)(c.Z,{column:1,bordered:!0,children:[h.data.info.NetworkSettings.Networks&&Object.keys(h.data.info.NetworkSettings.Networks).map(function(T,o){var Z,B,$;return(0,r.jsx)(c.Z.Item,{label:T,children:T=="host"?z.format("networkUseHost"):(0,r.jsxs)(C.Z,{direction:"vertical",children:[(0,r.jsx)(m.Z,{title:(Z=h.data.info)===null||Z===void 0?void 0:Z.NetworkSettings.Networks[T].IPAddress}),(B=h.data.info)===null||B===void 0?void 0:B.NetworkSettings.Networks[T].Gateway,($=h.data.info)===null||$===void 0?void 0:$.NetworkSettings.Networks[T].MacAddress]})},o)}),h.data.info.HostConfig.ExtraHosts&&(0,r.jsx)(c.Z.Item,{label:z.format("networkExtra"),children:(0,r.jsx)(C.Z,{direction:"vertical",children:h.data.info.HostConfig.ExtraHosts.map(function(T,o){if(T.indexOf(":")>-1){var Z=T.split(":");return"".concat(Z[0]," - ").concat(Z.slice(1).join(":"))}})})},"host")]})}),(0,r.jsx)(c.Z.Item,{label:z.format("runTime"),children:z.format("runTimeValue",{create:new Date((le=(de=h.data.info)===null||de===void 0?void 0:de.Created)!==null&&le!==void 0?le:"").toLocaleString(),upgrade:new Date((ue=(oe=h.data.info)===null||oe===void 0?void 0:oe.State.StartedAt)!==null&&ue!==void 0?ue:"").toLocaleString()})}),Me.canSeeContainerListManage&&(0,r.jsx)(c.Z.Item,{label:z.format("restartPolicy"),children:(0,r.jsx)(M.A,{name:"container-restart",submitter:!1,onValuesChange:function(){var T=p()(i()().mark(function o(Z,B){var $,x;return i()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(($=h.data.info)!==null&&$!==void 0&&$.Id){E.next=2;break}return E.abrupt("return");case 2:return E.next=4,(0,n.eE)({md5:h.data.info.Id,restart:B.restart});case 4:return x=E.sent,_e.success(_.FD.format("finish")),E.abrupt("return");case 7:case"end":return E.stop()}},o)}));return function(o,Z){return T.apply(this,arguments)}}(),layout:"inline",formRef:me,children:(0,r.jsx)(F.Z,{ghost:!0,defaultValue:(ce=h.data.info)===null||ce===void 0?void 0:ce.HostConfig.RestartPolicy.Name})})}),(0,r.jsx)(c.Z.Item,{label:z.format("env"),children:(0,r.jsx)(R.Z,{dataSource:(X=(a=h.data.info)===null||a===void 0?void 0:a.Config.Env)!==null&&X!==void 0?X:[],renderItem:function(o){var Z=o.split("=");return(0,r.jsxs)(R.Z.Item,{children:[(0,r.jsx)(g.Z.Text,{code:!0,children:Z[0]})," = ",(0,r.jsx)(g.Z.Text,{copyable:!0,children:Z.slice(1).join("=")})]})}})})]})})]})}},14245:function(w,W,e){e.d(W,{Z:function(){return C}});var K=e(5574),i=e.n(K),L=e(3393),p=e(36146),j=e(60433),U=e(38345),l=e(26412),I=e(25593),M=e(67294),c=e(85893);function C(O){var g=new p.Uo("components.appDetail.appDetailQuickImage"),R=(0,M.useState)(),s=i()(R,2),m=s[0],t=s[1];return(0,M.useEffect)(function(){(0,L.YU)({md5:O.data.Image}).then(function(F){t(F.data)})},[O.data]),(0,c.jsx)(U.Z,{ghost:O.ghost,title:(0,c.jsx)(j.Z,{}),subTitle:g.format("cardTitle"),children:(0,c.jsxs)(l.Z,{styles:{label:{width:200}},column:1,bordered:!0,children:[(0,c.jsx)(l.Z.Item,{label:"Image Tag",children:(0,c.jsx)(I.Z.Text,{copyable:!0,children:O.data.Config.Image})}),(0,c.jsx)(l.Z.Item,{label:"Image",children:O.data.Image}),(0,c.jsx)(l.Z.Item,{label:"CMD",children:(m==null?void 0:m.info.Config.Cmd)&&(m==null?void 0:m.info.Config.Cmd.join(" "))}),(0,c.jsx)(l.Z.Item,{label:"ENTRYPOINT",children:m==null?void 0:m.info.Config.Entrypoint}),(0,c.jsx)(l.Z.Item,{label:"Labels",children:(0,c.jsx)(l.Z,{column:1,bordered:!0,children:(m==null?void 0:m.info.Config.Labels)&&Object.entries(m==null?void 0:m.info.Config.Labels).map(function(F){var n=i()(F,2),N=n[0],G=n[1];return(0,c.jsx)(l.Z.Item,{label:N,children:G},N)})})})]})})}},53399:function(w,W,e){e.d(W,{Z:function(){return T}});var K=e(15009),i=e.n(K),L=e(99289),p=e.n(L),j=e(5574),U=e.n(j),l=e(67294),I=e(80821),M=e(62597),c=e(13822),C=e(43425),O=e(58638),g=e(60219),R=e(86548),s=e(57132),m=e(87784),t=e(25035),F=e(38345),n=e(97269),N=e(62370),G=e(5966),q=e(52688),ee=e(82346),u=e(42075),_=e(25278),r=e(96074),Oe=e(83622),h=e(25593),ie=e(85418),se=e(40411),Y=e(84567),le=e(83062),de=e(93162),ue=e(24739),oe=e(97462),ce=e(70146),X=e(36146),a=e(85893);function z(o){var Z=(0,l.useRef)(),B=new X.Uo("components.appDetail");return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(I.Z,{icon:(0,a.jsx)(g.Z,{}),action:p()(i()().mark(function $(){var x,b,E,k;return i()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,(0,ce.yB)({id:o.container.Name,enableImage:(x=Z.current)===null||x===void 0?void 0:x.getFieldValue("enableImage"),volume:Object.keys((b=(E=Z.current)===null||E===void 0?void 0:E.getFieldValue("volume"))!==null&&b!==void 0?b:{}).filter(function(ve){return ve}),enableCommitImage:(k=Z.current)===null||k===void 0?void 0:k.getFieldValue("enableCommitImage")});case 2:case"end":return ae.stop()}},$)})),confirmOnOpenChange:function(x){var b,E;!((b=Z.current)===null||b===void 0)&&b.resetFields&&((E=Z.current)===null||E===void 0||E.resetFields())},confirm:(0,a.jsxs)(u.Z,{style:{width:650,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,a.jsx)(h.Z.Text,{children:(0,a.jsx)("ul",{children:B.prefix("backupVolumeTip",4).map(function($,x){return(0,a.jsxs)("li",{children:[$," ",x==3&&(0,a.jsx)(ee.Link,{to:"/app/backup",children:X.Ob.format("container.backup")})]},x)})})}),(0,a.jsxs)(n.A,{layout:"horizontal",formRef:Z,submitter:!1,children:[(0,a.jsxs)(ue.UW,{children:[(0,a.jsx)(N.Z,{valuePropName:"checked",name:"enableSelectVolume",children:(0,a.jsx)(Y.Z,{disabled:!o.container.Mounts||o.container.Mounts.length==0,children:B.format("backupVolumeEnableSelectVolume")})}),(0,a.jsx)(N.Z,{valuePropName:"checked",name:"enableImage",children:(0,a.jsx)(Y.Z,{children:B.format("backupVolumeEnableImage")})}),(0,a.jsx)(oe.Z,{name:["enableImage"],children:function(x){var b=x.enableImage;if(b)return(0,a.jsx)(N.Z,{valuePropName:"checked",name:"enableCommitImage",children:(0,a.jsx)(Y.Z,{children:B.format("backupVolumeEnableCommitImage")})})}})]}),(0,a.jsx)(oe.Z,{name:["enableSelectVolume"],children:function(x){var b=x.enableSelectVolume;return b&&(0,a.jsx)(u.Z,{wrap:!0,children:o.container.Mounts&&o.container.Mounts.map(function(E,k){return(0,a.jsx)(N.Z,{valuePropName:"checked",name:["volume",E.Destination],children:(0,a.jsx)(Y.Z,{children:E.Destination})},"volume-".concat(k))})})}})]})]}),children:B.format("backupVolumeButton")})})}var Ie=e(24963),he=e(99861),ge=e(3393),Ee=e(50888),Me=e(16596),pe=e(1699),_e=e(5251),me=e(29453),je=e(71965),fe=e(77446),Pe=e(86615),Ce=e(40056),De=e(89240);function Re(o){var Z=(0,ee.useAccess)(),B=(0,l.useState)(),$=U()(B,2),x=$[0],b=$[1],E=(0,l.useRef)(),k=new X.Uo("components.appDetail.appDetailQuickManage");return(0,l.useEffect)(function(){Z.canSeeEnableCe||(0,fe.V)({siteName:(0,De.HJ)(o.detail.Name)}).then(function(te){b(te.data.list)})},[o.detail]),(0,a.jsx)(pe.u,{access:["canSeeEnableCe"],showProTips:!0,children:function(ae){var ve=ae.canSeeEnableCe;return(0,a.jsx)(I.Z,{showDivider:!0,action:function(){var V;return(0,fe.v)({id:(V=E.current)===null||V===void 0?void 0:V.getFieldValue("id"),enableForce:!0})},icon:(0,a.jsx)(je.Z,{}),disabled:ve,onSuccess:function(){var V;(V=E.current)===null||V===void 0||V.resetFields(),o.onFinish&&o.onFinish()},confirmOnOpenChange:function(){var V;!((V=E.current)===null||V===void 0)&&V.resetFields&&E.current.resetFields()},confirm:(0,a.jsx)(n.A,{formRef:E,submitter:!1,children:(0,a.jsxs)(u.Z,{direction:"vertical",style:{width:500},size:[0,15],children:[(0,a.jsx)(h.Z.Text,{children:k.format("rollbackTip")}),x&&x.length>0?(0,a.jsx)(Pe.Z.Group,{fieldProps:{style:{display:"flex",flexDirection:"column",gap:8}},name:"id",label:"",options:x&&x.map(function(ne){return{label:"id: ".concat(ne.id," ").concat(X.FD.format("listDeletedAt"),": ").concat((0,_e.NF)(ne.deletedAt)),value:ne.id}})}):(0,a.jsx)(Ce.Z,{message:k.format("rollbackEmptyTip"),style:{marginBottom:10}})]})}),children:X.FD.format("listManageRollback")})}})}var xe=(0,l.forwardRef)(function(o,Z){var B;(0,l.useImperativeHandle)(Z,function(){return{}});var $=(0,l.useRef)(),x=(0,l.useRef)(),b=(0,l.useRef)(),E=(0,l.useContext)(Ie.Z),k=E.loading,te=(0,l.useRef)(),ae=(0,l.useRef)(),ve=(0,l.useState)({status:0,error:""}),ne=U()(ve,2),V=ne[0],re=ne[1],A=new X.Uo("components.appDetail.appDetailQuickManage");function Ze(y){return Te.apply(this,arguments)}function Te(){return Te=p()(i()().mark(function y(d){var f,P,v;return i()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(P=-2,!d.ignore){D.next=6;break}if(!(d.ignore.indexOf("".concat(d.info.Name,"@*"))>-1)){D.next=4;break}return D.abrupt("return",{status:-2,error:""});case 4:if(!(d.ignore.indexOf("".concat(d.info.Name,"@").concat(d.info.Image))>-1)){D.next=6;break}return D.abrupt("return",{status:-2,error:""});case 6:return D.next=8,(0,ge.ZQ)({tag:(f=d.info.Config.Image)!==null&&f!==void 0?f:"",md5:d.info.Image,cacheTime:3600}).catch(function(Q){P=-1});case 8:if(v=D.sent,!(v&&v.data.error&&v.data.error!="")){D.next=11;break}return D.abrupt("return",{status:-1,error:v.data.error});case 11:return v&&(v.data.digestLocal&&v.data.digestLocal.length>0?P=v.data.upgrade?1:2:v.data.error&&v.data.error!=""?P=-1:P=-2),D.abrupt("return",{status:P,error:""});case 13:case"end":return D.stop()}},y)})),Te.apply(this,arguments)}return(0,l.useEffect)(function(){o.checkContainerUpgrade&&(re({status:0}),Ze(o.data).then(function(y){re(y)}))},[o.data]),(0,a.jsx)(F.Z,{ghost:o.ghost,title:(0,a.jsx)(C.Z,{}),subTitle:A.format("cardTitle"),children:(0,a.jsxs)(u.Z,{wrap:!0,children:[(0,a.jsx)(I.Z,{icon:(0,a.jsx)(O.Z,{}),action:function(){var d,f;return(0,c.LJ)({md5:(d=(f=o.data)===null||f===void 0?void 0:f.info.Id)!==null&&d!==void 0?d:""})},confirm:A.format("exportConfirm"),onSuccess:function(d){var f,P=new Blob([d],{type:"application/tar"});(0,de.saveAs)(P,(0,_e.fi)((f=o.data)===null||f===void 0?void 0:f.info.Name,"/")+".tar")},children:A.format("exportButton")}),(0,a.jsx)(I.Z,{icon:(0,a.jsx)(g.Z,{}),action:function(){var d,f,P,v,S;return(0,c.Re)({md5:(d=(f=o.data)===null||f===void 0?void 0:f.info.Id)!==null&&d!==void 0?d:"",name:(P=(v=x.current)===null||v===void 0?void 0:v.getFieldValue("saveImageName"))!==null&&P!==void 0?P:(S=o.data)===null||S===void 0?void 0:S.info.Name})},confirmOnOpenChange:function(){var d;return[((d=x.current)===null||d===void 0?void 0:d.resetFields)&&x.current.resetFields()]},confirmTitle:A.format("commitConfirmTitle"),confirm:(0,a.jsx)(u.Z,{style:{width:400,marginTop:"10px",paddingRight:"10px"},direction:"vertical",children:(0,a.jsx)(n.A,{formRef:x,submitter:!1,children:(0,a.jsx)(N.Z,{name:"saveImageName",children:(0,a.jsx)(_.Z,{addonBefore:A.format("commitConfirmSaveImageName")})})})}),children:A.format("commitButton")}),o.data&&(0,a.jsx)(pe.u,{access:"canSeeContainerBackup",children:(0,a.jsx)(z,{container:o.data.info})}),(0,a.jsx)(r.Z,{type:"vertical"}),(0,a.jsx)(ee.Link,{to:"/app/create/image?id=".concat((B=o.data)===null||B===void 0?void 0:B.info.Id,"&op=update"),children:(0,a.jsx)(Oe.ZP,{type:"primary",icon:(0,a.jsx)(R.Z,{}),children:A.format("editButton")})}),(0,a.jsx)(I.Z,{icon:(0,a.jsx)(s.Z,{}),action:p()(i()().mark(function y(){var d,f,P,v,S,D;return i()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,(0,c.aF)({md5:(d=(f=o.data)===null||f===void 0?void 0:f.info.Id)!==null&&d!==void 0?d:"",copyName:(P=(v=b.current)===null||v===void 0?void 0:v.getFieldValue("copyName"))!==null&&P!==void 0?P:"",enableRandomPort:(S=(D=b.current)===null||D===void 0?void 0:D.getFieldValue("enableRandomPort"))!==null&&S!==void 0?S:!1});case 2:return H.abrupt("return",H.sent);case 3:case"end":return H.stop()}},y)})),confirm:(0,a.jsxs)(u.Z,{style:{width:400,paddingRight:"10px"},direction:"vertical",children:[(0,a.jsx)(h.Z.Text,{children:A.format("copyConfirmTip")}),(0,a.jsxs)(n.A,{formRef:b,submitter:!1,layout:"horizontal",children:[(0,a.jsx)("br",{}),(0,a.jsx)(G.Z,{label:A.format("copyCopyName"),name:"copyName"}),(0,a.jsx)(q.Z,{label:A.format("copyEnableRandomPort"),name:"enableRandomPort"})]})]}),onSuccess:function(d){var f;(f=b.current)===null||f===void 0||f.resetFields()},children:A.format("copyButton")}),(0,a.jsx)(Re,{detail:o.data.info,onFinish:function(){k.destroy(),o.checkContainerUpgrade&&o.checkContainerUpgrade()}}),o.data&&(0,a.jsxs)(a.Fragment,{children:[o.data.info.Config.Image&&(0,a.jsx)(he.Z,{image:[o.data.info.Config.Image],ref:te}),(0,a.jsx)(ie.Z,{placement:"bottomLeft",menu:{items:[{key:"1",label:(0,a.jsx)(I.Z,{action:p()(i()().mark(function y(){var d,f,P,v,S,D;return i()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,(0,M.ze)({md5:(d=(f=o.data.info)===null||f===void 0?void 0:f.Name)!==null&&d!==void 0?d:"",imageId:""});case 2:return re({status:0}),H.next=5,(0,ge.ZQ)({tag:(P=(v=o.data.info)===null||v===void 0?void 0:v.Config.Image)!==null&&P!==void 0?P:"",md5:(S=(D=o.data.info)===null||D===void 0?void 0:D.Image)!==null&&S!==void 0?S:"",cacheTime:0}).then(function(J){J.data.error&&J.data.error!=""?re({status:-1,error:J.data.error}):J.data.digestLocal&&J.data.digestLocal.length>0?re({status:J.data.upgrade?1:2}):re({status:-2})}).catch(function(J){re({status:-1})});case 5:return H.abrupt("return",H.sent);case 6:case"end":return H.stop()}},y)})),type:"link",children:A.format("upgradeCheckUpgrade")})},{key:"2",label:(0,a.jsx)(I.Z,{action:p()(i()().mark(function y(){var d,f,P,v;return i()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,M.ze)({md5:(d=(f=o.data.info)===null||f===void 0?void 0:f.Name)!==null&&d!==void 0?d:"",imageId:(P=(v=o.data.info)===null||v===void 0?void 0:v.Image)!==null&&P!==void 0?P:""});case 2:return D.abrupt("return",D.sent);case 3:case"end":return D.stop()}},y)})),type:"link",children:A.format("upgradeCheckUpgradeIgnoreOnce")})},{key:"3",label:(0,a.jsx)(I.Z,{action:p()(i()().mark(function y(){var d,f;return i()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,M.ze)({md5:(d=(f=o.data.info)===null||f===void 0?void 0:f.Name)!==null&&d!==void 0?d:"",imageId:"*"});case 2:return v.abrupt("return",v.sent);case 3:case"end":return v.stop()}},y)})),type:"link",children:A.format("upgradeCheckUpgradeIgnore")})}]},children:(0,a.jsx)(se.Z,{title:V.error,count:A.format("checkImageUpgrade."+V.status),color:A.format("checkImageUpgradeColor."+V.status),children:(0,a.jsx)(I.Z,{disabled:V.status===0,icon:V.status===0?(0,a.jsx)(Ee.Z,{}):(0,a.jsx)(Me.Z,{}),action:p()(i()().mark(function y(){var d,f,P,v,S;return i()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,(d=te.current)===null||d===void 0?void 0:d.start();case 2:return k.show(),(f=te.current)===null||f===void 0||f.finish(),Q.next=6,(0,c.RF)({md5:(P=o.data.info.Id)!==null&&P!==void 0?P:"",imageTag:"",enableBak:(v=(S=ae.current)===null||S===void 0?void 0:S.getFieldValue("enableBak"))!==null&&v!==void 0?v:!1});case 6:return Q.abrupt("return",Q.sent);case 7:case"end":return Q.stop()}},y)})),confirm:(0,a.jsxs)(u.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,a.jsx)(h.Z.Text,{children:A.format("upgradeConfirm")}),(0,a.jsx)(n.A,{formRef:ae,submitter:!1,layout:"inline",children:(0,a.jsx)(N.Z,{name:"enableBak",valuePropName:"checked",children:(0,a.jsx)(Y.Z,{children:A.format("upgradeConfirmEnableBak")})})})]}),onSuccess:function(d){k.destroy(),o.checkContainerUpgrade&&o.checkContainerUpgrade()},children:A.format("upgradeButton")})})})]}),(0,a.jsx)(r.Z,{type:"vertical"}),o.data&&(0,a.jsx)(I.Z,{action:p()(i()().mark(function y(){var d,f,P,v,S,D,Q;return i()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,(0,M.Ct)({md5:(d=(f=o.data)===null||f===void 0?void 0:f.info.Id)!==null&&d!==void 0?d:"",deleteImage:(P=(v=$.current)===null||v===void 0?void 0:v.getFieldValue("deleteImage"))!==null&&P!==void 0?P:!1,deleteVolume:(S=(D=$.current)===null||D===void 0?void 0:D.getFieldValue("deleteVolume"))!==null&&S!==void 0?S:!1});case 2:return J.abrupt("return",(0,me.rn)({name:(Q=o.data)===null||Q===void 0?void 0:Q.info.Name}));case 3:case"end":return J.stop()}},y)})),danger:!0,type:"primary",icon:(0,a.jsx)(m.Z,{}),onSuccess:function(){k.destroy(),o.checkContainerUpgrade&&o.checkContainerUpgrade()},confirm:(0,a.jsxs)(u.Z,{style:{width:200},direction:"vertical",children:[(0,a.jsx)(h.Z.Text,{children:X.FD.format("confirm.title")}),(0,a.jsxs)(n.A,{formRef:$,layout:"inline",submitter:!1,children:[(0,a.jsx)(N.Z,{addonAfter:(0,a.jsx)(le.Z,{title:A.format("deleteConfirmTip"),children:(0,a.jsx)(t.Z,{})}),name:"deleteVolume",valuePropName:"checked",children:(0,a.jsx)(Y.Z,{children:A.format("deleteConfirmDeleteVolume")})}),(0,a.jsx)(N.Z,{name:"deleteImage",valuePropName:"checked",children:(0,a.jsx)(Y.Z,{children:A.format("deleteConfirmDeleteImage")})})]})]}),children:A.format("deleteButton")})]})})}),T=xe},14189:function(w,W,e){var K=e(43425),i=e(74842),L=e(87784),p=e(33160),j=e(30159),U=e(89035),l=e(38345),I=e(42075),M=e(96074),c=e(83622),C=e(67294),O=e(94359),g=e(80821),R=e(13822),s=e(99922),m=e(36146),t=e(85893),F=(0,C.forwardRef)(function(n,N){(0,C.useImperativeHandle)(N,function(){return{showConsole:ee}});var G=new m.Uo("components.appDetail.appDetailQuickOperation"),q=(0,C.useRef)();function ee(u){var _;(_=q.current)===null||_===void 0||_.show({url:"/console/container/".concat(n.data.Id),title:n.data.Name,workDir:u})}return(0,t.jsx)(l.Z,{title:(0,t.jsx)(K.Z,{}),ghost:n.ghost,subTitle:(0,t.jsxs)(I.Z,{children:[G.format("cardTitle")," - ",n.data&&(0,t.jsx)(O.Z,{status:"container.".concat(n.data.State.Status),tip:n.data.State.Status})]}),children:(0,t.jsxs)(I.Z,{wrap:!0,children:[(0,t.jsx)(g.Z,{icon:(0,t.jsx)(i.Z,{}),action:function(){var _,r;return(0,R.IW)({md5:(_=(r=n.data)===null||r===void 0?void 0:r.Id)!==null&&_!==void 0?_:"",operate:"start"})},onSuccess:function(){return n.onFinish&&n.onFinish()},disabled:n.data&&n.data.State.Running||n.data&&n.data.State.Paused,children:G.format("start")}),(0,t.jsx)(g.Z,{action:function(){var _,r;return(0,R.IW)({md5:(_=(r=n.data)===null||r===void 0?void 0:r.Id)!==null&&_!==void 0?_:"",operate:"stop"})},icon:(0,t.jsx)(L.Z,{}),onSuccess:function(){return n.onFinish&&n.onFinish()},disabled:n.data&&n.data.State.Dead,children:G.format("stop")}),(0,t.jsx)(g.Z,{action:function(){var _,r;return(0,R.IW)({md5:(_=(r=n.data)===null||r===void 0?void 0:r.Id)!==null&&_!==void 0?_:"",operate:"restart"})},onSuccess:function(){return n.onFinish&&n.onFinish()},icon:(0,t.jsx)(p.Z,{}),children:G.format("restart")}),(0,t.jsx)(g.Z,{action:function(){var _,r;return(0,R.IW)({md5:(_=(r=n.data)===null||r===void 0?void 0:r.Id)!==null&&_!==void 0?_:"",operate:"pause"})},onSuccess:function(){return n.onFinish&&n.onFinish()},icon:(0,t.jsx)(j.Z,{}),disabled:n.data&&n.data&&!n.data.State.Running,children:G.format("pause")}),(0,t.jsx)(g.Z,{action:function(){var _,r;return(0,R.IW)({md5:(_=(r=n.data)===null||r===void 0?void 0:r.Id)!==null&&_!==void 0?_:"",operate:"unpause"})},onSuccess:function(){return n.onFinish&&n.onFinish()},icon:(0,t.jsx)(i.Z,{}),disabled:n.data&&!n.data.State.Paused,children:G.format("unpause")}),(0,t.jsx)(M.Z,{type:"vertical"}),n.data&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Z,{showFileExplorer:!0,ref:q}),(0,t.jsx)(c.ZP,{type:"dashed",onClick:function(){n.data&&ee(n.data.Config.WorkingDir)},icon:(0,t.jsx)(U.Z,{}),children:"Console"})]}),(0,t.jsx)(M.Z,{type:"vertical"}),n.extra&&n.extra.map(function(u,_){return(0,t.jsx)("span",{children:u},_)})]})})});W.Z=F},52031:function(w,W,e){e.d(W,{Z:function(){return U}});var K=e(31574),i=e(38345),L=e(26412),p=e(36146),j=e(85893);function U(l){var I,M=new p.Uo("components.appDetail.appDetailVolume");return l.data&&l.data.Mounts&&l.data.Mounts.length>0&&(0,j.jsx)(i.Z,{ghost:l.ghost,title:(0,j.jsx)(K.Z,{}),subTitle:M.format("cardTitle"),children:(0,j.jsx)(L.Z,{column:1,bordered:!0,children:(I=l.data)===null||I===void 0?void 0:I.Mounts.map(function(c,C){return(0,j.jsx)(L.Z.Item,{styles:{label:{width:"50%",wordBreak:"break-word"},content:{width:"50%",wordBreak:"break-word"}},label:c.Type=="volume"?c.Name:c.Source,children:c.Destination},C)})})})}},94359:function(w,W,e){e.d(W,{Z:function(){return m}});var K=e(5574),i=e.n(K),L=e(3089),p=e(98165),j=e(18429),U=e(8751),l=e(66212),I=e(14313),M=e(30159),c=e(87740),C=e(50888),O=e(66309),g=e(83062),R=e(36146),s=e(85893);function m(t){var F,n,N=new R.Uo("components.containerStatus"),G=t.status.split("."),q=i()(G,2),ee=q[0],u=q[1],_="";_=N.format(t.status,(F=t.statusValue)!==null&&F!==void 0?F:{});var r=(0,s.jsx)(s.Fragment,{});return u=="0"&&(r=(0,s.jsx)(O.Z,{icon:(0,s.jsx)(L.Z,{}),color:"default",children:_})),u=="10"&&(r=(0,s.jsx)(O.Z,{icon:(0,s.jsx)(p.Z,{spin:!0}),color:"processing",children:_})),u=="20"&&(r=(0,s.jsx)(O.Z,{icon:(0,s.jsx)(j.Z,{}),color:"error",children:_})),u=="30"&&(r=(0,s.jsx)(O.Z,{icon:(0,s.jsx)(U.Z,{}),color:"success",children:_})),u=="new"&&(r=(0,s.jsx)(O.Z,{icon:(0,s.jsx)(l.Z,{}),children:_})),(u=="running"||u=="healthy"||u=="active"||u=="ready")&&(r=(0,s.jsx)(O.Z,{icon:(0,s.jsx)(I.Z,{}),color:"success",children:_})),(u=="paused"||u=="pause"||u=="rollback_paused")&&(r=(0,s.jsx)(O.Z,{icon:(0,s.jsx)(M.Z,{}),children:_})),(u=="waiting"||u=="starting"||u=="accepted")&&(r=(0,s.jsx)(O.Z,{icon:(0,s.jsx)(c.Z,{}),children:_})),["deploying","pending","allocated","accepted","assigned","preparing","updating","rollback_started"].includes(u)&&(r=(0,s.jsx)(O.Z,{icon:(0,s.jsx)(C.Z,{}),color:"processing",children:_})),(u=="error"||u=="down"||u=="failed")&&(r=(0,s.jsx)(O.Z,{icon:(0,s.jsx)(j.Z,{}),color:"error",children:_})),["complete","completed","rollback_completed"].includes(u)&&(r=(0,s.jsx)(O.Z,{icon:(0,s.jsx)(U.Z,{}),color:"success",children:_})),["exited","dead","removing","restarting","unhealthy","created","drain","unreachable","shutdown","rejected","remove","orphaned"].includes(u)&&(r=(0,s.jsx)(O.Z,{icon:(0,s.jsx)(j.Z,{}),color:"warning",children:_})),(0,s.jsx)(g.Z,{placement:"top",title:(n=t.tip)!==null&&n!==void 0?n:"",children:r})}},76428:function(w,W,e){e.d(W,{Z:function(){return p}});var K=e(25593),i=e(67294),L=e(85893);function p(j){return(0,L.jsx)(K.Z.Text,{copyable:!0,children:j.title})}},78498:function(w,W,e){e.d(W,{Z:function(){return U}});var K=e(25035),i=e(42075),L=e(83062),p=e(67294),j=e(85893);function U(l){return(0,j.jsxs)(i.Z,{children:[l.title,(0,j.jsx)(L.Z,{title:l.help,children:(0,j.jsx)(K.Z,{})})]})}},70146:function(w,W,e){e.d(W,{SR:function(){return O},VE:function(){return c},Zy:function(){return I},iD:function(){return R},yB:function(){return U}});var K=e(15009),i=e.n(K),L=e(99289),p=e.n(L),j=e(82346);function U(m){return l.apply(this,arguments)}function l(){return l=p()(i()().mark(function m(t){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,j.request)("/api/app/container-backup/create",{data:t,method:"POST"});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},m)})),l.apply(this,arguments)}function I(m){return M.apply(this,arguments)}function M(){return M=p()(i()().mark(function m(t){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,j.request)("/api/app/container-backup/get-list",{method:"POST",data:t}));case 1:case"end":return n.stop()}},m)})),M.apply(this,arguments)}function c(m){return C.apply(this,arguments)}function C(){return C=p()(i()().mark(function m(t){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,j.request)("/api/app/container-backup/delete",{method:"POST",data:t}));case 1:case"end":return n.stop()}},m)})),C.apply(this,arguments)}function O(m){return g.apply(this,arguments)}function g(){return g=p()(i()().mark(function m(t){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,j.request)("/api/app/container-backup/restore",{method:"POST",data:t}));case 1:case"end":return n.stop()}},m)})),g.apply(this,arguments)}function R(m){return s.apply(this,arguments)}function s(){return s=p()(i()().mark(function m(t){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,j.request)("/api/app/container-backup/get-detail",{method:"POST",data:t}));case 1:case"end":return n.stop()}},m)})),s.apply(this,arguments)}},29453:function(w,W,e){e.d(W,{A9:function(){return U},R3:function(){return O},e1:function(){return I},rn:function(){return c}});var K=e(15009),i=e.n(K),L=e(99289),p=e.n(L),j=e(82346);function U(R){return l.apply(this,arguments)}function l(){return l=p()(i()().mark(function R(s){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,j.request)("/api/common/tag/create",{method:"POST",data:s});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},R)})),l.apply(this,arguments)}function I(R){return M.apply(this,arguments)}function M(){return M=p()(i()().mark(function R(s){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,j.request)("/api/common/tag/get-list",{method:"POST",data:s});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},R)})),M.apply(this,arguments)}function c(R){return C.apply(this,arguments)}function C(){return C=p()(i()().mark(function R(s){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,j.request)("/api/common/tag/delete",{method:"POST",data:s});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},R)})),C.apply(this,arguments)}function O(R){return g.apply(this,arguments)}function g(){return g=p()(i()().mark(function R(s){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,j.request)("/api/pro/tag/get-url-detail",{method:"POST",data:s});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},R)})),g.apply(this,arguments)}},77446:function(w,W,e){e.d(W,{V:function(){return U},v:function(){return I}});var K=e(15009),i=e.n(K),L=e(99289),p=e.n(L),j=e(82346);function U(c){return l.apply(this,arguments)}function l(){return l=p()(i()().mark(function c(C){return i()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,j.request)("/api/pro/container-rollback/get-list",{data:C,method:"POST"});case 2:return g.abrupt("return",g.sent);case 3:case"end":return g.stop()}},c)})),l.apply(this,arguments)}function I(c){return M.apply(this,arguments)}function M(){return M=p()(i()().mark(function c(C){return i()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,j.request)("/api/pro/container-rollback/restore",{data:C,method:"POST"});case 2:return g.abrupt("return",g.sent);case 3:case"end":return g.stop()}},c)})),M.apply(this,arguments)}}}]);
