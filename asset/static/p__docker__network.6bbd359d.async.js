"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[236],{16970:function(H,W,e){var Z=e(15009),d=e.n(Z),K=e(99289),O=e.n(K),M=e(5574),F=e.n(M),B=e(3616),V=e(24963),w=e(14946),b=e(36146),D=e(184),h=e(5966),U=e(62370),S=e(97462),A=e(52688),T=e(24739),u=e(17186),R=e(83622),s=e(34041),p=e(71230),x=e(15746),a=e(67294),n=e(85893),f=(0,a.forwardRef)(function(t,C){var v,o=(0,a.useState)(!1),r=F()(o,2),g=r[0],P=r[1],c=(0,a.useRef)(),_=(0,a.useContext)(V.Z),G=_.message,l=new b.Uo("components.network");return(0,a.useImperativeHandle)(C,function(){return{}}),(0,n.jsxs)(D.a,{drawerProps:{width:B.R_},name:"createNetwork",title:l.format("createTitle"),open:g,onOpenChange:function(E){P(E)},formRef:c,trigger:(v=t.trigger)!==null&&v!==void 0?v:(0,n.jsx)(R.ZP,{type:"primary",children:l.format("createTitle")}),onFinish:function(){var m=O()(d()().mark(function E(i){var I,y,L,j,N,z,X,J,Q,q,ee,k,Y,ne;return d()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return k={name:i.name,driver:(I=i.driver)!==null&&I!==void 0?I:"bridge",ipSubnet:(y=i.ipSubnet)!==null&&y!==void 0?y:"",ipGateway:(L=i.ipGateway)!==null&&L!==void 0?L:"",ipRange:(j=i.ipRange)!==null&&j!==void 0?j:"",ipAux:i.ipAux,enableIpV6:(N=i.enableIpV6)!==null&&N!==void 0?N:!1,ipV6Subnet:(z=i.ipV6Subnet)!==null&&z!==void 0?z:"",ipV6Gateway:(X=i.ipV6Gateway)!==null&&X!==void 0?X:"",ipV6Range:(J=i.ipV6Range)!==null&&J!==void 0?J:"",ipV6Aux:(Q=i.ipV6Aux)!==null&&Q!==void 0?Q:[],driverOption:i.driverOption,internal:(q=i.internal)!==null&&q!==void 0?q:!1,attachable:(ee=i.attachable)!==null&&ee!==void 0?ee:!1},(i.driver=="macvlan"||i.driver=="ipvlan")&&(k.driverOption||(k.driverOption=[]),k.driverOption.push({name:"parent",value:i.macvlanParentCard})),$.next=4,(0,w.XY)(k);case 4:if(Y=$.sent,!(Y&&Y.data&&Y.data.id!="")){$.next=10;break}return G.success(b.FD.format("finish")),t.onFinish&&t.onFinish(),(ne=c.current)===null||ne===void 0||ne.resetFields(),$.abrupt("return",!0);case 10:case"end":return $.stop()}},E)}));return function(E){return m.apply(this,arguments)}}(),children:[(0,n.jsx)(h.Z,{label:l.format("createFormName"),name:"name",required:!0,rules:[{required:!0}],placeholder:l.format("createFormNameEmpty")}),(0,n.jsx)(U.Z,{label:l.format("createFormDriver"),name:"driver",children:(0,n.jsxs)(s.Z,{defaultValue:"bridge",children:[(0,n.jsx)(s.Z.Option,{value:"bridge",children:"bridge"}),(0,n.jsx)(s.Z.Option,{value:"macvlan",children:"macvlan"}),(0,n.jsx)(s.Z.Option,{value:"ipvlan",children:"ipvlan"}),(0,n.jsx)(s.Z.Option,{value:"overlay",children:"overlay"})]})}),(0,n.jsx)(S.Z,{name:["driver"],children:function(E){var i=E.driver;if(i=="macvlan"||i=="ipvlan")return(0,n.jsx)(h.Z,{required:!0,rules:[{required:!0}],label:l.format("createFormDriverMacvlanParentCard"),name:"macvlanParentCard",tooltip:l.format("createFormDriverMacvlanParentCardTip")})}}),(0,n.jsxs)(p.Z,{children:[(0,n.jsx)(x.Z,{span:8,children:(0,n.jsx)(A.Z,{label:l.format("createFormUserIpV4Subnet"),name:"userIpV4Subnet"})}),(0,n.jsx)(x.Z,{span:8,children:(0,n.jsx)(A.Z,{name:"internal",label:l.format("createFormInternal"),initialValue:!1})}),(0,n.jsx)(x.Z,{span:8,children:(0,n.jsx)(A.Z,{name:"attachable",label:l.format("createFormAttachable"),initialValue:!1})})]}),(0,n.jsx)(S.Z,{name:["userIpV4Subnet"],children:function(E){var i=E.userIpV4Subnet;if(i)return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(T.UW,{title:l.format("createFormIpTitle"),children:[(0,n.jsx)(h.Z,{label:l.format("createFormIpSubnet"),name:"ipSubnet",width:"md",tooltip:l.format("createFormIpSubnetTip"),placeholder:"192.168.0.0/16"}),(0,n.jsx)(h.Z,{label:l.format("createFormIpGateway"),name:"ipGateway",width:"md",placeholder:"192.168.0.1"}),(0,n.jsx)(h.Z,{label:l.format("createFormIpRange"),name:"ipRange",width:"md",placeholder:"192.168.1.0/24"})]}),(0,n.jsx)(u.u,{name:"ipAux",label:l.format("createFormIpAux"),children:(0,n.jsxs)(T.UW,{children:[(0,n.jsx)(h.Z,{label:l.format("createFormIpAuxDevice"),name:"device",width:"md"}),(0,n.jsx)(h.Z,{label:l.format("createFormIpAuxAddress"),name:"address",width:"md"})]})})]})}}),(0,n.jsxs)(p.Z,{children:[(0,n.jsx)(x.Z,{span:8,children:(0,n.jsx)(A.Z,{label:l.format("createFormEnableIpV6"),name:"enableIpV6"})}),(0,n.jsx)(x.Z,{children:(0,n.jsx)(A.Z,{label:l.format("createFormUserIpV6Subnet"),name:"userIpV6Subnet",fieldProps:{onChange:function(E,i){if(E){var I;(I=c.current)===null||I===void 0||I.setFieldValue("enableIpV6",!0)}}}})})]}),(0,n.jsx)(S.Z,{name:["userIpV6Subnet"],children:function(E){var i=E.userIpV6Subnet;if(i)return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(T.UW,{title:l.format("createFormIpV6"),children:[(0,n.jsx)(h.Z,{label:l.format("createFormIpSubnet"),name:"ipV6Subnet",width:"md",placeholder:"2001:db8::/48"}),(0,n.jsx)(h.Z,{label:l.format("createFormIpGateway"),name:"ipV6Gateway",width:"md",placeholder:"2001:db8::1"}),(0,n.jsx)(h.Z,{label:l.format("createFormIpRange"),name:"ipV6Range",width:"md",placeholder:"2001:db8::/64"})]}),(0,n.jsx)(u.u,{name:"ipV6Aux",label:l.format("createFormIpAux"),children:(0,n.jsxs)(T.UW,{children:[(0,n.jsx)(h.Z,{label:l.format("createFormIpAuxDevice"),name:"device",width:"md"}),(0,n.jsx)(h.Z,{label:l.format("createFormIpAuxAddress"),name:"address",width:"md"})]})})]})}}),(0,n.jsx)(u.u,{name:"driverOption",label:l.format("createFormDriverOption"),children:(0,n.jsxs)(T.UW,{children:[(0,n.jsx)(h.Z,{label:l.format("createFormDriverOptionName"),name:"name",width:"md"}),(0,n.jsx)(h.Z,{label:l.format("createFormDriverOptionValue"),name:"value",width:"md"})]})})]})});W.Z=f},55943:function(H,W,e){var Z=e(5574),d=e.n(Z),K=e(15009),O=e.n(K),M=e(99289),F=e.n(M),B=e(80821),V=e(3616),w=e(14946),b=e(36146),D=e(82061),h=e(184),U=e(38345),S=e(60940),A=e(42075),T=e(96074),u=e(26412),R=e(67294),s=e(85893),p=(0,R.forwardRef)(function(x,a){(0,R.useImperativeHandle)(a,function(){return{show:function(E){return F()(O()().mark(function i(){var I,y;return O()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,w.IS)({name:E});case 2:I=j.sent,I.data.info.Containers?(y=[],Object.keys(I.data.info.Containers).map(function(N){I.data.info.Containers[N].Id=N,y.push(I.data.info.Containers[N])}),G(y)):G([]),g(I.data.info),C(!0);case 6:case"end":return j.stop()}},i)}))()}}});var n=(0,R.useState)(!1),f=d()(n,2),t=f[0],C=f[1],v=(0,R.useState)(),o=d()(v,2),r=o[0],g=o[1],P=(0,R.useState)(),c=d()(P,2),_=c[0],G=c[1],l=new b.Uo("components.network");return(0,s.jsx)(h.a,{drawerProps:{width:V.R_},title:l.format("detailTitle"),open:t,onOpenChange:function(E){C(E)},submitter:!1,children:(0,s.jsxs)(U.Z,{ghost:!0,direction:"column",gutter:[10,0],children:[(0,s.jsx)(U.Z,{title:l.format("detailContainer"),ghost:!0,children:(0,s.jsx)(S.Z,{rowKey:"Name",columns:[{title:b.FD.format("listContainerName"),dataIndex:"Name"},{title:"IPV4",dataIndex:"IPv4Address"},{title:"IPV6",dataIndex:"IPv6Address"},{title:"MacAddress",dataIndex:"MacAddress"},{title:b.FD.format("listManage"),render:function(E,i,I){return(0,s.jsx)(A.Z,{split:(0,s.jsx)(T.Z,{type:"vertical"}),children:(0,s.jsx)(B.Z,{buttonProps:{type:"text",icon:(0,s.jsx)(D.Z,{}),danger:!0},confirmProps:{showCommonConfirm:!0},action:function(){var L,j;return(0,w.t9)({name:(L=r==null?void 0:r.Id)!==null&&L!==void 0?L:"",containerName:(j=i.Id)!==null&&j!==void 0?j:""})},tips:b.FD.format("listManageExit"),onSuccess:function(){var L=_==null?void 0:_.filter(function(j){return j.Id!=i.Id});G(L)}},"delete")})}}],dataSource:_,pagination:!1})}),(0,s.jsx)(U.Z,{ghost:!0,title:l.format("detailBasic"),children:(0,s.jsxs)(u.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:[(0,s.jsx)(u.Z.Item,{label:l.format("detailName"),children:r==null?void 0:r.Name}),(0,s.jsx)(u.Z.Item,{label:"Id",children:r==null?void 0:r.Id}),(0,s.jsx)(u.Z.Item,{label:"Driver",children:r==null?void 0:r.Driver}),(0,s.jsx)(u.Z.Item,{label:"Scope",children:r==null?void 0:r.Scope}),(0,s.jsx)(u.Z.Item,{label:"Attachable",children:l.yesNo(r==null?void 0:r.Attachable)}),(0,s.jsx)(u.Z.Item,{label:"Internal",children:l.yesNo(r==null?void 0:r.Internal)}),(r==null?void 0:r.IPAM.Config)&&(r==null?void 0:r.IPAM.Config.map(function(m,E){return(0,s.jsx)(u.Z.Item,{label:m.Gateway&&m.Gateway.includes(":")?"IPV6":"IPV4",children:(0,s.jsxs)(u.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:[(0,s.jsx)(u.Z.Item,{label:"Subnet",children:m.Subnet}),(0,s.jsx)(u.Z.Item,{label:"Gateway",children:m.Gateway}),(0,s.jsx)(u.Z.Item,{label:"IP Range ",children:m.IPRange}),(0,s.jsx)(u.Z.Item,{label:"Excluded IPs",children:m.AuxiliaryAddresses&&Object.keys(m.AuxiliaryAddresses).map(function(i){return m.AuxiliaryAddresses[i]+" ,"})})]})},E)})),(r==null?void 0:r.Options)&&Object.keys(r==null?void 0:r.Options).length>0&&(0,s.jsx)(u.Z.Item,{label:"Options",children:(0,s.jsx)(u.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:Object.keys(r==null?void 0:r.Options).map(function(m){return(0,s.jsx)(u.Z.Item,{label:m,children:r.Options[m]},m)})})}),(r==null?void 0:r.Labels)&&Object.keys(r==null?void 0:r.Labels).length>0&&(0,s.jsx)(u.Z.Item,{label:"Lables",children:(0,s.jsx)(u.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:Object.keys(r==null?void 0:r.Labels).map(function(m){return(0,s.jsx)(u.Z.Item,{label:m,children:r.Labels[m]},m)})})})]})})]})})});W.Z=p},3616:function(H,W,e){e.d(W,{Ed:function(){return O},FK:function(){return d},R_:function(){return Z},ob:function(){return K}});var Z=window.innerWidth<=1024?"90vw":"65vw",d="90vw",K="60vw",O="50vh"},6005:function(H,W,e){e.r(W),e.d(W,{default:function(){return x}});var Z=e(15009),d=e.n(Z),K=e(99289),O=e.n(K),M=e(1699),F=e(80821),B=e(16970),V=e(55943),w=e(98510),b=e(14946),D=e(36146),h=e(52645),U=e(82061),S=e(74453),A=e(82346),T=e(25593),u=e(66309),R=e(42075),s=e(67294),p=e(85893);function x(){var a=(0,s.useRef)(),n=(0,s.useRef)(),f=(0,A.useAccess)(),t=new D.Uo("docker");return(0,p.jsxs)(S._z,{header:{extra:[(0,p.jsx)(M.u,{access:"canSeeDockerNetworkManage",children:(0,p.jsx)(B.Z,{onFinish:function(){var v,o;!((v=a.current)===null||v===void 0)&&v.reloadAndRest&&((o=a.current)===null||o===void 0||o.reloadAndRest())}},"create")},"create")]},children:[(0,p.jsx)(V.Z,{ref:n}),(0,p.jsx)(w.C,{rowKey:"Name",columns:[{title:D.FD.format("listTitle"),ellipsis:!0,dataIndex:"Name",render:function(v,o,r,g,P){return(0,p.jsx)(T.Z.Link,{onClick:function(){var _;(_=n.current)===null||_===void 0||_.show(o.Name)},children:o.Name})}},{title:D.FD.format("listType"),width:100,render:function(v,o,r,g,P){return(o.Name=="none"||o.Name=="bridge"||o.Name=="host")&&(0,p.jsx)(u.Z,{color:"blue",children:"System"})}},{title:D.FD.format("listDriver"),ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"IPAM Driver",ellipsis:!0,width:120,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4",ellipsis:!0,width:150,search:!1,render:function(v,o,r,g,P){return o.IPAM.Config&&o.IPAM.Config[0]?(0,p.jsxs)(R.Z,{direction:"vertical",children:[(0,p.jsx)("div",{children:o.IPAM.Config&&o.IPAM.Config[0].Subnet}),(0,p.jsx)("div",{children:o.IPAM.Config&&o.IPAM.Config[0].Gateway})]}):"-"}},{title:"IPV6",ellipsis:!0,width:150,search:!1,render:function(v,o,r,g,P){return o.IPAM.Config&&o.IPAM.Config[1]?(0,p.jsxs)(R.Z,{direction:"vertical",children:[(0,p.jsx)("div",{children:o.IPAM.Config&&o.IPAM.Config[1].Subnet}),(0,p.jsx)("div",{children:o.IPAM.Config&&o.IPAM.Config[1].Gateway})]}):"-"}},{title:D.FD.format("listCreatedAt"),ellipsis:!0,width:180,search:!1,dataIndex:"Created",render:function(v,o,r,g,P){return new Date(o.Created).toLocaleString()}}],request:function(){var C=O()(d()().mark(function v(o,r,g){var P;return d()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,b.jR)({name:o.Name});case 2:return P=_.sent,_.abrupt("return",{data:P.data.list,success:!0,total:P.data.list.length});case 4:case"end":return _.stop()}},v)}));return function(v,o,r){return C.apply(this,arguments)}}(),rowSelection:f.canSeeDockerNetworkManage?{defaultSelectedRowKeys:[],alwaysShowAlert:!0}:void 0,actionRef:a,quickToolbarRender:function(v){var o=v.selectedRows,r=v.finish,g=v.loading;return(0,p.jsxs)(R.Z,{size:16,children:[(0,p.jsx)(F.Z,{action:function(){return g(),(0,b.CI)().finally(function(){r(!0)})},buttonProps:{icon:(0,p.jsx)(h.Z,{})},onSuccess:function(){var c,_;return!((c=a.current)===null||c===void 0)&&c.reloadAndRest&&((_=a.current)===null||_===void 0||_.reloadAndRest()),!0},onError:function(){var c,_;return!((c=a.current)===null||c===void 0)&&c.reset&&((_=a.current)===null||_===void 0||_.reset()),!0},confirmProps:{description:t.format("networkListManagePruneTip")},children:D.FD.format("listManagePrune")},"clearNotUse"),(0,p.jsx)(F.Z,{buttonProps:{danger:!0,type:"primary",icon:(0,p.jsx)(U.Z,{})},confirmProps:{showCommonConfirm:!0},action:function(){return g(),(0,b._x)({name:o.map(function(c){return c.Id})}).finally(function(){r(!0)})},onSuccess:function(){var c,_;return!((c=a.current)===null||c===void 0)&&c.reloadAndRest&&((_=a.current)===null||_===void 0||_.reloadAndRest()),!0},onError:function(){var c,_;return!((c=a.current)===null||c===void 0)&&c.reset&&((_=a.current)===null||_===void 0||_.reset()),!0},children:D.FD.format("listManageDeleteBatch")},"delete")]})}})]})}},14946:function(H,W,e){e.d(W,{CI:function(){return b},HY:function(){return R},IS:function(){return F},XY:function(){return S},_3:function(){return p},_x:function(){return h},jR:function(){return V},t9:function(){return T}});var Z=e(15009),d=e.n(Z),K=e(99289),O=e.n(K),M=e(82346);function F(a){return B.apply(this,arguments)}function B(){return B=O()(d()().mark(function a(n){return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,M.request)("/api/app/network/get-detail",{method:"POST",data:n}));case 1:case"end":return t.stop()}},a)})),B.apply(this,arguments)}function V(a){return w.apply(this,arguments)}function w(){return w=O()(d()().mark(function a(n){return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,M.request)("/api/app/network/get-list",{method:"POST",data:n}));case 1:case"end":return t.stop()}},a)})),w.apply(this,arguments)}function b(){return D.apply(this,arguments)}function D(){return D=O()(d()().mark(function a(){return d()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,M.request)("/api/app/network/prune",{method:"POST"});case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},a)})),D.apply(this,arguments)}function h(a){return U.apply(this,arguments)}function U(){return U=O()(d()().mark(function a(n){return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,M.request)("/api/app/network/delete",{method:"POST",data:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},a)})),U.apply(this,arguments)}function S(a){return A.apply(this,arguments)}function A(){return A=O()(d()().mark(function a(n){return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,M.request)("/api/app/network/create",{method:"POST",data:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},a)})),A.apply(this,arguments)}function T(a){return u.apply(this,arguments)}function u(){return u=O()(d()().mark(function a(n){return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,M.request)("/api/app/network/disconnect",{method:"POST",data:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},a)})),u.apply(this,arguments)}function R(a){return s.apply(this,arguments)}function s(){return s=O()(d()().mark(function a(n){return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,M.request)("/api/app/network/connect",{method:"POST",data:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},a)})),s.apply(this,arguments)}function p(a){return x.apply(this,arguments)}function x(){return x=O()(d()().mark(function a(n){return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,M.request)("/api/app/network/get-container-list",{method:"POST",data:n}));case 1:case"end":return t.stop()}},a)})),x.apply(this,arguments)}}}]);
