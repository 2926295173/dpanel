"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8022],{80821:function(w,v,n){n.d(v,{Z:function(){return f}});var O=n(5574),s=n.n(O),p=n(24963),l=n(86738),m=n(28036),P=n(83062),S=n(67294),T=n(85893);function f(u){var W=(0,S.useState)(!1),o=s()(W,2),I=o[0],r=o[1],c=(0,S.useContext)(p.Z),R=c.lang,x=c.notice,Z=c.message,M=function(){r(!0),u.action().then(function(g){if(r(!1),typeof u.onSuccess=="function"&&u.onSuccess(g),u.messageSuccess){var _="";typeof u.messageSuccess=="function"?_=u.messageSuccess(g):_=u.messageSuccess,_=R("notification.".concat(_))+R("notification.title.success"),u.asynced?Z.info(_):Z.success(_)}}).catch(function(g){r(!1),typeof u.onError=="function"&&u.onError(g)})};return u.confirm?(0,T.jsx)(l.Z,{style:{width:500},title:u.confirmTitle?u.confirmTitle:R("notification.title.tip"),description:u.confirm,onConfirm:M,okText:"Yes",cancelText:"No",children:(0,T.jsx)(m.ZP,{disabled:u.disabled,icon:u.icon,loading:I,danger:u.danger,type:u.type,children:u.children})}):(0,T.jsx)(P.Z,{title:u.tips,children:(0,T.jsx)(m.ZP,{disabled:u.disabled,icon:u.icon,loading:I,onClick:M,danger:u.danger,type:u.type,children:u.children})})}},94359:function(w,v,n){n.d(v,{Z:function(){return I}});var O=n(67294),s=n(3089),p=n(98165),l=n(18429),m=n(8751),P=n(14313),S=n(30159),T=n(87740),f=n(66309),u=n(83062),W=n(63713),o=n(85893);function I(r){var c=(0,o.jsx)(o.Fragment,{});if(r.status=="0"&&(c=(0,o.jsx)(f.Z,{icon:(0,o.jsx)(s.Z,{}),color:"default",children:"waiting"})),r.status=="10"&&(c=(0,o.jsx)(f.Z,{icon:(0,o.jsx)(p.Z,{spin:!0}),color:"processing",children:"processing"})),r.status=="20"&&(c=(0,o.jsx)(f.Z,{icon:(0,o.jsx)(l.Z,{}),color:"error",children:"error"})),r.status=="30"&&(c=(0,o.jsx)(f.Z,{icon:(0,o.jsx)(m.Z,{}),color:"success",children:"success"})),r.status=="running"||r.status=="healthy"){var R,x;c=(0,o.jsx)(f.Z,{icon:(0,o.jsx)(P.Z,{}),color:"success",children:(R=r.message)!==null&&R!==void 0&&R.showInTag?(x=r.message)===null||x===void 0?void 0:x.content:r.status})}if(r.status=="paused"){var Z,M;c=(0,o.jsx)(f.Z,{icon:(0,o.jsx)(S.Z,{}),children:(Z=r.message)!==null&&Z!==void 0&&Z.showInTag?(M=r.message)===null||M===void 0?void 0:M.content:r.status})}if(r.status=="waiting"||r.status=="starting"){var K,g;c=(0,o.jsx)(f.Z,{icon:(0,o.jsx)(T.Z,{}),children:(K=r.message)!==null&&K!==void 0&&K.showInTag?(g=r.message)===null||g===void 0?void 0:g.content:r.status})}if(r.status=="exited"||r.status=="dead"||r.status=="removing"||r.status=="restarting"||r.status=="unhealthy"||r.status=="created"){var _,L;c=(0,o.jsx)(f.Z,{icon:(0,o.jsx)(l.Z,{}),color:"warning",children:(_=r.message)!==null&&_!==void 0&&_.showInTag?(L=r.message)===null||L===void 0?void 0:L.content:r.status})}if(r.link&&(c=(0,o.jsx)(W.Link,{to:r.link,children:c})),r.message){var C;c=(0,o.jsx)(u.Z,{placement:(C=r.message.placement)!==null&&C!==void 0?C:"top",title:r.message.content,children:c})}return(0,o.jsx)(o.Fragment,{children:c})}},24963:function(w,v,n){var O=n(67294),s=(0,O.createContext)({});v.Z=s},96781:function(w,v,n){var O=n(67294),s=(0,O.createContext)({});v.Z=s},83536:function(w,v,n){n.r(v),n.d(v,{default:function(){return k}});var O=n(15009),s=n.n(O),p=n(99289),l=n.n(p),m=n(80821),P=n(90098),S=n(43425),T=n(86548),f=n(23430),u=n(90078),W=n(10641),o=n(63713),I=n(28036),r=n(25593),c=n(42075),R=n(96074),x=n(83062),Z=n(67294),M=n(96781),K=n(94359),g=n(67255),_=n(93162),L=n(24963),C=n(66309),i=n(85893);function z(E){var B=(0,o.useIntl)(),b=(0,Z.useContext)(L.Z),y=b.lang,t;if(!E.type)t=(0,i.jsx)(C.Z,{children:y("compose.type.default")});else switch(E.type){case"remoteUrl":t=(0,i.jsx)(C.Z,{color:"cyan",children:y("compose.type.".concat(E.type))});break;case"serverPath":t=(0,i.jsx)(C.Z,{color:"blue",children:y("compose.type.".concat(E.type))});break;case"storagePath":t=(0,i.jsx)(C.Z,{color:"geekblue",children:y("compose.type.".concat(E.type))});break;case"outPath":t=(0,i.jsx)(C.Z,{color:"yellow",children:y("compose.type.".concat(E.type))});break;case"store":t=(0,i.jsx)(C.Z,{color:"green",children:y("compose.type.".concat(E.type))});break;case"dangling":t=(0,i.jsx)(C.Z,{color:"error",children:y("compose.type.".concat(E.type))});break;default:t=(0,i.jsx)(C.Z,{children:y("compose.type.".concat(E.type))})}return(0,i.jsx)(x.Z,{title:E.tootip,children:t})}function k(){var E=(0,Z.useContext)(M.Z),B=E.listTableRef,b=(0,Z.useContext)(L.Z),y=b.lang,t=b.notice;return(0,i.jsx)(u._z,{header:{extra:[(0,i.jsx)(o.Link,{to:"/compose/create",reloadDocument:location.search.length>0,children:(0,i.jsx)(I.ZP,{type:"primary",children:"\u521B\u5EFA\u4EFB\u52A1"},"createCompose")},"create")]},children:(0,i.jsx)(W.Z,{scroll:{x:"max-content"},request:function(){var a=l()(s()().mark(function d(e){var A;return s()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,P.pm)({title:e.title,name:e.name});case 2:return A=h.sent,h.abrupt("return",{data:A.data.list,success:!0,total:A.data.list.length});case 4:case"end":return h.stop()}},d)}));return function(d){return a.apply(this,arguments)}}(),rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name",width:200,render:function(d,e,A,j,h){return e.setting.type=="dangling"?(0,i.jsx)(r.Z.Link,{onClick:function(){t.info("\u65E0\u6CD5\u627E\u5230\u8BE5\u4EFB\u52A1\u7684 compose.yaml \u6587\u4EF6\uFF0C\u8BF7\u6302\u8F7D\u76F8\u5E94\u7684 compose \u6587\u4EF6\u6216\u662F\u5728\u9762\u677F\u7684 compose \u76EE\u5F55\u6DFB\u52A0\u540C\u6807\u8BC6\u7684\u4EFB\u52A1\u76EE\u5F55\u53CA compose.yaml \u6587\u4EF6")},children:e.name}):(0,i.jsx)(o.Link,{to:"/compose/deploy/"+(e.id||e.name),children:e.name},A)},sorter:function(d,e){return d.name.localeCompare(e.name)},sortDirections:["descend","ascend"]},{title:"\u9879\u76EE\u540D\u79F0",dataIndex:"title",width:200},{title:"\u7C7B\u578B",width:150,search:!1,render:function(d,e,A,j,h){var D;return(0,i.jsx)(z,{tootip:(D=e.setting.uri)!==null&&D!==void 0?D:"",type:e.setting&&e.setting.type?e.setting.type:""})}},{title:"\u5BB9\u5668\u72B6\u6001",dataIndex:"status",search:!1,width:300,render:function(d,e,A,j,h){return(0,i.jsx)(c.Z,{children:e.setting.status.split(", ").map(function(D){var U="running",F=D.indexOf("(");return F>-1?U=D.slice(0,F):U=D,(0,i.jsx)(K.Z,{status:U,message:{content:y("compose.status.".concat(U),{count:D.slice(F+1,D.length-1)}),placement:"top",showInTag:!0}},e.id)})})}},{title:"\u64CD\u4F5C",width:80,valueType:"option",key:"option",render:function(d,e,A,j,h){return e.setting.type!="dangling"&&(0,i.jsxs)(c.Z,{split:(0,i.jsx)(R.Z,{type:"vertical"}),children:[(0,i.jsx)(o.Link,{to:"/compose/deploy/"+(e.id||e.name),children:(0,i.jsx)(x.Z,{title:"\u90E8\u7F72",children:(0,i.jsx)(S.Z,{})})},"3"),(0,i.jsx)(o.Link,{to:"/compose/create?id="+(e.id||e.name),children:(0,i.jsx)(x.Z,{title:"\u7F16\u8F91",children:(0,i.jsx)(T.Z,{})})},"4"),(0,i.jsx)(r.Z.Link,{onClick:l()(s()().mark(function D(){var U,F;return s()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,(0,P.Pn)({id:e.id});case 2:U=G.sent,U&&U.data&&U.data.detail&&(F=new Blob([U.data.detail.yaml],{type:"text/plain"}),(0,_.saveAs)(F,e.name+"-compose.yaml"));case 4:case"end":return G.stop()}},D)})),children:(0,i.jsx)(x.Z,{title:"\u4E0B\u8F7D",children:(0,i.jsx)(f.Z,{})})},"2")]})}}],rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0,getCheckboxProps:function(d){return{disabled:d.setting.type=="dangling"||d.setting.type=="outPath"}}},tableAlertOptionRender:function(d){var e=d.selectedRows;return(0,i.jsx)(c.Z,{size:16,children:(0,i.jsx)(m.Z,{danger:!0,type:"primary",action:function(){return(0,P.ik)({id:e.map(function(j){return j.id})})},onSuccess:function(){var j,h;return!((j=B.current)===null||j===void 0)&&j.reloadAndRest&&((h=B.current)===null||h===void 0||h.reloadAndRest()),!0},onError:function(){var j,h;return!((j=B.current)===null||j===void 0)&&j.reset&&((h=B.current)===null||h===void 0||h.reset()),!0},messageSuccess:"delete",confirm:(0,i.jsx)(c.Z,{style:{width:280},direction:"vertical",children:(0,i.jsx)(r.Z.Text,{children:"\u5220\u9664\u524D\u8BF7\u5148\u9500\u6BC1\u76F8\u5173\u5BB9\u5668\uFF0C\u786E\u8BA4\u5417\uFF1F"})}),children:"\u6279\u91CF\u5220\u9664"})})},pagination:(0,g.O)(),search:{collapsed:!1},actionRef:B,columnsState:(0,g.j)("compose-list")})})}},90098:function(w,v,n){n.d(v,{CT:function(){return o},GG:function(){return K},MG:function(){return z},Oh:function(){return R},Pn:function(){return u},U_:function(){return C},VN:function(){return _},iE:function(){return b},ik:function(){return r},im:function(){return P},mg:function(){return Z},pm:function(){return T},xC:function(){return E}});var O=n(15009),s=n.n(O),p=n(99289),l=n.n(p),m=n(63713);function P(t){return S.apply(this,arguments)}function S(){return S=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/create",{method:"POST",data:a}));case 1:case"end":return e.stop()}},t)})),S.apply(this,arguments)}function T(t){return f.apply(this,arguments)}function f(){return f=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/get-list",{method:"POST",data:a}));case 1:case"end":return e.stop()}},t)})),f.apply(this,arguments)}function u(t){return W.apply(this,arguments)}function W(){return W=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.id=String(a.id),e.abrupt("return",(0,m.request)("/api/app/compose/get-task",{method:"POST",data:a}));case 2:case"end":return e.stop()}},t)})),W.apply(this,arguments)}function o(t){return I.apply(this,arguments)}function I(){return I=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.id=String(a.id),e.abrupt("return",(0,m.request)("/api/app/compose/get-detail",{method:"POST",data:a}));case 2:case"end":return e.stop()}},t)})),I.apply(this,arguments)}function r(t){return c.apply(this,arguments)}function c(){return c=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/delete",{method:"POST",data:a}));case 1:case"end":return e.stop()}},t)})),c.apply(this,arguments)}function R(t){return x.apply(this,arguments)}function x(){return x=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.id=String(a.id),e.abrupt("return",(0,m.request)("/api/app/compose/container-deploy",{method:"POST",data:a}));case 2:case"end":return e.stop()}},t)})),x.apply(this,arguments)}function Z(t){return M.apply(this,arguments)}function M(){return M=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.id=String(a.id),e.abrupt("return",(0,m.request)("/api/app/compose/container-destroy",{method:"POST",data:a}));case 2:case"end":return e.stop()}},t)})),M.apply(this,arguments)}function K(t){return g.apply(this,arguments)}function g(){return g=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.id=String(a.id),e.abrupt("return",(0,m.request)("/api/app/compose/container-ctrl",{method:"POST",data:a}));case 2:case"end":return e.stop()}},t)})),g.apply(this,arguments)}function _(t){return L.apply(this,arguments)}function L(){return L=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.id=String(a.id),e.abrupt("return",(0,m.request)("/api/app/compose/container-log",{method:"POST",data:a}));case 2:case"end":return e.stop()}},t)})),L.apply(this,arguments)}function C(t){return i.apply(this,arguments)}function i(){return i=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/container-process-kill",{method:"POST",data:a}));case 1:case"end":return e.stop()}},t)})),i.apply(this,arguments)}function z(t){return k.apply(this,arguments)}function k(){return k=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/get-from-uri",{method:"POST",data:a}));case 1:case"end":return e.stop()}},t)})),k.apply(this,arguments)}function E(t){return B.apply(this,arguments)}function B(){return B=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/app/compose/parse",{method:"POST",data:a}));case 1:case"end":return e.stop()}},t)})),B.apply(this,arguments)}function b(t){return y.apply(this,arguments)}function y(){return y=l()(s()().mark(function t(a){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("/api/common/store/deploy",{method:"POST",data:a}));case 1:case"end":return e.stop()}},t)})),y.apply(this,arguments)}},67255:function(w,v,n){n.d(v,{O:function(){return O},j:function(){return s}});function O(){var p,l=parseInt((p=localStorage.getItem("dpanel-pagesize"))!==null&&p!==void 0?p:"0");return{showSizeChanger:!0,defaultPageSize:l!=null?l:20}}function s(p){var l="dpanel-table-column-".concat(p),m={};if(localStorage.getItem(l)){var P;m=JSON.parse((P=localStorage.getItem(l))!==null&&P!==void 0?P:"{}")}return{defaultValue:m,onChange:function(T){localStorage.setItem("dpanel-table-column-".concat(p),JSON.stringify(T))}}}}}]);
