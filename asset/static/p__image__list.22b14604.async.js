"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4214],{1699:function(k,C,e){e.d(C,{u:function(){return h}});var I=e(9783),i=e.n(I),T=e(97857),o=e.n(T),E=e(67294),_=e(82346),R=e(40411),x=e(42075),m=e(85893),h=function(a){var U=(0,_.useAccess)(),n=Array.isArray(a.access)?a.access:[a.access],p,v=a.fallback;if(typeof a.children=="function"?(p=a.children(n.reduce(function(c,P){return o()(o()({},c),{},i()({},P,U[P]))},{})),p||(p=v)):n.every(function(c){return U[c]})?p=a.children:p=v,!v&&p&&a.showProTips&&U.canSeeEnableCe){if(U.canSeeEnableHiddenProTips)return null;p=(0,m.jsx)(R.Z,{offset:a.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:p})}if(!v&&p&&a.showProRibbonTips&&U.canSeeEnableCe){if(U.canSeeEnableHiddenProTips)return null;p=(0,m.jsx)(R.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:p})}return a.space?(0,m.jsx)(x.Z,o()(o()({},a.space),{},{children:p})):p}},80821:function(k,C,e){e.d(C,{Z:function(){return U}});var I=e(97857),i=e.n(I),T=e(5574),o=e.n(T),E=e(24963),_=e(36146),R=e(86738),x=e(83062),m=e(96074),h=e(83622),y=e(67294),a=e(85893);function U(n){var p=(0,y.useState)(!1),v=o()(p,2),c=v[0],P=v[1],D=(0,y.useContext)(E.Z),d=D.message,F=new _.Uo,O=function(){P(!0);var l=n.action();l instanceof Promise?l.then(function(s){if(P(!1),s){typeof n.onSuccess=="function"&&n.onSuccess(s);var $="";n.messageSuccess?typeof n.messageSuccess=="function"?$=n.messageSuccess(s):$=n.messageSuccess.indexOf("notification.")==0?F.format(n.messageSuccess):n.messageSuccess:$=F.format("notification.finish"),n.asynced?d.info($):d.success($)}}).catch(function(s){P(!1),typeof n.onError=="function"&&n.onError(s)}):P(!1)};return n.confirm?(0,a.jsx)(R.Z,i()(i()({style:{width:500},title:n.confirmTitle?n.confirmTitle:F.format("notification.title.tip"),description:typeof n.confirm=="string"&&n.confirm.indexOf("notification.")==0?F.format(n.confirm):n.confirm,onConfirm:O,okText:"Yes",cancelText:"No",onOpenChange:n.confirmOnOpenChange},n.confirmProps),{},{children:(0,a.jsxs)(x.Z,{title:n.tips,children:[n.showDivider&&(0,a.jsx)(m.Z,{type:"vertical",style:{marginRight:15}}),(0,a.jsx)(h.ZP,{block:n.block,disabled:n.disabled,icon:!n.children&&c?void 0:n.icon,loading:c,danger:n.danger,type:n.type,children:n.children})]})})):(0,a.jsxs)(x.Z,{title:n.tips,children:[n.showDivider&&(0,a.jsx)(m.Z,{type:"vertical",style:{marginRight:15}}),(0,a.jsx)(h.ZP,{block:n.block,style:n.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:n.disabled,icon:!n.children&&c?void 0:n.icon,loading:c,onClick:O,danger:n.danger,type:n.type,children:n.children})]})}},81366:function(k,C,e){var I=e(97857),i=e.n(I),T=e(19632),o=e.n(T),E=e(5574),_=e.n(E),R=e(27254),x=e(42075),m=e(85418),h=e(25593),y=e(83622),a=e(67294),U=e(31112),n=e(85893),p={title:"/",path:"/"},v=(0,a.forwardRef)(function(c,P){var D=(0,a.useContext)(U.Z),d=D.showPath,F=D.redirectPath,O=(0,a.useState)([p]),g=_()(O,2),l=g[0],s=g[1];(0,a.useImperativeHandle)(P,function(){return{addHistory:function(S,w){w=="/"?s([p]):s([].concat(o()(l),[{title:S,path:w}]))},initHistory:function(S,w){s([i()(i()({},p),{},{children:w})].concat(o()(S)))}}});var $=function(S){d?d(l[S].title,l[S].path):c.showPath&&c.showPath(l[S].title,l[S].path);var w=l.filter(function(re,X){return X<=S});s(o()(w))};return(0,n.jsxs)(x.Z,{children:[(0,n.jsx)(x.Z.Compact,{children:l.map(function(G,S){return G.children?(0,n.jsxs)(m.Z.Button,{menu:{items:G.children.map(function(w,re){return{key:re,label:(0,n.jsx)(h.Z.Link,{onClick:function(){F(w)},children:w},re)}})},type:"dashed",onClick:function(re){$(S)},children:[(0,n.jsx)(R.Z,{})," ",G.title]},S):(0,n.jsx)(y.ZP,{icon:(0,n.jsx)(R.Z,{}),type:"dashed",onClick:function(){$(S)},children:G.title},S)})}),l.length>=2&&(0,n.jsx)(h.Z.Text,{copyable:{text:l[l.length-1].path}})]})});C.Z=v},31112:function(k,C,e){var I=e(67294),i=(0,I.createContext)({});C.Z=i},68536:function(k,C,e){e.d(C,{Z:function(){return y}});var I=e(24963),i=e(36146),T=e(93613),o=e(36693),E=e(2741),_=e(25593),R=e(42075),x=e(67294),m=e(85893),h=0;function y(a){var U=(0,x.useContext)(I.Z),n=U.message,p=new i.Uo("components.explorer");return a.isDir?(0,m.jsx)(_.Z.Link,{onClick:function(){a.onClick&&a.onClick()},children:(0,m.jsxs)(R.Z,{children:[(0,m.jsx)(T.Z,{}),a.showName]})}):a.isLink?(0,m.jsx)(_.Z.Link,{onClick:function(){a.onClick&&a.onClick()},children:(0,m.jsxs)(R.Z,{children:[(0,m.jsx)(o.Z,{}),a.showName]})}):(0,m.jsx)(_.Z.Text,{onClick:function(){if(h++,h==2){h=0,a.onClick&&a.onClick();return}setTimeout(function(){h==1&&n.info(p.format("fileNameMessageViewDetail")),h=0},400)},style:{cursor:"pointer"},children:(0,m.jsxs)(R.Z,{children:[(0,m.jsx)(E.Z,{}),a.showName]})})}},92754:function(k,C,e){var I=e(5574),i=e.n(I),T=e(67294),o=e(82346),E=e(38703),_=e(85893),R=(0,T.forwardRef)(function(x,m){var h=(0,T.useState)(""),y=i()(h,2),a=y[0],U=y[1];(0,T.useImperativeHandle)(m,function(){return{setFinish:function(){P({finish:{downloading:100,extracting:100}})},setStart:function(d){d&&U(d),P({start:{downloading:0,extracting:0}})},close:function(){n.progress.close("image:pull:"+a),P({start:{downloading:0,extracting:0}})}}});var n=(0,o.useModel)("subscriber");n.addDataHandler("image:pull:"+a,function(D){P(D.data)});var p=(0,T.useState)(),v=i()(p,2),c=v[0],P=v[1];return(0,T.useEffect)(function(){return P({start:{downloading:0,extracting:0}}),function(){n.progress.close("image:pull:"+a)}},[]),(0,_.jsx)(_.Fragment,{children:c&&Object.keys(c).map(function(D){return(0,_.jsx)(E.Z,{percent:c[D].downloading,success:{percent:c[D].extracting}},D)})})});C.Z=R},47248:function(k,C,e){var I=e(15009),i=e.n(I),T=e(99289),o=e.n(T),E=e(5574),_=e.n(E),R=e(38345),x=e(97269),m=e(62370),h=e(5966),y=e(64317),a=e(83622),U=e(85265),n=e(25593),p=e(42075),v=e(67294),c=e(3393),P=e(97961),D=e(92754),d=e(82346),F=e(2205),O=e(3616),g=e(36146),l=e(85893),s=(0,v.forwardRef)(function($,G){var S=(0,v.useState)(!1),w=_()(S,2),re=w[0],X=w[1],se=(0,v.useRef)(),q=(0,v.useRef)(),ve=(0,v.useState)(!1),me=_()(ve,2),fe=me[0],ee=me[1],H=new g.Uo("components.imagePull");return(0,v.useImperativeHandle)(G,function(){return{upgradeImage:function(b){var K;return X(!0),(K=se.current)===null||K===void 0||K.setFieldValue("imageUrl",b),(0,c.Gb)({tag:b,type:"pull"})},setImageName:function(b){var K;X(!0),(K=se.current)===null||K===void 0||K.setFieldValue("imageUrl",b)}}}),[(0,l.jsx)(a.ZP,{type:$.buttonType?$.buttonType:"default",onClick:function(){var b,K;X(!0),(b=se.current)===null||b===void 0||b.resetFields(),(K=q.current)===null||K===void 0||K.setStart("")},children:H.format("triggerButton")},"remoteBtn"),(0,l.jsxs)(U.Z,{forceRender:!0,open:re,title:H.format("drawerTitle"),width:O.R_,onClose:function(){var b;X(!1),(b=q.current)===null||b===void 0||b.close()},footer:!1,children:[(0,l.jsx)(R.Z,{children:(0,l.jsx)(n.Z.Text,{children:(0,l.jsxs)("ul",{style:{lineHeight:"30px"},children:[(0,l.jsxs)("li",{children:[H.format("tip.1")," ",(0,l.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:g.FD.format("help")})]}),(0,l.jsxs)("li",{children:[H.format("tip.2")," ",(0,l.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:g.FD.format("help")})]}),(0,l.jsxs)("li",{children:[H.format("tip.3")," "]}),(0,l.jsxs)("li",{children:[H.format("tip.4")," ",(0,l.jsx)(d.Link,{to:"/image/registry",children:g.Ob.format("image.registry.create")})]}),(0,l.jsxs)("li",{children:[H.format("tip.5")," ",(0,l.jsx)(d.Link,{to:"/image/registry",children:g.Ob.format("image.registry")})]})]})})}),(0,l.jsx)(R.Z,{title:H.format("triggerButton"),headerBordered:!0,children:(0,l.jsxs)(x.A,{formRef:se,submitter:!1,isKeyPressSubmit:!0,onFinish:function(){var z=o()(i()().mark(function b(K){var M,oe,t,_e,ie,he;return i()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return ie=(M=K.imageUrl)!==null&&M!==void 0?M:"",K.registry&&(ie=K.registry.serverAddress+"/"+ie),ee(!0),(oe=q.current)===null||oe===void 0||oe.setStart(ie),Q.next=6,(0,c.Gb)({tag:ie,type:"pull",platform:(t=K.platform)!==null&&t!==void 0?t:""}).finally(function(){ee(!1)});case 6:return he=Q.sent,(_e=q.current)===null||_e===void 0||_e.setFinish(),X(!1),$.onFinish&&$.onFinish(he.data.tag),Q.abrupt("return",!0);case 11:case"end":return Q.stop()}},b)}));return function(b){return z.apply(this,arguments)}}(),children:[(0,l.jsxs)(p.Z.Compact,{children:[(0,l.jsx)(m.Z,{name:"registry",children:(0,l.jsx)(F.Z,{width:"150px"})}),(0,l.jsx)(h.Z,{disabled:fe,width:270,name:"imageUrl",placeholder:H.format("imageUrlEmpty"),required:!0,rules:[{required:!0}]}),(0,l.jsx)(y.Z,{name:"platform",style:{width:100},placeholder:H.format("imagePlatformEmpty"),options:P.ii.map(function(z){return{label:z.name,value:z.name}})}),(0,l.jsx)(a.ZP,{loading:fe,onClick:o()(i()().mark(function z(){var b;return i()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:(b=se.current)===null||b===void 0||b.submit();case 1:case"end":return M.stop()}},z)})),children:H.format("triggerButton")}),(0,l.jsx)(a.ZP,{danger:!0,onClick:function(){var b;(b=q.current)===null||b===void 0||b.close()},children:g.FD.format("listManageKill")})]}),(0,l.jsx)(m.Z,{label:H.format("progressTitle"),children:(0,l.jsx)(D.Z,{ref:q})})]})})]},"remoteDrawer")]});C.Z=s},78451:function(k,C,e){e.d(C,{Z:function(){return T}});var I=e(67294),i=e(85893);function T(o){var E;return(0,i.jsx)("span",{style:{width:o.width?o.width:"auto",wordBreak:"break-word"},children:(E=o.content)!==null&&E!==void 0?E:o.children})}},51100:function(k,C,e){e.d(C,{Z:function(){return E}});var I=e(97961),i=e(91604),T=e(1677),o=e(85893);function E(_){return _.showDragger?(0,o.jsx)(i.Z,{max:_.max?_.max:1,title:_.title,label:_.label,required:_.required,rules:[{required:_.required}],fieldProps:{multiple:!!(_.max&&_.max>1),name:"file",accept:_.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(x){return new Promise(function(m){var h;(0,I._2)({path:(h=x.response.data.path)!==null&&h!==void 0?h:""}).then(function(y){m(!0)})})}},name:_.name}):(0,o.jsx)(T.Z,{max:_.max?_.max:1,title:_.title,label:_.label,required:_.required,rules:[{required:_.required}],fieldProps:{multiple:!!(_.max&&_.max>1),name:"file",accept:_.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(x){return new Promise(function(m){var h;(0,I._2)({path:(h=x.response.data.path)!==null&&h!==void 0?h:""}).then(function(y){m(!0)})})}},name:_.name})}},65913:function(k,C,e){var I=e(5574),i=e.n(I),T=e(74330),o=e(67294),E=e(85893),_=(0,o.forwardRef)(function(R,x){(0,o.useImperativeHandle)(x,function(){return{show:function(){a(!0)},destroy:function(){a(!1)}}});var m=(0,o.useState)(!1),h=i()(m,2),y=h[0],a=h[1];return(0,E.jsx)(T.Z,{spinning:y,size:"default",children:R.children})});C.Z=_},17550:function(k,C,e){e.r(C),e.d(C,{default:function(){return pe}});var I=e(19632),i=e.n(I),T=e(15009),o=e.n(T),E=e(99289),_=e.n(E),R=e(5574),x=e.n(R),m=e(90078),h=e(56729),y=e(97269),a=e(62370),U=e(37476),n=e(5966),p=e(83622),v=e(25593),c=e(42075),P=e(66309),D=e(96074),d=e(83062),F=e(84567),O=e(50136),g=e(67294),l=e(82346),s=e(18148),$=e(5251),G=e(80821),S=e(43425),w=e(64789),re=e(58638),X=e(1912),se=e(2205),q=e(67255),ve=e(3393),me=e(93162),fe=e(78914),ee=e(1699),H=e(184),z=e(44349),b=e(97961),K=e(51100),M=e(36146),oe=e(3616),t=e(85893),_e=(0,g.forwardRef)(function(Q,L){(0,g.useImperativeHandle)(L,function(){return{}});var ce=(0,g.useRef)(),te=new M.Uo("components.image");return(0,t.jsxs)(H.a,{drawerProps:{width:oe.R_},title:te.format("importTitle"),trigger:(0,t.jsx)(p.ZP,{children:te.format("importTitle")},"create"),formRef:ce,onFinish:function(){var Ee=_()(o()().mark(function ge(le){var ne,ue;return o()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,(0,b.GH)({localUrl:le.imageTarUpload?le.imageTarUpload.map(function(B){return B.response.data.path}):[],remoteUrl:le.remoteUrl?le.remoteUrl.map(function(B){return B.url}):[]});case 2:return ue=Y.sent,!((ne=ce.current)===null||ne===void 0)&&ne.resetFields&&ce.current.resetFields(),Q.onFinish&&Q.onFinish(),Y.abrupt("return",!0);case 6:case"end":return Y.stop()}},ge)}));return function(ge){return Ee.apply(this,arguments)}}(),children:[(0,t.jsx)(K.Z,{label:te.format("importLocal"),showDragger:!0,max:10,title:te.format("importLocalTip"),name:"imageTarUpload",accept:".tar"}),(0,t.jsx)(z.Z,{label:te.format("importRemote"),name:"remoteUrl",showAddButton:!0,hideCopyButton:!0,min:1,items:[{width:"lg",name:"url",placeholder:te.format("importRemoteEmpty")}]})]})}),ie=_e,he=e(47248);function pe(){var Q=(0,l.useAccess)(),L=(0,g.useRef)(),ce=(0,g.useState)({force:!1}),te=x()(ce,2),Ee=te[0],ge=te[1],le=(0,g.useRef)(),ne=(0,g.useRef)(),ue=(0,g.useRef)(),V=new M.Uo("image"),Y=(0,g.useRef)();return(0,t.jsxs)(m._z,{header:{extra:[(0,t.jsx)(ee.u,{access:"canSeeImageListManageCreate",children:(0,t.jsx)(l.Link,{to:"/image/create",children:(0,t.jsx)(p.ZP,{type:"primary",children:M.Ob.format("image.create")},"create")},"create")},"create"),(0,t.jsx)(ee.u,{access:"canSeeImageListPull",children:(0,t.jsx)(he.Z,{onFinish:function(){var j,r;!((j=L.current)===null||j===void 0)&&j.reloadAndRest&&((r=L.current)===null||r===void 0||r.reloadAndRest())}},"remote")},"remote"),(0,t.jsx)(ee.u,{access:"canSeeImageListManageCreate",children:(0,t.jsx)(ie,{onFinish:function(){var j;!((j=L.current)===null||j===void 0)&&j.reloadAndRest&&L.current.reloadAndRest()}})},"import")]},children:[(0,t.jsx)(fe.Z,{ref:ne,onClose:function(){var j,r;!((j=L.current)===null||j===void 0)&&j.reloadAndRest&&((r=L.current)===null||r===void 0||r.reloadAndRest())}}),(0,t.jsx)(h.Z,{scroll:{x:"max-content"},rowKey:"Id",columns:[{title:"Id",dataIndex:"title",search:!1,render:function(j,r,A,Z,u){var f=r.Id.substring(7,19);return r.Title&&(f=r.Title),(0,t.jsx)(v.Z.Link,{onClick:function(){var N;!((N=ne.current)===null||N===void 0)&&N.show&&ne.current.show(r.Id)},children:f},"title-".concat(A))}},{title:M.FD.format("listTitle"),dataIndex:"tag",render:function(j,r,A,Z){return(0,t.jsx)(c.Z,{direction:"vertical",style:{textAlign:"left"},children:r.RepoTags.map(function(u,f){return(0,t.jsxs)(c.Z,{children:[(0,t.jsx)(P.Z,{color:"#2db7f5",children:(0,t.jsx)(v.Z.Text,{copyable:!0,title:u,style:{color:"#ffffff"},children:u},"tag-"+f)},"tag-".concat(f)),r.Containers>0&&(0,t.jsx)(P.Z,{color:"cyan",children:M.FD.format("listInUse")},"use-".concat(f))]},f)})},r.Id)}},{title:"Digest",search:!1,tooltip:M.FD.format("listDigestTip"),render:function(j,r,A,Z,u){return(0,t.jsx)(c.Z,{direction:"vertical",style:{textAlign:"left"},children:r.RepoTags&&r.RepoTags.map(function(f,W){var N,J=(N=r.RepoDigests)===null||N===void 0?void 0:N.find(function(de){var ae=de.split("@"),Pe=x()(ae,2),je=Pe[0],Oe=Pe[1];return f.includes(je)});return(0,t.jsx)("span",{children:J?J.substring(J.indexOf("@")+8).substring(0,12):(0,t.jsx)(P.Z,{color:"warning",children:new M.Uo("components.appDetail.appDetailQuickManage").format("checkImageUpgrade.-3")})},W)})})}},{title:M.FD.format("listArch"),width:80,search:!1,render:function(j,r,A,Z,u){if(r.Labels&&r.Labels["com.dpanel.image.arch"])return(0,t.jsx)(P.Z,{children:r.Labels["com.dpanel.image.arch"]},"arch"+r.Id)}},{title:M.FD.format("listSize"),dataIndex:"size",ellipsis:!0,width:"120px",search:!1,sorter:function(j,r){return parseFloat(j.Size)-parseFloat(r.Size)},render:function(j,r,A,Z){return(0,t.jsx)("div",{children:(0,$.FI)(parseFloat(r.Size))},r.Id)}},{title:M.FD.format("listCreatedAt"),dataIndex:"Created",ellipsis:!0,search:!1,width:"180px",render:function(j,r,A,Z){return(0,t.jsx)("div",{children:(0,$.ZM)(r.Created*1e3)},r.Id)},sorter:function(j,r){return j.Created-r.Created}},{title:M.FD.format("listManage"),valueType:"option",key:"option",width:100,fixed:"right",hidden:!Q.canSeeImageListManage,render:function(j,r,A,Z){return(0,t.jsxs)(c.Z,{split:(0,t.jsx)(D.Z,{type:"vertical"}),children:[(0,t.jsx)(v.Z.Link,{onClick:function(){var f;!((f=ne.current)===null||f===void 0)&&f.show&&ne.current.show(r.Id)},children:(0,t.jsx)(d.Z,{title:M.FD.format("listManageEdit"),children:(0,t.jsx)(S.Z,{})})},"edit"),(0,t.jsx)(l.Link,{to:"/app/create/image?imageId="+r.RepoTags[0],children:(0,t.jsx)(d.Z,{title:M.FD.format("listManageBuild"),children:(0,t.jsx)(w.Z,{})})},"create")]})}}],request:function(){var B=_()(o()().mark(function j(r,A,Z){var u;return o()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,(0,s.KG)({tag:r.tag,title:r.title,use:r.use?r.use=="1"?1:2:0});case 2:if(u=W.sent,!(!u||!u.data||!u.data.list)){W.next=5;break}return W.abrupt("return",{data:[],success:!0,total:0});case 5:return u.data.list.map(function(N){var J="";N.RepoTags.map(function(de){u.data.title[de]&&(J=u.data.title[de])}),N.Title=J}),W.abrupt("return",{data:u.data.list,success:!0,total:u.data.list.length});case 7:case"end":return W.stop()}},j)}));return function(j,r,A){return B.apply(this,arguments)}}(),pagination:(0,q.Oh)(),search:{collapsed:!1},rowSelection:Q.canSeeImageListManage?{defaultSelectedRowKeys:[],alwaysShowAlert:!0}:void 0,actionRef:L,tableAlertOptionRender:function(j){var r=j.selectedRowKeys,A=j.selectedRows;return(0,t.jsxs)(c.Z,{size:16,children:[(0,t.jsx)(G.Z,{icon:(0,t.jsx)(re.Z,{}),confirm:(0,t.jsxs)(c.Z,{style:{width:500,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,t.jsx)(v.Z.Text,{children:(0,t.jsx)("ul",{children:V.prefix("listManageExportTip",3).map(function(Z,u){return(0,t.jsx)("li",{children:Z},u)})})}),(0,t.jsx)(y.A,{layout:"horizontal",formRef:ue,submitter:!1,children:(0,t.jsx)(a.Z,{valuePropName:"checked",name:"enableExportToPath",children:(0,t.jsx)(F.Z,{children:V.format("listManageExportOptionToHost")})},"enableExportToPath")})]}),confirmOnOpenChange:function(){var u;!((u=ue.current)===null||u===void 0)&&u.resetFields&&ue.current.resetFields()},action:function(){var u,f=[];return A.map(function(W){f.push.apply(f,i()(W.RepoTags))}),(0,ve.Rb)({md5:f,enableExportToPath:(u=ue.current)===null||u===void 0?void 0:u.getFieldValue("enableExportToPath")})},onSuccess:function(u){var f,W=A.map(function(J){return J.RepoTags[0]});if(u.size>29){var N=new Blob([u],{type:"application/tar"});(0,me.saveAs)(N,W.join("-")+".tar")}!((f=L.current)===null||f===void 0)&&f.reset&&L.current.reset()},children:M.FD.format("listManageExport")}),(0,t.jsxs)(U.Y,{modalProps:{width:oe.ob},formRef:le,title:V.format("listManagePushTip"),trigger:(0,t.jsx)(p.ZP,{icon:(0,t.jsx)(X.Z,{}),children:V.format("listManagePush")}),onFinish:function(){var Z=_()(o()().mark(function u(f){var W,N,J;return o()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,(0,s.KX)({md5:r,registryId:f.registryId,newNamespace:f.newNamespace});case 2:return J=ae.sent,(W=L.current)===null||W===void 0||W.reload(),!((N=L.current)===null||N===void 0)&&N.clearSelected&&L.current.clearSelected(),ae.abrupt("return",!0);case 6:case"end":return ae.stop()}},u)}));return function(u){return Z.apply(this,arguments)}}(),children:[(0,t.jsx)(a.Z,{name:"registryId",hidden:!0}),(0,t.jsx)(a.Z,{label:V.format("listManagePushImageRespo"),name:"imageRespo",tooltip:V.format("listManagePushImageRespoTip"),children:(0,t.jsx)(se.Z,{multiple:!0,top:!0,onChangeList:function(u){var f;(f=le.current)===null||f===void 0||f.setFieldValue("registryId",u.map(function(W){return W.id}))}})}),(0,t.jsx)(n.Z,{tooltip:V.format("listManagePushNewNamespaceTip"),label:V.format("listManagePushNewNamespace"),name:"newNamespace"})]}),(0,t.jsx)(ee.u,{access:"canSeeImageListManageDelete",children:(0,t.jsx)(G.Z,{danger:!0,type:"primary",action:function(){return(0,s.ao)({md5:r,force:Ee.force})},onSuccess:function(){var u,f;return!((u=L.current)===null||u===void 0)&&u.reloadAndRest&&((f=L.current)===null||f===void 0||f.reloadAndRest()),!0},onError:function(){var u,f;return!((u=L.current)===null||u===void 0)&&u.reset&&((f=L.current)===null||f===void 0||f.reset()),!0},confirm:(0,t.jsxs)(c.Z,{style:{width:280},direction:"vertical",children:[(0,t.jsx)(v.Z.Text,{children:M.FD.format("confirm.title")}),(0,t.jsxs)(F.Z,{name:"deleteVolume",onChange:function(u){return ge({force:u.target.checked})},children:[M.FD.format("listManageDeleteForce"),"?"]})]}),children:M.FD.format("listManageDeleteBatch")})})]})},tableExtraRender:function(){return(0,t.jsx)(ee.u,{access:"canSeeImageListManageCreate",children:(0,t.jsx)(O.Z,{mode:"horizontal",selectedKeys:["all"],items:[{label:(0,t.jsx)(l.Link,{to:"/image/list",replace:!0,children:V.format("title")}),key:"all"},{label:(0,t.jsx)(l.Link,{to:"/image/list/recycle",replace:!0,children:V.format("taskTitle")}),key:"build"}]})})},toolBarRender:function(){return[(0,t.jsx)(ee.u,{access:"canSeeImageListManageDelete",children:(0,t.jsx)(G.Z,{action:_()(o()().mark(function j(){var r,A;return o()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!((r=Y.current)!==null&&r!==void 0&&r.getFieldValue("enableBuildCache"))){u.next=3;break}return u.next=3,(0,s.c5)();case 3:return u.abrupt("return",(0,s.c7)({enableUnuseTag:(A=Y.current)===null||A===void 0?void 0:A.getFieldValue("enableUnuseTag")}));case 4:case"end":return u.stop()}},j)})),onSuccess:function(){var r,A;return!((r=L.current)===null||r===void 0)&&r.reloadAndRest&&((A=L.current)===null||A===void 0||A.reloadAndRest()),!0},tips:M.FD.format("listManagePruneTip"),onError:function(){var r,A;return!((r=L.current)===null||r===void 0)&&r.reset&&((A=L.current)===null||A===void 0||A.reset()),!0},confirmOnOpenChange:function(){var r;!((r=Y.current)===null||r===void 0)&&r.resetFields&&Y.current.resetFields()},confirm:(0,t.jsx)(y.A,{submitter:!1,formRef:Y,layout:"inline",children:(0,t.jsxs)(c.Z,{direction:"vertical",style:{width:600},children:[(0,t.jsx)(v.Z.Text,{children:M.FD.format("confirm.title")}),(0,t.jsx)(a.Z,{name:"enableUnuseTag",valuePropName:"checked",children:(0,t.jsxs)(F.Z,{children:[V.format("listManagePruneOption.enableUnuseTag"),"?"]})}),(0,t.jsx)(a.Z,{initialValue:!0,name:"enableBuildCache",valuePropName:"checked",children:(0,t.jsxs)(F.Z,{children:[V.format("listManagePruneOption.enableBuildCache"),"?"]})})]})}),children:M.FD.format("listManagePrune")})},"prune")]},columnsState:(0,q.j_)("image-list")})]})}},97961:function(k,C,e){e.d(C,{GH:function(){return y},_2:function(){return U},fN:function(){return R},ii:function(){return _},vC:function(){return m}});var I=e(15009),i=e.n(I),T=e(99289),o=e.n(T),E=e(82346),_=[{name:"amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"i386",arch:"386",search:[]},{name:"arm/v6",arch:"arm",search:[]},{name:"arm/v7",arch:"arm",search:[]},{name:"arm/v8",arch:"arm64",search:[]},{name:"ppc64le",arch:"ppc64le",search:[]},{name:"riscv64",arch:"riscv64",search:[]}];function R(c){return x.apply(this,arguments)}function x(){return x=o()(i()().mark(function c(P){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,E.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:P}));case 1:case"end":return d.stop()}},c)})),x.apply(this,arguments)}function m(c){return h.apply(this,arguments)}function h(){return h=o()(i()().mark(function c(P){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,E.request)("/api/app/image/import-by-container-tar",{method:"POST",data:P}));case 1:case"end":return d.stop()}},c)})),h.apply(this,arguments)}function y(c){return a.apply(this,arguments)}function a(){return a=o()(i()().mark(function c(P){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,E.request)("/api/app/image/import-by-image-tar",{method:"POST",data:P}));case 1:case"end":return d.stop()}},c)})),a.apply(this,arguments)}function U(c){return n.apply(this,arguments)}function n(){return n=o()(i()().mark(function c(P){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,E.request)("/api/common/attach/delete",{method:"POST",data:P});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},c)})),n.apply(this,arguments)}function p(){return v.apply(this,arguments)}function v(){return v=_asyncToGenerator(_regeneratorRuntime().mark(function c(){return _regeneratorRuntime().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",request("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return D.stop()}},c)})),v.apply(this,arguments)}},3393:function(k,C,e){e.d(C,{Gb:function(){return x},Pn:function(){return a},Rb:function(){return n},YU:function(){return _},ZQ:function(){return P},_U:function(){return h},cD:function(){return d},cd:function(){return v}});var I=e(15009),i=e.n(I),T=e(99289),o=e.n(T),E=e(82346);function _(O){return R.apply(this,arguments)}function R(){return R=o()(i()().mark(function O(g){return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,E.request)("/api/app/image/get-detail",{method:"POST",data:g}));case 1:case"end":return s.stop()}},O)})),R.apply(this,arguments)}function x(O){return m.apply(this,arguments)}function m(){return m=o()(i()().mark(function O(g){return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,E.request)("/api/app/image/tag-remote",{method:"POST",data:g}));case 1:case"end":return s.stop()}},O)})),m.apply(this,arguments)}function h(O){return y.apply(this,arguments)}function y(){return y=o()(i()().mark(function O(g){return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,E.request)("/api/app/image/tag-add",{method:"POST",data:g}));case 1:case"end":return s.stop()}},O)})),y.apply(this,arguments)}function a(O){return U.apply(this,arguments)}function U(){return U=o()(i()().mark(function O(g){return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,E.request)("/api/app/image/tag-delete",{method:"POST",data:g}));case 1:case"end":return s.stop()}},O)})),U.apply(this,arguments)}function n(O){return p.apply(this,arguments)}function p(){return p=o()(i()().mark(function O(g){return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,E.request)("/api/app/image/export",{method:"POST",data:g,responseType:"blob"}));case 1:case"end":return s.stop()}},O)})),p.apply(this,arguments)}function v(O){return c.apply(this,arguments)}function c(){return c=o()(i()().mark(function O(g){return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,E.request)("/api/pro/image/get-remote-tag",{method:"POST",data:g}));case 1:case"end":return s.stop()}},O)})),c.apply(this,arguments)}function P(O){return D.apply(this,arguments)}function D(){return D=o()(i()().mark(function O(g){return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,E.request)("/api/app/image/check-upgrade",{method:"POST",data:g}));case 1:case"end":return s.stop()}},O)})),D.apply(this,arguments)}function d(O){return F.apply(this,arguments)}function F(){return F=o()(i()().mark(function O(g){return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,E.request)("/api/pro/image/get-rootfs",{method:"POST",data:g}));case 1:case"end":return s.stop()}},O)})),F.apply(this,arguments)}}}]);
