"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6856],{49610:function(y,u,e){var m=e(5574),d=e.n(m),r=e(67294),O=e(52626),c=e(12320),M=e.n(c),f=e(78267),C=e.n(f),E=e(12323),S=e(87662),g=e(82346),v=e(85893),t,a=new c.Terminal(E.Xq),_=new f.FitAddon,l,L=(0,r.forwardRef)(function(A,R){var T,W=(0,r.useState)(),p=d()(W,2),I=p[0],U=p[1],k=(0,r.useState)(""),B=d()(k,2),P=B[0],j=B[1],N=(0,g.useAccess)();(0,r.useImperativeHandle)(R,function(){return{start:function(i,n){D(),n.width=a.cols,n.height=a.rows;var b=n?Object.keys(n).filter(function(s){return n&&n[s]}).map(function(s){if(n&&n[s])return"".concat(s,"=").concat(n[s])}):[];t=new WebSocket((0,O.R)(i+"?"+b.join("&"))),t.addEventListener("message",function(s){var h=JSON.parse(s.data),K=h.type;if(K==i&&(a.write(h.data),h.data.indexOf("exec failed")!=-1)){D();return}}),l=a.onData(function(s){var h={content:{command:s},type:i};t&&t.send(JSON.stringify(h))}),j(i),U(n)},close:function(){D()},fit:function(){return _.fit(),{width:a.cols,height:a.rows}},run:function(i){I&&i&&i.forEach(function(n){var b={content:{command:n+`
`},type:P};t&&t.send(JSON.stringify(b))})},option:function(i){return i&&Object.assign(a.options,i),a.options}}}),(0,r.useEffect)(function(){return a.loadAddon(_),a.open(document.getElementById("terminal-container-console")),_.fit(),(0,S.pe)({groupName:"setting",name:"themeConsoleConfig"}).then(function(o){o.data&&(N.canSeeEnableCe&&Object.assign(o.data,{theme:{}}),Object.assign(a.options,o.data))}),function(){D()}},[]),(0,r.useEffect)(function(){window.addEventListener("resize",function(){_.fit();var o={size:{width:a.cols,height:a.rows},type:P};P&&t&&t.send(JSON.stringify(o))})},[P]);function D(){a.reset(),_.fit(),a.focus(),l&&l.dispose(),t&&(t.close(),t=null)}return(0,v.jsx)("div",{style:{height:(T=A.height)!==null&&T!==void 0?T:"100vh"},id:"terminal-container-console"})});u.Z=L},12323:function(y,u,e){e.d(u,{Xq:function(){return d},nS:function(){return r}});var m=null,d={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},r=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},67359:function(y,u,e){e.r(u),e.d(u,{default:function(){return C}});var m=e(5574),d=e.n(m),r=e(49610),O=e(87662),c=e(82346),M=e(67294),f=e(85893);function C(){var E=(0,c.useParams)(),S=(0,c.useSearchParams)(),g=d()(S,2),v=g[0],t=g[1],a=(0,M.useRef)();return(0,M.useEffect)(function(){E.id&&(0,O.K3)({name:E.id}).then(function(_){var l;window.document.title="console - ".concat(_.data.name),(l=a.current)===null||l===void 0||l.start("/console/host/".concat(_.data.name),{cmd:v.get("cmd"),workDir:v.get("workDir")})}),document.body.style.overflow="hidden"},[]),(0,f.jsx)(r.Z,{ref:a})}}}]);
