"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9969],{49610:function(I,h,n){var v=n(5574),r=n.n(v),d=n(67294),i=n(52626),u=n(78267),T=n.n(u),E=n(12323),b=n(87662),g=n(82346),O=n(4244),y=n.n(O),W=n(24078),P=n(85893),_,a=new O.Terminal(E.X),p=new u.FitAddon,l,L=(0,d.forwardRef)(function(j,B){var D,S=(0,d.useState)(),C=r()(S,2),t=C[0],s=C[1],o=(0,d.useState)(""),e=r()(o,2),A=e[0],K=e[1],x=(0,g.useAccess)();(0,d.useImperativeHandle)(B,function(){return{start:function(M,c){U(),c.width=a.cols,c.height=a.rows;var w=c?Object.keys(c).filter(function(f){return c&&c[f]}).map(function(f){if(c&&c[f])return"".concat(f,"=").concat(c[f])}):[];_=new WebSocket((0,i.R)(M+"?"+w.join("&"))),_.addEventListener("message",function(f){var R=JSON.parse(f.data),$=R.type;if($==M&&(a.write(R.data),R.data.indexOf("exec failed")!=-1)){U();return}}),l=a.onData(function(f){var R={content:{command:f},type:M};_&&_.send(JSON.stringify(R))}),K(M),s(c)},close:function(){U()},fit:function(){return p.fit(),{width:a.cols,height:a.rows}},run:function(M){t&&M&&M.forEach(function(c){var w={content:{command:c+`
`},type:A};_&&_.send(JSON.stringify(w))})}}}),(0,d.useEffect)(function(){return a.loadAddon(p),a.open(document.getElementById("terminal-container-console")),p.fit(),(0,b.pe)({groupName:"setting",name:"themeConsoleConfig"}).then(function(m){m.data&&m.data.fontSize&&Object.assign(a.options,m.data)}),function(){U()}},[]),(0,d.useEffect)(function(){window.addEventListener("resize",function(){p.fit();var m={size:{width:a.cols,height:a.rows},type:A};A&&_&&_.send(JSON.stringify(m))})},[A]);function U(){a.reset(),p.fit(),a.focus(),l&&l.dispose(),_&&(_.close(),_=null)}return(0,P.jsx)("div",{style:{height:(D=j.height)!==null&&D!==void 0?D:"100vh"},id:"terminal-container-console"})});h.Z=L},12323:function(I,h,n){n.d(h,{X:function(){return v},n:function(){return r}});var v={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},r=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},15563:function(I,h,n){n.r(h),n.d(h,{default:function(){return g}});var v=n(5574),r=n.n(v),d=n(49610),i=n(13822),u=n(5251),T=n(82346),E=n(67294),b=n(85893);function g(){var O=(0,T.useParams)(),y=(0,T.useSearchParams)(),W=r()(y,2),P=W[0],_=W[1],a=(0,E.useRef)();return(0,E.useEffect)(function(){O.id&&(0,i.jV)({md5:O.id}).then(function(p){var l;window.document.title="console - ".concat((0,u.fi)(p.data.info.Name,"/")),O.id&&((l=a.current)===null||l===void 0||l.start("/console/container/".concat(p.data.info.Id),{cmd:P.get("cmd"),workDir:P.get("workDir")}))}),document.body.style.overflow="hidden"},[]),(0,b.jsx)(d.Z,{ref:a})}},13822:function(I,h,n){n.d(h,{IE:function(){return b},IW:function(){return T},KK:function(){return _},LJ:function(){return p},RF:function(){return B},Re:function(){return L},aF:function(){return S},eE:function(){return W},jV:function(){return O}});var v=n(15009),r=n.n(v),d=n(99289),i=n.n(d),u=n(82346);function T(t){return E.apply(this,arguments)}function E(){return E=i()(r()().mark(function t(s){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/app/container/status",{method:"POST",data:s}));case 1:case"end":return e.stop()}},t)})),E.apply(this,arguments)}function b(t){return g.apply(this,arguments)}function g(){return g=i()(r()().mark(function t(s){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/app/container/get-list",{data:s,method:"POST"}));case 1:case"end":return e.stop()}},t)})),g.apply(this,arguments)}function O(t){return y.apply(this,arguments)}function y(){return y=i()(r()().mark(function t(s){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/app/container/get-detail",{data:s,method:"POST"}));case 1:case"end":return e.stop()}},t)})),y.apply(this,arguments)}function W(t){return P.apply(this,arguments)}function P(){return P=i()(r()().mark(function t(s){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/app/container/update",{data:s,method:"POST"}));case 1:case"end":return e.stop()}},t)})),P.apply(this,arguments)}function _(){return a.apply(this,arguments)}function a(){return a=i()(r()().mark(function t(){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,u.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return o.stop()}},t)})),a.apply(this,arguments)}function p(t){return l.apply(this,arguments)}function l(){return l=i()(r()().mark(function t(s){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/app/container/export",{method:"POST",data:s,responseType:"blob"}));case 1:case"end":return e.stop()}},t)})),l.apply(this,arguments)}function L(t){return j.apply(this,arguments)}function j(){return j=i()(r()().mark(function t(s){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/app/container/commit",{method:"POST",data:s}));case 1:case"end":return e.stop()}},t)})),j.apply(this,arguments)}function B(t){return D.apply(this,arguments)}function D(){return D=i()(r()().mark(function t(s){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/app/container/upgrade",{method:"POST",data:s}));case 1:case"end":return e.stop()}},t)})),D.apply(this,arguments)}function S(t){return C.apply(this,arguments)}function C(){return C=i()(r()().mark(function t(s){return r()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.request)("/api/app/container/copy",{method:"POST",data:s}));case 1:case"end":return e.stop()}},t)})),C.apply(this,arguments)}}}]);
