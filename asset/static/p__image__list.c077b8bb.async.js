"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4214],{1699:function(N,I,e){e.d(I,{u:function(){return o}});var U=e(9783),s=e.n(U),C=e(97857),l=e.n(C),p=e(67294),u=e(82346),R=e(40411),T=e(42075),f=e(85893),o=function(r){var j=(0,u.useAccess)(),t=Array.isArray(r.access)?r.access:[r.access],E,P=r.fallback;if(typeof r.children=="function"?(E=r.children(t.reduce(function(m,O){return l()(l()({},m),{},s()({},O,j[O]))},{})),E||(E=P)):t.every(function(m){return j[m]})?E=r.children:E=P,!P&&E&&r.showProTips&&j.canSeeEnableCe){if(j.canSeeEnableHiddenProTips)return null;E=(0,f.jsx)(R.Z,{offset:r.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:E})}if(!P&&E&&r.showProRibbonTips&&j.canSeeEnableCe){if(j.canSeeEnableHiddenProTips)return null;E=(0,f.jsx)(R.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:E})}return r.space?(0,f.jsx)(T.Z,l()(l()({},r.space),{},{children:E})):E}},80821:function(N,I,e){e.d(I,{Z:function(){return j}});var U=e(97857),s=e.n(U),C=e(5574),l=e.n(C),p=e(24963),u=e(36146),R=e(86738),T=e(83062),f=e(96074),o=e(83622),d=e(67294),r=e(85893);function j(t){var E=(0,d.useState)(!1),P=l()(E,2),m=P[0],O=P[1],x=(0,d.useContext)(p.Z),g=x.message,K=new u.Uo,D=function(){O(!0);var i=t.action();i instanceof Promise?i.then(function(a){if(O(!1),a){typeof t.onSuccess=="function"&&t.onSuccess(a);var Z="";t.messageSuccess?typeof t.messageSuccess=="function"?Z=t.messageSuccess(a):Z=t.messageSuccess.indexOf("notification.")==0?K.format(t.messageSuccess):t.messageSuccess:Z=K.format("notification.finish"),t.asynced?g.info(Z):g.success(Z)}}).catch(function(a){O(!1),typeof t.onError=="function"&&t.onError(a)}):O(!1)};return t.confirm?(0,r.jsx)(R.Z,s()(s()({style:{width:500},title:t.confirmTitle?t.confirmTitle:K.format("notification.title.tip"),description:typeof t.confirm=="string"&&t.confirm.indexOf("notification.")==0?K.format(t.confirm):t.confirm,onConfirm:D,okText:"Yes",cancelText:"No",onOpenChange:t.confirmOnOpenChange},t.confirmProps),{},{children:(0,r.jsxs)(T.Z,{title:t.tips,children:[t.showDivider&&(0,r.jsx)(f.Z,{type:"vertical",style:{marginRight:15}}),(0,r.jsx)(o.ZP,{block:t.block,disabled:t.disabled,icon:!t.children&&m?void 0:t.icon,loading:m,danger:t.danger,type:t.type,children:t.children})]})})):(0,r.jsxs)(T.Z,{title:t.tips,children:[t.showDivider&&(0,r.jsx)(f.Z,{type:"vertical",style:{marginRight:15}}),(0,r.jsx)(o.ZP,{block:t.block,style:t.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:t.disabled,icon:!t.children&&m?void 0:t.icon,loading:m,onClick:D,danger:t.danger,type:t.type,children:t.children})]})}},81366:function(N,I,e){var U=e(97857),s=e.n(U),C=e(19632),l=e.n(C),p=e(5574),u=e.n(p),R=e(27254),T=e(42075),f=e(85418),o=e(25593),d=e(83622),r=e(67294),j=e(31112),t=e(85893),E={title:"/",path:"/"},P=(0,r.forwardRef)(function(m,O){var x=(0,r.useContext)(j.Z),g=x.showPath,K=x.redirectPath,D=(0,r.useState)([E]),h=u()(D,2),i=h[0],a=h[1];(0,r.useImperativeHandle)(O,function(){return{addHistory:function(S,F){F=="/"?a([E]):a([].concat(l()(i),[{title:S,path:F}]))},initHistory:function(S,F){a([s()(s()({},E),{},{children:F})].concat(l()(S)))}}});var Z=function(S){g?g(i[S].title,i[S].path):m.showPath&&m.showPath(i[S].title,i[S].path);var F=i.filter(function(ne,k){return k<=S});a(l()(F))};return(0,t.jsxs)(T.Z,{children:[(0,t.jsx)(T.Z.Compact,{children:i.map(function(z,S){return z.children?(0,t.jsxs)(f.Z.Button,{menu:{items:z.children.map(function(F,ne){return{key:ne,label:(0,t.jsx)(o.Z.Link,{onClick:function(){K(F)},children:F},ne)}})},type:"dashed",onClick:function(ne){Z(S)},children:[(0,t.jsx)(R.Z,{})," ",z.title]},S):(0,t.jsx)(d.ZP,{icon:(0,t.jsx)(R.Z,{}),type:"dashed",onClick:function(){Z(S)},children:z.title},S)})}),i.length>=2&&(0,t.jsx)(o.Z.Text,{copyable:{text:i[i.length-1].path}})]})});I.Z=P},31112:function(N,I,e){var U=e(67294),s=(0,U.createContext)({});I.Z=s},68536:function(N,I,e){e.d(I,{Z:function(){return d}});var U=e(24963),s=e(36146),C=e(93613),l=e(36693),p=e(2741),u=e(25593),R=e(42075),T=e(67294),f=e(85893),o=0;function d(r){var j=(0,T.useContext)(U.Z),t=j.message,E=new s.Uo("components.explorer");return r.isDir?(0,f.jsx)(u.Z.Link,{onClick:function(){r.onClick&&r.onClick()},children:(0,f.jsxs)(R.Z,{children:[(0,f.jsx)(C.Z,{}),r.showName]})}):r.isLink?(0,f.jsx)(u.Z.Link,{onClick:function(){r.onClick&&r.onClick()},children:(0,f.jsxs)(R.Z,{children:[(0,f.jsx)(l.Z,{}),r.showName]})}):(0,f.jsx)(u.Z.Text,{onClick:function(){if(o++,o==2){o=0,r.onClick&&r.onClick();return}setTimeout(function(){o==1&&t.info(E.format("fileNameMessageViewDetail")),o=0},400)},style:{cursor:"pointer"},children:(0,f.jsxs)(R.Z,{children:[(0,f.jsx)(p.Z,{}),r.showName]})})}},92754:function(N,I,e){var U=e(5574),s=e.n(U),C=e(67294),l=e(82346),p=e(38703),u=e(85893),R=(0,C.forwardRef)(function(T,f){var o=(0,C.useState)(""),d=s()(o,2),r=d[0],j=d[1];(0,C.useImperativeHandle)(f,function(){return{setFinish:function(){O({finish:{downloading:100,extracting:100}})},setStart:function(g){g&&j(g),O({start:{downloading:0,extracting:0}})},close:function(){t.progress.close("image:pull:"+r),O({start:{downloading:0,extracting:0}})}}});var t=(0,l.useModel)("subscriber");t.addDataHandler("image:pull:"+r,function(x){O(x.data)});var E=(0,C.useState)(),P=s()(E,2),m=P[0],O=P[1];return(0,C.useEffect)(function(){return O({start:{downloading:0,extracting:0}}),function(){t.progress.close("image:pull:"+r)}},[]),(0,u.jsx)(u.Fragment,{children:m&&Object.keys(m).map(function(x){return(0,u.jsx)(p.Z,{percent:m[x].downloading,success:{percent:m[x].extracting}},x)})})});I.Z=R},47248:function(N,I,e){var U=e(15009),s=e.n(U),C=e(99289),l=e.n(C),p=e(5574),u=e.n(p),R=e(38345),T=e(97269),f=e(62370),o=e(5966),d=e(64317),r=e(83622),j=e(85265),t=e(25593),E=e(42075),P=e(67294),m=e(3393),O=e(97961),x=e(92754),g=e(82346),K=e(2205),D=e(3616),h=e(36146),i=e(85893),a=(0,P.forwardRef)(function(Z,z){var S=(0,P.useState)(!1),F=u()(S,2),ne=F[0],k=F[1],$=(0,P.useRef)(),re=(0,P.useRef)(),Pe=(0,P.useState)(!1),he=u()(Pe,2),ee=he[0],ge=he[1],w=new h.Uo("components.imagePull");return(0,P.useImperativeHandle)(z,function(){return{upgradeImage:function(b){var v;return k(!0),(v=$.current)===null||v===void 0||v.setFieldValue("imageUrl",b),(0,m.Gb)({tag:b,type:"pull"})},setImageName:function(b){var v;k(!0),(v=$.current)===null||v===void 0||v.setFieldValue("imageUrl",b)}}}),[(0,i.jsx)(r.ZP,{type:Z.buttonType?Z.buttonType:"default",onClick:function(){var b,v;k(!0),(b=$.current)===null||b===void 0||b.resetFields(),(v=re.current)===null||v===void 0||v.setStart("")},children:w.format("triggerButton")},"remoteBtn"),(0,i.jsxs)(j.Z,{forceRender:!0,open:ne,title:w.format("drawerTitle"),width:D.R_,onClose:function(){var b;k(!1),(b=re.current)===null||b===void 0||b.close()},footer:!1,children:[(0,i.jsx)(R.Z,{children:(0,i.jsx)(t.Z.Text,{children:(0,i.jsxs)("ul",{style:{lineHeight:"30px"},children:[(0,i.jsxs)("li",{children:[w.format("tip.1")," ",(0,i.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:h.FD.format("help")})]}),(0,i.jsxs)("li",{children:[w.format("tip.2")," ",(0,i.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:h.FD.format("help")})]}),(0,i.jsxs)("li",{children:[w.format("tip.3")," "]}),(0,i.jsxs)("li",{children:[w.format("tip.4")," ",(0,i.jsx)(g.Link,{to:"/image/registry",children:h.Ob.format("image.registry.create")})]}),(0,i.jsxs)("li",{children:[w.format("tip.5")," ",(0,i.jsx)(g.Link,{to:"/image/registry",children:h.Ob.format("image.registry")})]})]})})}),(0,i.jsx)(R.Z,{title:w.format("triggerButton"),headerBordered:!0,children:(0,i.jsxs)(T.A,{formRef:$,submitter:!1,isKeyPressSubmit:!0,onFinish:function(){var H=l()(s()().mark(function b(v){var q,n,_e,ce,ae,ve;return s()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return ae=(q=v.imageUrl)!==null&&q!==void 0?q:"",v.registry&&(ae=v.registry.serverAddress+"/"+ae),ge(!0),(n=re.current)===null||n===void 0||n.setStart(ae),G.next=6,(0,m.Gb)({tag:ae,type:"pull",platform:(_e=v.platform)!==null&&_e!==void 0?_e:""}).finally(function(){ge(!1)});case 6:return ve=G.sent,(ce=re.current)===null||ce===void 0||ce.setFinish(),k(!1),Z.onFinish&&Z.onFinish(ve.data.tag),G.abrupt("return",!0);case 11:case"end":return G.stop()}},b)}));return function(b){return H.apply(this,arguments)}}(),children:[(0,i.jsxs)(E.Z.Compact,{children:[(0,i.jsx)(f.Z,{name:"registry",children:(0,i.jsx)(K.Z,{width:"150px"})}),(0,i.jsx)(o.Z,{disabled:ee,width:270,name:"imageUrl",placeholder:w.format("imageUrlEmpty"),required:!0,rules:[{required:!0}]}),(0,i.jsx)(d.Z,{name:"platform",style:{width:100},placeholder:w.format("imagePlatformEmpty"),options:O.ii.map(function(H){return{label:H.name,value:H.name}})}),(0,i.jsx)(r.ZP,{loading:ee,onClick:l()(s()().mark(function H(){var b;return s()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:(b=$.current)===null||b===void 0||b.submit();case 1:case"end":return q.stop()}},H)})),children:w.format("triggerButton")}),(0,i.jsx)(r.ZP,{danger:!0,onClick:function(){var b;(b=re.current)===null||b===void 0||b.close()},children:h.FD.format("listManageKill")})]}),(0,i.jsx)(f.Z,{label:w.format("progressTitle"),children:(0,i.jsx)(x.Z,{ref:re})})]})})]},"remoteDrawer")]});I.Z=a},78451:function(N,I,e){e.d(I,{Z:function(){return C}});var U=e(67294),s=e(85893);function C(l){var p;return(0,s.jsx)("span",{style:{width:l.width?l.width:"auto",wordBreak:"break-word"},children:(p=l.content)!==null&&p!==void 0?p:l.children})}},51100:function(N,I,e){e.d(I,{Z:function(){return p}});var U=e(97961),s=e(91604),C=e(1677),l=e(85893);function p(u){return u.showDragger?(0,l.jsx)(s.Z,{max:u.max?u.max:1,title:u.title,label:u.label,required:u.required,rules:[{required:u.required}],fieldProps:{multiple:!!(u.max&&u.max>1),name:"file",accept:u.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(T){return new Promise(function(f){var o;(0,U._2)({path:(o=T.response.data.path)!==null&&o!==void 0?o:""}).then(function(d){f(!0)})})}},name:u.name}):(0,l.jsx)(C.Z,{max:u.max?u.max:1,title:u.title,label:u.label,required:u.required,rules:[{required:u.required}],fieldProps:{multiple:!!(u.max&&u.max>1),name:"file",accept:u.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(T){return new Promise(function(f){var o;(0,U._2)({path:(o=T.response.data.path)!==null&&o!==void 0?o:""}).then(function(d){f(!0)})})}},name:u.name})}},65913:function(N,I,e){var U=e(5574),s=e.n(U),C=e(74330),l=e(67294),p=e(85893),u=(0,l.forwardRef)(function(R,T){(0,l.useImperativeHandle)(T,function(){return{show:function(){r(!0)},destroy:function(){r(!1)}}});var f=(0,l.useState)(!1),o=s()(f,2),d=o[0],r=o[1];return(0,p.jsx)(C.Z,{spinning:d,size:"default",children:R.children})});I.Z=u},17550:function(N,I,e){e.r(I),e.d(I,{default:function(){return Re}});var U=e(19632),s=e.n(U),C=e(15009),l=e.n(C),p=e(99289),u=e.n(p),R=e(5574),T=e.n(R),f=e(90078),o=e(56729),d=e(97269),r=e(62370),j=e(37476),t=e(5966),E=e(83622),P=e(25593),m=e(42075),O=e(66309),x=e(96074),g=e(83062),K=e(84567),D=e(50136),h=e(67294),i=e(82346),a=e(18148),Z=e(5251),z=e(80821),S=e(64789),F=e(58638),ne=e(1912),k=e(2205),$=e(67255),re=e(3393),Pe=e(93162),he=e(78914),ee=e(1699),ge=e(184),w=e(44349),H=e(97961),b=e(51100),v=e(36146),q=e(3616),n=e(85893),_e=(0,h.forwardRef)(function(de,V){(0,h.useImperativeHandle)(V,function(){return{}});var me=(0,h.useRef)(),te=new v.Uo("components.image");return(0,n.jsxs)(ge.a,{drawerProps:{width:q.R_},title:te.format("importTitle"),trigger:(0,n.jsx)(E.ZP,{children:te.format("importTitle")},"create"),formRef:me,onFinish:function(){var je=u()(l()().mark(function pe(se){var le,oe;return l()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,(0,H.GH)({localUrl:se.imageTarUpload?se.imageTarUpload.map(function(fe){return fe.response.data.path}):[],remoteUrl:se.remoteUrl?se.remoteUrl.map(function(fe){return fe.url}):[]});case 2:return oe=Y.sent,!((le=me.current)===null||le===void 0)&&le.resetFields&&me.current.resetFields(),de.onFinish&&de.onFinish(),Y.abrupt("return",!0);case 6:case"end":return Y.stop()}},pe)}));return function(pe){return je.apply(this,arguments)}}(),children:[(0,n.jsx)(b.Z,{label:te.format("importLocal"),showDragger:!0,max:10,title:te.format("importLocalTip"),name:"imageTarUpload",accept:".tar"}),(0,n.jsx)(w.Z,{label:te.format("importRemote"),name:"remoteUrl",showAddButton:!0,hideCopyButton:!0,min:1,items:[{width:"lg",name:"url",placeholder:te.format("importRemoteEmpty")}]})]})}),ce=_e,ae=e(47248),ve=e(96486),Oe=e.n(ve),G=e(55375);function Re(){var de=(0,i.useAccess)(),V=(0,h.useRef)(),me=(0,h.useState)({force:!1}),te=T()(me,2),je=te[0],pe=te[1],se=(0,h.useRef)(),le=(0,h.useRef)(),oe=(0,h.useRef)(),Q=new v.Uo("image"),Y=(0,h.useRef)(),fe=(0,h.useRef)(),Te=(0,h.useState)(1),De=T()(Te,2),ie=De[0],ue=De[1];return(0,h.useEffect)(function(){var A;!((A=V.current)===null||A===void 0)&&A.reloadAndRest&&V.current.reloadAndRest().then(function(){var y;!((y=V.current)===null||y===void 0)&&y.setPageInfo&&V.current.setPageInfo({current:(0,$.G$)(G.CM)})})},[ie]),(0,n.jsxs)(f._z,{header:{extra:[(0,n.jsx)(ee.u,{access:"canSeeImageListManageCreate",children:(0,n.jsx)(i.Link,{to:"/image/create",children:(0,n.jsx)(E.ZP,{type:"primary",children:v.Ob.format("image.create")},"create")},"create")},"create"),(0,n.jsx)(ee.u,{access:"canSeeImageListPull",children:(0,n.jsx)(ae.Z,{onFinish:function(){ue(ie+1)}},"remote")},"remote"),(0,n.jsx)(ee.u,{access:"canSeeImageListManageCreate",children:(0,n.jsx)(ce,{onFinish:function(){ue(ie+1)}})},"import")]},children:[(0,n.jsx)(he.Z,{ref:le,onClose:function(){ue(ie+1)}}),(0,n.jsx)(o.Z,{scroll:{x:"max-content"},rowKey:"Id",onChange:function(y,_,L){!Oe().isArray(L)&&(0,$.LX)(G.CM,L.columnKey,L.order),(0,$.MJ)(G.CM,y.current)},columns:[{title:"Id",dataIndex:"title",search:!1,render:function(y,_,L,W,c){var M=_.Id.substring(7,19);return _.Title&&(M=_.Title),(0,n.jsx)(P.Z.Link,{onClick:function(){var J;!((J=le.current)===null||J===void 0)&&J.show&&le.current.show(_.Id)},children:M},"title-".concat(L))}},{title:v.FD.format("listTitle"),dataIndex:"tag",render:function(y,_,L,W){return(0,n.jsx)(m.Z,{direction:"vertical",style:{textAlign:"left"},children:_.RepoTags.map(function(c,M){return(0,n.jsxs)(m.Z,{children:[(0,n.jsx)(O.Z,{color:"#2db7f5",children:(0,n.jsx)(P.Z.Text,{copyable:!0,title:c,style:{color:"#ffffff"},children:c},"tag-"+M)},"tag-".concat(M)),_.Containers>0&&(0,n.jsx)(O.Z,{color:"cyan",children:v.FD.format("listInUse")},"use-".concat(M))]},M)})},_.Id)}},{title:"Digest",search:!1,tooltip:v.FD.format("listDigestTip"),render:function(y,_,L,W,c){return(0,n.jsx)(m.Z,{direction:"vertical",style:{textAlign:"left"},children:_.RepoTags&&_.RepoTags.map(function(M,B){var J,X=(J=_.RepoDigests)===null||J===void 0?void 0:J.find(function(Ee){var xe=Ee.split("@"),Me=T()(xe,2),Ce=Me[0],Ie=Me[1];return M.includes(Ce)});return(0,n.jsx)("span",{children:X?X.substring(X.indexOf("@")+8).substring(0,12):(0,n.jsx)(O.Z,{color:"warning",children:new v.Uo("components.appDetail.appDetailQuickManage").format("checkImageUpgrade.-3")})},B)})})}},{title:v.FD.format("listArch"),width:80,search:!1,render:function(y,_,L,W,c){if(_.Labels&&_.Labels["com.dpanel.image.arch"])return(0,n.jsx)(O.Z,{children:_.Labels["com.dpanel.image.arch"]},"arch"+_.Id)}},{title:v.FD.format("listSize"),dataIndex:"size",ellipsis:!0,width:"120px",search:!1,sorter:function(y,_){return parseFloat(y.Size)-parseFloat(_.Size)},sortDirections:$.h5,defaultSortOrder:(0,$.rj)(G.CM,"size"),render:function(y,_,L,W){return(0,n.jsx)("div",{children:(0,Z.FI)(parseFloat(_.Size))},_.Id)}},{title:v.FD.format("listCreatedAt"),dataIndex:"Created",key:"created",ellipsis:!0,search:!1,width:"180px",render:function(y,_,L,W){return(0,n.jsx)("div",{children:(0,Z.ZM)(_.Created*1e3)},_.Id)},sorter:function(y,_){return y.Created-_.Created},sortDirections:$.h5,defaultSortOrder:(0,$.rj)(G.CM,"created")},{title:v.FD.format("listManage"),valueType:"option",key:"option",width:80,fixed:"right",hidden:!de.canSeeImageListManage,render:function(y,_,L,W){return(0,n.jsx)(m.Z,{split:(0,n.jsx)(x.Z,{type:"vertical"}),children:(0,n.jsx)(i.Link,{to:"/app/create/image?imageId="+_.RepoTags[0],children:(0,n.jsx)(g.Z,{title:v.FD.format("listManageBuild"),children:(0,n.jsx)(S.Z,{})})},"create")})}}],request:function(){var A=u()(l()().mark(function y(_,L,W){var c;return l()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,(0,a.KG)({tag:_.tag,title:_.title,use:_.use?_.use=="1"?1:2:0});case 2:if(c=B.sent,!(!c||!c.data||!c.data.list)){B.next=5;break}return B.abrupt("return",{data:[],success:!0,total:0});case 5:return c.data.list.map(function(J){var X="";J.RepoTags.map(function(Ee){c.data.title[Ee]&&(X=c.data.title[Ee])}),J.Title=X}),B.abrupt("return",{data:c.data.list,success:!0,total:c.data.list.length});case 7:case"end":return B.stop()}},y)}));return function(y,_,L){return A.apply(this,arguments)}}(),pagination:(0,$.Oh)(),search:{collapsed:!1},rowSelection:de.canSeeImageListManage?{defaultSelectedRowKeys:[],alwaysShowAlert:!0}:void 0,actionRef:V,tableAlertOptionRender:function(y){var _=y.selectedRowKeys,L=y.selectedRows;return(0,n.jsxs)(m.Z,{size:16,children:[(0,n.jsx)(z.Z,{icon:(0,n.jsx)(F.Z,{}),confirm:(0,n.jsxs)(m.Z,{style:{width:500,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,n.jsx)(P.Z.Text,{children:(0,n.jsx)("ul",{children:Q.prefix("listManageExportTip",3).map(function(W,c){return(0,n.jsx)("li",{children:W},c)})})}),(0,n.jsx)(d.A,{layout:"horizontal",formRef:oe,submitter:!1,children:(0,n.jsx)(r.Z,{valuePropName:"checked",name:"enableExportToPath",children:(0,n.jsx)(K.Z,{children:Q.format("listManageExportOptionToHost")})},"enableExportToPath")})]}),confirmOnOpenChange:function(){var c;!((c=oe.current)===null||c===void 0)&&c.resetFields&&oe.current.resetFields()},action:function(){var c,M=[];return L.map(function(B){M.push.apply(M,s()(B.RepoTags))}),(0,re.Rb)({md5:M,enableExportToPath:(c=oe.current)===null||c===void 0?void 0:c.getFieldValue("enableExportToPath")})},onSuccess:function(c){var M=L.map(function(J){return J.RepoTags[0]});if(c.size>29){var B=new Blob([c],{type:"application/tar"});(0,Pe.saveAs)(B,M.join("-")+".tar")}ue(ie+1)},children:v.FD.format("listManageExport")}),(0,n.jsxs)(j.Y,{modalProps:{width:q.ob},formRef:se,title:Q.format("listManagePushTip"),trigger:(0,n.jsx)(E.ZP,{icon:(0,n.jsx)(ne.Z,{}),children:Q.format("listManagePush")}),onFinish:function(){var W=u()(l()().mark(function c(M){var B;return l()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,(0,a.KX)({md5:_,registryId:M.registryId,newNamespace:M.newNamespace});case 2:return B=X.sent,ue(ie+1),X.abrupt("return",!0);case 5:case"end":return X.stop()}},c)}));return function(c){return W.apply(this,arguments)}}(),children:[(0,n.jsx)(r.Z,{name:"registryId",hidden:!0}),(0,n.jsx)(r.Z,{label:Q.format("listManagePushImageRespo"),name:"imageRespo",tooltip:Q.format("listManagePushImageRespoTip"),children:(0,n.jsx)(k.Z,{multiple:!0,top:!0,onChangeList:function(c){var M;(M=se.current)===null||M===void 0||M.setFieldValue("registryId",c.map(function(B){return B.id}))}})}),(0,n.jsx)(t.Z,{tooltip:Q.format("listManagePushNewNamespaceTip"),label:Q.format("listManagePushNewNamespace"),name:"newNamespace"})]}),(0,n.jsx)(ee.u,{access:"canSeeImageListManageDelete",children:(0,n.jsx)(z.Z,{danger:!0,type:"primary",action:function(){return(0,a.ao)({md5:_,force:je.force})},onSuccess:function(){var c,M;return!((c=V.current)===null||c===void 0)&&c.reloadAndRest&&((M=V.current)===null||M===void 0||M.reloadAndRest()),!0},onError:function(){var c,M;return!((c=V.current)===null||c===void 0)&&c.reloadAndRest&&((M=V.current)===null||M===void 0||M.reloadAndRest()),!0},confirm:(0,n.jsx)(d.A,{submitter:!1,formRef:fe,children:(0,n.jsxs)(m.Z,{style:{width:280},direction:"vertical",children:[(0,n.jsx)(P.Z.Text,{children:v.FD.format("confirm.title")}),(0,n.jsxs)(K.Z,{name:"deleteVolume",onChange:function(c){return pe({force:c.target.checked})},children:[v.FD.format("listManageDeleteForce"),"?"]})]})}),children:v.FD.format("listManageDeleteBatch")})})]})},tableExtraRender:function(){return(0,n.jsx)(ee.u,{access:"canSeeImageListManageCreate",children:(0,n.jsx)(D.Z,{mode:"horizontal",selectedKeys:["all"],items:[{label:(0,n.jsx)(i.Link,{to:"/image/list",replace:!0,children:Q.format("title")}),key:"all"},{label:(0,n.jsx)(i.Link,{to:"/image/list/recycle",replace:!0,children:Q.format("taskTitle")}),key:"build"}]})})},toolBarRender:function(){return[(0,n.jsx)(ee.u,{access:"canSeeImageListManageDelete",children:(0,n.jsx)(z.Z,{action:u()(l()().mark(function y(){var _,L;return l()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!((_=Y.current)!==null&&_!==void 0&&_.getFieldValue("enableBuildCache"))){c.next=3;break}return c.next=3,(0,a.c5)();case 3:return c.abrupt("return",(0,a.c7)({enableUnuseTag:(L=Y.current)===null||L===void 0?void 0:L.getFieldValue("enableUnuseTag")}));case 4:case"end":return c.stop()}},y)})),onSuccess:function(){var _;return!((_=V.current)===null||_===void 0)&&_.reloadAndRest&&V.current.reloadAndRest(),!0},tips:v.FD.format("listManagePruneTip"),onError:function(){return ue(ie+1),!0},confirmOnOpenChange:function(){var _;!((_=Y.current)===null||_===void 0)&&_.resetFields&&Y.current.resetFields()},confirm:(0,n.jsx)(d.A,{submitter:!1,formRef:Y,layout:"inline",children:(0,n.jsxs)(m.Z,{direction:"vertical",style:{width:600},children:[(0,n.jsx)(P.Z.Text,{children:v.FD.format("confirm.title")}),(0,n.jsx)(r.Z,{name:"enableUnuseTag",valuePropName:"checked",children:(0,n.jsxs)(K.Z,{children:[Q.format("listManagePruneOption.enableUnuseTag"),"?"]})}),(0,n.jsx)(r.Z,{initialValue:!0,name:"enableBuildCache",valuePropName:"checked",children:(0,n.jsxs)(K.Z,{children:[Q.format("listManagePruneOption.enableBuildCache"),"?"]})})]})}),children:v.FD.format("listManagePrune")})},"prune")]},columnsState:(0,$.j_)(G.CM)})]})}},97961:function(N,I,e){e.d(I,{GH:function(){return d},_2:function(){return j},fN:function(){return R},ii:function(){return u},vC:function(){return f}});var U=e(15009),s=e.n(U),C=e(99289),l=e.n(C),p=e(82346),u=[{name:"amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"i386",arch:"386",search:[]},{name:"arm/v6",arch:"arm",search:[]},{name:"arm/v7",arch:"arm",search:[]},{name:"arm/v8",arch:"arm64",search:[]},{name:"ppc64le",arch:"ppc64le",search:[]},{name:"riscv64",arch:"riscv64",search:[]}];function R(m){return T.apply(this,arguments)}function T(){return T=l()(s()().mark(function m(O){return s()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,p.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:O}));case 1:case"end":return g.stop()}},m)})),T.apply(this,arguments)}function f(m){return o.apply(this,arguments)}function o(){return o=l()(s()().mark(function m(O){return s()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,p.request)("/api/app/image/import-by-container-tar",{method:"POST",data:O}));case 1:case"end":return g.stop()}},m)})),o.apply(this,arguments)}function d(m){return r.apply(this,arguments)}function r(){return r=l()(s()().mark(function m(O){return s()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,p.request)("/api/app/image/import-by-image-tar",{method:"POST",data:O}));case 1:case"end":return g.stop()}},m)})),r.apply(this,arguments)}function j(m){return t.apply(this,arguments)}function t(){return t=l()(s()().mark(function m(O){return s()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,p.request)("/api/common/attach/delete",{method:"POST",data:O});case 2:return g.abrupt("return",g.sent);case 3:case"end":return g.stop()}},m)})),t.apply(this,arguments)}function E(){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime().mark(function m(){return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",request("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return x.stop()}},m)})),P.apply(this,arguments)}},3393:function(N,I,e){e.d(I,{Gb:function(){return T},Pn:function(){return r},Rb:function(){return t},YU:function(){return u},ZQ:function(){return O},_U:function(){return o},cD:function(){return g},cd:function(){return P}});var U=e(15009),s=e.n(U),C=e(99289),l=e.n(C),p=e(82346);function u(D){return R.apply(this,arguments)}function R(){return R=l()(s()().mark(function D(h){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.request)("/api/app/image/get-detail",{method:"POST",data:h}));case 1:case"end":return a.stop()}},D)})),R.apply(this,arguments)}function T(D){return f.apply(this,arguments)}function f(){return f=l()(s()().mark(function D(h){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.request)("/api/app/image/tag-remote",{method:"POST",data:h}));case 1:case"end":return a.stop()}},D)})),f.apply(this,arguments)}function o(D){return d.apply(this,arguments)}function d(){return d=l()(s()().mark(function D(h){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.request)("/api/app/image/tag-add",{method:"POST",data:h}));case 1:case"end":return a.stop()}},D)})),d.apply(this,arguments)}function r(D){return j.apply(this,arguments)}function j(){return j=l()(s()().mark(function D(h){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.request)("/api/app/image/tag-delete",{method:"POST",data:h}));case 1:case"end":return a.stop()}},D)})),j.apply(this,arguments)}function t(D){return E.apply(this,arguments)}function E(){return E=l()(s()().mark(function D(h){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.request)("/api/app/image/export",{method:"POST",data:h,responseType:"blob"}));case 1:case"end":return a.stop()}},D)})),E.apply(this,arguments)}function P(D){return m.apply(this,arguments)}function m(){return m=l()(s()().mark(function D(h){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.request)("/api/pro/image/get-remote-tag",{method:"POST",data:h}));case 1:case"end":return a.stop()}},D)})),m.apply(this,arguments)}function O(D){return x.apply(this,arguments)}function x(){return x=l()(s()().mark(function D(h){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.request)("/api/app/image/check-upgrade",{method:"POST",data:h}));case 1:case"end":return a.stop()}},D)})),x.apply(this,arguments)}function g(D){return K.apply(this,arguments)}function K(){return K=l()(s()().mark(function D(h){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.request)("/api/pro/image/get-rootfs",{method:"POST",data:h}));case 1:case"end":return a.stop()}},D)})),K.apply(this,arguments)}},67255:function(N,I,e){e.d(I,{G$:function(){return p},LX:function(){return f},MJ:function(){return l},Oh:function(){return C},h5:function(){return R},j_:function(){return u},rj:function(){return T}});var U=e(5574),s=e.n(U);function C(o){var d=localStorage.getItem("dpanel-pagesize");return d=="all"?!1:{defaultCurrent:o==null?void 0:o.page,showSizeChanger:!0,defaultPageSize:parseInt(d!=null?d:"20"),showQuickJumper:!0}}function l(o,d){d?localStorage.setItem("dpanel-page-"+o,"".concat(d)):localStorage.removeItem("dpanel-page-"+o)}function p(o,d){var r,j=d?Math.ceil((d==null?void 0:d.total)/(d==null?void 0:d.pageSize)):void 0,t=parseInt((r=localStorage.getItem("dpanel-page-"+o))!==null&&r!==void 0?r:"");if(console.log(j),console.log(t),t!=0)return j&&t>j?j:t}function u(o){return{persistenceKey:o,persistenceType:"localStorage"}}var R=["descend","ascend"];function T(o,d){var r=localStorage.getItem("dpanel-table-sort-".concat(o));if(r){var j=r.split("|"),t=s()(j,2),E=t[0],P=t[1];if(E==d)return P}}function f(o,d,r){!d||!r?localStorage.removeItem("dpanel-table-sort-".concat(o)):localStorage.setItem("dpanel-table-sort-".concat(o),"".concat(d,"|").concat(r))}}}]);
