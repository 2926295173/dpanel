"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1050],{1699:function(J,W,t){t.d(W,{u:function(){return U}});var A=t(9783),_=t.n(A),V=t(97857),L=t.n(V),N=t(67294),n=t(82346),F=t(40411),x=t(42075),g=t(85893),U=function(a){var T=(0,n.useAccess)(),S=Array.isArray(a.access)?a.access:[a.access],O,m=a.fallback;if(typeof a.children=="function"?(O=a.children(S.reduce(function(d,B){return L()(L()({},d),{},_()({},B,T[B]))},{})),O||(O=m)):S.every(function(d){return T[d]})?O=a.children:O=m,!m&&O&&a.showProTips&&T.canSeeEnableCe){if(T.canSeeEnableHiddenProTips)return null;O=(0,g.jsx)(F.Z,{offset:a.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:O})}if(!m&&O&&a.showProRibbonTips&&T.canSeeEnableCe){if(T.canSeeEnableHiddenProTips)return null;O=(0,g.jsx)(F.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:O})}return a.space?(0,g.jsx)(x.Z,L()(L()({},a.space),{},{children:O})):O}},80821:function(J,W,t){t.d(W,{Z:function(){return R}});var A=t(97857),_=t.n(A),V=t(5574),L=t.n(V),N=t(24963),n=t(86738),F=t(28036),x=t(83062),g=t(67294),U=t(85893);function R(a){var T=(0,g.useState)(!1),S=L()(T,2),O=S[0],m=S[1],d=(0,g.useContext)(N.Z),B=d.lang,D=d.message,v=function(){m(!0);var te=a.action();te instanceof Promise?te.then(function(G){if(m(!1),G){typeof a.onSuccess=="function"&&a.onSuccess(G);var e="";a.messageSuccess?typeof a.messageSuccess=="function"?e=a.messageSuccess(G):e=a.messageSuccess.indexOf("notification.")==0?B(a.messageSuccess):a.messageSuccess:e=B("notification.finish"),a.asynced?D.info(e):D.success(e)}}).catch(function(G){m(!1),typeof a.onError=="function"&&a.onError(G)}):m(!1)};return a.confirm?(0,U.jsx)(n.Z,_()(_()({style:{width:500},title:a.confirmTitle?a.confirmTitle:B("notification.title.tip"),description:typeof a.confirm=="string"&&a.confirm.indexOf("notification.")==0?B(a.confirm):a.confirm,onConfirm:v,okText:"Yes",cancelText:"No",onOpenChange:a.confirmOnOpenChange},a.confirmProps),{},{children:(0,U.jsx)(F.ZP,{block:a.block,disabled:a.disabled,icon:!a.children&&O?void 0:a.icon,loading:O,danger:a.danger,type:a.type,children:a.children})})):(0,U.jsx)(x.Z,{title:a.tips,children:(0,U.jsx)(F.ZP,{block:a.block,style:a.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:a.disabled,icon:!a.children&&O?void 0:a.icon,loading:O,onClick:v,danger:a.danger,type:a.type,children:a.children})})}},44349:function(J,W,t){var A=t(97857),_=t.n(A),V=t(17186),L=t(5966),N=t(86250),n=t(67294),F=t(85893),x=(0,n.forwardRef)(function(g,U){var R=(0,n.useRef)();(0,n.useImperativeHandle)(U,function(){return{addItem:function(S,O){var m,d=(m=R.current)===null||m===void 0?void 0:m.getList(),B=!1;if(d==null||d.map(function(v){if(v.name==S){B=!0;return}}),!B){var D;(D=R.current)===null||D===void 0||D.add({name:S,value:O})}},clear:function(){var S;(S=R.current)===null||S===void 0||(S=S.getList())===null||S===void 0||S.map(function(O,m){var d;(d=R.current)===null||d===void 0||d.remove(m)})}}});var a={};return g.hideCopyButton===!0&&(a.copyIconProps=!1),g.hideDeleteButton===!0&&(a.deleteIconProps=!1),(0,F.jsx)(V.u,_()(_()({initialValue:g.initialValue,label:g.label,name:g.name,actionRef:R,creatorButtonProps:g.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(g.label?g.label:g.name)}:!1,min:g.min?g.min:0},a),{},{children:function(S,O,m){return(0,F.jsx)(N.Z,{justify:g.justify,gap:g.gap,children:g.items.map(function(d){return d.render?(0,F.jsx)("div",{children:d.render&&d.render(S,O,m)},"".concat(g.name,"-").concat(d.name,"-").concat(S.key)):(0,F.jsx)(L.Z,{width:d.width,name:d.name,label:d.label,required:d.required,rules:[{required:d.required}],disabled:d.disabled,placeholder:d.placeholder},"".concat(g.name,"-").concat(d.name,"-").concat(S.key))})})}}))});W.Z=x},2808:function(J,W,t){t.d(W,{Z:function(){return F}});var A=t(97857),_=t.n(A),V=t(62370),L=t(51663),N=t(67294),n=t(85893);function F(x){return(0,n.jsx)(V.Z,_()(_()({},x),{},{children:(0,n.jsx)(L.Z,{showText:function(U){return U.toHexString()},allowClear:!0,presets:[{label:"\u9884\u8BBE\u989C\u8272",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},51100:function(J,W,t){t.d(W,{Z:function(){return N}});var A=t(97961),_=t(91604),V=t(1677),L=t(85893);function N(n){return n.showDragger?(0,L.jsx)(_.Z,{max:n.max?n.max:1,title:n.title,label:n.label,required:n.required,rules:[{required:n.required}],fieldProps:{multiple:!!(n.max&&n.max>1),name:"file",accept:n.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(x){return new Promise(function(g){var U;(0,A._2)({path:(U=x.response.data.path)!==null&&U!==void 0?U:""}).then(function(R){g(!0)})})}},name:n.name}):(0,L.jsx)(V.Z,{max:n.max?n.max:1,title:n.title,label:n.label,required:n.required,rules:[{required:n.required}],fieldProps:{multiple:!!(n.max&&n.max>1),name:"file",accept:n.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(x){return new Promise(function(g){var U;(0,A._2)({path:(U=x.response.data.path)!==null&&U!==void 0?U:""}).then(function(R){g(!0)})})}},name:n.name})}},3616:function(J,W,t){t.d(W,{Ed:function(){return L},FK:function(){return _},R_:function(){return A},ob:function(){return V}});var A=window.innerWidth<=1024?"90vw":"65vw",_="90vw",V="60vw",L="50vh"},12323:function(J,W,t){t.d(W,{X:function(){return A},n:function(){return _}});var A={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},_=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},24963:function(J,W,t){var A=t(67294),_=(0,A.createContext)({});W.Z=_},56757:function(J,W,t){t.r(W),t.d(W,{default:function(){return Je}});var A=t(5574),_=t.n(A),V=t(19632),L=t.n(V),N=t(15009),n=t.n(N),F=t(99289),x=t.n(F),g=t(87662),U=t(88641),R=t(38345),a=t(97269),T=t(5966),S=t(31199),O=t(63434),m=t(67294),d=t(42075),B=t(80821),D=t(1699),v=t(82346);function ve(M){return te.apply(this,arguments)}function te(){return te=x()(n()().mark(function M(K){return n()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.abrupt("return",(0,v.request)("/api/common/home/email-test",{method:"POST",data:K}));case 1:case"end":return I.stop()}},M)})),te.apply(this,arguments)}var G=t(36146),e=t(85893);function Se(){var M=(0,m.useRef)(),K=(0,m.useState)(""),$=_()(K,2),I=$[0],j=$[1],E=new G.Uo("components.systemBasic.systemBasicEmail");function y(){return Y.apply(this,arguments)}function Y(){return Y=x()(n()().mark(function X(){var H,i,w,h,s,u,C,P;return n()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,g.pe)({groupName:"setting",name:"emailServer"});case 2:P=l.sent,P.data&&((H=M.current)===null||H===void 0||H.setFieldsValue({host:(i=P.data.host)!==null&&i!==void 0?i:"",port:(w=P.data.port)!==null&&w!==void 0?w:"",email:(h=P.data.email)!==null&&h!==void 0?h:"",code:(s=P.data.code)!==null&&s!==void 0?s:"",status:(u=P.data.status)!==null&&u!==void 0?u:[]})),P.data&&j((C=P.data)===null||C===void 0?void 0:C.email);case 5:case"end":return l.stop()}},X)})),Y.apply(this,arguments)}return(0,e.jsx)(R.Z,{direction:"column",gutter:[0,10],ghost:!0,children:(0,e.jsx)(R.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(U.Z,{}),subTitle:E.format("cardTitle"),children:(0,e.jsxs)(a.A,{layout:"horizontal",labelAlign:"right",labelCol:{span:5,offset:0},formRef:M,onInit:x()(n()().mark(function X(){return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return y(),i.abrupt("return",!0);case 2:case"end":return i.stop()}},X)})),submitter:{render:function(H,i){return[].concat(L()(i),[(0,e.jsx)(B.Z,{tips:E.format("testTip",{email:I}),action:x()(n()().mark(function w(){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,ve({subject:E.format("testSubject"),content:E.format("testContent",{time:new Date().toISOString()})});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},w)})),children:E.format("testButton")},"testEmail")])}},onFinish:function(){var X=x()(n()().mark(function H(i){var w;return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,g.bv)({emailServer:{host:i.host,port:i.port,email:i.email,code:i.code,status:i.status}});case 2:return(w=M.current)===null||w===void 0||w.resetFields(),y(),s.abrupt("return",!0);case 5:case"end":return s.stop()}},H)}));return function(H){return X.apply(this,arguments)}}(),children:[(0,e.jsx)(T.Z,{label:E.format("host"),name:"host",placeholder:E.format("hostEmpty"),required:!0,rules:[{required:!0}]}),(0,e.jsx)(S.Z,{label:E.format("port"),name:"port",placeholder:E.format("portEmpty"),required:!0,rules:[{required:!0}]}),(0,e.jsx)(T.Z,{label:E.format("code"),name:"code",width:"lg",placeholder:E.format("codeEmpty"),required:!0,rules:[{required:!0}],addonAfter:(0,e.jsxs)(d.Z,{children:[(0,e.jsx)("a",{target:"_blank",href:"https://service.mail.qq.com/detail/0/75",children:E.format("codeHelpQQ")}),(0,e.jsx)("a",{target:"_blank",href:"https://help.mail.163.com/faqDetail.do?code=d7a5dc8471cd0c0e8b4b8f4f8e49998b374173cfe9171305fa1ce630d7f67ac286624f309a1a7089",children:E.format("codeHelp163")})]})}),(0,e.jsx)(T.Z,{label:E.format("email"),name:"email",placeholder:E.format("emailEmpty"),required:!0,rules:[{required:!0}]}),(0,e.jsx)(D.u,{access:"canSeeEnableEe",children:(0,e.jsx)(O.Z.Group,{name:"status",label:E.format("status"),options:E.option("statusOption",["register"])})})]})})})}var ce=t(24963);function ye(M){return de.apply(this,arguments)}function de(){return de=x()(n()().mark(function M(K){return n()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.abrupt("return",(0,v.request)("/api/pro/two-fa/enable",{method:"POST",data:K}));case 1:case"end":return I.stop()}},M)})),de.apply(this,arguments)}function xe(){return me.apply(this,arguments)}function me(){return me=x()(n()().mark(function M(){return n()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",(0,v.request)("/api/pro/two-fa/get-setting",{method:"POST"}));case 1:case"end":return $.stop()}},M)})),me.apply(this,arguments)}var Ee=t(29177),Pe=t(86548),Ce=t(97937),Te=t(12119),ee=t(97462),re=t(52688),oe=t(62370),fe=t(28036),Oe=t(98163);function Ze(){var M=(0,m.useRef)(),K=(0,v.useModel)("@@initialState"),$=K.initialState,I=K.refresh,j=(0,m.useContext)(ce.Z),E=j.message,y=(0,m.useRef)(),Y=(0,m.useState)(0),X=_()(Y,2),H=X[0],i=X[1],w=(0,v.useAccess)(),h=new G.Uo("components.systemBasic.systemBasicLogin");return(0,m.useEffect)(function(){!w.canSeeEnableCe&&xe().then(function(s){var u;(u=y.current)===null||u===void 0||u.setFieldsValue({enable:s.data.enable,email:s.data.email,qrcode:s.data.qrcode})})},[H]),(0,e.jsxs)(R.Z,{direction:"column",gutter:[0,10],ghost:!0,children:[(0,e.jsx)(R.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(Ee.Z,{}),subTitle:h.format("adminTitle"),children:(0,e.jsxs)(a.A,{layout:"horizontal",labelAlign:"right",labelCol:{span:3,offset:0},formRef:M,onFinish:function(){var s=x()(n()().mark(function u(C){var P,r;return n()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,g.Jn)({username:C.username,password:C.password,newPassword:C.newPassword});case 2:if(P=b.sent,!(P&&P.data)){b.next=9;break}return(r=M.current)===null||r===void 0||r.resetFields(),E.success(G.FD.format("finish")),localStorage.removeItem("token"),I(),b.abrupt("return",!0);case 9:case"end":return b.stop()}},u)}));return function(u){return s.apply(this,arguments)}}(),children:[(0,e.jsx)(ee.Z,{name:["enableUsername"],children:function(u){var C=u.enableUsername;return(0,e.jsx)(T.Z,{label:h.format("adminUsername"),name:"username",style:{width:"80%"},initialValue:$==null?void 0:$.user.username,disabled:!C,addonAfter:[(0,e.jsx)(fe.ZP,{type:"link",hidden:!!C,icon:(0,e.jsx)(Pe.Z,{}),onClick:function(){var r;(r=M.current)===null||r===void 0||r.setFieldValue("enableUsername",!0)}},"editBtn"),(0,e.jsx)(fe.ZP,{type:"link",hidden:!C,icon:(0,e.jsx)(Ce.Z,{}),onClick:function(){var r;(r=M.current)===null||r===void 0||r.setFieldValue("enableUsername",!1)}},"closeBtn")]},"username")}}),(0,e.jsx)(T.Z.Password,{label:h.format("adminPassword"),name:"password",placeholder:h.format("adminPasswordEmpty"),rules:[{required:!0}]},"password"),(0,e.jsx)(T.Z.Password,{label:h.format("adminNewPassword"),name:"newPassword"},"newPasword"),(0,e.jsx)(ee.Z,{name:["newPassword"],children:function(u){var C=u.newPassword;return(0,e.jsx)(T.Z.Password,{label:h.format("adminNewPassword2"),name:"newPassword2",dependencies:["newPassword"],rules:[{required:typeof C!="undefined"&&C!=""},function(P){var r=P.getFieldValue;return{validator:function(b,f){return!f||r("newPassword")===f?Promise.resolve():Promise.reject(new Error(h.format("adminMessagePasswordNotMatch")))}}}]},"newPasword2")}})]})}),(0,e.jsx)(D.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(u){var C=u.canSeeEnableCe;return(0,e.jsx)(R.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(Te.Z,{}),subTitle:h.format("twofaTitle"),children:(0,e.jsxs)(a.A,{disabled:C,onFinish:function(){var P=x()(n()().mark(function r(l){var b,f;return n()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,ye({email:l.email,enable:l.enable});case 2:b=c.sent,b&&b.data.qrcode&&((f=y.current)===null||f===void 0||f.setFieldValue("qrcode",b.data.qrcode)),i(H+1);case 5:case"end":return c.stop()}},r)}));return function(r){return P.apply(this,arguments)}}(),formRef:y,layout:"horizontal",labelAlign:"right",labelCol:{span:3,offset:0},children:[(0,e.jsx)(re.Z,{label:h.format("twofaEnable"),name:"enable"}),(0,e.jsx)(T.Z,{label:h.format("twofaEmail"),name:"email",placeholder:h.format("twofaEmailEmpty"),rules:[{required:!0},{type:"email"}]}),(0,e.jsx)(oe.Z,{name:"qrcode",hidden:!0}),(0,e.jsx)(ee.Z,{name:["qrcode"],children:function(r){var l=r.qrcode;if(l)return(0,e.jsx)(oe.Z,{label:h.format("twofaQrcode"),tooltip:h.format("twofaQrcodeTip"),children:(0,e.jsx)(Oe.Z,{style:{border:"#d1d9e0b3 solid 1px",padding:"10px",borderRadius:"10px"},width:200,src:"data:image/png;base64,".concat(l)})})}})]})})}})]})}var Ue={xs:6,sm:6,md:6,lg:3,xl:3,xxl:3,offset:0},Me=t(43425),Le=t(19400),le=t(86615),ie=t(64317),Q=t(24739),Re=t(47221),Be=t(86125),he=t(86250),be=t(2487),Ie=t(4393),we=t(71230),We=t(15746),Ae=t(40411),De=t(184),$e=t(25054),Fe=t(90672),Ke=t(21532),ze=t(44349),se=t(65451),ke=t(2808),Ve=t(3616),ge=t(51100),ne={colorPrimary:"",colorTextBase:"",colorLink:"",colorBgContainer:"",colorBorder:"",colorBgElevated:"",colorBorderSecondary:"colorBorder"},pe=["borderRadius","wireframe"],He=(0,m.forwardRef)(function(M,K){(0,m.useImperativeHandle)(K,function(){return{show:function(){E(!0)},reset:function(){var s;(s=y.current)===null||s===void 0||s.resetFields(["siteLogo","siteTitle","siteCopyright","siteLink","bgImage","bgSize"])}}});var $=(0,m.useState)(!1),I=_()($,2),j=I[0],E=I[1],y=(0,m.useRef)(),Y=(0,m.useContext)(ce.Z),X=Y.message,H=Y.lang,i=new G.Uo("components.systemBasic.systemBasicThemeUser"),w=function(s){return(0,e.jsx)(ke.Z,{name:s.name,label:i.format(s.name),tooltip:s.tooltip})};return(0,e.jsx)(Ke.ZP,{children:(0,e.jsxs)(De.a,{drawerProps:{forceRender:!0,width:Ve.R_},submitter:{render:function(s,u){return(0,e.jsx)(d.Z,{children:u[1]})}},title:i.format("drawerTitle"),formRef:y,open:j,onOpenChange:function(){var h=x()(n()().mark(function s(u){var C,P,r,l,b,f;return n()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if((C=y.current)===null||C===void 0||C.resetFields(["bgImageUpload","siteLogoUpload"]),!u){c.next=8;break}return c.next=4,(0,se.Py)();case 4:P=c.sent,r=P.data.config,r&&(pe.forEach(function(Z){if(r.token&&r.token[Z]){var p,z;(p=y.current)===null||p===void 0||p.setFieldValue("enableStyle",!0),(z=y.current)===null||z===void 0||z.setFieldValue(Z,r.token[Z])}}),(l=y.current)===null||l===void 0||l.setFieldsValue({siteLogo:r.siteLogo,siteTitle:r.siteTitle,siteCopyright:r.siteCopyright,siteLink:r.siteLink,bgImage:r.bgImage,loginLogo:r.loginLogo}),!r.bgImage||!r.bgImage.width||r.bgImage.width=="100%"?(b=y.current)===null||b===void 0||b.setFieldValue("bgSize","full"):(f=y.current)===null||f===void 0||f.setFieldValue("bgSize","default")),Object.keys(ne).map(function(Z){var p=Z;ne[Z]!=""&&(p=ne[Z]),y!=null&&y.current&&r.token&&(y==null||y.current.setFieldValue("enableColor",!0),y==null||y.current.setFieldValue(Z,r.token[p]))});case 8:E(u);case 9:case"end":return c.stop()}},s)}));return function(s){return h.apply(this,arguments)}}(),name:"theme-user",onFinish:function(){var h=x()(n()().mark(function s(u){var C,P,r;return n()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return r={token:{},bgImage:u.bgImage,siteLink:u.siteLink,siteTitle:(C=u.siteTitle)!==null&&C!==void 0?C:"",siteCopyright:u.siteCopyright,siteLogo:(P=u.siteLogo)!==null&&P!==void 0?P:"",loginLogo:u.loginLogo},u.siteLogoUpload&&u.siteLogoUpload.length>0&&(r.siteLogo=u.siteLogoUpload[0].response.data.path),r.bgImage||(r.bgImage={}),u.bgImageUpload&&u.bgImageUpload.length>0&&(r.bgImage.src=u.bgImageUpload[0].response.data.path),r.bgImage.width=u.bgSize=="full"?"100%":"",u.loginLogoUpload&&u.loginLogoUpload.length>0&&(r.loginLogo=u.loginLogoUpload[0].response.data.path),Object.keys(ne).map(function(f){r.token||(r.token={});var o=f;ne[f]!=""&&(o=ne[f]);var c=y.current&&y.current.getFieldValue(o);c&&c.toHexString?c.cleared||(r.token[f]=c.toHexString()):r.token[f]=c}),pe.map(function(f){r.token||(r.token={});var o=y.current&&y.current.getFieldValue(f);r.token[f]=o}),b.next=10,(0,se.Z8)(r);case 10:return M.onFinish&&M.onFinish(),X.success(H("notification.finishTheme")),b.abrupt("return",!0);case 13:case"end":return b.stop()}},s)}));return function(s){return h.apply(this,arguments)}}(),children:[(0,e.jsx)(Q.UW,{title:i.format("colorTitle"),extra:(0,e.jsx)(re.Z,{name:"enableColor"})}),(0,e.jsx)(ee.Z,{name:["enableColor"],children:function(s){var u=s.enableColor;return u&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Q.UW,{children:w({name:"colorPrimary",tooltip:i.format("colorPrimaryTip")})}),(0,e.jsxs)(Q.UW,{children:[w({name:"colorBgContainer"}),w({name:"colorBgElevated"})]}),(0,e.jsxs)(Q.UW,{children:[w({name:"colorTextBase"}),w({name:"colorLink"}),w({name:"colorBorder"})]})]})}}),(0,e.jsx)(Q.UW,{title:"\u98CE\u683C",extra:(0,e.jsx)(re.Z,{name:"enableStyle"})}),(0,e.jsx)(ee.Z,{name:["enableStyle"],children:function(s){var u=s.enableStyle;return u&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Q.UW,{children:(0,e.jsxs)(he.Z,{gap:40,children:[(0,e.jsx)(re.Z,{label:i.format("wireframe"),name:"wireframe"}),(0,e.jsx)($e.Z,{min:1,max:16,label:i.format("borderRadius"),name:"borderRadius"})]})})})}}),(0,e.jsx)(Q.UW,{title:i.format("uiTitle")}),(0,e.jsx)(T.Z,{label:i.format("siteTitle"),name:"siteTitle",placeholder:i.format("siteTitleEmpty")}),(0,e.jsxs)(Q.UW,{children:[(0,e.jsx)(ge.Z,{label:"Logo",title:i.format("siteLogoUploadTitle"),name:"siteLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(T.Z,{width:"md",placeholder:i.format("siteLogoEmpty"),label:i.format("siteLogo"),name:"siteLogo"})]}),(0,e.jsxs)(Q.UW,{children:[(0,e.jsx)(ge.Z,{label:i.format("bgImageUpload"),title:i.format("bgImageUploadTitle"),name:"bgImageUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(T.Z,{width:"md",placeholder:i.format("siteLogoEmpty"),label:i.format("bgImageSrc"),name:["bgImage","src"]}),(0,e.jsx)(le.Z.Group,{name:"bgSize",label:i.format("bgImageBgSize"),initialValue:"full",options:i.option("bgImageBgSizeOption",["full","default"])})]}),(0,e.jsx)(Q.UW,{children:(0,e.jsx)(ee.Z,{name:["bgSize"],children:function(s){var u=s.bgSize;if(u=="default")return(0,e.jsxs)(Q.UW,{children:[(0,e.jsx)(S.Z,{width:"xs",name:["bgImage","top"],label:i.format("bgImageTop")}),(0,e.jsx)(S.Z,{width:"xs",name:["bgImage","bottom"],label:i.format("bgImageBottom")}),(0,e.jsx)(S.Z,{width:"xs",name:["bgImage","left"],label:i.format("bgImageLeft")}),(0,e.jsx)(S.Z,{width:"xs",name:["bgImage","right"],label:i.format("bgImageRight")})]})}})}),(0,e.jsx)(ze.Z,{name:"siteLink",label:i.format("siteLink"),showAddButton:!0,hideCopyButton:!0,gap:10,items:i.option("siteLinkOption",["title","href"]).map(function(h){return{name:h.value,label:h.label}})}),(0,e.jsx)(Fe.Z,{label:i.format("siteCopyright"),name:"siteCopyright"}),(0,e.jsxs)(Q.UW,{title:i.format("uiLoginTitle"),children:[(0,e.jsx)(ge.Z,{label:"Logo",title:"Logo",name:"loginLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(T.Z,{width:"md",placeholder:i.format("siteLogoEmpty"),label:i.format("loginLogo"),name:"loginLogo"})]})]})})}),Ne=He,_e=t(12323),Ge=t(64304),ue=t.n(Ge);function Qe(){var M=(0,m.useRef)(),K=(0,m.useRef)(),$=(0,m.useRef)(),I=(0,v.useModel)("@@initialState"),j=I.initialState,E=(0,v.useAccess)(),y=(0,m.useContext)(ce.Z),Y=y.message,X=y.lang,H=(0,v.useAntdConfigSetter)(),i=(0,m.useState)(),w=_()(i,2),h=w[0],s=w[1],u=(0,m.useState)(),C=_()(u,2),P=C[0],r=C[1],l=new G.Uo("components.systemBasic.systemBasicTheme");return(0,m.useEffect)(function(){var b,f,o,c,Z,p,z,k;(b=M.current)===null||b===void 0||b.setFieldsValue({algorithm:(f=j==null?void 0:j.theme.algorithm)!==null&&f!==void 0?f:"default",mainMenu:(o=j==null?void 0:j.theme.mainMenu)!==null&&o!==void 0?o:"top",compact:(c=j==null?void 0:j.theme.compact)!==null&&c!==void 0?c:"default",fontSize:(Z=j==null?void 0:j.theme.fontSize)!==null&&Z!==void 0?Z:14,fontSizeConsole:(p=j==null?void 0:j.theme.fontSizeConsole)!==null&&p!==void 0?p:12,sideMenu:(z=j==null?void 0:j.theme.sideMenu)!==null&&z!==void 0?z:"default",tablePageSize:(k=j==null?void 0:j.theme.tablePageSize)!==null&&k!==void 0?k:"20"})},[j]),(0,e.jsx)(Re.Z,{accordion:!0,defaultActiveKey:"basic",items:[{key:"basic",label:l.format("basicTitle"),children:(0,e.jsxs)(R.Z,{ghost:!0,children:[!E.canSeeEnableCe&&(0,e.jsx)(Ne,{ref:K}),(0,e.jsxs)(a.A,{layout:"horizontal",labelAlign:"right",labelCol:Ue,formRef:M,submitter:{render:function(f,o){return[o[1]]}},onFinish:function(){var b=x()(n()().mark(function f(o){var c;return n()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(c={algorithm:o.algorithm,mainMenu:o.mainMenu,sideMenu:o.sideMenu,compact:o.compact,fontSizeConsole:o.fontSizeConsole,fontSize:o.fontSize,tablePageSize:o.tablePageSize},!(o.algorithm!=(j==null?void 0:j.theme.algorithm)&&!E.canSeeEnableCe)){p.next=4;break}return p.next=4,(0,se.H)({clearColor:!0});case 4:return localStorage.setItem("dpanel-theme",o.algorithm),localStorage.setItem("dpanel-compact",o.compact),localStorage.setItem("dpanel-pagesize",o.tablePageSize),p.next=9,(0,g.bv)({theme:c});case 9:Y.success(X("notification.finishTheme"));case 10:case"end":return p.stop()}},f)}));return function(f){return b.apply(this,arguments)}}(),children:[(0,e.jsx)(le.Z.Group,{name:"algorithm",label:l.format("basicAlgorithm"),initialValue:"default",radioType:"button",options:l.option("basicAlgorithmOption",["default","dark","system"])}),(0,e.jsx)(D.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(f){var o=f.canSeeEnableCe;return(0,e.jsx)(ee.Z,{name:["algorithm"],children:function(Z){var p=Z.algorithm;return(0,e.jsx)(oe.Z,{label:l.format("basicUserTheme"),children:(0,e.jsxs)(d.Z.Compact,{children:[(0,e.jsx)(fe.ZP,{disabled:o||p=="system",onClick:function(){var k;(k=K.current)===null||k===void 0||k.show()},icon:(0,e.jsx)(Me.Z,{}),children:l.format("basicUserThemeButton")}),(0,e.jsx)(B.Z,{disabled:o||p=="system",action:x()(n()().mark(function z(){var k;return n()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(0,se.H)({clearColor:!0,clearSite:!0});case 2:H(function(je){return je.theme={token:{}},je}),(k=K.current)===null||k===void 0||k.reset(),window.location.reload();case 5:case"end":return q.stop()}},z)})),children:l.format("basicUserThemeDefaultButton")})]})})}})}}),(0,e.jsx)(le.Z.Group,{name:"mainMenu",label:l.format("basicMainMenu"),initialValue:"top",radioType:"button",options:l.option("basicMainMenuOption",["top","side"])}),(0,e.jsx)(le.Z.Group,{name:"sideMenu",label:l.format("basicSideMenu"),initialValue:"default",radioType:"button",options:l.option("basicSideMenuOption",["default","collapse"])}),(0,e.jsx)(le.Z.Group,{name:"compact",label:l.format("basicCompact"),initialValue:"default",radioType:"button",options:l.option("basicCompactOption",["default","compact"])}),(0,e.jsx)(oe.Z,{name:"fontSize",label:l.format("basicFontSize"),initialValue:14,children:(0,e.jsx)(Be.Z,{step:2,max:30,min:8,marks:{8:"8",10:"10",12:"12",14:"14",16:"16",20:"20",26:"26",30:"20"}})}),(0,e.jsx)(ie.Z,{initialValue:"20",label:l.format("basicTablePageSize"),name:"tablePageSize",options:l.option("basicTablePageSizeOption",["10","20","50","100","all"])})]})]})},{key:"console",label:l.format("consoleTitle"),children:(0,e.jsx)(R.Z,{ghost:!0,children:(0,e.jsxs)(a.A,{submitter:{render:function(f,o){return[o[1]]}},request:x()(n()().mark(function b(){var f,o,c;return n()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return o=_e.X,p.next=3,(0,g.pe)({groupName:"setting",name:"themeConsoleConfig"});case 3:return c=p.sent,c.data&&Object.assign(o,c.data),!E.canSeeEnableCe&&c.data&&(f=c.data)!==null&&f!==void 0&&f.themeName&&c.data.themeName!=""&&Object.keys(ue()).forEach(function(z,k){z==c.data.themeName&&(r(Math.ceil((k+1)/36)),s(c.data.themeName))}),p.abrupt("return",{fontSize:o.fontSize,lineHeight:o.lineHeight,letterSpacing:o.letterSpacing,fontWeight:o.fontWeight,cursorStyle:o.cursorStyle,cursorInactiveStyle:o.cursorInactiveStyle,cursorBlink:o.cursorBlink});case 7:case"end":return p.stop()}},b)})),formRef:$,onFinish:function(){var b=x()(n()().mark(function f(o){var c;return n()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return c={fontSize:o.fontSize,lineHeight:o.lineHeight,letterSpacing:o.letterSpacing,fontWeight:o.fontWeight,cursorStyle:o.cursorStyle,cursorInactiveStyle:o.cursorInactiveStyle,cursorBlink:o.cursorBlink,theme:{},themeName:""},h!=""&&!E.canSeeEnableCe&&(c.theme=ue()[h],c.themeName=h),p.next=4,(0,g.bv)({console:c});case 4:return Y.success(X("notification.finishTheme")),p.abrupt("return",!1);case 6:case"end":return p.stop()}},f)}));return function(f){return b.apply(this,arguments)}}(),children:[(0,e.jsx)(Q.UW,{title:l.format("consoleFont"),children:(0,e.jsxs)(he.Z,{gap:50,children:[(0,e.jsx)(S.Z,{label:l.format("consoleFontSize"),name:"fontSize",tooltip:l.format("consoleFontSizeTip"),fieldProps:{addonAfter:"px"}}),(0,e.jsx)(S.Z,{label:l.format("consoleLineHeight"),name:"lineHeight",tooltip:l.format("consoleLineHeightTip"),fieldProps:{addonAfter:l.format("consoleLineHeightUnit")}}),(0,e.jsx)(S.Z,{label:l.format("consoleLetterSpacing"),name:"letterSpacing",fieldProps:{addonAfter:"px"},tooltip:l.format("consoleLetterSpacingTip")}),(0,e.jsx)(ie.Z,{label:l.format("consoleFontWeight"),name:"fontWeight",options:[{label:"normal",value:"normal"},{label:"bold",value:"bold"},{label:"100",value:"100"},{label:"200",value:"200"},{label:"300",value:"300"},{label:"400",value:"400"},{label:"500",value:"500"},{label:"600",value:"600"},{label:"700",value:"700"},{label:"800",value:"800"},{label:"900",value:"900"}]})]})}),(0,e.jsx)(Q.UW,{title:l.format("consoleCursorStyleTitle"),children:(0,e.jsxs)(he.Z,{gap:50,children:[(0,e.jsx)(ie.Z,{label:l.format("consoleCursorStyle"),name:"cursorStyle",width:"sm",options:l.option("consoleCursorStyleOption",["bar","underline","block"])}),(0,e.jsx)(ie.Z,{label:l.format("consoleCursorInactiveStyle"),name:"cursorInactiveStyle",width:"sm",options:l.option("consoleCursorStyleOption",["bar","underline","block","outline"])}),(0,e.jsx)(re.Z,{label:l.format("consoleCursorBlink"),name:"cursorBlink"})]})}),(0,e.jsx)(D.u,{showProRibbonTips:!0,access:"canSeeEnableCe",children:function(f){var o=f.canSeeEnableCe;return(0,e.jsx)(R.Z,{ghost:!0,title:(0,e.jsx)(Le.Z,{}),subTitle:l.format("consoleTheme"),children:(0,e.jsx)(be.Z,{split:!0,style:{overflow:"hidden"},grid:{column:6},pagination:{pageSize:36,current:P,onChange:function(Z,p){r(Z)}},dataSource:Object.keys(ue()).map(function(c){return{label:c,value:c,data:ue()[c]}}),renderItem:function(Z,p){var z=Z.data,k=(0,e.jsxs)(Ie.Z,{style:{backgroundColor:z.background,color:z.foreground,textAlign:"center",cursor:o?"not-allowed":"pointer",borderRadius:0},onClick:function(){if(!o){var q;(q=$.current)===null||q===void 0||q.setFieldValue("theme",Z.data),s(Z.label)}},hoverable:!0,children:[(0,e.jsx)(we.Z,{wrap:!0,gutter:[2,2],justify:"center",align:"middle",children:_e.n.filter(function(ae){return z[ae]!=""}).map(function(ae){return(0,e.jsx)(We.Z,{style:{backgroundColor:z[ae],padding:8}},ae)})}),(0,e.jsx)("div",{style:{paddingTop:5},children:Z.label})]});return(0,e.jsx)(be.Z.Item,{style:{margin:0},children:h==Z.label?(0,e.jsx)(Ae.Z.Ribbon,{text:"Checked",children:k}):k},p)}})})}})]})})}]})}var Xe=t(90078),Ye=t(92398);function Je(){var M=(0,m.useState)("user"),K=_()(M,2),$=K[0],I=K[1],j=(0,v.useAccess)(),E=(0,v.useLocation)();return(0,m.useEffect)(function(){E.state&&I(E.state.tag)},[E.state]),(0,e.jsx)(Xe._z,{children:(0,e.jsx)(R.Z,{children:(0,e.jsx)(Ye.Z,{activeKey:$,onChange:function(Y){I(Y)},items:[{key:"user",label:new G.Uo("components.systemBasic.systemBasicLogin").format("title"),children:(0,e.jsx)(Ze,{})},{key:"theme",label:new G.Uo("components.systemBasic.systemBasicTheme").format("title"),children:(0,e.jsx)(Qe,{})},{key:"notice",label:new G.Uo("components.systemBasic.systemBasicEmail").format("title"),children:(0,e.jsx)(Se,{}),disabled:j.canSeeEnableCe}]})})})}},97961:function(J,W,t){t.d(W,{GH:function(){return R},_2:function(){return T},fN:function(){return F},ii:function(){return n},vC:function(){return g}});var A=t(15009),_=t.n(A),V=t(99289),L=t.n(V),N=t(82346),n=[{name:"amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"i386",arch:"386",search:[]},{name:"arm/v6",arch:"arm",search:[]},{name:"arm/v7",arch:"arm",search:[]},{name:"arm/v8",arch:"arm64",search:[]},{name:"ppc64le",arch:"ppc64le",search:[]},{name:"riscv64",arch:"riscv64",search:[]}];function F(d){return x.apply(this,arguments)}function x(){return x=L()(_()().mark(function d(B){return _()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,N.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:B}));case 1:case"end":return v.stop()}},d)})),x.apply(this,arguments)}function g(d){return U.apply(this,arguments)}function U(){return U=L()(_()().mark(function d(B){return _()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,N.request)("/api/app/image/import-by-container-tar",{method:"POST",data:B}));case 1:case"end":return v.stop()}},d)})),U.apply(this,arguments)}function R(d){return a.apply(this,arguments)}function a(){return a=L()(_()().mark(function d(B){return _()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,N.request)("/api/app/image/import-by-image-tar",{method:"POST",data:B}));case 1:case"end":return v.stop()}},d)})),a.apply(this,arguments)}function T(d){return S.apply(this,arguments)}function S(){return S=L()(_()().mark(function d(B){return _()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,N.request)("/api/common/attach/delete",{method:"POST",data:B});case 2:return v.abrupt("return",v.sent);case 3:case"end":return v.stop()}},d)})),S.apply(this,arguments)}function O(){return m.apply(this,arguments)}function m(){return m=_asyncToGenerator(_regeneratorRuntime().mark(function d(){return _regeneratorRuntime().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",request("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return D.stop()}},d)})),m.apply(this,arguments)}}}]);
