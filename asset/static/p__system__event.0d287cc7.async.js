"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5050],{80821:function(C,d,t){t.d(d,{Z:function(){return D}});var g=t(5574),i=t.n(g),l=t(24963),f=t(86738),h=t(28036),m=t(83062),y=t(67294),c=t(85893);function D(e){var R=(0,y.useState)(!1),O=i()(R,2),P=O[0],S=O[1],s=(0,y.useContext)(l.Z),E=s.lang,u=s.notice,r=s.message,a=function(){S(!0),e.action().then(function(o){if(S(!1),o){typeof e.onSuccess=="function"&&e.onSuccess(o);var v="";e.messageSuccess?typeof e.messageSuccess=="function"?v=e.messageSuccess(o):v=e.messageSuccess.indexOf("notification.")==0?E(e.messageSuccess):e.messageSuccess:v=E("notification.finish"),e.asynced?r.info(v):r.success(v)}}).catch(function(o){S(!1),typeof e.onError=="function"&&e.onError(o)})};return e.confirm?(0,c.jsx)(f.Z,{style:{width:500},title:e.confirmTitle?e.confirmTitle:E("notification.title.tip"),description:typeof e.confirm=="string"&&e.confirm.indexOf("notification.")==0?E(e.confirm):e.confirm,onConfirm:a,okText:"Yes",cancelText:"No",children:(0,c.jsx)(h.ZP,{disabled:e.disabled,icon:e.icon,loading:P,danger:e.danger,type:e.type,children:e.children})}):(0,c.jsx)(m.Z,{title:e.tips,children:(0,c.jsx)(h.ZP,{style:e.ghost?{padding:0,height:"auto"}:{},disabled:e.disabled,icon:e.icon,loading:P,onClick:a,danger:e.danger,type:e.type,children:e.children})})}},24963:function(C,d,t){var g=t(67294),i=(0,g.createContext)({});d.Z=i},85827:function(C,d,t){t.r(d),t.d(d,{default:function(){return E}});var g=t(15009),i=t.n(g),l=t(99289),f=t.n(l),h=t(80821),m=t(63713);function y(u){return c.apply(this,arguments)}function c(){return c=f()(i()().mark(function u(r){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/common/event/get-list",{method:"POST",data:r}));case 1:case"end":return n.stop()}},u)})),c.apply(this,arguments)}function D(u){return e.apply(this,arguments)}function e(){return e=f()(i()().mark(function u(r){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/common/event/prune",{method:"POST",data:r}));case 1:case"end":return n.stop()}},u)})),e.apply(this,arguments)}var R=t(67255),O=t(90078),P=t(10641),S=t(67294),s=t(85893);function E(){var u=(0,S.useRef)();return(0,s.jsx)(O._z,{header:{extra:[(0,s.jsx)(h.Z,{action:function(){return D()},onSuccess:function(){var a,n;return!((a=u.current)===null||a===void 0)&&a.reloadAndRest&&((n=u.current)===null||n===void 0||n.reloadAndRest()),!0},onError:function(){var a,n;return!((a=u.current)===null||a===void 0)&&a.reset&&((n=u.current)===null||n===void 0||n.reset()),!0},confirm:"notification.confirm.title",danger:!0,type:"primary",children:"\u6E05\u9664\u6240\u6709\u4E8B\u4EF6"})]},children:(0,s.jsx)(P.Z,{scroll:{x:"max-content"},columns:[{title:"\u7C7B\u578B",ellipsis:!0,dataIndex:"type",width:200},{title:"\u8BE6\u60C5",search:!1,render:function(a,n,o,v){return(0,s.jsxs)(s.Fragment,{children:[n.action," ",n.message]})}},{title:"\u65F6\u95F4",ellipsis:!0,search:!1,dataIndex:"createdAt",width:200,render:function(a,n,o,v,x){return new Date(n.createdAt).toLocaleString()}}],rowKey:"id",request:function(){var r=f()(i()().mark(function a(n,o,v){var x,T,M;return i()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,y({page:(x=n.current)!==null&&x!==void 0?x:1,pageSize:(T=n.pageSize)!==null&&T!==void 0?T:10,type:n.type});case 2:return M=_.sent,_.abrupt("return",{data:M.data.list,success:!0,total:M.data.total});case 4:case"end":return _.stop()}},a)}));return function(a,n,o){return r.apply(this,arguments)}}(),pagination:(0,R.O)(),actionRef:u})})}},67255:function(C,d,t){t.d(d,{O:function(){return g},j:function(){return i}});function g(){var l=localStorage.getItem("dpanel-pagesize");return l=="all"?!1:{showSizeChanger:!0,defaultPageSize:parseInt(l!=null?l:"20")}}function i(l){var f="dpanel-table-column-".concat(l),h={};if(localStorage.getItem(f)){var m;h=JSON.parse((m=localStorage.getItem(f))!==null&&m!==void 0?m:"{}")}return{defaultValue:h,onChange:function(c){localStorage.setItem("dpanel-table-column-".concat(l),JSON.stringify(c))}}}}}]);
