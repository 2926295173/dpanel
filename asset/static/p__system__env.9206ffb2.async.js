"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1180],{88484:function(G,g,e){e.d(g,{Z:function(){return E}});var j=e(87462),v=e(67294),T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},R=T,y=e(84089),M=function(t,O){return v.createElement(y.Z,(0,j.Z)({},t,{ref:O,icon:R}))},C=v.forwardRef(M),E=C},52688:function(G,g,e){var j=e(1413),v=e(45987),T=e(67294),R=e(35510),y=e(85893),M=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],C=T.forwardRef(function(E,l){var t=E.fieldProps,O=E.unCheckedChildren,f=E.checkedChildren,p=E.proFieldProps,c=(0,v.Z)(E,M);return(0,y.jsx)(R.Z,(0,j.Z)({valueType:"switch",fieldProps:(0,j.Z)({unCheckedChildren:O,checkedChildren:f},t),ref:l,valuePropName:"checked",proFieldProps:p,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},c))});g.Z=C},5966:function(G,g,e){var j=e(97685),v=e(1413),T=e(45987),R=e(21770),y=e(72723),M=e(55241),C=e(97435),E=e(67294),l=e(35510),t=e(85893),O=["fieldProps","proFieldProps"],f=["fieldProps","proFieldProps"],p="text",c=function(m){var n=m.fieldProps,x=m.proFieldProps,h=(0,T.Z)(m,O);return(0,t.jsx)(l.Z,(0,v.Z)({valueType:p,fieldProps:n,filedConfig:{valueType:p},proFieldProps:x},h))},i=function(m){var n=(0,R.Z)(m.open||!1,{value:m.open,onChange:m.onOpenChange}),x=(0,j.Z)(n,2),h=x[0],I=x[1];return(0,t.jsx)(y.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(H){var K,X=H.getFieldValue(m.name||[]);return(0,t.jsx)(M.Z,(0,v.Z)((0,v.Z)({getPopupContainer:function(_){return _&&_.parentNode?_.parentNode:_},onOpenChange:function(_){return I(_)},content:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[(K=m.statusRender)===null||K===void 0?void 0:K.call(m,X),m.strengthText?(0,t.jsx)("div",{style:{marginTop:10},children:(0,t.jsx)("span",{children:m.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},m.popoverProps),{},{open:h,children:m.children}))}})},D=function(m){var n=m.fieldProps,x=m.proFieldProps,h=(0,T.Z)(m,f),I=(0,E.useState)(!1),S=(0,j.Z)(I,2),H=S[0],K=S[1];return n!=null&&n.statusRender&&h.name?(0,t.jsx)(i,{name:h.name,statusRender:n==null?void 0:n.statusRender,popoverProps:n==null?void 0:n.popoverProps,strengthText:n==null?void 0:n.strengthText,open:H,onOpenChange:K,children:(0,t.jsx)("div",{children:(0,t.jsx)(l.Z,(0,v.Z)({valueType:"password",fieldProps:(0,v.Z)((0,v.Z)({},(0,C.Z)(n,["statusRender","popoverProps","strengthText"])),{},{onBlur:function($){var _;n==null||(_=n.onBlur)===null||_===void 0||_.call(n,$),K(!1)},onClick:function($){var _;n==null||(_=n.onClick)===null||_===void 0||_.call(n,$),K(!0)}}),proFieldProps:x,filedConfig:{valueType:p}},h))})}):(0,t.jsx)(l.Z,(0,v.Z)({valueType:"password",fieldProps:n,proFieldProps:x,filedConfig:{valueType:p}},h))},d=c;d.Password=D,d.displayName="ProFormComponent",g.Z=d},1699:function(G,g,e){e.d(g,{u:function(){return t}});var j=e(9783),v=e.n(j),T=e(97857),R=e.n(T),y=e(67294),M=e(82346),C=e(40411),E=e(42075),l=e(85893),t=function(f){var p=(0,M.useAccess)(),c=Array.isArray(f.access)?f.access:[f.access],i,D=f.fallback;return typeof f.children=="function"?(i=f.children(c.reduce(function(d,A){return R()(R()({},d),{},v()({},A,p[A]))},{})),i||(i=D)):c.every(function(d){return p[d]})?i=f.children:i=D,!D&&i&&f.showProTips&&p.canSeeEnableCe&&(i=(0,l.jsx)(C.Z,{offset:f.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:i})),!D&&i&&f.showProRibbonTips&&p.canSeeEnableCe&&(i=(0,l.jsx)(C.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:i})),f.space?(0,l.jsx)(E.Z,R()(R()({},f.space),{},{children:i})):i}},80821:function(G,g,e){e.d(g,{Z:function(){return l}});var j=e(5574),v=e.n(j),T=e(24963),R=e(86738),y=e(28036),M=e(83062),C=e(67294),E=e(85893);function l(t){var O=(0,C.useState)(!1),f=v()(O,2),p=f[0],c=f[1],i=(0,C.useContext)(T.Z),D=i.lang,d=i.notice,A=i.message,m=function(){c(!0);var x=t.action();x instanceof Promise?x.then(function(h){if(c(!1),h){typeof t.onSuccess=="function"&&t.onSuccess(h);var I="";t.messageSuccess?typeof t.messageSuccess=="function"?I=t.messageSuccess(h):I=t.messageSuccess.indexOf("notification.")==0?D(t.messageSuccess):t.messageSuccess:I=D("notification.finish"),t.asynced?A.info(I):A.success(I)}}).catch(function(h){c(!1),typeof t.onError=="function"&&t.onError(h)}):c(!1)};return t.confirm?(0,E.jsx)(R.Z,{style:{width:500},title:t.confirmTitle?t.confirmTitle:D("notification.title.tip"),description:typeof t.confirm=="string"&&t.confirm.indexOf("notification.")==0?D(t.confirm):t.confirm,onConfirm:m,okText:"Yes",cancelText:"No",onOpenChange:t.confirmOnOpenChange,children:(0,E.jsx)(y.ZP,{block:t.block,disabled:t.disabled,icon:!t.children&&p?void 0:t.icon,loading:p,danger:t.danger,type:t.type,children:t.children})}):(0,E.jsx)(M.Z,{title:t.tips,children:(0,E.jsx)(y.ZP,{block:t.block,style:t.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:t.disabled,icon:!t.children&&p?void 0:t.icon,loading:p,onClick:m,danger:t.danger,type:t.type,children:t.children})})}},44349:function(G,g,e){var j=e(97857),v=e.n(j),T=e(17186),R=e(5966),y=e(86250),M=e(67294),C=e(85893),E=(0,M.forwardRef)(function(l,t){var O=(0,M.useRef)();(0,M.useImperativeHandle)(t,function(){return{addItem:function(c,i){var D,d=(D=O.current)===null||D===void 0?void 0:D.getList(),A=!1;if(d==null||d.map(function(n){if(n.name==c){A=!0;return}}),!A){var m;(m=O.current)===null||m===void 0||m.add({name:c,value:i})}},clear:function(){var c;(c=O.current)===null||c===void 0||(c=c.getList())===null||c===void 0||c.map(function(i,D){var d;(d=O.current)===null||d===void 0||d.remove(D)})}}});var f={};return l.hideCopyButton===!0&&(f.copyIconProps=!1),l.hideDeleteButton===!0&&(f.deleteIconProps=!1),(0,C.jsx)(T.u,v()(v()({initialValue:l.initialValue,label:l.label,name:l.name,actionRef:O,creatorButtonProps:l.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(l.label?l.label:l.name)}:!1,min:l.min?l.min:0},f),{},{children:function(c,i,D){return(0,C.jsx)(y.Z,{justify:l.justify,gap:l.gap,children:l.items.map(function(d){return d.render?(0,C.jsx)("div",{children:d.render&&d.render(c,i,D)},"".concat(l.name,"-").concat(d.name,"-").concat(c.key)):(0,C.jsx)(R.Z,{width:d.width,name:d.name,label:d.label,required:d.required,rules:[{required:d.required}],disabled:d.disabled,placeholder:d.placeholder},"".concat(l.name,"-").concat(d.name,"-").concat(c.key))})})}}))});g.Z=E},12491:function(G,g,e){e.d(g,{Z:function(){return E}});var j=e(24963),v=e(88484),T=e(62370),R=e(31418),y=e(28036),M=e(67294),C=e(85893);function E(l){var t=(0,M.useContext)(j.Z),O=t.message,f=t.notice,p=t.lang,c=(0,M.useRef)(null),i=R.Z.useApp(),D=function(){c.current&&(c.current.click(),c.current.onchange=function(A){if(!A||!A.target)return"";var m=new FileReader;m.onload=function(x){var h,I,S=(h=x.target)===null||h===void 0?void 0:h.result;if(l.onLoad)try{l.onLoad&&l.onLoad(S)}catch(H){f.error(H);return}typeof l.onImport=="function"&&(O.success("\u6210\u529F\u5BFC\u5165 ".concat(l.title)),l.onImport(S)),(I=c.current)!==null&&I!==void 0&&I.value&&(c.current.value="")};var n=A.target;if(n.files)try{m.readAsText(n.files[0])}catch(x){f.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(T.Z,{children:(0,C.jsx)(y.ZP,{icon:(0,C.jsx)(v.Z,{}),block:!0,onClick:D,children:l.title})}),(0,C.jsx)("input",{style:{display:"none"},type:"file",ref:c,name:"importFileInput"})]})}},8680:function(G,g,e){var j=e(15009),v=e.n(j),T=e(64599),R=e.n(T),y=e(99289),M=e.n(y),C=e(9783),E=e.n(C),l=e(5574),t=e.n(l),O=e(67294),f=e(184),p=e(38345),c=e(97269),i=e(97321),D=e(97462),d=e(64317),A=e(5966),m=e(86615),n=e(68602),x=e(28036),h=e(83403),I=e(24963),S=e(1699),H=e(29177),K=e(45742),X=e(43425),$=e(44349),_=e(85893),ae=(0,O.forwardRef)(function(z,se){var L=(0,O.useState)(!1),J=t()(L,2),Y=J[0],k=J[1],U=(0,O.useRef)(),ne=(0,O.useContext)(I.Z),Z=ne.message,b=(0,O.useState)([]),te=t()(b,2),w=te[0],Q=te[1],ee=E()(E()(E()(E()(E()({},h.W6.CONTAINER,"Id"),h.W6.APPSTORE,"name"),h.W6.COMPOSE,"name"),h.W6.REGISTRY,"serverAddress"),h.W6.DOCKER_ENV,"name"),re=E()(E()(E()(E()(E()({},h.W6.CONTAINER,"name"),h.W6.APPSTORE,"name"),h.W6.COMPOSE,"name"),h.W6.REGISTRY,"title"),h.W6.DOCKER_ENV,"title"),q=ee[z.type],W=re[z.type],u=z.selected.map(function(s){return s[ee[z.type]]});return O.useEffect(function(){Y&&((0,n.dP)({permission:{uri:z.type,key:q,value:u}}).then(function(s){var a;(a=U.current)===null||a===void 0||a.setFieldValue("list",Object.keys(s.data.list).map(function(o){return{name:o,type:s.data.list[o].type,users:s.data.list[o].users}}))}),(0,n.lE)().then(function(s){var a,o=(a=s.data)===null||a===void 0||(a=a.list)===null||a===void 0?void 0:a.map(function(r){return{label:r.username,value:r.username}});Q(o)}))},[Y]),(0,_.jsx)(S.u,{access:["canSeeEnableEe","canSeeFounder","canSeeManage"],children:(0,_.jsxs)(f.a,{name:"create",title:"\u6570\u636E\u6743\u9650\u8BBE\u7F6E",open:Y,onOpenChange:function(a){if(!a){var o;(o=U.current)===null||o===void 0||o.resetFields()}k(a)},drawerProps:{forceRender:!0},formRef:U,trigger:(0,_.jsx)(x.ZP,{icon:(0,_.jsx)(H.Z,{}),children:"\u6570\u636E\u6743\u9650"}),onFinish:function(){var s=M()(v()().mark(function a(o){var r,P,B;return v()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:r=R()(o.list),F.prev=1,r.s();case 3:if((P=r.n()).done){F.next=9;break}return B=P.value,F.next=7,(0,n.Db)({usernames:B.users,permissionType:B.type,permission:{uri:z.type,key:q,showKey:W,value:[B.name]}});case 7:F.next=3;break;case 9:F.next=14;break;case 11:F.prev=11,F.t0=F.catch(1),r.e(F.t0);case 14:return F.prev=14,r.f(),F.finish(14);case 17:Z.success("\u6743\u9650\u8BBE\u7F6E\u6210\u529F"),k(!1),z.onSuccess();case 20:case"end":return F.stop()}},a,null,[[1,11,14,17]])}));return function(a){return s.apply(this,arguments)}}(),children:[(0,_.jsxs)(p.Z,{ghost:!0,title:(0,_.jsx)(K.Z,{}),subTitle:"\u6279\u91CF\u8BBE\u7F6E",children:[(0,_.jsx)(c.A.Item,{name:"type",style:{marginBottom:0},children:(0,_.jsxs)(i.Z.Group,{defaultValue:"admin",onChange:function(a){var o,r,P=(o=U.current)===null||o===void 0?void 0:o.getFieldValue("list");P.forEach(function(B){B.type=a,B.users=[]}),(r=U.current)===null||r===void 0||r.setFieldValue("list",P)},children:[(0,_.jsx)(i.Z,{style:{width:240},title:"\u7BA1\u7406\u5458",description:"\u4EC5\u7BA1\u7406\u5458\u53EF\u89C1",value:"admin"}),(0,_.jsx)(i.Z,{style:{width:240},title:"\u6307\u5B9A\u7528\u6237",description:"\u4EC5\u9009\u4E2D\u7528\u6237\u53EF\u89C1",value:"restricted"}),(0,_.jsx)(i.Z,{style:{width:240},title:"\u516C\u5171",description:"\u6240\u6709\u4EBA\u53EF\u89C1",value:"public"})]})}),(0,_.jsx)(D.Z,{name:["type"],children:function(a){var o=a.type;if(o==="restricted")return(0,_.jsx)(d.Z,{mode:"multiple",name:"usernames",label:"\u9009\u62E9\u7528\u6237",onChange:function(P){var B,V,F=(B=U.current)===null||B===void 0?void 0:B.getFieldValue("list");F.forEach(function(N){N.users=P}),(V=U.current)===null||V===void 0||V.setFieldValue("list",F)},rules:[{required:!0}],request:M()(v()().mark(function r(){var P,B,V;return v()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(!(w.length>0)){N.next=2;break}return N.abrupt("return",w);case 2:return N.next=4,(0,n.lE)();case 4:return B=N.sent,V=(P=B.data)===null||P===void 0||(P=P.list)===null||P===void 0?void 0:P.map(function(le){return{label:le.username,value:le.username}}),Q(V),N.abrupt("return",V);case 8:case"end":return N.stop()}},r)}))})}})]}),(0,_.jsx)(p.Z,{ghost:!0,title:(0,_.jsx)(X.Z,{}),subTitle:"\u6570\u636E\u6743\u9650\u8BBE\u7F6E",children:(0,_.jsx)($.Z,{name:"list",hideCopyButton:!0,gap:10,items:[{name:"name",label:"\u540D\u79F0",render:function(a,o,r){var P=r.getCurrentRowData();return(0,_.jsx)(A.Z,{disabled:!0,label:"\u540D\u79F0",width:"sm",name:"name"})}},{name:"type",label:"\u6743\u9650\u7C7B\u578B",render:function(a,o,r){var P=r.getCurrentRowData();return(0,_.jsx)(m.Z.Group,{label:"\u6743\u9650\u7C7B\u578B",name:"type",radioType:"button",options:[{label:"\u7BA1\u7406\u5458",value:"admin"},{label:"\u516C\u5171",value:"public"},{label:"\u6307\u5B9A\u7528\u6237",value:"restricted"}]})}},{name:"users",label:"\u5173\u8054\u7528\u6237",render:function(a,o,r){return(0,_.jsx)(D.Z,{name:["type"],children:function(B){var V=B.type;if(V=="restricted")return(0,_.jsx)(d.Z,{width:"sm",mode:"tags",name:"users",label:"\u5173\u8054\u7528\u6237",options:w})}})}}]})})]})})});g.Z=ae},24963:function(G,g,e){var j=e(67294),v=(0,j.createContext)({});g.Z=v},53893:function(G,g,e){e.r(g),e.d(g,{default:function(){return se}});var j=e(15009),v=e.n(j),T=e(99289),R=e.n(T),y=e(5574),M=e.n(y),C=e(80821),E=e(184),l=e(5966),t=e(52688),O=e(97462),f=e(62370),p=e(28036),c=e(86250),i=e(67294),D=e(91845),d=e(87662),A=e(24963),m=e(12491),n=e(85893),x=(0,i.forwardRef)(function(L,J){var Y;(0,i.useImperativeHandle)(J,function(){return{edit:function(u){var s;(s=b.current)===null||s===void 0||s.setFieldsValue({name:u.name,title:u.title,address:u.address,serverUrl:u.serverUrl,enableTLS:u.enableTLS,tlsCa:u.tlsCa,tlsCert:u.tlsCert,tlsKey:u.tlsKey,enableComposePath:u.enableComposePath}),Z(!0),ee(u.name)}}});var k=(0,i.useState)(!1),U=M()(k,2),ne=U[0],Z=U[1],b=(0,i.useRef)(),te=(0,i.useState)(""),w=M()(te,2),Q=w[0],ee=w[1],re=(0,i.useContext)(A.Z),q=re.lang;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.ZP,{onClick:function(){var u;ee(""),(u=b.current)===null||u===void 0||u.resetFields(),Z(!0)},type:"primary",children:"\u6DFB\u52A0\u670D\u52A1\u7AEF"}),(0,n.jsxs)(E.a,{drawerProps:{forceRender:!0},onOpenChange:function(u){Z(u)},open:ne,width:800,formRef:b,title:(Y=b.current)!==null&&Y!==void 0&&Y.getFieldValue&&b.current.getFieldValue("name")=="local"?"\u914D\u7F6E\u9ED8\u8BA4Docker\u670D\u52A1\u7AEF":"\u6DFB\u52A0\u8FDC\u7A0BDocker\u670D\u52A1\u7AEF",onFinish:function(){var W=R()(v()().mark(function u(s){var a;return v()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,d.ad)({name:s.name,title:s.title,address:s.address,serverUrl:s.serverUrl,tlsCa:s.tlsCa,tlsCert:s.tlsCert,tlsKey:s.tlsKey,enableTLS:s.enableTLS,enableComposePath:s.enableComposePath,composePath:s.enableComposePath?s.composePath:""});case 2:return a=r.sent,L.onFinish&&L.onFinish(),r.abrupt("return",!0);case 5:case"end":return r.stop()}},u)}));return function(u){return W.apply(this,arguments)}}(),children:[(0,n.jsx)(l.Z,{label:"\u540D\u79F0",name:"title",required:!0,rules:[{required:!0}],fieldProps:{onChange:function(u){var s="";if(u.target.value&&!Q){var a,o=(0,D.N9)(u.target.value.trim(),{toneType:"none",type:"array"});s=o.join(""),(a=b.current)===null||a===void 0||a.setFieldValue("name",s)}}}}),(0,n.jsx)(l.Z,{label:"\u6807\u8BC6",name:"name",required:!0,disabled:Q!="",rules:[{required:!0}],placeholder:"\u6807\u8BC6Docker\u73AF\u5883\uFF0C\u53EA\u5141\u8BB8\u4E3A\u82F1\u6587\u6216\u662F\u6570\u5B57"}),(0,n.jsx)(l.Z,{tooltip:"\u8BBE\u7F6E\u5BBF\u4E3B\u673A\u7684Ip\u6216\u662F\u57DF\u540D\uFF0C\u7528\u4E8E\u901A\u8FC7\u7AEF\u53E3\u7684\u5F62\u5F0F\u8BBF\u95EE\u5BB9\u5668\u3002\u652F\u6301IpV4\u53CAIpV6",label:"\u5BB9\u5668\u7AEF\u53E3\u8BBF\u95EE\u57DF\u540D",name:"serverUrl",placeholder:"\u4F8B\u5982:192.168.1.25\u30012001:db8:1::2\u3001example.com"}),(0,n.jsx)(l.Z,{label:"Docker Api \u5730\u5740",name:"address",tooltip:"\u8FDE\u63A5\u8FDC\u7A0B Docker \u65F6\u8BF7\u5148\u5F00\u542F Api \u5730\u5740\u8BBF\u95EE\u3002",placeholder:"\u4F8B\u5982\uFF1Aunix:///var/run/docker.sock\u3001tcp://192.16.0.5:2375"}),(0,n.jsxs)(c.Z,{gap:80,children:[(0,n.jsx)(t.Z,{label:"\u542F\u7528TLS",name:"enableTLS",tooltip:"\u751F\u6210\u6559\u7A0B\u89C1\uFF1Ahttps://donknap.github.io/dpanel-docs/#/zh-cn/manual/remote"}),(0,n.jsx)(O.Z,{name:["enableComposePath","name"],children:function(u){var s=u.name;if(s!="local")return(0,n.jsx)(t.Z,{label:q("system.env.createEnableComposePath"),name:"enableComposePath",tooltip:"\u5F00\u542F\u72EC\u7ACBcompose\u914D\u7F6E\u540E\uFF0C\u5207\u6362\u8FDC\u7A0B docker \u5BA2\u6237\u7AEF\u65F6\u5C06\u53EA\u4F1A\u8BFB\u53D6\u8BE5\u73AF\u5883\u4E13\u5C5E\u76EE\u5F55\u4E0B\u7684 compose \u4EFB\u52A1"})}})]}),(0,n.jsx)(O.Z,{name:["enableComposePath","name"],children:function(u){var s=u.enableComposePath,a=u.name;if(s)return(0,n.jsx)(l.Z,{label:q("system.env.createComposePath"),name:"composePath",disabled:!0,fieldProps:{value:"/dpanel/compose/compose-".concat(a!=null?a:"")}})}}),(0,n.jsx)(O.Z,{name:["enableTLS"],children:function(u){var s=u.enableTLS;if(s)return(0,n.jsxs)(c.Z,{gap:20,justify:"start",children:[(0,n.jsx)(f.Z,{name:"tlsCa",label:"\u4E0A\u4F20\u5BA2\u6237\u7AEF\u8BC1\u4E66",children:(0,n.jsx)(m.Z,{title:"\u4E0A\u4F20CA\u8BC1\u4E66 ca.pem",onImport:function(o){var r;return(r=b.current)===null||r===void 0||r.setFieldValue("tlsCa",o),!0},onLoad:function(o){if(o.indexOf("CERTIFICATE")<0)throw new Error("\u5BFC\u5165ca.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})}),(0,n.jsx)(f.Z,{name:"tlsCert",label:" ",children:(0,n.jsx)(m.Z,{title:"\u4E0A\u4F20\u8BC1\u4E66\u6587\u4EF6 cert.pem",onImport:function(o){var r;return(r=b.current)===null||r===void 0||r.setFieldValue("tlsCert",o),!0},onLoad:function(o){if(o.indexOf("CERTIFICATE")<0)throw new Error("\u5BFC\u5165cert.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})}),(0,n.jsx)(f.Z,{label:" ",name:"tlsKey",children:(0,n.jsx)(m.Z,{title:"\u4E0A\u4F20\u5BC6\u94A5\u6587\u4EF6 key.pem",onImport:function(o){var r;return(r=b.current)===null||r===void 0||r.setFieldValue("tlsKey",o),!0},onLoad:function(o){if(o.indexOf("PRIVATE")<0)throw new Error("\u5BFC\u5165key.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})})]})}})]})]})}),h=x,I=e(8680),S=e(83403),H=e(86548),K=e(90078),X=e(78099),$=e(82346),_=e(42075),ae=e(96074),z=e(25593);function se(){var L=(0,i.useRef)(),J=(0,i.useRef)(),Y=(0,$.useSearchParams)(),k=M()(Y,2),U=k[0],ne=k[1],Z=(0,$.useModel)("@@initialState"),b=Z.initialState,te=Z.loading,w=Z.error,Q=Z.refresh,ee=Z.setInitialState,re=(0,i.useContext)(A.Z),q=re.message;return(0,n.jsx)(K._z,{header:{extra:[(0,n.jsx)(h,{ref:J,onFinish:R()(v()().mark(function W(){var u,s,a;return v()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!U.get("id")){r.next=5;break}return r.next=3,(0,d.vC)({name:(a=U.get("id"))!==null&&a!==void 0?a:"local"});case 3:return ne(""),r.abrupt("return");case 5:Q(),!((u=L.current)===null||u===void 0)&&u.reloadAndRest&&((s=L.current)===null||s===void 0||s.reloadAndRest());case 7:case"end":return r.stop()}},W)}))},"dockerEnvCreate")]},children:(0,n.jsx)(X.Z,{rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name"},{title:"\u540D\u79F0",dataIndex:"title"},{title:"\u5730\u5740",dataIndex:"address"},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(u,s,a,o,r){return(0,n.jsx)(_.Z,{split:(0,n.jsx)(ae.Z,{type:"vertical"}),children:(0,n.jsx)(z.Z.Link,{onClick:function(){var B;(B=J.current)===null||B===void 0||B.edit(s)},children:(0,n.jsx)(H.Z,{})},s.name)})}}],pagination:!1,request:R()(v()().mark(function W(){var u;return v()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,d.Kg)();case 2:return u=a.sent,U.get("id")&&u.data.list.map(function(o){if(o.name==U.get("id")){var r;(r=J.current)===null||r===void 0||r.edit(o)}}),a.abrupt("return",{data:u.data.list,total:u.data.list.length});case 5:case"end":return a.stop()}},W)})),search:!1,rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},actionRef:L,tableAlertOptionRender:function(u){var s=u.selectedRows,a=u.selectedRowKeys;return(0,n.jsxs)(_.Z,{size:16,children:[(0,n.jsx)(I.Z,{type:S.W6.DOCKER_ENV,selected:s,onSuccess:function(){var r,P;return!((r=L.current)===null||r===void 0)&&r.reloadAndRest&&((P=L.current)===null||P===void 0||P.reloadAndRest()),!0}}),(0,n.jsx)(C.Z,{danger:!0,type:"primary",action:function(){return s.find(function(r){return r.default})?(q.warning("\u9ED8\u8BA4\u73AF\u5883\u4E0D\u80FD\u5220\u9664"),!1):(0,d._g)({name:a})},onSuccess:function(){var r,P;return Q(),!((r=L.current)===null||r===void 0)&&r.reloadAndRest&&((P=L.current)===null||P===void 0||P.reloadAndRest()),!0},onError:function(){var r,P;return!((r=L.current)===null||r===void 0)&&r.reset&&((P=L.current)===null||P===void 0||P.reset()),!0},confirm:"notification.confirm.title",children:"\u6279\u91CF\u5220\u9664"})]})}})})}}}]);
