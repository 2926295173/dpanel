"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5050],{80821:function(x,_,n){n.d(_,{Z:function(){return M}});var v=n(97857),r=n.n(v),o=n(5574),i=n.n(o),h=n(24963),s=n(36146),P=n(86738),g=n(83062),S=n(28036),E=n(67294),c=n(85893);function M(e){var T=(0,E.useState)(!1),y=i()(T,2),d=y[0],O=y[1],l=(0,E.useContext)(h.Z),u=l.message,a=new s.Uo,t=function(){O(!0);var D=e.action();D instanceof Promise?D.then(function(f){if(O(!1),f){typeof e.onSuccess=="function"&&e.onSuccess(f);var m="";e.messageSuccess?typeof e.messageSuccess=="function"?m=e.messageSuccess(f):m=e.messageSuccess.indexOf("notification.")==0?a.format(e.messageSuccess):e.messageSuccess:m=a.format("notification.finish"),e.asynced?u.info(m):u.success(m)}}).catch(function(f){O(!1),typeof e.onError=="function"&&e.onError(f)}):O(!1)};return e.confirm?(0,c.jsx)(P.Z,r()(r()({style:{width:500},title:e.confirmTitle?e.confirmTitle:a.format("notification.title.tip"),description:typeof e.confirm=="string"&&e.confirm.indexOf("notification.")==0?a.format(e.confirm):e.confirm,onConfirm:t,okText:"Yes",cancelText:"No",onOpenChange:e.confirmOnOpenChange},e.confirmProps),{},{children:(0,c.jsx)(g.Z,{title:e.tips,children:(0,c.jsx)(S.ZP,{block:e.block,disabled:e.disabled,icon:!e.children&&d?void 0:e.icon,loading:d,danger:e.danger,type:e.type,children:e.children})})})):(0,c.jsx)(g.Z,{title:e.tips,children:(0,c.jsx)(S.ZP,{block:e.block,style:e.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:e.disabled,icon:!e.children&&d?void 0:e.icon,loading:d,onClick:t,danger:e.danger,type:e.type,children:e.children})})}},24963:function(x,_,n){var v=n(67294),r=(0,v.createContext)({});_.Z=r},85827:function(x,_,n){n.r(_),n.d(_,{default:function(){return O}});var v=n(15009),r=n.n(v),o=n(99289),i=n.n(o),h=n(80821),s=n(82346);function P(l){return g.apply(this,arguments)}function g(){return g=i()(r()().mark(function l(u){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,s.request)("/api/common/event/get-list",{method:"POST",data:u}));case 1:case"end":return t.stop()}},l)})),g.apply(this,arguments)}function S(l){return E.apply(this,arguments)}function E(){return E=i()(r()().mark(function l(u){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,s.request)("/api/common/event/prune",{method:"POST",data:u}));case 1:case"end":return t.stop()}},l)})),E.apply(this,arguments)}var c=n(36146),M=n(67255),e=n(90078),T=n(78099),y=n(67294),d=n(85893);function O(){var l=(0,y.useRef)();return(0,d.jsx)(e._z,{header:{extra:[(0,d.jsx)(h.Z,{action:function(){return S()},onSuccess:function(){var a,t;return!((a=l.current)===null||a===void 0)&&a.reloadAndRest&&((t=l.current)===null||t===void 0||t.reloadAndRest()),!0},onError:function(){var a,t;return!((a=l.current)===null||a===void 0)&&a.reset&&((t=l.current)===null||t===void 0||t.reset()),!0},confirm:"notification.confirm.title",danger:!0,type:"primary",children:c.FD.format("listManageClear")})]},children:(0,d.jsx)(T.Z,{search:!1,scroll:{x:"max-content"},columns:[{title:c.FD.format("listType"),ellipsis:!0,dataIndex:"type",width:200},{title:c.FD.format("listDescription"),search:!1,render:function(a,t,j,D){return(0,d.jsxs)(d.Fragment,{children:[t.action," ",t.message]})}},{title:c.FD.format("listCreatedAt"),ellipsis:!0,search:!1,dataIndex:"createdAt",width:200,render:function(a,t,j,D,f){return new Date(t.createdAt).toLocaleString()}}],rowKey:"id",request:function(){var u=i()(r()().mark(function a(t,j,D){var f,m,R;return r()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,P({page:(f=t.current)!==null&&f!==void 0?f:1,pageSize:(m=t.pageSize)!==null&&m!==void 0?m:10,type:t.type});case 2:return R=C.sent,C.abrupt("return",{data:R.data.list,success:!0,total:R.data.total});case 4:case"end":return C.stop()}},a)}));return function(a,t,j){return u.apply(this,arguments)}}(),pagination:(0,M.O)(),actionRef:l})})}},67255:function(x,_,n){n.d(_,{O:function(){return v},j:function(){return r}});function v(o){var i=localStorage.getItem("dpanel-pagesize");return i=="all"?!1:{defaultCurrent:o==null?void 0:o.page,showSizeChanger:!0,defaultPageSize:parseInt(i!=null?i:"20"),onChange:function(s,P){localStorage.setItem("dpanel-page-"+location.pathname.split("/").slice(-2).join("-"),"".concat(s))}}}function r(o){var i="dpanel-table-column-".concat(o),h={};if(localStorage.getItem(i)){var s;h=JSON.parse((s=localStorage.getItem(i))!==null&&s!==void 0?s:"{}")}return{defaultValue:h,onChange:function(g){localStorage.setItem("dpanel-table-column-".concat(o),JSON.stringify(g))}}}}}]);
