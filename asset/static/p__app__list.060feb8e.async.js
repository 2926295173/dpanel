"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4316],{16165:function(Ne,re,n){var ae=n(87462),M=n(1413),te=n(4942),E=n(45987),b=n(67294),L=n(93967),se=n.n(L),O=n(42550),fe=n(63017),k=n(41755),U=["className","component","viewBox","spin","rotate","tabIndex","onClick","children"],K=b.forwardRef(function(A,me){var w=A.className,N=A.component,F=A.viewBox,ue=A.spin,J=A.rotate,Z=A.tabIndex,ie=A.onClick,C=A.children,he=(0,E.Z)(A,U),X=b.useRef(),pe=(0,O.x1)(X,me);(0,k.Kp)(!!(N||C),"Should have `component` prop or `children`."),(0,k.C3)(X);var le=b.useContext(fe.Z),oe=le.prefixCls,q=oe===void 0?"anticon":oe,m=le.rootClassName,T=se()(m,q,(0,te.Z)({},"".concat(q,"-spin"),!!ue&&!!N),w),_=se()((0,te.Z)({},"".concat(q,"-spin"),!!ue)),D=J?{msTransform:"rotate(".concat(J,"deg)"),transform:"rotate(".concat(J,"deg)")}:void 0,ee=(0,M.Z)((0,M.Z)({},k.vD),{},{className:_,style:D,viewBox:F});F||delete ee.viewBox;var ne=function(){return N?b.createElement(N,ee,C):C?((0,k.Kp)(!!F||b.Children.count(C)===1&&b.isValidElement(C)&&b.Children.only(C).type==="use","Make sure that you provide correct `viewBox` prop (default `0 0 1024 1024`) to the icon."),b.createElement("svg",(0,ae.Z)({},ee,{viewBox:F}),C)):null},z=Z;return z===void 0&&ie&&(z=-1),b.createElement("span",(0,ae.Z)({role:"img"},he,{ref:pe,tabIndex:z,onClick:ie,className:T}),ne())});K.displayName="AntdIcon",re.Z=K},8680:function(Ne,re,n){var ae=n(15009),M=n.n(ae),te=n(64599),E=n.n(te),b=n(99289),L=n.n(b),se=n(9783),O=n.n(se),fe=n(5574),k=n.n(fe),U=n(67294),K=n(184),A=n(38345),me=n(97269),w=n(97321),N=n(97462),F=n(64317),ue=n(5966),J=n(86615),Z=n(68602),ie=n(28036),C=n(83403),he=n(24963),X=n(1699),pe=n(29177),le=n(45742),oe=n(43425),q=n(44349),m=n(85893),T=(0,U.forwardRef)(function(_,D){var ee=(0,U.useState)(!1),ne=k()(ee,2),z=ne[0],G=ne[1],a=(0,U.useRef)(),Se=(0,U.useContext)(he.Z),Be=Se.message,be=(0,U.useState)([]),Ee=k()(be,2),Re=Ee[0],_e=Ee[1],Ie=O()(O()(O()(O()(O()({},C.W6.CONTAINER,"Id"),C.W6.APPSTORE,"name"),C.W6.COMPOSE,"name"),C.W6.REGISTRY,"serverAddress"),C.W6.DOCKER_ENV,"name"),Le=O()(O()(O()(O()(O()({},C.W6.CONTAINER,"name"),C.W6.APPSTORE,"name"),C.W6.COMPOSE,"name"),C.W6.REGISTRY,"title"),C.W6.DOCKER_ENV,"title"),Q=Ie[_.type],Ze=Le[_.type],Fe=_.selected.map(function(y){return y[Ie[_.type]]});return U.useEffect(function(){z&&((0,Z.dP)({permission:{uri:_.type,key:Q,value:Fe}}).then(function(y){var f;(f=a.current)===null||f===void 0||f.setFieldValue("list",Object.keys(y.data.list).map(function(R){return{name:R,type:y.data.list[R].type,users:y.data.list[R].users}}))}),(0,Z.lE)().then(function(y){var f,R=(f=y.data)===null||f===void 0||(f=f.list)===null||f===void 0?void 0:f.map(function(g){return{label:g.username,value:g.username}});_e(R)}))},[z]),(0,m.jsx)(X.u,{access:["canSeeEnableEe","canSeeFounder","canSeeManage"],children:(0,m.jsxs)(K.a,{name:"create",title:"\u6570\u636E\u6743\u9650\u8BBE\u7F6E",open:z,onOpenChange:function(f){if(!f){var R;(R=a.current)===null||R===void 0||R.resetFields()}G(f)},drawerProps:{forceRender:!0},formRef:a,trigger:(0,m.jsx)(ie.ZP,{icon:(0,m.jsx)(pe.Z,{}),children:"\u6570\u636E\u6743\u9650"}),onFinish:function(){var y=L()(M()().mark(function f(R){var g,P,I;return M()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:g=E()(R.list),j.prev=1,g.s();case 3:if((P=g.n()).done){j.next=9;break}return I=P.value,j.next=7,(0,Z.Db)({usernames:I.users,permissionType:I.type,permission:{uri:_.type,key:Q,showKey:Ze,value:[I.name]}});case 7:j.next=3;break;case 9:j.next=14;break;case 11:j.prev=11,j.t0=j.catch(1),g.e(j.t0);case 14:return j.prev=14,g.f(),j.finish(14);case 17:Be.success("\u6743\u9650\u8BBE\u7F6E\u6210\u529F"),G(!1),_.onSuccess();case 20:case"end":return j.stop()}},f,null,[[1,11,14,17]])}));return function(f){return y.apply(this,arguments)}}(),children:[(0,m.jsxs)(A.Z,{ghost:!0,title:(0,m.jsx)(le.Z,{}),subTitle:"\u6279\u91CF\u8BBE\u7F6E",children:[(0,m.jsx)(me.A.Item,{name:"type",style:{marginBottom:0},children:(0,m.jsxs)(w.Z.Group,{defaultValue:"admin",onChange:function(f){var R,g,P=(R=a.current)===null||R===void 0?void 0:R.getFieldValue("list");P.forEach(function(I){I.type=f,I.users=[]}),(g=a.current)===null||g===void 0||g.setFieldValue("list",P)},children:[(0,m.jsx)(w.Z,{style:{width:240},title:"\u7BA1\u7406\u5458",description:"\u4EC5\u7BA1\u7406\u5458\u53EF\u89C1",value:"admin"}),(0,m.jsx)(w.Z,{style:{width:240},title:"\u6307\u5B9A\u7528\u6237",description:"\u4EC5\u9009\u4E2D\u7528\u6237\u53EF\u89C1",value:"restricted"}),(0,m.jsx)(w.Z,{style:{width:240},title:"\u516C\u5171",description:"\u6240\u6709\u4EBA\u53EF\u89C1",value:"public"})]})}),(0,m.jsx)(N.Z,{name:["type"],children:function(f){var R=f.type;if(R==="restricted")return(0,m.jsx)(F.Z,{mode:"multiple",name:"usernames",label:"\u9009\u62E9\u7528\u6237",onChange:function(P){var I,W,j=(I=a.current)===null||I===void 0?void 0:I.getFieldValue("list");j.forEach(function($){$.users=P}),(W=a.current)===null||W===void 0||W.setFieldValue("list",j)},rules:[{required:!0}],request:L()(M()().mark(function g(){var P,I,W;return M()().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(!(Re.length>0)){$.next=2;break}return $.abrupt("return",Re);case 2:return $.next=4,(0,Z.lE)();case 4:return I=$.sent,W=(P=I.data)===null||P===void 0||(P=P.list)===null||P===void 0?void 0:P.map(function(h){return{label:h.username,value:h.username}}),_e(W),$.abrupt("return",W);case 8:case"end":return $.stop()}},g)}))})}})]}),(0,m.jsx)(A.Z,{ghost:!0,title:(0,m.jsx)(oe.Z,{}),subTitle:"\u6570\u636E\u6743\u9650\u8BBE\u7F6E",children:(0,m.jsx)(q.Z,{name:"list",hideCopyButton:!0,gap:10,items:[{name:"name",label:"\u540D\u79F0",render:function(f,R,g){var P=g.getCurrentRowData();return(0,m.jsx)(ue.Z,{disabled:!0,label:"\u540D\u79F0",width:"sm",name:"name"})}},{name:"type",label:"\u6743\u9650\u7C7B\u578B",render:function(f,R,g){var P=g.getCurrentRowData();return(0,m.jsx)(J.Z.Group,{label:"\u6743\u9650\u7C7B\u578B",name:"type",radioType:"button",options:[{label:"\u7BA1\u7406\u5458",value:"admin"},{label:"\u516C\u5171",value:"public"},{label:"\u6307\u5B9A\u7528\u6237",value:"restricted"}]})}},{name:"users",label:"\u5173\u8054\u7528\u6237",render:function(f,R,g){return(0,m.jsx)(N.Z,{name:["type"],children:function(I){var W=I.type;if(W=="restricted")return(0,m.jsx)(F.Z,{width:"sm",mode:"tags",name:"users",label:"\u5173\u8054\u7528\u6237",options:Re})}})}}]})})]})})});re.Z=T},42939:function(Ne,re,n){n.r(re),n.d(re,{default:function(){return $}});var ae=n(64599),M=n.n(ae),te=n(15009),E=n.n(te),b=n(99289),L=n.n(b),se=n(5574),O=n.n(se),fe=n(78099),k=n(97269),U=n(62370),K=n(42075),A=n(25593),me=n(40411),w=n(34041),N=n(96074),F=n(83062),ue=n(84567),J=n(50136),Z=n(82346),ie=n(43425),C=n(45742),he=n(89035),X=n(74842),pe=n(87784),le=n(33160),oe=n(30159),q=n(94359),m=n(78498),T=n(60335),_=n(80821),D=n(67294),ee=n(62597),ne=n(87662),z=n(16165),G=n(5251),a=n(85893),Se=function(){return(0,a.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18403",children:(0,a.jsx)("path",{d:"M224 192v64H96v576h128v64h64v-64h64v64h64v-64h64v64h64v-64h64v64h64v-64h64v64h64v-64h128V256h-128V192h-64v64h-64V192h-64v64h-64V192h-64v64h-64V192h-64v64H288V192z m-64 128h704v448H160z m96 64c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32zM256 512c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m512 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32zM256 640c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z","p-id":"18404"})})},Be=function(){return(0,a.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18546",children:(0,a.jsx)("path",{d:"M64 224v576h416v-32c0-17.76 14.24-32 32-32 17.76 0 32 14.24 32 32v32h416V224z m64 64h768v288H128z m64 64v160h192v-160z m224 0v160h192v-160z m224 0v160h192v-160zM256 416h64v32H256z m224 0h64v32h-64z m224 0h64v32h-64zM128 640h768v96h-300.992c-14.144-35.52-42.752-64-83.008-64-40.256 0-68.864 28.48-83.008 64H128z","p-id":"18547"})})};function be(h){var ge,l,Ce,de,je,Oe;return(0,a.jsx)(a.Fragment,{children:h.value&&h.value.memory&&h.value.memory.out>0?(0,a.jsxs)(K.Z,{children:[(0,a.jsxs)(F.Z,{title:"Cpu: ".concat((ge=h.value)===null||ge===void 0?void 0:ge.cpu.toFixed(2),"%"),children:[(0,a.jsx)(z.Z,{component:Se,style:{width:15,lineHeight:20}})," ","".concat((l=h.value)===null||l===void 0?void 0:l.cpu.toFixed(2),"%")]}),(0,a.jsxs)(F.Z,{title:"\u5185\u5B58: ".concat((0,G.FI)((Ce=h.value)===null||Ce===void 0?void 0:Ce.memory.in)," / ").concat((0,G.FI)((de=h.value)===null||de===void 0?void 0:de.memory.out)),children:[(0,a.jsx)(z.Z,{component:Be,style:{width:15,lineHeight:20}})," ","".concat((((je=h.value)===null||je===void 0?void 0:je.memory.in)/((Oe=h.value)===null||Oe===void 0?void 0:Oe.memory.out)*100).toFixed(2),"%")]})]}):""})}var Ee=n(67255),Re=n(37413),_e=n(68714),Ie=n(57716),Le=n(83403),Q=n(1699),Ze=n(8680),Fe=n(20578),y=n(24963),f=n(99861),R=n(78914),g=n(29453),P=(0,D.forwardRef)(function(h,ge){var l=(0,D.useRef)(),Ce=(0,D.useState)(""),de=O()(Ce,2),je=de[0],Oe=de[1],nn=(0,D.useState)(),ze=O()(nn,2),Y=ze[0],rn=ze[1],an=(0,D.useState)(1),Ve=O()(an,2),tn=Ve[0],sn=Ve[1],un=(0,D.useState)([]),ke=O()(un,2),De=ke[0],ln=ke[1],He=(0,D.useRef)(),we=(0,D.useRef)(),Ae=(0,Z.useAccess)(),on=(0,D.useState)(),Ge=O()(on,2),ce=Ge[0],dn=Ge[1],Qe=(0,D.useRef)(),Te=(0,D.useRef)(),Ye=(0,D.useRef)(),cn=(0,D.useState)([]),Je=O()(cn,2),ye=Je[0],vn=Je[1],fn=(0,D.useContext)(y.Z),mn=fn.lang;return(0,D.useImperativeHandle)(ge,function(){return{reload:function(){var u,s;!((u=l.current)===null||u===void 0)&&u.reloadAndRest&&((s=l.current)===null||s===void 0||s.reloadAndRest())}}}),(0,D.useEffect)(function(){(0,ne.K3)().then(function(v){var u;Oe((u=v.data.serverUrl)!==null&&u!==void 0?u:"")}),!Ae.canSeeEnableCe&&(0,Fe.ql)().then(function(v){dn(v.data)}),(0,g.e1)().then(function(v){vn(v.data.list)})},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_e.Z,{ref:He,onFinish:function(){var u,s;!((u=l.current)===null||u===void 0)&&u.reloadAndRest&&((s=l.current)===null||s===void 0||s.reloadAndRest())},onUpgradeFinish:function(){var u,s;!((u=l.current)===null||u===void 0)&&u.reloadAndRest&&((s=l.current)===null||s===void 0||s.reloadAndRest())}}),(0,a.jsx)(Ie.Z,{ref:we}),(0,a.jsx)(f.Z,{ref:Te,finishAutoHide:!0}),(0,a.jsx)(R.Z,{ref:Ye}),(0,a.jsx)(fe.Z,{actionRef:l,scroll:{x:"max-content"},columns:[{key:"title",title:"\u540D\u79F0",dataIndex:"siteTitle",sorter:function(u,s){return u.Names[0].localeCompare(s.Names[0])},sortDirections:["descend","ascend"],render:function(u,s,S,d,r){var t=(0,G.fi)(s.Names[0],"/");Y!=null&&Y.siteList&&Y.siteList.map(function(i){i.containerInfo&&i.containerInfo.Id==s.Id&&i.siteTitle!=""&&(t=i.siteTitle)}),s.Labels&&s.Labels["com.dpanel.container.title"]&&(t=s.Labels["com.dpanel.container.title"]);var o=ce&&ce.container?ce.container.find(function(i){return i.id==s.Id}):!1;return(0,a.jsxs)(K.Z,{direction:"vertical",children:[(0,a.jsx)(A.Z.Link,{onClick:function(){var p;(p=He.current)===null||p===void 0||p.show(s.Id)},children:t}),!Ae.canSeeEnableCe&&o&&(0,a.jsx)(me.Z,{count:"new"})]})}},{title:"\u6807\u7B7E",hidden:!0,dataIndex:"tag",renderFormItem:function(u,s,S,d){return(0,a.jsx)(w.Z,{options:ye&&ye.map(function(r){return{lable:r.tag,value:r.tag}})})}},{key:"ports",title:(0,a.jsx)(m.Z,{title:"\u5BF9\u5916\u8BBF\u95EE",help:"\u5BF9\u5916\u66B4\u9732\u7AEF\u53E3\u65F6\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7\u670D\u52A1\u5668ip(\u516C\u7F51,\u5185\u7F51,127.0.0.1)\u52A0\u7AEF\u53E3\u7684\u5F62\u5F0F\u8FDB\u884C\u8BBF\u95EE\u3002\u5982\u679C\u9700\u8981\u7ED1\u5B9A\u57DF\u540D,\u8BF7\u6DFB\u52A0\u7AD9\u70B9\u7ED1\u5B9A\u57DF\u540D\u8F6C\u53D1."}),dataIndex:"ports",width:130,search:!1,render:function(u,s,S,d){var r=[],t=[],o=[];return s!=null&&s.Ports&&s.Ports.map(function(i,p){i.PublicPort?r.push(i):t.push(i)}),Y!=null&&Y.domainList&&Y.domainList.map(function(i,p){s.Names.indexOf(i.containerId)>-1&&o.push(i.setting.enableSSL?"https://"+i.serverName:"http://"+i.serverName)}),(0,a.jsx)(Re.Z,{publicPort:r,privatePort:t,domain:o,serverIp:je})}},{title:"\u5360\u7528\u7387",width:200,search:!1,key:"usage",sorter:function(u,s){var S=De.find(function(r){return u.Id.startsWith(r.container)}),d=De.find(function(r){return s.Id.startsWith(r.container)});return JSON.stringify(S).localeCompare(JSON.stringify(d))},render:function(u,s,S,d,r){if(!De||De.length<=0)return"";var t={};return De.filter(function(o){s.Id.indexOf(o.container)==0&&(t=o)}),(0,a.jsx)(be,{value:t})}},{title:"\u8FD0\u884C\u72B6\u6001",key:"status",dataIndex:["container","status"],search:!1,width:130,render:function(u,s,S,d){return s.Status.indexOf("(healthy)")>-1?s.State="healthy":s.Status.indexOf("(unhealthy)")>-1&&(s.State="unhealthy"),[(0,a.jsx)("div",{children:(0,a.jsx)(q.Z,{status:s.State,message:{content:s.Status,placement:"top"}})},"status")]}},{title:"\u6240\u5C5E\u955C\u50CF",key:"image",search:!1,width:150,render:function(u,s,S,d){return(0,a.jsx)("span",{style:{wordBreak:"break-word"},children:(0,a.jsx)(A.Z.Link,{onClick:function(){var t;(t=Ye.current)===null||t===void 0||t.show(s.Image)},children:s.Image})})}},{title:"\u521B\u5EFA\u65E5\u671F",width:170,dataIndex:["Created"],render:function(u,s,S,d,r){return(0,G.ZM)(s.Created*1e3)},sorter:function(u,s){return new Date(u.Created*1e3).toISOString().localeCompare(new Date(s.Created*1e3).toISOString())},search:!1,sortDirections:["descend","ascend"]},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:100,fixed:"right",hidden:!Ae.canSeeContainerListManage,render:function(u,s,S,d){return(0,a.jsxs)(K.Z,{split:(0,a.jsx)(N.Z,{type:"vertical"}),children:[(0,a.jsx)(Z.Link,{to:"/app/detail/edit/"+s.Id,children:(0,a.jsx)(F.Z,{title:"\u7BA1\u7406\u5BB9\u5668",children:(0,a.jsx)(ie.Z,{})})},"edit"),(0,a.jsx)(Z.Link,{to:"/app/detail/log/".concat(s.Id,"?tab=log"),children:(0,a.jsx)(F.Z,{title:"\u8FD0\u884C\u65E5\u5FD7",children:(0,a.jsx)(C.Z,{})})},"log"),(s.State=="running"||s.State=="healthy")&&(0,a.jsx)(A.Z.Link,{onClick:function(){var t;(t=we.current)===null||t===void 0||t.show(s.Id)},children:(0,a.jsx)(he.Z,{})},"console")]})}}],rowKey:"Id",request:function(){var v=L()(E()().mark(function u(s,S,d){var r,t,o,i,p,e,x;return E()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,(0,T.IE)({tag:s.title,siteTitle:s.title,md5:s.Id});case 2:return t=H.sent,o="",i=[],h.searchPrefix&&(o=h.searchPrefix),h.searchNameList&&(i=h.searchNameList),s.tag&&ye&&(i=(p=(e=ye.find(function(B){return B.tag==s.tag}))===null||e===void 0?void 0:e.item.map(function(B){var V;return(V=B.name)!==null&&V!==void 0?V:""}))!==null&&p!==void 0?p:[]),x=[],o!=""?t.data.list.map(function(B){B.Names.map(function(V){V.startsWith("/"+o)&&x.push(B)})}):i&&i.length>0?t.data.list.map(function(B){B.Names.map(function(V){i.indexOf(V)>-1&&x.push(B)})}):x=t.data.list,rn(t.data),sn(tn+1),(0,ne.Cz)({follow:!1}).then(function(B){ln(B.data.list)}),H.abrupt("return",{data:(r=x)!==null&&r!==void 0?r:[],success:!0,total:t.data.list.length});case 14:case"end":return H.stop()}},u)}));return function(u,s,S){return v.apply(this,arguments)}}(),rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},tableAlertOptionRender:function(u){var s=u.selectedRowKeys,S=u.selectedRows;return(0,a.jsxs)(K.Z,{size:16,wrap:!0,children:[(0,a.jsx)(Ze.Z,{type:Le.W6.CONTAINER,selected:S,onSuccess:function(){var r,t;return!((r=l.current)===null||r===void 0)&&r.reloadAndRest&&((t=l.current)===null||t===void 0||t.reloadAndRest()),!0}},"dataPermission"),(0,a.jsxs)(Q.u,{access:"canSeeContainerList",space:{size:16,wrap:!0},children:[(0,a.jsx)(_.Z,{icon:(0,a.jsx)(X.Z,{}),action:L()(E()().mark(function d(){var r,t,o,i;return E()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=M()(s),e.prev=1,r.s();case 3:if((t=r.n()).done){e.next=10;break}return o=t.value,e.next=7,(0,T.IW)({md5:o,operate:"start"});case 7:i=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},d,null,[[1,12,15,18]])})),onSuccess:function(){var r,t;return!((r=l.current)===null||r===void 0)&&r.reloadAndRest&&((t=l.current)===null||t===void 0||t.reloadAndRest()),!0},children:"\u542F\u52A8"}),(0,a.jsx)(_.Z,{action:L()(E()().mark(function d(){var r,t,o,i;return E()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=M()(s),e.prev=1,r.s();case 3:if((t=r.n()).done){e.next=10;break}return o=t.value,e.next=7,(0,T.IW)({md5:o,operate:"stop"});case 7:i=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},d,null,[[1,12,15,18]])})),icon:(0,a.jsx)(pe.Z,{}),onSuccess:function(){var r,t;return!((r=l.current)===null||r===void 0)&&r.reloadAndRest&&((t=l.current)===null||t===void 0||t.reloadAndRest()),!0},children:"\u505C\u6B62"}),(0,a.jsx)(_.Z,{action:L()(E()().mark(function d(){var r,t,o,i;return E()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=M()(s),e.prev=1,r.s();case 3:if((t=r.n()).done){e.next=10;break}return o=t.value,e.next=7,(0,T.IW)({md5:o,operate:"restart"});case 7:i=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},d,null,[[1,12,15,18]])})),onSuccess:function(){var r,t;return!((r=l.current)===null||r===void 0)&&r.reloadAndRest&&((t=l.current)===null||t===void 0||t.reloadAndRest()),!0},icon:(0,a.jsx)(le.Z,{}),children:"\u91CD\u542F"}),(0,a.jsx)(_.Z,{action:L()(E()().mark(function d(){var r,t,o,i;return E()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=M()(s),e.prev=1,r.s();case 3:if((t=r.n()).done){e.next=10;break}return o=t.value,e.next=7,(0,T.IW)({md5:o,operate:"pause"});case 7:i=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},d,null,[[1,12,15,18]])})),onSuccess:function(){var r,t;return!((r=l.current)===null||r===void 0)&&r.reloadAndRest&&((t=l.current)===null||t===void 0||t.reloadAndRest()),!0},icon:(0,a.jsx)(oe.Z,{}),children:"\u6682\u505C"}),(0,a.jsx)(_.Z,{action:L()(E()().mark(function d(){var r,t,o,i;return E()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=M()(s),e.prev=1,r.s();case 3:if((t=r.n()).done){e.next=10;break}return o=t.value,e.next=7,(0,T.IW)({md5:o,operate:"unpause"});case 7:i=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}},d,null,[[1,12,15,18]])})),onSuccess:function(){var r,t;return!((r=l.current)===null||r===void 0)&&r.reloadAndRest&&((t=l.current)===null||t===void 0||t.reloadAndRest()),!0},icon:(0,a.jsx)(X.Z,{}),children:"\u6062\u590D"})]}),(0,a.jsx)(N.Z,{}),(0,a.jsx)(Q.u,{showProTips:!0,access:["canSeeEnableCe","canSeeContainerListManageOp"],children:function(r){var t=r.canSeeEnableCe,o=r.canSeeContainerListManageOp;return o&&(0,a.jsx)(_.Z,{disabled:t,type:"primary",action:L()(E()().mark(function i(){var p,e,x,ve,H,B,V,Pe,Xe,We,$e,xe,qe;return E()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:x=[],ve=M()(S),c.prev=2,B=E()().mark(function hn(){var Ue,en,Me;return E()().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:en=H.value,Me=ce==null||(Ue=ce.container)===null||Ue===void 0?void 0:Ue.find(function(pn){return pn.id==en.Id}),Me&&!x.includes(Me.image)&&x.push(Me.image);case 3:case"end":return Ke.stop()}},hn)}),ve.s();case 5:if((H=ve.n()).done){c.next=9;break}return c.delegateYield(B(),"t0",7);case 7:c.next=5;break;case 9:c.next=14;break;case 11:c.prev=11,c.t1=c.catch(2),ve.e(c.t1);case 14:return c.prev=14,ve.f(),c.finish(14);case 17:if(x){c.next=19;break}return c.abrupt("return",!1);case 19:return c.next=21,(p=Te.current)===null||p===void 0?void 0:p.pull(x);case 21:(e=Te.current)===null||e===void 0||e.finish(),Pe=M()(S),c.prev=23,Pe.s();case 25:if((Xe=Pe.n()).done){c.next=32;break}return qe=Xe.value,c.next=29,(0,T.RF)({md5:(We=qe.Id)!==null&&We!==void 0?We:"",imageTag:"",enableBak:($e=(xe=Qe.current)===null||xe===void 0?void 0:xe.getFieldValue("enableBak"))!==null&&$e!==void 0?$e:!1});case 29:V=c.sent;case 30:c.next=25;break;case 32:c.next=37;break;case 34:c.prev=34,c.t2=c.catch(23),Pe.e(c.t2);case 37:return c.prev=37,Pe.f(),c.finish(37);case 40:return c.abrupt("return",V);case 41:case"end":return c.stop()}},i,null,[[2,11,14,17],[23,34,37,40]])})),onSuccess:function(){var p,e;return!((p=l.current)===null||p===void 0)&&p.reloadAndRest&&((e=l.current)===null||e===void 0||e.reloadAndRest()),!0},confirm:(0,a.jsxs)(K.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,a.jsx)(A.Z.Text,{children:mn("app.detail.upgradeConfirm")}),(0,a.jsx)(k.A,{formRef:Qe,submitter:!1,layout:"inline",children:(0,a.jsx)(U.Z,{name:"enableBak",valuePropName:"checked",children:(0,a.jsx)(ue.Z,{children:"\u5907\u4EFD\u65E7\u5BB9\u5668\uFF1F"})})})]}),children:"\u6279\u91CF\u5347\u7EA7"})}}),(0,a.jsx)(Q.u,{access:"canSeeContainerListManageDelete",children:(0,a.jsx)(_.Z,{danger:!0,type:"primary",action:L()(E()().mark(function d(){var r,t,o,i;return E()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=M()(s),e.prev=1,t.s();case 3:if((o=t.n()).done){e.next=10;break}return i=o.value,e.next=7,(0,ee.Ct)({md5:i,deleteImage:!1,deleteVolume:!1});case 7:r=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t.e(e.t0);case 15:return e.prev=15,t.f(),e.finish(15);case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}},d,null,[[1,12,15,18]])})),onSuccess:function(){var r,t;return!((r=l.current)===null||r===void 0)&&r.reloadAndRest&&((t=l.current)===null||t===void 0||t.reloadAndRest()),!0},onError:function(){var r,t;return!((r=l.current)===null||r===void 0)&&r.reset&&((t=l.current)===null||t===void 0||t.reset()),!0},confirm:"notification.confirm.title",children:"\u6279\u91CF\u5220\u9664"})})]})},pagination:h.showLite?!1:(0,Ee.O)(),search:h.showLite?!1:{collapsed:!1},tableExtraRender:function(){return!h.showLite&&Ae.canSeeContainerListManageCreate&&(0,a.jsx)(J.Z,{mode:"horizontal",selectedKeys:["list"],items:[{label:(0,a.jsx)(Z.Link,{to:"/app/list",replace:!0,children:"\u5BB9\u5668\u5217\u8868"}),key:"list"},{label:(0,a.jsx)(Z.Link,{to:"/app/list/recycle",replace:!0,children:"\u56DE\u6536\u7AD9"}),key:"recycle"}]})},toolBarRender:h.showLite?!1:function(){return[(0,a.jsx)(Q.u,{access:"canSeeContainerListManageDelete",children:(0,a.jsx)(_.Z,{action:function(){return(0,T.KK)()},onSuccess:function(){var u,s;return!((u=l.current)===null||u===void 0)&&u.reloadAndRest&&((s=l.current)===null||s===void 0||s.reloadAndRest()),!0},onError:function(){var u,s;return!((u=l.current)===null||u===void 0)&&u.reset&&((s=l.current)===null||s===void 0||s.reset()),!0},confirm:"notification.confirm.title",children:"\u6E05\u7406\u5DF2\u505C\u6B62\u5BB9\u5668"})},"clear")]},columnsState:(0,Ee.j)("app-list")})]})}),I=P,W=n(90078),j=n(28036);function $(){return(0,a.jsx)(W._z,{header:{extra:[(0,a.jsx)(Q.u,{access:"canSeeContainerListManageCreate",children:(0,a.jsx)(Z.Link,{to:"/app/create/image",children:(0,a.jsx)(j.ZP,{type:"primary",children:"\u521B\u5EFA\u5BB9\u5668"})})},"create")]},children:(0,a.jsx)(I,{},"appList")})}}}]);
