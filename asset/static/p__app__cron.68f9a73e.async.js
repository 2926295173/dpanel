"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3246],{98165:function(H,R,e){e.d(R,{Z:function(){return A}});var x=e(87462),o=e(67294),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},v=_,g=e(84089),y=function(t,P){return o.createElement(g.Z,(0,x.Z)({},t,{ref:P,icon:v}))},E=o.forwardRef(y),A=E},5966:function(H,R,e){var x=e(97685),o=e(1413),_=e(45987),v=e(21770),g=e(72723),y=e(55241),E=e(97435),A=e(67294),d=e(34692),t=e(85893),P=["fieldProps","proFieldProps"],S=["fieldProps","proFieldProps"],T="text",p=function(s){var u=s.fieldProps,r=s.proFieldProps,D=(0,_.Z)(s,P);return(0,t.jsx)(d.Z,(0,o.Z)({valueType:T,fieldProps:u,filedConfig:{valueType:T},proFieldProps:r},D))},M=function(s){var u=(0,v.Z)(s.open||!1,{value:s.open,onChange:s.onOpenChange}),r=(0,x.Z)(u,2),D=r[0],X=r[1];return(0,t.jsx)(g.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(k){var N,a=k.getFieldValue(s.name||[]);return(0,t.jsx)(y.Z,(0,o.Z)((0,o.Z)({getPopupContainer:function(l){return l&&l.parentNode?l.parentNode:l},onOpenChange:function(l){return X(l)},content:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[(N=s.statusRender)===null||N===void 0?void 0:N.call(s,a),s.strengthText?(0,t.jsx)("div",{style:{marginTop:10},children:(0,t.jsx)("span",{children:s.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},s.popoverProps),{},{open:D,children:s.children}))}})},h=function(s){var u=s.fieldProps,r=s.proFieldProps,D=(0,_.Z)(s,S),X=(0,A.useState)(!1),Y=(0,x.Z)(X,2),k=Y[0],N=Y[1];return u!=null&&u.statusRender&&D.name?(0,t.jsx)(M,{name:D.name,statusRender:u==null?void 0:u.statusRender,popoverProps:u==null?void 0:u.popoverProps,strengthText:u==null?void 0:u.strengthText,open:k,onOpenChange:N,children:(0,t.jsx)("div",{children:(0,t.jsx)(d.Z,(0,o.Z)({valueType:"password",fieldProps:(0,o.Z)((0,o.Z)({},(0,E.Z)(u,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(i){var l;u==null||(l=u.onBlur)===null||l===void 0||l.call(u,i),N(!1)},onClick:function(i){var l;u==null||(l=u.onClick)===null||l===void 0||l.call(u,i),N(!0)}}),proFieldProps:r,filedConfig:{valueType:T}},D))})}):(0,t.jsx)(d.Z,(0,o.Z)({valueType:"password",fieldProps:u,proFieldProps:r,filedConfig:{valueType:T}},D))},c=p;c.Password=h,c.displayName="ProFormComponent",R.Z=c},90672:function(H,R,e){var x=e(1413),o=e(45987),_=e(67294),v=e(34692),g=e(85893),y=["fieldProps","proFieldProps"],E=function(d,t){var P=d.fieldProps,S=d.proFieldProps,T=(0,o.Z)(d,y);return(0,g.jsx)(v.Z,(0,x.Z)({ref:t,valueType:"textarea",fieldProps:P,proFieldProps:S},T))};R.Z=_.forwardRef(E)},80821:function(H,R,e){e.d(R,{Z:function(){return d}});var x=e(5574),o=e.n(x),_=e(24963),v=e(86738),g=e(14726),y=e(83062),E=e(67294),A=e(85893);function d(t){var P=(0,E.useState)(!1),S=o()(P,2),T=S[0],p=S[1],M=(0,E.useContext)(_.Z),h=M.lang,c=M.notice,n=M.message,s=function(){p(!0),t.action().then(function(r){if(p(!1),typeof t.onSuccess=="function"&&t.onSuccess(r),t.messageSuccess){var D="";typeof t.messageSuccess=="function"?D=t.messageSuccess(r):D=t.messageSuccess,D.indexOf(".")>-1&&(D=h(D)),t.asynced?n.info(D):n.success(D)}}).catch(function(r){p(!1),typeof t.onError=="function"&&t.onError(r)})};return t.confirm?(0,A.jsx)(v.Z,{style:{width:500},title:t.confirmTitle?t.confirmTitle:h("notification.title.tip"),description:t.confirm,onConfirm:s,okText:"Yes",cancelText:"No",children:(0,A.jsx)(g.ZP,{disabled:t.disabled,icon:t.icon,loading:T,danger:t.danger,type:t.type,children:t.children})}):(0,A.jsx)(y.Z,{title:t.tips,children:(0,A.jsx)(g.ZP,{disabled:t.disabled,icon:t.icon,loading:T,onClick:s,danger:t.danger,type:t.type,children:t.children})})}},44349:function(H,R,e){var x=e(97857),o=e.n(x),_=e(17186),v=e(5966),g=e(86250),y=e(67294),E=e(85893),A=(0,y.forwardRef)(function(d,t){var P=(0,y.useRef)();(0,y.useImperativeHandle)(t,function(){return{addItem:function(p,M){var h,c=(h=P.current)===null||h===void 0?void 0:h.getList(),n=!1;if(c==null||c.map(function(u){if(u.name==p){n=!0;return}}),!n){var s;(s=P.current)===null||s===void 0||s.add({name:p,value:M})}},clear:function(){var p;(p=P.current)===null||p===void 0||(p=p.getList())===null||p===void 0||p.map(function(M,h){var c;(c=P.current)===null||c===void 0||c.remove(h)})}}});var S={};return d.hideCopyButton===!0&&(S.copyIconProps=!1),d.hideDeleteButton===!0&&(S.deleteIconProps=!1),(0,E.jsx)(_.u,o()(o()({label:d.label,name:d.name,actionRef:P,creatorButtonProps:d.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(d.label?d.label:d.name)}:!1,min:d.min?d.min:0},S),{},{children:function(p,M,h){return(0,E.jsx)(g.Z,{justify:d.justify,gap:d.gap,children:d.items.map(function(c){return c.render?(0,E.jsx)("div",{children:c.render&&c.render(p,M,h)},"".concat(d.name,"-").concat(c.name,"-").concat(p.key)):(0,E.jsx)(v.Z,{width:c.width,name:c.name,label:c.label,required:c.required,rules:[{required:c.required}],disabled:c.disabled,placeholder:c.placeholder},"".concat(d.name,"-").concat(c.name,"-").concat(p.key))})})}}))});R.Z=A},24963:function(H,R,e){var x=e(67294),o=(0,x.createContext)({});R.Z=o},86041:function(H,R,e){e.r(R),e.d(R,{default:function(){return I}});var x=e(15009),o=e.n(x),_=e(99289),v=e.n(_),g=e(5574),y=e.n(g),E=e(24963),A=e(15078),d=e(184),t=e(5966),P=e(64317),S=e(97462),T=e(90672),p=e(54006),M=e(14726),h=e(67294),c=e(44349),n=e(85893),s=(0,h.forwardRef)(function(F,Q){var b=(0,h.useState)(!1),B=y()(b,2),O=B[0],K=B[1],w=(0,h.useRef)(),m=(0,h.useContext)(E.Z),W=m.message,C=m.notice,L=(0,p.useSearchParams)(),q=y()(L,2),ee=q[0],ne=q[1];return(0,h.useImperativeHandle)(Q,function(){return{edit:function(Z){var j;(j=w.current)===null||j===void 0||j.setFieldsValue({title:Z.title,name:Z.name,type:Z.setting.type,url:Z.setting.url,id:Z.id}),K(!0)}}}),(0,h.useEffect)(function(){ee.get("op")=="create"&&K(!0)},[]),(0,n.jsxs)(d.a,{name:"create",title:"\u6DFB\u52A0\u8BA1\u5212\u4EFB\u52A1",open:O,onOpenChange:function(Z){K(Z)},drawerProps:{forceRender:!0},formRef:w,trigger:(0,n.jsx)(M.ZP,{type:"primary",children:"\u6DFB\u52A0\u8BA1\u5212\u4EFB\u52A1"}),onFinish:function(){var G=v()(o()().mark(function Z(j){var z,J,U;return o()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,(0,A.ks)({name:j.name,url:j.url,type:j.type});case 2:if(z=V.sent,!(z&&z.data)){V.next=12;break}return V.next=6,(0,A.$c)({id:j.id,name:j.name,title:j.title,type:j.type,url:j.url,apps:z.data.list});case 6:if(J=V.sent,!(J&&J.data)){V.next=12;break}return W.success("\u6DFB\u52A0\u7B2C\u4E09\u65B9\u5E94\u7528\u5546\u5E97\u6210\u529F"),F.onFinish&&F.onFinish(),(U=w.current)===null||U===void 0||U.resetFields(),V.abrupt("return",!0);case 12:case"end":return V.stop()}},Z)}));return function(Z){return G.apply(this,arguments)}}(),children:[(0,n.jsx)(t.Z,{name:"id",hidden:!0}),(0,n.jsx)(t.Z,{label:"\u540D\u79F0",name:"title",required:!0,rules:[{required:!0}],placeholder:"\u8BA1\u5212\u4EFB\u52A1\u540D\u79F0"}),(0,n.jsx)(c.Z,{hideCopyButton:!0,name:"cron",label:"\u6267\u884C\u5468\u671F",showAddButton:!0,gap:3,justify:"flex-start",items:[{name:"source",render:function(Z,j,z){return(0,n.jsx)(P.Z,{initialValue:"preWeek",name:"unit",valueEnum:{preMonth:"\u6BCF\u6708",preWeek:"\u6BCF\u5468",preDay:"\u6BCF\u5929",preHour:"\u6BCF\u5C0F\u65F6",day:"\u6BCF N \u65E5",hour:"\u6BCF N \u65F6",minute:"\u6BCF N \u5206",second:"\u6BCF N \u79D2"}})}},{name:"week",render:function(Z,j,z){return(0,n.jsx)(S.Z,{name:["unit"],children:function(U){var $=U.unit;if($=="preWeek")return(0,n.jsx)(P.Z,{initialValue:"1",name:"week",valueEnum:{1:"\u5468\u4E00",2:"\u5468\u4E8C",3:"\u5468\u4E09",4:"\u5468\u56DB",5:"\u5468\u4E94",6:"\u5468\u516D",7:"\u5468\u65E5"}})}})}},{name:"day",render:function(Z,j,z){return(0,n.jsx)(S.Z,{name:["unit"],children:function(U){var $=U.unit;if($=="preMonth"||$=="day")return(0,n.jsx)(t.Z,{name:"day",fieldProps:{addonAfter:"\u65E5"}})}})}},{name:"hour",render:function(Z,j,z){return(0,n.jsx)(S.Z,{name:["unit"],children:function(U){var $=U.unit;if($!="second"&&$!="minute"&&$!="preHour")return(0,n.jsx)(t.Z,{name:"day",fieldProps:{addonAfter:"\u65F6"}})}})}},{name:"minute",render:function(Z,j,z){return(0,n.jsx)(S.Z,{name:["unit"],children:function(U){var $=U.unit;if($!="second")return(0,n.jsx)(t.Z,{name:"minute",fieldProps:{addonAfter:"\u5206"}})}})}},{name:"secound",render:function(Z,j,z){return(0,n.jsx)(S.Z,{name:["unit"],children:function(U){var $=U.unit;if($=="second")return(0,n.jsx)(t.Z,{name:"secound",fieldProps:{addonAfter:"\u79D2"}})}})}}]}),(0,n.jsx)(P.Z,{name:"container",label:"\u6267\u884C\u5BB9\u5668"}),(0,n.jsx)(T.Z,{name:"script",label:"\u6267\u884C\u811A\u672C"})]})}),u=s,r=e(80821),D=e(67255),X=e(43425),Y=e(98165),k=e(90078),N=e(10641),a=e(42075),i=e(96074),l=e(25593),f=e(83062);function I(){var F=(0,h.useRef)(),Q=(0,h.useRef)();return(0,n.jsx)(k._z,{header:{extra:[(0,n.jsx)(u,{ref:Q,onFinish:function(){var B,O;!((B=F.current)===null||B===void 0)&&B.reloadAndRest&&((O=F.current)===null||O===void 0||O.reloadAndRest())}},"create")]},children:(0,n.jsx)(N.Z,{scroll:{x:"max-content"},rowKey:"id",pagination:(0,D.O)(),columns:[{title:"\u6807\u8BC6",dataIndex:"name",width:200},{title:"\u540D\u79F0",dataIndex:"title"},{title:"\u5730\u5740",width:500,search:!1,render:function(B,O,K,w,m){return(0,n.jsx)("a",{href:O.setting.url,target:"_blank",children:(0,n.jsx)(Tag,{children:O.setting.url})})}},{title:"\u6700\u540E\u66F4\u65B0",render:function(B,O,K,w,m){if(O.setting.updatedAt)return new Date(O.setting.updatedAt*1e3).toLocaleString()}},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(B,O,K,w,m){return(0,n.jsxs)(a.Z,{split:(0,n.jsx)(i.Z,{type:"vertical"}),children:[(0,n.jsx)(l.Z.Link,{onClick:function(){var C;(C=Q.current)===null||C===void 0||C.edit(O)},children:(0,n.jsx)(f.Z,{title:"\u7BA1\u7406",children:(0,n.jsx)(X.Z,{})})},"manage"),(0,n.jsx)(r.Z,{type:"link",icon:(0,n.jsx)(Y.Z,{}),action:function(){},onSuccess:function(){var C,L;return!((C=F.current)===null||C===void 0)&&C.reloadAndRest&&((L=F.current)===null||L===void 0||L.reloadAndRest()),!0},onError:function(){var C,L;return!((C=F.current)===null||C===void 0)&&C.reset&&((L=F.current)===null||L===void 0||L.reset()),!0},messageSuccess:"\u66F4\u65B0\u6210\u529F",children:" "},"upgrade")]})}}],request:function(){var b=v()(o()().mark(function B(O,K,w){var m;return o()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,getAppstoreList({name:O.name,title:O.title});case 2:return m=C.sent,C.abrupt("return",{data:m.data.list,success:!0,total:m.data.list.length});case 4:case"end":return C.stop()}},B)}));return function(B,O,K){return b.apply(this,arguments)}}(),rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},actionRef:F,tableAlertOptionRender:function(B){var O=B.selectedRowKeys,K=B.selectedRows;return(0,n.jsx)(a.Z,{size:16,children:(0,n.jsx)(r.Z,{danger:!0,type:"primary",action:function(){return deleteAppstore({id:K.map(function(m){return m.id})})},onSuccess:function(){var m,W;return!((m=F.current)===null||m===void 0)&&m.reloadAndRest&&((W=F.current)===null||W===void 0||W.reloadAndRest()),!0},onError:function(){var m,W;return!((m=F.current)===null||m===void 0)&&m.reset&&((W=F.current)===null||W===void 0||W.reset()),!0},messageSuccess:"\u5220\u9664\u6210\u529F",children:"\u6279\u91CF\u5220\u9664"},"delete")})}})})}},15078:function(H,R,e){e.d(R,{$c:function(){return y},Me:function(){return p},eO:function(){return S},ks:function(){return A},yL:function(){return h}});var x=e(15009),o=e.n(x),_=e(99289),v=e.n(_),g=e(54006);function y(n){return E.apply(this,arguments)}function E(){return E=v()(o()().mark(function n(s){return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,g.request)("/api/common/store/create",{method:"POST",data:s}));case 1:case"end":return r.stop()}},n)})),E.apply(this,arguments)}function A(n){return d.apply(this,arguments)}function d(){return d=v()(o()().mark(function n(s){return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,g.request)("/api/common/store/sync",{method:"POST",data:s}));case 1:case"end":return r.stop()}},n)})),d.apply(this,arguments)}function t(n){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime().mark(function n(s){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/common/store/get-detail",{method:"POST",data:s}));case 1:case"end":return r.stop()}},n)})),P.apply(this,arguments)}function S(n){return T.apply(this,arguments)}function T(){return T=v()(o()().mark(function n(s){return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,g.request)("/api/common/store/get-list",{method:"POST",data:s}));case 1:case"end":return r.stop()}},n)})),T.apply(this,arguments)}function p(n){return M.apply(this,arguments)}function M(){return M=v()(o()().mark(function n(s){return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,g.request)("/api/common/store/delete",{method:"POST",data:s});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},n)})),M.apply(this,arguments)}function h(n){return c.apply(this,arguments)}function c(){return c=v()(o()().mark(function n(s){return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,g.request)(s==null?void 0:s.path,{method:"GET"}));case 1:case"end":return r.stop()}},n)})),c.apply(this,arguments)}},67255:function(H,R,e){e.d(R,{O:function(){return x},j:function(){return o}});function x(){var _,v=parseInt((_=localStorage.getItem("dpanel-pagesize"))!==null&&_!==void 0?_:"0");return{showSizeChanger:!0,defaultPageSize:v!=null?v:20}}function o(_){var v="dpanel-table-column-".concat(_),g={};if(localStorage.getItem(v)){var y;g=JSON.parse((y=localStorage.getItem(v))!==null&&y!==void 0?y:"{}")}return{defaultValue:g,onChange:function(A){localStorage.setItem("dpanel-table-column-".concat(_),JSON.stringify(A))}}}},86250:function(H,R,e){e.d(R,{Z:function(){return N}});var x=e(67294),o=e(93967),_=e.n(o),v=e(98423),g=e(98065),y=e(53124),E=e(83559),A=e(83262);const d=["wrap","nowrap","wrap-reverse"],t=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],P=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],S=(a,i)=>{const l=i.wrap===!0?"wrap":i.wrap;return{[`${a}-wrap-${l}`]:l&&d.includes(l)}},T=(a,i)=>{const l={};return P.forEach(f=>{l[`${a}-align-${f}`]=i.align===f}),l[`${a}-align-stretch`]=!i.align&&!!i.vertical,l},p=(a,i)=>{const l={};return t.forEach(f=>{l[`${a}-justify-${f}`]=i.justify===f}),l};function M(a,i){return _()(Object.assign(Object.assign(Object.assign({},S(a,i)),T(a,i)),p(a,i)))}var h=M;const c=a=>{const{componentCls:i}=a;return{[i]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},n=a=>{const{componentCls:i}=a;return{[i]:{"&-gap-small":{gap:a.flexGapSM},"&-gap-middle":{gap:a.flexGap},"&-gap-large":{gap:a.flexGapLG}}}},s=a=>{const{componentCls:i}=a,l={};return d.forEach(f=>{l[`${i}-wrap-${f}`]={flexWrap:f}}),l},u=a=>{const{componentCls:i}=a,l={};return P.forEach(f=>{l[`${i}-align-${f}`]={alignItems:f}}),l},r=a=>{const{componentCls:i}=a,l={};return t.forEach(f=>{l[`${i}-justify-${f}`]={justifyContent:f}}),l},D=()=>({});var X=(0,E.I$)("Flex",a=>{const{paddingXS:i,padding:l,paddingLG:f}=a,I=(0,A.IX)(a,{flexGapSM:i,flexGap:l,flexGapLG:f});return[c(I),n(I),s(I),u(I),r(I)]},D,{resetStyle:!1}),Y=function(a,i){var l={};for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&i.indexOf(f)<0&&(l[f]=a[f]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var I=0,f=Object.getOwnPropertySymbols(a);I<f.length;I++)i.indexOf(f[I])<0&&Object.prototype.propertyIsEnumerable.call(a,f[I])&&(l[f[I]]=a[f[I]]);return l},N=x.forwardRef((a,i)=>{const{prefixCls:l,rootClassName:f,className:I,style:F,flex:Q,gap:b,children:B,vertical:O=!1,component:K="div"}=a,w=Y(a,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:m,direction:W,getPrefixCls:C}=x.useContext(y.E_),L=C("flex",l),[q,ee,ne]=X(L),G=O!=null?O:m==null?void 0:m.vertical,Z=_()(I,f,m==null?void 0:m.className,L,ee,ne,h(L,a),{[`${L}-rtl`]:W==="rtl",[`${L}-gap-${b}`]:(0,g.n)(b),[`${L}-vertical`]:G}),j=Object.assign(Object.assign({},m==null?void 0:m.style),F);return Q&&(j.flex=Q),b&&!(0,g.n)(b)&&(j.gap=b),q(x.createElement(K,Object.assign({ref:i,className:Z,style:j},(0,v.Z)(w,["justify","wrap","align"])),B))})}}]);
