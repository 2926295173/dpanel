"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4037],{12119:function(_,T,e){e.d(T,{Z:function(){return I}});var o=e(87462),f=e(67294),$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M608 112c-167.9 0-304 136.1-304 304 0 70.3 23.9 135 63.9 186.5l-41.1 41.1-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-44.9 44.9-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-65.3 65.3a8.03 8.03 0 000 11.3l42.3 42.3c3.1 3.1 8.2 3.1 11.3 0l253.6-253.6A304.06 304.06 0 00608 720c167.9 0 304-136.1 304-304S775.9 112 608 112zm161.2 465.2C726.2 620.3 668.9 644 608 644c-60.9 0-118.2-23.7-161.2-66.8-43.1-43-66.8-100.3-66.8-161.2 0-60.9 23.7-118.2 66.8-161.2 43-43.1 100.3-66.8 161.2-66.8 60.9 0 118.2 23.7 161.2 66.8 43.1 43 66.8 100.3 66.8 161.2 0 60.9-23.7 118.2-66.8 161.2z"}}]},name:"key",theme:"outlined"},v=$,j=e(84089),L=function(U,S){return f.createElement(j.Z,(0,o.Z)({},U,{ref:S,icon:v}))},E=f.forwardRef(L),I=E},63434:function(_,T,e){var o=e(1413),f=e(45987),$=e(22270),v=e(84567),j=e(67294),L=e(90789),E=e(40284),I=e(85893),N=["options","fieldProps","proFieldProps","valueEnum"],U=j.forwardRef(function(m,C){var d=m.options,y=m.fieldProps,K=m.proFieldProps,H=m.valueEnum,G=(0,f.Z)(m,N);return(0,I.jsx)(E.Z,(0,o.Z)({ref:C,valueType:"checkbox",valueEnum:(0,$.h)(H,void 0),fieldProps:(0,o.Z)({options:d},y),lightProps:(0,o.Z)({labelFormatter:function(){return(0,I.jsx)(E.Z,(0,o.Z)({ref:C,valueType:"checkbox",mode:"read",valueEnum:(0,$.h)(H,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,o.Z)({options:d},y),proFieldProps:K},G))}},G.lightProps),proFieldProps:K},G))}),S=j.forwardRef(function(m,C){var d=m.fieldProps,y=m.children;return(0,I.jsx)(v.Z,(0,o.Z)((0,o.Z)({ref:C},d),{},{children:y}))}),W=(0,L.G)(S,{valuePropName:"checked"}),D=W;D.Group=U,T.Z=D},75293:function(_,T,e){e.d(T,{Z:function(){return $}});var o=e(25593),f=e(85893);function $(v){return(0,f.jsx)(o.Z.Text,{copyable:!0,style:{padding:10,display:v.block?"block":"",background:"#24292f",color:"#ffffff"},children:v.content})}},66139:function(_,T,e){e.r(T),e.d(T,{default:function(){return de}});var o=e(15009),f=e.n(o),$=e(99289),v=e.n($),j=e(5574),L=e.n(j),E=e(68602),I=e(89075),N=e(68262),U=e(82346),S=e(9361),W=e(40056),D=e(86250),m=e(25593),C=e(42075),d=e(67294),y=e(75293),K=e(36146),H=e(29177),G=e(88360),ee=e(94149),ae=e(12119),V=e(5966),se=e(97462),le=e(63434),ie=e(92398),ue=e(55241),r=e(85893);function ce(A){var X,h=new K.Uo("user");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ie.Z,{centered:!0,activeKey:A.loginType,items:[{icon:(0,r.jsx)(H.Z,{}),key:"login",label:h.format("title")},{icon:(0,r.jsx)(G.Z,{}),key:"register",label:h.format("registerTitle")}].filter(function(Y){return Y.key==A.loginType})}),(0,r.jsx)(V.Z,{name:"username",fieldProps:{size:"large",prefix:(0,r.jsx)(H.Z,{className:"prefixIcon"})},placeholder:h.format("formUsernameEmpty"),rules:[{required:!0,message:h.format("formUsernameEmpty")}]},"username"),(0,r.jsx)(V.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,r.jsx)(ee.Z,{className:"prefixIcon"})},placeholder:h.format("formPasswordEmpty"),rules:[{required:!0,message:h.format("formPasswordEmpty")}]},"password"),A.showTwoFa&&(0,r.jsx)(V.Z,{name:"code",placeholder:h.format("formTwofaEmpty"),rules:[{required:!0}],fieldProps:{maxLength:6,size:"large",prefix:(0,r.jsx)(ae.Z,{className:"prefixIcon"})}}),A.loginType=="register"&&(0,r.jsx)(se.Z,{name:["password"],children:function(ne){var re=ne.password;return(0,r.jsx)(V.Z.Password,{fieldProps:{size:"large",prefix:(0,r.jsx)(ee.Z,{className:"prefixIcon"})},placeholder:h.format("formConfirmPasswordEmpty"),name:"confirmPassword",dependencies:["password"],rules:[{required:!0,message:h.format("formConfirmPasswordEmpty")},function(B){var J=B.getFieldValue;return{validator:function(t,n){return!n||J("password")===n?Promise.resolve():Promise.reject(new Error(h.format("formMessagePasswordNotMatch")))}}}]},"confirmPassword")}}),A.showAutoLogin&&(0,r.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,r.jsx)(le.Z,{noStyle:!0,name:"autoLogin",initialValue:!0,children:h.format("formAutoLogin")}),(0,r.jsx)(ue.Z,{content:(0,r.jsxs)(C.Z,{direction:"vertical",size:[0,30],children:[(0,r.jsxs)("span",{children:[h.format("formUserResetTip"),", ",(0,r.jsx)("a",{href:"https://dpanel.cc/install/ctrl",target:"_blank",children:K.FD.format("help")})]}),(0,r.jsx)(y.Z,{content:"docker exec ".concat((X=A.appName)!==null&&X!==void 0?X:"dpanel"," ./dpanel user:reset -f config.yaml")}),(0,r.jsx)("span",{})]}),children:(0,r.jsx)(m.Z.Link,{style:{float:"right"},children:h.format("formUserReset")})})]})]})}var de=function(){var A=S.Z.useToken(),X=A.token,h=(0,U.useModel)("@@initialState"),Y=h.refresh,ne=(0,d.useState)({loginType:"account",appName:"dpanel"}),re=L()(ne,2),B=re[0],J=re[1],oe=(0,d.useState)(),t=L()(oe,2),n=t[0],a=t[1],s=(0,d.useState)(),l=L()(s,2),p=l[0],P=l[1],O=(0,U.useAntdConfigSetter)(),b=(0,d.useRef)(),g=new K.Uo("user"),z=(0,U.useAccess)();return(0,d.useEffect)(function(){window.document.title=g.format("documentTitle"),(0,E.Nr)().then(function(){var w=v()(f()().mark(function Z(u){var i;return f()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:g.appendXk(u.data.feature.includes("canSeeEnableXk")),i={loginType:"account"},u.data.showBuildName&&u.data.family!="lite"&&(i.showBuildName=!0),u.data.showRegister&&(i.loginType="register"),u.data.family=="demo"&&(i.showDemo=!0),i.appName=u.data.appName,u.data.theme&&u.data.theme.algorithm&&(localStorage.setItem("dpanel-theme",u.data.theme.algorithm),O(function(c){var k;(k=c.theme)!==null&&k!==void 0||(c.theme={});var te=[];return u.data.theme&&(u.data.theme.algorithm=="dark"?te.push(S.Z.darkAlgorithm):te.push(S.Z.defaultAlgorithm),c.theme.algorithm=te),c})),P(u.data),J(i),u.data.feature.indexOf("canSeeEnableThemeUser")!=-1?(0,I.ax)().then(function(c){c.data&&c.data.themeUserConfig&&c.data.themeUserConfig.siteTitle&&(window.document.title=c.data.themeUserConfig.siteTitle),a(c.data)}):a({});case 10:case"end":return M.stop()}},Z)}));return function(Z){return w.apply(this,arguments)}}())},[]),(0,r.jsxs)(r.Fragment,{children:[B&&B.showBuildName&&(0,r.jsx)(W.Z,{type:"error",message:g.format("tipShowBuildName"),banner:!0}),B&&B.showDemo&&(0,r.jsx)(W.Z,{type:"error",message:g.format("tipShowDemo"),banner:!0}),(0,r.jsx)(D.Z,{justify:"center",align:"center",style:{height:"100vh",background:n&&n.themeUserConfig&&n.themeUserConfig.bgImage&&n.themeUserConfig.bgImage.src?"url(".concat(n.themeUserConfig.bgImage.src,")"):"".concat(X.colorBgElevated,"dd")},children:(0,r.jsxs)(N.U,{onFinish:function(){var w=v()(f()().mark(function Z(u){var i,R;return f()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(B.loginType!="register"){c.next=3;break}return c.next=3,(0,E.AT)({username:u.username,password:u.password,confirmPassword:u.confirmPassword});case 3:return c.prev=3,c.next=6,(0,E.n$)({username:u.username,password:u.password,autoLogin:u.autoLogin,code:u.code});case 6:if(i=c.sent,!i.data.accessToken){c.next=13;break}return localStorage.setItem("token",i.data.accessToken),Y().then(function(k){i.data.redirect&&i.data.redirect!=""&&!(p!=null&&p.feature.includes("canSeeEnableCe"))?window.location.href="/dpanel/ui"+i.data.redirect:window.location.href="/dpanel/ui"}),c.abrupt("return");case 13:return c.abrupt("return",!1);case 14:c.next=19;break;case 16:c.prev=16,c.t0=c.catch(3),(R=b.current)===null||R===void 0||R.resetFields(["code"]);case 19:case"end":return c.stop()}},Z,null,[[3,16]])}));return function(Z){return w.apply(this,arguments)}}(),containerStyle:{background:"transparent",height:"auto"},contentStyle:{width:"auto"},logo:"",title:(0,r.jsx)("img",{src:n&&n.themeUserConfig&&n.themeUserConfig.loginLogo?n.themeUserConfig.loginLogo:"/dpanel/static/asset/logo.png",width:"350"}),subTitle:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsx)("br",{})]}),formRef:b,children:[(0,r.jsx)(ce,{showTwoFa:!!(n&&n.canSeeEnableTwoFa),loginType:B.loginType,appName:B.appName,showAutoLogin:!(p!=null&&p.feature.includes("canSeeEnableXk"))}),(0,r.jsx)(m.Z.Paragraph,{style:{marginBottom:10,color:"#999999",textAlign:"center"},children:(0,r.jsxs)(C.Z,{children:[g.format("agree"),(0,r.jsx)("a",{href:g.format("userAgreementUrl"),target:"_blank",children:g.format("userAgreement")}),(0,r.jsx)("a",{href:g.format("userPrivacyUrl"),target:"_blank",children:g.format("userPrivacy")})]})})]})})]})}},89075:function(_,T,e){e.d(T,{$w:function(){return L},E1:function(){return W},YQ:function(){return I},ax:function(){return U}});var o=e(15009),f=e.n(o),$=e(99289),v=e.n($),j=e(82346);function L(){return E.apply(this,arguments)}function E(){return E=v()(f()().mark(function m(){return f()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,j.request)("/api/pro/home/get-machine-id",{method:"POST"}));case 1:case"end":return d.stop()}},m)})),E.apply(this,arguments)}function I(){return N.apply(this,arguments)}function N(){return N=v()(f()().mark(function m(){return f()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,j.request)("/api/pro/home/get-license-info",{method:"POST"}));case 1:case"end":return d.stop()}},m)})),N.apply(this,arguments)}function U(){return S.apply(this,arguments)}function S(){return S=v()(f()().mark(function m(){return f()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,j.request)("/api/pro/home/login-info",{method:"POST"}));case 1:case"end":return d.stop()}},m)})),S.apply(this,arguments)}function W(m){return D.apply(this,arguments)}function D(){return D=v()(f()().mark(function m(C){return f()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,j.request)("/api/pro/home/upload-license-file",{method:"POST",data:C}));case 1:case"end":return y.stop()}},m)})),D.apply(this,arguments)}},40056:function(_,T,e){e.d(T,{Z:function(){return oe}});var o=e(67294),f=e(89739),$=e(4340),v=e(97937),j=e(21640),L=e(78860),E=e(93967),I=e.n(E),N=e(29372),U=e(64217),S=e(42550),W=e(96159),D=e(53124),m=e(11568),C=e(14747),d=e(83559);const y=(t,n,a,s,l)=>({background:t,border:`${(0,m.bf)(s.lineWidth)} ${s.lineType} ${n}`,[`${l}-icon`]:{color:a}}),K=t=>{const{componentCls:n,motionDurationSlow:a,marginXS:s,marginSM:l,fontSize:p,fontSizeLG:P,lineHeight:O,borderRadiusLG:b,motionEaseInOutCirc:g,withDescriptionIconSize:z,colorText:w,colorTextHeading:Z,withDescriptionPadding:u,defaultPadding:i}=t;return{[n]:Object.assign(Object.assign({},(0,C.Wf)(t)),{position:"relative",display:"flex",alignItems:"center",padding:i,wordWrap:"break-word",borderRadius:b,[`&${n}-rtl`]:{direction:"rtl"},[`${n}-content`]:{flex:1,minWidth:0},[`${n}-icon`]:{marginInlineEnd:s,lineHeight:0},"&-description":{display:"none",fontSize:p,lineHeight:O},"&-message":{color:Z},[`&${n}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${a} ${g}, opacity ${a} ${g},
        padding-top ${a} ${g}, padding-bottom ${a} ${g},
        margin-bottom ${a} ${g}`},[`&${n}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${n}-with-description`]:{alignItems:"flex-start",padding:u,[`${n}-icon`]:{marginInlineEnd:l,fontSize:z,lineHeight:0},[`${n}-message`]:{display:"block",marginBottom:s,color:Z,fontSize:P},[`${n}-description`]:{display:"block",color:w}},[`${n}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},H=t=>{const{componentCls:n,colorSuccess:a,colorSuccessBorder:s,colorSuccessBg:l,colorWarning:p,colorWarningBorder:P,colorWarningBg:O,colorError:b,colorErrorBorder:g,colorErrorBg:z,colorInfo:w,colorInfoBorder:Z,colorInfoBg:u}=t;return{[n]:{"&-success":y(l,s,a,t,n),"&-info":y(u,Z,w,t,n),"&-warning":y(O,P,p,t,n),"&-error":Object.assign(Object.assign({},y(z,g,b,t,n)),{[`${n}-description > pre`]:{margin:0,padding:0}})}}},G=t=>{const{componentCls:n,iconCls:a,motionDurationMid:s,marginXS:l,fontSizeIcon:p,colorIcon:P,colorIconHover:O}=t;return{[n]:{"&-action":{marginInlineStart:l},[`${n}-close-icon`]:{marginInlineStart:l,padding:0,overflow:"hidden",fontSize:p,lineHeight:(0,m.bf)(p),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${a}-close`]:{color:P,transition:`color ${s}`,"&:hover":{color:O}}},"&-close-text":{color:P,transition:`color ${s}`,"&:hover":{color:O}}}}},ee=t=>({withDescriptionIconSize:t.fontSizeHeading3,defaultPadding:`${t.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${t.paddingMD}px ${t.paddingContentHorizontalLG}px`});var ae=(0,d.I$)("Alert",t=>[K(t),H(t),G(t)],ee),V=function(t,n){var a={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(a[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(t);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(t,s[l])&&(a[s[l]]=t[s[l]]);return a};const se={success:f.Z,info:L.Z,error:$.Z,warning:j.Z},le=t=>{const{icon:n,prefixCls:a,type:s}=t,l=se[s]||null;return n?(0,W.wm)(n,o.createElement("span",{className:`${a}-icon`},n),()=>({className:I()(`${a}-icon`,n.props.className)})):o.createElement(l,{className:`${a}-icon`})},ie=t=>{const{isClosable:n,prefixCls:a,closeIcon:s,handleClose:l,ariaProps:p}=t,P=s===!0||s===void 0?o.createElement(v.Z,null):s;return n?o.createElement("button",Object.assign({type:"button",onClick:l,className:`${a}-close-icon`,tabIndex:0},p),P):null};var r=o.forwardRef((t,n)=>{const{description:a,prefixCls:s,message:l,banner:p,className:P,rootClassName:O,style:b,onMouseEnter:g,onMouseLeave:z,onClick:w,afterClose:Z,showIcon:u,closable:i,closeText:R,closeIcon:M,action:c,id:k}=t,te=V(t,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[me,ye]=o.useState(!1),fe=o.useRef(null);o.useImperativeHandle(n,()=>({nativeElement:fe.current}));const{getPrefixCls:Ee,direction:Ce,closable:Q,closeIcon:pe,className:Pe,style:xe}=(0,D.dj)("alert"),x=Ee("alert",s),[je,Ie,Se]=ae(x),Oe=F=>{var q;ye(!0),(q=t.onClose)===null||q===void 0||q.call(t,F)},ge=o.useMemo(()=>t.type!==void 0?t.type:p?"warning":"info",[t.type,p]),Te=o.useMemo(()=>typeof i=="object"&&i.closeIcon||R?!0:typeof i=="boolean"?i:M!==!1&&M!==null&&M!==void 0?!0:!!Q,[R,M,i,Q]),he=p&&u===void 0?!0:u,$e=I()(x,`${x}-${ge}`,{[`${x}-with-description`]:!!a,[`${x}-no-icon`]:!he,[`${x}-banner`]:!!p,[`${x}-rtl`]:Ce==="rtl"},Pe,P,O,Se,Ie),be=(0,U.Z)(te,{aria:!0,data:!0}),Ze=o.useMemo(()=>typeof i=="object"&&i.closeIcon?i.closeIcon:R||(M!==void 0?M:typeof Q=="object"&&Q.closeIcon?Q.closeIcon:pe),[M,i,R,pe]),Me=o.useMemo(()=>{const F=i!=null?i:Q;if(typeof F=="object"){const{closeIcon:q}=F;return V(F,["closeIcon"])}return{}},[i,Q]);return je(o.createElement(N.ZP,{visible:!me,motionName:`${x}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:F=>({maxHeight:F.offsetHeight}),onLeaveEnd:Z},({className:F,style:q},ve)=>o.createElement("div",Object.assign({id:k,ref:(0,S.sQ)(fe,ve),"data-show":!me,className:I()($e,F),style:Object.assign(Object.assign(Object.assign({},xe),b),q),onMouseEnter:g,onMouseLeave:z,onClick:w,role:"alert"},be),he?o.createElement(le,{description:a,icon:t.icon,prefixCls:x,type:ge}):null,o.createElement("div",{className:`${x}-content`},l?o.createElement("div",{className:`${x}-message`},l):null,a?o.createElement("div",{className:`${x}-description`},a):null),c?o.createElement("div",{className:`${x}-action`},c):null,o.createElement(ie,{isClosable:Te,prefixCls:x,closeIcon:Ze,handleClose:Oe,ariaProps:Me}))))}),ce=e(15671),de=e(43144),A=e(61120),X=e(78814),h=e(82963);function Y(t,n,a){return n=(0,A.Z)(n),(0,h.Z)(t,(0,X.Z)()?Reflect.construct(n,a||[],(0,A.Z)(t).constructor):n.apply(t,a))}var ne=e(60136),B=function(t){function n(){var a;return(0,ce.Z)(this,n),a=Y(this,n,arguments),a.state={error:void 0,info:{componentStack:""}},a}return(0,ne.Z)(n,t),(0,de.Z)(n,[{key:"componentDidCatch",value:function(s,l){this.setState({error:s,info:l})}},{key:"render",value:function(){const{message:s,description:l,id:p,children:P}=this.props,{error:O,info:b}=this.state,g=(b==null?void 0:b.componentStack)||null,z=typeof s=="undefined"?(O||"").toString():s,w=typeof l=="undefined"?g:l;return O?o.createElement(r,{id:p,type:"error",message:z,description:o.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},w)}):P}}])}(o.Component);const J=r;J.ErrorBoundary=B;var oe=J}}]);
