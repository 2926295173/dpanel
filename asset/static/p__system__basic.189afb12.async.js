"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1050],{1699:function(te,A,t){t.d(A,{u:function(){return R}});var D=t(9783),b=t.n(D),G=t(97857),L=t.n(G),Q=t(67294),a=t(82346),X=t(40411),j=t(42075),w=t(85893),R=function(_){var Z=(0,a.useAccess)(),n=Array.isArray(_.access)?_.access:[_.access],K,c=_.fallback;if(typeof _.children=="function"?(K=_.children(n.reduce(function(P,C){return L()(L()({},P),{},b()({},C,Z[C]))},{})),K||(K=c)):n.every(function(P){return Z[P]})?K=_.children:K=c,!c&&K&&_.showProTips&&Z.canSeeEnableCe){if(Z.canSeeEnableHiddenProTips)return null;K=(0,w.jsx)(X.Z,{offset:_.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:K})}if(!c&&K&&_.showProRibbonTips&&Z.canSeeEnableCe){if(Z.canSeeEnableHiddenProTips)return null;K=(0,w.jsx)(X.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:K})}return _.space?(0,w.jsx)(j.Z,L()(L()({},_.space),{},{children:K})):K}},80821:function(te,A,t){t.d(A,{Z:function(){return Z}});var D=t(97857),b=t.n(D),G=t(5574),L=t.n(G),Q=t(24963),a=t(36146),X=t(86738),j=t(83062),w=t(96074),R=t(83622),W=t(67294),_=t(85893);function Z(n){var K=(0,W.useState)(!1),c=L()(K,2),P=c[0],C=c[1],g=(0,W.useContext)(Q.Z),s=g.message,z=new a.Uo,O=function(){C(!0);var e=n.action();e instanceof Promise?e.then(function(H){if(C(!1),H){typeof n.onSuccess=="function"&&n.onSuccess(H);var J="";n.messageSuccess?typeof n.messageSuccess=="function"?J=n.messageSuccess(H):J=n.messageSuccess.indexOf("notification.")==0?z.format(n.messageSuccess):n.messageSuccess:J=z.format("notification.finish"),n.asynced?s.info(J):s.success(J)}}).catch(function(H){C(!1),typeof n.onError=="function"&&n.onError(H)}):C(!1)};return n.confirm?(0,_.jsx)(X.Z,b()(b()({style:{width:500},title:n.confirmTitle?n.confirmTitle:z.format("notification.title.tip"),description:typeof n.confirm=="string"&&n.confirm.indexOf("notification.")==0?z.format(n.confirm):n.confirm,onConfirm:O,okText:"Yes",cancelText:"No",onOpenChange:n.confirmOnOpenChange},n.confirmProps),{},{children:(0,_.jsxs)(j.Z,{title:n.tips,children:[n.showDivider&&(0,_.jsx)(w.Z,{type:"vertical",style:{marginRight:15}}),(0,_.jsx)(R.ZP,{block:n.block,disabled:n.disabled,icon:!n.children&&P?void 0:n.icon,loading:P,danger:n.danger,type:n.type,children:n.children})]})})):(0,_.jsxs)(j.Z,{title:n.tips,children:[n.showDivider&&(0,_.jsx)(w.Z,{type:"vertical",style:{marginRight:15}}),(0,_.jsx)(R.ZP,{block:n.block,style:n.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:n.disabled,icon:!n.children&&P?void 0:n.icon,loading:P,onClick:O,danger:n.danger,type:n.type,children:n.children})]})}},44349:function(te,A,t){var D=t(97857),b=t.n(D),G=t(15009),L=t.n(G),Q=t(99289),a=t.n(Q),X=t(74763),j=t(17186),w=t(5966),R=t(86250),W=t(67294),_=t(85893),Z=(0,W.forwardRef)(function(n,K){var c=(0,W.useRef)();(0,W.useImperativeHandle)(K,function(){return{addItem:function(C){function g(s,z,O){return C.apply(this,arguments)}return g.toString=function(){return C.toString()},g}(function(C,g,s){var z,O=(z=c.current)===null||z===void 0?void 0:z.getList(),U;if(O==null||O.forEach(function(J,ue){J[C]==g[C]&&(U=ue)}),!(0,X.k)(U)&&s){var e;(e=c.current)===null||e===void 0||e.remove(U),U=void 0}if(!U){var H;(H=c.current)===null||H===void 0||H.add(g)}}),removeItemByKey:function(g,s){return a()(L()().mark(function z(){var O,U;return L()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return U=(O=c.current)===null||O===void 0?void 0:O.getList(),U==null||U.forEach(function(J,ue){if(J[g]==s){var re;(re=c.current)===null||re===void 0||re.remove(ue);return}}),H.abrupt("return");case 3:case"end":return H.stop()}},z)}))()},clear:function(g){if(!g){var s;g=(s=c.current)===null||s===void 0||(s=s.getList())===null||s===void 0?void 0:s.map(function(O,U){return U})}if(g){var z;(z=c.current)===null||z===void 0||z.remove(g)}},getList:function(){var g;return(g=c.current)===null||g===void 0?void 0:g.getList()}}});var P={};return n.hideCopyButton===!0&&(P.copyIconProps=!1),n.hideDeleteButton===!0&&(P.deleteIconProps=!1),(0,_.jsx)(j.u,b()(b()({initialValue:n.initialValue,label:n.label,name:n.name,actionRef:c,creatorButtonProps:n.showAddButton?{creatorButtonText:n.label?n.label:n.name}:!1,min:n.min?n.min:0},P),{},{children:function(g,s,z){return(0,_.jsx)(R.Z,{justify:n.justify,gap:n.gap,children:n.items.map(function(O){return O.render?(0,_.jsx)("div",{children:O.render&&O.render(g,s,z)},"".concat(n.name,"-").concat(O.name,"-").concat(g.key)):(0,_.jsx)(w.Z,{width:O.width,name:O.name,label:O.label,required:O.required,rules:[{required:O.required}],disabled:O.disabled,placeholder:O.placeholder},"".concat(n.name,"-").concat(O.name,"-").concat(g.key))})})}}))});A.Z=Z},2808:function(te,A,t){t.d(A,{Z:function(){return X}});var D=t(97857),b=t.n(D),G=t(62370),L=t(51663),Q=t(67294),a=t(85893);function X(j){return(0,a.jsx)(G.Z,b()(b()({},j),{},{children:(0,a.jsx)(L.Z,{showText:function(R){return R.toHexString()},allowClear:!0,presets:[{label:"Color",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},51100:function(te,A,t){t.d(A,{Z:function(){return Q}});var D=t(97961),b=t(91604),G=t(1677),L=t(85893);function Q(a){return a.showDragger?(0,L.jsx)(b.Z,{max:a.max?a.max:1,title:a.title,label:a.label,required:a.required,rules:[{required:a.required}],fieldProps:{multiple:!!(a.max&&a.max>1),name:"file",accept:a.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(j){return new Promise(function(w){var R;(0,D._2)({path:(R=j.response.data.path)!==null&&R!==void 0?R:""}).then(function(W){w(!0)})})}},name:a.name}):(0,L.jsx)(G.Z,{max:a.max?a.max:1,title:a.title,label:a.label,required:a.required,rules:[{required:a.required}],fieldProps:{multiple:!!(a.max&&a.max>1),name:"file",accept:a.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(j){return new Promise(function(w){var R;(0,D._2)({path:(R=j.response.data.path)!==null&&R!==void 0?R:""}).then(function(W){w(!0)})})}},name:a.name})}},3616:function(te,A,t){t.d(A,{Ed:function(){return L},FK:function(){return b},R_:function(){return D},ob:function(){return G}});var D=window.innerWidth<=1024?"90vw":"65vw",b="90vw",G="60vw",L="50vh"},12323:function(te,A,t){t.d(A,{X:function(){return D},n:function(){return b}});var D={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},b=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},24963:function(te,A,t){var D=t(67294),b=(0,D.createContext)({});A.Z=b},56757:function(te,A,t){t.r(A),t.d(A,{default:function(){return Ye}});var D=t(5574),b=t.n(D),G=t(19632),L=t.n(G),Q=t(15009),a=t.n(Q),X=t(99289),j=t.n(X),w=t(87662),R=t(88641),W=t(38345),_=t(97269),Z=t(5966),n=t(31199),K=t(63434),c=t(67294),P=t(42075),C=t(80821),g=t(1699),s=t(82346);function z(I){return O.apply(this,arguments)}function O(){return O=j()(a()().mark(function I(k){return a()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt("return",(0,s.request)("/api/common/home/email-test",{method:"POST",data:k}));case 1:case"end":return F.stop()}},I)})),O.apply(this,arguments)}var U=t(36146),e=t(85893);function H(){var I=(0,c.useRef)(),k=(0,c.useState)(""),$=b()(k,2),F=$[0],p=$[1],E=new U.Uo("components.systemBasic.systemBasicEmail");function S(){return ee.apply(this,arguments)}function ee(){return ee=j()(a()().mark(function q(){var m,M,x,d,o,T,y,r;return a()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,w.pe)({groupName:"setting",name:"emailServer"});case 2:r=h.sent,r.data&&((m=I.current)===null||m===void 0||m.setFieldsValue({host:(M=r.data.host)!==null&&M!==void 0?M:"",port:(x=r.data.port)!==null&&x!==void 0?x:"",email:(d=r.data.email)!==null&&d!==void 0?d:"",code:(o=r.data.code)!==null&&o!==void 0?o:"",status:(T=r.data.status)!==null&&T!==void 0?T:[]})),r.data&&p((y=r.data)===null||y===void 0?void 0:y.email);case 5:case"end":return h.stop()}},q)})),ee.apply(this,arguments)}return(0,e.jsx)(W.Z,{direction:"column",gutter:[0,10],ghost:!0,children:(0,e.jsx)(W.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(R.Z,{}),subTitle:E.format("cardTitle"),children:(0,e.jsxs)(_.A,{layout:"horizontal",labelAlign:"right",labelCol:{span:5,offset:0},formRef:I,onInit:j()(a()().mark(function q(){return a()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return S(),M.abrupt("return",!0);case 2:case"end":return M.stop()}},q)})),submitter:{render:function(m,M){return[].concat(L()(M),[(0,e.jsx)(C.Z,{tips:E.format("testTip",{email:F}),action:j()(a()().mark(function x(){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,z({subject:E.format("testSubject"),content:E.format("testContent",{time:new Date().toISOString()})});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},x)})),children:E.format("testButton")},"testEmail")])}},onFinish:function(){var q=j()(a()().mark(function m(M){var x;return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,w.bv)({emailServer:{host:M.host,port:M.port,email:M.email,code:M.code,status:M.status}});case 2:return(x=I.current)===null||x===void 0||x.resetFields(),S(),o.abrupt("return",!0);case 5:case"end":return o.stop()}},m)}));return function(m){return q.apply(this,arguments)}}(),children:[(0,e.jsx)(Z.Z,{label:E.format("host"),name:"host",placeholder:E.format("hostEmpty"),required:!0,rules:[{required:!0}]}),(0,e.jsx)(n.Z,{label:E.format("port"),name:"port",placeholder:E.format("portEmpty"),required:!0,rules:[{required:!0}]}),(0,e.jsx)(Z.Z,{label:E.format("code"),name:"code",width:"lg",placeholder:E.format("codeEmpty"),required:!0,rules:[{required:!0}],addonAfter:(0,e.jsxs)(P.Z,{children:[(0,e.jsx)("a",{target:"_blank",href:"https://service.mail.qq.com/detail/0/75",children:E.format("codeHelpQQ")}),(0,e.jsx)("a",{target:"_blank",href:"https://help.mail.163.com/faqDetail.do?code=d7a5dc8471cd0c0e8b4b8f4f8e49998b374173cfe9171305fa1ce630d7f67ac286624f309a1a7089",children:E.format("codeHelp163")})]})}),(0,e.jsx)(Z.Z,{label:E.format("email"),name:"email",placeholder:E.format("emailEmpty"),required:!0,rules:[{required:!0}]}),(0,e.jsx)(g.u,{access:"canSeeEnableEe",children:(0,e.jsx)(K.Z.Group,{name:"status",label:E.format("status"),options:E.option("statusOption",["register"])})})]})})})}var J=t(24963);function ue(I){return re.apply(this,arguments)}function re(){return re=j()(a()().mark(function I(k){return a()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt("return",(0,s.request)("/api/pro/two-fa/enable",{method:"POST",data:k}));case 1:case"end":return F.stop()}},I)})),re.apply(this,arguments)}function Se(){return he.apply(this,arguments)}function he(){return he=j()(a()().mark(function I(){return a()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",(0,s.request)("/api/pro/two-fa/get-setting",{method:"POST"}));case 1:case"end":return $.stop()}},I)})),he.apply(this,arguments)}var xe=t(29177),Pe=t(86548),Te=t(97937),Ce=t(12119),ne=t(97462),le=t(52688),de=t(62370),oe=t(86615),ge=t(83622),Oe=t(29104),ve={xs:6,sm:6,md:6,lg:5,xl:5,xxl:5,offset:0};function Me(){var I=(0,c.useRef)(),k=(0,s.useModel)("@@initialState"),$=k.initialState,F=k.refresh,p=(0,c.useContext)(J.Z),E=p.message,S=(0,c.useRef)(),ee=(0,c.useState)(0),q=b()(ee,2),m=q[0],M=q[1],x=(0,s.useAccess)(),d=new U.Uo("components.systemBasic.systemBasicLogin");return(0,c.useEffect)(function(){!x.canSeeEnableCe&&Se().then(function(o){var T;(T=S.current)===null||T===void 0||T.setFieldsValue({enable:o.data.enable,email:o.data.email,qrcode:o.data.qrcode})})},[m]),(0,e.jsxs)(W.Z,{direction:"column",gutter:[0,10],ghost:!0,children:[(0,e.jsx)(W.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(xe.Z,{}),subTitle:d.format("adminTitle"),children:(0,e.jsxs)(_.A,{layout:"horizontal",labelAlign:"right",labelCol:ve,formRef:I,onFinish:function(){var o=j()(a()().mark(function T(y){var r,l;return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,w.Jn)({username:y.username,password:y.password,newPassword:y.newPassword});case 2:if(r=u.sent,!(r&&r.data)){u.next=9;break}return(l=I.current)===null||l===void 0||l.resetFields(),E.success(U.FD.format("finish")),localStorage.removeItem("token"),F(),u.abrupt("return",!0);case 9:case"end":return u.stop()}},T)}));return function(T){return o.apply(this,arguments)}}(),children:[(0,e.jsx)(ne.Z,{name:["enableUsername"],children:function(T){var y=T.enableUsername;return(0,e.jsx)(Z.Z,{label:d.format("adminUsername"),name:"username",style:{width:"80%"},initialValue:$==null?void 0:$.user.username,disabled:!y,addonAfter:[(0,e.jsx)(ge.ZP,{type:"link",hidden:!!y,icon:(0,e.jsx)(Pe.Z,{}),onClick:function(){var l;(l=I.current)===null||l===void 0||l.setFieldValue("enableUsername",!0)}},"editBtn"),(0,e.jsx)(ge.ZP,{type:"link",hidden:!y,icon:(0,e.jsx)(Te.Z,{}),onClick:function(){var l;(l=I.current)===null||l===void 0||l.setFieldValue("enableUsername",!1)}},"closeBtn")]},"username")}}),(0,e.jsx)(Z.Z.Password,{label:d.format("adminPassword"),name:"password",placeholder:d.format("adminPasswordEmpty"),rules:[{required:!0}]},"password"),(0,e.jsx)(Z.Z.Password,{label:d.format("adminNewPassword"),name:"newPassword"},"newPasword"),(0,e.jsx)(ne.Z,{name:["newPassword"],children:function(T){var y=T.newPassword;return(0,e.jsx)(Z.Z.Password,{label:d.format("adminNewPassword2"),name:"newPassword2",dependencies:["newPassword"],rules:[{required:typeof y!="undefined"&&y!=""},function(r){var l=r.getFieldValue;return{validator:function(u,i){return!i||l("newPassword")===i?Promise.resolve():Promise.reject(new Error(d.format("adminMessagePasswordNotMatch")))}}}]},"newPasword2")}})]})}),(0,e.jsx)(W.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(Ce.Z,{}),subTitle:d.format("loginTitle"),children:(0,e.jsx)(_.A,{onFinish:function(){var o=j()(a()().mark(function T(y){var r,l;return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(x.canSeeEnableCe){u.next=5;break}return u.next=3,ue({email:y.twoFaEmail,enable:y.twoFaEnable});case 3:r=u.sent,r&&r.data.qrcode&&((l=S.current)===null||l===void 0||l.setFieldValue("towFaQrcode",r.data.qrcode));case 5:return u.next=7,(0,w.bv)({login:{failedEnable:y.loginFailedEnable,failedTotal:parseInt(y.loginFailedTotal),failedLockTime:parseInt(y.loginFailedLockTime)}});case 7:E.success(U.FD.format("finish")),M(m+1);case 9:case"end":return u.stop()}},T)}));return function(T){return o.apply(this,arguments)}}(),formRef:S,layout:"horizontal",labelAlign:"right",labelCol:ve,children:(0,e.jsx)(g.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(T){var y=T.canSeeEnableCe;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(le.Z,{disabled:y,label:d.format("loginTwoFaEnable"),name:"twoFaEnable"}),(0,e.jsx)(ne.Z,{name:["twoFaEnable"],children:function(l){var h=l.twoFaEnable;return(0,e.jsx)(Z.Z,{label:d.format("loginTwoFaEmail"),name:"twoFaEmail",disabled:y,placeholder:d.format("loginTwoFaEmailEmpty"),rules:[{required:h},{type:"email"}]})}}),(0,e.jsx)(de.Z,{name:"towFaQrcode",hidden:!0}),(0,e.jsx)(ne.Z,{name:["towFaQrcode"],children:function(l){var h=l.towFaQrcode;if(h)return(0,e.jsx)(de.Z,{label:d.format("loginTwoFaQrcode"),tooltip:d.format("loginTwoFaQrcodeTip"),children:(0,e.jsx)(Oe.Z,{style:{border:"#d1d9e0b3 solid 1px",padding:"10px",borderRadius:"10px"},width:200,src:"data:image/png;base64,".concat(h)})})}}),(0,e.jsx)(le.Z,{label:d.format("loginFailedEnable"),name:"loginFailedEnable",initialValue:!0}),(0,e.jsx)(Z.Z,{name:"loginFailedTotal",label:d.format("loginFailedTotal"),initialValue:5,fieldProps:{addonAfter:U.FD.format("unitTimes")}}),(0,e.jsx)(oe.Z.Group,{name:"loginFailedLockTime",label:d.format("loginFailedLockTime"),initialValue:"900",options:d.option("loginFailedLockTimeOption",["300","900","3600","18000","-1"])})]})}})})})]})}var Ue=t(43425),Ze=t(19400),ce=t(64317),Y=t(24739),Be=t(47221),Ie=t(86125),_e=t(86250),pe=t(2487),Le=t(4393),we=t(71230),Re=t(15746),We=t(40411),Fe=t(184),Ae=t(25054),De=t(90672),Ke=t(21532),$e=t(44349),me=t(65451),ze=t(2808),ke=t(3616),be=t(51100),ie={colorPrimary:"",colorTextBase:"",colorLink:"",colorBgContainer:"",colorBorder:"",colorBgElevated:"",colorBorderSecondary:"colorBorder"},je=["borderRadius","wireframe"],Ve=(0,c.forwardRef)(function(I,k){(0,c.useImperativeHandle)(k,function(){return{show:function(){E(!0)},reset:function(){var d;(d=S.current)===null||d===void 0||d.resetFields(["siteLogo","siteTitle","siteCopyright","siteLink","bgImage","bgSize"])}}});var $=(0,c.useState)(!1),F=b()($,2),p=F[0],E=F[1],S=(0,c.useRef)(),ee=(0,c.useContext)(J.Z),q=ee.message,m=new U.Uo("components.systemBasic.systemBasicThemeUser"),M=function(d){return(0,e.jsx)(ze.Z,{name:d.name,label:m.format(d.name),tooltip:d.tooltip})};return(0,e.jsx)(Ke.ZP,{children:(0,e.jsxs)(Fe.a,{drawerProps:{forceRender:!0,width:ke.R_},submitter:{render:function(d,o){return(0,e.jsx)(P.Z,{children:o[1]})}},title:m.format("drawerTitle"),formRef:S,open:p,onOpenChange:function(){var x=j()(a()().mark(function d(o){var T,y,r,l,h,u;return a()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if((T=S.current)===null||T===void 0||T.resetFields(["bgImageUpload","siteLogoUpload"]),!o){f.next=8;break}return f.next=4,(0,me.Py)();case 4:y=f.sent,r=y.data.config,r&&(je.forEach(function(B){if(r.token&&r.token[B]){var v,V;(v=S.current)===null||v===void 0||v.setFieldValue("enableStyle",!0),(V=S.current)===null||V===void 0||V.setFieldValue(B,r.token[B])}}),(l=S.current)===null||l===void 0||l.setFieldsValue({siteLogo:r.siteLogo,siteTitle:r.siteTitle,siteCopyright:r.siteCopyright,siteLink:r.siteLink,bgImage:r.bgImage,loginLogo:r.loginLogo}),!r.bgImage||!r.bgImage.width||r.bgImage.width=="100%"?(h=S.current)===null||h===void 0||h.setFieldValue("bgSize","full"):(u=S.current)===null||u===void 0||u.setFieldValue("bgSize","default")),Object.keys(ie).map(function(B){var v=B;ie[B]!=""&&(v=ie[B]),S!=null&&S.current&&r.token&&(S==null||S.current.setFieldValue("enableColor",!0),S==null||S.current.setFieldValue(B,r.token[v]))});case 8:E(o);case 9:case"end":return f.stop()}},d)}));return function(d){return x.apply(this,arguments)}}(),name:"theme-user",onFinish:function(){var x=j()(a()().mark(function d(o){var T,y,r;return a()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return r={token:{},bgImage:o.bgImage,siteLink:o.siteLink,siteTitle:(T=o.siteTitle)!==null&&T!==void 0?T:"",siteCopyright:o.siteCopyright,siteLogo:(y=o.siteLogo)!==null&&y!==void 0?y:"",loginLogo:o.loginLogo},o.siteLogoUpload&&o.siteLogoUpload.length>0&&(r.siteLogo=o.siteLogoUpload[0].response.data.path),r.bgImage||(r.bgImage={}),o.bgImageUpload&&o.bgImageUpload.length>0&&(r.bgImage.src=o.bgImageUpload[0].response.data.path),r.bgImage.width=o.bgSize=="full"?"100%":"",o.loginLogoUpload&&o.loginLogoUpload.length>0&&(r.loginLogo=o.loginLogoUpload[0].response.data.path),Object.keys(ie).map(function(u){r.token||(r.token={});var i=u;ie[u]!=""&&(i=ie[u]);var f=S.current&&S.current.getFieldValue(i);f&&f.toHexString?f.cleared||(r.token[u]=f.toHexString()):r.token[u]=f}),je.map(function(u){r.token||(r.token={});var i=S.current&&S.current.getFieldValue(u);r.token[u]=i}),h.next=10,(0,me.Z8)(r);case 10:return I.onFinish&&I.onFinish(),q.success(U.FD.format("finishTheme")),h.abrupt("return",!0);case 13:case"end":return h.stop()}},d)}));return function(d){return x.apply(this,arguments)}}(),children:[(0,e.jsx)(Y.UW,{title:m.format("colorTitle"),extra:(0,e.jsx)(le.Z,{name:"enableColor"})}),(0,e.jsx)(ne.Z,{name:["enableColor"],children:function(d){var o=d.enableColor;return o&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Y.UW,{children:M({name:"colorPrimary",tooltip:m.format("colorPrimaryTip")})}),(0,e.jsxs)(Y.UW,{children:[M({name:"colorBgContainer"}),M({name:"colorBgElevated"})]}),(0,e.jsxs)(Y.UW,{children:[M({name:"colorTextBase"}),M({name:"colorLink"}),M({name:"colorBorder"})]})]})}}),(0,e.jsx)(Y.UW,{title:"\u98CE\u683C",extra:(0,e.jsx)(le.Z,{name:"enableStyle"})}),(0,e.jsx)(ne.Z,{name:["enableStyle"],children:function(d){var o=d.enableStyle;return o&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Y.UW,{children:(0,e.jsxs)(_e.Z,{gap:40,children:[(0,e.jsx)(le.Z,{label:m.format("wireframe"),name:"wireframe"}),(0,e.jsx)(Ae.Z,{min:1,max:16,label:m.format("borderRadius"),name:"borderRadius"})]})})})}}),(0,e.jsx)(Y.UW,{title:m.format("uiTitle")}),(0,e.jsx)(Z.Z,{label:m.format("siteTitle"),name:"siteTitle",placeholder:m.format("siteTitleEmpty")}),(0,e.jsxs)(Y.UW,{children:[(0,e.jsx)(be.Z,{label:"Logo",title:m.format("siteLogoUploadTitle"),name:"siteLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(Z.Z,{width:"md",placeholder:m.format("siteLogoEmpty"),label:m.format("siteLogo"),name:"siteLogo"})]}),(0,e.jsxs)(Y.UW,{children:[(0,e.jsx)(be.Z,{label:m.format("bgImageUpload"),title:m.format("bgImageUploadTitle"),name:"bgImageUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(Z.Z,{width:"md",placeholder:m.format("siteLogoEmpty"),label:m.format("bgImageSrc"),name:["bgImage","src"]}),(0,e.jsx)(oe.Z.Group,{name:"bgSize",label:m.format("bgImageBgSize"),initialValue:"full",options:m.option("bgImageBgSizeOption",["full","default"])})]}),(0,e.jsx)(Y.UW,{children:(0,e.jsx)(ne.Z,{name:["bgSize"],children:function(d){var o=d.bgSize;if(o=="default")return(0,e.jsxs)(Y.UW,{children:[(0,e.jsx)(n.Z,{width:"xs",name:["bgImage","top"],label:m.format("bgImageTop")}),(0,e.jsx)(n.Z,{width:"xs",name:["bgImage","bottom"],label:m.format("bgImageBottom")}),(0,e.jsx)(n.Z,{width:"xs",name:["bgImage","left"],label:m.format("bgImageLeft")}),(0,e.jsx)(n.Z,{width:"xs",name:["bgImage","right"],label:m.format("bgImageRight")})]})}})}),(0,e.jsx)($e.Z,{name:"siteLink",label:m.format("siteLink"),showAddButton:!0,hideCopyButton:!0,gap:10,items:m.option("siteLinkOption",["title","href"]).map(function(x){return{name:x.value,label:x.label}})}),(0,e.jsx)(De.Z,{label:m.format("siteCopyright"),name:"siteCopyright"}),(0,e.jsxs)(Y.UW,{title:m.format("uiLoginTitle"),children:[(0,e.jsx)(be.Z,{label:"Logo",title:"Logo",name:"loginLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(Z.Z,{width:"md",placeholder:m.format("siteLogoEmpty"),label:m.format("loginLogo"),name:"loginLogo"})]})]})})}),He=Ve,Ee=t(12323),Ne=t(64304),fe=t.n(Ne);function Ge(){var I=(0,c.useRef)(),k=(0,c.useRef)(),$=(0,c.useRef)(),F=(0,s.useModel)("@@initialState"),p=F.initialState,E=(0,s.useAccess)(),S=(0,c.useContext)(J.Z),ee=S.message,q=(0,s.useAntdConfigSetter)(),m=(0,c.useState)(),M=b()(m,2),x=M[0],d=M[1],o=(0,c.useState)(),T=b()(o,2),y=T[0],r=T[1],l=new U.Uo("components.systemBasic.systemBasicTheme");return(0,c.useEffect)(function(){var h,u,i,f,B,v,V,N;(h=I.current)===null||h===void 0||h.setFieldsValue({algorithm:(u=p==null?void 0:p.theme.algorithm)!==null&&u!==void 0?u:"default",mainMenu:(i=p==null?void 0:p.theme.mainMenu)!==null&&i!==void 0?i:"top",compact:(f=p==null?void 0:p.theme.compact)!==null&&f!==void 0?f:"default",fontSize:(B=p==null?void 0:p.theme.fontSize)!==null&&B!==void 0?B:14,fontSizeConsole:(v=p==null?void 0:p.theme.fontSizeConsole)!==null&&v!==void 0?v:12,sideMenu:(V=p==null?void 0:p.theme.sideMenu)!==null&&V!==void 0?V:"default",tablePageSize:(N=p==null?void 0:p.theme.tablePageSize)!==null&&N!==void 0?N:"20"})},[p]),(0,e.jsx)(Be.Z,{accordion:!0,defaultActiveKey:"basic",items:[{key:"basic",label:l.format("basicTitle"),children:(0,e.jsxs)(W.Z,{ghost:!0,children:[!E.canSeeEnableCe&&(0,e.jsx)(He,{ref:k}),(0,e.jsxs)(_.A,{layout:"horizontal",labelAlign:"right",labelCol:ve,formRef:I,submitter:{render:function(u,i){return[i[1]]}},onFinish:function(){var h=j()(a()().mark(function u(i){var f;return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(f={algorithm:i.algorithm,mainMenu:i.mainMenu,sideMenu:i.sideMenu,compact:i.compact,fontSizeConsole:i.fontSizeConsole,fontSize:i.fontSize,tablePageSize:i.tablePageSize},!(i.algorithm!=(p==null?void 0:p.theme.algorithm)&&!E.canSeeEnableCe)){v.next=4;break}return v.next=4,(0,me.H)({clearColor:!0});case 4:return localStorage.setItem("dpanel-theme",i.algorithm),localStorage.setItem("dpanel-compact",i.compact),localStorage.setItem("dpanel-pagesize",i.tablePageSize),v.next=9,(0,w.bv)({theme:f});case 9:ee.success(U.FD.format("finishTheme"));case 10:case"end":return v.stop()}},u)}));return function(u){return h.apply(this,arguments)}}(),children:[(0,e.jsx)(oe.Z.Group,{name:"algorithm",label:l.format("basicAlgorithm"),initialValue:"default",radioType:"button",options:l.option("basicAlgorithmOption",["default","dark","system"])}),(0,e.jsx)(g.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(u){var i=u.canSeeEnableCe;return(0,e.jsx)(ne.Z,{name:["algorithm"],children:function(B){var v=B.algorithm;return(0,e.jsx)(de.Z,{label:l.format("basicUserTheme"),children:(0,e.jsxs)(P.Z.Compact,{children:[(0,e.jsx)(ge.ZP,{disabled:i||v=="system",onClick:function(){var N;(N=k.current)===null||N===void 0||N.show()},icon:(0,e.jsx)(Ue.Z,{}),children:l.format("basicUserThemeButton")}),(0,e.jsx)(C.Z,{disabled:i||v=="system",action:j()(a()().mark(function V(){var N;return a()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,(0,me.H)({clearColor:!0,clearSite:!0});case 2:q(function(ye){return ye.theme={token:{}},ye}),(N=k.current)===null||N===void 0||N.reset(),window.location.reload();case 5:case"end":return ae.stop()}},V)})),children:l.format("basicUserThemeDefaultButton")})]})})}})}}),(0,e.jsx)(oe.Z.Group,{name:"mainMenu",label:l.format("basicMainMenu"),initialValue:"top",radioType:"button",options:l.option("basicMainMenuOption",["top","side"])}),(0,e.jsx)(oe.Z.Group,{name:"sideMenu",label:l.format("basicSideMenu"),initialValue:"default",radioType:"button",options:l.option("basicSideMenuOption",["default","collapse"])}),(0,e.jsx)(oe.Z.Group,{name:"compact",label:l.format("basicCompact"),initialValue:"default",radioType:"button",options:l.option("basicCompactOption",["default","compact"])}),(0,e.jsx)(de.Z,{name:"fontSize",label:l.format("basicFontSize"),initialValue:14,children:(0,e.jsx)(Ie.Z,{step:2,max:30,min:8,marks:{8:"8",10:"10",12:"12",14:"14",16:"16",20:"20",26:"26",30:"20"}})}),(0,e.jsx)(ce.Z,{initialValue:"20",label:l.format("basicTablePageSize"),name:"tablePageSize",options:l.option("basicTablePageSizeOption",["10","20","50","100","all"])})]})]})},{key:"console",label:l.format("consoleTitle"),children:(0,e.jsx)(W.Z,{ghost:!0,children:(0,e.jsxs)(_.A,{submitter:{render:function(u,i){return[i[1]]}},request:j()(a()().mark(function h(){var u,i,f;return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return i=Ee.X,v.next=3,(0,w.pe)({groupName:"setting",name:"themeConsoleConfig"});case 3:return f=v.sent,f.data&&Object.assign(i,f.data),!E.canSeeEnableCe&&f.data&&(u=f.data)!==null&&u!==void 0&&u.themeName&&f.data.themeName!=""&&Object.keys(fe()).forEach(function(V,N){V==f.data.themeName&&(r(Math.ceil((N+1)/36)),d(f.data.themeName))}),v.abrupt("return",{fontSize:i.fontSize,lineHeight:i.lineHeight,letterSpacing:i.letterSpacing,fontWeight:i.fontWeight,cursorStyle:i.cursorStyle,cursorInactiveStyle:i.cursorInactiveStyle,cursorBlink:i.cursorBlink});case 7:case"end":return v.stop()}},h)})),formRef:$,onFinish:function(){var h=j()(a()().mark(function u(i){var f;return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return f={fontSize:i.fontSize,lineHeight:i.lineHeight,letterSpacing:i.letterSpacing,fontWeight:i.fontWeight,cursorStyle:i.cursorStyle,cursorInactiveStyle:i.cursorInactiveStyle,cursorBlink:i.cursorBlink,theme:{},themeName:""},x!=""&&!E.canSeeEnableCe&&(f.theme=fe()[x],f.themeName=x),v.next=4,(0,w.bv)({console:f});case 4:return ee.success(U.FD.format("finishTheme")),v.abrupt("return",!1);case 6:case"end":return v.stop()}},u)}));return function(u){return h.apply(this,arguments)}}(),children:[(0,e.jsx)(Y.UW,{title:l.format("consoleFont"),children:(0,e.jsxs)(_e.Z,{gap:50,children:[(0,e.jsx)(n.Z,{label:l.format("consoleFontSize"),name:"fontSize",tooltip:l.format("consoleFontSizeTip"),fieldProps:{addonAfter:"px"}}),(0,e.jsx)(n.Z,{label:l.format("consoleLineHeight"),name:"lineHeight",tooltip:l.format("consoleLineHeightTip"),fieldProps:{addonAfter:l.format("consoleLineHeightUnit")}}),(0,e.jsx)(n.Z,{label:l.format("consoleLetterSpacing"),name:"letterSpacing",fieldProps:{addonAfter:"px"},tooltip:l.format("consoleLetterSpacingTip")}),(0,e.jsx)(ce.Z,{label:l.format("consoleFontWeight"),name:"fontWeight",options:[{label:"normal",value:"normal"},{label:"bold",value:"bold"},{label:"100",value:"100"},{label:"200",value:"200"},{label:"300",value:"300"},{label:"400",value:"400"},{label:"500",value:"500"},{label:"600",value:"600"},{label:"700",value:"700"},{label:"800",value:"800"},{label:"900",value:"900"}]})]})}),(0,e.jsx)(Y.UW,{title:l.format("consoleCursorStyleTitle"),children:(0,e.jsxs)(_e.Z,{gap:50,children:[(0,e.jsx)(ce.Z,{label:l.format("consoleCursorStyle"),name:"cursorStyle",width:"sm",options:l.option("consoleCursorStyleOption",["bar","underline","block"])}),(0,e.jsx)(ce.Z,{label:l.format("consoleCursorInactiveStyle"),name:"cursorInactiveStyle",width:"sm",options:l.option("consoleCursorStyleOption",["bar","underline","block","outline"])}),(0,e.jsx)(le.Z,{label:l.format("consoleCursorBlink"),name:"cursorBlink"})]})}),(0,e.jsx)(g.u,{showProRibbonTips:!0,access:"canSeeEnableCe",children:function(u){var i=u.canSeeEnableCe;return(0,e.jsx)(W.Z,{ghost:!0,title:(0,e.jsx)(Ze.Z,{}),subTitle:l.format("consoleTheme"),children:(0,e.jsx)(pe.Z,{split:!0,style:{overflow:"hidden"},grid:{column:6},pagination:{pageSize:36,current:y,onChange:function(B,v){r(B)}},dataSource:Object.keys(fe()).map(function(f){return{label:f,value:f,data:fe()[f]}}),renderItem:function(B,v){var V=B.data,N=(0,e.jsxs)(Le.Z,{style:{backgroundColor:V.background,color:V.foreground,textAlign:"center",cursor:i?"not-allowed":"pointer",borderRadius:0},onClick:function(){if(!i){var ae;(ae=$.current)===null||ae===void 0||ae.setFieldValue("theme",B.data),d(B.label)}},hoverable:!0,children:[(0,e.jsx)(we.Z,{wrap:!0,gutter:[2,2],justify:"center",align:"middle",children:Ee.n.filter(function(se){return V[se]!=""}).map(function(se){return(0,e.jsx)(Re.Z,{style:{backgroundColor:V[se],padding:8}},se)})}),(0,e.jsx)("div",{style:{paddingTop:5},children:B.label})]});return(0,e.jsx)(pe.Z.Item,{style:{margin:0},children:x==B.label?(0,e.jsx)(We.Z.Ribbon,{text:"Checked",children:N}):N},v)}})})}})]})})}]})}var Qe=t(90078),Xe=t(92398);function Ye(){var I=(0,c.useState)("user"),k=b()(I,2),$=k[0],F=k[1],p=(0,s.useAccess)(),E=(0,s.useLocation)();return(0,c.useEffect)(function(){E.state&&F(E.state.tag)},[E.state]),(0,e.jsx)(Qe._z,{children:(0,e.jsx)(W.Z,{children:(0,e.jsx)(Xe.Z,{activeKey:$,onChange:function(ee){F(ee)},items:[{key:"user",label:new U.Uo("components.systemBasic.systemBasicLogin").format("title"),children:(0,e.jsx)(Me,{})},{key:"theme",label:new U.Uo("components.systemBasic.systemBasicTheme").format("title"),children:(0,e.jsx)(Ge,{})},{key:"notice",label:new U.Uo("components.systemBasic.systemBasicEmail").format("title"),children:(0,e.jsx)(H,{}),disabled:p.canSeeEnableCe}]})})})}},97961:function(te,A,t){t.d(A,{GH:function(){return W},_2:function(){return Z},fN:function(){return X},ii:function(){return a},vC:function(){return w}});var D=t(15009),b=t.n(D),G=t(99289),L=t.n(G),Q=t(82346),a=[{name:"amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"i386",arch:"386",search:[]},{name:"arm/v6",arch:"arm",search:[]},{name:"arm/v7",arch:"arm",search:[]},{name:"arm/v8",arch:"arm64",search:[]},{name:"ppc64le",arch:"ppc64le",search:[]},{name:"riscv64",arch:"riscv64",search:[]}];function X(P){return j.apply(this,arguments)}function j(){return j=L()(b()().mark(function P(C){return b()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,Q.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:C}));case 1:case"end":return s.stop()}},P)})),j.apply(this,arguments)}function w(P){return R.apply(this,arguments)}function R(){return R=L()(b()().mark(function P(C){return b()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,Q.request)("/api/app/image/import-by-container-tar",{method:"POST",data:C}));case 1:case"end":return s.stop()}},P)})),R.apply(this,arguments)}function W(P){return _.apply(this,arguments)}function _(){return _=L()(b()().mark(function P(C){return b()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,Q.request)("/api/app/image/import-by-image-tar",{method:"POST",data:C}));case 1:case"end":return s.stop()}},P)})),_.apply(this,arguments)}function Z(P){return n.apply(this,arguments)}function n(){return n=L()(b()().mark(function P(C){return b()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,Q.request)("/api/common/attach/delete",{method:"POST",data:C});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},P)})),n.apply(this,arguments)}function K(){return c.apply(this,arguments)}function c(){return c=_asyncToGenerator(_regeneratorRuntime().mark(function P(){return _regeneratorRuntime().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",request("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return g.stop()}},P)})),c.apply(this,arguments)}}}]);
