"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4037],{12119:function(re,B,e){e.d(B,{Z:function(){return x}});var a=e(87462),p=e(67294),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M608 112c-167.9 0-304 136.1-304 304 0 70.3 23.9 135 63.9 186.5l-41.1 41.1-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-44.9 44.9-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-65.3 65.3a8.03 8.03 0 000 11.3l42.3 42.3c3.1 3.1 8.2 3.1 11.3 0l253.6-253.6A304.06 304.06 0 00608 720c167.9 0 304-136.1 304-304S775.9 112 608 112zm161.2 465.2C726.2 620.3 668.9 644 608 644c-60.9 0-118.2-23.7-161.2-66.8-43.1-43-66.8-100.3-66.8-161.2 0-60.9 23.7-118.2 66.8-161.2 43-43.1 100.3-66.8 161.2-66.8 60.9 0 118.2 23.7 161.2 66.8 43.1 43 66.8 100.3 66.8 161.2 0 60.9-23.7 118.2-66.8 161.2z"}}]},name:"key",theme:"outlined"},b=L,O=e(84089),U=function(A,j){return p.createElement(O.Z,(0,a.Z)({},A,{ref:j,icon:b}))},y=p.forwardRef(U),x=y},63434:function(re,B,e){var a=e(1413),p=e(45987),L=e(22270),b=e(84567),O=e(67294),U=e(90789),y=e(35510),x=e(85893),N=["options","fieldProps","proFieldProps","valueEnum"],A=O.forwardRef(function(c,Z){var w=c.options,M=c.fieldProps,Y=c.proFieldProps,G=c.valueEnum,V=(0,p.Z)(c,N);return(0,x.jsx)(y.Z,(0,a.Z)({ref:Z,valueType:"checkbox",valueEnum:(0,L.h)(G,void 0),fieldProps:(0,a.Z)({options:w},M),lightProps:(0,a.Z)({labelFormatter:function(){return(0,x.jsx)(y.Z,(0,a.Z)({ref:Z,valueType:"checkbox",mode:"read",valueEnum:(0,L.h)(G,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,a.Z)({options:w},M),proFieldProps:Y},V))}},V.lightProps),proFieldProps:Y},V))}),j=O.forwardRef(function(c,Z){var w=c.fieldProps,M=c.children;return(0,x.jsx)(b.Z,(0,a.Z)((0,a.Z)({ref:Z},w),{},{children:M}))}),$=(0,U.G)(j,{valuePropName:"checked"}),z=$;z.Group=A,B.Z=z},66139:function(re,B,e){e.r(B),e.d(B,{default:function(){return me}});var a=e(15009),p=e.n(a),L=e(99289),b=e.n(L),O=e(5574),U=e.n(O),y=e(68602),x=e(89075),N=e(68262),A=e(82346),j=e(9361),$=e(40056),z=e(86250),c=e(25593),Z=e(67294),w=e(36146),M=e(29177),Y=e(88360),G=e(94149),V=e(12119),X=e(5966),ie=e(97462),te=e(63434),ce=e(92398),de=e(55241),ue=e(42075),o=e(85893);function oe(R){var H,m=new w.Uo("user");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ce.Z,{centered:!0,activeKey:R.loginType,items:[{icon:(0,o.jsx)(M.Z,{}),key:"login",label:m.format("title")},{icon:(0,o.jsx)(Y.Z,{}),key:"register",label:m.format("registerTitle")}].filter(function(q){return q.key==R.loginType})}),(0,o.jsx)(X.Z,{name:"username",fieldProps:{size:"large",prefix:(0,o.jsx)(M.Z,{className:"prefixIcon"})},placeholder:m.format("formUsernameEmpty"),rules:[{required:!0,message:m.format("formUsernameEmpty")}]},"username"),(0,o.jsx)(X.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,o.jsx)(G.Z,{className:"prefixIcon"})},placeholder:m.format("formPasswordEmpty"),rules:[{required:!0,message:m.format("formPasswordEmpty")}]},"password"),R.showTwoFa&&(0,o.jsx)(X.Z,{name:"code",placeholder:m.format("formTwofaEmpty"),rules:[{required:!0}],fieldProps:{maxLength:6,size:"large",prefix:(0,o.jsx)(V.Z,{className:"prefixIcon"})}}),R.loginType=="register"&&(0,o.jsx)(ie.Z,{name:["password"],children:function(ae){var fe=ae.password;return(0,o.jsx)(X.Z.Password,{fieldProps:{size:"large",prefix:(0,o.jsx)(G.Z,{className:"prefixIcon"})},placeholder:m.format("formConfirmPasswordEmpty"),name:"confirmPassword",dependencies:["password"],rules:[{required:!0,message:m.format("formConfirmPasswordEmpty")},function(se){var le=se.getFieldValue;return{validator:function(ee,n){return!n||le("password")===n?Promise.resolve():Promise.reject(new Error(m.format("formMessagePasswordNotMatch")))}}}]},"confirmPassword")}}),R.showAutoLogin&&(0,o.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,o.jsx)(te.Z,{noStyle:!0,name:"autoLogin",initialValue:!0,children:m.format("formAutoLogin")}),(0,o.jsx)(de.Z,{content:(0,o.jsxs)(ue.Z,{direction:"vertical",size:[0,30],children:[(0,o.jsxs)("span",{children:[m.format("formUserResetTip"),", ",(0,o.jsx)("a",{href:"https://dpanel.cc/#/zh-cn/install/ctrl",target:"_blank",children:w.FD.format("help")})]}),(0,o.jsxs)(c.Z.Text,{copyable:!0,style:{padding:10,background:"#24292f",color:"#ffffff"},children:["docker exec ",(H=R.appName)!==null&&H!==void 0?H:"dpanel"," ./dpanel user:reset -f config.yaml"]}),(0,o.jsx)("span",{})]}),children:(0,o.jsx)(c.Z.Link,{style:{float:"right"},children:m.format("formUserReset")})})]})]})}var me=function(){var R=j.Z.useToken(),H=R.token,m=(0,A.useModel)("@@initialState"),q=m.initialState,ae=m.loading,fe=m.error,se=m.refresh,le=m.setInitialState,_=(0,Z.useState)({loginType:"account",appName:"dpanel"}),ee=U()(_,2),n=ee[0],r=ee[1],s=(0,Z.useState)(),l=U()(s,2),t=l[0],g=l[1],C=(0,Z.useState)(),E=U()(C,2),I=E[0],S=E[1],K=(0,A.useAntdConfigSetter)(),D=(0,Z.useRef)(),v=new w.Uo("user");return(0,Z.useEffect)(function(){window.document.title=v.format("documentTitle"),(0,y.Nr)().then(function(){var F=b()(p()().mark(function f(u){var h;return p()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:v.appendXk(u.data.feature.includes("canSeeEnableXk")),h={loginType:"account"},u.data.showBuildName&&u.data.family!="lite"&&(h.showBuildName=!0),u.data.showRegister&&(h.loginType="register"),u.data.family=="demo"&&(h.showDemo=!0),h.appName=u.data.appName,u.data.theme&&u.data.theme.algorithm&&(localStorage.setItem("dpanel-theme",u.data.theme.algorithm),K(function(d){var k;(k=d.theme)!==null&&k!==void 0||(d.theme={});var ne=[];return u.data.theme&&(u.data.theme.algorithm=="dark"?ne.push(j.Z.darkAlgorithm):ne.push(j.Z.defaultAlgorithm),d.theme.algorithm=ne),d})),u.data.feature.indexOf("canSeeEnableThemeUser")!=-1?(0,x.ax)().then(function(d){d.data&&d.data.themeUserConfig&&d.data.themeUserConfig.siteTitle&&(window.document.title=d.data.themeUserConfig.siteTitle),g(d.data)}):g({}),S(u.data),r(h);case 10:case"end":return J.stop()}},f)}));return function(f){return F.apply(this,arguments)}}())},[]),(0,o.jsxs)(o.Fragment,{children:[n&&n.showBuildName&&(0,o.jsx)($.Z,{type:"error",message:v.format("tipShowBuildName"),banner:!0}),n&&n.showDemo&&(0,o.jsx)($.Z,{type:"error",message:v.format("tipShowDemo"),banner:!0}),(0,o.jsx)(z.Z,{justify:"center",align:"center",style:{height:"100vh",background:t&&t.themeUserConfig&&t.themeUserConfig.bgImage&&t.themeUserConfig.bgImage.src?"url(".concat(t.themeUserConfig.bgImage.src,")"):"".concat(H.colorBgElevated,"dd")},children:(0,o.jsxs)(N.U,{onFinish:function(){var F=b()(p()().mark(function f(u){var h,Q;return p()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(n.loginType!="register"){d.next=3;break}return d.next=3,(0,y.AT)({username:u.username,password:u.password,confirmPassword:u.confirmPassword});case 3:return d.prev=3,d.next=6,(0,y.n$)({username:u.username,password:u.password,autoLogin:u.autoLogin,code:u.code});case 6:if(h=d.sent,!h.data.accessToken){d.next=14;break}return localStorage.setItem("token",h.data.accessToken),se(),window.location.href="/dpanel/ui",d.abrupt("return");case 14:return d.abrupt("return",!1);case 15:d.next=20;break;case 17:d.prev=17,d.t0=d.catch(3),(Q=D.current)===null||Q===void 0||Q.resetFields(["code"]);case 20:case"end":return d.stop()}},f,null,[[3,17]])}));return function(f){return F.apply(this,arguments)}}(),containerStyle:{background:"transparent",height:"auto"},logo:"",title:t&&(0,o.jsx)("img",{src:t&&t.themeUserConfig&&t.themeUserConfig.loginLogo?t.themeUserConfig.loginLogo:"/dpanel/static/asset/logo.png",width:"350"}),subTitle:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("br",{}),(0,o.jsx)("br",{})]}),formRef:D,children:[(0,o.jsx)(oe,{showTwoFa:!!(t&&t.canSeeEnableTwoFa),loginType:n.loginType,appName:n.appName,showAutoLogin:!(I!=null&&I.feature.includes("canSeeEnableXk"))}),(0,o.jsxs)(c.Z.Paragraph,{style:{marginBottom:10,color:"#999999",textAlign:"center"},children:[v.format("agree"),(0,o.jsx)("a",{href:v.format("userAgreementUrl"),target:"_blank",children:v.format("userAgreement")}),(0,o.jsx)("a",{href:v.format("userPrivacyUrl"),target:"_blank",children:v.format("userPrivacy")})]})]})})]})}},89075:function(re,B,e){e.d(B,{$w:function(){return U},YQ:function(){return x},ax:function(){return A}});var a=e(15009),p=e.n(a),L=e(99289),b=e.n(L),O=e(82346);function U(){return y.apply(this,arguments)}function y(){return y=b()(p()().mark(function $(){return p()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,O.request)("/api/pro/home/get-machine-id",{method:"POST"}));case 1:case"end":return c.stop()}},$)})),y.apply(this,arguments)}function x(){return N.apply(this,arguments)}function N(){return N=b()(p()().mark(function $(){return p()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,O.request)("/api/pro/home/get-license-info",{method:"POST"}));case 1:case"end":return c.stop()}},$)})),N.apply(this,arguments)}function A(){return j.apply(this,arguments)}function j(){return j=b()(p()().mark(function $(){return p()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,O.request)("/api/pro/home/login-info",{method:"POST"}));case 1:case"end":return c.stop()}},$)})),j.apply(this,arguments)}},40056:function(re,B,e){e.d(B,{Z:function(){return ee}});var a=e(67294),p=e(89739),L=e(4340),b=e(97937),O=e(21640),U=e(78860),y=e(93967),x=e.n(y),N=e(29372),A=e(64217),j=e(42550),$=e(96159),z=e(53124),c=e(11568),Z=e(14747),w=e(83559);const M=(n,r,s,l,t)=>({background:n,border:`${(0,c.bf)(l.lineWidth)} ${l.lineType} ${r}`,[`${t}-icon`]:{color:s}}),Y=n=>{const{componentCls:r,motionDurationSlow:s,marginXS:l,marginSM:t,fontSize:g,fontSizeLG:C,lineHeight:E,borderRadiusLG:I,motionEaseInOutCirc:S,withDescriptionIconSize:K,colorText:D,colorTextHeading:v,withDescriptionPadding:F,defaultPadding:f}=n;return{[r]:Object.assign(Object.assign({},(0,Z.Wf)(n)),{position:"relative",display:"flex",alignItems:"center",padding:f,wordWrap:"break-word",borderRadius:I,[`&${r}-rtl`]:{direction:"rtl"},[`${r}-content`]:{flex:1,minWidth:0},[`${r}-icon`]:{marginInlineEnd:l,lineHeight:0},"&-description":{display:"none",fontSize:g,lineHeight:E},"&-message":{color:v},[`&${r}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${s} ${S}, opacity ${s} ${S},
        padding-top ${s} ${S}, padding-bottom ${s} ${S},
        margin-bottom ${s} ${S}`},[`&${r}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${r}-with-description`]:{alignItems:"flex-start",padding:F,[`${r}-icon`]:{marginInlineEnd:t,fontSize:K,lineHeight:0},[`${r}-message`]:{display:"block",marginBottom:l,color:v,fontSize:C},[`${r}-description`]:{display:"block",color:D}},[`${r}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},G=n=>{const{componentCls:r,colorSuccess:s,colorSuccessBorder:l,colorSuccessBg:t,colorWarning:g,colorWarningBorder:C,colorWarningBg:E,colorError:I,colorErrorBorder:S,colorErrorBg:K,colorInfo:D,colorInfoBorder:v,colorInfoBg:F}=n;return{[r]:{"&-success":M(t,l,s,n,r),"&-info":M(F,v,D,n,r),"&-warning":M(E,C,g,n,r),"&-error":Object.assign(Object.assign({},M(K,S,I,n,r)),{[`${r}-description > pre`]:{margin:0,padding:0}})}}},V=n=>{const{componentCls:r,iconCls:s,motionDurationMid:l,marginXS:t,fontSizeIcon:g,colorIcon:C,colorIconHover:E}=n;return{[r]:{"&-action":{marginInlineStart:t},[`${r}-close-icon`]:{marginInlineStart:t,padding:0,overflow:"hidden",fontSize:g,lineHeight:(0,c.bf)(g),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${s}-close`]:{color:C,transition:`color ${l}`,"&:hover":{color:E}}},"&-close-text":{color:C,transition:`color ${l}`,"&:hover":{color:E}}}}},X=n=>({withDescriptionIconSize:n.fontSizeHeading3,defaultPadding:`${n.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${n.paddingMD}px ${n.paddingContentHorizontalLG}px`});var ie=(0,w.I$)("Alert",n=>[Y(n),G(n),V(n)],X),te=function(n,r){var s={};for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&r.indexOf(l)<0&&(s[l]=n[l]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,l=Object.getOwnPropertySymbols(n);t<l.length;t++)r.indexOf(l[t])<0&&Object.prototype.propertyIsEnumerable.call(n,l[t])&&(s[l[t]]=n[l[t]]);return s};const ce={success:p.Z,info:U.Z,error:L.Z,warning:O.Z},de=n=>{const{icon:r,prefixCls:s,type:l}=n,t=ce[l]||null;return r?(0,$.wm)(r,a.createElement("span",{className:`${s}-icon`},r),()=>({className:x()(`${s}-icon`,r.props.className)})):a.createElement(t,{className:`${s}-icon`})},ue=n=>{const{isClosable:r,prefixCls:s,closeIcon:l,handleClose:t,ariaProps:g}=n,C=l===!0||l===void 0?a.createElement(b.Z,null):l;return r?a.createElement("button",Object.assign({type:"button",onClick:t,className:`${s}-close-icon`,tabIndex:0},g),C):null};var oe=a.forwardRef((n,r)=>{const{description:s,prefixCls:l,message:t,banner:g,className:C,rootClassName:E,style:I,onMouseEnter:S,onMouseLeave:K,onClick:D,afterClose:v,showIcon:F,closable:f,closeText:u,closeIcon:h,action:Q,id:J}=n,d=te(n,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[k,ne]=a.useState(!1),pe=a.useRef(null);a.useImperativeHandle(r,()=>({nativeElement:pe.current}));const{getPrefixCls:ye,direction:Ce,alert:i}=a.useContext(z.E_),P=ye("alert",l),[Ee,Pe,xe]=ie(P),je=T=>{var W;ne(!0),(W=n.onClose)===null||W===void 0||W.call(n,T)},ge=a.useMemo(()=>n.type!==void 0?n.type:g?"warning":"info",[n.type,g]),Ie=a.useMemo(()=>typeof f=="object"&&f.closeIcon||u?!0:typeof f=="boolean"?f:h!==!1&&h!==null&&h!==void 0?!0:!!(i!=null&&i.closable),[u,h,f,i==null?void 0:i.closable]),he=g&&F===void 0?!0:F,Se=x()(P,`${P}-${ge}`,{[`${P}-with-description`]:!!s,[`${P}-no-icon`]:!he,[`${P}-banner`]:!!g,[`${P}-rtl`]:Ce==="rtl"},i==null?void 0:i.className,C,E,xe,Pe),Te=(0,A.Z)(d,{aria:!0,data:!0}),be=a.useMemo(()=>{var T,W;return typeof f=="object"&&f.closeIcon?f.closeIcon:u||(h!==void 0?h:typeof(i==null?void 0:i.closable)=="object"&&(!((T=i==null?void 0:i.closable)===null||T===void 0)&&T.closeIcon)?(W=i==null?void 0:i.closable)===null||W===void 0?void 0:W.closeIcon:i==null?void 0:i.closeIcon)},[h,f,u,i==null?void 0:i.closeIcon]),Oe=a.useMemo(()=>{const T=f!=null?f:i==null?void 0:i.closable;if(typeof T=="object"){const{closeIcon:W}=T;return te(T,["closeIcon"])}return{}},[f,i==null?void 0:i.closable]);return Ee(a.createElement(N.ZP,{visible:!k,motionName:`${P}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:T=>({maxHeight:T.offsetHeight}),onLeaveEnd:v},(T,W)=>{let{className:ve,style:$e}=T;return a.createElement("div",Object.assign({id:J,ref:(0,j.sQ)(pe,W),"data-show":!k,className:x()(Se,ve),style:Object.assign(Object.assign(Object.assign({},i==null?void 0:i.style),I),$e),onMouseEnter:S,onMouseLeave:K,onClick:D,role:"alert"},Te),he?a.createElement(de,{description:s,icon:n.icon,prefixCls:P,type:ge}):null,a.createElement("div",{className:`${P}-content`},t?a.createElement("div",{className:`${P}-message`},t):null,s?a.createElement("div",{className:`${P}-description`},s):null),Q?a.createElement("div",{className:`${P}-action`},Q):null,a.createElement(ue,{isClosable:Ie,prefixCls:P,closeIcon:be,handleClose:je,ariaProps:Oe}))}))}),me=e(15671),R=e(43144),H=e(61120),m=e(78814),q=e(82963);function ae(n,r,s){return r=(0,H.Z)(r),(0,q.Z)(n,(0,m.Z)()?Reflect.construct(r,s||[],(0,H.Z)(n).constructor):r.apply(n,s))}var fe=e(60136),le=function(n){function r(){var s;return(0,me.Z)(this,r),s=ae(this,r,arguments),s.state={error:void 0,info:{componentStack:""}},s}return(0,fe.Z)(r,n),(0,R.Z)(r,[{key:"componentDidCatch",value:function(l,t){this.setState({error:l,info:t})}},{key:"render",value:function(){const{message:l,description:t,id:g,children:C}=this.props,{error:E,info:I}=this.state,S=(I==null?void 0:I.componentStack)||null,K=typeof l=="undefined"?(E||"").toString():l,D=typeof t=="undefined"?S:t;return E?a.createElement(oe,{id:g,type:"error",message:K,description:a.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},D)}):C}}])}(a.Component);const _=oe;_.ErrorBoundary=le;var ee=_}}]);
