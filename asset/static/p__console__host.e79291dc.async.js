"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6856],{49610:function(j,c,e){var h=e(5574),D=e.n(h),o=e(67294),W=e(54964),m=e(52626),O=e(12320),E=e.n(O),v=e(78267),U=e.n(v),g=e(85893),_,a=new O.Terminal(W.a),n=new v.FitAddon,r,s=(0,o.forwardRef)(function(P,t){var d,T=(0,o.useState)(),I=D()(T,2),R=I[0],y=I[1],C=(0,o.useState)(""),l=D()(C,2),u=l[0],x=l[1];(0,o.useImperativeHandle)(t,function(){return{start:function(M,i){var K=i?Object.keys(i).filter(function(f){return i&&i[f]}).map(function(f){if(i&&i[f])return"".concat(f,"=").concat(i[f])}):[];L(),_=new WebSocket((0,m.R)(M+"?"+K.join("&"))),_.addEventListener("message",function(f){var A=JSON.parse(f.data),S=A.type;if(S==M&&(a.write(A.data),A.data.indexOf("exec failed")!=-1)){L();return}}),r=a.onData(function(f){var A={content:{command:f},type:M};_&&_.send(JSON.stringify(A))}),x(M),y(i)},close:function(){L()},fit:function(){n.fit()},run:function(M){R&&M&&M.forEach(function(i){var K={content:{command:i+`
`},type:u};_&&_.send(JSON.stringify(K))})}}}),(0,o.useEffect)(function(){return window.addEventListener("resize",function(){n.fit()}),a.loadAddon(n),a.open(document.getElementById("terminal-container-console")),n.fit(),function(){L()}},[]);function L(){a.reset(),n.fit(),a.focus(),r&&r.dispose(),_&&(_.close(),_=null)}return(0,g.jsx)("div",{style:{height:(d=P.height)!==null&&d!==void 0?d:"100vh"},id:"terminal-container-console"})});c.Z=s},54964:function(j,c,e){e.d(c,{a:function(){return a}});var h=e(5574),D=e.n(h),o=e(78267),W=e.n(o),m=e(75458),O=e.n(m),E=e(67294),v=e(12320),U=e.n(v),g=e(89629),_=e(85893),a={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,cursorStyle:"block",cursorBlink:!0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},n=new v.Terminal(a),r=new m.SearchAddon,s=new o.FitAddon,P=(0,E.forwardRef)(function(t,d){var T,I=(0,E.useState)(!0),R=D()(I,2),y=R[0],C=R[1];return(0,E.useEffect)(function(){return window.addEventListener("resize",function(){t.showInModal||s.fit()}),t.style&&t.style.fontSize&&(n.options.fontSize=t.style.fontSize),n.loadAddon(s),n.loadAddon(r),n.open(document.getElementById(t.id?t.id:"terminal-container")),t.showInModal||s.fit(),function(){n.reset(),C(!0)}},[]),(0,E.useImperativeHandle)(d,function(){return{write:function(u){y&&(s.fit(),C(!1)),n.write(u)},clear:function(){n.clear()},getTerminal:function(){return n},findNext:function(u){r.findNext(u)},findPrev:function(u){r.findPrevious(u)},fit:function(){s.fit()},onData:function(u){return n.onData(u)}}}),(0,_.jsx)("div",{id:t.id?t.id:"terminal-container",style:{width:t.width?t.width:"100%",height:t.height?t.height:"500px",marginTop:(T=t.style)===null||T===void 0?void 0:T.marginTop}})});c.Z=P},67359:function(j,c,e){e.r(c),e.d(c,{default:function(){return v}});var h=e(5574),D=e.n(h),o=e(49610),W=e(87662),m=e(82346),O=e(67294),E=e(85893);function v(){var U=(0,m.useParams)(),g=(0,m.useSearchParams)(),_=D()(g,2),a=_[0],n=_[1],r=(0,O.useRef)();return(0,O.useEffect)(function(){U.id&&(0,W.K3)({name:U.id}).then(function(s){var P,t,d;window.document.title="console - ".concat(s.data.name),(P=r.current)===null||P===void 0||P.start("/console/host/".concat(s.data.name),{width:(t=a.get("width"))!==null&&t!==void 0?t:Math.ceil(window.innerWidth/8),height:(d=a.get("height"))!==null&&d!==void 0?d:Math.ceil(window.innerHeight/16),cmd:a.get("cmd"),workDir:a.get("workDir")})}),document.body.style.overflow="hidden"},[]),(0,E.jsx)(o.Z,{ref:r})}}}]);
