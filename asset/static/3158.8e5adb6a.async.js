"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3158],{91058:function(U,p,e){var B=e(5574),i=e.n(B),L=e(89035),h=e(38345),m=e(17186),g=e(24739),d=e(5966),j=e(42075),_=e(14726),r=e(85576),c=e(67294),O=e(95089),I=e(89063),a=e(85893),f="docker-image",E=(0,c.forwardRef)(function(t,C){var P=(0,c.useState)(f),u=i()(P,2),l=u[0],o=u[1],n=(0,c.useRef)(),y=(0,c.useState)(""),R=i()(y,2),F=R[0],V=R[1],k=function(){l!="code"?o("code"):o(f)};(0,c.useImperativeHandle)(C,function(){return{addEnvItem:function(s,M){var T,D=(T=n.current)===null||T===void 0?void 0:T.getList(),W=!1;if(D==null||D.map(function(b){if(b.name==s){W=!0;return}}),!W){var A;(A=n.current)===null||A===void 0||A.add({name:s,value:M})}},clear:function(){var s;(s=n.current)===null||s===void 0||(s=s.getList())===null||s===void 0||s.map(function(M,T){var D;(D=n.current)===null||D===void 0||D.remove(T)})}}});function Z(v){try{var s,M;v==""&&(v=w());for(var T=(s=(M=n.current)===null||M===void 0||(M=M.getList())===null||M===void 0?void 0:M.length)!==null&&s!==void 0?s:0,D=T;D>=0;D--){var W;(W=n.current)===null||W===void 0||W.remove(D)}var A=v.split(`
`),b=0;A.map(function(K){var x,S=K.split("=");S.length<2||((x=n.current)===null||x===void 0||x.add({name:S[0],value:S.slice(1).join("=")},b),b++)})}catch(K){console.log(K)}}function w(){if(n&&n.current&&n.current.getList){var v,s=(v=n.current)===null||v===void 0?void 0:v.getList();if(s){var M=[];return s.map(function(T){M.push("".concat(T.name,"=").concat(T.value))}),M.join(`
`)}else return""}else return""}return(0,a.jsxs)(h.Z,{ghost:t.showCardGhost,title:t.label?t.label:null,headerBordered:!0,extra:(t.showCodeMode||t.showImportButton)&&(0,a.jsxs)(j.Z,{children:[t.showImportButton&&(0,a.jsx)("div",{style:{marginBottom:"-25px"},children:(0,a.jsx)(I.Z,{title:"\u5BFC\u5165 env \u6587\u4EF6",onImport:function(s){return Z(s),!0},onLoad:function(s){if(s.indexOf("=")<0)throw new Error("\u5BFC\u5165env\u6587\u4EF6\u9519\u8BEF");return!0}})}),t.showCodeMode?(0,a.jsx)(_.ZP,{icon:(0,a.jsx)(L.Z,{}),type:l=="code"?"primary":"default",onClick:k,children:"\u4EE3\u7801\u6A21\u5F0F"},"code"):""]}),children:[(0,a.jsx)(m.u,{name:t.name?t.name:"environment",actionRef:n,creatorButtonProps:t.showAddButton?{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u73AF\u5883\u53D8\u91CF"}:!1,copyIconProps:!1,min:100,label:t.listLabel,children:function(s,M,T){var D=T.getCurrentRowData();return(0,a.jsxs)(g.UW,{children:[(0,a.jsx)(d.Z,{width:t.showInDrawer?"sm":"md",name:"name",label:"\u53D8\u91CF\u540D",required:!0,rules:[{required:!0}],disabled:t.showDisableName,placeholder:"\u8F93\u5165\u53D8\u91CF\u540D\u79F0"}),(0,a.jsx)(d.Z,{width:t.showInDrawer?"sm":"md",name:"value",label:"\u53D8\u91CF\u503C",rules:[{required:!!t.requireValue}],disabled:t.showDisableValue,placeholder:D&&D.label?D.label:"\u8F93\u5165\u53D8\u91CF\u503C"})]})}}),(0,a.jsx)(r.Z,{width:"800px",open:l=="code",onCancel:function(){return o("docker-image")},onOk:function(){Z(F),o("docker-image")},children:(0,a.jsx)(O.ZP,{onChange:function(s){return V(s)},value:w(),height:"680px",theme:"light"})})]})});p.Z=E},80821:function(U,p,e){e.d(p,{Z:function(){return _}});var B=e(5574),i=e.n(B),L=e(24963),h=e(86738),m=e(14726),g=e(83062),d=e(67294),j=e(85893);function _(r){var c=(0,d.useState)(!1),O=i()(c,2),I=O[0],a=O[1],f=(0,d.useContext)(L.Z),E=f.lang,t=f.notice,C=f.message,P=function(){a(!0),r.action().then(function(l){if(a(!1),typeof r.onSuccess=="function"&&r.onSuccess(l),r.messageSuccess){var o="";typeof r.messageSuccess=="function"?o=r.messageSuccess(l):o=r.messageSuccess,o.indexOf(".")>-1&&(o=E(o)),r.asynced?C.info(o):C.success(o)}}).catch(function(l){a(!1),typeof r.onError=="function"&&r.onError(l)})};return r.confirm?(0,j.jsx)(h.Z,{style:{width:500},title:r.confirmTitle?r.confirmTitle:E("notification.title.tip"),description:r.confirm,onConfirm:P,okText:"Yes",cancelText:"No",children:(0,j.jsx)(m.ZP,{disabled:r.disabled,icon:r.icon,loading:I,danger:r.danger,type:r.type,children:r.children})}):(0,j.jsx)(g.Z,{title:r.tips,children:(0,j.jsx)(m.ZP,{disabled:r.disabled,icon:r.icon,loading:I,onClick:P,danger:r.danger,type:r.type,children:r.children})})}},44349:function(U,p,e){var B=e(97857),i=e.n(B),L=e(17186),h=e(5966),m=e(86250),g=e(67294),d=e(85893),j=(0,g.forwardRef)(function(_,r){var c=(0,g.useRef)();(0,g.useImperativeHandle)(r,function(){return{addItem:function(a,f){var E,t=(E=c.current)===null||E===void 0?void 0:E.getList(),C=!1;if(t==null||t.map(function(u){if(u.name==a){C=!0;return}}),!C){var P;(P=c.current)===null||P===void 0||P.add({name:a,value:f})}},clear:function(){var a;(a=c.current)===null||a===void 0||(a=a.getList())===null||a===void 0||a.map(function(f,E){var t;(t=c.current)===null||t===void 0||t.remove(E)})}}});var O={};return _.hideCopyButton===!0&&(O.copyIconProps=!1),_.hideDeleteButton===!0&&(O.deleteIconProps=!1),(0,d.jsx)(L.u,i()(i()({initialValue:_.initialValue,label:_.label,name:_.name,actionRef:c,creatorButtonProps:_.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(_.label?_.label:_.name)}:!1,min:_.min?_.min:0},O),{},{children:function(a,f,E){return(0,d.jsx)(m.Z,{justify:_.justify,gap:_.gap,children:_.items.map(function(t){return t.render?(0,d.jsx)("div",{children:t.render&&t.render(a,f,E)},"".concat(_.name,"-").concat(t.name,"-").concat(a.key)):(0,d.jsx)(h.Z,{width:t.width,name:t.name,label:t.label,required:t.required,rules:[{required:t.required}],disabled:t.disabled,placeholder:t.placeholder},"".concat(_.name,"-").concat(t.name,"-").concat(a.key))})})}}))});p.Z=j},89063:function(U,p,e){e.d(p,{Z:function(){return j}});var B=e(24963),i=e(88484),L=e(62370),h=e(31418),m=e(14726),g=e(67294),d=e(85893);function j(_){var r=(0,g.useContext)(B.Z),c=r.message,O=r.notice,I=r.lang,a=(0,g.useRef)(null),f=h.Z.useApp(),E=function(){a.current&&(a.current.click(),a.current.onchange=function(C){if(!C||!C.target)return"";var P=new FileReader;P.onload=function(l){var o,n,y=(o=l.target)===null||o===void 0?void 0:o.result;if(_.onLoad)try{_.onLoad&&_.onLoad(y)}catch(R){O.error(R);return}typeof _.onImport=="function"&&(c.success("\u6210\u529F\u5BFC\u5165 ".concat(_.title)),_.onImport(y)),(n=a.current)!==null&&n!==void 0&&n.value&&(a.current.value="")};var u=C.target;if(u.files)try{P.readAsText(u.files[0])}catch(l){O.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(L.Z,{children:(0,d.jsx)(m.ZP,{icon:(0,d.jsx)(i.Z,{}),block:!0,onClick:E,children:_.title})}),(0,d.jsx)("input",{style:{display:"none"},type:"file",ref:a,name:"importFileInput"})]})}},24963:function(U,p,e){var B=e(67294),i=(0,B.createContext)({});p.Z=i},60335:function(U,p,e){e.d(p,{IE:function(){return j},IW:function(){return g},KK:function(){return a},LJ:function(){return E},Re:function(){return C},eE:function(){return O},jV:function(){return r}});var B=e(15009),i=e.n(B),L=e(99289),h=e.n(L),m=e(54006);function g(u){return d.apply(this,arguments)}function d(){return d=h()(i()().mark(function u(l){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/app/container/status",{method:"POST",data:l}));case 1:case"end":return n.stop()}},u)})),d.apply(this,arguments)}function j(u){return _.apply(this,arguments)}function _(){return _=h()(i()().mark(function u(l){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/app/container/get-list",{data:l,method:"POST"}));case 1:case"end":return n.stop()}},u)})),_.apply(this,arguments)}function r(u){return c.apply(this,arguments)}function c(){return c=h()(i()().mark(function u(l){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/app/container/get-detail",{data:l,method:"POST"}));case 1:case"end":return n.stop()}},u)})),c.apply(this,arguments)}function O(u){return I.apply(this,arguments)}function I(){return I=h()(i()().mark(function u(l){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/app/container/update",{data:l,method:"POST"}));case 1:case"end":return n.stop()}},u)})),I.apply(this,arguments)}function a(){return f.apply(this,arguments)}function f(){return f=h()(i()().mark(function u(){return i()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,m.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return o.stop()}},u)})),f.apply(this,arguments)}function E(u){return t.apply(this,arguments)}function t(){return t=h()(i()().mark(function u(l){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/app/container/export",{method:"POST",data:l,responseType:"blob"}));case 1:case"end":return n.stop()}},u)})),t.apply(this,arguments)}function C(u){return P.apply(this,arguments)}function P(){return P=h()(i()().mark(function u(l){return i()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,m.request)("/api/app/container/commit",{method:"POST",data:l}));case 1:case"end":return n.stop()}},u)})),P.apply(this,arguments)}}}]);
