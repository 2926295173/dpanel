"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4037],{12119:function(_,O,e){e.d(O,{Z:function(){return P}});var o=e(87462),f=e(67294),T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M608 112c-167.9 0-304 136.1-304 304 0 70.3 23.9 135 63.9 186.5l-41.1 41.1-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-44.9 44.9-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-65.3 65.3a8.03 8.03 0 000 11.3l42.3 42.3c3.1 3.1 8.2 3.1 11.3 0l253.6-253.6A304.06 304.06 0 00608 720c167.9 0 304-136.1 304-304S775.9 112 608 112zm161.2 465.2C726.2 620.3 668.9 644 608 644c-60.9 0-118.2-23.7-161.2-66.8-43.1-43-66.8-100.3-66.8-161.2 0-60.9 23.7-118.2 66.8-161.2 43-43.1 100.3-66.8 161.2-66.8 60.9 0 118.2 23.7 161.2 66.8 43.1 43 66.8 100.3 66.8 161.2 0 60.9-23.7 118.2-66.8 161.2z"}}]},name:"key",theme:"outlined"},h=T,$=e(84089),U=function(N,x){return f.createElement($.Z,(0,o.Z)({},N,{ref:x,icon:h}))},C=f.forwardRef(U),P=C},63434:function(_,O,e){var o=e(1413),f=e(45987),T=e(22270),h=e(84567),$=e(67294),U=e(90789),C=e(40284),P=e(85893),A=["options","fieldProps","proFieldProps","valueEnum"],N=$.forwardRef(function(i,b){var K=i.options,j=i.fieldProps,H=i.proFieldProps,X=i.valueEnum,z=(0,f.Z)(i,A);return(0,P.jsx)(C.Z,(0,o.Z)({ref:b,valueType:"checkbox",valueEnum:(0,T.h)(X,void 0),fieldProps:(0,o.Z)({options:K},j),lightProps:(0,o.Z)({labelFormatter:function(){return(0,P.jsx)(C.Z,(0,o.Z)({ref:b,valueType:"checkbox",mode:"read",valueEnum:(0,T.h)(X,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,o.Z)({options:K},j),proFieldProps:H},z))}},z.lightProps),proFieldProps:H},z))}),x=$.forwardRef(function(i,b){var K=i.fieldProps,j=i.children;return(0,P.jsx)(h.Z,(0,o.Z)((0,o.Z)({ref:b},K),{},{children:j}))}),Z=(0,U.G)(x,{valuePropName:"checked"}),D=Z;D.Group=N,O.Z=D},75293:function(_,O,e){e.d(O,{Z:function(){return T}});var o=e(25593),f=e(85893);function T(h){return(0,f.jsx)(o.Z.Text,{copyable:!0,style:{padding:10,display:h.block?"block":"",background:"#24292f",color:"#ffffff"},children:h.content})}},66139:function(_,O,e){e.r(O),e.d(O,{default:function(){return me}});var o=e(15009),f=e.n(o),T=e(99289),h=e.n(T),$=e(5574),U=e.n($),C=e(68602),P=e(89075),A=e(68262),N=e(82346),x=e(9361),Z=e(40056),D=e(86250),i=e(25593),b=e(67294),K=e(75293),j=e(36146),H=e(29177),X=e(88360),z=e(94149),oe=e(12119),Q=e(5966),ae=e(97462),ie=e(63434),ce=e(92398),de=e(55241),fe=e(42075),r=e(85893);function ue(B){var G,m=new j.Uo("user");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ce.Z,{centered:!0,activeKey:B.loginType,items:[{icon:(0,r.jsx)(H.Z,{}),key:"login",label:m.format("title")},{icon:(0,r.jsx)(X.Z,{}),key:"register",label:m.format("registerTitle")}].filter(function(ee){return ee.key==B.loginType})}),(0,r.jsx)(Q.Z,{name:"username",fieldProps:{size:"large",prefix:(0,r.jsx)(H.Z,{className:"prefixIcon"})},placeholder:m.format("formUsernameEmpty"),rules:[{required:!0,message:m.format("formUsernameEmpty")}]},"username"),(0,r.jsx)(Q.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,r.jsx)(z.Z,{className:"prefixIcon"})},placeholder:m.format("formPasswordEmpty"),rules:[{required:!0,message:m.format("formPasswordEmpty")}]},"password"),B.showTwoFa&&(0,r.jsx)(Q.Z,{name:"code",placeholder:m.format("formTwofaEmpty"),rules:[{required:!0}],fieldProps:{maxLength:6,size:"large",prefix:(0,r.jsx)(oe.Z,{className:"prefixIcon"})}}),B.loginType=="register"&&(0,r.jsx)(ae.Z,{name:["password"],children:function(se){var pe=se.password;return(0,r.jsx)(Q.Z.Password,{fieldProps:{size:"large",prefix:(0,r.jsx)(z.Z,{className:"prefixIcon"})},placeholder:m.format("formConfirmPasswordEmpty"),name:"confirmPassword",dependencies:["password"],rules:[{required:!0,message:m.format("formConfirmPasswordEmpty")},function(ne){var te=ne.getFieldValue;return{validator:function(t,n){return!n||te("password")===n?Promise.resolve():Promise.reject(new Error(m.format("formMessagePasswordNotMatch")))}}}]},"confirmPassword")}}),B.showAutoLogin&&(0,r.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,r.jsx)(ie.Z,{noStyle:!0,name:"autoLogin",initialValue:!0,children:m.format("formAutoLogin")}),(0,r.jsx)(de.Z,{content:(0,r.jsxs)(fe.Z,{direction:"vertical",size:[0,30],children:[(0,r.jsxs)("span",{children:[m.format("formUserResetTip"),", ",(0,r.jsx)("a",{href:"https://dpanel.cc/#/zh-cn/install/ctrl",target:"_blank",children:j.FD.format("help")})]}),(0,r.jsx)(K.Z,{content:"docker exec ".concat((G=B.appName)!==null&&G!==void 0?G:"dpanel"," ./dpanel user:reset -f config.yaml")}),(0,r.jsx)("span",{})]}),children:(0,r.jsx)(i.Z.Link,{style:{float:"right"},children:m.format("formUserReset")})})]})]})}var me=function(){var B=x.Z.useToken(),G=B.token,m=(0,N.useModel)("@@initialState"),ee=m.initialState,se=m.loading,pe=m.error,ne=m.refresh,te=m.setInitialState,le=(0,b.useState)({loginType:"account",appName:"dpanel"}),t=U()(le,2),n=t[0],a=t[1],s=(0,b.useState)(),l=U()(s,2),u=l[0],v=l[1],I=(0,b.useState)(),M=U()(I,2),y=M[0],R=M[1],w=(0,N.useAntdConfigSetter)(),F=(0,b.useRef)(),g=new j.Uo("user");return(0,b.useEffect)(function(){window.document.title=g.format("documentTitle"),(0,C.Nr)().then(function(){var p=h()(f()().mark(function L(c){var S;return f()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:g.appendXk(c.data.feature.includes("canSeeEnableXk")),S={loginType:"account"},c.data.showBuildName&&c.data.family!="lite"&&(S.showBuildName=!0),c.data.showRegister&&(S.loginType="register"),c.data.family=="demo"&&(S.showDemo=!0),S.appName=c.data.appName,c.data.theme&&c.data.theme.algorithm&&(localStorage.setItem("dpanel-theme",c.data.theme.algorithm),w(function(d){var re;(re=d.theme)!==null&&re!==void 0||(d.theme={});var k=[];return c.data.theme&&(c.data.theme.algorithm=="dark"?k.push(x.Z.darkAlgorithm):k.push(x.Z.defaultAlgorithm),d.theme.algorithm=k),d})),R(c.data),a(S),c.data.feature.indexOf("canSeeEnableThemeUser")!=-1?(0,P.ax)().then(function(d){d.data&&d.data.themeUserConfig&&d.data.themeUserConfig.siteTitle&&(window.document.title=d.data.themeUserConfig.siteTitle),v(d.data)}):v({});case 10:case"end":return J.stop()}},L)}));return function(L){return p.apply(this,arguments)}}())},[]),(0,r.jsxs)(r.Fragment,{children:[n&&n.showBuildName&&(0,r.jsx)(Z.Z,{type:"error",message:g.format("tipShowBuildName"),banner:!0}),n&&n.showDemo&&(0,r.jsx)(Z.Z,{type:"error",message:g.format("tipShowDemo"),banner:!0}),(0,r.jsx)(D.Z,{justify:"center",align:"center",style:{height:"100vh",background:u&&u.themeUserConfig&&u.themeUserConfig.bgImage&&u.themeUserConfig.bgImage.src?"url(".concat(u.themeUserConfig.bgImage.src,")"):"".concat(G.colorBgElevated,"dd")},children:(0,r.jsxs)(A.U,{onFinish:function(){var p=h()(f()().mark(function L(c){var S,Y;return f()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(n.loginType!="register"){d.next=3;break}return d.next=3,(0,C.AT)({username:c.username,password:c.password,confirmPassword:c.confirmPassword});case 3:return d.prev=3,d.next=6,(0,C.n$)({username:c.username,password:c.password,autoLogin:c.autoLogin,code:c.code});case 6:if(S=d.sent,!S.data.accessToken){d.next=14;break}return localStorage.setItem("token",S.data.accessToken),ne(),window.location.href="/dpanel/ui",d.abrupt("return");case 14:return d.abrupt("return",!1);case 15:d.next=20;break;case 17:d.prev=17,d.t0=d.catch(3),(Y=F.current)===null||Y===void 0||Y.resetFields(["code"]);case 20:case"end":return d.stop()}},L,null,[[3,17]])}));return function(L){return p.apply(this,arguments)}}(),containerStyle:{background:"transparent",height:"auto"},contentStyle:{width:"auto"},logo:"",title:(0,r.jsx)("img",{src:u&&u.themeUserConfig&&u.themeUserConfig.loginLogo?u.themeUserConfig.loginLogo:"/dpanel/static/asset/logo.png",width:"350"}),subTitle:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsx)("br",{})]}),formRef:F,children:[(0,r.jsx)(ue,{showTwoFa:!!(u&&u.canSeeEnableTwoFa),loginType:n.loginType,appName:n.appName,showAutoLogin:!(y!=null&&y.feature.includes("canSeeEnableXk"))}),(0,r.jsxs)(i.Z.Paragraph,{style:{marginBottom:10,color:"#999999",textAlign:"center"},children:[g.format("agree"),(0,r.jsx)("a",{href:g.format("userAgreementUrl"),target:"_blank",children:g.format("userAgreement")}),(0,r.jsx)("a",{href:g.format("userPrivacyUrl"),target:"_blank",children:g.format("userPrivacy")})]})]})})]})}},89075:function(_,O,e){e.d(O,{$w:function(){return U},YQ:function(){return P},ax:function(){return N}});var o=e(15009),f=e.n(o),T=e(99289),h=e.n(T),$=e(82346);function U(){return C.apply(this,arguments)}function C(){return C=h()(f()().mark(function Z(){return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,$.request)("/api/pro/home/get-machine-id",{method:"POST"}));case 1:case"end":return i.stop()}},Z)})),C.apply(this,arguments)}function P(){return A.apply(this,arguments)}function A(){return A=h()(f()().mark(function Z(){return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,$.request)("/api/pro/home/get-license-info",{method:"POST"}));case 1:case"end":return i.stop()}},Z)})),A.apply(this,arguments)}function N(){return x.apply(this,arguments)}function x(){return x=h()(f()().mark(function Z(){return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,$.request)("/api/pro/home/login-info",{method:"POST"}));case 1:case"end":return i.stop()}},Z)})),x.apply(this,arguments)}},40056:function(_,O,e){e.d(O,{Z:function(){return le}});var o=e(67294),f=e(89739),T=e(4340),h=e(97937),$=e(21640),U=e(78860),C=e(93967),P=e.n(C),A=e(29372),N=e(64217),x=e(42550),Z=e(96159),D=e(53124),i=e(11568),b=e(14747),K=e(83559);const j=(t,n,a,s,l)=>({background:t,border:`${(0,i.bf)(s.lineWidth)} ${s.lineType} ${n}`,[`${l}-icon`]:{color:a}}),H=t=>{const{componentCls:n,motionDurationSlow:a,marginXS:s,marginSM:l,fontSize:u,fontSizeLG:v,lineHeight:I,borderRadiusLG:M,motionEaseInOutCirc:y,withDescriptionIconSize:R,colorText:w,colorTextHeading:F,withDescriptionPadding:g,defaultPadding:p}=t;return{[n]:Object.assign(Object.assign({},(0,b.Wf)(t)),{position:"relative",display:"flex",alignItems:"center",padding:p,wordWrap:"break-word",borderRadius:M,[`&${n}-rtl`]:{direction:"rtl"},[`${n}-content`]:{flex:1,minWidth:0},[`${n}-icon`]:{marginInlineEnd:s,lineHeight:0},"&-description":{display:"none",fontSize:u,lineHeight:I},"&-message":{color:F},[`&${n}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${a} ${y}, opacity ${a} ${y},
        padding-top ${a} ${y}, padding-bottom ${a} ${y},
        margin-bottom ${a} ${y}`},[`&${n}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${n}-with-description`]:{alignItems:"flex-start",padding:g,[`${n}-icon`]:{marginInlineEnd:l,fontSize:R,lineHeight:0},[`${n}-message`]:{display:"block",marginBottom:s,color:F,fontSize:v},[`${n}-description`]:{display:"block",color:w}},[`${n}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},X=t=>{const{componentCls:n,colorSuccess:a,colorSuccessBorder:s,colorSuccessBg:l,colorWarning:u,colorWarningBorder:v,colorWarningBg:I,colorError:M,colorErrorBorder:y,colorErrorBg:R,colorInfo:w,colorInfoBorder:F,colorInfoBg:g}=t;return{[n]:{"&-success":j(l,s,a,t,n),"&-info":j(g,F,w,t,n),"&-warning":j(I,v,u,t,n),"&-error":Object.assign(Object.assign({},j(R,y,M,t,n)),{[`${n}-description > pre`]:{margin:0,padding:0}})}}},z=t=>{const{componentCls:n,iconCls:a,motionDurationMid:s,marginXS:l,fontSizeIcon:u,colorIcon:v,colorIconHover:I}=t;return{[n]:{"&-action":{marginInlineStart:l},[`${n}-close-icon`]:{marginInlineStart:l,padding:0,overflow:"hidden",fontSize:u,lineHeight:(0,i.bf)(u),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${a}-close`]:{color:v,transition:`color ${s}`,"&:hover":{color:I}}},"&-close-text":{color:v,transition:`color ${s}`,"&:hover":{color:I}}}}},oe=t=>({withDescriptionIconSize:t.fontSizeHeading3,defaultPadding:`${t.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${t.paddingMD}px ${t.paddingContentHorizontalLG}px`});var Q=(0,K.I$)("Alert",t=>[H(t),X(t),z(t)],oe),ae=function(t,n){var a={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(a[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(t);l<s.length;l++)n.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(t,s[l])&&(a[s[l]]=t[s[l]]);return a};const ie={success:f.Z,info:U.Z,error:T.Z,warning:$.Z},ce=t=>{const{icon:n,prefixCls:a,type:s}=t,l=ie[s]||null;return n?(0,Z.wm)(n,o.createElement("span",{className:`${a}-icon`},n),()=>({className:P()(`${a}-icon`,n.props.className)})):o.createElement(l,{className:`${a}-icon`})},de=t=>{const{isClosable:n,prefixCls:a,closeIcon:s,handleClose:l,ariaProps:u}=t,v=s===!0||s===void 0?o.createElement(h.Z,null):s;return n?o.createElement("button",Object.assign({type:"button",onClick:l,className:`${a}-close-icon`,tabIndex:0},u),v):null};var r=o.forwardRef((t,n)=>{const{description:a,prefixCls:s,message:l,banner:u,className:v,rootClassName:I,style:M,onMouseEnter:y,onMouseLeave:R,onClick:w,afterClose:F,showIcon:g,closable:p,closeText:L,closeIcon:c,action:S,id:Y}=t,J=ae(t,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[d,re]=o.useState(!1),k=o.useRef(null);o.useImperativeHandle(n,()=>({nativeElement:k.current}));const{getPrefixCls:Ce,direction:Ee,closable:V,closeIcon:ge,className:Pe,style:xe}=(0,D.dj)("alert"),E=Ce("alert",s),[je,Ie,Se]=Q(E),Oe=W=>{var q;re(!0),(q=t.onClose)===null||q===void 0||q.call(t,W)},he=o.useMemo(()=>t.type!==void 0?t.type:u?"warning":"info",[t.type,u]),Te=o.useMemo(()=>typeof p=="object"&&p.closeIcon||L?!0:typeof p=="boolean"?p:c!==!1&&c!==null&&c!==void 0?!0:!!V,[L,c,p,V]),ve=u&&g===void 0?!0:g,$e=P()(E,`${E}-${he}`,{[`${E}-with-description`]:!!a,[`${E}-no-icon`]:!ve,[`${E}-banner`]:!!u,[`${E}-rtl`]:Ee==="rtl"},Pe,v,I,Se,Ie),Ze=(0,N.Z)(J,{aria:!0,data:!0}),be=o.useMemo(()=>typeof p=="object"&&p.closeIcon?p.closeIcon:L||(c!==void 0?c:typeof V=="object"&&V.closeIcon?V.closeIcon:ge),[c,p,L,ge]),Me=o.useMemo(()=>{const W=p!=null?p:V;if(typeof W=="object"){const{closeIcon:q}=W;return ae(W,["closeIcon"])}return{}},[p,V]);return je(o.createElement(A.ZP,{visible:!d,motionName:`${E}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:W=>({maxHeight:W.offsetHeight}),onLeaveEnd:F},({className:W,style:q},ye)=>o.createElement("div",Object.assign({id:Y,ref:(0,x.sQ)(k,ye),"data-show":!d,className:P()($e,W),style:Object.assign(Object.assign(Object.assign({},xe),M),q),onMouseEnter:y,onMouseLeave:R,onClick:w,role:"alert"},Ze),ve?o.createElement(ce,{description:a,icon:t.icon,prefixCls:E,type:he}):null,o.createElement("div",{className:`${E}-content`},l?o.createElement("div",{className:`${E}-message`},l):null,a?o.createElement("div",{className:`${E}-description`},a):null),S?o.createElement("div",{className:`${E}-action`},S):null,o.createElement(de,{isClosable:Te,prefixCls:E,closeIcon:be,handleClose:Oe,ariaProps:Me}))))}),ue=e(15671),me=e(43144),B=e(61120),G=e(78814),m=e(82963);function ee(t,n,a){return n=(0,B.Z)(n),(0,m.Z)(t,(0,G.Z)()?Reflect.construct(n,a||[],(0,B.Z)(t).constructor):n.apply(t,a))}var se=e(60136),ne=function(t){function n(){var a;return(0,ue.Z)(this,n),a=ee(this,n,arguments),a.state={error:void 0,info:{componentStack:""}},a}return(0,se.Z)(n,t),(0,me.Z)(n,[{key:"componentDidCatch",value:function(s,l){this.setState({error:s,info:l})}},{key:"render",value:function(){const{message:s,description:l,id:u,children:v}=this.props,{error:I,info:M}=this.state,y=(M==null?void 0:M.componentStack)||null,R=typeof s=="undefined"?(I||"").toString():s,w=typeof l=="undefined"?y:l;return I?o.createElement(r,{id:u,type:"error",message:R,description:o.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},w)}):v}}])}(o.Component);const te=r;te.ErrorBoundary=ne;var le=te}}]);
