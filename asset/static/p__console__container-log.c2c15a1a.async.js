!(function(){var ne=Object.defineProperty,re=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var q=(j,O,i)=>O in j?ne(j,O,{enumerable:!0,configurable:!0,writable:!0,value:i}):j[O]=i,ee=(j,O)=>{for(var i in O||(O={}))se.call(O,i)&&q(j,i,O[i]);if(Q)for(var i of Q(O))ae.call(O,i)&&q(j,i,O[i]);return j},te=(j,O)=>re(j,ie(O));(self.webpackChunk=self.webpackChunk||[]).push([[3428],{23430:function(j,O,i){"use strict";i.d(O,{Z:function(){return M}});var R=i(87462),d=i(67294),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},u=L,p=i(84089),c=function(n,a){return d.createElement(p.Z,(0,R.Z)({},n,{ref:a,icon:u}))},E=d.forwardRef(c),M=E},5966:function(j,O,i){"use strict";var R=i(97685),d=i(1413),L=i(45987),u=i(21770),p=i(21054),c=i(55241),E=i(98423),M=i(67294),t=i(40284),n=i(85893),a=["fieldProps","proFieldProps"],r=["fieldProps","proFieldProps"],l="text",e=function(g){var m=g.fieldProps,C=g.proFieldProps,y=(0,L.Z)(g,a);return(0,n.jsx)(t.Z,(0,d.Z)({valueType:l,fieldProps:m,filedConfig:{valueType:l},proFieldProps:C},y))},o=function(g){var m=(0,u.Z)(g.open||!1,{value:g.open,onChange:g.onOpenChange}),C=(0,R.Z)(m,2),y=C[0],P=C[1];return(0,n.jsx)(p.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(w){var _,v=w.getFieldValue(g.name||[]);return(0,n.jsx)(c.Z,(0,d.Z)((0,d.Z)({getPopupContainer:function(s){return s&&s.parentNode?s.parentNode:s},onOpenChange:function(s){return P(s)},content:(0,n.jsxs)("div",{style:{padding:"4px 0"},children:[(_=g.statusRender)===null||_===void 0?void 0:_.call(g,v),g.strengthText?(0,n.jsx)("div",{style:{marginTop:10},children:(0,n.jsx)("span",{children:g.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},g.popoverProps),{},{open:y,children:g.children}))}})},h=function(g){var m=g.fieldProps,C=g.proFieldProps,y=(0,L.Z)(g,r),P=(0,M.useState)(!1),U=(0,R.Z)(P,2),w=U[0],_=U[1];return m!=null&&m.statusRender&&y.name?(0,n.jsx)(o,{name:y.name,statusRender:m==null?void 0:m.statusRender,popoverProps:m==null?void 0:m.popoverProps,strengthText:m==null?void 0:m.strengthText,open:w,onOpenChange:_,children:(0,n.jsx)("div",{children:(0,n.jsx)(t.Z,(0,d.Z)({valueType:"password",fieldProps:(0,d.Z)((0,d.Z)({},(0,E.Z)(m,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(T){var s;m==null||(s=m.onBlur)===null||s===void 0||s.call(m,T),_(!1)},onClick:function(T){var s;m==null||(s=m.onClick)===null||s===void 0||s.call(m,T),_(!0)}}),proFieldProps:C,filedConfig:{valueType:l}},y))})}):(0,n.jsx)(t.Z,(0,d.Z)({valueType:"password",fieldProps:m,proFieldProps:C,filedConfig:{valueType:l}},y))},f=e;f.Password=h,f.displayName="ProFormComponent",O.Z=f},80821:function(j,O,i){"use strict";i.d(O,{Z:function(){return l}});var R=i(97857),d=i.n(R),L=i(5574),u=i.n(L),p=i(24963),c=i(36146),E=i(86738),M=i(83062),t=i(96074),n=i(83622),a=i(67294),r=i(85893);function l(e){var o=(0,a.useState)(!1),h=u()(o,2),f=h[0],D=h[1],g=(0,a.useContext)(p.Z),m=g.message,C=function(){D(!0);var k=e.action();k instanceof Promise?k.then(function(N){if(D(!1),N){typeof e.onSuccess=="function"&&e.onSuccess(N);var x=c.FD.format("finish");m.success(x)}}).catch(function(N){D(!1),typeof e.onError=="function"&&e.onError(N)}):D(!1)};if(e.confirmProps){var y,P,U,w,_,v,T,s=e.confirmProps.description;return e.confirmProps.showCommonConfirm&&(s=c.FD.format("confirm.title")),e.confirmProps.showCommonDisabled&&(s=c.FD.format("confirm.disable")),(0,r.jsx)(E.Z,d()(d()({},e.confirmProps),{},{style:{width:500},title:(y=e.confirmProps)!==null&&y!==void 0&&y.title?(P=e.confirmProps)===null||P===void 0?void 0:P.title:c.FD.format("title.tip"),description:s,onConfirm:C,okText:"Yes",cancelText:"No",children:(0,r.jsxs)(M.Z,{title:e.tips,children:[e.showDivider&&(0,r.jsx)(t.Z,{type:"vertical",style:{marginRight:15}}),(0,r.jsx)(n.ZP,d()(d()({},e.buttonProps),{},{ghost:((U=e.buttonProps)===null||U===void 0?void 0:U.ghost)&&((w=e.buttonProps)===null||w===void 0?void 0:w.type)!=="link",style:(_=e.buttonProps)!==null&&_!==void 0&&_.ghost?d()(d()({},e.buttonProps.style),{},{padding:0,width:"auto"}):d()({},(v=e.buttonProps)===null||v===void 0?void 0:v.style),icon:!e.children&&f||(T=e.buttonProps)===null||T===void 0?void 0:T.icon,loading:f,children:e.children}))]})}))}else{var z,V,b,I,Z;return(0,r.jsxs)(M.Z,{title:e.tips,children:[e.showDivider&&(0,r.jsx)(t.Z,{type:"vertical",style:{marginRight:15}}),(0,r.jsx)(n.ZP,d()(d()({},e.buttonProps),{},{ghost:((z=e.buttonProps)===null||z===void 0?void 0:z.ghost)&&((V=e.buttonProps)===null||V===void 0?void 0:V.type)!=="link",style:(b=e.buttonProps)!==null&&b!==void 0&&b.ghost?d()(d()({},e.buttonProps.style),{},{padding:0,width:"auto"}):d()({},(I=e.buttonProps)===null||I===void 0?void 0:I.style),icon:!e.children&&f||(Z=e.buttonProps)===null||Z===void 0?void 0:Z.icon,loading:f,onClick:C,children:e.children}))]})}}},81146:function(j,O,i){"use strict";var R=i(97857),d=i.n(R),L=i(15009),u=i.n(L),p=i(99289),c=i.n(p),E=i(67294),M=i(97269),t=i(62370),n=i(5966),a=i(97462),r=i(82346),l=i(71230),e=i(15746),o=i(34041),h=i(83622),f=i(84567),D=i(42075),g=i(80821),m=i(23430),C=i(93162),y=i.n(C),P=i(78267),U=i.n(P),w=i(75458),_=i.n(w),v=i(12323),T=i(4244),s=i.n(T),z=i(24078),V=i(36146),b=i(85893),I,Z,F,k={decorations:{matchBackground:"",matchBorder:"#FFFF00",activeMatchBackground:"#FFFF0066",matchOverviewRuler:"",activeMatchColorOverviewRuler:""}},N=(0,E.forwardRef)(function(x,$){var Y=(0,E.useRef)(),G=(0,r.useModel)("subscriber"),K=new V.Uo("components.containerLog");(0,E.useImperativeHandle)($,function(){return{fit:function(){I.clear(),F.fit()},start:function(){return c()(u()().mark(function A(){return u()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,J({lineTotal:500});case 2:case"end":return B.stop()}},A)}))()},close:function(){G.progress.close(x.id)}}});function J(S){return X.apply(this,arguments)}function X(){return X=c()(u()().mark(function S(A){return u()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:G.progress.close(x.id),I.clear(),A.download=!1,x.request(A);case 4:case"end":return B.stop()}},S)})),X.apply(this,arguments)}return(0,E.useEffect)(function(){return window.addEventListener("resize",function(){F.fit()}),I=new T.Terminal(d()(d()({},v.X),{},{fontSize:12,lineHeight:1.2,allowProposedApi:!0})),F=new P.FitAddon,Z=new w.SearchAddon({}),I.loadAddon(F),I.loadAddon(Z),I.open(document.getElementById("terminal-container-log")),F.fit(),G.addDataHandler(x.id,function(S){I.write(S.data)}),function(){I.clear(),I.reset(),G.progress.close(x.id)}},[]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(M.A,{submitter:!1,layout:"horizontal",onFinish:function(A){var W;J({id:x.id,lineTotal:parseInt(A.lineTotal),showTime:(W=A.showTime)!==null&&W!==void 0?W:!1})},formRef:Y,children:(0,b.jsxs)(l.Z,{gutter:[10,0],children:[(0,b.jsx)(e.Z,{span:8,children:(0,b.jsx)(t.Z,{name:"lineTotal",initialValue:"500",label:K.format("formLineTotal"),children:(0,b.jsxs)(o.Z,{defaultValue:"500",onChange:function(A){var W;(W=Y.current)===null||W===void 0||W.submit()},children:[(0,b.jsx)(o.Z.Option,{value:"100",children:K.format("formLineTotalOption",{number:"100"})}),(0,b.jsx)(o.Z.Option,{value:"200",children:K.format("formLineTotalOption",{number:"200"})}),(0,b.jsx)(o.Z.Option,{value:"500",children:K.format("formLineTotalOption",{number:"500"})}),(0,b.jsx)(o.Z.Option,{value:"1000",children:K.format("formLineTotalOption",{number:"1000"})}),(0,b.jsx)(o.Z.Option,{value:"-1",children:K.format("formLineTotalOptionAll")})]})})}),(0,b.jsx)(e.Z,{children:(0,b.jsx)(h.ZP,{onClick:function(){I.clear()},children:K.format("clearButton")})}),(0,b.jsx)(e.Z,{children:(0,b.jsx)(t.Z,{name:"showTime",valuePropName:"checked",children:(0,b.jsx)(f.Z,{onChange:function(A){var W;(W=Y.current)===null||W===void 0||W.submit()},children:K.format("formShowTime")})})}),(0,b.jsx)(e.Z,{children:(0,b.jsx)(n.Z,{label:K.format("formKeywork"),name:"keywork",fieldProps:{onPressEnter:function(){var A;Z.findNext((A=Y.current)===null||A===void 0?void 0:A.getFieldValue("keywork"),k)},onChange:function(A){Z.findNext(A.target.value,k)}},placeholder:K.format("formKeyworkEmpty")})}),(0,b.jsx)(e.Z,{children:(0,b.jsx)(a.Z,{name:["keywork"],children:function(A){var W=A.keywork;return(0,b.jsxs)(D.Z,{size:10,children:[(0,b.jsx)(h.ZP,{onClick:function(){Z.findNext(W,k)},children:K.format("formKeyworkNext")},"next"),(0,b.jsx)(h.ZP,{onClick:function(){Z.findPrevious(W,k)},children:K.format("formKeyworkPrev")},"prev")]})}})}),(0,b.jsx)(e.Z,{children:(0,b.jsx)(g.Z,{buttonProps:{icon:(0,b.jsx)(m.Z,{})},action:c()(u()().mark(function S(){var A,W,B;return u()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!x.download){H.next=5;break}return H.next=3,x.download({lineTotal:parseInt((A=Y.current)===null||A===void 0?void 0:A.getFieldValue("lineTotal")),showTime:(W=Y.current)===null||W===void 0?void 0:W.getFieldValue("showTime")});case 3:B=H.sent,(0,C.saveAs)(B.data,B.name);case 5:case"end":return H.stop()}},S)})),children:K.format("downloadButton")})})]})}),(0,b.jsx)("div",{style:{marginTop:"20px",height:x.showInDrawer?"75vh":"85vh"},id:"terminal-container-log"})]})});O.Z=N},12323:function(j,O,i){"use strict";i.d(O,{X:function(){return R},n:function(){return d}});var R={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},d=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},24963:function(j,O,i){"use strict";var R=i(67294),d=(0,R.createContext)({});O.Z=d},15141:function(j,O,i){"use strict";i.r(O),i.d(O,{default:function(){return l}});var R=i(15009),d=i.n(R),L=i(99289),u=i.n(L),p=i(81146),c=i(13822),E=i(62597),M=i(5251),t=i(38345),n=i(82346),a=i(67294),r=i(85893);function l(){var e=(0,n.useParams)(),o=(0,a.useRef)();return(0,a.useEffect)(function(){var h;return setTimeout(function(){if(e.id){var f,D;(f=o.current)===null||f===void 0||f.start(),(D=o.current)===null||D===void 0||D.fit()}},1e3),window.document.title="".concat((0,M.fi)((h=e.id)!==null&&h!==void 0?h:"","/")," - log"),function(){var f;(f=o.current)===null||f===void 0||f.close()}},[]),e.id&&(0,r.jsx)(t.Z,{children:(0,r.jsx)(p.Z,{id:"container:log:".concat(e.id),ref:o,request:function(){var h=u()(d()().mark(function f(D){return d()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,E.Tb)({id:e.id,lineTotal:D.lineTotal,download:D.download,showTime:D.showTime});case 2:case"end":return m.stop()}},f)}));return function(f){return h.apply(this,arguments)}}(),download:function(){var h=u()(d()().mark(function f(D){var g,m,C;return d()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,E.XH)({id:e.id,lineTotal:D.lineTotal,showTime:D.showTime});case 2:return m=P.sent,P.next=5,(0,c.jV)({md5:(g=e.id)!==null&&g!==void 0?g:""});case 5:return C=P.sent,P.abrupt("return",{data:new Blob([m],{type:"text/plain"}),name:C.data.info.Name.replaceAll("/","")+"_"+new Date().toLocaleDateString()+".log"});case 7:case"end":return P.stop()}},f)}));return function(f){return h.apply(this,arguments)}}()})})}},13822:function(j,O,i){"use strict";i.d(O,{IE:function(){return n},IW:function(){return M},KK:function(){return h},LJ:function(){return D},RF:function(){return y},Re:function(){return m},aF:function(){return U},eE:function(){return e},jV:function(){return r}});var R=i(5574),d=i.n(R),L=i(15009),u=i.n(L),p=i(99289),c=i.n(p),E=i(82346);function M(_){return t.apply(this,arguments)}function t(){return t=c()(u()().mark(function _(v){return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,E.request)("/api/app/container/status",{method:"POST",data:v}));case 1:case"end":return s.stop()}},_)})),t.apply(this,arguments)}function n(_){return a.apply(this,arguments)}function a(){return a=c()(u()().mark(function _(v){return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,E.request)("/api/app/container/get-list",{data:v,method:"POST"}));case 1:case"end":return s.stop()}},_)})),a.apply(this,arguments)}function r(_){return l.apply(this,arguments)}function l(){return l=c()(u()().mark(function _(v){return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,E.request)("/api/app/container/get-detail",{data:v,method:"POST"}));case 1:case"end":return s.stop()}},_)})),l.apply(this,arguments)}function e(_){return o.apply(this,arguments)}function o(){return o=c()(u()().mark(function _(v){return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,E.request)("/api/app/container/update",{data:v,method:"POST"}));case 1:case"end":return s.stop()}},_)})),o.apply(this,arguments)}function h(){return f.apply(this,arguments)}function f(){return f=c()(u()().mark(function _(){return u()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.abrupt("return",(0,E.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return T.stop()}},_)})),f.apply(this,arguments)}function D(_){return g.apply(this,arguments)}function g(){return g=c()(u()().mark(function _(v){return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!v.enableExportToPath){s.next=2;break}return s.abrupt("return",(0,E.request)("/api/app/container/export",{method:"GET",params:v}));case 2:return s.abrupt("return",new Promise(function(z,V){var b=localStorage.getItem("token"),I=new URLSearchParams;I.append("token",b||""),Object.entries(v).forEach(function(k){var N=d()(k,2),x=N[0],$=N[1];I.append(x,String($))});var Z="/api/app/container/export?".concat(I.toString()),F=document.createElement("iframe");F.style.display="none",F.src=Z,document.body.appendChild(F),setTimeout(function(){F.parentElement&&document.body.removeChild(F)},5e3),z({code:200,data:"success",error:""})}));case 3:case"end":return s.stop()}},_)})),g.apply(this,arguments)}function m(_){return C.apply(this,arguments)}function C(){return C=c()(u()().mark(function _(v){return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,E.request)("/api/app/container/commit",{method:"POST",data:v}));case 1:case"end":return s.stop()}},_)})),C.apply(this,arguments)}function y(_){return P.apply(this,arguments)}function P(){return P=c()(u()().mark(function _(v){return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,E.request)("/api/app/container/upgrade",{method:"POST",data:v}));case 1:case"end":return s.stop()}},_)})),P.apply(this,arguments)}function U(_){return w.apply(this,arguments)}function w(){return w=c()(u()().mark(function _(v){return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,E.request)("/api/app/container/copy",{method:"POST",data:v}));case 1:case"end":return s.stop()}},_)})),w.apply(this,arguments)}},62597:function(j,O,i){"use strict";i.d(O,{$G:function(){return t},Ct:function(){return m},Tb:function(){return e},XH:function(){return h},cl:function(){return r},fp:function(){return a},fu:function(){return E},iE:function(){return D},nL:function(){return M},xb:function(){return y},ze:function(){return U}});var R=i(15009),d=i.n(R),L=i(99289),u=i.n(L),p=i(82346),c="com.dpanel.container.description",E="com.dpanel.container.title",M={Nanosecond:1,Microsecond:1e3,Millisecond:1e3*1e3,Second:1e3*1e3*1e3,Minute:60*1e3*1e3*1e3,Hour:3600*1e3*1e3*1e3};function t(_){return n.apply(this,arguments)}function n(){return n=u()(d()().mark(function _(v){return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,p.request)("/api/app/site/create-by-image",{method:"POST",data:v}));case 1:case"end":return s.stop()}},_)})),n.apply(this,arguments)}var a={EnvValueRuleRequired:1,EnvValueRuleDisabled:2,EnvValueRuleInEnvFile:4,EnvValueTypeNumber:1024,EnvValueTypeText:2048,EnvValueTypeSelect:4096,EnvValueTypeSelectMultiple:8192,EnvValueTypeOnePanel:16384};function r(_){return l.apply(this,arguments)}function l(){return l=u()(d()().mark(function _(v){return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,p.request)("/api/app/site/get-list",{method:"POST",data:v}));case 1:case"end":return s.stop()}},_)})),l.apply(this,arguments)}function e(_){return o.apply(this,arguments)}function o(){return o=u()(d()().mark(function _(v){return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return v.download=!1,s.next=3,(0,p.request)("/api/app/log/run",{method:"POST",data:v});case 3:return s.abrupt("return",s.sent);case 4:case"end":return s.stop()}},_)})),o.apply(this,arguments)}function h(_){return f.apply(this,arguments)}function f(){return f=u()(d()().mark(function _(v){return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return v.download=!0,s.next=3,(0,p.request)("/api/app/log/run",{method:"POST",data:v,responseType:"blob"});case 3:return s.abrupt("return",s.sent);case 4:case"end":return s.stop()}},_)})),f.apply(this,arguments)}function D(_){return g.apply(this,arguments)}function g(){return g=u()(d()().mark(function _(v){return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return v.id=String(v.id),s.next=3,(0,p.request)("/api/app/site/get-detail",{data:v,method:"POST"});case 3:return s.abrupt("return",s.sent);case 4:case"end":return s.stop()}},_)})),g.apply(this,arguments)}function m(_){return C.apply(this,arguments)}function C(){return C=u()(d()().mark(function _(v){return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,p.request)("/api/app/container/delete",{method:"POST",data:v}));case 1:case"end":return s.stop()}},_)})),C.apply(this,arguments)}function y(_){return P.apply(this,arguments)}function P(){return P=u()(d()().mark(function _(v){return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,p.request)("/api/app/site/delete",{method:"POST",data:v}));case 1:case"end":return s.stop()}},_)})),P.apply(this,arguments)}function U(_){return w.apply(this,arguments)}function w(){return w=u()(d()().mark(function _(v){return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,p.request)("/api/app/container/ignore",{method:"POST",data:v}));case 1:case"end":return s.stop()}},_)})),w.apply(this,arguments)}},75458:function(j){(function(O,i){j.exports=i()})(self,()=>(()=>{"use strict";var O={345:(L,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.runAndSubscribe=u.forwardEvent=u.EventEmitter=void 0,u.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=p=>(this._listeners.push(p),{dispose:()=>{if(!this._disposed){for(let c=0;c<this._listeners.length;c++)if(this._listeners[c]===p)return void this._listeners.splice(c,1)}}})),this._event}fire(p,c){const E=[];for(let M=0;M<this._listeners.length;M++)E.push(this._listeners[M]);for(let M=0;M<E.length;M++)E[M].call(void 0,p,c)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},u.forwardEvent=function(p,c){return p(E=>c.fire(E))},u.runAndSubscribe=function(p,c){return c(void 0),p(E=>c(E))}},859:(L,u)=>{function p(c){for(const E of c)E.dispose();c.length=0}Object.defineProperty(u,"__esModule",{value:!0}),u.getDisposeArrayDisposable=u.disposeArray=u.toDisposable=u.MutableDisposable=u.Disposable=void 0,u.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const c of this._disposables)c.dispose();this._disposables.length=0}register(c){return this._disposables.push(c),c}unregister(c){const E=this._disposables.indexOf(c);E!==-1&&this._disposables.splice(E,1)}},u.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(c){var E;this._isDisposed||c===this._value||((E=this._value)==null||E.dispose(),this._value=c)}clear(){this.value=void 0}dispose(){var c;this._isDisposed=!0,(c=this._value)==null||c.dispose(),this._value=void 0}},u.toDisposable=function(c){return{dispose:c}},u.disposeArray=p,u.getDisposeArrayDisposable=function(c){return{dispose:()=>p(c)}}}},i={};function R(L){var u=i[L];if(u!==void 0)return u.exports;var p=i[L]={exports:{}};return O[L](p,p.exports,R),p.exports}var d={};return(()=>{var L=d;Object.defineProperty(L,"__esModule",{value:!0}),L.SearchAddon=void 0;const u=R(345),p=R(859),c=" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?";class E extends p.Disposable{constructor(t){var n;super(),this._highlightedLines=new Set,this._highlightDecorations=[],this._selectedDecoration=this.register(new p.MutableDisposable),this._linesCacheTimeoutId=0,this._linesCacheDisposables=new p.MutableDisposable,this._onDidChangeResults=this.register(new u.EventEmitter),this.onDidChangeResults=this._onDidChangeResults.event,this._highlightLimit=(n=t==null?void 0:t.highlightLimit)!=null?n:1e3}activate(t){this._terminal=t,this.register(this._terminal.onWriteParsed(()=>this._updateMatches())),this.register(this._terminal.onResize(()=>this._updateMatches())),this.register((0,p.toDisposable)(()=>this.clearDecorations()))}_updateMatches(){var t;this._highlightTimeout&&window.clearTimeout(this._highlightTimeout),this._cachedSearchTerm&&((t=this._lastSearchOptions)!=null&&t.decorations)&&(this._highlightTimeout=setTimeout(()=>{const n=this._cachedSearchTerm;this._cachedSearchTerm=void 0,this.findPrevious(n,te(ee({},this._lastSearchOptions),{incremental:!0,noScroll:!0}))},200))}clearDecorations(t){this._selectedDecoration.clear(),(0,p.disposeArray)(this._highlightDecorations),this._highlightDecorations=[],this._highlightedLines.clear(),t||(this._cachedSearchTerm=void 0)}clearActiveDecoration(){this._selectedDecoration.clear()}findNext(t,n){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");const a=!this._lastSearchOptions||this._didOptionsChange(this._lastSearchOptions,n);this._lastSearchOptions=n,n!=null&&n.decorations&&(this._cachedSearchTerm===void 0||t!==this._cachedSearchTerm||a)&&this._highlightAllMatches(t,n);const r=this._findNextAndSelect(t,n);return this._fireResults(n),this._cachedSearchTerm=t,r}_highlightAllMatches(t,n){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!t||t.length===0)return void this.clearDecorations();n=n||{},this.clearDecorations(!0);const a=[];let r,l=this._find(t,0,0,n);for(;l&&((r==null?void 0:r.row)!==l.row||(r==null?void 0:r.col)!==l.col)&&!(a.length>=this._highlightLimit);)r=l,a.push(r),l=this._find(t,r.col+r.term.length>=this._terminal.cols?r.row+1:r.row,r.col+r.term.length>=this._terminal.cols?0:r.col+1,n);for(const e of a){const o=this._createResultDecoration(e,n.decorations);o&&(this._highlightedLines.add(o.marker.line),this._highlightDecorations.push({decoration:o,match:e,dispose(){o.dispose()}}))}}_find(t,n,a,r){var o;if(!this._terminal||!t||t.length===0)return(o=this._terminal)==null||o.clearSelection(),void this.clearDecorations();if(a>this._terminal.cols)throw new Error(`Invalid col: ${a} to search in terminal of ${this._terminal.cols} cols`);let l;this._initLinesCache();const e={startRow:n,startCol:a};if(l=this._findInLine(t,e,r),!l)for(let h=n+1;h<this._terminal.buffer.active.baseY+this._terminal.rows&&(e.startRow=h,e.startCol=0,l=this._findInLine(t,e,r),!l);h++);return l}_findNextAndSelect(t,n){var h;if(!this._terminal||!t||t.length===0)return(h=this._terminal)==null||h.clearSelection(),this.clearDecorations(),!1;const a=this._terminal.getSelectionPosition();this._terminal.clearSelection();let r=0,l=0;a&&(this._cachedSearchTerm===t?(r=a.end.x,l=a.end.y):(r=a.start.x,l=a.start.y)),this._initLinesCache();const e={startRow:l,startCol:r};let o=this._findInLine(t,e,n);if(!o)for(let f=l+1;f<this._terminal.buffer.active.baseY+this._terminal.rows&&(e.startRow=f,e.startCol=0,o=this._findInLine(t,e,n),!o);f++);if(!o&&l!==0)for(let f=0;f<l&&(e.startRow=f,e.startCol=0,o=this._findInLine(t,e,n),!o);f++);return!o&&a&&(e.startRow=a.start.y,e.startCol=0,o=this._findInLine(t,e,n)),this._selectResult(o,n==null?void 0:n.decorations,n==null?void 0:n.noScroll)}findPrevious(t,n){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");const a=!this._lastSearchOptions||this._didOptionsChange(this._lastSearchOptions,n);this._lastSearchOptions=n,n!=null&&n.decorations&&(this._cachedSearchTerm===void 0||t!==this._cachedSearchTerm||a)&&this._highlightAllMatches(t,n);const r=this._findPreviousAndSelect(t,n);return this._fireResults(n),this._cachedSearchTerm=t,r}_didOptionsChange(t,n){return!!n&&(t.caseSensitive!==n.caseSensitive||t.regex!==n.regex||t.wholeWord!==n.wholeWord)}_fireResults(t){if(t!=null&&t.decorations){let n=-1;if(this._selectedDecoration.value){const a=this._selectedDecoration.value.match;for(let r=0;r<this._highlightDecorations.length;r++){const l=this._highlightDecorations[r].match;if(l.row===a.row&&l.col===a.col&&l.size===a.size){n=r;break}}}this._onDidChangeResults.fire({resultIndex:n,resultCount:this._highlightDecorations.length})}}_findPreviousAndSelect(t,n){var f;if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!this._terminal||!t||t.length===0)return(f=this._terminal)==null||f.clearSelection(),this.clearDecorations(),!1;const a=this._terminal.getSelectionPosition();this._terminal.clearSelection();let r=this._terminal.buffer.active.baseY+this._terminal.rows-1,l=this._terminal.cols;const e=!0;this._initLinesCache();const o={startRow:r,startCol:l};let h;if(a&&(o.startRow=r=a.start.y,o.startCol=l=a.start.x,this._cachedSearchTerm!==t&&(h=this._findInLine(t,o,n,!1),h||(o.startRow=r=a.end.y,o.startCol=l=a.end.x))),h||(h=this._findInLine(t,o,n,e)),!h){o.startCol=Math.max(o.startCol,this._terminal.cols);for(let D=r-1;D>=0&&(o.startRow=D,h=this._findInLine(t,o,n,e),!h);D--);}if(!h&&r!==this._terminal.buffer.active.baseY+this._terminal.rows-1)for(let D=this._terminal.buffer.active.baseY+this._terminal.rows-1;D>=r&&(o.startRow=D,h=this._findInLine(t,o,n,e),!h);D--);return this._selectResult(h,n==null?void 0:n.decorations,n==null?void 0:n.noScroll)}_initLinesCache(){const t=this._terminal;this._linesCache||(this._linesCache=new Array(t.buffer.active.length),this._linesCacheDisposables.value=(0,p.getDisposeArrayDisposable)([t.onLineFeed(()=>this._destroyLinesCache()),t.onCursorMove(()=>this._destroyLinesCache()),t.onResize(()=>this._destroyLinesCache())])),window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=window.setTimeout(()=>this._destroyLinesCache(),15e3)}_destroyLinesCache(){this._linesCache=void 0,this._linesCacheDisposables.clear(),this._linesCacheTimeoutId&&(window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=0)}_isWholeWord(t,n,a){return(t===0||c.includes(n[t-1]))&&(t+a.length===n.length||c.includes(n[t+a.length]))}_findInLine(t,n,a={},r=!1){var U;const l=this._terminal,e=n.startRow,o=n.startCol,h=l.buffer.active.getLine(e);if(h!=null&&h.isWrapped)return r?void(n.startCol+=l.cols):(n.startRow--,n.startCol+=l.cols,this._findInLine(t,n,a));let f=(U=this._linesCache)==null?void 0:U[e];f||(f=this._translateBufferLineToStringWithWrap(e,!0),this._linesCache&&(this._linesCache[e]=f));const[D,g]=f,m=this._bufferColsToStringOffset(e,o),C=a.caseSensitive?t:t.toLowerCase(),y=a.caseSensitive?D:D.toLowerCase();let P=-1;if(a.regex){const w=RegExp(C,"g");let _;if(r)for(;_=w.exec(y.slice(0,m));)P=w.lastIndex-_[0].length,t=_[0],w.lastIndex-=t.length-1;else _=w.exec(y.slice(m)),_&&_[0].length>0&&(P=m+(w.lastIndex-_[0].length),t=_[0])}else r?m-C.length>=0&&(P=y.lastIndexOf(C,m-C.length)):P=y.indexOf(C,m);if(P>=0){if(a.wholeWord&&!this._isWholeWord(P,y,t))return;let w=0;for(;w<g.length-1&&P>=g[w+1];)w++;let _=w;for(;_<g.length-1&&P+t.length>=g[_+1];)_++;const v=P-g[w],T=P+t.length-g[_],s=this._stringLengthToBufferSize(e+w,v);return{term:t,col:s,row:e+w,size:this._stringLengthToBufferSize(e+_,T)-s+l.cols*(_-w)}}}_stringLengthToBufferSize(t,n){const a=this._terminal.buffer.active.getLine(t);if(!a)return 0;for(let r=0;r<n;r++){const l=a.getCell(r);if(!l)break;const e=l.getChars();e.length>1&&(n-=e.length-1);const o=a.getCell(r+1);o&&o.getWidth()===0&&n++}return n}_bufferColsToStringOffset(t,n){const a=this._terminal;let r=t,l=0,e=a.buffer.active.getLine(r);for(;n>0&&e;){for(let o=0;o<n&&o<a.cols;o++){const h=e.getCell(o);if(!h)break;h.getWidth()&&(l+=h.getCode()===0?1:h.getChars().length)}if(r++,e=a.buffer.active.getLine(r),e&&!e.isWrapped)break;n-=a.cols}return l}_translateBufferLineToStringWithWrap(t,n){var o;const a=this._terminal,r=[],l=[0];let e=a.buffer.active.getLine(t);for(;e;){const h=a.buffer.active.getLine(t+1),f=!!h&&h.isWrapped;let D=e.translateToString(!f&&n);if(f&&h){const g=e.getCell(e.length-1);g&&g.getCode()===0&&g.getWidth()===1&&((o=h.getCell(0))==null?void 0:o.getWidth())===2&&(D=D.slice(0,-1))}if(r.push(D),!f)break;l.push(l[l.length-1]+D.length),t++,e=h}return[r.join(""),l]}_selectResult(t,n,a){const r=this._terminal;if(this._selectedDecoration.clear(),!t)return r.clearSelection(),!1;if(r.select(t.col,t.row,t.size),n){const l=r.registerMarker(-r.buffer.active.baseY-r.buffer.active.cursorY+t.row);if(l){const e=r.registerDecoration({marker:l,x:t.col,width:t.size,backgroundColor:n.activeMatchBackground,layer:"top",overviewRulerOptions:{color:n.activeMatchColorOverviewRuler}});if(e){const o=[];o.push(l),o.push(e.onRender(h=>this._applyStyles(h,n.activeMatchBorder,!0))),o.push(e.onDispose(()=>(0,p.disposeArray)(o))),this._selectedDecoration.value={decoration:e,match:t,dispose(){e.dispose()}}}}}if(!a&&(t.row>=r.buffer.active.viewportY+r.rows||t.row<r.buffer.active.viewportY)){let l=t.row-r.buffer.active.viewportY;l-=Math.floor(r.rows/2),r.scrollLines(l)}return!0}_applyStyles(t,n,a){t.classList.contains("xterm-find-result-decoration")||(t.classList.add("xterm-find-result-decoration"),n&&(t.style.outline=`1px solid ${n}`)),a&&t.classList.add("xterm-find-active-result-decoration")}_createResultDecoration(t,n){const a=this._terminal,r=a.registerMarker(-a.buffer.active.baseY-a.buffer.active.cursorY+t.row);if(!r)return;const l=a.registerDecoration({marker:r,x:t.col,width:t.size,backgroundColor:n.matchBackground,overviewRulerOptions:this._highlightedLines.has(r.line)?void 0:{color:n.matchOverviewRuler,position:"center"}});if(l){const e=[];e.push(r),e.push(l.onRender(o=>this._applyStyles(o,n.matchBorder,!1))),e.push(l.onDispose(()=>(0,p.disposeArray)(e)))}return l}}L.SearchAddon=E})(),d})())},93162:function(j,O,i){var R,d,L;(function(u,p){d=[],R=p,L=typeof R=="function"?R.apply(O,d):R,L!==void 0&&(j.exports=L)})(this,function(){"use strict";function u(a,r){return typeof r=="undefined"?r={autoBom:!1}:typeof r!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function p(a,r,l){var e=new XMLHttpRequest;e.open("GET",a),e.responseType="blob",e.onload=function(){n(e.response,r,l)},e.onerror=function(){console.error("could not download file")},e.send()}function c(a){var r=new XMLHttpRequest;r.open("HEAD",a,!1);try{r.send()}catch(l){}return 200<=r.status&&299>=r.status}function E(a){try{a.dispatchEvent(new MouseEvent("click"))}catch(l){var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(r)}}var M=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof i.g=="object"&&i.g.global===i.g?i.g:void 0,t=M.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),n=M.saveAs||(typeof window!="object"||window!==M?function(){}:"download"in HTMLAnchorElement.prototype&&!t?function(a,r,l){var e=M.URL||M.webkitURL,o=document.createElement("a");r=r||a.name||"download",o.download=r,o.rel="noopener",typeof a=="string"?(o.href=a,o.origin===location.origin?E(o):c(o.href)?p(a,r,l):E(o,o.target="_blank")):(o.href=e.createObjectURL(a),setTimeout(function(){e.revokeObjectURL(o.href)},4e4),setTimeout(function(){E(o)},0))}:"msSaveOrOpenBlob"in navigator?function(a,r,l){if(r=r||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(u(a,l),r);else if(c(a))p(a,r,l);else{var e=document.createElement("a");e.href=a,e.target="_blank",setTimeout(function(){E(e)})}}:function(a,r,l,e){if(e=e||open("","_blank"),e&&(e.document.title=e.document.body.innerText="downloading..."),typeof a=="string")return p(a,r,l);var o=a.type==="application/octet-stream",h=/constructor/i.test(M.HTMLElement)||M.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent);if((f||o&&h||t)&&typeof FileReader!="undefined"){var D=new FileReader;D.onloadend=function(){var C=D.result;C=f?C:C.replace(/^data:[^;]*;/,"data:attachment/file;"),e?e.location.href=C:location=C,e=null},D.readAsDataURL(a)}else{var g=M.URL||M.webkitURL,m=g.createObjectURL(a);e?e.location=m:location.href=m,e=null,setTimeout(function(){g.revokeObjectURL(m)},4e4)}});M.saveAs=n.saveAs=n,j.exports=n})}}]);
}());