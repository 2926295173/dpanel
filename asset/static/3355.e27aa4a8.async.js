"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3355],{28307:function(I,b,a){var M=a(5574),n=a.n(M),D=a(38345),_=a(97269),r=a(5966),p=a(62370),c=a(14726),T=a(85265),E=a(42075),v=a(34041),g=a(67294),O=a(80821),f=a(3393),P=a(97961),h=a(92754),t=a(85893),o=(0,g.forwardRef)(function(m,s){var d=(0,g.useState)(!1),B=n()(d,2),R=B[0],j=B[1],C=(0,g.useRef)(),y=(0,g.useRef)();return(0,g.useImperativeHandle)(s,function(){return{upgradeImage:function(l){var u;return j(!0),(u=C.current)===null||u===void 0||u.setFieldValue("imageUrl",l),(0,f.Gb)({tag:l,type:"pull"})},setImageName:function(l){var u;j(!0),(u=C.current)===null||u===void 0||u.setFieldValue("imageUrl",l)}}}),[(0,t.jsx)(c.ZP,{type:m.buttonType?m.buttonType:"default",onClick:function(){var l,u;m.onClick&&m.onClick(),j(!0),(l=C.current)===null||l===void 0||l.resetFields(),(u=y.current)===null||u===void 0||u.setStart()},children:"\u62C9\u53D6\u65B0\u955C\u50CF"},"remoteBtn"),(0,t.jsxs)(T.Z,{forceRender:!0,open:R,title:"\u4E0B\u8F7D\u8FDC\u7A0B\u955C\u50CF",width:800,onClose:function(){return j(!1)},footer:!1,children:[(0,t.jsx)(D.Z,{children:(0,t.jsxs)(E.Z,{direction:"vertical",size:"middle",children:[(0,t.jsxs)("div",{children:["1\u3001\u955C\u50CF\u540D\u79F0\u4E2D\u4E0D\u5305\u542B\u4ED3\u5E93\u5730\u5740\u65F6\uFF0C \u9ED8\u8BA4\u4ECE ",(0,t.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:"docker hub"})," \u4E2D\u4E0B\u8F7D\uFF0C \u4F60\u53EF\u4EE5\u5728\u4E0A\u9762",(0,t.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:"\u3010\u67E5\u627E\u3011"}),"\u9700\u8981\u7684\u955C\u50CF"]}),(0,t.jsxs)("div",{children:["2\u3001\u955C\u50CF\u4E2D\u5305\u542B\u4ED3\u5E93\u5730\u5740\u65F6\uFF0C\u8BF7\u786E",(0,t.jsx)("a",{href:"/image/registry",children:"\u3010\u6DFB\u52A0\u3011"}),"\u8FC7\u8BE5\u4ED3\u5E93\uFF0C\u5E76\u6709 Pull \u6743\u9650"]}),(0,t.jsxs)("div",{children:["3\u3001\u53EF\u5728",(0,t.jsx)("a",{href:"/image/registry",children:"\u3010\u4ED3\u5E93\u7BA1\u7406\u3011"}),"\u4E2D\u914D\u7F6E\u955C\u50CF\u7684\u52A0\u901F\u5730\u5740"]})]})}),(0,t.jsx)(D.Z,{title:"\u4E0B\u8F7D\u955C\u50CF",headerBordered:!0,children:(0,t.jsxs)(_.A,{submitter:!1,formRef:C,children:[(0,t.jsxs)(E.Z.Compact,{children:[(0,t.jsx)(r.Z,{width:400,name:"imageUrl",placeholder:"\u8BF7\u8F93\u5165\u955C\u50CF\u5730\u5740"}),(0,t.jsx)(p.Z,{name:"platform",children:(0,t.jsx)(v.Z,{style:{width:150},placeholder:"\u9ED8\u8BA4\u5F53\u524D\u67B6\u6784",options:P.ii.map(function(i){return{label:i.name,value:i.name}})})}),(0,t.jsx)(O.Z,{action:function(){var l,u,e,F,U=(l=(u=C.current)===null||u===void 0?void 0:u.getFieldValue("imageUrl"))!==null&&l!==void 0?l:"";return(0,f.Gb)({tag:U,type:"pull",platform:(e=(F=C.current)===null||F===void 0?void 0:F.getFieldValue("platform"))!==null&&e!==void 0?e:"amd64"})},onSuccess:function(l){var u;(u=y.current)===null||u===void 0||u.setFinish(),j(!1),m.onFinish&&m.onFinish(l.data.tag)},messageSuccess:function(l){var u="\u62C9\u53D6\u6210\u529F";return l.data.proxyUrl&&(u+="\uFF0C\u4F7F\u7528\u4EE3\u7406 "+l.data.proxyUrl),u},children:"\u62C9\u53D6\u955C\u50CF"})]}),(0,t.jsx)(p.Z,{label:"\u4E0B\u8F7D\u8FDB\u5EA6",children:(0,t.jsx)(h.Z,{ref:y})})]})})]},"remoteDrawer")]});b.Z=o},92754:function(I,b,a){var M=a(5574),n=a.n(M),D=a(67294),_=a(54006),r=a(38703),p=a(85893),c=(0,D.forwardRef)(function(T,E){(0,D.useImperativeHandle)(E,function(){return{setFinish:function(){P({finish:{downloading:100,extracting:100}})},setStart:function(){P({start:{downloading:0,extracting:0}})}}});var v=(0,_.useModel)("subscriber");v.addDataHandler("imageDownload",function(){var h=v.getDataByType("imageDownload"),t=h.pop();t&&P(t.data)});var g=(0,D.useState)(),O=n()(g,2),f=O[0],P=O[1];return(0,D.useEffect)(function(){P({start:{downloading:0,extracting:0}})},[]),(0,p.jsx)(p.Fragment,{children:f&&Object.keys(f).map(function(h){return(0,p.jsx)(r.Z,{percent:f[h].downloading,success:{percent:f[h].extracting}},h)})})});b.Z=c},97961:function(I,b,a){a.d(b,{MF:function(){return h},_2:function(){return f},fN:function(){return c},hG:function(){return g},ii:function(){return p},vC:function(){return E}});var M=a(15009),n=a.n(M),D=a(99289),_=a.n(D),r=a(54006),p=[{name:"amd64",arch:"amd64"},{name:"arm64",arch:"arm64"},{name:"i386",arch:"386"},{name:"arm/v6",arch:"arm"},{name:"arm/v7",arch:"arm"},{name:"arm/v8",arch:"arm64"},{name:"ppc64le",arch:"ppc64le"},{name:"riscv64",arch:"riscv64"}];function c(o){return T.apply(this,arguments)}function T(){return T=_()(n()().mark(function o(m){return n()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,r.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:m}));case 1:case"end":return d.stop()}},o)})),T.apply(this,arguments)}function E(o){return v.apply(this,arguments)}function v(){return v=_()(n()().mark(function o(m){return n()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,r.request)("/api/app/image/import-by-container-tar",{method:"POST",data:m}));case 1:case"end":return d.stop()}},o)})),v.apply(this,arguments)}function g(o){return O.apply(this,arguments)}function O(){return O=_()(n()().mark(function o(m){return n()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,r.request)("/api/app/image/import-by-image-tar",{method:"POST",data:m}));case 1:case"end":return d.stop()}},o)})),O.apply(this,arguments)}function f(o){return P.apply(this,arguments)}function P(){return P=_()(n()().mark(function o(m){return n()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,r.request)("/api/common/attach/delete",{method:"POST",data:m});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},o)})),P.apply(this,arguments)}function h(){return t.apply(this,arguments)}function t(){return t=_()(n()().mark(function o(){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,r.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return s.stop()}},o)})),t.apply(this,arguments)}},3393:function(I,b,a){a.d(b,{Gb:function(){return T},Pn:function(){return O},Rb:function(){return P},YU:function(){return p},_U:function(){return v}});var M=a(15009),n=a.n(M),D=a(99289),_=a.n(D),r=a(54006);function p(t){return c.apply(this,arguments)}function c(){return c=_()(n()().mark(function t(o){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,r.request)("/api/app/image/get-detail",{method:"POST",data:o}));case 1:case"end":return s.stop()}},t)})),c.apply(this,arguments)}function T(t){return E.apply(this,arguments)}function E(){return E=_()(n()().mark(function t(o){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,r.request)("/api/app/image/tag-remote",{method:"POST",data:o}));case 1:case"end":return s.stop()}},t)})),E.apply(this,arguments)}function v(t){return g.apply(this,arguments)}function g(){return g=_()(n()().mark(function t(o){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,r.request)("/api/app/image/tag-add",{method:"POST",data:o}));case 1:case"end":return s.stop()}},t)})),g.apply(this,arguments)}function O(t){return f.apply(this,arguments)}function f(){return f=_()(n()().mark(function t(o){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,r.request)("/api/app/image/tag-delete",{method:"POST",data:o}));case 1:case"end":return s.stop()}},t)})),f.apply(this,arguments)}function P(t){return h.apply(this,arguments)}function h(){return h=_()(n()().mark(function t(o){return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,r.request)("/api/app/image/export",{method:"POST",data:o,responseType:"blob"}));case 1:case"end":return s.stop()}},t)})),h.apply(this,arguments)}},18148:function(I,b,a){a.d(b,{$q:function(){return P},Fj:function(){return R},KG:function(){return p},KX:function(){return C},T8:function(){return O},Xn:function(){return v},ao:function(){return t},c5:function(){return d},c7:function(){return m}});var M=a(15009),n=a.n(M),D=a(99289),_=a.n(D),r=a(54006);function p(i){return c.apply(this,arguments)}function c(){return c=_()(n()().mark(function i(l){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,r.request)("/api/app/image/get-list",{method:"POST",data:l}));case 1:case"end":return e.stop()}},i)})),c.apply(this,arguments)}function T(i){return E.apply(this,arguments)}function E(){return E=_asyncToGenerator(_regeneratorRuntime().mark(function i(l){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request("/api/app/log/image-build",{method:"POST",data:l});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},i)})),E.apply(this,arguments)}function v(i){return g.apply(this,arguments)}function g(){return g=_()(n()().mark(function i(l){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,r.request)("/api/app/image/get-list-build",{method:"POST",data:l}));case 1:case"end":return e.stop()}},i)})),g.apply(this,arguments)}function O(i){return f.apply(this,arguments)}function f(){return f=_()(n()().mark(function i(l){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,r.request)("/api/app/image/get-build-task",{method:"POST",data:l});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},i)})),f.apply(this,arguments)}function P(i){return h.apply(this,arguments)}function h(){return h=_()(n()().mark(function i(l){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,r.request)("/api/app/image/delete-build-task",{method:"POST",data:l});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},i)})),h.apply(this,arguments)}function t(i){return o.apply(this,arguments)}function o(){return o=_()(n()().mark(function i(l){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,r.request)("/api/app/image/image-delete",{method:"POST",data:l});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},i)})),o.apply(this,arguments)}function m(){return s.apply(this,arguments)}function s(){return s=_()(n()().mark(function i(){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,r.request)("/api/app/image/image-prune",{method:"POST"});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},i)})),s.apply(this,arguments)}function d(){return B.apply(this,arguments)}function B(){return B=_()(n()().mark(function i(){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,r.request)("/api/app/image/build-prune",{method:"POST"});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},i)})),B.apply(this,arguments)}function R(i){return j.apply(this,arguments)}function j(){return j=_()(n()().mark(function i(l){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,r.request)("/api/app/image/update-title",{method:"POST",data:l});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},i)})),j.apply(this,arguments)}function C(i){return y.apply(this,arguments)}function y(){return y=_()(n()().mark(function i(l){return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,r.request)("/api/app/image/tag-sync",{method:"POST",data:l}));case 1:case"end":return e.stop()}},i)})),y.apply(this,arguments)}},5251:function(I,b,a){a.d(b,{FI:function(){return n},ZM:function(){return D}});function M(_){return _.trim()}function n(_){var r="";_<.1*1024?r=_.toFixed(2)+"B":_<.1*1024*1024?r=(_/1024).toFixed(2)+"KB":_<1*1024*1024*1024?r=(_/(1024*1024)).toFixed(2)+"MB":r=(_/(1024*1024*1024)).toFixed(2)+"GB";var p=r+"",c=p.indexOf("."),T=p.substr(c+1,2);return T=="00"?p.substring(0,c)+p.substr(c+3,2):r}function D(_){if(_){var r=new Date(_),p=r.getFullYear()+"-",c=(r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1)+"-",T=(r.getDate()<10?"0"+r.getDate():r.getDate())+" ",E=(r.getHours()<10?"0"+r.getHours():r.getHours())+":",v=(r.getMinutes()<10?"0"+r.getMinutes():r.getMinutes())+":",g=r.getSeconds()<10?"0"+r.getSeconds():r.getSeconds();return p+c+T+E+v+g}}}}]);
