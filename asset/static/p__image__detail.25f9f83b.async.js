"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3357],{80821:function(L,j,e){e.d(j,{Z:function(){return M}});var b=e(5574),r=e.n(b),R=e(24963),l=e(86738),_=e(28036),y=e(83062),p=e(67294),B=e(85893);function M(u){var O=(0,p.useState)(!1),A=r()(O,2),P=A[0],E=A[1],m=(0,p.useContext)(R.Z),c=m.lang,i=m.notice,W=m.message,I=function(){E(!0);var h=u.action();h instanceof Promise?h.then(function(T){if(E(!1),T){typeof u.onSuccess=="function"&&u.onSuccess(T);var s="";u.messageSuccess?typeof u.messageSuccess=="function"?s=u.messageSuccess(T):s=u.messageSuccess.indexOf("notification.")==0?c(u.messageSuccess):u.messageSuccess:s=c("notification.finish"),u.asynced?W.info(s):W.success(s)}}).catch(function(T){E(!1),typeof u.onError=="function"&&u.onError(T)}):E(!1)};return u.confirm?(0,B.jsx)(l.Z,{style:{width:500},title:u.confirmTitle?u.confirmTitle:c("notification.title.tip"),description:typeof u.confirm=="string"&&u.confirm.indexOf("notification.")==0?c(u.confirm):u.confirm,onConfirm:I,okText:"Yes",cancelText:"No",onOpenChange:u.confirmOnOpenChange,children:(0,B.jsx)(_.ZP,{block:u.block,disabled:u.disabled,icon:u.icon,loading:P,danger:u.danger,type:u.type,children:u.children})}):(0,B.jsx)(y.Z,{title:u.tips,children:(0,B.jsx)(_.ZP,{block:u.block,style:u.ghost?{padding:0,height:"auto"}:{},disabled:u.disabled,icon:u.icon,loading:P,onClick:I,danger:u.danger,type:u.type,children:u.children})})}},96042:function(L,j,e){e.d(j,{Z:function(){return M}});var b=e(97857),r=e.n(b),R=e(5574),l=e.n(R),_=e(75870),y=e(34041),p=e(67294),B=e(85893);function M(u){var O=(0,p.useState)([]),A=l()(O,2),P=A[0],E=A[1];(0,p.useEffect)(function(){(0,_.Ot)().then(function(c){c&&E(c.data.list)})},[]);var m={};return u.multiple&&(m.mode="multiple"),u.top&&(m.placement="topLeft"),(0,B.jsx)(y.Z,r()({popupMatchSelectWidth:!u.width,style:u.width?{width:u.width}:{},onChange:function(i){if(Array.isArray(i)){var W=i.map(function(I){return P[I]});u.onChangeList&&u.onChangeList(W)}else u.onChange&&u.onChange(P[i])},placeholder:"\u9009\u62E9\u955C\u50CF\u4ED3\u5E93\uFF0C\u9ED8\u8BA4\u4E3A\u5F53\u524D\u4ED3\u5E93",options:P.map(function(c,i){return{value:i,label:c.title+"("+c.serverAddress+")"}}),allowClear:!0},m))}},76428:function(L,j,e){e.d(j,{Z:function(){return l}});var b=e(25593),r=e(67294),R=e(85893);function l(_){return(0,R.jsx)(b.Z.Text,{copyable:!0,children:_.title})}},24963:function(L,j,e){var b=e(67294),r=(0,b.createContext)({});j.Z=r},70977:function(L,j,e){e.r(j),e.d(j,{default:function(){return oe}});var b=e(15009),r=e.n(b),R=e(99289),l=e.n(R),_=e(5574),y=e.n(_),p=e(3393),B=e(43425),M=e(58638),u=e(87784),O=e(40666),A=e(1912),P=e(77171),E=e(48689),m=e(45742),c=e(38345),i=e(97269),W=e(62370),I=e(7529),f=e(5966),h=e(82346),T=e(42075),s=e(96074),w=e(65233),Z=e(2487),o=e(4393),v=e(66309),D=e(25593),a=e(26412),re=e(60940),x=e(67294),$=e(80821),ue=e(5251),z=e(93162),he=e.n(z),se=e(18148),ie=e(96042),_e=e(24963),le=e(76428),t=e(85893);function oe(){var G,k=(0,x.useContext)(_e.Z),De=k.message,ve=k.notice,Pe=k.lang,de=(0,x.useState)(),Y=y()(de,2),n=Y[0],ce=Y[1],X=(0,h.useParams)(),V=(0,x.useRef)(),me=(0,x.useState)(0),H=y()(me,2),N=H[0],Q=H[1],pe=(0,h.useNavigate)(),J=(0,h.useAccess)(),fe=(0,x.useState)(),q=y()(fe,2),S=q[0],ge=q[1],Ee=(0,x.useState)(""),ee=y()(Ee,2),ne=ee[0],te=ee[1];return(0,x.useEffect)(function(){X.id&&(0,p.YU)({md5:X.id}).then(function(d){ce(d.data),J.canSeeImageRemoteTag&&(0,p.cd)({imageName:d.data.info.RepoTags[0]}).then(function(g){ge(g.data.list)}).catch(function(g){})})},[N]),(0,t.jsx)("div",{children:(0,t.jsxs)(c.Z,{direction:"column",ghost:!0,gutter:[0,10],children:[(0,t.jsx)(c.Z,{title:(0,t.jsx)(B.Z,{}),subTitle:"\u5E38\u7528\u64CD\u4F5C",headerBordered:!0,bordered:!0,children:(0,t.jsxs)(T.Z,{children:[(0,t.jsx)($.Z,{icon:(0,t.jsx)(M.Z,{}),action:function(){var g;return(0,p.Rb)({md5:(g=n==null?void 0:n.info.RepoTags)!==null&&g!==void 0?g:[""]})},onSuccess:function(g){var C=new Blob([g],{type:"application/tar"});(0,z.saveAs)(C,(n==null?void 0:n.info.RepoTags.join("-"))+".tar")},children:"\u5BFC\u51FA"}),(0,t.jsx)(s.Z,{}),(0,t.jsx)($.Z,{icon:(0,t.jsx)(u.Z,{}),danger:!0,type:"primary",action:function(){var g;return(0,se.ao)({md5:[(g=n==null?void 0:n.info.Id)!==null&&g!==void 0?g:""],force:!0})},onSuccess:function(){pe("/image/list")},confirm:"notification.confirm.title",children:"\u5F3A\u5236\u5220\u9664"})]})}),J.canSeeImageRemoteTag&&(0,t.jsx)(c.Z,{title:(0,t.jsx)(O.Z,{}),subTitle:"\u8FDC\u7A0B Tag \u5217\u8868",extra:(0,t.jsx)(i.A,{isKeyPressSubmit:!0,submitter:!1,onFinish:function(g){te(g.search)},children:(0,t.jsx)(T.Z.Compact,{children:(0,t.jsx)(W.Z,{style:{margin:0},name:"search",children:(0,t.jsx)(w.Z,{allowClear:!0,addonBefore:"\u641C\u7D22Tag",placeholder:"\u6309\u56DE\u8F66\u67E5\u8BE2",onClear:function(){te("")}})})})},"form"),children:(0,t.jsx)(Z.Z,{pagination:{pageSize:36},rowKey:function(g){return"".concat(g)},grid:{gutter:10,xs:3,sm:3,md:4,lg:4,xl:5,xxl:6},dataSource:S&&S.filter(function(d){return!ne||d.indexOf(ne)!==-1}),loading:!S||(S==null?void 0:S.length)<=0,renderItem:function(g,C){return(0,t.jsx)(Z.Z.Item,{children:(0,t.jsx)(o.Z,{style:{height:"60px"},children:(0,t.jsx)("div",{style:{margin:"-10px",wordBreak:"break-word"},children:(0,t.jsx)(le.Z,{title:g})})})},C)}})}),(0,t.jsx)(c.Z,{bordered:!0,title:(0,t.jsx)(O.Z,{}),subTitle:"Tag \u5217\u8868",children:(0,t.jsx)(I.Rs,{grid:{gutter:40,column:2},headerTitle:!1,metas:{content:{render:function(g,C,U){return(0,t.jsx)(v.Z,{color:"blue",children:(0,t.jsx)(D.Z.Text,{copyable:!0,children:C})},U)}},title:{render:function(g,C,U){return(0,t.jsxs)(T.Z,{children:[(0,t.jsxs)($.Z,{action:function(){return(0,p.Gb)({tag:C,type:"push"})},children:[(0,t.jsx)(A.Z,{})," Push"]}),(0,t.jsxs)($.Z,{action:function(){return(0,p.Gb)({tag:C,type:"pull"})},children:[(0,t.jsx)(P.Z,{})," Pull"]}),(0,t.jsx)($.Z,{action:function(){return(0,p.Pn)({tag:C})},onSuccess:function(ae){return Q(N+1),!0},confirm:"notification.confirm.title",children:(0,t.jsx)(E.Z,{})})]},U)}}},dataSource:n==null?void 0:n.info.RepoTags})}),(0,t.jsx)(c.Z,{bordered:!0,headerBordered:!0,title:(0,t.jsx)(O.Z,{}),subTitle:"\u65B0\u589E Tag",children:(0,t.jsxs)(i.A,{formRef:V,onFinish:function(){var d=l()(r()().mark(function g(C){var U,K,ae;return r()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,p._U)({md5:(U=n==null?void 0:n.info.Id)!==null&&U!==void 0?U:"",tag:(C.imageRespo?C.imageRespo.serverAddress+"/":"")+C.imageTag});case 2:ae=F.sent,Q(N+1),(K=V.current)===null||K===void 0||K.resetFields();case 5:case"end":return F.stop()}},g)}));return function(g){return d.apply(this,arguments)}}(),children:[(0,t.jsx)(W.Z,{label:"\u955C\u50CF\u4ED3\u5E93",name:"imageRespo",tooltip:(0,t.jsxs)(t.Fragment,{children:["\u63A8\u9001\u524D\u8BF7\u4FDD\u8BC1\u4ED3\u5E93\u4E2D\u6709\u6307\u5B9A\u7684\u547D\u540D\u7A7A\u95F4, \u5982\u6CA1\u6709\u8BF7\u5148 ",(0,t.jsx)("a",{href:"",target:"_blank",children:"\u6DFB\u52A0\u4ED3\u5E93"})]}),children:(0,t.jsx)(ie.Z,{})}),(0,t.jsx)(f.Z,{fieldProps:{min:2,max:255},rules:[{required:!0}],required:!0,placeholder:"\u53EA\u80FD\u4F7F\u7528\u5C0F\u5199\u82F1\u6587\u5B57\u7B26\u3001\u6570\u5B57\u3001_\u3001-\u3001",label:"\u955C\u50CF\u540D\u79F0",name:"imageTag",tooltip:"\u4F8B\u5982: name:tag\u3001namespace/name:tag\u3001registry/namespace/name:tag"})]})}),(0,t.jsx)(c.Z,{bordered:!0,headerBordered:!0,title:(0,t.jsx)(m.Z,{}),subTitle:"\u955C\u50CF\u8BE6\u60C5",children:(0,t.jsxs)(a.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,t.jsx)(a.Z.Item,{label:"ID",children:n==null?void 0:n.info.Id}),(0,t.jsx)(a.Z.Item,{label:"Parent",children:n==null?void 0:n.info.Parent}),(0,t.jsx)(a.Z.Item,{label:"Size",children:(0,ue.FI)((G=n==null?void 0:n.info.Size)!==null&&G!==void 0?G:0)}),(0,t.jsx)(a.Z.Item,{label:"Created",children:n==null?void 0:n.info.Created}),(0,t.jsxs)(a.Z.Item,{label:"Build",children:["Docker ",n==null?void 0:n.info.DockerVersion," ",n==null?void 0:n.info.Os," ",n==null?void 0:n.info.Architecture]}),(0,t.jsx)(a.Z.Item,{label:"Labels",children:(0,t.jsx)(a.Z,{column:1,bordered:!0,children:(n==null?void 0:n.info.Config.Labels)&&Object.keys(n==null?void 0:n.info.Config.Labels).map(function(d){return(0,t.jsx)(a.Z.Item,{label:d,children:(0,t.jsx)(D.Z.Text,{style:{width:"400px"},ellipsis:{tooltip:n==null?void 0:n.info.Config.Labels[d]},children:n==null?void 0:n.info.Config.Labels[d]})},d)})})})]})}),(0,t.jsx)(c.Z,{bordered:!0,headerBordered:!0,title:(0,t.jsx)(m.Z,{}),subTitle:"Dockerfile \u8BE6\u60C5",children:(0,t.jsxs)(a.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,t.jsx)(a.Z.Item,{label:"CMD",children:n==null?void 0:n.info.Config.Cmd}),(0,t.jsx)(a.Z.Item,{label:"ENTRYPOINT",children:n==null?void 0:n.info.Config.Entrypoint}),(0,t.jsx)(a.Z.Item,{label:"EXPOSE",children:(n==null?void 0:n.info.Config.ExposedPorts)&&Object.keys(n==null?void 0:n.info.Config.ExposedPorts).map(function(d){return(0,t.jsx)(v.Z,{color:"gray",children:d},d)})}),(0,t.jsx)(a.Z.Item,{label:"VOLUME",children:(n==null?void 0:n.info.Config.Volumes)&&Object.keys(n==null?void 0:n.info.Config.Volumes).map(function(d){return(0,t.jsx)(v.Z,{color:"gray",children:d},d)})}),(0,t.jsx)(a.Z.Item,{label:"Env",children:(0,t.jsx)(a.Z,{column:1,bordered:!0,children:(n==null?void 0:n.info.Config.Env)&&(n==null?void 0:n.info.Config.Env.map(function(d,g){var C=d.split("=");return(0,t.jsx)(a.Z.Item,{label:C[0],children:C[1]},g)}))})})]})}),(0,t.jsxs)(c.Z,{bordered:!0,headerBordered:!0,title:(0,t.jsx)(m.Z,{}),subTitle:"Layers",children:[(0,t.jsx)(re.Z,{rowKey:"CreatedBy",dataSource:n==null?void 0:n.layer.reverse(),columns:[{title:"Layer",dataIndex:"CreatedBy",key:"CreatedBy"}]}),";"]})]})})}},3393:function(L,j,e){e.d(j,{Gb:function(){return B},Pn:function(){return A},Rb:function(){return E},YU:function(){return y},ZQ:function(){return W},_U:function(){return u},cd:function(){return c}});var b=e(15009),r=e.n(b),R=e(99289),l=e.n(R),_=e(82346);function y(f){return p.apply(this,arguments)}function p(){return p=l()(r()().mark(function f(h){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,_.request)("/api/app/image/get-detail",{method:"POST",data:h}));case 1:case"end":return s.stop()}},f)})),p.apply(this,arguments)}function B(f){return M.apply(this,arguments)}function M(){return M=l()(r()().mark(function f(h){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,_.request)("/api/app/image/tag-remote",{method:"POST",data:h}));case 1:case"end":return s.stop()}},f)})),M.apply(this,arguments)}function u(f){return O.apply(this,arguments)}function O(){return O=l()(r()().mark(function f(h){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,_.request)("/api/app/image/tag-add",{method:"POST",data:h}));case 1:case"end":return s.stop()}},f)})),O.apply(this,arguments)}function A(f){return P.apply(this,arguments)}function P(){return P=l()(r()().mark(function f(h){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,_.request)("/api/app/image/tag-delete",{method:"POST",data:h}));case 1:case"end":return s.stop()}},f)})),P.apply(this,arguments)}function E(f){return m.apply(this,arguments)}function m(){return m=l()(r()().mark(function f(h){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,_.request)("/api/app/image/export",{method:"POST",data:h,responseType:"blob"}));case 1:case"end":return s.stop()}},f)})),m.apply(this,arguments)}function c(f){return i.apply(this,arguments)}function i(){return i=l()(r()().mark(function f(h){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,_.request)("/api/pro/image/get-remote-tag",{method:"POST",data:h}));case 1:case"end":return s.stop()}},f)})),i.apply(this,arguments)}function W(f){return I.apply(this,arguments)}function I(){return I=l()(r()().mark(function f(h){return r()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,_.request)("/api/app/image/check-upgrade",{method:"POST",data:h}));case 1:case"end":return s.stop()}},f)})),I.apply(this,arguments)}},18148:function(L,j,e){e.d(j,{$q:function(){return E},Fj:function(){return T},KG:function(){return y},KX:function(){return w},T8:function(){return A},Xn:function(){return u},ao:function(){return c},c5:function(){return f},c7:function(){return W}});var b=e(15009),r=e.n(b),R=e(99289),l=e.n(R),_=e(82346);function y(o){return p.apply(this,arguments)}function p(){return p=l()(r()().mark(function o(v){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,_.request)("/api/app/image/get-list",{method:"POST",data:v}));case 1:case"end":return a.stop()}},o)})),p.apply(this,arguments)}function B(o){return M.apply(this,arguments)}function M(){return M=_asyncToGenerator(_regeneratorRuntime().mark(function o(v){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,request("/api/app/log/image-build",{method:"POST",data:v});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},o)})),M.apply(this,arguments)}function u(o){return O.apply(this,arguments)}function O(){return O=l()(r()().mark(function o(v){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,_.request)("/api/app/image/get-list-build",{method:"POST",data:v}));case 1:case"end":return a.stop()}},o)})),O.apply(this,arguments)}function A(o){return P.apply(this,arguments)}function P(){return P=l()(r()().mark(function o(v){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_.request)("/api/app/image/get-build-task",{method:"POST",data:v});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},o)})),P.apply(this,arguments)}function E(o){return m.apply(this,arguments)}function m(){return m=l()(r()().mark(function o(v){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_.request)("/api/app/image/delete-build-task",{method:"POST",data:v});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},o)})),m.apply(this,arguments)}function c(o){return i.apply(this,arguments)}function i(){return i=l()(r()().mark(function o(v){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_.request)("/api/app/image/image-delete",{method:"POST",data:v});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},o)})),i.apply(this,arguments)}function W(){return I.apply(this,arguments)}function I(){return I=l()(r()().mark(function o(){return r()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,_.request)("/api/app/image/image-prune",{method:"POST"});case 2:return D.abrupt("return",D.sent);case 3:case"end":return D.stop()}},o)})),I.apply(this,arguments)}function f(){return h.apply(this,arguments)}function h(){return h=l()(r()().mark(function o(){return r()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,_.request)("/api/app/image/build-prune",{method:"POST"});case 2:return D.abrupt("return",D.sent);case 3:case"end":return D.stop()}},o)})),h.apply(this,arguments)}function T(o){return s.apply(this,arguments)}function s(){return s=l()(r()().mark(function o(v){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,_.request)("/api/app/image/update-title",{method:"POST",data:v});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},o)})),s.apply(this,arguments)}function w(o){return Z.apply(this,arguments)}function Z(){return Z=l()(r()().mark(function o(v){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,_.request)("/api/app/image/tag-sync",{method:"POST",data:v}));case 1:case"end":return a.stop()}},o)})),Z.apply(this,arguments)}},75870:function(L,j,e){e.d(j,{Ot:function(){return y},ZH:function(){return B},ix:function(){return u},t1:function(){return A}});var b=e(15009),r=e.n(b),R=e(99289),l=e.n(R),_=e(82346);function y(E){return p.apply(this,arguments)}function p(){return p=l()(r()().mark(function E(m){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,_.request)("/api/common/registry/get-list",{method:"POST",data:m}));case 1:case"end":return i.stop()}},E)})),p.apply(this,arguments)}function B(E){return M.apply(this,arguments)}function M(){return M=l()(r()().mark(function E(m){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,_.request)("/api/common/registry/create",{method:"POST",data:m}));case 1:case"end":return i.stop()}},E)})),M.apply(this,arguments)}function u(E){return O.apply(this,arguments)}function O(){return O=l()(r()().mark(function E(m){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,_.request)("/api/common/registry/delete",{method:"POST",data:m}));case 1:case"end":return i.stop()}},E)})),O.apply(this,arguments)}function A(E){return P.apply(this,arguments)}function P(){return P=l()(r()().mark(function E(m){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,_.request)("/api/common/registry/get-detail",{method:"POST",data:m}));case 1:case"end":return i.stop()}},E)})),P.apply(this,arguments)}}}]);
