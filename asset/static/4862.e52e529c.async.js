"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4862],{43831:function(se,b,e){var V=e(15009),m=e.n(V),A=e(99289),f=e.n(A),N=e(5574),O=e.n(N),s=e(67294),K=e(14946),F=e(43425),Y=e(48689),z=e(38345),Q=e(10641),y=e(42075),U=e(25593),W=e(83062),v=e(60335),q=e(78498),J=e(80821),ee=e(10032),ne=e(5251),H=e(28230),$=e(46442),G=e(78451),i=e(85893),n=(0,s.forwardRef)(function(E,u){var Z;(0,s.useImperativeHandle)(u,function(){return{}});var I=(0,s.useRef)(),a=(0,s.useRef)(),x=(0,s.useState)(),g=O()(x,2),X=g[0],re=g[1];return(0,s.useEffect)(function(){var h,j;re(E.containerInfo),!((h=I.current)===null||h===void 0)&&h.reloadAndRest&&((j=I.current)===null||j===void 0||j.reloadAndRest())},[E.containerInfo]),(0,i.jsxs)(z.Z,{ghost:E.ghost,children:[(0,i.jsx)(ee.Z,{ref:a}),(0,i.jsx)(Q.Z,{scroll:{x:"max-content"},rowKey:"key",actionRef:I,pagination:!1,columns:[{title:"\u6240\u5C5E\u7F51\u7EDC",key:"name",dataIndex:"networkName"},{title:"\u5BB9\u5668\u540D\u79F0",key:"containerName",dataIndex:"containerName",width:100,render:function(j,_,M,C,o){return(0,i.jsx)(G.Z,{content:(0,ne.fi)(_.containerName,"/")})}},{title:(0,i.jsx)(q.Z,{title:"hostname",help:"\u63D0\u4F9B\u5BB9\u5668\u5185\u90E8\u8BBF\u95EE"}),key:"hostName",render:function(j,_,M){return _.hostName?(0,i.jsx)(y.Z,{direction:"vertical",children:_.hostName.map(function(C){if(C)return(0,i.jsx)(U.Z.Text,{copyable:!0,keyboard:!0,children:C},C)})}):(0,i.jsx)(i.Fragment,{})}},{title:"Ip",key:"ip",render:function(j,_,M,C,o){return(0,i.jsxs)(y.Z,{direction:"vertical",children:[(0,i.jsx)("span",{children:_.networkInfo.IPv4Address}),_.networkInfo.IPv6Address&&(0,i.jsx)("span",{children:_.networkInfo.IPv6Address})]})}},{title:"\u64CD\u4F5C",key:"option",width:50,fixed:"right",render:function(j,_,M,C,o){return(0,i.jsxs)(y.Z,{children:[_.networkName!=""&&(0,i.jsx)(U.Z.Link,{onClick:function(){var t;(t=a.current)===null||t===void 0||t.show(_.networkName)},children:(0,i.jsx)(W.Z,{title:"\u7BA1\u7406",children:(0,i.jsx)(F.Z,{})})}),_.key!="bridge"&&_.key!="none"&&_.key!="host"&&_.networkName!=""&&(0,i.jsx)(J.Z,{type:"link",action:function(){return(0,K.t9)({name:_.networkName,containerName:E.containerInfo.Name})},onSuccess:function(){var t,l;!((t=I.current)===null||t===void 0)&&t.reloadAndRest&&((l=I.current)===null||l===void 0||l.reloadAndRest())},tips:"\u9000\u51FA\u8BE5\u7F51\u7EDC",children:(0,i.jsx)(Y.Z,{})})]})}}],request:function(){var h=f()(m()().mark(function j(_,M,C){var o,d;return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,v.jV)({md5:E.containerInfo.Name});case 2:return o=l.sent,re(o.data.info),l.next=6,(0,K._3)({name:Object.keys(o.data.info.NetworkSettings.Networks)});case 6:return d=l.sent,l.abrupt("return",{data:d.data.list,success:!0,total:d.data.list.length});case 8:case"end":return l.stop()}},j)}));return function(j,_,M){return h.apply(this,arguments)}}(),toolBarRender:function(){return[(0,i.jsx)($.Z,{showTriggerButton:!0,onSelect:function(){var j=f()(m()().mark(function _(M){var C,o;return m()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,K.HY)({name:M.Name,containerName:E.containerInfo.Name,ipV4:""});case 2:o=t.sent,!((C=I.current)===null||C===void 0)&&C.reloadAndRest&&I.current.reloadAndRest();case 4:case"end":return t.stop()}},_)}));return function(_){return j.apply(this,arguments)}}()},"joinNetwork"),(0,i.jsx)(H.Z,{onFinish:function(){var _,M;!((_=I.current)===null||_===void 0)&&_.reloadAndRest&&((M=I.current)===null||M===void 0||M.reloadAndRest())}},"create")]},search:!1,expandable:{expandRowByClick:!1,expandedRowKeys:Object.keys((Z=X==null?void 0:X.NetworkSettings.Networks)!==null&&Z!==void 0?Z:{bridge:[]})}})]})});b.Z=n},78272:function(se,b,e){e.d(b,{Z:function(){return C}});var V=e(5574),m=e.n(V),A=e(15009),f=e.n(A),N=e(99289),O=e.n(N),s=e(67294),K=e(37767),F=e(60335),Y=e(82346),z=e(58638),Q=e(85265),y=e(42075),U=e(96074),W=e(83062),v=e(86250),q=e(52031),J=e(14189),ee=e(27813),ne=e(46934),H=e(184),$=e(25593),G=e(95591),i=e(5251),n=e(85893),E=(0,s.forwardRef)(function(o,d){var t,l=(0,s.useState)(!1),T=m()(l,2),R=T[0],te=T[1];return(0,s.useImperativeHandle)(d,function(){return{}}),(0,n.jsx)(H.a,{submitter:!1,title:(0,i.fi)(o.containerInfo.Name,"/")+" - \u6587\u4EF6\u7BA1\u7406",onOpenChange:function(w){te(w)},trigger:(0,n.jsx)($.Z.Link,{children:(0,n.jsx)(G.Z,{})},"file"),children:R&&(0,n.jsx)(ne.Z,{md5:o.containerInfo.Id,initPath:(t=o.containerInfo.Config.WorkingDir)!==null&&t!==void 0?t:"/"})})}),u=E,Z=e(24963),I=e(43831),a=e(52209),x=(0,s.forwardRef)(function(o,d){(0,s.useImperativeHandle)(d,function(){return{}});var t=(0,s.useState)(!1),l=m()(t,2),T=l[0],R=l[1];return(0,n.jsx)(H.a,{submitter:!1,title:(0,i.fi)(o.containerInfo.Name,"/")+" - \u7F51\u7EDC\u7BA1\u7406",onOpenChange:function(r){R(r)},open:T,trigger:(0,n.jsx)($.Z.Link,{children:(0,n.jsx)(a.Z,{})},"file"),children:(0,n.jsx)(I.Z,{ghost:!0,containerInfo:o.containerInfo})})}),g=x,X=e(81146),re=e(45742),h=e(62597),j=(0,s.forwardRef)(function(o,d){(0,s.useImperativeHandle)(d,function(){return{show:function(B){return O()(f()().mark(function P(){var D;return f()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,F.jV)({md5:B});case 2:D=c.sent,D.data&&le(D.data.info),R(!0);case 5:case"end":return c.stop()}},P)}))()}}});var t=(0,s.useState)(!1),l=m()(t,2),T=l[0],R=l[1],te=(0,s.useState)(),r=m()(te,2),w=r[0],le=r[1],ae=(0,s.useRef)();return(0,n.jsxs)(n.Fragment,{children:[o.showTriggerButton&&(0,n.jsx)($.Z.Link,{onClick:O()(f()().mark(function k(){return f()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:le(o.containerInfo),R(!0);case 2:case"end":return P.stop()}},k)})),children:(0,n.jsx)(W.Z,{title:"\u8FD0\u884C\u65E5\u5FD7",children:(0,n.jsx)(re.Z,{})})},"log"),(0,n.jsx)(Q.Z,{title:"\u5BB9\u5668\u65E5\u5FD7",open:T,forceRender:!0,onClose:function(){R(!1)},afterOpenChange:function(B){if(B)setTimeout(function(){var D,p;(D=ae.current)===null||D===void 0||D.start(),(p=ae.current)===null||p===void 0||p.fit()},1e3);else{var P;(P=ae.current)===null||P===void 0||P.close()}},width:800,children:w&&T&&(0,n.jsx)(X.Z,{ref:ae,showInDrawer:!0,id:"container:log:".concat(w==null?void 0:w.Id),request:function(){var k=O()(f()().mark(function B(P){var D;return f()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,h.Tb)({id:(D=w.Id)!==null&&D!==void 0?D:"",lineTotal:P.lineTotal,download:P.download,showTime:P.showTime});case 2:case"end":return c.stop()}},B)}));return function(B){return k.apply(this,arguments)}}(),download:function(){var k=O()(f()().mark(function B(P){var D,p,c,S;return f()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,h.XH)({id:(D=w.Id)!==null&&D!==void 0?D:"",lineTotal:P.lineTotal,showTime:P.showTime});case 2:return c=L.sent,L.next=5,(0,F.jV)({md5:(p=w.Id)!==null&&p!==void 0?p:""});case 5:return S=L.sent,L.abrupt("return",{data:new Blob([c],{type:"text/plain"}),name:S.data.info.Name.replaceAll("/","")+"_"+new Date().toLocaleDateString()+".log"});case 7:case"end":return L.stop()}},B)}));return function(B){return k.apply(this,arguments)}}()})})]})}),_=j,M=(0,s.forwardRef)(function(o,d){var t;(0,s.useImperativeHandle)(d,function(){return{show:function(p){return O()(f()().mark(function c(){return f()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return B(!0),oe.next=3,P(p);case 3:case"end":return oe.stop()}},c)}))()}}});var l=(0,s.useContext)(Z.Z),T=l.loading,R=(0,s.useState)(),te=m()(R,2),r=te[0],w=te[1],le=(0,s.useState)(!1),ae=m()(le,2),k=ae[0],B=ae[1],P=function(){var D=O()(f()().mark(function p(c){var S;return f()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,F.jV)({md5:c});case 2:S=L.sent,S.data&&(S.data.info.HostConfig.NetworkMode=="host"&&S.data.info.Config.ExposedPorts&&Object.keys(S.data.info.Config.ExposedPorts).map(function(ie){S.data.info.NetworkSettings.Ports[ie]=[{HostIp:"0.0.0.0",HostPort:ie.substring(0,ie.indexOf("/"))}]}),w(S.data));case 4:case"end":return L.stop()}},p)}));return function(c){return D.apply(this,arguments)}}();return(0,n.jsx)(Q.Z,{loading:!r,title:"\u5FEB\u6377\u67E5\u770B\u5BB9\u5668 - ".concat((0,i.fi)((t=r==null?void 0:r.info.Name)!==null&&t!==void 0?t:"","/")),open:k,onClose:function(){B(!1),o.onFinish&&o.onFinish()},width:800,extra:(0,n.jsxs)(y.Z,{split:(0,n.jsx)(U.Z,{type:"vertical"}),children:[(r==null?void 0:r.info)&&(0,n.jsx)(u,{containerInfo:r.info}),(r==null?void 0:r.info)&&(0,n.jsx)(g,{containerInfo:r.info}),(r==null?void 0:r.info)&&(0,n.jsx)(_,{containerInfo:r.info,showTriggerButton:!0}),(0,n.jsx)(W.Z,{title:"\u67E5\u770B\u5B8C\u6574\u4FE1\u606F",children:(0,n.jsx)(Y.Link,{to:"/app/detail/edit/"+(r==null?void 0:r.info.Id),children:(0,n.jsx)(z.Z,{})},"detail")})]}),children:(0,n.jsxs)(v.Z,{vertical:!0,gap:20,children:[r&&(0,n.jsx)(J.Z,{ghost:!0,data:r==null?void 0:r.info,onFinish:O()(f()().mark(function D(){return f()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,P(r.info.Id);case 2:return c.t0=c.sent,c.abrupt("return",[c.t0]);case 4:case"end":return c.stop()}},D)}))}),r&&(0,n.jsx)(ee.Z,{ghost:!0,data:r,checkContainerUpgrade:function(){B(!1),o.onUpgradeFinish&&o.onUpgradeFinish()}}),r&&(0,n.jsx)(K.Z,{data:r,ghost:!0}),(0,n.jsx)(q.Z,{data:r==null?void 0:r.info,ghost:!0})]})})}),C=M},81146:function(se,b,e){var V=e(15009),m=e.n(V),A=e(99289),f=e.n(A),N=e(97857),O=e.n(N),s=e(67294),K=e(97269),F=e(62370),Y=e(5966),z=e(97462),Q=e(82346),y=e(71230),U=e(15746),W=e(34041),v=e(28036),q=e(84567),J=e(42075),ee=e(54964),ne=e(80821),H=e(23430),$=e(93162),G=e.n($),i=e(12320),n=e.n(i),E=e(78267),u=e.n(E),Z=e(75458),I=e.n(Z),a=e(85893),x=new i.Terminal(O()(O()({},ee.a),{},{fontSize:12})),g=new E.FitAddon,X=new Z.SearchAddon,re=(0,s.forwardRef)(function(h,j){(0,s.useImperativeHandle)(j,function(){return{fit:function(){x.clear(),g.fit()},start:function(){return f()(m()().mark(function d(){return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,C({lineTotal:500});case 2:case"end":return l.stop()}},d)}))()},close:function(){M.progress.close(h.id)}}});var _=(0,s.useRef)(),M=(0,Q.useModel)("subscriber");M.addDataHandler(h.id,function(o){x.write(o.data.replaceAll(`
`,`

`))});var C=function(){var o=f()(m()().mark(function d(t){return m()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return x.clear(),t.download=!1,T.next=4,h.request(t);case 4:case"end":return T.stop()}},d)}));return function(t){return o.apply(this,arguments)}}();return(0,s.useEffect)(function(){return window.addEventListener("resize",function(){g.fit()}),x.loadAddon(g),x.open(document.getElementById("terminal-container-log")),g.fit(),function(){x.clear(),x.reset(),M.progress.close(h.id)}},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(K.A,{submitter:!1,layout:"horizontal",onValuesChange:function(d,t){C({md5:h.id,lineTotal:parseInt(t.lineTotal),showTime:t.showTime})},formRef:_,children:(0,a.jsxs)(y.Z,{gutter:[10,0],children:[(0,a.jsx)(U.Z,{span:8,children:(0,a.jsx)(F.Z,{name:"lineTotal",initialValue:"500",label:"\u83B7\u53D6\u65E5\u5FD7\u6761\u6570",children:(0,a.jsxs)(W.Z,{defaultValue:"500",children:[(0,a.jsx)(W.Z.Option,{value:"100",children:"100\u6761\u65E5\u5FD7\u6570\u636E"}),(0,a.jsx)(W.Z.Option,{value:"200",children:"200\u6761\u65E5\u5FD7\u6570\u636E"}),(0,a.jsx)(W.Z.Option,{value:"500",children:"500\u6761\u65E5\u5FD7\u6570\u636E"}),(0,a.jsx)(W.Z.Option,{value:"1000",children:"1000\u6761\u65E5\u5FD7\u6570\u636E"}),(0,a.jsx)(W.Z.Option,{value:"-1",children:"\u5168\u90E8\uFF08\u4E0B\u8F7D\u53EF\u89C1\uFF09"})]})})}),(0,a.jsx)(U.Z,{children:(0,a.jsx)(v.ZP,{onClick:function(){x.clear()},children:"\u6E05\u5C4F"})}),(0,a.jsx)(U.Z,{children:(0,a.jsx)(F.Z,{name:"showTime",valuePropName:"checked",children:(0,a.jsx)(q.Z,{children:"\u663E\u793A\u65F6\u95F4"})})}),(0,a.jsx)(U.Z,{children:(0,a.jsx)(Y.Z,{label:"\u67E5\u627E",name:"keywork"})}),(0,a.jsx)(U.Z,{children:(0,a.jsx)(z.Z,{name:["keywork"],children:function(d){var t=d.keywork;return(0,a.jsxs)(J.Z,{size:10,children:[(0,a.jsx)(v.ZP,{onClick:function(){X.findNext(t)},children:"\u4E0B\u4E00\u4E2A"},"next"),(0,a.jsx)(v.ZP,{onClick:function(){X.findPrevious(t)},children:"\u4E0A\u4E00\u4E2A"},"prev")]})}})}),(0,a.jsx)(U.Z,{children:(0,a.jsx)(ne.Z,{icon:(0,a.jsx)(H.Z,{}),action:f()(m()().mark(function o(){var d,t,l;return m()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(!h.download){R.next=5;break}return R.next=3,h.download({lineTotal:parseInt((d=_.current)===null||d===void 0?void 0:d.getFieldValue("lineTotal")),showTime:(t=_.current)===null||t===void 0?void 0:t.getFieldValue("showTime")});case 3:l=R.sent,(0,$.saveAs)(l.data,l.name);case 5:case"end":return R.stop()}},o)})),children:"\u4E0B\u8F7D\u65E5\u5FD7"})})]})}),(0,a.jsx)("div",{style:{marginTop:"20px",height:h.showInDrawer?"75vh":"580px"},id:"terminal-container-log"})]})});b.Z=re},46442:function(se,b,e){var V=e(15009),m=e.n(V),A=e(99289),f=e.n(A),N=e(5574),O=e.n(N),s=e(67294),K=e(14946),F=e(64789),Y=e(10641),z=e(28036),Q=e(85265),y=e(42075),U=e(66309),W=e(28230),v=e(85893),q=(0,s.forwardRef)(function(J,ee){(0,s.useImperativeHandle)(ee,function(){return{show:function(){G(!0)}}});var ne=(0,s.useState)(!1),H=O()(ne,2),$=H[0],G=H[1],i=(0,s.useRef)();return(0,v.jsxs)(v.Fragment,{children:[J.showTriggerButton&&(0,v.jsx)(z.ZP,{onClick:function(){G(!0)},children:"\u52A0\u5165\u7F51\u7EDC"}),(0,v.jsx)(Q.Z,{title:"\u9009\u62E9\u7F51\u7EDC",width:800,footer:!1,open:$,onClose:function(){return G(!1)},extra:(0,v.jsx)(y.Z,{children:(0,v.jsx)(W.Z,{onFinish:function(){var E,u;!((E=i.current)===null||E===void 0)&&E.reloadAndRest&&((u=i.current)===null||u===void 0||u.reloadAndRest())}},"create")}),children:(0,v.jsx)(Y.Z,{rowKey:"Name",toolBarRender:!1,actionRef:i,columns:[{title:"\u540D\u79F0",dataIndex:"Name",render:function(E,u,Z,I,a){return u.Name=="none"||u.Name=="bridge"||u.Name=="host"?(0,v.jsxs)(v.Fragment,{children:[u.Name," ",(0,v.jsx)(U.Z,{color:"blue",children:"System"})]}):(0,v.jsx)(v.Fragment,{children:E})}},{title:"\u7C7B\u578B",ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"IPAM Driver",ellipsis:!0,width:120,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4 IPAM Network",search:!1,dataIndex:["IPAM","Config",0,"Subnet"],render:function(E,u,Z,I,a){return(0,v.jsxs)(y.Z,{children:[u.IPAM.Config&&u.IPAM.Config[0]&&"".concat(u.IPAM.Config[0].Subnet," - ").concat(u.IPAM.Config[0].Gateway),u.IPAM.Config&&u.IPAM.Config[1]&&"".concat(u.IPAM.Config[1].Subnet," - ").concat(u.IPAM.Config[1].Gateway)]})}},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(E,u,Z,I,a){return[u.Name!="none"&&u.Name!="bridge"&&u.Name!="host"&&(0,v.jsx)(z.ZP,{type:"link",onClick:function(){J.onSelect(u),G(!1)},children:(0,v.jsx)(F.Z,{})},u.Id)]}}],request:function(){var n=f()(m()().mark(function E(u,Z,I){var a;return m()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,K.jR)({name:u.Name});case 2:return a=g.sent,g.abrupt("return",{data:a.data.list,success:!0,total:a.data.list.length});case 4:case"end":return g.stop()}},E)}));return function(E,u,Z){return n.apply(this,arguments)}}(),pagination:{pageSize:10}})})]})});b.Z=q},67255:function(se,b,e){e.d(b,{O:function(){return V},j:function(){return m}});function V(){var A=localStorage.getItem("dpanel-pagesize");return A=="all"?!1:{showSizeChanger:!0,defaultPageSize:parseInt(A!=null?A:"20")}}function m(A){var f="dpanel-table-column-".concat(A),N={};if(localStorage.getItem(f)){var O;N=JSON.parse((O=localStorage.getItem(f))!==null&&O!==void 0?O:"{}")}return{defaultValue:N,onChange:function(K){localStorage.setItem("dpanel-table-column-".concat(A),JSON.stringify(K))}}}}}]);
