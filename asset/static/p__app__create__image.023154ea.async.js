"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3985],{91058:function(Be,q,n){var te=n(5574),o=n.n(te),ae=n(89035),A=n(38345),V=n(17186),S=n(24739),O=n(5966),I=n(42075),B=n(28036),M=n(85576),c=n(67294),g=n(95089),$=n(12491),l=n(85893),G="docker-image",u=(0,c.forwardRef)(function(r,J){var T=(0,c.useState)(G),y=o()(T,2),t=y[0],f=y[1],m=(0,c.useRef)(),L=(0,c.useState)(""),i=o()(L,2),ue=i[0],Z=i[1],_e=function(){t!="code"?f("code"):f(G)};(0,c.useImperativeHandle)(J,function(){return{addEnvItem:function(D,W){var F,H=(F=m.current)===null||F===void 0?void 0:F.getList(),me=!1;if(H==null||H.map(function(ge){if(ge.name==D){me=!0;return}}),!me){var e;(e=m.current)===null||e===void 0||e.add({name:D,value:W})}},clear:function(){var D;(D=m.current)===null||D===void 0||(D=D.getList())===null||D===void 0||D.map(function(W,F){var H;(H=m.current)===null||H===void 0||H.remove(F)})}}});function ce(ee){try{var D,W;ee==""&&(ee=de());for(var F=(D=(W=m.current)===null||W===void 0||(W=W.getList())===null||W===void 0?void 0:W.length)!==null&&D!==void 0?D:0,H=F;H>=0;H--){var me;(me=m.current)===null||me===void 0||me.remove(H)}var e=ee.split(`
`),ge=0;e.map(function(Pe){var Ae,re=Pe.split("=");re.length<2||((Ae=m.current)===null||Ae===void 0||Ae.add({name:re[0],value:re.slice(1).join("=")},ge),ge++)})}catch(Pe){console.log(Pe)}}function de(){if(m&&m.current&&m.current.getList){var ee,D=(ee=m.current)===null||ee===void 0?void 0:ee.getList();if(D){var W=[];return D.map(function(F){W.push("".concat(F.name,"=").concat(F.value))}),W.join(`
`)}else return""}else return""}return(0,l.jsxs)(A.Z,{ghost:r.showCardGhost,title:r.label?r.label:null,headerBordered:!0,extra:(r.showCodeMode||r.showImportButton)&&(0,l.jsxs)(I.Z,{children:[r.showImportButton&&(0,l.jsx)("div",{style:{marginBottom:"-25px"},children:(0,l.jsx)($.Z,{title:"\u5BFC\u5165 env \u6587\u4EF6",onImport:function(D){return ce(D),!0},onLoad:function(D){if(D.indexOf("=")<0)throw new Error("\u5BFC\u5165env\u6587\u4EF6\u9519\u8BEF");return!0}})}),r.showCodeMode?(0,l.jsx)(B.ZP,{icon:(0,l.jsx)(ae.Z,{}),type:t=="code"?"primary":"default",onClick:_e,children:"\u4EE3\u7801\u6A21\u5F0F"},"code"):""]}),children:[(0,l.jsx)(V.u,{name:r.name?r.name:"environment",actionRef:m,creatorButtonProps:r.showAddButton?{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u73AF\u5883\u53D8\u91CF"}:!1,copyIconProps:!1,min:100,label:r.listLabel,children:function(D,W,F){var H=F.getCurrentRowData();return(0,l.jsxs)(S.UW,{children:[(0,l.jsx)(O.Z,{width:r.showInDrawer?"sm":"md",name:"name",label:"\u53D8\u91CF\u540D",required:!0,rules:[{required:!0}],disabled:r.showDisableName,placeholder:"\u8F93\u5165\u53D8\u91CF\u540D\u79F0"}),(0,l.jsx)(O.Z,{width:r.showInDrawer?"sm":"md",name:"value",label:"\u53D8\u91CF\u503C",rules:[{required:!!r.requireValue}],disabled:r.showDisableValue,placeholder:H&&H.label?H.label:"\u8F93\u5165\u53D8\u91CF\u503C"})]})}}),(0,l.jsx)(M.Z,{width:"800px",open:t=="code",onCancel:function(){return f("docker-image")},onOk:function(){ce(ue),f("docker-image")},children:(0,l.jsx)(g.ZP,{onChange:function(D){return Z(D)},value:de(),height:"680px",theme:"light"})})]})});q.Z=u},92067:function(Be,q,n){n.d(q,{Z:function(){return $}});var te=n(15009),o=n.n(te),ae=n(99289),A=n.n(ae),V=n(60335),S=n(64789),O=n(10641),I=n(42075),B=n(28036),M=n(37413),c=n(5251),g=n(85893);function $(l){return(0,g.jsx)(O.Z,{columns:[{title:"\u5BB9\u5668\u540D\u79F0",dataIndex:"name",render:function(u,r,J,T){return(0,g.jsx)(I.Z,{direction:"vertical",style:{textAlign:"left"},children:r==null?void 0:r.Names.map(function(y){return(0,c.fi)(y,"/")})},r.Id)}},{title:"\u7AEF\u53E3",dataIndex:"ports",search:!1,render:function(u,r,J,T){var y=[],t=[];return r!=null&&r.Ports&&r.Ports.map(function(f,m){f.PublicPort?y.push(f):t.push(f)}),(0,g.jsx)(M.Z,{publicPort:y,privatePort:t,domain:[]})}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",ellipsis:!0,width:100,render:function(u,r,J,T){return[(0,g.jsx)(B.ZP,{type:"link",onClick:A()(o()().mark(function y(){var t;return o()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,V.jV)({md5:r.Id});case 2:t=m.sent,l.onSelect&&l.onSelect(t.data.info);case 4:case"end":return m.stop()}},y)})),children:(0,g.jsx)(S.Z,{})},r.Id)]}}],rowKey:"Id",request:function(){var G=A()(o()().mark(function u(r,J,T){var y;return o()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,V.IE)({siteTitle:r.name});case 2:return y=f.sent,f.abrupt("return",{data:y.data.list,success:!0,total:y.data.list.length});case 4:case"end":return f.stop()}},u)}));return function(u,r,J){return G.apply(this,arguments)}}(),pagination:{pageSize:9}})}},52255:function(Be,q,n){n.d(q,{Z:function(){return ae}});var te=n(67294),o=n(85893);function ae(A){return(0,o.jsx)("div",{style:{display:A.show?"block":"none"},children:A.children})}},44349:function(Be,q,n){var te=n(97857),o=n.n(te),ae=n(17186),A=n(5966),V=n(86250),S=n(67294),O=n(85893),I=(0,S.forwardRef)(function(B,M){var c=(0,S.useRef)();(0,S.useImperativeHandle)(M,function(){return{addItem:function(l,G){var u,r=(u=c.current)===null||u===void 0?void 0:u.getList(),J=!1;if(r==null||r.map(function(y){if(y.name==l){J=!0;return}}),!J){var T;(T=c.current)===null||T===void 0||T.add({name:l,value:G})}},clear:function(){var l;(l=c.current)===null||l===void 0||(l=l.getList())===null||l===void 0||l.map(function(G,u){var r;(r=c.current)===null||r===void 0||r.remove(u)})}}});var g={};return B.hideCopyButton===!0&&(g.copyIconProps=!1),B.hideDeleteButton===!0&&(g.deleteIconProps=!1),(0,O.jsx)(ae.u,o()(o()({initialValue:B.initialValue,label:B.label,name:B.name,actionRef:c,creatorButtonProps:B.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(B.label?B.label:B.name)}:!1,min:B.min?B.min:0},g),{},{children:function(l,G,u){return(0,O.jsx)(V.Z,{justify:B.justify,gap:B.gap,children:B.items.map(function(r){return r.render?(0,O.jsx)("div",{children:r.render&&r.render(l,G,u)},"".concat(B.name,"-").concat(r.name,"-").concat(l.key)):(0,O.jsx)(A.Z,{width:r.width,name:r.name,label:r.label,required:r.required,rules:[{required:r.required}],disabled:r.disabled,placeholder:r.placeholder},"".concat(B.name,"-").concat(r.name,"-").concat(l.key))})})}}))});q.Z=I},12491:function(Be,q,n){n.d(q,{Z:function(){return I}});var te=n(24963),o=n(88484),ae=n(62370),A=n(31418),V=n(28036),S=n(67294),O=n(85893);function I(B){var M=(0,S.useContext)(te.Z),c=M.message,g=M.notice,$=M.lang,l=(0,S.useRef)(null),G=A.Z.useApp(),u=function(){l.current&&(l.current.click(),l.current.onchange=function(J){if(!J||!J.target)return"";var T=new FileReader;T.onload=function(t){var f,m,L=(f=t.target)===null||f===void 0?void 0:f.result;if(B.onLoad)try{B.onLoad&&B.onLoad(L)}catch(i){g.error(i);return}typeof B.onImport=="function"&&(c.success("\u6210\u529F\u5BFC\u5165 ".concat(B.title)),B.onImport(L)),(m=l.current)!==null&&m!==void 0&&m.value&&(l.current.value="")};var y=J.target;if(y.files)try{T.readAsText(y.files[0])}catch(t){g.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ae.Z,{children:(0,O.jsx)(V.ZP,{icon:(0,O.jsx)(o.Z,{}),block:!0,onClick:u,children:B.title})}),(0,O.jsx)("input",{style:{display:"none"},type:"file",ref:l,name:"importFileInput"})]})}},28230:function(Be,q,n){var te=n(15009),o=n.n(te),ae=n(99289),A=n.n(ae),V=n(5574),S=n.n(V),O=n(24963),I=n(14946),B=n(184),M=n(5966),c=n(62370),g=n(97462),$=n(52688),l=n(24739),G=n(17186),u=n(28036),r=n(34041),J=n(71230),T=n(15746),y=n(67294),t=n(85893),f=(0,y.forwardRef)(function(m,L){var i=(0,y.useState)(!1),ue=S()(i,2),Z=ue[0],_e=ue[1],ce=(0,y.useRef)(),de=(0,y.useContext)(O.Z),ee=de.message;return(0,y.useImperativeHandle)(L,function(){return{}}),(0,t.jsxs)(B.a,{name:"create",title:"\u521B\u5EFA\u7F51\u7EDC",open:Z,onOpenChange:function(W){_e(W)},formRef:ce,trigger:(0,t.jsx)(u.ZP,{type:"primary",children:"\u521B\u5EFA\u7F51\u7EDC"}),onFinish:function(){var D=A()(o()().mark(function W(F){var H,me,e,ge,Pe,Ae,re,Ue,Fe,Se,Le,Re,Te,We;return o()().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Re={name:F.name,driver:(H=F.driver)!==null&&H!==void 0?H:"bridge",ipSubnet:(me=F.ipSubnet)!==null&&me!==void 0?me:"",ipGateway:(e=F.ipGateway)!==null&&e!==void 0?e:"",ipRange:(ge=F.ipRange)!==null&&ge!==void 0?ge:"",ipAux:F.ipAux,enableIpV6:(Pe=F.enableIpV6)!==null&&Pe!==void 0?Pe:!1,ipV6Subnet:(Ae=F.ipV6Subnet)!==null&&Ae!==void 0?Ae:"",ipV6Gateway:(re=F.ipV6Gateway)!==null&&re!==void 0?re:"",ipV6Range:(Ue=F.ipV6Range)!==null&&Ue!==void 0?Ue:"",ipV6Aux:(Fe=F.ipV6Aux)!==null&&Fe!==void 0?Fe:[],driverOption:F.driverOption,internal:(Se=F.internal)!==null&&Se!==void 0?Se:!1,attachable:(Le=F.attachable)!==null&&Le!==void 0?Le:!1},(F.driver=="macvlan"||F.driver=="ipvlan")&&(Re.driverOption||(Re.driverOption=[]),Re.driverOption.push({name:"parent",value:F.macvlanParentCard})),Ie.next=4,(0,I.XY)(Re);case 4:if(Te=Ie.sent,!(Te&&Te.data&&Te.data.id!="")){Ie.next=10;break}return ee.success("\u521B\u5EFA\u7F51\u7EDC\u6210\u529F"),m.onFinish&&m.onFinish(),(We=ce.current)===null||We===void 0||We.resetFields(),Ie.abrupt("return",!0);case 10:case"end":return Ie.stop()}},W)}));return function(W){return D.apply(this,arguments)}}(),children:[(0,t.jsx)(M.Z,{label:"\u540D\u79F0",tooltip:"\u4E0D\u914D\u7F6E\u5B50\u7F51\u65F6\uFF0C\u4F1A\u81EA\u52A8\u751F\u6210",name:"name",required:!0,rules:[{required:!0}],placeholder:"\u6307\u5B9A\u552F\u4E00\u7684\u7F51\u7EDC\u540D\u79F0"}),(0,t.jsx)(c.Z,{label:"\u7C7B\u578B",name:"driver",children:(0,t.jsxs)(r.Z,{defaultValue:"bridge",children:[(0,t.jsx)(r.Z.Option,{value:"bridge",children:"bridge"}),(0,t.jsx)(r.Z.Option,{value:"macvlan",children:"macvlan"}),(0,t.jsx)(r.Z.Option,{value:"ipvlan",children:"ipvlan"}),(0,t.jsx)(r.Z.Option,{value:"overlay",children:"overlay"})]})}),(0,t.jsx)(g.Z,{name:["driver"],children:function(W){var F=W.driver;if(F=="macvlan"||F=="ipvlan")return(0,t.jsx)(M.Z,{required:!0,rules:[{required:!0}],label:"\u7236\u7F51\u5361",name:"macvlanParentCard",tooltip:"\u6307\u5B9A\u8981\u6865\u63A5\u7684\u5BBF\u4E3B\u673A\u7F51\u5361\u540D\u79F0"})}}),(0,t.jsxs)(J.Z,{children:[(0,t.jsx)(T.Z,{span:8,children:(0,t.jsx)($.Z,{label:"\u81EA\u5B9AIPV4\u5B50\u7F51",name:"userIpV4Subnet"})}),(0,t.jsx)(T.Z,{span:8,children:(0,t.jsx)($.Z,{name:"internal",label:"\u9694\u79BB\u5916\u90E8\u8BBF\u95EE",initialValue:!1})}),(0,t.jsx)(T.Z,{span:8,children:(0,t.jsx)($.Z,{name:"attachable",label:"\u5141\u8BB8\u624B\u52A8\u9644\u52A0\u5BB9\u5668",initialValue:!1})})]}),(0,t.jsx)(g.Z,{name:["userIpV4Subnet"],children:function(W){var F=W.userIpV4Subnet;if(F)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.UW,{title:"IPV4\u914D\u7F6E",children:[(0,t.jsx)(M.Z,{label:"\u5B50\u7F51",name:"ipSubnet",width:"md",tooltip:"\u683C\u5F0F\u4E3A: \u5B50\u7F51\u8D77\u59CB\u5730\u5740/\u63A9\u7801\u3002\u5E38\u89C1\u7684\u683C\u5F0F\u6709 10.0.0.0/8, 172.20.0.0/16, 192.168.1.0/24",placeholder:"192.168.0.0/16"}),(0,t.jsx)(M.Z,{label:"\u7F51\u5173",name:"ipGateway",width:"md",placeholder:"192.168.0.1"}),(0,t.jsx)(M.Z,{label:"\u6307\u5B9AIp\u8303\u56F4",name:"ipRange",width:"md",placeholder:"192.168.1.0/24"})]}),(0,t.jsx)(G.u,{name:"ipAux",label:"\u6392\u9664Ip",children:(0,t.jsxs)(l.UW,{children:[(0,t.jsx)(M.Z,{label:"\u8BBE\u5907\u540D\u79F0",name:"device",width:"md"}),(0,t.jsx)(M.Z,{label:"Ip\u5730\u5740",name:"address",width:"md"})]})})]})}}),(0,t.jsxs)(J.Z,{children:[(0,t.jsx)(T.Z,{span:8,children:(0,t.jsx)($.Z,{label:"\u542F\u7528IPV6",name:"enableIpV6"})}),(0,t.jsx)(T.Z,{children:(0,t.jsx)($.Z,{label:"\u81EA\u5B9AIPV6\u5B50\u7F51",name:"userIpV6Subnet",fieldProps:{onChange:function(W,F){if(W){var H;(H=ce.current)===null||H===void 0||H.setFieldValue("enableIpV6",!0)}}}})})]}),(0,t.jsx)(g.Z,{name:["userIpV6Subnet"],children:function(W){var F=W.userIpV6Subnet;if(F)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.UW,{title:"IPV6\u914D\u7F6E",children:[(0,t.jsx)(M.Z,{label:"\u5B50\u7F51",name:"ipV6Subnet",width:"md",placeholder:"2001:db8::/48"}),(0,t.jsx)(M.Z,{label:"\u7F51\u5173",name:"ipV6Gateway",width:"md",placeholder:"2001:db8::1"}),(0,t.jsx)(M.Z,{label:"Ip\u8303\u56F4",name:"ipV6Range",width:"md",placeholder:"2001:db8::/64"})]}),(0,t.jsx)(G.u,{name:"ipV6Aux",label:"\u6392\u9664Ip",children:(0,t.jsxs)(l.UW,{children:[(0,t.jsx)(M.Z,{label:"\u8BBE\u5907\u540D\u79F0",name:"device",width:"md"}),(0,t.jsx)(M.Z,{label:"Ip\u5730\u5740",name:"address",width:"md"})]})})]})}}),(0,t.jsx)(G.u,{name:"driverOption",label:"\u81EA\u5B9A\u4E49\u9A71\u52A8\u914D\u7F6E",children:(0,t.jsxs)(l.UW,{children:[(0,t.jsx)(M.Z,{label:"\u540D\u79F0",name:"name",width:"md"}),(0,t.jsx)(M.Z,{label:"\u503C",name:"value",width:"md"})]})})]})});q.Z=f},46442:function(Be,q,n){var te=n(15009),o=n.n(te),ae=n(99289),A=n.n(ae),V=n(5574),S=n.n(V),O=n(67294),I=n(14946),B=n(64789),M=n(10641),c=n(28036),g=n(85265),$=n(42075),l=n(66309),G=n(28230),u=n(85893),r=(0,O.forwardRef)(function(J,T){(0,O.useImperativeHandle)(T,function(){return{show:function(){m(!0)}}});var y=(0,O.useState)(!1),t=S()(y,2),f=t[0],m=t[1],L=(0,O.useRef)();return(0,u.jsxs)(u.Fragment,{children:[J.showTriggerButton&&(0,u.jsx)(c.ZP,{onClick:function(){m(!0)},children:"\u52A0\u5165\u7F51\u7EDC"}),(0,u.jsx)(g.Z,{title:"\u9009\u62E9\u7F51\u7EDC",width:800,footer:!1,open:f,onClose:function(){return m(!1)},extra:(0,u.jsx)($.Z,{children:(0,u.jsx)(G.Z,{onFinish:function(){var ue,Z;!((ue=L.current)===null||ue===void 0)&&ue.reloadAndRest&&((Z=L.current)===null||Z===void 0||Z.reloadAndRest())}},"create")}),children:(0,u.jsx)(M.Z,{rowKey:"Name",toolBarRender:!1,actionRef:L,columns:[{title:"\u540D\u79F0",dataIndex:"Name",render:function(ue,Z,_e,ce,de){return Z.Name=="none"||Z.Name=="bridge"||Z.Name=="host"?(0,u.jsxs)(u.Fragment,{children:[Z.Name," ",(0,u.jsx)(l.Z,{color:"blue",children:"System"})]}):(0,u.jsx)(u.Fragment,{children:ue})}},{title:"\u7C7B\u578B",ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"IPAM Driver",ellipsis:!0,width:120,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4 IPAM Network",search:!1,dataIndex:["IPAM","Config",0,"Subnet"],render:function(ue,Z,_e,ce,de){return(0,u.jsxs)($.Z,{children:[Z.IPAM.Config&&Z.IPAM.Config[0]&&"".concat(Z.IPAM.Config[0].Subnet," - ").concat(Z.IPAM.Config[0].Gateway),Z.IPAM.Config&&Z.IPAM.Config[1]&&"".concat(Z.IPAM.Config[1].Subnet," - ").concat(Z.IPAM.Config[1].Gateway)]})}},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(ue,Z,_e,ce,de){return[Z.Name!="none"&&Z.Name!="bridge"&&Z.Name!="host"&&(0,u.jsx)(c.ZP,{type:"link",onClick:function(){J.onSelect(Z),m(!1)},children:(0,u.jsx)(B.Z,{})},Z.Id)]}}],request:function(){var i=A()(o()().mark(function ue(Z,_e,ce){var de;return o()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,I.jR)({name:Z.Name});case 2:return de=D.sent,D.abrupt("return",{data:de.data.list,success:!0,total:de.data.list.length});case 4:case"end":return D.stop()}},ue)}));return function(ue,Z,_e){return i.apply(this,arguments)}}(),pagination:{pageSize:10}})})]})});q.Z=r},35880:function(Be,q,n){var te=n(67294),o=(0,te.createContext)({});q.Z=o},57841:function(Be,q,n){n.r(q),n.d(q,{default:function(){return bn}});var te=n(15009),o=n.n(te),ae=n(99289),A=n.n(ae),V=n(5574),S=n.n(V),O=n(90078),I=n(38345),B=n(97269),M=n(2236),c=n(5966),g=n(97462),$=n(64218),l=n(92398),G=n(38925),u=n(67294),r=n(35880),J=n(10641),T=n(62370),y=n(85576),t=n(42075),f=n(96074),m=n(25593),L=n(83062),i=n(71230),ue=n(15746),Z=n(28036),_e=n(3393),ce=n(18148),de=n(5251),ee=n(64789),D=n(75162),W=n(85060),F=n(28307),H=n(78451),me=n(99861),e=n(85893);function ge(v){var k=(0,u.useState)(!1),w=S()(k,2),U=w[0],E=w[1],b=(0,u.useRef)(),_=(0,u.useContext)(r.Z),h=_.createFormRef,x=_.volumeListRef,j=_.createEnvRef,d=_.domainRef,p=(0,u.useRef)(),N=function(){var P=A()(o()().mark(function R(C){var K,se,ne,Q,ie,ve,pe,oe,he,xe,De,Ve;return o()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return E(!1),Y.next=3,(0,_e.YU)({md5:C});case 3:Q=Y.sent,v.redeploy||(oe=(ie=h.current)===null||ie===void 0?void 0:ie.getFieldsValue(),(ve=h.current)===null||ve===void 0||ve.resetFields(),(pe=h.current)===null||pe===void 0||pe.setFieldsValue({siteName:oe.siteName,siteTitle:oe.siteTitle,useBridgeNetwork:oe.useBridgeNetwork})),Q.data.info.Config.Env&&Q.data.info.Config.Env.map(function(s){var le,a=s.split("=");(le=j.current)===null||le===void 0||le.addEnvItem(a[0],a.slice(1).join("="))}),(K=h.current)===null||K===void 0||K.setFieldValue("imageName",C),(se=h.current)===null||se===void 0||se.setFieldValue("workDir",Q.data.info.Config.WorkingDir),(ne=d.current)===null||ne===void 0||ne.setExposePort(Q.data.info.Config.ExposedPorts),v.redeploy||(Q.data.info.Config.Volumes?(De=[],Object.keys(Q.data.info.Config.Volumes).map(function(s,le){De.push(s)}),(xe=x.current)===null||xe===void 0||xe.setDefaultDestPath(De)):(Ve=x.current)===null||Ve===void 0||Ve.setDefaultDestPath([]),(he=h.current)===null||he===void 0||he.setFieldsValue({workDir:{value:"",useDefault:!0,default:Q.data.info.Config.WorkingDir},user:{value:"",useDefault:!0,default:Q.data.info.Config.User},command:{value:"",useDefault:!0,default:Q.data.info.Config.Cmd&&Q.data.info.Config.Cmd.join(" ")},entrypoint:{value:"",useDefault:!0,default:Q.data.info.Config.Entrypoint&&Q.data.info.Config.Entrypoint.join(" ")}}));case 10:case"end":return Y.stop()}},R)}));return function(C){return P.apply(this,arguments)}}();return(0,u.useEffect)(function(){v.fromImageId&&N(v.fromImageId)},[v.fromImageId]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(y.Z,{open:U,width:1024,title:"\u9009\u62E9\u955C\u50CF",footer:!1,onCancel:function(){return E(!1)},children:(0,e.jsx)(J.Z,{scroll:{x:"max-content"},columns:[{title:"Id",dataIndex:"Id",search:!1,width:200,render:function(R,C,K,se,ne){return(0,e.jsx)(H.Z,{content:C.Id})}},{title:"\u955C\u50CF\u540D\u79F0",dataIndex:"tag",width:200,render:function(R,C,K,se){return(0,e.jsx)(H.Z,{content:C.RepoTags[0]})}},{title:"\u521B\u5EFA\u65E5\u671F",dataIndex:"Created",ellipsis:!0,search:!1,width:"180px",render:function(R,C,K,se){return(0,e.jsx)("div",{children:(0,de.ZM)(C.Created*1e3)},C.Id)},sorter:function(R,C){return R.Created-C.Created}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:80,render:function(R,C,K,se){return(0,e.jsxs)(t.Z,{split:(0,e.jsx)(f.Z,{type:"vertical"}),children:[(0,e.jsx)(m.Z.Link,{onClick:A()(o()().mark(function ne(){return o()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.abrupt("return",N(C.RepoTags[0]));case 1:case"end":return ie.stop()}},ne)})),children:(0,e.jsx)(L.Z,{title:"\u4F7F\u7528\u955C\u50CF",children:(0,e.jsx)(ee.Z,{})})},"addImage"),(0,e.jsx)(m.Z.Link,{onClick:A()(o()().mark(function ne(){var Q;return o()().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:C.RepoTags[0]&&((Q=p.current)===null||Q===void 0||Q.setImageName(C.RepoTags[0]));case 1:case"end":return ve.stop()}},ne)})),children:(0,e.jsx)(L.Z,{title:"\u66F4\u65B0\u955C\u50CF",children:(0,e.jsx)(D.Z,{})})},"updateImage")]})}}],request:function(){var P=A()(o()().mark(function R(C,K,se){var ne,Q,ie,ve,pe;return o()().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return v.redeploy&&(Q=(ne=h.current)===null||ne===void 0?void 0:ne.getFieldValue("imageName"),C.tag=Q?Q.split(":")[0]:C.tag),he.next=3,(0,ce.KG)({tag:C.tag});case 3:return ie=he.sent,ve=0,pe=[],ie.data.list&&(pe=ie.data.list.flatMap(function(xe){return xe.RepoTags.map(function(De){return{Key:ve++,Id:xe.Id,Created:xe.Created,RepoTags:[De]}})})),he.abrupt("return",{data:pe,success:!0,total:pe.length});case 8:case"end":return he.stop()}},R)}));return function(R,C,K){return P.apply(this,arguments)}}(),toolBarRender:function(){return[(0,e.jsx)(F.Z,{onClick:function(){E(!1)},buttonType:"primary",ref:p,onFinish:function(C){N(C)}},"remote")]},formRef:b,rowKey:"Key",pagination:{pageSize:5}})},"imageTableList"),(0,e.jsxs)(i.Z,{children:[(0,e.jsx)(ue.Z,{span:14,children:(0,e.jsx)(c.Z,{label:"\u955C\u50CF",tooltip:v.redeploy?"\u66F4\u65B0\u5BB9\u5668\u65F6,\u53EA\u53EF\u4EE5\u9009\u62E9\u8BE5\u955C\u50CF\u4E0B\u7684\u4E0D\u540Ctag.\u4E5F\u53EF\u4EE5\u5F3A\u5236\u66F4\u65B0\u5DF2\u90E8\u7F72tag,\u66F4\u6B21\u90E8\u7F72":"\u65B0\u5EFA\u5BB9\u5668\u65F6,\u53EF\u4EE5\u4F7F\u7528\u672C\u5730\u955C\u50CF,\u4E5F\u53EF\u4EE5\u4E0B\u8F7D\u5168\u65B0\u7684\u955C\u50CF\u6216\u662F\u66F4\u65B0\u672C\u5730\u955C\u50CF\u7684tag",name:"imageName",disabled:!0,placeholder:"\u8BF7\u9009\u62E9\u955C\u50CF\uFF0C\u5982\u679C\u662F\u8FDC\u7A0B\u955C\u50CF\u8BF7\u5148\u4E0B\u8F7D",rules:[{required:!0}],required:!0})}),(0,e.jsx)(ue.Z,{children:(0,e.jsx)(T.Z,{label:" ",children:(0,e.jsxs)(t.Z.Compact,{children:[(0,e.jsx)(Z.ZP,{type:"primary",onClick:function(){return E(!0)},children:v.redeploy?"\u66F4\u6362\u955C\u50CF":"\u9009\u62E9\u955C\u50CF"},"showBtn"),(0,e.jsx)(g.Z,{name:["imageName"],children:function(R){var C=R.imageName;return v.redeploy?(0,e.jsx)(me.Z,{image:[C],trigger:(0,e.jsx)(L.Z,{title:"\u91CD\u65B0\u62C9\u53D6\u5F53\u524D\u955C\u50CF",children:(0,e.jsx)(Z.ZP,{icon:(0,e.jsx)(W.Z,{}),children:"\u62C9\u53D6\u5F53\u524D\u955C\u50CF"})})}):(0,e.jsx)(F.Z,{onClick:function(){E(!1)},ref:p,onFinish:function(se){N(se)}},"remote")}})]})})})]})]})}var Pe=n(60335),Ae=n(51042),re=n(24739),Ue=n(63434),Fe=n(17186),Se=n(85265),Le=n(92067),Re=(0,u.forwardRef)(function(v,k){var w=(0,u.useState)(!1),U=S()(w,2),E=U[0],b=U[1],_=(0,u.useRef)(),h=function(d){var p=(0,u.useState)([]),N=S()(p,2),P=N[0],R=N[1];return(0,u.useEffect)(function(){(0,Pe.jV)({md5:d.name}).then(function(C){var K;return R((K=C.data.info.Config.Env)!==null&&K!==void 0?K:[]),!0})},[]),(0,e.jsxs)(I.Z,{bordered:!0,extra:d.action,style:{marginBottom:10},children:[(0,e.jsx)(I.Z,{title:"\u5173\u8054\u4FE1\u606F",children:(0,e.jsxs)(re.UW,{children:[(0,e.jsx)(c.Z,{label:"\u5BB9\u5668\u540D\u79F0",name:"name",width:"md",readonly:!0}),(0,e.jsx)(c.Z,{label:"\u8BBF\u95EEHostName",name:"alise",width:"md",tooltip:"\u901A\u8FC7\u914D\u7F6E\u6B64\u540D\u79F0\uFF0C\u5728\u5BB9\u5668\u5185\u90E8\u8FDB\u884C\u8BF7\u6C42\u8BBF\u95EE"}),(0,e.jsx)(Ue.Z,{label:"\u5173\u8054\u5B58\u50A8",name:"volume"})]})}),(0,e.jsx)(I.Z,{title:"\u73AF\u5883\u53D8\u91CF",children:(0,e.jsx)(t.Z,{direction:"vertical",children:P&&P.map(function(C,K){return(0,e.jsx)(m.Z.Text,{copyable:{icon:(0,e.jsx)(Ae.Z,{}),onCopy:function(){var ne=C.split("=");v.onAddEnv(ne[0],ne[1])},tooltips:["add env","success"]},code:!0,ellipsis:{tooltip:C},style:{width:300},children:C},K)})},"linkEnv")})]})},x=function(d){var p,N,P=!1,R=(p=(N=_.current)===null||N===void 0?void 0:N.getList())!==null&&p!==void 0?p:[];if(R.map(function(K){K.name==d.name&&(P=!0)}),!P){var C;(C=_.current)===null||C===void 0||C.add(d)}};return(0,u.useImperativeHandle)(k,function(){return{setDefaultLink:function(d){d&&d.map(function(p){p.name!=""&&x(p)})}}}),(0,e.jsxs)(I.Z,{title:"\u5173\u8054\u5BB9\u5668",headerBordered:!0,children:[(0,e.jsx)(Fe.u,{name:"links",actionRef:_,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5173\u8054"},actionGuard:{beforeAddRow:function(d,p){return b(!0),!1}},copyIconProps:!1,min:0,itemRender:function(d,p){return(0,e.jsx)(h,{action:d.action,name:p.record.name})}}),(0,e.jsx)(Se.Z,{title:"\u9009\u62E9\u5BB9\u5668",width:800,footer:!1,open:E,onClose:function(){return b(!1)},children:(0,e.jsx)(Le.Z,{onSelect:function(d){x({name:d.Name,alise:d.Config.Hostname,volume:!1}),b(!1)}})})]})}),Te=Re,We=n(91058),ye=n(64317),Ie=(0,u.forwardRef)(function(v,k){var w=(0,u.useRef)();return(0,u.useImperativeHandle)(k,function(){return{setDefaultDestPath:function(E){var b,_,h=(b=(_=w.current)===null||_===void 0?void 0:_.getList())!==null&&b!==void 0?b:[];E.length!=0&&E.filter(function(x){return x!=""}).map(function(x){var j=!1;if(h.map(function(p){if(p.dest==x){j=!0;return}}),!j){var d;(d=w.current)===null||d===void 0||d.add({dest:x,permission:"write",inImage:!0})}})},addUserVolumeItem:function(E,b){var _,h=(_=w.current)===null||_===void 0?void 0:_.getList(),x=!1;if(h==null||h.map(function(d){if(d.dest==b){x=!0;return}}),!x){var j;(j=w.current)===null||j===void 0||j.add({host:E,dest:b})}}}}),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(I.Z,{title:"\u81EA\u5B9A\u4E49\u6302\u8F7D\u6216\u662F\u5B58\u50A8\u5377",tooltip:"\u6302\u8F7D\u53EF\u4EE5\u662F\u5BBF\u4E3B\u673A\u7684\u76EE\u5F55\u6216\u662F\u6587\u4EF6\uFF0C\u4E5F\u53EF\u4EE5\u6307\u5B9A\u5B58\u50A8\u5377\u540D\uFF08\u81EA\u52A8\u65B0\u5EFA\uFF09\u3002",headerBordered:!0,direction:"column",children:(0,e.jsx)(Fe.u,{actionRef:w,name:"volumes",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u6620\u5C04\u76EE\u5F55"},copyIconProps:!1,min:0,children:function(E,b,_){var h=_.getCurrentRowData();return(0,e.jsxs)(re.UW,{children:[(0,e.jsxs)(t.Z.Compact,{children:[(0,e.jsx)(c.Z,{label:"\u5BBF\u4E3B\u673A\u6587\u4EF6\u3001\u76EE\u5F55\u6216\u5B58\u50A8\u5377",name:"host",width:v.showInDrawer?"sm":"md"}),(0,e.jsx)(ye.Z,{label:" ",valueEnum:{write:"\u8BFB\u5199",readonly:"\u53EA\u8BFB"},initialValue:"write",name:"permission"})]}),(0,e.jsx)(c.Z,{label:"\u5BB9\u5668\u5185\u8DEF\u5F84",name:"dest",width:v.showInDrawer?"sm":"md",required:!0,rules:[{required:!0}],disabled:v.disabledUserVolumeDest||h.inImage})]})}})})})}),an=Ie,rn=n(2831),fe=n(52688),qe=n(86125),ln=n(44349);function sn(v){var k,w=(0,u.useState)(),U=S()(w,2),E=U[0],b=U[1];return(0,u.useEffect)(function(){(0,rn.aF)().then(function(_){return b(_.data.info)})},[]),(0,e.jsxs)(I.Z,{children:[(0,e.jsx)(c.Z,{label:"\u5171\u4EAB\u5185\u5B58\u5927\u5C0F - /dev/shm",name:"shmsize",initialValue:"64M",tooltip:"0 \u4E3A\u4F7F\u7528\u9ED8\u8BA464M\uFF0C\u914D\u7F6E\u65F6\u8BF7\u9644\u52A0\u5355\u4F4D\uFF0C\u4F8B\u5982\uFF1A1G"}),(0,e.jsx)(T.Z,{label:"\u6700\u5927Cpu\u914D\u989D",name:"cpus",tooltip:"0 \u4E3A\u4E0D\u9650\u5236",children:(0,e.jsx)(qe.Z,{step:.1,max:E==null?void 0:E.NCPU,marks:{0:"0",.5:"0.5\u6838",1:"1\u6838",1.5:"1.5\u6838",2:"2\u6838",4:"4\u6838",6:"6\u6838",8:"8\u6838"}})}),(0,e.jsx)(T.Z,{label:"\u6700\u5927\u5185\u5B58\u914D\u989D",name:"memory",tooltip:"0 \u4E3A\u4E0D\u9650\u5236",children:(0,e.jsx)(qe.Z,{step:256,max:Math.round(((k=E==null?void 0:E.MemTotal)!==null&&k!==void 0?k:0)/1024/1024),marks:{0:"0",1024:"1G",2048:"2G",3072:"3G",4096:"4G"}})}),(0,e.jsx)(ye.Z,{label:"\u65E5\u5FD7\u7C7B\u578B",name:["log","driver"],tooltip:"\u9ED8\u8BA4\u4F7F\u7528 json-file \u9A71\u52A8\u7531 docker \u7EDF\u4E00\u7BA1\u7406\u3002\u91C7\u7528 journal \u65F6\u65E5\u5FD7\u5C06\u6765\u5BBF\u4E3B\u673A\u7BA1\u7406",initialValue:"json-file",valueEnum:{"json-file":"json-file",journald:"journal (\u5BBF\u4E3B\u9700\u8981\u5B89\u88C5journal\u670D\u52A1)"}}),(0,e.jsx)(g.Z,{name:["log"],children:function(h){var x=h.log;if(x.driver=="json-file")return(0,e.jsxs)(re.UW,{children:[(0,e.jsx)(c.Z,{label:"\u65E5\u5FD7\u5207\u5272\u5927\u5C0F",name:["log","maxSize"],placeholder:"\u4F8B\u5982\uFF1A10k,5M",tooltip:"\u9ED8\u8BA4 Docker \u5E76\u4E0D\u4F1A\u81EA\u52A8\u5207\u5272\u65E5\u5FD7"}),(0,e.jsx)(c.Z,{tooltip:"\u9ED8\u8BA4 Docker \u5E76\u4E0D\u4F1A\u81EA\u52A8\u6E05\u7406\u65E5\u5FD7\u6587\u4EF6",label:"\u4FDD\u7559\u65E5\u5FD7\u6587\u4EF6\u6570",name:["log","maxFile"],placeholder:"\u4F8B\u5982\uFF1A10"})]})}}),(0,e.jsx)(ln.Z,{name:"device",label:"\u5173\u8054\u8BBE\u5907",hideCopyButton:!0,showAddButton:!0,items:[{label:"\u5BBF\u4E3B\u673A\u8DEF\u5F84",name:"host",width:"md",placeholder:"\u4F8B\u5982\uFF1A/dev/tty0"},{label:"\u5BB9\u5668\u5185\u8DEF\u5F84",name:"dest",width:"md",placeholder:"\u4F8B\u5982\uFF1A/dev/tty0"}]}),(0,e.jsxs)(i.Z,{children:[(0,e.jsx)(ue.Z,{span:4,children:(0,e.jsx)(fe.Z,{label:"\u4F7F\u7528 Gpu",name:["gpus","enable"]})}),(0,e.jsx)(ue.Z,{span:20,children:(0,e.jsx)(g.Z,{name:["gpus"],children:function(h){var x=h.gpus;if(x&&x.enable)return(0,e.jsx)(ye.Z,{mode:"tags",label:"\u8BBE\u5907\u5217\u8868",name:["gpus","device"],placeholder:"\u914D\u7F6E\u4F7F\u7528\u8BBE\u5907id\u6216\u662Fuuid\uFF0C\u4E0D\u586B\u6240\u4E3A\u6240\u6709\u8BBE\u5907"})}})})]}),(0,e.jsx)(g.Z,{name:["gpus"],children:function(h){var x=h.gpus;if(x&&x.enable)return(0,e.jsx)(ye.Z,{label:"\u8BA1\u7B97\u80FD\u529B",name:["gpus","capabilities"],mode:"multiple",fieldProps:{allowClear:!0},options:[{label:"compute - \u8BA1\u7B97\u80FD\u529B",value:"compute"},{label:"compat32 - \u517C\u5BB932\u4F4D",value:"compat32"},{label:"graphics - \u56FE\u5F62\u5904\u7406\u80FD\u529B",value:"graphics"},{label:"utility - \u76D1\u63A7\u548C\u7BA1\u7406\u80FD\u529B",value:"utility"},{label:"video - \u89C6\u9891\u5904\u7406\u80FD\u529B",value:"video"},{label:"display - \u663E\u793A\u56FE\u5F62\u754C\u9762\u80FD\u529B",value:"display"}]})}})]})}function on(){return(0,e.jsx)(I.Z,{title:"\u5BB9\u5668\u6807\u7B7E",children:(0,e.jsx)(Fe.u,{name:"label",label:"",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BB9\u5668\u6807\u7B7E"},copyIconProps:!1,min:0,children:(0,e.jsxs)(re.UW,{children:[(0,e.jsx)(c.Z,{width:"md",name:"name",label:"\u540D\u79F0",placeholder:""}),(0,e.jsx)(c.Z,{width:"md",name:"value",label:"\u503C",placeholder:""})]})})})}var dn=n(44771),cn=n(86615),On="default",Zn="user";function mn(v){return(0,e.jsx)(T.Z,{label:v.label,tooltip:v.tooltip,children:(0,e.jsxs)(t.Z.Compact,{block:!0,children:[(0,e.jsx)(cn.Z.Group,{radioType:"button",name:[v.name,"useDefault"],options:[{label:"\u4F7F\u7528\u9ED8\u8BA4",value:!0},{label:"\u81EA\u5B9A\u4E49",value:!1}]}),(0,e.jsx)(g.Z,{name:[v.name],children:function(w){return w[v.name]&&w[v.name].useDefault?(0,e.jsx)(c.Z,{name:[v.name,"default"],disabled:!0,placeholder:"\u672A\u8BBE\u7F6E"}):(0,e.jsx)(c.Z,{name:[v.name,"value"]})}})]})})}var Ke=mn,He=n(24963);function vn(){var v=(0,u.useContext)(He.Z),k=v.notice,w=v.lang;return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(I.Z,{children:[(0,e.jsx)(dn.Z,{label:"\u91CD\u542F\u7B56\u7565"}),(0,e.jsxs)(re.UW,{children:[(0,e.jsx)(fe.Z,{fieldProps:{onChange:function(E){E&&k.warning(w("app.create.privilegedNotice"))}},name:"privileged",label:"\u8D4B\u4E88\u5BB9\u5668Root\u6743\u9650",initialValue:!1}),(0,e.jsx)(fe.Z,{name:"autoRemove",label:"\u505C\u6B62\u540E\u81EA\u52A8\u5220\u9664",initialValue:!1}),(0,e.jsx)(fe.Z,{fieldProps:{onChange:function(E){E&&k.warning(w("app.create.hostPidNotice"))}},name:"hostPid",label:"\u5173\u8054\u5BBF\u4E3B\u673APid",initialValue:!1})]}),(0,e.jsx)(Ke,{label:"\u5DE5\u4F5C\u76EE\u5F55",tooltip:"\u9ED8\u8BA4\u4F7F\u7528\u955C\u50CF\u4E2D\u6307\u5B9A\u7684\u5DE5\u4F5C\u76EE\u5F55",name:"workDir"}),(0,e.jsx)(Ke,{label:"User",tooltip:"\u5728\u5BB9\u5668\u4E2D\u8FD0\u884C\u547D\u4EE4\u7684\u7528\u6237",name:"user"}),(0,e.jsx)(Ke,{label:"Command",tooltip:"\u542F\u52A8\u5BB9\u5668\u65F6\u8FD0\u884C\u7684\u547D\u4EE4\uFF0C\u4EE5\u7A7A\u683C\u5206\u9694",name:"command"}),(0,e.jsx)(Ke,{label:"Entrypoint",tooltip:"\u65E0\u6CD5\u8986\u76D6\u955C\u50CF\u4E2D\u5DF2\u7ECF\u6307\u5B9A\u7684 Entrypoint \u547D\u4EE4",name:"entrypoint"})]})})}var hn=n(91845),en=n(62597),nn=n(82346),_n=n(46442),fn=(0,u.forwardRef)(function(v,k){var w=(0,u.useContext)(He.Z),U=w.notice,E=(0,u.useRef)(),b=(0,u.useRef)();(0,u.useImperativeHandle)(k,function(){return{}});var _=function(x){var j,d,p=!1,N=(j=(d=E.current)===null||d===void 0?void 0:d.getList())!==null&&j!==void 0?j:[];if(N.map(function(R){R.name==x.name&&(p=!0)}),!p){var P;(P=E.current)===null||P===void 0||P.add(x)}};return(0,e.jsxs)(I.Z,{title:"\u5173\u8054\u7F51\u7EDC",headerBordered:!0,extra:(0,e.jsx)(t.Z,{children:v.showUseBridgeNetwork&&(0,e.jsx)(fe.Z,{name:"useBridgeNetwork",fieldProps:{checkedChildren:"\u5173\u8054 Bridge \u7F51\u7EDC",unCheckedChildren:"\u5173\u8054 Bridge \u7F51\u7EDC"}},"useBridgeNetwork")}),children:[(0,e.jsx)(Fe.u,{name:"network",actionRef:E,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u7F51\u7EDC"},actionGuard:{beforeAddRow:function(x,j){var d;return!v.siteName||v.siteName==""||typeof v.siteName=="undefined"?(U.error("\u8BF7\u8F93\u5165\u7AD9\u70B9\u6807\u8BC6"),!1):((d=b.current)===null||d===void 0||d.show(),!1)}},copyIconProps:!1,min:0,itemRender:function(x,j){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(re.UW,{children:[(0,e.jsx)(c.Z,{label:"\u7F51\u7EDC\u540D\u79F0",name:"name",width:"md",disabled:!0,fieldProps:{value:j.record.name}}),(0,e.jsx)(T.Z,{label:"\u8BBF\u95EEHostname",name:"alise",children:j.record.alise!=""&&(0,e.jsx)(m.Z.Text,{code:!0,copyable:!0,children:j.record.alise})}),(0,e.jsx)(T.Z,{label:" ",children:x.action})]}),(0,e.jsx)(re.UW,{children:(0,e.jsx)(c.Z,{label:"\u6307\u5B9AIpV4",name:"ipV4",width:"md",disabled:j.record.name=="bridge",fieldProps:{addonAfter:j.record.subnet}})})]})}}),(0,e.jsx)(_n.Z,{ref:b,onSelect:function(x){_({name:x.Name,alise:[""],subnet:x.IPAM.Config[0].Subnet})}})]})}),pn=fn,En=(0,u.forwardRef)(function(v,k){var w=(0,u.useState)(""),U=S()(w,2),E=U[0],b=U[1],_=(0,u.useRef)(),h=(0,u.useContext)(r.Z),x=h.createFormRef;return(0,u.useImperativeHandle)(k,function(){return{setExposePort:function(d){if(d){var p,N,P=(p=(N=_.current)===null||N===void 0?void 0:N.getList())!==null&&p!==void 0?p:[];Object.keys(d).map(function(R){var C=!1;if(P.map(function(se){se.dest==R&&(C=!0)}),!C){var K;(K=_.current)===null||K===void 0||K.add({host:"",dest:R})}})}},setHostname:function(d){b(d)},addPortItem:function(d,p){var N,P=(N=_.current)===null||N===void 0?void 0:N.getList(),R=!1;if(P==null||P.map(function(K){if(K.host==d){R=!0;return}}),!R){var C;(C=_.current)===null||C===void 0||C.add({host:String(d),dest:String(p)})}}}}),(0,e.jsx)(I.Z,{title:"\u7ED1\u5B9A\u7AEF\u53E3",tooltip:"\u8BBF\u95EE\u7AEF\u53E3\u7559\u7A7A\u65F6\u968F\u673A\u751F\u6210\u7AEF\u53E3\uFF0C\u5168\u90E8\u5220\u9664\u5219\u8868\u793A\u4E0D\u66B4\u9732\u7AEF\u53E3",headerBordered:!0,extra:(0,e.jsxs)(t.Z,{children:[v.showBindHost&&(0,e.jsx)(fe.Z,{name:"useHostNetwork",fieldProps:{checkedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",unCheckedChildren:"\u7ED1\u5B9AHost\u7F51\u7EDC",onChange:function(d){if(d){var p;(p=x.current)===null||p===void 0||p.setFieldsValue({bindIpV6:!1,publishAllPorts:!1})}}}}),v.showBindIpV6&&(0,e.jsx)(g.Z,{name:["siteName","useHostNetwork"],children:function(d){var p=d.useHostNetwork;return(0,e.jsx)(fe.Z,{name:"publishAllPorts",fieldProps:{checkedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3",unCheckedChildren:"\u7ED1\u5B9A\u5168\u90E8\u7AEF\u53E3"},disabled:p},"publishAllPorts")}}),v.showBindIpV6&&(0,e.jsx)(g.Z,{name:["siteName","useHostNetwork"],children:function(d){var p=d.useHostNetwork;return(0,e.jsx)(fe.Z,{name:"bindIpV6",fieldProps:{checkedChildren:"IpV6",unCheckedChildren:"IpV6"},disabled:p},"bindIpV6")}})]}),children:(0,e.jsx)(g.Z,{name:["useHostNetwork","bindIpV6","publishAllPorts"],children:function(d){var p=d.useHostNetwork,N=d.bindIpV6,P=d.publishAllPorts;if(!p&&!P)return(0,e.jsx)(Fe.u,{name:"ports",actionRef:_,creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BF9\u5916\u90E8\u8BBF\u95EE"},min:0,copyIconProps:!1,children:(0,e.jsxs)(re.UW,{children:[(0,e.jsx)(c.Z,{width:v.showInDrawer?"sm":"md",name:"host",label:"\u5916\u90E8\u8BBF\u95EE\u7AEF\u53E3",tooltip:"\u5BF9\u5916\u8BBF\u95EE\u53EF\u4EE5\u901A\u8FC7\u6DFB\u52A0\u8BBF\u95EE\u7AEF\u53E3\u6216\u662F\u521B\u5EFA\u5B8C\u6210\u540E\u5BF9\u5BB9\u5668\u7ED1\u5B9A\u57DF\u540D",placeholder:"\u7559\u7A7A\u5C06\u4F7F\u7528\u968F\u673A\u7AEF\u53E3\uFF0C\u7ED1\u5B9AIpV6\u5FC5\u586B",required:N,rules:[{required:N}]}),(0,e.jsx)(c.Z,{label:"\u5BB9\u5668\u5185\u7AEF\u53E3",width:v.showInDrawer?"sm":"md",name:"dest",placeholder:"\u6784\u5EFA\u65F6 Expose \u6307\u5B9A\u7684\u7AEF\u53E3",required:!0,rules:[{required:!0}]})]})})}})})}),Cn=En,Me=n(52255);function jn(){var v=(0,u.useRef)(),k=function(E){var b,_,h=!1,x=(b=(_=v.current)===null||_===void 0?void 0:_.getList())!==null&&b!==void 0?b:[];if(x.map(function(d){d.name==E.name&&(h=!0)}),!h){var j;(j=v.current)===null||j===void 0||j.add(E)}},w=function(E){var b,_,h=!1,x=(b=(_=v.current)===null||_===void 0?void 0:_.getList())!==null&&b!==void 0?b:[];x.map(function(j,d){if(j.name==E){var p;(p=v.current)===null||p===void 0||p.remove(d)}})};return(0,e.jsx)(I.Z,{title:"\u5173\u8054\u5BBF\u4E3B\u673A\u7F51\u7EDC\u5185\u4E3B\u673A",tooltip:"\u5BB9\u5668\u5185\u5982\u679C\u9700\u8981\u8BF7\u6C42\u5BBF\u4E3B\u673A\u6240\u5728\u7684\u7F51\u7EDC\u4E2D\u7684\u4E3B\u673A\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6B64\u914D\u7F6E\u5C06Ip\u6CE8\u5165\u5230\u5BB9\u5668\u4E2D",extra:(0,e.jsx)(t.Z,{children:(0,e.jsx)(fe.Z,{name:"enableBindHost",fieldProps:{checkedChildren:"\u7ED1\u5B9A\u5BBF\u4E3B\u673AIp",unCheckedChildren:"\u7ED1\u5B9A\u5BBF\u4E3B\u673AIp",onChange:function(E){E?k({name:"host.dpanel.local",value:"host-gateway"}):w("host.dpanel.local")}}})}),children:(0,e.jsx)(Fe.u,{name:"extraHosts",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u5BBF\u4E3B\u673A\u7F51\u7EDC\u5173\u8054"},actionRef:v,copyIconProps:!1,min:0,children:(0,e.jsxs)(re.UW,{children:[(0,e.jsx)(c.Z,{width:"md",name:"name",label:"Hostname",placeholder:""}),(0,e.jsx)(c.Z,{width:"md",name:"value",label:"ip",placeholder:""})]})})})}var Ge=n(90672),Bn=(0,u.forwardRef)(function(v,k){return(0,u.useImperativeHandle)(k,function(){return{}}),(0,e.jsxs)(I.Z,{title:"\u7F51\u7EDC\u914D\u7F6E",children:[(0,e.jsxs)(re.UW,{children:[(0,e.jsx)(c.Z,{label:"\u914D\u7F6E ipV4 \u5730\u5740",name:["ipV4","address"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u5730\u5740\uFF0C\u4F8B\u5982 192.168.1.5",placeholder:"192.168.1.5"}),(0,e.jsx)(g.Z,{name:["ipV4"],children:function(U){var E=U.ipV4;return(0,e.jsx)(c.Z,{label:"\u914D\u7F6E ipV4 \u5B50\u7F51",name:["ipV4","subnet"],width:"md",required:E&&E.address,tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u6240\u5728\u7684\u5B50\u7F51\uFF0C\u4F8B\u5982 192.168.1.0/24",placeholder:"192.168.1.0/24",rules:[{required:E&&E.address}]})}}),(0,e.jsx)(c.Z,{label:"\u914D\u7F6E ipV4 \u7F51\u5173",name:["ipV4","gateway"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u7684\u7F51\u5173\uFF0C\u4F8B\u5982 192.168.1.1",placeholder:"192.168.1.1"}),(0,e.jsx)(fe.Z,{label:"\u81EA\u5B9A\u4E49ipV6",name:"enableIpV6Address"})]}),(0,e.jsx)(g.Z,{name:["enableIpV6Address"],children:function(U){var E=U.enableIpV6Address;if(E)return(0,e.jsxs)(re.UW,{children:[(0,e.jsx)(c.Z,{label:"\u914D\u7F6E ipV6 \u5730\u5740",name:["ipV6","address"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipV6\u5730\u5740\uFF0C\u4F8B\u5982 2001:db8::5",placeholder:"2001:db8::5"}),(0,e.jsx)(g.Z,{name:["ipV6"],children:function(_){var h=_.ipV6;return(0,e.jsx)(c.Z,{label:"\u914D\u7F6E ipV6 \u5B50\u7F51",name:["ipV6","subnet"],width:"md",required:h&&h.address,tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipv4\u6240\u5728\u7684\u5B50\u7F51\uFF0C\u4F8B\u5982 2001:db8::/48",placeholder:"2001:db8::/48",rules:[{required:h&&h.address}]})}}),(0,e.jsx)(c.Z,{label:"\u914D\u7F6E ipV6 \u7F51\u5173",name:["ipV6","gateway"],width:"md",tooltip:"\u6307\u5B9A\u5BB9\u5668\u7684ipV6\u7684\u7F51\u5173\uFF0C\u4F8B\u5982 2001:db8::1",placeholder:"2001:db8::1"})]})}}),(0,e.jsx)(Ge.Z,{label:"DNS\u914D\u7F6E",name:"dns",placeholder:"\u8BF7\u6307\u5B9Adns\u5730\u5740\uFF0C\u4F8B\u5982\uFF1A8.8.8.8\uFF0C\u4E00\u884C\u6DFB\u4E00\u6761dns\u5730\u5740"})]})}),gn=Bn,Ye=n(31199),Fn=n(86250);function xn(){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(I.Z,{title:"\u9644\u52A0\u6267\u884C\u811A\u672C",headerBordered:!0,subTitle:"",children:(0,e.jsx)(Ge.Z,{label:"\u5BB9\u5668\u521B\u5EFA\u540E\u6267\u884C\u811A\u672C",name:["hook","containerCreate"],placeholder:"\u5BB9\u5668\u5728\u521B\u5EFA\u540E\u6267\u884C\u7684\u811A\u672C\uFF0C\u6B64\u811A\u672C\u5E76\u4E0D\u4F1A\u5F71\u54CD entrypoint \u53CA command\u3002\u4F8B\u5982\uFF1Als -al && touch abc.txt && apt update"})}),(0,e.jsxs)(I.Z,{title:"\u5065\u5EB7\u68C0\u67E5",headerBordered:!0,children:[(0,e.jsxs)(Fn.Z,{gap:20,justify:"start",children:[(0,e.jsx)(Ye.Z,{label:"\u91CD\u590D\u95F4\u9694\u65F6\u95F4\uFF08\u79D2\uFF09",name:["healthcheck","interval"],initialValue:30}),(0,e.jsx)(Ye.Z,{label:"\u8D85\u65F6\u5931\u8D25\u65F6\u95F4\uFF08\u79D2\uFF09",name:["healthcheck","timeout"],initialValue:10}),(0,e.jsx)(Ye.Z,{label:"\u5931\u8D25\u91CD\u590D\u6B21\u6570",name:["healthcheck","retries"],initialValue:3}),(0,e.jsx)(ye.Z,{width:"sm",label:"\u811A\u672C\u6267\u884C\u73AF\u5883",initialValue:"CMD",name:["healthcheck","shellType"],valueEnum:{CMD:"\u5728 Docker \u73AF\u5883\u6267\u884C","CMD-SHELL":"\u5728\u5BB9\u5668\u5185\u6267\u884C"}})]}),(0,e.jsx)(Ge.Z,{label:"\u6267\u884C\u811A\u672C",name:["healthcheck","cmd"],placeholder:"\u914D\u7F6E\u5BB9\u5668\u5065\u5EB7\u68C0\u67E5\u811A\u672C\uFF0C\u4F8B\u5982\uFF1Acurl -f http://localhost:8080/ || exit 1"})]})]})}var Dn=n(74763),tn=n(2487),Pn=[{name:"ALL"},{name:"AUDIT_CONTROL"},{name:"AUDIT_WRITE",default:!0},{name:"BLOCK_SUSPEND"},{name:"CHOWN",default:!0},{name:"DAC_OVERRIDE",default:!0},{name:"DAC_READ_SEARCH"},{name:"FOWNER",default:!0},{name:"FSETID",default:!0},{name:"IPC_LOCK"},{name:"IPC_OWNER"},{name:"KILL",default:!0},{name:"LEASE"},{name:"LINUX_IMMUTABLE"},{name:"MAC_ADMIN"},{name:"MAC_OVERRIDE"},{name:"MKNOD",default:!0},{name:"NET_ADMIN"},{name:"NET_BIND_SERVICE",default:!0},{name:"NET_BROADCAST"},{name:"NET_RAW",default:!0},{name:"SETFCAP",default:!0},{name:"SETGID",default:!0},{name:"SETPCAP",default:!0},{name:"SETUID",default:!0},{name:"SYSLOG"},{name:"SYS_ADMIN"},{name:"SYS_BOOT"},{name:"SYS_CHROOT",default:!0},{name:"SYS_MODULE"},{name:"SYS_NICE"},{name:"SYS_PACCT"},{name:"SYS_PTRACE"},{name:"SYS_RAWIO"},{name:"SYS_RESOURCE"},{name:"SYS_TIME"},{name:"SYS_TTY_CONFIG"}],An=(0,u.forwardRef)(function(v,k){var w=(0,u.useContext)(He.Z),U=w.lang,E=(0,u.useState)(null),b=S()(E,2),_=b[0],h=b[1],x=(0,u.useContext)(r.Z),j=x.createFormRef;return(0,u.useImperativeHandle)(k,function(){return{}}),(0,e.jsx)(I.Z,{children:(0,e.jsx)(tn.Z,{grid:{gutter:10,xs:3,sm:3,md:4,lg:4,xl:4,xxl:6},dataSource:Pn,renderItem:function(p,N){var P;return(0,e.jsx)(tn.Z.Item,{children:(0,e.jsx)(fe.Z,{fieldProps:{onChange:function(C){p.name=="ALL"&&h(C)}},disabled:p.name!="ALL"&&((0,Dn.k)(_)?(P=j.current)===null||P===void 0?void 0:P.getFieldValue(["capAdd","ALL"]):_),initialValue:p.default,name:["capAdd",p.name],tooltip:U("app.create.cap."+p.name.toLocaleLowerCase()),label:p.name})},N)}})})}),In=An,Ne="update",un="copy",ze="new";function bn(){var v,k,w,U=(0,u.useContext)(He.Z),E=U.loading,b=U.notice,_=(0,u.useContext)(r.Z),h=_.createFormRef,x=_.volumeListRef,j=_.domainRef,d=_.createEnvRef,p=_.createLinkRef,N=(0,u.useState)(ze),P=S()(N,2),R=P[0],C=P[1],K=(0,nn.useSearchParams)(),se=S()(K,2),ne=se[0],Q=se[1],ie=(0,nn.useNavigate)(),ve=(0,u.useState)("basic"),pe=S()(ve,2),oe=pe[0],he=pe[1],xe=parseInt((v=ne.get("id"))!==null&&v!==void 0?v:""),De=(k=ne.get("containerId"))!==null&&k!==void 0?k:"",Ve=(w=ne.get("imageId"))!==null&&w!==void 0?w:"";return(0,u.useEffect)(function(){if(De||xe)E.show(),(0,en.iE)({md5:De,id:xe}).then(function(){var s=A()(o()().mark(function le(a){var be,Oe,z,Ze,$e,Ce,ke,Xe,Je;return o()().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:if(z={info:{},layer:[]},!a.data.env.imageName){je.next=11;break}return je.prev=2,je.next=5,(0,_e.YU)({md5:a.data.env.imageName});case 5:Ze=je.sent,z=Ze.data,je.next=11;break;case 9:je.prev=9,je.t0=je.catch(2);case 11:ne.get("op")==un?C(un):C(Ne),a.data.env.network&&a.data.env.network.map(function(X){return!X.alise&&X.name!="bridge"&&(X.alise=[a.data.siteName+".pod.dpanel.local"]),X}),a.data.env.ports&&a.data.env.ports.map(function(X){return X.host=="0"&&(X.host=""),X}),$e=a.data.env.bindIpV6,a.data.containerInfo.Info&&a.data.containerInfo.Info.NetworkSettings.Networks&&Object.keys(a.data.containerInfo.Info.NetworkSettings.Networks).map(function(X){if(a.data.env.network&&(a.data.env.network=a.data.env.network.map(function(Qe){return X==Qe.name&&(Qe.subnet=a.data.containerInfo.Info.NetworkSettings.Networks[X].IPAddress+"/"+a.data.containerInfo.Info.NetworkSettings.Networks[X].IPPrefixLen),Qe})),a.data.containerInfo.Info.NetworkSettings.Networks[X].IPv6Gateway!=""&&($e=!0),X=="bridge"){var we;(we=h.current)===null||we===void 0||we.setFieldValue("useBridgeNetwork",!0)}}),a.data.env.extraHosts&&a.data.env.extraHosts.map(function(X){if(X.value=="host-gateway"){var we;(we=h.current)===null||we===void 0||we.setFieldValue("enableBindHost",!0)}}),Ce=a.data.env.ports,a.data.env.ports&&(Ce=a.data.env.ports.map(function(X){return X.host=(X.hostIp?X.hostIp+":":"")+X.host,X})),(be=h.current)===null||be===void 0||be.setFieldsValue({imageName:a.data.env.imageName,privileged:a.data.env.privileged,bindIpV6:a.data.env.useHostNetwork?!1:$e,useHostNetwork:a.data.env.useHostNetwork,publishAllPorts:a.data.env.useHostNetwork?!1:a.data.env.publishAllPorts,workDir:{value:a.data.env.workDir,useDefault:!a.data.env.workDir,default:z&&z.info.Config&&z.info.Config.WorkingDir},user:{value:a.data.env.user,useDefault:!a.data.env.user,default:z&&z.info.Config&&z.info.Config.User},command:{value:a.data.env.command,useDefault:!a.data.env.command,default:z&&z.info.Config&&z.info.Config.Cmd&&z.info.Config.Cmd.join(" ")},entrypoint:{value:a.data.env.entrypoint,useDefault:!a.data.env.entrypoint,default:z&&z.info.Config&&z.info.Config.Entrypoint&&z.info.Config.Entrypoint.join(" ")},shmsize:(Oe=a.data.env.shmsize)!==null&&Oe!==void 0?Oe:"64M",cpus:a.data.env.cpus,memory:a.data.env.memory,environment:a.data.env.environment,label:a.data.env.label,volumes:a.data.env.volumes,ports:Ce,links:a.data.env.links,network:a.data.env.network,restart:a.data.env.restart,extraHosts:a.data.env.extraHosts,autoRemove:a.data.env.autoRemove,log:a.data.env.log,dns:a.data.env.dns&&a.data.env.dns.join(`
`),ipV4:a.data.env.ipV4,ipV6:a.data.env.ipV6,gpus:a.data.env.gpus,device:a.data.env.device,hook:a.data.env.hook,hostPid:a.data.env.hostPid,capAdd:a.data.env.capAdd&&Object.fromEntries(a.data.env.capAdd.map(function(X){return[X,!0]}))}),a.data.env.ipV6&&((ke=h.current)===null||ke===void 0||ke.setFieldValue("enableIpV6Address",!0)),a.data.env.healthcheck&&a.data.env.healthcheck.cmd&&a.data.env.healthcheck.cmd!=""&&((Xe=h.current)===null||Xe===void 0||Xe.setFieldsValue({healthcheck:a.data.env.healthcheck})),ne.get("op")==Ne&&((Je=h.current)===null||Je===void 0||Je.setFieldsValue({siteTitle:a.data.siteTitle,siteName:a.data.siteName}));case 23:case"end":return je.stop()}},le,null,[[2,9]])}));return function(le){return s.apply(this,arguments)}}()).finally(function(){E.destroy()});else{var Ee,Y;C(ze),(Ee=h.current)===null||Ee===void 0||Ee.resetFields(),(Y=h.current)===null||Y===void 0||Y.setFieldValue("useBridgeNetwork",!0)}},[ne]),(0,e.jsx)(O._z,{children:(0,e.jsx)(I.Z,{direction:"column",gutter:[0,10],children:(0,e.jsxs)(B.A,{submitter:{render:function(Y,s){return(0,e.jsx)(M.S,{children:s})}},formRef:h,onFinish:function(){var Ee=A()(o()().mark(function Y(s){var le,a,be,Oe,z,Ze;return o()().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(Ze={siteTitle:s.siteTitle,siteName:s.siteName,imageName:s.imageName,environment:s.environment,links:s.links,ports:s.ports,volumes:s.volumes,network:(le=s.network)!==null&&le!==void 0?le:[],privileged:(a=s.privileged)!==null&&a!==void 0?a:!1,autoRemove:(be=s.autoRemove)!==null&&be!==void 0?be:!1,restart:s.restart,cpus:s.cpus,memory:s.memory,shmsize:(Oe=s.shmsize)!==null&&Oe!==void 0?Oe:0,workDir:s.workDir&&!s.workDir.useDefault?s.workDir.value:"",user:s.user&&!s.user.useDefault?s.user.value:"",command:s.command&&!s.command.useDefault?s.command.value:"",entrypoint:s.entrypoint&&!s.entrypoint.useDefault?s.entrypoint.value:"",useHostNetwork:s.useHostNetwork,bindIpV6:s.bindIpV6,log:s.log,dns:s.dns&&s.dns!=""?s.dns.split(`
`):[],label:s.label,publishAllPorts:s.publishAllPorts,extraHosts:s.extraHosts,ipV4:s.ipV4,ipV6:s.ipV6,device:s.device,gpus:s.gpus,hook:s.hook,hostPid:s.hostPid,capAdd:s.capAdd?Object.keys(s.capAdd).map(function(ke){return ke}):[],useBridgeNetwork:(z=s.useBridgeNetwork)!==null&&z!==void 0?z:!0},!(!s.useBridgeNetwork&&!s.useHostNetwork&&(!s.network||s.network.length==0))){Ce.next=4;break}return b.error("\u4E0D\u52A0\u5165 Bridge \u7F51\u7EDC\u65F6\uFF0C\u5FC5\u987B\u6307\u5B9A\u4E00\u4E2A\u81EA\u5B9A\u4E49\u7F51\u7EDC"),Ce.abrupt("return",!1);case 4:return s.useBridgeNetwork&&Ze.network.push({name:"bridge",alise:[],ipV4:""}),s.healthcheck&&s.healthcheck.cmd&&s.healthcheck.cmd!=""&&(Ze.healthcheck=s.healthcheck),De&&R==Ne&&(Ze.containerId=De),Ce.next=9,(0,en.$G)(Ze);case 9:return ie("/app/list"),Ce.abrupt("return",!0);case 11:case"end":return Ce.stop()}},Y)}));return function(Y){return Ee.apply(this,arguments)}}(),children:[(0,e.jsxs)(I.Z,{title:"\u57FA\u7840\u4FE1\u606F",headerBordered:!0,children:[(0,e.jsx)(c.Z,{name:"siteTitle",label:"\u5BB9\u5668\u63CF\u8FF0",fieldProps:{onChange:function(Y){var s="";if(Y.target.value&&R!=Ne){var le,a=(0,hn.N9)(Y.target.value.trim(),{toneType:"none",type:"array"});s=a.join(""),(le=h.current)===null||le===void 0||le.setFieldValue("siteName",s)}}},placeholder:"\u8BF7\u8F93\u5165\u5BB9\u5668\u63CF\u8FF0\u540D\u79F0"}),(0,e.jsx)(c.Z,{name:"siteName",label:"\u5BB9\u5668\u6807\u8BC6",tooltip:"\u5BB9\u5668\u552F\u4E00\u6807\u8BC6\uFF0C\u7528\u4E8E\u6807\u8BC6\u5BB9\u5668\u548C\u5185\u90E8\u8BBF\u95EE",required:!0,disabled:R==Ne,rules:[{required:!0}],placeholder:"\u8BF7\u8F93\u5165\u5BB9\u5668\u6807\u8BC6\u540D\u79F0"}),(0,e.jsx)(ge,{redeploy:R!=ze,fromImageId:Ve})]}),(0,e.jsx)($.Z,{offsetTop:50,children:(0,e.jsx)(I.Z,{style:{marginBottom:-20},children:(0,e.jsx)(l.Z,{activeKey:oe,onChange:function(Y){he(Y),window.scrollTo(0,450)},items:[{label:"\u57FA\u672C\u914D\u7F6E",key:"basic"},{label:"\u5173\u8054\u914D\u7F6E",key:"link"},{label:"\u8FD0\u884C\u914D\u7F6E",key:"run-command"},{label:"\u8D44\u6E90\u914D\u7F6E",key:"resource"},{label:"Hook",key:"hook"},{label:"\u80FD\u529B\u914D\u7F6E",key:"cap"},{label:"\u5176\u5B83",key:"other"}]})})}),(0,e.jsxs)(Me.Z,{show:oe=="basic",children:[(0,e.jsx)(Cn,{ref:j,showBindHost:!0,showBindIpV6:!0}),(0,e.jsx)(We.Z,{showAddButton:!0,showImportButton:!0,showCodeMode:!0,label:"\u73AF\u5883\u53D8\u91CF",ref:d}),(0,e.jsx)(an,{showDefault:!0,ref:x}),(0,e.jsx)(g.Z,{name:["siteName","useHostNetwork"],children:function(Y){var s=Y.siteName,le=Y.useHostNetwork;if(!le)return(0,e.jsx)(gn,{})}})]}),(0,e.jsx)(Me.Z,{show:oe=="link",children:(0,e.jsx)(g.Z,{name:["siteName","useHostNetwork"],children:function(Y){var s=Y.siteName,le=Y.useHostNetwork;return le?(0,e.jsx)(G.Z,{showIcon:!0,description:"\u7ED1\u5B9A\u5230\u5BBF\u4E3B\u673A\u7F51\u7EDC\u65F6\uFF0C\u65E0\u6CD5\u901A\u8FC7 Docker \u5173\u8054\u5176\u5B83\u5BB9\u5668\u3002\u8BF7\u4F7F\u7528\u5BBF\u4E3B\u673A\u5185\u7F51IP\u6216\u662F127.0.0.1\u4E92\u8054\u5BB9\u5668\u66B4\u9732\u7AEF\u53E3\u3002"}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Te,{onAddEnv:function(be,Oe){var z;(z=d.current)===null||z===void 0||z.addEnvItem(be,Oe)},ref:p}),(0,e.jsx)(pn,{showUseBridgeNetwork:!0,siteName:s}),(0,e.jsx)(jn,{})]})}})}),(0,e.jsx)(Me.Z,{show:oe=="run-command",children:(0,e.jsx)(vn,{})}),(0,e.jsx)(Me.Z,{show:oe=="resource",children:(0,e.jsx)(sn,{})}),(0,e.jsx)(Me.Z,{show:oe=="hook",children:(0,e.jsx)(xn,{})}),(0,e.jsx)(Me.Z,{show:oe=="other",children:(0,e.jsx)(on,{})}),(0,e.jsx)(Me.Z,{show:oe=="cap",children:(0,e.jsx)(In,{})})]},"form")})})}},2831:function(Be,q,n){n.d(q,{Ll:function(){return I},aF:function(){return S},d6:function(){return M}});var te=n(15009),o=n.n(te),ae=n(99289),A=n.n(ae),V=n(82346);function S(){return O.apply(this,arguments)}function O(){return O=A()(o()().mark(function g(){return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,V.request)("/api/common/home/info",{method:"POST"});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},g)})),O.apply(this,arguments)}function I(){return B.apply(this,arguments)}function B(){return B=A()(o()().mark(function g(){return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,V.request)("/api/common/home/usage",{method:"POST"});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},g)})),B.apply(this,arguments)}function M(){return c.apply(this,arguments)}function c(){return c=A()(o()().mark(function g(){return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,V.request)("/api/common/home/upgrade-script",{method:"POST"});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},g)})),c.apply(this,arguments)}},14946:function(Be,q,n){n.d(q,{CI:function(){return M},HY:function(){return J},IS:function(){return S},XY:function(){return l},_3:function(){return y},_x:function(){return g},jR:function(){return I},t9:function(){return u}});var te=n(15009),o=n.n(te),ae=n(99289),A=n.n(ae),V=n(82346);function S(f){return O.apply(this,arguments)}function O(){return O=A()(o()().mark(function f(m){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,V.request)("/api/app/network/get-detail",{method:"POST",data:m}));case 1:case"end":return i.stop()}},f)})),O.apply(this,arguments)}function I(f){return B.apply(this,arguments)}function B(){return B=A()(o()().mark(function f(m){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,V.request)("/api/app/network/get-list",{method:"POST",data:m}));case 1:case"end":return i.stop()}},f)})),B.apply(this,arguments)}function M(){return c.apply(this,arguments)}function c(){return c=A()(o()().mark(function f(){return o()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,V.request)("/api/app/network/prune",{method:"POST"});case 2:return L.abrupt("return",L.sent);case 3:case"end":return L.stop()}},f)})),c.apply(this,arguments)}function g(f){return $.apply(this,arguments)}function $(){return $=A()(o()().mark(function f(m){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,V.request)("/api/app/network/delete",{method:"POST",data:m});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},f)})),$.apply(this,arguments)}function l(f){return G.apply(this,arguments)}function G(){return G=A()(o()().mark(function f(m){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,V.request)("/api/app/network/create",{method:"POST",data:m});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},f)})),G.apply(this,arguments)}function u(f){return r.apply(this,arguments)}function r(){return r=A()(o()().mark(function f(m){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,V.request)("/api/app/network/disconnect",{method:"POST",data:m});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},f)})),r.apply(this,arguments)}function J(f){return T.apply(this,arguments)}function T(){return T=A()(o()().mark(function f(m){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,V.request)("/api/app/network/connect",{method:"POST",data:m});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},f)})),T.apply(this,arguments)}function y(f){return t.apply(this,arguments)}function t(){return t=A()(o()().mark(function f(m){return o()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,V.request)("/api/app/network/get-container-list",{method:"POST",data:m}));case 1:case"end":return i.stop()}},f)})),t.apply(this,arguments)}}}]);
