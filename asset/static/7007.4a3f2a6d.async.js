"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7007],{8287:function(Le,je,n){var Ee=n(5574),v=n.n(Ee),xe=n(15009),r=n.n(xe),ne=n(99289),O=n.n(ne),o=n(13822),Y=n(83622),W=n(85265),K=n(42075),b=n(83062),P=n(67294),X=n(81146),C=n(1883),j=n(58638),ce=n(62597),i=n(3616),m=n(82346),f=n(36146),re=n(85893),_=(0,P.forwardRef)(function(Ie,Ue){(0,P.useImperativeHandle)(Ue,function(){return{show:function(te){return O()(r()().mark(function T(){var le;return r()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(0,o.jV)({md5:te});case 2:le=q.sent,le.data&&Fe(le.data.info),ge(!0);case 5:case"end":return q.stop()}},T)}))()}}});var s=(0,P.useState)(!1),e=v()(s,2),he=e[0],ge=e[1],Te=(0,P.useState)(),E=v()(Te,2),J=E[0],Fe=E[1],L=(0,P.useRef)(),pe=new f.Uo("components.appDetail");return(0,re.jsxs)(re.Fragment,{children:[Ie.showTriggerButton&&(0,re.jsx)(Y.ZP,{icon:(0,re.jsx)(C.Z,{}),onClick:O()(r()().mark(function me(){return r()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:Fe(Ie.containerInfo),ge(!0);case 2:case"end":return T.stop()}},me)})),children:f.FD.format("listManageLog")},"log"),(0,re.jsx)(W.Z,{title:pe.format("titleLog"),open:he,forceRender:!0,onClose:function(){ge(!1)},afterOpenChange:function(te){if(te)setTimeout(function(){var le,oe;(le=L.current)===null||le===void 0||le.start(),(oe=L.current)===null||oe===void 0||oe.fit()},1e3);else{var T;(T=L.current)===null||T===void 0||T.close()}},width:i.FK,extra:(0,re.jsx)(K.Z,{children:(0,re.jsx)(m.Link,{to:"/container/log/".concat(J==null?void 0:J.Name),target:"_blank",onClick:function(){var te;(te=L.current)===null||te===void 0||te.close(),ge(!1)},children:(0,re.jsx)(b.Z,{title:f.FD.format("listManageOpenNewWindow"),children:(0,re.jsx)(j.Z,{})})})}),children:J&&he&&(0,re.jsx)(X.Z,{ref:L,showInDrawer:!0,id:"container:log:".concat(J==null?void 0:J.Id),request:function(){var me=O()(r()().mark(function te(T){var le;return r()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(0,ce.Tb)({id:(le=J.Id)!==null&&le!==void 0?le:"",lineTotal:T.lineTotal,download:T.download,showTime:T.showTime});case 2:case"end":return q.stop()}},te)}));return function(te){return me.apply(this,arguments)}}(),download:function(){var me=O()(r()().mark(function te(T){var le,oe,q,Me;return r()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,ce.XH)({id:(le=J.Id)!==null&&le!==void 0?le:"",lineTotal:T.lineTotal,showTime:T.showTime});case 2:return q=k.sent,k.next=5,(0,o.jV)({md5:(oe=J.Id)!==null&&oe!==void 0?oe:""});case 5:return Me=k.sent,k.abrupt("return",{data:new Blob([q],{type:"text/plain"}),name:Me.data.info.Name.replaceAll("/","")+"_"+new Date().toLocaleDateString()+".log"});case 7:case"end":return k.stop()}},te)}));return function(te){return me.apply(this,arguments)}}()})})]})});je.Z=_},67007:function(Le,je,n){n.d(je,{Z:function(){return et}});var Ee=n(5574),v=n.n(Ee),xe=n(15009),r=n.n(xe),ne=n(99289),O=n.n(ne),o=n(67294),Y=n(45605),W=n(38345),K=n(97269),b=n(26412),P=n(42075),X=n(96074),C=n(25593),j=n(2487),ce=n(76428),i=n(44771),m=n(13822),f=n(24963),re=n(37413),_=n(5251),Ie=n(82346),Ue=n(87662),s=n(36146),e=n(85893);function he(t){var U,x,c,h,g,a,d,y,A,se,R,$=new s.Uo("components.appDetail"),de=(0,o.useState)(""),w=v()(de,2),De=w[0],B=w[1],u=(0,Ie.useAccess)(),Q=(0,o.useContext)(f.Z),S=Q.message,H=(0,o.useRef)(),ae=[],M=[],l=[],Z=(0,o.useState)(""),D=v()(Z,2),p=D[0],Re=D[1];return(0,o.useEffect)(function(){t.data&&((0,Ue.K3)().then(function(I){var F;Re((F=I.data.serverUrl)!==null&&F!==void 0?F:"")}),B(t.data.info.Name))},[t.data]),(0,o.useEffect)(function(){var I,F,ue;(I=H.current)===null||I===void 0||I.setFieldValue("restart",{name:(F=t.data.info.HostConfig)===null||F===void 0?void 0:F.RestartPolicy.Name,maxAccept:(ue=t.data.info.HostConfig)===null||ue===void 0?void 0:ue.RestartPolicy.MaximumRetryCount})},[H.current,t.data]),t.data&&t.data.domain&&t.data.domain.map(function(I){l.push(I.setting.enableSSL?"https://"+I.serverName:"http://"+I.serverName)}),t.data.info.NetworkSettings.Ports&&Object.entries(t.data.info.NetworkSettings.Ports).forEach(function(I){var F=v()(I,2),ue=F[0],ye=F[1];if(ye){var Ze=ue.split("/"),He=v()(Ze,2),Be=He[0],Ae=He[1];ye.forEach(function(en){en.HostPort?ae.push({PrivatePort:Be,Type:Ae,IP:en.HostIp,PublicPort:en.HostPort}):M.push({PrivatePort:Be,Type:Ae,IP:"",PublicPort:""})})}}),(0,e.jsxs)(e.Fragment,{children:[t.data&&t.data.info.State.Running&&(0,e.jsx)(re.Z,{publicPort:ae,privatePort:M,domain:l,serverIp:p,showInDetail:!0,ghost:t.ghost,layout:"inline"}),(0,e.jsx)(W.Z,{title:(0,e.jsx)(Y.Z,{}),subTitle:$.format("titleBasic"),ghost:t.ghost,children:(0,e.jsxs)(b.Z,{column:1,bordered:!0,children:[(0,e.jsx)(b.Z.Item,{label:"Hostname",children:(0,e.jsx)(P.Z,{split:(0,e.jsx)(X.Z,{type:"vertical"}),children:(0,e.jsx)(ce.Z,{title:(U=t.data.info)===null||U===void 0?void 0:U.Config.Hostname})})}),(0,e.jsx)(b.Z.Item,{label:s.FD.format("listName"),children:(0,e.jsxs)(P.Z,{split:(0,e.jsx)(X.Z,{type:"vertical"}),children:[(0,e.jsx)(ce.Z,{title:(x=t.data.info)===null||x===void 0?void 0:x.Id.substring(0,12)}),(0,e.jsx)(C.Z.Text,{copyable:!0,editable:{tooltip:s.FD.format("listManageEdit"),onChange:function(){var I=O()(r()().mark(function ue(ye){var Ze;return r()().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:if((Ze=t.data.info)!==null&&Ze!==void 0&&Ze.Id){Be.next=2;break}return Be.abrupt("return");case 2:return Be.next=4,(0,m.eE)({md5:t.data.info.Id,name:ye});case 4:B(ye),S.success(s.FD.format("finish"));case 6:case"end":return Be.stop()}},ue)}));function F(ue){return I.apply(this,arguments)}return F}()},children:(0,_.fi)(De,"/")})]})}),(0,e.jsx)(b.Z.Item,{label:s.FD.format("listNetwork"),children:((c=t.data.info)===null||c===void 0?void 0:c.State.Running)&&(0,e.jsxs)(b.Z,{column:1,bordered:!0,children:[t.data.info.NetworkSettings.Networks&&Object.keys(t.data.info.NetworkSettings.Networks).map(function(I,F){var ue,ye,Ze;return(0,e.jsx)(b.Z.Item,{label:I,children:I=="host"?s.FD.format("listNetworkUseHost"):(0,e.jsxs)(P.Z,{direction:"vertical",children:[(0,e.jsx)(ce.Z,{title:(ue=t.data.info)===null||ue===void 0?void 0:ue.NetworkSettings.Networks[I].IPAddress}),(ye=t.data.info)===null||ye===void 0?void 0:ye.NetworkSettings.Networks[I].Gateway,(Ze=t.data.info)===null||Ze===void 0?void 0:Ze.NetworkSettings.Networks[I].MacAddress]})},F)}),((h=t.data.info.HostConfig)===null||h===void 0?void 0:h.ExtraHosts)&&(0,e.jsx)(b.Z.Item,{label:s.FD.format("listNetworkUseHost"),children:(0,e.jsx)(P.Z,{direction:"vertical",children:t.data.info.HostConfig.ExtraHosts.map(function(I,F){if(I.indexOf(":")>-1){var ue=I.split(":");return"".concat(ue[0]," - ").concat(ue.slice(1).join(":"))}})})},"host")]})}),(0,e.jsx)(b.Z.Item,{label:s.FD.format("listRunTime"),children:$.format("runTimeValue",{create:new Date((g=(a=t.data.info)===null||a===void 0?void 0:a.Created)!==null&&g!==void 0?g:"").toLocaleString(),upgrade:new Date((d=(y=t.data.info)===null||y===void 0?void 0:y.State.StartedAt)!==null&&d!==void 0?d:"").toLocaleString()})}),u.canSeeContainerListManage&&(0,e.jsx)(b.Z.Item,{label:s.FD.format("listRestartPolicy"),children:(0,e.jsx)(K.A,{name:"container-restart",submitter:!1,onValuesChange:function(){var I=O()(r()().mark(function F(ue,ye){var Ze,He;return r()().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:if((Ze=t.data.info)!==null&&Ze!==void 0&&Ze.Id){Ae.next=2;break}return Ae.abrupt("return");case 2:return Ae.next=4,(0,m.eE)({md5:t.data.info.Id,restart:ye.restart});case 4:return He=Ae.sent,S.success(s.FD.format("finish")),Ae.abrupt("return");case 7:case"end":return Ae.stop()}},F)}));return function(F,ue){return I.apply(this,arguments)}}(),layout:"inline",formRef:H,children:(0,e.jsx)(i.Z,{ghost:!0,defaultValue:(A=t.data.info)===null||A===void 0||(A=A.HostConfig)===null||A===void 0?void 0:A.RestartPolicy.Name})})}),(0,e.jsx)(b.Z.Item,{label:s.FD.format("listEnv"),children:(0,e.jsx)(j.Z,{dataSource:(se=(R=t.data.info)===null||R===void 0?void 0:R.Config.Env)!==null&&se!==void 0?se:[],renderItem:function(F){var ue=F.split("=");return(0,e.jsxs)(j.Z.Item,{children:[(0,e.jsx)(C.Z.Text,{code:!0,children:ue[0]})," = ",(0,e.jsx)(C.Z.Text,{copyable:!0,children:ue.slice(1).join("=")})]})}})})]})})]})}var ge=n(60433),Te=n(85265),E=n(86250),J=n(31574);function Fe(t){var U,x=new s.Uo("components.appDetail");return t.data&&t.data.Mounts&&t.data.Mounts.length>0&&(0,e.jsx)(W.Z,{ghost:t.ghost,title:(0,e.jsx)(J.Z,{}),subTitle:x.format("titleVolume"),children:(0,e.jsx)(b.Z,{column:1,bordered:!0,children:(U=t.data)===null||U===void 0?void 0:U.Mounts.map(function(c,h){return(0,e.jsx)(b.Z.Item,{styles:{label:{width:"50%",wordBreak:"break-word"},content:{width:"50%",wordBreak:"break-word"}},label:c.Type=="volume"?c.Name:c.Source,children:c.Destination},h)})})})}var L=n(43425),pe=n(74842),me=n(33160),te=n(87784),T=n(30159),le=n(89035),oe=n(95591),q=n(83622),Me=n(94359),G=n(80821),k=n(99922),z=n(96486),ke=n.n(z),Ce=n(29463),fe=n(8287),_e=n(19632),V=n.n(_e),$e=n(3616),ee=n(12122),ve=n(60940),N=n(27619);function be(t){return Pe.apply(this,arguments)}function Pe(){return Pe=O()(r()().mark(function t(U){return r()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,Ie.request)("/api/app/container/get-stat-info",{method:"POST",data:U}));case 1:case"end":return c.stop()}},t)})),Pe.apply(this,arguments)}function Oe(t){return ie.apply(this,arguments)}function ie(){return ie=O()(r()().mark(function t(U){return r()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,Ie.request)("/api/app/container/get-process-info",{method:"POST",data:U}));case 1:case"end":return c.stop()}},t)})),ie.apply(this,arguments)}var Se={total:0,memory:{usage:[{name:"use",data:[]},{name:"all",show:!1,data:[]}],source:{usage:0,limit:0}},cpu:{usage:[{name:"use",data:[]}],source:{usage:0,limit:0}},network:{usage:[{name:"rx",data:[]},{name:"tx",data:[]}],source:{usageIn:0,usageOut:0}},io:{usage:[{name:"read",data:[]},{name:"write",data:[]}],source:{usageRead:0,usageWrite:0}}},we=function(U,x){var c,h,g;switch(x.type){case"clear":return Se;case"update":var a=new Date().toLocaleTimeString(),d=JSON.parse(JSON.stringify(Se));return(c=x.payload)!==null&&c!==void 0&&c.memory&&(d.memory.usage=[{name:"use",data:[].concat(V()(U.memory.usage[0].data.slice(-20)),[{date:a,value:Math.round(x.payload.memory.in)}])},{name:"all",show:!1,data:[].concat(V()(U.memory.usage[1].data.slice(-20)),[{date:a,value:Math.round(x.payload.memory.out)}])}],d.memory.source={usage:x.payload.memory.in,limit:x.payload.memory.out},d.cpu.usage=[{name:"use",data:[].concat(V()(U.cpu.usage[0].data.slice(-20)),[{date:a,value:x.payload.cpu.toFixed(2)}])}],d.cpu.source={usage:x.payload.cpu,limit:100}),(h=x.payload)!==null&&h!==void 0&&h.networkIO&&(d.network.source={usageIn:parseFloat(x.payload.networkIO.in.toFixed(2)),usageOut:parseFloat(x.payload.networkIO.out.toFixed(2))},d.network.usage=[{name:"rx",data:[].concat(V()(U.network.usage[0].data.slice(-20)),[{date:a,value:x.payload.networkIO.out.toFixed(2)}])},{name:"tx",data:[].concat(V()(U.network.usage[1].data.slice(-20)),[{date:a,value:x.payload.networkIO.in.toFixed(2)}])}]),(g=x.payload)!==null&&g!==void 0&&g.blockIO&&(d.io.source={usageRead:parseFloat(x.payload.blockIO.out.toFixed(2)),usageWrite:parseFloat(x.payload.blockIO.in.toFixed(2))},d.io.usage=[{name:"read",data:[].concat(V()(U.io.usage[0].data.slice(-20)),[{date:a,value:x.payload.blockIO.out.toFixed(2)}])},{name:"write",data:[].concat(V()(U.io.usage[1].data.slice(-20)),[{date:a,value:x.payload.blockIO.in.toFixed(2)}])}]),d}},Ne=(0,o.forwardRef)(function(t,U){var x=(0,o.useState)(!1),c=v()(x,2),h=c[0],g=c[1],a=(0,o.useReducer)(we,Se),d=v()(a,2),y=d[0],A=d[1],se=(0,o.useState)(),R=v()(se,2),$=R[0],de=R[1],w=(0,o.useContext)(f.Z),De=w.loading,B=(0,Ie.useModel)("subscriber"),u=new s.Uo("components.appDetail");(0,o.useImperativeHandle)(U,function(){return{}});function Q(H){return S.apply(this,arguments)}function S(){return S=O()(r()().mark(function H(ae){var M,l;return r()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return De.show(),be({id:ae}),D.next=4,Oe({id:ae});case 4:M=D.sent,l={columns:[],data:[]},M.data.list.Titles.map(function(p){l.columns.push({title:p,label:p,dataIndex:p})}),M.data.list.Processes.map(function(p,Re){l.data.push({UID:p[0],PID:p[1],PPID:p[2],C:p[3],STIME:p[4],TTY:p[5],TIME:p[6],CMD:p[7]})}),de(l),De.destroy();case 10:case"end":return D.stop()}},H)})),S.apply(this,arguments)}return(0,o.useEffect)(function(){return function(){B.progress.close("container:stat:"+t.containerInfo.Id),A({type:"clear",payload:{}})}},[t.containerInfo]),(0,e.jsxs)(e.Fragment,{children:[t.showTriggerButton&&(0,e.jsx)(q.ZP,{onClick:O()(r()().mark(function H(){return r()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:g(!0);case 1:case"end":return M.stop()}},H)})),icon:(0,e.jsx)(ee.Z,{}),children:s.FD.format("listManageStat")},"log"),(0,e.jsxs)(Te.Z,{title:u.format("titleStat"),open:h,onClose:function(){g(!1)},afterOpenChange:function(ae){ae?setTimeout(function(){var M;!((M=t.containerInfo)===null||M===void 0)&&M.Name&&Q(t.containerInfo.Id),B.addDataHandler("container:stat:".concat(t.containerInfo.Id),function(l){A({type:"update",payload:l.data})})},500):(B.progress.close("container:stat:"+t.containerInfo.Id),A({type:"clear"}))},width:$e.R_,children:[(0,e.jsxs)(W.Z,{ghost:!0,direction:"row",wrap:!0,gutter:[20,20],children:[y.memory&&y.memory.source&&(0,e.jsx)(W.Z,{colSpan:12,title:(0,e.jsx)(ee.Z,{}),subTitle:"Memory usage: ".concat((0,_.FI)(y.memory.source.usage)," / ").concat((0,_.FI)(y.memory.source.limit)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(N.Z,{name:"container-memory",data:y.memory.usage,yLabelFormatter:function(ae){return(0,_.FI)(parseFloat(ae))},yValueFormatter:function(ae){return(0,_.FI)(parseFloat(ae))},yDomainMaxCallback:function(ae){return ae.min*2}})}),(0,e.jsx)(W.Z,{colSpan:12,title:(0,e.jsx)(ee.Z,{}),subTitle:"Cpu usage: ".concat(y.cpu.source.usage.toFixed(2),"%"),headerBordered:!0,bordered:!0,children:(0,e.jsx)(N.Z,{name:"container-cpu",data:y.cpu.usage,yDomainMaxCallback:function(ae){return ae.min*100},yLabelFormatter:function(ae){return"".concat(parseFloat(ae).toFixed(2),"%")}})}),y.io&&y.io.source&&(0,e.jsx)(W.Z,{colSpan:12,title:(0,e.jsx)(ee.Z,{}),subTitle:"I/O: ".concat((0,_.FI)(y.io.source.usageRead)," / ").concat((0,_.FI)(y.io.source.usageWrite)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(N.Z,{name:"container-disk",data:y.io.usage,yDomainMaxCallback:function(ae){return ae.max*2},yLabelFormatter:function(ae){return(0,_.FI)(parseFloat(ae))}})}),y.network&&y.network.source&&(0,e.jsx)(W.Z,{colSpan:12,title:(0,e.jsx)(ee.Z,{}),subTitle:"Network: ".concat((0,_.FI)(y.network.source.usageIn)," / ").concat((0,_.FI)(y.network.source.usageOut)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(N.Z,{name:"container-network",data:y.network.usage,yDomainMaxCallback:function(ae){return ae.max*2},yLabelFormatter:function(ae){return(0,_.FI)(parseFloat(ae))}})})]}),(0,e.jsx)(W.Z,{title:(0,e.jsx)(ge.Z,{}),subTitle:"Progress",children:(0,e.jsx)(ve.Z,{scroll:{x:"max-content"},rowKey:"PID",columns:$==null?void 0:$.columns,dataSource:$==null?void 0:$.data,pagination:{pageSize:10}})})]})]})}),Ve=Ne,sn=(0,o.forwardRef)(function(t,U){(0,o.useImperativeHandle)(U,function(){return{showConsole:h}});var x=new s.Uo("components.appDetail"),c=(0,o.useRef)();function h(g){var a;(a=c.current)===null||a===void 0||a.show({url:"/console/container/".concat(t.data.Id),title:t.data.Name,workDir:g})}return(0,e.jsx)(W.Z,{title:(0,e.jsx)(L.Z,{}),ghost:t.ghost,subTitle:(0,e.jsxs)(P.Z,{children:[x.format("titleOp")," - ",function(g){if(g){var a=g.State.Status,d=g.State.Status;if(g.State.Health&&g.State.Health.Status=="unhealthy"){var y,A;a=g.State.Health.Status,d=(y=(A=ke().last(g.State.Health.Log))===null||A===void 0?void 0:A.Output)!==null&&y!==void 0?y:a}return(0,e.jsx)(Me.Z,{status:"container.".concat(a),tip:d})}}(t.data)]}),children:(0,e.jsxs)(P.Z,{wrap:!0,children:[(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(pe.Z,{}),disabled:t.data&&t.data.State.Running||t.data&&t.data.State.Paused},action:function(){var a,d;return(0,m.IW)({md5:(a=(d=t.data)===null||d===void 0?void 0:d.Id)!==null&&a!==void 0?a:"",operate:"start"})},onSuccess:function(){return t.onFinish&&t.onFinish()},children:s.FD.format("listManageStart")}),(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(me.Z,{})},action:function(){var a,d;return(0,m.IW)({md5:(a=(d=t.data)===null||d===void 0?void 0:d.Id)!==null&&a!==void 0?a:"",operate:"restart"})},onSuccess:function(){return t.onFinish&&t.onFinish()},children:s.FD.format("listManageRestart")}),(0,e.jsx)(G.Z,{action:function(){var a,d;return(0,m.IW)({md5:(a=(d=t.data)===null||d===void 0?void 0:d.Id)!==null&&a!==void 0?a:"",operate:"stop"})},buttonProps:{danger:!0,icon:(0,e.jsx)(te.Z,{}),disabled:t.data&&t.data.State.Dead},onSuccess:function(){return t.onFinish&&t.onFinish()},children:s.FD.format("listManageStop")}),(0,e.jsx)(G.Z,{action:function(){var a,d;return(0,m.IW)({md5:(a=(d=t.data)===null||d===void 0?void 0:d.Id)!==null&&a!==void 0?a:"",operate:"pause"})},onSuccess:function(){return t.onFinish&&t.onFinish()},buttonProps:{icon:(0,e.jsx)(T.Z,{}),disabled:t.data&&t.data&&!t.data.State.Running},children:s.FD.format("listManagePause")}),(0,e.jsx)(G.Z,{action:function(){var a,d;return(0,m.IW)({md5:(a=(d=t.data)===null||d===void 0?void 0:d.Id)!==null&&a!==void 0?a:"",operate:"unpause"})},onSuccess:function(){return t.onFinish&&t.onFinish()},buttonProps:{icon:(0,e.jsx)(pe.Z,{}),disabled:t.data&&!t.data.State.Paused},children:s.FD.format("listManageUnpause")}),(0,e.jsx)(X.Z,{type:"vertical"}),t.data&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(k.Z,{showFileExplorer:!0,ref:c}),(0,e.jsx)(q.ZP,{type:"primary",onClick:function(){t.data&&h(t.data.Config.WorkingDir)},icon:(0,e.jsx)(le.Z,{}),children:s.FD.format("listManageConsole")})]}),t.data&&t.data.State.Running&&(0,e.jsx)(Ce.Z,{showConsole:!0,type:"container",name:(0,_.fi)(t.data.Name,"/"),title:(0,_.fi)(t.data.Name,"/"),trigger:(0,e.jsx)(q.ZP,{icon:(0,e.jsx)(oe.Z,{}),children:s.FD.format("listManageFilePath")})}),t.data&&t.data.State.Running&&(0,e.jsx)(fe.Z,{containerInfo:t.data,showTriggerButton:!0}),t.data&&t.data.State.Running&&(0,e.jsx)(Ve,{containerInfo:t.data,showTriggerButton:!0}),(0,e.jsx)(X.Z,{type:"vertical"}),t.extra&&t.extra.map(function(g,a){return(0,e.jsx)("span",{children:g},a)})]})})}),ln=sn,Ge=n(62597),un=n(58638),nn=n(60219),tn=n(82061),an=n(25035),dn=n(57132),cn=n(86548),We=n(62370),mn=n(5966),fn=n(52688),Ke=n(84567),_n=n(25278),Je=n(83062),vn=n(85418),hn=n(40411),gn=n(24739),rn=n(97462),pn=n(70146);function jn(t){var U=(0,o.useRef)(),x=new s.Uo("components.appDetail");return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(nn.Z,{})},confirmProps:{onOpenChange:function(h,g){var a,d;!((a=U.current)===null||a===void 0)&&a.resetFields&&((d=U.current)===null||d===void 0||d.resetFields())},description:(0,e.jsxs)(P.Z,{style:{width:650,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,e.jsx)(C.Z.Text,{children:(0,e.jsx)("ul",{children:x.prefix("backupVolumeTipOption",4).map(function(c,h){return(0,e.jsxs)("li",{children:[c," ",h==3&&(0,e.jsx)(Ie.Link,{to:"/app/backup",children:s.Ob.format("container.backup")})]},h)})})}),(0,e.jsxs)(K.A,{layout:"horizontal",formRef:U,submitter:!1,children:[(0,e.jsxs)(gn.UW,{children:[(0,e.jsx)(We.Z,{valuePropName:"checked",name:"enableSelectVolume",children:(0,e.jsx)(Ke.Z,{disabled:!t.container.Mounts||t.container.Mounts.length==0,children:x.format("backupVolumeEnableSelectVolume")})}),(0,e.jsx)(We.Z,{valuePropName:"checked",name:"enableImage",children:(0,e.jsx)(Ke.Z,{children:x.format("backupVolumeEnableImage")})}),(0,e.jsx)(rn.Z,{name:["enableImage"],children:function(h){var g=h.enableImage;if(g)return(0,e.jsx)(We.Z,{valuePropName:"checked",name:"enableCommitImage",children:(0,e.jsx)(Ke.Z,{children:x.format("backupVolumeEnableCommitImage")})})}})]}),(0,e.jsx)(rn.Z,{name:["enableSelectVolume"],children:function(h){var g=h.enableSelectVolume;return g&&(0,e.jsx)(P.Z,{wrap:!0,children:t.container.Mounts&&t.container.Mounts.map(function(a,d){return(0,e.jsx)(We.Z,{valuePropName:"checked",name:["volume",a.Destination],children:(0,e.jsx)(Ke.Z,{children:a.Destination})},"volume-".concat(d))})})}})]})]})},action:O()(r()().mark(function c(){var h,g,a,d;return r()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,pn.yB)({id:t.container.Name,enableImage:(h=U.current)===null||h===void 0?void 0:h.getFieldValue("enableImage"),volume:Object.keys((g=(a=U.current)===null||a===void 0?void 0:a.getFieldValue("volume"))!==null&&g!==void 0?g:{}).filter(function(se){return se}),enableCommitImage:(d=U.current)===null||d===void 0?void 0:d.getFieldValue("enableCommitImage")});case 2:case"end":return A.stop()}},c)})),children:x.format("backupVolumeButton")})})}var En=n(99861),Ye=n(73813),xn=n(50888),Pn=n(16596),ze=n(1699),Xe=n(29453),Dn=n(71965),on=n(77446),On=n(86615),In=n(40056),Cn=n(89240);function Mn(t){var U=(0,Ie.useAccess)(),x=(0,o.useState)(),c=v()(x,2),h=c[0],g=c[1],a=(0,o.useRef)(),d=new s.Uo("components.appDetail");return(0,o.useEffect)(function(){U.canSeeEnableCe||(0,on.V)({siteName:(0,Cn.HJ)(t.detail.Name)}).then(function(y){g(y.data.list)})},[t.detail]),(0,e.jsx)(ze.u,{access:["canSeeEnableCe"],showProTips:!0,children:function(A){var se=A.canSeeEnableCe;return(0,e.jsx)(G.Z,{action:function(){var $;return(0,on.v)({id:($=a.current)===null||$===void 0?void 0:$.getFieldValue("id"),enableForce:!0})},buttonProps:{icon:(0,e.jsx)(Dn.Z,{}),disabled:se},confirmProps:{onOpenChange:function($,de){var w;!((w=a.current)===null||w===void 0)&&w.resetFields&&a.current.resetFields()},description:(0,e.jsx)(K.A,{formRef:a,submitter:!1,children:(0,e.jsxs)(P.Z,{direction:"vertical",style:{width:500},size:[0,15],children:[(0,e.jsx)(C.Z.Text,{children:d.format("rollbackTip")}),h&&h.length>0?(0,e.jsx)(On.Z.Group,{fieldProps:{style:{display:"flex",flexDirection:"column",gap:8}},name:"id",label:"",options:h&&h.map(function(R){return{label:"id: ".concat(R.id," ").concat(s.FD.format("listDeletedAt"),": ").concat((0,_.NF)(R.deletedAt)),value:R.id}})}):(0,e.jsx)(In.Z,{message:d.format("rollbackEmptyTip"),style:{marginBottom:10}})]})})},onSuccess:function(){var $;($=a.current)===null||$===void 0||$.resetFields(),t.onFinish&&t.onFinish()},children:s.FD.format("listManageRollback")})}})}var Rn=n(184),qe=n(14946),bn=n(9773);function yn(t){return(0,e.jsxs)(P.Z,{children:[t.title,(0,e.jsx)(Je.Z,{title:t.help,children:(0,e.jsx)(an.Z,{})})]})}var Zn=n(55943),Tn=n(16970),Sn=n(20743),Ln=n(78451),Un=(0,o.forwardRef)(function(t,U){var x;(0,o.useImperativeHandle)(U,function(){return{}});var c=(0,o.useRef)(),h=(0,o.useRef)(),g=(0,o.useState)(),a=v()(g,2),d=a[0],y=a[1];return(0,o.useEffect)(function(){var A,se;y(t.containerInfo),!((A=c.current)===null||A===void 0)&&A.reloadAndRest&&((se=c.current)===null||se===void 0||se.reloadAndRest())},[t.containerInfo]),(0,e.jsxs)(W.Z,{ghost:t.ghost,children:[(0,e.jsx)(Zn.Z,{ref:h}),(0,e.jsx)(bn.Z,{scroll:{x:"max-content"},rowKey:"key",actionRef:c,pagination:!1,ghost:!0,columns:[{title:s.FD.format("listContainerNetworkName"),key:"name",dataIndex:"networkName"},{title:s.FD.format("listContainerName"),key:"containerName",dataIndex:"containerName",width:100,render:function(se,R,$,de,w){return(0,e.jsx)(Ln.Z,{content:(0,_.fi)(R.containerName,"/")})}},{title:(0,e.jsx)(yn,{title:"hostname",help:s.FD.format("listHostnameTip")}),key:"hostName",render:function(se,R,$){return R.hostName?(0,e.jsx)(P.Z,{direction:"vertical",children:R.hostName.map(function(de,w){if(de)return(0,e.jsx)(C.Z.Text,{copyable:!0,keyboard:!0,children:de},w)})}):(0,e.jsx)(e.Fragment,{})}},{title:"Ip",key:"ip",render:function(se,R,$,de,w){return(0,e.jsxs)(P.Z,{direction:"vertical",children:[(0,e.jsx)("span",{children:R.networkInfo.IPv4Address}),R.networkInfo.IPv6Address&&(0,e.jsx)("span",{children:R.networkInfo.IPv6Address})]})}},{title:s.FD.format("listManage"),key:"option",width:50,fixed:"right",render:function(se,R,$,de,w){return(0,e.jsxs)(P.Z,{children:[R.networkName!=""&&(0,e.jsx)(C.Z.Link,{onClick:function(){var B;(B=h.current)===null||B===void 0||B.show(R.networkName)},children:(0,e.jsx)(Je.Z,{title:s.FD.format("listManageDetail"),children:(0,e.jsx)(L.Z,{})})}),R.key!="bridge"&&R.key!="none"&&R.key!="host"&&R.networkName!=""&&(0,e.jsx)(G.Z,{buttonProps:{type:"link",danger:!0},confirmProps:{description:"notification.confirm.title"},action:function(){return(0,qe.t9)({name:R.networkName,containerName:t.containerInfo.Name})},onSuccess:function(){var B,u;!((B=c.current)===null||B===void 0)&&B.reloadAndRest&&((u=c.current)===null||u===void 0||u.reloadAndRest())},tips:s.FD.format("listManageExit"),children:(0,e.jsx)(tn.Z,{})})]})}}],request:function(){var A=O()(r()().mark(function se(R,$,de){var w,De;return r()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,m.jV)({md5:t.containerInfo.Name});case 2:return w=u.sent,y(w.data.info),u.next=6,(0,qe._3)({name:Object.keys(w.data.info.NetworkSettings.Networks)});case 6:return De=u.sent,u.abrupt("return",{data:De.data.list,success:!0,total:De.data.list.length});case 8:case"end":return u.stop()}},se)}));return function(se,R,$){return A.apply(this,arguments)}}(),toolBarRender:function(){return[(0,e.jsx)(Sn.Z,{showTriggerButton:!0,onSelect:function(){var se=O()(r()().mark(function R($){var de,w;return r()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,(0,qe.HY)({name:$.Name,containerName:t.containerInfo.Name,ipV4:""});case 2:w=B.sent,!((de=c.current)===null||de===void 0)&&de.reloadAndRest&&c.current.reloadAndRest();case 4:case"end":return B.stop()}},R)}));return function(R){return se.apply(this,arguments)}}()},"joinNetwork"),(0,e.jsx)(Tn.Z,{onFinish:function(){var R,$;!((R=c.current)===null||R===void 0)&&R.reloadAndRest&&(($=c.current)===null||$===void 0||$.reloadAndRest())}},"create")]},search:!1,expandable:{expandRowByClick:!1,expandedRowKeys:Object.keys((x=d==null?void 0:d.NetworkSettings.Networks)!==null&&x!==void 0?x:{bridge:[]})}})]})}),An=Un,Fn=n(26522),wn=(0,o.forwardRef)(function(t,U){(0,o.useImperativeHandle)(U,function(){return{}});var x=(0,o.useState)(!1),c=v()(x,2),h=c[0],g=c[1],a=new s.Uo("components.appDetail");return(0,e.jsx)(Rn.a,{submitter:!1,title:a.format("titleNetwork"),onOpenChange:function(y){g(y)},drawerProps:{width:$e.R_},open:h,trigger:(0,e.jsx)(q.ZP,{icon:(0,e.jsx)(Fn.Z,{}),children:s.Ob.format("docker.network")}),children:(0,e.jsx)(An,{ghost:!0,containerInfo:t.containerInfo})})}),Bn=wn,Wn=n(84941),$n=(0,o.forwardRef)(function(t,U){(0,o.useImperativeHandle)(U,function(){return{}});var x=(0,o.useRef)(),c=(0,o.useRef)(),h=(0,o.useRef)(),g=(0,o.useRef)(),a=(0,o.useRef)(),d=(0,o.useContext)(f.Z),y=d.loading,A=(0,o.useRef)(),se=(0,o.useRef)(),R=(0,o.useState)({status:0,error:""}),$=v()(R,2),de=$[0],w=$[1],De=(0,o.useState)(),B=v()(De,2),u=B[0],Q=B[1],S=new s.Uo("components.appDetail");function H(M){return ae.apply(this,arguments)}function ae(){return ae=O()(r()().mark(function M(l){var Z,D,p;return r()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(D=-2,!l.ignore){I.next=6;break}if(!(l.ignore.indexOf("".concat(l.info.Name,"@*"))>-1)){I.next=4;break}return I.abrupt("return",{status:-2,error:""});case 4:if(!(l.ignore.indexOf("".concat(l.info.Name,"@").concat(l.info.Image))>-1)){I.next=6;break}return I.abrupt("return",{status:-2,error:""});case 6:return I.next=8,(0,Ye.ZQ)({tag:(Z=l.info.Config.Image)!==null&&Z!==void 0?Z:"",md5:l.info.Image,cacheTime:3600}).catch(function(F){D=-1});case 8:if(p=I.sent,!(p&&p.data.error&&p.data.error!="")){I.next=11;break}return I.abrupt("return",{status:-1,error:p.data.error});case 11:return p&&(p.data.digestLocal&&p.data.digestLocal.length>0?D=p.data.upgrade?1:2:p.data.error&&p.data.error!=""?D=-1:p.data.digestLocal.length==0?D=-3:D=-2),I.abrupt("return",{status:D,error:""});case 13:case"end":return I.stop()}},M)})),ae.apply(this,arguments)}return(0,o.useEffect)(function(){t.checkContainerUpgrade&&(w({status:0}),H(t.data).then(function(M){w(M)})),Q(t.data)},[t.data]),(0,e.jsxs)(W.Z,{ghost:t.ghost,title:(0,e.jsx)(L.Z,{}),subTitle:S.format("titleManage"),children:[(0,e.jsx)(Wn.Z,{onFinish:function(){var M=O()(r()().mark(function l(Z){return r()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:Z&&t.onRefresh(Z);case 1:case"end":return p.stop()}},l)}));return function(l){return M.apply(this,arguments)}}(),ref:x},"createByImage"),(0,e.jsxs)(P.Z,{wrap:!0,children:[(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(un.Z,{})},confirmProps:{onOpenChange:function(l,Z){var D;!((D=c.current)===null||D===void 0)&&D.resetFields&&c.current.resetFields()},description:(0,e.jsxs)(P.Z,{style:{width:500,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,e.jsx)(C.Z.Text,{children:S.format("exportConfirm")}),(0,e.jsx)(K.A,{layout:"horizontal",formRef:c,submitter:!1,children:(0,e.jsx)(We.Z,{valuePropName:"checked",name:"enableExportToPath",children:(0,e.jsx)(Ke.Z,{children:S.format("exportEnableExportToPath")})},"enableExportToPath")})]})},action:function(){var l,Z,D;return(0,m.LJ)({md5:(l=u==null?void 0:u.info.Id)!==null&&l!==void 0?l:"",enableExportToPath:(Z=(D=c.current)===null||D===void 0?void 0:D.getFieldValue("enableExportToPath"))!==null&&Z!==void 0?Z:!1})},children:S.format("exportButton")}),(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(nn.Z,{})},confirmProps:{onOpenChange:function(l,Z){var D;!((D=g.current)===null||D===void 0)&&D.resetFields&&g.current.resetFields()},title:S.format("commitConfirmTitle"),description:(0,e.jsx)(P.Z,{style:{width:400,marginTop:"10px",paddingRight:"10px"},direction:"vertical",children:(0,e.jsx)(K.A,{formRef:g,submitter:!1,children:(0,e.jsx)(We.Z,{name:"saveImageName",children:(0,e.jsx)(_n.Z,{addonBefore:S.format("commitConfirmSaveImageName")})})})})},action:function(){var l,Z,D;return(0,m.Re)({md5:(l=u==null?void 0:u.info.Id)!==null&&l!==void 0?l:"",name:(Z=(D=g.current)===null||D===void 0?void 0:D.getFieldValue("saveImageName"))!==null&&Z!==void 0?Z:u==null?void 0:u.info.Name})},children:S.format("commitButton")}),u&&(0,e.jsx)(ze.u,{access:"canSeeContainerBackup",children:(0,e.jsx)(jn,{container:u.info})}),(0,e.jsx)(X.Z,{type:"vertical"}),u&&(0,e.jsx)(G.Z,{action:O()(r()().mark(function M(){var l,Z,D,p,Re;return r()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,Ge.Ct)({md5:(l=u==null?void 0:u.info.Id)!==null&&l!==void 0?l:"",deleteImage:(Z=(D=h.current)===null||D===void 0?void 0:D.getFieldValue("deleteImage"))!==null&&Z!==void 0?Z:!1,deleteVolume:(p=(Re=h.current)===null||Re===void 0?void 0:Re.getFieldValue("deleteVolume"))!==null&&p!==void 0?p:!1});case 2:return F.abrupt("return",(0,Xe.rn)({name:u==null?void 0:u.info.Name}));case 3:case"end":return F.stop()}},M)})),buttonProps:{danger:!0,type:"primary",icon:(0,e.jsx)(tn.Z,{})},confirmProps:{description:(0,e.jsxs)(P.Z,{style:{width:200},direction:"vertical",children:[(0,e.jsx)(C.Z.Text,{children:s.FD.format("confirm.title")}),(0,e.jsxs)(K.A,{formRef:h,layout:"inline",submitter:!1,children:[(0,e.jsx)(We.Z,{addonAfter:(0,e.jsx)(Je.Z,{title:S.format("deleteConfirmTip"),children:(0,e.jsx)(an.Z,{})}),name:"deleteVolume",valuePropName:"checked",children:(0,e.jsx)(Ke.Z,{children:S.format("deleteConfirmDeleteVolume")})}),(0,e.jsx)(We.Z,{name:"deleteImage",valuePropName:"checked",children:(0,e.jsx)(Ke.Z,{children:S.format("deleteConfirmDeleteImage")})})]})]})},onSuccess:function(){y.destroy(),t.checkContainerUpgrade&&t.checkContainerUpgrade()},children:S.format("deleteButton")}),(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(dn.Z,{})},confirmProps:{description:(0,e.jsxs)(P.Z,{style:{width:400,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(C.Z.Text,{children:S.format("copyConfirmTip")}),(0,e.jsxs)(K.A,{formRef:a,submitter:!1,layout:"horizontal",children:[(0,e.jsx)("br",{}),(0,e.jsx)(mn.Z,{label:S.format("copyCopyName"),name:"copyName"}),(0,e.jsx)(fn.Z,{label:S.format("copyEnableRandomPort"),name:"enableRandomPort"})]})]})},action:O()(r()().mark(function M(){var l,Z,D,p,Re;return r()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,m.aF)({md5:(l=u==null?void 0:u.info.Id)!==null&&l!==void 0?l:"",copyName:(Z=(D=a.current)===null||D===void 0?void 0:D.getFieldValue("copyName"))!==null&&Z!==void 0?Z:"",enableRandomPort:(p=(Re=a.current)===null||Re===void 0?void 0:Re.getFieldValue("enableRandomPort"))!==null&&p!==void 0?p:!1});case 2:return F.abrupt("return",F.sent);case 3:case"end":return F.stop()}},M)})),onSuccess:function(l){var Z;(Z=a.current)===null||Z===void 0||Z.resetFields()},children:S.format("copyButton")}),(0,e.jsx)(q.ZP,{onClick:function(){var l;(l=x.current)===null||l===void 0||l.show(t.data.info.Id)},type:"primary",icon:(0,e.jsx)(cn.Z,{}),children:S.format("editButton")}),u&&(0,e.jsx)(Mn,{detail:u.info,onFinish:function(){y.destroy(),t.checkContainerUpgrade&&t.checkContainerUpgrade()}}),(0,e.jsx)(X.Z,{type:"vertical"}),u&&(0,e.jsxs)(e.Fragment,{children:[u.info.Config.Image&&(0,e.jsx)(En.Z,{image:[u.info.Config.Image],ref:A}),(0,e.jsx)(vn.Z,{placement:"bottomLeft",menu:{items:[{key:"1",label:(0,e.jsx)(G.Z,{action:O()(r()().mark(function M(){var l,Z,D,p,Re,I;return r()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,(0,Ge.ze)({md5:(l=(Z=u.info)===null||Z===void 0?void 0:Z.Name)!==null&&l!==void 0?l:"",imageId:""});case 2:return w({status:0}),ue.next=5,(0,Ye.ZQ)({tag:(D=(p=u.info)===null||p===void 0?void 0:p.Config.Image)!==null&&D!==void 0?D:"",md5:(Re=(I=u.info)===null||I===void 0?void 0:I.Image)!==null&&Re!==void 0?Re:"",cacheTime:0}).then(function(ye){ye.data.error&&ye.data.error!=""?w({status:-1,error:ye.data.error}):ye.data.digestLocal&&ye.data.digestLocal.length>0?w({status:ye.data.upgrade?1:2}):w({status:-2})}).catch(function(ye){w({status:-1})});case 5:return ue.abrupt("return",ue.sent);case 6:case"end":return ue.stop()}},M)})),buttonProps:{type:"link"},children:S.format("upgradeCheckUpgrade")})},{key:"2",label:(0,e.jsx)(G.Z,{action:O()(r()().mark(function M(){var l,Z,D,p;return r()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,(0,Ge.ze)({md5:(l=(Z=u.info)===null||Z===void 0?void 0:Z.Name)!==null&&l!==void 0?l:"",imageId:(D=(p=u.info)===null||p===void 0?void 0:p.Image)!==null&&D!==void 0?D:""});case 2:return I.abrupt("return",I.sent);case 3:case"end":return I.stop()}},M)})),buttonProps:{type:"link"},children:S.format("upgradeCheckUpgradeIgnoreOnce")})},{key:"3",label:(0,e.jsx)(G.Z,{action:O()(r()().mark(function M(){var l,Z;return r()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,Ge.ze)({md5:(l=(Z=u.info)===null||Z===void 0?void 0:Z.Name)!==null&&l!==void 0?l:"",imageId:"*"});case 2:return p.abrupt("return",p.sent);case 3:case"end":return p.stop()}},M)})),buttonProps:{type:"link"},children:S.format("upgradeCheckUpgradeIgnore")})}]},children:(0,e.jsx)(hn.Z,{title:de.error,count:S.format("checkImageUpgradeOption."+de.status),color:S.format("checkImageUpgradeColorOption."+de.status),children:(0,e.jsx)(G.Z,{buttonProps:{disabled:de.status===0,icon:de.status===0?(0,e.jsx)(xn.Z,{}):(0,e.jsx)(Pn.Z,{})},confirmProps:{description:(0,e.jsxs)(P.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(C.Z.Text,{children:S.format("upgradeConfirm")}),(0,e.jsx)(K.A,{formRef:se,submitter:!1,layout:"inline",children:(0,e.jsx)(We.Z,{name:"enableBak",valuePropName:"checked",children:(0,e.jsx)(Ke.Z,{children:S.format("upgradeConfirmEnableBak")})})})]})},action:O()(r()().mark(function M(){var l,Z,D,p,Re;return r()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(l=A.current)===null||l===void 0?void 0:l.start();case 2:return y.show(),(Z=A.current)===null||Z===void 0||Z.finish(),F.next=6,(0,m.RF)({md5:(D=u.info.Id)!==null&&D!==void 0?D:"",imageTag:"",enableBak:(p=(Re=se.current)===null||Re===void 0?void 0:Re.getFieldValue("enableBak"))!==null&&p!==void 0?p:!1});case 6:return F.abrupt("return",F.sent);case 7:case"end":return F.stop()}},M)})),onSuccess:function(l){y.destroy(),t.checkContainerUpgrade&&t.checkContainerUpgrade()},children:S.format("upgradeButton")})})})]}),(0,e.jsx)(X.Z,{type:"vertical"}),u&&(0,e.jsx)(Bn,{containerInfo:u.info}),(0,e.jsx)(q.ZP,{icon:(0,e.jsx)(me.Z,{}),onClick:function(){var l;t.onRefresh&&t.onRefresh((l=u==null?void 0:u.info.Id)!==null&&l!==void 0?l:"")},children:s.FD.format("listManageRefresh")})]})]})}),Kn=$n,kn=n(65913);function Nn(t){var U=new s.Uo("components.appDetail"),x=(0,o.useState)(),c=v()(x,2),h=c[0],g=c[1];return(0,o.useEffect)(function(){(0,Ye.YU)({md5:t.data.Image}).then(function(a){g(a.data)})},[t.data]),(0,e.jsx)(W.Z,{ghost:t.ghost,title:(0,e.jsx)(ge.Z,{}),subTitle:U.format("titleImage"),children:(0,e.jsxs)(b.Z,{styles:{label:{width:200}},column:1,bordered:!0,children:[(0,e.jsx)(b.Z.Item,{label:"Image Tag",children:(0,e.jsx)(C.Z.Text,{copyable:!0,children:t.data.Config.Image})}),(0,e.jsx)(b.Z.Item,{label:"Image",children:t.data.Image}),(0,e.jsx)(b.Z.Item,{label:"CMD",children:(h==null?void 0:h.info.Config.Cmd)&&(h==null?void 0:h.info.Config.Cmd.join(" "))}),(0,e.jsx)(b.Z.Item,{label:"ENTRYPOINT",children:h==null?void 0:h.info.Config.Entrypoint}),(0,e.jsx)(b.Z.Item,{label:"Labels",children:(0,e.jsx)(b.Z,{column:1,bordered:!0,children:(h==null?void 0:h.info.Config.Labels)&&Object.entries(h==null?void 0:h.info.Config.Labels).map(function(a){var d=v()(a,2),y=d[0],A=d[1];return(0,e.jsx)(b.Z.Item,{label:y,children:A},y)})})})]})})}var Vn=n(97857),Qe=n.n(Vn),Hn=n(40666),Gn=n(64789),zn=n(97937),Qn=n(66309),Jn=n(86738),Yn=n(90127);function Xn(t){var U=(0,o.useState)(0),x=v()(U,2),c=x[0],h=x[1],g=(0,o.useState)(),a=v()(g,2),d=a[0],y=a[1],A=new s.Uo("components.appDetail"),se=(0,o.useState)(),R=v()(se,2),$=R[0],de=R[1];return(0,o.useEffect)(function(){y([]),(0,Xe.e1)().then(function(w){y(w.data.list)})},[c,t.data.info.Name]),(0,e.jsx)(W.Z,{ghost:!0,title:(0,e.jsx)(Hn.Z,{}),subTitle:A.format("titleTag"),extra:(0,e.jsx)(Yn.Z,{trigger:(0,e.jsx)(C.Z.Link,{children:(0,e.jsx)(Gn.Z,{})}),containerDetail:t.data,onFinish:function(){h(c+1)}}),children:(0,e.jsx)(P.Z,{wrap:!0,children:d&&(d==null?void 0:d.filter(function(w){return w.item&&w.item.find(function(De){return De.name==t.data.info.Name})}).map(function(w,De){return(0,e.jsx)(Qn.Z,{color:w.tagColor,closable:{closeIcon:(0,e.jsx)(Jn.Z,{title:s.FD.format("confirm.title"),open:$&&$[De],onOpenChange:function(u){de(Qe()(Qe()({},$),{index:u}))},onConfirm:O()(r()().mark(function B(){return r()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,(0,Xe.rn)({name:t.data.info.Name,tag:w.tag});case 2:h(c+1);case 3:case"end":return Q.stop()}},B)})),children:(0,e.jsx)(zn.Z,{})})},style:{height:35,display:"flex",borderRadius:20,justifyContent:"center",alignItems:"center"},onClose:O()(r()().mark(function B(){return r()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:de(Qe()(Qe()({},$),{index:!0}));case 1:case"end":return Q.stop()}},B)})),children:(0,e.jsx)("span",{style:{paddingLeft:10,paddingRight:3},children:w.tag})},De)}))})})}var qn=(0,o.forwardRef)(function(t,U){var x;(0,o.useImperativeHandle)(U,function(){return{show:function(u){return O()(r()().mark(function Q(){return r()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return R(!0),H.next=3,w(u);case 3:case"end":return H.stop()}},Q)}))()}}});var c=(0,o.useRef)(),h=(0,o.useState)(),g=v()(h,2),a=g[0],d=g[1],y=(0,o.useState)(!1),A=v()(y,2),se=A[0],R=A[1],$=(0,o.useRef)(),de=new s.Uo("components.appDetail");function w(B){return De.apply(this,arguments)}function De(){return De=O()(r()().mark(function B(u){var Q,S,H;return r()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return(Q=c.current)===null||Q===void 0||Q.show(),M.next=3,(0,m.jV)({md5:u}).finally(function(){var l;(l=c.current)===null||l===void 0||l.destroy()});case 3:S=M.sent,S.data&&(((H=S.data.info.HostConfig)===null||H===void 0?void 0:H.NetworkMode)=="host"&&S.data.info.Config.ExposedPorts&&Object.keys(S.data.info.Config.ExposedPorts).map(function(l){S.data.info.NetworkSettings.Ports||(S.data.info.NetworkSettings.Ports={}),S.data.info.NetworkSettings.Ports[l]=[{HostIp:"0.0.0.0",HostPort:l.substring(0,l.indexOf("/"))}]}),d(S.data));case 5:case"end":return M.stop()}},B)})),De.apply(this,arguments)}return(0,e.jsx)(Te.Z,{title:de.format("drawerTitle",{name:(0,_.fi)((x=a==null?void 0:a.info.Name)!==null&&x!==void 0?x:"","/")}),open:se,onClose:function(){R(!1),t.onFinish&&t.onFinish()},width:$e.R_,children:(0,e.jsx)(kn.Z,{ref:c,children:(0,e.jsxs)(E.Z,{vertical:!0,gap:20,children:[a&&(0,e.jsx)(ze.u,{access:"canSeeContainerList",children:(0,e.jsx)(ln,{ref:$,ghost:!0,data:a==null?void 0:a.info,onFinish:O()(r()().mark(function B(){return r()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,w(a.info.Id);case 2:return Q.t0=Q.sent,Q.abrupt("return",[Q.t0]);case 4:case"end":return Q.stop()}},B)}))})}),a&&(0,e.jsx)(ze.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,e.jsx)(Kn,{ghost:!0,data:a,checkContainerUpgrade:function(){R(!1),t.onUpgradeFinish&&t.onUpgradeFinish()},onRefresh:function(){var B=O()(r()().mark(function u(Q){return r()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,w(Q);case 2:case"end":return H.stop()}},u)}));return function(u){return B.apply(this,arguments)}}()})}),a&&(0,e.jsx)(Xn,{data:a}),a&&(0,e.jsx)(he,{data:a,ghost:!0}),(0,e.jsx)(Fe,{data:a==null?void 0:a.info,ghost:!0}),a&&(0,e.jsx)(Nn,{data:a.info,ghost:!0}),(a==null?void 0:a.info.Config.Labels)&&(0,e.jsx)(W.Z,{title:(0,e.jsx)(ge.Z,{}),ghost:!0,subTitle:de.format("titleLabel"),children:(0,e.jsx)(b.Z,{column:1,bordered:!0,children:a.info.Config.Labels&&Object.entries(a.info.Config.Labels).map(function(B){var u=v()(B,2),Q=u[0],S=u[1];return(0,e.jsx)(b.Z.Item,{label:Q,children:S},Q)})})})]})})})}),et=qn},90127:function(Le,je,n){var Ee=n(15009),v=n.n(Ee),xe=n(99289),r=n.n(xe),ne=n(5574),O=n.n(ne),o=n(5251),Y=n(184),W=n(62370),K=n(5966),b=n(24739),P=n(64317),X=n(52688),C=n(97462),j=n(40056),ce=n(42075),i=n(67294),m=n(1699),f=n(80821),re=n(2808),_=n(87662),Ie=n(29453),Ue=n(3616),s=n(36146),e=n(85893),he=(0,i.forwardRef)(function(ge,Te){var E;(0,i.useImperativeHandle)(Te,function(){return{edit:function(ve){_e(!0),$e(ve),J.current&&J.current.setFieldsValue({tag:[ve.tag],tagColor:ve.tagColor,enableShowGroup:ve.enableShowGroup})}}});var J=(0,i.useRef)(),Fe=(0,i.useState)(0),L=O()(Fe,2),pe=L[0],me=L[1],te=(0,i.useState)([]),T=O()(te,2),le=T[0],oe=T[1],q=(0,i.useState)(),Me=O()(q,2),G=Me[0],k=Me[1],z=(E=ge.containerDetail)===null||E===void 0?void 0:E.info,ke=(0,i.useState)(!1),Ce=O()(ke,2),fe=Ce[0],_e=Ce[1],V=new s.Uo("components.appDetail");function $e(ee){J.current&&J.current.setFieldsValue({title:ee.title,description:ee.description,url:ee.url,icon:ee.icon,name:ee.name})}return(0,i.useEffect)(function(){k([]),(0,Ie.e1)().then(function(ee){k(ee.data.list)})},[pe]),(0,i.useEffect)(function(){z&&(0,_.K3)().then(function(ee){var ve=[];z.NetworkSettings&&z.NetworkSettings.Ports&&Object.keys(z.NetworkSettings.Ports).map(function(N){z.NetworkSettings.Ports&&z.NetworkSettings.Ports[N]&&z.NetworkSettings.Ports[N].map(function(be){be.HostPort&&ve.push("http://".concat(ee.data.serverUrl,":").concat(be.HostPort))})}),oe(ve)})},[ge.containerDetail]),(0,e.jsxs)(Y.a,{drawerProps:{forceRender:!0,width:Ue.R_},open:fe,onFinish:function(){var ee=r()(v()().mark(function ve(N){var be,Pe,Oe,ie;return v()().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return Oe="",N.tagColor&&N.tagColor.toHexString?N.tagColor.cleared||(Oe=N.tagColor.toHexString()):Oe=N.tagColor,ie=(be=N.enableShowGroup)!==null&&be!==void 0?be:ge.defaultEnableShowGroup,we.next=5,(0,Ie.A9)({enableShowGroup:ie,tag:N.tag?N.tag[0]:"",tagColor:Oe,name:(Pe=z==null?void 0:z.Name)!==null&&Pe!==void 0?Pe:N.name,title:ie?N.title:"",description:ie?N.description:"",url:ie?N.url:"",icon:ie?N.icon:""});case 5:return me(pe+1),ge.onFinish&&ge.onFinish({tag:N.tag,tagColor:N.tagColor,enableShowGroup:ie}),we.abrupt("return",!0);case 8:case"end":return we.stop()}},ve)}));return function(ve){return ee.apply(this,arguments)}}(),formRef:J,title:V.format("tagCreateTitle"),trigger:ge.trigger,onOpenChange:function(ve){var N;_e(ve),!ve&&(!((N=J.current)===null||N===void 0)&&N.resetFields)&&J.current.resetFields()},children:[ge.defaultEnableShowGroup&&(0,e.jsx)(W.Z,{children:(0,e.jsx)(j.Z,{message:new s.Uo("system.home.tag").format("emptyTip")})}),(0,e.jsx)(K.Z,{name:"name",hidden:!0}),(0,e.jsxs)(b.UW,{children:[(0,e.jsx)(P.Z,{width:"lg",label:V.format("tagFormTag"),layout:"vertical",required:!0,rules:[{required:!0}],onChange:function(ve){var N=G&&G.find(function(Ve){return ve&&ve.length>=1&&Ve.tag==ve[0]});if(N){var be,Pe,Oe,ie=N.item.find(function(Ve){return Ve.name==(z==null?void 0:z.Name)});(be=J.current)===null||be===void 0||be.setFieldsValue({tagColor:N.tagColor,enableShowGroup:N.enableShowGroup}),ie&&ie.name&&$e({name:(Pe=z==null?void 0:z.Name)!==null&&Pe!==void 0?Pe:"",title:ie?ie.title:(0,o.fi)((Oe=z==null?void 0:z.Name)!==null&&Oe!==void 0?Oe:"","/"),description:ie&&ie.description,url:ie&&ie.url,icon:ie&&ie.icon})}if(!ve||ve.length==0){var Se,we=(Se=J.current)===null||Se===void 0?void 0:Se.getFieldValue("url");if(!we||we==""){var Ne;!((Ne=J.current)===null||Ne===void 0)&&Ne.resetFields&&J.current.resetFields()}}},options:G&&G.map(function(ee){return{lable:ee.tag,value:ee.tag}}),name:"tag",mode:"tags",fieldProps:{maxCount:1},placeholder:V.format("tagFormTagEmpty")},"tagSelect".concat(pe)),!ge.defaultEnableShowGroup&&(0,e.jsx)(re.Z,{label:V.format("tagFormTagColor"),name:"tagColor"})]}),!ge.defaultEnableShowGroup&&(0,e.jsx)(m.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(ve){var N=ve.canSeeEnableCe;return(0,e.jsx)(X.Z,{label:V.format("tagFormEnableShowGroup"),name:"enableShowGroup",disabled:N,fieldProps:{onChange:function(Pe){if(Pe){var Oe,ie;$e({name:(Oe=z==null?void 0:z.Name)!==null&&Oe!==void 0?Oe:"",title:(0,o.fi)((ie=z==null?void 0:z.Name)!==null&&ie!==void 0?ie:"","/")})}}}})}}),(0,e.jsx)(C.Z,{name:["enableShowGroup"],children:function(ve){var N=ve.enableShowGroup;return(N||ge.defaultEnableShowGroup)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(ce.Z.Compact,{children:[ge.containerDetail&&(0,e.jsx)(P.Z,{label:V.format("tagFormSelectUrl"),width:"sm",name:"selectUrl",options:le.map(function(be){return{label:be,value:be}}),onChange:function(Pe){var Oe;!((Oe=J.current)===null||Oe===void 0)&&Oe.setFieldValue&&J.current.setFieldValue("url",Pe)}}),(0,e.jsx)(K.Z,{label:V.format("tagFormUrl"),name:"url",width:"md"}),(0,e.jsx)(W.Z,{label:" ",children:(0,e.jsx)(f.Z,{action:function(){var Pe;return(0,Ie.R3)({url:(Pe=J.current)===null||Pe===void 0?void 0:Pe.getFieldValue("url")})},onSuccess:function(Pe){var Oe,ie,Se;(Oe=J.current)===null||Oe===void 0||Oe.setFieldValue("icon",Pe.data.icon),(ie=J.current)===null||ie===void 0||ie.setFieldValue("title",Pe.data.title),(Se=J.current)===null||Se===void 0||Se.setFieldValue("description",Pe.data.description)},children:V.format("tagGetUrlDetailButton")})})]}),(0,e.jsxs)(b.UW,{children:[(0,e.jsx)(K.Z,{label:V.format("tagFormTitle"),name:"title"}),(0,e.jsx)(K.Z,{label:V.format("tagFormDescription"),name:"description"})]}),(0,e.jsx)(b.UW,{children:(0,e.jsx)(K.Z,{width:"lg",placeholder:V.format("tagFormIconEmpty"),label:V.format("tagFormIcon"),name:"icon"})})]})}})]})});je.Z=he},81146:function(Le,je,n){var Ee=n(97857),v=n.n(Ee),xe=n(15009),r=n.n(xe),ne=n(99289),O=n.n(ne),o=n(67294),Y=n(97269),W=n(62370),K=n(5966),b=n(97462),P=n(82346),X=n(71230),C=n(15746),j=n(34041),ce=n(83622),i=n(84567),m=n(42075),f=n(80821),re=n(23430),_=n(93162),Ie=n.n(_),Ue=n(78267),s=n.n(Ue),e=n(75458),he=n.n(e),ge=n(12323),Te=n(4244),E=n.n(Te),J=n(24078),Fe=n(36146),L=n(85893),pe,me,te,T={decorations:{matchBackground:"",matchBorder:"#FFFF00",activeMatchBackground:"#FFFF0066",matchOverviewRuler:"",activeMatchColorOverviewRuler:""}},le=(0,o.forwardRef)(function(oe,q){var Me=(0,o.useRef)(),G=(0,P.useModel)("subscriber"),k=new Fe.Uo("components.containerLog");(0,o.useImperativeHandle)(q,function(){return{fit:function(){pe.clear(),te.fit()},start:function(){return O()(r()().mark(function fe(){return r()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,z({lineTotal:500});case 2:case"end":return V.stop()}},fe)}))()},close:function(){G.progress.close(oe.id)}}});function z(Ce){return ke.apply(this,arguments)}function ke(){return ke=O()(r()().mark(function Ce(fe){return r()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:G.progress.close(oe.id),pe.clear(),fe.download=!1,oe.request(fe);case 4:case"end":return V.stop()}},Ce)})),ke.apply(this,arguments)}return(0,o.useEffect)(function(){return window.addEventListener("resize",function(){te.fit()}),pe=new Te.Terminal(v()(v()({},ge.X),{},{fontSize:12,lineHeight:1.2,allowProposedApi:!0})),te=new Ue.FitAddon,me=new e.SearchAddon({}),pe.loadAddon(te),pe.loadAddon(me),pe.open(document.getElementById("terminal-container-log")),te.fit(),G.addDataHandler(oe.id,function(Ce){pe.write(Ce.data)}),function(){pe.clear(),pe.reset(),G.progress.close(oe.id)}},[]),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Y.A,{submitter:!1,layout:"horizontal",onFinish:function(fe){var _e;z({id:oe.id,lineTotal:parseInt(fe.lineTotal),showTime:(_e=fe.showTime)!==null&&_e!==void 0?_e:!1})},formRef:Me,children:(0,L.jsxs)(X.Z,{gutter:[10,0],children:[(0,L.jsx)(C.Z,{span:8,children:(0,L.jsx)(W.Z,{name:"lineTotal",initialValue:"500",label:k.format("formLineTotal"),children:(0,L.jsxs)(j.Z,{defaultValue:"500",onChange:function(fe){var _e;(_e=Me.current)===null||_e===void 0||_e.submit()},children:[(0,L.jsx)(j.Z.Option,{value:"100",children:k.format("formLineTotalOption",{number:"100"})}),(0,L.jsx)(j.Z.Option,{value:"200",children:k.format("formLineTotalOption",{number:"200"})}),(0,L.jsx)(j.Z.Option,{value:"500",children:k.format("formLineTotalOption",{number:"500"})}),(0,L.jsx)(j.Z.Option,{value:"1000",children:k.format("formLineTotalOption",{number:"1000"})}),(0,L.jsx)(j.Z.Option,{value:"-1",children:k.format("formLineTotalOptionAll")})]})})}),(0,L.jsx)(C.Z,{children:(0,L.jsx)(ce.ZP,{onClick:function(){pe.clear()},children:k.format("clearButton")})}),(0,L.jsx)(C.Z,{children:(0,L.jsx)(W.Z,{name:"showTime",valuePropName:"checked",children:(0,L.jsx)(i.Z,{onChange:function(fe){var _e;(_e=Me.current)===null||_e===void 0||_e.submit()},children:k.format("formShowTime")})})}),(0,L.jsx)(C.Z,{children:(0,L.jsx)(K.Z,{label:k.format("formKeywork"),name:"keywork",fieldProps:{onPressEnter:function(){var fe;me.findNext((fe=Me.current)===null||fe===void 0?void 0:fe.getFieldValue("keywork"),T)},onChange:function(fe){me.findNext(fe.target.value,T)}},placeholder:k.format("formKeyworkEmpty")})}),(0,L.jsx)(C.Z,{children:(0,L.jsx)(b.Z,{name:["keywork"],children:function(fe){var _e=fe.keywork;return(0,L.jsxs)(m.Z,{size:10,children:[(0,L.jsx)(ce.ZP,{onClick:function(){me.findNext(_e,T)},children:k.format("formKeyworkNext")},"next"),(0,L.jsx)(ce.ZP,{onClick:function(){me.findPrevious(_e,T)},children:k.format("formKeyworkPrev")},"prev")]})}})}),(0,L.jsx)(C.Z,{children:(0,L.jsx)(f.Z,{buttonProps:{icon:(0,L.jsx)(re.Z,{})},action:O()(r()().mark(function Ce(){var fe,_e,V;return r()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(!oe.download){ee.next=5;break}return ee.next=3,oe.download({lineTotal:parseInt((fe=Me.current)===null||fe===void 0?void 0:fe.getFieldValue("lineTotal")),showTime:(_e=Me.current)===null||_e===void 0?void 0:_e.getFieldValue("showTime")});case 3:V=ee.sent,(0,_.saveAs)(V.data,V.name);case 5:case"end":return ee.stop()}},Ce)})),children:k.format("downloadButton")})})]})}),(0,L.jsx)("div",{style:{marginTop:"20px",height:oe.showInDrawer?"75vh":"85vh"},id:"terminal-container-log"})]})});je.Z=le},27619:function(Le,je,n){n.d(je,{Z:function(){return o}});var Ee=n(5574),v=n.n(Ee),xe=n(82346),r=n(67294),ne=n(64389),O=n(85893);function o(Y){var W=(0,xe.useModel)("@@initialState"),K=W.initialState,b="chart-area-".concat(Y.name),P=(0,r.useState)(),X=v()(P,2),C=X[0],j=X[1],ce={};Y.data.forEach(function(m){m.show===!1?ce[m.name]=!1:ce[m.name]=!0});var i={tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},valueFormatter:function(f){return Y.yValueFormatter?Y.yValueFormatter(f):f}},legend:{selected:ce},grid:{left:"0",right:"0",bottom:"0",top:"30",containLabel:!0},xAxis:{type:"category",data:Y.data[0].data.map(function(m){return m.date}),boundaryGap:!1,axisLabel:{rotate:20}},yAxis:{type:"value",axisLabel:{formatter:Y.yLabelFormatter},max:function(f){if(Y.yDomainMaxCallback)return Y.yDomainMaxCallback(f)}},series:[]};return(0,r.useEffect)(function(){var m="",f=window.matchMedia("(prefers-color-scheme: dark)");(K==null?void 0:K.theme.algorithm)=="dark"||f.matches?m="dark":m="",C&&!C.isDisposed()&&C.dispose();var re=document.getElementById(b),_=ne.S1(re,m);_.setOption(i);var Ie=new ResizeObserver(function(){_.resize()});re&&Ie.observe(re),j(_)},[K]),(0,r.useEffect)(function(){C&&!C.isDisposed()&&C.setOption({legend:{data:Y.data.map(function(m){return m.name})},xAxis:{data:Y.data[0].data.map(function(m){return m.date})},series:Y.data.map(function(m){return{name:m.name,type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:m.data.map(function(f){return f.value})}})})},[Y.data]),(0,O.jsx)("div",{style:{height:200},id:b})}},94359:function(Le,je,n){n.d(je,{Z:function(){return ce}});var Ee=n(5574),v=n.n(Ee),xe=n(3089),r=n(98165),ne=n(18429),O=n(8751),o=n(66212),Y=n(14313),W=n(30159),K=n(87740),b=n(50888),P=n(66309),X=n(83062),C=n(36146),j=n(85893);function ce(i){var m,f,re=new C.Uo("components.containerStatus"),_=i.status.split("."),Ie=v()(_,2),Ue=Ie[0],s=Ie[1],e="";e=re.format(i.status,(m=i.statusValue)!==null&&m!==void 0?m:{});var he=(0,j.jsx)(j.Fragment,{});return s=="0"&&(he=(0,j.jsx)(P.Z,{icon:(0,j.jsx)(xe.Z,{}),color:"default",children:e})),s=="10"&&(he=(0,j.jsx)(P.Z,{icon:(0,j.jsx)(r.Z,{spin:!0}),color:"processing",children:e})),s=="20"&&(he=(0,j.jsx)(P.Z,{icon:(0,j.jsx)(ne.Z,{}),color:"error",children:e})),s=="30"&&(he=(0,j.jsx)(P.Z,{icon:(0,j.jsx)(O.Z,{}),color:"success",children:e})),s=="new"&&(he=(0,j.jsx)(P.Z,{icon:(0,j.jsx)(o.Z,{}),children:e})),(s=="running"||s=="healthy"||s=="active"||s=="ready")&&(he=(0,j.jsx)(P.Z,{icon:(0,j.jsx)(Y.Z,{}),color:"success",children:e})),(s=="paused"||s=="pause"||s=="rollback_paused")&&(he=(0,j.jsx)(P.Z,{icon:(0,j.jsx)(W.Z,{}),color:"warning",children:e})),(s=="waiting"||s=="starting"||s=="accepted")&&(he=(0,j.jsx)(P.Z,{icon:(0,j.jsx)(K.Z,{}),children:e})),["deploying","pending","allocated","accepted","assigned","preparing","updating","rollback_started"].includes(s)&&(he=(0,j.jsx)(P.Z,{icon:(0,j.jsx)(b.Z,{}),color:"processing",children:e})),(s=="error"||s=="down"||s=="failed")&&(he=(0,j.jsx)(P.Z,{icon:(0,j.jsx)(ne.Z,{}),color:"error",children:e})),["complete","completed","rollback_completed"].includes(s)&&(he=(0,j.jsx)(P.Z,{icon:(0,j.jsx)(O.Z,{}),color:"success",children:e})),["exited","dead","removing","restarting","unhealthy","created","drain","unreachable","shutdown","rejected","remove","orphaned"].includes(s)&&(he=(0,j.jsx)(P.Z,{icon:(0,j.jsx)(ne.Z,{}),color:"warning",children:e})),(0,j.jsx)(X.Z,{placement:"top",title:(f=i.tip)!==null&&f!==void 0?f:"",children:he})}},55943:function(Le,je,n){var Ee=n(5574),v=n.n(Ee),xe=n(15009),r=n.n(xe),ne=n(99289),O=n.n(ne),o=n(80821),Y=n(3616),W=n(14946),K=n(36146),b=n(82061),P=n(184),X=n(38345),C=n(60940),j=n(42075),ce=n(96074),i=n(26412),m=n(67294),f=n(85893),re=(0,m.forwardRef)(function(_,Ie){(0,m.useImperativeHandle)(Ie,function(){return{show:function(le){return O()(r()().mark(function oe(){var q,Me;return r()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,W.IS)({name:le});case 2:q=k.sent,q.data.info.Containers?(Me=[],Object.keys(q.data.info.Containers).map(function(z){q.data.info.Containers[z].Id=z,Me.push(q.data.info.Containers[z])}),me(Me)):me([]),J(q.data.info),he(!0);case 6:case"end":return k.stop()}},oe)}))()}}});var Ue=(0,m.useState)(!1),s=v()(Ue,2),e=s[0],he=s[1],ge=(0,m.useState)(),Te=v()(ge,2),E=Te[0],J=Te[1],Fe=(0,m.useState)(),L=v()(Fe,2),pe=L[0],me=L[1],te=new K.Uo("components.network");return(0,f.jsx)(P.a,{drawerProps:{width:Y.R_},title:te.format("detailTitle"),open:e,onOpenChange:function(le){he(le)},submitter:!1,children:(0,f.jsxs)(X.Z,{ghost:!0,direction:"column",gutter:[10,0],children:[(0,f.jsx)(X.Z,{title:te.format("detailContainer"),ghost:!0,children:(0,f.jsx)(C.Z,{rowKey:"Name",columns:[{title:K.FD.format("listContainerName"),dataIndex:"Name"},{title:"IPV4",dataIndex:"IPv4Address"},{title:"IPV6",dataIndex:"IPv6Address"},{title:"MacAddress",dataIndex:"MacAddress"},{title:K.FD.format("listManage"),render:function(le,oe,q){return(0,f.jsx)(j.Z,{split:(0,f.jsx)(ce.Z,{type:"vertical"}),children:(0,f.jsx)(o.Z,{buttonProps:{type:"text",icon:(0,f.jsx)(b.Z,{}),danger:!0},confirmProps:{showCommonConfirm:!0},action:function(){var G,k;return(0,W.t9)({name:(G=E==null?void 0:E.Id)!==null&&G!==void 0?G:"",containerName:(k=oe.Id)!==null&&k!==void 0?k:""})},tips:K.FD.format("listManageExit"),onSuccess:function(){var G=pe==null?void 0:pe.filter(function(k){return k.Id!=oe.Id});me(G)}},"delete")})}}],dataSource:pe,pagination:!1})}),(0,f.jsx)(X.Z,{ghost:!0,title:te.format("detailBasic"),children:(0,f.jsxs)(i.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:[(0,f.jsx)(i.Z.Item,{label:te.format("detailName"),children:E==null?void 0:E.Name}),(0,f.jsx)(i.Z.Item,{label:"Id",children:E==null?void 0:E.Id}),(0,f.jsx)(i.Z.Item,{label:"Driver",children:E==null?void 0:E.Driver}),(0,f.jsx)(i.Z.Item,{label:"Scope",children:E==null?void 0:E.Scope}),(0,f.jsx)(i.Z.Item,{label:"Attachable",children:te.yesNo(E==null?void 0:E.Attachable)}),(0,f.jsx)(i.Z.Item,{label:"Internal",children:te.yesNo(E==null?void 0:E.Internal)}),(E==null?void 0:E.IPAM.Config)&&(E==null?void 0:E.IPAM.Config.map(function(T,le){return(0,f.jsx)(i.Z.Item,{label:T.Gateway&&T.Gateway.includes(":")?"IPV6":"IPV4",children:(0,f.jsxs)(i.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:[(0,f.jsx)(i.Z.Item,{label:"Subnet",children:T.Subnet}),(0,f.jsx)(i.Z.Item,{label:"Gateway",children:T.Gateway}),(0,f.jsx)(i.Z.Item,{label:"IP Range ",children:T.IPRange}),(0,f.jsx)(i.Z.Item,{label:"Excluded IPs",children:T.AuxiliaryAddresses&&Object.keys(T.AuxiliaryAddresses).map(function(oe){return T.AuxiliaryAddresses[oe]+" ,"})})]})},le)})),(E==null?void 0:E.Options)&&Object.keys(E==null?void 0:E.Options).length>0&&(0,f.jsx)(i.Z.Item,{label:"Options",children:(0,f.jsx)(i.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:Object.keys(E==null?void 0:E.Options).map(function(T){return(0,f.jsx)(i.Z.Item,{label:T,children:E.Options[T]},T)})})}),(E==null?void 0:E.Labels)&&Object.keys(E==null?void 0:E.Labels).length>0&&(0,f.jsx)(i.Z.Item,{label:"Lables",children:(0,f.jsx)(i.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:Object.keys(E==null?void 0:E.Labels).map(function(T){return(0,f.jsx)(i.Z.Item,{label:T,children:E.Labels[T]},T)})})})]})})]})})});je.Z=re},2808:function(Le,je,n){n.d(je,{Z:function(){return o}});var Ee=n(97857),v=n.n(Ee),xe=n(62370),r=n(51663),ne=n(67294),O=n(85893);function o(Y){return(0,O.jsx)(xe.Z,v()(v()({},Y),{},{children:(0,O.jsx)(r.Z,{showText:function(K){return K.toHexString()},allowClear:!0,presets:[{label:"Color",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},76428:function(Le,je,n){n.d(je,{Z:function(){return r}});var Ee=n(25593),v=n(67294),xe=n(85893);function r(ne){return(0,xe.jsx)(Ee.Z.Text,{copyable:!0,children:ne.title})}},65913:function(Le,je,n){var Ee=n(5574),v=n.n(Ee),xe=n(74330),r=n(67294),ne=n(85893),O=(0,r.forwardRef)(function(o,Y){(0,r.useImperativeHandle)(Y,function(){return{show:function(){P(!0)},destroy:function(){P(!1)}}});var W=(0,r.useState)(!1),K=v()(W,2),b=K[0],P=K[1];return(0,ne.jsx)(xe.Z,{spinning:b,size:"default",children:o.children})});je.Z=O},70146:function(Le,je,n){n.d(je,{SR:function(){return P},VE:function(){return K},Zy:function(){return Y},iD:function(){return C},yB:function(){return O}});var Ee=n(15009),v=n.n(Ee),xe=n(99289),r=n.n(xe),ne=n(82346);function O(m){return o.apply(this,arguments)}function o(){return o=r()(v()().mark(function m(f){return v()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,ne.request)("/api/app/container-backup/create",{data:f,method:"POST"});case 2:return _.abrupt("return",_.sent);case 3:case"end":return _.stop()}},m)})),o.apply(this,arguments)}function Y(m){return W.apply(this,arguments)}function W(){return W=r()(v()().mark(function m(f){return v()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,ne.request)("/api/app/container-backup/get-list",{method:"POST",data:f}));case 1:case"end":return _.stop()}},m)})),W.apply(this,arguments)}function K(m){return b.apply(this,arguments)}function b(){return b=r()(v()().mark(function m(f){return v()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,ne.request)("/api/app/container-backup/delete",{method:"POST",data:f}));case 1:case"end":return _.stop()}},m)})),b.apply(this,arguments)}function P(m){return X.apply(this,arguments)}function X(){return X=r()(v()().mark(function m(f){return v()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,ne.request)("/api/app/container-backup/restore",{method:"POST",data:f}));case 1:case"end":return _.stop()}},m)})),X.apply(this,arguments)}function C(m){return j.apply(this,arguments)}function j(){return j=r()(v()().mark(function m(f){return v()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,ne.request)("/api/app/container-backup/get-detail",{method:"POST",data:f}));case 1:case"end":return _.stop()}},m)})),j.apply(this,arguments)}function ce(m){return i.apply(this,arguments)}function i(){return i=_asyncToGenerator(_regeneratorRuntime().mark(function m(f){return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,request("/api/app/site/restore",{data:f,method:"POST"});case 2:return _.abrupt("return",_.sent);case 3:case"end":return _.stop()}},m)})),i.apply(this,arguments)}},29453:function(Le,je,n){n.d(je,{A9:function(){return O},R3:function(){return P},e1:function(){return Y},rn:function(){return K}});var Ee=n(15009),v=n.n(Ee),xe=n(99289),r=n.n(xe),ne=n(82346);function O(C){return o.apply(this,arguments)}function o(){return o=r()(v()().mark(function C(j){return v()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,ne.request)("/api/common/tag/create",{method:"POST",data:j});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},C)})),o.apply(this,arguments)}function Y(C){return W.apply(this,arguments)}function W(){return W=r()(v()().mark(function C(j){return v()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,ne.request)("/api/common/tag/get-list",{method:"POST",data:j});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},C)})),W.apply(this,arguments)}function K(C){return b.apply(this,arguments)}function b(){return b=r()(v()().mark(function C(j){return v()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,ne.request)("/api/common/tag/delete",{method:"POST",data:j});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},C)})),b.apply(this,arguments)}function P(C){return X.apply(this,arguments)}function X(){return X=r()(v()().mark(function C(j){return v()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,ne.request)("/api/pro/tag/get-url-detail",{method:"POST",data:j});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},C)})),X.apply(this,arguments)}}}]);
