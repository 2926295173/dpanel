"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1180],{88484:function(G,A,e){e.d(A,{Z:function(){return E}});var j=e(87462),c=e(67294),B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},M=B,F=e(84089),p=function(r,_){return c.createElement(F.Z,(0,j.Z)({},r,{ref:_,icon:M}))},C=c.forwardRef(p),E=C},52688:function(G,A,e){var j=e(1413),c=e(45987),B=e(67294),M=e(35510),F=e(85893),p=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],C=B.forwardRef(function(E,o){var r=E.fieldProps,_=E.unCheckedChildren,R=E.checkedChildren,D=E.proFieldProps,i=(0,c.Z)(E,p);return(0,F.jsx)(M.Z,(0,j.Z)({valueType:"switch",fieldProps:(0,j.Z)({unCheckedChildren:_,checkedChildren:R},r),ref:o,valuePropName:"checked",proFieldProps:D,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},i))});A.Z=C},5966:function(G,A,e){var j=e(97685),c=e(1413),B=e(45987),M=e(21770),F=e(72723),p=e(55241),C=e(97435),E=e(67294),o=e(35510),r=e(85893),_=["fieldProps","proFieldProps"],R=["fieldProps","proFieldProps"],D="text",i=function(m){var n=m.fieldProps,I=m.proFieldProps,f=(0,B.Z)(m,_);return(0,r.jsx)(o.Z,(0,c.Z)({valueType:D,fieldProps:n,filedConfig:{valueType:D},proFieldProps:I},f))},h=function(m){var n=(0,M.Z)(m.open||!1,{value:m.open,onChange:m.onOpenChange}),I=(0,j.Z)(n,2),f=I[0],x=I[1];return(0,r.jsx)(F.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(H){var K,X=H.getFieldValue(m.name||[]);return(0,r.jsx)(p.Z,(0,c.Z)((0,c.Z)({getPopupContainer:function(d){return d&&d.parentNode?d.parentNode:d},onOpenChange:function(d){return x(d)},content:(0,r.jsxs)("div",{style:{padding:"4px 0"},children:[(K=m.statusRender)===null||K===void 0?void 0:K.call(m,X),m.strengthText?(0,r.jsx)("div",{style:{marginTop:10},children:(0,r.jsx)("span",{children:m.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},m.popoverProps),{},{open:f,children:m.children}))}})},O=function(m){var n=m.fieldProps,I=m.proFieldProps,f=(0,B.Z)(m,R),x=(0,E.useState)(!1),S=(0,j.Z)(x,2),H=S[0],K=S[1];return n!=null&&n.statusRender&&f.name?(0,r.jsx)(h,{name:f.name,statusRender:n==null?void 0:n.statusRender,popoverProps:n==null?void 0:n.popoverProps,strengthText:n==null?void 0:n.strengthText,open:H,onOpenChange:K,children:(0,r.jsx)("div",{children:(0,r.jsx)(o.Z,(0,c.Z)({valueType:"password",fieldProps:(0,c.Z)((0,c.Z)({},(0,C.Z)(n,["statusRender","popoverProps","strengthText"])),{},{onBlur:function($){var d;n==null||(d=n.onBlur)===null||d===void 0||d.call(n,$),K(!1)},onClick:function($){var d;n==null||(d=n.onClick)===null||d===void 0||d.call(n,$),K(!0)}}),proFieldProps:I,filedConfig:{valueType:D}},f))})}):(0,r.jsx)(o.Z,(0,c.Z)({valueType:"password",fieldProps:n,proFieldProps:I,filedConfig:{valueType:D}},f))},v=i;v.Password=O,v.displayName="ProFormComponent",A.Z=v},1699:function(G,A,e){e.d(A,{u:function(){return o}});var j=e(9783),c=e.n(j),B=e(97857),M=e.n(B),F=e(67294),p=e(82346),C=e(42075),E=e(85893),o=function(_){var R=(0,p.useAccess)(),D=Array.isArray(_.access)?_.access:[_.access],i;return typeof _.children=="function"?i=_.children(D.reduce(function(h,O){return M()(M()({},h),{},c()({},O,R[O]))},{})):D.every(function(h){return R[h]})?i=_.children:i=_.fallback,_.space?(0,E.jsx)(C.Z,M()(M()({},_.space),{},{children:i})):i}},80821:function(G,A,e){e.d(A,{Z:function(){return o}});var j=e(5574),c=e.n(j),B=e(24963),M=e(86738),F=e(28036),p=e(83062),C=e(67294),E=e(85893);function o(r){var _=(0,C.useState)(!1),R=c()(_,2),D=R[0],i=R[1],h=(0,C.useContext)(B.Z),O=h.lang,v=h.notice,y=h.message,m=function(){i(!0);var I=r.action();I instanceof Promise?I.then(function(f){if(i(!1),f){typeof r.onSuccess=="function"&&r.onSuccess(f);var x="";r.messageSuccess?typeof r.messageSuccess=="function"?x=r.messageSuccess(f):x=r.messageSuccess.indexOf("notification.")==0?O(r.messageSuccess):r.messageSuccess:x=O("notification.finish"),r.asynced?y.info(x):y.success(x)}}).catch(function(f){i(!1),typeof r.onError=="function"&&r.onError(f)}):i(!1)};return r.confirm?(0,E.jsx)(M.Z,{style:{width:500},title:r.confirmTitle?r.confirmTitle:O("notification.title.tip"),description:typeof r.confirm=="string"&&r.confirm.indexOf("notification.")==0?O(r.confirm):r.confirm,onConfirm:m,okText:"Yes",cancelText:"No",onOpenChange:r.confirmOnOpenChange,children:(0,E.jsx)(F.ZP,{block:r.block,disabled:r.disabled,icon:!r.children&&D?void 0:r.icon,loading:D,danger:r.danger,type:r.type,children:r.children})}):(0,E.jsx)(p.Z,{title:r.tips,children:(0,E.jsx)(F.ZP,{block:r.block,style:r.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:r.disabled,icon:!r.children&&D?void 0:r.icon,loading:D,onClick:m,danger:r.danger,type:r.type,children:r.children})})}},44349:function(G,A,e){var j=e(97857),c=e.n(j),B=e(17186),M=e(5966),F=e(86250),p=e(67294),C=e(85893),E=(0,p.forwardRef)(function(o,r){var _=(0,p.useRef)();(0,p.useImperativeHandle)(r,function(){return{addItem:function(i,h){var O,v=(O=_.current)===null||O===void 0?void 0:O.getList(),y=!1;if(v==null||v.map(function(n){if(n.name==i){y=!0;return}}),!y){var m;(m=_.current)===null||m===void 0||m.add({name:i,value:h})}},clear:function(){var i;(i=_.current)===null||i===void 0||(i=i.getList())===null||i===void 0||i.map(function(h,O){var v;(v=_.current)===null||v===void 0||v.remove(O)})}}});var R={};return o.hideCopyButton===!0&&(R.copyIconProps=!1),o.hideDeleteButton===!0&&(R.deleteIconProps=!1),(0,C.jsx)(B.u,c()(c()({initialValue:o.initialValue,label:o.label,name:o.name,actionRef:_,creatorButtonProps:o.showAddButton?{creatorButtonText:"\u6DFB\u52A0"+(o.label?o.label:o.name)}:!1,min:o.min?o.min:0},R),{},{children:function(i,h,O){return(0,C.jsx)(F.Z,{justify:o.justify,gap:o.gap,children:o.items.map(function(v){return v.render?(0,C.jsx)("div",{children:v.render&&v.render(i,h,O)},"".concat(o.name,"-").concat(v.name,"-").concat(i.key)):(0,C.jsx)(M.Z,{width:v.width,name:v.name,label:v.label,required:v.required,rules:[{required:v.required}],disabled:v.disabled,placeholder:v.placeholder},"".concat(o.name,"-").concat(v.name,"-").concat(i.key))})})}}))});A.Z=E},12491:function(G,A,e){e.d(A,{Z:function(){return E}});var j=e(24963),c=e(88484),B=e(62370),M=e(31418),F=e(28036),p=e(67294),C=e(85893);function E(o){var r=(0,p.useContext)(j.Z),_=r.message,R=r.notice,D=r.lang,i=(0,p.useRef)(null),h=M.Z.useApp(),O=function(){i.current&&(i.current.click(),i.current.onchange=function(y){if(!y||!y.target)return"";var m=new FileReader;m.onload=function(I){var f,x,S=(f=I.target)===null||f===void 0?void 0:f.result;if(o.onLoad)try{o.onLoad&&o.onLoad(S)}catch(H){R.error(H);return}typeof o.onImport=="function"&&(_.success("\u6210\u529F\u5BFC\u5165 ".concat(o.title)),o.onImport(S)),(x=i.current)!==null&&x!==void 0&&x.value&&(i.current.value="")};var n=y.target;if(n.files)try{m.readAsText(n.files[0])}catch(I){R.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(B.Z,{children:(0,C.jsx)(F.ZP,{icon:(0,C.jsx)(c.Z,{}),block:!0,onClick:O,children:o.title})}),(0,C.jsx)("input",{style:{display:"none"},type:"file",ref:i,name:"importFileInput"})]})}},8680:function(G,A,e){var j=e(15009),c=e.n(j),B=e(64599),M=e.n(B),F=e(99289),p=e.n(F),C=e(9783),E=e.n(C),o=e(5574),r=e.n(o),_=e(67294),R=e(184),D=e(38345),i=e(97269),h=e(97321),O=e(97462),v=e(64317),y=e(5966),m=e(86615),n=e(68602),I=e(28036),f=e(83403),x=e(24963),S=e(1699),H=e(29177),K=e(45742),X=e(43425),$=e(44349),d=e(85893),ae=(0,_.forwardRef)(function(z,se){var L=(0,_.useState)(!1),J=r()(L,2),Y=J[0],k=J[1],U=(0,_.useRef)(),ne=(0,_.useContext)(x.Z),Z=ne.message,b=(0,_.useState)([]),te=r()(b,2),w=te[0],Q=te[1],ee=E()(E()(E()(E()(E()({},f.W6.CONTAINER,"Id"),f.W6.APPSTORE,"name"),f.W6.COMPOSE,"name"),f.W6.REGISTRY,"serverAddress"),f.W6.DOCKER_ENV,"name"),re=E()(E()(E()(E()(E()({},f.W6.CONTAINER,"name"),f.W6.APPSTORE,"name"),f.W6.COMPOSE,"name"),f.W6.REGISTRY,"title"),f.W6.DOCKER_ENV,"title"),q=ee[z.type],W=re[z.type],u=z.selected.map(function(s){return s[ee[z.type]]});return _.useEffect(function(){Y&&((0,n.dP)({permission:{uri:z.type,key:q,value:u}}).then(function(s){var a;(a=U.current)===null||a===void 0||a.setFieldValue("list",Object.keys(s.data.list).map(function(l){return{name:l,type:s.data.list[l].type,users:s.data.list[l].users}}))}),(0,n.lE)().then(function(s){var a,l=(a=s.data)===null||a===void 0||(a=a.list)===null||a===void 0?void 0:a.map(function(t){return{label:t.username,value:t.username}});Q(l)}))},[Y]),(0,d.jsx)(S.u,{access:["canSeeEnableEe","canSeeFounder","canSeeManage"],children:(0,d.jsxs)(R.a,{name:"create",title:"\u6570\u636E\u6743\u9650\u8BBE\u7F6E",open:Y,onOpenChange:function(a){if(!a){var l;(l=U.current)===null||l===void 0||l.resetFields()}k(a)},drawerProps:{forceRender:!0},formRef:U,trigger:(0,d.jsx)(I.ZP,{icon:(0,d.jsx)(H.Z,{}),children:"\u6570\u636E\u6743\u9650"}),onFinish:function(){var s=p()(c()().mark(function a(l){var t,P,g;return c()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:t=M()(l.list),T.prev=1,t.s();case 3:if((P=t.n()).done){T.next=9;break}return g=P.value,T.next=7,(0,n.Db)({usernames:g.users,permissionType:g.type,permission:{uri:z.type,key:q,showKey:W,value:[g.name]}});case 7:T.next=3;break;case 9:T.next=14;break;case 11:T.prev=11,T.t0=T.catch(1),t.e(T.t0);case 14:return T.prev=14,t.f(),T.finish(14);case 17:Z.success("\u6743\u9650\u8BBE\u7F6E\u6210\u529F"),k(!1),z.onSuccess();case 20:case"end":return T.stop()}},a,null,[[1,11,14,17]])}));return function(a){return s.apply(this,arguments)}}(),children:[(0,d.jsxs)(D.Z,{ghost:!0,title:(0,d.jsx)(K.Z,{}),subTitle:"\u6279\u91CF\u8BBE\u7F6E",children:[(0,d.jsx)(i.A.Item,{name:"type",style:{marginBottom:0},children:(0,d.jsxs)(h.Z.Group,{defaultValue:"admin",onChange:function(a){var l,t,P=(l=U.current)===null||l===void 0?void 0:l.getFieldValue("list");P.forEach(function(g){g.type=a,g.users=[]}),(t=U.current)===null||t===void 0||t.setFieldValue("list",P)},children:[(0,d.jsx)(h.Z,{style:{width:240},title:"\u7BA1\u7406\u5458",description:"\u4EC5\u7BA1\u7406\u5458\u53EF\u89C1",value:"admin"}),(0,d.jsx)(h.Z,{style:{width:240},title:"\u6307\u5B9A\u7528\u6237",description:"\u4EC5\u9009\u4E2D\u7528\u6237\u53EF\u89C1",value:"restricted"}),(0,d.jsx)(h.Z,{style:{width:240},title:"\u516C\u5171",description:"\u6240\u6709\u4EBA\u53EF\u89C1",value:"public"})]})}),(0,d.jsx)(O.Z,{name:["type"],children:function(a){var l=a.type;if(l==="restricted")return(0,d.jsx)(v.Z,{mode:"multiple",name:"usernames",label:"\u9009\u62E9\u7528\u6237",onChange:function(P){var g,V,T=(g=U.current)===null||g===void 0?void 0:g.getFieldValue("list");T.forEach(function(N){N.users=P}),(V=U.current)===null||V===void 0||V.setFieldValue("list",T)},rules:[{required:!0}],request:p()(c()().mark(function t(){var P,g,V;return c()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(!(w.length>0)){N.next=2;break}return N.abrupt("return",w);case 2:return N.next=4,(0,n.lE)();case 4:return g=N.sent,V=(P=g.data)===null||P===void 0||(P=P.list)===null||P===void 0?void 0:P.map(function(ue){return{label:ue.username,value:ue.username}}),Q(V),N.abrupt("return",V);case 8:case"end":return N.stop()}},t)}))})}})]}),(0,d.jsx)(D.Z,{ghost:!0,title:(0,d.jsx)(X.Z,{}),subTitle:"\u6570\u636E\u6743\u9650\u8BBE\u7F6E",children:(0,d.jsx)($.Z,{name:"list",hideCopyButton:!0,gap:10,items:[{name:"name",label:"\u540D\u79F0",render:function(a,l,t){var P=t.getCurrentRowData();return(0,d.jsx)(y.Z,{disabled:!0,label:"\u540D\u79F0",width:"sm",name:"name"})}},{name:"type",label:"\u6743\u9650\u7C7B\u578B",render:function(a,l,t){var P=t.getCurrentRowData();return(0,d.jsx)(m.Z.Group,{label:"\u6743\u9650\u7C7B\u578B",name:"type",radioType:"button",options:[{label:"\u7BA1\u7406\u5458",value:"admin"},{label:"\u516C\u5171",value:"public"},{label:"\u6307\u5B9A\u7528\u6237",value:"restricted"}]})}},{name:"users",label:"\u5173\u8054\u7528\u6237",render:function(a,l,t){return(0,d.jsx)(O.Z,{name:["type"],children:function(g){var V=g.type;if(V=="restricted")return(0,d.jsx)(v.Z,{width:"sm",mode:"tags",name:"users",label:"\u5173\u8054\u7528\u6237",options:w})}})}}]})})]})})});A.Z=ae},24963:function(G,A,e){var j=e(67294),c=(0,j.createContext)({});A.Z=c},53893:function(G,A,e){e.r(A),e.d(A,{default:function(){return se}});var j=e(15009),c=e.n(j),B=e(99289),M=e.n(B),F=e(5574),p=e.n(F),C=e(80821),E=e(184),o=e(5966),r=e(52688),_=e(97462),R=e(62370),D=e(28036),i=e(86250),h=e(67294),O=e(91845),v=e(87662),y=e(24963),m=e(12491),n=e(85893),I=(0,h.forwardRef)(function(L,J){var Y;(0,h.useImperativeHandle)(J,function(){return{edit:function(u){var s;(s=b.current)===null||s===void 0||s.setFieldsValue({name:u.name,title:u.title,address:u.address,serverUrl:u.serverUrl,enableTLS:u.enableTLS,tlsCa:u.tlsCa,tlsCert:u.tlsCert,tlsKey:u.tlsKey,enableComposePath:u.enableComposePath}),Z(!0),ee(u.name)}}});var k=(0,h.useState)(!1),U=p()(k,2),ne=U[0],Z=U[1],b=(0,h.useRef)(),te=(0,h.useState)(""),w=p()(te,2),Q=w[0],ee=w[1],re=(0,h.useContext)(y.Z),q=re.lang;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(D.ZP,{onClick:function(){var u;ee(""),(u=b.current)===null||u===void 0||u.resetFields(),Z(!0)},type:"primary",children:"\u6DFB\u52A0\u670D\u52A1\u7AEF"}),(0,n.jsxs)(E.a,{drawerProps:{forceRender:!0},onOpenChange:function(u){Z(u)},open:ne,width:800,formRef:b,title:(Y=b.current)!==null&&Y!==void 0&&Y.getFieldValue&&b.current.getFieldValue("name")=="local"?"\u914D\u7F6E\u9ED8\u8BA4Docker\u670D\u52A1\u7AEF":"\u6DFB\u52A0\u8FDC\u7A0BDocker\u670D\u52A1\u7AEF",onFinish:function(){var W=M()(c()().mark(function u(s){var a;return c()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,v.ad)({name:s.name,title:s.title,address:s.address,serverUrl:s.serverUrl,tlsCa:s.tlsCa,tlsCert:s.tlsCert,tlsKey:s.tlsKey,enableTLS:s.enableTLS,enableComposePath:s.enableComposePath,composePath:s.enableComposePath?s.composePath:""});case 2:return a=t.sent,L.onFinish&&L.onFinish(),t.abrupt("return",!0);case 5:case"end":return t.stop()}},u)}));return function(u){return W.apply(this,arguments)}}(),children:[(0,n.jsx)(o.Z,{label:"\u540D\u79F0",name:"title",required:!0,rules:[{required:!0}],fieldProps:{onChange:function(u){var s="";if(u.target.value&&!Q){var a,l=(0,O.N9)(u.target.value.trim(),{toneType:"none",type:"array"});s=l.join(""),(a=b.current)===null||a===void 0||a.setFieldValue("name",s)}}}}),(0,n.jsx)(o.Z,{label:"\u6807\u8BC6",name:"name",required:!0,disabled:Q!="",rules:[{required:!0}],placeholder:"\u6807\u8BC6Docker\u73AF\u5883\uFF0C\u53EA\u5141\u8BB8\u4E3A\u82F1\u6587\u6216\u662F\u6570\u5B57"}),(0,n.jsx)(o.Z,{tooltip:"\u8BBE\u7F6E\u5BBF\u4E3B\u673A\u7684Ip\u6216\u662F\u57DF\u540D\uFF0C\u7528\u4E8E\u901A\u8FC7\u7AEF\u53E3\u7684\u5F62\u5F0F\u8BBF\u95EE\u5BB9\u5668\u3002\u652F\u6301IpV4\u53CAIpV6",label:"\u5BB9\u5668\u7AEF\u53E3\u8BBF\u95EE\u57DF\u540D",name:"serverUrl",placeholder:"\u4F8B\u5982:192.168.1.25\u30012001:db8:1::2\u3001example.com"}),(0,n.jsx)(o.Z,{label:"Docker Api \u5730\u5740",name:"address",tooltip:"\u8FDE\u63A5\u8FDC\u7A0B Docker \u65F6\u8BF7\u5148\u5F00\u542F Api \u5730\u5740\u8BBF\u95EE\u3002",placeholder:"\u4F8B\u5982\uFF1Aunix:///var/run/docker.sock\u3001tcp://192.16.0.5:2375"}),(0,n.jsxs)(i.Z,{gap:80,children:[(0,n.jsx)(r.Z,{label:"\u542F\u7528TLS",name:"enableTLS",tooltip:"\u751F\u6210\u6559\u7A0B\u89C1\uFF1Ahttps://donknap.github.io/dpanel-docs/#/zh-cn/manual/remote"}),(0,n.jsx)(_.Z,{name:["enableComposePath","name"],children:function(u){var s=u.name;if(s!="local")return(0,n.jsx)(r.Z,{label:q("system.env.createEnableComposePath"),name:"enableComposePath",tooltip:"\u5F00\u542F\u72EC\u7ACBcompose\u914D\u7F6E\u540E\uFF0C\u5207\u6362\u8FDC\u7A0B docker \u5BA2\u6237\u7AEF\u65F6\u5C06\u53EA\u4F1A\u8BFB\u53D6\u8BE5\u73AF\u5883\u4E13\u5C5E\u76EE\u5F55\u4E0B\u7684 compose \u4EFB\u52A1"})}})]}),(0,n.jsx)(_.Z,{name:["enableComposePath","name"],children:function(u){var s=u.enableComposePath,a=u.name;if(s)return(0,n.jsx)(o.Z,{label:q("system.env.createComposePath"),name:"composePath",disabled:!0,fieldProps:{value:"/dpanel/compose/compose-".concat(a!=null?a:"")}})}}),(0,n.jsx)(_.Z,{name:["enableTLS"],children:function(u){var s=u.enableTLS;if(s)return(0,n.jsxs)(i.Z,{gap:20,justify:"start",children:[(0,n.jsx)(R.Z,{name:"tlsCa",label:"\u4E0A\u4F20\u5BA2\u6237\u7AEF\u8BC1\u4E66",children:(0,n.jsx)(m.Z,{title:"\u4E0A\u4F20CA\u8BC1\u4E66 ca.pem",onImport:function(l){var t;return(t=b.current)===null||t===void 0||t.setFieldValue("tlsCa",l),!0},onLoad:function(l){if(l.indexOf("CERTIFICATE")<0)throw new Error("\u5BFC\u5165ca.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})}),(0,n.jsx)(R.Z,{name:"tlsCert",label:" ",children:(0,n.jsx)(m.Z,{title:"\u4E0A\u4F20\u8BC1\u4E66\u6587\u4EF6 cert.pem",onImport:function(l){var t;return(t=b.current)===null||t===void 0||t.setFieldValue("tlsCert",l),!0},onLoad:function(l){if(l.indexOf("CERTIFICATE")<0)throw new Error("\u5BFC\u5165cert.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})}),(0,n.jsx)(R.Z,{label:" ",name:"tlsKey",children:(0,n.jsx)(m.Z,{title:"\u4E0A\u4F20\u5BC6\u94A5\u6587\u4EF6 key.pem",onImport:function(l){var t;return(t=b.current)===null||t===void 0||t.setFieldValue("tlsKey",l),!0},onLoad:function(l){if(l.indexOf("PRIVATE")<0)throw new Error("\u5BFC\u5165key.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})})]})}})]})]})}),f=I,x=e(8680),S=e(83403),H=e(86548),K=e(90078),X=e(78099),$=e(82346),d=e(42075),ae=e(96074),z=e(25593);function se(){var L=(0,h.useRef)(),J=(0,h.useRef)(),Y=(0,$.useSearchParams)(),k=p()(Y,2),U=k[0],ne=k[1],Z=(0,$.useModel)("@@initialState"),b=Z.initialState,te=Z.loading,w=Z.error,Q=Z.refresh,ee=Z.setInitialState,re=(0,h.useContext)(y.Z),q=re.message;return(0,n.jsx)(K._z,{header:{extra:[(0,n.jsx)(f,{ref:J,onFinish:M()(c()().mark(function W(){var u,s,a;return c()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!U.get("id")){t.next=5;break}return t.next=3,(0,v.vC)({name:(a=U.get("id"))!==null&&a!==void 0?a:"local"});case 3:return ne(""),t.abrupt("return");case 5:Q(),!((u=L.current)===null||u===void 0)&&u.reloadAndRest&&((s=L.current)===null||s===void 0||s.reloadAndRest());case 7:case"end":return t.stop()}},W)}))},"dockerEnvCreate")]},children:(0,n.jsx)(X.Z,{rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name"},{title:"\u540D\u79F0",dataIndex:"title"},{title:"\u5730\u5740",dataIndex:"address"},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(u,s,a,l,t){return(0,n.jsx)(d.Z,{split:(0,n.jsx)(ae.Z,{type:"vertical"}),children:(0,n.jsx)(z.Z.Link,{onClick:function(){var g;(g=J.current)===null||g===void 0||g.edit(s)},children:(0,n.jsx)(H.Z,{})},s.name)})}}],pagination:!1,request:M()(c()().mark(function W(){var u;return c()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,v.Kg)();case 2:return u=a.sent,U.get("id")&&u.data.list.map(function(l){if(l.name==U.get("id")){var t;(t=J.current)===null||t===void 0||t.edit(l)}}),a.abrupt("return",{data:u.data.list,total:u.data.list.length});case 5:case"end":return a.stop()}},W)})),search:!1,rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0},actionRef:L,tableAlertOptionRender:function(u){var s=u.selectedRows,a=u.selectedRowKeys;return(0,n.jsxs)(d.Z,{size:16,children:[(0,n.jsx)(x.Z,{type:S.W6.DOCKER_ENV,selected:s,onSuccess:function(){var t,P;return!((t=L.current)===null||t===void 0)&&t.reloadAndRest&&((P=L.current)===null||P===void 0||P.reloadAndRest()),!0}}),(0,n.jsx)(C.Z,{danger:!0,type:"primary",action:function(){return s.find(function(t){return t.default})?(q.warning("\u9ED8\u8BA4\u73AF\u5883\u4E0D\u80FD\u5220\u9664"),!1):(0,v._g)({name:a})},onSuccess:function(){var t,P;return Q(),!((t=L.current)===null||t===void 0)&&t.reloadAndRest&&((P=L.current)===null||P===void 0||P.reloadAndRest()),!0},onError:function(){var t,P;return!((t=L.current)===null||t===void 0)&&t.reset&&((P=L.current)===null||P===void 0||P.reset()),!0},confirm:"notification.confirm.title",children:"\u6279\u91CF\u5220\u9664"})]})}})})}}}]);
