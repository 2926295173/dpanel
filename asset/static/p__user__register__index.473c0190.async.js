"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9907],{88641:function(w,x,e){e.d(x,{Z:function(){return C}});var M=e(87462),i=e(67294),F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"},I=F,v=e(84089),h=function(c,u){return i.createElement(v.Z,(0,M.Z)({},c,{ref:u,icon:I}))},D=i.forwardRef(h),C=D},67719:function(w,x,e){e.r(x),e.d(x,{default:function(){return A}});var M=e(15009),i=e.n(M),F=e(99289),I=e.n(F),v=e(5574),h=e.n(v),D=e(68262),C=e(9361),U=e(86250),c=e(45360),u=e(67294),P=e(88360),p=e(29177),T=e(88641),R=e(94149),E=e(5966),O=e(97462),W=e(92398),r=e(85893);function b(d){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(W.Z,{centered:!0,activeKey:"register",items:[{icon:(0,r.jsx)(P.Z,{}),key:"register",label:"\u7528\u6237\u6CE8\u518C\u6216\u91CD\u7F6E"}]}),(0,r.jsx)(E.Z,{name:"username",fieldProps:{size:"large",prefix:(0,r.jsx)(p.Z,{className:"prefixIcon"}),disabled:!0,defaultValue:d.username}}),(0,r.jsx)(E.Z,{name:"email",fieldProps:{size:"large",prefix:(0,r.jsx)(T.Z,{className:"prefixIcon"}),disabled:!!d.email||!1,defaultValue:d.email},placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1",rules:d.email?[]:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1\uFF01"},{type:"email",message:"\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E\uFF01"}]}),(0,r.jsx)(E.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,r.jsx)(R.Z,{className:"prefixIcon"})},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:d.securityPassword?[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"},{min:8,message:"\u5BC6\u7801\u957F\u5EA6\u4E0D\u80FD\u5C0F\u4E8E8\u4F4D\uFF01"},{pattern:/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,message:"\u5BC6\u7801\u5FC5\u987B\u5305\u542B\u5927\u5C0F\u5199\u5B57\u6BCD\u548C\u6570\u5B57\uFF01"}]:[]},"password"),(0,r.jsx)(O.Z,{name:["password"],children:function(){return(0,r.jsx)(E.Z.Password,{fieldProps:{size:"large",prefix:(0,r.jsx)(R.Z,{className:"prefixIcon"})},placeholder:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801",name:"confirmPassword",dependencies:["password"],rules:[{required:!0,message:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801\uFF01"},function(j){var n=j.getFieldValue;return{validator:function(o,t){return!t||n("password")===t?Promise.resolve():Promise.reject(new Error("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4"))}}}]},"confirmPassword")}}),d.token&&(0,r.jsx)("input",{type:"hidden",name:"token",value:d.token})]})}var K=e(68602),B=e(82346);function G(d){try{var y=d.split(".");if(y.length!==3)throw new Error("JWT\u683C\u5F0F\u4E0D\u6B63\u786E");var j=y[1],n=j.replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(n).split("").map(function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(s)}catch(o){return console.error("JWT\u89E3\u6790\u9519\u8BEF:",o),null}}var A=function(){var d=C.Z.useToken(),y=d.token,j=(0,B.useSearchParams)(),n=h()(j,1),s=n[0],o=G(s.get("token")||""),t=(0,u.useState)(),l=h()(t,1),a=l[0],m=o.securityPassword,g=(0,u.useState)({token:s.get("token")||"",username:o.username||"",email:o.email||""}),Z=h()(g,1),f=Z[0];return(0,u.useEffect)(function(){window.document.title="DPanel - Docker \u7BA1\u7406\u9762\u677F"},[]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(U.Z,{justify:"center",align:"center",style:{height:"100vh",background:a&&a.themeUserConfig&&a.themeUserConfig.bgImage&&a.themeUserConfig.bgImage.src?"url(".concat(a.themeUserConfig.bgImage.src,")"):"".concat(y.colorBgElevated,"dd")},children:(0,r.jsx)(D.U,{onFinish:function(){var L=I()(i()().mark(function J(z){return i()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,K.MS)({password:z.password,confirmPassword:z.confirmPassword,email:z.email||f.email,token:f.token});case 2:c.ZP.success("\u6CE8\u518C\u6210\u529F"),B.history.replace("/user/login");case 4:case"end":return S.stop()}},J)}));return function(J){return L.apply(this,arguments)}}(),containerStyle:{background:"transparent",height:"auto"},logo:"",title:(0,r.jsx)("a",{href:"https://dpanel.cc",target:"_blank",children:(0,r.jsx)("img",{src:a&&a.themeUserConfig&&a.themeUserConfig.loginLogo?a.themeUserConfig.loginLogo:"/dpanel/static/asset/logo.png",width:"350"})}),subTitle:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsx)("br",{})]}),children:(0,r.jsx)(b,{securityPassword:m,token:f.token,username:f.username,email:f.email})})})})}},45360:function(w,x,e){var M=e(74902),i=e(67294),F=e(66968),I=e(53124),v=e(21532),h=e(69711),D=e(66277),C=e(16474),U=e(84926);let c=null,u=n=>n(),P=[],p={};function T(){const{getContainer:n,duration:s,rtl:o,maxCount:t,top:l}=p,a=(n==null?void 0:n())||document.body;return{getContainer:()=>a,duration:s,rtl:o,maxCount:t,top:l}}const R=i.forwardRef((n,s)=>{const{messageConfig:o,sync:t}=n,{getPrefixCls:l}=(0,i.useContext)(I.E_),a=p.prefixCls||l("message"),m=(0,i.useContext)(F.J),[g,Z]=(0,C.K)(Object.assign(Object.assign(Object.assign({},o),{prefixCls:a}),m.message));return i.useImperativeHandle(s,()=>{const f=Object.assign({},g);return Object.keys(f).forEach(L=>{f[L]=function(){return t(),g[L].apply(g,arguments)}}),{instance:f,sync:t}}),Z}),E=i.forwardRef((n,s)=>{const[o,t]=i.useState(T),l=()=>{t(T)};i.useEffect(l,[]);const a=(0,v.w6)(),m=a.getRootPrefixCls(),g=a.getIconPrefixCls(),Z=a.getTheme(),f=i.createElement(R,{ref:s,sync:l,messageConfig:o});return i.createElement(v.ZP,{prefixCls:m,iconPrefixCls:g,theme:Z},a.holderRender?a.holderRender(f):f)});function O(){if(!c){const n=document.createDocumentFragment(),s={fragment:n};c=s,u(()=>{(0,h.x)()(i.createElement(E,{ref:t=>{const{instance:l,sync:a}=t||{};Promise.resolve().then(()=>{!s.instance&&l&&(s.instance=l,s.sync=a,O())})}}),n)});return}c.instance&&(P.forEach(n=>{const{type:s,skipped:o}=n;if(!o)switch(s){case"open":{u(()=>{const t=c.instance.open(Object.assign(Object.assign({},p),n.config));t==null||t.then(n.resolve),n.setCloseFn(t)});break}case"destroy":u(()=>{c==null||c.instance.destroy(n.key)});break;default:u(()=>{var t;const l=(t=c.instance)[s].apply(t,(0,M.Z)(n.args));l==null||l.then(n.resolve),n.setCloseFn(l)})}}),P=[])}function W(n){p=Object.assign(Object.assign({},p),n),u(()=>{var s;(s=c==null?void 0:c.sync)===null||s===void 0||s.call(c)})}function r(n){const s=(0,U.J)(o=>{let t;const l={type:"open",config:n,resolve:o,setCloseFn:a=>{t=a}};return P.push(l),()=>{t?u(()=>{t()}):l.skipped=!0}});return O(),s}function b(n,s){const o=(0,v.w6)(),t=(0,U.J)(l=>{let a;const m={type:n,args:s,resolve:l,setCloseFn:g=>{a=g}};return P.push(m),()=>{a?u(()=>{a()}):m.skipped=!0}});return O(),t}const K=n=>{P.push({type:"destroy",key:n}),O()},B=["success","info","warning","error","loading"],A={open:r,destroy:K,config:W,useMessage:C.Z,_InternalPanelDoNotUseOrYouWillBeFired:D.ZP};B.forEach(n=>{A[n]=function(){for(var s=arguments.length,o=new Array(s),t=0;t<s;t++)o[t]=arguments[t];return b(n,o)}});const d=()=>{};let y=null,j=null;x.ZP=A}}]);
