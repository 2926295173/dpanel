"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7007],{99861:function(Se,ie,a){var le=a(64599),r=a.n(le),G=a(15009),n=a.n(G),Z=a(99289),E=a.n(Z),s=a(5574),L=a.n(s),b=a(42119),y=a(83062),f=a(67294),D=a(92754),O=a(184),M=a(38345),Y=a(3616),ne=a(36146),c=a(68297),u=a(85893),h=(0,f.forwardRef)(function(o,l){(0,f.useImperativeHandle)(l,function(){return{start:function(){var W;return S(!0),ee((W=o.image)!==null&&W!==void 0?W:[])},finish:function(){S(!1)},pull:function(W){return S(!0),ee(W)}}});var Q=(0,f.useState)(0),Me=L()(Q,2),d=Me[0],e=Me[1],q=(0,f.useRef)(),_=(0,f.useState)(!1),xe=L()(_,2),je=xe[0],S=xe[1],B=(0,f.useState)([]),ge=L()(B,2),be=ge[0],ue=ge[1],he=new ne.Uo("components.appCompose");function ee(te){return me.apply(this,arguments)}function me(){return me=E()(n()().mark(function te(W){var Te,H,fe,V,Ze,We,ke;return n()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:H=0,ue(W),fe=r()(W),z.prev=3,fe.s();case 5:if((V=fe.n()).done){z.next=15;break}return We=V.value,e(H),(Ze=q.current)===null||Ze===void 0||Ze.setStart(We),z.next=11,(0,c.Ze)({tag:We,type:"pull"});case 11:ke=z.sent,H++;case 13:z.next=5;break;case 15:z.next=20;break;case 17:z.prev=17,z.t0=z.catch(3),fe.e(z.t0);case 20:return z.prev=20,fe.f(),z.finish(20);case 23:(Te=q.current)===null||Te===void 0||Te.setFinish(),e(H),o.finishAutoHide&&S(!1);case 26:case"end":return z.stop()}},te,null,[[3,17,20,23]])})),me.apply(this,arguments)}return(0,u.jsxs)(O.a,{trigger:o.trigger,open:je,submitter:!1,title:he.format("pullImageTitle"),onOpenChange:function(){var te=E()(n()().mark(function W(Te){var H,fe;return n()().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:S(Te),Te&&o.trigger&&ee((H=o.image)!==null&&H!==void 0?H:[]),Te||(fe=q.current)===null||fe===void 0||fe.close();case 3:case"end":return Ze.stop()}},W)}));return function(W){return te.apply(this,arguments)}}(),drawerProps:{forceRender:!0,width:Y.R_},children:[(0,u.jsx)(M.Z,{children:be&&(0,u.jsx)(b.Z,{current:d,items:be.map(function(te,W){return{title:(0,u.jsx)(y.Z,{title:te,children:te.length>15?te.substring(0,6)+" ... "+te.substring(te.length-6):te}),key:W}})})}),(0,u.jsx)(M.Z,{children:(0,u.jsx)(D.Z,{ref:q})})]})});ie.Z=h},8287:function(Se,ie,a){var le=a(5574),r=a.n(le),G=a(15009),n=a.n(G),Z=a(99289),E=a.n(Z),s=a(13822),L=a(83622),b=a(85265),y=a(42075),f=a(83062),D=a(67294),O=a(81146),M=a(1883),Y=a(58638),ne=a(62597),c=a(3616),u=a(82346),h=a(36146),o=a(85893),l=(0,D.forwardRef)(function(Q,Me){(0,D.useImperativeHandle)(Me,function(){return{show:function(he){return E()(n()().mark(function ee(){var me;return n()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,(0,s.jV)({md5:he});case 2:me=W.sent,me.data&&B(me.data.info),_(!0);case 5:case"end":return W.stop()}},ee)}))()}}});var d=(0,D.useState)(!1),e=r()(d,2),q=e[0],_=e[1],xe=(0,D.useState)(),je=r()(xe,2),S=je[0],B=je[1],ge=(0,D.useRef)(),be=new h.Uo("components.appDetail");return(0,o.jsxs)(o.Fragment,{children:[Q.showTriggerButton&&(0,o.jsx)(L.ZP,{icon:(0,o.jsx)(M.Z,{}),onClick:E()(n()().mark(function ue(){return n()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:B(Q.containerInfo),_(!0);case 2:case"end":return ee.stop()}},ue)})),children:h.FD.format("listManageLog")},"log"),(0,o.jsx)(b.Z,{title:be.format("titleLog"),open:q,forceRender:!0,onClose:function(){_(!1)},afterOpenChange:function(he){if(he)setTimeout(function(){var me,te;(me=ge.current)===null||me===void 0||me.start(),(te=ge.current)===null||te===void 0||te.fit()},1e3);else{var ee;(ee=ge.current)===null||ee===void 0||ee.close()}},width:c.FK,extra:(0,o.jsx)(y.Z,{children:(0,o.jsx)(u.Link,{to:"/container/log/".concat(S==null?void 0:S.Name),target:"_blank",onClick:function(){var he;(he=ge.current)===null||he===void 0||he.close(),_(!1)},children:(0,o.jsx)(f.Z,{title:h.FD.format("listManageOpenNewWindow"),children:(0,o.jsx)(Y.Z,{})})})}),children:S&&q&&(0,o.jsx)(O.Z,{ref:ge,showInDrawer:!0,id:"container:log:".concat(S==null?void 0:S.Id),request:function(){var ue=E()(n()().mark(function he(ee){var me;return n()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,(0,ne.Tb)({id:(me=S.Id)!==null&&me!==void 0?me:"",lineTotal:ee.lineTotal,download:ee.download,showTime:ee.showTime});case 2:case"end":return W.stop()}},he)}));return function(he){return ue.apply(this,arguments)}}(),download:function(){var ue=E()(n()().mark(function he(ee){var me,te,W,Te;return n()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.next=2,(0,ne.XH)({id:(me=S.Id)!==null&&me!==void 0?me:"",lineTotal:ee.lineTotal,showTime:ee.showTime});case 2:return W=fe.sent,fe.next=5,(0,s.jV)({md5:(te=S.Id)!==null&&te!==void 0?te:""});case 5:return Te=fe.sent,fe.abrupt("return",{data:new Blob([W],{type:"text/plain"}),name:Te.data.info.Name.replaceAll("/","")+"_"+new Date().toLocaleDateString()+".log"});case 7:case"end":return fe.stop()}},he)}));return function(he){return ue.apply(this,arguments)}}()})})]})});ie.Z=l},67007:function(Se,ie,a){a.d(ie,{Z:function(){return qa}});var le=a(5574),r=a.n(le),G=a(15009),n=a.n(G),Z=a(99289),E=a.n(Z),s=a(67294),L=a(45605),b=a(38345),y=a(97269),f=a(26412),D=a(42075),O=a(96074),M=a(25593),Y=a(2487),ne=a(76428),c=a(44771),u=a(13822),h=a(24963),o=a(37413),l=a(5251),Q=a(82346),Me=a(87662),d=a(36146),e=a(85893);function q(t){var A,p,m,v,C,i,P,w,$,ce,x,F=new d.Uo("components.appDetail"),Pe=(0,s.useState)(""),X=r()(Pe,2),j=X[0],k=X[1],T=(0,Q.useAccess)(),re=(0,s.useContext)(h.Z),Oe=re.message,se=(0,s.useRef)(),_e=[],Ce=[],Ie=[],oe=(0,s.useState)(""),R=r()(oe,2),I=R[0],K=R[1];return(0,s.useEffect)(function(){t.data&&((0,Me.K3)().then(function(g){var N;K((N=g.data.serverUrl)!==null&&N!==void 0?N:"")}),k(t.data.info.Name))},[t.data]),(0,s.useEffect)(function(){var g,N,U;(g=se.current)===null||g===void 0||g.setFieldValue("restart",{name:(N=t.data.info.HostConfig)===null||N===void 0?void 0:N.RestartPolicy.Name,maxAccept:(U=t.data.info.HostConfig)===null||U===void 0?void 0:U.RestartPolicy.MaximumRetryCount})},[se.current,t.data]),t.data&&t.data.domain&&t.data.domain.map(function(g){Ie.push(g.setting.enableSSL?"https://"+g.serverName:"http://"+g.serverName)}),t.data.info.NetworkSettings.Ports&&Object.entries(t.data.info.NetworkSettings.Ports).forEach(function(g){var N=r()(g,2),U=N[0],ae=N[1];if(ae){var ye=U.split("/"),Ue=r()(ye,2),Fe=Ue[0],Ae=Ue[1];ae.forEach(function(ea){ea.HostPort?_e.push({PrivatePort:Fe,Type:Ae,IP:ea.HostIp,PublicPort:ea.HostPort}):Ce.push({PrivatePort:Fe,Type:Ae,IP:"",PublicPort:""})})}}),(0,e.jsxs)(e.Fragment,{children:[t.data&&t.data.info.State.Running&&(0,e.jsx)(o.Z,{publicPort:_e,privatePort:Ce,domain:Ie,serverIp:I,showInDetail:!0,ghost:t.ghost,layout:"inline"}),(0,e.jsx)(b.Z,{title:(0,e.jsx)(L.Z,{}),subTitle:F.format("titleBasic"),ghost:t.ghost,children:(0,e.jsxs)(f.Z,{column:1,bordered:!0,children:[(0,e.jsx)(f.Z.Item,{label:"Hostname",children:(0,e.jsx)(D.Z,{split:(0,e.jsx)(O.Z,{type:"vertical"}),children:(0,e.jsx)(ne.Z,{title:(A=t.data.info)===null||A===void 0?void 0:A.Config.Hostname})})}),(0,e.jsx)(f.Z.Item,{label:d.FD.format("listName"),children:(0,e.jsxs)(D.Z,{split:(0,e.jsx)(O.Z,{type:"vertical"}),children:[(0,e.jsx)(ne.Z,{title:(p=t.data.info)===null||p===void 0?void 0:p.Id.substring(0,12)}),(0,e.jsx)(M.Z.Text,{copyable:!0,editable:{tooltip:d.FD.format("listManageEdit"),onChange:function(){var g=E()(n()().mark(function U(ae){var ye;return n()().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:if((ye=t.data.info)!==null&&ye!==void 0&&ye.Id){Fe.next=2;break}return Fe.abrupt("return");case 2:return Fe.next=4,(0,u.eE)({md5:t.data.info.Id,name:ae});case 4:k(ae),Oe.success(d.FD.format("finish"));case 6:case"end":return Fe.stop()}},U)}));function N(U){return g.apply(this,arguments)}return N}()},children:(0,l.fi)(j,"/")})]})}),(0,e.jsx)(f.Z.Item,{label:d.FD.format("listNetwork"),children:((m=t.data.info)===null||m===void 0?void 0:m.State.Running)&&(0,e.jsxs)(f.Z,{column:1,bordered:!0,children:[t.data.info.NetworkSettings.Networks&&Object.keys(t.data.info.NetworkSettings.Networks).map(function(g,N){var U,ae,ye;return(0,e.jsx)(f.Z.Item,{label:g,children:g=="host"?d.FD.format("listNetworkUseHost"):(0,e.jsxs)(D.Z,{direction:"vertical",children:[(0,e.jsx)(ne.Z,{title:(U=t.data.info)===null||U===void 0?void 0:U.NetworkSettings.Networks[g].IPAddress}),(ae=t.data.info)===null||ae===void 0?void 0:ae.NetworkSettings.Networks[g].Gateway,(ye=t.data.info)===null||ye===void 0?void 0:ye.NetworkSettings.Networks[g].MacAddress]})},N)}),((v=t.data.info.HostConfig)===null||v===void 0?void 0:v.ExtraHosts)&&(0,e.jsx)(f.Z.Item,{label:d.FD.format("listNetworkUseHost"),children:(0,e.jsx)(D.Z,{direction:"vertical",children:t.data.info.HostConfig.ExtraHosts.map(function(g,N){if(g.indexOf(":")>-1){var U=g.split(":");return"".concat(U[0]," - ").concat(U.slice(1).join(":"))}})})},"host")]})}),(0,e.jsx)(f.Z.Item,{label:d.FD.format("listRunTime"),children:F.format("runTimeValue",{create:new Date((C=(i=t.data.info)===null||i===void 0?void 0:i.Created)!==null&&C!==void 0?C:"").toLocaleString(),upgrade:new Date((P=(w=t.data.info)===null||w===void 0?void 0:w.State.StartedAt)!==null&&P!==void 0?P:"").toLocaleString()})}),T.canSeeContainerListManage&&(0,e.jsx)(f.Z.Item,{label:d.FD.format("listRestartPolicy"),children:(0,e.jsx)(y.A,{name:"container-restart",submitter:!1,onValuesChange:function(){var g=E()(n()().mark(function N(U,ae){var ye,Ue;return n()().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:if((ye=t.data.info)!==null&&ye!==void 0&&ye.Id){Ae.next=2;break}return Ae.abrupt("return");case 2:return Ae.next=4,(0,u.eE)({md5:t.data.info.Id,restart:ae.restart});case 4:return Ue=Ae.sent,Oe.success(d.FD.format("finish")),Ae.abrupt("return");case 7:case"end":return Ae.stop()}},N)}));return function(N,U){return g.apply(this,arguments)}}(),layout:"inline",formRef:se,children:(0,e.jsx)(c.Z,{ghost:!0,defaultValue:($=t.data.info)===null||$===void 0||($=$.HostConfig)===null||$===void 0?void 0:$.RestartPolicy.Name})})}),(0,e.jsx)(f.Z.Item,{label:d.FD.format("listEnv"),children:(0,e.jsx)(Y.Z,{dataSource:(ce=(x=t.data.info)===null||x===void 0?void 0:x.Config.Env)!==null&&ce!==void 0?ce:[],renderItem:function(N){var U=N.split("=");return(0,e.jsxs)(Y.Z.Item,{children:[(0,e.jsx)(M.Z.Text,{code:!0,children:U[0]})," = ",(0,e.jsx)(M.Z.Text,{copyable:!0,children:U.slice(1).join("=")})]})}})})]})})]})}var _=a(60433),xe=a(85265),je=a(86250),S=a(31574);function B(t){var A,p=new d.Uo("components.appDetail");return t.data&&t.data.Mounts&&t.data.Mounts.length>0&&(0,e.jsx)(b.Z,{ghost:t.ghost,title:(0,e.jsx)(S.Z,{}),subTitle:p.format("titleVolume"),children:(0,e.jsx)(f.Z,{column:1,bordered:!0,children:(A=t.data)===null||A===void 0?void 0:A.Mounts.map(function(m,v){return(0,e.jsx)(f.Z.Item,{styles:{label:{width:"50%",wordBreak:"break-word"},content:{width:"50%",wordBreak:"break-word"}},label:m.Type=="volume"?m.Name:m.Source,children:m.Destination},v)})})})}var ge=a(43425),be=a(74842),ue=a(33160),he=a(87784),ee=a(30159),me=a(89035),te=a(95591),W=a(83622),Te=a(94359),H=a(80821),fe=a(99922),V=a(96486),Ze=a.n(V),We=a(24905),ke=a(8287),Ne=a(19632),z=a.n(Ne),$e=a(3616),pe=a(12122),ve=a(60940),J=a(27619);function Re(t){return Ee.apply(this,arguments)}function Ee(){return Ee=E()(n()().mark(function t(A){return n()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,Q.request)("/api/app/container/get-stat-info",{method:"POST",data:A}));case 1:case"end":return m.stop()}},t)})),Ee.apply(this,arguments)}function De(t){return de.apply(this,arguments)}function de(){return de=E()(n()().mark(function t(A){return n()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,Q.request)("/api/app/container/get-process-info",{method:"POST",data:A}));case 1:case"end":return m.stop()}},t)})),de.apply(this,arguments)}var Le={total:0,memory:{usage:[{name:"use",data:[]},{name:"all",show:!1,data:[]}],source:{usage:0,limit:0}},cpu:{usage:[{name:"use",data:[]}],source:{usage:0,limit:0}},network:{usage:[{name:"rx",data:[]},{name:"tx",data:[]}],source:{usageIn:0,usageOut:0}},io:{usage:[{name:"read",data:[]},{name:"write",data:[]}],source:{usageRead:0,usageWrite:0}}},we=function(A,p){switch(p.type){case"clear":return Le;case"update":var m=new Date(p.payload.read).toLocaleTimeString(),v=JSON.parse(JSON.stringify(A));if(p.payload.memory_stats&&p.payload.memory_stats.limit&&p.payload.memory_stats.usage&&(v.memory.usage=[{name:"use",data:[].concat(z()(A.memory.usage[0].data.slice(-20)),[{date:m,value:Math.round(p.payload.memory_stats.usage)}])},{name:"all",show:!1,data:[].concat(z()(A.memory.usage[1].data.slice(-20)),[{date:m,value:Math.round(p.payload.memory_stats.limit)}])}],v.memory.source={usage:p.payload.memory_stats.usage,limit:p.payload.memory_stats.limit}),p.payload&&p.payload.cpu_stats){var C=p.payload.cpu_stats.cpu_usage.total_usage-p.payload.precpu_stats.cpu_usage.total_usage,i=p.payload.cpu_stats.system_cpu_usage-p.payload.precpu_stats.system_cpu_usage;v.cpu.usage=[{name:"use",data:[].concat(z()(A.cpu.usage[0].data.slice(-20)),[{date:m,value:(C/i*p.payload.cpu_stats.online_cpus*100).toFixed(2)}])}],v.cpu.source={usage:C/i*p.payload.cpu_stats.online_cpus*100,limit:i*p.payload.cpu_stats.online_cpus*100}}return p.payload.networks&&(v.network.source={usageIn:parseFloat(p.payload.networks.eth0.rx_bytes.toFixed(2)),usageOut:parseFloat(p.payload.networks.eth0.tx_bytes.toFixed(2))},v.network.usage=[{name:"rx",data:[].concat(z()(A.network.usage[0].data.slice(-20)),[{date:m,value:parseFloat(p.payload.networks.eth0.rx_bytes.toFixed(2))}])},{name:"tx",data:[].concat(z()(A.network.usage[1].data.slice(-20)),[{date:m,value:parseFloat(p.payload.networks.eth0.tx_bytes.toFixed(2))}])}]),p.payload.blkio_stats&&p.payload.blkio_stats.io_service_bytes_recursive&&p.payload.blkio_stats.io_service_bytes_recursive.length>0&&(v.io.source={usageRead:p.payload.blkio_stats.io_service_bytes_recursive[0].value,usageWrite:p.payload.blkio_stats.io_service_bytes_recursive[1].value},v.io.usage=[{name:"read",data:[].concat(z()(A.io.usage[0].data.slice(-20)),[{date:m,value:parseFloat(p.payload.blkio_stats.io_service_bytes_recursive[0].value.toFixed(2))}])},{name:"write",data:[].concat(z()(A.io.usage[1].data.slice(-20)),[{date:m,value:parseFloat(p.payload.blkio_stats.io_service_bytes_recursive[1].value.toFixed(2))}])}]),v}},He=(0,s.forwardRef)(function(t,A){var p=(0,s.useState)(!1),m=r()(p,2),v=m[0],C=m[1],i=(0,s.useReducer)(we,Le),P=r()(i,2),w=P[0],$=P[1],ce=(0,s.useState)(),x=r()(ce,2),F=x[0],Pe=x[1],X=(0,s.useContext)(h.Z),j=X.loading,k=(0,Q.useModel)("subscriber"),T=new d.Uo("components.appDetail");(0,s.useImperativeHandle)(A,function(){return{}});function re(se){return Oe.apply(this,arguments)}function Oe(){return Oe=E()(n()().mark(function se(_e){var Ce,Ie;return n()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return j.show(),Re({id:_e}),R.next=4,De({id:_e});case 4:Ce=R.sent,Ie={columns:[],data:[]},Ce.data.list.Titles.map(function(I){Ie.columns.push({title:I,label:I,dataIndex:I})}),Ce.data.list.Processes.map(function(I,K){Ie.data.push({UID:I[0],PID:I[1],PPID:I[2],C:I[3],STIME:I[4],TTY:I[5],TIME:I[6],CMD:I[7]})}),Pe(Ie),j.destroy();case 10:case"end":return R.stop()}},se)})),Oe.apply(this,arguments)}return(0,s.useEffect)(function(){return function(){k.progress.close("container:stat:"+t.containerInfo.Id),$({type:"clear",payload:{}})}},[t.containerInfo]),(0,e.jsxs)(e.Fragment,{children:[t.showTriggerButton&&(0,e.jsx)(W.ZP,{onClick:E()(n()().mark(function se(){return n()().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:C(!0);case 1:case"end":return Ce.stop()}},se)})),icon:(0,e.jsx)(pe.Z,{}),children:d.FD.format("listManageStat")},"log"),(0,e.jsxs)(xe.Z,{title:T.format("titleStat"),open:v,onClose:function(){C(!1)},afterOpenChange:function(_e){_e?setTimeout(function(){var Ce;!((Ce=t.containerInfo)===null||Ce===void 0)&&Ce.Name&&re(t.containerInfo.Id),k.addDataHandler("container:stat:".concat(t.containerInfo.Id),function(Ie){var oe=JSON.parse(Ie.data);$({type:"update",payload:oe})})},500):(k.progress.close("container:stat:"+t.containerInfo.Id),$({type:"clear",payload:{}}))},width:$e.R_,children:[(0,e.jsxs)(b.Z,{ghost:!0,direction:"row",wrap:!0,gutter:[20,20],children:[w.memory&&w.memory.source&&(0,e.jsx)(b.Z,{colSpan:12,title:(0,e.jsx)(pe.Z,{}),subTitle:"Memory usage: ".concat((0,l.FI)(w.memory.source.usage)," / ").concat((0,l.FI)(w.memory.source.limit)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(J.Z,{name:"container-memory",data:w.memory.usage,yLabelFormatter:function(_e){return(0,l.FI)(parseFloat(_e))},yValueFormatter:function(_e){return(0,l.FI)(parseFloat(_e))},yDomainMaxCallback:function(_e){return _e.min*2}})}),(0,e.jsx)(b.Z,{colSpan:12,title:(0,e.jsx)(pe.Z,{}),subTitle:"Cpu usage: ".concat(w.cpu.source.usage.toFixed(2),"%"),headerBordered:!0,bordered:!0,children:(0,e.jsx)(J.Z,{name:"container-cpu",data:w.cpu.usage,yDomainMaxCallback:function(_e){return _e.min*100},yLabelFormatter:function(_e){return"".concat(parseFloat(_e).toFixed(2),"%")}})}),w.io&&w.io.source&&(0,e.jsx)(b.Z,{colSpan:12,title:(0,e.jsx)(pe.Z,{}),subTitle:"I/O: ".concat((0,l.FI)(w.io.source.usageRead)," / ").concat((0,l.FI)(w.io.source.usageWrite)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(J.Z,{name:"container-disk",data:w.io.usage,yDomainMaxCallback:function(_e){return _e.max*2},yLabelFormatter:function(_e){return(0,l.FI)(parseFloat(_e))}})}),w.network&&w.network.source&&(0,e.jsx)(b.Z,{colSpan:12,title:(0,e.jsx)(pe.Z,{}),subTitle:"Network: ".concat((0,l.FI)(w.network.source.usageIn)," / ").concat((0,l.FI)(w.network.source.usageOut)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(J.Z,{name:"container-network",data:w.network.usage,yDomainMaxCallback:function(_e){return _e.max*2},yLabelFormatter:function(_e){return(0,l.FI)(parseFloat(_e))}})})]}),(0,e.jsx)(b.Z,{title:(0,e.jsx)(_.Z,{}),subTitle:"Progress",children:(0,e.jsx)(ve.Z,{scroll:{x:"max-content"},rowKey:"PID",columns:F==null?void 0:F.columns,dataSource:F==null?void 0:F.data,pagination:{pageSize:10}})})]})]})}),Ve=He,oa=(0,s.forwardRef)(function(t,A){(0,s.useImperativeHandle)(A,function(){return{showConsole:v}});var p=new d.Uo("components.appDetail"),m=(0,s.useRef)();function v(C){var i;(i=m.current)===null||i===void 0||i.show({url:"/console/container/".concat(t.data.Id),title:t.data.Name,workDir:C})}return(0,e.jsx)(b.Z,{title:(0,e.jsx)(ge.Z,{}),ghost:t.ghost,subTitle:(0,e.jsxs)(D.Z,{children:[p.format("titleOp")," - ",function(C){if(C){var i=C.State.Status,P=C.State.Status;if(C.State.Health&&C.State.Health.Status=="unhealthy"){var w,$;i=C.State.Health.Status,P=(w=($=Ze().last(C.State.Health.Log))===null||$===void 0?void 0:$.Output)!==null&&w!==void 0?w:i}return(0,e.jsx)(Te.Z,{status:"container.".concat(i),tip:P})}}(t.data)]}),children:(0,e.jsxs)(D.Z,{wrap:!0,children:[(0,e.jsx)(H.Z,{buttonProps:{icon:(0,e.jsx)(be.Z,{}),disabled:t.data&&t.data.State.Running||t.data&&t.data.State.Paused},action:function(){var i,P;return(0,u.IW)({md5:(i=(P=t.data)===null||P===void 0?void 0:P.Id)!==null&&i!==void 0?i:"",operate:"start"})},onSuccess:function(){return t.onFinish&&t.onFinish()},children:d.FD.format("listManageStart")}),(0,e.jsx)(H.Z,{buttonProps:{icon:(0,e.jsx)(ue.Z,{})},action:function(){var i,P;return(0,u.IW)({md5:(i=(P=t.data)===null||P===void 0?void 0:P.Id)!==null&&i!==void 0?i:"",operate:"restart"})},onSuccess:function(){return t.onFinish&&t.onFinish()},children:d.FD.format("listManageRestart")}),(0,e.jsx)(H.Z,{action:function(){var i,P;return(0,u.IW)({md5:(i=(P=t.data)===null||P===void 0?void 0:P.Id)!==null&&i!==void 0?i:"",operate:"stop"})},buttonProps:{danger:!0,icon:(0,e.jsx)(he.Z,{}),disabled:t.data&&t.data.State.Dead},onSuccess:function(){return t.onFinish&&t.onFinish()},children:d.FD.format("listManageStop")}),(0,e.jsx)(H.Z,{action:function(){var i,P;return(0,u.IW)({md5:(i=(P=t.data)===null||P===void 0?void 0:P.Id)!==null&&i!==void 0?i:"",operate:"pause"})},onSuccess:function(){return t.onFinish&&t.onFinish()},buttonProps:{icon:(0,e.jsx)(ee.Z,{}),disabled:t.data&&t.data&&!t.data.State.Running},children:d.FD.format("listManagePause")}),(0,e.jsx)(H.Z,{action:function(){var i,P;return(0,u.IW)({md5:(i=(P=t.data)===null||P===void 0?void 0:P.Id)!==null&&i!==void 0?i:"",operate:"unpause"})},onSuccess:function(){return t.onFinish&&t.onFinish()},buttonProps:{icon:(0,e.jsx)(be.Z,{}),disabled:t.data&&!t.data.State.Paused},children:d.FD.format("listManageUnpause")}),(0,e.jsx)(O.Z,{type:"vertical"}),t.data&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(fe.Z,{showFileExplorer:!0,ref:m}),(0,e.jsx)(W.ZP,{type:"primary",onClick:function(){t.data&&v(t.data.Config.WorkingDir)},icon:(0,e.jsx)(me.Z,{}),children:d.FD.format("listManageConsole")})]}),t.data&&t.data.State.Running&&(0,e.jsx)(We.Z,{showConsole:!0,type:"container",name:(0,l.fi)(t.data.Name,"/"),title:(0,l.fi)(t.data.Name,"/"),trigger:(0,e.jsx)(W.ZP,{icon:(0,e.jsx)(te.Z,{}),children:d.FD.format("listManageFilePath")})}),t.data&&t.data.State.Running&&(0,e.jsx)(ke.Z,{containerInfo:t.data,showTriggerButton:!0}),t.data&&t.data.State.Running&&(0,e.jsx)(Ve,{containerInfo:t.data,showTriggerButton:!0}),(0,e.jsx)(O.Z,{type:"vertical"}),t.extra&&t.extra.map(function(C,i){return(0,e.jsx)("span",{children:C},i)})]})})}),ia=oa,Ge=a(62597),la=a(58638),aa=a(60219),ta=a(82061),na=a(25035),ua=a(57132),da=a(86548),Be=a(62370),ca=a(5966),_a=a(52688),ma=a(25278),Je=a(83062),Ke=a(84567),fa=a(85418),ha=a(40411),pa=a(93162),va=a(24739),ra=a(97462),ga=a(70146);function ja(t){var A=(0,s.useRef)(),p=new d.Uo("components.appDetail");return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(H.Z,{buttonProps:{icon:(0,e.jsx)(aa.Z,{})},confirmProps:{onOpenChange:function(v,C){var i,P;!((i=A.current)===null||i===void 0)&&i.resetFields&&((P=A.current)===null||P===void 0||P.resetFields())},description:(0,e.jsxs)(D.Z,{style:{width:650,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,e.jsx)(M.Z.Text,{children:(0,e.jsx)("ul",{children:p.prefix("backupVolumeTipOption",4).map(function(m,v){return(0,e.jsxs)("li",{children:[m," ",v==3&&(0,e.jsx)(Q.Link,{to:"/app/backup",children:d.Ob.format("container.backup")})]},v)})})}),(0,e.jsxs)(y.A,{layout:"horizontal",formRef:A,submitter:!1,children:[(0,e.jsxs)(va.UW,{children:[(0,e.jsx)(Be.Z,{valuePropName:"checked",name:"enableSelectVolume",children:(0,e.jsx)(Ke.Z,{disabled:!t.container.Mounts||t.container.Mounts.length==0,children:p.format("backupVolumeEnableSelectVolume")})}),(0,e.jsx)(Be.Z,{valuePropName:"checked",name:"enableImage",children:(0,e.jsx)(Ke.Z,{children:p.format("backupVolumeEnableImage")})}),(0,e.jsx)(ra.Z,{name:["enableImage"],children:function(v){var C=v.enableImage;if(C)return(0,e.jsx)(Be.Z,{valuePropName:"checked",name:"enableCommitImage",children:(0,e.jsx)(Ke.Z,{children:p.format("backupVolumeEnableCommitImage")})})}})]}),(0,e.jsx)(ra.Z,{name:["enableSelectVolume"],children:function(v){var C=v.enableSelectVolume;return C&&(0,e.jsx)(D.Z,{wrap:!0,children:t.container.Mounts&&t.container.Mounts.map(function(i,P){return(0,e.jsx)(Be.Z,{valuePropName:"checked",name:["volume",i.Destination],children:(0,e.jsx)(Ke.Z,{children:i.Destination})},"volume-".concat(P))})})}})]})]})},action:E()(n()().mark(function m(){var v,C,i,P;return n()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,ga.yB)({id:t.container.Name,enableImage:(v=A.current)===null||v===void 0?void 0:v.getFieldValue("enableImage"),volume:Object.keys((C=(i=A.current)===null||i===void 0?void 0:i.getFieldValue("volume"))!==null&&C!==void 0?C:{}).filter(function(ce){return ce}),enableCommitImage:(P=A.current)===null||P===void 0?void 0:P.getFieldValue("enableCommitImage")});case 2:case"end":return $.stop()}},m)})),children:p.format("backupVolumeButton")})})}var Ea=a(99861),Ye=a(73813),Pa=a(50888),Da=a(16596),Qe=a(1699),Xe=a(29453),Oa=a(71965),sa=a(77446),Ca=a(86615),ba=a(40056),Ia=a(89240);function ya(t){var A=(0,Q.useAccess)(),p=(0,s.useState)(),m=r()(p,2),v=m[0],C=m[1],i=(0,s.useRef)(),P=new d.Uo("components.appDetail");return(0,s.useEffect)(function(){A.canSeeEnableCe||(0,sa.V)({siteName:(0,Ia.HJ)(t.detail.Name)}).then(function(w){C(w.data.list)})},[t.detail]),(0,e.jsx)(Qe.u,{access:["canSeeEnableCe"],showProTips:!0,children:function($){var ce=$.canSeeEnableCe;return(0,e.jsx)(H.Z,{action:function(){var F;return(0,sa.v)({id:(F=i.current)===null||F===void 0?void 0:F.getFieldValue("id"),enableForce:!0})},buttonProps:{icon:(0,e.jsx)(Oa.Z,{}),disabled:ce},confirmProps:{onOpenChange:function(F,Pe){var X;!((X=i.current)===null||X===void 0)&&X.resetFields&&i.current.resetFields()},description:(0,e.jsx)(y.A,{formRef:i,submitter:!1,children:(0,e.jsxs)(D.Z,{direction:"vertical",style:{width:500},size:[0,15],children:[(0,e.jsx)(M.Z.Text,{children:P.format("rollbackTip")}),v&&v.length>0?(0,e.jsx)(Ca.Z.Group,{fieldProps:{style:{display:"flex",flexDirection:"column",gap:8}},name:"id",label:"",options:v&&v.map(function(x){return{label:"id: ".concat(x.id," ").concat(d.FD.format("listDeletedAt"),": ").concat((0,l.NF)(x.deletedAt)),value:x.id}})}):(0,e.jsx)(ba.Z,{message:P.format("rollbackEmptyTip"),style:{marginBottom:10}})]})})},onSuccess:function(){var F;(F=i.current)===null||F===void 0||F.resetFields(),t.onFinish&&t.onFinish()},children:d.FD.format("listManageRollback")})}})}var Ma=a(184),qe=a(14946),Ra=a(9773);function xa(t){return(0,e.jsxs)(D.Z,{children:[t.title,(0,e.jsx)(Je.Z,{title:t.help,children:(0,e.jsx)(na.Z,{})})]})}var Ta=a(55943),Sa=a(16970),Za=a(20743),Ua=a(78451),La=(0,s.forwardRef)(function(t,A){var p;(0,s.useImperativeHandle)(A,function(){return{}});var m=(0,s.useRef)(),v=(0,s.useRef)(),C=(0,s.useState)(),i=r()(C,2),P=i[0],w=i[1];return(0,s.useEffect)(function(){var $,ce;w(t.containerInfo),!(($=m.current)===null||$===void 0)&&$.reloadAndRest&&((ce=m.current)===null||ce===void 0||ce.reloadAndRest())},[t.containerInfo]),(0,e.jsxs)(b.Z,{ghost:t.ghost,children:[(0,e.jsx)(Ta.Z,{ref:v}),(0,e.jsx)(Ra.Z,{scroll:{x:"max-content"},rowKey:"key",actionRef:m,pagination:!1,ghost:!0,columns:[{title:d.FD.format("listContainerNetworkName"),key:"name",dataIndex:"networkName"},{title:d.FD.format("listContainerName"),key:"containerName",dataIndex:"containerName",width:100,render:function(ce,x,F,Pe,X){return(0,e.jsx)(Ua.Z,{content:(0,l.fi)(x.containerName,"/")})}},{title:(0,e.jsx)(xa,{title:"hostname",help:d.FD.format("listHostnameTip")}),key:"hostName",render:function(ce,x,F){return x.hostName?(0,e.jsx)(D.Z,{direction:"vertical",children:x.hostName.map(function(Pe,X){if(Pe)return(0,e.jsx)(M.Z.Text,{copyable:!0,keyboard:!0,children:Pe},X)})}):(0,e.jsx)(e.Fragment,{})}},{title:"Ip",key:"ip",render:function(ce,x,F,Pe,X){return(0,e.jsxs)(D.Z,{direction:"vertical",children:[(0,e.jsx)("span",{children:x.networkInfo.IPv4Address}),x.networkInfo.IPv6Address&&(0,e.jsx)("span",{children:x.networkInfo.IPv6Address})]})}},{title:d.FD.format("listManage"),key:"option",width:50,fixed:"right",render:function(ce,x,F,Pe,X){return(0,e.jsxs)(D.Z,{children:[x.networkName!=""&&(0,e.jsx)(M.Z.Link,{onClick:function(){var k;(k=v.current)===null||k===void 0||k.show(x.networkName)},children:(0,e.jsx)(Je.Z,{title:d.FD.format("listManageDetail"),children:(0,e.jsx)(ge.Z,{})})}),x.key!="bridge"&&x.key!="none"&&x.key!="host"&&x.networkName!=""&&(0,e.jsx)(H.Z,{buttonProps:{type:"link",danger:!0},confirmProps:{description:"notification.confirm.title"},action:function(){return(0,qe.t9)({name:x.networkName,containerName:t.containerInfo.Name})},onSuccess:function(){var k,T;!((k=m.current)===null||k===void 0)&&k.reloadAndRest&&((T=m.current)===null||T===void 0||T.reloadAndRest())},tips:d.FD.format("listManageExit"),children:(0,e.jsx)(ta.Z,{})})]})}}],request:function(){var $=E()(n()().mark(function ce(x,F,Pe){var X,j;return n()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,(0,u.jV)({md5:t.containerInfo.Name});case 2:return X=T.sent,w(X.data.info),T.next=6,(0,qe._3)({name:Object.keys(X.data.info.NetworkSettings.Networks)});case 6:return j=T.sent,T.abrupt("return",{data:j.data.list,success:!0,total:j.data.list.length});case 8:case"end":return T.stop()}},ce)}));return function(ce,x,F){return $.apply(this,arguments)}}(),toolBarRender:function(){return[(0,e.jsx)(Za.Z,{showTriggerButton:!0,onSelect:function(){var ce=E()(n()().mark(function x(F){var Pe,X;return n()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,qe.HY)({name:F.Name,containerName:t.containerInfo.Name,ipV4:""});case 2:X=k.sent,!((Pe=m.current)===null||Pe===void 0)&&Pe.reloadAndRest&&m.current.reloadAndRest();case 4:case"end":return k.stop()}},x)}));return function(x){return ce.apply(this,arguments)}}()},"joinNetwork"),(0,e.jsx)(Sa.Z,{onFinish:function(){var x,F;!((x=m.current)===null||x===void 0)&&x.reloadAndRest&&((F=m.current)===null||F===void 0||F.reloadAndRest())}},"create")]},search:!1,expandable:{expandRowByClick:!1,expandedRowKeys:Object.keys((p=P==null?void 0:P.NetworkSettings.Networks)!==null&&p!==void 0?p:{bridge:[]})}})]})}),Aa=La,wa=a(26522),Fa=(0,s.forwardRef)(function(t,A){(0,s.useImperativeHandle)(A,function(){return{}});var p=(0,s.useState)(!1),m=r()(p,2),v=m[0],C=m[1],i=new d.Uo("components.appDetail");return(0,e.jsx)(Ma.a,{submitter:!1,title:i.format("titleNetwork"),onOpenChange:function(w){C(w)},drawerProps:{width:$e.R_},open:v,trigger:(0,e.jsx)(W.ZP,{icon:(0,e.jsx)(wa.Z,{}),children:d.Ob.format("docker.network")}),children:(0,e.jsx)(Aa,{ghost:!0,containerInfo:t.containerInfo})})}),Wa=Fa,Ba=(0,s.forwardRef)(function(t,A){(0,s.useImperativeHandle)(A,function(){return{}});var p=(0,s.useRef)(),m=(0,s.useRef)(),v=(0,s.useRef)(),C=(0,s.useContext)(h.Z),i=C.loading,P=(0,s.useRef)(),w=(0,s.useRef)(),$=(0,s.useState)({status:0,error:""}),ce=r()($,2),x=ce[0],F=ce[1],Pe=(0,s.useState)(),X=r()(Pe,2),j=X[0],k=X[1],T=new d.Uo("components.appDetail"),re=(0,s.useState)(0),Oe=r()(re,2),se=Oe[0],_e=Oe[1];function Ce(oe){return Ie.apply(this,arguments)}function Ie(){return Ie=E()(n()().mark(function oe(R){var I,K,g;return n()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(K=-2,!R.ignore){U.next=6;break}if(!(R.ignore.indexOf("".concat(R.info.Name,"@*"))>-1)){U.next=4;break}return U.abrupt("return",{status:-2,error:""});case 4:if(!(R.ignore.indexOf("".concat(R.info.Name,"@").concat(R.info.Image))>-1)){U.next=6;break}return U.abrupt("return",{status:-2,error:""});case 6:return U.next=8,(0,Ye.ZQ)({tag:(I=R.info.Config.Image)!==null&&I!==void 0?I:"",md5:R.info.Image,cacheTime:3600}).catch(function(ae){K=-1});case 8:if(g=U.sent,!(g&&g.data.error&&g.data.error!="")){U.next=11;break}return U.abrupt("return",{status:-1,error:g.data.error});case 11:return g&&(g.data.digestLocal&&g.data.digestLocal.length>0?K=g.data.upgrade?1:2:g.data.error&&g.data.error!=""?K=-1:g.data.digestLocal.length==0?K=-3:K=-2),U.abrupt("return",{status:K,error:""});case 13:case"end":return U.stop()}},oe)})),Ie.apply(this,arguments)}return(0,s.useEffect)(function(){t.checkContainerUpgrade&&(F({status:0}),Ce(t.data).then(function(oe){F(oe)})),se>1?(0,u.jV)({md5:t.data.info.Id}).then(function(oe){k(oe.data)}):k(t.data)},[t.data,se]),(0,e.jsx)(b.Z,{ghost:t.ghost,title:(0,e.jsx)(ge.Z,{}),subTitle:T.format("titleManage"),children:(0,e.jsxs)(D.Z,{wrap:!0,children:[(0,e.jsx)(H.Z,{buttonProps:{icon:(0,e.jsx)(la.Z,{})},confirmProps:{description:(0,e.jsx)(D.Z,{children:T.format("exportConfirm")})},action:function(){var R;return(0,u.LJ)({md5:(R=j==null?void 0:j.info.Id)!==null&&R!==void 0?R:""})},onSuccess:function(R){var I,K=new Blob([R],{type:"application/tar"});(0,pa.saveAs)(K,(0,l.fi)((I=j==null?void 0:j.info.Name)!==null&&I!==void 0?I:"","/")+".tar")},children:T.format("exportButton")}),(0,e.jsx)(H.Z,{buttonProps:{icon:(0,e.jsx)(aa.Z,{})},confirmProps:{onOpenChange:function(R,I){var K;!((K=m.current)===null||K===void 0)&&K.resetFields&&m.current.resetFields()},title:T.format("commitConfirmTitle"),description:(0,e.jsx)(D.Z,{style:{width:400,marginTop:"10px",paddingRight:"10px"},direction:"vertical",children:(0,e.jsx)(y.A,{formRef:m,submitter:!1,children:(0,e.jsx)(Be.Z,{name:"saveImageName",children:(0,e.jsx)(ma.Z,{addonBefore:T.format("commitConfirmSaveImageName")})})})})},action:function(){var R,I,K;return(0,u.Re)({md5:(R=j==null?void 0:j.info.Id)!==null&&R!==void 0?R:"",name:(I=(K=m.current)===null||K===void 0?void 0:K.getFieldValue("saveImageName"))!==null&&I!==void 0?I:j==null?void 0:j.info.Name})},children:T.format("commitButton")}),j&&(0,e.jsx)(Qe.u,{access:"canSeeContainerBackup",children:(0,e.jsx)(ja,{container:j.info})}),(0,e.jsx)(O.Z,{type:"vertical"}),j&&(0,e.jsx)(H.Z,{action:E()(n()().mark(function oe(){var R,I,K,g,N;return n()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,(0,Ge.Ct)({md5:(R=j==null?void 0:j.info.Id)!==null&&R!==void 0?R:"",deleteImage:(I=(K=p.current)===null||K===void 0?void 0:K.getFieldValue("deleteImage"))!==null&&I!==void 0?I:!1,deleteVolume:(g=(N=p.current)===null||N===void 0?void 0:N.getFieldValue("deleteVolume"))!==null&&g!==void 0?g:!1});case 2:return ae.abrupt("return",(0,Xe.rn)({name:j==null?void 0:j.info.Name}));case 3:case"end":return ae.stop()}},oe)})),buttonProps:{danger:!0,type:"primary",icon:(0,e.jsx)(ta.Z,{})},confirmProps:{description:(0,e.jsxs)(D.Z,{style:{width:200},direction:"vertical",children:[(0,e.jsx)(M.Z.Text,{children:d.FD.format("confirm.title")}),(0,e.jsxs)(y.A,{formRef:p,layout:"inline",submitter:!1,children:[(0,e.jsx)(Be.Z,{addonAfter:(0,e.jsx)(Je.Z,{title:T.format("deleteConfirmTip"),children:(0,e.jsx)(na.Z,{})}),name:"deleteVolume",valuePropName:"checked",children:(0,e.jsx)(Ke.Z,{children:T.format("deleteConfirmDeleteVolume")})}),(0,e.jsx)(Be.Z,{name:"deleteImage",valuePropName:"checked",children:(0,e.jsx)(Ke.Z,{children:T.format("deleteConfirmDeleteImage")})})]})]})},onSuccess:function(){i.destroy(),t.checkContainerUpgrade&&t.checkContainerUpgrade()},children:T.format("deleteButton")}),(0,e.jsx)(H.Z,{buttonProps:{icon:(0,e.jsx)(ua.Z,{})},confirmProps:{description:(0,e.jsxs)(D.Z,{style:{width:400,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(M.Z.Text,{children:T.format("copyConfirmTip")}),(0,e.jsxs)(y.A,{formRef:v,submitter:!1,layout:"horizontal",children:[(0,e.jsx)("br",{}),(0,e.jsx)(ca.Z,{label:T.format("copyCopyName"),name:"copyName"}),(0,e.jsx)(_a.Z,{label:T.format("copyEnableRandomPort"),name:"enableRandomPort"})]})]})},action:E()(n()().mark(function oe(){var R,I,K,g,N;return n()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,(0,u.aF)({md5:(R=j==null?void 0:j.info.Id)!==null&&R!==void 0?R:"",copyName:(I=(K=v.current)===null||K===void 0?void 0:K.getFieldValue("copyName"))!==null&&I!==void 0?I:"",enableRandomPort:(g=(N=v.current)===null||N===void 0?void 0:N.getFieldValue("enableRandomPort"))!==null&&g!==void 0?g:!1});case 2:return ae.abrupt("return",ae.sent);case 3:case"end":return ae.stop()}},oe)})),onSuccess:function(R){var I;(I=v.current)===null||I===void 0||I.resetFields()},children:T.format("copyButton")}),(0,e.jsx)(Q.Link,{to:"/app/create/image?id=".concat(j==null?void 0:j.info.Id,"&op=update"),children:(0,e.jsx)(W.ZP,{type:"primary",icon:(0,e.jsx)(da.Z,{}),children:T.format("editButton")})}),j&&(0,e.jsx)(ya,{detail:j.info,onFinish:function(){i.destroy(),t.checkContainerUpgrade&&t.checkContainerUpgrade()}}),(0,e.jsx)(O.Z,{type:"vertical"}),j&&(0,e.jsxs)(e.Fragment,{children:[j.info.Config.Image&&(0,e.jsx)(Ea.Z,{image:[j.info.Config.Image],ref:P}),(0,e.jsx)(fa.Z,{placement:"bottomLeft",menu:{items:[{key:"1",label:(0,e.jsx)(H.Z,{action:E()(n()().mark(function oe(){var R,I,K,g,N,U;return n()().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ye.next=2,(0,Ge.ze)({md5:(R=(I=j.info)===null||I===void 0?void 0:I.Name)!==null&&R!==void 0?R:"",imageId:""});case 2:return F({status:0}),ye.next=5,(0,Ye.ZQ)({tag:(K=(g=j.info)===null||g===void 0?void 0:g.Config.Image)!==null&&K!==void 0?K:"",md5:(N=(U=j.info)===null||U===void 0?void 0:U.Image)!==null&&N!==void 0?N:"",cacheTime:0}).then(function(Ue){Ue.data.error&&Ue.data.error!=""?F({status:-1,error:Ue.data.error}):Ue.data.digestLocal&&Ue.data.digestLocal.length>0?F({status:Ue.data.upgrade?1:2}):F({status:-2})}).catch(function(Ue){F({status:-1})});case 5:return ye.abrupt("return",ye.sent);case 6:case"end":return ye.stop()}},oe)})),buttonProps:{type:"link"},children:T.format("upgradeCheckUpgrade")})},{key:"2",label:(0,e.jsx)(H.Z,{action:E()(n()().mark(function oe(){var R,I,K,g;return n()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,Ge.ze)({md5:(R=(I=j.info)===null||I===void 0?void 0:I.Name)!==null&&R!==void 0?R:"",imageId:(K=(g=j.info)===null||g===void 0?void 0:g.Image)!==null&&K!==void 0?K:""});case 2:return U.abrupt("return",U.sent);case 3:case"end":return U.stop()}},oe)})),buttonProps:{type:"link"},children:T.format("upgradeCheckUpgradeIgnoreOnce")})},{key:"3",label:(0,e.jsx)(H.Z,{action:E()(n()().mark(function oe(){var R,I;return n()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,Ge.ze)({md5:(R=(I=j.info)===null||I===void 0?void 0:I.Name)!==null&&R!==void 0?R:"",imageId:"*"});case 2:return g.abrupt("return",g.sent);case 3:case"end":return g.stop()}},oe)})),buttonProps:{type:"link"},children:T.format("upgradeCheckUpgradeIgnore")})}]},children:(0,e.jsx)(ha.Z,{title:x.error,count:T.format("checkImageUpgradeOption."+x.status),color:T.format("checkImageUpgradeColorOption."+x.status),children:(0,e.jsx)(H.Z,{buttonProps:{disabled:x.status===0,icon:x.status===0?(0,e.jsx)(Pa.Z,{}):(0,e.jsx)(Da.Z,{})},confirmProps:{description:(0,e.jsxs)(D.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(M.Z.Text,{children:T.format("upgradeConfirm")}),(0,e.jsx)(y.A,{formRef:w,submitter:!1,layout:"inline",children:(0,e.jsx)(Be.Z,{name:"enableBak",valuePropName:"checked",children:(0,e.jsx)(Ke.Z,{children:T.format("upgradeConfirmEnableBak")})})})]})},action:E()(n()().mark(function oe(){var R,I,K,g,N;return n()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,(R=P.current)===null||R===void 0?void 0:R.start();case 2:return i.show(),(I=P.current)===null||I===void 0||I.finish(),ae.next=6,(0,u.RF)({md5:(K=j.info.Id)!==null&&K!==void 0?K:"",imageTag:"",enableBak:(g=(N=w.current)===null||N===void 0?void 0:N.getFieldValue("enableBak"))!==null&&g!==void 0?g:!1});case 6:return ae.abrupt("return",ae.sent);case 7:case"end":return ae.stop()}},oe)})),onSuccess:function(R){i.destroy(),t.checkContainerUpgrade&&t.checkContainerUpgrade()},children:T.format("upgradeButton")})})})]}),(0,e.jsx)(O.Z,{type:"vertical"}),j&&(0,e.jsx)(Wa,{containerInfo:j.info}),(0,e.jsx)(W.ZP,{icon:(0,e.jsx)(ue.Z,{}),onClick:function(){_e(se+1)},children:d.FD.format("listManageRefresh")})]})})}),$a=Ba,Ka=a(65913);function ka(t){var A=new d.Uo("components.appDetail"),p=(0,s.useState)(),m=r()(p,2),v=m[0],C=m[1];return(0,s.useEffect)(function(){(0,Ye.YU)({md5:t.data.Image}).then(function(i){C(i.data)})},[t.data]),(0,e.jsx)(b.Z,{ghost:t.ghost,title:(0,e.jsx)(_.Z,{}),subTitle:A.format("titleImage"),children:(0,e.jsxs)(f.Z,{styles:{label:{width:200}},column:1,bordered:!0,children:[(0,e.jsx)(f.Z.Item,{label:"Image Tag",children:(0,e.jsx)(M.Z.Text,{copyable:!0,children:t.data.Config.Image})}),(0,e.jsx)(f.Z.Item,{label:"Image",children:t.data.Image}),(0,e.jsx)(f.Z.Item,{label:"CMD",children:(v==null?void 0:v.info.Config.Cmd)&&(v==null?void 0:v.info.Config.Cmd.join(" "))}),(0,e.jsx)(f.Z.Item,{label:"ENTRYPOINT",children:v==null?void 0:v.info.Config.Entrypoint}),(0,e.jsx)(f.Z.Item,{label:"Labels",children:(0,e.jsx)(f.Z,{column:1,bordered:!0,children:(v==null?void 0:v.info.Config.Labels)&&Object.entries(v==null?void 0:v.info.Config.Labels).map(function(i){var P=r()(i,2),w=P[0],$=P[1];return(0,e.jsx)(f.Z.Item,{label:w,children:$},w)})})})]})})}var Na=a(97857),ze=a.n(Na),Ha=a(40666),Va=a(64789),Ga=a(97937),Qa=a(66309),za=a(86738),Ja=a(90127);function Ya(t){var A=(0,s.useState)(0),p=r()(A,2),m=p[0],v=p[1],C=(0,s.useState)(),i=r()(C,2),P=i[0],w=i[1],$=new d.Uo("components.appDetail"),ce=(0,s.useState)(),x=r()(ce,2),F=x[0],Pe=x[1];return(0,s.useEffect)(function(){w([]),(0,Xe.e1)().then(function(X){w(X.data.list)})},[m,t.data.info.Name]),(0,e.jsx)(b.Z,{ghost:!0,title:(0,e.jsx)(Ha.Z,{}),subTitle:$.format("titleTag"),extra:(0,e.jsx)(Ja.Z,{trigger:(0,e.jsx)(M.Z.Link,{children:(0,e.jsx)(Va.Z,{})}),containerDetail:t.data,onFinish:function(){v(m+1)}}),children:(0,e.jsx)(D.Z,{wrap:!0,children:P&&(P==null?void 0:P.filter(function(X){return X.item&&X.item.find(function(j){return j.name==t.data.info.Name})}).map(function(X,j){return(0,e.jsx)(Qa.Z,{color:X.tagColor,closable:{closeIcon:(0,e.jsx)(za.Z,{title:d.FD.format("confirm.title"),open:F&&F[j],onOpenChange:function(T){Pe(ze()(ze()({},F),{index:T}))},onConfirm:E()(n()().mark(function k(){return n()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,(0,Xe.rn)({name:t.data.info.Name,tag:X.tag});case 2:v(m+1);case 3:case"end":return re.stop()}},k)})),children:(0,e.jsx)(Ga.Z,{})})},style:{height:35,display:"flex",borderRadius:20,justifyContent:"center",alignItems:"center"},onClose:E()(n()().mark(function k(){return n()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:Pe(ze()(ze()({},F),{index:!0}));case 1:case"end":return re.stop()}},k)})),children:(0,e.jsx)("span",{style:{paddingLeft:10,paddingRight:3},children:X.tag})},j)}))})})}var Xa=(0,s.forwardRef)(function(t,A){var p;(0,s.useImperativeHandle)(A,function(){return{show:function(T){return E()(n()().mark(function re(){return n()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return x(!0),se.next=3,X(T);case 3:case"end":return se.stop()}},re)}))()}}});var m=(0,s.useRef)(),v=(0,s.useState)(),C=r()(v,2),i=C[0],P=C[1],w=(0,s.useState)(!1),$=r()(w,2),ce=$[0],x=$[1],F=(0,s.useRef)(),Pe=new d.Uo("components.appDetail");function X(k){return j.apply(this,arguments)}function j(){return j=E()(n()().mark(function k(T){var re,Oe,se;return n()().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return(re=m.current)===null||re===void 0||re.show(),Ce.next=3,(0,u.jV)({md5:T}).finally(function(){var Ie;(Ie=m.current)===null||Ie===void 0||Ie.destroy()});case 3:Oe=Ce.sent,Oe.data&&(((se=Oe.data.info.HostConfig)===null||se===void 0?void 0:se.NetworkMode)=="host"&&Oe.data.info.Config.ExposedPorts&&Object.keys(Oe.data.info.Config.ExposedPorts).map(function(Ie){Oe.data.info.NetworkSettings.Ports||(Oe.data.info.NetworkSettings.Ports={}),Oe.data.info.NetworkSettings.Ports[Ie]=[{HostIp:"0.0.0.0",HostPort:Ie.substring(0,Ie.indexOf("/"))}]}),P(Oe.data));case 5:case"end":return Ce.stop()}},k)})),j.apply(this,arguments)}return(0,e.jsx)(xe.Z,{title:Pe.format("drawerTitle",{name:(0,l.fi)((p=i==null?void 0:i.info.Name)!==null&&p!==void 0?p:"","/")}),open:ce,onClose:function(){x(!1),t.onFinish&&t.onFinish()},width:$e.R_,children:(0,e.jsx)(Ka.Z,{ref:m,children:(0,e.jsxs)(je.Z,{vertical:!0,gap:20,children:[i&&(0,e.jsx)(Qe.u,{access:"canSeeContainerList",children:(0,e.jsx)(ia,{ref:F,ghost:!0,data:i==null?void 0:i.info,onFinish:E()(n()().mark(function k(){return n()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,X(i.info.Id);case 2:return re.t0=re.sent,re.abrupt("return",[re.t0]);case 4:case"end":return re.stop()}},k)}))})}),i&&(0,e.jsx)(Qe.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,e.jsx)($a,{ghost:!0,data:i,checkContainerUpgrade:function(){x(!1),t.onUpgradeFinish&&t.onUpgradeFinish()}})}),i&&(0,e.jsx)(Ya,{data:i}),i&&(0,e.jsx)(q,{data:i,ghost:!0}),(0,e.jsx)(B,{data:i==null?void 0:i.info,ghost:!0}),i&&(0,e.jsx)(ka,{data:i.info,ghost:!0}),(i==null?void 0:i.info.Config.Labels)&&(0,e.jsx)(b.Z,{title:(0,e.jsx)(_.Z,{}),ghost:!0,subTitle:Pe.format("titleLabel"),children:(0,e.jsx)(f.Z,{column:1,bordered:!0,children:i.info.Config.Labels&&Object.entries(i.info.Config.Labels).map(function(k){var T=r()(k,2),re=T[0],Oe=T[1];return(0,e.jsx)(f.Z.Item,{label:re,children:Oe},re)})})})]})})})}),qa=Xa},90127:function(Se,ie,a){var le=a(15009),r=a.n(le),G=a(99289),n=a.n(G),Z=a(5574),E=a.n(Z),s=a(5251),L=a(184),b=a(62370),y=a(5966),f=a(24739),D=a(64317),O=a(52688),M=a(97462),Y=a(40056),ne=a(42075),c=a(67294),u=a(1699),h=a(80821),o=a(2808),l=a(87662),Q=a(29453),Me=a(3616),d=a(36146),e=a(85893),q=(0,c.forwardRef)(function(_,xe){var je;(0,c.useImperativeHandle)(xe,function(){return{edit:function(ve){Ne(!0),$e(ve),S.current&&S.current.setFieldsValue({tag:[ve.tag],tagColor:ve.tagColor,enableShowGroup:ve.enableShowGroup})}}});var S=(0,c.useRef)(),B=(0,c.useState)(0),ge=E()(B,2),be=ge[0],ue=ge[1],he=(0,c.useState)([]),ee=E()(he,2),me=ee[0],te=ee[1],W=(0,c.useState)(),Te=E()(W,2),H=Te[0],fe=Te[1],V=(je=_.containerDetail)===null||je===void 0?void 0:je.info,Ze=(0,c.useState)(!1),We=E()(Ze,2),ke=We[0],Ne=We[1],z=new d.Uo("components.appDetail");function $e(pe){S.current&&S.current.setFieldsValue({title:pe.title,description:pe.description,url:pe.url,icon:pe.icon,name:pe.name})}return(0,c.useEffect)(function(){fe([]),(0,Q.e1)().then(function(pe){fe(pe.data.list)})},[be]),(0,c.useEffect)(function(){V&&(0,l.K3)().then(function(pe){var ve=[];V.NetworkSettings&&V.NetworkSettings.Ports&&Object.keys(V.NetworkSettings.Ports).map(function(J){V.NetworkSettings.Ports&&V.NetworkSettings.Ports[J]&&V.NetworkSettings.Ports[J].map(function(Re){Re.HostPort&&ve.push("http://".concat(pe.data.serverUrl,":").concat(Re.HostPort))})}),te(ve)})},[_.containerDetail]),(0,e.jsxs)(L.a,{drawerProps:{forceRender:!0,width:Me.R_},open:ke,onFinish:function(){var pe=n()(r()().mark(function ve(J){var Re,Ee,De,de;return r()().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return De="",J.tagColor&&J.tagColor.toHexString?J.tagColor.cleared||(De=J.tagColor.toHexString()):De=J.tagColor,de=(Re=J.enableShowGroup)!==null&&Re!==void 0?Re:_.defaultEnableShowGroup,we.next=5,(0,Q.A9)({enableShowGroup:de,tag:J.tag?J.tag[0]:"",tagColor:De,name:(Ee=V==null?void 0:V.Name)!==null&&Ee!==void 0?Ee:J.name,title:de?J.title:"",description:de?J.description:"",url:de?J.url:"",icon:de?J.icon:""});case 5:return ue(be+1),_.onFinish&&_.onFinish({tag:J.tag,tagColor:J.tagColor,enableShowGroup:de}),we.abrupt("return",!0);case 8:case"end":return we.stop()}},ve)}));return function(ve){return pe.apply(this,arguments)}}(),formRef:S,title:z.format("tagCreateTitle"),trigger:_.trigger,onOpenChange:function(ve){var J;Ne(ve),!ve&&(!((J=S.current)===null||J===void 0)&&J.resetFields)&&S.current.resetFields()},children:[_.defaultEnableShowGroup&&(0,e.jsx)(b.Z,{children:(0,e.jsx)(Y.Z,{message:new d.Uo("system.home.tag").format("emptyTip")})}),(0,e.jsx)(y.Z,{name:"name",hidden:!0}),(0,e.jsxs)(f.UW,{children:[(0,e.jsx)(D.Z,{width:"lg",label:z.format("tagFormTag"),layout:"vertical",required:!0,rules:[{required:!0}],onChange:function(ve){var J=H&&H.find(function(Ve){return ve&&ve.length>=1&&Ve.tag==ve[0]});if(J){var Re,Ee,De,de=J.item.find(function(Ve){return Ve.name==(V==null?void 0:V.Name)});(Re=S.current)===null||Re===void 0||Re.setFieldsValue({tagColor:J.tagColor,enableShowGroup:J.enableShowGroup}),de&&de.name&&$e({name:(Ee=V==null?void 0:V.Name)!==null&&Ee!==void 0?Ee:"",title:de?de.title:(0,s.fi)((De=V==null?void 0:V.Name)!==null&&De!==void 0?De:"","/"),description:de&&de.description,url:de&&de.url,icon:de&&de.icon})}if(!ve||ve.length==0){var Le,we=(Le=S.current)===null||Le===void 0?void 0:Le.getFieldValue("url");if(!we||we==""){var He;!((He=S.current)===null||He===void 0)&&He.resetFields&&S.current.resetFields()}}},options:H&&H.map(function(pe){return{lable:pe.tag,value:pe.tag}}),name:"tag",mode:"tags",fieldProps:{maxCount:1},placeholder:z.format("tagFormTagEmpty")},"tagSelect".concat(be)),!_.defaultEnableShowGroup&&(0,e.jsx)(o.Z,{label:z.format("tagFormTagColor"),name:"tagColor"})]}),!_.defaultEnableShowGroup&&(0,e.jsx)(u.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(ve){var J=ve.canSeeEnableCe;return(0,e.jsx)(O.Z,{label:z.format("tagFormEnableShowGroup"),name:"enableShowGroup",disabled:J,fieldProps:{onChange:function(Ee){if(Ee){var De,de;$e({name:(De=V==null?void 0:V.Name)!==null&&De!==void 0?De:"",title:(0,s.fi)((de=V==null?void 0:V.Name)!==null&&de!==void 0?de:"","/")})}}}})}}),(0,e.jsx)(M.Z,{name:["enableShowGroup"],children:function(ve){var J=ve.enableShowGroup;return(J||_.defaultEnableShowGroup)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(ne.Z.Compact,{children:[_.containerDetail&&(0,e.jsx)(D.Z,{label:z.format("tagFormSelectUrl"),width:"sm",name:"selectUrl",options:me.map(function(Re){return{label:Re,value:Re}}),onChange:function(Ee){var De;!((De=S.current)===null||De===void 0)&&De.setFieldValue&&S.current.setFieldValue("url",Ee)}}),(0,e.jsx)(y.Z,{label:z.format("tagFormUrl"),name:"url",width:"md"}),(0,e.jsx)(b.Z,{label:" ",children:(0,e.jsx)(h.Z,{action:function(){var Ee;return(0,Q.R3)({url:(Ee=S.current)===null||Ee===void 0?void 0:Ee.getFieldValue("url")})},onSuccess:function(Ee){var De,de,Le;(De=S.current)===null||De===void 0||De.setFieldValue("icon",Ee.data.icon),(de=S.current)===null||de===void 0||de.setFieldValue("title",Ee.data.title),(Le=S.current)===null||Le===void 0||Le.setFieldValue("description",Ee.data.description)},children:z.format("tagGetUrlDetailButton")})})]}),(0,e.jsxs)(f.UW,{children:[(0,e.jsx)(y.Z,{label:z.format("tagFormTitle"),name:"title"}),(0,e.jsx)(y.Z,{label:z.format("tagFormDescription"),name:"description"})]}),(0,e.jsx)(f.UW,{children:(0,e.jsx)(y.Z,{width:"lg",placeholder:z.format("tagFormIconEmpty"),label:z.format("tagFormIcon"),name:"icon"})})]})}})]})});ie.Z=q},44771:function(Se,ie,a){a.d(ie,{Z:function(){return L}});var le=a(36146),r=a(38345),G=a(64317),n=a(97462),Z=a(31199),E=a(86250),s=a(85893);function L(b){var y=new le.Uo("components.appForm");return(0,s.jsx)(r.Z,{ghost:b.ghost,children:(0,s.jsxs)(E.Z,{gap:50,children:[(0,s.jsx)(G.Z,{tooltip:"".concat(y.format("createParamsDemo",{params:"--restart always"})),label:b.showLabel&&y.format("createAdvRestart"),name:["restart","name"],width:"md",initialValue:b.defaultValue?b.defaultValue:"on-failure",options:y.option("createAdvRestartOption",["no","on-failure","unless-stopped","always"])}),(0,s.jsx)(n.Z,{name:["restart"],children:function(D){var O=D.restart;return O&&O.name=="on-failure"&&(0,s.jsx)(Z.Z,{width:"md",label:y.format("createAdvRestartMax"),name:["restart","maxAttempt"],initialValue:5})}})]})})}},27619:function(Se,ie,a){a.d(ie,{Z:function(){return s}});var le=a(5574),r=a.n(le),G=a(82346),n=a(67294),Z=a(64389),E=a(85893);function s(L){var b=(0,G.useModel)("@@initialState"),y=b.initialState,f="chart-area-".concat(L.name),D=(0,n.useState)(),O=r()(D,2),M=O[0],Y=O[1],ne={};L.data.forEach(function(u){u.show===!1?ne[u.name]=!1:ne[u.name]=!0});var c={tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},valueFormatter:function(h){return L.yValueFormatter?L.yValueFormatter(h):h}},legend:{selected:ne},grid:{left:"0",right:"0",bottom:"0",top:"30",containLabel:!0},xAxis:{type:"category",data:L.data[0].data.map(function(u){return u.date}),boundaryGap:!1,axisLabel:{rotate:20}},yAxis:{type:"value",axisLabel:{formatter:L.yLabelFormatter},max:function(h){if(L.yDomainMaxCallback)return L.yDomainMaxCallback(h)}},series:[]};return(0,n.useEffect)(function(){var u="",h=window.matchMedia("(prefers-color-scheme: dark)");(y==null?void 0:y.theme.algorithm)=="dark"||h.matches?u="dark":u="",M&&!M.isDisposed()&&M.dispose();var o=document.getElementById(f),l=Z.S1(o,u);l.setOption(c);var Q=new ResizeObserver(function(){l.resize()});o&&Q.observe(o),Y(l)},[y]),(0,n.useEffect)(function(){M&&!M.isDisposed()&&M.setOption({legend:{data:L.data.map(function(u){return u.name})},xAxis:{data:L.data[0].data.map(function(u){return u.date})},series:L.data.map(function(u){return{name:u.name,type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:u.data.map(function(h){return h.value})}})})},[L.data]),(0,E.jsx)("div",{style:{height:200},id:f})}},92754:function(Se,ie,a){var le=a(5574),r=a.n(le),G=a(67294),n=a(82346),Z=a(38703),E=a(85893),s=(0,G.forwardRef)(function(L,b){var y=(0,G.useState)(""),f=r()(y,2),D=f[0],O=f[1];(0,G.useImperativeHandle)(b,function(){return{setFinish:function(){u({finish:{downloading:100,extracting:100}})},setStart:function(o){o&&O(o),u({start:{downloading:0,extracting:0}})},close:function(){M.progress.close("image:pull:"+D),u({start:{downloading:0,extracting:0}})}}});var M=(0,n.useModel)("subscriber");M.addDataHandler("image:pull:"+D,function(h){u(h.data)});var Y=(0,G.useState)(),ne=r()(Y,2),c=ne[0],u=ne[1];return(0,G.useEffect)(function(){return u({start:{downloading:0,extracting:0}}),function(){M.progress.close("image:pull:"+D)}},[]),(0,E.jsx)(E.Fragment,{children:c&&Object.keys(c).map(function(h){return(0,E.jsx)(Z.Z,{format:function(l){return"".concat(l,"%")},percent:c[h].downloading,success:{percent:c[h].extracting}},h)})})});ie.Z=s},20743:function(Se,ie,a){var le=a(15009),r=a.n(le),G=a(99289),n=a.n(G),Z=a(5574),E=a.n(Z),s=a(67294),L=a(14946),b=a(64789),y=a(9773),f=a(83622),D=a(85265),O=a(42075),M=a(66309),Y=a(16970),ne=a(3616),c=a(36146),u=a(67255),h=a(85893),o=(0,s.forwardRef)(function(l,Q){(0,s.useImperativeHandle)(Q,function(){return{show:function(){q(!0)}}});var Me=(0,s.useState)(!1),d=E()(Me,2),e=d[0],q=d[1],_=(0,s.useRef)(),xe=new c.Uo("components.network");return(0,h.jsxs)(h.Fragment,{children:[l.showTriggerButton&&(0,h.jsx)(f.ZP,{onClick:function(){q(!0)},children:xe.format("selectTriggerButton")}),(0,h.jsx)(D.Z,{title:xe.format("selectDrawerTitle"),width:ne.R_,footer:!1,open:e,onClose:function(){return q(!1)},extra:(0,h.jsx)(O.Z,{children:(0,h.jsx)(Y.Z,{onFinish:function(){var S,B;!((S=_.current)===null||S===void 0)&&S.reloadAndRest&&((B=_.current)===null||B===void 0||B.reloadAndRest())}},"create")}),children:(0,h.jsx)(y.Z,{rowKey:"Name",actionRef:_,columns:[{title:c.FD.format("listTitle"),dataIndex:"Name",render:function(S,B,ge,be,ue){return B.Name=="none"||B.Name=="bridge"||B.Name=="host"?(0,h.jsxs)(h.Fragment,{children:[B.Name," ",(0,h.jsx)(M.Z,{color:"blue",children:"System"})]}):(0,h.jsx)(h.Fragment,{children:S})}},{title:c.FD.format("listType"),ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"Driver",ellipsis:!0,width:100,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4",search:!1,width:120,render:function(S,B,ge,be,ue){return B.IPAM.Config&&B.IPAM.Config[0]&&(0,h.jsxs)(O.Z,{direction:"vertical",children:[B.IPAM.Config[0].Subnet,B.IPAM.Config[0].Gateway]})}},{title:"IPV6",search:!1,render:function(S,B,ge,be,ue){return B.IPAM.Config&&B.IPAM.Config[1]&&(0,h.jsxs)(O.Z,{direction:"vertical",children:[B.IPAM.Config[1].Subnet,B.IPAM.Config[1].Gateway]})}},{title:c.FD.format("listManage"),width:100,search:!1,render:function(S,B,ge,be,ue){return[B.Name!="none"&&B.Name!="bridge"&&B.Name!="host"&&(0,h.jsx)(f.ZP,{type:"link",onClick:function(){l.onSelect(B),q(!1)},children:(0,h.jsx)(b.Z,{})},B.Id)]}}],request:function(){var je=n()(r()().mark(function S(B,ge,be){var ue;return r()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,(0,L.jR)({name:B.Name});case 2:return ue=ee.sent,ee.abrupt("return",{data:ue.data.list,success:!0,total:ue.data.list.length});case 4:case"end":return ee.stop()}},S)}));return function(S,B,ge){return je.apply(this,arguments)}}(),pagination:(0,u.Oh)()})})]})});ie.Z=o},2808:function(Se,ie,a){a.d(ie,{Z:function(){return s}});var le=a(97857),r=a.n(le),G=a(62370),n=a(51663),Z=a(67294),E=a(85893);function s(L){return(0,E.jsx)(G.Z,r()(r()({},L),{},{children:(0,E.jsx)(n.Z,{showText:function(y){return y.toHexString()},allowClear:!0,presets:[{label:"Color",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},65913:function(Se,ie,a){var le=a(5574),r=a.n(le),G=a(74330),n=a(67294),Z=a(85893),E=(0,n.forwardRef)(function(s,L){(0,n.useImperativeHandle)(L,function(){return{show:function(){D(!0)},destroy:function(){D(!1)}}});var b=(0,n.useState)(!1),y=r()(b,2),f=y[0],D=y[1];return(0,Z.jsx)(G.Z,{spinning:f,size:"default",children:s.children})});ie.Z=E},70146:function(Se,ie,a){a.d(ie,{SR:function(){return D},VE:function(){return y},Zy:function(){return L},iD:function(){return M},yB:function(){return E}});var le=a(15009),r=a.n(le),G=a(99289),n=a.n(G),Z=a(82346);function E(u){return s.apply(this,arguments)}function s(){return s=n()(r()().mark(function u(h){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,Z.request)("/api/app/container-backup/create",{data:h,method:"POST"});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},u)})),s.apply(this,arguments)}function L(u){return b.apply(this,arguments)}function b(){return b=n()(r()().mark(function u(h){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,Z.request)("/api/app/container-backup/get-list",{method:"POST",data:h}));case 1:case"end":return l.stop()}},u)})),b.apply(this,arguments)}function y(u){return f.apply(this,arguments)}function f(){return f=n()(r()().mark(function u(h){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,Z.request)("/api/app/container-backup/delete",{method:"POST",data:h}));case 1:case"end":return l.stop()}},u)})),f.apply(this,arguments)}function D(u){return O.apply(this,arguments)}function O(){return O=n()(r()().mark(function u(h){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,Z.request)("/api/app/container-backup/restore",{method:"POST",data:h}));case 1:case"end":return l.stop()}},u)})),O.apply(this,arguments)}function M(u){return Y.apply(this,arguments)}function Y(){return Y=n()(r()().mark(function u(h){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,Z.request)("/api/app/container-backup/get-detail",{method:"POST",data:h}));case 1:case"end":return l.stop()}},u)})),Y.apply(this,arguments)}function ne(u){return c.apply(this,arguments)}function c(){return c=_asyncToGenerator(_regeneratorRuntime().mark(function u(h){return _regeneratorRuntime().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,request("/api/app/site/restore",{data:h,method:"POST"});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},u)})),c.apply(this,arguments)}},13822:function(Se,ie,a){a.d(ie,{IE:function(){return L},IW:function(){return E},KK:function(){return M},LJ:function(){return ne},RF:function(){return o},Re:function(){return u},aF:function(){return Q},eE:function(){return D},jV:function(){return y}});var le=a(15009),r=a.n(le),G=a(99289),n=a.n(G),Z=a(82346);function E(d){return s.apply(this,arguments)}function s(){return s=n()(r()().mark(function d(e){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,Z.request)("/api/app/container/status",{method:"POST",data:e}));case 1:case"end":return _.stop()}},d)})),s.apply(this,arguments)}function L(d){return b.apply(this,arguments)}function b(){return b=n()(r()().mark(function d(e){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,Z.request)("/api/app/container/get-list",{data:e,method:"POST"}));case 1:case"end":return _.stop()}},d)})),b.apply(this,arguments)}function y(d){return f.apply(this,arguments)}function f(){return f=n()(r()().mark(function d(e){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,Z.request)("/api/app/container/get-detail",{data:e,method:"POST"}));case 1:case"end":return _.stop()}},d)})),f.apply(this,arguments)}function D(d){return O.apply(this,arguments)}function O(){return O=n()(r()().mark(function d(e){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,Z.request)("/api/app/container/update",{data:e,method:"POST"}));case 1:case"end":return _.stop()}},d)})),O.apply(this,arguments)}function M(){return Y.apply(this,arguments)}function Y(){return Y=n()(r()().mark(function d(){return r()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.abrupt("return",(0,Z.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return q.stop()}},d)})),Y.apply(this,arguments)}function ne(d){return c.apply(this,arguments)}function c(){return c=n()(r()().mark(function d(e){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,Z.request)("/api/app/container/export",{method:"POST",data:e,responseType:"blob"}));case 1:case"end":return _.stop()}},d)})),c.apply(this,arguments)}function u(d){return h.apply(this,arguments)}function h(){return h=n()(r()().mark(function d(e){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,Z.request)("/api/app/container/commit",{method:"POST",data:e}));case 1:case"end":return _.stop()}},d)})),h.apply(this,arguments)}function o(d){return l.apply(this,arguments)}function l(){return l=n()(r()().mark(function d(e){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,Z.request)("/api/app/container/upgrade",{method:"POST",data:e}));case 1:case"end":return _.stop()}},d)})),l.apply(this,arguments)}function Q(d){return Me.apply(this,arguments)}function Me(){return Me=n()(r()().mark(function d(e){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,Z.request)("/api/app/container/copy",{method:"POST",data:e}));case 1:case"end":return _.stop()}},d)})),Me.apply(this,arguments)}},29453:function(Se,ie,a){a.d(ie,{A9:function(){return E},R3:function(){return D},e1:function(){return L},rn:function(){return y}});var le=a(15009),r=a.n(le),G=a(99289),n=a.n(G),Z=a(82346);function E(M){return s.apply(this,arguments)}function s(){return s=n()(r()().mark(function M(Y){return r()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,Z.request)("/api/common/tag/create",{method:"POST",data:Y});case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},M)})),s.apply(this,arguments)}function L(M){return b.apply(this,arguments)}function b(){return b=n()(r()().mark(function M(Y){return r()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,Z.request)("/api/common/tag/get-list",{method:"POST",data:Y});case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},M)})),b.apply(this,arguments)}function y(M){return f.apply(this,arguments)}function f(){return f=n()(r()().mark(function M(Y){return r()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,Z.request)("/api/common/tag/delete",{method:"POST",data:Y});case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},M)})),f.apply(this,arguments)}function D(M){return O.apply(this,arguments)}function O(){return O=n()(r()().mark(function M(Y){return r()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,Z.request)("/api/pro/tag/get-url-detail",{method:"POST",data:Y});case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},M)})),O.apply(this,arguments)}},68297:function(Se,ie,a){a.d(ie,{Qd:function(){return b},Ze:function(){return s},aw:function(){return Y},cV:function(){return f},fy:function(){return O},ii:function(){return E}});var le=a(15009),r=a.n(le),G=a(99289),n=a.n(G),Z=a(82346),E=[{name:"amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"i386",arch:"386",search:[]},{name:"arm/v6",arch:"arm",search:[]},{name:"arm/v7",arch:"arm",search:[]},{name:"arm/v8",arch:"arm64",search:[]},{name:"ppc64le",arch:"ppc64le",search:[]},{name:"riscv64",arch:"riscv64",search:[]}];function s(c){return L.apply(this,arguments)}function L(){return L=n()(r()().mark(function c(u){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,Z.request)("/api/app/image/tag-sync",{method:"POST",data:u}));case 1:case"end":return o.stop()}},c)})),L.apply(this,arguments)}function b(c){return y.apply(this,arguments)}function y(){return y=n()(r()().mark(function c(u){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,Z.request)("/api/app/image/tag-add",{method:"POST",data:u}));case 1:case"end":return o.stop()}},c)})),y.apply(this,arguments)}function f(c){return D.apply(this,arguments)}function D(){return D=n()(r()().mark(function c(u){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,Z.request)("/api/app/image/tag-delete",{method:"POST",data:u}));case 1:case"end":return o.stop()}},c)})),D.apply(this,arguments)}function O(c){return M.apply(this,arguments)}function M(){return M=n()(r()().mark(function c(u){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,Z.request)("/api/app/image/tag-push-batch",{method:"POST",data:u}));case 1:case"end":return o.stop()}},c)})),M.apply(this,arguments)}function Y(c){return ne.apply(this,arguments)}function ne(){return ne=n()(r()().mark(function c(u){return r()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,Z.request)("/api/pro/image/get-remote-tag",{method:"POST",data:u}));case 1:case"end":return o.stop()}},c)})),ne.apply(this,arguments)}},77446:function(Se,ie,a){a.d(ie,{V:function(){return E},v:function(){return L}});var le=a(15009),r=a.n(le),G=a(99289),n=a.n(G),Z=a(82346);function E(y){return s.apply(this,arguments)}function s(){return s=n()(r()().mark(function y(f){return r()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,Z.request)("/api/pro/container-rollback/get-list",{data:f,method:"POST"});case 2:return O.abrupt("return",O.sent);case 3:case"end":return O.stop()}},y)})),s.apply(this,arguments)}function L(y){return b.apply(this,arguments)}function b(){return b=n()(r()().mark(function y(f){return r()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,Z.request)("/api/pro/container-rollback/restore",{data:f,method:"POST"});case 2:return O.abrupt("return",O.sent);case 3:case"end":return O.stop()}},y)})),b.apply(this,arguments)}},89240:function(Se,ie,a){a.d(ie,{HJ:function(){return Y},PD:function(){return c},Rk:function(){return ne},pM:function(){return u},yi:function(){return M},zY:function(){return h}});var le=a(64599),r=a.n(le),G=a(5251),n=a(10531),Z=a(43836),E=a(17179),s=a(74911),L=a(17637),b=a(58353),y=/^([1-9]|[1-5]?[0-9]{2,4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$/m;function f(o){return y.test(o)?parseInt(o,10):0}function D(o){typeof o!="string"&&(o=o.toString());var l=n.Z(o,"-",2),Q=Z.Z(l,f);return Q.length==1&&Q.push(Q[0]),Q}function O(o,l){typeof o!="string"&&(o=o.toString());var Q=null,Me=o.indexOf(":");Me>=0&&(Q=o.substring(0,Me),o=o.substring(Me+1)),l=typeof l=="number"?l:f(l);var d=D(o),e=Math.min(d[0],l),q=Math.max(d[1],l);return Q?Q+":"+e+"-"+q:e+"-"+q}function M(o){if(!o||!o.HostConfig||!o.HostConfig.PortBindings)return[];var l=[],Q=o.HostConfig.PortBindings,Me=E.Z(Q),d=s.Z(Me,function(e){return n.Z(e,"/")[1]});return L.Z(d,function(e,q){var _={},xe=r()(e),je;try{for(xe.s();!(je=xe.n()).done;){var S=je.value,B=r()(Q[S]),ge;try{for(B.s();!(ge=B.n()).done;){var be=ge.value;_[be.HostIp]=_[be.HostIp]||[],_[be.HostIp].push(S)}}catch(ue){B.e(ue)}finally{B.f()}}}catch(ue){xe.e(ue)}finally{xe.f()}L.Z(_,function(ue,he){var ee=b.Z(ue,function(W){return parseInt(n.Z(W,"/")[0],10)}),me=-1,te=-1;L.Z(ee,function(W){var Te=n.Z(W,"/"),H=parseInt(Te[0],10),fe=Q[W][0];Q[W].shift();var V=f(fe.HostPort);if(V>0){if(l.length>0&&me===V-1&&te===H-1){l[l.length-1].host=O(l[l.length-1].host,V),l[l.length-1].dest=O(l[l.length-1].dest,H),me=V,te=H;return}me=V,te=H}else me=-1,te=-1;var Ze=fe.HostPort.toString();he&&(Ze="".concat(he,":").concat(Ze)),l.push({host:Ze,dest:H.toString(),protocol:q})})})}),l}function Y(o){return(0,G.fi)(o,"/")}function ne(o){return o?(0,G.FI)(o):"64M"}function c(o){return o&&o>1e8?o/1e9:0}function u(o){return o?o/1024/1024:0}function h(o){return"".concat(Y(o),".pod.dpanel.local")}}}]);
