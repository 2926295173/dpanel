"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[550],{98165:function(A,m,n){n.d(m,{Z:function(){return d}});var y=n(87462),r=n(67294),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},h=l,v=n(84089),o=function(e,j){return r.createElement(v.Z,(0,y.Z)({},e,{ref:j,icon:h}))},S=r.forwardRef(o),d=S},80821:function(A,m,n){n.d(m,{Z:function(){return B}});var y=n(5574),r=n.n(y),l=n(24963),h=n(86738),v=n(28036),o=n(83062),S=n(67294),d=n(85893);function B(e){var j=(0,S.useState)(!1),E=r()(j,2),D=E[0],C=E[1],T=(0,S.useContext)(l.Z),P=T.lang,I=T.notice,M=T.message,b=function(){C(!0);var Z=e.action();Z instanceof Promise?Z.then(function(a){if(C(!1),a){typeof e.onSuccess=="function"&&e.onSuccess(a);var u="";e.messageSuccess?typeof e.messageSuccess=="function"?u=e.messageSuccess(a):u=e.messageSuccess.indexOf("notification.")==0?P(e.messageSuccess):e.messageSuccess:u=P("notification.finish"),e.asynced?M.info(u):M.success(u)}}).catch(function(a){C(!1),typeof e.onError=="function"&&e.onError(a)}):C(!1)};return e.confirm?(0,d.jsx)(h.Z,{style:{width:500},title:e.confirmTitle?e.confirmTitle:P("notification.title.tip"),description:typeof e.confirm=="string"&&e.confirm.indexOf("notification.")==0?P(e.confirm):e.confirm,onConfirm:b,okText:"Yes",cancelText:"No",onOpenChange:e.confirmOnOpenChange,children:(0,d.jsx)(v.ZP,{block:e.block,disabled:e.disabled,icon:e.icon,loading:D,danger:e.danger,type:e.type,children:e.children})}):(0,d.jsx)(o.Z,{title:e.tips,children:(0,d.jsx)(v.ZP,{block:e.block,style:e.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:e.disabled,icon:e.icon,loading:D,onClick:b,danger:e.danger,type:e.type,children:e.children})})}},24963:function(A,m,n){var y=n(67294),r=(0,y.createContext)({});m.Z=r},72340:function(A,m,n){n.r(m),n.d(m,{default:function(){return Z}});var y=n(15009),r=n.n(y),l=n(99289),h=n.n(l),v=n(80821),o=n(82346);function S(a){return d.apply(this,arguments)}function d(){return d=h()(r()().mark(function a(u){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,o.request)("/api/app/volume/get-backup-list",{method:"POST",data:u}));case 1:case"end":return t.stop()}},a)})),d.apply(this,arguments)}function B(a){return e.apply(this,arguments)}function e(){return e=h()(r()().mark(function a(u){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,o.request)("/api/app/volume/delete-backup",{method:"POST",data:u}));case 1:case"end":return t.stop()}},a)})),e.apply(this,arguments)}function j(a){return E.apply(this,arguments)}function E(){return E=h()(r()().mark(function a(u){return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,o.request)("/api/app/volume/restore",{method:"POST",data:u}));case 1:case"end":return t.stop()}},a)})),E.apply(this,arguments)}var D=n(67255),C=n(98165),T=n(90078),P=n(78099),I=n(42075),M=n(96074),b=n(67294),f=n(85893);function Z(){var a=(0,b.useRef)(),u=(0,o.useAccess)();return(0,f.jsx)(T._z,{header:{extra:[]},children:(0,f.jsx)(P.Z,{rowKey:"id",scroll:{x:"max-content"},columns:[{title:"\u6240\u5C5E\u5BB9\u5668",dataIndex:"containerId",width:150},{title:"\u5B58\u50A8\u8DEF\u5F84",search:!1,dataIndex:["setting","backupPath"],width:200,render:function(t,i,O,s){return(0,f.jsx)("span",{style:{wordBreak:"break-word"},children:i.setting.backupPath})}},{title:"\u6587\u4EF6\u540D\u79F0",search:!1,width:150,render:function(t,i,O,s,c){var x=i.setting.backupTar;return(0,f.jsx)("span",{style:{wordBreak:"break-word"},children:x.substring(x.lastIndexOf("/",x.lastIndexOf("/")-1))})}},{title:"\u5B58\u50A8\u5377\u8DEF\u5F84",search:!1,render:function(t,i,O,s,c){return(0,f.jsx)(I.Z,{wrap:!0,children:i.setting.volumePathList.map(function(x){return x})})}},{title:"\u5907\u4EFD\u65F6\u95F4",search:!1,width:200,render:function(t,i,O,s,c){return new Date(i.createdAt).toLocaleString()}},{title:"\u64CD\u4F5C",search:!1,width:100,fixed:"right",hidden:!u.canSeeContainerBackupManage,render:function(t,i,O,s,c){return(0,f.jsx)(I.Z,{split:(0,f.jsx)(M.Z,{}),children:(0,f.jsx)(v.Z,{tips:"\u6062\u590D",type:"link",action:function(){return j({id:i.id,containerMd5:i.containerId})},children:(0,f.jsx)(C.Z,{})})})}}],request:function(){var g=h()(r()().mark(function t(i,O,s){var c;return r()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,S({containerId:i.containerId,page:i.current,pageSize:i.pageSize});case 2:return c=R.sent,R.abrupt("return",{data:c.data.list,success:!0,total:c.data.list.length});case 4:case"end":return R.stop()}},t)}));return function(t,i,O){return g.apply(this,arguments)}}(),rowSelection:u.canSeeContainerBackupManage?{defaultSelectedRowKeys:[],alwaysShowAlert:!0}:void 0,actionRef:a,tableAlertOptionRender:function(t){var i=t.selectedRowKeys;return(0,f.jsx)(I.Z,{size:16,children:(0,f.jsx)(v.Z,{danger:!0,type:"primary",action:function(){return B({id:i})},onSuccess:function(){var s,c;return!((s=a.current)===null||s===void 0)&&s.reloadAndRest&&((c=a.current)===null||c===void 0||c.reloadAndRest()),!0},onError:function(){var s,c;return!((s=a.current)===null||s===void 0)&&s.reset&&((c=a.current)===null||c===void 0||c.reset()),!0},confirm:"notification.confirm.title",children:"\u6279\u91CF\u5220\u9664"})})},pagination:(0,D.O)()})})}},67255:function(A,m,n){n.d(m,{O:function(){return y},j:function(){return r}});function y(){var l=localStorage.getItem("dpanel-pagesize");return l=="all"?!1:{showSizeChanger:!0,defaultPageSize:parseInt(l!=null?l:"20")}}function r(l){var h="dpanel-table-column-".concat(l),v={};if(localStorage.getItem(h)){var o;v=JSON.parse((o=localStorage.getItem(h))!==null&&o!==void 0?o:"{}")}return{defaultValue:v,onChange:function(d){localStorage.setItem("dpanel-table-column-".concat(l),JSON.stringify(d))}}}}}]);
