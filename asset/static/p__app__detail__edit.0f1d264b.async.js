"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8878],{75516:function(le,y,t){t.d(y,{Z:function(){return C}});var T=t(89035),u=t(37476),M=t(38345),c=t(97462),m=t(62370),F=t(54006),P=t(14726),L=t(63490),b=t(78045),l=t(67294),g=t(85893);function C(p){return(0,g.jsx)(u.Y,{trigger:(0,g.jsx)(P.ZP,{type:"dashed",icon:(0,g.jsx)(T.Z,{}),children:"Console"}),submitter:!1,children:(0,g.jsxs)(M.Z,{children:[(0,g.jsx)(c.Z,{name:["entryCmd"],children:function(o){var v=o.entryCmd,j=v?"/bin/"+v:"/bin/sh";return(0,g.jsx)(L.Z,{columns:[{title:"\u5BB9\u5668\u540D\u79F0",key:"name",dataIndex:"name",ellipsis:!0},{title:"\u5DE5\u4F5C\u76EE\u5F55",key:"workDir",dataIndex:"workDir"},{title:"\u72B6\u6001",key:"status",dataIndex:"status",width:150},{title:"\u64CD\u4F5C",key:"status",width:150,render:function(n,ne,O){return(0,g.jsx)(F.Link,{to:"/console/".concat(p.container.Id,"?cmd=").concat(encodeURIComponent(j),"&workDir=").concat(encodeURIComponent(p.workDir?p.workDir:p.container.Config.WorkingDir)),target:"_blank",children:"\u767B\u5F55"})}}],dataSource:[{key:1,name:p.container.Id,status:p.container.State.Status,workDir:p.workDir?p.workDir:p.container.Config.WorkingDir}],rowKey:"key",pagination:!1})}}),(0,g.jsx)(m.Z,{name:"entryCmd",label:"Shell\u73AF\u5883\uFF08\u4EC5\u505A\u9ED8\u8BA4\u73AF\u5883\uFF0C\u767B\u5F55\u540E\u53EF\u5207\u6362\u81F3\u5176\u4ED6\u73AF\u5883\uFF09",style:{marginTop:15},initialValue:"sh",children:(0,g.jsxs)(b.ZP.Group,{children:[(0,g.jsx)(b.ZP,{value:"bash",children:"/bin/bash"}),(0,g.jsx)(b.ZP,{value:"sh",children:"/bin/sh"})]})})]})})}},80821:function(le,y,t){t.d(y,{Z:function(){return b}});var T=t(5574),u=t.n(T),M=t(24963),c=t(86738),m=t(14726),F=t(83062),P=t(67294),L=t(85893);function b(l){var g=(0,P.useState)(!1),C=u()(g,2),p=C[0],G=C[1],o=(0,P.useContext)(M.Z),v=o.lang,j=o.notice,Y=o.message,n=function(){G(!0),l.action().then(function(O){if(G(!1),typeof l.onSuccess=="function"&&l.onSuccess(O),l.messageSuccess){var d="";typeof l.messageSuccess=="function"?d=l.messageSuccess(O):d=l.messageSuccess,d.indexOf(".")>-1&&(d=v(d)),l.asynced?Y.info(d):Y.success(d)}}).catch(function(O){G(!1),typeof l.onError=="function"&&l.onError(O)})};return l.confirm?(0,L.jsx)(c.Z,{style:{width:500},title:l.confirmTitle?l.confirmTitle:v("notification.title.tip"),description:l.confirm,onConfirm:n,okText:"Yes",cancelText:"No",children:(0,L.jsx)(m.ZP,{disabled:l.disabled,icon:l.icon,loading:p,danger:l.danger,type:l.type,children:l.children})}):(0,L.jsx)(F.Z,{title:l.tips,children:(0,L.jsx)(m.ZP,{disabled:l.disabled,icon:l.icon,loading:p,onClick:n,danger:l.danger,type:l.type,children:l.children})})}},76428:function(le,y,t){t.d(y,{Z:function(){return c}});var T=t(25593),u=t(67294),M=t(85893);function c(m){return(0,M.jsx)(T.Z.Text,{copyable:!0,children:m.title})}},78498:function(le,y,t){t.d(y,{Z:function(){return F}});var T=t(25035),u=t(42075),M=t(83062),c=t(67294),m=t(85893);function F(P){return(0,m.jsxs)(u.Z,{children:[P.title,(0,m.jsx)(M.Z,{title:P.help,children:(0,m.jsx)(T.Z,{})})]})}},24963:function(le,y,t){var T=t(67294),u=(0,T.createContext)({});y.Z=u},50479:function(le,y,t){t.r(y),t.d(y,{default:function(){return en}});var T=t(15009),u=t.n(T),M=t(99289),c=t.n(M),m=t(5574),F=t.n(m),P=t(14946),L=t(29158),b=t(48689),l=t(38345),g=t(10641),C=t(42075),p=t(25593),G=t(83062),o=t(67294),v=t(80821),j=t(60335),Y=t(78498),n=t(85893),ne=(0,o.forwardRef)(function(V,X){var K=(0,o.useRef)();return(0,o.useImperativeHandle)(X,function(){return{reload:function(){var A;!((A=K.current)===null||A===void 0)&&A.reloadAndRest&&K.current.reloadAndRest()}}}),(0,n.jsx)(l.Z,{title:(0,n.jsx)(L.Z,{}),subTitle:"\u5BB9\u5668\u5173\u8054\u4FE1\u606F",ghost:!0,children:(0,n.jsx)(g.Z,{scroll:{x:"max-content"},rowKey:"key",actionRef:K,pagination:!1,options:!1,columns:[{title:"\u6240\u5C5E\u7F51\u7EDC",key:"name",dataIndex:"networkName",width:300},{title:"\u5BB9\u5668\u540D\u79F0",key:"containerName",dataIndex:"containerName"},{title:(0,n.jsx)(Y.Z,{title:"hostname",help:"\u63D0\u4F9B\u5BB9\u5668\u5185\u90E8\u8BBF\u95EE"}),key:"hostName",render:function(A,I,R){return I.hostName?(0,n.jsx)(C.Z,{direction:"vertical",children:I.hostName.map(function(Z){if(Z)return(0,n.jsx)(p.Z.Text,{copyable:!0,keyboard:!0,children:Z},Z)})}):(0,n.jsx)(n.Fragment,{})}},{title:"Ip",key:"ip",render:function(A,I,R,Z,H){return(0,n.jsxs)(C.Z,{direction:"vertical",children:[(0,n.jsx)("span",{children:I.networkInfo.IPv4Address}),I.networkInfo.IPv6Address&&(0,n.jsx)("span",{children:I.networkInfo.IPv6Address})]})}},{title:"\u64CD\u4F5C",key:"option",width:100,render:function(A,I,R,Z,H){return(0,n.jsx)(C.Z,{children:I.key!="bridge"&&I.key!="none"&&I.key!="host"&&I.networkName!=""&&(0,n.jsx)(G.Z,{title:"\u9000\u51FA\u7F51\u7EDC",children:(0,n.jsx)(v.Z,{confirm:"\u786E\u8BA4\u9000\u51FA\u8BE5\u7F51\u7EDC\uFF1F",type:"link",action:function(){var U;return(0,P.t9)({name:I.networkName,containerName:(U=V.containerName)!==null&&U!==void 0?U:""})},messageSuccess:"\u9000\u51FA\u6210\u529F",onSuccess:function(){var U,e;!((U=K.current)===null||U===void 0)&&U.reloadAndRest&&((e=K.current)===null||e===void 0||e.reloadAndRest())},children:(0,n.jsx)(b.Z,{})})})})}}],request:function(){var $=c()(u()().mark(function A(I,R,Z){var H,J;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,j.jV)({md5:V.containerName});case 2:return H=e.sent,e.next=5,(0,P._3)({name:Object.keys(H.data.info.NetworkSettings.Networks)});case 5:return J=e.sent,e.abrupt("return",{data:J.data.list,success:!0,total:J.data.list.length});case 7:case"end":return e.stop()}},A)}));return function(A,I,R){return $.apply(this,arguments)}}(),search:!1,expandable:{defaultExpandAllRows:!0,expandRowByClick:!1,defaultExpandedRowKeys:["bridge"]}})})}),O=ne,d=t(44771),E=t(76428),S=t(62597),i=t(43425),f=t(74842),x=t(87784),w=t(33160),r=t(30159),Ce=t(58638),xe=t(60219),ge=t(86548),fe=t(57132),ye=t(16596),De=t(45605),Fe=t(238),Be=t(32319),Oe=t(16664),oe=t(97269),Pe=t(62370),te=t(54006),pe=t(96074),de=t(84567),Ze=t(65233),z=t(14726),h=t(26412),Ie=t(66309),Ee=t(93162),Q=t(87662),je=t(75516),ve=t(28031),Se=t(85576),ue=t(63490),k=t(37476),We=t(86615),Ne=t(97462),Ke=t(5966),$e=t(2831);function we(V){var X=Se.Z.useModal(),K=F()(X,2),$=K[0],A=K[1],I=(0,o.useState)(),R=F()(I,2),Z=R[0],H=R[1],J=(0,o.useRef)(),U="";return(0,o.useEffect)(function(){var e,ae;(0,$e.aF)().then(function(q){H(q.data.dpanel.containerInfo)}),U=(e=localStorage.getItem("backupPath"))!==null&&e!==void 0?e:"",(ae=J.current)===null||ae===void 0||ae.setFieldValue("backupPath",U)},[]),(0,n.jsxs)(n.Fragment,{children:[A,(0,n.jsxs)(k.Y,{modalProps:{forceRender:!0},formRef:J,title:"\u5907\u4EFD\u5BB9\u5668\u5B58\u50A8\u5377",trigger:(0,n.jsxs)(z.ZP,{children:[(0,n.jsx)(xe.Z,{})," \u5907\u4EFD\u5B58\u50A8"]}),onFinish:function(){var e=c()(u()().mark(function ae(q){var ce,ee;return u()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return q.backupPath&&localStorage.setItem("backupPath",q.backupPath),ce={containerMd5:V.container.Id,backupTargetType:q.backupTargetType,backupPath:q.backupPath},q.backupTargetType=="dpanel"&&Z&&Z.Mounts&&Z.Mounts.map(function(ie){ie.Destination=="/dpanel"&&(ce.backupPath=ie.Type=="volume"?ie.Name:ce.backupPath=ie.Source)}),se.next=5,(0,ve.vp)(ce);case 5:return ee=se.sent,$.info({title:"\u6B63\u5728\u5907\u4EFD\u5B58\u50A8\u4E2D",content:(0,n.jsx)(l.Z,{ghost:!0,style:{paddingTop:30},children:(0,n.jsx)(ue.Z,{columns:[{title:"\u5907\u4EFD\u6587\u4EF6",key:"backup",dataIndex:"backup",width:300,render:function(Te,he,re){return(0,n.jsx)(p.Z.Paragraph,{ellipsis:{rows:5,expandable:!0},children:he.backupTar})}},{title:"\u5907\u4EFD\u76EE\u5F55",key:"pathList",dataIndex:"pathList",render:function(Te,he,re){return he.pathList.map(function(_e,be){return(0,n.jsx)("div",{children:_e},be)})}}],dataSource:[{key:1,backupTar:ee.data.backupTar,pathList:ee.data.pathList}],rowKey:"key",pagination:!1})}),closable:!0,width:800}),se.abrupt("return",!0);case 8:case"end":return se.stop()}},ae)}));return function(ae){return e.apply(this,arguments)}}(),children:[(0,n.jsx)(We.Z.Group,{label:"\u5907\u4EFD\u76EE\u6807\u4F4D\u7F6E",name:"backupTargetType",initialValue:"dpanel",fieldProps:{defaultValue:"dpanel"},options:[{label:"DPanel \u5907\u4EFD\u76EE\u5F55\u4E2D",value:"dpanel"},{label:"\u5BBF\u4E3B\u673A\u76EE\u5F55\u4E2D",value:"host"}]}),(0,n.jsx)(Ne.Z,{name:["backupTargetType"],children:function(ae){var q=ae.backupTargetType;return q=="host"?(0,n.jsx)(Ke.Z,{label:"\u6307\u5B9A\u5BBF\u4E3B\u673A\u76EE\u5F55",tooltip:"\u8BF7\u586B\u5199\u5BBF\u4E3B\u673A\u76EE\u5F55\uFF0C\u4E0D\u5B58\u65F6\u4F1A\u65B0\u5EFA",name:"backupPath",placeholder:"/home/backup",initialValue:"/home/backup"}):(0,n.jsxs)(n.Fragment,{children:["\u5907\u4EFD\u4F4D\u4E8E DPanel \u5BB9\u5668\u4E2D\u7684 /dpanel/backup \u8DEF\u5F84 ",(0,n.jsx)(te.Link,{target:"_blank",to:"/app/detail/file/".concat(Z==null?void 0:Z.Id,"?tab=file&path=").concat(encodeURIComponent("/dpanel/backup")),children:"\u67E5\u770B"})]})}})]})]})}var Ae=t(78451),Ve=t(24963),He=t(50070),Ge=t(64599),Ye=t.n(Ge),ze=t(40717),Je=t(184),Qe=t(4798);function Xe(V){var X=(0,o.useRef)();return[(0,n.jsx)(Je.a,{trigger:(0,n.jsx)(z.ZP,{icon:(0,n.jsx)(ze.Z,{}),children:"\u52A0\u5165\u5DF2\u6709\u7F51\u7EDC"},"button"),width:800,formRef:X,title:"\u914D\u7F6E\u7F51\u7EDC",onFinish:function(){var K=c()(u()().mark(function $(A){var I,R,Z,H,J;return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!A.network){e.next=19;break}R=Ye()(A.network),e.prev=2,R.s();case 4:if((Z=R.n()).done){e.next=11;break}return H=Z.value,e.next=8,(0,P.HY)({name:H.name,containerName:V.containerName,containerAlise:H.alise,ipV4:H.ipV4});case 8:J=e.sent;case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),R.e(e.t0);case 16:return e.prev=16,R.f(),e.finish(16);case 19:return!((I=X.current)===null||I===void 0)&&I.resetFields&&X.current.resetFields(),V.onSuccess&&V.onSuccess(),e.abrupt("return",!0);case 22:case"end":return e.stop()}},$,null,[[2,13,16,19]])}));return function($){return K.apply(this,arguments)}}(),children:(0,n.jsx)(Qe.Z,{siteName:V.containerName})},"form")]}var qe=t(99861);function en(){var V,X,K,$=(0,o.useContext)(Ve.Z),A=$.message,I=$.notice,R=$.loading,Z=(0,o.useContext)(He.AppDetailContext),H=(0,te.useParams)(),J=(0,o.useState)(),U=F()(J,2),e=U[0],ae=U[1],q=(0,o.useState)(1),ce=F()(q,2),ee=ce[0],me=ce[1],se=(0,te.useNavigate)(),ie=(0,o.useRef)(),Te=(0,o.useState)({deleteImage:!1,deleteVolume:!1,deleteLink:!1}),he=F()(Te,2),re=he[0],_e=he[1],be=(0,o.useState)(""),Re=F()(be,2),nn=Re[0],tn=Re[1],Me=(0,o.useRef)(),Le=(0,o.useRef)(),ke=(0,o.useRef)(),Ue=(0,o.useRef)();return(0,o.useEffect)(function(){var s;R.show(),Z.reload(),(0,j.jV)({md5:(s=H.id)!==null&&s!==void 0?s:""}).then(function(a){var D;a.data&&(a.data.info.HostConfig.NetworkMode=="host"&&a.data.info.Config.ExposedPorts&&Object.keys(a.data.info.Config.ExposedPorts).map(function(_){a.data.info.NetworkSettings.Ports[_]=[{HostIp:"0.0.0.0",HostPort:_.substring(0,_.indexOf("/"))}]}),ae(a.data.info)),(D=ie.current)===null||D===void 0||D.setFieldValue("restart",a.data.info.HostConfig.RestartPolicy.Name)}).finally(function(){R.destroy()}),(0,Q.pe)({groupName:"setting",name:"server"}).then(function(a){a.data.setting.value.serverIp&&tn(a.data.setting.value.serverIp)})},[ee]),(0,n.jsxs)(n.Fragment,{children:[e&&(0,n.jsx)(qe.Z,{image:[e.Config.Image],ref:Ue}),(0,n.jsxs)(l.Z,{direction:"column",gutter:[0,10],children:[(0,n.jsx)(l.Z,{title:(0,n.jsx)(i.Z,{}),subTitle:"\u72B6\u6001\u7BA1\u7406",ghost:!0,children:(0,n.jsxs)(C.Z,{wrap:!0,children:[(0,n.jsx)(v.Z,{icon:(0,n.jsx)(f.Z,{}),action:function(){var a;return(0,j.IW)({md5:(a=e==null?void 0:e.Id)!==null&&a!==void 0?a:"",operate:"start"})},messageSuccess:"\u542F\u52A8\u6210\u529F",onSuccess:function(){return me(ee+1)},disabled:e&&e.State.Running||e&&e.State.Paused,children:"\u542F\u52A8"}),(0,n.jsx)(v.Z,{action:function(){var a;return(0,j.IW)({md5:(a=e==null?void 0:e.Id)!==null&&a!==void 0?a:"",operate:"stop"})},messageSuccess:"\u505C\u6B62\u6210\u529F",icon:(0,n.jsx)(x.Z,{}),onSuccess:function(){return me(ee+1)},disabled:e&&e.State.Dead,children:"\u505C\u6B62"}),(0,n.jsx)(v.Z,{action:function(){var a;return(0,j.IW)({md5:(a=e==null?void 0:e.Id)!==null&&a!==void 0?a:"",operate:"restart"})},messageSuccess:"\u91CD\u542F\u6210\u529F",onSuccess:function(){return me(ee+1)},icon:(0,n.jsx)(w.Z,{}),children:"\u91CD\u542F"}),(0,n.jsx)(v.Z,{action:function(){var a;return(0,j.IW)({md5:(a=e==null?void 0:e.Id)!==null&&a!==void 0?a:"",operate:"pause"})},messageSuccess:"\u6682\u505C\u6210\u529F",onSuccess:function(){return me(ee+1)},icon:(0,n.jsx)(r.Z,{}),disabled:e&&!e.State.Running,children:"\u6682\u505C"}),(0,n.jsx)(v.Z,{action:function(){var a;return(0,j.IW)({md5:(a=e==null?void 0:e.Id)!==null&&a!==void 0?a:"",operate:"unpause"})},messageSuccess:"\u542F\u52A8\u6210\u529F",onSuccess:function(){return me(ee+1)},icon:(0,n.jsx)(f.Z,{}),disabled:e&&!e.State.Paused,children:"\u6062\u590D"}),(0,n.jsx)(pe.Z,{type:"vertical"}),e&&(0,n.jsx)(je.Z,{container:e}),(0,n.jsx)(pe.Z,{type:"vertical"}),e&&(!e.Config.Labels||!e.Config.Labels["com.docker.compose.project"])&&(0,n.jsx)(v.Z,{action:function(){var a;return(0,S.Ct)({md5:(a=e==null?void 0:e.Id)!==null&&a!==void 0?a:"",deleteImage:re.deleteImage,deleteVolume:re.deleteVolume})},messageSuccess:"\u5220\u9664\u6210\u529F",danger:!0,type:"primary",icon:(0,n.jsx)(x.Z,{}),onSuccess:function(){return se("/app/list")},confirm:(0,n.jsxs)(C.Z,{style:{width:280},direction:"vertical",children:[(0,n.jsx)(p.Z.Text,{children:"\u5220\u9664\u5BB9\u5668\u540E\u65E0\u6CD5\u6062\u590D,\u786E\u8BA4\u5417\uFF1F"}),(0,n.jsx)(de.Z,{name:"deleteVolume",onChange:function(a){return _e({deleteImage:re.deleteImage,deleteVolume:a.target.checked,deleteLink:re.deleteLink})},children:"\u5220\u9664\u5B58\u50A8\uFF1F"}),(0,n.jsx)(de.Z,{name:"deleteImage",onChange:function(a){return _e({deleteImage:a.target.checked,deleteVolume:re.deleteVolume,deleteLink:re.deleteLink})},children:"\u5220\u9664\u955C\u50CF\uFF1F"}),(0,n.jsx)(de.Z,{name:"deleteLink",onChange:function(a){return _e({deleteImage:re.deleteVolume,deleteVolume:re.deleteVolume,deleteLink:a.target.checked})},children:"\u5220\u9664\u5173\u8054\u5BB9\u5668\uFF1F"})]}),children:"\u5220\u9664"})]})}),(0,n.jsx)(l.Z,{title:(0,n.jsx)(i.Z,{}),subTitle:"\u5BB9\u5668\u7BA1\u7406",ghost:!0,children:(0,n.jsxs)(C.Z,{wrap:!0,children:[(0,n.jsx)(v.Z,{icon:(0,n.jsx)(Ce.Z,{}),action:function(){var a;return(0,j.LJ)({md5:(a=e==null?void 0:e.Id)!==null&&a!==void 0?a:""})},confirm:"\u5BFC\u51FA\u5BB9\u5668 Tar \u5305\u4E0D\u5305\u542B\u6302\u8F7D\u76EE\u5F55\u7684\u6570\u636E\uFF0C\u786E\u5B9A\u5417\uFF1F",onSuccess:function(a){var D=new Blob([a],{type:"application/tar"});(0,Ee.saveAs)(D,(e==null?void 0:e.Id)+".tar")},messageSuccess:"\u5BFC\u51FA\u6210\u529F",children:"\u5BFC\u51FA\u5BB9\u5668"}),(0,n.jsx)(v.Z,{icon:(0,n.jsx)(xe.Z,{}),action:c()(u()().mark(function s(){var a,D,_;return u()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,(0,j.Re)({md5:(a=e==null?void 0:e.Id)!==null&&a!==void 0?a:"",name:(D=(_=Me.current)===null||_===void 0?void 0:_.getFieldValue("saveImageName"))!==null&&D!==void 0?D:e==null?void 0:e.Name});case 2:case"end":return W.stop()}},s)})),confirmTitle:"\u5C06\u5F53\u524D\u5BB9\u5668\u4FDD\u5B58\u4E3A\u955C\u50CF",confirm:(0,n.jsx)(C.Z,{style:{width:300,marginTop:"10px",paddingRight:"10px"},direction:"vertical",children:(0,n.jsx)(oe.A,{formRef:Me,submitter:!1,children:(0,n.jsx)(Pe.Z,{name:"saveImageName",children:(0,n.jsx)(Ze.Z,{addonBefore:"\u955C\u50CF\u540D\u79F0"})})})}),messageSuccess:"\u4FDD\u5B58\u6210\u529F",children:"\u53E6\u5B58\u4E3A\u955C\u50CF"}),e&&(0,n.jsx)(we,{container:e}),(0,n.jsx)(pe.Z,{type:"vertical"}),(0,n.jsx)(te.Link,{to:"/app/create/image?containerId=".concat(e==null?void 0:e.Id,"&op=update"),children:(0,n.jsx)(z.ZP,{type:"primary",icon:(0,n.jsx)(ge.Z,{}),children:"\u7F16\u8F91\u5BB9\u5668"})}),(0,n.jsx)(te.Link,{to:"/app/create/image?containerId=".concat(e==null?void 0:e.Id,"&op=copy"),children:(0,n.jsx)(z.ZP,{icon:(0,n.jsx)(fe.Z,{}),children:"\u590D\u5236"})}),(0,n.jsx)(v.Z,{icon:(0,n.jsx)(ye.Z,{}),action:c()(u()().mark(function s(){var a,D,_,B;return u()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,(a=Ue.current)===null||a===void 0?void 0:a.start();case 2:return N.next=4,(0,j.RF)({md5:(D=e==null?void 0:e.Id)!==null&&D!==void 0?D:"",imageTag:"",enableBak:(_=(B=Le.current)===null||B===void 0?void 0:B.getFieldValue("enableBak"))!==null&&_!==void 0?_:!0});case 4:return N.abrupt("return",N.sent);case 5:case"end":return N.stop()}},s)})),confirm:(0,n.jsxs)(C.Z,{style:{width:280},direction:"vertical",children:[(0,n.jsx)(p.Z.Text,{children:"\u5C06\u4F1A\u91CD\u65B0\u62C9\u53D6\u955C\u50CF\u5E76\u91CD\u5EFA\u5BB9\u5668\uFF0C\u786E\u5B9A\u5417\uFF1F"}),(0,n.jsx)(oe.A,{formRef:Le,submitter:!1,children:(0,n.jsx)(Pe.Z,{name:"enableBak",initialValue:!0,valuePropName:"checked",children:(0,n.jsx)(de.Z,{children:"\u5907\u4EFD\u65E7\u5BB9\u5668\uFF1F"})})})]}),onSuccess:function(a){se("/app/list")},messageSuccess:"\u66F4\u65B0\u5BB9\u5668\u6210\u529F",children:"\u5FEB\u901F\u5347\u7EA7\u5BB9\u5668"}),(0,n.jsx)(pe.Z,{type:"vertical"}),e&&(0,n.jsx)(Xe,{onSuccess:function(){var a;(a=ke.current)===null||a===void 0||a.reload()},containerName:e.Name})]})}),(0,n.jsx)(l.Z,{title:(0,n.jsx)(De.Z,{}),subTitle:"\u5BB9\u5668\u72B6\u6001",ghost:!0,children:(0,n.jsxs)(h.Z,{column:1,bordered:!0,children:[(0,n.jsx)(h.Z.Item,{label:"ID",children:(0,n.jsx)(E.Z,{title:e==null?void 0:e.Id})}),(0,n.jsx)(h.Z.Item,{label:"\u5BB9\u5668\u540D\u79F0",children:(0,n.jsx)(p.Z.Text,{editable:{tooltip:"\u4FEE\u6539\u5BB9\u5668\u540D\u79F0",onChange:function(){var s=c()(u()().mark(function D(_){var B;return u()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(e!=null&&e.Id){N.next=2;break}return N.abrupt("return");case 2:return N.next=4,(0,j.eE)({md5:e.Id,name:_});case 4:B=N.sent,me(ee+1),A.success("\u4FEE\u6539\u5BB9\u5668\u540D\u79F0");case 7:case"end":return N.stop()}},D)}));function a(D){return s.apply(this,arguments)}return a}()},children:e&&e.Name})}),(0,n.jsx)(h.Z.Item,{label:(0,n.jsx)(Y.Z,{title:"\u7F51\u7EDC",help:"\u9ED8\u8BA4\u7F51\u7EDC\u53EA\u652F\u6301\u901A\u8FC7ip\u8BBF\u95EE,ip\u4F1A\u968F\u7740\u5BB9\u5668\u542F\u52A8\u505C\u6B62\u6539\u53D8.\u5982\u679C\u9700\u8981\u5728\u5BB9\u5668\u5185\u4E92\u8054,\u8BF7\u901A\u8FC7\u3010\u7F16\u8F91\u7AD9\u70B9\u3011-\u3010\u6DFB\u52A0\u5173\u8054\u3011"}),children:(e==null?void 0:e.State.Running)&&(0,n.jsxs)(h.Z,{column:1,bordered:!0,children:[e.NetworkSettings.Networks&&Object.keys(e.NetworkSettings.Networks).map(function(s,a){return(0,n.jsx)(h.Z.Item,{label:s,children:s=="host"?" Host \u7F51\u7EDC\uFF0C\u4E0E\u5BBF\u4E3B\u673A\u5171\u7528\u540C\u4E00\u7F51\u7EDC":(0,n.jsxs)(C.Z,{direction:"vertical",children:[(0,n.jsx)(E.Z,{title:e==null?void 0:e.NetworkSettings.Networks[s].IPAddress}),e==null?void 0:e.NetworkSettings.Networks[s].Gateway,e==null?void 0:e.NetworkSettings.Networks[s].MacAddress]})},"1")}),e.HostConfig.ExtraHosts&&(0,n.jsx)(h.Z.Item,{label:"\u5BBF\u4E3B\u673A\u7F51\u7EDC",children:(0,n.jsx)(C.Z,{direction:"vertical",children:e.HostConfig.ExtraHosts.map(function(s){if(s.indexOf(":")>-1){var a=s.split(":");return(0,n.jsxs)(C.Z,{children:[(0,n.jsx)(E.Z,{title:a[0]})," - ",a[1]]})}})})},"1")]})}),(0,n.jsx)(h.Z.Item,{label:"\u72B6\u6001",children:e==null?void 0:e.State.Status}),(0,n.jsx)(h.Z.Item,{label:"\u521B\u5EFA\u65F6\u95F4",children:new Date((V=e==null?void 0:e.Created)!==null&&V!==void 0?V:"").toLocaleString()}),(0,n.jsx)(h.Z.Item,{label:"\u542F\u52A8\u65F6\u95F4",children:new Date((X=e==null?void 0:e.State.StartedAt)!==null&&X!==void 0?X:"").toLocaleString()}),(0,n.jsx)(h.Z.Item,{label:"\u91CD\u542F\u7B56\u7565",children:(0,n.jsx)(oe.A,{onFinish:function(){var s=c()(u()().mark(function a(D){var _;return u()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(e!=null&&e.Id){W.next=2;break}return W.abrupt("return");case 2:return W.next=4,(0,j.eE)({md5:e.Id,restart:D.restart});case 4:return _=W.sent,A.success("\u4FEE\u6539\u91CD\u542F\u7B56\u7565\u6210\u529F"),W.abrupt("return");case 7:case"end":return W.stop()}},a)}));return function(a){return s.apply(this,arguments)}}(),formRef:ie,children:(0,n.jsx)(d.Z,{defaultValue:e==null?void 0:e.HostConfig.RestartPolicy.Name})})})]})}),e&&e.Mounts&&e.Mounts.length>0&&(0,n.jsx)(l.Z,{title:(0,n.jsx)(Fe.Z,{}),subTitle:"\u6301\u4E45\u5B58\u50A8\u8BE6\u60C5",ghost:!0,children:(0,n.jsx)(h.Z,{column:1,bordered:!0,children:e==null?void 0:e.Mounts.map(function(s,a){return(0,n.jsx)(h.Z.Item,{labelStyle:{width:"30%"},label:s.Type=="volume"?(0,n.jsx)(Ae.Z,{content:s.Name}):s.Source,children:(0,n.jsxs)(te.Link,{target:"_blank",to:"/app/detail/file/".concat(e.Id,"?tab=file&path=").concat(encodeURIComponent(s.Destination)),children:[s.Destination," ",(0,n.jsx)(Be.Z,{})]})},a)})})}),(0,n.jsx)(l.Z,{title:(0,n.jsx)(Oe.Z,{}),subTitle:"\u955C\u50CF\u8BE6\u60C5",ghost:!0,children:(0,n.jsxs)(h.Z,{labelStyle:{width:"200px"},column:1,bordered:!0,children:[(0,n.jsx)(h.Z.Item,{label:"Image Tag",children:(0,n.jsx)(te.Link,{target:"_blank",to:"/image/detail/"+(e==null?void 0:e.Image),children:e==null?void 0:e.Config.Image})}),(0,n.jsx)(h.Z.Item,{label:"Image",children:e==null?void 0:e.Image}),(0,n.jsx)(h.Z.Item,{label:"Port",children:(0,n.jsx)(C.Z,{direction:"vertical",children:(e==null?void 0:e.NetworkSettings.Ports)&&Object.keys(e.NetworkSettings.Ports).map(function(s){var a,D=(a=e==null?void 0:e.NetworkSettings.Ports[s])!==null&&a!==void 0?a:[{HostPort:null,HostIp:""}];return D.map(function(_){var B=nn;return B!=""&&B.indexOf(":")>-1&&(B="[".concat(B,"]")),B==""&&_.HostIp=="::"&&(B="[::1]"),B==""&&_.HostIp=="0.0.0.0"&&(B="127.0.0.1"),B==""&&(B=_.HostIp),(0,n.jsxs)(C.Z.Compact,{children:[(0,n.jsxs)(Ie.Z,{color:_.HostPort?"success":"",children:[_.HostPort?"".concat(_.HostIp,":").concat(_.HostPort," ->"):"",s]},s),_.HostPort?(0,n.jsx)("a",{href:"http://".concat(B,":").concat(_.HostPort),target:"_blank",children:(0,n.jsx)(L.Z,{})}):""]})})})})}),(0,n.jsx)(h.Z.Item,{label:"CMD",children:(e==null?void 0:e.Config.Cmd)&&(e==null?void 0:e.Config.Cmd.join(" "))}),(0,n.jsx)(h.Z.Item,{label:"ENTRYPOINT",children:e==null?void 0:e.Config.Entrypoint}),(0,n.jsx)(h.Z.Item,{label:"ENV",children:(0,n.jsx)(h.Z,{column:1,bordered:!0,children:(e==null?void 0:e.Config.Env)&&e.Config.Env.map(function(s,a){var D=s.split("=");return(0,n.jsx)(h.Z.Item,{label:D[0],children:(0,n.jsx)(Ae.Z,{content:D.slice(1).join("=")})},a)})})}),(0,n.jsx)(h.Z.Item,{label:"Labels",children:(0,n.jsx)(h.Z,{column:1,bordered:!0,children:e&&Object.keys(e.Config.Labels).map(function(s){return(0,n.jsx)(h.Z.Item,{label:s,children:(0,n.jsx)(p.Z.Text,{style:{width:"400px"},ellipsis:{tooltip:e.Config.Labels[s]},children:e.Config.Labels[s]})},s)})})})]})}),(e==null?void 0:e.Name)&&(0,n.jsx)(O,{containerName:(K=e==null?void 0:e.Name)!==null&&K!==void 0?K:"",ref:ke})]})]})}},50070:function(le,y,t){t.r(y),t.d(y,{AppDetailContext:function(){return j},default:function(){return Y}});var T=t(15009),u=t.n(T),M=t(99289),c=t.n(M),m=t(5574),F=t.n(m),P=t(24963),L=t(2831),b=t(60335),l=t(41123),g=t(54006),C=t(86738),p=t(25593),G=t(50136),o=t(67294),v=t(85893),j=(0,o.createContext)({});function Y(){var n,ne=(0,o.useContext)(P.Z),O=ne.lang,d=ne.loading,E=(0,g.useParams)(),S=(0,g.useSearchParams)(),i=F()(S,2),f=i[0],x=i[1],w=(n=f.get("tab"))!==null&&n!==void 0?n:"edit",r=(0,o.useState)("edit"),Ce=F()(r,2),xe=Ce[0],ge=Ce[1],fe=(0,g.useNavigate)(),ye=(0,o.useState)(1),De=F()(ye,2),Fe=De[0],Be=De[1],Oe=(0,g.useAccess)(),oe=[{label:(0,v.jsx)(g.Link,{to:"/app/detail/edit/".concat(E.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,v.jsx)(g.Link,{to:"/app/detail/domain/".concat(E.id,"?tab=domain"),children:"\u57DF\u540D\u7BA1\u7406"}),key:"domain"},{label:(0,v.jsx)(C.Z,{style:{width:500},title:O("notification.title.tip"),description:O("app.detail.createExplorerPlugin"),onConfirm:function(){fe("/app/detail/file/".concat(E.id,"?tab=file")),de(oe.filter(function(h){return h.key!="fileConfirm"})),ge("file")},okText:"Yes",cancelText:"No",children:(0,v.jsx)(p.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"})}),key:"fileConfirm"},{label:(0,v.jsx)(p.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){fe("/app/detail/file/".concat(E.id,"?tab=file"))}},{label:(0,v.jsx)(p.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){fe("/app/detail/log/".concat(E.id,"?tab=log"))}},{label:(0,v.jsx)(p.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){fe("/app/detail/stat/".concat(E.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,v.jsx)(l.Z,{}),disabled:!0}],Pe=(0,o.useState)(oe),te=F()(Pe,2),pe=te[0],de=te[1];(0,o.useEffect)(function(){d.show(),ge(w);var z=function(){var h=c()(u()().mark(function Ie(){var Ee,Q,je,ve;return u()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return Q=oe,ue.next=3,(0,L.aF)();case 3:return je=ue.sent,Oe.canSeeContainerDomain||(Q=Q.filter(function(k){return k.key!="domain"})),je.data.plugin.explorer.isCreated||(Q=Q.filter(function(k){return k.key!="file"})),je.data.plugin.explorer.isCreated&&(Q=Q.filter(function(k){return k.key!="fileConfirm"})),ue.next=9,(0,b.jV)({md5:(Ee=E.id)!==null&&Ee!==void 0?Ee:""});case 9:ve=ue.sent,Q.map(function(k){return k.key=="containerName"&&(k.label=ve.data.info.Name),(!ve.data.info.State.Running||ve.data.info.State.Restarting)&&(k.key=="file"||k.key=="fileConfirm"||k.key=="stat")&&(k.disabled=!0),k}),de(Q),d.destroy();case 13:case"end":return ue.stop()}},Ie)}));return function(){return h.apply(this,arguments)}}();z()},[Fe]);var Ze=function(h){h.key!="fileConfirm"&&ge(h.key)};return(0,v.jsxs)(j.Provider,{value:{reload:function(){Be(Fe+1)}},children:[(0,v.jsx)(G.Z,{mode:"horizontal",onClick:Ze,selectedKeys:[xe],items:pe}),(0,v.jsx)(g.Outlet,{})]})}},28031:function(le,y,t){t.d(y,{C4:function(){return Y},LK:function(){return v},OQ:function(){return ne},V9:function(){return F},Yx:function(){return C},ZU:function(){return l},_U:function(){return L},gb:function(){return G},lE:function(){return S},vp:function(){return d}});var T=t(15009),u=t.n(T),M=t(99289),c=t.n(M),m=t(54006);function F(f){return P.apply(this,arguments)}function P(){return P=c()(u()().mark(function f(x){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,m.request)("/api/app/explorer/get-path-list",{data:x,method:"POST"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},f)})),P.apply(this,arguments)}function L(f){return b.apply(this,arguments)}function b(){return b=c()(u()().mark(function f(x){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,m.request)("/api/app/explorer/export",{data:x,method:"POST",responseType:"blob"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},f)})),b.apply(this,arguments)}function l(f){return g.apply(this,arguments)}function g(){return g=c()(u()().mark(function f(x){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,m.request)("/api/app/explorer/import",{data:x,method:"POST"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},f)})),g.apply(this,arguments)}function C(f){return p.apply(this,arguments)}function p(){return p=c()(u()().mark(function f(x){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,m.request)("/api/app/explorer/delete",{data:x,method:"POST"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},f)})),p.apply(this,arguments)}function G(f){return o.apply(this,arguments)}function o(){return o=c()(u()().mark(function f(x){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,m.request)("/api/app/explorer/unzip",{data:x,method:"POST"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},f)})),o.apply(this,arguments)}function v(f){return j.apply(this,arguments)}function j(){return j=c()(u()().mark(function f(x){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,m.request)("/api/app/explorer/get-content",{data:x,method:"POST"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},f)})),j.apply(this,arguments)}function Y(f){return n.apply(this,arguments)}function n(){return n=c()(u()().mark(function f(x){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,m.request)("/api/app/explorer/import-file-content",{data:x,method:"POST"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},f)})),n.apply(this,arguments)}function ne(f){return O.apply(this,arguments)}function O(){return O=c()(u()().mark(function f(x){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,m.request)("/api/app/explorer/chmod",{data:x,method:"POST"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},f)})),O.apply(this,arguments)}function d(f){return E.apply(this,arguments)}function E(){return E=c()(u()().mark(function f(x){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,m.request)("/api/app/volume/backup",{data:x,method:"POST"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},f)})),E.apply(this,arguments)}function S(f){return i.apply(this,arguments)}function i(){return i=c()(u()().mark(function f(x){return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,m.request)("/api/app/explorer/get-passwd",{data:x,method:"POST"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},f)})),i.apply(this,arguments)}},60335:function(le,y,t){t.d(y,{IE:function(){return L},IW:function(){return F},KK:function(){return G},LJ:function(){return v},RF:function(){return ne},Re:function(){return Y},eE:function(){return C},jV:function(){return l}});var T=t(15009),u=t.n(T),M=t(99289),c=t.n(M),m=t(54006);function F(d){return P.apply(this,arguments)}function P(){return P=c()(u()().mark(function d(E){return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,m.request)("/api/app/container/status",{method:"POST",data:E}));case 1:case"end":return i.stop()}},d)})),P.apply(this,arguments)}function L(d){return b.apply(this,arguments)}function b(){return b=c()(u()().mark(function d(E){return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,m.request)("/api/app/container/get-list",{data:E,method:"POST"}));case 1:case"end":return i.stop()}},d)})),b.apply(this,arguments)}function l(d){return g.apply(this,arguments)}function g(){return g=c()(u()().mark(function d(E){return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,m.request)("/api/app/container/get-detail",{data:E,method:"POST"}));case 1:case"end":return i.stop()}},d)})),g.apply(this,arguments)}function C(d){return p.apply(this,arguments)}function p(){return p=c()(u()().mark(function d(E){return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,m.request)("/api/app/container/update",{data:E,method:"POST"}));case 1:case"end":return i.stop()}},d)})),p.apply(this,arguments)}function G(){return o.apply(this,arguments)}function o(){return o=c()(u()().mark(function d(){return u()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",(0,m.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return S.stop()}},d)})),o.apply(this,arguments)}function v(d){return j.apply(this,arguments)}function j(){return j=c()(u()().mark(function d(E){return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,m.request)("/api/app/container/export",{method:"POST",data:E,responseType:"blob"}));case 1:case"end":return i.stop()}},d)})),j.apply(this,arguments)}function Y(d){return n.apply(this,arguments)}function n(){return n=c()(u()().mark(function d(E){return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,m.request)("/api/app/container/commit",{method:"POST",data:E}));case 1:case"end":return i.stop()}},d)})),n.apply(this,arguments)}function ne(d){return O.apply(this,arguments)}function O(){return O=c()(u()().mark(function d(E){return u()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,m.request)("/api/app/container/upgrade",{method:"POST",data:E}));case 1:case"end":return i.stop()}},d)})),O.apply(this,arguments)}}}]);
