"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5585],{28307:function(I,C,r){var j=r(15009),a=r.n(j),U=r(99289),s=r.n(U),i=r(5574),y=r.n(i),g=r(38345),T=r(97269),D=r(62370),d=r(5966),v=r(64317),b=r(28036),E=r(85265),m=r(42075),o=r(67294),c=r(3393),n=r(97961),O=r(92754),h=r(82346),_=r(96042),l=r(85893),K=(0,o.forwardRef)(function(M,w){var A=(0,o.useState)(!1),t=y()(A,2),p=t[0],u=t[1],e=(0,o.useRef)(),F=(0,o.useRef)(),N=(0,o.useState)(!1),Z=y()(N,2),G=Z[0],x=Z[1];return(0,o.useImperativeHandle)(w,function(){return{upgradeImage:function(P){var f;return u(!0),(f=e.current)===null||f===void 0||f.setFieldValue("imageUrl",P),(0,c.Gb)({tag:P,type:"pull"})},setImageName:function(P){var f;u(!0),(f=e.current)===null||f===void 0||f.setFieldValue("imageUrl",P)}}}),[(0,l.jsx)(b.ZP,{type:M.buttonType?M.buttonType:"default",onClick:function(){var P,f;M.onClick&&M.onClick(),u(!0),(P=e.current)===null||P===void 0||P.resetFields(),(f=F.current)===null||f===void 0||f.setStart("")},children:"\u62C9\u53D6\u955C\u50CF"},"remoteBtn"),(0,l.jsxs)(E.Z,{forceRender:!0,open:p,title:"\u62C9\u53D6\u8FDC\u7A0B\u955C\u50CF",width:800,onClose:function(){return u(!1)},footer:!1,children:[(0,l.jsx)(g.Z,{children:(0,l.jsxs)(m.Z,{direction:"vertical",size:"middle",children:[(0,l.jsxs)("div",{children:["1\u3001\u955C\u50CF\u540D\u79F0\u4E2D\u4E0D\u5305\u542B\u4ED3\u5E93\u5730\u5740\u65F6\uFF0C \u9ED8\u8BA4\u4ECE ",(0,l.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:"docker hub"})," \u4E2D\u4E0B\u8F7D\uFF0C \u4F60\u53EF\u4EE5\u5728\u4E0A\u9762",(0,l.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:"\u3010\u67E5\u627E\u3011"}),"\u9700\u8981\u7684\u955C\u50CF"]}),(0,l.jsxs)("div",{children:["2\u3001\u955C\u50CF\u4E2D\u5305\u542B\u4ED3\u5E93\u5730\u5740\u65F6\uFF0C\u8BF7\u786E",(0,l.jsx)(h.Link,{to:"/image/registry",children:"\u3010\u6DFB\u52A0\u3011"}),"\u8FC7\u8BE5\u4ED3\u5E93\uFF0C\u5E76\u6709 Pull \u6743\u9650"]}),(0,l.jsxs)("div",{children:["3\u3001\u53EF\u5728",(0,l.jsx)(h.Link,{to:"/image/registry",children:"\u3010\u4ED3\u5E93\u7BA1\u7406\u3011"}),"\u4E2D\u914D\u7F6E\u955C\u50CF\u7684\u52A0\u901F\u5730\u5740"]})]})}),(0,l.jsx)(g.Z,{title:"\u62C9\u53D6\u955C\u50CF",headerBordered:!0,children:(0,l.jsxs)(T.A,{formRef:e,submitter:!1,isKeyPressSubmit:!0,onFinish:function(){var R=s()(a()().mark(function P(f){var B,S,k,$,L,H;return a()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return L=(B=f.imageUrl)!==null&&B!==void 0?B:"",f.registry&&(L=f.registry.serverAddress+"/"+L),x(!0),(S=F.current)===null||S===void 0||S.setStart(L),W.next=6,(0,c.Gb)({tag:L,type:"pull",platform:(k=f.platform)!==null&&k!==void 0?k:""}).finally(function(){x(!1)});case 6:return H=W.sent,($=F.current)===null||$===void 0||$.setFinish(),u(!1),M.onFinish&&M.onFinish(H.data.tag),W.abrupt("return",!0);case 11:case"end":return W.stop()}},P)}));return function(P){return R.apply(this,arguments)}}(),children:[(0,l.jsxs)(m.Z.Compact,{children:[(0,l.jsx)(D.Z,{name:"registry",children:(0,l.jsx)(_.Z,{width:"150px"})}),(0,l.jsx)(d.Z,{disabled:G,width:300,name:"imageUrl",placeholder:"\u8BF7\u8F93\u5165\u955C\u50CF\u5730\u5740",required:!0,rules:[{required:!0}]}),(0,l.jsx)(v.Z,{name:"platform",style:{width:150},placeholder:"\u9ED8\u8BA4\u5F53\u524D\u67B6\u6784",options:n.ii.map(function(R){return{label:R.name,value:R.name}})}),(0,l.jsx)(b.ZP,{loading:G,onClick:s()(a()().mark(function R(){var P;return a()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:(P=e.current)===null||P===void 0||P.submit();case 1:case"end":return B.stop()}},R)})),children:"\u62C9\u53D6\u955C\u50CF"})]}),(0,l.jsx)(D.Z,{label:"\u62C9\u53D6\u8FDB\u5EA6",children:(0,l.jsx)(O.Z,{ref:F})})]})})]},"remoteDrawer")]});C.Z=K},96042:function(I,C,r){r.d(C,{Z:function(){return D}});var j=r(97857),a=r.n(j),U=r(5574),s=r.n(U),i=r(75870),y=r(34041),g=r(67294),T=r(85893);function D(d){var v=(0,g.useState)([]),b=s()(v,2),E=b[0],m=b[1];(0,g.useEffect)(function(){(0,i.Ot)().then(function(c){c&&m(c.data.list)})},[]);var o={};return d.multiple&&(o.mode="multiple"),d.top&&(o.placement="topLeft"),(0,T.jsx)(y.Z,a()({popupMatchSelectWidth:!d.width,style:d.width?{width:d.width}:{},onChange:function(n){if(Array.isArray(n)){var O=n.map(function(h){return E[h]});d.onChangeList&&d.onChangeList(O)}else d.onChange&&d.onChange(E[n])},placeholder:"\u9009\u62E9\u955C\u50CF\u4ED3\u5E93\uFF0C\u9ED8\u8BA4\u4E3A\u5F53\u524D\u4ED3\u5E93",options:E.map(function(c,n){return{value:n,label:c.title+"("+c.serverAddress+")"}}),allowClear:!0},o))}},24963:function(I,C,r){var j=r(67294),a=(0,j.createContext)({});C.Z=a},97961:function(I,C,r){r.d(C,{GH:function(){return v},MF:function(){return o},_2:function(){return E},fN:function(){return g},ii:function(){return y},vC:function(){return D}});var j=r(15009),a=r.n(j),U=r(99289),s=r.n(U),i=r(82346),y=[{name:"linux/amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"linux/arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"linux/i386",arch:"386",search:[]},{name:"linux/arm/v6",arch:"arm",search:[]},{name:"linux/arm/v7",arch:"arm",search:[]},{name:"linux/arm/v8",arch:"arm64",search:[]},{name:"linux/ppc64le",arch:"ppc64le",search:[]},{name:"linux/riscv64",arch:"riscv64",search:[]}];function g(n){return T.apply(this,arguments)}function T(){return T=s()(a()().mark(function n(O){return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,i.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:O}));case 1:case"end":return _.stop()}},n)})),T.apply(this,arguments)}function D(n){return d.apply(this,arguments)}function d(){return d=s()(a()().mark(function n(O){return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,i.request)("/api/app/image/import-by-container-tar",{method:"POST",data:O}));case 1:case"end":return _.stop()}},n)})),d.apply(this,arguments)}function v(n){return b.apply(this,arguments)}function b(){return b=s()(a()().mark(function n(O){return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,i.request)("/api/app/image/import-by-image-tar",{method:"POST",data:O}));case 1:case"end":return _.stop()}},n)})),b.apply(this,arguments)}function E(n){return m.apply(this,arguments)}function m(){return m=s()(a()().mark(function n(O){return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,i.request)("/api/common/attach/delete",{method:"POST",data:O});case 2:return _.abrupt("return",_.sent);case 3:case"end":return _.stop()}},n)})),m.apply(this,arguments)}function o(){return c.apply(this,arguments)}function c(){return c=s()(a()().mark(function n(){return a()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,i.request)("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return h.stop()}},n)})),c.apply(this,arguments)}},18148:function(I,C,r){r.d(C,{$q:function(){return m},Fj:function(){return K},KG:function(){return y},KX:function(){return w},T8:function(){return b},Xn:function(){return d},ao:function(){return c},c5:function(){return _},c7:function(){return O}});var j=r(15009),a=r.n(j),U=r(99289),s=r.n(U),i=r(82346);function y(t){return g.apply(this,arguments)}function g(){return g=s()(a()().mark(function t(p){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/image/get-list",{method:"POST",data:p}));case 1:case"end":return e.stop()}},t)})),g.apply(this,arguments)}function T(t){return D.apply(this,arguments)}function D(){return D=_asyncToGenerator(_regeneratorRuntime().mark(function t(p){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,request("/api/app/log/image-build",{method:"POST",data:p});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)})),D.apply(this,arguments)}function d(t){return v.apply(this,arguments)}function v(){return v=s()(a()().mark(function t(p){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/image/get-list-build",{method:"POST",data:p}));case 1:case"end":return e.stop()}},t)})),v.apply(this,arguments)}function b(t){return E.apply(this,arguments)}function E(){return E=s()(a()().mark(function t(p){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.request)("/api/app/image/get-build-task",{method:"POST",data:p});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)})),E.apply(this,arguments)}function m(t){return o.apply(this,arguments)}function o(){return o=s()(a()().mark(function t(p){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.request)("/api/app/image/delete-build-task",{method:"POST",data:p});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)})),o.apply(this,arguments)}function c(t){return n.apply(this,arguments)}function n(){return n=s()(a()().mark(function t(p){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.request)("/api/app/image/image-delete",{method:"POST",data:p});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)})),n.apply(this,arguments)}function O(){return h.apply(this,arguments)}function h(){return h=s()(a()().mark(function t(){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,i.request)("/api/app/image/image-prune",{method:"POST"});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},t)})),h.apply(this,arguments)}function _(){return l.apply(this,arguments)}function l(){return l=s()(a()().mark(function t(){return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,i.request)("/api/app/image/build-prune",{method:"POST"});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},t)})),l.apply(this,arguments)}function K(t){return M.apply(this,arguments)}function M(){return M=s()(a()().mark(function t(p){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.request)("/api/app/image/update-title",{method:"POST",data:p});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)})),M.apply(this,arguments)}function w(t){return A.apply(this,arguments)}function A(){return A=s()(a()().mark(function t(p){return a()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/app/image/tag-sync",{method:"POST",data:p}));case 1:case"end":return e.stop()}},t)})),A.apply(this,arguments)}},75870:function(I,C,r){r.d(C,{Ot:function(){return y},ZH:function(){return T},ix:function(){return d},t1:function(){return b}});var j=r(15009),a=r.n(j),U=r(99289),s=r.n(U),i=r(82346);function y(m){return g.apply(this,arguments)}function g(){return g=s()(a()().mark(function m(o){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.request)("/api/common/registry/get-list",{method:"POST",data:o}));case 1:case"end":return n.stop()}},m)})),g.apply(this,arguments)}function T(m){return D.apply(this,arguments)}function D(){return D=s()(a()().mark(function m(o){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.request)("/api/common/registry/create",{method:"POST",data:o}));case 1:case"end":return n.stop()}},m)})),D.apply(this,arguments)}function d(m){return v.apply(this,arguments)}function v(){return v=s()(a()().mark(function m(o){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.request)("/api/common/registry/delete",{method:"POST",data:o}));case 1:case"end":return n.stop()}},m)})),v.apply(this,arguments)}function b(m){return E.apply(this,arguments)}function E(){return E=s()(a()().mark(function m(o){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,i.request)("/api/common/registry/get-detail",{method:"POST",data:o}));case 1:case"end":return n.stop()}},m)})),E.apply(this,arguments)}}}]);
