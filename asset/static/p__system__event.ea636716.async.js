"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5050],{80821:function(x,m,n){n.d(m,{Z:function(){return C}});var v=n(97857),i=n.n(v),s=n(5574),l=n.n(s),h=n(24963),o=n(86738),E=n(83062),_=n(28036),y=n(67294),f=n(85893);function C(e){var T=(0,y.useState)(!1),D=l()(T,2),O=D[0],c=D[1],j=(0,y.useContext)(h.Z),r=j.lang,u=j.message,a=function(){c(!0);var P=e.action();P instanceof Promise?P.then(function(g){if(c(!1),g){typeof e.onSuccess=="function"&&e.onSuccess(g);var d="";e.messageSuccess?typeof e.messageSuccess=="function"?d=e.messageSuccess(g):d=e.messageSuccess.indexOf("notification.")==0?r(e.messageSuccess):e.messageSuccess:d=r("notification.finish"),e.asynced?u.info(d):u.success(d)}}).catch(function(g){c(!1),typeof e.onError=="function"&&e.onError(g)}):c(!1)};return e.confirm?(0,f.jsx)(o.Z,i()(i()({style:{width:500},title:e.confirmTitle?e.confirmTitle:r("notification.title.tip"),description:typeof e.confirm=="string"&&e.confirm.indexOf("notification.")==0?r(e.confirm):e.confirm,onConfirm:a,okText:"Yes",cancelText:"No",onOpenChange:e.confirmOnOpenChange},e.confirmProps),{},{children:(0,f.jsx)(E.Z,{title:e.tips,children:(0,f.jsx)(_.ZP,{block:e.block,disabled:e.disabled,icon:!e.children&&O?void 0:e.icon,loading:O,danger:e.danger,type:e.type,children:e.children})})})):(0,f.jsx)(E.Z,{title:e.tips,children:(0,f.jsx)(_.ZP,{block:e.block,style:e.ghost?{padding:0,height:"auto",width:"auto"}:{},disabled:e.disabled,icon:!e.children&&O?void 0:e.icon,loading:O,onClick:a,danger:e.danger,type:e.type,children:e.children})})}},24963:function(x,m,n){var v=n(67294),i=(0,v.createContext)({});m.Z=i},85827:function(x,m,n){n.r(m),n.d(m,{default:function(){return j}});var v=n(15009),i=n.n(v),s=n(99289),l=n.n(s),h=n(80821),o=n(82346);function E(r){return _.apply(this,arguments)}function _(){return _=l()(i()().mark(function r(u){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,o.request)("/api/common/event/get-list",{method:"POST",data:u}));case 1:case"end":return t.stop()}},r)})),_.apply(this,arguments)}function y(r){return f.apply(this,arguments)}function f(){return f=l()(i()().mark(function r(u){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,o.request)("/api/common/event/prune",{method:"POST",data:u}));case 1:case"end":return t.stop()}},r)})),f.apply(this,arguments)}var C=n(36146),e=n(67255),T=n(90078),D=n(78099),O=n(67294),c=n(85893);function j(){var r=(0,O.useRef)();return(0,c.jsx)(T._z,{header:{extra:[(0,c.jsx)(h.Z,{action:function(){return y()},onSuccess:function(){var a,t;return!((a=r.current)===null||a===void 0)&&a.reloadAndRest&&((t=r.current)===null||t===void 0||t.reloadAndRest()),!0},onError:function(){var a,t;return!((a=r.current)===null||a===void 0)&&a.reset&&((t=r.current)===null||t===void 0||t.reset()),!0},confirm:"notification.confirm.title",danger:!0,type:"primary",children:C.FD.format("listManageClear")})]},children:(0,c.jsx)(D.Z,{search:!1,scroll:{x:"max-content"},columns:[{title:C.FD.format("listType"),ellipsis:!0,dataIndex:"type",width:200},{title:C.FD.format("listDescription"),search:!1,render:function(a,t,P,g){return(0,c.jsxs)(c.Fragment,{children:[t.action," ",t.message]})}},{title:C.FD.format("listCreatedAt"),ellipsis:!0,search:!1,dataIndex:"createdAt",width:200,render:function(a,t,P,g,d){return new Date(t.createdAt).toLocaleString()}}],rowKey:"id",request:function(){var u=l()(i()().mark(function a(t,P,g){var d,M,R;return i()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,E({page:(d=t.current)!==null&&d!==void 0?d:1,pageSize:(M=t.pageSize)!==null&&M!==void 0?M:10,type:t.type});case 2:return R=S.sent,S.abrupt("return",{data:R.data.list,success:!0,total:R.data.total});case 4:case"end":return S.stop()}},a)}));return function(a,t,P){return u.apply(this,arguments)}}(),pagination:(0,e.O)(),actionRef:r})})}},67255:function(x,m,n){n.d(m,{O:function(){return v},j:function(){return i}});function v(s){var l=localStorage.getItem("dpanel-pagesize");return l=="all"?!1:{defaultCurrent:s==null?void 0:s.page,showSizeChanger:!0,defaultPageSize:parseInt(l!=null?l:"20"),onChange:function(o,E){localStorage.setItem("dpanel-page-"+location.pathname.split("/").slice(-2).join("-"),"".concat(o))}}}function i(s){var l="dpanel-table-column-".concat(s),h={};if(localStorage.getItem(l)){var o;h=JSON.parse((o=localStorage.getItem(l))!==null&&o!==void 0?o:"{}")}return{defaultValue:h,onChange:function(_){localStorage.setItem("dpanel-table-column-".concat(s),JSON.stringify(_))}}}}}]);
