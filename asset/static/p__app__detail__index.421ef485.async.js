"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5947],{55809:function(Y,b,e){var s=e(87462),r=e(67294),A=e(44805),_=e(84089),f=function(L,g){return r.createElement(_.Z,(0,s.Z)({},L,{ref:g,icon:A.Z}))},D=r.forwardRef(f);b.Z=D},24963:function(Y,b,e){var s=e(67294),r=(0,s.createContext)({});b.Z=r},50070:function(Y,b,e){e.r(b),e.d(b,{AppDetailContext:function(){return N},default:function(){return J}});var s=e(15009),r=e.n(s),A=e(99289),_=e.n(A),f=e(5574),D=e.n(f),E=e(24963),L=e(2831),g=e(60335),Z=e(55809),h=e(63713),U=e(86738),O=e(25593),i=e(50136),j=e(67294),C=e(85893),N=(0,j.createContext)({});function J(){var S,V=(0,j.useContext)(E.Z),k=V.lang,Q=V.loading,y=(0,h.useParams)(),o=(0,h.useSearchParams)(),p=D()(o,2),v=p[0],n=p[1],t=(S=v.get("tab"))!==null&&S!==void 0?S:"edit",l=(0,j.useState)("edit"),d=D()(l,2),a=d[0],u=d[1],T=(0,h.useNavigate)(),K=(0,j.useState)(1),M=D()(K,2),I=M[0],$=M[1],w=(0,h.useAccess)(),W=[{label:(0,C.jsx)(h.Link,{to:"/app/detail/edit/".concat(y.id,"?tab=edit"),children:"\u5BB9\u5668\u8BE6\u60C5"}),key:"edit"},{label:(0,C.jsx)(h.Link,{to:"/app/detail/domain/".concat(y.id,"?tab=domain"),children:"\u57DF\u540D\u7BA1\u7406"}),key:"domain"},{label:(0,C.jsx)(U.Z,{style:{width:500},title:k("notification.title.tip"),description:k("app.detail.createExplorerPlugin"),onConfirm:function(){T("/app/detail/file/".concat(y.id,"?tab=file")),H(W.filter(function(x){return x.key!="fileConfirm"})),u("file")},okText:"Yes",cancelText:"No",children:(0,C.jsx)(O.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"})}),key:"fileConfirm"},{label:(0,C.jsx)(O.Z.Link,{children:"\u6587\u4EF6\u7BA1\u7406"}),key:"file",onClick:function(){T("/app/detail/file/".concat(y.id,"?tab=file"))}},{label:(0,C.jsx)(O.Z.Link,{children:"\u8FD0\u884C\u65E5\u5FD7"}),key:"log",onClick:function(){T("/app/detail/log/".concat(y.id,"?tab=log"))}},{label:(0,C.jsx)(O.Z.Link,{children:"\u8FD0\u884C\u72B6\u6001"}),key:"stat",onClick:function(){T("/app/detail/stat/".concat(y.id,"?tab=stat"))}},{label:"",key:"containerName",icon:(0,C.jsx)(Z.Z,{}),disabled:!0}],F=(0,j.useState)(W),G=D()(F,2),q=G[0],H=G[1];(0,j.useEffect)(function(){Q.show(),u(t);var P=function(){var x=_()(r()().mark(function ne(){var ee,R,z,X;return r()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return R=W,m.next=3,(0,L.aF)();case 3:return z=m.sent,w.canSeeContainerDomain||(R=R.filter(function(c){return c.key!="domain"})),z.data.plugin.explorer.isCreated||(R=R.filter(function(c){return c.key!="file"})),z.data.plugin.explorer.isCreated&&(R=R.filter(function(c){return c.key!="fileConfirm"})),m.next=9,(0,g.jV)({md5:(ee=y.id)!==null&&ee!==void 0?ee:""});case 9:X=m.sent,R.map(function(c){return c.key=="containerName"&&(c.label=X.data.info.Name),(!X.data.info.State.Running||X.data.info.State.Restarting)&&(c.key=="file"||c.key=="fileConfirm"||c.key=="stat")&&(c.disabled=!0),c}),H(R),Q.destroy();case 13:case"end":return m.stop()}},ne)}));return function(){return x.apply(this,arguments)}}();P()},[I]);var B=function(x){x.key!="fileConfirm"&&u(x.key)};return(0,C.jsxs)(N.Provider,{value:{reload:function(){$(I+1)}},children:[(0,C.jsx)(i.Z,{mode:"horizontal",onClick:B,selectedKeys:[a],items:q}),(0,C.jsx)(h.Outlet,{})]})}},2831:function(Y,b,e){e.d(b,{Ll:function(){return L},aF:function(){return D},d6:function(){return Z}});var s=e(15009),r=e.n(s),A=e(99289),_=e.n(A),f=e(63713);function D(){return E.apply(this,arguments)}function E(){return E=_()(r()().mark(function U(){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,f.request)("/api/common/home/info",{method:"POST"});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},U)})),E.apply(this,arguments)}function L(){return g.apply(this,arguments)}function g(){return g=_()(r()().mark(function U(){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,f.request)("/api/common/home/usage",{method:"POST"});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},U)})),g.apply(this,arguments)}function Z(){return h.apply(this,arguments)}function h(){return h=_()(r()().mark(function U(){return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,f.request)("/api/common/home/upgrade-script",{method:"POST"});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},U)})),h.apply(this,arguments)}},60335:function(Y,b,e){e.d(b,{IE:function(){return L},IW:function(){return D},KK:function(){return i},LJ:function(){return C},RF:function(){return V},Re:function(){return J},aF:function(){return Q},eE:function(){return U},jV:function(){return Z}});var s=e(15009),r=e.n(s),A=e(99289),_=e.n(A),f=e(63713);function D(o){return E.apply(this,arguments)}function E(){return E=_()(r()().mark(function o(p){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,f.request)("/api/app/container/status",{method:"POST",data:p}));case 1:case"end":return n.stop()}},o)})),E.apply(this,arguments)}function L(o){return g.apply(this,arguments)}function g(){return g=_()(r()().mark(function o(p){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,f.request)("/api/app/container/get-list",{data:p,method:"POST"}));case 1:case"end":return n.stop()}},o)})),g.apply(this,arguments)}function Z(o){return h.apply(this,arguments)}function h(){return h=_()(r()().mark(function o(p){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,f.request)("/api/app/container/get-detail",{data:p,method:"POST"}));case 1:case"end":return n.stop()}},o)})),h.apply(this,arguments)}function U(o){return O.apply(this,arguments)}function O(){return O=_()(r()().mark(function o(p){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,f.request)("/api/app/container/update",{data:p,method:"POST"}));case 1:case"end":return n.stop()}},o)})),O.apply(this,arguments)}function i(){return j.apply(this,arguments)}function j(){return j=_()(r()().mark(function o(){return r()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,f.request)("/api/app/container/prune",{method:"POST"}));case 1:case"end":return v.stop()}},o)})),j.apply(this,arguments)}function C(o){return N.apply(this,arguments)}function N(){return N=_()(r()().mark(function o(p){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,f.request)("/api/app/container/export",{method:"POST",data:p,responseType:"blob"}));case 1:case"end":return n.stop()}},o)})),N.apply(this,arguments)}function J(o){return S.apply(this,arguments)}function S(){return S=_()(r()().mark(function o(p){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,f.request)("/api/app/container/commit",{method:"POST",data:p}));case 1:case"end":return n.stop()}},o)})),S.apply(this,arguments)}function V(o){return k.apply(this,arguments)}function k(){return k=_()(r()().mark(function o(p){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,f.request)("/api/app/container/upgrade",{method:"POST",data:p}));case 1:case"end":return n.stop()}},o)})),k.apply(this,arguments)}function Q(o){return y.apply(this,arguments)}function y(){return y=_()(r()().mark(function o(p){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,f.request)("/api/app/container/copy",{method:"POST",data:p}));case 1:case"end":return n.stop()}},o)})),y.apply(this,arguments)}},86738:function(Y,b,e){e.d(b,{Z:function(){return n}});var s=e(67294),r=e(21640),A=e(93967),_=e.n(A),f=e(21770),D=e(98423),E=e(53124),L=e(55241),g=e(86743),Z=e(81643),h=e(28036),U=e(33671),O=e(10110),i=e(24457),j=e(66330),C=e(83559);const N=t=>{const{componentCls:l,iconCls:d,antCls:a,zIndexPopup:u,colorText:T,colorWarning:K,marginXXS:M,marginXS:I,fontSize:$,fontWeightStrong:w,colorTextHeading:W}=t;return{[l]:{zIndex:u,[`&${a}-popover`]:{fontSize:$},[`${l}-message`]:{marginBottom:I,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${l}-message-icon ${d}`]:{color:K,fontSize:$,lineHeight:1,marginInlineEnd:I},[`${l}-title`]:{fontWeight:w,color:W,"&:only-child":{fontWeight:"normal"}},[`${l}-description`]:{marginTop:M,color:T}},[`${l}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:I}}}}},J=t=>{const{zIndexPopupBase:l}=t;return{zIndexPopup:l+60}};var S=(0,C.I$)("Popconfirm",t=>N(t),J,{resetStyle:!1}),V=function(t,l){var d={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&l.indexOf(a)<0&&(d[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,a=Object.getOwnPropertySymbols(t);u<a.length;u++)l.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(t,a[u])&&(d[a[u]]=t[a[u]]);return d};const k=t=>{const{prefixCls:l,okButtonProps:d,cancelButtonProps:a,title:u,description:T,cancelText:K,okText:M,okType:I="primary",icon:$=s.createElement(r.Z,null),showCancel:w=!0,close:W,onConfirm:F,onCancel:G,onPopupClick:q}=t,{getPrefixCls:H}=s.useContext(E.E_),[B]=(0,O.Z)("Popconfirm",i.Z.Popconfirm),P=(0,Z.Z)(u),x=(0,Z.Z)(T);return s.createElement("div",{className:`${l}-inner-content`,onClick:q},s.createElement("div",{className:`${l}-message`},$&&s.createElement("span",{className:`${l}-message-icon`},$),s.createElement("div",{className:`${l}-message-text`},P&&s.createElement("div",{className:`${l}-title`},P),x&&s.createElement("div",{className:`${l}-description`},x))),s.createElement("div",{className:`${l}-buttons`},w&&s.createElement(h.ZP,Object.assign({onClick:G,size:"small"},a),K||(B==null?void 0:B.cancelText)),s.createElement(g.Z,{buttonProps:Object.assign(Object.assign({size:"small"},(0,U.nx)(I)),d),actionFn:F,close:W,prefixCls:H("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},M||(B==null?void 0:B.okText))))};var y=t=>{const{prefixCls:l,placement:d,className:a,style:u}=t,T=V(t,["prefixCls","placement","className","style"]),{getPrefixCls:K}=s.useContext(E.E_),M=K("popconfirm",l),[I]=S(M);return I(s.createElement(j.ZP,{placement:d,className:_()(M,a),style:u,content:s.createElement(k,Object.assign({prefixCls:M},T))}))},o=function(t,l){var d={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&l.indexOf(a)<0&&(d[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,a=Object.getOwnPropertySymbols(t);u<a.length;u++)l.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(t,a[u])&&(d[a[u]]=t[a[u]]);return d};const v=s.forwardRef((t,l)=>{var d,a;const{prefixCls:u,placement:T="top",trigger:K="click",okType:M="primary",icon:I=s.createElement(r.Z,null),children:$,overlayClassName:w,onOpenChange:W,onVisibleChange:F}=t,G=o(t,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),{getPrefixCls:q}=s.useContext(E.E_),[H,B]=(0,f.Z)(!1,{value:(d=t.open)!==null&&d!==void 0?d:t.visible,defaultValue:(a=t.defaultOpen)!==null&&a!==void 0?a:t.defaultVisible}),P=(m,c)=>{B(m,!0),F==null||F(m),W==null||W(m,c)},x=m=>{P(!1,m)},ne=m=>{var c;return(c=t.onConfirm)===null||c===void 0?void 0:c.call(void 0,m)},ee=m=>{var c;P(!1,m),(c=t.onCancel)===null||c===void 0||c.call(void 0,m)},R=(m,c)=>{const{disabled:re=!1}=t;re||P(m,c)},z=q("popconfirm",u),X=_()(z,w),[te]=S(z);return te(s.createElement(L.Z,Object.assign({},(0,D.Z)(G,["title"]),{trigger:K,placement:T,onOpenChange:R,open:H,ref:l,overlayClassName:X,content:s.createElement(k,Object.assign({okType:M,icon:I},t,{prefixCls:z,close:x,onConfirm:ne,onCancel:ee})),"data-popover-inject":!0}),$))});v._InternalPanelDoNotUseOrYouWillBeFired=y;var n=v}}]);
