"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4609],{80821:function(V,x,n){n.d(x,{Z:function(){return Z}});var B=n(5574),_=n.n(B),W=n(24963),m=n(86738),p=n(28036),y=n(83062),j=n(67294),D=n(85893);function Z(t){var I=(0,j.useState)(!1),A=_()(I,2),h=A[0],E=A[1],u=(0,j.useContext)(W.Z),f=u.lang,l=u.notice,R=u.message,P=function(){E(!0);var a=t.action();a instanceof Promise?a.then(function(i){if(E(!1),i){typeof t.onSuccess=="function"&&t.onSuccess(i);var o="";t.messageSuccess?typeof t.messageSuccess=="function"?o=t.messageSuccess(i):o=t.messageSuccess.indexOf("notification.")==0?f(t.messageSuccess):t.messageSuccess:o=f("notification.finish"),t.asynced?R.info(o):R.success(o)}}).catch(function(i){E(!1),typeof t.onError=="function"&&t.onError(i)}):E(!1)};return t.confirm?(0,D.jsx)(m.Z,{style:{width:500},title:t.confirmTitle?t.confirmTitle:f("notification.title.tip"),description:typeof t.confirm=="string"&&t.confirm.indexOf("notification.")==0?f(t.confirm):t.confirm,onConfirm:P,okText:"Yes",cancelText:"No",onOpenChange:t.confirmOnOpenChange,children:(0,D.jsx)(p.ZP,{block:t.block,disabled:t.disabled,icon:t.icon,loading:h,danger:t.danger,type:t.type,children:t.children})}):(0,D.jsx)(y.Z,{title:t.tips,children:(0,D.jsx)(p.ZP,{block:t.block,style:t.ghost?{padding:0,height:"auto"}:{},disabled:t.disabled,icon:t.icon,loading:h,onClick:P,danger:t.danger,type:t.type,children:t.children})})}},28230:function(V,x,n){var B=n(15009),_=n.n(B),W=n(99289),m=n.n(W),p=n(5574),y=n.n(p),j=n(24963),D=n(14946),Z=n(184),t=n(5966),I=n(62370),A=n(97462),h=n(52688),E=n(24739),u=n(17186),f=n(28036),l=n(34041),R=n(71230),P=n(15746),M=n(67294),a=n(85893),i=(0,M.forwardRef)(function(o,c){var r=(0,M.useState)(!1),U=y()(r,2),e=U[0],$=U[1],F=(0,M.useRef)(),k=(0,M.useContext)(j.Z),L=k.message;return(0,M.useImperativeHandle)(c,function(){return{}}),(0,a.jsxs)(Z.a,{name:"create",title:"\u521B\u5EFA\u7F51\u7EDC",open:e,onOpenChange:function(d){$(d)},formRef:F,trigger:(0,a.jsx)(f.ZP,{type:"primary",children:"\u521B\u5EFA\u7F51\u7EDC"}),onFinish:function(){var g=m()(_()().mark(function d(s){var b,O,T,C,v,S,G,Y,H,X,z,K,N,J;return _()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return K={name:s.name,driver:(b=s.driver)!==null&&b!==void 0?b:"bridge",ipSubnet:(O=s.ipSubnet)!==null&&O!==void 0?O:"",ipGateway:(T=s.ipGateway)!==null&&T!==void 0?T:"",ipRange:(C=s.ipRange)!==null&&C!==void 0?C:"",ipAux:s.ipAux,enableIpV6:(v=s.enableIpV6)!==null&&v!==void 0?v:!1,ipV6Subnet:(S=s.ipV6Subnet)!==null&&S!==void 0?S:"",ipV6Gateway:(G=s.ipV6Gateway)!==null&&G!==void 0?G:"",ipV6Range:(Y=s.ipV6Range)!==null&&Y!==void 0?Y:"",ipV6Aux:(H=s.ipV6Aux)!==null&&H!==void 0?H:[],driverOption:s.driverOption,internal:(X=s.internal)!==null&&X!==void 0?X:!1,attachable:(z=s.attachable)!==null&&z!==void 0?z:!1},(s.driver=="macvlan"||s.driver=="ipvlan")&&(K.driverOption||(K.driverOption=[]),K.driverOption.push({name:"parent",value:s.macvlanParentCard})),w.next=4,(0,D.XY)(K);case 4:if(N=w.sent,!(N&&N.data&&N.data.id!="")){w.next=10;break}return L.success("\u521B\u5EFA\u7F51\u7EDC\u6210\u529F"),o.onFinish&&o.onFinish(),(J=F.current)===null||J===void 0||J.resetFields(),w.abrupt("return",!0);case 10:case"end":return w.stop()}},d)}));return function(d){return g.apply(this,arguments)}}(),children:[(0,a.jsx)(t.Z,{label:"\u540D\u79F0",tooltip:"\u4E0D\u914D\u7F6E\u5B50\u7F51\u65F6\uFF0C\u4F1A\u81EA\u52A8\u751F\u6210",name:"name",required:!0,rules:[{required:!0}],placeholder:"\u6307\u5B9A\u552F\u4E00\u7684\u7F51\u7EDC\u540D\u79F0"}),(0,a.jsx)(I.Z,{label:"\u7C7B\u578B",name:"driver",children:(0,a.jsxs)(l.Z,{defaultValue:"bridge",children:[(0,a.jsx)(l.Z.Option,{value:"bridge",children:"bridge"}),(0,a.jsx)(l.Z.Option,{value:"macvlan",children:"macvlan"}),(0,a.jsx)(l.Z.Option,{value:"ipvlan",children:"ipvlan"}),(0,a.jsx)(l.Z.Option,{value:"overlay",children:"overlay"})]})}),(0,a.jsx)(A.Z,{name:["driver"],children:function(d){var s=d.driver;if(s=="macvlan"||s=="ipvlan")return(0,a.jsx)(t.Z,{required:!0,rules:[{required:!0}],label:"\u7236\u7F51\u5361",name:"macvlanParentCard",tooltip:"\u6307\u5B9A\u8981\u6865\u63A5\u7684\u5BBF\u4E3B\u673A\u7F51\u5361\u540D\u79F0"})}}),(0,a.jsxs)(R.Z,{children:[(0,a.jsx)(P.Z,{span:8,children:(0,a.jsx)(h.Z,{label:"\u81EA\u5B9AIPV4\u5B50\u7F51",name:"userIpV4Subnet"})}),(0,a.jsx)(P.Z,{span:8,children:(0,a.jsx)(h.Z,{name:"internal",label:"\u9694\u79BB\u5916\u90E8\u8BBF\u95EE",initialValue:!1})}),(0,a.jsx)(P.Z,{span:8,children:(0,a.jsx)(h.Z,{name:"attachable",label:"\u5141\u8BB8\u624B\u52A8\u9644\u52A0\u5BB9\u5668",initialValue:!1})})]}),(0,a.jsx)(A.Z,{name:["userIpV4Subnet"],children:function(d){var s=d.userIpV4Subnet;if(s)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(E.UW,{title:"IPV4\u914D\u7F6E",children:[(0,a.jsx)(t.Z,{label:"\u5B50\u7F51",name:"ipSubnet",width:"md",tooltip:"\u683C\u5F0F\u4E3A: \u5B50\u7F51\u8D77\u59CB\u5730\u5740/\u63A9\u7801\u3002\u5E38\u89C1\u7684\u683C\u5F0F\u6709 10.0.0.0/8, 172.20.0.0/16, 192.168.1.0/24",placeholder:"192.168.0.0/16"}),(0,a.jsx)(t.Z,{label:"\u7F51\u5173",name:"ipGateway",width:"md",placeholder:"192.168.0.1"}),(0,a.jsx)(t.Z,{label:"\u6307\u5B9AIp\u8303\u56F4",name:"ipRange",width:"md",placeholder:"192.168.1.0/24"})]}),(0,a.jsx)(u.u,{name:"ipAux",label:"\u6392\u9664Ip",children:(0,a.jsxs)(E.UW,{children:[(0,a.jsx)(t.Z,{label:"\u8BBE\u5907\u540D\u79F0",name:"device",width:"md"}),(0,a.jsx)(t.Z,{label:"Ip\u5730\u5740",name:"address",width:"md"})]})})]})}}),(0,a.jsxs)(R.Z,{children:[(0,a.jsx)(P.Z,{span:8,children:(0,a.jsx)(h.Z,{label:"\u542F\u7528IPV6",name:"enableIpV6"})}),(0,a.jsx)(P.Z,{children:(0,a.jsx)(h.Z,{label:"\u81EA\u5B9AIPV6\u5B50\u7F51",name:"userIpV6Subnet",fieldProps:{onChange:function(d,s){if(d){var b;(b=F.current)===null||b===void 0||b.setFieldValue("enableIpV6",!0)}}}})})]}),(0,a.jsx)(A.Z,{name:["userIpV6Subnet"],children:function(d){var s=d.userIpV6Subnet;if(s)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(E.UW,{title:"IPV6\u914D\u7F6E",children:[(0,a.jsx)(t.Z,{label:"\u5B50\u7F51",name:"ipV6Subnet",width:"md",placeholder:"2001:db8::/48"}),(0,a.jsx)(t.Z,{label:"\u7F51\u5173",name:"ipV6Gateway",width:"md",placeholder:"2001:db8::1"}),(0,a.jsx)(t.Z,{label:"Ip\u8303\u56F4",name:"ipV6Range",width:"md",placeholder:"2001:db8::/64"})]}),(0,a.jsx)(u.u,{name:"ipV6Aux",label:"\u6392\u9664Ip",children:(0,a.jsxs)(E.UW,{children:[(0,a.jsx)(t.Z,{label:"\u8BBE\u5907\u540D\u79F0",name:"device",width:"md"}),(0,a.jsx)(t.Z,{label:"Ip\u5730\u5740",name:"address",width:"md"})]})})]})}}),(0,a.jsx)(u.u,{name:"driverOption",label:"\u81EA\u5B9A\u4E49\u9A71\u52A8\u914D\u7F6E",children:(0,a.jsxs)(E.UW,{children:[(0,a.jsx)(t.Z,{label:"\u540D\u79F0",name:"name",width:"md"}),(0,a.jsx)(t.Z,{label:"\u503C",name:"value",width:"md"})]})})]})});x.Z=i},10032:function(V,x,n){var B=n(5574),_=n.n(B),W=n(15009),m=n.n(W),p=n(99289),y=n.n(p),j=n(80821),D=n(14946),Z=n(48689),t=n(184),I=n(38345),A=n(60940),h=n(42075),E=n(96074),u=n(26412),f=n(67294),l=n(85893),R=(0,f.forwardRef)(function(P,M){(0,f.useImperativeHandle)(M,function(){return{show:function(s){return y()(m()().mark(function b(){var O,T;return m()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,D.IS)({name:s});case 2:O=v.sent,O.data.info.Containers?(T=[],Object.keys(O.data.info.Containers).map(function(S){O.data.info.Containers[S].Id=S,T.push(O.data.info.Containers[S])}),g(T)):g([]),$(O.data.info),c(!0);case 6:case"end":return v.stop()}},b)}))()}}});var a=(0,f.useState)(!1),i=_()(a,2),o=i[0],c=i[1],r=(0,f.useState)(),U=_()(r,2),e=U[0],$=U[1],F=(0,f.useState)(),k=_()(F,2),L=k[0],g=k[1];return(0,l.jsx)(t.a,{title:"\u7F51\u7EDC\u8BE6\u60C5",open:o,onOpenChange:function(s){c(s)},submitter:!1,children:(0,l.jsxs)(I.Z,{ghost:!0,direction:"column",gutter:[10,0],children:[(0,l.jsx)(I.Z,{title:"\u7F51\u7EDC\u5185\u5BB9\u5668",ghost:!0,children:(0,l.jsx)(A.Z,{rowKey:"Id",columns:[{title:"\u5BB9\u5668\u540D\u79F0",dataIndex:"Name"},{title:"IPV4",dataIndex:"IPv4Address"},{title:"IPV6",dataIndex:"IPv6Address"},{title:"MacAddress",dataIndex:"MacAddress"},{title:"\u64CD\u4F5C",render:function(s,b,O){return(0,l.jsx)(h.Z,{split:(0,l.jsx)(E.Z,{type:"vertical"}),children:(0,l.jsx)(j.Z,{type:"text",action:function(){var C,v;return(0,D.t9)({name:(C=e==null?void 0:e.Id)!==null&&C!==void 0?C:"",containerName:(v=b.Id)!==null&&v!==void 0?v:""})},onSuccess:function(){var C=L==null?void 0:L.filter(function(v){return v.Id!=b.Id});g(C)},children:(0,l.jsx)(Z.Z,{})},"delete")})}}],dataSource:L,pagination:!1})}),(0,l.jsx)(I.Z,{ghost:!0,title:"\u57FA\u7840\u4FE1\u606F",children:(0,l.jsxs)(u.Z,{labelStyle:{width:"180px"},column:1,bordered:!0,children:[(0,l.jsx)(u.Z.Item,{label:"\u540D\u79F0",children:e==null?void 0:e.Name}),(0,l.jsx)(u.Z.Item,{label:"Id",children:e==null?void 0:e.Id}),(0,l.jsx)(u.Z.Item,{label:"Driver",children:e==null?void 0:e.Driver}),(0,l.jsx)(u.Z.Item,{label:"Scope",children:e==null?void 0:e.Scope}),(0,l.jsx)(u.Z.Item,{label:"Attachable",children:e!=null&&e.Attachable?"\u662F":"\u5426"}),(0,l.jsx)(u.Z.Item,{label:"Internal",children:e!=null&&e.Internal?"\u662F":"\u5426"}),(e==null?void 0:e.IPAM.Config)&&(e==null?void 0:e.IPAM.Config[0])&&(0,l.jsx)(u.Z.Item,{label:"IPV4",children:(0,l.jsxs)(u.Z,{labelStyle:{width:"150px"},column:1,bordered:!0,children:[(0,l.jsx)(u.Z.Item,{label:"Subnet",children:e==null?void 0:e.IPAM.Config[0].Subnet}),(0,l.jsx)(u.Z.Item,{label:"Gateway",children:e==null?void 0:e.IPAM.Config[0].Gateway}),(0,l.jsx)(u.Z.Item,{label:"IP Range ",children:e==null?void 0:e.IPAM.Config[0].IPRange}),(0,l.jsx)(u.Z.Item,{label:"Excluded IPs",children:(e==null?void 0:e.IPAM.Config[0].AuxiliaryAddresses)&&Object.keys(e==null?void 0:e.IPAM.Config[0].AuxiliaryAddresses).map(function(d){return(e==null?void 0:e.IPAM.Config[0].AuxiliaryAddresses[d])+" ,"})})]})}),(e==null?void 0:e.IPAM.Config)&&(e==null?void 0:e.IPAM.Config[1])&&(0,l.jsx)(u.Z.Item,{label:"IPV6",children:(0,l.jsxs)(u.Z,{labelStyle:{width:"150px"},column:1,bordered:!0,children:[(0,l.jsx)(u.Z.Item,{label:"Subnet",children:e==null?void 0:e.IPAM.Config[1].Subnet}),(0,l.jsx)(u.Z.Item,{label:"Gateway",children:e==null?void 0:e.IPAM.Config[1].Gateway}),(0,l.jsx)(u.Z.Item,{label:"IP Range ",children:e==null?void 0:e.IPAM.Config[1].IPRange}),(0,l.jsx)(u.Z.Item,{label:"Excluded IPs",children:(e==null?void 0:e.IPAM.Config[1].AuxiliaryAddresses)&&Object.keys(e==null?void 0:e.IPAM.Config[1].AuxiliaryAddresses).map(function(d){return(e==null?void 0:e.IPAM.Config[1].AuxiliaryAddresses[d])+" ,"})})]})}),(e==null?void 0:e.Options)&&Object.keys(e==null?void 0:e.Options).length>0&&(0,l.jsx)(u.Z.Item,{label:"Options",children:(0,l.jsx)(u.Z,{labelStyle:{width:"150px"},column:1,bordered:!0,children:Object.keys(e==null?void 0:e.Options).map(function(d){return(0,l.jsx)(u.Z.Item,{label:d,children:e.Options[d]},d)})})}),(e==null?void 0:e.Labels)&&Object.keys(e==null?void 0:e.Labels).length>0&&(0,l.jsx)(u.Z.Item,{label:"Lables",children:(0,l.jsx)(u.Z,{labelStyle:{width:"150px"},column:1,bordered:!0,children:Object.keys(e==null?void 0:e.Labels).map(function(d){return(0,l.jsx)(u.Z.Item,{label:d,children:e.Labels[d]},d)})})})]})})]})})});x.Z=R},24963:function(V,x,n){var B=n(67294),_=(0,B.createContext)({});x.Z=_},14946:function(V,x,n){n.d(x,{CI:function(){return t},HY:function(){return R},IS:function(){return y},XY:function(){return E},_3:function(){return M},_x:function(){return A},jR:function(){return D},t9:function(){return f}});var B=n(15009),_=n.n(B),W=n(99289),m=n.n(W),p=n(82346);function y(i){return j.apply(this,arguments)}function j(){return j=m()(_()().mark(function i(o){return _()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,p.request)("/api/app/network/get-detail",{method:"POST",data:o}));case 1:case"end":return r.stop()}},i)})),j.apply(this,arguments)}function D(i){return Z.apply(this,arguments)}function Z(){return Z=m()(_()().mark(function i(o){return _()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,p.request)("/api/app/network/get-list",{method:"POST",data:o}));case 1:case"end":return r.stop()}},i)})),Z.apply(this,arguments)}function t(){return I.apply(this,arguments)}function I(){return I=m()(_()().mark(function i(){return _()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,p.request)("/api/app/network/prune",{method:"POST"});case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},i)})),I.apply(this,arguments)}function A(i){return h.apply(this,arguments)}function h(){return h=m()(_()().mark(function i(o){return _()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,p.request)("/api/app/network/delete",{method:"POST",data:o});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},i)})),h.apply(this,arguments)}function E(i){return u.apply(this,arguments)}function u(){return u=m()(_()().mark(function i(o){return _()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,p.request)("/api/app/network/create",{method:"POST",data:o});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},i)})),u.apply(this,arguments)}function f(i){return l.apply(this,arguments)}function l(){return l=m()(_()().mark(function i(o){return _()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,p.request)("/api/app/network/disconnect",{method:"POST",data:o});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},i)})),l.apply(this,arguments)}function R(i){return P.apply(this,arguments)}function P(){return P=m()(_()().mark(function i(o){return _()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,p.request)("/api/app/network/connect",{method:"POST",data:o});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},i)})),P.apply(this,arguments)}function M(i){return a.apply(this,arguments)}function a(){return a=m()(_()().mark(function i(o){return _()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,p.request)("/api/app/network/get-container-list",{method:"POST",data:o}));case 1:case"end":return r.stop()}},i)})),a.apply(this,arguments)}}}]);
