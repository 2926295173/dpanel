"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9907],{88641:function($,E,e){e.d(E,{Z:function(){return O}});var j=e(87462),i=e(67294),I={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"},U=I,C=e(84089),x=function(c,d){return i.createElement(C.Z,(0,j.Z)({},c,{ref:d,icon:U}))},R=i.forwardRef(x),O=R},67719:function($,E,e){e.r(E),e.d(E,{default:function(){return S}});var j=e(15009),i=e.n(j),I=e(99289),U=e.n(I),C=e(5574),x=e.n(C),R=e(68262),O=e(9361),D=e(86250),c=e(45360),d=e(67294),g=e(36146),y=e(88360),w=e(29177),b=e(88641),A=e(94149),v=e(5966),K=e(97462),z=e(92398),s=e(85893);function N(f){var u=new g.Uo("user");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(z.Z,{centered:!0,activeKey:"register",items:[{icon:(0,s.jsx)(y.Z,{}),key:"register",label:u.format("registerUserTitle")}]}),(0,s.jsx)(v.Z,{name:"username",fieldProps:{size:"large",prefix:(0,s.jsx)(w.Z,{className:"prefixIcon"}),disabled:!0,defaultValue:f.username}}),(0,s.jsx)(v.Z,{name:"email",fieldProps:{size:"large",prefix:(0,s.jsx)(b.Z,{className:"prefixIcon"}),disabled:!!f.email||!1,defaultValue:f.email},placeholder:u.format("formEmailEmpty"),rules:f.email?[]:[{required:!0,message:u.format("formEmailEmpty")},{type:"email"}]}),(0,s.jsx)(v.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,s.jsx)(A.Z,{className:"prefixIcon"})},placeholder:u.format("formPasswordEmpty"),rules:f.securityPassword?[{required:!0,message:u.format("formPasswordEmpty")},{min:8,message:u.format("formPasswordRule1")},{pattern:/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,message:u.format("formPasswordRule2")}]:[]},"password"),(0,s.jsx)(K.Z,{name:["password"],children:function(){return(0,s.jsx)(v.Z.Password,{fieldProps:{size:"large",prefix:(0,s.jsx)(A.Z,{className:"prefixIcon"})},placeholder:u.format("formConfirmPasswordEmpty"),name:"confirmPassword",dependencies:["password"],rules:[{required:!0,message:u.format("formConfirmPasswordEmpty")},function(W){var Z=W.getFieldValue;return{validator:function(r,l){return!l||Z("password")===l?Promise.resolve():Promise.reject(new Error(u.format("formMessagePasswordNotMatch")))}}}]},"confirmPassword")}}),f.token&&(0,s.jsx)("input",{type:"hidden",name:"token",value:f.token})]})}var G=e(68602),V=e(82346),S=function(){var f=O.Z.useToken(),u=f.token,H=(0,V.useSearchParams)(),W=x()(H,1),Z=W[0],t=B(Z.get("token")||""),r=(0,d.useState)(),l=x()(r,2),n=l[0],o=l[1],a=t.securityPassword,P=(0,d.useState)({token:Z.get("token")||"",username:t.username||"",email:t.email||""}),h=x()(P,1),p=h[0],m=new g.Uo("user");(0,d.useEffect)(function(){window.document.title=m.format("documentTitle")},[]);function B(T){try{var F=T.split(".");if(F.length!==3)throw new Error(m.format("jwtMessageIncorrectFormat"));var L=F[1],Q=L.replace(/-/g,"+").replace(/_/g,"/"),M=decodeURIComponent(atob(Q).split("").map(function(J){return"%"+("00"+J.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(M)}catch(J){return console.error(m.format("jwtMessageInvalid"),J),null}}return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(D.Z,{justify:"center",align:"center",style:{height:"100vh",background:n&&n.themeUserConfig&&n.themeUserConfig.bgImage&&n.themeUserConfig.bgImage.src?"url(".concat(n.themeUserConfig.bgImage.src,")"):"".concat(u.colorBgElevated,"dd")},children:(0,s.jsx)(R.U,{onFinish:function(){var T=U()(i()().mark(function F(L){return i()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,(0,G.MS)({password:L.password,confirmPassword:L.confirmPassword,email:L.email||p.email,token:p.token});case 2:c.ZP.success(g.FD.format("title.successRegister")),V.history.replace("/user/login");case 4:case"end":return M.stop()}},F)}));return function(F){return T.apply(this,arguments)}}(),containerStyle:{background:"transparent",height:"auto"},logo:"",title:(0,s.jsx)("a",{href:"https://dpanel.cc",target:"_blank",children:(0,s.jsx)("img",{src:n&&n.themeUserConfig&&n.themeUserConfig.loginLogo?n.themeUserConfig.loginLogo:"/dpanel/static/asset/logo.png",width:"350"})}),subTitle:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("br",{}),(0,s.jsx)("br",{})]}),children:(0,s.jsx)(N,{securityPassword:a,token:p.token,username:p.username,email:p.email})})})})}},45360:function($,E,e){var j=e(74902),i=e(67294),I=e(66968),U=e(53124),C=e(21532),x=e(69711),R=e(66277),O=e(16474),D=e(84926);let c=null,d=t=>t(),g=[],y={};function w(){const{getContainer:t,duration:r,rtl:l,maxCount:n,top:o}=y,a=(t==null?void 0:t())||document.body;return{getContainer:()=>a,duration:r,rtl:l,maxCount:n,top:o}}const b=i.forwardRef((t,r)=>{const{messageConfig:l,sync:n}=t,{getPrefixCls:o}=(0,i.useContext)(U.E_),a=y.prefixCls||o("message"),P=(0,i.useContext)(I.J),[h,p]=(0,O.K)(Object.assign(Object.assign(Object.assign({},l),{prefixCls:a}),P.message));return i.useImperativeHandle(r,()=>{const m=Object.assign({},h);return Object.keys(m).forEach(B=>{m[B]=(...T)=>(n(),h[B].apply(h,T))}),{instance:m,sync:n}}),p}),A=i.forwardRef((t,r)=>{const[l,n]=i.useState(w),o=()=>{n(w)};i.useEffect(o,[]);const a=(0,C.w6)(),P=a.getRootPrefixCls(),h=a.getIconPrefixCls(),p=a.getTheme(),m=i.createElement(b,{ref:r,sync:o,messageConfig:l});return i.createElement(C.ZP,{prefixCls:P,iconPrefixCls:h,theme:p},a.holderRender?a.holderRender(m):m)});function v(){if(!c){const t=document.createDocumentFragment(),r={fragment:t};c=r,d(()=>{(0,x.q)()(i.createElement(A,{ref:n=>{const{instance:o,sync:a}=n||{};Promise.resolve().then(()=>{!r.instance&&o&&(r.instance=o,r.sync=a,v())})}}),t)});return}c.instance&&(g.forEach(t=>{const{type:r,skipped:l}=t;if(!l)switch(r){case"open":{d(()=>{const n=c.instance.open(Object.assign(Object.assign({},y),t.config));n==null||n.then(t.resolve),t.setCloseFn(n)});break}case"destroy":d(()=>{c==null||c.instance.destroy(t.key)});break;default:d(()=>{var n;const o=(n=c.instance)[r].apply(n,(0,j.Z)(t.args));o==null||o.then(t.resolve),t.setCloseFn(o)})}}),g=[])}function K(t){y=Object.assign(Object.assign({},y),t),d(()=>{var r;(r=c==null?void 0:c.sync)===null||r===void 0||r.call(c)})}function z(t){const r=(0,D.J)(l=>{let n;const o={type:"open",config:t,resolve:l,setCloseFn:a=>{n=a}};return g.push(o),()=>{n?d(()=>{n()}):o.skipped=!0}});return v(),r}function s(t,r){const l=(0,C.w6)(),n=(0,D.J)(o=>{let a;const P={type:t,args:r,resolve:o,setCloseFn:h=>{a=h}};return g.push(P),()=>{a?d(()=>{a()}):P.skipped=!0}});return v(),n}const N=t=>{g.push({type:"destroy",key:t}),v()},G=["success","info","warning","error","loading"],S={open:z,destroy:N,config:K,useMessage:O.Z,_InternalPanelDoNotUseOrYouWillBeFired:R.ZP};G.forEach(t=>{S[t]=(...r)=>s(t,r)});const f=()=>{};let u=null;const H=null;let W=null;const Z=null;E.ZP=S}}]);
