"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3985],{85060:function(Ee,y,e){e.d(y,{Z:function(){return g}});var j=e(87462),s=e(67294),Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},d=Z,p=e(84089),T=function(_,E){return s.createElement(p.Z,(0,j.Z)({},_,{ref:E,icon:d}))},C=s.forwardRef(T),g=C},2741:function(Ee,y,e){e.d(y,{Z:function(){return g}});var j=e(87462),s=e(67294),Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.7c6 6 9.4 14.1 9.4 22.6V928c0 17.7-14.3 32-32 32H192c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32h424.7c8.5 0 16.7 3.4 22.7 9.4l215.2 215.3zM790.2 326L602 137.8V326h188.2z"}}]},name:"file",theme:"filled"},d=Z,p=e(84089),T=function(_,E){return s.createElement(p.Z,(0,j.Z)({},_,{ref:E,icon:d}))},C=s.forwardRef(T),g=C},93613:function(Ee,y,e){e.d(y,{Z:function(){return g}});var j=e(87462),s=e(67294),Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32z"}}]},name:"folder",theme:"filled"},d=Z,p=e(84089),T=function(_,E){return s.createElement(p.Z,(0,j.Z)({},_,{ref:E,icon:d}))},C=s.forwardRef(T),g=C},27254:function(Ee,y,e){e.d(y,{Z:function(){return g}});var j=e(87462),s=e(67294),Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zm-180 0H238c-13 0-24.8 7.9-29.7 20L136 643.2V256h188.5l119.6 114.4H748V444z"}}]},name:"folder-open",theme:"filled"},d=Z,p=e(84089),T=function(_,E){return s.createElement(p.Z,(0,j.Z)({},_,{ref:E,icon:d}))},C=s.forwardRef(T),g=C},64789:function(Ee,y,e){e.d(y,{Z:function(){return g}});var j=e(87462),s=e(67294),Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},d=Z,p=e(84089),T=function(_,E){return s.createElement(p.Z,(0,j.Z)({},_,{ref:E,icon:d}))},C=s.forwardRef(T),g=C},63434:function(Ee,y,e){var j=e(1413),s=e(45987),Z=e(22270),d=e(84567),p=e(67294),T=e(90789),C=e(40284),g=e(85893),O=["options","fieldProps","proFieldProps","valueEnum"],_=p.forwardRef(function(h,b){var f=h.options,u=h.fieldProps,l=h.proFieldProps,m=h.valueEnum,v=(0,s.Z)(h,O);return(0,g.jsx)(C.Z,(0,j.Z)({ref:b,valueType:"checkbox",valueEnum:(0,Z.h)(m,void 0),fieldProps:(0,j.Z)({options:f},u),lightProps:(0,j.Z)({labelFormatter:function(){return(0,g.jsx)(C.Z,(0,j.Z)({ref:b,valueType:"checkbox",mode:"read",valueEnum:(0,Z.h)(m,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,j.Z)({options:f},u),proFieldProps:l},v))}},v.lightProps),proFieldProps:l},v))}),E=p.forwardRef(function(h,b){var f=h.fieldProps,u=h.children;return(0,g.jsx)(d.Z,(0,j.Z)((0,j.Z)({ref:b},f),{},{children:u}))}),c=(0,T.G)(E,{valuePropName:"checked"}),w=c;w.Group=_,y.Z=w},92067:function(Ee,y,e){e.d(y,{Z:function(){return b}});var j=e(15009),s=e.n(j),Z=e(99289),d=e.n(Z),p=e(13822),T=e(64789),C=e(56729),g=e(42075),O=e(83062),_=e(83622),E=e(37413),c=e(5251),w=e(36146),h=e(85893);function b(f){return(0,h.jsx)(C.Z,{columns:[{title:w.FD.format("listContainerName"),dataIndex:"name",render:function(l,m,v,ae){return(0,h.jsx)(g.Z,{direction:"vertical",style:{textAlign:"left"},children:m==null?void 0:m.Names.map(function(P){return(0,c.fi)(P,"/")})},m.Id)}},{title:w.FD.format("listPort"),dataIndex:"ports",search:!1,render:function(l,m,v,ae){var P=[],N=[];return m!=null&&m.Ports&&m.Ports.map(function(t,M){t.PublicPort?P.push(t):N.push(t)}),(0,h.jsx)(E.Z,{publicPort:P,privatePort:N,domain:[]})}},{title:w.FD.format("listManage"),valueType:"option",key:"option",ellipsis:!0,width:100,render:function(l,m,v,ae){return[(0,h.jsx)(O.Z,{title:w.FD.format("listManageUse"),children:(0,h.jsx)(_.ZP,{type:"link",onClick:d()(s()().mark(function P(){var N;return s()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,(0,p.jV)({md5:m.Id});case 2:N=M.sent,f.onSelect&&f.onSelect(N.data.info);case 4:case"end":return M.stop()}},P)})),children:(0,h.jsx)(T.Z,{})},m.Id)},m.Id)]}}],rowKey:"Id",request:function(){var u=d()(s()().mark(function l(m,v,ae){var P;return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,p.IE)({siteTitle:m.name});case 2:return P=t.sent,t.abrupt("return",{data:P.data.list,success:!0,total:P.data.list.length});case 4:case"end":return t.stop()}},l)}));return function(l,m,v){return u.apply(this,arguments)}}(),pagination:{pageSize:9}})}},81366:function(Ee,y,e){var j=e(97857),s=e.n(j),Z=e(19632),d=e.n(Z),p=e(5574),T=e.n(p),C=e(27254),g=e(42075),O=e(85418),_=e(25593),E=e(83622),c=e(67294),w=e(31112),h=e(85893),b={title:"/",path:"/"},f=(0,c.forwardRef)(function(u,l){var m=(0,c.useContext)(w.Z),v=m.showPath,ae=m.redirectPath,P=(0,c.useState)([b]),N=T()(P,2),t=N[0],M=N[1];(0,c.useImperativeHandle)(l,function(){return{addHistory:function(A,U){U=="/"?M([b]):M([].concat(d()(t),[{title:A,path:U}]))},initHistory:function(A,U){M([s()(s()({},b),{},{children:U})].concat(d()(A)))}}});var B=function(A){v?v(t[A].title,t[A].path):u.showPath&&u.showPath(t[A].title,t[A].path);var U=t.filter(function(D,se){return se<=A});M(d()(U))};return(0,h.jsxs)(g.Z,{children:[(0,h.jsx)(g.Z.Compact,{children:t.map(function(o,A){return o.children?(0,h.jsxs)(O.Z.Button,{menu:{items:o.children.map(function(U,D){return{key:D,label:(0,h.jsx)(_.Z.Link,{onClick:function(){ae(U)},children:U},D)}})},type:"dashed",onClick:function(D){B(A)},children:[(0,h.jsx)(C.Z,{})," ",o.title]},A):(0,h.jsx)(E.ZP,{icon:(0,h.jsx)(C.Z,{}),type:"dashed",onClick:function(){B(A)},children:o.title},A)})}),t.length>=2&&(0,h.jsx)(_.Z.Text,{copyable:{text:t[t.length-1].path}})]})});y.Z=f},31112:function(Ee,y,e){var j=e(67294),s=(0,j.createContext)({});y.Z=s},68536:function(Ee,y,e){e.d(y,{Z:function(){return E}});var j=e(24963),s=e(36146),Z=e(93613),d=e(36693),p=e(2741),T=e(25593),C=e(42075),g=e(67294),O=e(85893),_=0;function E(c){var w=(0,g.useContext)(j.Z),h=w.message,b=new s.Uo("components.explorer");return c.isDir?(0,O.jsx)(T.Z.Link,{onClick:function(){c.onClick&&c.onClick()},children:(0,O.jsxs)(C.Z,{children:[(0,O.jsx)(Z.Z,{}),c.showName]})}):c.isLink?(0,O.jsx)(T.Z.Link,{onClick:function(){c.onClick&&c.onClick()},children:(0,O.jsxs)(C.Z,{children:[(0,O.jsx)(d.Z,{}),c.showName]})}):(0,O.jsx)(T.Z.Text,{onClick:function(){if(_++,_==2){_=0,c.onClick&&c.onClick();return}setTimeout(function(){_==1&&h.info(b.format("fileNameMessageViewDetail")),_=0},400)},style:{cursor:"pointer"},children:(0,O.jsxs)(C.Z,{children:[(0,O.jsx)(p.Z,{}),c.showName]})})}},47248:function(Ee,y,e){var j=e(15009),s=e.n(j),Z=e(99289),d=e.n(Z),p=e(5574),T=e.n(p),C=e(38345),g=e(97269),O=e(62370),_=e(5966),E=e(64317),c=e(83622),w=e(85265),h=e(25593),b=e(42075),f=e(67294),u=e(3393),l=e(97961),m=e(92754),v=e(82346),ae=e(2205),P=e(3616),N=e(36146),t=e(85893),M=(0,f.forwardRef)(function(B,o){var A=(0,f.useState)(!1),U=T()(A,2),D=U[0],se=U[1],ue=(0,f.useRef)(),X=(0,f.useRef)(),je=(0,f.useState)(!1),R=T()(je,2),J=R[0],n=R[1],pe=new N.Uo("components.imagePull");return(0,f.useImperativeHandle)(o,function(){return{upgradeImage:function(S){var Y;return se(!0),(Y=ue.current)===null||Y===void 0||Y.setFieldValue("imageUrl",S),(0,u.Gb)({tag:S,type:"pull"})},setImageName:function(S){var Y;se(!0),(Y=ue.current)===null||Y===void 0||Y.setFieldValue("imageUrl",S)}}}),[(0,t.jsx)(c.ZP,{type:B.buttonType?B.buttonType:"default",onClick:function(){var S,Y;se(!0),(S=ue.current)===null||S===void 0||S.resetFields(),(Y=X.current)===null||Y===void 0||Y.setStart("")},children:pe.format("triggerButton")},"remoteBtn"),(0,t.jsxs)(w.Z,{forceRender:!0,open:D,title:pe.format("drawerTitle"),width:P.R_,onClose:function(){var S;se(!1),(S=X.current)===null||S===void 0||S.close()},footer:!1,children:[(0,t.jsx)(C.Z,{children:(0,t.jsx)(h.Z.Text,{children:(0,t.jsxs)("ul",{style:{lineHeight:"30px"},children:[(0,t.jsxs)("li",{children:[pe.format("tip.1")," ",(0,t.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:N.FD.format("help")})]}),(0,t.jsxs)("li",{children:[pe.format("tip.2")," ",(0,t.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:N.FD.format("help")})]}),(0,t.jsxs)("li",{children:[pe.format("tip.3")," "]}),(0,t.jsxs)("li",{children:[pe.format("tip.4")," ",(0,t.jsx)(v.Link,{to:"/image/registry",children:N.Ob.format("image.registry.create")})]}),(0,t.jsxs)("li",{children:[pe.format("tip.5")," ",(0,t.jsx)(v.Link,{to:"/image/registry",children:N.Ob.format("image.registry")})]})]})})}),(0,t.jsx)(C.Z,{title:pe.format("triggerButton"),headerBordered:!0,children:(0,t.jsxs)(g.A,{formRef:ue,submitter:!1,isKeyPressSubmit:!0,onFinish:function(){var Pe=d()(s()().mark(function S(Y){var Ue,Le,we,Ke,Ze,Fe;return s()().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return Ze=(Ue=Y.imageUrl)!==null&&Ue!==void 0?Ue:"",Y.registry&&(Ze=Y.registry.serverAddress+"/"+Ze),n(!0),(Le=X.current)===null||Le===void 0||Le.setStart(Ze),be.next=6,(0,u.Gb)({tag:Ze,type:"pull",platform:(we=Y.platform)!==null&&we!==void 0?we:""}).finally(function(){n(!1)});case 6:return Fe=be.sent,(Ke=X.current)===null||Ke===void 0||Ke.setFinish(),se(!1),B.onFinish&&B.onFinish(Fe.data.tag),be.abrupt("return",!0);case 11:case"end":return be.stop()}},S)}));return function(S){return Pe.apply(this,arguments)}}(),children:[(0,t.jsxs)(b.Z.Compact,{children:[(0,t.jsx)(O.Z,{name:"registry",children:(0,t.jsx)(ae.Z,{width:"150px"})}),(0,t.jsx)(_.Z,{disabled:J,width:270,name:"imageUrl",placeholder:pe.format("imageUrlEmpty"),required:!0,rules:[{required:!0}]}),(0,t.jsx)(E.Z,{name:"platform",style:{width:100},placeholder:pe.format("imagePlatformEmpty"),options:l.ii.map(function(Pe){return{label:Pe.name,value:Pe.name}})}),(0,t.jsx)(c.ZP,{loading:J,onClick:d()(s()().mark(function Pe(){var S;return s()().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:(S=ue.current)===null||S===void 0||S.submit();case 1:case"end":return Ue.stop()}},Pe)})),children:pe.format("triggerButton")}),(0,t.jsx)(c.ZP,{danger:!0,onClick:function(){var S;(S=X.current)===null||S===void 0||S.close()},children:N.FD.format("listManageKill")})]}),(0,t.jsx)(O.Z,{label:pe.format("progressTitle"),children:(0,t.jsx)(m.Z,{ref:X})})]})})]},"remoteDrawer")]});y.Z=M},80271:function(Ee,y,e){var j=e(15009),s=e.n(j),Z=e(99289),d=e.n(Z),p=e(5574),T=e.n(p),C=e(184),g=e(56729),O=e(83062),_=e(67294),E=e(3393),c=e(68536),w=e(5251),h=e(81366),b=e(3616),f=e(36146),u=e(85893),l=(0,_.forwardRef)(function(m,v){(0,_.useImperativeHandle)(v,function(){return{show:function(){}}});var ae=(0,_.useState)(""),P=T()(ae,2),N=P[0],t=P[1],M=(0,_.useState)(!1),B=T()(M,2),o=B[0],A=B[1],U=(0,_.useRef)(),D=(0,_.useRef)(),se=function(R,J){t(J)},ue=new f.Uo("components.explorer"),X=new f.Uo("image");return(0,u.jsx)(C.a,{drawerProps:{width:b.R_},open:o,submitter:!1,title:X.format("fileTitle"),onOpenChange:function(R){A(R),t(R?"/":"")},trigger:(0,u.jsx)(O.Z,{title:X.format("fileTitle"),children:m.trigger}),children:(0,u.jsx)(g.Z,{headerTitle:(0,u.jsx)(h.Z,{ref:D,showPath:se}),scroll:{x:"max-content"},search:!1,rowKey:"name",pagination:{pageSize:500,position:["topRight","bottomRight"]},actionRef:U,request:d()(s()().mark(function je(){var R;return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(N!=""){n.next=2;break}return n.abrupt("return",{data:[],total:0,success:!0});case 2:return n.next=4,(0,E.cD)({md5:m.imageId,path:N});case 4:return R=n.sent,n.abrupt("return",{data:R.data.info,total:R.data.info.length,success:!0});case 6:case"end":return n.stop()}},je)})),columns:[{title:ue.format("listName"),dataIndex:"showName",key:"name",render:function(S,J,n,pe,Pe){var S,Y=J.name.replace(N,"");return J.isDir?S=(0,u.jsx)(c.Z,{isDir:!0,onClick:function(){return se(Y,J.path)},showName:Y}):J.isSymlink?S=(0,u.jsx)(c.Z,{isLink:!0,showName:Y}):S=(0,u.jsx)(c.Z,{showName:Y}),S}},{title:ue.format("listModStr"),dataIndex:"modStr",key:"modStr"},{title:ue.format("listUser"),dataIndex:"user"},{title:ue.format("listGroup"),dataIndex:"group"},{title:ue.format("listSize"),dataIndex:"size",key:"size",render:function(R,J,n,pe,Pe){return(0,w.FI)(J.size)}},{title:ue.format("listModTime"),dataIndex:"modTime",key:"modTime",render:function(R,J,n,pe,Pe){return(0,w.NF)(J.modTime)},sorter:function(R,J){return new Date(R.modTime).getTime()-new Date(J.modTime).getTime()}}],cardProps:{ghost:!0}},"".concat(m.imageId,"-").concat(N))})});y.Z=l},20743:function(Ee,y,e){var j=e(15009),s=e.n(j),Z=e(99289),d=e.n(Z),p=e(5574),T=e.n(p),C=e(67294),g=e(14946),O=e(64789),_=e(56729),E=e(83622),c=e(85265),w=e(42075),h=e(66309),b=e(16970),f=e(3616),u=e(36146),l=e(85893),m=(0,C.forwardRef)(function(v,ae){(0,C.useImperativeHandle)(ae,function(){return{show:function(){M(!0)}}});var P=(0,C.useState)(!1),N=T()(P,2),t=N[0],M=N[1],B=(0,C.useRef)(),o=new u.Uo("components.network");return(0,l.jsxs)(l.Fragment,{children:[v.showTriggerButton&&(0,l.jsx)(E.ZP,{onClick:function(){M(!0)},children:o.format("selectTriggerButton")}),(0,l.jsx)(c.Z,{title:o.format("selectDrawerTitle"),width:f.R_,footer:!1,open:t,onClose:function(){return M(!1)},extra:(0,l.jsx)(w.Z,{children:(0,l.jsx)(b.Z,{onFinish:function(){var U,D;!((U=B.current)===null||U===void 0)&&U.reloadAndRest&&((D=B.current)===null||D===void 0||D.reloadAndRest())}},"create")}),children:(0,l.jsx)(_.Z,{rowKey:"Name",actionRef:B,columns:[{title:u.FD.format("listTitle"),dataIndex:"Name",render:function(U,D,se,ue,X){return D.Name=="none"||D.Name=="bridge"||D.Name=="host"?(0,l.jsxs)(l.Fragment,{children:[D.Name," ",(0,l.jsx)(h.Z,{color:"blue",children:"System"})]}):(0,l.jsx)(l.Fragment,{children:U})}},{title:u.FD.format("listType"),ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"Driver",ellipsis:!0,width:100,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4",search:!1,width:120,render:function(U,D,se,ue,X){return D.IPAM.Config&&D.IPAM.Config[0]&&(0,l.jsxs)(w.Z,{direction:"vertical",children:[D.IPAM.Config[0].Subnet,D.IPAM.Config[0].Gateway]})}},{title:"IPV6",search:!1,render:function(U,D,se,ue,X){return D.IPAM.Config&&D.IPAM.Config[1]&&(0,l.jsxs)(w.Z,{direction:"vertical",children:[D.IPAM.Config[1].Subnet,D.IPAM.Config[1].Gateway]})}},{title:u.FD.format("listManage"),width:100,search:!1,render:function(U,D,se,ue,X){return[D.Name!="none"&&D.Name!="bridge"&&D.Name!="host"&&(0,l.jsx)(E.ZP,{type:"link",onClick:function(){v.onSelect(D),M(!1)},children:(0,l.jsx)(O.Z,{})},D.Id)]}}],request:function(){var A=d()(s()().mark(function U(D,se,ue){var X;return s()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,(0,g.jR)({name:D.Name});case 2:return X=R.sent,R.abrupt("return",{data:X.data.list,success:!0,total:X.data.list.length});case 4:case"end":return R.stop()}},U)}));return function(U,D,se){return A.apply(this,arguments)}}(),pagination:{pageSize:10}})})]})});y.Z=m},2205:function(Ee,y,e){e.d(y,{Z:function(){return _}});var j=e(97857),s=e.n(j),Z=e(5574),d=e.n(Z),p=e(75870),T=e(36146),C=e(34041),g=e(67294),O=e(85893);function _(E){var c=(0,g.useState)([]),w=d()(c,2),h=w[0],b=w[1],f=new T.Uo("components.selectRegistry");(0,g.useEffect)(function(){(0,p.Ot)().then(function(l){l&&b(l.data.list)})},[]);var u={};return E.multiple&&(u.mode="multiple"),E.top&&(u.placement="topLeft"),(0,O.jsx)(C.Z,s()({popupMatchSelectWidth:!E.width,style:E.width?{width:E.width}:{},onChange:function(m){if(m)if(Array.isArray(m)){var v=m.map(function(ae){return h[ae]});E.onChangeList&&E.onChangeList(v)}else E.onChange&&E.onChange(h[m])},placeholder:f.format("nameEmpty"),options:h.map(function(l,m){return{value:m,label:l.title+"("+l.serverAddress+")"}}),allowClear:!0},u))}},47131:function(Ee,y,e){e.r(y),e.d(y,{default:function(){return $n}});var j=e(97857),s=e.n(j),Z=e(15009),d=e.n(Z),p=e(19632),T=e.n(p),C=e(99289),g=e.n(C),O=e(5574),_=e.n(O),E=e(90078),c=e(38345),w=e(97269),h=e(2236),b=e(62370),f=e(5966),u=e(24739),l=e(97462),m=e(30291),v=e(92398),ae=e(40056),P=e(67294),N=e(42963),t=e(51042),M=e(63434),B=e(17186),o=e(71230),A=e(15746),U=e(42075),D=e(25593),se=e(85265),ue=e(92067),X=e(5251),je=e(3616),R=e(36146),J=e(89240),n=e(85893),pe=(0,P.forwardRef)(function(K,De){var x=(0,P.useState)(!1),ce=_()(x,2),Q=ce[0],oe=ce[1],te=(0,P.useRef)(),V=new R.Uo("components.appForm"),q=function(F){return(0,n.jsxs)(c.Z,{bordered:!0,extra:F.action,style:{marginBottom:10},children:[(0,n.jsx)(c.Z,{title:V.format("createLinkItemTitle"),ghost:!0,children:(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(A.Z,{span:6,children:(0,n.jsx)(f.Z,{label:V.format("createLinkItemName"),name:"name",width:"md",readonly:!0})}),(0,n.jsxs)(A.Z,{span:14,children:[(0,n.jsx)(f.Z,{label:V.format("createLinkItemAlise"),name:"alise",width:"md",readonly:!0,tooltip:V.format("createLinkItemAliseTip"),hidden:!0}),(0,n.jsx)(b.Z,{label:V.format("createLinkItemAlise"),tooltip:V.format("createLinkItemAliseTip"),children:(0,n.jsx)(U.Z,{direction:"vertical",children:[F.name,F.record.alise].map(function($){return(0,n.jsx)(D.Z.Text,{copyable:!0,children:$})})})})]}),(0,n.jsx)(A.Z,{span:4,children:(0,n.jsx)(M.Z,{label:V.format("createLinkItemVolume"),name:"volume"})})]})}),(0,n.jsx)(c.Z,{ghost:!0,title:V.format("createLinkItemEnv"),children:(0,n.jsx)(U.Z,{direction:"vertical",children:F.record.env&&(0,X.oZ)(F.record.env).map(function($,z){return(0,n.jsx)(D.Z.Text,{copyable:{icon:(0,n.jsx)(t.Z,{}),onCopy:function(){K.onAddEnv($.name,$.value)},tooltips:[V.format("createLinkAddToEnv"),"success"]},code:!0,ellipsis:{tooltip:"".concat($.name,"=").concat($.value)},children:"".concat($.name,"=").concat($.value)},z)})},"linkEnv")})]})},Me=function(F){var $,z,k=!1,W=($=(z=te.current)===null||z===void 0?void 0:z.getList())!==null&&$!==void 0?$:[];if(W.map(function(Ce){Ce.name==F.name&&(k=!0)}),!k){var re;(re=te.current)===null||re===void 0||re.add(F)}};return(0,P.useImperativeHandle)(De,function(){return{setDefaultLink:function(F){F&&F.map(function($){$.name!=""&&Me($)})}}}),(0,n.jsxs)(c.Z,{title:V.format("createLinkTitle"),headerBordered:!0,children:[(0,n.jsx)(B.u,{name:"links",actionRef:te,creatorButtonProps:{creatorButtonText:V.format("createLinkAddButton")},actionGuard:{beforeAddRow:function(F,$){return oe(!0),!1}},copyIconProps:!1,min:0,itemRender:function(F,$){return(0,n.jsx)(q,{action:F.action,name:$.record.name,record:$.record})}}),(0,n.jsx)(se.Z,{title:V.format("createLinkSelectContainer"),width:je.R_,footer:!1,open:Q,onClose:function(){return oe(!1)},children:(0,n.jsx)(ue.Z,{onSelect:function(F){Me({name:(0,X.fi)(F.Name,"/"),volume:!1,env:F.Config.Env,alise:(0,J.zY)(F.Name)}),oe(!1)}})})]})}),Pe=pe,S=e(91058),Y=e(10523),Ue=e(24796),Le=e(52688),we=e(24963);function Ke(){var K=(0,P.useContext)(we.Z),De=K.message,x=new R.Uo("components.appForm");return(0,n.jsx)(c.Z,{children:(0,n.jsxs)(u.UW,{children:[(0,n.jsx)(Le.Z,{fieldProps:{onChange:function(Q){Q&&De.warning(x.format("createAdvRunCommandPrivilegedNotice"))}},name:"privileged",tooltip:"--privileged",label:x.format("createAdvRunCommandPrivileged"),initialValue:!1}),(0,n.jsx)(Le.Z,{name:"autoRemove",tooltip:"--rm",label:x.format("createAdvRunCommandAutoRemove"),initialValue:!1}),(0,n.jsx)(Le.Z,{fieldProps:{onChange:function(Q){Q&&De.warning(x.format("createAdvRunCommandHostPidNotice"))}},tooltip:"--pid host",name:"hostPid",label:x.format("createAdvRunCommandHostPid"),initialValue:!1})]})})}var Ze=e(91845),Fe=e(62597),Ge=e(82346),be=e(20743),_n=(0,P.forwardRef)(function(K,De){var x=(0,P.useRef)(),ce=(0,P.useRef)(),Q=new R.Uo("components.appForm");(0,P.useImperativeHandle)(De,function(){return{}});var oe=function(V){var q,Me,ie=!1,F=(q=(Me=x.current)===null||Me===void 0?void 0:Me.getList())!==null&&q!==void 0?q:[];if(F.map(function(z){z.name==V.name&&(ie=!0)}),!ie){var $;($=x.current)===null||$===void 0||$.add(V)}};return(0,n.jsxs)(c.Z,{title:Q.format("createNetworkTitle"),headerBordered:!0,extra:(0,n.jsx)(U.Z,{children:K.showUseBridgeNetwork&&(0,n.jsx)(Le.Z,{name:"useBridgeNetwork",fieldProps:{checkedChildren:Q.format("createNetworkUseBridgeNetwork"),unCheckedChildren:Q.format("createNetworkUseBridgeNetwork")}},"useBridgeNetwork")}),children:[(0,n.jsx)(B.u,{name:"network",actionRef:x,creatorButtonProps:{creatorButtonText:Q.format("createNetworkAddButton")},actionGuard:{beforeAddRow:function(V,q){var Me;return(Me=ce.current)===null||Me===void 0||Me.show(),!1}},copyIconProps:!1,min:0,itemRender:function(V,q){return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(u.UW,{children:[(0,n.jsx)(f.Z,{label:Q.format("createNetworkName"),name:"name",width:"md",disabled:!0,fieldProps:{value:q.record.name}}),(0,n.jsx)(f.Z,{label:Q.format("createNetworkAlise"),name:"alise",tooltip:Q.format("createNetworkAliseTip"),placeholder:Q.format("createNetworkAliseEmpty"),disabled:q.record.name=="bridge"}),(0,n.jsx)(f.Z,{label:"IpV4",name:"ipV4",width:"md",disabled:q.record.name=="bridge",fieldProps:{addonAfter:q.record.subnet}}),q.record.subnetV6&&(0,n.jsx)(f.Z,{label:"IpV6",name:"ipV6",width:"md",disabled:q.record.name=="bridge",fieldProps:{addonAfter:q.record.subnetV6}}),(0,n.jsx)(b.Z,{label:" ",children:V.action})]})})}}),(0,n.jsx)(be.Z,{ref:ce,onSelect:function(V){oe({name:V.Name,alise:[""],subnet:V.IPAM.Config[0].Subnet,subnetV6:V.IPAM.Config[1]&&V.IPAM.Config[1].Subnet})}})]})}),fn=_n,vn=e(82034),ke=e(52255),pn=e(59252),rn=e(3393),hn=e(64412),gn=function(De){var x=new R.Uo("components.appForm");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(c.Z,{title:x.format("createSelfNetworkTitle"),children:[(0,n.jsxs)(u.UW,{children:[(0,n.jsx)(f.Z,{label:x.format("createSelfNetworkIp",{ip:"ipv4"}),name:["ipV4","address"],width:"md",tooltip:x.format("createSelfNetworkIpTip",{ip:"ipv4",example:"192.168.1.5"}),placeholder:"192.168.1.5"}),(0,n.jsx)(l.Z,{name:["ipV4"],children:function(Q){var oe=Q.ipV4;return(0,n.jsx)(f.Z,{label:x.format("createSelfNetworkIpSubnet",{ip:"ipv4"}),name:["ipV4","subnet"],width:"md",required:oe&&oe.address,tooltip:x.format("createSelfNetworkIpSubnetTip",{ip:"ipv4",example:"192.168.1.0/24"}),placeholder:"192.168.1.0/24",rules:[{required:oe&&oe.address}]})}}),(0,n.jsx)(f.Z,{label:x.format("createSelfNetworkIpGateway",{ip:"ipv4"}),name:["ipV4","gateway"],width:"md",tooltip:x.format("createSelfNetworkIpGatewayTip",{ip:"ipv4",example:"192.168.1.1"}),placeholder:"192.168.1.1"}),(0,n.jsx)(Le.Z,{label:x.format("createSelfNetworkIpV6Enable"),name:"enableIpV6Address"})]}),(0,n.jsx)(l.Z,{name:["enableIpV6Address"],children:function(Q){var oe=Q.enableIpV6Address;if(oe)return(0,n.jsxs)(u.UW,{children:[(0,n.jsx)(f.Z,{label:x.format("createSelfNetworkIp",{ip:"ipv6"}),name:["ipV6","address"],width:"md",tooltip:x.format("createSelfNetworkIpTip",{ip:"ipv6",example:"2001:db8::5"}),placeholder:"2001:db8::5"}),(0,n.jsx)(l.Z,{name:["ipV6"],children:function(V){var q=V.ipV6;return(0,n.jsx)(f.Z,{label:x.format("createSelfNetworkIpSubnet",{ip:"ipv6"}),name:["ipV6","subnet"],width:"md",required:q&&q.address,tooltip:x.format("createSelfNetworkIpSubnetTip",{ip:"ipv6",example:"2001:db8::/48"}),placeholder:"2001:db8::/48",rules:[{required:q&&q.address}]})}}),(0,n.jsx)(f.Z,{label:x.format("createSelfNetworkIpGateway",{ip:"ipv6"}),name:["ipV6","gateway"],width:"md",tooltip:x.format("createSelfNetworkIpGatewayTip",{ip:"ipv6",example:"2001:db8::1"}),placeholder:"2001:db8::1"})]})}})]}),(0,n.jsx)(hn.Z,{})]})},En=gn,Pn=e(90672);function Cn(){var K=new R.Uo("components.appForm");return(0,n.jsx)(c.Z,{title:K.format("createHookTitle"),headerBordered:!0,subTitle:"",children:(0,n.jsx)(Pn.Z,{label:K.format("createHookContainerCreate"),name:["hook","containerCreate"],tooltip:K.format("createHookContainerCreateTip")})})}var jn=e(93529),Dn=e(56729),Mn=e(66309),In=e(96074),ze=e(83622),On=e(83062),Rn=e(18148),xn=e(64789),Tn=e(85060),tn=e(78451),yn=e(99861),An=e(80821),Un=e(1699),Ln=e(80271),bn=e(47248);function Zn(K){var De=(0,P.useState)(!1),x=_()(De,2),ce=x[0],Q=x[1],oe=(0,P.useContext)(N.Z),te=oe.createFormRef,V=oe.volumeListRef,q=oe.createEnvRef,Me=oe.domainRef,ie=new R.Uo("components.appForm");function F(z){return $.apply(this,arguments)}function $(){return $=g()(d()().mark(function z(k){var W,re,Ce,G,Oe,Re,_e,H,a,le,he,fe;return d()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,(0,rn.YU)({md5:k});case 2:return G=ee.sent,K.redeploy||(H=(Oe=te.current)===null||Oe===void 0?void 0:Oe.getFieldsValue(),(Re=te.current)===null||Re===void 0||Re.resetFields(),(_e=te.current)===null||_e===void 0||_e.setFieldsValue({siteName:H.siteName,siteTitle:H.siteTitle,useBridgeNetwork:H.useBridgeNetwork})),G.data.info.Config.Env&&G.data.info.Config.Env.map(function(Ae){var ve,ge=Ae.split("=");(ve=q.current)===null||ve===void 0||ve.addEnvItem(ge[0],ge.slice(1).join("="))}),(W=te.current)===null||W===void 0||W.setFieldValue("imageName",k),(re=te.current)===null||re===void 0||re.setFieldValue("workDir",G.data.info.Config.WorkingDir),(Ce=Me.current)===null||Ce===void 0||Ce.setExposePort(G.data.info.Config.ExposedPorts),K.redeploy||(G.data.info.Config.Volumes?(he=[],Object.keys(G.data.info.Config.Volumes).map(function(Ae,ve){he.push(Ae)}),(le=V.current)===null||le===void 0||le.setDefaultDestPath(he)):(fe=V.current)===null||fe===void 0||fe.setDefaultDestPath([]),(a=te.current)===null||a===void 0||a.setFieldsValue({workDir:{value:"",useDefault:!0,default:G.data.info.Config.WorkingDir},user:{value:"",useDefault:!0,default:G.data.info.Config.User},command:{value:"",useDefault:!0,default:G.data.info.Config.Cmd&&G.data.info.Config.Cmd.join(" ")},entrypoint:{value:"",useDefault:!0,default:G.data.info.Config.Entrypoint&&G.data.info.Config.Entrypoint.join(" ")}})),ee.abrupt("return",!0);case 10:case"end":return ee.stop()}},z)})),$.apply(this,arguments)}return(0,P.useEffect)(function(){K.fromImageId&&F(K.fromImageId)},[K.fromImageId]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(se.Z,{destroyOnHidden:!0,open:ce,width:je.R_,title:ie.format("dockerImageTitle"),footer:!1,onClose:function(){Q(!1)},children:(0,n.jsx)(Dn.Z,{scroll:{x:"max-content"},columns:[{title:"Id",dataIndex:"Id",search:!1,width:120,render:function(k,W,re,Ce,G){return(0,n.jsx)(tn.Z,{content:W.Id.slice(7,19)})}},{title:R.FD.format("listImageName"),dataIndex:"tag",render:function(k,W,re,Ce){return(0,n.jsx)(tn.Z,{content:W.RepoTags[0]})}},{title:"Digest",width:120,render:function(k,W,re,Ce,G){var Oe=W.RepoDigests&&W.RepoDigests[0];return Oe?Oe.substring(Oe.indexOf("@")+8).substring(0,12):(0,n.jsx)(Mn.Z,{color:"warning",children:new R.Uo("components.appDetail.appDetailQuickManage").format("checkImageUpgrade.-3")})}},{title:R.FD.format("listCreatedAt"),dataIndex:"Created",search:!1,width:180,render:function(k,W,re,Ce){return(0,n.jsx)("div",{children:(0,X.ZM)(W.Created*1e3)},W.Id)},sorter:function(k,W){return k.Created-W.Created}},{title:R.FD.format("listManage"),valueType:"option",key:"option",width:50,render:function(k,W,re,Ce){return(0,n.jsx)(U.Z,{split:(0,n.jsx)(In.Z,{type:"vertical"}),children:(0,n.jsx)(An.Z,{icon:(0,n.jsx)(xn.Z,{}),tips:R.FD.format("listManageUse"),action:function(){return F(W.RepoTags[0])},type:"link",onSuccess:function(){Q(!1)}},"addImage")})}}],request:function(){var z=g()(d()().mark(function k(W,re,Ce){var G,Oe,Re;return d()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return K.redeploy,H.next=3,(0,Rn.KG)({tag:W.tag});case 3:return G=H.sent,Oe=0,Re=[],G.data.list&&(Re=G.data.list.flatMap(function(a){return a.RepoTags.map(function(le){var he,fe=(he=a.RepoDigests)===null||he===void 0?void 0:he.find(function(xe){var ee=xe.split("@"),Ae=_()(ee,2),ve=Ae[0],ge=Ae[1];return le.includes(ve)});return{Key:Oe++,Id:a.Id,Created:a.Created,RepoTags:[le],RepoDigests:[fe]}})})),H.abrupt("return",{data:Re,success:!0,total:Re.length});case 8:case"end":return H.stop()}},k)}));return function(k,W,re){return z.apply(this,arguments)}}(),rowKey:"Key",pagination:{pageSize:8}})},"imageTableList"),(0,n.jsxs)(U.Z.Compact,{children:[(0,n.jsx)(f.Z,{width:"lg",label:ie.format("dockerImageImageName"),name:"imageName",disabled:!0,placeholder:ie.format("dockerImageImageNameEmpty"),rules:[{required:!0}],required:!0}),(0,n.jsx)(b.Z,{label:" ",children:(0,n.jsx)(ze.ZP,{type:"primary",onClick:function(){return Q(!0)},children:ie.format("dockerImageTitle")},"showBtn")}),(0,n.jsx)(l.Z,{name:["imageName"],children:function(k){var W=k.imageName;if(W)return(0,n.jsx)(b.Z,{label:" ",children:(0,n.jsx)(yn.Z,{finishAutoHide:!0,image:W?[W]:[],trigger:(0,n.jsx)(On.Z,{title:ie.format("dockerImageUpgradeImageTip"),children:(0,n.jsx)(ze.ZP,{icon:(0,n.jsx)(Tn.Z,{}),children:ie.format("dockerImageUpgradeImageButton")})})})})}}),(0,n.jsx)(b.Z,{label:" ",children:(0,n.jsx)(bn.Z,{onFinish:function(k){F(k)}},"remote")}),(0,n.jsx)(b.Z,{label:" ",children:(0,n.jsx)(l.Z,{name:["imageName"],children:function(k){var W=k.imageName;if(W)return(0,n.jsx)(Un.u,{access:"canSeeEnableCe",showProTips:!0,children:function(Ce){var G=Ce.canSeeEnableCe;return(0,n.jsx)(Ln.Z,{imageId:W,trigger:(0,n.jsx)(ze.ZP,{disabled:G,children:ie.format("dockerImageFileExplorer")})})}})}})})]})]})}var Bn=e(44349);function Wn(){var K=new R.Uo("components.appForm");return(0,n.jsx)(c.Z,{children:(0,n.jsx)(Bn.Z,{name:"device",label:K.format("createDevice"),hideCopyButton:!0,showAddButton:!0,gap:10,items:[{label:K.format("createDeviceHost"),name:"host",width:"md",placeholder:"/dev/tty0"},{label:K.format("createDeviceDest"),name:"dest",width:"md",placeholder:"/dev/tty0"}]})})}var an=e(64317);function wn(){var K=new R.Uo("components.appForm");return(0,n.jsxs)(c.Z,{children:[(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(A.Z,{span:4,children:(0,n.jsx)(Le.Z,{label:K.format("createGpus"),name:["gpus","enable"]})}),(0,n.jsx)(A.Z,{span:20,children:(0,n.jsx)(l.Z,{name:["gpus"],children:function(x){var ce=x.gpus;if(ce&&ce.enable)return(0,n.jsx)(an.Z,{mode:"tags",label:K.format("createGpusDevice"),name:["gpus","device"],placeholder:K.format("createGpusDeviceEmpty")})}})})]}),(0,n.jsx)(l.Z,{name:["gpus"],children:function(x){var ce=x.gpus;if(ce&&ce.enable)return(0,n.jsx)(an.Z,{label:K.format("createGpusCap"),name:["gpus","capabilities"],mode:"multiple",fieldProps:{allowClear:!0},options:K.option("createGpusCapOption",["compute","compat32","graphics","utility","video","display"])})}})]})}var Nn=e(55730),Sn=e(27323),Kn=e(44771),Fn=e(33879),kn=e(96486),Ye=e.n(kn),Hn=e(73396),sn=e(14946),Vn=e(13822);function $n(){var K,De=(0,P.useContext)(we.Z),x=De.loading,ce=De.notice,Q=(0,Ge.useSearchParams)(),oe=_()(Q,2),te=oe[0],V=oe[1],q=(0,Ge.useNavigate)(),Me=(0,P.useState)("basic"),ie=_()(Me,2),F=ie[0],$=ie[1],z=(K=te.get("imageId"))!==null&&K!==void 0?K:"",k=new R.Uo("app"),W=new R.Uo("components.appForm"),re=(0,P.useRef)(),Ce=(0,P.useRef)(),G=(0,P.useRef)(),Oe=(0,P.useRef)(),Re=(0,P.useRef)();return(0,P.useEffect)(function(){var _e,H,a=te.get("id");(_e=re.current)===null||_e===void 0||_e.resetFields(),(H=re.current)===null||H===void 0||H.setFieldValue("useBridgeNetwork",!0),a&&(x.show(),(0,Fe.iE)({id:a}).then(function(){var le=g()(d()().mark(function he(fe){var xe,ee,Ae,ve,ge,Qe,Xe,r,Ie,on,Ne,ln,dn,Se,un;return d()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(r=(xe=fe.data.containerInfo)===null||xe===void 0?void 0:xe.Info,Ie={info:{}},!r){de.next=12;break}return de.prev=3,de.next=6,(0,rn.YU)({md5:r.Image});case 6:on=de.sent,Ie=on.data,de.next=12;break;case 10:de.prev=10,de.t0=de.catch(3);case 12:return Ne=[],de.prev=13,de.next=16,(0,sn.jR)();case 16:ln=de.sent,Ne=ln.data.list,de.next=22;break;case 20:de.prev=20,de.t1=de.catch(13);case 22:return dn=function(i){if(!i)return{};var I=i[fe.data.siteName];if(!I)return{};var L=Ne&&Ne.find(function(ne){return ne.Id==I.NetworkID});return{ipV4:{address:I.IPAddress,gateway:I.Gateway,subnet:L&&L.IPAM.Config[0]&&L.IPAM.Config[0].Subnet},ipV6:{address:I.GlobalIPv6Address,gateway:I.IPv6Gateway,subnet:L&&L.IPAM.Config[1]&&L.IPAM.Config[1].Subnet},enableIpV6Address:L&&L.IPAM.Config[1],bindIpV6:!!(L&&L.IPAM.Config[1])}}(r==null?void 0:r.NetworkSettings.Networks),Se=[],de.next=26,function(){var i=g()(d()().mark(function I(L,ne){var Te;return d()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(!(!(ne!=null&&ne.NetworkSettings)||!(ne!=null&&ne.NetworkSettings.Networks)||!(ne!=null&&ne.NetworkSettings.Networks[L]))){me.next=2;break}return me.abrupt("return",[]);case 2:return me.next=4,(0,sn.IS)({name:L});case 4:if(Te=me.sent,me.t0=Te.data.info.Containers,!me.t0){me.next=10;break}return me.next=9,Promise.all(Object.entries(Te.data.info.Containers).filter(function(Je){var He=_()(Je,2),cn=He[0],Ve=He[1];return Ve.Name!=L}).map(function(){var Je=g()(d()().mark(function He(cn){var Ve,Gn,$e,qe,mn,Be,en;return d()().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(Ve=_()(cn,2),Gn=Ve[0],$e=Ve[1],$e.Name==L){We.next=9;break}return We.next=4,(0,Vn.jV)({md5:$e.Name});case 4:return mn=We.sent,Be=mn.data.info,en=(qe=ne.HostConfig.VolumesFrom)===null||qe===void 0?void 0:qe.includes($e.Name),en&&Be.Mounts&&Se.push.apply(Se,T()(Be.Mounts.map(function(zn){var nn;return(nn=zn.Destination)!==null&&nn!==void 0?nn:""}))),We.abrupt("return",{name:$e.Name,alise:Be&&(0,J.zY)(Be.Name),env:Be&&Be.Config.Env,volume:en});case 9:case"end":return We.stop()}},He)}));return function(He){return Je.apply(this,arguments)}}()));case 9:me.t0=me.sent;case 10:return me.abrupt("return",me.t0);case 11:case"end":return me.stop()}},I)}));return function(I,L){return i.apply(this,arguments)}}()(fe.data.siteName,r);case 26:un=de.sent,(ee=re.current)===null||ee===void 0||ee.setFieldsValue(s()({id:r==null?void 0:r.Id,siteTitle:fe.data.siteTitle,siteName:fe.data.siteName,hook:fe.data.env.hook,imageName:r==null?void 0:r.Config.Image,hostname:r==null?void 0:r.Config.Hostname,privileged:r==null?void 0:r.HostConfig.Privileged,useHostNetwork:(r==null?void 0:r.HostConfig.NetworkMode)=="host",publishAllPorts:r==null?void 0:r.HostConfig.PublishAllPorts,workDir:{value:r==null?void 0:r.Config.WorkingDir,useDefault:Ie.info.Config.WorkingDir==(r==null?void 0:r.Config.WorkingDir),default:Ie&&Ie.info.Config&&Ie.info.Config.WorkingDir},user:{value:r==null?void 0:r.Config.User,useDefault:Ie.info.Config.User==(r==null?void 0:r.Config.User),default:Ie.info.Config.User},command:{value:r==null||(Ae=r.Config.Cmd)===null||Ae===void 0?void 0:Ae.join(" "),useDefault:Ye().isEqual(Ie.info.Config.Cmd,r==null?void 0:r.Config.Cmd),default:((ve=Ie.info.Config)===null||ve===void 0?void 0:ve.Cmd)&&Ie.info.Config.Cmd.join(" ")},entrypoint:{value:r==null?void 0:r.Config.Entrypoint,useDefault:Ye().isEqual(Ie.info.Config.Entrypoint,r==null?void 0:r.Config.Entrypoint),default:((ge=Ie.info)===null||ge===void 0||(ge=ge.Config)===null||ge===void 0?void 0:ge.Entrypoint)&&Ie.info.Config.Entrypoint.join(" ")},shmsize:(0,J.Rk)(r==null?void 0:r.HostConfig.ShmSize),cpus:(0,J.PD)(r==null?void 0:r.HostConfig.NanoCpus),memory:(0,J.pM)(r==null?void 0:r.HostConfig.Memory),environment:(r==null?void 0:r.Config.Env)&&(0,X.oZ)(r.Config.Env,"="),label:function(i){return i&&Object.entries(i).map(function(I){var L=_()(I,2),ne=L[0],Te=L[1];return{name:ne,value:Te}})}(r==null?void 0:r.Config.Labels),volumes:function(i){return i==null?void 0:i.filter(function(I){var L;return!Se||Se.length==0||!Se.includes((L=I.Destination)!==null&&L!==void 0?L:"")}).map(function(I){return{host:I.Type=="bind"?I.Source:I.Name,dest:I.Destination,type:I.Type,permission:I.RW?"write":"readonly"}})}(r==null?void 0:r.Mounts),ports:(0,J.yi)(r),links:un,network:function(i){return i&&Object.entries(i).map(function(I){var L=_()(I,2),ne=L[0],Te=L[1],ye=Ne&&Ne.find(function(me){return me.Name==ne});return{name:ne,alise:"",ipV4:Te.IPAddress,subnet:"".concat(ye&&ye!==null&&ye!==void 0&&ye.IPAM.Config[0]?ye==null?void 0:ye.IPAM.Config[0].Subnet:"-","/").concat(Te.IPPrefixLen)}})}(r==null?void 0:r.NetworkSettings.Networks),restart:function(i){return i?{name:i==null?void 0:i.Name,maxAttempt:i==null?void 0:i.MaximumRetryCount}:{name:"no"}}(r==null?void 0:r.HostConfig.RestartPolicy),extraHosts:(0,X.oZ)(r==null?void 0:r.HostConfig.ExtraHosts,":"),autoRemove:r==null?void 0:r.HostConfig.AutoRemove,log:function(i,I){return{driver:(I=i==null?void 0:i.Type)!==null&&I!==void 0?I:"json-file",maxFile:(i==null?void 0:i.Config)&&i.Config["max-file"],maxSize:(i==null?void 0:i.Config)&&i.Config["max-size"]}}(r==null?void 0:r.HostConfig.LogConfig),dns:r==null||(Qe=r.HostConfig.Dns)===null||Qe===void 0?void 0:Qe.join(`
`),gpus:function(i){var I=i==null?void 0:i.find(function(ne){return ne.Driver=="nvidia"});if(!I)return{enable:!1};var L=I.Capabilities&&I.Capabilities[0];return{device:I.DeviceIDs,capabilities:L&&L.includes("gpu")?[]:L,enable:!0}}(r==null?void 0:r.HostConfig.DeviceRequests),device:function(i){return i==null?void 0:i.map(function(I){return{host:I.PathOnHost,dest:I.PathInContainer}})}(r==null?void 0:r.HostConfig.Devices),hostPid:(r==null?void 0:r.HostConfig.PidMode)=="host",capAdd:r==null?void 0:r.HostConfig.CapAdd,healthcheck:function(i,I,L,ne,Te,ye){if(!i)return{};var me=i!=null&&(I=i.Test)!==null&&I!==void 0&&I.includes("CMD-SHELL")?"CMD-SHELL":"CMD";return{interval:(L=i==null?void 0:i.Interval)!==null&&L!==void 0?L:30,timeout:(ne=i==null?void 0:i.Timeout)!==null&&ne!==void 0?ne:10,retries:(Te=i==null?void 0:i.Retries)!==null&&Te!==void 0?Te:3,cmd:i!=null&&i.Test?i==null||(ye=i.Test)===null||ye===void 0?void 0:ye.join(" "):"",shellType:me}}(r==null?void 0:r.Config.Healthcheck),useBridgeNetwork:function(i){return!!(i&&i.bridge)}(r==null?void 0:r.NetworkSettings.Networks),enableBindHost:r==null||(Xe=r.HostConfig.ExtraHosts)===null||Xe===void 0?void 0:Xe.some(function(i){return i.includes(":host-gateway")})},dn));case 28:case"end":return de.stop()}},he,null,[[3,10],[13,20]])}));return function(he){return le.apply(this,arguments)}}()).finally(function(){x.destroy()}))},[te]),(0,n.jsx)(N.Z.Provider,{value:{createFormRef:re,volumeListRef:Ce,domainRef:G,createEnvRef:Re,createLinkRef:Oe},children:(0,n.jsx)(E._z,{children:(0,n.jsx)(c.Z,{direction:"column",gutter:[0,10],children:(0,n.jsxs)(w.A,{submitter:{render:function(H,a){return(0,n.jsx)(h.S,{children:a})}},formRef:re,onFinish:function(){var _e=g()(d()().mark(function H(a){var le,he,fe,xe,ee;return d()().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:if(ee={id:a.id,siteTitle:a.siteTitle,siteName:a.siteName,hostname:a.hostname,imageName:a.imageName,environment:a.environment,links:a.links,ports:a.ports,volumes:a.volumes,network:a.network&&a.network.map(function(ge){return Ye().isArray(ge.alise)||(ge.alise=[ge.alise]),ge}),privileged:(le=a.privileged)!==null&&le!==void 0?le:!1,autoRemove:(he=a.autoRemove)!==null&&he!==void 0?he:!1,restartPolicy:a.restart,cpus:a.cpus,memory:a.memory,shmsize:(fe=a.shmsize)!==null&&fe!==void 0?fe:0,workDir:a.workDir&&!a.workDir.useDefault?a.workDir.value:"",user:a.user&&!a.user.useDefault?a.user.value:"",command:a.command&&!a.command.useDefault?a.command.value:"",entrypoint:a.entrypoint&&!a.entrypoint.useDefault?a.entrypoint.value:"",useHostNetwork:a.useHostNetwork,bindIpV6:a.bindIpV6,log:a.log,dns:a.dns,label:a.label,publishAllPorts:a.publishAllPorts,extraHosts:a.extraHosts,ipV4:a.ipV4,ipV6:a.ipV6,device:a.device,gpus:a.gpus,hook:a.hook,hostPid:a.hostPid,capAdd:a.capAdd,useBridgeNetwork:(xe=a.useBridgeNetwork)!==null&&xe!==void 0?xe:!0},!(!a.useBridgeNetwork&&!a.useHostNetwork&&(!a.network||a.network.length==0))){ve.next=4;break}return ce.error(k.format("createMessageNoBridgeNetworkMustHasUseNetwork")),ve.abrupt("return",!1);case 4:return a.useBridgeNetwork&&ee.network&&!ee.network.find(function(ge){return ge.name=="bridge"})&&ee.network.push({name:"bridge",alise:[],ipV4:""}),a.healthcheck&&a.healthcheck.cmd&&a.healthcheck.cmd!=""&&(ee.healthcheck=a.healthcheck),ve.next=8,(0,Fe.$G)(ee);case 8:return q("/app/list",{state:{page:localStorage.getItem("dpanel-page-app-list")}}),ve.abrupt("return",!0);case 10:case"end":return ve.stop()}},H)}));return function(H){return _e.apply(this,arguments)}}(),children:[(0,n.jsxs)(c.Z,{title:k.format("createTitle"),headerBordered:!0,children:[(0,n.jsx)(b.Z,{hidden:!0,name:"id"}),(0,n.jsx)(f.Z,{name:"siteTitle",label:k.format("createSiteTitle"),fieldProps:{onChange:function(H){var a="";if(H.target.value&&!te.get("id")){var le,he=(0,Ze.N9)(H.target.value.trim(),{toneType:"none",type:"array"});a=he.join(""),(le=re.current)===null||le===void 0||le.setFieldValue("siteName",a)}}},placeholder:k.format("createSiteTitleEmpty")}),(0,n.jsxs)(u.UW,{children:[(0,n.jsx)(f.Z,{width:"lg",name:"siteName",label:k.format("createSiteName"),required:!0,rules:[{required:!0}],placeholder:k.format("createSiteNameEmpty")}),(0,n.jsx)(f.Z,{label:"Hostname",name:"hostname",width:"md"})]}),(0,n.jsx)(Zn,{redeploy:!!te.get("id"),fromImageId:z})]}),(0,n.jsx)(m.Z,{offsetTop:50,children:(0,n.jsx)(c.Z,{style:{marginBottom:-20},children:(0,n.jsx)(v.Z,{activeKey:F,onChange:function(H){$(H),window.scrollTo(0,450)},items:W.option("createTabOption",["basic","link","run-command","resource","cap"]).map(function(_e){return{label:_e.label,key:_e.value}})})})}),(0,n.jsxs)(ke.Z,{show:F=="basic",children:[(0,n.jsx)(vn.Z,{ref:G,showBindHost:!0,showBindIpV6:!0,showBindAll:!0}),(0,n.jsx)(S.Z,{showAddButton:!0,showImportButton:!0,showCodeMode:!0,label:W.format("createEnvTitle"),ref:Re}),(0,n.jsx)(Y.Z,{showDefault:!0,ref:Ce}),(0,n.jsx)(l.Z,{name:["siteName","useHostNetwork"],children:function(H){var a=H.siteName,le=H.useHostNetwork;if(!le)return(0,n.jsx)(En,{})}})]}),(0,n.jsxs)(ke.Z,{show:F=="link",children:[(0,n.jsx)(l.Z,{name:["siteName","useHostNetwork"],children:function(H){var a=H.siteName,le=H.useHostNetwork;return le?(0,n.jsx)(ae.Z,{showIcon:!0,description:k.format("createNetworkDesc")}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Pe,{onAddEnv:function(fe,xe){var ee;(ee=Re.current)===null||ee===void 0||ee.addEnvItem(fe,xe)},ref:Oe}),(0,n.jsx)(fn,{showUseBridgeNetwork:!0,siteName:a}),(0,n.jsx)(pn.Z,{})]})}}),(0,n.jsx)(Wn,{})]}),(0,n.jsxs)(ke.Z,{show:F=="run-command",children:[(0,n.jsx)(Kn.Z,{defaultValue:"always",showLabel:!0}),(0,n.jsx)(Ke,{}),(0,n.jsx)(Fn.Z,{showCommand:!0,showEntrypoint:!0,showWorkDir:!0,showUser:!0}),(0,n.jsx)(Hn.Z,{}),(0,n.jsx)(Sn.Z,{}),(0,n.jsx)(Cn,{}),(0,n.jsx)(Ue.Z,{})]}),(0,n.jsxs)(ke.Z,{show:F=="resource",children:[(0,n.jsx)(Nn.Z,{showShmsize:!0}),(0,n.jsx)(wn,{})]}),(0,n.jsx)(ke.Z,{show:F=="cap",children:(0,n.jsx)(jn.Z,{})})]},"form")})})})}},97961:function(Ee,y,e){e.d(y,{GH:function(){return E},_2:function(){return w},fN:function(){return C},ii:function(){return T},vC:function(){return O}});var j=e(15009),s=e.n(j),Z=e(99289),d=e.n(Z),p=e(82346),T=[{name:"amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"i386",arch:"386",search:[]},{name:"arm/v6",arch:"arm",search:[]},{name:"arm/v7",arch:"arm",search:[]},{name:"arm/v8",arch:"arm64",search:[]},{name:"ppc64le",arch:"ppc64le",search:[]},{name:"riscv64",arch:"riscv64",search:[]}];function C(u){return g.apply(this,arguments)}function g(){return g=d()(s()().mark(function u(l){return s()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,p.request)("/api/app/image/create-by-dockerfile",{method:"POST",data:l}));case 1:case"end":return v.stop()}},u)})),g.apply(this,arguments)}function O(u){return _.apply(this,arguments)}function _(){return _=d()(s()().mark(function u(l){return s()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,p.request)("/api/app/image/import-by-container-tar",{method:"POST",data:l}));case 1:case"end":return v.stop()}},u)})),_.apply(this,arguments)}function E(u){return c.apply(this,arguments)}function c(){return c=d()(s()().mark(function u(l){return s()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,p.request)("/api/app/image/import-by-image-tar",{method:"POST",data:l}));case 1:case"end":return v.stop()}},u)})),c.apply(this,arguments)}function w(u){return h.apply(this,arguments)}function h(){return h=d()(s()().mark(function u(l){return s()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,p.request)("/api/common/attach/delete",{method:"POST",data:l});case 2:return v.abrupt("return",v.sent);case 3:case"end":return v.stop()}},u)})),h.apply(this,arguments)}function b(){return f.apply(this,arguments)}function f(){return f=_asyncToGenerator(_regeneratorRuntime().mark(function u(){return _regeneratorRuntime().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",request("/api/app/image/get-template-list",{method:"POST"}));case 1:case"end":return m.stop()}},u)})),f.apply(this,arguments)}},18148:function(Ee,y,e){e.d(y,{$q:function(){return c},Fj:function(){return v},KG:function(){return T},KX:function(){return P},T8:function(){return _},Xn:function(){return g},ao:function(){return h},c5:function(){return l},c7:function(){return f}});var j=e(15009),s=e.n(j),Z=e(99289),d=e.n(Z),p=e(82346);function T(t){return C.apply(this,arguments)}function C(){return C=d()(s()().mark(function t(M){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,p.request)("/api/app/image/get-list",{method:"POST",data:M}));case 1:case"end":return o.stop()}},t)})),C.apply(this,arguments)}function g(t){return O.apply(this,arguments)}function O(){return O=d()(s()().mark(function t(M){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,p.request)("/api/app/image/get-list-build",{method:"POST",data:M}));case 1:case"end":return o.stop()}},t)})),O.apply(this,arguments)}function _(t){return E.apply(this,arguments)}function E(){return E=d()(s()().mark(function t(M){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,p.request)("/api/app/image/get-build-task",{method:"POST",data:M});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},t)})),E.apply(this,arguments)}function c(t){return w.apply(this,arguments)}function w(){return w=d()(s()().mark(function t(M){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,p.request)("/api/app/image/delete-build-task",{method:"POST",data:M});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},t)})),w.apply(this,arguments)}function h(t){return b.apply(this,arguments)}function b(){return b=d()(s()().mark(function t(M){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,p.request)("/api/app/image/image-delete",{method:"POST",data:M});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},t)})),b.apply(this,arguments)}function f(t){return u.apply(this,arguments)}function u(){return u=d()(s()().mark(function t(M){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,p.request)("/api/app/image/image-prune",{method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},t)})),u.apply(this,arguments)}function l(){return m.apply(this,arguments)}function m(){return m=d()(s()().mark(function t(){return s()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,(0,p.request)("/api/app/image/build-prune",{method:"POST"});case 2:return B.abrupt("return",B.sent);case 3:case"end":return B.stop()}},t)})),m.apply(this,arguments)}function v(t){return ae.apply(this,arguments)}function ae(){return ae=d()(s()().mark(function t(M){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,p.request)("/api/app/image/update-title",{method:"POST",data:M});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},t)})),ae.apply(this,arguments)}function P(t){return N.apply(this,arguments)}function N(){return N=d()(s()().mark(function t(M){return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,p.request)("/api/app/image/tag-sync",{method:"POST",data:M}));case 1:case"end":return o.stop()}},t)})),N.apply(this,arguments)}}}]);
