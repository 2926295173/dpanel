"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1180],{88484:function(X,T,e){e.d(T,{Z:function(){return P}});var p=e(87462),d=e(67294),M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},S=M,Z=e(84089),R=function(t,D){return d.createElement(Z.Z,(0,p.Z)({},t,{ref:D,icon:S}))},x=d.forwardRef(R),P=x},52688:function(X,T,e){var p=e(1413),d=e(45987),M=e(67294),S=e(35510),Z=e(85893),R=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],x=M.forwardRef(function(P,m){var t=P.fieldProps,D=P.unCheckedChildren,I=P.checkedChildren,L=P.proFieldProps,g=(0,d.Z)(P,R);return(0,Z.jsx)(S.Z,(0,p.Z)({valueType:"switch",fieldProps:(0,p.Z)({unCheckedChildren:D,checkedChildren:I},t),ref:m,valuePropName:"checked",proFieldProps:L,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},g))});T.Z=x},5966:function(X,T,e){var p=e(97685),d=e(1413),M=e(45987),S=e(21770),Z=e(99859),R=e(55241),x=e(97435),P=e(67294),m=e(35510),t=e(85893),D=["fieldProps","proFieldProps"],I=["fieldProps","proFieldProps"],L="text",g=function(s){var n=s.fieldProps,O=s.proFieldProps,h=(0,M.Z)(s,D);return(0,t.jsx)(m.Z,(0,d.Z)({valueType:L,fieldProps:n,filedConfig:{valueType:L},proFieldProps:O},h))},F=function(s){var n=(0,S.Z)(s.open||!1,{value:s.open,onChange:s.onOpenChange}),O=(0,p.Z)(n,2),h=O[0],j=O[1];return(0,t.jsx)(Z.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(w){var $,r=w.getFieldValue(s.name||[]);return(0,t.jsx)(R.Z,(0,d.Z)((0,d.Z)({getPopupContainer:function(a){return a&&a.parentNode?a.parentNode:a},onOpenChange:function(a){return j(a)},content:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[($=s.statusRender)===null||$===void 0?void 0:$.call(s,r),s.strengthText?(0,t.jsx)("div",{style:{marginTop:10},children:(0,t.jsx)("span",{children:s.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},s.popoverProps),{},{open:h,children:s.children}))}})},U=function(s){var n=s.fieldProps,O=s.proFieldProps,h=(0,M.Z)(s,I),j=(0,P.useState)(!1),V=(0,p.Z)(j,2),w=V[0],$=V[1];return n!=null&&n.statusRender&&h.name?(0,t.jsx)(F,{name:h.name,statusRender:n==null?void 0:n.statusRender,popoverProps:n==null?void 0:n.popoverProps,strengthText:n==null?void 0:n.strengthText,open:w,onOpenChange:$,children:(0,t.jsx)("div",{children:(0,t.jsx)(m.Z,(0,d.Z)({valueType:"password",fieldProps:(0,d.Z)((0,d.Z)({},(0,x.Z)(n,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(l){var a;n==null||(a=n.onBlur)===null||a===void 0||a.call(n,l),$(!1)},onClick:function(l){var a;n==null||(a=n.onClick)===null||a===void 0||a.call(n,l),$(!0)}}),proFieldProps:O,filedConfig:{valueType:L}},h))})}):(0,t.jsx)(m.Z,(0,d.Z)({valueType:"password",fieldProps:n,proFieldProps:O,filedConfig:{valueType:L}},h))},_=g;_.Password=U,_.displayName="ProFormComponent",T.Z=_},80821:function(X,T,e){e.d(T,{Z:function(){return m}});var p=e(5574),d=e.n(p),M=e(24963),S=e(86738),Z=e(28036),R=e(83062),x=e(67294),P=e(85893);function m(t){var D=(0,x.useState)(!1),I=d()(D,2),L=I[0],g=I[1],F=(0,x.useContext)(M.Z),U=F.lang,_=F.notice,W=F.message,s=function(){g(!0);var O=t.action();O instanceof Promise?O.then(function(h){if(g(!1),h){typeof t.onSuccess=="function"&&t.onSuccess(h);var j="";t.messageSuccess?typeof t.messageSuccess=="function"?j=t.messageSuccess(h):j=t.messageSuccess.indexOf("notification.")==0?U(t.messageSuccess):t.messageSuccess:j=U("notification.finish"),t.asynced?W.info(j):W.success(j)}}).catch(function(h){g(!1),typeof t.onError=="function"&&t.onError(h)}):g(!1)};return t.confirm?(0,P.jsx)(S.Z,{style:{width:500},title:t.confirmTitle?t.confirmTitle:U("notification.title.tip"),description:typeof t.confirm=="string"&&t.confirm.indexOf("notification.")==0?U(t.confirm):t.confirm,onConfirm:s,okText:"Yes",cancelText:"No",children:(0,P.jsx)(Z.ZP,{block:t.block,disabled:t.disabled,icon:t.icon,loading:L,danger:t.danger,type:t.type,children:t.children})}):(0,P.jsx)(R.Z,{title:t.tips,children:(0,P.jsx)(Z.ZP,{block:t.block,style:t.ghost?{padding:0,height:"auto"}:{},disabled:t.disabled,icon:t.icon,loading:L,onClick:s,danger:t.danger,type:t.type,children:t.children})})}},12491:function(X,T,e){e.d(T,{Z:function(){return P}});var p=e(24963),d=e(88484),M=e(62370),S=e(31418),Z=e(28036),R=e(67294),x=e(85893);function P(m){var t=(0,R.useContext)(p.Z),D=t.message,I=t.notice,L=t.lang,g=(0,R.useRef)(null),F=S.Z.useApp(),U=function(){g.current&&(g.current.click(),g.current.onchange=function(W){if(!W||!W.target)return"";var s=new FileReader;s.onload=function(O){var h,j,V=(h=O.target)===null||h===void 0?void 0:h.result;if(m.onLoad)try{m.onLoad&&m.onLoad(V)}catch(w){I.error(w);return}typeof m.onImport=="function"&&(D.success("\u6210\u529F\u5BFC\u5165 ".concat(m.title)),m.onImport(V)),(j=g.current)!==null&&j!==void 0&&j.value&&(g.current.value="")};var n=W.target;if(n.files)try{s.readAsText(n.files[0])}catch(O){I.error("\u5BFC\u5165\u6587\u4EF6\u5FC5\u987B\u662F\u6587\u672C\u7C7B\u578B")}})};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(M.Z,{children:(0,x.jsx)(Z.ZP,{icon:(0,x.jsx)(d.Z,{}),block:!0,onClick:U,children:m.title})}),(0,x.jsx)("input",{style:{display:"none"},type:"file",ref:g,name:"importFileInput"})]})}},24963:function(X,T,e){var p=e(67294),d=(0,p.createContext)({});T.Z=d},53893:function(X,T,e){e.r(T),e.d(T,{default:function(){return o}});var p=e(15009),d=e.n(p),M=e(99289),S=e.n(M),Z=e(5574),R=e.n(Z),x=e(80821),P=e(184),m=e(5966),t=e(52688),D=e(97462),I=e(62370),L=e(28036),g=e(86250),F=e(67294),U=e(91845),_=e(87662),W=e(24963),s=e(12491),n=e(85893),O=(0,F.forwardRef)(function(c,Y){var H;(0,F.useImperativeHandle)(Y,function(){return{edit:function(u){var v;(v=f.current)===null||v===void 0||v.setFieldsValue({name:u.name,title:u.title,address:u.address,enableTLS:u.enableTLS,tlsCa:u.tlsCa,tlsCert:u.tlsCert,tlsKey:u.tlsKey,enableComposePath:u.enableComposePath}),K(!0),i(u.name)}}});var N=(0,F.useState)(!1),z=R()(N,2),Q=z[0],K=z[1],f=(0,F.useRef)(),C=(0,F.useState)(""),y=R()(C,2),A=y[0],i=y[1],q=(0,F.useContext)(W.Z),J=q.lang;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(L.ZP,{onClick:function(){var u;i(""),(u=f.current)===null||u===void 0||u.resetFields(),K(!0)},type:"primary",children:"\u6DFB\u52A0\u670D\u52A1\u7AEF"}),(0,n.jsxs)(P.a,{drawerProps:{forceRender:!0},onOpenChange:function(u){K(u)},open:Q,width:800,formRef:f,title:(H=f.current)!==null&&H!==void 0&&H.getFieldValue&&f.current.getFieldValue("name")=="local"?"\u914D\u7F6E\u9ED8\u8BA4Docker\u670D\u52A1\u7AEF":"\u6DFB\u52A0\u8FDC\u7A0BDocker\u670D\u52A1\u7AEF",onFinish:function(){var G=S()(d()().mark(function u(v){var E,B;return d()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return E={name:v.name,title:v.title,address:v.address,tlsCa:v.tlsCa,tlsCert:v.tlsCert,tlsKey:v.tlsKey,enableTLS:v.enableTLS,enableComposePath:v.enableComposePath,composePath:v.enableComposePath?v.composePath:""},k.next=3,(0,_.ad)(E);case 3:return B=k.sent,c.onFinish&&c.onFinish(),k.abrupt("return",!0);case 6:case"end":return k.stop()}},u)}));return function(u){return G.apply(this,arguments)}}(),children:[(0,n.jsx)(m.Z,{label:"\u540D\u79F0",name:"title",required:!0,rules:[{required:!0}],fieldProps:{onChange:function(u){var v="";if(u.target.value&&!A){var E,B=(0,U.N9)(u.target.value.trim(),{toneType:"none",type:"array"});v=B.join(""),(E=f.current)===null||E===void 0||E.setFieldValue("name",v)}}}}),(0,n.jsx)(m.Z,{label:"\u6807\u8BC6",name:"name",required:!0,disabled:A!="",rules:[{required:!0}],placeholder:"\u6807\u8BC6Docker\u73AF\u5883\uFF0C\u53EA\u5141\u8BB8\u4E3A\u82F1\u6587\u6216\u662F\u6570\u5B57"}),(0,n.jsx)(m.Z,{label:"Docker Api \u5730\u5740",name:"address",tooltip:"\u8FDE\u63A5\u8FDC\u7A0B Docker \u65F6\u8BF7\u5148\u5F00\u542F Api \u5730\u5740\u8BBF\u95EE\u3002",placeholder:"\u4F8B\u5982\uFF1Aunix:///var/run/docker.sock\u3001tcp://192.16.0.5:2375"}),(0,n.jsxs)(g.Z,{gap:80,children:[(0,n.jsx)(t.Z,{label:"\u542F\u7528TLS",name:"enableTLS",tooltip:"\u751F\u6210\u6559\u7A0B\u89C1\uFF1Ahttps://donknap.github.io/dpanel-docs/#/zh-cn/manual/remote"}),(0,n.jsx)(D.Z,{name:["enableComposePath","name"],children:function(u){var v=u.name;if(v!="local")return(0,n.jsx)(t.Z,{label:J("system.env.createEnableComposePath"),name:"enableComposePath",tooltip:"\u5F00\u542F\u72EC\u7ACBcompose\u914D\u7F6E\u540E\uFF0C\u5207\u6362\u8FDC\u7A0B docker \u5BA2\u6237\u7AEF\u65F6\u5C06\u53EA\u4F1A\u8BFB\u53D6\u8BE5\u73AF\u5883\u4E13\u5C5E\u76EE\u5F55\u4E0B\u7684 compose \u4EFB\u52A1"})}})]}),(0,n.jsx)(D.Z,{name:["enableComposePath","name"],children:function(u){var v=u.enableComposePath,E=u.name;if(v)return(0,n.jsx)(m.Z,{label:J("system.env.createComposePath"),name:"composePath",disabled:!0,fieldProps:{value:"/dpanel/compose/compose-".concat(E!=null?E:"")}})}}),(0,n.jsx)(D.Z,{name:["enableTLS"],children:function(u){var v=u.enableTLS;if(v)return(0,n.jsxs)(g.Z,{gap:20,justify:"start",children:[(0,n.jsx)(I.Z,{name:"tlsCa",label:"\u4E0A\u4F20\u5BA2\u6237\u7AEF\u8BC1\u4E66",children:(0,n.jsx)(s.Z,{title:"\u4E0A\u4F20CA\u8BC1\u4E66 ca.pem",onImport:function(B){var b;return(b=f.current)===null||b===void 0||b.setFieldValue("tlsCa",B),!0},onLoad:function(B){if(B.indexOf("CERTIFICATE")<0)throw new Error("\u5BFC\u5165ca.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})}),(0,n.jsx)(I.Z,{name:"tlsCert",label:" ",children:(0,n.jsx)(s.Z,{title:"\u4E0A\u4F20\u8BC1\u4E66\u6587\u4EF6 cert.pem",onImport:function(B){var b;return(b=f.current)===null||b===void 0||b.setFieldValue("tlsCert",B),!0},onLoad:function(B){if(B.indexOf("CERTIFICATE")<0)throw new Error("\u5BFC\u5165cert.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})}),(0,n.jsx)(I.Z,{label:" ",name:"tlsKey",children:(0,n.jsx)(s.Z,{title:"\u4E0A\u4F20\u5BC6\u94A5\u6587\u4EF6 key.pem",onImport:function(B){var b;return(b=f.current)===null||b===void 0||b.setFieldValue("tlsKey",B),!0},onLoad:function(B){if(B.indexOf("PRIVATE")<0)throw new Error("\u5BFC\u5165key.pem\u8BC1\u4E66\u9519\u8BEF");return!0}})})]})}})]})]})}),h=O,j=e(86548),V=e(90078),w=e(10641),$=e(82346),r=e(42075),l=e(96074),a=e(25593);function o(){var c=(0,F.useRef)(),Y=(0,F.useRef)(),H=(0,$.useSearchParams)(),N=R()(H,2),z=N[0],Q=N[1];return(0,n.jsx)(V._z,{header:{extra:[(0,n.jsx)(h,{ref:Y,onFinish:S()(d()().mark(function K(){var f,C,y;return d()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!z.get("id")){i.next=6;break}return i.next=3,(0,_.vC)({name:(y=z.get("id"))!==null&&y!==void 0?y:"local"});case 3:return Q(""),window.location.href="/dpanel/ui/home",i.abrupt("return");case 6:!((f=c.current)===null||f===void 0)&&f.reloadAndRest&&((C=c.current)===null||C===void 0||C.reloadAndRest());case 7:case"end":return i.stop()}},K)}))},"dockerEnvCreate")]},children:(0,n.jsx)(w.Z,{rowKey:"name",columns:[{title:"\u6807\u8BC6",dataIndex:"name"},{title:"\u540D\u79F0",dataIndex:"title"},{title:"\u5730\u5740",dataIndex:"address"},{title:"\u64CD\u4F5C",width:100,search:!1,render:function(f,C,y,A,i){return(0,n.jsx)(r.Z,{split:(0,n.jsx)(l.Z,{type:"vertical"}),children:(0,n.jsx)(a.Z.Link,{onClick:function(){var J;(J=Y.current)===null||J===void 0||J.edit(C)},children:(0,n.jsx)(j.Z,{})},C.name)})}}],pagination:!1,request:S()(d()().mark(function K(){var f;return d()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,_.Kg)();case 2:return f=y.sent,z.get("id")&&f.data.list.map(function(A){if(A.name==z.get("id")){var i;(i=Y.current)===null||i===void 0||i.edit(A)}}),y.abrupt("return",{data:f.data.list,total:f.data.list.length});case 5:case"end":return y.stop()}},K)})),search:!1,rowSelection:{defaultSelectedRowKeys:[],alwaysShowAlert:!0,getCheckboxProps:function(f){return{disabled:f.default}}},actionRef:c,tableAlertOptionRender:function(f){var C=f.selectedRowKeys;return(0,n.jsx)(r.Z,{size:16,children:(0,n.jsx)(x.Z,{danger:!0,type:"primary",action:function(){return(0,_._g)({name:C})},onSuccess:function(){var A,i;return!((A=c.current)===null||A===void 0)&&A.reloadAndRest&&((i=c.current)===null||i===void 0||i.reloadAndRest()),!0},onError:function(){var A,i;return!((A=c.current)===null||A===void 0)&&A.reset&&((i=c.current)===null||i===void 0||i.reset()),!0},confirm:"notification.confirm.title",children:"\u6279\u91CF\u5220\u9664"})})}})})}},86250:function(X,T,e){e.d(T,{Z:function(){return $}});var p=e(67294),d=e(93967),M=e.n(d),S=e(98423),Z=e(98065),R=e(53124),x=e(83559),P=e(83262);const m=["wrap","nowrap","wrap-reverse"],t=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],D=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],I=(r,l)=>{const a=l.wrap===!0?"wrap":l.wrap;return{[`${r}-wrap-${a}`]:a&&m.includes(a)}},L=(r,l)=>{const a={};return D.forEach(o=>{a[`${r}-align-${o}`]=l.align===o}),a[`${r}-align-stretch`]=!l.align&&!!l.vertical,a},g=(r,l)=>{const a={};return t.forEach(o=>{a[`${r}-justify-${o}`]=l.justify===o}),a};function F(r,l){return M()(Object.assign(Object.assign(Object.assign({},I(r,l)),L(r,l)),g(r,l)))}var U=F;const _=r=>{const{componentCls:l}=r;return{[l]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},W=r=>{const{componentCls:l}=r;return{[l]:{"&-gap-small":{gap:r.flexGapSM},"&-gap-middle":{gap:r.flexGap},"&-gap-large":{gap:r.flexGapLG}}}},s=r=>{const{componentCls:l}=r,a={};return m.forEach(o=>{a[`${l}-wrap-${o}`]={flexWrap:o}}),a},n=r=>{const{componentCls:l}=r,a={};return D.forEach(o=>{a[`${l}-align-${o}`]={alignItems:o}}),a},O=r=>{const{componentCls:l}=r,a={};return t.forEach(o=>{a[`${l}-justify-${o}`]={justifyContent:o}}),a},h=()=>({});var j=(0,x.I$)("Flex",r=>{const{paddingXS:l,padding:a,paddingLG:o}=r,c=(0,P.IX)(r,{flexGapSM:l,flexGap:a,flexGapLG:o});return[_(c),W(c),s(c),n(c),O(c)]},h,{resetStyle:!1}),V=function(r,l){var a={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&l.indexOf(o)<0&&(a[o]=r[o]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(r);c<o.length;c++)l.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(r,o[c])&&(a[o[c]]=r[o[c]]);return a},$=p.forwardRef((r,l)=>{const{prefixCls:a,rootClassName:o,className:c,style:Y,flex:H,gap:N,children:z,vertical:Q=!1,component:K="div"}=r,f=V(r,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:C,direction:y,getPrefixCls:A}=p.useContext(R.E_),i=A("flex",a),[q,J,G]=j(i),u=Q!=null?Q:C==null?void 0:C.vertical,v=M()(c,o,C==null?void 0:C.className,i,J,G,U(i,r),{[`${i}-rtl`]:y==="rtl",[`${i}-gap-${N}`]:(0,Z.n)(N),[`${i}-vertical`]:u}),E=Object.assign(Object.assign({},C==null?void 0:C.style),Y);return H&&(E.flex=H),N&&!(0,Z.n)(N)&&(E.gap=N),q(p.createElement(K,Object.assign({ref:l,className:v,style:E},(0,S.Z)(f,["justify","wrap","align"])),z))})}}]);
