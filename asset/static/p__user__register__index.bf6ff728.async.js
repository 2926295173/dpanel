"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9907],{88641:function(w,C,e){e.d(C,{Z:function(){return E}});var I=e(87462),i=e(67294),F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"},D=F,v=e(84089),h=function(c,u){return i.createElement(v.Z,(0,I.Z)({},c,{ref:u,icon:D}))},U=i.forwardRef(h),E=U},67719:function(w,C,e){e.r(C),e.d(C,{default:function(){return L}});var I=e(15009),i=e.n(I),F=e(99289),D=e.n(F),v=e(5574),h=e.n(v),U=e(68262),E=e(9361),Z=e(86250),c=e(45360),u=e(67294),P=e(88360),p=e(29177),R=e(88641),B=e(94149),O=e(5966),y=e(97462),W=e(92398),r=e(85893);function b(d){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(W.Z,{centered:!0,activeKey:"register",items:[{icon:(0,r.jsx)(P.Z,{}),key:"register",label:"\u7528\u6237\u6CE8\u518C\u6216\u91CD\u7F6E"}]}),(0,r.jsx)(O.Z,{name:"username",fieldProps:{size:"large",prefix:(0,r.jsx)(p.Z,{className:"prefixIcon"}),disabled:!0,defaultValue:d.username}}),(0,r.jsx)(O.Z,{name:"email",fieldProps:{size:"large",prefix:(0,r.jsx)(R.Z,{className:"prefixIcon"}),disabled:!!d.email||!1,defaultValue:d.email},placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1",rules:d.email?[]:[{required:!0,message:"\u8BF7\u8F93\u5165\u90AE\u7BB1\uFF01"},{type:"email",message:"\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E\uFF01"}]}),(0,r.jsx)(O.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,r.jsx)(B.Z,{className:"prefixIcon"})},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:d.securityPassword?[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"},{min:8,message:"\u5BC6\u7801\u957F\u5EA6\u4E0D\u80FD\u5C0F\u4E8E8\u4F4D\uFF01"},{pattern:/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,message:"\u5BC6\u7801\u5FC5\u987B\u5305\u542B\u5927\u5C0F\u5199\u5B57\u6BCD\u548C\u6570\u5B57\uFF01"}]:[]},"password"),(0,r.jsx)(y.Z,{name:["password"],children:function(){return(0,r.jsx)(O.Z.Password,{fieldProps:{size:"large",prefix:(0,r.jsx)(B.Z,{className:"prefixIcon"})},placeholder:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801",name:"confirmPassword",dependencies:["password"],rules:[{required:!0,message:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801\uFF01"},function(M){var n=M.getFieldValue;return{validator:function(o,t){return!t||n("password")===t?Promise.resolve():Promise.reject(new Error("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4"))}}}]},"confirmPassword")}}),d.token&&(0,r.jsx)("input",{type:"hidden",name:"token",value:d.token})]})}var K=e(68602),A=e(82346);function G(d){try{var j=d.split(".");if(j.length!==3)throw new Error("JWT\u683C\u5F0F\u4E0D\u6B63\u786E");var M=j[1],n=M.replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(n).split("").map(function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(s)}catch(o){return console.error("JWT\u89E3\u6790\u9519\u8BEF:",o),null}}var L=function(){var d=E.Z.useToken(),j=d.token,M=(0,A.useSearchParams)(),n=h()(M,1),s=n[0],o=G(s.get("token")||""),t=(0,u.useState)(),l=h()(t,2),a=l[0],x=l[1],f=o.securityPassword,T=(0,u.useState)({token:s.get("token")||"",username:o.username||"",email:o.email||""}),g=h()(T,1),m=g[0];return(0,u.useEffect)(function(){window.document.title="DPanel - Docker \u7BA1\u7406\u9762\u677F"},[]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(Z.Z,{justify:"center",align:"center",style:{height:"100vh",background:a&&a.themeUserConfig&&a.themeUserConfig.bgImage&&a.themeUserConfig.bgImage.src?"url(".concat(a.themeUserConfig.bgImage.src,")"):"".concat(j.colorBgElevated,"dd")},children:(0,r.jsx)(U.U,{onFinish:function(){var N=D()(i()().mark(function J(z){return i()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,K.MS)({password:z.password,confirmPassword:z.confirmPassword,email:z.email||m.email,token:m.token});case 2:c.ZP.success("\u6CE8\u518C\u6210\u529F"),A.history.replace("/user/login");case 4:case"end":return S.stop()}},J)}));return function(J){return N.apply(this,arguments)}}(),containerStyle:{background:"transparent",height:"auto"},logo:"",title:(0,r.jsx)("a",{href:"https://dpanel.cc",target:"_blank",children:(0,r.jsx)("img",{src:a&&a.themeUserConfig&&a.themeUserConfig.loginLogo?a.themeUserConfig.loginLogo:"/dpanel/static/asset/logo.png",width:"350"})}),subTitle:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsx)("br",{})]}),children:(0,r.jsx)(b,{securityPassword:f,token:m.token,username:m.username,email:m.email})})})})}},45360:function(w,C,e){var I=e(74902),i=e(67294),F=e(66968),D=e(53124),v=e(21532),h=e(69711),U=e(66277),E=e(16474),Z=e(84926);let c=null,u=n=>n(),P=[],p={};function R(){const{getContainer:n,duration:s,rtl:o,maxCount:t,top:l}=p,a=(n==null?void 0:n())||document.body;return{getContainer:()=>a,duration:s,rtl:o,maxCount:t,top:l}}const B=i.forwardRef((n,s)=>{const{messageConfig:o,sync:t}=n,{getPrefixCls:l}=(0,i.useContext)(D.E_),a=p.prefixCls||l("message"),x=(0,i.useContext)(F.J),[f,T]=(0,E.K)(Object.assign(Object.assign(Object.assign({},o),{prefixCls:a}),x.message));return i.useImperativeHandle(s,()=>{const g=Object.assign({},f);return Object.keys(g).forEach(m=>{g[m]=function(){return t(),f[m].apply(f,arguments)}}),{instance:g,sync:t}}),T}),O=i.forwardRef((n,s)=>{const[o,t]=i.useState(R),l=()=>{t(R)};i.useEffect(l,[]);const a=(0,v.w6)(),x=a.getRootPrefixCls(),f=a.getIconPrefixCls(),T=a.getTheme(),g=i.createElement(B,{ref:s,sync:l,messageConfig:o});return i.createElement(v.ZP,{prefixCls:x,iconPrefixCls:f,theme:T},a.holderRender?a.holderRender(g):g)});function y(){if(!c){const n=document.createDocumentFragment(),s={fragment:n};c=s,u(()=>{(0,h.x)()(i.createElement(O,{ref:t=>{const{instance:l,sync:a}=t||{};Promise.resolve().then(()=>{!s.instance&&l&&(s.instance=l,s.sync=a,y())})}}),n)});return}c.instance&&(P.forEach(n=>{const{type:s,skipped:o}=n;if(!o)switch(s){case"open":{u(()=>{const t=c.instance.open(Object.assign(Object.assign({},p),n.config));t==null||t.then(n.resolve),n.setCloseFn(t)});break}case"destroy":u(()=>{c==null||c.instance.destroy(n.key)});break;default:u(()=>{var t;const l=(t=c.instance)[s].apply(t,(0,I.Z)(n.args));l==null||l.then(n.resolve),n.setCloseFn(l)})}}),P=[])}function W(n){p=Object.assign(Object.assign({},p),n),u(()=>{var s;(s=c==null?void 0:c.sync)===null||s===void 0||s.call(c)})}function r(n){const s=(0,Z.J)(o=>{let t;const l={type:"open",config:n,resolve:o,setCloseFn:a=>{t=a}};return P.push(l),()=>{t?u(()=>{t()}):l.skipped=!0}});return y(),s}function b(n,s){const o=(0,v.w6)(),t=(0,Z.J)(l=>{let a;const x={type:n,args:s,resolve:l,setCloseFn:f=>{a=f}};return P.push(x),()=>{a?u(()=>{a()}):x.skipped=!0}});return y(),t}const K=n=>{P.push({type:"destroy",key:n}),y()},A=["success","info","warning","error","loading"],L={open:r,destroy:K,config:W,useMessage:E.Z,_InternalPanelDoNotUseOrYouWillBeFired:U.ZP};A.forEach(n=>{L[n]=function(){for(var s=arguments.length,o=new Array(s),t=0;t<s;t++)o[t]=arguments[t];return b(n,o)}});const d=()=>{};let j=null,M=null;C.ZP=L}}]);
